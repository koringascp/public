/*! This file includes third-party software, governed by the licenses described here: https://steamcommunity.com/public/javascript/webui/friends.licenses.txt */










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
var CLSTAMP='6096481';
!function(e){function t(t){for(var o,r,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(p&&p(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={8:0},i={8:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{3:1,4:1}[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="../../css/webui/"+({3:"broadcast",4:"broadcastapp"}[e]||e)+".css",i=s.p+o,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var l=(p=a[c]).getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(l===o||l===i))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var p;if((l=(p=u[c]).getAttribute("data-href"))===o||l===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.request=o,delete r[e],m.parentNode.removeChild(m),n(a)},m.href=i,document.getElementsByTagName("head")[0].appendChild(m)})).then((function(){r[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+({3:"broadcast",4:"broadcastapp"}[e]||e)+".js"}(e);var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}i[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=l;a.push(["gfbn",2,0,1]),n()}({"+M9t":function(e,t,n){"use strict";n.d(t,"d",(function(){return A})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return L})),n.d(t,"c",(function(){return P}));var o=n("mrSG"),r=n("tkkQ"),i=n("4HGb"),a=n("lqmi"),s=n("Kqva"),c=n("XCHq"),l=n("s+DT"),u=n("yovy"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.UpdateFromMessage=function(e,t){if(0!=(1&e)&&(this.m_bStatusInitialized=!0,this.m_ePersonaState=t.persona_state()||0,0!=this.m_ePersonaState?(this.m_unGamePlayedAppID=t.game_played_app_id()||0,this.m_gameid=t.gameid()||"0",this.m_strGameExtraInfo=t.game_name()||"",this.m_unGameServerIP=t.game_server_ip()||0,this.m_unGameServerPort=t.game_server_port()||0,this.m_game_lobby_id=t.game_lobby_id()||""):this.Reset()),0!=(2&e)){this.m_bNameInitialized=!0;var n=t.player_name()||"";this.m_bPlayerNamePending=this.m_bPlayerNamePending&&this.m_strPlayerName===n,this.m_strPlayerName=n}if(0!=(64&e)&&(this.m_rtLastSeenOnline=t.last_seen_online()||t.last_logoff()||0),0!=(16&e)){var o=t.avatar_hash(),r=!0;if(o){for(var i=0;i<o.length&&r;i++)r=!o[i];this.m_strAvatarHash=r?u.b:Object(s.a)(o)}}if(void 0!==t.persona_state_flags()&&(this.m_unPersonaStateFlags=t.persona_state_flags()),0!=(4096&e)){this.m_mapRichPresence.clear();for(var a=0,p=t.rich_presence();a<p.length;a++){var m=p[a];this.m_mapRichPresence.set(m.key().toLowerCase(),m.value())}}if(0!=(8192&e)&&(this.m_broadcastId=t.broadcast_id()),0!=(16384&e)){var d=l.a.InitFromAccountID(t.watching_broadcast_accountid()).ConvertTo64BitString();d&&c.b.stream[d]?(this.m_broadcastAccountId=t.watching_broadcast_accountid(),this.m_broadcastAppId=t.watching_broadcast_appid(),this.m_broadcastViewerCount=t.watching_broadcast_viewers(),this.m_strBroadcastTitle=t.watching_broadcast_title()):(this.m_broadcastAccountId=0,this.m_broadcastAppId=0,this.m_broadcastViewerCount=0,this.m_strBroadcastTitle="")}this.m_bNameInitialized&&this.m_bStatusInitialized&&(this.m_bInitialized=!0)},t}(a.b),m=n("OJz+"),d=n("RBVV"),h=n("R/D/"),f=n("BpBa"),_=n("p7Z6"),g=n("nRcY"),b=n("HxRt"),v=n("3Liw"),y=n("KrQr"),S=n("lgHT"),C=n("LAqV"),O=n("2vnA"),I=n("XaMz"),E=function(){function e(e,t){this.m_bInitialized=!1,this.m_bGotInitialState=!1,this.m_strClanName="",this.m_strClanTag="",this.m_strAvatarHash=a.c,this.m_eClanAccountFlags=0,this.m_cMemberCount=0,this.m_cUsersOnline=0,this.m_cUsersInGame=0,this.m_cChatRoomMembers=0,this.m_bPersonaStateLoadRequested=!1,this.m_steamid=e,this.m_eClanRelationship=t}return e.prototype.BNeedsPersonaData=function(){return!this.m_bInitialized&&!this.m_bPersonaStateLoadRequested},e.prototype.SetPersonaStateLoadRequested=function(){this.m_bPersonaStateLoadRequested=!0},Object.defineProperty(e.prototype,"name",{get:function(){return this.m_bInitialized?this.m_strClanName:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clanid",{get:function(){return this.m_steamid.GetAccountID()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_count",{get:function(){return this.m_cMemberCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"users_online",{get:function(){return this.m_cUsersOnline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"users_ingame",{get:function(){return this.m_cUsersInGame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count_chat_room_members",{get:function(){return this.m_cChatRoomMembers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chat_room_private",{get:function(){return this.m_bChatRoomPrivate},enumerable:!1,configurable:!0}),e.prototype.BIsMember=function(){return 3==this.m_eClanRelationship},e.prototype.BIsInvite=function(){return 2==this.m_eClanRelationship},e.prototype.SetRelationship=function(e){this.m_eClanRelationship=e},e.prototype.BIsOGG=function(){return!!this.m_unOGGAppID||this.m_bGotInitialState&&0!=(16&this.m_eClanAccountFlags)},e.prototype.GetOGGAppID=function(){return this.m_unOGGAppID},e.prototype.BMatchesSearchString=function(e){return-1!==this.m_strClanName.toLocaleLowerCase().indexOf(e)},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return Object(a.a)(this.m_strAvatarHash)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.BIsOGG()?this.avatar_url:Object(a.a)(this.m_strAvatarHash,"medium")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.BIsOGG()?this.avatar_url:Object(a.a)(this.m_strAvatarHash,"full")},enumerable:!1,configurable:!0}),e.prototype.OpenChatDialog=function(e,t){return void 0===t&&(t=!0),this.GetChatRoomGroupID().then((function(n){return C.f.ChatStore.JoinAndShowChatRoomGroup(e,n,t),n}))},e.prototype.ReadPersonaStateUpdate=function(e,t){if(this.m_bInitialized=!0,0!=(2&e)&&(this.m_strClanName=t.player_name()),0!=(1024&e)&&(this.m_strClanTag=t.clan_tag(),t.clan_data().chat_group_id()&&(this.m_ulChatRoomGroupID=t.clan_data().chat_group_id()),t.clan_data().ogg_app_id()&&(this.m_unOGGAppID=t.clan_data().ogg_app_id())),0!=(16&e)){var n=t.avatar_hash(),o=!0;if(n){for(var r=0;r<n.length&&o;r++)o=!n[r];this.m_strAvatarHash=o?a.c:Object(s.a)(n)}}},e.prototype.ReadStateUpdate=function(e){if(this.m_bGotInitialState=!0,this.m_eClanAccountFlags=e.clan_account_flags(),this.m_bChatRoomPrivate=e.chat_room_private(),void 0!==e.user_counts()&&e.user_counts().members()){var t=e.user_counts();this.m_cMemberCount=t.members(),this.m_cUsersOnline=t.online(),this.m_cUsersInGame=t.in_game(),this.m_cChatRoomMembers=t.chat_room_members()}},e.prototype.GetChatGroupIDIfLoaded=function(){return this.m_ulChatRoomGroupID},e.prototype.GetChatRoomGroupID=function(){var e=this;if(this.m_ulChatRoomGroupID)return Promise.resolve(this.m_ulChatRoomGroupID);var t=i.b.Init(d.U);return t.Body().set_steamid(this.steamid.ConvertTo64BitString()),t.Body().set_autocreate(!0),d.bb.GetClanChatRoomInfo(C.f.CMInterface.GetServiceTransport(),t).then((function(t){return 1==t.GetEResult()&&t.Body().chat_group_summary().chat_group_id()?(e.m_ulChatRoomGroupID=t.Body().chat_group_summary().chat_group_id(),e.m_ulChatRoomGroupID):null}))},e.prototype.SetChatGroupID=function(e){this.m_ulChatRoomGroupID=e},Object(o.c)([O.B],e.prototype,"m_bInitialized",void 0),Object(o.c)([O.B],e.prototype,"m_bGotInitialState",void 0),Object(o.c)([O.B],e.prototype,"m_eClanRelationship",void 0),Object(o.c)([O.B],e.prototype,"m_strAvatarHash",void 0),Object(o.c)([O.B],e.prototype,"m_ulChatRoomGroupID",void 0),Object(o.c)([O.B],e.prototype,"m_cMemberCount",void 0),Object(o.c)([O.B],e.prototype,"m_cUsersOnline",void 0),Object(o.c)([O.B],e.prototype,"m_cUsersInGame",void 0),Object(o.c)([O.B],e.prototype,"m_cChatRoomMembers",void 0),Object(o.c)([O.B],e.prototype,"m_bChatRoomPrivate",void 0),Object(o.c)([O.n],e.prototype,"avatar_url",null),Object(o.c)([O.n],e.prototype,"avatar_url_medium",null),Object(o.c)([O.n],e.prototype,"avatar_url_full",null),e}(),w=function(){function e(e){var t=this;this.m_mapClans=O.B.map(),this.m_eClanStateHandler=Object(m.a)(822,f.c,(function(e){var n=new l.a(e.Body().steamid_clan());t.GetOrCreateClan(n).ReadStateUpdate(e.Body())})),this.m_FriendStore=e}return e.prototype.Init=function(e){this.m_CMInterface=e,this.m_CMInterface.AddOnLogonCallback(this.OnLogOn.bind(this))},e.prototype.OnLogOn=function(){},Object.defineProperty(e.prototype,"clan_invites",{get:function(){var e=[];return this.m_mapClans.forEach((function(t){t.m_bInitialized&&t.BIsInvite()&&e.push(t)})),e.sort((function(e,t){return e.name.localeCompare(t.name)})),e},enumerable:!1,configurable:!0}),e.prototype.GetClan=function(e){var t;return e instanceof l.a?(Object(I.a)(e.BIsClanAccount(),"expected clan steamid in GetClan()"),t=e.GetAccountID()):t=e,this.m_mapClans.get(t)},e.prototype.JoinClanChatRoom=function(e,t){var n=this.GetOrCreateClan(t);n.OpenChatDialog(e,!0),n.BNeedsPersonaData()&&this.LoadMissingClanPersonas()},e.prototype.ClearClanMembershipData=function(){this.m_mapClans.forEach((function(e){e.SetRelationship(0)}))},e.prototype.SetClanChatGroupID=function(e,t){var n=this.GetOrCreateClan(e);n.SetChatGroupID(t),n.BNeedsPersonaData()&&this.ScheduleLoadMissingClanPersonas()},e.prototype.GetOrCreateClan=function(e,t){var n;n=e instanceof l.a?e:l.a.InitFromClanID(e);var o=this.m_mapClans.get(n.GetAccountID());return o?void 0!==t&&o.SetRelationship(t):(o=new E(n,t||0),this.m_mapClans.set(n.GetAccountID(),o)),o},e.prototype.OnClanRelationshipChanged=function(e,t){this.GetOrCreateClan(e,t)},e.prototype.RespondToClanInvite=function(e,t){var n=i.b.Init(S.a);return n.Body().set_steamid(e.ConvertTo64BitString()),n.Body().set_accept(t),S.b.RespondToClanInvite(this.m_CMInterface.GetServiceTransport(),n).then((function(e){return 1==e.GetEResult()}))},e.prototype.EnsureInitialStateForClanInvites=function(){var e=i.b.Init(y.e,5554);this.clan_invites.forEach((function(t){t.m_bGotInitialState||e.Body().add_steamid_clans(t.steamid.ConvertTo64BitString())})),e.Body().steamid_clans().length<=0||this.m_CMInterface.Send(e)},e.prototype.ScheduleLoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData||(this.m_iIntervalLoadClanData=SetBackgroundTimeout(this.LoadMissingClanPersonas.bind(this),100))},e.prototype.LoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData&&(ClearBackgroundTimeout(this.m_iIntervalLoadClanData),this.m_iIntervalLoadClanData=void 0);var e=i.b.Init(h.q,815);e.Body().set_persona_state_requested(1042),this.m_mapClans.forEach((function(t){t.BNeedsPersonaData()&&(e.Body().add_friends(t.steamid.ConvertTo64BitString()),t.SetPersonaStateLoadRequested())})),e.Body().friends().length&&this.m_CMInterface.Send(e)},e.prototype.OnClanPersonaStateUpdate=function(e,t){var n=new l.a(t.friendid());this.GetOrCreateClan(n).ReadPersonaStateUpdate(e,t)},Object(o.c)([O.n],e.prototype,"clan_invites",null),e}(),M=n("5FJe"),D=n("TA9H"),T=n("0N1H"),j=n("E7zH"),G=n("WpBz"),R=n("oh5H"),k=n("1VtQ"),A=function(){return function(){this.Notifications_ShowInGame=0,this.Notifications_ShowOnline=0,this.Notifications_ShowMessage=0,this.Notifications_SendMobile=0,this.Sounds_PlayInGame=0,this.Sounds_PlayOnline=0,this.Sounds_PlayMessage=0}}(),N=function(){function e(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.m_eFriendRelationship=0,this.m_bPersonaStateLoadRequested=!1,this.m_bPersonaStateReady=!1,this.m_bPersonaNameHistoryLoaded=void 0,this.m_rgPersonaNameHistory=[],this.m_bBetaStatusLoading=!1,this.m_bBetaStatusStale=!0,this.m_bIsOnlineInBeta=void 0,this.m_bIsInBeta=void 0,this.m_bLoadedEquippedProfileItems=!1,this.m_equippedProfileItems={},this.m_unAccountID=e,this.m_persona=new p(l.a.InitFromAccountID(e)),0==e&&(Object(I.a)(!1,"unset accountid"),this.m_bPersonaStateReady=!0,this.m_persona.m_bInitialized=!0),t&&(this.m_bPersonaStateReady=!0,this.m_persona.UpdateFromMessage(n,t))}return e.prototype.LoadIfNecessary=function(){this.m_persona.m_bInitialized||this.m_bPersonaStateLoadRequested||(this.m_bPersonaStateLoadRequested=!0,C.f.FriendStore.QueueFriendPersonaStateLoad(this))},Object.defineProperty(e.prototype,"is_ready",{get:function(){return!(!this.m_persona.m_bInitialized&&!this.m_bPersonaStateReady)&&(Object.defineProperty(this,"is_ready",{value:!0}),!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persona",{get:function(){return this.LoadIfNecessary(),Object.defineProperty(this,"persona",{value:this.m_persona}),this.m_persona},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mutable_persona",{get:function(){return this.m_persona},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accountid",{get:function(){return this.m_unAccountID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_persona.m_steamid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steamid64",{get:function(){return this.m_persona.m_steamid.ConvertTo64BitString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"efriendrelationship",{get:function(){return this.m_eFriendRelationship},set:function(e){this.m_eFriendRelationship=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_friend",{get:function(){return Object(T.c)(this.m_eFriendRelationship)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_blocked",{get:function(){return Object(T.b)(this.m_eFriendRelationship)},enumerable:!1,configurable:!0}),e.prototype.GetCommunityProfileURL=function(){return r.a.COMMUNITY_BASE_URL+"profiles/"+this.steamid64+"/"},Object.defineProperty(e.prototype,"has_nickname",{get:function(){return!!this.m_strNickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.m_strNickname},set:function(t){this.m_strNickname=t,this.m_strPlayerNicknameNormalized=t?e.NormalizeNameForSearch(t):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notification_settings",{get:function(){return this.m_NotificationSettings||(this.m_NotificationSettings=new A),this.m_NotificationSettings},set:function(e){this.m_NotificationSettings=e},enumerable:!1,configurable:!0}),e.prototype.BShowInGameNotification=function(){return 1==this.notification_settings.Notifications_ShowInGame||C.f.SettingsStore.FriendsSettings.bNotifications_ShowIngame&&2!=this.notification_settings.Notifications_ShowInGame},e.prototype.BShowMessageNotification=function(){return r.a.IN_MOBILE?1===this.notification_settings.Notifications_SendMobile||C.f.BShowDirectChatNotification()&&2!==this.notification_settings.Notifications_SendMobile:1===this.notification_settings.Notifications_ShowMessage||C.f.BShowDirectChatNotification()&&2!==this.notification_settings.Notifications_ShowMessage},e.prototype.BShowOnlineNotification=function(){return 1==this.notification_settings.Notifications_ShowOnline||C.f.SettingsStore.FriendsSettings.bNotifications_ShowOnline&&2!=this.notification_settings.Notifications_ShowOnline},e.prototype.BPlayInGameSound=function(){return 1==this.notification_settings.Sounds_PlayInGame||C.f.SettingsStore.FriendsSettings.bSounds_PlayIngame&&2!=this.notification_settings.Sounds_PlayInGame},e.prototype.BPlayMessageSound=function(){return 1==this.notification_settings.Sounds_PlayMessage||C.f.SettingsStore.FriendsSettings.bSounds_PlayMessage&&2!=this.notification_settings.Sounds_PlayMessage},e.prototype.BPlayOnlineSound=function(){return 1==this.notification_settings.Sounds_PlayOnline||C.f.SettingsStore.FriendsSettings.bSounds_PlayOnline&&2!=this.notification_settings.Sounds_PlayOnline},Object.defineProperty(e.prototype,"display_name",{get:function(){if(this.has_nickname){var e=this.primary_display_name;return this.showing_secondary_display_name&&(e+=" ("+this.secondary_display_name+")"),e}return this.persona.m_strPlayerName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"primary_display_name",{get:function(){if(this.has_nickname&&!C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames)return this.nickname;return this.persona.m_strPlayerName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_secondary_display_name",{get:function(){return this.has_nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showing_secondary_display_name",{get:function(){return!!C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_secondary_display_name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondary_display_name",{get:function(){return C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_nickname?this.nickname:this.persona.m_strPlayerName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_display_name_nickname",{get:function(){return this.has_nickname&&!C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames},enumerable:!1,configurable:!0}),e.NormalizeNameForSearch=function(e){return e.toLocaleLowerCase()},Object.defineProperty(e.prototype,"player_name_normalized",{get:function(){var t=this;if(void 0===this.m_strPlayerNameNormalized){if(!this.is_ready)return"";var n=function(){t.m_strPlayerNameNormalized=e.NormalizeNameForSearch(t.m_persona.m_strPlayerName)};Object(O.l)(n),void 0===this.m_strPlayerNameNormalized&&n()}return this.m_strPlayerNameNormalized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current_game_name",{get:function(){return this.m_persona.GetCurrentGameName()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current_game_icon_url",{get:function(){return this.m_persona.GetCurrentGameIconURL()},enumerable:!1,configurable:!0}),e.prototype.is_appinfo_ready=function(){return this.m_persona.BIsAppInfoReady()},Object.defineProperty(e.prototype,"current_game_rich_presence",{get:function(){return this.m_persona.GetCurrentGameRichPresence()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game_name_normalized",{get:function(){var t=this;if(void 0===this.m_strGameNameNormalized){if(!this.is_ready)return"";var n=function(){t.m_strGameNameNormalized=e.NormalizeNameForSearch(t.current_game_name)};Object(O.l)(n),void 0===this.m_strGameNameNormalized&&n()}return this.m_strGameNameNormalized},enumerable:!1,configurable:!0}),e.prototype.MatchSearchString=function(e){var t=this.player_name_normalized.indexOf(e);return-1!==t?{match:1,iOffset:t,bFullMatch:0===t&&this.player_name_normalized.length===e.length}:this.has_nickname&&-1!==(t=this.m_strPlayerNicknameNormalized.indexOf(e))?{match:2,iOffset:t,bFullMatch:0===t&&this.m_strPlayerNicknameNormalized.length===e.length}:{match:0}},e.prototype.BMatchesSearchString=function(e,t){if(-1!==this.player_name_normalized.indexOf(e))return!0;if(this.has_nickname){if(-1!==this.m_strPlayerNicknameNormalized.indexOf(e))return!0}else if(t&&this.m_persona.is_ingame&&-1!==this.game_name_normalized.indexOf(e))return!0;return!1},Object.defineProperty(e.prototype,"persona_name_history",{get:function(){var e=this;if(void 0===this.m_bPersonaNameHistoryLoaded){var t=i.b.Init(f.a,5570);t.Body().add_Ids().set_steamid(this.steamid64),t.Body().set_id_count(1),C.f.CMInterface.SendMsgAndAwaitResponse(t,f.b).then((function(t){if(Object(I.a)(1==t.Body().responses().length,"Got an invalid number of responses to CMsgClientAMGetPersonaNameHistory"),1==t.Body().responses().length){var n=t.Body().responses()[0];Object(I.a)(n.steamid()==e.steamid64,"Got a response for the wrong user from CMsgClientAMGetPersonaNameHistory"),n.steamid()==e.steamid64&&(Object(I.a)(0==e.m_rgPersonaNameHistory.length,"Got persona name history response for same user twice."),Object(O.F)((function(){for(var t=0,o=n.names();t<o.length;t++){var r=o[t];e.m_rgPersonaNameHistory.push(r.name())}e.m_bPersonaNameHistoryLoaded=!0})))}})),this.m_bPersonaNameHistoryLoaded=!1}return this.m_rgPersonaNameHistory},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persona_name_history_loaded",{get:function(){return!0===this.m_bPersonaNameHistoryLoaded},enumerable:!1,configurable:!0}),e.prototype.OpenChatDialog=function(e){return this.is_blocked?(r.a.IN_MOBILE?C.f.ShowAlert(Object(R.d)("#Friend_Chat_OpenError_Blocked"),Object(R.d)("#Friend_Chat_OpenError_BlockedBody")):C.f.OpenURLInBrowser(this.GetCommunityProfileURL(),e),null):C.f.ShowFriendChatDialog(e,this.m_unAccountID,!0)},Object.defineProperty(e,"FriendSortStatusComparator",{get:function(){var t=C.f.SettingsStore.BForceAlphabeticFriendSorting();return e.FriendSortStatusComparatorInternal.bind(null,t)},enumerable:!1,configurable:!0}),e.FriendSortStatusComparatorInternal=function(e,t,n){var o=t.persona,r=n.persona;return a.b.SortStatusComparator(!e,o,r)},Object.defineProperty(e,"DefaultFriendSortComparator",{get:function(){var t=C.f.SettingsStore.BForceAlphabeticFriendSorting();return function(n,o){var r=e.FriendSortStatusComparatorInternal(t,n,o);return 0!=r?r:n.display_name.localeCompare(o.display_name)}},enumerable:!1,configurable:!0}),e.FriendSortByLastSeenComparator=function(e,t){var n=e.persona,o=t.persona;if(!n.is_online&&!o.is_online){var r=C.f.GetServerRTime32()-n.last_seen_online,i=C.f.GetServerRTime32()-o.last_seen_online;if(r>i)return 1;if(i>r)return-1}return e.display_name.localeCompare(t.display_name)},e.FriendSortByFriendOrNotComparator=function(e,t){return e.is_friend&&!t.is_friend||!e.is_friend&&t.is_friend?e.is_friend?-1:1:e.display_name.localeCompare(t.display_name)},Object.defineProperty(e.prototype,"localized_online_status",{get:function(){return this.persona.GetLocalizedOnlineStatus()},enumerable:!1,configurable:!0}),e.prototype.GetBroadcastDescription=function(){if(this.persona.m_strBroadcastTitle)return this.persona.m_strBroadcastTitle;if(this.persona.m_broadcastAccountId){var e=C.f.FriendStore.GetPlayer(this.persona.m_broadcastAccountId),t=this.persona.m_broadcastAppId?C.f.AppInfoStore.GetAppInfo(this.persona.m_broadcastAppId):null;return t&&t.is_valid?Object(R.d)("#PersonaStateWatchingBroadcast_PlayerGame",e.display_name,t.name):Object(R.d)("#PersonaStateWatchingBroadcast_Player",e.display_name)}return null},e.prototype.LoadFriendsUIBetaStatus=function(){var e=this;if(this.is_friend&&this.m_bBetaStatusStale&&!this.m_bBetaStatusLoading){this.m_bBetaStatusLoading=!0;var t=this.persona.is_online,n=i.b.Init(g.c);n.Body().set_steamid(this.steamid64),g.g.IsInFriendsUIBeta(C.f.CMInterface.GetServiceTransport(),n).then((function(n){e.m_bBetaStatusLoading=!1,e.m_bBetaStatusStale=!1,e.m_bIsOnlineInBeta=n.Body().online_in_friendsui()||!1,e.m_bIsInBeta=n.Body().has_used_friendsui()||!1,Object(O.J)((function(){return e.persona.is_online!=t})).then((function(){e.m_bBetaStatusStale=!0}))}))}},Object.defineProperty(e.prototype,"is_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsInBeta},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_online_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsOnlineInBeta},enumerable:!1,configurable:!0}),e.prototype.LoadEquippedProfileItems=function(e){return void 0===e&&(e=!1),Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_bLoadedEquippedProfileItems&&!e?[2]:(this.m_bLoadedEquippedProfileItems=!0,(t=i.b.Init(v.g)).Body().set_steamid(this.m_persona.m_steamid.ConvertTo64BitString()),[4,v.o.GetProfileItemsEquipped(C.f.CMInterface.GetServiceTransport(),t)]);case 1:return 1==(n=o.sent()).GetEResult()&&(this.m_equippedProfileItems=n.Body().toObject(),this.m_persona.is_golden&&(this.m_equippedProfileItems.avatar_frame.image_small&&0!=this.m_equippedProfileItems.avatar_frame.image_small.length||(this.m_equippedProfileItems.avatar_frame.image_small=r.a.COMMUNITY_CDN_ASSET_URL+"rewardsseason1/goldenprofile/presige_frame_anim.png",this.m_equippedProfileItems.avatar_frame.image_large=r.a.COMMUNITY_CDN_ASSET_URL+"rewardsseason1/goldenprofile/presige_frame_anim.png"))),[2]}}))}))},e.prototype.BLoadedEquippedItems=function(){return this.m_bLoadedEquippedProfileItems},e.prototype.GetEquippedProfileItems=function(){return this.LoadEquippedProfileItems(),this.m_equippedProfileItems},Object(o.c)([O.B],e.prototype,"m_eFriendRelationship",void 0),Object(o.c)([O.B],e.prototype,"m_bPersonaStateReady",void 0),Object(o.c)([O.B],e.prototype,"m_bPersonaNameHistoryLoaded",void 0),Object(o.c)([O.B],e.prototype,"m_rgPersonaNameHistory",void 0),Object(o.c)([O.B],e.prototype,"m_strPlayerNicknameNormalized",void 0),Object(o.c)([O.B],e.prototype,"m_strNickname",void 0),Object(o.c)([O.B],e.prototype,"m_bBetaStatusStale",void 0),Object(o.c)([O.B],e.prototype,"m_bIsOnlineInBeta",void 0),Object(o.c)([O.B],e.prototype,"m_bIsInBeta",void 0),Object(o.c)([O.B],e.prototype,"m_NotificationSettings",void 0),Object(o.c)([O.B],e.prototype,"m_bLoadedEquippedProfileItems",void 0),Object(o.c)([O.B],e.prototype,"m_equippedProfileItems",void 0),Object(o.c)([O.n],e.prototype,"display_name",null),Object(o.c)([O.n],e.prototype,"secondary_display_name",null),Object(o.c)([O.n],e.prototype,"current_game_name",null),Object(o.c)([O.n],e.prototype,"current_game_icon_url",null),Object(o.c)([O.n],e.prototype,"current_game_rich_presence",null),Object(o.c)([O.n],e.prototype,"persona_name_history",null),Object(o.c)([O.n],e.prototype,"persona_name_history_loaded",null),Object(o.c)([O.n],e.prototype,"localized_online_status",null),e}(),B=function(){function e(){this.m_currentMsg=null,this.m_mapLastSeenApp=new Map}return e.prototype.Init=function(e){this.m_CMInterface=e,r.a.IN_MOBILE||SetBackgroundInterval(this.NotifyImpressions,12e4)},e.prototype.RecordFriendInGameImpression=function(e){if(!r.a.IN_MOBILE&&!(e==T.q||e>=T.k&&e<=T.l)){this.m_currentMsg||(this.m_currentMsg=i.b.Init(_.a));var t=!0;if(this.m_mapLastSeenApp.has(e)){var n=this.m_mapLastSeenApp.get(e);t=Date.now()-n>864e5}var o=null;if(t)this.m_mapLastSeenApp.set(e,Date.now()),(o=this.m_currentMsg.Body().add_impressions()).set_appid(e),o.set_type(2),o.set_num_impressions(0);else{for(var a=0;a<this.m_currentMsg.Body().impressions().length;++a){var s=this.m_currentMsg.Body().impressions()[a];if(s.appid()==e&&1==s.type()){o=s;break}}o||((o=this.m_currentMsg.Body().add_impressions()).set_appid(e),o.set_type(1),o.set_num_impressions(0))}o.set_num_impressions(o.num_impressions()+1)}},e.prototype.NotifyImpressions=function(){if(this.m_currentMsg){var e=this.m_currentMsg;this.m_currentMsg=null,_.b.ReportProductImpressionsFromClient(this.m_CMInterface.GetServiceTransport(),e)}},Object(o.c)([O.k.bound],e.prototype,"NotifyImpressions",null),e}(),L=function(){function e(){var e=this;this.m_FriendGroupStore=new M.a(this),this.m_ClanStore=new w(this),this.m_FavoritesStore=new D.a(this),this.m_mapPlayerCache=new Map,this.m_mapApprovedNonFriendMessages=O.B.map(),this.m_setFriendsNeedingPersonaStateLoad=new Set,this.m_iIntervalSubscribeToPersonaStateUpdates=0,this.m_setFriendAccountIDs=new Set,this.m_setIncomingInviteAccountIDs=new Set,this.m_bUserSetPersonaState=!1,this.m_eUserPersonaState=0,this.m_bIsClientIdle=!1,this.m_FriendStorePrefs={ePersonaState:1,strNonFriendsAllowedToMsg:""},this.m_cFriendPersonaStatesInitialized=0,this.m_bReadyToRender=!1,this.m_bPerFriendPreferencesLoaded=!1,this.m_bReceivedFriendsList=!1,this.m_bInitialPersonaStatesLoaded=!1,this.m_InitialAppInfoPromises=[],this.m_bInitialAppInfoLoaded=!1,this.m_bParentalLocked=void 0,this.m_eUserPersonaStateParental=1,this.m_rgPersonaStateChangeCallbacks=new j.a,this.m_rgPlayerGameChangedCallbacks=new j.a,this.m_nMissingPersonaStateRetryCount=0,this.m_nMissingPersonaStateMaxRetries=5,this.m_FriendInGameNotificationStore=new B,this.m_bSnoozeCallbackFired=!0,this.m_bAwayCallbackFired=!0,this.m_bNextActivityCallbackRegistered=!1,this.fnRecvMsgClientFriendsList=Object(m.a)(767,h.i,(function(t){t.Body().bincremental()&&e.SetFriendsList(t.Body())})),this.fnRecvMsgClientPersonaState=Object(m.a)(766,h.m,(function(t){for(var n=t.Body().status_flags(),o=new Set,r=new Set,i=0,a=t.Body().friends();i<a.length;i++){var s=a[i],u=new l.a(s.friendid());if(u.BIsClanAccount())e.m_ClanStore.OnClanPersonaStateUpdate(n,s);else if(u.BIsIndividualAccount()){var p=e.GetPlayerIfCached(u.GetAccountID());p||(p=e.GetPlayer(u.GetAccountID()));var m=p.mutable_persona,d=m.m_ePersonaState,h=m.m_strPlayerName,f=m.m_unGamePlayedAppID,_=m.m_strGameExtraInfo,g=m.is_in_nonsteam_game,b=m.m_broadcastAppId,v=m.m_bInitialized;m.UpdateFromMessage(n,s),!v&&m.m_bInitialized&&e.m_setFriendAccountIDs.has(p.accountid)&&e.m_cFriendPersonaStatesInitialized++;var y=0!=(1&n);if(u.GetAccountID()==e.self.accountid&&y){var S=!!s.persona_set_by_user(),O=m.m_ePersonaState;e.UpdateUserPersonaStateInternal(O,S,e.m_bIsClientIdle,!0),1==O&&1!=(O=e.AdjustPersonaStateForIdleTime(O))&&e.UpdateUserPersonaStateInternal(O,!1,e.m_bIsClientIdle)}var I=!1,E=m.m_unGamePlayedAppID,w=m.m_broadcastAppId;c.b.bValid&&b&&b!=c.b.appID&&(b=void 0),c.b.bValid&&w&&w!=c.b.appID&&(w=void 0);var D=!1;if(E||f||g||m.is_in_nonsteam_game||w||b){if(I=f!=E,E&&o.add(E),w&&o.add(w),m.GetAccountID()!=e.m_self.accountid){var T=f,j=E;0==m.m_ePersonaState&&(j=0),g&&(T=M.d),m.is_in_nonsteam_game&&(j=M.d),!T&&b&&(T=b),!j&&w&&(j=w),p.is_friend&&e.m_FriendGroupStore.OnFriendGameChanged(u.GetAccountID(),T,j),e.m_rgPlayerGameChangedCallbacks.Dispatch(u.GetAccountID(),T,j),D=!0}}else m.m_strGameExtraInfo&&(I=_!=m.m_strGameExtraInfo);(4096&n||I)&&E&&m.HasCurrentGameRichPresence()&&r.add(E),v&&p.is_friend&&p.accountid!=e.m_self.accountid&&(d!=m.m_ePersonaState||I)&&(p.BPlayInGameSound()&&I&&p.persona.is_ingame?e.PlayJoinGameSound():p.BPlayOnlineSound()&&d!=m.m_ePersonaState&&1==m.m_ePersonaState&&e.PlayFriendOnlineSound(),e.OnFriendPersonaStateChanged(p,d,m.m_ePersonaState,I)),D||m.m_ePersonaState==d&&!I&&m.m_strPlayerName==h||e.m_rgPersonaStateChangeCallbacks.Dispatch(p)}}var G=C.f.AppInfoStore.EnsureAppInfoForAppIDs(o);e.m_bInitialPersonaStatesLoaded||e.m_InitialAppInfoPromises.push(G),!e.m_bInitialPersonaStatesLoaded&&r.size&&(console.log("Preloading Game Rich Presence for AppIDs:",Array.from(r)),r.forEach((function(e){return C.f.AppInfoStore.GetRichPresenceLoc(e)}))),e.m_cFriendPersonaStatesInitialized>=e.m_setFriendAccountIDs.size&&e.m_bReceivedFriendsList&&!e.m_bInitialPersonaStatesLoaded&&(e.m_bInitialPersonaStatesLoaded=!0,e.StartWaitForInitialAppInfo())})),this.m_PerFriendPreferencesChangedHandler=Object(m.d)(v.n.NotifyPerFriendPreferencesChangedHandler,(function(t){var n=e.GetPlayer(t.Body().accountid());if(n){var o=t.Body().preferences();n.nickname=o.nickname()||void 0;var r=new A;e.FillPerFriendNotificationSettingsFromMessage(r,o),n.notification_settings=r}return 1})),this.m_FriendEquippedProfileItemsChangedHandler=Object(m.d)(v.n.NotifyFriendEquippedProfileItemsChangedHandler,(function(t){var n=e.GetPlayer(t.Body().accountid());return n&&n.BLoadedEquippedItems()&&n.LoadEquippedProfileItems(!0),1}))}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupStore.Init(e),this.m_ClanStore.Init(e),this.m_FavoritesStore.Init(e),this.m_FriendInGameNotificationStore.Init(e);var n=!1;return this.m_CMInterface.AddOnLogonCallback((function(){n?t.SendPersonaStateToServer(!0):(n=!0,t.m_self=t.AddPlayerToCache(t.m_CMInterface.steamid.GetAccountID(),1),C.f.SettingsStore.GetObjectFromLocalStorage("FriendStoreLocalPrefs",t.m_FriendStorePrefs).then((function(e){if(t.m_FriendStorePrefs=e,null!=e.strNonFriendsAllowedToMsg&&""!=e.strNonFriendsAllowedToMsg)for(var n=(new Date).getTime(),o=e.strNonFriendsAllowedToMsg.split(","),r=0;r<o.length;++r){var i=o[r].split("=");if(2==i.length){var a=Number(i[0]),s=Number(i[1]);s>n&&t.m_mapApprovedNonFriendMessages.set(a,s)}}t.m_eUserPersonaState=e.ePersonaState,t.m_bUserSetPersonaState=!1,t.SendPersonaStateToServer(!0)})),t.m_bReadyToRender||SetBackgroundTimeout(t.ForceReadyToRender.bind(t),1e3)),t.GetFriendsList()})),this.m_CMInterface.AddOnDisconnectCallback((function(){t.SetPersonasOffline(!0)}),102),Object(O.l)((function(){var e=C.f.ParentalStore.BIsFriendsBlocked();t.OnParentalLockChanged(e)})),this.InitializeIdleTracking(),this.m_bReadyToRender?Promise.resolve():new Promise((function(e,n){t.m_fnOnReadyToRender=e}))},e.prototype.UpdateUnreadMessagesGlobal=function(){if(void 0!==window.SteamClient&&null!=window.SteamClient.WebChat&&null!=window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages){var e=C.f.ChatStore.GetChatsWithUnreadPriorityMessages().length;window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages(e)}},e.prototype.GetFriendsList=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=i.b.Init(b.c),[4,b.f.GetFriendsList(this.m_CMInterface.GetServiceTransport(),e)];case 1:return 1==(t=o.sent()).GetEResult()?this.SetFriendsList(t.Body().friendslist()):(n={message:"ShowFriendsErrorRetryDialog"},window.parent.postMessage(n,"https://steamloopback.host"),Object(I.a)(!1,"GetFriendsList returned",t.GetEResult())),[2]}}))}))},Object.defineProperty(e.prototype,"not_ready_to_render_reason",{get:function(){if(this.m_bReadyToRender)return"";var e="";return this.m_bPerFriendPreferencesLoaded||(e+="P"),this.m_bReceivedFriendsList||(e+="F"),this.m_bInitialPersonaStatesLoaded||(e+="I"),this.m_bInitialAppInfoLoaded||(e+="A"),e},enumerable:!1,configurable:!0}),e.prototype.UpdateReadyToRenderState=function(){this.m_bReadyToRender||this.m_bReceivedFriendsList&&this.m_bInitialPersonaStatesLoaded&&this.m_bPerFriendPreferencesLoaded&&this.m_bInitialAppInfoLoaded&&(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.ForceReadyToRender=function(){Object(I.a)(this.m_bReadyToRender,"FriendStore: Forcing ready to render, was not ready in time."),this.m_bInitialPersonaStatesLoaded=!0,this.m_bPerFriendPreferencesLoaded=!0,this.m_bInitialAppInfoLoaded=!0,this.UpdateReadyToRenderState()},e.prototype.AddPersonaStateChangedCallback=function(e){return this.m_rgPersonaStateChangeCallbacks.Register(e)},e.prototype.AddPlayerGameChangedCallback=function(e){return this.m_rgPlayerGameChangedCallbacks.Register(e)},e.prototype.BIsInvisibleMode=function(){return 7==this.m_eUserPersonaState},e.prototype.GetUserDoNotDisturb=function(){return C.f.SettingsStore.FriendsSettings.bDoNotDisturbMode},e.prototype.SetUserDoNotDisturb=function(e){C.f.SettingsStore.FriendsSettings.bDoNotDisturbMode=e,C.f.SettingsStore.BUpdateFriendsSettings(C.f.SettingsStore.FriendsSettings)},e.prototype.SetUserPersonaState=function(e){this.UpdateUserPersonaStateInternal(e,!0,!1)},e.prototype.BApprovedNonFriendMessages=function(e){var t=new Date,n=this.m_mapApprovedNonFriendMessages.get(e);return null!=n&&n>t.getTime()},e.prototype.SetApprovedNonFriendMessages=function(e){var t=(new Date).getTime();this.m_mapApprovedNonFriendMessages.set(e,t+864e5);var n="";this.m_mapApprovedNonFriendMessages.forEach((function(e,o,r){e>t&&(0!=n.length&&(n+=","),n+=o.toString()+"="+e.toString())})),this.m_FriendStorePrefs.strNonFriendsAllowedToMsg=n,C.f.SettingsStore.StoreObjectInLocalStorage("FriendStoreLocalPrefs",this.m_FriendStorePrefs)},e.prototype.OnParentalLockChanged=function(e){!this.m_bParentalLocked&&e?(this.m_eUserPersonaStateParental=this.m_eUserPersonaState,this.UpdateUserPersonaStateInternal(0,!1,this.m_bIsClientIdle),this.m_bParentalLocked=e):this.m_bParentalLocked&&!e&&(this.m_bParentalLocked=e,this.UpdateUserPersonaStateInternal(this.m_eUserPersonaStateParental,!1,this.m_bIsClientIdle))},e.prototype.UpdateUserPersonaStateInternal=function(e,t,n,o){void 0===o&&(o=!1),this.m_bParentalLocked||(C.f.UpdatePersonaState(e),e==this.m_eUserPersonaState&&this.m_bUserSetPersonaState==t&&this.m_bIsClientIdle==n||(0==e&&t?C.f.SignOutOfFriends(void 0):(t||3!=e&&4!=e||(n=!0),o&&this.m_bIsClientIdle!=n&&(o=!1),this.m_eUserPersonaState=e,this.m_bUserSetPersonaState=t,this.m_bIsClientIdle=n,o||this.SendPersonaStateToServer(!1),(t||1==this.m_eUserPersonaState)&&(this.m_FriendStorePrefs.ePersonaState=e,C.f.SettingsStore.StoreObjectInLocalStorage("FriendStoreLocalPrefs",this.m_FriendStorePrefs)))))},e.prototype.SendPersonaStateToServer=function(e){void 0===e&&(e=!1);var t=i.b.Init(h.c,716);t.Body().set_persona_state(this.m_eUserPersonaState),t.Body().set_persona_set_by_user(this.m_bUserSetPersonaState),t.Body().set_need_persona_response(e),t.Body().set_is_client_idle(this.m_bIsClientIdle),this.m_CMInterface.Send(t)},e.prototype.AdjustPersonaStateForIdleTime=function(e){return(1==e||3==e)&&C.f.IdleTracker.GetUserIdleTime()>=7200?4:1==e&&C.f.IdleTracker.GetUserIdleTime()>=300?3:e},Object.defineProperty(e.prototype,"FriendGroupStore",{get:function(){return this.m_FriendGroupStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ClanStore",{get:function(){return this.m_ClanStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FavoritesStore",{get:function(){return this.m_FavoritesStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"all_friends",{get:function(){var e=this,t=[];return this.m_setFriendAccountIDs.forEach((function(n){t.push(e.GetFriend(n))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"all_friends_accountids",{get:function(){return this.m_setFriendAccountIDs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_ready",{get:function(){return this.m_bReceivedFriendsList},enumerable:!1,configurable:!0}),e.prototype.GetFriend=function(e){var t=this.m_mapPlayerCache.get(e);if(t){if(!t.is_friend)return null}else Object(I.a)(!1,"Friend missing from cache: "+e);return t},e.prototype.GetPlayer=function(e){var t=this.m_mapPlayerCache.get(e);return t||(t=this.AddPlayerToCache(e,3)),t},e.prototype.AddPlayerToCache=function(e,t,n){if(void 0===n&&(n=!0),this.m_mapPlayerCache.has(e))return this.m_mapPlayerCache.get(e);var o=new N(e);return this.m_mapPlayerCache.set(e,o),o},e.prototype.GetPlayerIfCached=function(e){return this.m_mapPlayerCache.get(e)},e.prototype.GetFriendIfCached=function(e){var t=this.m_mapPlayerCache.get(e);return t&&t.is_friend?t:null},e.prototype.SetPersonasOffline=function(e){var t=this;this.m_mapPlayerCache.forEach((function(n){e&&(n.is_friend||n.accountid==t.self.accountid)||n.persona.is_online&&n.persona.ClearStateOnDisconnect()}))},e.prototype.QueueFriendPersonaStateLoad=function(e){this.m_setFriendsNeedingPersonaStateLoad.add(e.accountid),this.m_iIntervalSubscribeToPersonaStateUpdates||(this.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(this.SubscribeToMissingPersonaStates.bind(this),50))},Object.defineProperty(e.prototype,"self",{get:function(){return this.m_self},enumerable:!1,configurable:!0}),e.prototype.SubscribeToMissingPersonaStates=function(){var e=this;this.m_iIntervalSubscribeToPersonaStateUpdates&&(ClearBackgroundTimeout(this.m_iIntervalSubscribeToPersonaStateUpdates),this.m_iIntervalSubscribeToPersonaStateUpdates=0);var t=[];if(this.m_setFriendsNeedingPersonaStateLoad.forEach((function(n){var o=e.m_mapPlayerCache.get(n);o&&!o.persona.m_bInitialized&&t.push(o.accountid)})),this.m_setFriendsNeedingPersonaStateLoad.clear(),t.length){var n=i.b.Init(h.q,815);n.Body().set_persona_state_requested(1106);for(var o=0,r=t;o<r.length;o++){var a=r[o];n.Body().add_friends(l.a.InitFromAccountID(a).ConvertTo64BitString())}this.m_CMInterface.Send(n),SetBackgroundTimeout((function(){for(var n=0,o=0,r=t;o<r.length;o++){var i=r[o],a=e.GetPlayer(i);a&&!a.persona.m_bInitialized&&(a.m_bPersonaStateReady=!0,a.persona.m_bNameInitialized||(Object(I.a)(a.m_bPersonaStateLoadRequested,"PersonaStateLoadRequested not set"),e.m_setFriendsNeedingPersonaStateLoad.add(i)),n++)}n>0?e.m_nMissingPersonaStateRetryCount<e.m_nMissingPersonaStateMaxRetries?(e.m_nMissingPersonaStateRetryCount++,e.m_iIntervalSubscribeToPersonaStateUpdates||(e.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(e.SubscribeToMissingPersonaStates.bind(e),1e3))):console.log("Giving up persona state retries with",n,"still not filled",e.m_setFriendsNeedingPersonaStateLoad):e.m_nMissingPersonaStateRetryCount=0}),500)}},e.prototype.InitializeIdleTracking=function(){this.m_bAwayCallbackFired&&(this.m_bAwayCallbackFired=!1,C.f.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,3),300)),this.m_bSnoozeCallbackFired&&(this.m_bSnoozeCallbackFired=!1,C.f.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,4),7200))},e.prototype.ResetIdleState=function(){var e=this.m_eUserPersonaState;this.m_bUserSetPersonaState||3!=this.m_eUserPersonaState&&4!=this.m_eUserPersonaState||(e=1),this.UpdateUserPersonaStateInternal(e,this.m_bUserSetPersonaState,!1),this.m_bNextActivityCallbackRegistered=!1,this.InitializeIdleTracking()},e.prototype.OnIdle=function(e){var t=e;3==e?(this.m_bAwayCallbackFired=!0,4==this.m_eUserPersonaState&&(t=4)):4==e&&(this.m_bSnoozeCallbackFired=!0),this.m_bUserSetPersonaState&&(t=this.m_eUserPersonaState),this.UpdateUserPersonaStateInternal(t,this.m_bUserSetPersonaState,!0),this.m_bNextActivityCallbackRegistered||(this.m_bNextActivityCallbackRegistered=!0,C.f.IdleTracker.AddOnNextActivityCallback(this.ResetIdleState.bind(this)))},e.prototype.SendFriendInvite=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(t=i.b.Init(v.a)).Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),[4,v.o.AddFriend(this.m_CMInterface.GetServiceTransport(),t)];case 1:return n=o.sent(),r=1,void 0!==n.Body().result()&&(r=n.Body().result()),a=n.Body().friend_relationship(),[2,{eResult:r,eFriendRelationship:a}]}}))}))},e.prototype.RemoveFriend=function(e){var t=i.b.Init(v.j);return t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),v.o.RemoveFriend(this.m_CMInterface.GetServiceTransport(),t).then((function(e){return e.Body().friend_relationship()}))},e.prototype.BlockPlayer=function(e,t){void 0===t&&(t=!1);var n=i.b.Init(v.i);return n.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),t&&n.Body().set_unignore(!0),v.o.IgnoreFriend(this.m_CMInterface.GetServiceTransport(),n).then((function(e){return e.Body().friend_relationship()}))},e.prototype.AddFriend=function(e,t){var n=new l.a(e).GetAccountID(),o=this.m_setIncomingInviteAccountIDs.has(n);2==t?o||((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,s.LoadIfNecessary(),this.m_setIncomingInviteAccountIDs.add(n),this.m_FriendGroupStore.OnIncomingInviteAdded(n)):o&&((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,this.m_setIncomingInviteAccountIDs.delete(n),this.m_FriendGroupStore.OnIncomingInviteRemoved(n));4==t?((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,s.LoadIfNecessary(),this.m_FriendGroupStore.OnOutgoingInviteAdded(n)):this.m_FriendGroupStore.OnOutgoingInviteRemoved(n);if(5==t||6==t){var r=C.f.ChatStore.GetFriendChat(n,!1);r&&C.f.UIStore.CloseTabByID(r.unique_id)}var i=this.m_setFriendAccountIDs.has(n);if(Object(T.c)(t)){var a=void 0;i?a=this.GetFriend(n):(this.m_setFriendAccountIDs.add(n),(a=this.AddPlayerToCache(n,2,!1)).LoadIfNecessary(),this.m_FriendGroupStore.OnFriendAdded(n)),a.efriendrelationship=t}else{var s;i&&(this.m_FriendGroupStore.OnFriendRemoved(n),this.m_FavoritesStore.OnFriendRemoved(n),this.m_setFriendAccountIDs.delete(n)),(s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t}},e.prototype.SetFriendsList=function(e){var t=e.friends();if(!e.bincremental()){for(var n=0,o=this.all_friends;n<o.length;n++){o[n].efriendrelationship=0}this.m_setFriendAccountIDs.clear(),this.m_setIncomingInviteAccountIDs.clear(),this.m_FriendGroupStore.OnFullFriendsListUpdateStart(),this.m_ClanStore.ClearClanMembershipData()}for(var r=0,a=t;r<a.length;r++){var s=a[r],c=new l.a(s.ulfriendid());if(c.BIsIndividualAccount()){var u=s.efriendrelationship();this.AddFriend(c.ConvertTo64BitString(),u)}else c.BIsClanAccount()&&this.m_ClanStore.OnClanRelationshipChanged(c,s.efriendrelationship())}if(!e.bincremental()){this.m_FriendGroupStore.OnFullFriendsListUpdateComplete(),this.m_ClanStore.LoadMissingClanPersonas(),this.m_bReceivedFriendsList=!0;var p=i.b.Init(d.T);d.Y.RequestFriendPersonaStates(this.m_CMInterface.GetServiceTransport(),p),this.RequestPerFriendPreferences(),0==this.m_setFriendAccountIDs.size?(this.m_bInitialPersonaStatesLoaded=!0,this.StartWaitForInitialAppInfo()):this.SubscribeToMissingPersonaStates()}},e.prototype.OnFriendPersonaStateChanged=function(e,t,n,o){if(C.f.NotificationManager.BNotificationsPermitted()&&C.f.SettingsStore.BReady()&&!C.f.FriendStore.GetUserDoNotDisturb()){if(o&&e.persona.is_ingame&&e.BShowInGameNotification()){var r=e.current_game_name;return e.persona.is_in_nonsteam_game||this.m_FriendInGameNotificationStore.RecordFriendInGameImpression(e.persona.m_unGamePlayedAppID),void(r&&C.f.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(R.d)("#Friend_StateChange_InGame",r),rawbody:r,tag:"state_"+e.accountid,state:"ingame",steamid:e.persona.m_steamid.ConvertTo64BitString()}))}0==t&&0!=n&&e.BShowOnlineNotification()&&C.f.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(R.d)("#Friend_StateChange_Online"),tag:"state_"+e.accountid,state:"online",steamid:e.persona.m_steamid.ConvertTo64BitString()})}},e.prototype.PlayJoinGameSound=function(){C.f.FriendStore.GetUserDoNotDisturb()||C.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_join.m4a")},e.prototype.PlayFriendOnlineSound=function(){C.f.FriendStore.GetUserDoNotDisturb()||C.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_online.m4a")},e.prototype.FillPerFriendNotificationSettingsFromMessage=function(e,t){e.Notifications_ShowInGame=t.notifications_showingame(),e.Notifications_ShowMessage=t.notifications_showmessages(),e.Notifications_ShowOnline=t.notifications_showonline(),e.Notifications_SendMobile=t.notifications_sendmobile(),e.Sounds_PlayInGame=t.sounds_showingame(),e.Sounds_PlayMessage=t.sounds_showmessages(),e.Sounds_PlayOnline=t.sounds_showonline()},e.prototype.RequestPerFriendPreferences=function(){var e=this,t=i.b.Init(v.e);v.o.GetPerFriendPreferences(this.m_CMInterface.GetServiceTransport(),t).then((function(t){Object(O.F)((function(){for(var n=0,o=t.Body().preferences();n<o.length;n++){var r=o[n],i=e.GetPlayer(r.accountid());if(i){i.nickname=r.nickname()||void 0;var a=new A;e.FillPerFriendNotificationSettingsFromMessage(a,r),i.notification_settings=a}else console.log("Got per-friend preferences back for a user we don't have a Player for:",r)}e.m_bPerFriendPreferencesLoaded=!0,e.UpdateReadyToRenderState()}))}))},e.prototype.StartWaitForInitialAppInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.m_InitialAppInfoPromises)];case 1:return e.sent(),this.m_bInitialAppInfoLoaded=!0,this.UpdateReadyToRenderState(),[2]}}))}))},e.prototype.FillMessageFromPerFriendNotificationSettings=function(e,t){e.set_notifications_showingame(t.Notifications_ShowInGame),e.set_notifications_showmessages(t.Notifications_ShowMessage),e.set_notifications_showonline(t.Notifications_ShowOnline),e.set_notifications_sendmobile(t.Notifications_SendMobile),e.set_sounds_showingame(t.Sounds_PlayInGame),e.set_sounds_showmessages(t.Sounds_PlayMessage),e.set_sounds_showonline(t.Sounds_PlayOnline)},e.prototype.SetPlayerNickname=function(e,t){return this.SetPlayerPerFriendPreferences(e,t,e.notification_settings)},e.prototype.SetPlayerNotificationSettings=function(e,t){return this.SetPlayerPerFriendPreferences(e,e.nickname,t)},e.prototype.SetPlayerPerFriendPreferences=function(e,t,n){var o=i.b.Init(v.l),r=o.Body().preferences();return r.set_accountid(e.accountid),r.set_nickname(t),this.FillMessageFromPerFriendNotificationSettings(r,n),v.o.SetPerFriendPreferences(C.f.CMInterface.GetServiceTransport(),o).then((function(e){return e.GetEResult()}))},e.prototype.InviteToGame=function(e,t,n){var o=i.b.Init(f.d,7005);o.Hdr().set_routing_appid(t),o.Body().set_steam_id_src(this.m_CMInterface.steamid.ConvertTo64BitString()),o.Body().set_steam_id_dest(l.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),n&&o.Body().set_connect_string(n),this.m_CMInterface.Send(o)},e.prototype.InviteToLobby=function(e,t,n){var o=i.b.Init(f.e,6621);o.Hdr().set_routing_appid(t),o.Body().set_steam_id_lobby(n),o.Body().set_steam_id_user_invited(l.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),this.m_CMInterface.Send(o)},e.prototype.InviteToWatch=function(e){C.f.ShowFriendChatDialog(C.f.GetDefaultBrowserContext(),e.accountid,!0);C.f.BroadcastStore.InviteToWatch(e.accountid).then((function(e){}))},e.prototype.FillInChatUsabilityMetrics=function(e){for(var t=0,n=0,o=0,r=0,i=this.all_friends;r<i.length;r++){var a=i[r];3==a.efriendrelationship&&(t++,a.persona.is_online&&n++,a.persona.is_ingame&&o++)}e.metrics().set_friends_count(t),e.metrics().set_friends_online_count(n),e.metrics().set_friends_in_game_count(o),this.m_FriendGroupStore.FillInChatUsabilityMetrics(e),this.m_FavoritesStore.FillInChatUsabilityMetrics(e)},Object(o.c)([O.B],e.prototype,"m_eUserPersonaState",void 0),Object(o.c)([O.B],e.prototype,"m_bPerFriendPreferencesLoaded",void 0),Object(o.c)([O.B],e.prototype,"m_bReceivedFriendsList",void 0),Object(o.c)([O.B],e.prototype,"m_bInitialPersonaStatesLoaded",void 0),Object(o.c)([O.B],e.prototype,"m_bInitialAppInfoLoaded",void 0),Object(o.c)([O.n],e.prototype,"not_ready_to_render_reason",null),Object(o.c)([O.k],e.prototype,"OnParentalLockChanged",null),Object(o.c)([O.k],e.prototype,"SetPersonasOffline",null),Object(o.c)([O.k],e.prototype,"SetFriendsList",null),Object(o.c)([k.a,Object(G.a)(100)],e.prototype,"PlayJoinGameSound",null),Object(o.c)([k.a,Object(G.a)(100)],e.prototype,"PlayFriendOnlineSound",null),Object(o.c)([O.k],e.prototype,"SetPlayerNickname",null),Object(o.c)([O.k],e.prototype,"SetPlayerNotificationSettings",null),Object(o.c)([O.k],e.prototype,"SetPlayerPerFriendPreferences",null),Object(o.c)([O.k],e.prototype,"InviteToGame",null),Object(o.c)([O.k],e.prototype,"InviteToLobby",null),Object(o.c)([O.k],e.prototype,"InviteToWatch",null),e}();function P(e){switch(e){case 25:return"#Friend_InviteError_LimitExceeded";case 15:return"#Friend_InviteError_AccessDenied";case 40:return"#Friend_InviteError_Blocked";case 11:return"#Friend_InviteError_InvalidState";case 84:return"#Friend_InviteError_RateLimitExceeded";case 24:return"#Friend_InviteError_InsufficientPrivilege"}return""}},"+mma":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p}));var o=n("Hi0u"),r=n("hReu"),i=n("LAqV"),a=n("oh5H"),s=n("kQil");function c(e,t,n,i,c,l,u){return void 0===c&&(c=Object(a.d)("#Button_Cancel")),Object(s.h)((function(n){var i=p(e,t);Object(o.c)(n,e,"alertdialog",i,Object(r.g)(e))}),t,n,i,c,l,u)}function l(e,t,n,o,r,i,s){return void 0===r&&(r=Object(a.d)("#Button_Cancel")),c(e,t,n,o,r,i,s).then((function(){return Promise.resolve(!0)})).catch((function(){return Promise.resolve(!1)}))}function u(e,t,n,i,c){return void 0===i&&(i=Object(a.d)("#Button_OK")),Object(s.g)((function(n){var i=p(e,t);Object(o.c)(n,e,"alertdialog",i,Object(r.g)(e))}),t,n,i,c)}function p(e,t){return i.f.UIStore.GetPerContextChatData(Object(r.f)(e)).BUsePopups()&&e.innerWidth<600?{strTitle:t,popupWidth:638,popupHeight:300}:null}},"/1MB":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("mrSG"),r=n("1KZt"),i=n("1n9R"),a=n("vDqi"),s=n.n(a),c=function(e){function t(){return e.call(this)||this}return Object(o.d)(t,e),t.prototype.BInitialized=function(){return!0},t.prototype.GetServerTime=function(){return i.c.PAGE_TIMESTAMP+Math.floor(performance.now()/1e3)},t.prototype.RequestEmoticonListInternal=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,a,c,l,u,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:e=[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.a.get(i.c.CHAT_BASE_URL+"actions/EmoticonData",{withCredentials:!0})];case 2:if((t=o.sent()).data.emoticons)for(n=0,r=t.data.emoticons;n<r.length;n++)a=r[n],(c=a.name).startsWith("^")?e.push({name:c}):(l={name:c.substr(1,c.length-2)},(u=l.name.toLowerCase())!=l.name&&(l.name_normalized=u),a.time_last_used&&(l.last_used=a.time_last_used),a.use_count&&(l.use_count=a.use_count),a.time_received&&(l.time_received=a.time_received),a.appid&&(l.appid=a.appid),e.push(l));return[3,4];case 3:return p=o.sent(),console.error("error loading emoticon list",p),[3,4];case 4:return this.OnEmoticonListReceived(e),[2]}}))}))},t}(r.a),l=new c},"/7KC":function(e,t,n){"use strict";function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function r(e,t,n){return Math.max(t,Math.min(n,e))}function i(e,t,n,o,r){return o+(r-o)*(e-t)/(n-t)}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i}))},"/Byk":function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return g}));var o=n("mrSG"),r=n("q1tI"),i=n("ljid"),a=n("hReu"),s=n("Hi0u"),c=n("oh5H"),l=n("1VtQ"),u=n("LAqV"),p=n("TyAF"),m=n("yolM"),d=n("XaMz"),h=n("r95U"),f=n.n(h);function _(e,t){var n=t.GetGroup().textRoomList.length;n>7&&(n=7);var o=60*n;n<2&&(o-=32),Object(s.c)(r.createElement(b,{group:t.GetGroup()}),e,"ChatRoomGroupNotificationSettings",{strTitle:Object(c.d)("#NotificationSettings_Title"),popupWidth:600,popupHeight:348+o},Object(a.g)(e))}r.createElement("div",{className:"notificationChimeAndToast FriendsSettingsNotificationRow"},r.createElement(i.e,null),r.createElement(i.e,null));function g(e){void 0===e&&(e=!0);var t=[];return e&&(t=t.concat([{label:r.createElement("span",{className:"ChannelSpecificNotificationSettings_Inherit"},Object(c.d)("#NotificationSetting_Inherit")),data:0}])),t=t.concat([{label:Object(c.d)("#NotificationSetting_AllMessages"),data:4},{label:Object(c.d)("#NotificationSetting_AnyMention",u.f.FriendStore.self.display_name),data:3},{label:Object(c.d)("#NotificationSetting_DirectMention",u.f.FriendStore.self.display_name),data:2},{label:Object(c.d)("#NotificationSetting_None"),data:1}])}var b=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgSelectOptions=g(!1),n.state={cSavesInFlight:0},n}return Object(o.d)(t,e),t.prototype.IncrementSavesInFlight=function(){this.setState((function(e){return{cSavesInFlight:e.cSavesInFlight+1}}))},t.prototype.DecrementSavesInFlight=function(){this.setState((function(e){return Object(d.a)(e.cSavesInFlight>0,"expected "+e.cSavesInFlight+" > 0"),{cSavesInFlight:e.cSavesInFlight-1}}))},t.prototype.WrapSavePromise=function(e){this.IncrementSavesInFlight(),e.then(this.DecrementSavesInFlight,this.DecrementSavesInFlight)},t.prototype.OnGroupNotificationLevelChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(e))},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(void 0,void 0,e))},t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnFriendsSettingsClicked=function(e){Object(m.a)(Object(a.e)(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.render=function(){var e,t=this,n=this.props.group,o=n.chatRoomList.filter((function(e){return e.BShouldTrackUnreadMessages()})),a=o.length>0;if(1==o.length&&0==o[0].GetDesktopNotificationLevelSetting()&&0==o[0].GetMobileNotificationLevelsetting()&&(a=!1),a){var l=o.map((function(e){return r.createElement(v,{fnHandleSave:t.WrapSavePromise,group:n,chat:e,key:e.unique_id})}));e=r.createElement(r.Fragment,null,r.createElement("div",{className:"notificationsChannelListContainer\t"},l))}return r.createElement(s.a,{onEscKeypress:this.DismissDialog},r.createElement(i.h,{classNameContent:"ChatRoomNotificationSettingsDialog"},r.createElement(i.m,null,Object(c.d)("#NotificationSettings_Title")),r.createElement(i.p,null,Object(c.k)("#NotificationSettings_SubTitle",r.createElement("span",{className:"whiteText"},n.name))),r.createElement(i.b,null,r.createElement(i.p,{className:"NotificationSettingsSavingIndicator "+(this.state.cSavesInFlight?"Saving":"")},Object(c.d)("#GroupSettings_Permissions_Saving"),"..."),r.createElement(y,{drop_down_options:this.m_rgSelectOptions,get_notification_level:function(e){return t.props.group.GetDesktopNotificationLevel(e)},set_notification_level:this.OnGroupNotificationLevelChanged,get_muted:function(){return t.props.group.BIsUnreadIndicatorMuted()},set_muted:this.OnShowUnreadIndicatorChanged}),a&&r.createElement(r.Fragment,null,r.createElement(i.l,null),r.createElement(i.D,{className:"notificationsChannelHeader"},r.createElement(i.p,{className:"NotificationChannelNameLabel"},Object(c.d)("#GroupSettings_Channels_TextChannels")),r.createElement(i.p,{className:"OverrideChannelLabel"},Object(c.d)("#NotificationSetting_ShortLabel"))),r.createElement(i.n,{className:f.a.scrollMaskVertical},e))),r.createElement(i.j,null,Object(c.k)("#NotificationSetting_Footer_Desc",r.createElement("span",{className:"textLink",onClick:this.OnFriendsSettingsClicked},Object(c.d)("#FriendSettings_Title"))))))},Object(o.c)([l.a],t.prototype,"IncrementSavesInFlight",null),Object(o.c)([l.a],t.prototype,"DecrementSavesInFlight",null),Object(o.c)([l.a],t.prototype,"WrapSavePromise",null),Object(o.c)([l.a],t.prototype,"OnGroupNotificationLevelChanged",null),Object(o.c)([l.a],t.prototype,"OnShowUnreadIndicatorChanged",null),Object(o.c)([l.a],t.prototype,"DismissDialog",null),Object(o.c)([l.a],t.prototype,"OnFriendsSettingsClicked",null),t=Object(o.c)([p.a],t)}(r.Component),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_rgSelectOptions=g(),t}return Object(o.d)(t,e),t.prototype.OnChatNotificationLevelChanged=function(e){this.props.fnHandleSave(this.props.chat.SetNotificationPreferences(e.data))},t.prototype.render=function(){var e=this.props.chat;e.GetDesktopNotificationLevelSetting();return r.createElement(i.C,{className:"notificationsChannel"},r.createElement("div",{className:"NotificationChannelName"},e.name),r.createElement(i.i,{rgOptions:this.m_rgSelectOptions,selectedOption:e.GetDesktopNotificationLevelSetting(),onChange:this.OnChatNotificationLevelChanged}))},Object(o.c)([l.a],t.prototype,"OnChatNotificationLevelChanged",null),t=Object(o.c)([p.a],t)}(r.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnNotificationLevelChanged=function(e){this.props.set_notification_level(e.data)},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.props.set_muted(!e)},t.prototype.render=function(){var e=this.props.get_notification_level(!0);this.props.bIsDefault&&0==e&&(e=4);var t=this.props.get_notification_level();return this.props.bIsDefault&&0==t&&(t=4),r.createElement("div",{className:"ChatRoomNotificationSettingsDialog"},r.createElement("div",{className:"notificationGeneralHeader"+(this.props.bIsDefault?" isDefault":"")},r.createElement(i.p,null,this.props.bIsDefault?Object(c.d)("#NotificationSetting_DefaultLabel"):Object(c.d)("#NotificationSetting_Label"))),r.createElement("div",{style:{marginBottom:16}},r.createElement("div",{className:"notificationRow"},r.createElement(i.i,{rgOptions:this.props.drop_down_options,selectedOption:e,onChange:this.OnNotificationLevelChanged})),4!=t&&r.createElement("div",{className:"indicatorOptionContainer"},r.createElement(i.u,{classname:"indicatorOption",label:Object(c.d)("#NotificationSetting_Indicator"),onChange:this.OnShowUnreadIndicatorChanged,checked:!this.props.get_muted()}),r.createElement("div",{className:"ChatUnreadMessageIndicator"+(this.props.get_muted()?" Hidden":"")},r.createElement("div",{className:"chatUnreadCircle"})))))},Object(o.c)([l.a],t.prototype,"OnNotificationLevelChanged",null),Object(o.c)([l.a],t.prototype,"OnShowUnreadIndicatorChanged",null),t=Object(o.c)([p.a],t)}(r.Component)},"/FkP":function(e,t,n){"use strict";n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"f",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return _})),n.d(t,"k",(function(){return g})),n.d(t,"a",(function(){return b}));var o,r,i,a=n("mrSG"),s=n("2vnA"),c=n("0N1H"),l=n("LAqV"),u={"/me":{strDescriptionToken:"#SlashCommandDescription_Me"},"/code":{strDescriptionToken:"#SlashCommandDescription_Code"},"/pre":{strDescriptionToken:"#SlashCommandDescription_Pre"},"/giphy":{strDescriptionToken:"#SlashCommandDescription_Giphy"},"/spoiler":{strDescriptionToken:"#SlashCommandDescription_Spoiler"},"/quote":{strDescriptionToken:"#SlashCommandDescription_Quote"},"/random":{strDescriptionToken:"#SlashCommandDescription_Random",unExpectedArguments:[1,2]},"/flip":{strDescriptionToken:"#SlashCommandDescription_Flip",unExpectedArguments:0},"/store":{strDescriptionToken:"#SlashCommandDescription_Store"}};function p(){return Object.keys(u)}function m(e){return u[e]}!function(e){e[e.None=0]="None",e[e.Deleting=1]="Deleting",e[e.Deleted=2]="Deleted"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Animating=1]="Animating"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Generic=1]="Generic",e[e.NotFriends=2]="NotFriends",e[e.NoChatPermissionInGroup=3]="NoChatPermissionInGroup",e[e.RateLimitExceeded=4]="RateLimitExceeded"}(i||(i={}));var d=function(){function e(e,t,n,i,a,s,c){this.unOrdinal=0,this.eDeleteState=o.None,this.eAnimationState=r.None,this.unAccountID=e,this.rtTimestamp=t,this.unOrdinal=n||0,i&&i.length>13e3?this.strMessage=i.substr(0,13e3):this.strMessage=i,this.m_strSlashCommand=function(e){if(!e)return null;var t=e.split(/\s/),n=t[0],o=t.slice(1);if(u[n]){var r=u[n].unExpectedArguments;if(void 0===r||("number"==typeof r?r===o.length:r.indexOf(o.length)>-1))return n}return null}(i),this.strMessage=this.HandleSpecialMessage(this.strMessage),void 0!==a&&(this.eServerMsgType=a,this.strServerMsgParam=s,this.unServerMsgParamAccountID=c)}return e.prototype.UniqueKey=function(){return this.unOrdinal?this.rtTimestamp+"_"+this.unOrdinal:this.rtTimestamp},Object.defineProperty(e.prototype,"Mentions",{get:function(){return this.m_mentions||{}},set:function(e){this.m_mentions=e},enumerable:!1,configurable:!0}),e.prototype.BIsLocalEcho=function(){return!1},e.prototype.BHasServerAcknowledged=function(){return!0},Object.defineProperty(e.prototype,"eErrorSending",{get:function(){return i.None},enumerable:!1,configurable:!0}),e.prototype.BIsServerMessage=function(){return null!=this.eServerMsgType&&0!=this.eServerMsgType},e.prototype.BIsInvite=function(){return 5==this.eServerMsgType},e.prototype.GetSlashCommand=function(){return this.m_strSlashCommand},e.prototype.BIsOlderThan=function(e){return this.rtTimestamp<e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal<e.unOrdinal},e.prototype.BIsNewerThan=function(e){return this.rtTimestamp>e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal>e.unOrdinal},e.prototype.HasUserContent=function(){return!this.m_bNoUserContent},e.prototype.HandleSpecialMessage=function(e){return"+1"==e?(this.m_bNoUserContent=!0,"[plusone][/plusone]"):e},e.prototype.OnAnimationEnd=function(){this.eAnimationState=r.None},Object(a.c)([s.B],e.prototype,"rtTimestamp",void 0),Object(a.c)([s.B],e.prototype,"unOrdinal",void 0),Object(a.c)([s.B],e.prototype,"eDeleteState",void 0),Object(a.c)([s.B],e.prototype,"eAnimationState",void 0),Object(a.c)([s.B],e.prototype,"strServerMsgAppCustomLocalized",void 0),e}(),h=function(e){function t(n,o,r){var a=e.call(this,n,o,-1,r)||this;return a.eErrorSending=i.None,a.m_bServerAcknowledged=!1,a.strMessageObservable=a.HandleSpecialMessage(r),a.m_iLocalEchoID=t.sm_iLocalEchoID++,a}return Object(a.d)(t,e),Object.defineProperty(t.prototype,"strMessage",{get:function(){return this.strMessageObservable},set:function(e){this.strMessageObservable=this.HandleSpecialMessage(e)},enumerable:!1,configurable:!0}),t.prototype.BIsLocalEcho=function(){return!0},t.prototype.UniqueKey=function(){return this.m_bServerAcknowledged?e.prototype.UniqueKey.call(this):"localecho_"+this.m_iLocalEchoID},t.prototype.BHasServerAcknowledged=function(){return this.m_bServerAcknowledged},t.prototype.OnServerAcknowledged=function(){this.m_bServerAcknowledged=!0},t.sm_iLocalEchoID=0,Object(a.c)([s.B],t.prototype,"eErrorSending",void 0),Object(a.c)([s.B],t.prototype,"strMessageObservable",void 0),Object(a.c)([s.B],t.prototype,"m_bServerAcknowledged",void 0),Object(a.c)([s.k],t.prototype,"OnServerAcknowledged",null),t}(d),f=function(e){function t(n,o,r){return e.call(this,n,o,++t.m_nOrdinal,r)||this}return Object(a.d)(t,e),t.m_nOrdinal=0,t}(d),_=function(e){function t(n,o,r){return e.call(this,n,o,++t.m_nOrdinal,r)||this}return Object(a.d)(t,e),t.m_nOrdinal=0,t}(d);function g(e){switch(e){case 1:case 5:case 2:case 3:case 4:case 9:case 10:case 11:return!0}return!1}var b=function(){function e(){this.m_rgMessageBlocks=s.B.array([],{deep:!1}),this.Clear()}return Object.defineProperty(e.prototype,"message_blocks",{get:function(){return this.m_rgMessageBlocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time_passes_index",{get:function(){return this.m_iIndexLastTimePassesGap},enumerable:!1,configurable:!0}),e.prototype.Clear=function(){this.m_rgMessageBlocks.clear(),this.m_rgMessageBlocks.push(new v),this.m_iIndexLastTimePassesGap=void 0},e.prototype.AppendMessage=function(e){var t=this.m_rgMessageBlocks[this.m_rgMessageBlocks.length-1];if(!t.BCanAccumulateMessage(e)){var n=t;t=new v,this.m_rgMessageBlocks.push(t),n.SetNextBlock(t),e.rtTimestamp-n.GetRTimeLastMessage()>=3600&&(n.GetRTimeMidnightBeforeBlock()==l.f.GetLocalMidnightInRTime32(e.rtTimestamp)?this.m_iIndexLastTimePassesGap=this.m_rgMessageBlocks.length-1:this.m_iIndexLastTimePassesGap=void 0)}t.AppendMessage(e)},e.prototype.BuildMessageBlocks=function(e){this.Clear();for(var t=0,n=e;t<n.length;t++){var o=n[t];this.AppendMessage(o)}},e.prototype.AppendNewMessage=function(e){this.AppendMessage(e)},e.prototype.RemoveLocalMessage=function(e){for(var t=0,n=this.m_rgMessageBlocks;t<n.length;t++){if(n[t].RemoveLocalMessage(e))return!0}return!1},e.prototype.RemoveOldestMessages=function(e){for(var t=0;e>0&&!(t>=this.m_rgMessageBlocks.length);){if((r=this.m_rgMessageBlocks[t].messages).length>e)break;e-=r.length,t++}if(0==t)return null;for(var n=null,o=t-1;o>=0;o--){var r;if(0!=(r=this.m_rgMessageBlocks[o].messages).length){n=r[r.length-1];break}}return this.m_rgMessageBlocks.splice(0,t),n},Object(a.c)([s.B],e.prototype,"m_iIndexLastTimePassesGap",void 0),Object(a.c)([s.k],e.prototype,"BuildMessageBlocks",null),Object(a.c)([s.k],e.prototype,"AppendNewMessage",null),Object(a.c)([s.k],e.prototype,"RemoveLocalMessage",null),Object(a.c)([s.k],e.prototype,"RemoveOldestMessages",null),e}(),v=function(){function e(){this.m_rgMessages=[],this.m_bMessageBlockIsOnlyEmotes=!0}return e.prototype.CreateVirtualSplitOnTimestamp=function(t){var n=new e,o=new e;n.SetNextBlock(o),o.SetNextBlock(this.m_nextBlock);for(var r=0,i=this.m_rgMessages;r<i.length;r++){var a=i[r];a.rtTimestamp<t?n.AppendMessage(a):o.AppendMessage(a)}return[n,o]},e.prototype.UniqueKey=function(){return this.m_rgMessages.length?this.m_rgMessages[0].UniqueKey():"EmptyBlock"},Object.defineProperty(e.prototype,"messages",{get:function(){return this.m_rgMessages},enumerable:!1,configurable:!0}),e.prototype.SetNextBlock=function(e){this.m_nextBlock=e},Object.defineProperty(e.prototype,"is_last_block",{get:function(){return void 0===this.m_nextBlock},enumerable:!1,configurable:!0}),e.prototype.GetRTimeMidnightBeforeBlock=function(){return this.m_rtMidnightBeforeBlock},e.prototype.GetRTimeMidnightBeforeNextBlock=function(){return this.m_nextBlock?this.m_nextBlock.GetRTimeMidnightBeforeBlock():l.f.GetLocalMidnightInRTime32()},e.prototype.GetRTimeLastMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp:c.i},e.prototype.GetRTimeFirstMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[0].rtTimestamp:0},e.prototype.AppendMessage=function(e){"/me"===e.GetSlashCommand()||(this.m_bMessageBlockIsOnlyEmotes=!1),this.m_rgMessages.length||(this.m_rtMidnightBeforeBlock=l.f.GetLocalMidnightInRTime32(e.rtTimestamp)),this.m_rgMessages.push(e)},e.prototype.BCanAccumulateMessage=function(e){if(!this.m_rgMessages.length)return!0;var t=this.m_rgMessages[0].unAccountID,n=this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp,o=this.m_rgMessages[this.m_rgMessages.length-1];return e.BIsServerMessage()==this.m_rgMessages[0].BIsServerMessage()&&(!(!e.BIsServerMessage()||e.BIsInvite()||this.m_rgMessages[0].BIsInvite())||!(!t||t!=e.unAccountID)&&(e.BIsInvite()==this.m_rgMessages[0].BIsInvite()&&(!(e.rtTimestamp-n>300)&&((!this.m_bMessageBlockIsOnlyEmotes||"/me"===e.GetSlashCommand())&&(!(e instanceof f||o instanceof f)&&(!(l.f.GetLocalMidnightInRTime32(e.rtTimestamp)>this.m_rtMidnightBeforeBlock)&&!(e instanceof _||o instanceof _)))))))},e.prototype.BIsInvite=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0].BIsInvite()},e.prototype.BIsServerMsg=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0].BIsServerMessage()&&!this.m_rgMessages[0].BIsInvite()},e.prototype.BIsLocalMsg=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0]instanceof _},e.prototype.RemoveLocalMessage=function(e){var t=this.m_rgMessages.findIndex((function(t){return t.BIsLocalEcho()&&t.UniqueKey()===e.UniqueKey()}));return-1!==t&&(this.m_rgMessages.splice(t,1),!0)},Object(a.c)([s.B.shallow],e.prototype,"m_rgMessages",void 0),Object(a.c)([s.B.shallow],e.prototype,"m_nextBlock",void 0),Object(a.c)([s.k],e.prototype,"CreateVirtualSplitOnTimestamp",null),e}()},"/IDK":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"n",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"p",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"o",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"r",(function(){return f})),n.d(t,"g",(function(){return _})),n.d(t,"f",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"m",(function(){return v})),n.d(t,"l",(function(){return y}));n("mrSG"),n("UqDm"),n("XaMz");function o(e){if(!(e.clientX||e.clientY||e.screenX||e.screenY))return!0;if(e.relatedTarget)return!r(e.currentTarget,e.relatedTarget);var t=e.currentTarget.getBoundingClientRect();return(e.clientX<=t.left||e.clientX>=t.right||e.clientY<=t.top||e.clientY>=t.bottom)&&(console.log(e.clientX+" <= "+t.left+" || "+e.clientX+" >= "+t.right+" ||\n\t\t\t\t"+e.clientY+" <= "+t.top+" || "+e.clientY+" >= "+t.bottom),!0)}function r(e,t){for(;t;){if(t.parentNode.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(t=t.parentNode.host),t==e)return!0;t=t.parentElement}return!1}function i(e,t){for(;t;)if((t=t.parentElement)==e)return!0;return!1}function a(e){if(!window.getSelection)return!1;for(var t=window.getSelection(),n=0,o=0;o<t.rangeCount;o++){var i=t.getRangeAt(o);if(i.startOffset!=i.endOffset)r(e,i.commonAncestorContainer)&&n++}return t.rangeCount>0&&t.rangeCount==n}function s(e,t,n){var o=0,r=0;return t<e.left?o=e.left-t:t>e.right&&(o=t-e.right),n<e.top?r=e.top-n:n>e.bottom&&(r=n-e.bottom),Math.sqrt(o*o+r*r)}function c(e,t){return{width:t.width,height:t.height,top:e.screenTop+t.top,bottom:e.screenTop+t.bottom,left:e.screenLeft+t.left,right:e.screenLeft+t.right}}function l(e){var t=void 0;return e&&e.currentTarget&&(t=e.currentTarget.ownerDocument.defaultView),t}function u(e){var t=void 0;return e&&(t=e.ownerDocument.defaultView),t}function p(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{document.body.removeChild(t)}}function m(e){e.startsWith("steam://openurl/")&&(e=e.slice("steam://openurl/".length)),p(e)}function d(e){return e?0==e.clipboardData.files.length||e.clipboardData.types.some((function(e){return("text"==e||e.startsWith("text/"))&&"text/html"!==e}))?null:e.clipboardData.files[0]:null}function h(e){var t=e.ownerDocument;return t.fullscreen||t.webkitIsFullScreen||t.mozFullScreen||t.msFullscreenElement}function f(e,t){var n=e;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():t&&t.webkitSetPresentationMode?t.webkitSetPresentationMode("fullscreen"):n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}function _(e){var t=e.ownerDocument;t.cancelFullscreen?t.cancelFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()}function g(e,t){var n=e;return n.lastModifiedDate=new Date,n.name=t||Date.now().toString(),e}function b(e,t,n){for(var o=t.parentElement;o&&o!==e&&!o.hasAttribute(n);)o=o.parentElement;return o||e}function v(e,t){for(var n=[],o=Array.prototype.slice.call(e.children).reverse();o.length>0;){var r=o.pop();r.hasAttribute(t)?n.push(r):o.push.apply(o,Array.prototype.slice.call(r.children).reverse())}return n}function y(e,t){for(;e;){if(t(e))return e;e=e.parentElement}}},"/SYB":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=function(){function e(e){this.idGenerator=e||function(){return""}}return e.prototype.LOG=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&console.log.apply(console,Object(o.g)([this.idGenerator()+":"],e))},e.create=function(t,n){void 0===n&&(n=!1);var o=new e(t);return o.enabled=n,o.LOG.bind(o)},e}();function s(e){if(i.a.isCancel(e))return{strErrorMsg:"Action Cancelled:"+e,errorCode:52};if(void 0!==e.response&&e.response.data&&"object"==typeof e.response.data){if("msg"in e.response.data)return{strErrorMsg:e.response.data.msg,errorCode:e.response.data.success};if("err_msg"in e.response.data)return{strErrorMsg:e.response.data.err_msg,errorCode:e.response.data.success};if("message"in e.response.data)return{strErrorMsg:e.response.data.message,errorCode:e.response.data.success}}else{if(void 0!==e.success&&void 0!==e.msg)return{strErrorMsg:e.msg,errorCode:e.success};if(void 0!==e.success&&void 0!==e.message)return{strErrorMsg:e.message,errorCode:e.success};if(void 0!==e.success&&void 0!==e.err_msg)return{strErrorMsg:e.err_msg,errorCode:e.success};"string"==typeof e&&e.length>1024?(console.groupCollapsed("GetMsgAndErrorCodeFromResponse cannot parse: "),console.error(e),console.groupEnd()):console.error("GetMsgAndErrorCodeFromResponse cannot parse: ",e)}return"object"==typeof e&&"status"in e?{strErrorMsg:"Unknown Error: "+e+"\nStatus Code:"+e.status,errorCode:2}:{strErrorMsg:"Unknown Error: "+e,errorCode:2}}},"/ZM5":function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return R}));var o=n("mrSG"),r=n("q1tI"),i=n("1w3K"),a=n("ljid"),s=n("e2SU"),c=n("hReu"),l=n("LAqV"),u=n("29iz"),p=n("gtB6"),m=n("+mma"),d=n("Hi0u"),h=n("2vnA"),f=n("TyAF"),_=n("8o0Y"),g=n("EGkk"),b=n("oh5H"),v=n("1VtQ"),y=n("bbBM"),S=n("ieu3"),C=n("dpJ7"),O=n("/IDK"),I=n("20CD"),E=n("XaMz"),w=n("E7zH"),M=function(e){function t(t){var n=e.call(this,t)||this;return n.m_schHoverDelay=new w.b,n.state={bCollapsed:!1,bMouseHover:!1},n}return Object(o.d)(t,e),t.prototype.OnRoomsContextMenu=function(e){var t=this;if(this.props.groupView.GetGroup().BCanAdminChannel()){var n=e.currentTarget.ownerDocument.defaultView;Object(_.a)(r.createElement(g.c,null,r.createElement(g.d,{onSelected:function(){t.CreateTextChannel(n)}},Object(b.d)("#GroupSettings_Channels_CreateText")),r.createElement(g.d,{onSelected:function(){t.CreateVoiceChannel(n)}},Object(b.d)("#GroupSettings_Channels_CreateVoice"))),e)}},t.prototype.CreateTextChannel=function(e){Object(d.c)(r.createElement(D,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!0}),e)},t.prototype.CreateVoiceChannel=function(e){Object(d.c)(r.createElement(D,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!0}),e)},t.prototype.OnMouseEnter=function(e){var t=this;this.m_schHoverDelay.Schedule(400,(function(){t.setState({bMouseHover:!0})}))},t.prototype.OnMouseLeave=function(e){this.setState({bMouseHover:!1}),this.m_schHoverDelay.Cancel()},t.prototype.ToggleCollapseExpand=function(){var e=this.props.groupView;e.SetChannelListCollapsed(!e.isChannelListCollapsed)},t.prototype.render=function(){var e=this.props.groupView.GetGroup(),t=e.IsNamedGroupChat(),n=!1,o="chatRoomGroupNavColumn",i=this.props.groupView.isChannelListCollapsed;return 0!=e.voiceRoomList.length||t?i&&!this.state.bMouseHover&&(o+=" chatRoomGroupNavCollapsed"):(n=!0,o+=" defaultChatOnly"),this.props.inactive||n?r.createElement("div",{className:o}):r.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},r.createElement("div",{className:"chatRoomChannelGroups",onContextMenu:this.OnRoomsContextMenu},t&&r.createElement(T,{groupView:this.props.groupView}),r.createElement(G,{groupView:this.props.groupView}),(!i||this.state.bMouseHover)&&r.createElement("div",{className:"chatRoomGroupNavCollapseExpand",title:Object(b.d)(i?"#Tooltip_PinChannelList":"#Tooltip_UnpinChannelList"),onClick:this.ToggleCollapseExpand},r.createElement(s.P,{bPinned:!i}))),r.createElement("div",{className:"disconnectBlocker"}))},Object(o.c)([v.a],t.prototype,"OnRoomsContextMenu",null),Object(o.c)([v.a],t.prototype,"OnMouseEnter",null),Object(o.c)([v.a],t.prototype,"OnMouseLeave",null),Object(o.c)([v.a],t.prototype,"ToggleCollapseExpand",null),t=Object(o.c)([f.a],t)}(r.Component),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnSubmit=function(){var e=this,t=this.m_refInput&&this.m_refInput.value;t&&this.props.groupView.GetGroup().CreateChatRoom(t,this.props.bVoiceChannel).then((function(t){t&&(e.props.closeModal(),e.props.bJoinChannel&&(e.props.bVoiceChannel?t.StartVoiceChat():e.props.groupView.SelectChat(t.GetRoomID())))})).catch((function(t){Object(m.c)(e.props.ownerWin,Object(b.d)("#Generic_Error"),Object(b.d)("#Chat_CreateChatRoom_GenericError")),e.props.closeModal()}))},t.prototype.render=function(){var e=this;return r.createElement(d.a,{onEscKeypress:this.props.closeModal},r.createElement(a.h,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},r.createElement(a.m,null,Object(b.d)(this.props.bVoiceChannel?"#GroupSettings_Channels_CreateVoice":"#GroupSettings_Channels_CreateText")),r.createElement(a.b,null,r.createElement(a.o,{ref:function(t){e.m_refInput=t},autoFocus:!0,label:Object(b.d)("#Chat_SaveVoiceRoom_Name")})),r.createElement(a.j,null,r.createElement(a.s,{onCancel:this.props.closeModal}))))},Object(o.c)([v.a],t.prototype,"OnSubmit",null),t}(r.Component);var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCreateNewTextChannel=function(e){var t,n,o,i=Object(O.q)(e);this.props.groupView.GetGroup().BCanAdminChannel()&&(t=i,n=this.props.groupView,o=!1,Object(d.c)(r.createElement(D,{ownerWin:t,groupView:n,bVoiceChannel:o,bJoinChannel:!0}),t,"CreateChatChannelDialog",{strTitle:Object(b.d)("#GroupSettings_Channels_CreateText"),popupWidth:800,popupHeight:400},Object(c.g)(t)))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var e=this,t=this.props.groupView,n=t.GetGroup().textRoomList,o=t.GetGroup().BCanAdminChannel();t.isChannelListCollapsed;return r.createElement("div",{className:"chatRoomTextChannelsGroup"},r.createElement("div",{className:"ChannelTypeTitle",title:Object(b.d)("#Tooltip_TextChannel"),onClick:this.OnCreateNewTextChannel},r.createElement("div",{className:"ChannelTypeLabel"+(o?"":" NoPermission"),title:o?Object(b.d)("#Tooltip_TextChannelCreate"):Object(b.d)("#Tooltip_NoPermissionChannelCreate")},o?Object(b.d)("#Chat_AddTextChat"):Object(b.d)("#Chat_CreateTextChannel_DefaultName")),r.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(b.d)("#Tooltip_TextChannelCreate")},r.createElement(s.R,null))),n.map((function(n){return r.createElement(j,{key:n.unique_id,chat:n,bRenameActive:t.IsRoomRenameActive(n.GetRoomID()),bActiveChat:n==t.GetActiveChatView().chat,bDefaultRoom:n==t.GetGroup().GetDefaultChatRoom(),onStartRename:e.OnStartChannelRename,onRename:e.OnChannelRename,onEndRename:e.OnEndChannelRename})})))},Object(o.c)([v.a],t.prototype,"OnCreateNewTextChannel",null),Object(o.c)([v.a],t.prototype,"OnStartChannelRename",null),Object(o.c)([v.a],t.prototype,"OnChannelRename",null),Object(o.c)([v.a],t.prototype,"OnEndChannelRename",null),t=Object(o.c)([f.a],t)}(r.Component),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ToggleTextChat=function(){if(!this.props.bRenameActive){var e=l.f.UIStore.IsChatRoomGroupActive(Object(c.e)(this),this.props.chat.GetGroup()),t=l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(c.e)(this),this.props.chat.GetGroup(),!1),n=t.GetPopoverChatView();e&&n&&n.chat&&n.chat==this.props.chat?t.ClosePopoverChat():t.SelectChat(this.props.chat.GetRoomID())}},t.prototype.OnContextMenu=function(e){this.props.bRenameActive||Object(p.a)(Object(c.e)(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename)},t.prototype.render=function(){var e=this.props.chat,t="chatRoomTextChannel";this.props.bActiveChat&&(t+=" ActiveTextChannel");var n="chatRoomTextChannelName";this.props.bDefaultRoom&&(n+=" IsCommonsChannel");var o=this.props.bRenameActive&&!this.props.chat.GetVoiceAllowed();return r.createElement("div",{className:t,onClick:this.ToggleTextChat,onContextMenu:this.OnContextMenu},r.createElement(S.b,{chat:e}),r.createElement("div",{className:"chatRoomTextChannelIcon"},r.createElement(s.hb,null)),!o&&r.createElement("div",{className:n},e.BIsDefaultRoom()?Object(b.d)("#Chat_DefaultChannelName"):e.name),!this.props.bDefaultRoom&&o&&r.createElement(k,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}))},Object(o.c)([v.a],t.prototype,"ToggleTextChat",null),Object(o.c)([v.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([f.a],t)}(r.Component),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.CreateVoiceRoom=function(){this.props.groupView.GetGroup().CreateAndJoinTempVoiceRoom()},t.prototype.OnVoiceRoomSelected=function(e){this.props.groupView.GetRenameRoomID()==e.GetRoomID()||(l.f.ChatStore.VoiceChat.GetActiveVoiceChatID()==e.GetRoomID()||(this.props.groupView.ClosePopoverChat(),e.StartVoiceChat()))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var e=this,t=this.props.groupView,n=t.GetGroup().voiceRoomList;return r.createElement("div",{className:"chatRoomVoiceChannelsGroup"},r.createElement("div",{className:"ChannelTypeTitle",title:Object(b.d)("#Tooltip_VoiceChannelCreate"),onClick:this.CreateVoiceRoom},r.createElement("div",{className:"ChannelTypeLabel"},Object(b.d)("#Chat_AddVoiceChat")),r.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(b.d)("#Tooltip_VoiceChannelCreate")},r.createElement(s.R,null))),n.map((function(n){return r.createElement(R,{key:n.unique_id,context:"VoiceRoomsGroup",chat:n,bRenameActive:t.GetRenameRoomID()==n.GetRoomID(),onSelect:function(){e.OnVoiceRoomSelected(n)},onStartRename:e.OnStartChannelRename,onRename:e.OnChannelRename,onEndRename:e.OnEndChannelRename})})))},Object(o.c)([v.a],t.prototype,"CreateVoiceRoom",null),Object(o.c)([v.a],t.prototype,"OnVoiceRoomSelected",null),Object(o.c)([v.a],t.prototype,"OnStartChannelRename",null),Object(o.c)([v.a],t.prototype,"OnChannelRename",null),Object(o.c)([v.a],t.prototype,"OnEndChannelRename",null),t=Object(o.c)([f.a],t)}(r.Component),R=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dropToInviteFriend:void 0,bDropConfirmationNotice:!1},n}return Object(o.d)(t,e),t.prototype.OnContextMenu=function(e){this.props.bRenameActive||Object(p.a)(Object(c.e)(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename),e.preventDefault(),e.stopPropagation()},t.prototype.InviteToChat=function(e){Object(I.b)(Object(c.e)(this,e),e.currentTarget.ownerDocument.defaultView,this.props.chat.GetGroup(),this.props.chat),e.stopPropagation()},t.prototype.OnDragEnter=function(e,t){if(Object(E.a)(e&&"friend"==e.type,"Invalid type passed to VoiceRoom.OnDragEnter"),e){var n=e;n.friend&&this.setState({dropToInviteFriend:n.friend})}return!0},t.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){var n=this;if(Object(E.a)(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var o=e;if(o.friend&&o.friend!=l.f.FriendStore.self){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),c.i.DragDropManager.SetDropConsumed();var r=t.currentTarget.ownerDocument.defaultView;this.props.chat.GetGroup().BIsUserGroupMember(o.friend)?(this.props.chat.GetGroup().InviteFriend(o.friend.accountid,this.props.chat),this.setState({bDropConfirmationNotice:!0}),this.m_dropInviteInvitee=o.friend,this.m_dropConfirmationInterval=window.setInterval((function(){n.setState({bDropConfirmationNotice:!1}),window.clearInterval(n.m_dropConfirmationInterval)}),1200)):Object(C.j)({invitee:o.friend,chatview:null,invitedto:this.props.chat},Object(c.e)(this,t),r)}}},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.GetFriendContext=function(){var e=this.props.chat&&this.props.chat.GetGroup().readyToRender?this.props.chat:null;return this.m_FriendContext&&this.m_FriendContext.chat==e||(this.m_FriendContext={chat:e}),this.m_FriendContext},t.prototype.render=function(){var e=this,t=this.props.chat.GetGroup(),n=this.props.chat==t.GetDefaultChatRoom(),a=l.f.ChatStore.VoiceChat.GetActiveVoiceChatID()==this.props.chat.GetRoomID(),c=l.f.CMInterface.steamid.GetAccountID(),p=l.f.FriendStore.GetPlayer(c),m=this.props.chat.voice_active_contains_only_self,d="emptyChannelNotice",h=this.props.chat.voice_active_member_list.member_list.map((function(t){return r.createElement(i.CSSTransition,{key:t.accountid,classNames:"friend-anim",timeout:320},r.createElement(y.c,{friend:t,key:t.accountid,context:e.GetFriendContext(),showVoiceLevel:!0,bInVoiceList:!0}))})),f=this.props.chat.voice_active_contains_friends;a&&!this.props.chat.voice_active_contains_self&&(0==h.length&&(m=!0),f=!0,h.push(r.createElement(i.CSSTransition,{key:c,classNames:"friend-anim",timeout:320},r.createElement(y.c,{friend:p,key:c,context:this.GetFriendContext(),showVoiceLevel:!0}))));var _=["chatRoomVoiceChannel"];a&&_.push("ActiveVoiceChannel"),f||"ChatRoomList"!=this.props.context||_.push("MinimizeMemberList"),this.state.dropToInviteFriend&&_.push("voiceRoomActiveDrop"),a&&m&&(d+=" Visible");var g=this.props.chat.IsUnsavedVoiceChannel(),v=this.props.chat.name;return r.createElement(u.a,Object(o.a)({className:_.join(" "),onClick:this.props.onSelect},this.GetDragDropProps()),r.createElement("div",{className:"chatRoomVoiceChannelIconGlow"}),r.createElement("div",{className:"chatRoomVoiceChannelNameContainer",onContextMenu:this.OnContextMenu},r.createElement("div",{className:"chatRoomVoiceChannelIcon"},r.createElement(s.ob,null)),!this.props.bRenameActive&&r.createElement("div",{className:"chatRoomVoiceChannelName"+(g?" unsavedVoiceChannel":"")},v),this.props.bRenameActive&&r.createElement(k,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}),!this.props.bRenameActive&&r.createElement(r.Fragment,null,r.createElement("div",{onContextMenu:this.OnContextMenu,onClick:this.OnContextMenu,className:"VoiceControlPanelButton chatPinRoom",title:Object(b.d)("#Chat_ChannelOptions")},r.createElement(s.p,null)))),r.createElement("div",{className:"VoiceChannelParticipants CompactFriendsList"},!f&&h,f&&r.createElement(i.TransitionGroup,{enter:!0,exit:!0},h)),r.createElement("div",{className:d},Object(b.d)("#Chat_VoiceEmptyChannel")),r.createElement(y.a,{name:v,chat:this.props.chat,nostatus:!0}),!n&&r.createElement(j,{chat:this.props.chat,bRenameActive:!1,bActiveChat:!1,bDefaultRoom:!1}),r.createElement("div",{className:"ScratchPadConnect"}),this.state.bDropConfirmationNotice&&r.createElement("div",{className:"dropConfirmationNotice"+(this.state.bDropConfirmationNotice?" Active":"")},r.createElement("div",{className:"dropConfirmationLabel"},r.createElement("img",{className:"avatar",src:this.m_dropInviteInvitee.persona.avatar_url_medium}))),r.createElement("div",{className:"dropTargetBox"}))},Object(o.c)([v.a],t.prototype,"OnContextMenu",null),Object(o.c)([v.a],t.prototype,"InviteToChat",null),Object(o.c)([v.a],t.prototype,"OnDragEnter",null),Object(o.c)([v.a],t.prototype,"OnDragLeave",null),Object(o.c)([v.a],t.prototype,"OnDragOver",null),Object(o.c)([v.a],t.prototype,"OnDrop",null),t=Object(o.c)([f.a],t)}(r.Component),k=function(e){function t(t){var n=e.call(this,t)||this;return n.m_strValue="",n.m_strValue=n.props.chat.name,n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.chat!==this.props.chat&&(this.m_strValue=this.props.chat.name)},t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.OnGlobalKeyDown,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.OnGlobalKeyDown,!1)},t.prototype.BindInputRef=function(e){e&&e.focus()},t.prototype.OnChange=function(e){this.m_strValue=e.target.value},t.prototype.OnSubmit=function(e){this.SubmitAndClose(),e.preventDefault()},t.prototype.OnGlobalKeyDown=function(e){27==e.keyCode&&this.Close()},t.prototype.OnBlur=function(e){this.SubmitAndClose()},t.prototype.SubmitAndClose=function(){this.props.onRename(this.props.chat.GetRoomID(),this.m_strValue),this.Close()},t.prototype.Close=function(){this.props.onEndRename()},t.prototype.render=function(){return r.createElement("form",{className:"RenameChatRoomInline",onSubmit:this.OnSubmit},r.createElement("input",{ref:this.BindInputRef,type:"text",value:this.m_strValue,onChange:this.OnChange,onBlur:this.OnBlur}))},Object(o.c)([h.B],t.prototype,"m_strValue",void 0),Object(o.c)([v.a],t.prototype,"BindInputRef",null),Object(o.c)([v.a],t.prototype,"OnChange",null),Object(o.c)([v.a],t.prototype,"OnSubmit",null),Object(o.c)([v.a],t.prototype,"OnGlobalKeyDown",null),Object(o.c)([v.a],t.prototype,"OnBlur",null),t=Object(o.c)([f.a],t)}(r.Component)},"/edK":function(e,t,n){e.exports={General:"chatroomgroupsettings_General_19Qfz",Avatar:"chatroomgroupsettings_Avatar_R-sn3",AvatarAndUser:"chatroomgroupsettings_AvatarAndUser_2xLKr",NoIconLabel:"chatroomgroupsettings_NoIconLabel_o2amd",ChannelsButtons:"chatroomgroupsettings_ChannelsButtons_2iMyG",Notification:"chatroomgroupsettings_Notification_235kw",LeaveButton:"chatroomgroupsettings_LeaveButton_3OGY7",PermissionsEdit:"chatroomgroupsettings_PermissionsEdit_12equ",Back:"chatroomgroupsettings_Back_xsnh9",PermissionsGroup:"chatroomgroupsettings_PermissionsGroup_1EzhI",PermissionToggle:"chatroomgroupsettings_PermissionToggle_qmDqN",PermissionsDescription:"chatroomgroupsettings_PermissionsDescription_21ml5",RoleNameHeader:"chatroomgroupsettings_RoleNameHeader__O_NZ",FixedRoleName:"chatroomgroupsettings_FixedRoleName_4ZaQ0"}},"0N1H":function(e,t,n){"use strict";function o(e){return 3==e||6==e}function r(e){return 5==e||6==e}n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"r",(function(){return i})),n.d(t,"s",(function(){return a})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"o",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return _})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return S}));var i=1,a=4,s=750,c=799,l=7,u=250820,p=330050,m=358510,d=366490,h="18446744073709551615",f=0,_=2147483647,g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28];function b(e,t){switch(void 0===t&&(t="en"),e){case 0:return"en";case 1:return"de";case 2:return"fr";case 3:return"it";case 4:return"ko";case 5:return"es";case 6:return"zn-cn";case 7:return"zn-tw";case 8:return"ru";case 9:return"th";case 10:return"ja";case 11:return"pt";case 12:return"pl";case 13:return"da";case 14:return"nl";case 15:return"fi";case 16:return"no";case 17:return"sv";case 18:return"hu";case 19:return"cs";case 20:return"ro";case 21:return"tr";case 25:return"ar";case 22:return"pt-br";case 23:return"bg";case 24:return"el";case 26:return"uk";case 27:return"es-419";case 28:return"vn";default:return t}}function v(e,t){switch(void 0===t&&(t=""),e){case 0:return"english";case 1:return"german";case 2:return"french";case 3:return"italian";case 4:return"korean";case 5:return"spanish";case 6:return"schinese";case 7:return"tchinese";case 8:return"russian";case 9:return"thai";case 10:return"japanese";case 11:return"portuguese";case 12:return"polish";case 13:return"danish";case 14:return"dutch";case 15:return"finnish";case 16:return"norwegian";case 17:return"swedish";case 18:return"hungarian";case 19:return"czech";case 20:return"romanian";case 21:return"turkish";case 25:return"arabic";case 22:return"brazilian";case 23:return"bulgarian";case 24:return"greek";case 26:return"ukrainian";case 27:return"latam";case 28:return"vietnamese";default:return t}}function y(e,t){switch(void 0===t&&(t=0),e){case"english":return 0;case"german":return 1;case"french":return 2;case"italian":return 3;case"korean":case"koreana":return 4;case"spanish":return 5;case"schinese":return 6;case"tchinese":return 7;case"russian":return 8;case"thai":return 9;case"japanese":return 10;case"portuguese":return 11;case"polish":return 12;case"danish":return 13;case"dutch":return 14;case"finnish":return 15;case"norwegian":return 16;case"swedish":return 17;case"hungarian":return 18;case"czech":return 19;case"romanian":return 20;case"turkish":return 21;case"arabic":return 25;case"brazilian":return 22;case"bulgarian":return 23;case"greek":return 24;case"ukrainian":return 26;case"latam":return 27;case"vietnamese":return 28;default:return t}}function S(e){switch(e){default:break;case 4:case 1:case 7:case 8:return!0}return!1}},"0wLp":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("mrSG"),r=n("q1tI"),i=n("e2SU"),a=n("1VtQ"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={maximized:n.BIsMaximized()},n}return Object(o.d)(t,e),t.prototype.BIsMaximized=function(){var e=this.props.popup.screen.availWidth-this.props.popup.innerWidth,t=this.props.popup.screen.availHeight-this.props.popup.innerHeight;return 0===e&&0===t},t.prototype.componentDidMount=function(){this.props.popup.addEventListener("resize",this.UpdateMaximizeState)},t.prototype.componentWillUnmount=function(){this.props.popup.removeEventListener("resize",this.UpdateMaximizeState)},t.prototype.UpdateMaximizeState=function(){var e=this.BIsMaximized();e!=this.state.maximized&&this.setState({maximized:e})},t.prototype.render=function(){var e=this.props.popup,t="title-area-icon";this.state.maximized?t+=" restoreButton":t+=" maximizeButton";var n="TitleBar title-area";return this.props.className&&(n=n+" "+this.props.className),r.createElement("div",{className:n,style:this.props.style},r.createElement("div",{className:"title-area-highlight"}),r.createElement("div",{className:"title-area-children"},this.props.children),!this.props.hideActions&&r.createElement("div",{className:"title-bar-actions"},r.createElement("div",{className:"title-area-icon closeButton",onClick:function(){e&&e.close()}},r.createElement(i.sb,null)),!this.props.hideMinMax&&r.createElement("div",{className:t,onClick:function(){e.SteamClient.Window.ToggleMaximize()}},this.state.maximized&&r.createElement(i.W,null),!this.state.maximized&&r.createElement(i.H,null)),!this.props.hideMinMax&&r.createElement("div",{className:"title-area-icon minimizeButton",onClick:function(){e.SteamClient.Window.Minimize()}},r.createElement(i.K,null))))},Object(o.c)([a.a],t.prototype,"UpdateMaximizeState",null),t}(r.Component)},"1KZt":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("mrSG"),r=n("1n9R"),i=n("2vnA"),a=function(){function e(){this.m_bEmoticonListRequested=!1,this.m_bInitialized=!1,this.m_rgEmoticons=[],this.m_rgFlairs=[],this.m_rgStickers=[],this.m_rgEffects=[],this.m_rtLastStickerOrEffect=Number.MIN_SAFE_INTEGER}return e.GetEmoticonURL=function(e,t){return t?r.c.COMMUNITY_CDN_URL+"economy/emoticonlarge/"+e:r.c.COMMUNITY_CDN_URL+"economy/emoticon/"+e},e.GetEmoticonReplaceRegex=function(){return e.sm_EmoticonRegex},e.BEmoticonFilterMatch=function(e,t){return-1!==(":"+(e.name_normalized||e.name)+":").indexOf(t.toLowerCase())},e.FilterEmoticons=function(t,n){return n&&":"!==n?t.filter((function(t){return e.BEmoticonFilterMatch(t,n)})):t},e.BStickerFilterMatch=function(e,t){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1},e.FilterStickers=function(t,n){return n?t.filter((function(t){return e.BStickerFilterMatch(t,n)})):t},e.prototype.SearchEmoticons=function(e,t,n){function o(e){return e.name_normalized||e.name}void 0===t&&(t=25),void 0===n&&(n=!0),this.UpdateEmoticonList(),e=e.toLocaleLowerCase();var r=this.recent_emoticons.filter((function(t){return!e||o(t).startsWith(e)})),i=this.recent_emoticons.filter((function(t){return!n&&-1!==o(t).indexOf(e)})),a=this.m_rgEmoticons.filter((function(t){return!e||o(t).startsWith(e)})),s=this.m_rgEmoticons.filter((function(t){return!n&&-1!==o(t).indexOf(e)})),c=new Set,l=[];function u(e,n,r){return!(l.length>=t)&&(c.has(e)||(c.add(e),l.push({name:o(e),recent:n,new:r})),!0)}function p(e,t,n){for(var o=0,r=e;o<r.length;o++){var i=r[o];if(!u(i,t,n(i)))break}}return p(r,!0,(function(e){return!(e.last_used||!e.time_received)})),p(a,!1,(function(){return!1})),p(i,!0,(function(e){return!(e.last_used||!e.time_received)})),p(s,!1,(function(){return!1})),l},Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!1,configurable:!0}),e.prototype.GetTimeReceivedNewestEmoticon=function(){return this.UpdateEmoticonList(),this.m_rtMostRecentEmoticon},e.prototype.GetTimeReceivedForStickerOrEffect=function(){return this.m_rtLastStickerOrEffect},e.prototype.UpdateEmoticonList=function(){this.m_bInitialized||this.RequestEmoticonList()},Object.defineProperty(e.prototype,"emoticon_list",{get:function(){return this.UpdateEmoticonList(),this.m_rgEmoticons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flair_list",{get:function(){return this.UpdateEmoticonList(),this.m_rgFlairs},enumerable:!1,configurable:!0}),e.prototype.GetStickerList=function(){return this.m_rgStickers},e.prototype.GetEffectList=function(){return this.m_rgEffects},e.prototype.GetFlairListByGroupID=function(e){return this.m_rgFlairs.filter((function(t){return t.flairGroupID===e}))},Object.defineProperty(e.prototype,"recent_emoticons",{get:function(){return this.m_rgRecentEmoticons||this.BuildRecentEmoticonList(),this.m_rgRecentEmoticons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recent_stickers",{get:function(){return this.m_rgRecentStickers||this.BuildRecentStickerList(),this.m_rgRecentStickers},enumerable:!1,configurable:!0}),e.prototype.TrackEmoticonUsage=function(e,t){if(this.m_bInitialized){for(var n,o=new Map,r=/\[emoticon\]([^[]*)/g;n=r.exec(e);){var i=o.get(n[1])||0;o.set(n[1],i+1)}var a=!1;if(o.size){if(void 0!==this.m_rgRecentEmoticons)for(var s=0,c=this.m_rgRecentEmoticons;s<c.length;s++){var l=c[s];o.has(l.name)&&(l.last_used=t,l.use_count+=o.get(l.name),o.delete(l.name),l.time_received&&(a=!0,delete l.time_received))}if(o.size)for(var u=0,p=this.m_rgEmoticons;u<p.length;u++){l=p[u];o.has(l.name)&&(l.last_used=t,l.use_count+=o.get(l.name),delete l.time_received,void 0!==this.m_rgRecentEmoticons&&this.m_rgRecentEmoticons.push(l))}if(void 0!==this.m_rgRecentEmoticons&&(this.BuildRecentEmoticonList(),a)){this.m_rtMostRecentEmoticon=void 0;for(var m=0,d=this.m_rgRecentEmoticons;m<d.length;m++){!(l=d[m]).last_used&&l.time_received&&(!this.m_rtMostRecentEmoticon||l.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=l.time_received)}}}}},e.prototype.TrackStickerUsage=function(e,t){if(this.m_bInitialized){var n=this.m_rgStickers.find((function(t){return t.name===e}));n.last_used=t,n.use_count+=1,delete n.time_received,this.BuildRecentStickerList()}},e.prototype.RequestEmoticonList=function(){!this.m_bEmoticonListRequested&&this.BInitialized()&&(this.m_bEmoticonListRequested=!0,this.RequestEmoticonListInternal())},e.prototype.BuildRecentEmoticonList=function(){this.m_rgRecentEmoticons=this.BuildRecentList(this.m_rgEmoticons)},e.prototype.BuildRecentStickerList=function(){this.m_rgRecentStickers=this.BuildRecentList(this.m_rgStickers)},e.prototype.BuildRecentList=function(e){var t=this.GetServerTime()-604800,n=e.filter((function(e){var n=e.last_used,o=e.time_received;return n||o&&o>t}));return n.sort((function(e,t){return(t.last_used||t.time_received)-(e.last_used||e.time_received)})),n.slice(0,50)},e.prototype.OnEmoticonListReceived=function(e){this.m_rgFlairs=[],this.m_rgEmoticons=[],this.m_rgRecentEmoticons=void 0,this.m_rtMostRecentEmoticon=void 0;for(var t=this.GetServerTime()-604800,n=0,o=e;n<o.length;n++){var r=o[n],i=r.name;i.startsWith("^")?this.m_rgFlairs.push({name:i.match(new RegExp(/:(.*):/))[1],flairGroupID:i.match(new RegExp(/\^(.*)\^/))[1]}):(!r.last_used&&r.time_received>t?(!this.m_rtMostRecentEmoticon||r.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=r.time_received):delete r.time_received,this.m_rgEmoticons.push(r))}this.m_bInitialized=!0,this.m_bEmoticonListRequested=!1},e.sm_EmoticonRegex=new RegExp("ː([a-zA-Z0-9_\\-]+)ː","g"),Object(o.c)([i.B],e.prototype,"m_bInitialized",void 0),Object(o.c)([i.B],e.prototype,"m_rtMostRecentEmoticon",void 0),Object(o.c)([i.B],e.prototype,"m_rtLastStickerOrEffect",void 0),Object(o.c)([i.k],e.prototype,"TrackEmoticonUsage",null),e}()},"1VtQ":function(e,t,n){"use strict";function o(e,t,n){return{get:function(){var e=n.value.bind(this);return this.hasOwnProperty(t)||Object.defineProperty(this,t,{value:e}),e}}}function r(e,t,n){return[e,t,n]}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}))},"1n9R":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h}));n("mrSG");var o,r=n("/7KC"),i=n("YlSc"),a={EUNIVERSE:0,WEB_UNIVERSE:"",LANGUAGE:"english",SUPPORTED_LANGUAGES:[],COUNTRY:"",MEDIA_CDN_COMMUNITY_URL:"",MEDIA_CDN_URL:"",COMMUNITY_CDN_URL:"",COMMUNITY_CDN_ASSET_URL:"",STORE_CDN_URL:"",PUBLIC_SHARED_URL:"",COMMUNITY_BASE_URL:"",CHAT_BASE_URL:"",STORE_BASE_URL:"",STORE_ICON_BASE_URL:"",IMG_URL:"",STEAMTV_BASE_URL:"",HELP_BASE_URL:"",PARTNER_BASE_URL:"",STATS_BASE_URL:"",INTERNAL_STATS_BASE_URL:"",BASE_URL_STORE_CDN_ASSETS:"",IN_CLIENT:!1,USE_POPUPS:!1,IN_MOBILE:!1,IN_TENFOOT:!1,PLATFORM:"",SNR:"",LAUNCHER_TYPE:0,EREALM:0,LOCAL_HOSTNAME:"",WEBAPI_BASE_URL:"",TOKEN_URL:"",BUILD_TIMESTAMP:0,PAGE_TIMESTAMP:0,get SESSIONID(){return function(){if(!Object(i.a)())return o||(o=u()),o;var e=Object(i.b)("sessionid");e||(e=u());return e}()},FRIENDSUI_BETA:!1,STEAM_TV:!1,DEV_MODE:!1,OFFLINE_MODE:!1,IN_LIBRARY:!1},s={logged_in:!1,steamid:"",accountid:0,account_name:"",token:void 0,token_use_id:void 0,webapi_token:"",authwgtoken:"",is_support:!1,is_limited:!1,short_url:"",country_code:""},c={steamid:"",clanid:0,listid:0},l={CLANSTEAMID:"",CLANACCOUNTID:0,ANNOUNCEMENT_GID:"",IMG_URL:"",APPID:0,VANITY_ID:"",IS_CREATOR_HOME:!1,IS_CURATOR:!1,IS_OGG:!1,CAN_UPLOAD_IMAGES:!1,HEADER_IMAGE:"",APP_NAME:"",HAS_ADULT_CONTENT:!1,HAS_ADULT_CONTENT_SEX:!1,HAS_ADULT_CONTENT_VIOLENCE:!1};function u(){var e=function(){for(var e="",t=0;t<24;t++)e+=Object(r.b)(0,35).toString(36);return e}();return Object(i.c)("sessionid",e,0),e}function p(e){void 0===e&&(e="webui_config");var t={},n=m("config",e);n&&(delete n.SESSIONID,Object.assign(a,n),t.config=!0);var o=m("userinfo",e);o&&(Object.assign(s,o),t.userConfig=!0);var r=m("broadcast",e);r&&(Object.assign(c,r),t.broadcastConfig=!0);var i=m("community",e);return i&&(Object.assign(l,i),t.communityConfig=!0),t}function m(e,t){var n;if(void 0===t&&(t="webui_config"),n="string"==typeof t?document.getElementById(t):t)try{return n.hasAttribute("data-"+e)?JSON.parse(n.getAttribute("data-"+e)):null}catch(e){console.error("Failed to parse config",e)}else console.error("Missing config element #",t)}function d(){if(!window||!window.location||!window.location.href)return console.warn("Unable to determine base url!"),"unknown";var e=window.location.href;return e.startsWith(a.STORE_BASE_URL)?a.STORE_BASE_URL:e.startsWith(a.COMMUNITY_BASE_URL)?a.COMMUNITY_BASE_URL:e.startsWith(a.CHAT_BASE_URL)?a.CHAT_BASE_URL:e.startsWith(a.PARTNER_BASE_URL)?a.PARTNER_BASE_URL:e.startsWith(a.HELP_BASE_URL)?a.HELP_BASE_URL:e.startsWith(a.STEAMTV_BASE_URL)?a.STEAMTV_BASE_URL:e.startsWith(a.STATS_BASE_URL)?a.STATS_BASE_URL:e.startsWith(a.INTERNAL_STATS_BASE_URL)?a.INTERNAL_STATS_BASE_URL:""}function h(){var e=window.location.href;return e.startsWith(a.STORE_BASE_URL)?"store":e.startsWith(a.COMMUNITY_BASE_URL)?"community":e.startsWith(a.PARTNER_BASE_URL)?"partnerweb":e.startsWith(a.HELP_BASE_URL)?"help":e.startsWith(a.STEAMTV_BASE_URL)?"steamtv":e.startsWith(a.STATS_BASE_URL)||e.startsWith(a.INTERNAL_STATS_BASE_URL)?"stats":""}},"20CD":function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return y}));var o=n("mrSG"),r=n("hReu"),i=n("LAqV"),a=n("29iz"),s=n("YZlK"),c=n("y4mg"),l=n("bbBM"),u=n("Hi0u"),p=n("TyAF"),m=n("q1tI"),d=n("ljid"),h=n("e2SU"),f=n("oh5H"),_=n("1VtQ"),g=n("XaMz");function b(e,t,n,o,r){v(e,t,n,o,!1,r)}function v(e,t,n,o,i,a){Object(u.c)(m.createElement(C,{browserContext:e,chatRoomGroup:n,chatRoom:o,bIsDropInvite:i,vecInvitePlayers:a}),t,"ChatRoomGroupInviteDialog",{strTitle:Object(f.d)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:680},Object(r.g)(t))}var y=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this.props.chat.lastChatLinkInfo;(!e||Date.now()>=e.rtExpires)&&this.GenerateLink(86400)},t.prototype.GenerateLink=function(e){this.props.chat.CreateInviteLink(e)},t.prototype.OnFocus=function(e){e.target.select()},t.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=Object(f.d)("#Chat_Invite_Loading");return this.props.disabled&&(e=void 0,t=""),m.createElement(m.Fragment,null,m.createElement(d.o,{label:Object(f.d)("#Chat_Invite_Linkheader"),className:"InviteFriendToChatDialog_LinkInput",type:"text",value:e?e.strInviteURL:t,readOnly:!0,bShowCopyAction:!!e,onFocus:this.OnFocus,onClick:this.OnFocus}),!this.props.disabled&&m.createElement(S,{onGenerate:this.GenerateLink,chat:this.props.chat}))},Object(o.c)([_.a],t.prototype,"GenerateLink",null),Object(o.c)([_.a],t.prototype,"OnFocus",null),t=Object(o.c)([p.a],t)}(m.Component),S=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.OnDropDownChange=function(e,t){this.props.onGenerate(e.data),t.SetSelectedOption(void 0)},t.prototype.CreateExpiresText=function(e){return 0==e?Object(f.d)("#InviteLink_ExpiresNever_Short"):e-i.f.GetServerRTime32()>3600?Object(f.d)("#InviteLink_ExpiresDay_Short"):Object(f.d)("#InviteLink_ExpiresHour_Short")},t.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=[{label:Object(f.d)("#InviteLink_ExpiresHour_Short"),data:3600},{label:Object(f.d)("#InviteLink_ExpiresDay_Short"),data:86400},{label:Object(f.d)("#InviteLink_ExpiresNever_Short"),data:0}];return m.createElement("div",{className:"expireLinkInContainer"},m.createElement(d.p,null,Object(f.d)("#InviteLink_ExpireDropDownLabel")),m.createElement(d.i,{strClassName:"inviteLinkDropDown",rgOptions:t,strDefaultLabel:e?this.CreateExpiresText(e.rtExpires):m.createElement("span",null," "),onChange:this.OnDropDownChange,selectedOption:void 0}))},Object(o.c)([_.a],t.prototype,"OnDropDownChange",null),t=Object(o.c)([p.a],t)}(m.Component),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dropToInviteFriend:void 0,rgPickedFriends:[]},n.BuildMemberOfGroupSet(t),n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.chatRoomGroup!==this.props.chatRoomGroup&&this.BuildMemberOfGroupSet(this.props)},t.prototype.BuildMemberOfGroupSet=function(e){var t=e.chatRoomGroup;this.m_setMembersOfGroup=t.memberList.GetCurrentMemberSet(),this.forceUpdate()},t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnSubmit=function(){for(var e=0,t=this.state.rgPickedFriends;e<t.length;e++){var n=t[e];this.props.chatRoomGroup.InviteFriend(n.accountid,this.props.chatRoom)}this.props.closeModal()},t.prototype.OnDragEnter=function(e,t){if(Object(g.a)(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var n=e;n.friend&&this.setState({rgPickedFriends:this.state.rgPickedFriends.concat(n.friend)})}return!0},t.prototype.OnDragLeave=function(){var e=this.state,t=e.dropToInviteFriend,n=e.rgPickedFriends;if(t){var o=n.findIndex((function(e){return e.accountid===t.accountid}));this.setState({dropToInviteFriend:void 0,rgPickedFriends:n.slice(0,o).concat(n.slice(o+1))})}},t.prototype.OnDrop=function(e,t){if(Object(g.a)(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var n=e;if(n.friend)r.i.DragDropManager.SetDropConsumed(),this.state.rgPickedFriends.findIndex((function(e){return e.accountid===n.friend.accountid}))>-1?this.setState({dropToInviteFriend:void 0,rgPickedFriends:this.state.rgPickedFriends.concat(n.friend)}):this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})}},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.render=function(){var e=this,t=this.props.chatRoomGroup.GetDefaultChatRoom();this.props.chatRoom&&(t=this.props.chatRoom);var n,r=this.props.chatRoomGroup.name,l=null!=this.props.chatRoom,p=new Set([]),h=this.props.chatRoomGroup.BCanInvite();h?this.props.chatRoom||(p=this.m_setMembersOfGroup):this.props.chatRoom?i.f.FriendStore.all_friends.forEach((function(t){e.props.chatRoomGroup.BHasMember(t.accountid)||p.add(t.accountid)})):Object(g.a)(!1,"User should not be able to invite to the group"),n=this.props.bIsDropInvite?Object(f.d)("#Chat_InviteFriends_DropInvite_Pre"):h?Object(f.d)("#Chat_InviteFriends"):Object(f.d)("#Chat_InviteGroupMembers");var _=this.state.rgPickedFriends.some((function(e){return!1===e.is_in_beta}));return m.createElement(u.a,{onEscKeypress:this.DismissDialog},m.createElement(d.h,{classNameContent:"ChatRoomGroupInviteDialog"+(this.props.bIsDropInvite?" IsDropInvite":""),onSubmit:this.OnSubmit},m.createElement(d.m,null,l?m.createElement("div",null,Object(f.d)("#Chat_Actions_InviteFriend_VoiceChat"),m.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},'"',this.props.chatRoom.name,'"')):Object(f.d)("#Chat_Actions_InviteFriend"),m.createElement("div",{className:"displayRow"},m.createElement(s.a,{group:this.props.chatRoomGroup,small:!0}),m.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},r))),m.createElement(d.b,null,!this.props.bIsDropInvite&&h&&m.createElement(m.Fragment,null,m.createElement("div",{className:"inviteLinkContainer"},m.createElement(y,{chat:t,disabled:!1})),m.createElement("div",{className:"OrSeparator"},m.createElement("div",{className:"HBar"}),m.createElement("div",{className:"OrSeparatorLabel"},Object(f.d)("#Chat_InviteFriends_OR_Separator")),m.createElement("div",{className:"HBar"}))),m.createElement(a.a,Object(o.a)({className:""},this.GetDragDropProps()),m.createElement(d.c,{className:"CreateChat_NonBetaFriendsWarning"+(i.f.IsInBeta()?"":" Released")+(_?" Active":"")},m.createElement(O,null),Object(f.d)(i.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),m.createElement(c.a,{label:n,eSort:1,rgPickedFriends:this.state.rgPickedFriends,bDropInvite:this.props.bIsDropInvite,renderChosenFriend:I,onChange:function(t){return e.setState({rgPickedFriends:t})},excludeFriend:function(t){return e.m_setMembersOfGroup.has(t.accountid)}}))),m.createElement(d.j,null,m.createElement("div",{className:"DialogTwoColLayout _DialogColLayout"},m.createElement(d.x,{disabled:0===this.state.rgPickedFriends.length},Object(f.d)("#Chat_Invite")),m.createElement(d.d,{onClick:this.DismissDialog},Object(f.d)("#Button_Close"))))))},Object(o.c)([_.a],t.prototype,"DismissDialog",null),Object(o.c)([_.a],t.prototype,"OnSubmit",null),Object(o.c)([_.a],t.prototype,"OnDragEnter",null),Object(o.c)([_.a],t.prototype,"OnDragLeave",null),Object(o.c)([_.a],t.prototype,"OnDrop",null),t}(m.PureComponent);function O(){return m.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(f.d)(i.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}var I=Object(p.a)((function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return m.createElement(m.Fragment,null,m.createElement(l.e,{friend:e.friend,context:null},m.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&m.createElement(O,null),m.createElement("span",null,e.friend.display_name),m.createElement(h.sb,null))))}))},"29iz":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("hReu"),i=n("q1tI"),a=n("/IDK"),s=n("1VtQ"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bAcceptDrag=!1,n.m_deferredEnter=null,n.m_divElement=null,n}return Object(o.d)(t,e),t.prototype.BindDiv=function(e){this.m_divElement=e},Object.defineProperty(t.prototype,"div",{get:function(){return this.m_divElement},enumerable:!1,configurable:!0}),t.prototype.DeliverDeferredDragEnter=function(){var e=r.i.DragDropManager.GetDragData();return this.props.fnDragEnter(e,this.m_deferredEnter.bFiles)},t.prototype.OnDragEnter=function(e){if(!this.m_bAcceptDrag){var t=r.i.DragDropManager.GetDragData(),n=this.props.bAcceptsFiles&&-1!=e.dataTransfer.types.indexOf("Files");t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.m_bAcceptDrag=!0:this.m_bAcceptDrag=!!n,this.m_bAcceptDrag&&this.props.fnDragEnter&&(this.m_deferredEnter={bFiles:n}),this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())}},t.prototype.OnDragLeave=function(e){if(this.m_bAcceptDrag){if(!Object(a.c)(e))return;this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation(),this.props.fnDragLeave&&this.props.fnDragLeave()}},t.prototype.OnDragOver=function(e){if(this.m_bAcceptDrag){if(this.m_deferredEnter){var t=this.DeliverDeferredDragEnter();if(this.m_deferredEnter=null,!t)return void(this.m_bAcceptDrag=!1)}e.preventDefault(),e.stopPropagation(),this.props.fnDragOver&&this.props.fnDragOver(e)}},t.prototype.OnDrop=function(e){if(this.m_bAcceptDrag){this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation();var t=r.i.DragDropManager.GetDragData();t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.props.fnDrop&&this.props.fnDrop(t,e):this.props.bAcceptsFiles&&0!=e.dataTransfer.files.length&&this.props.fnDrop&&this.props.fnDrop(null,e)}},t.prototype.render=function(){var e=this.props,t=(e.rgAcceptedTypes,e.bAcceptsFiles,e.fnDragEnter,e.fnDragLeave,e.fnDragOver,e.fnDrop,Object(o.f)(e,["rgAcceptedTypes","bAcceptsFiles","fnDragEnter","fnDragLeave","fnDragOver","fnDrop"]));return i.createElement("div",Object(o.a)({},t,{ref:this.BindDiv,className:"DropTarget "+this.props.className,onDragEnter:this.OnDragEnter,onDragLeave:this.OnDragLeave,onDragOver:this.OnDragOver,onDrop:this.OnDrop}),this.props.children)},Object(o.c)([s.a],t.prototype,"BindDiv",null),Object(o.c)([s.a],t.prototype,"DeliverDeferredDragEnter",null),Object(o.c)([s.a],t.prototype,"OnDragEnter",null),Object(o.c)([s.a],t.prototype,"OnDragLeave",null),Object(o.c)([s.a],t.prototype,"OnDragOver",null),Object(o.c)([s.a],t.prototype,"OnDrop",null),t}(i.PureComponent)},"2sgH":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("1n9R"),c=n("oh5H"),l=n("XaMz"),u=function(){function e(){this.timestamp=0,this.imageWidth=0,this.imageHeight=0,this.eUploadState=0,this.uploadProgress=0}return Object(o.c)([a.B],e.prototype,"file",void 0),Object(o.c)([a.B],e.prototype,"dataURL",void 0),Object(o.c)([a.B],e.prototype,"imageWidth",void 0),Object(o.c)([a.B],e.prototype,"imageHeight",void 0),Object(o.c)([a.B],e.prototype,"eUploadState",void 0),Object(o.c)([a.B],e.prototype,"uploadProgress",void 0),Object(o.c)([a.B],e.prototype,"strErrorDescription",void 0),e}(),p=function(){function e(e){this.m_fileUploadProps=new u,this.m_Callbacks=e}return Object.defineProperty(e.prototype,"file_upload_props",{get:function(){return this.m_fileUploadProps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file_upload_data_url",{get:function(){return this.m_fileUploadProps.dataURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.m_fileUploadProps.file},enumerable:!1,configurable:!0}),e.prototype.LogFileUploadMessage=function(e){this.m_Callbacks.LogFileUploadMessage&&this.m_Callbacks.LogFileUploadMessage(e)},e.prototype.SetUploadFileError=function(e,t){this.m_fileUploadProps.eUploadState=e,this.m_fileUploadProps.strErrorDescription=t,this.m_fileUploadProps.displayFileName=null},e.prototype.SetImageFileToUpload=function(e,t){return void 0===t&&(t=m),Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e?e.size>10485760?(this.SetUploadFileError(4,Object(c.d)("#Chat_Settings_Error_ChatFileTooLarge",e.name)),[2]):(n=["jpg","jpeg","png","gif","webm","mpg","mp4","mpeg","ogv"],r=e.name.split(".").pop().toLowerCase(),-1==n.indexOf(r)?(this.SetUploadFileError(5,Object(c.d)("#Chat_Settings_Error_ChatFileTypeNotSupported",e.name)),[2]):[4,t(e)]):(this.SetFileToUpload(null),[2]);case 1:return i=o.sent(),this.SetFileToUpload(i.file),this.m_fileUploadProps.imageHeight=i.height,this.m_fileUploadProps.imageWidth=i.width,[2]}}))}))},e.prototype.SetFileToUpload=function(e){if(this.m_fileUploadProps.file=e,this.m_fileUploadProps.dataURL=null,this.m_fileUploadProps.hmac=null,this.m_fileUploadProps.sha1=null,this.m_fileUploadProps.imageWidth=0,this.m_fileUploadProps.imageHeight=0,e){this.m_fileUploadProps.eUploadState=1;for(var t="";t.length<40;)t+=Math.floor(16*Math.random()).toString(16);this.m_fileUploadProps.dataURL=URL.createObjectURL(e),this.m_fileUploadProps.displayFileName=e.name,this.m_fileUploadProps.uploadFileName=window.performance.now()+"_"+e.name,this.m_fileUploadProps.sha1=t,this.m_fileUploadProps.hmac="",this.m_fileUploadProps.timestamp=0}else this.m_fileUploadProps.eUploadState=0},e.prototype.RetryFileUpload=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return[2,this.BeginFileUpload(this.m_fileUploadProps.additionalProps)]}))}))},e.prototype.BeginFileUpload=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,u,p,m=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!(t=this.m_fileUploadProps.file))throw Object(l.a)(!1,"Must SetImageFileToUpload before calling BeginFileUpload"),new Error("Invalid State");this.m_fileUploadProps.eUploadState=2,this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.additionalProps=e,(n=new FormData).append("sessionid",s.c.SESSIONID),n.append("l",s.c.LANGUAGE),n.append("file_size",t.size.toString()),n.append("file_name",this.m_fileUploadProps.uploadFileName),n.append("file_sha",this.m_fileUploadProps.sha1),n.append("file_image_width",this.m_fileUploadProps.imageWidth.toString()),n.append("file_image_height",this.m_fileUploadProps.imageHeight.toString()),n.append("file_type",t.type),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(this.m_Callbacks.GetBeginFileUploadURL(),n,{params:{l:s.c.LANGUAGE}})];case 2:return r=o.sent(),this.m_fileUploadProps.timestamp=r.data.timestamp,this.m_fileUploadProps.hmac=r.data.hmac,[2,this.DoFileUpload(r.data.result)];case 3:throw u=o.sent(),p=null,Object(a.F)((function(){if(m.m_fileUploadProps.eUploadState=3,m.LogFileUploadMessage(u.response),u.response){var e=u.response.data;u.response.status,e&&e.success;p=e.message?e.message:Object(c.d)("#Chat_Settings_Error_ServerError")}else p=Object(c.d)("#ConnectionTrouble_FailedToConnect");m.m_fileUploadProps.strErrorDescription=Object(c.d)("#Chat_Upload_ErrorStart",p)})),p;case 4:return[2]}}))}))},e.prototype.DoFileUpload=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,l,u,p=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:for(t=this.m_fileUploadProps.file,n=e.use_https?"https://":"http://",n+=e.url_host+e.url_path,r={onUploadProgress:function(e){var t=e.loaded/e.total*100;t>p.m_fileUploadProps.uploadProgress&&Object(a.F)((function(){p.m_fileUploadProps.uploadProgress=t}))},headers:{},transformRequest:[function(e){return e}]},s=0;s<e.request_headers.length;++s)"Content-Length"!=(l=e.request_headers[s]).name&&"Host"!=l.name&&(r.headers[l.name]=l.value);o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.put(n,t,r)];case 2:return o.sent(),[2,this.CommitFileUpload(!0,e.ugcid)];case 3:throw u=o.sent(),this.LogFileUploadMessage(u.response),Object(a.F)((function(){p.m_fileUploadProps.strErrorDescription=Object(c.d)("#Chat_Upload_ErrorCloud"),p.m_fileUploadProps.eUploadState=3,p.m_fileUploadProps.uploadProgress=0})),this.CommitFileUpload(!1,e.ugcid),this.m_fileUploadProps.strErrorDescription;case 4:return[2]}}))}))},e.prototype.CommitFileUpload=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,l,u,p,m,d=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:n=this.m_fileUploadProps.file,r=this.m_fileUploadProps.sha1,(l=new FormData).append("sessionid",s.c.SESSIONID),l.append("l",s.c.LANGUAGE),l.append("file_name",this.m_fileUploadProps.uploadFileName),l.append("file_sha",r),l.append("success",e?"1":"0"),l.append("ugcid",t),l.append("file_type",n.type),l.append("file_image_width",this.m_fileUploadProps.imageWidth.toString()),l.append("file_image_height",this.m_fileUploadProps.imageHeight.toString()),l.append("timestamp",this.m_fileUploadProps.timestamp.toString()),l.append("hmac",this.m_fileUploadProps.hmac),this.m_Callbacks.PopulateCommitFileUploadFormData(l,this.file_upload_props.additionalProps),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(this.m_Callbacks.GetCommitFileUploadURL(),l)];case 2:return u=o.sent(),e?(this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.eUploadState=6):this.m_fileUploadProps.eUploadState=3,[2,u];case 3:if(p=o.sent(),!e)return[2,null];throw m=null,Object(a.F)((function(){if(d.LogFileUploadMessage(p),d.m_fileUploadProps.uploadProgress=0,d.m_fileUploadProps.eUploadState=3,p.response){var e=p.response.data;p.response.status,e&&e.success;m=e.message?e.message:Object(c.d)("#Chat_Settings_Error_ServerError")}else m=Object(c.d)("#ConnectionTrouble_FailedToConnect");d.m_fileUploadProps.strErrorDescription="Failed to commit upload: "+m})),m;case 4:return[2]}}))}))},e.prototype.ClearFileUploadError=function(){3!=this.m_fileUploadProps.eUploadState&&4!=this.m_fileUploadProps.eUploadState&&5!=this.m_fileUploadProps.eUploadState||this.Reset()},e.prototype.Reset=function(){this.SetFileToUpload(null)},Object(o.c)([a.k],e.prototype,"SetUploadFileError",null),Object(o.c)([a.k],e.prototype,"SetImageFileToUpload",null),Object(o.c)([a.k],e.prototype,"SetFileToUpload",null),Object(o.c)([a.k],e.prototype,"RetryFileUpload",null),Object(o.c)([a.k],e.prototype,"BeginFileUpload",null),Object(o.c)([a.k],e.prototype,"DoFileUpload",null),Object(o.c)([a.k],e.prototype,"CommitFileUpload",null),Object(o.c)([a.k],e.prototype,"ClearFileUploadError",null),Object(o.c)([a.k],e.prototype,"Reset",null),e}();function m(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var o=e,r=function(e){var t=new DataView(e),n=0,o=0,r=[],i=0;if(65496==t.getUint16(n)){n+=2;var a=t.getUint16(n);for(n+=2;n<t.byteLength&&n<131072;){if(65505==a)r[i]={recess:o,offset:n-2},o=n+t.getUint16(n),i++;else if(65498==a)break;n+=t.getUint16(n),a=t.getUint16(n),n+=2}var s=e.byteLength-o;if(r.forEach((function(e){s+=e.offset-e.recess})),s===e.byteLength)return e;var c=new Uint8Array(s);if(r.length>0){var l=0;r.forEach((function(t){var n=t.offset-t.recess;c.set(new Uint8Array(e.slice(t.recess,t.offset)),l),l+=n})),c.set(new Uint8Array(e.slice(o)),l)}return c.buffer}return e}(n.result),i=new Blob([r],{type:e.type});if(i){var a=i;a.lastModifiedDate=new Date(e.lastModified),a.name=e.name,o=a}if(0==e.type.indexOf("image")){var s=new Image;s.src=URL.createObjectURL(e),s.onload=function(e){t({file:o,width:s.width,height:s.height})}}else t({file:o,width:0,height:0})},n.readAsArrayBuffer(e)}))}},"3/mw":function(e,t,n){e.exports={mentionDialogPosition:"suggestdialog_mentionDialogPosition_3I0f3",mentionDialog:"suggestdialog_mentionDialog_2hRnz",mentionSearchText:"suggestdialog_mentionSearchText_26-gv",suggestOption:"suggestdialog_suggestOption_t54xp",nickname:"suggestdialog_nickname_NtV85",selected:"suggestdialog_selected_e-sy7",mentionSearchMatch:"suggestdialog_mentionSearchMatch_m3oS2"}},"3zHc":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var o=n("mrSG"),r=n("UqDm"),i=n("2vnA"),a=n("oh5H"),s=n("LAqV"),c=function(){function e(){}return e.prototype.OnTabActivate=function(){this.m_msLastActive=performance.now(),this.InternalOnTabActivate()},e.prototype.GetTimeLastActivate=function(){return this.m_msLastActive||0},e.prototype.IsChatRoom=function(){return!1},e.prototype.IsFriendChat=function(){return!1},e.prototype.IsBroadcast=function(){return!1},e}(),l=0,u=function(){function e(e){this.m_vecTabs=i.B.array(null,{deep:!1}),this.m_id=l++,this.m_browserContext=e}return e.prototype.GetBrowserContext=function(){return this.m_browserContext},e.prototype.GetTitle=function(){return this.m_activeTab?2==this.tabCount?Object(a.d)("#WindowTitle_ChatTabTitle",this.m_activeTab.GetTabName()):this.tabCount>2?Object(a.d)("#WindowTitle_ChatTabTitlePlural",this.m_activeTab.GetTabName(),this.tabCount-1):this.m_activeTab.GetTabName():""},e.prototype.OnWindowFocus=function(){this.m_activeTab&&this.m_activeTab.OnTabFocus()},Object.defineProperty(e.prototype,"tabs",{get:function(){return this.m_vecTabs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabCount",{get:function(){return this.m_vecTabs.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeTab",{get:function(){return this.m_activeTab},enumerable:!1,configurable:!0}),e.prototype.GetTabSetIdentifier=function(){return this.m_vecTabs.map((function(e){return e.GetUniqueID()})).join("_")},e.prototype.GetTabForChat=function(e){for(var t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];if(o.IsTabForChat(e))return o}return null},e.prototype.GetTabByUniqueID=function(e){for(var t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];if(o.GetUniqueID()==e)return o}return null},e.prototype.BHasTab=function(e){return-1!==this.m_vecTabs.indexOf(e)},e.prototype.AddTab=function(e){-1==this.m_vecTabs.indexOf(e)&&(this.m_vecTabs.push(e),!this.m_activeTab&&this.m_vecTabs.length>0&&(this.m_activeTab=this.m_vecTabs[0]))},e.prototype.ActivateTab=function(e){-1!=this.m_vecTabs.indexOf(e)?(this.activeTab&&this.activeTab!=e&&this.activeTab.OnTabDeactivate(),this.m_activeTab=e,e.OnTabActivate(),this.Focus()):console.log("Tab not found")},e.prototype.ActivateNextTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.ActivatePreviousTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+this.m_vecTabs.length-1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.DeactivateTab=function(e){-1!==this.m_vecTabs.indexOf(e)?this.activeTab&&this.activeTab===e&&(e.OnTabDeactivate(),this.m_activeTab=void 0):console.log("Tab not found")},e.prototype.RemoveTab=function(e){var t=this.m_vecTabs.indexOf(e);if(-1==t)return!1;var n=e&&e==this.m_activeTab;if(this.m_vecTabs.splice(t,1),n)if(this.m_vecTabs.length){for(var o=void 0,r=0,i=this.m_vecTabs;r<i.length;r++){var a=i[r];(!o||a.GetTimeLastActivate()>o.GetTimeLastActivate())&&(o=a)}this.m_activeTab=o||this.m_vecTabs[Math.max(t-1,0)]}else this.m_activeTab=void 0;return 0==this.m_vecTabs.length&&s.f.UIStore.CloseTabSet(this),!0},e.prototype.MoveTabAfter=function(e,t){var n=this.m_vecTabs.indexOf(t);-1!=n&&this.MoveTabToIndex(e,n+1)},e.prototype.MoveTabToIndex=function(e,t){var n=this.m_vecTabs.indexOf(e);-1!=n&&r.f(this.m_vecTabs,n,Math.min(t,this.m_vecTabs.length-1))},e.prototype.Focus=function(){s.f.UIStore.FocusTabSet(this)},e.prototype.OnPopupClosed=function(e){e&&s.f.UIStore.SetSuppressBrowserContextBroadcasting(!0),s.f.UIStore.OnTabSetClosed(this),this.CloseAllTabs(),e&&s.f.UIStore.SetSuppressBrowserContextBroadcasting(!1)},e.prototype.CloseAllTabs=function(){this.m_activeTab=void 0;for(var e=0,t=this.m_vecTabs;e<t.length;e++){var n=t[e];s.f.UIStore.CloseTab(this.m_browserContext,n,!0)}this.m_vecTabs.clear()},Object.defineProperty(e.prototype,"is_popup_active",{get:function(){return s.f.UIStore.BIsTabSetActive(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_visible",{get:function(){return s.f.UIStore.BIsTabSetVisible(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_focused",{get:function(){return s.f.UIStore.BIsTabSetFocused(this)},enumerable:!1,configurable:!0}),e.prototype.Serialize=function(){for(var e=[],t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];o.GetUniqueID().startsWith("br")||e.push(o.GetUniqueID())}return{tabs:e,active_tab:this.activeTab&&this.activeTab.GetUniqueID()}},Object(o.c)([i.B],e.prototype,"m_id",void 0),Object(o.c)([i.B],e.prototype,"m_activeTab",void 0),Object(o.c)([i.k],e.prototype,"AddTab",null),Object(o.c)([i.k],e.prototype,"ActivateTab",null),Object(o.c)([i.k],e.prototype,"ActivateNextTab",null),Object(o.c)([i.k],e.prototype,"ActivatePreviousTab",null),Object(o.c)([i.k],e.prototype,"DeactivateTab",null),Object(o.c)([i.k],e.prototype,"RemoveTab",null),Object(o.c)([i.k],e.prototype,"OnPopupClosed",null),Object(o.c)([i.k],e.prototype,"CloseAllTabs",null),e}()},"4HGb":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var o=n("mrSG"),r=n("Kqva"),i=n("hRO2"),a=(n("qeMu"),n("/511")),s=(n("s+DT"),function(){function e(e,t,n,o,r){if(o)this.m_eMsg=o.m_eMsg,this.m_bValid=o.m_bValid,this.m_bValid&&(this.m_netPacket=o.m_netPacket,this.m_cubHeader=o.m_cubHeader,this.m_header=o.m_header,this.InitForType(n));else{if(this.m_header=new a.f(null),this.m_bValid=!0,t)if(this.m_netPacket=t,this.m_netPacket.SeekGetHead(),this.m_eMsg=this.m_netPacket.GetUint32(),2147483648&this.m_eMsg){this.m_eMsg=2147483647&this.m_eMsg,this.m_cubHeader=this.m_netPacket.GetUint32();try{a.f.deserializeBinaryFromReader(this.m_header,new i.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_cubHeader)),this.m_netPacket.SeekGetCurrent(this.m_cubHeader),n&&this.InitForType(n)}catch(e){console.error("Exception deserializing protobuf",e),this.m_bValid=!1}}else this.m_bValid=!1;else e&&(this.m_eMsg=e),n&&(this.m_body=new n);r&&this.m_header.set_jobid_target(r.Hdr().jobid_target())}}return e.InitHeaderFromPacket=function(t){return new e(void 0,t)},e.prototype.InitForType=function(e){if(this.m_body=new e,this.m_netPacket){this.m_netPacket.SeekGetHead(8+this.m_cubHeader);try{e.deserializeBinaryFromReader(this.m_body,new i.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_netPacket.GetCountBytesRemaining()))}catch(e){this.m_bValid=!1,console.error("Exception parsing protobuf message body.  Definitions may be out of sync with server version."),console.log(e.stack||e)}}},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.Body=function(){return this.m_body},e.prototype.SetBodyJSON=function(e){e.toObject=function(){return e},this.m_body=e},e.prototype.Hdr=function(){return this.m_header},e.prototype.GetEMsg=function(){return this.m_eMsg},e.prototype.SetEMsg=function(e){this.m_eMsg=e},e.prototype.GetEResult=function(){return this.Hdr().eresult()},e.prototype.Serialize=function(){var e=this.m_header.serializeBinary(),t=this.m_body.serializeBinary(),n=2147483648|this.m_eMsg,o=new Uint8Array(8+e.length+t.length),i=new r.b(o);return i.PutUint32(n),i.PutUint32(e.length),i.PutBytes(e),i.PutBytes(t),o},e.prototype.SerializeBody=function(){var e=this.m_body.serializeBinary(),t=new Uint8Array(e.length);return new r.b(t).PutBytes(e),t},e.prototype.DEBUG_ToObject=function(){return{}},e.prototype.DEBUG_LogToConsole=function(){},e}()),c=function(e){function t(t,n,o,r){return void 0===n&&(n=0),e.call(this,n,o,t,r)||this}return Object(o.d)(t,e),t.InitFromPacket=function(e,n){return new t(e,0,n)},t.InitFromMsg=function(e,n){return new t(e,void 0,void 0,n)},t.Init=function(e,n){return new t(e,n)},t.prototype.Body=function(){return e.prototype.Body.call(this)},t.prototype.SetBodyFields=function(e){var t=this,n=function(n){Array.isArray(e[n])?o.Body()["add_"+n]&&e[n].forEach((function(e){t.Body()["add_"+n](e)})):o.Body()["set_"+n]&&o.Body()["set_"+n](e[n])},o=this;for(var r in e)n(r)},t}(s)},"4nBw":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("mrSG"),r=n("H7XF"),i=n("hRO2"),a=n("4HGb"),s=n("1VtQ"),c=n("vDqi"),l=n.n(c),u=n("Kqva"),p=n("s+DT"),m=function(){function e(e,t,n){void 0===n&&(n=!1),this.m_webApiAccessToken="",this.m_bJsonMode=!1,this.m_strWebAPIBaseURL=e,this.m_webApiAccessToken=t,this.m_bJsonMode=n,this.ConstructServiceTransport()}return e.prototype.WaitUntilLoggedOn=function(){return Promise.resolve()},e.prototype.GetServerRTime32=function(){return Number(new Date)},Object.defineProperty(e.prototype,"steamid",{get:function(){return new p.a},enumerable:!1,configurable:!0}),e.prototype.RTime32ToDate=function(e){return new Date(1e3*e)},e.prototype.GetServiceTransport=function(){return this.m_ServiceTransport},e.prototype.GetAnonymousServiceTransport=function(){return this.m_AnonymousServiceTransport},e.prototype.ConstructServiceTransport=function(){this.m_ServiceTransport={SendMsg:this.SendMsgAndAwaitResponse.bind(this,{bSendAuth:!0}),SendNotification:this.SendNotification.bind(this,{bSendAuth:!0})},this.m_AnonymousServiceTransport={SendMsg:this.SendMsgAndAwaitResponse.bind(this,{bSendAuth:!1}),SendNotification:this.SendNotification.bind(this,{bSendAuth:!1})}},e.prototype.SendMsgAndAwaitResponse=function(e,t,n,r,s){return Object(o.b)(this,void 0,void 0,(function(){var c,l,p,m;return Object(o.e)(this,(function(o){switch(o.label){case 0:c=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Send(e,t,n,s)];case 2:if(200!=(l=o.sent()).status||!l.data)throw new Error("Request Error");return c=a.b.Init(r,147),l.headers&&(l.headers["x-eresult"]&&c.Hdr().set_eresult(parseInt(l.headers["x-eresult"])),l.headers["x-error_message"]&&c.Hdr().set_error_message(l.headers["x-error_message"])),this.m_bJsonMode?c.SetBodyJSON(l.data.response):(p=new u.b(l.data),m=new i.BinaryReader(p.GetPacket(),p.TellGet(),p.GetCountBytesRemaining()),r.deserializeBinaryFromReader(c.Body(),m)),[3,4];case 3:return o.sent(),c=this.CreateFailedMsgProtobuf(r,3,null),[3,4];case 4:return[2,c]}}))}))},e.prototype.SendNotification=function(e,t,n,o){return this.Send(e,t,n,o),!0},e.prototype.Send=function(e,t,n,i){var a=this.CreateWebAPIURL(t),s=n.SerializeBody(),c=r.fromByteArray(s),u=i.eWebAPIKeyRequirement,p=0==i.ePrivilege&&1==u,m={responseType:this.m_bJsonMode?"json":"arraybuffer",params:{}};if(e.bSendAuth||1==u||console.error("Attempting to invoke service "+t+" without auth, but auth is required."),this.m_webApiAccessToken&&e.bSendAuth&&!p&&(m.params.access_token=this.m_webApiAccessToken),!i.bConstMethod){var d=new FormData;return this.m_bJsonMode?d.append("input_json",JSON.stringify(n.Body().toObject())):d.append("input_protobuf_encoded",c),l.a.post(a,d,m)}return this.m_bJsonMode?m.params=Object(o.a)(Object(o.a)({},m.params),{input_json:JSON.stringify(n.Body().toObject())}):m.params=Object(o.a)(Object(o.a)({},m.params),{input_protobuf_encoded:c}),l.a.get(a,m)},e.prototype.CreateWebAPIURL=function(e){var t=e.match(/([^\.]+)\.(.+)#(\d+)/);return t&&4==t.length?this.m_strWebAPIBaseURL+"I"+t[1]+"Service/"+t[2]+"/v"+t[3]:null},e.prototype.CreateFailedMsgProtobuf=function(e,t,n){var o=a.b.Init(e);return o.Hdr().set_eresult(2),o.Hdr().set_transport_error(t),n&&o.Hdr().set_error_message(n),o},Object(o.c)([s.a],e.prototype,"SendMsgAndAwaitResponse",null),Object(o.c)([s.a],e.prototype,"SendNotification",null),Object(o.c)([s.a],e.prototype,"Send",null),e}()},"5FJe":function(e,t,n){"use strict";n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return D}));var o,r=n("mrSG"),i=n("UqDm"),a=n("4HGb"),s=n("s+DT"),c=n("R/D/"),l=n("3Liw"),u=n("LAqV"),p=n("2vnA"),m=n("oh5H"),d=n("+M9t"),h=n("HxRt"),f=n("XCHq"),_=-6;!function(e){e[e.eOnlineOnly=0]="eOnlineOnly",e[e.eOnlineOnlyNotInGame=1]="eOnlineOnlyNotInGame",e[e.eOfflineOnly=2]="eOfflineOnly",e[e.eIncomingInvites=3]="eIncomingInvites",e[e.eAll=4]="eAll"}(o||(o={}));var g=function(){function e(e){this.m_eDisplayType=o.eAll,this.m_strName="",this.m_bCollapsed=!1,this.m_OnHeaderClick=void 0,this.m_rgAccountIDMembers=p.B.array(),this.m_setMembers=new Set,this.m_strName=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},set:function(e){this.m_strName=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display_type",{get:function(){return this.m_eDisplayType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onheaderclick",{get:function(){return this.m_OnHeaderClick},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this.m_bCollapsed},set:function(e){this.m_bCollapsed=e},enumerable:!1,configurable:!0}),e.prototype.GetCurrentMemberSet=function(){return this.m_setMembers},Object.defineProperty(e.prototype,"member_count",{get:function(){return this.display_type==o.eAll?this.unfiltered_count:this.member_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.member_accountid_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,n=0,o=this.member_list_unsorted;n<o.length;n++){var r=o[n];r.persona.is_online&&(e++,r.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!1,configurable:!0}),e.prototype.SetOnHeaderClick=function(e){this.m_OnHeaderClick=e},e.prototype.Clear=function(){this.m_rgAccountIDMembers.clear(),this.m_setMembers.clear()},e.prototype.AddMember=function(e){this.HasMember(e)||(this.m_setMembers.add(e),this.m_rgAccountIDMembers.push(e))},e.prototype.RemoveMember=function(e){this.HasMember(e)&&(this.m_setMembers.delete(e),i.c(this.m_rgAccountIDMembers,e))},e.prototype.HasMember=function(e){return this.m_setMembers.has(e)},Object.defineProperty(e.prototype,"GetRawMemberList",{get:function(){return this.m_rgAccountIDMembers.map((function(e){return u.f.FriendStore.GetPlayer(e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(d.b.DefaultFriendSortComparator),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){for(var e=[],t=0,n=this.GetRawMemberList;t<n.length;t++){var r=n[t];if((this.display_type!=o.eOnlineOnly||r.persona.is_online)&&(this.display_type!=o.eOfflineOnly||!r.persona.is_online)){if(this.display_type==o.eOnlineOnlyNotInGame){if(!r.persona.is_online||r.persona.is_ingame)continue;if(r.persona.m_broadcastAppId&&r.persona.m_broadcastAppId==f.b.appID)continue}e.push(r)}}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_accountid_list",{get:function(){return this.m_rgAccountIDMembers},enumerable:!1,configurable:!0}),Object(r.c)([p.B],e.prototype,"m_strName",void 0),Object(r.c)([p.B],e.prototype,"m_bCollapsed",void 0),Object(r.c)([p.n],e.prototype,"member_count",null),Object(r.c)([p.n],e.prototype,"unfiltered_count",null),Object(r.c)([p.n],e.prototype,"member_counts",null),Object(r.c)([p.k],e.prototype,"SetOnHeaderClick",null),Object(r.c)([p.k],e.prototype,"Clear",null),Object(r.c)([p.k],e.prototype,"AddMember",null),Object(r.c)([p.k],e.prototype,"RemoveMember",null),Object(r.c)([p.n],e.prototype,"member_list",null),Object(r.c)([p.n],e.prototype,"member_list_unsorted",null),e}(),b=function(e){function t(t,n,o,r){void 0===n&&(n=-1),void 0===o&&(o=!1),void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.m_bModifiable=!1,i.m_bAcceptsGroupRemovals=!1,i.m_iGroupID=n,i.m_bModifiable=o,i.m_bAcceptsGroupRemovals=r,i}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.m_iGroupID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return""+this.m_iGroupID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modifiable",{get:function(){return this.m_bModifiable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accepts_group_removals",{get:function(){return this.m_bAcceptsGroupRemovals},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GetRawMemberList",{get:function(){return this.member_accountid_list.map((function(e){return u.f.FriendStore.GetPlayer(e)}))},enumerable:!1,configurable:!0}),t.prototype.GetMembersMatchingSearch=function(e){for(var t=[],n=0,o=this.GetRawMemberList;n<o.length;n++){var r=o[n];r.BMatchesSearchString(e,!1)&&t.push(r)}return t.sort(d.b.DefaultFriendSortComparator),t},Object(r.c)([p.n],t.prototype,"GetRawMemberList",null),t}(g),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"display_type",{get:function(){return u.f.SettingsStore.FriendsSettings.bHideOfflineFriendsInTagGroups?o.eOnlineOnly:o.eAll},enumerable:!1,configurable:!0}),t}(b),y=function(e){function t(t,n){var r=e.call(this,t,n,!1,!0)||this;return r.m_eDisplayType=o.eOnlineOnlyNotInGame,r}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"all"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"display_type",{get:function(){return u.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame?o.eOnlineOnlyNotInGame:o.eOnlineOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){return u.f.SettingsStore.FriendsSettings.bHideCategorizedFriends},enumerable:!1,configurable:!0}),t}(b),S=function(e){function t(t,n){return e.call(this,t,n,!1,!0)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"offline"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){var e=u.f.SettingsStore.FriendsSettings;return e.bHideCategorizedFriends&&!e.bHideOfflineFriendsInTagGroups},enumerable:!1,configurable:!0}),t}(b),C=function(e){function t(t,n){return e.call(this,t,n,!1,!0)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"outgoing"},enumerable:!1,configurable:!0}),t}(b),O=function(e){function t(t,n){return e.call(this,t,n,!1,!0)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"ingame"},enumerable:!1,configurable:!0}),t}(b),I=function(e){function t(t,n){var r=e.call(this,t,n,!1,!0)||this;return r.m_mapSteamIDToMutualFriends=p.B.map(),r.m_unMutualFriendsCacheHash=0,r.m_eDisplayType=o.eIncomingInvites,r}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"incominginvites"},enumerable:!1,configurable:!0}),t.prototype.GetMutualFriendsCacheHash=function(){return this.m_unMutualFriendsCacheHash},t.prototype.SetMutualFriendsCacheHash=function(e){this.m_unMutualFriendsCacheHash=e},t.prototype.SetMutualFriends=function(e){this.m_mapSteamIDToMutualFriends.replace(e)},Object.defineProperty(t.prototype,"map_steamid_to_mutual_friends",{get:function(){return this.m_mapSteamIDToMutualFriends},enumerable:!1,configurable:!0}),t}(b),E=function(e){function t(t){return e.call(this,"",t,!1,!1)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"is_initialized",{get:function(){return 0!=this.id&&u.f.AppInfoStore.GetAppInfo(this.id).is_initialized},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"game_"+this.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return!this.is_initialized||this.id<0?"":u.f.AppInfoStore.GetAppInfo(this.id).name},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon_url",{get:function(){return!this.is_initialized||this.id<0?"":u.f.AppInfoStore.GetAppInfo(this.id).icon_url},enumerable:!1,configurable:!0}),t.prototype.PlayerGroupSortComparator=function(e,t,n,o){var r=e.persona.player_group,i=t.persona.player_group,a=r?Math.max(e.persona.player_group_size,n.get(r)||1):1,s=i?Math.max(t.persona.player_group_size,n.get(i)||1):1;return a!=s?s-a:a>1&&r!=i?r.localeCompare(i):o(e,t)},Object.defineProperty(t.prototype,"member_list",{get:function(){for(var e=this,t=[],n=new Map,o=0,r=this.GetRawMemberList;o<r.length;o++){var i=r[o];if(t.push(i),i.persona.player_group){var a=n.get(i.persona.player_group);n.set(i.persona.player_group,a?a+1:1)}}var s=d.b.DefaultFriendSortComparator;return 0==this.id?t.sort(s):t.sort((function(t,o){return e.PlayerGroupSortComparator(t,o,n,s)})),t},enumerable:!1,configurable:!0}),Object(r.c)([p.n],t.prototype,"member_list",null),t}(b),w={groups:{offline:!0,outgoing:!0}},M=function(){function e(){this.m_mapCollapsePrefs=p.B.map()}return e.prototype.Init=function(){var e=this;u.f.SettingsStore.GetObjectFromLocalStorageWhenReady("FriendGroupCollapse",w).then((function(t){for(var n in e.m_mapCollapsePrefs.clear(),t.groups)e.m_mapCollapsePrefs.set(n,t.groups[n])}))},e.prototype.GetUserGroupCollapsed=function(e){return!!this.m_mapCollapsePrefs.get(e)},e.prototype.SetUserGroupCollapsed=function(e,t){!!this.m_mapCollapsePrefs.get(e)!=t&&(t||w.groups[e]?this.m_mapCollapsePrefs.set(e,t):this.m_mapCollapsePrefs.delete(e),this.WritePrefs())},e.prototype.ToggleUserGroupCollapsed=function(e){this.SetUserGroupCollapsed(e,!this.GetUserGroupCollapsed(e))},e.prototype.WritePrefs=function(){u.f.SettingsStore.StoreObjectInLocalStorage("FriendGroupCollapse",{groups:this.m_mapCollapsePrefs.toJSON()})},Object(r.c)([p.k],e.prototype,"SetUserGroupCollapsed",null),Object(r.c)([p.k],e.prototype,"ToggleUserGroupCollapsed",null),e}(),D=function(){function e(e){this.m_FriendGroupDisplayPrefs=new M,this.m_mapGroups=p.B.map(),this.m_mapGameGroups=p.B.map(),this.m_singletonGameGroup=new E(0),this.m_groupAllFriends=new y(Object(m.d)("#FriendGroup_Online"),-1),this.m_groupOfflineFriends=new S(Object(m.d)("#FriendGroup_Offline"),-3),this.m_groupIngameFriends=new O(Object(m.d)("#FriendGroup_InGame"),-4),this.m_groupIncomingInvites=new I(Object(m.d)("#FriendGroup_IncomingInvites"),-5),this.m_groupOutgoingInvites=new C(Object(m.d)("#FriendGroup_Outgoing"),-6),this.m_FriendStore=e,this.m_groupOfflineFriends.m_eDisplayType=o.eOfflineOnly}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupDisplayPrefs.Init(),this.m_CMInterface.AddOnLogonCallback((function(){return Object(r.b)(t,void 0,void 0,(function(){var e,t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=a.b.Init(h.a),[4,h.f.GetCategories(this.m_CMInterface.GetServiceTransport(),e)];case 1:return 1==(t=n.sent()).GetEResult()&&this.RecvCategoriesList(t.Body()),[2]}}))}))}),47)},Object.defineProperty(e.prototype,"all_friends",{get:function(){return this.m_groupAllFriends},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ingame_group",{get:function(){return this.m_groupIngameFriends},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"incoming_invites_group",{get:function(){return this.m_groupIncomingInvites},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outgoing_invites_group",{get:function(){return this.m_groupOutgoingInvites},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friend_groups",{get:function(){return Object(r.g)(this.game_groups,this.user_groups,this.default_groups)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupDisplayPrefs",{get:function(){return this.m_FriendGroupDisplayPrefs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"user_groups",{get:function(){var e=[];return this.m_mapGroups.forEach((function(t){e.push(t)})),e.sort((function(e,t){return e.name.localeCompare(t.name)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game_groups",{get:function(){var e=[],t=2;return 1==this.m_singletonGameGroup.unfiltered_count&&(t=1),this.m_mapGameGroups.forEach((function(n){n.name&&n.member_count>=t&&e.push(n)})),e.sort((function(e,t){return e.member_count==t.member_count?e.name.localeCompare(t.name):t.member_count-e.member_count})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"singleton_game_group",{get:function(){if(1==this.m_singletonGameGroup.unfiltered_count){var e=this.m_singletonGameGroup.member_accountid_list[0];if(!u.f.FriendStore.GetPlayer(e).persona.is_in_nonsteam_game)return}return this.m_singletonGameGroup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"default_groups",{get:function(){return[this.m_groupAllFriends,this.m_groupOfflineFriends]},enumerable:!1,configurable:!0}),e.prototype.OnFullFriendsListUpdateStart=function(){this.m_groupOfflineFriends.Clear(),this.m_groupAllFriends.Clear(),this.m_groupIncomingInvites.Clear(),this.m_groupOutgoingInvites.Clear()},e.prototype.OnFullFriendsListUpdateComplete=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear();for(var e=0,t=this.m_FriendStore.all_friends;e<t.length;e++){var n=t[e];if(n.persona.is_ingame){var o=n.persona.is_in_nonsteam_game?_:n.persona.m_unGamePlayedAppID;this.OnFriendGameChanged(n.accountid,0,o)}}},e.prototype.OnPersonaStateCacheReset=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear()},e.prototype.OnFriendAdded=function(e){this.m_groupAllFriends.AddMember(e),this.m_groupOfflineFriends.AddMember(e)},e.prototype.OnFriendRemoved=function(e){this.m_groupAllFriends.RemoveMember(e),this.m_groupOfflineFriends.RemoveMember(e),this.m_groupIngameFriends.RemoveMember(e),this.m_singletonGameGroup.RemoveMember(e),this.m_mapGroups.forEach((function(t){t.RemoveMember(e)})),this.m_mapGameGroups.forEach((function(t){t.RemoveMember(e)}))},e.prototype.OnFriendGameChanged=function(e,t,n){var o=t==_?this.m_singletonGameGroup:0!=t?this.m_mapGameGroups.get(t):null,r=n==_?this.m_singletonGameGroup:0!=n?this.m_mapGameGroups.get(n):null;if(!(o&&r&&t==n||r&&r.HasMember(e))){if(o&&o.HasMember(e)&&(o.RemoveMember(e),o!=this.m_singletonGameGroup&&(0==o.unfiltered_count?this.m_singletonGameGroup.RemoveMember(e):1==o.unfiltered_count&&this.m_singletonGameGroup.AddMember(o.member_accountid_list[0]))),r)r!=this.m_singletonGameGroup&&(1==r.unfiltered_count?this.m_singletonGameGroup.RemoveMember(r.member_accountid_list[0]):0==r.unfiltered_count&&this.m_singletonGameGroup.AddMember(e)),r.AddMember(e);else if(0!=n){var i=new E(n);i.AddMember(e),this.m_singletonGameGroup.AddMember(e),this.m_mapGameGroups.set(n,i)}0!=n?this.m_groupIngameFriends.AddMember(e):this.m_groupIngameFriends.RemoveMember(e)}},e.prototype.OnIncomingInviteAdded=function(e){this.m_groupIncomingInvites.AddMember(e)},e.prototype.OnIncomingInviteRemoved=function(e){this.m_groupIncomingInvites.RemoveMember(e)},e.prototype.OnOutgoingInviteAdded=function(e){this.m_groupOutgoingInvites.AddMember(e)},e.prototype.OnOutgoingInviteRemoved=function(e){this.m_groupOutgoingInvites.RemoveMember(e)},e.prototype.EnsureMutualFriendsForIncomingInvites=function(){var e=this;function t(e){for(var t=2166136261,n=0;n<e.length;++n)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}for(var n=0,o=0,r=this.m_groupIncomingInvites.member_list;o<r.length;o++){var i=r[o];n^=t(""+i.accountid)}if(this.m_groupIncomingInvites.GetMutualFriendsCacheHash()!=n){this.m_groupIncomingInvites.SetMutualFriendsCacheHash(n);var s=a.b.Init(l.d);l.o.GetMutualFriendsForIncomingInvites(this.m_CMInterface.GetServiceTransport(),s).then((function(t){if(1==t.GetEResult()&&e.m_groupIncomingInvites.GetMutualFriendsCacheHash()==n){for(var o=p.B.map(),r=0,i=t.Body().incoming_invite_mutual_friends_lists();r<i.length;r++){for(var a=i[r],s=new Set,c=0,l=a.mutual_friend_account_ids();c<l.length;c++){var u=l[c];s.add(u)}o.set(a.steamid(),s)}e.m_groupIncomingInvites.SetMutualFriends(o)}}))}},e.prototype.CreateGroup=function(e,t){var n=this,o=a.b.Init(c.d,5560);return o.Body().set_groupname(e),t&&o.Body().set_steamid_friends(t),new Promise((function(r,i){n.m_CMInterface.SendMsgAndAwaitResponse(o,c.e).then((function(o){1==o.Body().eresult()&&Object(p.F)((function(){var r=o.Body().groupid(),i=new v(e,o.Body().groupid(),!0);if(t)for(var a=0,c=t;a<c.length;a++){var l=c[a];i.AddMember(new s.a(l).GetAccountID())}n.m_mapGroups.set(r,i)})),r(1==o.Body().eresult())})).catch((function(){r(!1)}))}))},e.prototype.ManageGroup=function(e,t,n,o){var r=this;if(t==e.name&&!n&&!o)return Promise.resolve(!0);var i=a.b.Init(c.k,5564);return i.Body().set_groupid(e.id),t&&t!=e.name&&i.Body().set_groupname(t),n&&i.Body().set_steamid_friends_added(n),o&&i.Body().set_steamid_friends_removed(o),new Promise((function(a,l){r.m_CMInterface.SendMsgAndAwaitResponse(i,c.l).then((function(r){if(1==r.Body().eresult()){e.name=t;for(var i=0,c=n;i<c.length;i++){var l=c[i];e.AddMember(new s.a(l).GetAccountID())}for(var u=0,p=o;u<p.length;u++){l=p[u];e.RemoveMember(new s.a(l).GetAccountID())}}a(1==r.Body().eresult())})).catch((function(){a(!1)}))}))},e.prototype.RemoveGroup=function(e){var t=this,n=a.b.Init(c.f,5562);n.Body().set_groupid(e.id),this.m_CMInterface.SendMsgAndAwaitResponse(n,c.g).then((function(n){1==n.Body().eresult()&&t.HandleGroupRemoval(e)}))},e.prototype.HandleGroupRemoval=function(e){this.m_mapGroups.delete(e.id)},Object.defineProperty(e.prototype,"categorized_friend_set",{get:function(){var e=new Set;return this.m_mapGroups.forEach((function(t){t.member_accountid_list.forEach(e.add.bind(e))})),e},enumerable:!1,configurable:!0}),e.prototype.RecvCategoriesList=function(e){this.m_mapGroups.clear();for(var t=0,n=e.categories();t<n.length;t++){var r=n[t],i=r.groupid(),a=new v(r.name()||"",r.groupid(),!0);a.m_eDisplayType=o.eAll,this.m_mapGroups.set(i,a);for(var s=0,c=r.accountid_members();s<c.length;s++){var l=c[s];a.AddMember(l)}}},e.prototype.TransferFriendFromToGroup=function(e,t,n){var o,r=this,i=n&&n.modifiable,s=t&&t.modifiable,l=[];i&&((o=a.b.Init(c.a,5566)).Body().set_groupid(n.id),o.Body().set_steamiduser(e.persona.m_steamid.ConvertTo64BitString()),l.push(this.m_CMInterface.SendMsgAndAwaitResponse(o,c.b).then((function(t){return 1==t.Body().eresult()&&(n.AddMember(e.accountid),!0)}))));s&&((o=a.b.Init(c.o,5568)).Body().set_groupid(t.id),o.Body().set_steamiduser(e.persona.m_steamid.ConvertTo64BitString()),l.push(this.m_CMInterface.SendMsgAndAwaitResponse(o,c.p).then((function(n){return 1==n.Body().eresult()&&(t.RemoveMember(e.accountid),0==t.unfiltered_count&&r.HandleGroupRemoval(t),!0)}))));return Promise.all(l)},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this;e.metrics().set_friends_category_count(this.m_mapGroups.size),e.metrics().set_friends_categorized_count(this.categorized_friend_set.size),this.singleton_game_group&&e.metrics().set_friends_in_game_singleton_count(this.singleton_game_group.unfiltered_count),e.metrics().set_game_group_count(this.game_groups.length);var n=function(e){return t.m_FriendGroupDisplayPrefs.GetUserGroupCollapsed(e.unique_id)},o=e.ui_state().category_collapse();o.set_in_game_collapsed(n(this.m_singletonGameGroup)),o.set_online_collapsed(n(this.m_groupAllFriends)),o.set_offline_collapsed(n(this.m_groupOfflineFriends)),o.set_categories_collapsed(i.b(Array.from(this.m_mapGroups.values()),n)),o.set_game_groups_collapsed(i.b(Array.from(this.m_mapGameGroups.values()),n))},Object(r.c)([p.n],e.prototype,"friend_groups",null),Object(r.c)([p.n],e.prototype,"user_groups",null),Object(r.c)([p.n],e.prototype,"game_groups",null),Object(r.c)([p.n],e.prototype,"singleton_game_group",null),Object(r.c)([p.n],e.prototype,"default_groups",null),Object(r.c)([p.k],e.prototype,"OnFullFriendsListUpdateComplete",null),Object(r.c)([p.k],e.prototype,"OnPersonaStateCacheReset",null),Object(r.c)([p.k],e.prototype,"HandleGroupRemoval",null),Object(r.c)([p.n],e.prototype,"categorized_friend_set",null),Object(r.c)([p.k],e.prototype,"RecvCategoriesList",null),Object(r.c)([p.k],e.prototype,"TransferFriendFromToGroup",null),e}()},"5Nu3":function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"c",(function(){return z})),n.d(t,"a",(function(){return q}));var o=n("mrSG"),r=n("2vnA"),i=n("4HGb"),a=n("s+DT"),s=n("OJz+"),c=n("RBVV"),l=n("3zHc"),u=n("VtNY"),p=n("LAqV"),m=n("tkkQ"),d=function(){function e(e,t,n,o,r,i,a){this.unAccountIDInviter=e,this.rtTimestamp=t,this.appID=n,this.connectString=o,this.remoteplayString=r,this.lobbyID=a,this.bDismissed=i,this.bAccepted=!1}return e.prototype.AcceptGameInvite=function(){var e,t=a.a.InitFromAccountID(this.unAccountIDInviter);null!=this.lobbyID?e="steam://joinlobby/"+this.appID+"/"+this.lobbyID+"/"+t.ConvertTo64BitString():this.remoteplayString?e=m.a.IN_MOBILE?"https://s.team/remoteplay/connect/"+t.ConvertTo64BitString()+"?appid="+this.appID+"&"+this.remoteplayString:"steam://remoteplay/connect/"+t.ConvertTo64BitString()+"?appid="+this.appID+"&"+this.remoteplayString:(e="steam://rungame/"+this.appID+"/"+t.ConvertTo64BitString(),void 0!==this.connectString&&(e+="/"+encodeURIComponent(this.connectString))),p.f.OpenURLInBrowser(e,p.a),this.bAccepted=!0,p.f.ChatStore.GameInviteStore.RecordDismissTime(this)},e.prototype.DismissInvite=function(){this.bDismissed=!0,p.f.ChatStore.GameInviteStore.RecordDismissTime(this)},Object.defineProperty(e.prototype,"bOld",{get:function(){return p.f.GetServerRTime32()-this.rtTimestamp>21600},enumerable:!1,configurable:!0}),Object(o.c)([r.B],e.prototype,"bDismissed",void 0),Object(o.c)([r.B],e.prototype,"bAccepted",void 0),Object(o.c)([r.k],e.prototype,"AcceptGameInvite",null),Object(o.c)([r.k],e.prototype,"DismissInvite",null),e}(),h={dismisstimes:{}},f=function(){function e(){this.m_mapGameInvites=new Map,this.m_mapDismissedInvites=r.B.map(),this.m_mapInviteByCode=new Map}return e.prototype.Init=function(){var e=this;p.f.SettingsStore.GetObjectFromLocalStorageWhenReady("GameInvites",h).then((function(t){var n=new Date;for(var o in n.setDate(n.getDate()-14),e.m_mapDismissedInvites.clear(),t.dismisstimes){var r=parseInt(o),i=t.dismisstimes[o];new Date(1e3*i)<n||e.m_mapDismissedInvites.set(r,i)}}))},e.prototype.RegisterGameInvite=function(e,t,n,o,r,i){var a=this.m_mapGameInvites.get(e);a||(a=new Map,this.m_mapGameInvites.set(e,a));var s=a.get(t);if(!s){var c=!1,l=this.m_mapDismissedInvites.get(e);l&&(c=t<=l),s=new d(e,t,n,o,r,c,i),a.set(t,s),a.forEach((function(e){e.rtTimestamp<t&&e.DismissInvite()}))}return s},e.prototype.RecordDismissTime=function(e){var t=this.m_mapDismissedInvites.get(e.unAccountIDInviter);t&&t>e.rtTimestamp||(this.m_mapDismissedInvites.set(e.unAccountIDInviter,e.rtTimestamp),this.WriteToLocalStorage())},e.prototype.WriteToLocalStorage=function(){p.f.SettingsStore.StoreObjectInLocalStorage("GameInvites",{dismisstimes:this.m_mapDismissedInvites})},e}(),_=function(){function e(){this.bCollapsed=!1}return e.prototype.IsEmpty=function(){return!this.bCollapsed&&void 0===this.nDefaultWidth&&void 0===this.nDesiredWidth},e}(),g=function(){function e(){this.m_mapEmbed=new r.b}return e.prototype.Init=function(){var e=this;p.f.SettingsStore.GetObjectFromLocalStorageWhenReady("ChatEmbeds",{}).then((function(t){for(var n in e.m_mapEmbed.clear(),t){var o=new _;Object.assign(o,t[n]),e.m_mapEmbed.set(n,o)}}))},e.prototype.GetKey=function(e,t){return t+"_"+e},e.prototype.EvictOldestIfNecessary=function(){if(this.m_mapEmbed.size>100){var e=Array.from(this.m_mapEmbed.keys()).sort()[0];this.m_mapEmbed.delete(e)}},e.prototype.GetOrCreateEmbedData=function(e,t){var n=this.GetKey(e,t),o=this.m_mapEmbed.get(n);return o||((o=new _).bCollapsed=!1),o},e.prototype.SaveEmbedData=function(e,t,n){n.IsEmpty()?this.m_mapEmbed.delete(this.GetKey(e,t)):this.m_mapEmbed.set(this.GetKey(e,t),n),this.EvictOldestIfNecessary(),this.WriteToLocalStorage()},e.prototype.WriteToLocalStorage=function(){p.f.SettingsStore.StoreObjectInLocalStorage("ChatEmbeds",this.m_mapEmbed)},e.prototype.GetCollapsedState=function(e,t){var n=this.m_mapEmbed.get(this.GetKey(e,t));return!(!n||!n.bCollapsed)},e.prototype.SetCollapsedState=function(e,t,n){var o=this.GetOrCreateEmbedData(e,t);o.bCollapsed=n,this.SaveEmbedData(e,t,o)},e.prototype.GetWidths=function(e,t){var n=this.m_mapEmbed.get(this.GetKey(e,t));if(n&&n.nDesiredWidth&&n.nDefaultWidth)return{nDesiredWidth:n.nDesiredWidth,nDefaultWidth:n.nDefaultWidth}},e.prototype.SetWidths=function(e,t,n,o){var r=this.GetOrCreateEmbedData(e,t);n==o?(delete r.nDefaultWidth,delete r.nDesiredWidth):(r.nDesiredWidth=n,r.nDefaultWidth=o),this.SaveEmbedData(e,t,r)},e}(),b=n("rsEv"),v=n("V7Fl"),y=n("1KZt"),S=n("R/D/"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fnRecvEmoticonList=Object(s.a)(9331,S.h,(function(e){for(var n=[],r=0,i=e.Body().emoticons();r<i.length;r++){var a=i[r],s=a.name();if(s.startsWith("^"))n.push({name:s});else{var c={name:s.substr(1,s.length-2)},l=c.name.toLowerCase();l!=c.name&&(c.name_normalized=l),a.time_last_used()&&(c.last_used=a.time_last_used()),a.use_count()&&(c.use_count=a.use_count()),a.time_received()&&(c.time_received=a.time_received()),a.appid()&&(c.appid=a.appid()),n.push(c)}}t.OnEmoticonListReceived(n);var u=e.Body().toObject();u.stickers&&(t.m_rgStickers=u.stickers.map((function(e){return e}))),u.effects&&(t.m_rgEffects=u.effects.map((function(e){var t=e.name,n=Object(o.f)(e,["name"]);return Object(o.a)({name:t},n)})));var p=t.m_rgStickers.map((function(e){return e.time_received})).reduce((function(e,t){return Math.max(e,t)}),Number.MIN_SAFE_INTEGER),m=t.m_rgEffects.map((function(e){return e.time_received})).reduce((function(e,t){return Math.max(e,t)}),Number.MIN_SAFE_INTEGER);t.m_rtLastStickerOrEffect=Math.max(p,m)})),t}return Object(o.d)(t,e),t.prototype.Init=function(e){this.m_CMInterface=e},t.prototype.BInitialized=function(){return!!this.m_CMInterface},t.prototype.GetServerTime=function(){return this.m_CMInterface.GetServerRTime32()},t.prototype.RequestEmoticonListInternal=function(){var e=this;this.m_CMInterface.RunWhenLoggedOn((function(){var t=i.b.Init(S.j,9330);e.m_CMInterface.Send(t)}))},t}(y.a),O=n("geE1"),I=n("7sd/"),E=n("UqDm"),w=n("E7zH"),M=n("FOB4"),D=n("/FkP"),T=n("oh5H"),j=n("/SYB"),G=n("XaMz"),R=n("2sgH"),k=n("9Eit"),A=n("ujHl");function N(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=Math.floor(Math.random()*t*1e3),[4,new Promise((function(e){return setTimeout(e,n)}))];case 1:return o.sent(),[2,e()]}}))}))}var B=n("ha6C"),L=n("3Liw"),P=n("vDqi"),F=n.n(P),x=n("HxRt"),V=n("1n9R"),U=n("hEDq"),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_CommunityPreferencesChangedHandler=Object(s.d)(L.n.NotifyCommunityPreferencesChangedHandler,(function(e){return t.UpdateCommunityPreferences(e.Body().preferences()),t.OnFilterDataChanged(),1})),t.m_TextFilterWordsChangedHandler=Object(s.d)(L.n.NotifyTextFilterWordsChangedHandler,(function(e){return t.UpdateTextFilterWords(e.Body().words()),t.OnFilterDataChanged(),1})),t.m_FriendsListChangedHandler=Object(s.a)(767,S.i,(function(e){e.Body().bincremental()&&t.SetFriendsList(e.Body())})),t}return Object(o.d)(t,e),t.prototype.InitCM=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){switch(n.label){case 0:return null!=this.m_CMInterface?[2,null]:(this.m_CMInterface=e,[4,this.m_CMInterface.WaitUntilLoggedOn()]);case 1:return n.sent(),[2,this.Init(this.m_CMInterface.steamid.GetAccountID(),this.m_CMInterface.GetServiceTransport(),t)]}}))}))},t}(function(){function e(){this.m_mapPlayerCache=new Map,this.m_strBannedWords="",this.m_strProfanityWords="",this.m_strBannedPattern="",this.m_strCleanPattern="",this.m_regexBannedWords=null,this.m_regexCleanWords=null,this.m_bShownFilterTip=!1,this.m_TextFilterPreferences=new U.o;var e=new L.b;this.m_TextFilterPreferences.eTextFilterSetting=e.text_filter_setting(),this.m_TextFilterPreferences.bIgnoreFriends=e.text_filter_ignore_friends(),this.m_TextFilterWords=new L.m}return e.prototype.Init=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,a,s=this;return Object(o.e)(this,(function(o){return this.m_unAccountID=e,this.m_Transport=t,this.m_Storage=n,this.m_strBannedWords="",this.m_strProfanityWords="",(r=[]).push(this.LoadTextFilterPreferences()),r.push(this.LoadTextFilterWords()),r.push(this.LoadFilter()),r.push(this.RequestUpdatedSettings()),r.push(this.LoadLanguage(V.c.LANGUAGE)),"english"!==V.c.LANGUAGE&&r.push(this.LoadLanguage("english")),a=i.b.Init(x.c),r.push(x.f.GetFriendsList(this.m_Transport,a).then((function(e){s.SetFriendsList(e.Body().friendslist())}))),[2,Promise.all(r).catch().then((function(){s.OnFilterDataChanged()}))]}))}))},e.prototype.LoadTextFilterPreferences=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_Storage?[4,this.m_Storage.GetObject("CTextFilterStore_TextFilterPreferences")]:[3,2];case 1:(e=t.sent())&&(this.m_TextFilterPreferences=e),t.label=2;case 2:return[2]}}))}))},e.prototype.SaveTextFilterPreferences=function(){this.m_Storage&&this.m_Storage.StoreObject("CTextFilterStore_TextFilterPreferences",this.m_TextFilterPreferences)},e.prototype.LoadTextFilterWords=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_Storage?[4,this.m_Storage.GetObject("CTextFilterStore_TextFilterWords")]:[3,2];case 1:(e=t.sent())&&(this.m_TextFilterWords=L.m.fromObject(e)),t.label=2;case 2:return[2]}}))}))},e.prototype.SaveTextFilterWords=function(){this.m_Storage&&this.m_Storage.StoreObject("CTextFilterStore_TextFilterWords",this.m_TextFilterWords.toObject())},e.prototype.LoadFilter=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return this.m_Storage?[4,this.m_Storage.GetObject("CTextFilterStore_strBannedPattern")]:[3,3];case 1:return e=n.sent(),[4,this.m_Storage.GetObject("CTextFilterStore_strCleanPattern")];case 2:t=n.sent(),null!=e&&null!=t&&this.BRebuildFilter(e,t),n.label=3;case 3:return[2]}}))}))},e.prototype.SaveFilter=function(){this.m_Storage&&(this.m_Storage.StoreObject("CTextFilterStore_strBannedPattern",this.m_strBannedPattern),this.m_Storage.StoreObject("CTextFilterStore_strCleanPattern",this.m_strCleanPattern))},e.prototype.RequestUpdatedSettings=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=i.b.Init(L.c),[4,L.o.GetCommunityPreferences(this.m_Transport,e)];case 1:return t=o.sent(),n=t.Body().preferences(),this.UpdateCommunityPreferences(n),n.text_filter_words_revision()===this.m_TextFilterWords.text_filter_words_revision()?[3,4]:0!==n.text_filter_words_revision()?[3,2]:(this.UpdateTextFilterWords(new L.m),[3,4]);case 2:return r=i.b.Init(L.h),[4,L.o.GetTextFilterWords(this.m_Transport,r)];case 3:a=o.sent(),this.UpdateTextFilterWords(a.Body().words()),o.label=4;case 4:return[2]}}))}))},e.prototype.UpdateCommunityPreferences=function(e){var t=!1;e.text_filter_setting()!==this.m_TextFilterPreferences.eTextFilterSetting&&(this.m_TextFilterPreferences.eTextFilterSetting=e.text_filter_setting(),t=!0),e.text_filter_ignore_friends()!==this.m_TextFilterPreferences.bIgnoreFriends&&(this.m_TextFilterPreferences.bIgnoreFriends=e.text_filter_ignore_friends(),t=!0),t&&this.SaveTextFilterPreferences()},Object.defineProperty(e.prototype,"TextFilterPreferences",{get:function(){return this.m_TextFilterPreferences},enumerable:!1,configurable:!0}),e.prototype.UpdateTextFilterWords=function(e){this.m_TextFilterWords=e,this.SaveTextFilterWords()},e.prototype.SetFriendsList=function(e){e.bincremental()||this.m_mapPlayerCache.clear();for(var t=0,n=e.friends();t<n.length;t++){var o=n[t],r=new a.a(o.ulfriendid());if(r.BIsIndividualAccount()){var i=o.efriendrelationship();this.m_mapPlayerCache.set(r.GetAccountID(),i)}}},e.prototype.BIsFriend=function(e){return!!this.m_mapPlayerCache.has(e)&&3==this.m_mapPlayerCache.get(e)},e.prototype.LoadLanguage=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:t="1",n=V.c.COMMUNITY_CDN_URL+"textfilter/gettextfilterdictionary?type=banned&language="+encodeURIComponent(e)+"&v="+t+"&origin="+Object(V.d)(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,F.a.get(n)];case 2:return i=o.sent(),this.m_strBannedWords+=i.data,[3,4];case 3:return r=o.sent(),console.error("Failed to load filter dictionary "+n,r),[3,4];case 4:n=V.c.COMMUNITY_CDN_URL+"textfilter/gettextfilterdictionary?type=profanity&language="+encodeURIComponent(e)+"&v="+t+"&origin="+Object(V.d)(),o.label=5;case 5:return o.trys.push([5,7,,8]),[4,F.a.get(n)];case 6:return i=o.sent(),this.m_strProfanityWords+=i.data,[3,8];case 7:return a=o.sent(),console.error("Failed to load filter dictionary "+n,a),[3,8];case 8:return[2]}}))}))},e.prototype.AppendPattern=function(e,t){return""!==t&&(""!==e&&(e+="|"),e+=t),e},e.prototype.CreatePattern=function(e){var t=e.filter((function(e){return""!==e&&!e.startsWith("\\w*")&&!e.endsWith("\\w*")})),n=e.filter((function(e){return""!==e&&(e.startsWith("\\w*")||e.endsWith("\\w*"))}));return n=n.map((function(e){return e.startsWith("\\w*")&&e.endsWith("\\w*")?e.slice(3,-3):e.startsWith("\\w*")?e.slice(3)+"\\b":"\\b"+e.slice(0,-3)})),t.length>0&&n.length>0?"\\b("+t.join("|")+")\\b|"+n.join("|"):t.length>0?"\\b("+t.join("|")+")\\b":n.length>0?n.join("|"):""},e.prototype.OnFilterDataChanged=function(){var e=new RegExp(/\s*[\r\n]+\s*/g),t=[];switch(this.m_TextFilterPreferences.eTextFilterSetting){case 1:t=t.concat(this.m_strProfanityWords.split(e),this.m_strBannedWords.split(e));break;case 2:t=t.concat(this.m_strBannedWords.split(e))}t=t.concat(this.m_TextFilterWords.text_filter_custom_banned_words());var n=this.CreatePattern(t),o=this.CreatePattern(this.m_TextFilterWords.text_filter_custom_clean_words());""!=o&&(o="^("+o+")$"),this.BRebuildFilter(n,o)&&this.SaveFilter()},e.prototype.BRebuildFilter=function(e,t){if(e===this.m_strBannedPattern&&t===this.m_strCleanPattern)return!1;if(this.m_regexBannedWords=null,""!==e)try{this.m_regexBannedWords=new RegExp(e,"ugi")}catch(t){console.error("Couldn't compile regex \""+e+'": '+t)}if(this.m_regexCleanWords=null,""!==t)try{this.m_regexCleanWords=new RegExp(t,"ugi")}catch(e){console.error("Couldn't compile regex \""+t+'": '+e)}return this.m_strBannedPattern=e,this.m_strCleanPattern=t,!0},e.prototype.CreateProfanityReplacement=function(e){return"♥".repeat(e)},e.prototype.BHasFilter=function(){return null!=this.m_regexBannedWords},e.prototype.BShownFilterTip=function(){return this.m_bShownFilterTip},e.prototype.SetFilterTipShown=function(e){this.m_bShownFilterTip=e},e.prototype.FilterText=function(e,t){var n=this;return this.m_regexBannedWords?!t||e==this.m_unAccountID||this.m_TextFilterPreferences.bIgnoreFriends&&this.BIsFriend(e)?t:t.replace(this.m_regexBannedWords,(function(e){return n.m_regexCleanWords&&0==e.search(n.m_regexCleanWords)?e:n.CreateProfanityReplacement(e.length)})):t},Object(o.c)([r.B],e.prototype,"m_TextFilterPreferences",void 0),Object(o.c)([r.B],e.prototype,"m_mapPlayerCache",void 0),Object(o.c)([r.B],e.prototype,"m_regexBannedWords",void 0),Object(o.c)([r.B],e.prototype,"m_regexCleanWords",void 0),Object(o.c)([r.k],e.prototype,"UpdateCommunityPreferences",null),Object(o.c)([r.k],e.prototype,"SetFriendsList",null),Object(o.c)([r.k],e.prototype,"BRebuildFilter",null),e}()),W=(n("tZiA"),function(){function e(e){var t=this;this.LOG=j.b.create((function(){return"chatstore"}),!1),this.m_EmoticonStore=new C,this.m_FriendChatStore=new O.b(this),this.m_InviteStore=new u.a(this),this.m_GameInviteStore=new f,this.m_ChatRoomGroupDisplayPrefs=new v.c,this.m_EmbedStore=new g,this.m_TextFilterStore=new H,this.m_mapChatGroups=r.B.map(),this.m_mapActiveChatGroupsToRefCount=r.B.map(),this.m_mapVirtualizedMemberListViews=new Map,this.m_mapClanChatsByClanID=new Map,this.m_bReceivedChatGroupList=!1,this.m_bReadyToRender=!1,this.m_bSendingActiveGroups=!1,this.m_bSendActiveGroupsQueued=!1,this.m_IncomingChatRoomMessageHandler=Object(s.d)(c.W.NotifyIncomingChatMessageHandler,(function(e){var n=e.Body(),o=t.FindChatRoom(n.chat_group_id(),n.chat_id());if(!o)return 2;var r=new a.a(n.steamid_sender());if(0!=(n.server_message().message()||0))o.AddNewServerMsg(r.GetAccountID(),n.timestamp(),n.ordinal()||0,n.server_message().message(),n.message(),n.server_message().string_param(),n.server_message().accountid_param());else{var i=n.mentions(),s=null;i&&(s={},i.mention_all()&&(s.mention_all=!0),i.mention_here()&&(s.mention_here=!0),i.mention_accountids()&&-1!==i.mention_accountids().indexOf(t.m_FriendStore.self.accountid)&&(s.mention_user=!0)),o.AddNewChatMsgAndNotify(r.GetAccountID(),n.timestamp(),n.ordinal()||0,n.message(),n.message_no_bbcode(),s);var c=t.m_TextFilterStore;if(!c.BShownFilterTip()&&c.BHasFilter()){var l=n.message();t.m_TextFilterStore.FilterText(r.GetAccountID(),l)!==l&&(o.AddLocalMsg(r.GetAccountID(),n.timestamp(),Object(T.d)("#Chat_TextFilter_Active",t.GetTextFilterSettingsURL())),c.SetFilterTipShown(!0))}}return 1})),this.m_ChatMessageModifiedHandler=Object(s.d)(c.W.NotifyChatMessageModifiedHandler,(function(e){var n=e.Body(),o=t.FindChatRoom(n.chat_group_id(),n.chat_id());if(!o)return 2;for(var r=[],i=0,a=e.Body().messages();i<a.length;i++){var s=a[i];s.deleted&&r.push({rtTimestamp:s.server_timestamp(),unOrdinal:s.ordinal()})}return o.UpdateChatMessageDeletedState(r,D.f.Deleting),1})),this.m_IncomingChatRoomHeaderStateChangeHandler=Object(s.c)(c.W.NotifyChatRoomHeaderStateChangeHandler,(function(e){var n=e.Body().header_state().chat_group_id(),o=t.m_mapChatGroups.get(n);return o&&o.UpdateChatRoomHeaderState(e.Body().header_state()),1})),this.m_IncomingStateChangeHandler=Object(s.c)(c.W.NotifyMemberStateChangeHandler,(function(e){var n=e.Body().chat_group_id(),o=e.Body().change(),r=e.Body().member();m.a.IN_CLIENT&&Object(B.a)("WebChat.OnGroupChatUserStateChange")&&p.f.SettingsStore.BClientHasFeatureOrOnWeb("SteamworksChatAPI")&&SteamClient.WebChat.OnGroupChatUserStateChange(n,r.accountid(),o);var i=t.m_mapChatGroups.get(n);return i&&i.OnUserStateChange(r,o),1})),this.m_IncomingChatRoomGroupRoomsChangeHandler=Object(s.c)(c.W.NotifyChatRoomGroupRoomsChangeHandler,(function(e){var n=e.Body(),o=t.m_mapChatGroups.get(n.chat_group_id());return o&&o.OnRoomStateChange(n),1})),this.m_IncomingChatGroupUserStateChangedHandler=Object(s.c)(c.W.NotifyChatGroupUserStateChangedHandler,(function(e){var n=e.Body(),o=n.chat_group_id(),r=n.user_action();switch(m.a.IN_CLIENT&&Object(B.a)("WebChat.OnGroupChatUserStateChange")&&p.f.SettingsStore.BClientHasFeatureOrOnWeb("SteamworksChatAPI")&&SteamClient.WebChat.OnGroupChatUserStateChange(o,m.c.accountid,r),r){case 1:var i=t.AddJoinedChatRoomGroup(n.group_summary(),n.user_chat_group_state());p.f.UIStore.ShowAndOrActivateChatRoomGroup(p.a,i,!1);break;case 2:case 3:case 10:p.f.VoiceStore.GetActiveChatRoomGroupID()==o&&p.f.VoiceStore.OnUserEndVoiceChat();var a=(i=t.GetChatRoomGroup(o))?i.name:void 0;t.RemoveChatRoomGroup(o),a&&(3==r?p.f.ShowAlert(Object(T.d)("#Alert_YouWereKickedTitle"),Object(T.d)("#Alert_YouWereKickedDescription",a)):10==r&&p.f.ShowAlert(Object(T.d)("#Alert_YouWereBannedTitle"),Object(T.d)("#Alert_YouWereBannedDescription",a)));break;case 7:case 0:i=t.GetChatRoomGroup(o);Object(G.a)(i,"Got state change for ChatRoomGroup we don't know about"),i&&i.UpdateUserState(n.user_chat_group_state());break;case 4:break;default:Object(G.a)(!1,"Don't know how to handle state change of type "+Object(c.cb)(r)+" ")}return 1})),this.m_AckChatMessageEchoHandler=Object(s.d)(c.W.NotifyAckChatMessageEchoHandler,(function(e){var n=e.Body().chat_group_id(),o=e.Body().chat_id(),r=e.Body().timestamp(),i=t.GetChatRoomGroup(n);if(!i)return 2;if(o){var a=i.GetChatRoom(o);if(!a)return 11;a.UpdateLastAckTimeFromServer(r)}else i.UpdateLastAckTimeFromServer(r);return 1})),this.m_IncomingChatRoomDisconnectHandler=Object(s.c)(c.W.NotifyChatRoomDisconnectHandler,(function(e){return N((function(){return Object(r.F)((function(){for(var n=0,o=e.Body().chat_group_ids();n<o.length;n++){var r=o[n],i=t.m_mapChatGroups.get(r);i&&i.OnConnectionRestored(!0)}t.SendActiveChatRoomGroupsToServer()}))}),4),1})),this.m_IncomingMemberListViewUpdatedHandler=Object(s.c)(c.W.NotifyMemberListViewUpdatedHandler,(function(e){var n=t.m_mapVirtualizedMemberListViews.get(e.Body().view_id());return n&&n.OnServerUpdate(e.Body()),1})),this.m_FriendStore=e}return e.prototype.Init=function(e,t){var n=this;this.m_CMInterface=e,this.m_EmoticonStore.Init(e),this.m_VoiceChat=t,this.m_ChatRoomBBCodeParser=p.f.GetChatRoomBBCodeParser(),this.m_FriendChatBBCodeParser=p.f.GetFriendChatBBCodeParser(),this.m_NotificationBBCodeParser=p.f.GetNotificationBBCodeParser(),this.m_ChatRoomEffectSettings=p.f.GetChatRoomEffectSettings(),this.m_ChatRoomGroupDisplayPrefs.Init(p.f.SettingsStore),this.m_EmbedStore.Init(),this.m_FriendChatStore.Init();var o=!1,r=0;return this.m_CMInterface.AddOnLogonCallback((function(){if(o){var t=r<Date.now()/1e3-A.d.PerMinute/2;t?N((function(){return n.RestoreStatePostDisconnect(t)}),4):n.RestoreStatePostDisconnect(t)}else k.b.Init(p.f.Storage,e.steamid.GetAccountID().toString()).then((function(){return n.LoadMyChatRooms()})),n.m_FriendChatStore.OnLogon(),o=!0;n.m_GameInviteStore.Init(),n.m_TextFilterStore.InitCM(n.m_CMInterface,p.f.Storage)}),102),this.m_CMInterface.AddOnDisconnectCallback((function(){return r=Date.now()/1e3}),102),new Promise((function(e){n.m_fnOnReadyToRender=e}))},e.prototype.SetReadyToRender=function(){this.m_bReadyToRender||(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.RestoreStatePostDisconnect=function(e){e&&this.LoadMyChatRooms();var t=this.m_mapActiveChatGroupsToRefCount.toPOJO(),n=Object.keys(t).some((function(e){return t[e]>0}));this.m_FriendChatStore.RestoreStatePostDisconnect(e),this.m_mapChatGroups.forEach((function(t){return t.OnConnectionRestored(e)})),n&&this.SendActiveChatRoomGroupsToServer()},e.prototype.LoadMyChatRooms=function(){var e=this,t=i.b.Init(c.t);c.X.GetMyChatRoomGroups(this.m_CMInterface.GetServiceTransport(),t).then((function(t){Object(r.F)((function(){1!=t.GetEResult()&&!0;for(var n=0,o=t.Body().chat_room_groups();n<o.length;n++){var r=o[n],i=r.group_summary().chat_group_id();if(i){var a=e.m_mapChatGroups.get(i);a||(a=new v.b(e,i),e.m_mapChatGroups.set(i,a)),a.SetInitialGroupState(r.group_summary()),a.UpdateUserState(r.user_chat_group_state()),e.OnGroupAdded(a),a.BHasEverBeenAcked()||p.f.UIStore.ShowUnackedGroup(a)}else!0}e.SetReadyToRender(),e.m_bReceivedChatGroupList=!0}))})).catch((function(t){console.error("Failed to load chat rooms from server",t),e.SetReadyToRender()}))},e.prototype.OnGroupAdded=function(e){e.GetClanID()&&(this.m_mapClanChatsByClanID.set(e.GetClanID(),e.GetGroupID()),this.m_FriendStore.ClanStore.SetClanChatGroupID(e.GetClanID(),e.GetGroupID()))},e.prototype.OnChatRoomActivated=function(e){e.GetGroup().OnActivate()},e.prototype.JoinAndShowChatRoomGroup=function(e,t,n){var o=this.GetChatRoomGroup(t);o&&o.BIsCurrentUserAMember()?p.f.UIStore.ShowAndOrActivateChatRoomGroup(e,o,n):this.m_InviteStore.JoinChatGroup(t,null,e)},e.prototype.AddCreatedChatRoomGroup=function(e,t,n,o){if(!this.m_mapChatGroups.has(t)){var r=new v.b(this,t);this.m_mapChatGroups.set(t,r),r.UpdateGroupState(n),r.UpdateUserState(o),this.OnGroupAdded(r),p.f.UIStore.ShowAndOrActivateChatRoomGroup(e,r,!0)}},e.prototype.AddKnownChatRoomGroup=function(e,t){var n=e.chat_group_id();if(this.m_mapChatGroups.has(n)){(o=this.m_mapChatGroups.get(n)).SetInitialGroupState(e)}else{var o=new v.b(this,n);this.m_mapChatGroups.set(n,o),o.SetInitialGroupState(e),t&&o.UpdateUserState(t),this.OnGroupAdded(o)}},e.prototype.AddJoinedChatRoomGroup=function(e,t){var n=t.chat_group_id(),o=this.m_mapChatGroups.get(n);return o||(o=new v.b(this,n),this.m_mapChatGroups.set(n,o)),e instanceof c.b?o.UpdateGroupState(e):o.SetInitialGroupState(e),this.OnGroupAdded(o),o.UpdateUserState(t),o},e.prototype.RemoveChatRoomGroup=function(e){var t=this.m_mapChatGroups.get(e);if(t){var n=this.m_mapChatGroups.get(e);n&&p.f.UIStore.CloseTabByID(n.unique_id),this.GetRefCountActiveChatRoomGroup(e)<=0&&t.UnloadAndResetGroupState()}},e.prototype.FindChatRoom_Deprecated=function(e){var t=null;return this.m_mapChatGroups.forEach((function(n){var o=n.GetChatRoom(e);o&&(t=o)})),t},e.prototype.FindChatRoom=function(e,t){var n=this.m_mapChatGroups.get(e);return n?n.GetChatRoom(t):null},Object.defineProperty(e.prototype,"chat_group_list_ready",{get:function(){return this.m_bReceivedChatGroupList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VoiceChat",{get:function(){return this.m_VoiceChat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomBBCodeParser",{get:function(){return this.m_ChatRoomBBCodeParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatBBCodeParser",{get:function(){return this.m_FriendChatBBCodeParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NotificationBBCodeParser",{get:function(){return this.m_NotificationBBCodeParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomEffectSettings",{get:function(){return this.m_ChatRoomEffectSettings},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatStore",{get:function(){return this.m_FriendChatStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EmoticonStore",{get:function(){return this.m_EmoticonStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"InviteStore",{get:function(){return this.m_InviteStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GameInviteStore",{get:function(){return this.m_GameInviteStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EmbedStore",{get:function(){return this.m_EmbedStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextFilterStore",{get:function(){return this.m_TextFilterStore},enumerable:!1,configurable:!0}),e.prototype.GetTextFilterStatus=function(){var e=this.m_TextFilterStore.TextFilterPreferences;switch(e.eTextFilterSetting){case 0:return Object(T.d)("#TextFilterStatus_SteamLabOptedOut");case 1:return e.bIgnoreFriends?Object(T.d)("#TextFilterStatus_Enabled_IgnoreFriends"):Object(T.d)("#TextFilterStatus_Enabled");case 2:return e.bIgnoreFriends?Object(T.d)("#TextFilterStatus_EnabledAllowProfanity_IgnoreFriends"):Object(T.d)("#TextFilterStatus_EnabledAllowProfanity");case 3:return Object(T.d)("#TextFilterStatus_Disabled");default:return""}},e.prototype.GetTextFilterSettingsURL=function(){return m.a.STORE_BASE_URL+"account/preferences#CommunityContentPreferences"},Object.defineProperty(e.prototype,"ChatRoomGroupDisplayPrefs",{get:function(){return this.m_ChatRoomGroupDisplayPrefs},enumerable:!1,configurable:!0}),e.prototype.GetActiveVoiceChat=function(){var e=this.m_VoiceChat.GetActiveVoiceChatID();if(""!=e){if(t=this.FindChatRoom_Deprecated(e))return t}else{var t,n=this.m_VoiceChat.GetActiveOneOnOneVoiceChatAccountID();if(0!=n)if(t=this.GetFriendChat(n,!1))return t}},e.prototype.GetActiveVoiceChannelName=function(){var e=this.GetActiveVoiceChat();return null!=e?e.name:""},e.prototype.GetFriendChat=function(e,t){return void 0===t&&(t=!0),e==this.FriendStore.self.accountid?null:this.m_FriendChatStore.GetFriendChat(e,t)},e.prototype.GetChatRoomGroup=function(e){return this.m_mapChatGroups.get(e)},Object.defineProperty(e.prototype,"currentChatRoomGroups",{get:function(){return M.a(this.m_mapChatGroups,(function(e){return e.BIsCurrentUserAMember()}))},enumerable:!1,configurable:!0}),e.prototype.FindChatRoomGroupsMatchingSearch=function(e){return this.currentChatRoomGroups.filter((function(t){return-1!==t.name.toLocaleLowerCase().indexOf(e)}))},Object.defineProperty(e.prototype,"ClanChatRooms",{get:function(){return M.a(this.m_mapChatGroups,(function(e){return e.BIsClanChatRoom()}))},enumerable:!1,configurable:!0}),e.prototype.GetRefCountActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===t&&(t=0),t},e.prototype.IncRefActiveChatRoomGroup=function(e,t){var n=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===n&&(n=0),n+=1,this.m_mapActiveChatGroupsToRefCount.set(e,n),1==n&&t&&this.SendActiveChatRoomGroupsToServer(),n},e.prototype.DecRefActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e),n=void 0!==t&&t>0;if(Object(G.a)(n,"Attempting to DecRef a Chat Group that has no existing references. Doing nothing."),!n)return 0;if((t-=1)<=0){this.m_mapActiveChatGroupsToRefCount.delete(e);var o=this.m_mapChatGroups.get(e);o&&o.UnloadActiveGroupState(),this.SendActiveChatRoomGroupsToServer()}else this.m_mapActiveChatGroupsToRefCount.set(e,t);return t},e.prototype.OnRestorePopupsComplete=function(){this.m_mapActiveChatGroupsToRefCount.size>0&&this.SendActiveChatRoomGroupsToServer()},e.prototype.SendActiveChatRoomGroupsToServer=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(r){switch(r.label){case 0:if(this.m_bSendingActiveGroups)return this.m_bSendActiveGroupsQueued=!0,[2];e=.5,t=function(){return Object(o.b)(n,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.InternalSendActiveChatRoomGroupsToServer()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))},r.label=1;case 1:return[4,t()];case 2:return r.sent()?[3,4]:[4,new Promise((function(t){return setTimeout(t,1e3*e)}))];case 3:return r.sent(),e*=2,[3,1];case 4:return[2]}}))}))},e.prototype.InternalSendActiveChatRoomGroupsToServer=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(t){return[2,new Promise((function(t){var n=[],o=i.b.Init(c.O);e.m_mapActiveChatGroupsToRefCount.forEach((function(t,r){if(Object(G.a)(t>0,"SendActiveChatRoomGroupsToServer found invalid ref count for chat group."),!(t<=0)){o.Body().add_chat_group_ids(r);var i=e.m_mapChatGroups.get(r);i&&i.readyToRender||o.Body().add_chat_groups_data_requested(r),p.f.SettingsStore.BClientHasFeatureOrOnWeb("ServerVirtualizedMemberLists")&&o.Body().set_virtualize_members_threshold(100),i&&i.BIsClanChatRoom()&&n.push(i.GetClanID())}}));var a=function(o){m.a.IN_CLIENT&&SteamClient.WebChat.SetActiveClanChatIDs(n),o&&void 0!==s&&ClearBackgroundTimeout(s),e.m_bSendingActiveGroups=!1,e.m_bSendActiveGroupsQueued?t(!1):t(o)},s=SetBackgroundTimeout((function(){e.m_bSendActiveGroupsQueued=!0,a(!1)}),1e4);e.m_bSendActiveGroupsQueued=!1,e.m_bSendingActiveGroups=!0,c.X.SetSessionActiveChatRoomGroups(e.m_CMInterface.GetServiceTransport(),o).then((function(t){var o=!1;return Object(r.F)((function(){if(1==t.GetEResult()){for(var r=0,i=t.Body().chat_states();r<i.length;r++){var a=i[r];if(l=e.m_mapChatGroups.get(a.header_state().chat_group_id()))try{l.UpdateGroupState(a),l.BIsClanChatRoom()&&-1===n.indexOf(l.GetClanID())&&n.push(l.GetClanID())}catch(e){o=!0,console.error("exception processing group update for group "+l.GetGroupID(),e)}}for(var s=0,c=t.Body().virtualize_members_chat_group_ids();s<c.length;s++){var l,u=c[s];(l=e.m_mapChatGroups.get(u))&&l.SetMemberListVirtualized(!0)}}else o=!0})),!o}),(function(){return!1})).then(a)}))]}))}))},e.prototype.CreateChatRoomGroup=function(e,t,n,o){var r=this;void 0===o&&(o={});var a=o.unBroadcastAccountId,s=i.b.Init(c.e);s.Body().set_name(t);for(var l=0,u=n;l<u.length;l++){var p=u[l];s.Body().add_steamid_invitees(p)}return a&&s.Body().set_watching_broadcast_accountid(a),c.X.CreateChatRoomGroup(this.m_CMInterface.GetServiceTransport(),s).then((function(t){var n=t.GetEResult();if(1!=n)throw n;return r.AddCreatedChatRoomGroup(e,t.Body().chat_group_id(),t.Body().state(),t.Body().user_chat_state()),t.Body().chat_group_id()}))},e.prototype.LeaveChatRoomGroup=function(e,t){var n=this,o=i.b.Init(c.y);return o.Body().set_chat_group_id(t),c.X.LeaveChatRoomGroup(this.m_CMInterface.GetServiceTransport(),o).then((function(e){var o=e.GetEResult();if(1!=o)throw o;n.RemoveChatRoomGroup(t)}))},e.prototype.FindNamelessChatGroupWithFriends=function(e){if(0==e.length)return null;for(var t=e.map((function(e){return new a.a(e).GetAccountID()})),n=0,o=Array.from(this.m_mapChatGroups.values());n<o.length;n++){var r=o[n];if(!r.IsNamedGroupChat()&&r.BRoomContainsJustTheseFriendsAndSelf(t))return r}return null},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_group_chat_count(E.b(Array.from(this.m_mapChatGroups.values()),(function(e){return e.BIsCurrentUserAMember()}))),this.m_ChatRoomGroupDisplayPrefs.FillInChatUsabilityMetrics(e)},e.prototype.GetChatsWithUnreadPriorityMessages=function(){for(var e=[],t=0,n=this.FriendChatStore.GetFriendsWithUnreadMessages(null);t<n.length;t++){var o=n[t];o.has_unread_priority_messages&&e.push(o)}var r=this;return this.m_mapActiveChatGroupsToRefCount.forEach((function(t,n){r.m_mapChatGroups.get(n).GetChatRoomsWithUnreadPriorityMessages(e)})),e},e.prototype.GetChatToActivateForOldestUnread=function(e){var t=this,n=null,o=function(t){return!(!t.has_unread_priority_messages&&0==t.GetVisibilityState(e))&&(!n||!(n.has_unread_priority_messages&&!t.has_unread_priority_messages)&&(!(n.has_unread_priority_messages||!t.has_unread_priority_messages)||(n.m_msTimeActivated<t.m_msTimeActivated||!(n.m_msTimeActivated>t.m_msTimeActivated)&&n.time_last_message<t.time_last_message)))};this.m_mapActiveChatGroupsToRefCount.forEach((function(e,r){for(var i=0,a=t.m_mapChatGroups.get(r).chatRoomList;i<a.length;i++){var s=a[i];o(s)&&(n=s)}}));for(var r=0,i=this.m_FriendChatStore.GetAllChats();r<i.length;r++){var a=i[r];o(a)&&(n=a)}return n},e.prototype.RegisterVirtualizedMemberListView=function(e){this.m_mapVirtualizedMemberListViews.set(e.GetViewID(),e)},e.prototype.UnregisterVirtualizedMemberListView=function(e){e&&(this.m_mapVirtualizedMemberListViews.delete(e.GetViewID()),e.UnregisterFromServer())},Object(o.c)([r.B],e.prototype,"m_bReceivedChatGroupList",void 0),Object(o.c)([p.g],e.prototype,"JoinAndShowChatRoomGroup",null),Object(o.c)([r.k],e.prototype,"AddCreatedChatRoomGroup",null),Object(o.c)([r.k],e.prototype,"AddKnownChatRoomGroup",null),Object(o.c)([r.k],e.prototype,"AddJoinedChatRoomGroup",null),Object(o.c)([r.k],e.prototype,"RemoveChatRoomGroup",null),Object(o.c)([r.n],e.prototype,"currentChatRoomGroups",null),Object(o.c)([r.n],e.prototype,"ClanChatRooms",null),e}()),z=function(e){function t(t,n){var o=e.call(this)||this;return o.m_rgOnChatFrameChangedCallbacks=[],o.m_bScrolledToBottom=!0,o.m_scrollTop=-1,o.m_scrollHeight=-1,o.m_clientHeight=1,o.m_textEntryFocusCallbacks=new w.a,o.m_tabset=t,o.m_chat=n,o.m_tabset&&o.m_chat.AddChatView(o),o.m_strTextEntry="",o.m_fileUploadManager=new R.a(n),o}return Object(o.d)(t,e),t.prototype.GetTabName=function(){return this.m_chat.name},t.prototype.GetUniqueID=function(){return this.m_chat.unique_id},t.prototype.OnTabFocus=function(){this.OnFocus()},t.prototype.InternalOnTabActivate=function(){this.OnActivate()},t.prototype.OnTabDeactivate=function(){this.OnDeactivate()},t.prototype.OnTabClosed=function(){this.OnViewClosed()},t.prototype.IsChatRoom=function(){return this.m_chat instanceof b.a},t.prototype.IsFriendChat=function(){return this.m_chat instanceof O.a},t.prototype.IsVoiceActive=function(){return this.m_chat.BVoiceActive()},t.prototype.GetUnreadMessageCount=function(){return this.m_chat.unread_message_count},t.prototype.IsTabForChat=function(e){return this.m_chat==e},t.prototype.GetChatView=function(){return this},t.prototype.OnViewClosed=function(){this.m_chat.RemoveChatView(this)},Object.defineProperty(t.prototype,"chat",{get:function(){return this.m_chat},enumerable:!1,configurable:!0}),t.prototype.BIsInBrowserContext=function(e){var t=this.m_tabset.GetBrowserContext();return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},t.prototype.GetVisibilityState=function(){if(!this.m_tabset||!this.m_tabset.is_popup_active&&!m.a.IN_MOBILE)return 0;var e=void 0;return this.m_tabset.activeTab&&(e=this.m_tabset.activeTab.GetChatView()),e!=this||!this.m_tabset.is_popup_visible&&!m.a.IN_MOBILE?1:this.m_tabset.is_popup_focused||m.a.IN_MOBILE?this.m_bScrolledToBottom&&!p.f.IdleTracker.BIsUserIdle(60)?4:3:2},Object.defineProperty(t.prototype,"lastScrollHeight",{get:function(){return this.m_scrollHeight},set:function(e){this.m_scrollHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastScrollTop",{get:function(){return this.m_scrollTop},set:function(e){this.m_scrollTop=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastClientHeight",{get:function(){return this.m_clientHeight},set:function(e){this.m_clientHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"is_scrolled_to_bottom",{get:function(){return this.m_bScrolledToBottom},set:function(e){!this.m_bScrolledToBottom&&e&&this.m_chat.OnActivate(),this.m_bScrolledToBottom=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text_entry",{get:function(){return this.m_strTextEntry},set:function(e){this.m_strTextEntry=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"file_upload_manager",{get:function(){return this.m_fileUploadManager},enumerable:!1,configurable:!0}),t.prototype.CheckActivationAndNotifyChat=function(){this.m_bScrolledToBottom&&this.m_chat.OnActivate()},t.prototype.OnActivate=function(){this.CheckActivationAndNotifyChat(),this.FocusTextInput(),this.m_chat.m_msTimeActivated=Date.now()},t.prototype.OnDeactivate=function(){this.m_chat.OnDeactivate()},t.prototype.OnFocus=function(){this.CheckActivationAndNotifyChat()},t.prototype.FocusTextInput=function(){this.m_textEntryFocusCallbacks.Dispatch()},t.prototype.AddOnChatFrameChangedCallback=function(e){this.m_rgOnChatFrameChangedCallbacks.push(e)},t.prototype.RemoveOnChatFrameChangedCallback=function(e){E.c(this.m_rgOnChatFrameChangedCallbacks,e)},t.prototype.OnChatFrameChanged=function(){for(var e=0,t=this.m_rgOnChatFrameChangedCallbacks;e<t.length;e++){(0,t[e])()}},t.prototype.SetFileToUpload=function(e,t){this.m_fileUploadManager.SetImageFileToUpload(e,t)},t.prototype.UploadFile=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.m_fileUploadManager.BeginFileUpload({bSpoiler:e})];case 1:return t.sent(),this.m_fileUploadManager.Reset(),[2]}}))}))},t.prototype.RegisterForTextEntryFocus=function(e){return this.m_textEntryFocusCallbacks.Register(e)},t.prototype.BVoiceActive=function(){return this.m_chat.BVoiceActive()},t.prototype.ConvertMessageToBBCode=function(e){return Object(I.f)(e)},t.prototype.SendChatMessage=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return[2,this.m_chat.SendChatMessage(this.ConvertMessageToBBCode(e))]}))}))},Object(o.c)([r.B],t.prototype,"m_bScrolledToBottom",void 0),t}(l.b),q=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.m_parentGroupView=o,r}return Object(o.d)(t,e),t.prototype.SearchMembers=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return[2,this.m_parentGroupView.SearchMembers(e,t)]}))}))},t.prototype.SearchMembersForMention=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,this.SearchMembers(e,t)];case 1:return n=o.sent(),this.m_parentGroupView.GetGroup().AddMetaMentionsToResults(e,n),[2,n]}}))}))},t.prototype.BIsMemberNameAmbiguous=function(e){return this.m_parentGroupView.BIsMemberNameAmbiguous(e)},t.prototype.ConvertMessageToBBCode=function(e){var t=Object(I.f)(e);return this.m_parentGroupView.ProcessMentions(t)},Object.defineProperty(t.prototype,"virtualizer",{get:function(){return this.m_parentGroupView.GetGroup().BIsMemberListVirtualized()?this.m_parentGroupView.GetVirtualizedMemberListView():null},enumerable:!1,configurable:!0}),t}(z)},"65YP":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("mrSG"),r=n("2vnA"),i=n("XCHq"),a=n("s+DT"),s=function(e){function t(t,n){var o=e.call(this)||this;return o.m_bShowWatchPromptDialog=!1,o.m_steamID=a.a.InitFromAccountID(n),o.m_tabset=t,o.InitInfo(),o}return Object(o.d)(t,e),t.prototype.InitInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=this,[4,t.GetBroadcastWatchStore()];case 1:return e.m_info=n.sent().StartInfo(this.m_steamID.ConvertTo64BitString()),[2]}}))}))},t.GetBroadcastWatchStore=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,"D3Kh"))];case 1:return[2,e.sent().BroadcastWatchStore]}}))}))},t.prototype.GetSteamID=function(){return this.m_steamID},t.prototype.GetTabName=function(){var e=this.m_info&&this.m_info.m_strTitle;return!e&&i.b.bValid?i.b.name:e},t.prototype.GetUniqueID=function(){return"br"+this.m_steamID.GetAccountID()},t.prototype.OnTabFocus=function(){},t.prototype.InternalOnTabActivate=function(){},t.prototype.OnTabDeactivate=function(){},t.prototype.OnTabClosed=function(){var e=this;Object(o.b)(e,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,t.GetBroadcastWatchStore()];case 1:return e.sent().StopInfo(this.m_info),[2]}}))}))},t.prototype.IsVoiceActive=function(){return!1},t.prototype.GetUnreadMessageCount=function(){return 0},t.prototype.IsTabForChat=function(e){return!1},t.prototype.GetChatView=function(){return null},t.prototype.IsBroadcast=function(){return!0},t.prototype.ShowWatchPromptDialog=function(e){this.m_bShowWatchPromptDialog=!0,this.m_watchPromptInitialFriend=e},t.prototype.HideWatchPromptDialog=function(){this.m_bShowWatchPromptDialog=!1,this.m_watchPromptInitialFriend=void 0},Object(o.c)([r.B],t.prototype,"m_info",void 0),Object(o.c)([r.B],t.prototype,"m_bShowWatchPromptDialog",void 0),Object(o.c)([r.B],t.prototype,"m_watchPromptInitialFriend",void 0),Object(o.c)([r.k],t.prototype,"ShowWatchPromptDialog",null),Object(o.c)([r.k],t.prototype,"HideWatchPromptDialog",null),t}(n("3zHc").b)},"7Vyq":function(e,t,n){e.exports={ContextMenuMouseOverlay:"contextmenu_ContextMenuMouseOverlay_3H7og",ContextMenuFocusContainer:"contextmenu_ContextMenuFocusContainer_2thYU",contextMenu:"contextmenu_contextMenu_3_a2Z",ContextMenuPopup:"contextmenu_ContextMenuPopup_1exss",contextMenuContents:"contextmenu_contextMenuContents_1yyTu",contextMenuItem:"contextmenu_contextMenuItem_CBC-y",active:"contextmenu_active_3vYUp",MenuSectionHeader:"contextmenu_MenuSectionHeader_x3Kot",StrongerSeparation:"contextmenu_StrongerSeparation_31Tii",UpperCase:"contextmenu_UpperCase_2T9by",SubMenu:"contextmenu_SubMenu_3BzT1",Label:"contextmenu_Label_1D1Dk",Arrow:"contextmenu_Arrow_KJxKr",PopoutSubMenu:"contextmenu_PopoutSubMenu_29Zea",PopoutSubMenuItems:"contextmenu_PopoutSubMenuItems_1cXx5"}},"7l8a":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("/SYB"),c=n("B7ut"),l=n("1n9R"),u=function(){function e(){}return e.prototype.InitFrom=function(e){this.title=e.title,this.capsule=p(e.capsule),this.tiny_capsule=p(e.tiny_capsule),this.main_capsule=p(e.main_capsule),this.type=e.type,this.price=e.price,this.orig_price=e.orig_price,this.discount_percent=e.discount_percent,this.release=e.release,this.screenshot_list=e.screenshot_list.map(p),this.subid=e.subid,this.button_action=e.button_action,this.app_to_run=e.app_to_run,this.is_free=e.is_free,this.required_age=e.required_age,this.coming_soon=e.coming_soon,this.appid=Number(e.appid),this.full_game_appid=Number(e.full_game_appid),this.tags=e.tags,this.content_descriptors=e.content_descriptors,this.reviews_filtered=e.reviews_filtered,this.reviews_unfiltered=e.reviews_unfiltered,this.available_windows=e.available_windows,this.available_mac=e.available_mac,this.available_linux=e.available_linux,this.microtrailer=p(e.microtrailer),this.microtrailer_mp4=p(e.microtrailer_mp4),this.support_vrhmd=e.support_vrhmd,this.support_vrhmd_only=e.support_vrhmd_only},e.prototype.GetCapsuleDimensions=function(){return{width:460,height:215}},e.prototype.GetMainCapsuleDimensions=function(){return{width:616,height:353}},e.prototype.GetTinyCapsuleDimensions=function(){return{width:231,height:87}},Object.defineProperty(e.prototype,"capsule_link",{get:function(){return Object(c.d)(l.c.STORE_BASE_URL+"app/"+this.appid)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.appid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header_image_url",{get:function(){return this.capsule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formatted_orig_price",{get:function(){return this.orig_price},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formatted_final_price",{get:function(){return this.price},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"purchasePackageId",{get:function(){return this.subid},enumerable:!1,configurable:!0}),Object(o.c)([a.B],e.prototype,"title",void 0),Object(o.c)([a.B],e.prototype,"capsule",void 0),Object(o.c)([a.B],e.prototype,"tiny_capsule",void 0),Object(o.c)([a.B],e.prototype,"main_capsule",void 0),Object(o.c)([a.B],e.prototype,"type",void 0),Object(o.c)([a.B],e.prototype,"price",void 0),Object(o.c)([a.B],e.prototype,"orig_price",void 0),Object(o.c)([a.B],e.prototype,"discount_percent",void 0),Object(o.c)([a.B],e.prototype,"release",void 0),Object(o.c)([a.B],e.prototype,"screenshot_list",void 0),Object(o.c)([a.B],e.prototype,"subid",void 0),Object(o.c)([a.B],e.prototype,"button_action",void 0),Object(o.c)([a.B],e.prototype,"app_to_run",void 0),Object(o.c)([a.B],e.prototype,"is_free",void 0),Object(o.c)([a.B],e.prototype,"required_age",void 0),Object(o.c)([a.B],e.prototype,"coming_soon",void 0),Object(o.c)([a.B],e.prototype,"appid",void 0),Object(o.c)([a.B],e.prototype,"full_game_appid",void 0),Object(o.c)([a.B],e.prototype,"tags",void 0),Object(o.c)([a.B],e.prototype,"content_descriptors",void 0),Object(o.c)([a.B],e.prototype,"reviews_filtered",void 0),Object(o.c)([a.B],e.prototype,"reviews_unfiltered",void 0),Object(o.c)([a.B],e.prototype,"available_windows",void 0),Object(o.c)([a.B],e.prototype,"available_mac",void 0),Object(o.c)([a.B],e.prototype,"available_linux",void 0),Object(o.c)([a.B],e.prototype,"microtrailer",void 0),Object(o.c)([a.B],e.prototype,"microtrailer_mp4",void 0),Object(o.c)([a.B],e.prototype,"support_vrhmd",void 0),Object(o.c)([a.B],e.prototype,"support_vrhmd_only",void 0),e}();function p(e){return e&&!e.startsWith("http")?l.c.STORE_ICON_BASE_URL+e:e}var m=function(e){function t(t){var n=e.call(this)||this;return n.appid=t,n.success=2,n.title="",n.screenshot="",n.age_safe_screenshot=!1,n.creator_list=new Array,n.is_free=!1,n.required_age=!1,n.coming_soon=!1,n.library_asset_setup_complete=!0,n}return Object(o.d)(t,e),t.prototype.InitializeFrom=function(e){this.success=1,this.type=e.type,this.price=e.price,this.discount_percent=e.discount_percent,this.subid=e.subid,this.button_action=e.button_action,this.app_to_run=e.app_to_run,this.is_free=e.is_free,this.required_age=e.required_age,this.coming_soon=e.coming_soon,this.full_game_appid=e.full_game_appid,this.title=e.title,this.release=e.release,this.capsule=e.capsule,this.tiny_capsule=e.tiny_capsule,this.main_capsule=e.main_capsule,this.screenshot=e.screenshot,this.screenshot_list=e.screenshot_list,this.age_safe_screenshot=e.age_safe_screenshot,this.library_asset_setup_complete=e.library_asset_setup_complete,this.item_id=e.item_id,this.icon_url=e.icon_url,this.cover_image_asset_url=e.cover_image_asset_url,this.tags=e.tags,this.content_descriptors=e.content_descriptors,this.available_windows=e.available_windows,this.available_mac=e.available_mac,this.available_linux=e.available_linux,this.microtrailer=e.microtrailer,this.microtrailer_mp4=e.microtrailer_mp4,this.support_vrhmd=e.support_vrhmd,this.support_vrhmd_only=e.support_vrhmd_only,this.languages=e.languages,this.associated_demo_appids=e.associated_demo_appids,this.creator_list=new Array;var t=e.creator_list;if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];this.creator_list.push(r)}this.social=new Array;var i=e.social;if(i)for(var a=0,s=i;a<s.length;a++){var c=s[a];this.social.push(c)}},t.prototype.BHasDemoAppID=function(){return this.associated_demo_appids&&this.associated_demo_appids.length>0},Object(o.c)([a.B],t.prototype,"success",void 0),Object(o.c)([a.B],t.prototype,"release",void 0),Object(o.c)([a.B],t.prototype,"tiny_capsule",void 0),Object(o.c)([a.B],t.prototype,"main_capsule",void 0),Object(o.c)([a.B],t.prototype,"type",void 0),Object(o.c)([a.B],t.prototype,"screenshot",void 0),Object(o.c)([a.B],t.prototype,"age_safe_screenshot",void 0),Object(o.c)([a.B],t.prototype,"library_asset_setup_complete",void 0),Object(o.c)([a.B],t.prototype,"screenshot_list",void 0),Object(o.c)([a.B],t.prototype,"social",void 0),Object(o.c)([a.B],t.prototype,"creator_list",void 0),Object(o.c)([a.B],t.prototype,"item_id",void 0),Object(o.c)([a.B],t.prototype,"icon_url",void 0),Object(o.c)([a.B],t.prototype,"cover_image_asset_url",void 0),Object(o.c)([a.B],t.prototype,"microtrailer",void 0),Object(o.c)([a.B],t.prototype,"microtrailer_mp4",void 0),Object(o.c)([a.B],t.prototype,"support_vrhmd",void 0),Object(o.c)([a.B],t.prototype,"support_vrhmd_only",void 0),Object(o.c)([a.B],t.prototype,"languages",void 0),Object(o.c)([a.B],t.prototype,"associated_demo_appids",void 0),Object(o.c)([a.k],t.prototype,"InitializeFrom",null),t}(u),d=function(){function e(e,t){this.m_bLoaded=!1,this.m_appid=e,this.m_bLoaded=!1,this.m_appStoreData=new m(e),t&&this.InitializeFrom(t)}return e.prototype.InitializeFrom=function(e){this.m_appStoreData.InitializeFrom(e),this.m_bLoaded=!0},e.prototype.GetLoadingPromise=function(){return this.m_loadingPromise},e.prototype.BIsLoaded=function(){return this.m_bLoaded},e.prototype.GetAppStoreData=function(){return this.m_appStoreData},e.prototype.HintLoadBroadcastAppData=function(e){return void 0===e&&(e="steamtv"),Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_loadingPromise?[3,2]:(this.m_loadingPromise=this.InternalLoadBroadcastAppData(e),[4,this.m_loadingPromise]);case 1:t.sent(),t.label=2;case 2:return[2,this.m_loadingPromise]}}))}))},e.prototype.InternalLoadBroadcastAppData=function(e){return void 0===e&&(e="steamtv"),Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_bLoaded)return[3,4];t={appid:this.m_appid,feature:e,cc:l.c.COUNTRY||"US",l:l.c.LANGUAGE,origin:self.origin},n=l.c.STORE_BASE_URL+"broadcast/ajaxgetappinfoforcap",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(n,{params:t})];case 2:return(r=o.sent()).data&&1==r.data.success?(this.InitializeFrom(r.data),[3,4]):(this.m_appStoreData.success=r.data?r.data.success:2,[2,this]);case 3:return a=o.sent(),c=Object(s.a)(a),console.log("InternalLoadBroadcastAppData: calling ajaxgetappinfoforcap for appid "+this.m_appid+" failed with "+c.strErrorMsg,c),[3,4];case 4:return[2,this]}}))}))},Object(o.c)([a.B],e.prototype,"m_bLoaded",void 0),Object(o.c)([a.B],e.prototype,"m_appStoreData",void 0),e}()},"7oej":function(e,t,n){},"7sd/":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return _}));var o=n("mrSG"),r=n("q1tI"),i=n("XaMz"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetArgument=function(e,t){return void 0===t&&(t=!1),!e||t&&void 0===this.props.args[e]?this.props.args[""]:this.props.args[e]},t}(r.Component),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={failedToRender:!1},n}return Object(o.d)(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({failedToRender:!0})},t.prototype.render=function(){if(this.state.failedToRender)return this.props.bbcode;var e=this.props.bbcode;return!0!==this.props.bSkipTrimInput&&(e=e.trim()),this.props.parser.ParseBBCode(e,this.props.context)},t}(r.PureComponent);function c(e,t,n){if(void 0===n&&(n=0),2==t.type){var o=t.text.indexOf("="),r=t.text.indexOf(" ");if(-1!=r&&(-1==o||r<o)&&(o=r),o>0){t.tag=t.text.substr(0,o);var a=t.text.substr(o);t.args=function(e){if(!e||e.length<1)return{};var t={},n="",o="",r=0,a=0;"="==e[0]&&(r=2);var s=!1;for(a++;a<e.length;a++){var c=e[a],l=!0,u=!1;switch(r){case 0:if("="==c)return{};if(" "==c)continue;r=1;break;case 1:"="!=c&&" "!=c||s||(r=" "==c?0:2,l=!1);break;case 2:" "==c?(r=0,l=!1,u=!0):'"'==c?(r=4,l=!1):r=3;break;case 3:case 4:(" "==c&&4!=r&&!s||'"'==c&&4==r&&!s)&&(r=0,l=!1,u=!0)}l&&("\\"!=c||s?(s=!1,1==r?n+=c:3==r||4==r?o+=c:Object(i.a)(!1,"Not expecting to accumulate buffer in state %u",r)):s=!0),u&&(t[n]=o,n="",o="")}0!=r&&(t[n]=o);return t}(a)}else t.args={},t.tag=t.text}e.push(t);var s=new f;return s.type=n,s}function l(e){for(var t=[],n=new f,o=!1,r=!1,i=0;i<e.length;i++){var a=e[i];switch(n.type){case 0:"["==a?(n.type=2,r=!0):(n.type=1,"\\"==a?o=!o:n.text+=a);break;case 2:case 3:"/"==a&&r?(n.type=3,n.text="",r=!1):"["!=a||o?"]"!=a||o?"\\"==a?(n.text+=a,o=!o,r=!1):(n.text+=a,o=!1,r=!1):(r&&n.ConvertMalformedNodeToText(),n=c(t,n),r=!1):(n.ConvertMalformedNodeToText(),n=c(t,n,2),r=!0);break;case 1:"["!=a||o?"\\"==a?(o&&(n.text+=a),o=!o):(n.text+=a,o=!1):(n=c(t,n,2),r=!0)}}return 0!=n.type&&(2!=n.type&&3!=n.type||n.ConvertMalformedNodeToText(),t.push(n)),t}var u=function(){function e(e){this.m_dictComponents=e}return e.prototype.dictComponents=function(){return this.m_dictComponents},e}(),p=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.ParseBBCode=function(e,t){var n=l(e);return this.Parse_NotificationHandlers(n,t)},t.prototype.Parse_NotificationHandlers=function(e,t){for(var n,o=void 0,r=this.dictComponents(),i="",a=0,s=e;a<s.length;a++){var c=s[a];if(2==c.type)o||(o=[]),o.push(c);else if(3==c.type){var l=o&&o.pop();0===o.length&&l&&l.tag==c.text&&r[l.tag]&&(n=l)}else 1==c.type&&(i+=c.text)}if(n)return r[n.tag]({context:t,tagname:n.tag,args:n.args,text:i})},t}(u),m=function(){function e(){this.m_rctElements=[]}return e.prototype.AppendText=function(e,t,n){e.length&&(t?this.m_rctElements.push(r.createElement("span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e},e)):this.m_rctElements.push(e))},e.prototype.AppendNode=function(e,t){this.m_rctElements.push(e)},e.prototype.GetElements=function(e){return this.m_rctElements},e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.AppendText=function(e,t,n){for(var i=e,a=[],s=i.indexOf("\n");-1!==s;s=i.indexOf("\n"))a.push(i.substr(0,s)),a.push(r.createElement("br")),i=i.substr(s+1);i.length&&a.push(i),t?this.m_rctElements.push(r.createElement.apply(r,Object(o.g)(["span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e}],a))):this.m_rctElements.push(e)},t}(m),h=function(e){function t(t,n){void 0===n&&(n=m);var o=e.call(this,t)||this;return o.m_accumulatorType=n,o}return Object(o.d)(t,e),t.prototype.ParseBBCode=function(e,t){if(e.startsWith("[pre]"))return r.createElement(this.dictComponents().pre,null,g(e));if(e.startsWith("[code]"))return r.createElement(this.dictComponents().code,null,g(e));var n=l(e);return this.Parse_BuildReactComponents(n,t)},t.prototype.Parse_BuildReactComponents=function(e,t){var n=this,i=new this.m_accumulatorType,a=void 0,s=this.dictComponents();e.forEach((function(e,c){if(1==e.type)i.AppendText(e.text,!a||0==a.length,t);else if(2==e.type)a||(a=[]),a.push({accumulator:i,node:e}),i=new n.m_accumulatorType;else if(3==e.type){var l=a&&a.pop();if(l&&l.node.tag===e.text&&s.hasOwnProperty(l.node.tag)&&s[l.node.tag]){var u=s[l.node.tag],p=a.map((function(e){return e.node.tag})),m={context:t,parentTags:p,tagname:l.node.tag,args:l.node.args,key:e.tag+"_"+c},d=r.createElement.apply(r,Object(o.g)([u,m],i.GetElements(e)));(i=l.accumulator).AppendNode(d,e)}else if(l){var h=l.accumulator;h.AppendText("["+l.node.text+"]",!1,t),i.GetElements(e).forEach((function(e){return h.AppendNode(e)})),h.AppendText("[/"+e.text+"]",!1,t),i=h}}}));for(var c=function(){var e=a.pop(),n=e.accumulator;n.AppendText("["+e.node.text+"]",!1,t),i.GetElements().forEach((function(e){return n.AppendNode(e)})),i=n};a&&a.length;)c();var l=i.GetElements();return l.length>1?r.createElement.apply(r,Object(o.g)([r.Fragment,null],l)):1==l.length?l[0]:null},t}(u),f=function(){function e(){this.type=0,this.text=""}return e.prototype.ConvertMalformedNodeToText=function(){3==this.type?this.text="[/"+this.text:2==this.type&&(this.text="["+this.text),this.type=1},e}();function _(e){return e.replace(/[\[\\]/g,"\\$&")}function g(e){for(var t="",n=0,o=l(e.trim());n<o.length;n++){var r=o[n];1==r.type&&(t+=r.text)}return t}},"8AUz":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n("mrSG"),r=n("q1tI"),i=n("1VtQ"),a=n("TyAF"),s=n("E7zH"),c=n("QHER"),l=n("H+H8"),u=n.n(l),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_listeners=new s.c,t.m_bNoSpace=!1,t.state={x:void 0,y:void 0,hoverPositionReady:!1},t}return Object(o.d)(t,e),t.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},t.prototype.componentDidMount=function(){this.m_listeners.AddEventListener(window,"blur",this.OnWindowBlur)},t.prototype.componentDidUpdate=function(){this.positionHover()},t.prototype.componentWillUnmount=function(){this.m_listeners.Unregister()},t.prototype.OnWindowBlur=function(e){this.props.onWindowBlur&&this.props.onWindowBlur(e)},t.prototype.render=function(){var e=this.props,t=(e.target,e.visibilityObserver),n=e.className,i=e.style,a=e.bEnablePointerEvents,s=(e.direction,e.nBodyAlignment,e.nBodyDistance,e.nAllowOffscreenPx,e.nMaxLateralMoveOnScreen,e.children),l=(e.onNoSpace,e.onWindowBlur,Object(o.f)(e,["target","visibilityObserver","className","style","bEnablePointerEvents","direction","nBodyAlignment","nBodyDistance","nAllowOffscreenPx","nMaxLateralMoveOnScreen","children","onNoSpace","onWindowBlur"])),p=Object.assign({left:this.state.x,top:this.state.y},i),m=!t||t.visible;return r.createElement("div",Object(o.a)({},l,{className:Object(c.a)(n,u.a.HoverPosition,m&&this.state.hoverPositionReady&&u.a.Ready,this.m_bNoSpace&&u.a.NoSpace,a&&u.a.EnablePointerEvents),style:p,ref:this.bindHover}),s)},t.prototype.positionHover=function(){var e,t=this.m_elHover,n=this.props.target;if(t&&n&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var o=n.ownerDocument.defaultView;if(o&&!o.closed){var r=t.querySelector(".hover_arrow.left"),i=t.querySelector(".hover_arrow.right"),a=t.querySelector(".hover_arrow.top"),s=t.querySelector(".hover_arrow.bottom"),c=n.getBoundingClientRect(),l=t.getBoundingClientRect(),u="overlay"==this.props.direction||"overlay-center"==this.props.direction;r&&r.setAttribute("style","display: none;"),i&&i.setAttribute("style","display: none;"),a&&a.setAttribute("style","display: none;"),s&&s.setAttribute("style","display: none;");var p=this.props.direction,d=m(p,this.props.nBodyAlignment,this.props.nBodyDistance,c,l,o.innerWidth,o.innerHeight),h=d.nLeft,f=d.nTop,_=d.nOverflow,g=d.nLateralOverflow;if(_>this.props.nAllowOffscreenPx&&!u){var b=function(e){switch(e){case"right":return"left";case"left":return"right";case"bottom":return"top";case"top":return"bottom";case"overlay":return"overlay";case"overlay-center":return"overlay-center"}}(this.props.direction),v=m(b,this.props.nBodyAlignment,this.props.nBodyDistance,c,l,o.innerWidth,o.innerHeight),y=v.nLeft,S=v.nTop,C=v.nOverflow,O=v.nLateralOverflow;if(C<_&&(p=b,h=y,f=S,_=C,g=O),_>this.props.nAllowOffscreenPx)return t.setAttribute("style","display: none;"),this.m_bNoSpace=!0,void(this.props.onNoSpace&&this.props.onNoSpace())}0===this.props.nMaxLateralMoveOnScreen||u||(e=function(e,t,n,o,r){var i=Math.max(t[0],t[1]);void 0!==e&&(i=Math.min(e,i));i=Math.max(0,i);var a=t[0]>t[1]?i:-i;"left"===n||"right"===n?o+=a:r+=a;return[o,r]}(this.props.nMaxLateralMoveOnScreen,g,p,f,h),f=e[0],h=e[1]);var I=null;switch(p){case"left":I=i;break;case"right":I=r;break;case"top":I=s;break;case"bottom":I=a}I&&I.setAttribute("style",""),h!=this.state.x&&this.setState({x:h}),f!=this.state.y&&this.setState({y:f}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},t.defaultProps={direction:"right",nBodyAlignment:.5,nAllowOffscreenPx:10,nBodyDistance:8,nMaxLateralMoveOnScreen:void 0},Object(o.c)([i.a],t.prototype,"bindHover",null),Object(o.c)([i.a],t.prototype,"OnWindowBlur",null),t=Object(o.c)([a.a],t)}(r.Component);function m(e,t,n,o,r,i,a){var s,c,l,u,p=i,m=a;switch(e){case"right":s=o.right+n,c=d(o.top,o.height,r.height,t),l=Math.max(0,s+r.width-p),u=[Math.max(0,0-c),Math.max(0,c+r.height-m)];break;case"left":s=o.left-n-r.width,c=d(o.top,o.height,r.height,t),l=Math.max(0,0-s),u=[Math.max(0,0-c),Math.max(0,c+r.height-m)];break;case"bottom":s=d(o.left,o.width,r.width,t),c=o.bottom+n,l=Math.max(0,c+r.height-m),u=[Math.max(0,0-s),Math.max(0,s+r.width-p)];break;case"top":s=d(o.left,o.width,r.width,t),c=o.top-n-r.height,l=Math.max(0,0-c),u=[Math.max(0,0-s),Math.max(0,s+r.width-p)];break;case"overlay":s=o.left,c=o.top,l=0,u=[0,0];break;case"overlay-center":s=o.left+.5*o.width-.5*r.width,c=o.top+.5*o.height-.5*r.height,l=0,u=[0,0]}return{nLeft:s,nTop:c,nOverflow:l,nLateralOverflow:u}}function d(e,t,n,o){return Math.max(0,Math.min(1,o))*(t-n)+e}},"8JTq":function(e,t,n){"use strict";function o(e,t){return e.m_unPID==t.m_unPID&&e.m_nBrowserID==t.m_nBrowserID}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var r={m_unPID:0,m_nBrowserID:-1}},"8o0Y":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var o=n("mrSG"),r=n("q1tI"),i=n("/IDK"),a=n("EGkk"),s=n("G+3Z"),c=n("2vnA"),l=function(){function e(){}return e.GetBrowserInfoForPopup=function(e){return null},e.prototype.SetTakeFocus=function(e){this.m_fnTakeFocus=e},e}();function u(e,t,n){var o,r=void 0,i=void 0,a=t;if(a.preventDefault&&a.stopPropagation){if(a.shiftKey)return null;a.preventDefault(),a.stopPropagation(),o=a.currentTarget,r=a.clientX,i=a.clientY}else o=t;var s=new d(e,o,r,i,n);return s.Show(),s}function p(e,t,n,o){var r=new d(e,t,n,o,{bForcePopup:!0,bScreenCoordinates:!0});return r.Show(),r}var m=function(e){function t(t){var n=e.call(this)||this;return n.m_bVisible=!1,n.m_elSubmenuItem=null,n.m_timerHideSubMenu=0,n.m_ownerWindow=t,n}return Object(o.d)(t,e),t.prototype.Init=function(e,t){(e.options.bForcePopup||this.m_ownerWindow.innerWidth)<400&&this.m_ownerWindow.SteamClient&&this.m_ownerWindow.SteamClient.Window?this.m_popupContextMenu=new a.a(e,t,l.GetBrowserInfoForPopup(this.m_ownerWindow)):(this.m_embeddedElementInstance=Object(s.b)(this.m_ownerWindow.document),this.m_rctElement=r.createElement(a.g,e,t))},t.prototype.SetOnHideCallback=function(e){this.m_fnOnHideCallback=e},t.prototype.Show=function(){this.m_rctElement?this.m_embeddedElementInstance.Show(this.m_rctElement):this.m_popupContextMenu.Show(),this.m_bVisible=!0},t.prototype.Hide=function(){this.InternalHide()},t.prototype.HideIfNotInFocus=function(){this.BHasFocus()||this.BIsFocusInChildHierarchy()||this.Hide()},t.prototype.InternalHide=function(){this.m_bVisible&&(this.m_bVisible=!1,this.InternalHideSubMenu(),this.m_fnOnHideCallback&&this.m_fnOnHideCallback(),this.m_embeddedElementInstance?this.m_embeddedElementInstance.Hide(300):this.m_popupContextMenu.Close())},Object.defineProperty(t.prototype,"visible",{get:function(){return this.m_bVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.m_options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"owner_window",{get:function(){return this.m_ownerWindow},enumerable:!1,configurable:!0}),t.prototype.ShowSubMenu=function(e,t){return this.m_elSubmenuItem==e?(this.CancelHideSubMenuTimer(),this.m_submenu.TakeFocus(),null):(this.InternalHideSubMenu(),this.m_elSubmenuItem=e,this.m_submenu=new h(this,t(),e),this.m_submenu.Show(),this.m_submenu)},t.prototype.CancelHideSubMenuTimer=function(){this.m_timerHideSubMenu>0&&(clearTimeout(this.m_timerHideSubMenu),this.m_timerHideSubMenu=0)},t.prototype.HideSubMenu=function(){var e=this;if(this.m_submenu){if(!(this.m_timerHideSubMenu>0)){this.m_timerHideSubMenu=window.setTimeout((function(){e.InternalHideSubMenu(),e.m_timerHideSubMenu=0}),150)}}else this.CancelHideSubMenuTimer()},t.prototype.InternalHideSubMenu=function(){this.CancelHideSubMenuTimer(),this.m_submenu&&(this.BIsFocusInChildHierarchy()&&this.TakeFocus(),this.m_elSubmenuItem=null,this.m_submenu.InternalHide(),this.m_submenu=null)},t.prototype.TakeFocus=function(){this.m_popupContextMenu&&this.m_popupContextMenu.Focus(),this.m_fnTakeFocus&&this.m_fnTakeFocus()},t.prototype.BInternalElementInParentHierarchy=function(e){return this.m_parentInstance&&(this.m_parentInstance.BIsChildElement(e)||this.m_parentInstance.BInternalElementInParentHierarchy(e))},t.prototype.BInternalElementInChildHierarchy=function(e){return this.m_submenu&&(this.m_submenu.BIsChildElement(e)||this.m_submenu.BInternalElementInChildHierarchy(e))},t.prototype.BIsChildElement=function(e){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(e):i.e(this.m_popupContextMenu.root_element,e)},t.prototype.BHasFocus=function(){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(this.m_ownerWindow.document.activeElement):this.m_popupContextMenu.focused},t.prototype.BIsFocusInChildHierarchy=function(){return this.m_submenu&&(this.m_submenu.BHasFocus()||this.m_submenu.BIsFocusInChildHierarchy())},t.prototype.BIsElementInMenuHierarchy=function(e){return this.BInternalElementInParentHierarchy(e)||this.BInternalElementInChildHierarchy(e)},t.prototype.BIsSubMenuVisible=function(){return!!this.m_submenu},Object(o.c)([c.B],t.prototype,"m_bVisible",void 0),t}(l),d=function(e){function t(n,o,r,i,a){var s=e.call(this,o.ownerDocument.defaultView)||this;t.sm_iActiveContextMenuInstance&&t.sm_iActiveContextMenuInstance.Hide(),t.sm_iActiveContextMenuInstance=s,s.m_options=a||{};var c={element:o,clientX:r,clientY:i,instance:s,options:s.m_options,fnOnMenuItemSelected:function(){s.Hide()}};return s.Init(c,n),s}return Object(o.d)(t,e),t.prototype.Show=function(){this.m_options.bDisableMouseOverlay||(this.m_embeddedElementInstanceOverlay=Object(s.b)(this.m_ownerWindow.document),this.m_embeddedElementInstanceOverlay.Show(r.createElement(a.f))),e.prototype.Show.call(this)},t.prototype.Hide=function(){this.m_embeddedElementInstanceOverlay&&this.m_embeddedElementInstanceOverlay.Hide(0),e.prototype.Hide.call(this)},t}(m),h=function(e){function t(t,n,o){var r=e.call(this,o.ownerDocument.defaultView)||this;r.m_parentInstance=t,r.m_options={bOverlapVertical:!0,bUseWebStyles:t.options.bUseWebStyles,strClassName:t.options.strClassName,bFitToWindow:t.options.bFitToWindow,bShiftToFitWindow:t.options.bShiftToFitWindow};var i={element:o,clientX:null,clientY:null,instance:r,options:r.m_options,fnOnMenuItemSelected:function(){r.Hide()},bSubmenu:!0};return r.Init(i,n),r}return Object(o.d)(t,e),t.prototype.Hide=function(){var e=this;this.m_popupContextMenu?window.setTimeout((function(){e.m_parentInstance.HideIfNotInFocus()}),10):this.m_parentInstance.Hide()},t}(m)},"9Cmb":function(e,t,n){"use strict";function o(e,t){return e<t?-1:e>t?1:0}function r(e){return e>=55356&&e<=57343||e>=8205&&e<=11093||12953==e||12349==e||12336==e||65039==e||12951==e||169==e||e>=48&&e<=57||35==e||42==e||10==e||174==e}function i(e){for(var t=!1,n=!1,o=!0,i=0;i<e.length;i++){var a=e.charCodeAt(i);if(o&&a>=48&&a<=57||35==a||42==a||10==a?n=!0:r(a)&&(n=!0,o=!1),n&&0==i)t=!0,n=!1;else if(n&&t)t=!0,n=!1;else if(!n)return t=!1,!1;if(i>20)return!1}return!o&&t}function a(e){var t=e.charCodeAt(0);return t>=65&&t<=90}function s(e){if(e.length<=2)return e;for(var t=e.charAt(1),n=a(t),o=2;o<e.length;o++){var r=e.charAt(o);if(n||!a(r)){if(" "==r){(r=e.charAt(o+1)).length>0&&(t=r);break}}else n=!0,t=r}return e.charAt(0)+t}function c(e){return e?DOMParser?(new DOMParser).parseFromString(e,"text/html").documentElement.textContent:e:""}function l(e,t){return void 0===t&&(t=""),e.replace(/\bhttps?:\/\/\S+/gi,t)}function u(e,t,n){void 0===n&&(n=!0);var o=e.trim();if((o=o.replace(n?/\s+/g:/[ \t]+/g," ")).length>t){var r=(o=o.substring(0,t)).replace(/^(.*([.!?])) .*$/,"$1"),i=r.length;(i<.6*t||i==t)&&(r=o.replace(/ [^ ]*$/,"...")),o=n?r.replace(/(\r\n|\n|\r)/gm,""):r}return o}function p(e){if(e.startsWith("[emoticon")){var t=e.match(/^(?:\[emoticon\][^\[]+\[\/emoticon\]\s*)+$/);if(t&&t.length){var n=e.match(/\[emoticon\][^\[]+\[\/emoticon\]/g);return n&&n.length<=6}}return!1}function m(e){return e.length<=1?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)}n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return m}))},"9Eit":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("mrSG");function r(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&Object.keys(e).every((function(t){return function(e){return!(!e||"object"!=typeof e||!Array.isArray(e))&&e.every(i)}(e[t])}))}function i(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;var t=e;return"number"==typeof t.timestamp&&("string"==typeof t.message&&(void 0===t.eError||"number"==typeof t.eError))}var a=new(function(){function e(){this.m_bInitialized=!1}return e.prototype.Init=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_bInitialized)return[2];this.m_storage=e,this.m_strStorageKey="InflightMessageQueue_"+t,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.GetObject(this.m_strStorageKey)];case 2:return(n=o.sent())?r(n)?this.m_queues=n:(console.warn("Malformed "+this.m_strStorageKey+" found in storage. Resetting."),this.m_queues={},this.WriteToStorage()):this.m_queues={},[3,4];case 3:return i=o.sent(),console.warn("Error while parsing stored message queues. Resetting.",i),this.m_queues={},this.WriteToStorage(),[3,4];case 4:return this.m_bInitialized=!0,[2]}}))}))},e.prototype.Update=function(e,t){0===t.length?delete this.m_queues[e]:this.m_queues[e]=t,this.WriteToStorage()},e.prototype.WriteToStorage=function(){Object.keys(this.m_queues).length>0?this.m_storage.StoreObject(this.m_strStorageKey,this.m_queues):this.m_storage.RemoveObject(this.m_strStorageKey)},e.prototype.Get=function(e){return this.m_queues[e]||[]},e}()),s=function(){function e(e){this.m_id=e,this.InitFromStorage()}return e.prototype.InitFromStorage=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return e=this,[4,a.Get(this.m_id)];case 1:return e.m_queue=t.sent(),[2]}}))}))},e.prototype.Add=function(e){var t={message:e,timestamp:Date.now()};return this.m_queue.push(t),this.UpdateStoredQueue(),this.GetItemID(t)},Object.defineProperty(e.prototype,"queued_messages",{get:function(){var e=this;return this.m_queue.map((function(t){return Object(o.a)(Object(o.a)({},t),{id:e.GetItemID(t)})}))},enumerable:!1,configurable:!0}),e.prototype.RemoveItem=function(e){var t=this.GetItemIndex(e);-1!==t?(this.m_queue.splice(t,1),this.UpdateStoredQueue()):console.warn("Could not find item to remove from send queue")},e.prototype.UpdateStoredQueue=function(){a.Update(this.m_id,this.m_queue)},e.prototype.GetItemID=function(e){return e.message.slice(0,10)+"_"+e.timestamp},e.prototype.GetItemIndex=function(e){var t=this;return this.m_queue.findIndex((function(n){return t.GetItemID(n)===e}))},e.prototype.SetItemFailed=function(e,t){var n=this.GetItemIndex(e);-1!==n?(this.m_queue[n].eError=t,this.UpdateStoredQueue()):console.warn("Could not find item to update from send queue")},e}()},"9PRf":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("mrSG"),r=n("q1tI"),i=n("TyAF"),a=n("QHER"),s=n("F2OU"),c=n.n(s),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),Object.defineProperty(t,"hoverClass",{get:function(){return c.a.hoverParent},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.persona,n=e.animating,i=e.className,s=e.size,l=e.dim,u=Object(o.f)(e,["persona","animating","className","size","dim"]),p="";return"medium"==s?p=c.a.Medium:"large"==s&&(p=c.a.Large),r.createElement("div",Object(o.a)({className:Object(a.a)(c.a.SnoozeContainer,t.online_state,i,n&&c.a.animating,p,l&&c.a.Dim)},u),r.createElement("div",{"data-text":"Z",className:Object(a.a)(c.a.SnoozeZ,c.a.Z1)},"Z"),r.createElement("div",{"data-text":"Z",className:Object(a.a)(c.a.SnoozeZ,c.a.Z2)},"Z"),r.createElement("div",{"data-text":"Z",className:Object(a.a)(c.a.SnoozeZ,c.a.Z3)},"Z"))},t=Object(o.c)([i.a],t)}(r.Component)},AAGn:function(e,t,n){e.exports={ChatRoomContextNoPermission:"chatroommenu_ChatRoomContextNoPermission_3HB3b",SVGIcon_Lock:"chatroommenu_SVGIcon_Lock_2mfz6"}},Au4U:function(e,t,n){e.exports={BodyNoScroll:"modals_BodyNoScroll_37Qxr",BodyNoScrollDialog:"modals_BodyNoScrollDialog_2E4Pq",OverlayModal:"modals_OverlayModal_2n8Ob"}},B7ut:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c}));var o=n("1n9R");function r(e){var t=new RegExp("^(steam://openurl(_external)?/)?((f|ht)tps?://)?([^@/?#]*@)?([^/#?]+)","im"),n=e.match(t);return n&&n.length>5?n[6].toString():e}function i(e){var t=r(e);return t.startsWith("www.")&&(t=t.slice(4)),t}function a(e){var t=document.createElement("a");return t.href=e,t.hostname.indexOf("xn--")>=0?t.href:e}function s(e){return"http:"!==e.substr(0,5)||1!=o.c.EUNIVERSE||"http:"==(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/http:\/\/media.steampowered.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/cdn.akamai.steamstatic.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/cdn.edgecast.steamstatic.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/cdn.dota2.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/storefront.steampowered.com\/v\/gfx\//g,o.c.MEDIA_CDN_URL+"steam/")).replace(/http:\/\/cdn.steamcommunity.com\//g,o.c.COMMUNITY_CDN_URL)).replace(/http:\/\/community.akamai.steamstatic.com\//g,o.c.COMMUNITY_CDN_URL)).replace(/http:\/\/community.edgecast.steamstatic.com\//g,o.c.COMMUNITY_CDN_URL)).substr(0,5)&&(e="https:"+e.substr(5)),e}function c(e){return o.c.SNR&&o.c.SNR.length>0?e+(e.indexOf("?")>=0?"&":"?")+"snr="+o.c.SNR:e}},CKJp:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("1n9R"),r=n("yovy"),i=n("XaMz"),a=120,s=function(){function e(e){this.m_bInitialized=!1,this.m_unAppID=e}return Object.defineProperty(e.prototype,"appid",{get:function(){return this.m_unAppID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_valid",{get:function(){return this.m_bInitialized&&!!this.m_strName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header_image_url",{get:function(){return o.c.MEDIA_CDN_URL+"steam/apps/"+this.m_unAppID+"/header.jpg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return this.BuildAppURL(this.m_strIconURL,"061818254b2c99ac49e6626adb128ed1282a392f")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo_url",{get:function(){return this.BuildAppURL(this.m_strLogoURL,"338200c5d6c4d9bdcf6632642a2aeb591fb8a5c2.gif")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time_updated_from_server",{get:function(){return this.m_dtUpdatedFromServer},enumerable:!1,configurable:!0}),e.prototype.BuildAppURL=function(e,t){return e?o.c.MEDIA_CDN_COMMUNITY_URL+"images/apps/"+this.appid+"/"+e+".jpg":Object(r.a)(t)},e.prototype.DeserializeFromMessage=function(e){this.m_bInitialized=!0,this.m_strName=e.name(),this.m_strIconURL=e.icon(),this.m_strLogoURL=e.logo(),this.m_dtUpdatedFromServer=new Date},e.prototype.DeserializeFromAppOverview=function(e){e.logo_hash()&&1073741824!=e.app_type()?(this.m_bInitialized=!0,this.m_strName=e.display_name(),this.m_strIconURL=e.icon_hash(),this.m_strLogoURL=e.logo_hash(),this.m_dtUpdatedFromServer=new Date):this.m_bInitialized=!1},e.prototype.DeserializeFromCacheObject=function(e){try{this.m_strName=e.strName,this.m_strIconURL=e.strIconURL,this.m_strLogoURL=e.strLogoURL,this.m_dtUpdatedFromServer=new Date(e.strUpdatedFromServer),this.m_bInitialized=!0}catch(e){}},e.prototype.SerializeToCacheObject=function(){return Object(i.a)(this.m_bInitialized,"Attempting to serialize an uninitialized AppInfo object for caching!"),this.m_bInitialized?{strName:this.m_strName,strIconURL:this.m_strIconURL,strLogoURL:this.m_strLogoURL,strUpdatedFromServer:this.m_dtUpdatedFromServer.toJSON()}:null},e}()},Cebd:function(e,t,n){e.exports={PersonaStatusIcon:"personastatusicons_PersonaStatusIcon_2rP7f",MobilePhoneIcon:"personastatusicons_MobilePhoneIcon_2ZlAW"}},D3Kh:function(e,t,n){"use strict";n.r(t),n.d(t,"EBroadcastWatchState",(function(){return K})),n.d(t,"CBroadcastInfo",(function(){return Z})),n.d(t,"CBroadcastWatchStore",(function(){return ee})),n.d(t,"ETimelineRange",(function(){return Q})),n.d(t,"CBroadcastVideo",(function(){return te})),n.d(t,"BroadcastWatchStore",(function(){return ne}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("UqDm"),c=n("XaMz"),l=n("E7zH"),u=n("oh5H"),p=n("/7KC"),m=n("1VtQ"),d=n("1n9R"),h=n("MsQV"),f=n("OTLo"),_=n("oZT8"),g=n("mh12"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(Error),v=function(e){function t(t){var n=e.call(this)||this;return n.m_appid=t||0,n}return Object(o.d)(t,e),t.prototype.GetAppID=function(){return this.m_appid},t.prototype.parseColor=function(e){if("string"!=typeof e||!e.match(/^#[0-9a-fA-F]{6}$/))throw new b("expected color string");return[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)]},t.prototype.parseString=function(e){if("string"==typeof e)return e;throw new b("expected string")},t.prototype.parseNumber=function(e){if("number"==typeof e)return e;throw new b("expected number")},t.prototype.parseDate=function(e){if("number"==typeof e)return new Date(e);throw new b("expected timestamp")},t.prototype.parseArray=function(e,t){var n=[];if("object"!=typeof e||!Array.isArray(e))throw new b("expected array");for(var o=e.length,r=0;r<o;++r)try{n.push(t(e[r]))}catch(e){throw e.message+="\n...while parsing array element "+r,e}return n},t.prototype.parseDict=function(e,t){var n=new Map;if("object"!=typeof e||Array.isArray(e))throw new b("expected object");for(var o in e)try{n.set(o,t(e[o]))}catch(e){throw e.message+="\n...while parsing dictionary element "+o,e}return n},t.prototype.parseBracket=function(e){var t={name:this.parseString(e.name),start:this.parseDate(e.start),color:[255,0,255]};return"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"end"in e&&(t.end=this.parseDate(e.end)),"color"in e&&(t.color=this.parseColor(e.color)),t},t.prototype.parseMarker=function(e){var t={time:this.parseDate(e.time),color:[0,255,255]};return"name"in e&&(t.name=this.parseString(e.name)),"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"color"in e&&(t.color=this.parseColor(e.color)),t},t.prototype.parseSoundTrack=function(e){var t={};return"song_title"in e&&(t.song_title=this.parseString(e.song_title)),"appid"in e&&(t.appid=this.parseNumber(e.appid)),"song_index"in e&&(t.song_index=this.parseNumber(e.song_index)),t},t.prototype.parseBroadcastGameData=function(e){var t={appid:0,brackets:[],markers:[]};return"appid"in e&&(t.appid=this.parseNumber(e.appid)),"brackets"in e&&(t.brackets=this.parseArray(e.brackets,this.parseBracket.bind(this))),"markers"in e&&(t.markers=this.parseArray(e.markers,this.parseMarker.bind(this))),"soundtrack"in e&&(t.soundtrack=this.parseSoundTrack(e.soundtrack)),t},t.prototype.convertTime=function(e,t){return e-t/1e3},t.prototype.LocalizeTokenIfPossible=function(e,t){return f.a.Localize(this.m_appid,e,t)},t.prototype.UpdateMarkers=function(e,t){for(var n=[],o=[],r=0,i=e;r<i.length;r++){var a=i[r];a.persistent?(o.length>0&&(o[o.length-1].nTimeEnd=this.convertTime(a.Timestamp,t)),a.name.length>0&&o.push({strTemplateName:a.name,nTimeStart:this.convertTime(a.Timestamp,t),nTimeEnd:-1,color:Object(m.b)(a.color_r,a.color_g,a.color_b)})):n.push({strTemplateName:a.name,nTime:this.convertTime(a.Timestamp,t),color:Object(m.b)(a.color_r,a.color_g,a.color_b)})}return{rgMarkers:n,rgSegments:o}},t.prototype.UpdateRegions=function(e){for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n];t.push({strTemplateName:r.name,min:{x:r.min_x,y:r.min_y},max:{x:r.max_x,y:r.max_y},behavior:r.behavior})}return t},t.prototype.UpdateSoundtrack=function(e,t){var n=this.parseSoundTrack(t),o=_.c.GetPlayReadyStream();o&&o.steamid==e&&(n.song_title&&o.gamedata_subtitle!=n.song_title&&(o.gamedata_subtitle=n.song_title),o.appid!=n.appid&&(o.appid=n.appid,g.a.LoadAppLinkInfo([o.appid])))},t}(h.b),y=n("Y3w+");function S(e,t){var n=e.getElementsByTagName("MPD");return n&&1==n.length?n[0]:null}function C(e,t){for(var n=0;n<e.children.length;n++){var o=e.children[n];if(o.tagName==t)return o}return null}function O(e,t){var n=e.getAttribute(t);if(!n)return null;var o=new Date(n);return"[object Date]"===Object.prototype.toString.call(o)?o:null}function I(e,t){var n=e.getAttribute(t);if(!n)return null;var o=0,r=n.match(/(\d*)H/);return r&&(o+=60*parseFloat(r[1])*60),(r=n.match(/(\d*)M/))&&(o+=60*parseFloat(r[1])),(r=n.match(/(\d*\.?\d*)S/))&&(o+=parseFloat(r[1])),o}function E(e,t){var n=e.getAttribute(t);return n?"true"==(n=n.toLowerCase())||"false"!=n&&null:null}function w(e,t){var n=e.getAttribute(t);return n?parseInt(n):null}function M(e,t){var n=e.getAttribute(t);return n||""}function D(e,t,n){return e=(e=e.replace("$RepresentationID$",t)).replace("$Number$",n.toString())}function T(e){return 0==e.rgRoles.length||e.rgRoles.findIndex((function(e){return"main"==e}))>=0}function j(e){return e?1e3==e.segmentTemplate.nTimeScale?e.segmentTemplate.nDuration:e.segmentTemplate.nDuration/e.segmentTemplate.nTimeScale*1e3:0}function G(e,t){var n=j(e);return Math.floor(t/n)+1}var R,k=function(){function e(){this.m_nMinBufferTime=0,this.m_dtAvailabilityStartTime=null,this.m_dtPublishTime=null,this.m_nMinimumUpdatePeriod=0,this.m_nTimeShiftBufferDepth=0,this.m_dtMediaPresentationDuration=null,this.m_strBaseURL="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_rgPeriods=null,this.m_tsLiveContentStart=0}return e.prototype.GetType=function(){return this.m_strType},e.prototype.GetMinimumUpdatePeriod=function(){return this.m_nMinimumUpdatePeriod},e.prototype.GetAvailabilityStartTime=function(){return this.m_dtAvailabilityStartTime},e.prototype.GetPeriods=function(){return this.m_rgPeriods},e.prototype.GetBaseURL=function(){return this.m_strBaseURL},e.prototype.GetTimeShiftBufferDepth=function(){return this.m_nTimeShiftBufferDepth},e.prototype.GetMinBufferTime=function(){return this.m_nMinBufferTime},e.prototype.IsLiveContent=function(){return"dynamic"==this.GetType()},e.prototype.GetAdaptationByTrackID=function(e){if(!this.m_rgPeriods||0==this.m_rgPeriods.length)return null;for(var t=0,n=this.m_rgPeriods[0].rgAdaptationSets;t<n.length;t++){var o=n[t];if(e==o.strID)return o}return null},e.prototype.GetVideoAdaption=function(){for(var e=0,t=this.m_rgPeriods[0].rgAdaptationSets;e<t.length;e++){var n=t[e];if(n.bContainsVideo)return n}return null},e.prototype.GetStartTime=function(){return!this.IsLiveContent()&&this.m_rgPeriods.length>0?this.m_rgPeriods[0].nStart:0},e.prototype.GetEndTime=function(){return!this.IsLiveContent()&&this.m_rgPeriods.length>0?this.GetStartTime()+this.m_rgPeriods[0].nDuration:Number.MAX_VALUE},e.prototype.GetLowestRepresentation=function(e){var t=this.GetAdaptationByTrackID(e);if(!t)return null;for(var n=t.rgRepresentations[0],o=0,r=t.rgRepresentations;o<r.length;o++){var i=r[o];i.nBandwidth<n.nBandwidth&&(n=i)}return n},e.prototype.GetStatsLink=function(){return this.m_strStatsLink},e.prototype.GetStalledLink=function(){return this.m_strStalledLink},e.prototype.GetEventLink=function(){return this.m_strEventLogLink},e.prototype.StartLiveContentNow=function(e){this.m_tsLiveContentStart=performance.now()-e},e.prototype.GetDurationSinceStarted=function(){return performance.now()-this.m_tsLiveContentStart},e.prototype.ParseRepresentation=function(e,t){var n=t,o={strID:M(e,"id"),strMimeType:M(e,"mimeType"),strCodecs:M(e,"codecs"),nBandwidth:w(e,"bandwidth")};if(n.bContainsVideo){if(o.nWidth=w(e,"width"),o.nHeight=w(e,"height"),o.nFrameRate=w(e,"frameRate"),!(o.strID&&o.strMimeType&&o.strCodecs&&o.nBandwidth))return Object(y.c)("MPD - Representation Video Data Missing"),null}else if(n.bContainsAudio){o.nAudioSamplingRate=w(e,"audioSamplingRate");var r=C(e,"AudioChannelConfiguration");if(r&&(o.nAudioChannels=w(r,"value")),o.nAudioChannels||(o.nAudioChannels=2),!(o.strID&&o.strMimeType&&o.strCodecs&&o.nAudioSamplingRate&&o.nAudioChannels))return Object(y.c)("MPD - Representation Audio Data Missing"),null}return o},e.prototype.BParse=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=S(t);if(!n)return!1;var o=n.getAttribute("type");if(this.m_nMinBufferTime=I(n,"minBufferTime"),"dynamic"==o){if(this.m_strType="dynamic",this.m_dtAvailabilityStartTime=O(n,"availabilityStartTime"),this.m_dtPublishTime=O(n,"publishTime"),this.m_nMinimumUpdatePeriod=I(n,"minimumUpdatePeriod"),this.m_nTimeShiftBufferDepth=I(n,"timeShiftBufferDepth"),!(this.m_dtAvailabilityStartTime&&this.m_dtPublishTime&&this.m_nMinimumUpdatePeriod&&this.m_nMinBufferTime&&this.m_nTimeShiftBufferDepth))return!1}else{if("static"!=o)return Object(y.c)("MPD - Unknown type"),!1;if(this.m_strType="static",this.m_dtMediaPresentationDuration=O(n,"mediaPresentationDuration"),!this.m_nMinBufferTime||!this.m_dtMediaPresentationDuration)return Object(y.c)("MPD - Missing Buffer Time or Presentation Duration"),!1}var r=C(n,"BASEURL");r&&(this.m_strBaseURL=r.textContent);var i=C(n,"Analytics");i&&(this.m_strStatsLink=M(i,"statslink"),this.m_strStalledLink=M(i,"stalledlink"),this.m_strEventLogLink=M(i,"eventlink"));var a=t.getElementsByTagName("Period");if(0==a.length)return!1;var s=a[0],c={strID:M(s,"id"),nStart:I(s,"start"),nDuration:I(s,"duration"),rgAdaptationSets:[]};if(!c.strID||null===c.nStart)return Object(y.c)("MPD - Missing Period Information."),!1;this.m_rgPeriods=[],this.m_rgPeriods.push(c);for(var l=s.getElementsByTagName("AdaptationSet"),u=0;u<l.length;u++){var p=l[u],m=M(p,"description"),d=M(p,"lang"),h={bSegmentAlignment:E(p,"segmentAlignment"),bIsClosedCaption:"text/vtt"==M(p,"mimeType"),strLanguage:M(p,"lang"),bContainsVideo:!1,bContainsAudio:!1,bContainsGame:!1,strDescription:m||d,strForceSub:M(p,"forceSub"),strID:M(p,"id"),rgRoles:[],rgRepresentations:[],thumbnails:null,segmentTemplate:null};if(c.rgAdaptationSets.push(h),h.bIsClosedCaption){h.rgRoles.push("subtitle");for(var f=p.getElementsByTagName("Role"),_=0;_<f.length;_++){(P=M(f[_],"value"))&&h.rgRoles.push(P)}for(var g=p.getElementsByTagName("Representation"),b=0;b<g.length;b++){var v={strID:M(H=g[b],"id"),nBandwidth:w(H,"bandwidth"),strClosedCaptionFile:""},T=C(H,"BaseURL"),j=T?T.textContent:"";if(!j)return Object(y.c)("Closed Caption File has no BaseURL for (id): "+v.strID),!1;v.strClosedCaptionFile=this.m_strBaseURL+D(j,v.strID,0),h.rgRepresentations.push(v)}}else{if(!h.bSegmentAlignment)return Object(y.c)("MPD - Segment Alignment Missing"),!1;for(var G=p.getElementsByTagName("ContentComponent"),R=0;R<G.length;R++){var k=M(G[R],"contentType");"video"==k&&(h.bContainsVideo=!0),"audio"==k&&(h.bContainsAudio=!0),"game"==k&&(h.bContainsGame=!0)}if(h.bContainsVideo){var A=C(p,"Thumbnails");if(A){var N=w(A,"sheet"),B=w(A,"period");h.thumbnails={nPeriod:B,strTemplate:M(A,"template"),nSheet:N,nSheetSeconds:N*B}}}var L=p.getElementsByTagName("Role");for(R=0;R<L.length;R++){var P;(P=M(L[R],"value"))&&h.rgRoles.push(P)}var F=p.getElementsByTagName("SegmentTemplate");if(0==F.length)return Object(y.c)("MPD - Segment Template Missing"),!1;var x=F[0];h.segmentTemplate={nTimeScale:w(x,"timescale"),nDuration:w(x,"duration"),nStartNumber:w(x,"startNumber"),strMedia:M(x,"media"),strInitialization:""};var V=h.segmentTemplate;if(h.bContainsGame?V.strInitialization=V.strMedia:V.strInitialization=M(x,"initialization"),!(V.nTimeScale&&V.nDuration&&V.nStartNumber&&V.strMedia&&V.strInitialization))return Object(y.c)("MPD - Segment Template Data Missing"),!1;var U=p.getElementsByTagName("Representation");for(R=0;R<U.length;R++){var H=U[R];if(!(v=this.ParseRepresentation(H,h)))return!1;h.rgRepresentations.push(v)}}}return!0},e.prototype.BUpdate=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=S(t);if(!n)return!1;if(this.IsLiveContent()){var o=t.getElementsByTagName("Period");if(0==o.length)return!1;for(var r=o[0].getElementsByTagName("AdaptationSet"),i=0;i<r.length;i++){var a=r[i],s=M(a,"id"),c=this.GetAdaptationByTrackID(s);if(c){var l=a.getElementsByTagName("SegmentTemplate");if(0==l.length)return Object(y.c)("MPD - Segment Template Missing"),!1;var u=l[0];c.segmentTemplate.strMedia=M(u,"media");var p=a.getElementsByTagName("Representation");if(p.length>1)for(var m=0;m<p.length;m++){for(var d=p[m],h=this.ParseRepresentation(d,c),f=!0,_=0,g=c.rgRepresentations;_<g.length;_++){var b=g[_];if(h.strID==b.strID){f=!1;break}}f&&c.rgRepresentations.push(h)}break}}}var v=C(n,"Analytics");return v&&(this.m_strStatsLink=M(v,"statslink"),this.m_strStalledLink=M(v,"stalledlink"),this.m_strEventLogLink=M(v,"eventlink")),!0},e}();!function(e){e[e.None=0]="None",e[e.Append=1]="Append",e[e.Remove=2]="Remove"}(R||(R={}));var A=function(){function e(e,t,n,o){this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_sourceBuffer=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_eBufferUpdate=R.None,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bRemoveBufferState=!1,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_schNextDownload=new l.b,this.m_xhrDownload=null,this.m_listeners=new l.c,this.m_rgDownloadLog=[],this.m_nCurDownloadProgress=0,this.m_nCurDownloadBitrate=0,this.m_nNumConsecutiveDownloadGones=0,this.m_statsGameData=null,this.m_callbacks=e,this.m_mpd=t,this.m_adaptation=n,this.m_stats=o}return e.prototype.SetMediaSource=function(e){this.m_mediaSource=e},e.prototype.SetBufferMS=function(e){this.m_nTrackBufferMS=e},e.prototype.GetRepresentationsCount=function(){return this.m_adaptation.rgRepresentations.length},e.prototype.GetRepresentationByID=function(e){for(var t=0,n=this.m_adaptation.rgRepresentations;t<n.length;t++){var o=n[t];if(o.strID==e)return o}return null},e.prototype.GetNumConsecutiveDownloadGones=function(){return this.m_nNumConsecutiveDownloadGones},e.prototype.ContainsVideo=function(){return this.m_adaptation.bContainsVideo},e.prototype.ContainsAudio=function(){return this.m_adaptation.bContainsAudio},e.prototype.ContainsGame=function(){return this.m_adaptation.bContainsGame},e.prototype.GetAdaptation=function(){return this.m_adaptation},e.prototype.GetBandwidthRequired=function(){return this.m_representation.nBandwidth},e.prototype.BIsCurrentRepresentation=function(e){return e&&e.strID==this.m_representation.strID},e.prototype.GetSourceBufferTimeRanges=function(){return this.m_sourceBuffer.buffered},e.prototype.GetEstimatedAudioRate=function(){return this.m_representation&&this.ContainsAudio()?this.m_representation.nBandwidth:0},e.prototype.GetDebugName=function(){var e=[];return this.ContainsVideo()?e.push("Video"):this.ContainsAudio()?e.push("Audio"):this.ContainsGame()&&e.push("Game"),e.join(" & ")},e.prototype.GetMaxSegment=function(){if(this.m_mpd.IsLiveContent())return Number.MAX_VALUE;var e=this.m_mpd.GetEndTime();return G(this.m_adaptation,1e3*e)-1},e.prototype.GetAmountBufferedInPlayerMS=function(e){if(!this.m_sourceBuffer)return 0;var t=this.m_sourceBuffer.buffered;if(0==t.length)return 0;e<t.start(0)&&(e=t.start(0)),e>t.end(0)&&(e=t.end(0));var n=t.end(0)-e;return Math.floor(1e3*n)},e.prototype.GetAmountBufferedMS=function(e){for(var t=this.GetAmountBufferedInPlayerMS(e),n=0,o=this.m_rgBufferedSegments;n<o.length;n++){t+=o[n].nDurationMS}return t},e.prototype.ChangeRepresentation=function(e){if(this.m_adaptation.rgRepresentations.indexOf(e)<0)return null;if(this.m_representation==e)return null;if(this.ContainsVideo()&&Object(y.c)(this.GetDebugName()+" changing representation to "+(e.nHeight||0)+"p at "+Math.ceil(e.nBandwidth/1e3)+"KB for segment "+this.m_nNextSegment),this.m_representation=e,this.m_bNeedInitSegment=!this.ContainsGame(),this.m_stats.SetRepresentation(e),this.ContainsGame())return e;if(!this.m_sourceBuffer){var t=e.strMimeType+";codecs="+e.strCodecs;this.m_sourceBuffer=this.m_mediaSource.addSourceBuffer(t),Object(y.c)(t),this.m_listeners.AddEventListener(this.m_sourceBuffer,"updateend",this.OnSourceBufferUpdateEnd),this.m_listeners.AddEventListener(this.m_sourceBuffer,"error",this.OnSourceBufferError),this.m_listeners.AddEventListener(this.m_sourceBuffer,"abort",this.OnSourceBufferAbort)}return e},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_sourceBuffer=null,this.ForceStopDownloads(),this.m_eBufferUpdate=R.None,this.m_bRemoveBufferState=!1,this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_rgDownloadLog=[],this.m_stats=null,this.m_rgGameDataFrames=[],this.m_statsGameData=null},e.prototype.GetActiveDownloads=function(){return this.m_xhrDownload?1:0},e.prototype.GetActiveDownloadProgress=function(){return this.GetActiveDownloads()?this.m_nCurDownloadProgress:0},e.prototype.OnSourceBufferUpdateEnd=function(e){var t=this.m_callbacks.GetCurrentPlayTime(),n=this.GetAmountBufferedInPlayerMS(t);Object(y.c)(this.GetDebugName()+" OnSourceBufferUpdateEnd: [playback="+t+"][buffered="+n+"][start="+this.GetBufferedStart()+"][end="+this.GetBufferedEnd()+"]");var o=this.m_eBufferUpdate;this.m_eBufferUpdate=R.None,o==R.Append&&this.m_callbacks.OnSegmentDownloaded(this),this.m_bSeekInProgress&&o==R.Remove&&!this.m_bRemoveBufferState&&this.ContinueSeek(),this.UpdateBuffer()},e.prototype.OnSourceBufferError=function(e){console.log("OnSourceBufferError")},e.prototype.OnSourceBufferAbort=function(e){console.log("OnSourceBufferAbort")},e.prototype.ScheduleNextDownload=function(){if(this.m_bNeedInitSegment)this.DownloadNextSegment();else if(this.m_schNextDownload.Cancel(),this.m_xhrDownload)Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - download already going");else if(this.m_bSeekInProgress)Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - seeking");else if(this.m_nNextSegment>this.GetMaxSegment())Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - reached max segment");else{var e=this.m_callbacks.GetCurrentPlayTime(),t=this.m_callbacks.GetPlaybackRate(),n=function(e,t,n){if(!e.IsLiveContent())return 0;var o=j(t);return(n-t.segmentTemplate.nStartNumber)*o-e.GetDurationSinceStarted()}(this.m_mpd,this.m_adaptation,this.m_nNextSegment);if(n>0)return Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - segment in future"),void this.m_schNextDownload.Schedule(n,this.ScheduleNextDownload);var o=this.GetAmountBufferedMS(e);if(t>1&&(o/=t),o<4e4)return Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - download now"),void this.DownloadNextSegment();var r=1.1*j(this.m_adaptation),i=this.GetAmountBufferedInPlayerMS(this.m_callbacks.GetCurrentPlayTime());Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - buffered, schedule later [sleep="+r+"ms][buffer="+i+"]"),this.m_schNextDownload.Schedule(r,this.ScheduleNextDownload)}},e.prototype.DownloadNextSegment=function(){this.m_schNextDownload.Cancel();var e,t,n,o="",r=0;if(this.m_bNeedInitSegment)this.m_bNeedInitSegment=!1,e=this.m_mpd.GetBaseURL(),t=this.m_adaptation,n=this.m_representation,o=D(e+t.segmentTemplate.strInitialization,n.strID,0),r=0;else{if(this.m_nNextSegment<0)return void console.error("Attempting to download negative segment:",this.m_nNextSegment);o=function(e,t,n,o){return D(e+t.segmentTemplate.strMedia,n.strID,o)}(this.m_mpd.GetBaseURL(),this.m_adaptation,this.m_representation,this.m_nNextSegment),r=j(this.m_adaptation),this.m_nNextSegment++}this.DownloadSegment(this.m_representation.strID,o,r)},e.prototype.DownloadSegment=function(e,t,n,r){return void 0===r&&(r=performance.now()),Object(o.b)(this,void 0,void 0,(function(){var a,s,l,u,p,m,d,h,f,_,g,b,v,S,C,O=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:Object(c.a)(null===this.m_xhrDownload,"Trying to download another segment while a download is already in flight"),this.m_schNextDownload.Cancel(),(a=this.m_callbacks.GetCDNAuthURLParameter())&&(t+=a),Object(y.c)("Downloading: "+t),s=null,l=performance.now(),u=i.a.CancelToken.source(),o.label=1;case 1:return o.trys.push([1,3,,4]),this.m_nCurDownloadProgress=0,this.m_xhrDownload=u,p={cancelToken:this.m_xhrDownload.token,timeout:15e3,responseType:"arraybuffer",onDownloadProgress:function(e){O.m_nCurDownloadProgress=e.loaded/e.total,O.m_nCurDownloadBitrate=8*e.loaded*1e3/Math.max(1,performance.now()-l)}},this.ContainsGame()&&(p.responseType="json"),[4,i.a.get(t,p)];case 2:return s=o.sent(),[3,4];case 3:return m=o.sent(),Object(y.c)("Failed to download segment: "+m),s=m.response,[3,4];case 4:return this.m_xhrDownload&&this.m_xhrDownload==u?(d=performance.now(),h=Math.floor(performance.now()-l),f=s?s.status:0,this.m_xhrDownload=null,this.m_bSeekInProgress?(this.ContinueSeek(),[2]):s&&200==s.status?(this.m_nNumConsecutiveDownloadGones=0,this.ContainsGame()?(b=s.data,this.m_rgGameDataFrames||(this.m_rgGameDataFrames=[]),v=Number.MIN_VALUE,S=Number.MIN_VALUE,this.m_rgGameDataFrames.length>0&&(v=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].pts,S=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].gdi),(C=b.frame)&&(C.pts&&C.gamedata&&C.gdi?C.pts<=v?Object(y.c)("Invalid game pts"):C.gdi!=S&&this.m_rgGameDataFrames.push(C):Object(y.c)("Invalid game data")),this.TrimGameDataIfNecessary(),this.m_statsGameData={nAppID:b.appid,ulBroadcastRelayID:b.broadcastrelayid,nSegmentID:b.segmentid}):(_=new Uint8Array(s.data),this.m_rgBufferedSegments.push({nDurationMS:n,data:_,representationStrID:e}),this.LogDownload(l,_.length),this.UpdateBuffer(),g=_.length/1e3,Object(y.c)("HTTP "+f+" ("+h+"ms, "+Math.floor(g)+"k): "+t)),this.ScheduleNextDownload(),[2]):this.ContainsGame()?(this.ScheduleNextDownload(),[2]):(this.m_stats.LogSegmentDownloadFailure(h,s?s.status:444),d-r>9e3?(Object(y.c)(this.GetDebugName()+" HTTP download failed.. stopping loader: "+(d-r)+"ms"),this.DownloadFailed(),[2]):410==f?(this.m_nNumConsecutiveDownloadGones+=1,Object(y.c)(this.GetDebugName()+" HTTP download gone.. informing the player: "+(d-r)+"ms"),this.DownloadGone(),[2]):(this.m_schNextDownload.Schedule(500,(function(){return O.DownloadSegment(e,t,n,r)})),[2]))):[2]}}))}))},e.prototype.DownloadFailed=function(){this.m_callbacks.OnSegmentDownloadFailed(this)},e.prototype.DownloadGone=function(){this.m_callbacks.OnSegmentDownloadGone(this)},e.prototype.TrimGameDataIfNecessary=function(){},e.prototype.UpdateBuffer=function(){if(this.m_eBufferUpdate==R.None)if(this.m_bRemoveBufferState)this.RemoveAllBuffers();else if(this.m_sourceBuffer)if(this.m_rgBufferedSegments.length>0)try{this.m_eBufferUpdate=R.Append;var e=this.m_rgBufferedSegments[0];this.m_sourceBuffer.appendBuffer(e.data),this.m_rgBufferedSegments.splice(0,1)}catch(e){"QuotaExceededError"===e.name?(this.m_eBufferUpdate=R.None,Object(y.c)(this.GetDebugName()+" Buffer - QuotaExceededError")):Object(y.c)(this.GetDebugName()+" Buffer - Exception",e)}else{var t=performance.now();if(!this.m_bSeekInProgress&&t-this.m_tsLastBufferRemove>1e4){var n=this.GetBufferedStart(),o=this.m_callbacks.GetCurrentPlayTime()-40;if(n<o){var r=Math.min(this.GetBufferedEnd(),o);return void(r!=n&&(this.m_eBufferUpdate=R.Remove,this.m_sourceBuffer.remove(n,r),this.m_tsLastBufferRemove=t))}}}else Object(y.c)("No source buffer?")},e.prototype.RemoveAllBuffers=function(){this.m_rgBufferedSegments=[];var e=0;if(this.m_sourceBuffer)for(var t=this.m_sourceBuffer.buffered,n=0;n<t.length;n++)e<t.end(n)&&(e=t.end(n));this.m_bRemoveBufferState=!1,this.m_eBufferUpdate=R.Remove,0!=e?this.m_sourceBuffer.remove(0,e+1):this.OnSourceBufferUpdateEnd(null)},e.prototype.GetBufferedStart=function(){return this.m_sourceBuffer&&this.m_sourceBuffer.buffered&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.start(0):0},e.prototype.GetBufferedEnd=function(){return this.m_sourceBuffer&&this.m_sourceBuffer.buffered&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.end(0):0},e.prototype.ForceStopDownloads=function(){this.m_schNextDownload.Cancel(),this.m_xhrDownload&&(this.m_xhrDownload.cancel(),this.m_xhrDownload=null)},e.prototype.ForceRestartDownload=function(){this.ForceStopDownloads(),this.ScheduleNextDownload()},e.prototype.Seek=function(e){var t=this.GetBufferedStart(),n=this.GetBufferedEnd(),o=e<t||e>n;if(0==t&&0==n&&(o=!0),Object(y.c)(this.GetDebugName()+" making an "+(o?"unbuffered":"buffered")+" seek to "+e),this.m_bSeekInProgress||o||this.m_bNeedInitSegment){this.m_bSeekInProgress=!0,this.ForceStopDownloads();var r=G(this.m_adaptation,1e3*e);if(this.m_nNextSegment=Math.min(r,this.GetMaxSegment()),Object(y.c)("Seek To Next Segment: "+this.m_nNextSegment+" at approx. "+Object(y.d)((this.m_nNextSegment-1)*j(this.m_adaptation)/1e3)+" seconds."),this.ContainsGame())return this.m_bSeekInProgress=!1,this.m_rgGameDataFrames=[],void this.ScheduleNextDownload();this.m_bRemoveBufferState=!0,this.UpdateBuffer()}else this.ScheduleNextDownload()},e.prototype.ContinueSeek=function(){this.m_bSeekInProgress&&(this.m_eBufferUpdate==R.Remove||this.m_bRemoveBufferState||(this.m_bSeekInProgress=!1,this.ScheduleNextDownload()))},e.prototype.BHasEnoughBuffered=function(e){return!this.m_bSeekInProgress&&(!!this.ContainsGame()||(this.GetAmountBufferedInPlayerMS(e)>=this.m_nTrackBufferMS||this.m_nNextSegment>=this.GetMaxSegment()))},e.prototype.LogDownload=function(e,t){this.m_rgDownloadLog.length>=4&&this.m_rgDownloadLog.shift();var n=performance.now()-e;n<=0||(this.m_rgDownloadLog.push({cubData:t,nDownloadMS:n}),this.m_stats.LogDownload(t,n))},e.prototype.GetDownloadHistory=function(){return this.m_rgDownloadLog},e.prototype.GetAvgDownloadRate=function(){for(var e=0,t=0,n=0,o=this.m_rgDownloadLog;n<o.length;n++){var r=o[n];e+=r.nDownloadMS,t+=r.cubData}return e<=0?this.m_nCurDownloadBitrate&&this.GetActiveDownloads()>0?this.m_nCurDownloadBitrate:0:8*t*1e3/e},e.prototype.GetGameDataFrames=function(){return this.m_rgGameDataFrames},e.prototype.GetLatestGameDataFrameAppID=function(){return this.m_statsGameData&&this.m_statsGameData.nAppID?this.m_statsGameData.nAppID:0},Object(o.c)([m.a],e.prototype,"OnSourceBufferUpdateEnd",null),Object(o.c)([m.a],e.prototype,"OnSourceBufferError",null),Object(o.c)([m.a],e.prototype,"OnSourceBufferAbort",null),Object(o.c)([m.a],e.prototype,"ScheduleNextDownload",null),Object(o.c)([m.a],e.prototype,"DownloadNextSegment",null),Object(o.c)([m.a],e.prototype,"DownloadFailed",null),Object(o.c)([m.a],e.prototype,"DownloadGone",null),e}(),N=n("s+DT");var B,L=function(){return function(){this.playback_speed=1}}(),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(L),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(L),x=function(){function e(){this.m_steamIDBroadcast="",this.m_steamIDViewer="",this.m_broadcastID="",this.m_ulViewerToken="",this.m_strCDNAuthUrlParameters=void 0,this.m_host="",this.m_strBroadcastOrigin="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_allTimeSnapshot=new V(0),this.m_rgSnapShots=new Array(new V(0)),this.m_videoResolution=0,this.m_audioRate=0,this.m_audioChannel=0,this.m_frameRate=0,this.m_strBufferingVideoResolution="0x0@0",this.m_nPlaybackVideoResolution=0,this.m_strPlaybackVideoResolution="0x0",this.m_htmlVideoResolution=0,this.m_strHtmlVideoDisplay="",this.m_nAudioBandwidth=0,this.m_nVideoBandwidth=0,this.m_nBandwidthRequired=0,this.m_nCurBandwidthVideo=0,this.m_nAudioBufferedMS=0,this.m_nVideoBufferedMS=0,this.m_nActiveDownloads=0,this.m_nVideoDownloadProgress=0,this.m_videoBufferedRanges=null,this.m_audioBufferedRanges=null,this.m_nSegmentDurationMS=0,this.m_nPlaybackRate=0,this.m_nTimeToFirstFrameMS=-1,this.m_fpsMonitor=new H}return e.prototype.GetBytesReceivedToDisplay=function(){return function(e,t,n,r){var i,a=t,s=(a="number"==typeof a?{nDigitsAfterDecimal:t,bUseBinary1K:n||void 0===n,bValueIsInBytes:!r,bValueIsRate:r}:Object(o.a)({nDigitsAfterDecimal:2,bUseBinary1K:!0,bValueIsInBytes:!0,bValueIsRate:!1},a)).bUseBinary1K?1024:1e3,c=s*s,l=c*s,p=l*s,m="";e>p?(i=e/p,m="Tera"):e>l?(i=e/l,m="Giga"):e>c?(i=e/c,m="Mega"):e>s?(i=e/s,m="Kilo"):i=e;var d="#"+m+(a.bValueIsInBytes?"bytes":"bits")+(a.bValueIsRate?"_PerSecond":"");return Object(u.d)(d,i.toLocaleString(u.c.GetPreferredLocales(),{minimumFractionDigits:0,maximumFractionDigits:a.nDigitsAfterDecimal}))}(this.m_allTimeSnapshot.m_nBytesReceived,1)},e.prototype.GetBufferingResolutionToDisplay=function(){return this.m_strBufferingVideoResolution},e.prototype.GetPlaybackResolutionToDisplay=function(){return this.m_strPlaybackVideoResolution},e.prototype.GetHTMLVideoResolutionToDisplay=function(){return this.m_strHtmlVideoDisplay},e.prototype.GetDroppedFramesToDisplay=function(){return this.m_allTimeSnapshot.m_nFramesDropped+"/"+this.m_allTimeSnapshot.m_nFramesDecoded},e.prototype.GetStalledEventsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nStallEvents)},e.prototype.GetFailedDownloadsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nFailedSegments)},e.prototype.GetNumBufferedVideoRanges=function(){return this.m_videoBufferedRanges?this.m_videoBufferedRanges.length:0},e.prototype.GetNumBufferedAudioRanges=function(){return this.m_audioBufferedRanges?this.m_audioBufferedRanges.length:0},e.prototype.GetBufferedVideoSegmentForDisplay=function(e){return this.m_videoBufferedRanges&&e<this.m_videoBufferedRanges.length?Object(y.d)(this.m_videoBufferedRanges.start(e))+" - "+Object(y.d)(this.m_videoBufferedRanges.end(e)):Object(u.d)("#DASHPlayerStats_VideoNoRangeInformation")},e.prototype.GetBufferedAudioSegmentForDisplay=function(e){return this.m_audioBufferedRanges&&e<this.m_audioBufferedRanges.length?Object(y.d)(this.m_audioBufferedRanges.start(e))+" - "+Object(y.d)(this.m_audioBufferedRanges.end(e)):Object(u.d)("#DASHPlayerStats_AudioNoRangeInformation")},e.prototype.GetBandwidthStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nBandwidthMin/1e6).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nBandwidthMax/1e6).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageBandwidth()/1e6).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nBandwidthMin?e.m_nBandwidthMin:Math.min(e.m_nBandwidthMin,t.m_nBandwidthMin))/1e6).toFixed(3)+" / "+(Math.max(e.m_nBandwidthMax,t.m_nBandwidthMax)/1e6).toFixed(3)+" / "+(e.GetAverageBandwidthFromTwo(t)/1e6).toFixed(3)},e.prototype.GetDownloadTimeStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMinMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMaxMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageDownloadTime()/1e3).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nSegmentDownloadTimeMinMS?e.m_nSegmentDownloadTimeMinMS:Math.min(e.m_nSegmentDownloadTimeMinMS,t.m_nSegmentDownloadTimeMinMS))/1e3).toFixed(3)+" / "+(Math.max(e.m_nSegmentDownloadTimeMaxMS,t.m_nSegmentDownloadTimeMaxMS)/1e3).toFixed(3)+" / "+(e.GetAverageDownloadTimeFromTwo(t)/1e3).toFixed(3)},e.prototype.BHasFrameInformation=function(){return this.m_allTimeSnapshot.m_nFramesDecoded>0},e.prototype.GetBandwidthRequiredToDisplay=function(){return(this.m_nBandwidthRequired/1e6).toFixed(3)},e.prototype.GetBandwithVideoToDisplay=function(){return(this.m_nCurBandwidthVideo/1e6).toFixed(3)},e.prototype.GetContentServerToDisplay=function(){return this.m_host},e.prototype.GetVideoBufferedToDisplay=function(){return(this.m_nVideoBufferedMS/1e3).toFixed(3)},e.prototype.GetAudioBufferedToDisplay=function(){return(this.m_nAudioBufferedMS/1e3).toFixed(3)},e.prototype.GetActiveDownloadsToDisplay=function(){return String(this.m_nActiveDownloads)},e.prototype.GetVideoDownloadProgressToDisplay=function(){return this.m_nVideoDownloadProgress?String(Math.round(100*this.m_nVideoDownloadProgress))+"%":"100%"},e.prototype.GetTimeToFirstFrameToDisplay=function(){return-1==this.m_nTimeToFirstFrameMS?"Unknown":String(this.m_nTimeToFirstFrameMS)},e.prototype.GetPersistentFrameDropsForDisplay=function(){return String(this.m_fpsMonitor.BIsDroppingFrames())},e.prototype.GetCurrentFPSForDisplay=function(){return this.m_fpsMonitor.BHasCurrentFPS()?this.m_fpsMonitor.GetCurrentFPS().toFixed(1):Object(u.d)("#DASHPlayerStats_Tracking")},e.prototype.GetPlaybackRateForDisplay=function(){return this.m_nPlaybackRate.toFixed(1)+"x"},e.prototype.GetFPSMonitor=function(){return this.m_fpsMonitor},e.prototype.SetHTMLVideoPlayerDisplay=function(e,t,n,o){this.m_htmlVideoResolution!=o&&(this.m_htmlVideoResolution=o,this.m_strHtmlVideoDisplay=n+"x"+o),this.m_nPlaybackVideoResolution!=t&&(this.m_nPlaybackVideoResolution=t,this.m_strPlaybackVideoResolution=e+"x"+t)},e.prototype.SetVideoPlaybackResolution=function(e,t,n){0==this.m_videoResolution&&(this.m_allTimeSnapshot.m_nInitialVideoResolution=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nInitialVideoResolution=t),this.m_strBufferingVideoResolution=e+"x"+t+"@"+n,this.m_videoResolution=t,this.m_frameRate=n},e.prototype.SetRepresentation=function(e){e&&(e.nAudioSamplingRate?(this.m_audioRate=Math.round(e.nBandwidth/1e3),this.m_audioChannel=e.nAudioChannels,this.m_nAudioBandwidth=e.nBandwidth):e.nFrameRate&&(this.SetVideoPlaybackResolution(e.nWidth,e.nHeight,e.nFrameRate),this.m_nVideoBandwidth=e.nBandwidth),this.m_nBandwidthRequired=this.m_nAudioBandwidth+this.m_nVideoBandwidth)},e.prototype.SetCurrentVideoBandwidth=function(e){this.m_nCurBandwidthVideo=e},e.prototype.SetSegmentDurationMS=function(e){this.m_nSegmentDurationMS=e},e.prototype.SetBroadcasterAndViewerInfo=function(e,t,n,o,r){this.m_steamIDBroadcast=e,this.m_steamIDViewer=t,this.m_broadcastID=n,this.m_ulViewerToken=o,this.m_strCDNAuthUrlParameters=r},e.prototype.SetAnalyticLinks=function(e,t,n){this.m_strStatsLink=e,this.m_strStalledLink=t,this.m_strEventLogLink=n},e.prototype.SetVideoInitializationURL=function(e){var t=new URL(e);this.m_host=t.hostname,this.m_strBroadcastOrigin=t.searchParams.get("broadcast_origin")||"";var n=this.m_strBroadcastOrigin.indexOf(":");-1!==n&&(this.m_strBroadcastOrigin=this.m_strBroadcastOrigin.substr(0,n))},e.prototype.SetAudioRate=function(e){this.m_audioRate=e},e.prototype.CaptureFrequentlyUpdatingInformation=function(e,t){var n=this.ExtractFrameInfo(e);this.LogFrameInfo(n),this.LogBufferDuration(t,e)},e.prototype.LogDownload=function(e,t){this.m_allTimeSnapshot.SegmentReceived(e,t),this.m_rgSnapShots[this.m_rgSnapShots.length-1].SegmentReceived(e,t)},e.prototype.LogSegmentDownloadFailure=function(e,t){this.m_allTimeSnapshot.m_nFailedSegments+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nFailedSegments+=1,this.m_allTimeSnapshot.m_nLastSegementDownloadStatus=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus=t,this.LogDownload(0,e)},e.prototype.LogVideoError=function(e){},e.prototype.LogVideoOnCanPlay=function(e){-1===this.m_nTimeToFirstFrameMS&&(this.m_nTimeToFirstFrameMS=Date.now()-this.m_allTimeSnapshot.m_timeMS)},e.prototype.LogErrorEvent=function(e,t){},e.prototype.ReportVideoStalled=function(e,t){if(0!=this.m_strStalledLink.length){var n=this.FindBehindSegmentLoader(e,t);if(n){this.m_allTimeSnapshot.m_nStallEvents+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nStallEvents+=1;var o=new F;this.GatherCommonStats(o,t,n.GetBandwidthRequired(),n.GetAvgDownloadRate()),o.last_segment_response=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus,o.audio_stalled=n.ContainsAudio(),this.CaptureActiveDownloads(e),o.active_downloads=this.m_nActiveDownloads,o.vid_down_progress=this.m_nVideoDownloadProgress;for(var r=n.GetDownloadHistory(),i=0,a=r.length-1;a>=0&&i<3;--a)o["segment"+ ++i+"_bytes"]=r[a].cubData,o["segment"+i+"_time"]=Math.round(r[a].nDownloadMS)/1e3;this.SendReportToServer(o,this.m_strStalledLink)}else Object(y.c)("DASHStats: Did not find any audio or video loaders")}},e.prototype.FindBehindSegmentLoader=function(e,t){for(var n=!1,o=!1,r=t.currentTime,i=null,a=null,s=0,c=e;s<c.length;s++){var l=c[s];a=l.ContainsAudio()?l:a,i=l.ContainsVideo()?l:a,l.BHasEnoughBuffered(r)&&(o=o||l.ContainsAudio(),n=n||l.ContainsVideo())}return o=o||null==a,!n||n&&o?i:a},e.prototype.ExtractFrameInfo=function(e){var t=0,n=0;if(e.getVideoPlaybackQuality)try{var o=e.getVideoPlaybackQuality();n=o.totalVideoFrames,t=o.droppedVideoFrames}catch(e){Object(y.c)("Browser does not support HTMLVideoElement.getVideoPlaybackQuality()",e.message)}else e.webkitDecodedFrames?(n=e.webkitDecodedFrames,t=e.webkitDroppedFrames):e.webkitDecodedFrameCount&&(n=e.webkitDecodedFrameCount,t=e.webkitDroppedFrameCount);return{framesDecoded:n,framesDropped:t}},e.prototype.LogFrameInfo=function(e){this.m_allTimeSnapshot.m_nFramesDecoded=e.framesDecoded,this.m_allTimeSnapshot.m_nFramesDropped=e.framesDropped;var t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];if(1==this.m_rgSnapShots.length)t.m_nFramesDecoded=e.framesDecoded,t.m_nFramesDropped=e.framesDropped;else{var n=this.m_rgSnapShots[this.m_rgSnapShots.length-2];t.m_nFramesDecoded=e.framesDecoded-n.m_nFramesDecoded,t.m_nFramesDropped=e.framesDropped-n.m_nFramesDropped}},e.prototype.LogBufferDuration=function(e,t){this.m_nActiveDownloads=0;for(var n=0,o=e;n<o.length;n++){var r=o[n];r.ContainsAudio()?(this.m_nAudioBufferedMS=r.GetAmountBufferedMS(t.currentTime),this.m_audioBufferedRanges=r.GetSourceBufferTimeRanges()):r.ContainsVideo()&&(this.m_nVideoBufferedMS=r.GetAmountBufferedMS(t.currentTime),this.m_videoBufferedRanges=r.GetSourceBufferTimeRanges()),this.m_nActiveDownloads+=r.GetActiveDownloads(),r.ContainsVideo()&&(this.m_nVideoDownloadProgress=r.GetActiveDownloadProgress())}this.m_nPlaybackRate=t.playbackRate},e.prototype.CaptureActiveDownloads=function(e){this.m_nActiveDownloads=0;for(var t=0,n=e;t<n.length;t++){var o=n[t];this.m_nActiveDownloads+=o.GetActiveDownloads(),o.ContainsVideo()&&(this.m_nVideoDownloadProgress=o.GetActiveDownloadProgress())}},e.prototype.ReportPlayerStats=function(e,t){if(0!=this.m_strStatsLink.length){var n=this.ExtractFrameInfo(t);if(n.framesDecoded!=this.m_allTimeSnapshot.m_nFramesDecoded||0!=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nBytesReceived){this.LogFrameInfo(n),this.LogBufferDuration(e,t);var o=new P,r=this.m_rgSnapShots[this.m_rgSnapShots.length-1];o.frames_decoded=r.m_nFramesDecoded,o.frames_dropped=r.m_nFramesDropped,o.bytes_received=r.m_nBytesReceived,o.seconds_delta=Math.round((Date.now()-r.m_timeMS)/1e3),o.failed_segments=r.m_nFailedSegments,o.bw_min=r.m_nBandwidthMin,o.bw_max=r.m_nBandwidthMax,o.audio_buffer=Math.round(this.m_nAudioBufferedMS/1e3),o.video_buffer=Math.round(this.m_nVideoBufferedMS/1e3),o.seg_time_avg=Math.round(r.GetAverageDownloadTime())/1e3,o.seg_time_min=Math.round(r.m_nSegmentDownloadTimeMinMS)/1e3,o.seg_time_max=Math.round(r.m_nSegmentDownloadTimeMaxMS)/1e3,o.initial_vid_res=r.m_nInitialVideoResolution,o.ttff=this.m_nTimeToFirstFrameMS,o.seg_duration=this.m_nSegmentDurationMS,this.GatherCommonStats(o,t,this.m_nBandwidthRequired,r.GetAverageBandwidth()),this.CreateNewEmptySnapshot(t.videoHeight),this.SendReportToServer(o,this.m_strStatsLink)}else this.CreateNewEmptySnapshot(t.videoHeight)}},e.prototype.SendReportToServer=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,a,s,c;return Object(o.e)(this,(function(o){for(n=new URL(t),r=new FormData,a=0,s=Object.keys(e);a<s.length;a++)c=s[a],r.append(c,e[c]);return r.append("l",n.searchParams.get("l")),r.append("e",n.searchParams.get("e")),r.append("h",n.searchParams.get("h")),Object(y.c)("CDASHStats Sending Report to Server",e),i.a.post(t,r).catch((function(e){Object(y.c)("Failed to upload stats: ",e)})),[2]}))}))},e.prototype.CreateNewEmptySnapshot=function(e){this.m_rgSnapShots.length>=5&&this.m_rgSnapShots.shift(),this.m_rgSnapShots.push(new V(e))},e.prototype.GatherCommonStats=function(e,t,n,o){e.steamid=this.m_steamIDViewer,e.host=this.m_host,e.playback_position=Math.round(t.currentTime),e.video_res=this.m_videoResolution,e.audio_rate=this.m_audioRate,e.audio_ch=this.m_audioChannel,e.bw_required=n,e.bw_avg=Math.round(o),e.broadcast_accountid=this.m_steamIDBroadcast?new N.a(this.m_steamIDBroadcast).GetAccountID():0,e.useragent=window.navigator.userAgent,e.sessionid=d.c.SESSIONID,e.broadcast_origin=this.m_strBroadcastOrigin},Object(o.c)([a.B],e.prototype,"m_allTimeSnapshot",void 0),Object(o.c)([a.B],e.prototype,"m_strBufferingVideoResolution",void 0),Object(o.c)([a.B],e.prototype,"m_strPlaybackVideoResolution",void 0),Object(o.c)([a.B],e.prototype,"m_strHtmlVideoDisplay",void 0),Object(o.c)([a.B],e.prototype,"m_nBandwidthRequired",void 0),Object(o.c)([a.B],e.prototype,"m_nCurBandwidthVideo",void 0),Object(o.c)([a.B],e.prototype,"m_nAudioBufferedMS",void 0),Object(o.c)([a.B],e.prototype,"m_nVideoBufferedMS",void 0),Object(o.c)([a.B],e.prototype,"m_nActiveDownloads",void 0),Object(o.c)([a.B],e.prototype,"m_nVideoDownloadProgress",void 0),Object(o.c)([a.B],e.prototype,"m_videoBufferedRanges",void 0),Object(o.c)([a.B],e.prototype,"m_audioBufferedRanges",void 0),Object(o.c)([a.B],e.prototype,"m_nPlaybackRate",void 0),Object(o.c)([a.k],e.prototype,"SetVideoPlaybackResolution",null),Object(o.c)([a.k],e.prototype,"SetRepresentation",null),Object(o.c)([a.k],e.prototype,"SetCurrentVideoBandwidth",null),Object(o.c)([a.k],e.prototype,"CaptureFrequentlyUpdatingInformation",null),Object(o.c)([a.k],e.prototype,"LogDownload",null),Object(o.c)([a.k],e.prototype,"LogSegmentDownloadFailure",null),Object(o.c)([a.k],e.prototype,"LogFrameInfo",null),Object(o.c)([a.k],e.prototype,"LogBufferDuration",null),e}(),V=function(){function e(e){this.m_timeMS=Date.now(),this.m_nBytesReceived=0,this.m_nInitialVideoResolution=0,this.m_nFailedSegments=0,this.m_nStallEvents=0,this.m_nEntries=0,this.m_nSegmentDownloadTimeTotalMS=0,this.m_nSegmentDownloadTimeMaxMS=0,this.m_nSegmentDownloadTimeMinMS=0,this.m_nBandwidthTotal=0,this.m_nBandwidthMin=0,this.m_nBandwidthMax=0,this.m_nLastSegementDownloadStatus=200,this.m_nFramesDecoded=0,this.m_nFramesDropped=0,this.m_nInitialVideoResolution=e}return e.prototype.GetAverageBandwidth=function(){return this.m_nBandwidthTotal/Math.max(1,this.m_nEntries)},e.prototype.GetAverageDownloadTime=function(){return this.m_nSegmentDownloadTimeTotalMS/Math.max(1,this.m_nEntries)},e.prototype.GetAverageBandwidthFromTwo=function(e){return(e.m_nBandwidthTotal+this.m_nBandwidthTotal)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.GetAverageDownloadTimeFromTwo=function(e){return(e.m_nSegmentDownloadTimeTotalMS+this.m_nSegmentDownloadTimeTotalMS)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.SegmentReceived=function(e,t){if(this.m_nBytesReceived+=e,!(e<1024)){var n=Math.round(8*e*1e3/Math.max(t,1));0==this.m_nEntries?(this.m_nSegmentDownloadTimeMinMS=t,this.m_nBandwidthMin=n):(this.m_nSegmentDownloadTimeMinMS=Math.min(t,this.m_nSegmentDownloadTimeMinMS),this.m_nBandwidthMin=Math.min(n,this.m_nBandwidthMin)),this.m_nBandwidthMax=Math.max(n,this.m_nBandwidthMax),this.m_nSegmentDownloadTimeMaxMS=Math.max(t,this.m_nSegmentDownloadTimeMaxMS),this.m_nBandwidthTotal+=n,this.m_nSegmentDownloadTimeTotalMS+=t,this.m_nEntries+=1}},Object(o.c)([a.B],e.prototype,"m_nBytesReceived",void 0),Object(o.c)([a.B],e.prototype,"m_nFailedSegments",void 0),Object(o.c)([a.B],e.prototype,"m_nStallEvents",void 0),Object(o.c)([a.B],e.prototype,"m_nSegmentDownloadTimeMaxMS",void 0),Object(o.c)([a.B],e.prototype,"m_nSegmentDownloadTimeMinMS",void 0),Object(o.c)([a.B],e.prototype,"m_nBandwidthMin",void 0),Object(o.c)([a.B],e.prototype,"m_nBandwidthMax",void 0),Object(o.c)([a.B],e.prototype,"m_nFramesDecoded",void 0),Object(o.c)([a.B],e.prototype,"m_nFramesDropped",void 0),Object(o.c)([a.k],e.prototype,"SegmentReceived",null),e}(),U=function(){function e(){}return e.prototype.reset=function(e,t){this.bDropReading=e,this.nTotalDecodedFrames=t},e}(),H=function(){function e(){this.k_nTestFrequencyMS=1e3,this.k_nSlidingWindow=6,this.k_nDroppedFramesThreshold=1,this.k_nFailThreshold=3,this.k_nIgnoreReadingAroundResizeMS=2e3,this.m_schTracker=new l.b,this.m_rgResultsWindow=[],this.m_nLastResizeMS=0,this.m_bDroppingFrameDetected=!1,this.m_nCurrentFPS=0}return e.prototype.StartTracking=function(e){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading),this.m_fnRequestDecoded=e,this.m_lastFrameInfo=this.m_fnRequestDecoded(),this.m_bDroppingFrameDetected=!1},e.prototype.BHasCurrentFPS=function(){return 0!=this.m_nCurrentFPS},e.prototype.GetCurrentFPS=function(){return this.m_nCurrentFPS},e.prototype.BIsDroppingFrames=function(){return this.m_bDroppingFrameDetected},e.prototype.SetWindowResized=function(){this.m_nLastResizeMS=Date.now()},e.prototype.BIsInResizeTimeWindow=function(){return this.m_nLastResizeMS&&Date.now()-this.m_nLastResizeMS<this.k_nIgnoreReadingAroundResizeMS},e.prototype.Close=function(){this.m_schTracker.Cancel(),this.m_rgResultsWindow=[],this.m_bDroppingFrameDetected=!1},e.prototype.LogResizeAction=function(){this.m_nLastResizeMS=Date.now()},e.prototype.TakeReading=function(){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading);var e=!1,t=this.m_fnRequestDecoded();this.BIsInResizeTimeWindow()||(e=this.m_lastFrameInfo.framesDropped>0&&t.framesDropped-this.m_lastFrameInfo.framesDropped>this.k_nDroppedFramesThreshold),this.AppendReading(e,t.framesDecoded),this.m_bDroppingFrameDetected=this.ComputeDroppingFrames(),this.m_nCurrentFPS=t.framesDecoded-this.m_lastFrameInfo.framesDecoded-(t.framesDropped-this.m_lastFrameInfo.framesDropped),this.m_lastFrameInfo=t},e.prototype.ComputeDroppingFrames=function(){return this.m_rgResultsWindow.length==this.k_nSlidingWindow&&this.m_rgResultsWindow.filter((function(e){return e.bDropReading})).length>=this.k_nFailThreshold},e.prototype.AppendReading=function(e,t){var n;(n=this.m_rgResultsWindow.length>=this.k_nSlidingWindow?this.m_rgResultsWindow.shift():new U).reset(e,t),this.m_rgResultsWindow.push(n)},Object(o.c)([a.B],e.prototype,"m_bDroppingFrameDetected",void 0),Object(o.c)([a.B],e.prototype,"m_nCurrentFPS",void 0),Object(o.c)([a.k.bound],e.prototype,"TakeReading",null),e}(),W=n("ujHl");!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(B||(B={}));var z=function(){function e(e,t){void 0===t&&(t=!1),this.m_elVideo=null,this.m_strMPD="",this.m_strHLS="",this.m_strCDNAuthURLParameters=null,this.m_schUpdateMPD=new l.b,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_rgLoaders=[],this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_bIsBuffering=!0,this.m_nSeekingToTime=-1,this.m_listeners=new l.c,this.m_bFirstPlay=!0,this.m_schGameDataEventTrigger=new l.b,this.m_schReportPlayerTrigger=new l.b,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new l.b,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats=new x,this.m_bClosing=!1,this.m_hlsTimeOffset=0,this.m_bUserPlayChoice=!0,this.m_bUserLiveEdgeChoice=!0,this.m_schFirstFrameThrottler=new l.b,this.m_elVideo=e,this.m_schReportPlayerTrigger.Schedule(3e4,this.ReportPlayerStats),this.m_bUseHLSManifest=t}return e.prototype.CalcVideoStartRelativeToSystemClock=function(e){var t=(e?new Date(e).getTime():Date.now())-this.m_mpd.GetAvailabilityStartTime().getTime();this.m_mpd.StartLiveContentNow(t),Object(y.c)("server time: "+e)},e.prototype.PlayMPD=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_strMPD=e,this.m_strHLS=n,this.m_strCDNAuthURLParameters=t,[4,this.DownloadMPD()];case 1:return(r=o.sent())?(this.m_mpd=new k,this.m_mpd.BParse(r.data)?(this.IsLiveContent()&&(this.m_mpd.GetMinimumUpdatePeriod()>0&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),this.CalcVideoStartRelativeToSystemClock(r.headers.date)),this.m_bUseHLSManifest?(this.m_elVideo.src=this.m_strHLS,this.m_elVideo.addEventListener("loadedmetadata",(function(){i.m_bIsBuffering=!1,i.BeginPlayback()})),document.addEventListener("visibilitychange",this.OnVisibilityChange),[2]):this.BCreateLoaders()?(this.m_stats.SetSegmentDurationMS(j(this.GetCurrentVideoAdaptation())),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_stats.SetVideoInitializationURL(this.GetCurrentVideoAdaptation().segmentTemplate.strInitialization),this.InitVideoControl(),[2]):(this.CloseWithError("playbackerror","Failed to create segment loaders"),[2])):(this.CloseWithError("playbackerror","Failed to parse MPD file",this.m_strMPD),[2])):[2]}}))}))},e.prototype.PlayWebRTC=function(e,t,n,o,r){},e.prototype.OnVisibilityChange=function(){"visible"===document.visibilityState&&(this.m_elVideo.src=this.m_strHLS)},e.prototype.Close=function(){if(this.m_bClosing=!0,this.m_listeners.Unregister(),this.m_bUseHLSManifest&&document.removeEventListener("visibilitychange",this.OnVisibilityChange),this.StopDownloads(),this.m_elVideo&&this.m_elVideo.pause(),this.m_mediaSource){try{"closed"!=this.m_mediaSource.readyState&&this.m_mediaSource.endOfStream()}catch(e){}this.m_mediaSource=null}this.m_bIsBuffering=!0,this.m_elVideo=null,this.m_strMPD="",this.m_mpd=null,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_nSeekingToTime=-1,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats&&this.m_stats.GetFPSMonitor().Close(),this.m_stats=null,this.m_bFirstPlay=!0},e.prototype.StopDownloads=function(){this.m_xhrUpdateMPD&&(this.m_xhrUpdateMPD.cancel(),this.m_xhrUpdateMPD=null),this.m_schUpdateMPD.Cancel(),this.m_schGameDataEventTrigger.Cancel(),this.m_schReportPlayerTrigger.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_schFirstFrameThrottler.Cancel(),this.m_elVideo&&1!=this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1);for(var e=0,t=this.m_rgLoaders;e<t.length;e++){t[e].Close()}this.m_bIsBuffering=!0},e.prototype.IsBuffering=function(){return this.m_bIsBuffering},e.prototype.IsLiveContent=function(){return!!this.m_mpd&&this.m_mpd.IsLiveContent()},e.prototype.DownloadMPD=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_xhrUpdateMPD)return Object(c.a)(!1,"Multiple MPD download requests"),[2,null];e=performance.now(),o.label=1;case 1:if(!(performance.now()-e<3e4))return[3,7];t=null,o.label=2;case 2:return o.trys.push([2,4,,5]),this.m_xhrUpdateMPD=i.a.CancelToken.source(),n=this.m_strMPD+(this.m_strCDNAuthURLParameters?this.m_strCDNAuthURLParameters:""),[4,i.a.get(n,{cancelToken:this.m_xhrUpdateMPD.token})];case 3:return t=o.sent(),[3,5];case 4:return o.sent(),[3,5];case 5:return this.m_xhrUpdateMPD=null,this.m_bClosing?[2,null]:t&&200==t.status?[2,t]:t&&410==t.status?(this.CloseWithError("playbackerror","Failed to download MPD: 410 Gone"),[2,null]):(Object(y.c)("Failed to download, will retry: "+this.m_strMPD),[4,Object(W.e)(200)]);case 6:return o.sent(),[3,1];case 7:return Object(y.c)("Failed to download: "+this.m_strMPD),[2,null]}}))}))},e.prototype.UpdateMPD=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.DownloadMPD()];case 1:return(e=t.sent())?this.m_mpd.BUpdate(e.data)?(this.CalcVideoStartRelativeToSystemClock(e.headers.date),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_mpd.GetMinimumUpdatePeriod()>0&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),[2]):(this.CloseWithError("playbackerror","Failed to parse on Update the MPD file"),[2]):[2]}}))}))},e.prototype.CloseWithError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.Close(),y.c.apply(void 0,t)},e.prototype.BCreateLoaders=function(){var e=this.m_mpd.GetPeriods();if(0==e.length)return!1;var t=e[0];this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="";for(var n=0,o=t.rgAdaptationSets;n<o.length;n++){var r=o[n],i=null;if(!this.m_strVideoAdaptationID&&r.bContainsVideo&&T(r)&&(i=r,this.m_strVideoAdaptationID=r.strID),!this.m_strAudioAdaptationID&&r.bContainsAudio&&T(r)&&(i=r,this.m_strAudioAdaptationID=r.strID),!this.m_strGameAdaptationID&&r.bContainsGame&&(i=r,this.m_strGameAdaptationID=r.strID),i){var a=new A(this,this.m_mpd,i,this.m_stats);this.m_rgLoaders.push(a)}}return this.m_strVideoAdaptationID.length>0},e.prototype.InitVideoControl=function(){var e=new MediaSource,t=URL.createObjectURL(e);this.m_elVideo.pause(),this.m_elVideo.srcObject=null,this.m_elVideo.src=t,this.m_mediaSource=e,this.m_listeners.AddEventListener(e,"sourceopen",this.OnMediaSourceOpen),this.m_listeners.AddEventListener(e,"sourceended",this.OnMediaSourceEnded),this.m_listeners.AddEventListener(e,"sourceclose",this.OnMediaSourceClose),this.m_listeners.AddEventListener(this.m_elVideo,"waiting",this.OnVideoWaiting),this.m_listeners.AddEventListener(this.m_elVideo,"error",this.OnVideoError),this.m_listeners.AddEventListener(this.m_elVideo,"canplay",this.OnVideoCanPlay),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate)},e.prototype.OnMediaSourceOpen=function(e){Object(y.c)("OnMediaSourceOpen");for(var t=0,n=this.m_rgLoaders;t<n.length;t++){n[t].SetMediaSource(this.m_mediaSource)}this.BeginPlayback()},e.prototype.OnMediaSourceEnded=function(e){Object(y.c)("OnMediaSourceEnded")},e.prototype.OnMediaSourceClose=function(e){Object(y.c)("OnMediaSourceClose")},e.prototype.OnVideoWaiting=function(e){if(!this.IsLiveContent()&&this.m_mpd&&this.m_mpd.GetEndTime()-this.GetCurrentPlayTime()<1)this.Pause();else if(!this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,this.m_elVideo.currentTime+.5)){if(this.m_elVideo&&this.m_elVideo.buffered.length>1)for(var t=this.m_elVideo.currentTime,n=this.m_elVideo.buffered,o=0;o<n.length;++o)if(Object(y.c)("OnVideoWaiting buffer "+o+" start:"+n.start(o)+" end: "+n.end(o)+" playerTime: "+t),n.start(o)<=t&&t<=n.end(o))return Object(y.c)("OnVideoWaiting - time splitting, jumping to buffer "+o),void this.Seek(n.start(o));if(this.m_stats.ReportVideoStalled(this.m_rgLoaders,this.m_elVideo),null===this.m_videoRepSelected){var r=!0,i=this.GetVideoLoader();if(i){var a=this.m_mpd.GetLowestRepresentation(this.GetCurrentVideoAdaptation().strID);a&&!i.BIsCurrentRepresentation(a)&&(i.ChangeRepresentation(a),Object(y.c)("OnVideoWaiting - Stalled, forced restart download at resolution: "+a.nWidth+"x"+a.nHeight+"@"+a.nFrameRate+" instead"),r=!1),this.Seek(this.m_elVideo.currentTime)}r&&Object(y.c)("OnVideoWaiting - Stalled, already at lowest resolution. No action taken. BHasLoader: "+(null!=i))}else Object(y.c)("OnVideoWaiting - Stalled, user explicitly chose a resolution: "+this.m_videoRepSelected.nWidth+"x"+this.m_videoRepSelected.nHeight+"@"+this.m_videoRepSelected.nFrameRate)}},e.prototype.OnVideoPause=function(e){this.OnVideoBufferProgress(),this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.OnDebugPrintEventInfoAndAvailableBuffer=function(e){var t=-1,n=this.GetVideoLoader();this.m_elVideo&&n&&(t=n.GetAmountBufferedInPlayerMS(this.m_elVideo.currentTime)),Object(y.c)("DebugMessage - Stats: "+e.type+" BufferedMS: "+t)},e.prototype.OnVideoError=function(e){Object(y.c)("OnVideoError")},e.prototype.OnVideoCanPlay=function(e){this.m_bIsBuffering||(this.m_bUserPlayChoice&&this.PlayOnElement(),this.m_stats.LogVideoOnCanPlay(e))},e.prototype.GetCurrentPlayTime=function(){return-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:this.m_bUseHLSManifest&&this.m_mpd?(this.m_elVideo.currentTime>0&&0===this.m_hlsTimeOffset&&(this.m_hlsTimeOffset=this.GetBufferedLiveEdgeTime()-this.m_elVideo.currentTime),this.m_elVideo.currentTime+this.m_hlsTimeOffset):this.m_elVideo.currentTime},e.prototype.OnVideoTimeUpdate=function(){if(this.m_bUserLiveEdgeChoice&&this.IsLiveContent()){var e=this.GetBufferedLiveEdgeTime();if(1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime<=e-4.5&&this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,e)){var t=e-this.m_elVideo.currentTime;this.m_elVideo.playbackRate=1.1,Object(y.c)("User is behind by "+t.toFixed(2)+" seconds, increasing playback speed to catch-up to live edge.")}else 1.1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime>=e-1&&(this.m_elVideo.playbackRate=1,Object(y.c)("User is caught up, returning to normal playrate"))}},e.prototype.BIsPlayerBufferedBetween=function(e,t){return this.m_elVideo.buffered.length>0&&e>=this.m_elVideo.buffered.start(0)&&t<=this.m_elVideo.buffered.end(0)},e.prototype.GetLiveContentStartTime=function(){return this.m_mpd.GetAvailabilityStartTime()},e.prototype.GetAvailableVideoStartTime=function(){if(!this.m_mpd)return 0;var e=0;if(this.IsLiveContent()){var t=Math.floor(this.m_mpd.GetDurationSinceStarted()/1e3),n=this.GetBufferedLiveEdgeTime(),o=this.m_mpd.GetTimeShiftBufferDepth();e=p.a(t-o+10,0,n)}else e=this.m_mpd.GetStartTime();return e},e.prototype.GetBufferedLiveEdgeTime=function(){if(!this.m_mpd)return 0;return this.IsLiveContent()?Math.floor((this.m_mpd.GetDurationSinceStarted()-this.m_nTrackBufferMS)/1e3):this.m_mpd.GetEndTime()},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){this.m_bUserPlayChoice=!0,!this.IsLiveContent()&&this.m_mpd&&this.m_mpd.GetEndTime()-this.GetCurrentPlayTime()<1?this.Seek(this.m_mpd.GetStartTime()):this.Seek(this.GetCurrentPlayTime())},e.prototype.Pause=function(){this.m_bUserLiveEdgeChoice=!1,1.1==this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1),this.m_bUserPlayChoice=!1,this.m_elVideo.pause()},e.prototype.GetPlaybackRate=function(){return this.m_elVideo.paused?0:this.m_elVideo.playbackRate},e.prototype.GetCDNAuthURLParameter=function(){return this.m_strCDNAuthURLParameters},e.prototype.OnSegmentDownloaded=function(e){Object(y.c)(e.GetDebugName()+" OnSegmentDownloaded"),this.UpdateVideoRepresentation(this.m_videoRepSelected),this.OnVideoBufferProgress(),e==this.GetVideoLoader()&&this.m_stats.SetCurrentVideoBandwidth(e.GetAvgDownloadRate())},e.prototype.PlayOnElement=function(){var e=this,t=this.m_bFirstPlay;this.m_bFirstPlay=!1;var n=this.m_elVideo.play();n?n.then((function(){e.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))})).catch((function(n){t&&e.DispatchEvent("valve-userinputneeded")})):this.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))},e.prototype.OnVideoBufferProgress=function(){if(this.IsBuffering()){for(var e=this.m_rgLoaders.length>0,t=-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:0,n=0,o=this.m_rgLoaders;n<o.length;n++){var r=o[n];if(!r.BHasEnoughBuffered(t)){e=!1;break}t=Math.max(t,r.GetBufferedStart())}e&&(this.m_bIsBuffering=!1,this.m_nSeekingToTime=-1,this.m_elVideo.currentTime!=t?this.m_elVideo.currentTime=t:this.m_elVideo.paused&&this.m_bUserPlayChoice&&this.PlayOnElement(),this.DispatchEvent("valve-bufferupdate"))}},e.prototype.OnSegmentDownloadFailed=function(e){this.StopDownloads(),this.DispatchEvent("valve-downloadfailed")},e.prototype.OnSegmentDownloadGone=function(e){this.m_bIsBuffering&&e.GetNumConsecutiveDownloadGones()<=3?this.Seek(this.GetCurrentPlayTime()+j(this.GetCurrentVideoAdaptation())/1e3):(Object(y.c)("OnSegmentDownloadGone: too many consecutive 'gone', erroring the download: "+e.GetNumConsecutiveDownloadGones()),this.OnSegmentDownloadFailed(e))},e.prototype.GetCurrentAudioAdaptationfunction=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strAudioAdaptationID):null},e.prototype.GetCurrentVideoAdaptation=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strVideoAdaptationID):null},e.prototype.GetVideoLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsVideo())return n}return null},e.prototype.GetAudioLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsAudio())return n}return null},e.prototype.GetGameLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsGame())return n}return null},e.prototype.SetTrackBufferMS=function(e){this.m_nTrackBufferMS=e;for(var t=0,n=this.m_rgLoaders;t<n.length;t++){n[t].SetBufferMS(e)}},e.prototype.BeginPlayback=function(){var e=0;if(this.IsLiveContent()){var t=j(this.GetCurrentVideoAdaptation()),n=1e3*this.m_mpd.GetMinBufferTime(),o=Math.max(t,n);this.SetTrackBufferMS(o),e=this.GetBufferedLiveEdgeTime(),Object(y.c)("Begin playback of live content [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]")}else this.SetTrackBufferMS(8e3),e=0,Object(y.c)("Begin playback of non-live content [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]");if(Object(y.c)("Starting playback at "+e),!this.m_bUseHLSManifest)for(var r=this.PickStartingVideoRepresentation(),i=0,a=this.m_rgLoaders;i<a.length;i++){var s=a[i];if(s.ContainsVideo()){s.ChangeRepresentation(r);t=j(s.GetAdaptation());this.m_schFirstFrameThrottler.Schedule(t/2,this.VerifyFirstSegementDownloadProgress)}else if(s.ContainsAudio()||s.ContainsGame()){var c=s.GetAdaptation().rgRepresentations.length>0?s.GetAdaptation().rgRepresentations[0]:null;s.ChangeRepresentation(c)}}this.Seek(e),this.GetGameLoader()&&this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)},e.prototype.VerifyFirstSegementDownloadProgress=function(){var e=this.GetVideoLoader();if(null===this.m_videoRepSelected&&e&&e.GetDownloadHistory().length<=1&&e.GetActiveDownloads()>0&&e.GetActiveDownloadProgress()<.55){var t=this.DetermineBestVideoRepresentation();t&&!e.BIsCurrentRepresentation(t)&&(e.ChangeRepresentation(t),e.ForceRestartDownload(),Object(y.c)("Video download progressing too slowly, choosing "+t.nWidth+"x"+t.nHeight+"@"+t.nFrameRate+" instead"))}},e.prototype.PickStartingVideoRepresentation=function(){var e=this.GetVideoLoader();if(!e)return null;for(var t=e.GetAdaptation(),n=null,o=e.GetRepresentationsCount()-1;o>=0;o--){var r=t.rgRepresentations[o],i=r.nFrameRate?r.nFrameRate:0;if(!(this.m_nLimitFPS>0&&i>this.m_nLimitFPS)&&(n=r,this.GetVideoPlayerHeight()<=r.nHeight))break}return n},e.prototype.DetermineBestVideoRepresentation=function(){for(var e=this.GetVideoLoader(),t=this.GetAudioLoader(),n=t&&t!=e?t.GetEstimatedAudioRate():0,o=this.GetAvgLoaderDownloadRate(),r=e.GetRepresentationsCount()-1,i=e.GetAdaptation().rgRepresentations[r],a=r-1;a>=0;a--){var s=e.GetAdaptation().rgRepresentations[a],c=(s.nBandwidth+n)*this.m_elVideo.playbackRate*1.15;if(o<c)Object(y.c)("Video select: Skipping "+a+" due to rate: [avg="+o+"][required="+c+"]");else{var l=s.nFrameRate||0;if(this.IsLiveContent()&&l>30){var u=this.m_stats.GetFPSMonitor();if(u.BIsDroppingFrames()||u.BHasCurrentFPS()&&Math.ceil(u.GetCurrentFPS())<29){Object(y.c)("Video select: Skipping "+a+" due to dropping frames and high FPS representation: [fps:"+l+"]");continue}}if(this.m_nLimitFPS>0&&l>this.m_nLimitFPS)Object(y.c)("Video select: Skipping "+a+" due to frame rate limit");else{var p=i.nHeight||0,m=s.nHeight||0,d=this.GetVideoPlayerHeight();if(d>0&&p>0)if(m>q(d))break;i=s}}}return i},e.prototype.UpdateVideoRepresentation=function(e){if(e&&this.m_videoRepSelected==e)return null;var t=this.GetVideoLoader();if(!t)return null;if(this.IsBuffering())return null;var n=this.DetermineBestVideoRepresentation();return this.m_videoRepSelected=null,t.ChangeRepresentation(n)},e.prototype.CanSeek=function(){return!0},e.prototype.SeekAndPlay=function(e){return this.m_bUserPlayChoice=!0,this.Seek(e)},e.prototype.Seek=function(e){if(!this.m_mpd)return 0;var t=this.GetAvailableVideoStartTime(),n=this.GetBufferedLiveEdgeTime();e=p.a(e,t,n),this.m_bUserLiveEdgeChoice=e>=n-5;var o=this.m_elVideo.paused;if(o||this.m_elVideo.pause(),this.m_bUseHLSManifest)this.m_elVideo.currentTime=e-this.m_hlsTimeOffset,this.m_elVideo.play();else{this.m_bIsBuffering=!0,this.m_nSeekingToTime=e;for(var r=0,i=this.m_rgLoaders;r<i.length;r++){var a=i[r];a.ContainsGame()&&(e=this.GetBufferedLiveEdgeTime()),a.Seek(e)}this.DispatchEvent("valve-bufferupdate"),o&&this.OnVideoBufferProgress()}return e},e.prototype.JumpTime=function(e){return e+=this.GetCurrentPlayTime(),this.Seek(e)},e.prototype.GetVideoPlayerHeight=function(){return this.m_elVideo.clientHeight},e.prototype.GetAvgLoaderDownloadRate=function(){for(var e=0,t=0,n=0,o=[this.GetVideoLoader()];n<o.length;n++){var r=o[n];r&&(e+=r.GetAvgDownloadRate(),t++)}return 0==t?0:e/t},e.prototype.GameDataEventTrigger=function(){var e=this.GetGameLoader();if(e){var t=e.GetGameDataFrames(),n=-1;if((n=t.length-1)>=0){var o=t[n];o.pts!=this.m_nGameDataLastFramePTS&&(this.m_nGameDataLastFramePTS=o.pts,o.gamedata.appid=e.GetLatestGameDataFrameAppID(),this.DispatchEvent("valve-gamedataupdate",o))}this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)}},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var n=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(n)},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=p.a(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.ReportPlayerStats=function(){this.m_stats.ReportPlayerStats(this.m_rgLoaders,this.m_elVideo),this.m_schReportPlayerTrigger.Schedule(3e5,this.ReportPlayerStats)},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_stats.CaptureFrequentlyUpdatingInformation(this.m_elVideo,this.m_rgLoaders),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.GetVideoRepresentations=function(){var e=[];if(e.push({id:"auto",displayName:"Auto",selected:null===this.m_videoRepSelected}),this.m_bUseHLSManifest)return e;var t=this.GetCurrentVideoAdaptation();if(t)for(var n=0,o=t.rgRepresentations;n<o.length;n++){var r=o[n],i=this.m_videoRepSelected&&this.m_videoRepSelected.strID==r.strID,a=r.nFrameRate;a>50&&r.nFrameRate<70?a=60:a>25&&a<35&&(a=30);var s=r.nWidth+"x"+r.nHeight+" @ "+a+"fps";e.push({id:r.strID,displayName:s,selected:i,width:r.nWidth,fps:a})}return e.sort((function(e,t){return e.width===t.width?t.fps-e.fps:t.width-e.width})),e},e.prototype.SetVideoRepresentation=function(e){var t=!0,n=this.GetVideoLoader();if(e&&"auto"!=e.id){var o=n.GetRepresentationByID(e.id);o&&(t=!1,null!==this.m_videoRepSelected&&this.m_videoRepSelected.strID==o.strID||(this.m_videoRepSelected=o,n.ChangeRepresentation(o),this.Seek(this.GetCurrentPlayTime())))}t&&(this.m_videoRepSelected=null)},e.prototype.GetThumbnailForTimestamp=function(e){try{var t=this.m_mpd.GetPeriods()[0].rgAdaptationSets[0].segmentTemplate.nDuration/1e3,n=e-e%(10*t),o=Math.floor(n/t)+1,r=this.m_mpd.GetPeriods()[0].rgAdaptationSets[0].segmentTemplate.strMedia;return r=(r=(r=r.replace("/video/","/scrollthumb/")).replace("$RepresentationID$","1")).replace("$Number$",o.toString())}catch(e){return""}},Object(o.c)([m.a],e.prototype,"OnVisibilityChange",null),Object(o.c)([m.a],e.prototype,"UpdateMPD",null),Object(o.c)([m.a],e.prototype,"OnMediaSourceOpen",null),Object(o.c)([m.a],e.prototype,"OnMediaSourceEnded",null),Object(o.c)([m.a],e.prototype,"OnMediaSourceClose",null),Object(o.c)([m.a],e.prototype,"OnVideoWaiting",null),Object(o.c)([m.a],e.prototype,"OnVideoPause",null),Object(o.c)([m.a],e.prototype,"OnVideoResize",null),Object(o.c)([m.a],e.prototype,"OnDebugPrintEventInfoAndAvailableBuffer",null),Object(o.c)([m.a],e.prototype,"OnVideoError",null),Object(o.c)([m.a],e.prototype,"OnVideoCanPlay",null),Object(o.c)([m.a],e.prototype,"GetCurrentPlayTime",null),Object(o.c)([m.a],e.prototype,"OnVideoTimeUpdate",null),Object(o.c)([m.a],e.prototype,"GetPlaybackRate",null),Object(o.c)([m.a],e.prototype,"GetCDNAuthURLParameter",null),Object(o.c)([m.a],e.prototype,"OnSegmentDownloaded",null),Object(o.c)([m.a],e.prototype,"PlayOnElement",null),Object(o.c)([m.a],e.prototype,"OnSegmentDownloadFailed",null),Object(o.c)([m.a],e.prototype,"OnSegmentDownloadGone",null),Object(o.c)([m.a],e.prototype,"VerifyFirstSegementDownloadProgress",null),Object(o.c)([m.a],e.prototype,"GameDataEventTrigger",null),Object(o.c)([m.a],e.prototype,"ReportPlayerStats",null),Object(o.c)([a.k.bound],e.prototype,"CaptureStatsForDisplay",null),e}();function q(e){return e<360?480:e<480?720:4320}var K,Y=function(){function e(e){this.m_elVideo=null,this.m_peerConnection=null,this.m_schCandidateTimer=new l.b,this.m_listeners=new l.c,this.m_bFirstPlay=!0,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new l.b,this.m_stats=new x,this.m_elVideo=e}return e.prototype.PlayMPD=function(e){},e.prototype.PlayWebRTC=function(e,t,n,r,a){return Object(o.b)(this,void 0,void 0,(function(){var s,c=this;return Object(o.e)(this,(function(l){return this.m_strBroadcastSteamID=e,this.m_ulWebRTCSessionID=n,this.m_nHostCandidateGeneration=0,this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),s={iceServers:[{urls:["stun:"+r]},{urls:["turn:"+r],username:t,credential:n}],iceTransportPolicy:"relay"},this.m_peerConnection=new RTCPeerConnection(s),this.m_peerConnection.oniceconnectionstatechange=function(e){c.m_peerConnection&&(console.log("BroadcastWebRTC: ICE connection state changed to "+c.m_peerConnection.iceConnectionState),"failed"===c.m_peerConnection.iceConnectionState?c.OnWebRTCConnectionFailed():"disconnected"===c.m_peerConnection.iceConnectionState&&c.OnWebRTCConnectionRetry())}.bind(this),this.m_peerConnection.onicecandidate=function(e){if(e.candidate){var t=new FormData;t.append("broadcaststeamid",c.m_strBroadcastSteamID),t.append("webrtc_session_id",c.m_ulWebRTCSessionID),t.append("sdp_mid",e.candidate.sdpMid),t.append("sdp_mline_index",String(e.candidate.sdpMLineIndex)),t.append("candidate",e.candidate.candidate),i.a.post(d.c.CHAT_BASE_URL+"broadcast/addbroadcastwebrtccandidate",t).then((function(e){var t=e.data;t.success&&1==t.success||console.log("Failed to add a WebRTC session ICE candidate: "+String(t.success))})).catch((function(e){return console.log("Failed to add a WebRTC session ICE candidate"+e)}))}}.bind(this),this.m_peerConnection.ontrack=function(e){"video"===e.track.kind&&(c.m_elVideo.src=null,c.m_elVideo.srcObject=e.streams[0],c.Play())}.bind(this),this.m_peerConnection.setRemoteDescription({type:"offer",sdp:a}).then((function(){return Object(o.b)(c,void 0,void 0,(function(){var e,t,n,r,a=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=(e=this.m_peerConnection).setLocalDescription,[4,this.m_peerConnection.createAnswer()];case 1:return[4,t.apply(e,[o.sent()])];case 2:o.sent(),(n=new FormData).append("broadcaststeamid",this.m_strBroadcastSteamID),n.append("webrtc_session_id",this.m_ulWebRTCSessionID),n.append("answer",this.m_peerConnection.localDescription.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,i.a.post(d.c.CHAT_BASE_URL+"broadcast/setbroadcastwebrtcanswer",n).then((function(e){var t=e.data;if(!t.success||1!=t.success)throw new Error(String(t.success))}))];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),console.log("Failed to set the WebRTC session answer: "+r),this.OnWebRTCConnectionRetry(),[2];case 6:return this.m_nCandidateUpdateIntervalMS=250,this.m_schCandidateTimer.Schedule(this.m_nCandidateUpdateIntervalMS,(function(){return a.GetHostCandidates()})),[2]}}))}))})),[2]}))}))},e.prototype.GetHostCandidates=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:(e=new FormData).append("broadcaststeamid",this.m_strBroadcastSteamID),e.append("webrtc_session_id",this.m_ulWebRTCSessionID),e.append("candidate_generation",String(this.m_nHostCandidateGeneration)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(d.c.CHAT_BASE_URL+"broadcast/getbroadcastwebrtccandidates",e).then((function(e){var t=e.data,o=t.data;if(!t.success||1!=t.success)throw new Error(String(t.success));o.candidate_generation>n.m_nHostCandidateGeneration?(o.candidates.forEach((function(e){var t=new RTCIceCandidate({sdpMid:e.sdp_mid,sdpMLineIndex:e.sdp_mline_index,candidate:e.candidate});n.m_peerConnection.addIceCandidate(t).catch((function(e){return console.error(e)}))})),n.m_nHostCandidateGeneration=o.candidate_generation):n.m_nHostCandidateGeneration>0&&(n.m_nCandidateUpdateIntervalMS*=2)}))];case 2:return o.sent(),[3,4];case 3:return t=o.sent(),console.log("Failed to get WebRTC session ICE candidates"+t),this.OnWebRTCConnectionRetry(),[2];case 4:return this.m_schCandidateTimer.Schedule(this.m_nCandidateUpdateIntervalMS,(function(){return n.GetHostCandidates()})),[2]}}))}))},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var n=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(n)},e.prototype.OnWebRTCConnectionRetry=function(){this.DispatchEvent("valve-webrtcretry")},e.prototype.OnWebRTCConnectionFailed=function(){this.DispatchEvent("valve-webrtcfailed")},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_schCandidateTimer.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_peerConnection&&(this.m_peerConnection.close(),this.m_peerConnection=null),this.m_elVideo.pause(),this.m_elVideo.srcObject=null,this.m_stats&&(this.m_stats.GetFPSMonitor().Close(),this.m_stats=null),this.m_bFirstPlay=!0},e.prototype.IsBuffering=function(){return!1},e.prototype.GetCurrentPlayTime=function(){return 0},e.prototype.GetLiveContentStartTime=function(){return null},e.prototype.GetAvailableVideoStartTime=function(){return 0},e.prototype.GetBufferedLiveEdgeTime=function(){return 0},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){var e=this,t=this.m_bFirstPlay;this.m_bFirstPlay=!1;var n=this.m_elVideo.play();n?n.then((function(){e.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))})).catch((function(n){t&&e.DispatchEvent("valve-userinputneeded")})):this.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))},e.prototype.Pause=function(){this.m_elVideo.pause()},e.prototype.CanSeek=function(){return!1},e.prototype.SeekAndPlay=function(e){return this.Play(),0},e.prototype.Seek=function(e){return 0},e.prototype.JumpTime=function(e){return 0},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=p.a(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.OnVideoPause=function(e){this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.GetVideoRepresentations=function(){var e=[];return e.push({id:"auto",displayName:"Auto",selected:!0}),e},e.prototype.SetVideoRepresentation=function(e){},e.prototype.IsLiveContent=function(){return!0},e.prototype.GetThumbnailForTimestamp=function(e){return""},Object(o.c)([m.a],e.prototype,"PlayWebRTC",null),Object(o.c)([a.k.bound],e.prototype,"CaptureStatsForDisplay",null),Object(o.c)([m.a],e.prototype,"OnVideoPause",null),Object(o.c)([m.a],e.prototype,"OnVideoResize",null),e}(),X=n("XCHq");!function(e){e[e.None=0]="None",e[e.Loading=1]="Loading",e[e.Ready=2]="Ready",e[e.Error=3]="Error"}(K||(K={}));var Q,J=function(){function e(){this.m_steamIDBroadcast="",this.m_ulBroadcastID="",this.m_ulViewerToken="",this.m_strCDNAuthUrlParameters=void 0,this.m_bWebRTC=!1,this.m_eWatchState=K.None,this.m_strStateDescription="",this.m_rgVideos=[],this.m_schManifestTimeout=new l.b,this.m_schHeartbeatTimeout=new l.b}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==K.Error&&console.log(this.m_strStateDescription)},Object(o.c)([a.B],e.prototype,"m_ulBroadcastID",void 0),Object(o.c)([a.B],e.prototype,"m_eWatchState",void 0),Object(o.c)([a.B],e.prototype,"m_strStateDescription",void 0),Object(o.c)([a.k],e.prototype,"SetState",null),e}(),Z=function(){function e(e){this.m_steamIDBroadcast="",this.m_strTitle="",this.m_strAppId="",this.m_strAppTitle="",this.m_strThumbnailUrl="",this.m_nViewerCount=0,this.m_bIsOnline=!1,this.m_schUpdateTimeout=new l.b,this.m_nRefCount=0,this.m_steamIDBroadcast=e}return Object(o.c)([a.B],e.prototype,"m_strTitle",void 0),Object(o.c)([a.B],e.prototype,"m_strAppId",void 0),Object(o.c)([a.B],e.prototype,"m_strAppTitle",void 0),Object(o.c)([a.B],e.prototype,"m_strThumbnailUrl",void 0),Object(o.c)([a.B],e.prototype,"m_nViewerCount",void 0),Object(o.c)([a.B],e.prototype,"m_bIsOnline",void 0),e}(),$=function(){function e(){this.m_eWatchState=K.None,this.m_strStateDescription="",this.m_rgVideos=[]}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==K.Error&&console.log(this.m_strStateDescription)},Object(o.c)([a.B],e.prototype,"m_eWatchState",void 0),Object(o.c)([a.B],e.prototype,"m_strStateDescription",void 0),Object(o.c)([a.k],e.prototype,"SetState",null),e}(),ee=function(){function e(){this.m_mapBroadcasts=new Map,this.m_mapClips=new Map,this.m_activeVideo=null,this.m_broadcastSettings={nVolume:1,bMuted:!1,ulViewerToken:"0"},this.m_schSaveSettings=new l.b,this.m_broadcastInfos={},this.LoadBroadcastSettings()}return e.prototype.GetBroadcastState=function(e){if(e.IsBroadcastClip()){var t=this.m_mapClips.get(e.GetBroadcastClipID());return t?t.m_eWatchState:K.None}var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return n?n.m_eWatchState:K.None},e.prototype.GetBroadcastStateDescription=function(e){if(e.IsBroadcastClip()){var t=this.m_mapClips.get(e.GetBroadcastClipID());return t?t.m_strStateDescription:""}var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return n?n.m_strStateDescription:""},e.prototype.CreateBroadcastVideo=function(e,t,n,o){var r=this.GetOrCreateBroadcast(t),i=this.m_broadcastSettings,a=i.nVolume,s=i.bMuted,c=new te(e,a,s,n);return c.SetBroadcastSteamID(t),r.m_rgVideos.push(c),r.m_bWebRTC=o,Object(y.a)()||Object(y.b)()||r.SetState(K.Error,Object(u.d)("#BroadcastWatch_MinBrowser")),c},e.prototype.CreateClipVideo=function(e,t,n){var o=this.GetOrCreateClip(t),r=this.m_broadcastSettings,i=r.nVolume,a=r.bMuted,s=new te(e,i,a,n);return s.SetBroadcastClipID(t),o.m_rgVideos.push(s),Object(y.a)()||Object(y.b)()||o.SetState(K.Error,Object(u.d)("#BroadcastWatch_MinBrowser")),s},e.prototype.StartVideo=function(e){if(e.IsBroadcastClip()){console.log("Starting clip for "+e.GetBroadcastClipID());var t=this.m_mapClips.get(e.GetBroadcastClipID());if(!t)return;this.SetActiveVideo(e),t.m_eWatchState==K.None?this.GetClipManifest(t,e.GetWatchLocation()):t.m_eWatchState==K.Ready&&e.StartClip(t)}else{console.log("Starting broadcast for "+e.GetBroadcastSteamID());var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());if(!n)return;this.SetActiveVideo(e),n.m_eWatchState==K.None?this.GetBroadcastManifest(n,e.GetWatchLocation()):n.m_eWatchState==K.Ready&&e.StartBroadcast(n)}},e.prototype.SetActiveVideo=function(e){this.m_mapBroadcasts.forEach((function(t){for(var n=0,o=t.m_rgVideos;n<o.length;n++){var r=o[n];r!=e&&r.StopPlaybackTillUserInput()}})),this.m_mapClips.forEach((function(t){for(var n=0,o=t.m_rgVideos;n<o.length;n++){var r=o[n];r!=e&&r.StopPlaybackTillUserInput()}})),this.m_activeVideo=e},e.prototype.PauseAllVideo=function(){this.m_mapBroadcasts.forEach((function(e){for(var t=0,n=e.m_rgVideos;t<n.length;t++){n[t].StopPlaybackTillUserInput()}}))},e.prototype.StopVideo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(r){return t=e.GetBroadcastSteamID(),n=this.m_mapBroadcasts.get(t),e.Stop(),n?(n.m_ulBroadcastID&&function(e,t,n){Object(o.b)(this,void 0,void 0,(function(){var r;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!t)return[2];(r=new FormData).append("steamid",e),r.append("broadcastid",t),r.append("viewertoken",n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(d.c.CHAT_BASE_URL+"broadcast/stopwatching",r)];case 2:return o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2]}}))}))}(t,n.m_ulBroadcastID,this.m_broadcastSettings.ulViewerToken),s.d(n.m_rgVideos,(function(t){return t==e})),this.RemoveBroadcastIfUnused(n),[2]):[2]}))}))},e.prototype.StartInfo=function(e){var t=this.GetOrCreateBroadcastInfo(e);return t.m_nRefCount++,1===t.m_nRefCount&&this.LoadBroadcastInfo(t),t},e.prototype.StopInfo=function(e){e.m_nRefCount--,0===e.m_nRefCount&&(e.m_schUpdateTimeout.Cancel(),delete this.m_broadcastInfos[e.m_steamIDBroadcast])},e.prototype.GetOrCreateBroadcastInfo=function(e){if(!this.m_broadcastInfos[e]){var t=new Z(e);this.m_broadcastInfos[e]=t}return this.m_broadcastInfos[e]},e.prototype.GetOrCreateBroadcast=function(e){var t=this.m_mapBroadcasts.get(e);return t||((t=new J).m_steamIDBroadcast=e,t.m_eWatchState=K.None,this.m_mapBroadcasts.set(e,t),t)},e.prototype.GetBroadcast=function(e){return this.m_mapBroadcasts.get(e)},e.prototype.GetBroadcastClip=function(e){return this.m_mapClips.get(e)},e.prototype.RemoveBroadcastIfUnused=function(e){e.m_rgVideos.length||(e.m_schHeartbeatTimeout.Cancel(),e.m_schManifestTimeout.Cancel(),this.m_mapBroadcasts.delete(e.m_steamIDBroadcast))},e.prototype.GetOrCreateClip=function(e){var t=this.m_mapClips.get(e);return t||((t=new $).m_clipID=e,t.m_eWatchState=K.None,this.m_mapClips.set(e,t),t)},e.prototype.LoadBroadcastInfo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a,s,c,l,u=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:t="0",(n=this.m_mapBroadcasts.get(e.m_steamIDBroadcast))&&(t=n.m_ulBroadcastID),r={steamid:e.m_steamIDBroadcast,broadcastid:t,location:n&&n.m_rgVideos&&n.m_rgVideos[0]&&n.m_rgVideos[0].GetWatchLocation()},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(d.c.CHAT_BASE_URL+"broadcast/getbroadcastinfo/",{params:r})];case 2:return(a=o.sent())&&a.data?(s=a.data,e.m_strTitle=s.title,e.m_strAppId=s.appid,e.m_strAppTitle=s.app_title,e.m_strThumbnailUrl=s.thumbnail_url,e.m_nViewerCount=s.viewer_count,e.m_bIsOnline=s.is_online,!e.m_strTitle&&X.b&&(e.m_strTitle=X.b.name,e.m_strAppTitle=X.b.appName||X.b.name),(c=s.update_interval)&&"number"==typeof c&&e.m_schUpdateTimeout.Schedule(1e3*c,(function(){return u.LoadBroadcastInfo(e)})),[3,4]):[2];case 3:return l=o.sent(),console.error(l),[3,4];case 4:return[2]}}))}))},e.prototype.GetBroadcastManifest=function(e,t,n){return void 0===n&&(n=Date.now()),Object(o.b)(this,void 0,void 0,(function(){var r,a,s,c,l,p,m,h=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:e.SetState(K.Loading,""),r={steamid:e.m_steamIDBroadcast,broadcastid:0,viewertoken:this.m_broadcastSettings.ulViewerToken,watchlocation:t,sessionid:d.c.SESSIONID,is_webrtc:e.m_bWebRTC},a=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(d.c.CHAT_BASE_URL+"broadcast/getbroadcastmpd/",{params:r,withCredentials:!0})];case 2:return a=o.sent(),[3,4];case 3:return s=o.sent(),console.error(s),console.log("Failed to get broadcast manifest!"),[3,4];case 4:if(!a||200!=a.status)return e.SetState(K.Error,Object(u.d)("#BroadcastWatch_RequestFailed")),[2];if((c=a.data).viewertoken&&this.SetViewerToken(c.viewertoken),"ready"==(l=c.success))e.SetState(K.Ready),e.m_ulBroadcastID=c.broadcastid,e.m_ulViewerToken=this.m_broadcastSettings.ulViewerToken,e.m_strCDNAuthUrlParameters=c.cdn_auth_url_parameters,e.m_bWebRTC=c.is_webrtc,e.m_data=c,this.LoadBroadcast(e),setTimeout((function(){e.m_schHeartbeatTimeout.Schedule(1e3*e.m_data.heartbeat_interval,(function(){return h.HeartbeatBroadcast(e)}))}),3e4*Math.random());else if("waiting"==l){if(e.SetState(K.Loading,Object(u.d)("#BroadcastWatch_WaitingForResponse")),(p=Date.now()-n)>6e4)return e.SetState(K.Error,Object(u.d)("#BroadcastWatch_NotAvailable")),[2];m=p>3e4?c.retry:5e3,e.m_schManifestTimeout.Schedule(m,(function(){return h.GetBroadcastManifest(e,t,n)}))}else"waiting_for_start"==l?(e.SetState(K.Loading,Object(u.d)("#BroadcastWatch_WaitingForStart")),e.m_schManifestTimeout.Schedule(c.retry,(function(){return h.GetBroadcastManifest(e,t,n)}))):"waiting_for_reconnect"==l?(e.SetState(K.Loading,Object(u.d)("#BroadcastWatch_WaitingForReconnect")),e.m_schManifestTimeout.Schedule(c.retry,(function(){return h.GetBroadcastManifest(e,t,n)}))):"end"==l?e.SetState(K.Error,Object(u.d)("#BroadcastWatch_NotAvailable")):"noservers"==l?e.SetState(K.Error,Object(u.d)("#BroadcastWatch_ServerLoad")):"system_not_supported"==l?e.SetState(K.Error,Object(u.d)("#BroadcastWatch_SystemNotSupported")):"user_restricted"==l?e.SetState(K.Error,Object(u.d)("#BroadcastWatch_UserRestricted")):"poor_upload_quality"==l?e.SetState(K.Error,Object(u.d)("#BroadcastWatch_PoorUploadQuality")):"request_failed"==l?e.SetState(K.Error,Object(u.d)("#BroadcastWatch_RequestFailed")):e.SetState(K.Error,Object(u.d)("#BroadcastWatch_NotAvailable"));return[2]}}))}))},e.prototype.GetClipManifest=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:e.SetState(K.Loading,""),n={clipid:e.m_clipID,watchlocation:t,sessionid:d.c.SESSIONID},r=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(d.c.CHAT_BASE_URL+"broadcast/getclipdetails",{params:n,withCredentials:!0})];case 2:return r=o.sent(),[3,4];case 3:return a=o.sent(),console.error(a),console.log("Failed to get clip manifest!"),[3,4];case 4:return r&&200==r.status?(1==(s=r.data).success?(e.SetState(K.Ready),e.m_data=s,this.LoadClip(e)):e.SetState(K.Error,Object(u.d)("#BroadcastWatch_RequestFailed")),[2]):(e.SetState(K.Error,Object(u.d)("#BroadcastWatch_RequestFailed")),[2])}}))}))},e.prototype.HeartbeatBroadcast=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.e)(this,(function(o){return(t=new FormData).append("steamid",e.m_steamIDBroadcast),t.append("broadcastid",e.m_ulBroadcastID),t.append("viewertoken",this.m_broadcastSettings.ulViewerToken),i.a.post(d.c.CHAT_BASE_URL+"broadcast/heartbeat/",t),e.m_schHeartbeatTimeout.Schedule(1e3*e.m_data.heartbeat_interval,(function(){return n.HeartbeatBroadcast(e)})),[2]}))}))},e.prototype.LoadBroadcast=function(e){var t=this;e.m_rgVideos.findIndex((function(e){return e==t.m_activeVideo}))>=0&&this.m_activeVideo.StartBroadcast(e)},e.prototype.LoadClip=function(e){var t=this;e.m_rgVideos.findIndex((function(e){return e==t.m_activeVideo}))>=0&&this.m_activeVideo.StartClip(e)},e.prototype.BroadcastDownloadFailed=function(e,t){void 0===t&&(t=!0),e.Stop();var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());n&&n.m_eWatchState!=K.Loading&&(n.m_bWebRTC&&t&&(n.m_bWebRTC=!1),this.GetBroadcastManifest(n,e.GetWatchLocation()))},e.prototype.UserInputClickVideo=function(e){if(this.m_activeVideo!=e){this.PauseAllVideo();var t=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return this.m_activeVideo=e,void this.GetBroadcastManifest(t,e.GetWatchLocation())}e.UserInputClick()},e.prototype.LoadBroadcastSettings=function(){if(window.localStorage){var e=window.localStorage.getItem("broadcastSettings");if(e){var t=JSON.parse(e);if(t){Object.assign(this.m_broadcastSettings,t);var n=this.m_broadcastSettings;n.bMuted=!!n.bMuted,n.nVolume=p.a(n.nVolume,0,1),"string"!=typeof n.ulViewerToken&&(n.ulViewerToken="0")}}}},e.prototype.SaveBroadcastSettings=function(){var e=this;window.localStorage&&this.m_schSaveSettings.Schedule(1e3,(function(){try{window.localStorage.setItem("broadcastSettings",JSON.stringify(e.m_broadcastSettings))}catch(e){}}))},e.prototype.SetViewerToken=function(e){this.m_broadcastSettings.ulViewerToken!=e&&(this.m_broadcastSettings.ulViewerToken=e,this.SaveBroadcastSettings())},e.prototype.GetViewerToken=function(){return this.m_broadcastSettings.ulViewerToken},e.prototype.SaveVolumeChange=function(e,t){this.m_broadcastSettings.nVolume==e&&this.m_broadcastSettings.bMuted==t||(this.m_broadcastSettings.nVolume=e,this.m_broadcastSettings.bMuted=t,this.SaveBroadcastSettings())},Object(o.c)([a.B],e.prototype,"m_mapBroadcasts",void 0),e}();!function(e){e[e.Timeline=1]="Timeline",e[e.Minimap=2]="Minimap"}(Q||(Q={}));var te=function(){function e(e,t,n,o){this.m_elVideo=null,this.m_player=null,this.m_listeners=new l.c,this.m_gameDataParser=null,this.m_rgSubtitles=[],this.m_eWatchLocation=0,this.m_steamIDBroadcast=null,this.m_BroadcastInfo=null,this.m_broadcastClipID=null,this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_bOnLiveEdge=!1,this.m_nVolume=0,this.m_bMuted=!1,this.m_bUserInputNeeded=!1,this.m_bIsReplay=!1,this.m_nTimelineDuration=1800,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_editorStartTime=0,this.m_editorEndTime=0,this.m_rgMarkers=a.B.array(),this.m_rgSegments=a.B.array(),this.m_rgRegions=a.B.array(),this.m_elVideo=e,this.m_nVolume=t,this.m_bMuted=n,this.m_eWatchLocation=o}return e.prototype.SetBroadcastSteamID=function(e){this.m_steamIDBroadcast=e},e.prototype.GetBroadcastSteamID=function(){return this.m_steamIDBroadcast},e.prototype.GetWatchLocation=function(){return this.m_eWatchLocation},e.prototype.IsPaused=function(){return this.m_bPaused},e.prototype.GetPlaybackTime=function(){return this.m_nPlaybackTime},e.prototype.SetStatsViewIsVisible=function(e){this.m_player&&this.m_player.SetStatsViewIsVisible(e)},e.prototype.GetDASHPlayerStats=function(){return this.m_player.GetDASHPlayerStats()},e.prototype.BHasDASHStats=function(){return null!=this.m_player},e.prototype.IsTimelineMapActive=function(){return!1},e.prototype.CanSeek=function(){return this.m_player&&this.m_player.CanSeek()},e.prototype.IsBuffering=function(){return this.m_bBuffering},e.prototype.IsOnLiveEdge=function(){return this.m_bOnLiveEdge},e.prototype.GetVideoAvailableStartTime=function(){return this.m_nVideoStartPos},e.prototype.GetVolume=function(){return this.m_nVolume},e.prototype.GetUserInputNeeded=function(){return this.m_bUserInputNeeded},e.prototype.IsReplay=function(){return this.m_bIsReplay},e.prototype.IsBroadcastClip=function(){return null!=this.m_broadcastClipID},e.prototype.SetBroadcastClipID=function(e){this.m_broadcastClipID=e},e.prototype.GetBroadcastClipID=function(){return this.m_broadcastClipID},e.prototype.GetVideoRepresentations=function(){return this.m_player?this.m_player.GetVideoRepresentations():[]},e.prototype.SetVideoRepresentation=function(e){this.m_player.SetVideoRepresentation(e)},e.prototype.GetBroadcastInfo=function(){return this.m_BroadcastInfo},e.prototype.ListSubtitles=function(){return this.m_elVideo.textTracks},e.prototype.GetSubtitles=function(){for(var e=0;e<this.m_elVideo.textTracks.length;e++){var t=this.m_elVideo.textTracks[e];if("showing"===t.mode)return t}return null},e.prototype.SetSubtitles=function(e){for(var t=0;t<this.m_elVideo.textTracks.length;t++){var n=this.m_elVideo.textTracks[t];n.language===e?n.mode="showing":n.mode="disabled"}},e.prototype.GetBroadcastState=function(){return ne.GetBroadcastState(this)},e.prototype.GetBroadcastStateDescription=function(){return ne.GetBroadcastStateDescription(this)},e.prototype.InitPlayer=function(){Object(c.a)(!this.m_player,"Initialized twice?"),this.m_listeners.AddEventListener(this.m_elVideo,"playing",this.OnVideoPlaying),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-gamedataupdate",this.OnGameDataUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-downloadfailed",this.OnDownloadFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-webrtcretry",this.OnWebRTCRetry),this.m_listeners.AddEventListener(this.m_elVideo,"valve-webrtcfailed",this.OnWebRTCFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-userinputneeded",this.OnUserInputNeeded),this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_nTimelineDuration=1800,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_rgMarkers.clear(),this.m_rgSegments.clear(),this.m_bUserInputNeeded=!1,this.m_bIsReplay=!1},e.prototype.StartBroadcast=function(e){this.InitPlayer(),e.m_data.url?(this.m_player=new z(this.m_elVideo,!Object(y.a)()&&Object(y.b)()),this.m_player.PlayMPD(e.m_data.url,e.m_strCDNAuthUrlParameters,e.m_data.hls_url)):(this.m_player=new Y(this.m_elVideo),this.m_player.PlayWebRTC(this.m_steamIDBroadcast,e.m_ulViewerToken,e.m_data.webrtc_session_id,e.m_data.webrtc_turn_server,e.m_data.webrtc_offer_sdp)),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted);var t=this.m_player.GetDASHPlayerStats();t&&t.SetBroadcasterAndViewerInfo(this.m_steamIDBroadcast,d.i.steamid,e.m_ulBroadcastID,e.m_ulViewerToken,e.m_strCDNAuthUrlParameters),this.m_BroadcastInfo=ne.StartInfo(this.m_steamIDBroadcast)},e.prototype.StartClip=function(e){this.InitPlayer(),this.m_player=new z(this.m_elVideo),this.m_player.PlayMPD(e.m_data.clip_url),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted)},e.prototype.InitSubtitles=function(){var e=this;"76561198894692971"!==this.m_steamIDBroadcast&&"148618792083695635"!==this.m_steamIDBroadcast&&"148618792083694878"!==this.m_steamIDBroadcast||(this.m_rgSubtitles=d.c.SUPPORTED_LANGUAGES||[],setInterval((function(){return Object(o.b)(e,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,i.a.get("https://steamconfig.blob.core.windows.net/config/steamawards_offset.json")];case 1:return e=n.sent().data.offsetSeconds,(t=this.GetSubtitles())&&t.currentOffset!==e&&(Array.from(t.cues||[]).forEach((function(n){var o=e-(t.currentOffset||0);n.startTime+=o,n.endTime+=o})),t.currentOffset=e),[2]}}))}))}),5e3)),this.m_rgSubtitles.forEach((function(t){var n=document.createElement("track");n.kind="subtitles",n.label=t.displayName,n.srclang=t.value,n.src="/public/steamawards_"+t.value+".vtt?t=1549644543",e.m_elVideo.appendChild(n),n.addEventListener("load",(function(){e.ListSubtitles()[0].mode="disabled"}))})),"english"!==d.c.LANGUAGE&&this.SetSubtitles(d.c.LANGUAGE)},e.prototype.Stop=function(){this.m_listeners.Unregister(),this.m_BroadcastInfo&&(ne.StopInfo(this.m_BroadcastInfo),this.m_BroadcastInfo=null),this.m_gameDataParser=null,this.m_player&&(this.m_player.Close(),this.m_player=null)},e.prototype.TogglePlayPause=function(){!this.m_player||this.m_player.IsPaused()?this.Play():this.Pause()},e.prototype.Play=function(){console.log("Play ",this.m_steamIDBroadcast);var e=this.GetBroadcastState();e==K.None||this.IsBroadcastClip()?ne.StartVideo(this):e==K.Ready&&(ne.SetActiveVideo(this),this.m_player?this.m_player.Play():this.StartBroadcast(ne.GetBroadcast(this.m_steamIDBroadcast)))},e.prototype.Pause=function(){console.log("Pause ",this.m_steamIDBroadcast),this.m_player&&this.m_player.Pause()},e.prototype.JumpTime=function(e){this.m_player.JumpTime(e)},e.prototype.Seek=function(e){this.m_player.Seek(e)},e.prototype.SeekAndPlay=function(e){this.m_player.SeekAndPlay(e)},e.prototype.JumpToLiveEdge=function(){this.m_player.IsLiveContent()?this.SeekAndPlay(this.m_player.GetBufferedLiveEdgeTime()):this.SeekAndPlay(this.m_player.GetAvailableVideoStartTime())},e.prototype.SetVolume=function(e){this.m_player&&this.m_player.SetVolume(e),this.m_nVolume=this.m_player.GetVolume(),ne.SaveVolumeChange(e,this.m_bMuted)},e.prototype.SetMute=function(e){this.m_player&&this.m_player.SetMuted(e),this.m_bMuted=e,ne.SaveVolumeChange(this.m_nVolume,e)},e.prototype.IsMuted=function(){return this.m_bMuted},e.prototype.OnVideoPlaying=function(){this.m_bPaused=!1,0===this.m_editorStartTime&&0===this.m_editorEndTime&&(this.m_editorStartTime=this.GetVideoAvailableStartTime(),this.m_editorEndTime=this.GetVideoAvailableStartTime()+this.GetTimelineDuration())},e.prototype.OnVideoPause=function(){this.m_bPaused=!0},e.prototype.OnVideoTimeUpdate=function(){this.IsBroadcastClip()?(this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=this.m_player.GetBufferedLiveEdgeTime(),this.m_nTimelineDuration=this.m_nVideoEndPos-this.m_nVideoStartPos,this.m_bOnLiveEdge=!1,this.m_bBuffering=this.m_player.IsBuffering()):(this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=Math.max(this.m_player.GetBufferedLiveEdgeTime(),this.m_nPlaybackTime),this.m_bBuffering=this.m_player.IsBuffering(),this.m_bOnLiveEdge=this.m_nVideoEndPos-this.m_nPlaybackTime<5,this.m_player.IsPaused()&&(this.m_bOnLiveEdge=!1))},e.prototype.OnGameDataUpdate=function(e){var t=e.detail;if(t&&"object"==typeof t.gamedata){this.m_gameDataParser&&this.m_gameDataParser.GetAppID()==t.gamedata.__appid||(this.m_gameDataParser=new v(t.gamedata.__appid));var n=this.m_player.GetLiveContentStartTime().getTime();if("timelinemarkers"in t.gamedata){var o=this.m_gameDataParser.UpdateMarkers(t.gamedata.__timelinemarkers,n);o&&(this.m_rgMarkers.replace(o.rgMarkers||[]),this.m_rgSegments.replace(o.rgSegments||[]));var r=this.m_gameDataParser.UpdateRegions(t.gamedata.__regions);r&&this.m_rgRegions.replace(r)}else"soundtrack"in t.gamedata&&this.m_gameDataParser.UpdateSoundtrack(this.m_steamIDBroadcast,t.gamedata.soundtrack)}},e.prototype.OnDownloadFailed=function(){ne.BroadcastDownloadFailed(this)},e.prototype.OnWebRTCRetry=function(){ne.BroadcastDownloadFailed(this,!1)},e.prototype.OnWebRTCFailed=function(){ne.BroadcastDownloadFailed(this,!0)},e.prototype.OnUserInputNeeded=function(){this.m_bUserInputNeeded=!0},e.prototype.UserInputClick=function(){this.m_bUserInputNeeded=!1,this.m_player?this.JumpToLiveEdge():this.Play()},e.prototype.StopPlaybackTillUserInput=function(){this.Stop(),this.OnUserInputNeeded()},e.prototype.GetTimelineStartPos=function(){return this.m_nVideoEndPos-this.m_nTimelineDuration},e.prototype.GetTimelineDuration=function(){return this.m_nTimelineDuration},e.prototype.GetTimeAtMousePosition=function(e,t,n,o){var r=p.c(e,t.left,t.right,n,o);return Math.floor(r+.5)},e.prototype.GetPercentOffsetFromTime=function(e,t){var n=0,o=0;return t==Q.Timeline?n=(o=this.m_nVideoEndPos)-this.m_nTimelineDuration:(n=0,o=0),p.c(e,n,o,0,100)},e.prototype.GetTimelineMarkers=function(){return this.m_rgMarkers},e.prototype.GetTimelineSegments=function(){return this.m_rgSegments},e.prototype.GetGameDataRegions=function(){return this.m_rgRegions},e.prototype.BHasMarkersOrSegments=function(){return this.has_segments||this.has_markers},e.prototype.GetThumbnailForTimestamp=function(e){return this.m_player.GetThumbnailForTimestamp(e)},Object.defineProperty(e.prototype,"has_markers",{get:function(){return this.m_rgMarkers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_segments",{get:function(){return this.m_rgSegments.length>0},enumerable:!1,configurable:!0}),Object(o.c)([a.B],e.prototype,"m_bPaused",void 0),Object(o.c)([a.B],e.prototype,"m_nPlaybackTime",void 0),Object(o.c)([a.B],e.prototype,"m_bBuffering",void 0),Object(o.c)([a.B],e.prototype,"m_bOnLiveEdge",void 0),Object(o.c)([a.B],e.prototype,"m_nVolume",void 0),Object(o.c)([a.B],e.prototype,"m_bMuted",void 0),Object(o.c)([a.B],e.prototype,"m_bUserInputNeeded",void 0),Object(o.c)([a.B],e.prototype,"m_bIsReplay",void 0),Object(o.c)([a.B],e.prototype,"m_nTimelineDuration",void 0),Object(o.c)([a.B],e.prototype,"m_nVideoStartPos",void 0),Object(o.c)([a.B],e.prototype,"m_nVideoEndPos",void 0),Object(o.c)([a.B],e.prototype,"m_editorStartTime",void 0),Object(o.c)([a.B],e.prototype,"m_editorEndTime",void 0),Object(o.c)([a.k.bound],e.prototype,"StartBroadcast",null),Object(o.c)([a.k.bound],e.prototype,"StartClip",null),Object(o.c)([m.a],e.prototype,"OnVideoPlaying",null),Object(o.c)([m.a],e.prototype,"OnVideoPause",null),Object(o.c)([a.k.bound],e.prototype,"OnVideoTimeUpdate",null),Object(o.c)([a.k.bound],e.prototype,"OnGameDataUpdate",null),Object(o.c)([m.a],e.prototype,"OnDownloadFailed",null),Object(o.c)([m.a],e.prototype,"OnWebRTCRetry",null),Object(o.c)([m.a],e.prototype,"OnWebRTCFailed",null),Object(o.c)([m.a],e.prototype,"OnUserInputNeeded",null),e}(),ne=new ee;window.uiBroadcastWatchStore=ne},DMSt:function(e,t,n){e.exports={FriendsListInsetShadowCtn:"insetshadow_FriendsListInsetShadowCtn_1S167",FriendListInsetShadowTop:"insetshadow_FriendListInsetShadowTop_1mEmL",FriendListInsetShadowBottom:"insetshadow_FriendListInsetShadowBottom_3cl4u"}},E7zH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var o=n("mrSG"),r=n("UqDm"),i=n("1VtQ"),a=function(){function e(){this.m_vecCallbacks=[]}return e.prototype.Register=function(e){var t=this;this.m_vecCallbacks.push(e);return{Unregister:function(){r.c(t.m_vecCallbacks,e)}}},e.prototype.Dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=this.m_vecCallbacks;n<o.length;n++){var r=o[n];r.apply(void 0,e)}},e.prototype.ClearAllCallbacks=function(){this.m_vecCallbacks=[]},e}(),s=function(){function e(){}return e.prototype.Schedule=function(e,t){this.IsScheduled()&&this.Cancel(),this.m_fnCallback=t,this.m_schTimer=window.setTimeout(this.ScheduledInternal,e)},e.prototype.IsScheduled=function(){return void 0!==this.m_schTimer},e.prototype.Cancel=function(){this.m_schTimer&&(clearTimeout(this.m_schTimer),this.m_schTimer=void 0)},e.prototype.ScheduledInternal=function(){this.m_schTimer=void 0;var e=this.m_fnCallback;this.m_fnCallback=void 0,e()},Object(o.c)([i.a],e.prototype,"ScheduledInternal",null),e}(),c=function(){function e(){this.m_rgListeners=[]}return e.prototype.AddEventListener=function(e,t,n){e.addEventListener(t,n),this.m_rgListeners.push({element:e,type:t,listener:n})},e.prototype.Unregister=function(){for(var e=0,t=this.m_rgListeners;e<t.length;e++){var n=t[e];n.element.removeEventListener(n.type,n.listener)}this.m_rgListeners=[]},e}();function l(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=[],(n=Object.keys(e)).forEach((function(n){return t.push(e[n])})),[4,Promise.all(t)];case 1:return r=o.sent(),i={},[2,r.reduce((function(e,t,o){return e[n[o]]=t,e}),i)]}}))}))}},EGkk:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return O})),n.d(t,"a",(function(){return I})),n.d(t,"f",(function(){return E})),n.d(t,"i",(function(){return w})),n.d(t,"h",(function(){return M})),n.d(t,"j",(function(){return D}));var o=n("mrSG"),r=n("TyAF"),i=n("q1tI"),a=n("i8i4"),s=n("8o0Y"),c=n("JtU4"),l=n("/IDK"),u=n("1VtQ"),p=n("e2SU"),m=n("WpBz"),d=n("oh5H"),h=n("1n9R"),f=n("7Vyq"),_=n.n(f),g=n("QHER"),b=i.createContext(null),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.renderMenuContainer,a=Object(o.f)(e,["children","className","renderMenuContainer"]),s=this.context&&this.context.options.bUseWebStyles?"popup_menu popup_body":_.a.contextMenuContents;n&&(s+=" "+n);var c=r||"div";return i.createElement(c,Object(o.a)({},a,{className:s}),t)},t.contextType=b,t}(i.PureComponent),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnClick=function(e){this.props.disabled||(this.props.onClick&&this.props.onClick(e),this.props.bInteractableItem||(this.props.onSelected&&this.props.onSelected(e),this.context&&this.context.Hide()))},t.prototype.OnMouseEnter=function(e){this.context&&this.context.HideSubMenu()},t.prototype.render=function(){var e=this.props,t=(e.onSelected,e.bInteractableItem,e.renderMenuItem),n=Object(o.f)(e,["onSelected","bInteractableItem","renderMenuItem"]),r=[];this.context&&this.context.options.bUseWebStyles?r.push("popup_menu_item"):r.push(_.a.contextMenuItem,"contextMenuItem"),this.props.className&&r.push(this.props.className),this.props.disabled&&r.push("disabled");var a=t||"div";return i.createElement(a,Object(o.a)({onMouseEnter:this.OnMouseEnter},n,{onClick:this.OnClick,unselectable:this.props.unselectable,className:g.a.apply(void 0,r)}),this.props.children)},t.contextType=b,Object(o.c)([u.a],t.prototype,"OnClick",null),Object(o.c)([u.a],t.prototype,"OnMouseEnter",null),t}(i.PureComponent),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.bChecked,n=e.children,r=e.className,a=Object(o.f)(e,["bChecked","children","className"]);return i.createElement(y,Object(o.a)({},a,{className:Object(g.a)(r,t&&"menuChecked")}),i.createElement("div",{className:"contextMenuCheckMark"}),n)},t}(i.PureComponent),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bActive:!1},n}return Object(o.d)(t,e),t.prototype.OnSubMenuMouseEnter=function(){this.context&&this.context.CancelHideSubMenuTimer()},t.prototype.RenderSubMenu=function(){return i.createElement(v,{onMouseEnter:this.OnSubMenuMouseEnter},this.props.children)},t.prototype.OnMouseEnter=function(e){var t=this;if(this.context){var n=this.context.ShowSubMenu(e.currentTarget,this.RenderSubMenu);n&&(this.setState({bActive:!0}),n.SetOnHideCallback((function(){t.setState({bActive:!1})})))}},t.prototype.OnClick=function(e){this.OnMouseEnter(e),this.props.onClick&&this.props.onClick(e)},t.prototype.render=function(){var e=this.props,t=e.label,n=(e.children,e.className),r=Object(o.f)(e,["label","children","className"]);return i.createElement(y,Object(o.a)({},r,{onClick:this.OnClick,className:Object(g.a)(n,_.a.SubMenu,this.state.bActive&&_.a.active),onMouseEnter:this.OnMouseEnter,onSelected:null,bInteractableItem:!0}),i.createElement("div",{className:_.a.Label},t),i.createElement("div",{className:_.a.Arrow},i.createElement(p.p,null)))},t.contextType=b,Object(o.c)([u.a],t.prototype,"OnSubMenuMouseEnter",null),Object(o.c)([u.a],t.prototype,"RenderSubMenu",null),Object(o.c)([u.a],t.prototype,"OnMouseEnter",null),Object(o.c)([u.a],t.prototype,"OnClick",null),t}(i.PureComponent),O=function(e){function t(t){var n=e.call(this,t)||this;return n.m_elMenu=void 0,n.m_cReenteranceGuard=1,n.state={ready:!1,menuLeft:void 0,menuTop:void 0,menuRight:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},n.m_mutationObserver=new MutationObserver(n.OnMenuMutation),n}return Object(o.d)(t,e),t.prototype.BindMenuElement=function(e){var t=this;this.m_elMenu&&(this.m_mutationObserver.disconnect(),this.props.popup||this.m_elMenu.ownerDocument.defaultView.removeEventListener("resize",this.OnWindowResize)),e&&(this.m_mutationObserver.observe(e,{childList:!0,subtree:!0}),this.props.popup||e.ownerDocument.defaultView.addEventListener("resize",this.OnWindowResize)),this.m_elMenu=e||void 0,this.PositionMenu(),this.state.ready||(this.props.instance.SetTakeFocus(this.TakeFocus.bind(this)),this.setState({ready:!0},(function(){t.TakeFocus()})))},t.prototype.OnMenuMutation=function(e,t){this.PositionMenu()},t.prototype.OnWindowResize=function(){this.PositionMenu()},t.prototype.OnBlur=function(e){e.relatedTarget&&l.e(e.currentTarget,e.relatedTarget)||e.relatedTarget&&this.props.instance.BIsElementInMenuHierarchy(e.relatedTarget)||this.props.instance.BIsSubMenuVisible()||this.state.ready&&this.props.instance.visible&&this.props.instance.Hide()},t.prototype.OnKeyDown=function(e){27==e.keyCode&&this.state.ready&&(this.props.instance.Hide(),e.preventDefault(),e.stopPropagation())},t.prototype.componentDidUpdate=function(){this.m_cReenteranceGuard-- >0?this.PositionMenu():this.m_cReenteranceGuard=2},t.prototype.TakeFocus=function(){if(this.m_elMenu&&this.state.ready&&this.props.instance.visible&&(this.props.popup||!l.e(this.m_elMenu,this.m_elMenu.ownerDocument.activeElement))){var e=this.m_elMenu.querySelector(".ContextMenuAutoFocus");e&&e.focus?e.focus():this.m_elMenu.focus()}},t.prototype.PositionMenu=function(){var e=this.m_elMenu,t=this.props.element;if(e&&t){var n=t.ownerDocument.defaultView;e.ownerDocument.defaultView.CtxUpdate=this.PositionMenu.bind(this);var o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=null!=this.props.popup,a=this.props.options,s={menuLeft:void 0,menuRight:void 0,menuTop:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},c=this.props.clientX,u=this.props.clientY,p=n.innerWidth,m=n.innerHeight;if(i){this.props.options.bScreenCoordinates||(c+=n.screenLeft,u+=n.screenTop),o=l.h(n,o);var d=n.screen,h=0,f=0;d.availLeft&&(h=d.availLeft),d.availTop&&(f=d.availTop),p=h+d.availWidth,m=f+d.availHeight}(a.bOverlapHorizontal||a.bOverlapVertical)&&(c=u=void 0);var _=c||o.left,g=c||o.right,b=r.width;a.bMatchWidth&&(b=g-_,s.menuWidth=b);var v=(a.bOverlapHorizontal?g:_)-b,y=v>0,S=p-(a.bOverlapHorizontal?_:g)-b,C=S>0,O=(a.bPreferPopLeft||!C)&&y;y||C||(O=y>C,a.bFitToWindow&&(b+=(O?v:S)-8,s.menuWidth=b)),!a.bPreferPopLeft&&C||!y?s.menuLeft=a.bOverlapHorizontal?_:g:s.menuRight=p-(a.bOverlapHorizontal?g:_);var I=u||o.top,E=u||o.bottom,w=e.scrollHeight;a.bMatchHeight&&(w=E-I,s.menuHeight=w);var M=(a.bOverlapVertical?E:I)-w,D=M>0,T=m-(a.bOverlapVertical?I:E)-w,j=T>0,G=(a.bPreferPopTop||!j)&&D&&!a.bDisablePopTop;if(!D&&!j){var R=void 0!==a.bShiftToFitWindow?a.bShiftToFitWindow:a.bFitToWindow&&!a.bOverlapHorizontal;G=M>T&&!a.bDisablePopTop,R&&(G?s.menuTop=4:s.menuBottom=4),a.bFitToWindow&&(R?w=Math.min(w,m-8):w+=G?M:T,s.menuHeight=w-8)}void 0===s.menuBottom&&void 0===s.menuTop&&(G?s.menuBottom=m-(a.bOverlapVertical?E:I):s.menuTop=a.bOverlapVertical?I:E),i?(s.menuHeight||(s.menuHeight=r.height),s.menuWidth||(s.menuWidth=r.width),s.menuBottom&&!s.menuTop&&(s.menuTop=m-s.menuBottom-s.menuHeight,s.menuBottom=void 0),s.menuRight&&!s.menuLeft&&(s.menuLeft=p-s.menuRight-s.menuWidth,s.menuRight=void 0)):(s.menuLeft&&(s.menuLeft+=n.scrollX),s.menuTop&&(s.menuTop+=n.scrollY),s.menuBottom&&(s.menuBottom+=n.document.body.clientHeight-n.scrollY-n.innerHeight),s.menuRight&&(s.menuRight+=n.document.body.clientWidth-n.scrollX-n.innerWidth)),s.menuLeft===this.state.menuLeft&&s.menuRight===this.state.menuRight&&s.menuTop===this.state.menuTop&&s.menuBottom===this.state.menuBottom&&s.menuWidth===this.state.menuWidth&&s.menuHeight===this.state.menuHeight||this.setState(s)}},t.prototype.render=function(){var e=this,t={visibility:this.state.ready?"visible":"hidden"};if(this.props.popup){var n=this.props.element.ownerDocument.defaultView;void 0!==this.state.menuLeft&&void 0!==this.state.menuTop&&void 0!==this.state.menuWidth&&void 0!==this.state.menuHeight&&n.SteamClient.Window.GetWindowRestoreDetails((function(t){var o=e.props.popup.window,r=e.state.menuLeft-n.screenX,i=e.state.menuTop-n.screenY;try{o.SteamClient.Window.PositionWindowRelative(t,r,i,e.state.menuWidth,e.state.menuHeight)}catch(e){console.error(e)}}))}else void 0!==this.state.menuTop?t.top=this.state.menuTop:void 0!==this.state.menuBottom&&(t.bottom=this.state.menuBottom),void 0!==this.state.menuLeft?t.left=this.state.menuLeft:void 0!==this.state.menuRight&&(t.right=this.state.menuRight),void 0!==this.state.menuHeight&&(t.height=this.state.menuHeight),void 0!==this.state.menuWidth&&(t.width=this.state.menuWidth);var o=this.props.options.strClassName||(this.props.options.bUseWebStyles?"popup_block_new popup_block_hidden_until_visible":_.a.contextMenu);return this.props.instance.visible&&this.state.ready&&(o+=" visible"),o+=" "+_.a.ContextMenuFocusContainer,i.createElement(b.Provider,{value:this.props.instance},i.createElement("div",{className:o,ref:this.BindMenuElement,style:t,onBlur:this.OnBlur,onKeyDown:this.OnKeyDown,tabIndex:0},this.props.children))},Object(o.c)([u.a],t.prototype,"BindMenuElement",null),Object(o.c)([u.a,Object(m.a)(100)],t.prototype,"OnMenuMutation",null),Object(o.c)([u.a],t.prototype,"OnWindowResize",null),Object(o.c)([u.a],t.prototype,"OnBlur",null),Object(o.c)([u.a],t.prototype,"OnKeyDown",null),t=Object(o.c)([r.a],t)}(i.Component),I=function(e){function t(n,o,r){var i=e.call(this,"contextmenu_"+t.sm_iContextMenuInstance++,{title:"Menu",html_class:_.a.ContextMenuPopup+" client_chat_frame",body_class:"ContextMenuPopupBody",replace_existing_popup:!1,target_browser:r,eCreationFlags:c.c.ContextMenu})||this;return i.m_menuProps=n,i.m_children=o,i}return Object(o.d)(t,e),t.prototype.UpdateParamsBeforeShow=function(e){if(this.m_menuProps.options.bScreenCoordinates)e.dimensions={left:this.m_menuProps.clientX,top:this.m_menuProps.clientY,width:350,height:1};else{var t=l.h(this.m_menuProps.element.ownerDocument.defaultView,this.m_menuProps.element.getBoundingClientRect());e.dimensions={left:t.right,top:t.top,width:350,height:1}}return e.availscreenwidth=this.m_menuProps.element.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_menuProps.element.ownerDocument.defaultView.screen.availHeight,e},t.prototype.Render=function(e,t){a.render(i.createElement(O,Object(o.a)({},this.m_menuProps,{popup:this}),this.m_children),t)},t.prototype.OnBlur=function(){},t.prototype.OnFocus=function(){},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){},t.sm_iContextMenuInstance=0,t}(c.a);function E(e){return i.createElement("div",{className:_.a.ContextMenuMouseOverlay})}function w(e){var t=[],n=l.q(e),o=n.getSelection(),r=o&&o.rangeCount>0&&o.toString().length>0,a=e.target,c=!1;if(a&&"tagName"in a&&("INPUT"!=a.tagName&&"TEXTAREA"!=a.tagName||(c=!0)),(n.document.queryCommandEnabled("cut")||r&&c)&&t.push(i.createElement(y,{key:"cut",onSelected:function(){n.document.execCommand("cut")}},Object(d.d)("#ContextMenu_Cut"))),(document.queryCommandEnabled("copy")||r)&&t.push(i.createElement(y,{key:"copy",onSelected:function(){n.document.execCommand("copy")}},Object(d.d)("#ContextMenu_Copy"))),h.c.IN_CLIENT&&c&&t.push(i.createElement(y,{key:"paste",onSelected:function(){a.focus(),n.SteamClient._internal.Paste()}},Object(d.d)("#ContextMenu_Paste"))),t.length)Object(s.a)(i.createElement(v,null,t),e);else{if(e.shiftKey)return;e.preventDefault(),e.stopPropagation()}}function M(){return window.sessionStorage&&"true"==window.sessionStorage.getItem("DEBUG_StickyContextMenus")}function D(e){e?window.sessionStorage.setItem("DEBUG_StickyContextMenus","true"):window.sessionStorage.removeItem("DEBUG_StickyContextMenus")}},EnDp:function(e,t,n){e.exports={Picker:"addonpicker_Picker_1RXcE",Tabs:"addonpicker_Tabs_1WUqY",Tab:"addonpicker_Tab_10fDn",Active:"addonpicker_Active_2J8Y1",TabContent:"addonpicker_TabContent_1oDFo",Content:"addonpicker_Content_Gy8ET",ItemList:"addonpicker_ItemList_275Oe",Item:"addonpicker_Item_34KHH",SectionedPageTitle:"addonpicker_SectionedPageTitle_3rqU_",SectionTitle:"addonpicker_SectionTitle_1YfVL",FilterInputContainer:"addonpicker_FilterInputContainer_1RAg8",FilterInput:"addonpicker_FilterInput_2tfTm",AddonPickerMessage:"addonpicker_AddonPickerMessage_2n0lH"}},Ezvv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var o=n("1n9R"),r={success:!0,result:1},i=function(){function e(){this.m_connection=new a,this.m_bAllowAccountMismatch=!1,this.m_mapCacheSubscribedApp=new Map}return e.prototype.FailureResult=function(e){void 0===e&&(e=2);var t={success:!1,result:e};return this.m_connection&&!this.m_connection.browser_supported&&(t.browser_unsupported=!0),this.m_connection&&!this.m_connection.connected_to_client&&(t.connect_failed=!0),7==e&&(t.call_unsupported=!0),t},e.prototype.SetAllowAccountMismatch=function(e){this.m_bAllowAccountMismatch=e},e.prototype.BClientConnected=function(){var e=this;return this.m_connection.Connect().then((function(){return r}),(function(){return e.FailureResult()}))},e.prototype.BClientSupportsMessage=function(e){return!(!this.m_connection.connected_to_client||!this.m_connection.ready)&&-1!==this.m_connection.ClientInfo.rgSupportedMessages.indexOf(e)},e.prototype.OpenFriendChatDialog=function(e){var t={message:"ShowFriendChatDialog",steamid:e};return this.GenericEResultCall(t)},e.prototype.OpenChatRoomGroupDialog=function(e,t){var n={message:"ShowChatRoomGroupDialog",chat_group_id:e};return t&&(n.chat_room_id=t),this.GenericEResultCall(n)},e.prototype.ShowChatRoomGroupInvite=function(e){var t={message:"ShowChatRoomGroupInvite",invite_code:e};return this.GenericEResultCall(t)},e.prototype.OpenJoinGameDialog=function(e){var t={message:"ShowJoinGameDialog",friend_id:e};return this.GenericEResultCall(t)},e.prototype.BIsSubscribedApp=function(e){var t=this;if(this.m_mapCacheSubscribedApp.has(e))return Promise.resolve(this.m_mapCacheSubscribedApp.get(e));var n={message:"IsSubscribedApp",appid:e};return this.GenericEResultCall(n).then((function(n){if(!n.connect_failed){var o=1==n.result;return t.m_mapCacheSubscribedApp.set(e,o),o}}))},e.prototype.ViewGameInfoForSteamID=function(e){var t={message:"ViewGameInfoForSteamID",steamid:e};return this.GenericEResultCall(t)},e.prototype.OpenFriendsDialog=function(){return this.GenericEResultCall({message:"OpenFriendsDialog"})},e.prototype.BClientAccountMatches=function(){return!o.i.logged_in||o.i.accountid==this.m_connection.ClientInfo.unAccountID},e.prototype.GenericEResultCall=function(e){var t=this;return this.m_connection.Connect().then((function(){return t.m_bAllowAccountMismatch||t.BClientAccountMatches()?t.m_connection.SendMsgAndAwaitResponse(e).then((function(e){return 1===e.success?r:t.FailureResult(e.success)})):{success:!1,result:19,account_mismatch:!0}})).catch((function(){return t.FailureResult()}))},e}(),a=function(){function e(){this.m_mapWaitingCallbacks=new Map,this.m_iCallSeq=1,this.m_bReady=!1,this.m_bClientConnectionFailed=!1,this.m_bSecurityException=!1,this.m_ClientInfo={ulVersion:"",bFriendsUIEnabled:!1,unAccountID:0,rgSupportedMessages:[]}}return Object.defineProperty(e.prototype,"ClientInfo",{get:function(){return this.m_ClientInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this.m_bReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"browser_supported",{get:function(){return!this.m_bSecurityException},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connected_to_client",{get:function(){return this.m_socket&&this.m_socket.readyState==WebSocket.OPEN},enumerable:!1,configurable:!0}),e.prototype.SendMsgAndAwaitResponse=function(e){var t=this;return new Promise((function(n,o){var r=t.m_iCallSeq++;t.BSendMsg(e,r)?t.m_mapWaitingCallbacks.set(r,{iSeq:r,fnCallback:n,fnError:o}):o()}))},e.prototype.BSendMsg=function(e,t){if(!this.m_socket||this.m_socket.readyState!=WebSocket.OPEN)return!1;var n=Object.assign({},e,{universe:o.c.EUNIVERSE,accountid:o.i.accountid});void 0!==t&&(n.sequenceid=t);try{return this.m_socket.send(JSON.stringify(n)),!0}catch(e){return!1}},e.prototype.OnSocketMessage=function(e){try{var t=JSON.parse(e.data);if(t.sequenceid){var n=this.m_mapWaitingCallbacks.get(t.sequenceid);if(n)return this.m_mapWaitingCallbacks.delete(t.sequenceid),void n.fnCallback(t)}}catch(e){console.error("exception parsing response",e)}},e.prototype.Connect=function(){var e=this;if(this.m_bReady&&this.m_socket.readyState==WebSocket.OPEN)return Promise.resolve();if(this.m_promiseConnect)return this.m_promiseConnect;var t=new Promise((function(t,n){try{e.m_socket=new WebSocket("ws://127.0.0.1:27060/clientsocket/")}catch(t){return e.m_bSecurityException=!0,void n(t)}e.m_socket.onerror=function(e){n()},e.m_socket.onmessage=e.OnSocketMessage.bind(e),e.m_socket.onopen=function(){e.SendMsgAndAwaitResponse({message:"GetClientInfo"}).then((function(o){1==o.success?(e.m_ClientInfo.ulVersion=o.clientversion,e.m_ClientInfo.bFriendsUIEnabled=!!o.friendsui,e.m_ClientInfo.unAccountID=o.accountid,o.supported_messages&&(e.m_ClientInfo.rgSupportedMessages=o.supported_messages),t()):n()})).catch(n)}}));return this.m_promiseConnect=t,this.m_promiseConnect.then((function(){e.m_bReady=!0,e.m_promiseConnect=void 0})).catch((function(){e.m_bClientConnectionFailed=!0,e.m_promiseConnect=void 0})),this.m_promiseConnect},e}(),s=new i;window.ClientConnectionAPI=s},F2OU:function(e,t,n){e.exports={SnoozeContainer:"friendsnooze_SnoozeContainer_1OfTa",SnoozeZ:"friendsnooze_SnoozeZ_29fyi",none:"friendsnooze_none_lZX-E",Medium:"friendsnooze_Medium_2NSIM",Large:"friendsnooze_Large_2QDqq",Dim:"friendsnooze_Dim_10sPU",Z1:"friendsnooze_Z1_GU6T2",Z2:"friendsnooze_Z2_277XL",Z3:"friendsnooze_Z3_1gXQi",animating:"friendsnooze_animating_1pImE",hoverParent:"friendsnooze_hoverParent_3SgRH",Snoring:"friendsnooze_Snoring_6q8Na"}},FOB4:function(e,t,n){"use strict";function o(e,t){if(!e||!t)return[];for(var n=[],o=e.values(),r=o.next();!r.done;)t(r.value)&&n.push(r.value),r=o.next();return n}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var r=function(){function e(){this.m_itemCounts=new Map,this.m_nSize=0}return e.prototype.add=function(e){var t=this.m_itemCounts.get(e),n=null==t?1:t+1;return this.m_itemCounts.set(e,n),++this.m_nSize,this},e.prototype.clear=function(){this.m_itemCounts.clear(),this.m_nSize=0},e.prototype.delete=function(e){var t=this.m_itemCounts.get(e);return 0===(null==t?0:t-1)&&this.m_itemCounts.delete(e),--this.m_nSize,void 0!==t},e.prototype.has=function(e){return this.m_itemCounts.has(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this.m_nSize},enumerable:!1,configurable:!0}),e.prototype.entries=function(){return this.m_itemCounts.entries()},e.prototype.keys=function(){return this.m_itemCounts.keys()},e}()},FkUk:function(e,t,n){"use strict";n.d(t,"b",(function(){return z})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return X})),n.d(t,"d",(function(){return ne})),n.d(t,"c",(function(){return ae})),n.d(t,"a",(function(){return ce}));var o=n("mrSG"),r=n("LAqV"),i=n("hReu"),a=n("TyAF"),s=n("Hi0u"),c=n("q1tI"),l=n("1VtQ"),u=n("oh5H"),p=n("ljid");function m(e,t,n){Object(s.c)(c.createElement(d,{player:t}),n,"NicknameDialog",{strTitle:Object(u.d)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400},Object(i.g)(n))}var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={strCurrentNameEntry:n.props.player.nickname||""},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value})},t.prototype.HandleSubmit=function(e){var t=this;r.f.FriendStore.SetPlayerNickname(this.props.player,this.state.strCurrentNameEntry).then((function(e){1==e&&t.props.closeModal&&t.props.closeModal()}))},t.prototype.componentDidUpdate=function(e){e.player!==this.props.player&&this.setState({strCurrentNameEntry:this.props.player.nickname})},t.prototype.render=function(){var e="friend editNickname",t=this.props.player.has_nickname;return this.props.player.persona.is_ingame?e+=" ingame":this.props.player.persona.is_online&&(e+=" online"),t&&(e+=" nickNamed"),c.createElement(s.a,{className:"Dialog_EditNickName",onEscKeypress:this.props.closeModal},c.createElement(p.h,{classNameContent:"NicknameDialog",onSubmit:this.HandleSubmit},c.createElement(p.m,null,t?Object(u.d)("#Friend_Menu_ChangeNickname"):Object(u.d)("#Friend_Menu_AddNickname")),c.createElement(p.b,null,c.createElement(p.c,null,t?Object(u.d)("#Nickname_EditNickname"):Object(u.d)("#Nickname_AddANickname")),c.createElement(p.c,null,c.createElement("div",{className:e},c.createElement("img",{className:"avatarMedium",src:this.props.player.persona.avatar_url_full}),c.createElement("div",{className:"labelHolder"},c.createElement("div",{className:"mediumName"},this.props.player.secondary_display_name),c.createElement("div",{className:"nickNamedAs"},Object(u.d)("#Nickname_NickNameAsDialog")),c.createElement("div",{className:"mediumName asNickName"},c.createElement(p.o,{placeholder:t?Object(u.d)("#Nickname_PlaceHolderNickName"):Object(u.d)("#Nickname_PlaceHolderNickNameFresh"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0,bShowClearAction:!0})))))),c.createElement(p.j,null,c.createElement(p.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t=Object(o.c)([a.a],t)}(c.Component),h=n("y4mg"),f=n("s+DT"),_=n("/IDK"),g=n("bbBM"),b=n("2vnA");function v(e,t,n){var o=n?[n.accountid]:[];Object(s.c)(c.createElement(y,{browserContext:e,rgPreSelectedFriends:o}),t,"CreateFriendCategoryDialog",{strTitle:Object(u.d)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:700},Object(i.g)(t))}var y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={strNameEntry:t.group?t.group.name:"",strError:null,rgPickedFriends:t.rgPreSelectedFriends.map((function(e){return r.f.FriendStore.GetPlayer(e)}))},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strNameEntry:e.target.value,strError:null})},t.prototype.HandleSubmit=function(){var e=this,t=this.state.rgPickedFriends,n=this.state.strNameEntry;if(this.props.group){for(var o=new Set(this.props.group.GetCurrentMemberSet()),i=[],a=[],s=0,c=t;s<c.length;s++){var l=c[s];o.has(l.accountid)?o.delete(l.accountid):i.push(l.persona.m_steamid.ConvertTo64BitString())}o.forEach((function(e){a.push(f.a.InitFromAccountID(e).ConvertTo64BitString())})),r.f.FriendStore.FriendGroupStore.ManageGroup(this.props.group,n,i,a).then((function(t){t?e.props.closeModal&&e.props.closeModal():e.setState({strError:Object(u.d)("#FriendGroup_ManageGroup_ErrorFailed")})}))}else{if(!n)return void this.setState({strError:Object(u.d)("#FriendGroup_CreateGroup_ErrorNeedName")});var p=t.map((function(e){return e.persona.m_steamid.ConvertTo64BitString()}));r.f.FriendStore.FriendGroupStore.CreateGroup(n,p).then((function(t){t?e.props.closeModal&&e.props.closeModal():e.setState({strError:Object(u.d)("#FriendGroup_CreateGroup_ErrorFailed")})}))}},t.prototype.render=function(){var e=this;return c.createElement(s.a,{onEscKeypress:this.props.closeModal},c.createElement(p.h,{classNameContent:"ManageGroupDialog",onSubmit:this.HandleSubmit},c.createElement(p.m,null,this.props.group?Object(u.d)("#FriendGroup_Menu_Manage"):Object(u.d)("#FriendGroup_Menu_CreateGroup")),c.createElement(p.b,null,this.state.strError&&c.createElement(p.c,{className:"nicknameError"},this.state.strError),c.createElement(p.o,{type:"text",label:Object(u.d)("#FriendGroup_CategoryName"),className:"nicknameInput",value:this.state.strNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),c.createElement(h.a,{label:Object(u.d)("#FriendGroup_CategoryMembers"),eSort:1,rgPickedFriends:this.state.rgPickedFriends,onChange:function(t){return e.setState({rgPickedFriends:t})}})),c.createElement(p.j,null,c.createElement(p.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t}(c.Component),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_mapCategoryChecks=b.B.map(),t.state={strError:null},t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.friend!==this.props.friend&&this.m_mapCategoryChecks.clear()},t.prototype.HandleSubmit=function(){var e=this,t=[];r.f.FriendStore.FriendGroupStore.user_groups.forEach((function(n){if(e.m_mapCategoryChecks.has(n.unique_id)){var o=void 0,i=void 0;e.m_mapCategoryChecks.get(n.unique_id)?i=n:o=n,t.push(r.f.FriendStore.FriendGroupStore.TransferFriendFromToGroup(e.props.friend,o,i))}})),Promise.all(t).then((function(t){for(var n=!1,o=0,r=t;o<r.length;o++)for(var i=0,a=r[o];i<a.length;i++){a[i]||(n=!0)}n?e.setState({strError:Object(u.d)("#FriendGroup_ManageGroup_ErrorFailed")}):e.props.closeModal()}))},t.prototype.CreateNew=function(e){v(Object(i.e)(this,e),Object(_.q)(e),this.props.friend)},t.prototype.render=function(){return c.createElement(s.a,{onEscKeypress:this.props.closeModal},c.createElement(p.h,{classNameContent:"AssignCategoriesDialog",onSubmit:this.HandleSubmit},c.createElement(p.m,null,Object(u.d)("#FriendGroup_Categorize_Title")),c.createElement(p.b,null,this.state.strError&&c.createElement(p.c,{className:"nicknameError"},this.state.strError),c.createElement(p.D,null,c.createElement(p.f,null,c.createElement(g.c,{friend:this.props.friend,className:"AssignCategoriesDialog_Friend",noActions:!0,context:null}))),c.createElement(C,{friend:this.props.friend,mapChecks:this.m_mapCategoryChecks}),c.createElement(p.D,{className:"AssignCategoriesDialog_AddNewButton"},c.createElement(p.d,{onClick:this.CreateNew},Object(u.d)("#FriendGroup_Categorize_AddNew")))),c.createElement(p.j,null,c.createElement(p.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleSubmit",null),Object(o.c)([l.a],t.prototype,"CreateNew",null),t}(c.Component),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=r.f.FriendStore.FriendGroupStore.user_groups.map((function(t){return c.createElement(O,{friend:e.props.friend,group:t,key:t.unique_id,mapChecks:e.props.mapChecks})}));return c.createElement(c.Fragment,null,c.createElement(p.p,null,Object(u.d)("#FriendGroup_Categorize_Categories")),c.createElement("div",{className:"FriendCategoryCheckboxes_List"},t))},t=Object(o.c)([a.a],t)}(c.Component),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnToggle=function(e){e!=this.props.group.HasMember(this.props.friend.accountid)?this.props.mapChecks.set(this.props.group.unique_id,e):this.props.mapChecks.delete(this.props.group.unique_id)},t.prototype.OnContextMenu=function(e){ae(Object(i.e)(this,e),this.props.group,e)},t.prototype.render=function(){var e,t=this.props.group,n=this.props.friend;return e=this.props.mapChecks.has(t.unique_id)?this.props.mapChecks.get(t.unique_id):t.HasMember(n.accountid),c.createElement("div",{onContextMenu:this.OnContextMenu},c.createElement(p.e,{label:t.name,checked:e,onChange:this.OnToggle}))},Object(o.c)([l.a],t.prototype,"OnToggle",null),Object(o.c)([l.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([a.a],t)}(c.Component),I=n("8o0Y"),E=n("EGkk"),w=n("+M9t"),M=n("geE1"),D=n("rsEv"),T=n("tkkQ"),j=n("uWOQ"),G=n("+mma"),R=n("e2SU"),k=n("VZeO"),A=n("Ezvv"),N=n("vDqi"),B=n.n(N);var L=function(e){function t(t){var n=e.call(this,t)||this,o=r.f.FriendStore.self;return n.state={strCurrentNameEntry:o.primary_display_name,strError:""},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value,strError:""})},t.prototype.HandleSubmit=function(e){this.SetPersonaName(this.state.strCurrentNameEntry)},t.prototype.DisplayError=function(e){this.setState({strError:e})},t.prototype.SetPersonaName=function(e){var t=this;if(this.setState({strError:""}),T.a.IN_CLIENT&&null!=SteamClient.WebChat.SetPersonaName)SteamClient.WebChat.SetPersonaName(this.state.strCurrentNameEntry).then((function(e){t.props.eResultCallback&&t.props.eResultCallback(e.eResult),22===e.eResult?t.props.closeModal&&t.props.closeModal():e.strMessageToken?t.DisplayError(Object(u.d)(e.strMessageToken)):t.props.closeModal&&t.props.closeModal()}));else{var n=new FormData;n.append("sessionid",T.a.SESSIONID),n.append("persona",e);var o=r.f.FriendStore.self,i=T.a.CHAT_BASE_URL+"profiles/"+o.steamid64+"/ajaxsetpersonaname/";B.a.post(i,n).then((function(e){var n=e.data;if(n.success)t.props.closeModal&&t.props.closeModal();else{var o=n.message.replace("<br />","");t.DisplayError(o)}})).catch((function(e){t.DisplayError(Object(u.d)("#Friends_NameChangeFailed_Info"))}))}},t.prototype.render=function(){var e=r.f.FriendStore.self,t="friend changePersonaName";e.persona.is_ingame?t+=" ingame":e.persona.is_online&&(t+=" online");var n=!1;return this.state.strError&&(n=!0),c.createElement(s.a,{className:"Dialog_ChangePersonaName",onEscKeypress:this.props.closeModal},c.createElement(p.h,{classNameContent:"ChangePersonaNameDialog",onSubmit:this.HandleSubmit},c.createElement(p.m,null,Object(u.d)("#ChangePersona_Title")),c.createElement(p.b,null,c.createElement(p.c,null,Object(u.d)("#ChangePersona_Description")),c.createElement(p.c,null,c.createElement("div",{className:t},c.createElement("img",{className:"avatarMedium",src:e.persona.avatar_url_full}),c.createElement("div",{className:"labelHolder"},n&&c.createElement("div",{className:"error"},this.state.strError),c.createElement("div",null,c.createElement("div",null,Object(u.d)("#ChangePersona_Change")),c.createElement("div",{className:"mediumName"},c.createElement(p.o,{placeholder:Object(u.d)("#ChangePersona_PlaceHolder"),className:"changePersonaInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}))))))),c.createElement(p.j,null,c.createElement(p.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t=Object(o.c)([a.a],t)}(c.Component),P=n("dpJ7"),F=n("hEDq"),x=n("lqmi"),V=n("uw3m");var U=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.ComputeStateFromNotificationSettings(n.props.player.notification_settings),n}return Object(o.d)(t,e),t.prototype.ConvertENotificationSettingToBoolean=function(e){return 1==e},t.prototype.ComputeStateFromNotificationSettings=function(e){var t,n=!1,o=!1;for(var i in e){if(0!=e[i]){o=!0;break}}return o?((t=F.f()).bNotifications_ShowIngame=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowInGame),t.bNotifications_ShowMessage=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowMessage),t.bNotifications_ShowOnline=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowOnline),t.bSounds_PlayIngame=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayInGame),t.bSounds_PlayMessage=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayMessage),t.bSounds_PlayOnline=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayOnline)):(n=!0,t=r.f.SettingsStore.FriendsSettings),{settings:t,bUseDefaults:n}},t.prototype.ConvertBooleanToENotificationSetting=function(e){return e?1:2},t.prototype.FriendSettingsToNotificationSettings=function(e){var t=new w.d;return t.Notifications_SendMobile=this.props.player.notification_settings.Notifications_SendMobile,this.state.bUseDefaults||(t.Notifications_ShowInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowIngame),t.Notifications_ShowMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowMessage),t.Notifications_ShowOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowOnline),t.Sounds_PlayInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayIngame),t.Sounds_PlayMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayMessage),t.Sounds_PlayOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayOnline)),t},t.prototype.HandleSubmit=function(){var e=this;r.f.FriendStore.SetPlayerNotificationSettings(this.props.player,this.FriendSettingsToNotificationSettings(this.state.settings)).then((function(t){1==t&&e.props.closeModal&&e.props.closeModal()}))},t.prototype.componentDidUpdate=function(e){e.player!==this.props.player&&this.setState(this.ComputeStateFromNotificationSettings(this.props.player.notification_settings))},t.prototype.OnSettingToggled=function(e,t){var n;this.setState({settings:Object(o.a)(Object(o.a)({},this.state.settings),(n={},n[e]=t,n))})},t.prototype.FriendsSettingsCheckbox=function(e){var t=this;return c.createElement(p.e,{key:e.strName,disabled:this.state.bUseDefaults,onChange:function(n){t.OnSettingToggled(e.strName,n)},checked:!!this.state.settings[e.strName]})},t.prototype.NotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return c.createElement("div",null,c.createElement("div",{className:"FriendsSettingsNotificationRow"},c.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},c.createElement(t,{strName:e.strNameShow})),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},c.createElement(t,{strName:e.strNameSound}))))},t.prototype.OnDefaultToggled=function(e){e?this.setState({settings:r.f.SettingsStore.FriendsSettings,bUseDefaults:!0}):this.setState({bUseDefaults:!1})},t.prototype.render=function(){var e=this,t=this.NotificationRow,n=this.state.bUseDefaults,o="friend editFriendNotifications";return o+=Object(x.d)(this.props.player.persona),c.createElement(s.a,{className:"Dialog_FriendNotifications",onEscKeypress:this.props.closeModal},c.createElement(p.h,{classNameContent:"FriendNotificationsDialog",onSubmit:this.HandleSubmit},c.createElement(p.m,null,Object(u.d)("#Friend_Menu_NotificationsTitle")),c.createElement(p.b,{className:n?"useDefaults":""},c.createElement(p.c,null,Object(u.d)("#FriendNotifications_Instructions",this.props.player.display_name)),c.createElement(p.c,null,c.createElement("div",{className:o},c.createElement(V.c,{persona:this.props.player.persona,size:"Large"}),c.createElement("div",{className:"labelHolder"},this.props.player.primary_display_name,!this.props.player.is_display_name_nickname&&this.props.player.has_secondary_display_name&&c.createElement("span",{className:"playerNickname"}," (",this.props.player.secondary_display_name,")"),this.props.player.is_display_name_nickname&&c.createElement("span",{className:"playerNicknameBracket",title:Object(u.d)("#isNickname")},"*")))),c.createElement(p.e,{classname:"useDefaultsCheckBox",label:Object(u.d)("#FriendNotifications_UseDefaults"),onChange:function(t){e.OnDefaultToggled(t)},checked:this.state.bUseDefaults}),c.createElement("div",{className:"SettingsGroup"},c.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},c.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(u.d)("#FriendSettings_Notification_Table_Label")),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(u.d)("#FriendSettings_Notification_Table_Show")),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(u.d)("#FriendSettings_Notification_Table_Play"))),c.createElement(t,{strLabel:Object(u.d)("#FriendSettings_FriendNotification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),c.createElement(t,{strLabel:Object(u.d)("#FriendSettings_FriendNotification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),c.createElement(t,{strLabel:Object(u.d)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}))),c.createElement(p.j,null,c.createElement(p.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleSubmit",null),Object(o.c)([l.a],t.prototype,"OnSettingToggled",null),Object(o.c)([l.a],t.prototype,"FriendsSettingsCheckbox",null),Object(o.c)([l.a],t.prototype,"NotificationRow",null),Object(o.c)([l.a],t.prototype,"OnDefaultToggled",null),t=Object(o.c)([a.a],t)}(c.Component),H=n("z9WT"),W=n("ewzr");function z(e,t,n,o){return Object(I.a)(c.createElement(Q,{browserContext:e,context:t,friend:n,ownerWindow:o.currentTarget.ownerDocument.defaultView}),o)}function q(e,t,n,o){return c.createElement(Q,{browserContext:e,context:t,friend:n,ownerWindow:o})}var K=Object(a.a)((function(e){var t=e.friend,n=[],o=t.persona_name_history,r=t.persona_name_history_loaded;if(r&&o.length>0)for(var i=0,a=0,s=o;a<s.length;a++){var l=s[a];n.push(c.createElement("div",{className:"recentName",key:"name_history_"+i},l)),i++}else r?n.push(c.createElement("div",{className:"recentName",key:"name_history_none"},Object(u.d)("#Friend_Menu_RecentAliases_None"))):n.push(c.createElement("div",{className:"recentName",key:"name_history_loading"},Object(u.d)("#Friend_Menu_RecentAliases_Loading")));return c.createElement(c.Fragment,null,c.createElement(E.e,{label:Object(u.d)("#Friend_Menu_RecentAliases")},n))})),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnToggle=function(e){this.props.group.ToggleMemberRoleState(this.props.friend.accountid,e)},t.prototype.render=function(){var e=this,t=this.props.group.DefaultRoleID(),n=this.props.group.GetMemberRoleIDs(this.props.friend.accountid),o=this.props.group.BIsAccountIDOwner(this.props.friend.accountid),r=this.props.group.BCanEditRoles(),i=this.props.group.GetRoles().slice().sort((function(e,n){return e.role_id==t?1:n.role_id==t?-1:parseInt(e.role_id)-parseInt(n.role_id)})).map((function(o){var i=-1!=n.findIndex((function(e){return e==o.role_id}));if(!i&&!r)return null;var a=o.name,s=e.props.group.BCanIAssignRole(o.role_id);return o.role_id==t?a=Object(u.d)("#ChatRoomRole_Member"):a.startsWith("#ChatRoomRole_")&&(a=Object(u.d)(a)),c.createElement(Z,{key:o.role_id,friend:e.props.friend,group:e.props.group,roleName:a,roleID:o.role_id,bHasRole:i,bEditable:s})})),a=r&&!o?Object(u.d)("#Friend_Menu_EditRoles"):Object(u.d)("#Friend_Menu_ViewRoles");return c.createElement(c.Fragment,null,c.createElement(E.e,{label:a},o?c.createElement(E.d,{className:"FriendMenuRoleCheckbox disabled",key:"role",onSelected:function(){},bInteractableItem:!0},c.createElement(R.l,null),Object(u.d)("#ChatRoomRole_Owner")):i))},Object(o.c)([l.a],t.prototype,"OnToggle",null),t=Object(o.c)([a.a],t)}(c.Component);function X(e,t,n,o){var r=Object(w.c)(t);if(1!=t)if(24==t){var i=c.createElement(H.b,{style:{color:"white"},href:T.a.HELP_BASE_URL+"wizard/HelpWithLimitedAccount"},Object(u.d)("#Friend_InviteError_VisitSteamSupport"));Object(G.c)(e,Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)("#Button_OK"),Object(u.k)("#Friend_InviteError_LimitedUserLink",i))}else Object(G.c)(e,Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)(r,o));else Object(G.c)(e,Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)("#Friend_InviteError",o))}var Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bCanCreateRemotePlayInvite:!1},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,r.f.RemotePlayStore.BCanCreateInviteForGame(r.f.FriendStore.self.persona.m_gameid)];case 1:return e=t.sent(),this.setState({bCanCreateRemotePlayInvite:e}),[2]}}))}))},t.prototype.ShowFriendProfile=function(e){var t=this.props.friend.GetCommunityProfileURL();Object(j.e)(e,t),e.stopPropagation()},t.prototype.InviteFriend=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,r.f.FriendStore.SendFriendInvite(this.props.friend)];case 1:return e=o.sent(),t=e.eResult,4==(n=e.eFriendRelationship)?Object(G.c)(this.props.ownerWindow,Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)("#Friend_InviteSent")):3==n?Object(G.c)(this.props.ownerWindow,Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)("#Friend_MutualInviteSent",this.props.friend.display_name)):X(this.props.ownerWindow,t,0,this.props.friend.display_name),[2]}}))}))},t.prototype.AcceptIncomingInvite=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,r.f.FriendStore.SendFriendInvite(this.props.friend)];case 1:return e=n.sent(),t=e.eResult,3==e.eFriendRelationship?Object(G.c)(this.props.ownerWindow,Object(u.d)("#Friend_Menu_AddToFriendsList"),Object(u.d)("#Friend_MutualInviteSent",this.props.friend.display_name)):X(this.props.ownerWindow,t,0,this.props.friend.display_name),[2]}}))}))},t.prototype.IgnoreIncomingInvite=function(){var e=this;r.f.FriendStore.RemoveFriend(this.props.friend).then((function(t){1==t?Object(G.c)(e.props.ownerWindow,Object(u.d)("#Friend_Menu_IgnoreIncomingInvite"),Object(u.d)("#Friend_IgnoreIncomingInvite_Success",e.props.friend.display_name)):Object(G.c)(e.props.ownerWindow,Object(u.d)("#Friend_Menu_IgnoreIncomingInvite"),Object(u.d)("#Friend_IgnoreIncomingInvite_Error",e.props.friend.display_name))}))},t.prototype.RemoveFriend=function(){var e=this,t=4==this.props.friend.efriendrelationship,n=Object(u.d)(t?"#Friend_Menu_CancelInvitation":"#Friend_Menu_RemoveFromFriendsList"),o=Object(u.d)(t?"#Friend_CancelInvitation_Confirm":"#Friend_RemoveFromFriendsList_Confirm",this.props.friend.display_name),i=Object(u.d)(t?"#Button_Confirm":"#Friend_Menu_RemoveFromFriendsList"),a=Object(u.d)(t?"#Friend_CancelInvitation_Error":"#Friend_RemoveFromFriendsList_Error");Object(G.d)(this.props.ownerWindow,n,o,i,Object(u.d)("#Button_Cancel"),!0).then((function(){r.f.FriendStore.RemoveFriend(e.props.friend).then((function(t){3!=t&&6!=t||Object(G.c)(e.props.ownerWindow,n,a)}))})).catch((function(){}))},t.prototype.BlockFriend=function(){var e=this;Object(G.d)(this.props.ownerWindow,Object(u.d)("#Friend_Menu_BlockAllCommunication"),Object(u.d)("#Friend_Block_Confirm",this.props.friend.display_name),Object(u.d)("#Friend_Menu_BlockAllCommunication")).then((function(){r.f.FriendStore.BlockPlayer(e.props.friend)})).catch((function(){}))},t.prototype.UnblockFriend=function(){var e=this;Object(G.d)(this.props.ownerWindow,Object(u.d)("#Friend_Menu_UnblockAllCommunication"),Object(u.d)("#Friend_Unblock_Confirm",this.props.friend.display_name),Object(u.d)("#Friend_Menu_UnblockAllCommunication")).then((function(){r.f.FriendStore.BlockPlayer(e.props.friend,!0)})).catch((function(){}))},t.prototype.InviteToGame=function(e,t){r.f.FriendStore.InviteToGame(this.props.friend,e,t)},t.prototype.InviteToLobby=function(e,t){r.f.FriendStore.InviteToLobby(this.props.friend,e,t)},t.prototype.InviteToWatch=function(){r.f.FriendStore.InviteToWatch(this.props.friend)},t.prototype.InviteToRemotePlay=function(){var e=this.props.friend;r.f.FriendStore.self!==e&&r.f.RemotePlayStore.CreateInviteAndSession(e.accountid,r.f.FriendStore.self.persona.m_gameid,this.props.browserContext)},t.prototype.CancelRemotePlay=function(){var e=this.props.friend;r.f.RemotePlayStore.CancelInviteAndSession(e.accountid)},t.prototype.CancelAllRemotePlay=function(){r.f.RemotePlayStore.CancelAllInvitesAndSessions()},t.prototype.InviteToVoice=function(e,t){Object(P.j)({invitee:this.props.friend,invitedto:e},null,this.props.ownerWindow)},t.prototype.render=function(){var e,t=this,n=this.props,o=n.context||{},a=[],l=[],p=n.friend,d=r.f.FriendStore.FavoritesStore,h=r.f.FriendStore.self==p,f="favorites"==o.chatContext,_=o.group;!_&&o.chat instanceof D.a&&(_=o.chat.GetGroup());var g=!1,b=p.is_friend,y=2==p.efriendrelationship,C=4==p.efriendrelationship,O=y||4==p.efriendrelationship,I=r.f.FriendStore.self.persona.m_unGamePlayedAppID;p.persona.m_unGamePlayedAppID;o.chat&&(o.chat instanceof M.a?(e=o.chat).BVoiceActive()&&(g=!0):o.chat instanceof D.a&&o.chat.BVoiceActive()&&(g=!0)),b||y||h||a.push(c.createElement("div",{className:"contextMenuLabel contextMenuNotAFriend",key:"header"},Object(u.d)("#Friend_Menu_NotAFriendLabel"))),g&&!h&&a.push(c.createElement(J,{friend:this.props.friend})),o.tab&&a.push(c.createElement(E.d,{key:"closetab",onSelected:function(){r.f.UIStore.CloseTab(n.browserContext,o.tab)}},Object(u.d)("#Chat_CloseTabAction"))),e||o.tab||y||C||h||p.is_blocked||a.push(c.createElement(E.d,{key:"chat",className:b?"":"SendMessageContextNotFriends",onSelected:function(){n.friend.OpenChatDialog(n.browserContext)}},Object(u.d)("#Friend_Menu_SendMessage")));var w=p.persona.is_online&&!e&&!y&&!C&&!h&&!p.is_blocked,T=r.f.ChatStore.GetActiveVoiceChat();if(T&&T instanceof M.a&&T.accountid_partner==p.accountid?a.push(c.createElement(E.d,{key:"voicechat",onSelected:function(){T.ToggleVoiceChat()}},Object(u.d)("#Friend_Menu_StopVoiceChat"))):w&&(T instanceof D.a?a.push(c.createElement(E.d,{key:"voicechat",className:"contextVoiceInvite",onSelected:function(){t.InviteToVoice(T,o)}},c.createElement(R.ob,null),Object(u.d)("#Chat_Actions_InviteFriend_VoiceChat"))):a.push(c.createElement(E.d,{key:"voicechat",onSelected:function(){r.f.UIStore.ShowFriendChatDialogAndStartVoice(n.browserContext,p.accountid)}},Object(u.d)("#Friend_Menu_StartVoiceChat")))),a.push(c.createElement(E.d,{key:"viewprofile",onSelected:this.ShowFriendProfile},Object(u.d)("#Friend_Menu_ViewProfile"))),_&&a.push(c.createElement(te,{key:"moderationoptions",friend:p,bIsSelf:h,group:_,ownerWindow:n.ownerWindow})),!h){if(b){if(l.push(c.createElement(E.d,{key:"setnickname",onSelected:function(){m(n.browserContext,n.friend,n.ownerWindow)}},Object(u.d)(n.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),d.BIsFavorited({friend:p}))(f?a:l).push(c.createElement(E.d,{key:"quickaccess",onSelected:ie.bind(null,p)},Object(u.d)("#Friend_Menu_RemoveFromQuickAccess")));else l.push(c.createElement(E.d,{key:"quickaccess",onSelected:re.bind(null,p)},Object(u.d)("#Friend_Menu_AddToQuickAccess")));l.push(c.createElement(E.d,{key:"managecategories",onSelected:function(){!function(e,t,n){0==r.f.FriendStore.FriendGroupStore.user_groups.length?v(e,t,n):Object(s.c)(c.createElement(S,{browserContext:e,friend:n}),t,"AssignFriendCategoryDialog",{strTitle:Object(u.d)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:580},Object(i.g)(t))}(n.browserContext,n.ownerWindow,n.friend)}},Object(u.d)("#FriendGroup_Menu_Categorize"))),l.push(c.createElement(E.d,{key:"notifications",onSelected:function(){return n.browserContext,e=n.friend,t=n.ownerWindow,void Object(s.c)(c.createElement(U,{player:e}),t,"FriendNotificationsDialog",{strTitle:Object(u.d)("#Friend_Menu_Notifications"),popupWidth:640,popupHeight:520},Object(i.g)(t));var e,t}},Object(u.d)("#Friend_Menu_Notifications"))),f||l.push(c.createElement(E.d,{key:"removefriend",onSelected:this.RemoveFriend},Object(u.d)("#Friend_Menu_RemoveFromFriendsList"))),l.push(c.createElement(K,{key:"aliases",friend:p}));var j=[],G=void 0;if(0==I)G=c.createElement("div",{className:"contextMenuGameItem"},c.createElement("div",{className:"contextMenuGameName"},r.f.FriendStore.self.current_game_name));else{var k=r.f.AppInfoStore.GetAppInfo(I);G=c.createElement("div",{className:"contextMenuGameItem"},c.createElement("div",{className:"contextMenuGameIcon"},c.createElement("img",{className:"GameIcon",src:k.icon_url})),c.createElement("div",{className:"contextMenuGameName"},k.name))}if(r.f.FriendStore.self.persona.is_ingame&&r.f.BroadcastStore.is_broadcast_capable&&j.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"invitetowatch",onSelected:function(){t.InviteToWatch()}},Object(u.d)("#Friend_Menu_InviteToWatch"))),0!=I&&"0"!=r.f.FriendStore.self.persona.m_game_lobby_id)j.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"lobbyinvite",onSelected:function(){t.InviteToLobby(I,r.f.FriendStore.self.persona.m_game_lobby_id)}},Object(u.d)("#Friend_Menu_InviteToLobby")));else if(r.f.FriendStore.self.persona.connect_string){var A=r.f.FriendStore.self.persona.connect_string;j.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"gameinvite",onSelected:function(){t.InviteToGame(I,A)}},Object(u.d)("#Friend_Menu_InviteToGame")))}if(r.f.RemotePlayStore.BEnabled()){var N=this.props.friend;r.f.RemotePlayStore.HasInviteAndSession(N.accountid)?j.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"cancelremoteplay",onSelected:function(){t.CancelRemotePlay()}},Object(u.d)("#Friend_Menu_CancelRemotePlay"))):r.f.RemotePlayStore.HasInviteAndSessionForGameIDOtherThan(String(I))?j.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"cancelallremoteplay",onSelected:function(){t.CancelAllRemotePlay()}},Object(u.d)("#Friend_Menu_CancelAllRemotePlay"))):this.state.bCanCreateRemotePlayInvite&&j.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"invitetoremoteplay",onSelected:function(){t.InviteToRemotePlay()}},Object(u.d)("#Friend_Menu_InviteToRemotePlay")))}j.length>0&&a.push(c.createElement(c.Fragment,{key:"logo"},c.createElement(E.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},G),c.createElement("div",{className:"contextMenuSectionContent"},j))),a.push(c.createElement($,{key:"trading",friend:p}))}else y?(a.push(c.createElement(E.d,{key:"acceptincominginvite",onSelected:this.AcceptIncomingInvite},Object(u.d)("#Friend_Menu_AcceptIncomingInvite"))),a.push(c.createElement(E.d,{key:"ignoreincominginvite",onSelected:this.IgnoreIncomingInvite},Object(u.d)("#Friend_Menu_IgnoreIncomingInvite"))),a.push(c.createElement(K,{key:"aliases",friend:p}))):C?a.push(c.createElement(E.d,{key:"remove",onSelected:this.RemoveFriend},Object(u.d)("#Friend_Menu_CancelInvitation"))):a.push(c.createElement(E.d,{key:"invite",onSelected:this.InviteFriend},Object(u.d)("#Friend_Menu_AddToFriendsList")));O&&a.push(c.createElement(E.d,{key:"setnickname",onSelected:function(){m(n.browserContext,n.friend,n.ownerWindow)}},Object(u.d)(n.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),f&&!p.is_blocked||l.push(c.createElement(E.d,{key:"block",onSelected:p.is_blocked?this.UnblockFriend:this.BlockFriend},Object(u.d)(p.is_blocked?"#Friend_Menu_UnblockAllCommunication":"#Friend_Menu_BlockAllCommunication")))}if(!a)return null;var B=void 0;return this.props.context&&this.props.context.group&&(B=this.props.context.group.GetMemberPartyBeacon(this.props.friend.accountid)),c.createElement(E.c,{className:"friendsContextMenu"},a,1==l.length&&l,l.length>1&&c.createElement(E.e,{label:Object(u.d)("#Friend_Menu_Manage")},l),!!p.persona.m_broadcastAccountId&&!h&&c.createElement(oe,{friend:p,ownerWindow:n.ownerWindow,browserContext:n.browserContext}),!!p.persona.m_unGamePlayedAppID&&!h&&c.createElement(ne,{unAppID:p.persona.m_unGamePlayedAppID,strGameName:p.current_game_name,ulGameID:p.persona.m_gameid,friend:p,partyBeacon:B}))},Object(o.c)([l.a],t.prototype,"ShowFriendProfile",null),Object(o.c)([l.a],t.prototype,"InviteFriend",null),Object(o.c)([l.a],t.prototype,"AcceptIncomingInvite",null),Object(o.c)([l.a],t.prototype,"IgnoreIncomingInvite",null),Object(o.c)([l.a],t.prototype,"RemoveFriend",null),Object(o.c)([l.a],t.prototype,"BlockFriend",null),Object(o.c)([l.a],t.prototype,"UnblockFriend",null),Object(o.c)([l.a],t.prototype,"InviteToGame",null),Object(o.c)([l.a],t.prototype,"InviteToLobby",null),Object(o.c)([l.a],t.prototype,"InviteToWatch",null),Object(o.c)([l.a],t.prototype,"InviteToRemotePlay",null),Object(o.c)([l.a],t.prototype,"CancelRemotePlay",null),Object(o.c)([l.a],t.prototype,"CancelAllRemotePlay",null),Object(o.c)([l.a],t.prototype,"InviteToVoice",null),t}(c.PureComponent),J=function(e){function t(t){var n=e.call(this,t)||this,o=r.f.VoiceStore.ConvertGainValueToSliderValue(r.f.VoiceStore.GetPerUserGainLevel(n.props.friend.accountid),k.a.k_MaxPerUserGainMultiplier);return n.state={volumeNumber:o},n}return Object(o.d)(t,e),t.prototype.OnFriendVolumeChanged=function(e){r.f.VoiceStore.SetPerUserGainLevel(this.props.friend.accountid,r.f.VoiceStore.ConvertSliderToGainValue(e,k.a.k_MaxPerUserGainMultiplier)),this.setState({volumeNumber:e})},t.prototype.OnMutingClick=function(e){var t=r.f.VoiceStore.GetPerUserMuting(this.props.friend.accountid);r.f.VoiceStore.SetPerUserMuting(this.props.friend.accountid,!t),this.forceUpdate()},t.prototype.OnInlineVolumeClick=function(e){this.forceUpdate()},t.prototype.render=function(){var e=this.state.volumeNumber,t="VolumeIcon",n=r.f.VoiceStore.GetPerUserMuting(this.props.friend.accountid);return e>65?t+=" HighestVolume":e>45?t+=" HighVolume":e<46&&e>24?t+=" MedVolume":e<25&&(t+=" LowVolume"),c.createElement(E.d,{key:"volume",onSelected:function(){},bInteractableItem:!0},c.createElement("div",{className:"InlineVolume"+(n?" Muted":""),onClick:this.OnInlineVolumeClick},c.createElement("button",{className:t,onClick:this.OnMutingClick},c.createElement(R.pb,null)),c.createElement(p.A,{min:0,max:100,label:"",value:e,onChange:this.OnFriendVolumeChanged}),c.createElement("div",{className:"volumePercentage"},2*e,"%")))},Object(o.c)([l.a],t.prototype,"OnFriendVolumeChanged",null),Object(o.c)([l.a],t.prototype,"OnMutingClick",null),Object(o.c)([l.a],t.prototype,"OnInlineVolumeClick",null),t=Object(o.c)([a.a],t)}(c.Component),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnChange=function(e){this.props.group.SetMemberRoleState(this.props.friend.accountid,this.props.roleID,e)},t.prototype.render=function(){return c.createElement(E.d,{className:"FriendMenuRoleCheckbox"+(this.props.bEditable?"":" disabled"),key:"role",onSelected:function(){},bInteractableItem:!0},c.createElement(p.e,{label:this.props.roleName,checked:this.props.bHasRole,onChange:this.OnChange,disabled:!this.props.bEditable}))},Object(o.c)([l.a],t.prototype,"OnChange",null),t=Object(o.c)([a.a],t)}(c.Component),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.SendTradeOffer=function(e){var t="NewTradeOffer"+this.props.friend.accountid;Object(_.q)(e).open(r.f.EconomyStore.GetDefaultTradeOfferURLForFriend(this.props.friend.accountid),t,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.render=function(){var e=this.props.friend;return c.createElement(E.e,{label:Object(u.d)("#FriendMenu_Trading")},c.createElement(ee,{friend:e}),c.createElement(E.d,{onSelected:this.SendTradeOffer},Object(u.d)("#FriendMenu_SendTradeOffer")))},Object(o.c)([l.a],t.prototype,"SendTradeOffer",null),t}(c.Component);function ee(e){return c.createElement(E.d,{onSelected:function(t){Object(j.e)(t,e.friend.GetCommunityProfileURL()+"inventory/")}},Object(u.d)("#FriendMenu_ViewInventory"))}var te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.BanFriend=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,Object(G.a)(this.props.ownerWindow,Object(u.d)("#Friend_Ban"),Object(u.d)("#Friend_Ban_Confirm",this.props.friend.display_name),Object(u.d)("#Friend_Ban_Button"),Object(u.d)("#Button_Cancel"),!0)];case 1:return e.sent()&&this.props.group.SetUserBanState(this.props.friend.accountid,!0),[2]}}))}))},t.prototype.OnKickFriend=function(){var e=this,t=this.props.group,n=ue,o=this.props.ownerWindow;new Promise((function(t,r){var a=Object(G.b)(o,Object(u.d)("#Friend_Kick",e.props.friend.display_name));Object(s.c)(c.createElement(pe,{OnOK:t,OnCancel:r,OnSet:function(e){n=e}}),o,"alertdialog",a,Object(i.g)(o))})).then((function(){return t.KickUser(e.props.friend.accountid,Math.floor(Date.now()/1e3+n))})).catch((function(){}))},t.prototype.render=function(){var e=[],t=this.props.friend,n=this.props.group;return n.BHasMember(t.accountid)?(!this.props.bIsSelf&&n.BCanKick()&&e.push(c.createElement(E.d,{disabled:!n.BCanKickMember(t.accountid),key:"kick",onSelected:this.OnKickFriend},Object(u.d)("#Friend_Menu_KickFromChatRoom"))),!this.props.bIsSelf&&n.BCanBan()&&e.push(c.createElement(E.d,{disabled:!n.BCanBanMember(t.accountid),key:"ban",onSelected:this.BanFriend},Object(u.d)("#Friend_Menu_Ban"))),n&&e.push(c.createElement(Y,{key:"editroles",friend:t,group:n,bEditable:n.BCanEditRoles()}))):e.push(c.createElement(E.d,{disabled:!0,key:"notmember",onSelected:null},Object(u.d)("#Friend_Menu_HasLeftChat"))),e},Object(o.c)([l.a],t.prototype,"BanFriend",null),Object(o.c)([l.a],t.prototype,"OnKickFriend",null),t}(c.Component),ne=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bShowViewGameInfo:void 0,bIsSubscribedToApp:void 0},A.b.BIsSubscribedApp(n.props.unAppID).then((function(e){n.setState({bShowViewGameInfo:A.b.BClientSupportsMessage("ViewGameInfoForSteamID"),bIsSubscribedToApp:e})})),n}return Object(o.d)(t,e),t.prototype.ShowStorePage=function(e){var t=Object(W.a)(this.props.unAppID,"friendcontextmenu");Object(j.e)(e,t),e.stopPropagation()},t.prototype.ShowCommunityHub=function(e){var t=T.a.COMMUNITY_BASE_URL+"app/"+this.props.unAppID;Object(j.e)(e,t),e.stopPropagation()},t.prototype.LaunchGame=function(e){var t="steam://rungameid/"+(this.props.ulGameID||this.props.unAppID);Object(j.e)(e,t),e.stopPropagation()},t.prototype.WatchGame=function(e){r.f.UIStore.SetFriendBroadcastVisible(this.props.friend.steamid64,!0),this.props.friend.OpenChatDialog(Object(i.e)(this,e))},t.prototype.JoinGame=function(e){var t=this,n=this.props.friend;n.persona.is_in_valid_lobby?this.JoinLobby(n,e):A.b.OpenJoinGameDialog(n.steamid64).then((function(o){o.success||t.JoinLobby(n,e)})).catch((function(){t.JoinLobby(n,e)}))},t.prototype.ViewGameInfo=function(e){var t=this.props.friend;A.b.ViewGameInfoForSteamID(t.steamid64)},t.prototype.JoinLobby=function(e,t){if(e.persona.is_in_valid_lobby){var n="steam://joinlobby/"+e.persona.m_gameid+"/"+e.persona.m_game_lobby_id+"/"+e.steamid64;Object(j.e)(t,n)}else this.LaunchGame(t)},t.prototype.ShowInSteam=function(e){var t="steam://store/"+this.props.unAppID;Object(j.e)(e,t),e.stopPropagation()},t.prototype.JoinPartyBeacon=function(e){var t="steam://joinparty/"+this.props.unAppID+"/"+this.props.partyBeacon.beacon_id;Object(j.e)(e,t),e.stopPropagation()},t.prototype.render=function(){if(!this.props.unAppID)return null;var e=[],t=void 0,n=this.props.friend,o=r.f.AppInfoStore.GetAppInfo(this.props.unAppID);if(!o.is_valid)return null;if(o.is_initialized)if(this.props.bShowLargeHeader)t=c.createElement("div",{className:"contextMenuGameHeader"},c.createElement("img",{className:"GameHeader",src:o.logo_url}));else{var i=c.createElement("span",{className:"contextMenuGameName"},Object(u.d)("#Friend_Menu_ViewGameStorePageGameName",this.props.strGameName||o.name));t=c.createElement("div",{className:"contextMenuGameItem"},c.createElement("div",{className:"contextMenuGameIcon"},c.createElement("img",{className:"GameIcon",src:o.icon_url})),i)}return void 0===this.state.bIsSubscribedToApp?e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"showinsteam",onSelected:this.ShowInSteam},c.createElement(R.Q,null),Object(u.d)("#Friend_Menu_ShowInSteam"))):this.state.bIsSubscribedToApp&&(this.props.partyBeacon?e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton contextMenuPartyBeacon",key:"joinparty",onSelected:this.JoinPartyBeacon},c.createElement(R.Q,null),Object(u.d)("#Friend_Menu_JoinFriendPartyBeacon"))):n&&(n.persona.is_in_joinable_game||n.persona.is_in_valid_lobby)&&e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"joingame",onSelected:this.JoinGame},c.createElement(R.Q,null),Object(u.d)("#Friend_Menu_JoinFriendGame"))),e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"launchgame",onSelected:this.LaunchGame},c.createElement(R.Q,null),Object(u.d)("#Friend_Menu_LaunchFriendGame")))),n&&e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"watchgame",onSelected:this.WatchGame},Object(u.d)("#Friend_Menu_WatchFriendGame"))),n&&this.state.bShowViewGameInfo&&e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"viewgameinfo",onSelected:this.ViewGameInfo},Object(u.d)("#Friend_Menu_ViewGameInfo"))),e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"viewstorepage",onSelected:this.ShowStorePage},Object(u.d)("#Friend_Menu_ViewGameStorePage"))),e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"viewcommunityhub",onSelected:this.ShowCommunityHub},Object(u.d)("#Friend_Menu_ViewCommunityHub"))),c.createElement(c.Fragment,null,c.createElement(E.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},t),c.createElement("div",{className:"contextMenuSectionContent"},e))},Object(o.c)([l.a],t.prototype,"ShowStorePage",null),Object(o.c)([l.a],t.prototype,"ShowCommunityHub",null),Object(o.c)([l.a],t.prototype,"LaunchGame",null),Object(o.c)([l.a],t.prototype,"WatchGame",null),Object(o.c)([l.a],t.prototype,"JoinGame",null),Object(o.c)([l.a],t.prototype,"ViewGameInfo",null),Object(o.c)([l.a],t.prototype,"ShowInSteam",null),Object(o.c)([l.a],t.prototype,"JoinPartyBeacon",null),t=Object(o.c)([a.a],t)}(c.Component),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.WatchStream=function(){var e=this.props.browserContext,t=this.props.friend,n=t.persona.m_broadcastAccountId;r.f.UIStore.ShowOrActivateBroadcast(e,n,!0).ShowWatchPromptDialog(t)},t.prototype.render=function(){var e=this.props.friend;return c.createElement(c.Fragment,null,c.createElement(E.d,{className:"contextMenuBroadcast contextMenuUnselectable",onSelected:null},c.createElement("div",{className:"contextMenuBroadcastTitle"},Object(u.d)("#Broadcast_Watching")),c.createElement("div",{className:"contextMenuBroadcastSubtitle"},e.GetBroadcastDescription())),c.createElement("div",{className:"contextMenuSectionContent"},c.createElement(E.d,{className:"contextMenuGameOptions",onSelected:this.WatchStream},Object(u.d)("#Broadcast_WatchStream"))))},Object(o.c)([l.a],t.prototype,"WatchStream",null),t=Object(o.c)([a.a],t)}(c.Component);function re(e){r.f.FriendStore.FavoritesStore.AddToFavorites({friend:e})}function ie(e){r.f.FriendStore.FavoritesStore.RemoveFromFavorites({friend:e})}function ae(e,t,n){return Object(I.a)(c.createElement(se,{browserContext:e,group:t,ownerWindow:n.currentTarget.ownerDocument.defaultView}),n)}function se(e){var t=[];return e.group&&e.group.modifiable&&(t.push(c.createElement(E.d,{key:"managegroup",onSelected:function(){var t,n,o;t=e.browserContext,n=e.group,o=e.ownerWindow,Object(s.c)(c.createElement(y,{browserContext:t,group:n,rgPreSelectedFriends:n.member_accountid_list}),o,"CreateFriendCategoryDialog",{strTitle:Object(u.d)("#FriendGroup_Menu_Manage"),popupWidth:664,popupHeight:700},Object(i.g)(o))}},Object(u.d)("#FriendGroup_Menu_Manage"))),t.push(c.createElement(E.d,{key:"removegroup",onSelected:function(){r.f.FriendStore.FriendGroupStore.RemoveGroup(e.group)}},Object(u.d)("#FriendGroup_Menu_Remove")))),c.createElement(E.c,{className:"friendsContextMenu"},t,c.createElement(E.d,{key:"creategroup",onSelected:function(){v(e.browserContext,e.ownerWindow)}},Object(u.d)("#FriendGroup_Menu_CreateGroup")))}function ce(e,t,n){return Object(I.a)(c.createElement(le,{browserContext:e,ownerWindow:t.currentTarget.ownerDocument.defaultView,setPersonaNameEresultCallback:n}),t)}var le=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.SetUserOnline=function(){r.f.FriendStore.SetUserPersonaState(1)},t.prototype.SetUserInvisible=function(){r.f.FriendStore.SetUserPersonaState(7)},t.prototype.SetUserAway=function(){r.f.FriendStore.SetUserPersonaState(3)},t.prototype.SetUserOffline=function(){r.f.SignOutOfFriends(this.props.browserContext)},t.prototype.ToggleUserDND=function(){r.f.FriendStore.SetUserDoNotDisturb(!r.f.FriendStore.GetUserDoNotDisturb())},t.prototype.ShowUserProfile=function(e){var t=r.f.FriendStore.self.GetCommunityProfileURL();Object(j.e)(e,t),e.stopPropagation()},t.prototype.EditProfile=function(e){var t=r.f.FriendStore.self.GetCommunityProfileURL()+"edit";Object(j.e)(e,t),e.stopPropagation()},t.prototype.EditName=function(e){var t,n;this.props.browserContext,t=this.props.ownerWindow,n=this.props.setPersonaNameEresultCallback,Object(s.c)(c.createElement(L,{eResultCallback:n}),t,"ChangePersonaDialog",{strTitle:Object(u.d)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400},Object(i.g)(t))},t.prototype.render=function(){var e=[],t=[],n=1==r.f.FriendStore.self.persona.m_ePersonaState;e.push(c.createElement(E.b,{key:"state_online",bChecked:n,onSelected:this.SetUserOnline},Object(u.d)("#PersonaStateOnline")));var o=3==r.f.FriendStore.self.persona.m_ePersonaState;e.push(c.createElement(E.b,{key:"state_away",bChecked:o,onSelected:this.SetUserAway},Object(u.d)("#PersonaStateAway")));var i=7==r.f.FriendStore.self.persona.m_ePersonaState;if(e.push(c.createElement(E.b,{key:"state_invisible",className:"personaContextMenuItem",bChecked:i,onSelected:this.SetUserInvisible},Object(u.d)("#PersonaStateInvisible"),c.createElement("div",{className:"persona_menu_descriptor"},Object(u.d)("#PersonaStateInvisibleDescriptor")))),T.a.IN_CLIENT&&r.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var a=0==r.f.FriendStore.self.persona.m_ePersonaState;e.push(c.createElement(E.b,{key:"state_offline",className:"personaContextMenuItem",bChecked:a,onSelected:this.SetUserOffline},Object(u.d)("#PersonaStateOffline"),c.createElement("div",{className:"persona_menu_descriptor"},Object(u.d)("#PersonaStateOfflineDescriptor"))))}if(r.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var s=r.f.FriendStore.GetUserDoNotDisturb();t.push(c.createElement(E.b,{key:"do_not_disturb",className:"personaContextMenuItem",bChecked:!1,onSelected:this.ToggleUserDND},c.createElement(p.e,{key:"dnd_checkbox",classname:"DNDCheckBox",checked:s,label:Object(u.d)("#User_ToggleDoNotDisturb")}),c.createElement("div",{className:"persona_menu_dnd_descriptor"},Object(u.d)("#PersonaStateDoNotDisturbDescriptor"))))}return t.push(c.createElement(E.d,{key:"editname",onSelected:this.EditName},Object(u.d)("#Friend_Menu_ChangeMyName"))),t?c.createElement(E.c,{className:"friendsContextMenu currentUserContextMenu"},c.createElement("div",{className:"contextMenuSectionContent"},e),t):null},Object(o.c)([l.a],t.prototype,"SetUserOnline",null),Object(o.c)([l.a],t.prototype,"SetUserInvisible",null),Object(o.c)([l.a],t.prototype,"SetUserAway",null),Object(o.c)([l.a],t.prototype,"SetUserOffline",null),Object(o.c)([l.a],t.prototype,"ToggleUserDND",null),Object(o.c)([l.a],t.prototype,"ShowUserProfile",null),Object(o.c)([l.a],t.prototype,"EditProfile",null),Object(o.c)([l.a],t.prototype,"EditName",null),t}(c.PureComponent),ue=3600,pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCancel=function(){this.props.OnCancel(),this.props.closeModal()},t.prototype.OnOK=function(){this.props.OnOK(),this.props.closeModal()},t.prototype.OnDropDownChange=function(e,t){this.props.OnSet(e.data)},t.prototype.render=function(){var e=[{label:Object(u.d)("#Friend_Kick_Hour"),data:ue},{label:Object(u.d)("#Friend_Kick_Day"),data:86400},{label:Object(u.d)("#Friend_Kick_Week"),data:604800}];return c.createElement(s.a,{onEscKeypress:this.OnCancel},c.createElement(p.h,{classNameContent:"KickUserDialog",onSubmit:this.OnOK,bCenterVertically:!0},c.createElement(p.m,null," ",Object(u.d)("#Friend_Kick")," "),c.createElement(p.b,null,c.createElement(p.c,null,Object(u.d)("#Friend_Kick_How_Long")),c.createElement(p.i,{strDefaultLabel:Object(u.d)("#Friend_Kick_Hour"),rgOptions:e,onChange:this.OnDropDownChange,selectedOption:void 0})),c.createElement(p.j,null,c.createElement(p.s,{onCancel:this.OnCancel,strOKText:Object(u.d)("#Friend_Kick_Button"),strCancelText:Object(u.d)("#Button_Cancel")}))))},Object(o.c)([l.a],t.prototype,"OnCancel",null),Object(o.c)([l.a],t.prototype,"OnOK",null),Object(o.c)([l.a],t.prototype,"OnDropDownChange",null),t}(c.Component)},"G+3Z":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var o=n("i8i4"),r=n("/IDK"),i=function(){return function(e){this.instance=new s(e,!1)}}();function a(e){return new s(e.body,!0)}var s=function(){function e(e,t){void 0===t&&(t=!0),this.m_parent=e,this.m_window=e.ownerDocument.defaultView,this.m_bRemoveOnHide=t}return e.prototype.Show=function(e,t){var n=this;return this.CancelShowInterval(),t?new Promise((function(o,r){n.iIntervalShow=n.m_window.setTimeout((function(){var t=n.m_parent.ownerDocument;t.defaultView&&!t.defaultView.closed&&(n.InternalShow(e),o())}),t)})):(this.InternalShow(e),Promise.resolve())},e.prototype.InternalShow=function(e){this.m_container||(this.m_container=this.m_parent.ownerDocument.createElement("div"),this.m_parent.appendChild(this.m_container)),o.render(e,this.m_container)},e.prototype.Hide=function(e){var t=this;this.CancelShowInterval(),e?this.iIntervalShow=this.m_window.setTimeout((function(){t.InternalHide()}),e):this.InternalHide()},e.prototype.InternalHide=function(){this.m_container&&(o.unmountComponentAtNode(this.m_container),this.m_bRemoveOnHide&&(this.m_parent.removeChild(this.m_container),this.m_container=null))},e.prototype.CancelShowInterval=function(){void 0!==this.iIntervalShow&&(this.m_window.clearInterval(this.iIntervalShow),this.iIntervalShow=void 0)},e.prototype.BIsChildElement=function(e){return this.m_container&&r.e(this.m_container,e)},e}(),c=function(){function e(e){this.m_mapEmbeddedHovers=new WeakMap,this.m_strUniqueID=e}return e.prototype.ShowElementDelayed=function(e,t,n,o){var r=this.GetEmbeddedElement(e);return r.activeObject=o,r.instance.Show(n,t)},e.prototype.ShowElement=function(e,t,n){var o=this.GetEmbeddedElement(e);o.activeObject=n,o.instance.Show(t)},e.prototype.HideElement=function(e,t,n){var o=this.GetEmbeddedElement(e);o.activeObject==t&&(o.activeObject=void 0,o.instance.Hide(n))},e.prototype.GetEmbeddedElement=function(e){var t=this.m_mapEmbeddedHovers.get(e);return t||(t=new i(e.body),this.m_mapEmbeddedHovers.set(e,t)),t},e}()},G4oX:function(e,t,n){"use strict";function o(e){var t=e;return t&&Array.isArray(t)&&t.length>0&&"number"==typeof t[0]}n.d(t,"a",(function(){return o}))},GxRc:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("e2SU"),s=n("twdX"),c=n.n(s),l=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.AddSizeClass=function(e){"small"==this.props.size?e.push(c.a.throbber_small):"medium"==this.props.size?e.push(c.a.throbber_medium):"xlarge"==this.props.size?e.push(c.a.throbber_xlarge):"xxlarge"==this.props.size?e.push(c.a.throbber_xxlarge):e.push(c.a.throbber_large)},t.prototype.render=function(){var e=[c.a.LoadingWrapper,"SteamLogoThrobber"];this.AddSizeClass(e),void 0===this.props.string&&e.push(c.a.noString),this.props.className&&e.push(this.props.className),this.props.static&&e.push(c.a.Static);var t=i.a.createElement("div",{className:e.join(" ")},i.a.createElement("div",{className:c.a.Throbber},i.a.createElement(a.ib,{className:c.a.base}),i.a.createElement(a.ib,{className:c.a.blur})));return i.a.createElement("div",{className:"center"==this.props.position?c.a.throbber_center_wrapper:""},t,Boolean(this.props.string)&&i.a.createElement("div",{className:c.a.ThrobberText},this.props.string))},t}(i.a.PureComponent)},"H+H8":function(e,t,n){e.exports={HoverPosition:"hoverposition_HoverPosition_3gYNB",Ready:"hoverposition_Ready_3wImS",NoSpace:"hoverposition_NoSpace_2g_Ag",EnablePointerEvents:"hoverposition_EnablePointerEvents_JX-6A"}},HAz9:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return U}));var o=n("mrSG"),r=n("TS4p"),i=n.n(r),a=n("tkkQ"),s=n("8o0Y"),c=n("rsEv"),l=n("V7Fl"),u=n("geE1"),p=n("hReu"),m=n("LAqV"),d=n("Oefq"),h=n("YZlK"),f=n("gtB6"),_=n("EGkk"),g=n("FkUk"),b=n("TyAF"),v=n("q1tI"),y=n("1w3K"),S=n("1VtQ"),C=n("adxy"),O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={nCalculatedHeightPx:void 0,bLeftSliderVisible:!1,bRightSliderVisible:!1},n}return Object(o.d)(t,e),t.prototype.OnRef=function(e){this.UnbindWindowHandlers(),e&&(this.m_elScroll=e,e.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.addEventListener("resize",this.CheckScrollPosition),this.CheckScrollPosition())},t.prototype.CheckScrollPosition=function(){if(!(!this.m_elScroll||this.m_animation&&this.m_animation.BIsActive())){for(var e=0,t=this.m_elScroll.firstElementChild;t;t=t.nextElementSibling)e=Math.max(e,t.getBoundingClientRect().height);e!=this.state.nCalculatedHeightPx&&this.setState({nCalculatedHeightPx:e}),this.UpdateSliderControlsForScrollOffset(this.m_elScroll.scrollLeft)}},t.prototype.UpdateSliderControlsForScrollOffset=function(e){var t=e>1,n=e+this.m_elScroll.getBoundingClientRect().width<this.m_elScroll.scrollWidth-1;t!=this.state.bLeftSliderVisible&&this.setState({bLeftSliderVisible:t}),n!=this.state.bRightSliderVisible&&this.setState({bRightSliderVisible:n})},t.prototype.AnimateScrollLeftTo=function(e){this.m_animation&&this.m_animation.Cancel(),this.m_animation=new C.a(this.m_elScroll,{scrollLeft:e},{msDuration:500,onComplete:this.CheckScrollPosition,timing:"cubic-in-out"}),this.m_animation.Start(),this.UpdateSliderControlsForScrollOffset(e)},t.prototype.OnSlideLeftClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.max(0,this.m_elScroll.scrollLeft-this.m_elScroll.getBoundingClientRect().width))},t.prototype.OnSlideRightClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.min(this.m_elScroll.scrollWidth-this.m_elScroll.getBoundingClientRect().width,this.m_elScroll.scrollLeft+this.m_elScroll.getBoundingClientRect().width))},t.prototype.OnWheel=function(e){e&&e.nativeEvent&&(e.nativeEvent.deltaY<0?this.OnSlideLeftClick():this.OnSlideRightClick())},t.prototype.GetScrollRef=function(){return this.m_elScroll},t.prototype.componentWillUnmount=function(){this.UnbindWindowHandlers(),this.m_animation&&this.m_animation.Cancel()},t.prototype.componentDidUpdate=function(){this.CheckScrollPosition()},t.prototype.UnbindWindowHandlers=function(){this.m_elScroll&&(this.m_elScroll.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.removeEventListener("resize",this.CheckScrollPosition),this.m_elScroll=void 0)},t.prototype.render=function(){var e="auto";return this.state.nCalculatedHeightPx&&(e=this.state.nCalculatedHeightPx+"px"),v.createElement("div",{onWheel:this.OnWheel,className:"HorizontalMiniSlider",style:{height:e}},v.createElement("div",{className:"HorizontalMiniSliderScroll "+this.props.className,onScroll:this.CheckScrollPosition,ref:this.OnRef},this.props.children))},Object(o.c)([S.a],t.prototype,"OnRef",null),Object(o.c)([S.a],t.prototype,"CheckScrollPosition",null),Object(o.c)([S.a],t.prototype,"OnSlideLeftClick",null),Object(o.c)([S.a],t.prototype,"OnSlideRightClick",null),Object(o.c)([S.a],t.prototype,"OnWheel",null),t}(v.Component),I=n("e2SU"),E=n("UqDm"),w=n("oh5H"),M=n("bbBM"),D=n("0wLp"),T=n("Hi0u"),j=n("ljid"),G=n("vJVb"),R=n("2vnA"),k=n("XCHq"),A=n("QHER"),N=function(e){function t(t){var n=e.call(this,t)||this;return n.m_mapTabs=new Map,n.m_rgOrderedRenderedTabs=[],n.m_bUsePopups=!1,n.m_nInitialTabDragOffset=-1,n.m_nTheaterTopHoverHeight=12,n.m_fnUnregisterDropComplete=void 0,n.state={tabDrag:void 0,iDragIndex:0,windowWidth:0,bTheaterModeTopHovered:!1},n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(){this.FixScrollLocation()},t.prototype.componentDidMount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.addEventListener("resize",this.OnWindowResizeEvent),this.m_elchatTabDiv&&(this.setState({windowWidth:this.m_elchatTabDiv.clientWidth}),this.UpdateWindowIcon())},t.prototype.componentWillUnmount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.removeEventListener("resize",this.OnWindowResizeEvent)},t.prototype.OnWindowResizeEvent=function(){this.m_elchatTabDiv&&this.setState({windowWidth:this.m_elchatTabDiv.clientWidth})},t.prototype.SetDragTab=function(e){void 0!==e?this.m_fnUnregisterDropComplete=p.i.DragDropManager.RegisterForDropComplete(this.HandleDropComplete):this.m_fnUnregisterDropComplete&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0),this.setState({tabDrag:e}),this.m_nInitialTabDragOffset=-1},t.prototype.GetDragTab=function(){return this.state.tabDrag},t.prototype.HandleDropComplete=function(e){this.m_fnUnregisterDropComplete=void 0,this.setState({tabDrag:void 0})},t.prototype.FixScrollLocation=function(){if(this.m_elScroll&&this.props.activeTab){var e=this.m_mapTabs.get(this.props.activeTab.GetUniqueID());if(e){var t=e.GetChatTabRef();if(t){var n=t.offsetLeft,o=t.offsetLeft+t.offsetWidth,r=Math.ceil(this.m_elScroll.scrollLeft+this.m_elScroll.clientWidth);if(n<r&&o>r){var i=o-Math.floor(this.m_elScroll.clientWidth)+40;this.SetScrollLeft(i)}else if(n<this.m_elScroll.scrollLeft+40||o>r){0!=(i=n)&&(i-=40),this.SetScrollLeft(i)}}}}},t.prototype.SetScrollLeft=function(e){this.m_elScroll.scrollLeft!=e&&(this.m_animation&&this.m_animation.Cancel(),this.m_animation=new C.a(this.m_elScroll,{scrollLeft:e},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start())},t.prototype.UpdateDragOffset=function(e){var t,n=e.clientX;for(t=0;t<this.m_rgOrderedRenderedTabs.length;t++){var o=this.m_rgOrderedRenderedTabs[t],r=this.m_mapTabs.get(o.GetUniqueID()),i=r&&r.GetBoundingClientRect();if(r&&i&&(n-i.left<i.width&&(this.m_nInitialTabDragOffset<0&&(this.m_nInitialTabDragOffset=n-i.left),n-this.m_nInitialTabDragOffset<i.left+i.width/2)))break}this.state.iDragIndex!=t&&this.setState({iDragIndex:t})},t.prototype.OnTabRef=function(e,t){t?this.m_mapTabs.set(e,t):this.m_mapTabs.delete(e),this.UpdateWindowIcon()},t.prototype.OnScrollRef=function(e){this.m_elScroll=e?e.GetScrollRef():null},t.prototype.SelectTab=function(e){this.props.tabSet.ActivateTab(e)},t.prototype.OnDragStart=function(e){var t=p.i.DragDropManager.GetDragData();t&&"chattab"==t.type&&(t.tabSet=this.props.tabSet)},t.prototype.OnChatTabContianerRef=function(e){this.m_elchatTabDiv=e},t.prototype.OnDragEnd=function(){this.setState({tabDrag:void 0})},t.prototype.OnBackClick=function(e){this.props.ResponsiveWindowState.SetActiveView(d.c.FriendsList)},t.prototype.ShowFriendsList=function(e){m.f.UIStore.SetTheaterMode(!1),m.f.UIStore.SetFriendsListCollapsed(Object(p.e)(this,e),!1)},t.prototype.StartTopbarEventListener=function(){this.m_elchatTabDiv.ownerDocument.defaultView.addEventListener("mousemove",this.OnTopbarHovered)},t.prototype.OnTopbarHovered=function(e){var t=e.clientY;m.f.UIStore.GetTheaterMode()||this.m_elchatTabDiv.ownerDocument.defaultView.removeEventListener("mousemove",this.OnTopbarHovered),t>this.m_nTheaterTopHoverHeight?this.state.bTheaterModeTopHovered&&(this.setState({bTheaterModeTopHovered:!1}),this.m_nTheaterTopHoverHeight=12):this.state.bTheaterModeTopHovered||(this.m_nTheaterTopHoverHeight=50,this.setState({bTheaterModeTopHovered:!0}))},t.prototype.OnTabSelectorClick=function(e){var t=33*this.m_mapTabs.size+(e.currentTarget.offsetTop+e.currentTarget.clientHeight)+16>e.currentTarget.ownerDocument.defaultView.innerHeight;Object(s.a)(v.createElement(B,{tabSet:this.props.tabSet}),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!1,bPreferPopTop:!1,bForcePopup:t})},t.prototype.UpdateWindowIcon=function(){try{if(this.props.popup&&this.props.popup.window&&void 0!==this.props.popup.window.SteamClient){for(var e=!1,t=!1,n=this.props.tabSet.tabs,o=0,r=n;o<r.length;o++){var i=r[o];i.GetUnreadMessageCount()>0&&(e=!0),i.IsVoiceActive()&&(t=!0)}t?this.props.popup.window.SteamClient.Window.SetWindowIcon("voice"):e?this.props.popup.window.SteamClient.Window.SetWindowIcon("messages"):this.props.popup.window.SteamClient.Window.SetWindowIcon("steam")}}catch(e){}},t.prototype.render=function(){var e=this,t=m.f.UIStore.GetTheaterMode();if(this.UpdateWindowIcon(),this.props.tabSet.tabCount<=0&&!this.props.popup)return null;var n,o=this.props.tabSet.tabs,r=this.props.activeTab,s=!1,c=!1;r instanceof l.d?s=r.isBroadcastShown:r&&r.IsBroadcast&&r.IsBroadcast()&&(s=!0);for(var u=0,d=o;u<d.length;u++){if(d[u].GetUnreadMessageCount()>0){c=!0;break}}if(this.state.tabDrag){var h=o.indexOf(this.state.tabDrag);-1!=h?h!=this.state.iDragIndex&&(n=o.slice(),Object(E.f)(n,h,Math.min(this.state.iDragIndex,o.length-1))):this.state.iDragIndex<o.length?(n=o.slice()).splice(this.state.iDragIndex,0,this.state.tabDrag):n=o.concat(this.state.tabDrag)}o=n||o,this.m_rgOrderedRenderedTabs=o;var f,_="ChatTabs titleBarContainer";this.props.popup&&(_+=" HasWindowControls"),1==o.length?_+=" OneTab":this.state.windowWidth<180*o.length+180&&(_+=" HasTabs"),m.f.SettingsStore.FriendsSettings.bCompactFriendsList&&(_+=" compactView"),this.state.bTheaterModeTopHovered&&(_+=" TheaterTopHovered"),this.props.ResponsiveWindowState&&(f=v.createElement("div",{className:"ChatTabsBackButton",onClick:this.OnBackClick},"<<")),s&&(_+=" activeTabHasBroadcast");var g,b=!1,S=!0;this.props.popup&&(g=Object(p.f)(this.props.popup),S=m.f.UIStore.BIsFriendsListSingleWindow(g),b=g!=m.a),t&&this.m_elchatTabDiv&&this.StartTopbarEventListener();var C=this.m_elchatTabDiv&&180*this.props.tabSet.tabCount+(a.a.IN_CLIENT?168:48)>this.m_elchatTabDiv.clientWidth||!1;return v.createElement("div",{className:_,onDragStart:this.OnDragStart,ref:this.OnChatTabContianerRef},this.props.popup&&v.createElement(D.a,{hideMinMax:b,popup:this.props.popup,className:"chatTitleBar"}),f,(t&&S||this.props.showOpenFriendsList)&&v.createElement("div",{className:"chatTabOpenFriendsList",onClick:this.ShowFriendsList},v.createElement(I.x,null),Object(w.d)("#FriendsList_ExpandButton")),this.props.tabSet.tabCount>0&&v.createElement("div",{className:"chatTabSetContainer"+(C?" showTabSelector":"")},v.createElement(O,{className:"chatTabList",ref:this.OnScrollRef},v.createElement(y.TransitionGroup,{className:i.a.ChatTabTransitionGroup},o.map((function(t,n){var o=e.props.activeTab==t,r={enter:i.a.ChatTabTransition_Enter,enterActive:i.a.ChatTabTransition_EnterActive,exit:i.a.ChatTabTransition_Exit,exitActive:i.a.ChatTabTransition_ExitActive};return v.createElement(y.CSSTransition,{className:"ChatTabTranstionContainer",classNames:r,key:t.GetUniqueID(),timeout:350},v.createElement(L,{tab:t,active:o,selectTab:e.SelectTab,ref:function(n){return e.OnTabRef(t.GetUniqueID(),n)},fnOnDragEnd:e.OnDragEnd}))})))),C&&v.createElement("div",{className:"chatTabSelector"+(c?" UnreadMessages":""),onClick:this.OnTabSelectorClick},v.createElement(I.p,null),c&&v.createElement("div",{className:"ChatUnreadMessageIndicator"})),a.a.IN_CLIENT&&v.createElement(v.Fragment,null,v.createElement("div",{className:"chatTabDraggableSpace"}),v.createElement("div",{className:"chatTabDraggableSpace ChromeClearance"}))),v.createElement("div",{className:"dropTargetBox"}),t&&v.createElement("div",{className:"theaterModeHoverSpace"+(c?" hasUnreadMessages":"")},c&&v.createElement("div",{className:"ChatUnreadMessageIndicator"},v.createElement("div",{className:"chatUnreadCircle"}))))},Object(o.c)([R.B],t.prototype,"m_nTheaterTopHoverHeight",void 0),Object(o.c)([S.a],t.prototype,"OnWindowResizeEvent",null),Object(o.c)([S.a],t.prototype,"HandleDropComplete",null),Object(o.c)([S.a],t.prototype,"OnTabRef",null),Object(o.c)([S.a],t.prototype,"OnScrollRef",null),Object(o.c)([S.a],t.prototype,"SelectTab",null),Object(o.c)([S.a],t.prototype,"OnDragStart",null),Object(o.c)([S.a],t.prototype,"OnChatTabContianerRef",null),Object(o.c)([S.a],t.prototype,"OnDragEnd",null),Object(o.c)([S.a],t.prototype,"OnBackClick",null),Object(o.c)([S.a],t.prototype,"ShowFriendsList",null),Object(o.c)([S.a],t.prototype,"StartTopbarEventListener",null),Object(o.c)([S.a],t.prototype,"OnTopbarHovered",null),Object(o.c)([S.a],t.prototype,"OnTabSelectorClick",null),t=Object(o.c)([b.a],t)}(v.Component),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.SelectTab=function(e){this.props.tabSet.ActivateTab(e)},t.prototype.render=function(){for(var e=[],t=0,n=this.props.tabSet.tabs;t<n.length;t++){var o=n[t],r=v.createElement(L,{tab:o,active:!0,selectTab:this.SelectTab,fnOnDragEnd:null,bDisableContextMenu:!0});e.push(v.createElement(_.d,{key:o.GetUniqueID(),className:"ChatTabContextMenuItem",onSelected:null},r))}return v.createElement(_.c,{className:"ChatTabs ChatTabsContextMenu compactView CompactFriendsList"},e)},Object(o.c)([S.a],t.prototype,"SelectTab",null),t=Object(o.c)([b.a],t)}(v.Component),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bMiddleMouseDown=!1,t}return Object(o.d)(t,e),t.prototype.BindChatTab=function(e){this.m_elChatTab=e},t.prototype.GetBoundingClientRect=function(){return this.m_elChatTab?this.m_elChatTab.getBoundingClientRect():void 0},t.prototype.GetChatTabRef=function(){return this.m_elChatTab},t.prototype.OnDragStart=function(e){var t=e.clientX-e.currentTarget.getBoundingClientRect().left,n=e.clientY-e.currentTarget.getBoundingClientRect().top;p.i.DragDropManager.StartDrag({type:"chattab",tab:this.props.tab,offsetX:t,offsetY:n})},t.prototype.OnDragEnd=function(e){var t=p.i.DragDropManager.GetDragData();if(t&&"chattab"==t.type){var n=t,o=!1;if(n.tabSet)o=m.f.UIStore.GetPerContextChatData(n.tabSet.GetBrowserContext()).BUsePopups();if(!p.i.DragDropManager.BWasDropConsumed()&&n.tabSet&&n.tabSet.tabCount>1&&o){var r=e.currentTarget.getBoundingClientRect(),i=r.left-e.clientX,a=r.top-e.clientY;if(i*i+a*a>1e4){var s=e.currentTarget.ownerDocument.defaultView,c={left:Math.max(0,e.screenX-n.offsetX),top:Math.max(0,e.screenY-n.offsetY),width:s.innerWidth,height:s.innerHeight};if(this.props.fnOnDragEnd(),o){var l=Object(p.e)(this,e);e.currentTarget.ownerDocument.defaultView.SteamClient.Window.GetMousePositionDetails((function(e){e&&(c.left=-n.offsetX,c.top=-n.offsetY),m.f.UIStore.MoveTabToNewPopup(l,n.tab,c,e)}))}else m.f.UIStore.MoveTabToNewPopup(Object(p.e)(this,e),n.tab,c)}}}p.i.DragDropManager.EndDrag()},t.prototype.OnMouseDown=function(e){0==e.button?this.props.selectTab(this.props.tab):1==e.button&&(e.preventDefault(),this.m_bMiddleMouseDown=!0)},t.prototype.OnMouseUp=function(e){1==e.button&&this.m_bMiddleMouseDown&&(m.f.UIStore.CloseTab(Object(p.e)(this,e),this.props.tab),e.preventDefault(),this.m_bMiddleMouseDown=!1)},t.prototype.OnMouseLeave=function(e){this.m_bMiddleMouseDown=!1},t.prototype.OnCloseMouseDown=function(e){e.stopPropagation()},t.prototype.OnCloseClick=function(e){m.f.UIStore.CloseTab(Object(p.e)(this,e),this.props.tab),e.stopPropagation()},t.prototype.OnContextMenu=function(e){if(!this.props.bDisableContextMenu){var t=this.props.tab;if(t.IsChatRoom()){if(t instanceof l.d){n=t;Object(f.b)(e,n.GetGroup(),{tab:t})}}else{var n=this.props.tab.GetChatView();Object(g.b)(Object(p.e)(this,e),{tab:this.props.tab},n.chat.chat_partner,e)}}},t.prototype.render=function(){var e=this.props.tab,t=e.IsVoiceActive(),n=Object(A.a)(i.a.ChatTab,"no-drag",this.props.active&&i.a.Active,t&&i.a.VoiceActive,t&&m.f.ChatStore.VoiceChat.IsMicMuted()&&i.a.MicMuted);return v.createElement("div",{className:n,ref:this.BindChatTab,draggable:!0,onMouseDown:this.OnMouseDown,onMouseUp:this.OnMouseUp,onMouseLeave:this.OnMouseLeave,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd,onContextMenu:this.OnContextMenu},v.createElement(F,{tab:this.props.tab,active:this.props.active},v.createElement("div",{className:i.a.ChatTabRow},e.IsVoiceActive()&&v.createElement("div",{className:i.a.MicStatus,title:m.f.ChatStore.VoiceChat.IsMicMuted()?Object(w.d)("#Tooltip_MicStatus_Muted"):Object(w.d)("#Tooltip_MicStatus_Active")},v.createElement(I.J,null)),v.createElement(G.a,null,v.createElement(V,{tab:this.props.tab})),v.createElement(P,{onClick:this.OnCloseClick,onMouseDown:this.OnCloseMouseDown}),v.createElement(x,{tab:this.props.tab}))))},Object(o.c)([S.a],t.prototype,"BindChatTab",null),Object(o.c)([S.a],t.prototype,"OnDragStart",null),Object(o.c)([S.a],t.prototype,"OnDragEnd",null),Object(o.c)([S.a],t.prototype,"OnMouseDown",null),Object(o.c)([S.a],t.prototype,"OnMouseUp",null),Object(o.c)([S.a],t.prototype,"OnMouseLeave",null),Object(o.c)([S.a],t.prototype,"OnCloseMouseDown",null),Object(o.c)([S.a],t.prototype,"OnCloseClick",null),Object(o.c)([S.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([b.a],t)}(v.Component);function P(e){return v.createElement("div",{title:Object(w.d)("#Chat_CloseTooltip"),className:i.a.CloseButton,onClick:e.onClick,onMouseDown:e.onMouseDown},v.createElement(I.sb,null))}var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refFriendHover=v.createRef(),t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){!e.active&&this.props.active&&this.m_refFriendHover.current&&this.m_refFriendHover.current.Hide()},t.prototype.render=function(){var e=this.props,t=e.tab.GetChatView();if(t&&t.chat instanceof u.a){var n=t.chat.chat_partner;return v.createElement(M.e,{key:n.accountid,ref:this.m_refFriendHover,friend:n,context:{},disableContextMenu:!0,direction:"bottom"},e.children)}return e.children},t}(v.Component),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.tab;if(e.IsChatRoom()&&e instanceof l.d){if(!e.GetGroup().hasUnreadChatMessage)return null}else if(!e.GetUnreadMessageCount())return null;return v.createElement("div",{className:i.a.UnreadGlow},v.createElement("div",{className:i.a.UnreadCircle}))},t=Object(o.c)([b.a],t)}(v.Component),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.tab.GetChatView();if(e&&e.chat instanceof u.a){var t=e.chat.chat_partner.persona.is_ingame;return v.createElement("div",{className:i.a.ChatTabContent_Friend},v.createElement(M.c,{friend:e.chat.chat_partner,noActions:!0,context:{chat:e.chat},bHideGameName:!t,bHideEnhancedRichPresenceLabel:!0,bHidePersona:!t,bHideSnooze:!1,avatarSize:"X-Small"}))}if(e&&e.chat instanceof c.a){var n=this.props.tab.GetGroup();return v.createElement("div",{className:i.a.ChatTabContent_ChatRoom},v.createElement(h.a,{group:n,smaller:!0,smallish:!1}),v.createElement("div",{className:i.a.ChatTabContent_ChatRoomName},this.props.tab.GetTabName()))}if(this.props.tab.IsBroadcast()){var o=this.props.tab.GetTabName();return v.createElement("div",{className:i.a.ChatTabContent_ChatRoom},v.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar Smaller"},v.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:k.b.tabIcon})),v.createElement("div",{className:i.a.ChatTabContent_ChatRoomName},o))}return null},t=Object(o.c)([b.a],t)}(v.Component);function U(e){p.i.UIDisplayPrefs.bDontShowVoiceAlert||e&&Object(T.c)(v.createElement(H,null),e,"ActiveVoiceAlert",{strTitle:Object(w.d)("#Chat_StillInVoiceDialog_Title"),popupWidth:650,popupHeight:340},Object(p.g)(e))}var H=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bDontShowChecked:!1,strChatName:""},n.m_strChannelName="",n}return Object(o.d)(t,e),t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnSubmit=function(){p.i.SetUIDisplayPref("bDontShowVoiceAlert",this.state.bDontShowChecked),this.props.closeModal()},t.prototype.OnDialogChecked=function(){this.setState({bDontShowChecked:!this.state.bDontShowChecked})},t.prototype.OnManualVoiceChatExit=function(){m.f.VoiceStore.OnUserEndVoiceChat(),this.OnSubmit()},t.prototype.componentDidMount=function(){this.setState({strChatName:m.f.ChatStore.GetActiveVoiceChat().name})},t.prototype.render=function(){return v.createElement(T.a,{onEscKeypress:this.DismissDialog},v.createElement(j.h,{classNameContent:"CloseActiveVoiceWindowConfirmation",onSubmit:this.OnSubmit},v.createElement(j.m,null,v.createElement("div",null,Object(w.d)("#Chat_StillInVoiceDialog_Title"))),v.createElement(j.b,null,v.createElement("div",{className:"activeVoiceDetails"},Object(w.d)("#Chat_StillInVoiceDialog_Desc1")),v.createElement("div",{className:"activeVoiceDetails"},Object(w.d)("#Chat_StillInVoiceDialog_Desc2")),v.createElement("div",{className:"voiceControlsExample"},v.createElement(M.a,{name:this.state.strChatName,chat:m.f.ChatStore.GetActiveVoiceChat(),nostatus:!0}),v.createElement("div",{className:"circleHighlight voiceExit"})),!1),v.createElement(j.j,null,v.createElement("div",{className:"_DialogColLayout"},v.createElement(j.x,{onClick:this.OnSubmit},Object(w.d)("#Chat_StillInVoiceDialog_KeepChatting"))),v.createElement("div",{className:"dontShowConfirmation",onClick:this.OnDialogChecked},v.createElement(j.e,{checked:this.state.bDontShowChecked,onChange:this.OnDialogChecked}),Object(w.d)("#Dialog_DontShowMeAgain")))))},Object(o.c)([S.a],t.prototype,"DismissDialog",null),Object(o.c)([S.a],t.prototype,"OnSubmit",null),Object(o.c)([S.a],t.prototype,"OnDialogChecked",null),Object(o.c)([S.a],t.prototype,"OnManualVoiceChatExit",null),t=Object(o.c)([b.a],t)}(v.Component)},HVDT:function(e,t,n){e.exports={NewEmoticonIndicator:"emoticon_NewEmoticonIndicator_3NVON",NewEmoticonCircle:"emoticon_NewEmoticonCircle_3mNrG",EmoticonSelector:"emoticon_EmoticonSelector_177nw",emoticon:"emoticon_emoticon_9hYGN",large:"emoticon_large_p8Q42",EmoticonSelector_Emoticons:"emoticon_EmoticonSelector_Emoticons_1OTXW",EmoticonSelector_Separator:"emoticon_EmoticonSelector_Separator_1_yzI",EmoticonSelector_SeparatorBackground:"emoticon_EmoticonSelector_SeparatorBackground_13bYy",EmoticonSelector_Controls:"emoticon_EmoticonSelector_Controls_1hOWv",EmoticonSelector_Item:"emoticon_EmoticonSelector_Item_3muLb",EmoticonSelector_Item_New:"emoticon_EmoticonSelector_Item_New_spFg_",EffectHeading:"emoticon_EffectHeading_3SbjL",StickerHeading:"emoticon_StickerHeading_Tp5NO",GetFestive:"emoticon_GetFestive_1uCYo",TopDivider:"emoticon_TopDivider_3oUDw",BottomDivider:"emoticon_BottomDivider_3Rv7K",StickerButton:"emoticon_StickerButton_3O95u",EffectButton:"emoticon_EffectButton_2dRXB",EmoticonHover:"emoticon_EmoticonHover_1ME8O",Info:"emoticon_Info_2H8zy",Name:"emoticon_Name_3neVF",AppName:"emoticon_AppName_3Q4fO",StickerHoverSticker:"emoticon_StickerHoverSticker_4NRgd",EffectHoverEffect:"emoticon_EffectHoverEffect_29Tbv",PickerTab:"emoticon_PickerTab_1tnGG",Clock:"emoticon_Clock_340rx",EmoticonItem:"emoticon_EmoticonItem_2EbXT"}},Hi0u:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return h}));var o=n("mrSG"),r=n("q1tI"),i=n("i8i4"),a=n("JtU4"),s=n("EGkk"),c=n("kQil"),l=n("0wLp"),u=n("1n9R"),p=n("XaMz");function m(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,d(e,t,n,r,void 0,void 0,void 0,!1)]}))}))}function d(e,t,n,r,i,a,s,c){return Object(o.b)(this,void 0,void 0,(function(){var l,u;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,f(e,t,r)];case 1:return(l=o.sent()).height/t.innerHeight<.9&&l.width/t.innerWidth<.8?[2,h(e,t)]:(u={strTitle:n||"Steam Dialog",popupWidth:Math.max(l.width,s||0),popupHeight:Math.max(l.height,a||0),bHideMainWindowForPopups:!1!==c,closeModal:e.props.closeModal},[2,h(e,t,n,u,i)])}}))}))}function h(e,t,n,o,i,a){var s,l,p=e.props.closeModal,m=function(){s&&s.Close(),l&&l.Close(),p&&p()},d=r.cloneElement(e,{closeModal:m}),h=Object(c.e)(t);if(h.BUsePopups()&&u.c.USE_POPUPS&&o&&n){if(o.bHideMainWindowForPopups){var f=r.createElement(c.f,{className:"Hidden",onEscKeypress:!d.props.bDisableBackgroundDismiss&&m},r.createElement("div",null));l=h.ShowModal(f)}var g=new _(t,n,o,d,i,a);g.Show(),s=g}else s=h.ShowModal(d);return s}function f(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(r=t.document.createElement("div")).style.position="absolute",r.style.visibility="hidden",t.document.body.appendChild(r),i.render(e,r),[4,n];case 1:return o.sent(),a=document,u.c.IN_LIBRARY&&a.fonts?[4,a.fonts.ready]:[3,3];case 2:o.sent(),o.label=3;case 3:return s=r.getBoundingClientRect(),c=Math.ceil(s.height),l=Math.ceil(s.width),i.unmountComponentAtNode(r),t.document.body.removeChild(r),[2,{height:c,width:l}]}}))}))}n.d(t,"a",(function(){return c.f}));var _=function(e){function t(t,n,o,r,i,a){var s=e.call(this,n,{title:o.strTitle,html_class:"client_chat_frame fullheight ModalDialogPopup",body_class:"fullheight ModalDialogBody",owner_window:void 0,replace_existing_popup:!0,target_browser:i,availscreenwidth:t.screen.availWidth,availscreenheight:t.screen.availHeight})||this;return s.m_bModalInitiatedClose=!1,s.m_windowOpener=t,s.m_modalProps=o,s.m_modalElement=r,s.m_options=a,s}return Object(o.d)(t,e),t.prototype.Close=function(){this.m_bModalInitiatedClose=!0,e.prototype.Close.call(this)},t.prototype.Update=function(e){Object(p.a)(!1,"NYI")},t.prototype.UpdateParamsBeforeShow=function(e){var t=this.m_modalProps.popupWidth||500,n=this.m_modalProps.popupHeight||400,r=this.m_windowOpener.screen,i=(r.availWidth-t)/2,a=(r.availHeight-n)/2,s=r;return void 0!==s.availLeft&&void 0!==s.availTop&&(i+=s.availLeft,a+=s.availTop),Object(o.a)(Object(o.a)({},e),{dimensions:{width:t,height:n,left:i,top:a}})},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){this.m_bModalInitiatedClose||this.m_modalProps.closeModal&&this.m_modalProps.closeModal()},t.prototype.Render=function(e,t){if(t.setAttribute("class","fullheight popup_chat_frame"),this.m_modalElement){var n=this.m_options?this.m_options.bHideActions:void 0,o=this.m_options&&"number"==typeof this.m_options.nDragAreaHeight?{height:this.m_options.nDragAreaHeight}:void 0;i.render(r.createElement("div",{className:"PopupFullWindow",onContextMenu:s.i},r.createElement(l.a,{hideMinMax:!0,popup:e,hideActions:n,style:o}),r.createElement(c.a,{ModalManager:Object(c.e)(e)}),this.m_modalElement),t)}},t}(a.a)},Hk8Z:function(e,t,n){"use strict";var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("i8i4"),s=n("2vnA"),c=n("1VtQ"),l=n("3/mw"),u=n.n(l),p=n("QHER"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgCurrentMatches=[],n.m_mapMatchByKey=new Map,n.m_hMobxSearchDisposer=Object(s.l)((function(){return Object(o.b)(n,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,this.UpdateSearchResults(this.props.strSearch)];case 1:return e.sent(),this.forceUpdate(),[2]}}))}))})),n.state={selectedIndex:void 0},n}return Object(o.d)(t,e),t.prototype.OnKeyDown=function(e){this.BHandleKeyPress(e.keyCode)&&e.preventDefault()},t.prototype.BHandleKeyPress=function(e){switch(e){case 38:this.SetSelectedIndexDelta(-1);break;case 40:this.SetSelectedIndexDelta(1);break;case 36:this.SetSelectedIndex(0);break;case 33:this.SetSelectedIndexDelta(-this.GetPageSize());break;case 35:this.SetSelectedIndex(-1);break;case 34:this.SetSelectedIndexDelta(this.GetPageSize());break;case 13:case 9:if(void 0===this.state.selectedIndex)return this.props.onSuggestionSelected(this.props.strSearch),!1;this.ChooseSuggestion(this.m_rgCurrentMatches[this.state.selectedIndex]);break;case 27:this.props.onSuggestionSelected(this.props.strSearch);break;default:return!1}return!0},t.prototype.GetPageSize=function(){var e=a.findDOMNode(this),t=e&&e.firstElementChild,n=this.m_rgCurrentMatches.length;if(n>this.getMaxMatches()&&(n=this.getMaxMatches()),t&&n){var o=t.scrollHeight/n,r=t.clientHeight/o;return Math.max(1,Math.floor(r))}return 5},t.prototype.ChooseSuggestion=function(e){this.props.onSuggestionSelected(this.props.strSearch,e?this.getSelection(e):void 0)},t.prototype.SetSelectedIndexDelta=function(e){void 0!==this.state.selectedIndex?this.SetSelectedIndex(this.state.selectedIndex+e):this.SetSelectedIndex(1===e?0:e)},t.prototype.SetSelectedIndex=function(e){if(this.m_rgCurrentMatches.length){var t=this.m_rgCurrentMatches.length;t>this.getMaxMatches()&&(t=this.getMaxMatches()),(e%=t)<0&&(e+=t),this.setState({selectedIndex:e})}},t.prototype.FindKeyIndex=function(e){if(!this.m_mapMatchByKey.size&&this.m_rgCurrentMatches.length)for(var t=0;t<this.m_rgCurrentMatches.length;t++)this.m_mapMatchByKey.set(this.getKey(this.m_rgCurrentMatches[t]),t);return this.m_mapMatchByKey.get(e)},t.prototype.OnClickSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.ChooseSuggestion(this.m_rgCurrentMatches[t])},t.prototype.OnMouseOverSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.SetSelectedIndex(t)},t.prototype.BindSelectedElement=function(e){var t=a.findDOMNode(this),n=a.findDOMNode(e),o=t&&t.firstElementChild;n&&o&&(o.scrollTop+o.clientHeight<n.offsetTop||n.offsetTop<o.scrollTop)&&n.scrollIntoView()},t.prototype.UpdateSearchResults=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return t=this,[4,this.performSearch(e)];case 1:return t.m_rgCurrentMatches=n.sent(),this.m_strLastSearch=e,this.m_mapMatchByKey.clear(),this.m_rgCurrentMatches.length?this.state&&void 0!==this.state.selectedIndex?this.state.selectedIndex>=this.m_rgCurrentMatches.length&&this.setState({selectedIndex:0}):(void 0===this.props.nMinimumSearchLengthBeforeAutoSelection||e.length>=this.props.nMinimumSearchLengthBeforeAutoSelection)&&this.setState({selectedIndex:0}):this.state&&void 0!==this.state.selectedIndex&&this.setState({selectedIndex:void 0}),[2]}}))}))},t.prototype.componentWillUnmount=function(){this.m_hMobxSearchDisposer&&(this.m_hMobxSearchDisposer(),this.m_hMobxSearchDisposer=void 0)},t.prototype.componentDidUpdate=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return this.m_strLastSearch==this.props.strSearch?[3,2]:[4,this.UpdateSearchResults(this.props.strSearch)];case 1:e.sent(),this.forceUpdate(),e.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){var e=[];if(this.m_rgCurrentMatches.length){for(var t=this.getMaxMatches(),n=0;n<Math.min(t,this.m_rgCurrentMatches.length);n++){var o=this.m_rgCurrentMatches[n],r=this.getKey(o),a=n===this.state.selectedIndex;e.push(i.a.createElement(d,{key:r,matchKey:r,fnOnClick:this.OnClickSuggestion,fnOnMouseOver:this.OnMouseOverSuggestion,bIsSelected:a,ref:a?this.BindSelectedElement:void 0},this.renderMatch(o)))}this.m_rgCurrentMatches.length>t&&e.push(this.renderTooManyMatchesMessage(this.m_rgCurrentMatches.length-t))}else{var s=this.renderNoMatchMessage();if(!s)return null;e.push(s)}return i.a.createElement("div",{className:u.a.mentionDialogPosition},i.a.createElement("div",{className:u.a.mentionDialog,tabIndex:0,onKeyDown:this.OnKeyDown},this.renderHeader(),e))},Object(o.c)([c.a],t.prototype,"OnKeyDown",null),Object(o.c)([c.a],t.prototype,"OnClickSuggestion",null),Object(o.c)([c.a],t.prototype,"OnMouseOverSuggestion",null),Object(o.c)([c.a],t.prototype,"BindSelectedElement",null),t}(i.a.Component),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnMouseOver=function(e){this.props.fnOnMouseOver(this.props.matchKey)},t.prototype.OnClick=function(e){this.props.fnOnClick(this.props.matchKey)},t.prototype.render=function(){return i.a.createElement("div",{className:Object(p.a)(u.a.suggestOption,u.a.mentionSearchOption,this.props.bIsSelected?u.a.selected:""),onMouseEnter:this.OnMouseOver,onClick:this.OnClick},this.props.children)},Object(o.c)([c.a],t.prototype,"OnMouseOver",null),Object(o.c)([c.a],t.prototype,"OnClick",null),t}(i.a.PureComponent);t.a=m},HzvH:function(e,t,n){"use strict";n.d(t,"a",(function(){return K})),n.d(t,"b",(function(){return Y}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("9Cmb"),s=n("TyAF"),c=n("Q8iO"),l=n.n(c),u=n("1n9R"),p=n("/7KC");function m(e,t,n){return u.c.COMMUNITY_CDN_ASSET_URL+e+"/roomeffects/"+t+"/"+n}var d=function(e){function t(t){var n=e.call(this,t)||this;return n.m_strSaleId=n.props.sale,n}return Object(o.d)(t,e),t.prototype.getAsset=function(e){return m(this.m_strSaleId,this.props.effect.name,e)},t}(r.Component);function h(e,t){var n,o;n=function(){return setTimeout(e,t)},(o=Object(r.useRef)({bSet:!1})).current.bSet||(o.current={bSet:!0,value:n()}),o.current.value}var f=function(e){var t=e.msDelay,n=e.children;return function(e){var t=Object(r.useState)(!1),n=t[0],o=t[1];return h((function(){return o(!0)}),e),n}(t)?i.a.createElement(i.a.Fragment,null,n):null};var _=function(e){function t(t){var n=e.call(this,t)||this;return n.m_refContainer=i.a.createRef(),n.m_rgFireworks=[],n.m_nCurrentDelay=0,n.state={bReady:!1},n}return Object(o.d)(t,e),t.prototype.CreateFireworks=function(e){this.m_nCurrentDelay=0,this.AddCluster(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.m_nCurrentDelay+=200,this.AddCluster(e),this.m_nCurrentDelay+=600,this.AddCluster(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.AddCluster(e),this.RenderLong(e),this.m_nCurrentDelay+=200,this.AddCluster(e)},t.prototype.TestRender=function(e){Object(p.b)(0,70),Object(p.b)(0,70);for(var t=0;t<1;t++)this.m_rgFireworks.push({x:"20%",y:"20%",nHueRotation:0,nDelay:this.m_nCurrentDelay,flScale:e,burst:g}),this.m_nCurrentDelay+=500;this.m_rgFireworks.push({x:"0%",y:"0%",nHueRotation:0,nDelay:this.m_nCurrentDelay,flScale:e,burst:b}),this.m_rgFireworks.push({x:"30%",y:"30%",nHueRotation:0,nDelay:this.m_nCurrentDelay,flScale:e,burst:v})},t.prototype.CalcHueRotation=function(){return"lny2020"==this.props.sale?360+Object(p.b)(-30,10):Object(p.b)(0,360)},t.prototype.AddCluster=function(e){var t=Object(p.b)(-5,50),n=Object(p.b)(-10,50),o=this.CalcHueRotation();this.m_rgFireworks.push({x:t+"%",y:n+"%",nHueRotation:o,nDelay:this.m_nCurrentDelay,flScale:e,burst:b});for(var r=Math.random()*Math.PI*2,i=Math.floor(64*e),a=Math.floor(60*e),s=Math.floor(10*e),c=0,l=0;l<3;l++){var u="calc( "+t+"% + "+(i+Math.cos(r+c)*a)+"px )",m="calc( "+n+"% + "+(i+(Math.sin(r+c)*a+s))+"px )";l<2&&(this.m_nCurrentDelay+=200),o=this.CalcHueRotation(),this.m_rgFireworks.push({x:u,y:m,nHueRotation:o,nDelay:this.m_nCurrentDelay,flScale:e,burst:v}),c+=2.09}},t.prototype.RenderLong=function(e){var t=Object(p.b)(20,60),n=Object(p.b)(-5,50),o=this.CalcHueRotation();this.m_rgFireworks.push({x:t+"%",y:n+"%",nHueRotation:o,nDelay:this.m_nCurrentDelay,flScale:e,burst:g})},t.prototype.componentDidMount=function(){if(this.m_refContainer.current&&!(this.m_rgFireworks.length>0)){var e=this.m_refContainer.current,t=e.offsetWidth,n=e.offsetHeight,o=Object(p.c)(t,400,1080,.5,2);o=Object(p.a)(o,.5,2),console.log(t,n,o),this.CreateFireworks(o),this.setState({bReady:!0})}},t.prototype.render=function(){var e=this,t=[];return this.state.bReady&&this.m_rgFireworks.map((function(n,o){var r=""+o,a={top:n.y,left:n.x,filter:"hue-rotate("+n.nHueRotation+"deg)"};t.push(i.a.createElement(n.burst,{key:r,style:a,msDelay:n.nDelay,scale:n.flScale,sale:e.props.sale}))})),i.a.createElement("div",{ref:this.m_refContainer,className:l.a.FireworkContainer},t)},t}(i.a.Component);function g(e){var t=m(e.sale,"fireworks","long_sheet.png"),n=e.style;return n.backgroundImage="url("+t+")",n.width=256,n.height=256,n.animation=l.a.fireworkLongX+" 0.2s steps(9) 10, "+l.a.fireworkLongY+" 2.0s steps(10) forwards",n.transformOrigin="0 0",n.transform="scale( "+e.scale+" )",i.a.createElement(f,{msDelay:e.msDelay},i.a.createElement("div",{style:e.style,className:l.a.FireworkPNG}))}function b(e){var t=m(e.sale,"fireworks","big_sheet.png"),n=e.style;return n.backgroundImage="url("+t+")",n.width=256,n.height=256,n.animation=l.a.fireworkBigX+" 0.2s steps(9) 4, "+l.a.fireworkBigY+" 0.8s steps(4) forwards",n.transformOrigin="0 0",n.transform="scale( "+e.scale+" )",i.a.createElement(f,{msDelay:e.msDelay},i.a.createElement("div",{style:e.style,className:l.a.FireworkPNG}))}function v(e){var t=m(e.sale,"fireworks","small_sheet.png"),n=e.style;return n.backgroundImage="url("+t+")",n.width=256,n.height=256,n.animation=l.a.fireworkSmallX+" 0.15s steps(10) 6, "+l.a.fireworkSmallY+" 0.9s steps(6) forwards",n.transformOrigin="0 0",n.transform="scale( "+e.scale/2+" )",i.a.createElement(f,{msDelay:e.msDelay},i.a.createElement("div",{style:e.style,className:l.a.FireworkPNG}))}var y,S=n("ZO3Q");function C(e){switch(e){case y.Gold:case y.LNY2020:return"hsl("+(51+-16*Math.random())+", 93%, 54%)";default:return"hsl("+360*Math.random()+", 100%, 40%)"}}function O(e){return e==y.LNY2020?"hue-rotate("+(360+Object(p.b)(-30,10))+"deg)":""}!function(e){e[e.Default=0]="Default",e[e.Gold=1]="Gold",e[e.LNY2020=2]="LNY2020"}(y||(y={}));var I=function(e,t){var n=Object(S.useSpring)({anim:1,from:{anim:0},config:{duration:8e3}}).anim;return Object(r.useMemo)((function(){var o=function(e,t){var n=[];if(!e)return n;for(var o=e.width,r=e.height,i=0;i<200;i++){var a=Math.random(),s=Math.random()*a,c=Math.random()*s,l=4*(Math.random()-.5)*Math.PI*20,u=Math.random()+.5,p=[Math.random()*r-r-20,r+20+Math.random()*r*u],m=u*(o<=1e3?1:o/1e3)*(t==y.Gold?2:1),d=(Math.random()-.5)*o,h=(Math.random()-.5)*o,f=[h,d+h],_=C(t),g=O(t);n.push({rotationCoefficient:l,rotationRatioY:s,rotationRatioX:a,rotationRatioZ:c,yRange:p,xRange:f,scale:m,colorHue:_,filter:g})}return n}(e,t);return{rgParticleStyles:o.map((function(e){return function(e,t,n){y.Default;var o=e.rotationCoefficient,r=e.rotationRatioY,i=e.rotationRatioX,a=e.rotationRatioZ,s=e.yRange,c=e.xRange,l=e.scale,u=e.colorHue;return{backgroundColor:u,fill:u,filter:e.filter,flRandom:0,transform:t.interpolate((function(e){var t=e*o*r,n=e*o*i,u=e*o*a,p=e*(s[1]-s[0])+s[0];return"translate("+(e*(c[1]-c[0])+c[0])+"px, "+p+"px) rotateY("+t+"rad) rotateX("+n+"rad) rotateZ("+u+"rad) scale("+l+")"}))}}(e,n)})),rgStreamerStyles:o.map((function(e){return function(e,t,n){if(Math.random()>.1)return null;var o=e.rotationCoefficient,r=e.rotationRatioZ,i=e.yRange,a=e.xRange,s=e.scale;return{backgroundColor:void 0,fill:e.colorHue,filter:e.filter,flRandom:Math.random(),transform:t.interpolate((function(e){var t=e*o/4*r,n=e*(i[1]-i[0])+i[0];return"translate("+(e*(a[1]-a[0])+a[0])+"px, "+n+"px) rotateZ("+t+"rad) scale("+s+")"}))}}(e,n)})).filter((function(e){return!!e}))}}),[e])},E={position:"absolute",left:"50%",top:0},w=Object(o.a)(Object(o.a)({},E),{width:10,height:5,borderWidth:1,borderColor:"black"}),M=function(e){var t,n=e.eType,o=(y.Gold,y.LNY2020,function(){var e=Object(r.useState)(null),t=e[0],n=e[1],o=Object(r.useCallback)((function(e){e&&"function"==typeof e.getBoundingClientRect&&n(e.getBoundingClientRect())}),[]);return[t,o]}()),a=o[0],s=o[1],c=I(a,n),l=c.rgParticleStyles,u=c.rgStreamerStyles;switch(n){case y.Gold:t=l.map((function(e,t){return i.a.createElement(T,{key:t,style:e})}));break;case y.LNY2020:t=l.map((function(e,t){return t%2?i.a.createElement(D,{key:t,style:e}):i.a.createElement(j,{key:t,style:e})}));break;case y.Default:t=l.map((function(e,t){return i.a.createElement(D,{key:t,style:e})}))}return i.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden"},ref:s},t,u.map((function(e,t){return e.flRandom>.5?i.a.createElement(R,{key:t,style:e}):i.a.createElement(G,{key:t,style:e})})))},D=function(e){var t=e.style;return i.a.createElement(S.animated.div,{style:Object(o.a)(Object(o.a)({},w),t)})},T=function(e){var t=e.style,n=Object(r.useState)(Math.floor(Math.random()*k.length))[0],a=k[n];return i.a.createElement(a,{style:Object(o.a)(Object(o.a)(Object(o.a)({},E),t),{backgroundColor:void 0})})},j=function(e){var t=e.style,n=Object(r.useState)(Math.floor(Math.random()*A.length))[0],a=A[n];return i.a.createElement(a,{style:Object(o.a)(Object(o.a)(Object(o.a)({},E),t),{backgroundColor:void 0})})},G=function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 80 620",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:70},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.53418 0.446363C4.80788 7.96949 8.99436 15.2008 13.0073 22.1324C35.0383 60.1862 51.8397 89.2071 49.1318 107.895C48.8475 101.617 47.1164 95.1506 43.6182 89.4997C22.9652 56.1375 -2.34054 7.06674 0.53418 0.446363ZM56.8207 188.805C55.1885 180.279 48.7591 170.011 41.3806 161.521C37.204 156.715 9.25983 141.889 7.31883 141.711L7.31474 141.711L7.31468 141.71L7.31452 141.71L7.11268 139.174L6.5244 131.791L6.5251 131.791L6.52505 131.79L6.52672 131.791C34.8022 129.659 47.1567 121.526 49.1318 107.895C49.6795 119.989 44.859 131.385 36.9599 134.917C33.2606 136.571 29.1329 137.843 25.1609 138.813C32.3599 142.599 44.0294 149.927 51.5956 160.751C60.8324 173.966 58.2537 184.901 56.8207 188.805ZM14.1541 214.387C28.3318 211.43 49.5183 206.914 54.7559 200.428C57.1974 197.404 57.6912 193.352 56.8207 188.805C56.4544 189.804 56.163 190.342 56.163 190.342C50.7646 194.114 26.0806 200.624 11.3908 204.497L11.3906 204.497L11.3904 204.497C7.40758 205.548 4.15949 206.404 2.22967 206.96L2.67009 212.483L3.21786 219.36C12.4021 224.467 20.8538 228.732 28.2879 232.483C70.3706 253.717 79.8458 258.498 5.02032 306.544C5.02047 306.546 5.02063 306.548 5.02078 306.55C5.01989 306.548 5.019 306.547 5.01812 306.545C5.24371 309.369 5.53845 312.547 5.79092 315.269C5.89859 316.43 5.99858 317.508 6.08223 318.44C6.15188 319.464 6.19564 320.436 6.20554 321.424C6.20464 321.331 6.23688 321.223 6.30064 321.101C6.31949 321.398 6.32799 321.609 6.32408 321.719C6.27561 321.616 6.23528 321.518 6.20333 321.425C6.28038 321.817 6.31788 321.895 6.32408 321.719C7.33553 323.874 11.894 328.285 17.8731 334.069C41.6329 357.056 87.8264 401.748 23.0228 412.886C23.5764 419.833 23.1631 419.992 23.1631 419.992C23.1631 419.992 24.3205 419.752 26.2506 419.305C34.1052 423.989 55.3095 438.589 58.8169 442.625C66.1955 451.115 72.6248 461.382 74.2571 469.909C73.8908 470.907 73.5993 471.446 73.5993 471.446C68.4367 475.053 42.2327 481.635 25.7172 485.783L25.7152 485.783L25.7147 485.784L25.7135 485.784L25.7028 485.787C20.6602 487.053 16.5222 488.093 14.1645 488.751L13.6222 488.439L13.6585 488.894L13.653 488.896L13.6602 488.916L14.4124 498.36C47.1778 516.58 73.923 535.597 77.6114 557.121C77.1891 558.457 76.6366 559.776 75.9628 561.084C62.5946 587.039 41.1874 608.612 24.1016 619.88C66.6744 596.331 80.8095 575.784 77.6114 557.121C81.823 543.801 73.0945 528.757 42.6319 505.104L26.8056 496.013C27.3301 495.908 27.8664 495.802 28.4133 495.693L28.4153 495.693C43.5756 492.685 66.9267 488.052 72.1923 481.531C74.6338 478.508 75.1275 474.456 74.2571 469.909C75.69 466.004 78.2687 455.069 69.032 441.855C57.4339 425.262 36.1944 416.886 36.1944 416.886L35.6563 416.927C41.635 415.285 48.7178 413.074 54.4334 410.519C66.4332 405.154 68.2307 384.374 57.9941 367.838C51.515 357.372 43.7231 350.194 35.4751 342.596C27.6489 335.386 19.4122 327.798 11.4967 316.664C12.7089 315.779 14.0928 314.791 15.6091 313.709C40.2963 296.086 100.082 253.407 25.4758 221.439L14.1541 214.387Z",fill:t.fill}))},R=function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 203 295",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:20},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M104.427 22.6009L104.428 22.6013C125.146 59.4015 140.687 87.0059 133.282 102.839C134.662 95.3303 133.62 86.4659 129.246 79.1843C112.124 50.6796 91.1453 8.75528 93.5285 3.10091C97.2525 9.85693 100.914 16.3611 104.427 22.6009ZM142.726 166.38C141.373 159.096 136.043 150.323 129.926 143.069C127.078 139.691 110.154 127.651 103.342 123.396C101.494 123.638 100.371 123.725 100.371 123.725C100.371 123.725 100.713 123.589 100.254 117.655C119.247 116.187 129.407 111.125 133.282 102.839C131.985 109.898 128.547 115.759 123.726 117.978C120.124 119.637 116.182 120.838 112.579 121.699C116.941 123.721 130.418 130.653 138.395 142.414C146.052 153.705 143.914 163.045 142.726 166.38ZM103.389 188.664C103.824 188.575 104.268 188.484 104.721 188.392L104.722 188.392C117.291 185.827 136.649 181.876 141.015 176.307C143.039 173.725 143.448 170.264 142.726 166.38C142.423 167.232 142.181 167.693 142.181 167.693C137.901 170.772 116.177 176.387 102.486 179.926C98.3006 181.007 94.8659 181.895 92.9093 182.457L92.4596 182.191L92.4896 182.579C92.4878 182.58 92.486 182.58 92.4842 182.581L92.4914 182.602L93.1147 190.665C120.278 206.239 142.45 222.491 145.508 240.879C145.158 242.02 144.7 243.146 144.141 244.263C133.059 266.43 115.312 284.852 101.148 294.472C136.441 274.369 148.16 256.821 145.508 240.879C149 229.501 141.764 216.649 116.509 196.435L103.389 188.664Z",fill:t.fill}))},k=[function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 102",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:5,height:10},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M45.8382 77.0734L24 0L2.16179 77.0734C0.773631 79.3013 0 81.7786 0 84.3885C0 84.4894 0.00115761 84.5902 0.00346361 84.6908L0 84.703H0.00374963C0.23239 94.2845 10.8883 102 24 102C37.1117 102 47.7676 94.2845 47.9963 84.703H48L47.9965 84.6908C47.9988 84.5902 48 84.4894 48 84.3885C48 81.7786 47.2264 79.3013 45.8382 77.0734Z",fill:"#F7D51E"}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 50 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:7},t)},i.a.createElement("path",{d:"M48.444 16.0525L32.7132 0.633915C20.0884 16.8827 7.13568 21.7989 0.597293 21.9904C7.33478 28.5984 14.1472 37.4728 14.1472 37.4728C31.6473 38.7751 44.3035 23.7352 48.444 16.0525Z",fill:"#C4C4C4"}),i.a.createElement("path",{d:"M48.444 16.0525L32.7132 0.633915C20.0884 16.8827 7.13568 21.7989 0.597293 21.9904C7.33478 28.5984 14.1472 37.4728 14.1472 37.4728C31.6473 38.7751 44.3035 23.7352 48.444 16.0525Z",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 68 69",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:10},t)},i.a.createElement("rect",{y:"34.6389",width:"48",height:"48",transform:"rotate(-45 0 34.6389)",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:10},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 0L0 24L24 47.9999L48 24L24 0ZM23.7089 8.48533L8.48527 23.7089L23.7089 38.9325L38.9324 23.7089L23.7089 8.48533Z",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("ellipse",{cx:"24",cy:"15",rx:"24",ry:"15",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("ellipse",{cx:"24",cy:"15",rx:"24",ry:"15",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("ellipse",{cx:"24",cy:"15",rx:"24",ry:"15",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("path",{d:"M33.8287 29.6914L24.9705 21.1201C23.199 24.5487 23.4612 24.5487 21.4282 27.9773C19.3952 31.4058 13.4557 29.6914 12.57 27.9773C7.25553 22.8344 10.7985 17.6914 12.57 15.9773C19.656 5.69155 36.5247 4.54869 48 5.69155C47.4095 4.54865 45.5199 1.92 42.6855 0.548571C39.1425 -1.16571 1.94169 0.548571 0.170191 14.2629C-1.60131 27.9771 10.7992 38.2629 21.4282 38.2629C29.9314 38.2629 33.2382 32.5486 33.8287 29.6914Z",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{width:"48",height:"35",viewBox:"0 0 48 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:7},t)},i.a.createElement("path",{d:"M48 0H0L24 35L48 0Z",fill:t.fill}))}],A=[function(e){var t=e.style;return i.a.createElement(S.animated.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 54 47.18",style:Object(o.a)({width:28,height:28},t)},i.a.createElement("polygon",{fill:"#60000e",points:"10.02 14.06 10.02 14.06 10.02 14.06 10.02 14.06"}),i.a.createElement("path",{fill:"#f93838",d:"M54,9.53A9.52,9.52,0,0,0,37.74,2.79a10.82,10.82,0,0,0-2.25,3.54,21.52,21.52,0,0,0-1.19,4.08A16.55,16.55,0,0,0,27,8.73h-.24a16.38,16.38,0,0,0-7,1.69,22.41,22.41,0,0,0-1.2-4.09,10.82,10.82,0,0,0-2.25-3.54A9.52,9.52,0,1,0,2.79,16.26h0a10.82,10.82,0,0,0,3.54,2.25,23.87,23.87,0,0,0,5,1.36,16.34,16.34,0,0,0-.94,5.48h0v0a16.57,16.57,0,0,0,4.92,11.81A7.36,7.36,0,0,1,17.05,40a10.5,10.5,0,0,0,10,7.15,10.38,10.38,0,0,0,6.17-2,10.57,10.57,0,0,0,3.77-5.11,7.48,7.48,0,0,1,1.79-2.89,16.66,16.66,0,0,0,4-17.3l.65-.12a22.44,22.44,0,0,0,4.31-1.24,10.82,10.82,0,0,0,3.54-2.25L50.9,16l.31.31A9.5,9.5,0,0,0,54,9.53ZM32.11,21.28a9.27,9.27,0,0,1,2.68-.38,9.06,9.06,0,0,1,2.87.44.44.44,0,0,1,.28.56.44.44,0,0,1-.56.27,8.4,8.4,0,0,0-2.59-.39,8.59,8.59,0,0,0-2.43.34h0a.44.44,0,1,1-.26-.84Zm-7.88,8.64a9.27,9.27,0,0,1,2.68-.38,9.06,9.06,0,0,1,2.87.44.44.44,0,0,1,.28.56.44.44,0,0,1-.56.27,8.35,8.35,0,0,0-2.59-.39,8.46,8.46,0,0,0-2.42.34h0a.44.44,0,1,1-.26-.84ZM24.31,33a.45.45,0,0,1,.54-.32l2.16.55,2.14-.55a.45.45,0,0,1,.54.32.44.44,0,0,1-.32.53l-2.25.58a.41.41,0,0,1-.22,0l-2.27-.58h0A.44.44,0,0,1,24.31,33ZM21.9,21.34a.44.44,0,0,1,.28.56.44.44,0,0,1-.56.27A8.35,8.35,0,0,0,19,21.78a8.46,8.46,0,0,0-2.42.34h0a.44.44,0,0,1-.26-.84A9.27,9.27,0,0,1,19,20.9,9.06,9.06,0,0,1,21.9,21.34Zm-1.6,8.08h0v0a.41.41,0,0,1,0-.1c0-.08-.06-.19-.12-.33a4.39,4.39,0,0,0-.47-.95,2.16,2.16,0,0,0-.43-.5,1.11,1.11,0,0,0-.24-.16.7.7,0,0,0-.25-.05.88.88,0,0,0-.29.05,1.82,1.82,0,0,0-.4.24,5,5,0,0,0-1.16,1.3.66.66,0,0,1-.92.17.65.65,0,0,1-.17-.91,7.44,7.44,0,0,1,1.1-1.32A3.45,3.45,0,0,1,18,26.13a2.21,2.21,0,0,1,.75-.14,2,2,0,0,1,.87.21,2.37,2.37,0,0,1,.66.49,4.41,4.41,0,0,1,.84,1.21,7.08,7.08,0,0,1,.3.72c.1.27.14.45.15.46h0a.67.67,0,0,1-.47.81A.66.66,0,0,1,20.3,29.42Zm12.19,8.86a4.18,4.18,0,0,1-.92.52,7.57,7.57,0,0,1-1.11,2.55A4.85,4.85,0,0,1,28.58,43a3.56,3.56,0,0,1-3.16,0,4.71,4.71,0,0,1-1.33-1,7.14,7.14,0,0,1-1.66-3.24,4.18,4.18,0,0,1-.92-.52.44.44,0,0,1-.1-.61.45.45,0,0,1,.62-.1,2.89,2.89,0,0,0,1.76.61,3,3,0,0,0,1.58-.47,4.28,4.28,0,0,0,1.26-1.31.43.43,0,0,1,.74,0,4.28,4.28,0,0,0,1.26,1.31,3,3,0,0,0,1.58.47A2.89,2.89,0,0,0,32,37.57h0a.45.45,0,0,1,.62.1A.44.44,0,0,1,32.49,38.28ZM38,29.07a.66.66,0,0,1-.92-.17,6.25,6.25,0,0,0-.9-1.09,2.25,2.25,0,0,0-.66-.45.88.88,0,0,0-.29-.05.58.58,0,0,0-.28.07,1,1,0,0,0-.31.23,3.29,3.29,0,0,0-.58.84c-.1.21-.19.42-.25.59s-.12.37-.13.38h0a.66.66,0,0,1-.8.47.67.67,0,0,1-.47-.81s.07-.25.2-.58a6.91,6.91,0,0,1,.59-1.2,3.66,3.66,0,0,1,.69-.79,2.3,2.3,0,0,1,.56-.35,1.82,1.82,0,0,1,.78-.17,2.21,2.21,0,0,1,.75.14,3,3,0,0,1,.73.41,6.6,6.6,0,0,1,1.46,1.62A.65.65,0,0,1,38,29.07Z"}),i.a.createElement("path",{fill:"#f93838",d:"M27,40.35c1.12,0,1.55-.37,1.89-1.53a4.17,4.17,0,0,1-.73-.37A5,5,0,0,1,27,37.39a5,5,0,0,1-1.16,1.06,4.17,4.17,0,0,1-.73.37C25.45,40,25.88,40.35,27,40.35Z"}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 14.5 22",style:Object(o.a)({width:28,height:28},t)},i.a.createElement("path",{fill:"#fc1010",d:"M1.6,10.1c0,0-0.1,0-0.4-0.1C1,10,0.8,9.9,0.8,9.9c-0.1,0-0.2-0.1-0.2-0.2c0-0.2,0.1-0.4,0.3-0.6v0L1,9c0.1-0.1,0.2-0.3,0.5-0.6C1.8,8.1,2,7.8,2.2,7.5c0-0.1,0.1-0.1,0.1-0.2s0.1-0.1,0.1-0.2C2.6,7,2.7,6.8,2.8,6.5c0-0.1,0.1-0.2,0.1-0.3C3,6.1,3,6,3,5.9c0-0.2-0.1-0.4-0.2-0.5C2.6,5.3,2.4,5.3,2.1,5.3c-0.2,0-0.4,0-0.6,0.1c-0.1,0-0.4,0.1-0.7,0.3c0,0,0,0,0,0c0,0,0-0.1,0-0.1c0-0.2,0-0.4-0.1-0.8l0-0.6l0-0.3l0-0.2V3.5l0.5-0.2C1.6,3.2,2,3.1,2.5,3c0.5-0.1,0.9-0.1,1.4-0.1c0.4,0,0.8,0,1.1,0.1c0.4,0.1,0.7,0.2,0.9,0.4c0.6,0.4,0.9,1,0.9,1.8c0,0.4-0.1,0.8-0.4,1.2C6.1,6.8,5.7,7.2,5.1,7.6h0.5h0.5c0.2,0,0.4,0,0.5,0c0.2,0.1,0.3,0.1,0.3,0.3c0,0.2,0,0.5,0,0.8V9v0.3c0,0.2,0,0.4-0.1,0.5C6.6,10,6.5,10,6.2,10c0,0-0.1,0-0.2,0c-0.1,0-0.4,0-0.9,0H4H3.6H3.1H2.6C1.9,10.1,1.6,10.1,1.6,10.1z"}),i.a.createElement("path",{fill:"#fc1010",d:"M9.8,10.3c-0.1,0-0.2,0-0.3,0l-0.6-0.1c0,0-0.1,0-0.1-0.1c0,0-0.1,0-0.1,0c0,0,0,0-0.1,0c0,0,0,0,0-0.1c-0.1,0-0.2-0.1-0.3-0.1C8.1,9.8,8,9.8,8,9.7L7.8,9.6c-0.1,0-0.1-0.1-0.2-0.1C7.4,9.3,7.2,9,7.1,8.6C7,8.3,6.9,8,6.9,7.6c0-0.2,0-0.6,0-0.9c0-0.5,0-0.8,0.1-1.1c0-0.3,0.1-0.7,0.3-1.1c0.1,0,0.1-0.2,0.3-0.5c0,0,0.1-0.1,0.1-0.1s0-0.1,0.1-0.1c0,0,0,0,0-0.1s0-0.1,0.1-0.1c0.1,0,0.2-0.1,0.3-0.2c0,0,0.1-0.1,0.2-0.1c0.1-0.1,0.1-0.1,0.2-0.1C8.5,3.1,8.8,3,9.1,2.9c0.1,0,0.1,0,0.2,0c0.1,0,0.2,0,0.2,0c0.1,0,0.2,0,0.3,0c0.1,0,0.1,0,0.2,0c0.5,0,0.9,0,1.3,0.1c0.3,0,0.7,0.1,1.1,0.2c0,0,0.1,0,0.1,0c0.3,0.1,0.5,0.2,0.6,0.2c0.1,0,0.1,0.1,0.1,0.1v0.1c0.1,0,0.2,0,0.3,0.1s0.2,0.2,0.3,0.3c0.1,0.1,0.2,0.2,0.2,0.4c0,0.1,0.1,0.2,0.1,0.3c0.1,0,0.1,0,0.1,0s0,0,0,0.1c0,0.2,0.1,0.4,0.1,0.5c0,0.1,0,0.1,0.1,0.2c0,0.1,0,0.2,0.1,0.3l0,0.1l0,0.4v0.3c0,0.6,0,1.1-0.1,1.4C14.2,8.6,14,9,13.7,9.3c-0.1,0.1-0.3,0.2-0.4,0.3l-0.4,0.3c-0.2,0.1-0.4,0.1-0.5,0.2l-0.5,0.2c-0.3,0-0.6,0-0.9,0.1c-0.3,0-0.6,0.1-0.9,0.1C9.9,10.3,9.9,10.3,9.8,10.3z M11.2,8.3c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.2,0-0.2l0-0.3c0-0.2,0-0.5,0-0.7c0-0.1,0-0.2,0-0.3c0-0.2,0-0.4-0.1-0.6c0-0.2-0.1-0.3-0.1-0.5c0-0.2-0.1-0.3-0.1-0.3c0-0.1,0-0.3-0.1-0.3c-0.1-0.1-0.1-0.1-0.3-0.1c-0.2,0-0.4,0.1-0.5,0.4c0,0.1-0.1,0.2-0.1,0.3c0,0,0,0.2,0,0.3L10,6.2C9.9,6.4,9.9,6.6,9.9,6.8c0,0.3,0,0.5,0.1,0.8c0,0.1,0,0.2,0.1,0.4s0.1,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.2c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0,0.1,0C10.9,8.6,11.1,8.5,11.2,8.3z"}),i.a.createElement("path",{fill:"#fc1010",d:"M1.6,17.5c0,0-0.1,0-0.4-0.1c-0.2,0-0.4-0.1-0.4-0.1c-0.1,0-0.2-0.1-0.2-0.2c0-0.2,0.1-0.4,0.3-0.6v0L1,16.4c0.1-0.1,0.2-0.3,0.5-0.6c0.2-0.2,0.4-0.5,0.7-0.9c0-0.1,0.1-0.1,0.1-0.2s0.1-0.1,0.1-0.2c0.1-0.1,0.2-0.3,0.3-0.6c0-0.1,0.1-0.2,0.1-0.3C3,13.5,3,13.4,3,13.3c0-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.4-0.1-0.7-0.1c-0.2,0-0.4,0-0.6,0.1c-0.1,0-0.4,0.1-0.7,0.3c0,0,0,0,0,0c0,0,0-0.1,0-0.1c0-0.2,0-0.4-0.1-0.8l0-0.6l0-0.3l0-0.2v-0.1l0.5-0.2c0.4-0.1,0.9-0.2,1.3-0.3c0.5-0.1,0.9-0.1,1.4-0.1c0.4,0,0.8,0,1.1,0.1c0.4,0.1,0.7,0.2,0.9,0.4c0.6,0.4,0.9,1,0.9,1.8c0,0.4-0.1,0.8-0.4,1.2c-0.3,0.4-0.7,0.8-1.3,1.2h0.5h0.5c0.2,0,0.4,0,0.5,0c0.2,0.1,0.3,0.1,0.3,0.3c0,0.2,0,0.5,0,0.8v0.3v0.3c0,0.2,0,0.4-0.1,0.5c-0.1,0.1-0.3,0.2-0.5,0.2c0,0-0.1,0-0.2,0c-0.1,0-0.4,0-0.9,0H4H3.6H3.1H2.6C1.9,17.5,1.6,17.5,1.6,17.5z"}),i.a.createElement("path",{fill:"#fc1010",d:"M9.8,17.7c-0.1,0-0.2,0-0.3,0l-0.6-0.1c0,0-0.1,0-0.1-0.1c0,0-0.1,0-0.1,0c0,0,0,0-0.1,0c0,0,0,0,0-0.1c-0.1,0-0.2-0.1-0.3-0.1c-0.1,0-0.2-0.1-0.3-0.1L7.8,17c-0.1,0-0.1-0.1-0.2-0.1c-0.2-0.2-0.4-0.5-0.5-0.9C7,15.7,6.9,15.4,6.9,15c0-0.2,0-0.6,0-0.9c0-0.5,0-0.8,0.1-1.1c0-0.3,0.1-0.7,0.3-1.1c0.1,0,0.1-0.2,0.3-0.5c0,0,0.1-0.1,0.1-0.1s0-0.1,0.1-0.1c0,0,0,0,0-0.1s0-0.1,0.1-0.1c0.1,0,0.2-0.1,0.3-0.2c0,0,0.1-0.1,0.2-0.1c0.1-0.1,0.1-0.1,0.2-0.1c0.2-0.1,0.5-0.2,0.8-0.3c0.1,0,0.1,0,0.2,0c0.1,0,0.2,0,0.2,0c0.1,0,0.2,0,0.3,0c0.1,0,0.1,0,0.2,0c0.5,0,0.9,0,1.3,0.1c0.3,0,0.7,0.1,1.1,0.2c0,0,0.1,0,0.1,0c0.3,0.1,0.5,0.2,0.6,0.2c0.1,0,0.1,0.1,0.1,0.1v0.1c0.1,0,0.2,0,0.3,0.1s0.2,0.2,0.3,0.3c0.1,0.1,0.2,0.2,0.2,0.4c0,0.1,0.1,0.2,0.1,0.3c0.1,0,0.1,0,0.1,0s0,0,0,0.1c0,0.2,0.1,0.4,0.1,0.5c0,0.1,0,0.1,0.1,0.2c0,0.1,0,0.2,0.1,0.3l0,0.1l0,0.4v0.3c0,0.6,0,1.1-0.1,1.4c-0.1,0.5-0.3,0.9-0.7,1.2c-0.1,0.1-0.3,0.2-0.4,0.3l-0.4,0.3c-0.2,0.1-0.4,0.1-0.5,0.2l-0.5,0.2c-0.3,0-0.6,0-0.9,0.1c-0.3,0-0.6,0.1-0.9,0.1C9.9,17.7,9.9,17.7,9.8,17.7z M11.2,15.7c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.2,0-0.2l0-0.3c0-0.2,0-0.5,0-0.7c0-0.1,0-0.2,0-0.3c0-0.2,0-0.4-0.1-0.6c0-0.2-0.1-0.3-0.1-0.5c0-0.2-0.1-0.3-0.1-0.3c0-0.1,0-0.3-0.1-0.3C10.9,12,10.8,12,10.7,12c-0.2,0-0.4,0.1-0.5,0.4c0,0.1-0.1,0.2-0.1,0.3c0,0,0,0.2,0,0.3L10,13.6c-0.1,0.2-0.1,0.4-0.1,0.6c0,0.3,0,0.5,0.1,0.8c0,0.1,0,0.2,0.1,0.4s0.1,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.2c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0,0.1,0C10.9,16,11.1,15.9,11.2,15.7z"}))}];var N=function(e){function t(n){var o=this;return(o=e.call(this,n)||this).m_x=p.b(0,70)+"%",o.m_y=p.b(0,70)+"%",o.m_nRotate=Math.floor(90*Math.random())-45,o.m_splatRots=[360*Math.random(),360*Math.random(),360*Math.random()],o.m_nPathAnimation=p.b(1,6),o.m_nKeyID=t.sm_nUnique++,o.m_strSaleId="winter2019",o}return Object(o.d)(t,e),t.prototype.fragment=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=t.map((function(e){return l.a[e]}));return o.push(l.a.snowball_fragment),r.createElement("img",{src:this.getAsset(e),className:o.join(" ")})},t.prototype.Snowball=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=e<0?l.a.SnowballImageCW:l.a.SnowballImageCCW;e>-5&&e<5&&(i="");var a=n.map((function(e){return l.a[e]}));return a.push(l.a.snowball_fragment),r.createElement("div",{style:{display:"inline-block"},className:a.join(" ")},r.createElement("img",{style:{transform:"rotation( 360deg )"},className:l.a.SnowballImage+" "+i,src:this.getAsset(t)}))},t.prototype.residue=function(){return r.createElement(r.Fragment,null,r.createElement("div",{style:{transform:"rotate("+this.m_splatRots[0]+"deg)"}},this.fragment("splat1.png","snowball-residue")),r.createElement("div",{style:{transform:"rotate("+this.m_splatRots[1]+"deg)"}},this.fragment("splat2.png","snowball-residue")),r.createElement("div",{style:{transform:"rotate("+this.m_splatRots[2]+"deg)"}},this.fragment("splat3.png","snowball-residue")))},t.prototype.render=function(){var e="snowball-path-"+this.m_nPathAnimation,t={animationName:l.a[e]};return r.createElement(r.Fragment,{key:""+this.m_nKeyID},r.createElement("div",{className:l.a["snowball-path"],style:t},r.createElement("div",{className:l.a["snowball-container"],style:{left:this.m_x,top:this.m_y,transform:"rotate( "+this.m_nRotate+"deg )"}},this.Snowball(this.m_nRotate,"snowball.png","snowball"),this.fragment("slide-out-tl.png","slide-out-tl"),this.fragment("slide-out-tr.png","slide-out-tr"),this.fragment("slide-out-bottom.png","slide-out-bottom"),this.residue(),this.fragment("snowball_1.png","snowball-chunk","snowball-chunk-1"),this.fragment("snowball_2.png","snowball-chunk","snowball-chunk-2"),this.fragment("snowball_3.png","snowball-chunk","snowball-chunk-3"),this.fragment("snowball_4.png","snowball-chunk","snowball-chunk-4"))))},t.sm_nUnique=0,t}(d),B=n("UqDm");function L(e){var t=e.data,n=m(e.sale,e.effect.name,t.strImage+".png"),o=null;if(t.SOverlay){var i=t.SOverlay?m(e.sale,e.effect.name,t.SOverlay.strImage+".png"):null,a={animationDuration:t.SOverlay.nDuration+"s"};o=r.createElement("img",{src:i,className:l.a[t.SOverlay.strClass],style:a})}var s={animationDuration:t.nDuration+"s",animationName:l.a[t.strAnimation],marginLeft:t.nOffset+"%"};return r.createElement("div",{style:s,className:l.a.balloons},r.createElement("img",{src:n,style:{maxWidth:"100%",position:"absolute"}}),o)}var P=function(e){function t(t){var n=e.call(this,t)||this;switch(n.m_rgBalloons=[],n.m_nNextImage=0,t.sale){case"lny2020":n.m_rgImages=["orange","peach","yellow"];break;default:n.m_rgImages=["balloon_blue","balloon_cyan","balloon_green","balloon_purple","balloon_red","balloon_yellow"]}return B.h(n.m_rgImages),n.GenerateBalloons(),n}return Object(o.d)(t,e),t.prototype.GetNextImage=function(){var e=this.m_rgImages[this.m_nNextImage%this.m_rgImages.length];return this.m_nNextImage++,e},t.prototype.GenerateDuration=function(){return parseFloat(l.a.balloonsDurationS)+parseFloat(l.a.balloonsDurationJitterS)*Math.random()},t.prototype.GenerateBalloons=function(){this.m_rgBalloons=[];for(var e=0,t=["balloon_small_1","balloon_small_2","balloon_small_3"];e<t.length;e++){var n=t[e],o=p.b(-10,10);this.m_rgBalloons.push(this.GenerateSingleBalloon(n,o))}var r=[70,20];B.h(r);for(var i=20==r[1],a=0,s=["balloon_big_1","balloon_big_2"];a<s.length;a++){n=s[a];var c=p.b(-10,10)+r.pop();this.m_rgBalloons.push(this.GenerateSingleBalloon(n,c))}var l=["balloon_move_left","balloon_move_right"][p.b(0,1)];i&&(l="balloon_move_left");var u=p.b(-10,10);this.m_rgBalloons.push(this.GenerateSingleBalloon(l,u))},t.prototype.GenerateSingleBalloon=function(e,t){var n=this.GetNextImage(),o={strAnimation:e,strImage:n,nDuration:this.GenerateDuration(),nOffset:t};return"lny2020"==this.props.sale&&(o.SOverlay={strImage:n+"-glow",strClass:"lantern_glow",nDuration:1+4*Math.random()}),o},t.prototype.render=function(){var e=this;return r.createElement(r.Fragment,null,this.m_rgBalloons.map((function(t,n){return r.createElement(L,{key:""+n,data:t,effect:e.props.effect,sale:e.m_strSaleId})})))},t}(d),F=n("QHER"),x=function(){function e(e){this.m_seed=e}return e.prototype.next=function(){var e=1e3*Math.sin(this.m_seed++);return e-Math.floor(e)},e}();function V(e){var t=new x(e),n=.8*t.next()+.5,o=10*(t.next()+e)+10+"px",i={opacity:n,width:o,height:o,margin:30*t.next()+15+"px",filter:"hue-rotate("+(90*t.next()-30)+"deg) saturate(100%)"},a=1+Math.floor(5*t.next()),s=u.c.COMMUNITY_CDN_ASSET_URL+"winter2019/roomeffects/96px/flake_"+a+".png";return r.createElement("img",{style:i,src:s})}var U=parseInt(l.a.balloonsDurationMaxMs),H=parseInt(l.a.snowballDurationMs);function W(e,t){return function(){var n=u.c.COMMUNITY_CDN_ASSET_URL+t+"/roomeffects/96px/"+e+".png";return r.createElement("img",{style:{width:"100%"},src:n})}}function z(e,t,n,o){return{timeout:n,renderButton:W(e,t),renderEffectIcon:W(e,t),buttonToken:"#ChatEntryButton_Send"+a.g(e),locToken:"#ChatRoom_RoomEffect"+a.g(e),render:o}}function q(e,t,n){return z(e,"winter2019",t,n)}var K={lny2020_lanterns:z("lny2020_lanterns","lny2020",U,(function(e){return r.createElement(P,{effect:e,sale:"lny2020"})})),lny2020_firework:z("lny2020_firework","lny2020",7e3,(function(){return r.createElement(_,{sale:"lny2020"})})),lny2020_confetti:z("lny2020_confetti","lny2020",8e3,(function(){return r.createElement(M,{eType:y.LNY2020})})),snowball:q("snowball",H,(function(e){return r.createElement(N,{effect:e,sale:"winter2019"})})),balloons:q("balloons",U,(function(e){return r.createElement(P,{effect:e,sale:"winter2019"})})),confetti:q("confetti",8e3,(function(){return r.createElement(M,{eType:y.Default})})),goldfetti:q("goldfetti",8e3,(function(){return r.createElement(M,{eType:y.Gold})})),firework:q("firework",7e3,(function(){return r.createElement(_,{sale:"winter2019"})})),snow:q("snow",1e4,(function(e){for(var t=[],n=new x(e.timestamp),o=0;o<150;o++){var i=n.next(),a={left:100*n.next()+"%",animationDuration:3*(1-i)+4+"s",animationDelay:i+4*n.next()+"s"};t.push(r.createElement("div",{key:e.timestamp+"_"+o,style:a,className:Object(F.a)(l.a.Snowflake,l.a["Snowflake-"+o%20])},V(i),V(i+1)))}return r.createElement(r.Fragment,null," ",t," ")}))},Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return r.createElement("div",{className:l.a["animation-container"]},this.props.effectManager.m_rgRunningEffects.map((function(e){return r.createElement(r.Fragment,{key:e.timestamp},e.render())})))},t=Object(o.c)([s.a],t)}(r.Component)},J0bI:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("2vnA"),i=n("0N1H"),a=n("tkkQ"),s=function(){function e(e){this.m_bReady=!1,this.m_bValid=!1,this.m_strInviteCode=e}return e.prototype.BIsReady=function(){return this.m_bReady},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.BIsInviteLink=function(){return!!this.m_strInviteCode},e.prototype.GetInviteCode=function(){return this.m_strInviteCode},e.prototype.BNeverExpires=function(){return this.m_rtTimeExpires==i.i},e.prototype.GetChatRoomGroupID=function(){return this.m_ulChatRoomGroupID},e.prototype.BIsVoiceChatInvite=function(){return!!this.m_ulChatID},e.prototype.GetChatID=function(){return this.m_ulChatID},e.prototype.GetURL=function(){return this.m_strInviteCode?c(this.m_strInviteCode):null},e.prototype.BIsUserBanned=function(){return this.m_bIsBanned},e.prototype.GetTimeKickExpires=function(){return this.m_rtKickExpires},Object.defineProperty(e.prototype,"time_expires",{get:function(){return this.m_rtTimeExpires},enumerable:!1,configurable:!0}),e.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},e.prototype.InitDirectInvite=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=n,this.m_rtKickExpires=o,this.m_rtTimeExpires=i.i,this.m_bValid=!0,this.m_bReady=!0},Object(o.c)([r.B],e.prototype,"m_bReady",void 0),Object(o.c)([r.k],e.prototype,"InitInvalid",null),Object(o.c)([r.k],e.prototype,"InitDirectInvite",null),e}();function c(e){return"public"==a.a.WEB_UNIVERSE?"https://s.team/chat/"+e:a.a.COMMUNITY_BASE_URL+"chat/invite/"+e}},Jdiq:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("mrSG"),r=n("1n9R"),i=n("2vnA"),a=n("vDqi"),s=n.n(a),c=function(){function e(){this.m_mapEmoticonHovers=i.B.map(),this.m_inflightRequests={}}return e.prototype.Get=function(e){return this.m_mapEmoticonHovers.has(e)||this.m_inflightRequests[e]?this.m_mapEmoticonHovers.get(e):(this.Load(e),null)},e.prototype.BLoaded=function(e){return!!this.m_mapEmoticonHovers.get(e)},e.prototype.Load=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:t=r.c.COMMUNITY_CDN_URL+"economy/emoticonhoverjson/"+encodeURIComponent(e)+"?l="+encodeURIComponent(r.c.LANGUAGE)+"&origin="+Object(r.d)(),this.m_inflightRequests[e]=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,s.a.get(t)];case 2:return!function(e){return e&&"object"==typeof e&&"number"==typeof e.appid&&"string"==typeof e.app_name}(n=o.sent().data)?this.m_mapEmoticonHovers.set(e,null):this.m_mapEmoticonHovers.set(e,n),[3,5];case 3:return o.sent(),this.m_mapEmoticonHovers.set(e,null),[3,5];case 4:return this.m_inflightRequests[e]=!1,[7];case 5:return[2]}}))}))},e}();var l=new c},JtU4:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return b}));var o,r=n("mrSG"),i=n("2vnA"),a=n("i8i4"),s=n("UqDm"),c=n("WpBz"),l=n("1VtQ"),u=n("hEDq"),p=n("oh5H"),m=n("1n9R"),d=n("XaMz");!function(e){e[e.Minimized=1]="Minimized",e[e.Hidden=2]="Hidden",e[e.Tooltip=4]="Tooltip",e[e.ContextMenu=8]="ContextMenu",e[e.Resizable=16]="Resizable"}(o||(o={}));var h=function(){function e(e,t){this.m_rgLoadingLinks=[],this.m_rgLoadingLinks=[];for(var n=e.document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o];r.addEventListener("load",this.OnLinkLoad),this.m_rgLoadingLinks.push(r)}}return e.prototype.SetTarget=function(e){this.m_fnRender=e,0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},e.prototype.OnLinkLoad=function(e){e.currentTarget.removeEventListener("load",this.OnLinkLoad),s.c(this.m_rgLoadingLinks,e.currentTarget),0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},Object(r.c)([l.a],e.prototype,"OnLinkLoad",null),e}(),f=function(){function e(e,t){this.m_bFocused=!1,this.m_strName=e,this.m_rgParams=t,this.m_rgParams.target_browser&&(this.m_strName+="_pid"+this.m_rgParams.target_browser.m_unPID),this.m_strTitle=t.title,delete this.m_rgParams.title}return e.prototype.UpdateParamsBeforeShow=function(e){return e},e.prototype.OnDrop=function(e){console.log("Ignoring drop onto toplevel window",e),e.preventDefault(),e.stopPropagation()},e.prototype.OnDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="none",e.stopPropagation()},e.prototype.OnMessage=function(e){"window_moved"==e.data&&this.OnResize()},e.prototype.Show=function(e,t){var n,r=this;void 0===e&&(e=!0),void 0===t&&(t=!1),window.SteamClient&&(this.m_rgParams.eCreationFlags|=o.Hidden),this.m_rgParams.eCreationFlags&o.Tooltip&&(e=!1),this.BIsValid()&&(this.BIsClosed()?(this.m_popup=void 0,this.m_element=void 0):e&&this.Focus(t));var i=b.GetExistingPopup(this.m_strName);if(!i||this.m_rgParams.replace_existing_popup){var a,s,c;if(this.m_rgParams=this.UpdateParamsBeforeShow(this.m_rgParams),i?(s=i.m_element,a=i.m_popup,i.ReleasePopup(),c=i.m_renderWhenReady,b.RemoveTrackedPopup(i),a.removeEventListener("beforeunload",i.OnBeforeUnloadEvent),a.removeEventListener("unload",i.OnUnload),a.removeEventListener("resize",i.OnResizeEvent),a.removeEventListener("focus",this.OnFocusInternal),a.removeEventListener("blur",this.OnBlurInternal),a.removeEventListener("drop",i.OnDrop),a.removeEventListener("dragover",i.OnDragOver),a.removeEventListener("message",this.OnMessage)):(a=(n=g.CreatePopup(this.m_strName,this.m_rgParams)).popup,s=n.element,c=new h(a,s)),a&&s){if(a.document.title=this.m_strTitle,a.addEventListener("beforeunload",this.OnBeforeUnloadEvent),a.addEventListener("unload",this.OnUnload),a.addEventListener("resize",this.OnResizeEvent),a.addEventListener("focus",this.OnFocusInternal),a.addEventListener("blur",this.OnBlurInternal),a.addEventListener("drop",this.OnDrop),a.addEventListener("dragover",this.OnDragOver),a.addEventListener("message",this.OnMessage),m.c.LANGUAGE){var l="koreana"==m.c.LANGUAGE?"korean":m.c.LANGUAGE;a.document.documentElement.setAttribute("lang",p.b[l])}this.m_popup=a,this.m_element=s,this.m_renderWhenReady=c,this.m_renderWhenReady.SetTarget((function(){return r.RenderInternal(r.m_popup,r.m_element,e)}))}b.AddTrackedPopup(this),i&&e&&this.Focus()}},e.prototype.RemoveEventListeners=function(){this.window.removeEventListener("beforeunload",this.OnBeforeUnloadEvent),this.window.removeEventListener("unload",this.OnUnload),this.window.removeEventListener("resize",this.OnResizeEvent),this.window.removeEventListener("focus",this.OnFocusInternal),this.window.removeEventListener("blur",this.OnBlurInternal),this.window.removeEventListener("drop",this.OnDrop),this.window.removeEventListener("dragover",this.OnDragOver),this.window.removeEventListener("message",this.OnMessage)},e.prototype.RenderInternal=function(e,t,n){var o;this.browser_info&&((o=this.browser_info).m_eBrowserType==u.h.EBrowserType_OpenVROverlay||o.m_eBrowserType==u.h.EBrowserType_OpenVROverlay_Dashboard)&&(t.ownerDocument.body.className+=" VR"),this.Render(e,t),this.OnLoad(),e.SteamClient&&(n?e.SteamClient.Window.BringToFront():e.SteamClient.Window.ShowWindow())},e.prototype.OnResizeEvent=function(){this.OnResize()},e.prototype.OnBeforeUnloadEvent=function(){this.OnBeforeUnload()},e.prototype.OnUnload=function(){this.RemoveEventListeners(),b.RemoveTrackedPopup(this),this.OnClose(),a.unmountComponentAtNode(this.m_element)},Object.defineProperty(e.prototype,"browser_info",{get:function(){return this.m_rgParams.target_browser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.m_popup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_element",{get:function(){return this.m_element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.m_strTitle},set:function(e){this.m_strTitle=e,this.m_popup&&(this.m_popup.document.title=this.m_strTitle)},enumerable:!1,configurable:!0}),e.prototype.Focus=function(e){void 0===e&&(e=!1),this.m_popup&&void 0!==this.m_popup.SteamClient&&void 0!==this.m_popup.SteamClient.Window?e?this.m_popup.SteamClient.Window.SetForegroundWindow():this.m_popup.SteamClient.Window.BringToFront():this.m_popup&&this.m_popup.focus()},e.prototype.Close=function(){this.m_popup&&this.m_popup.close()},e.prototype.GetName=function(){return this.m_strName},e.prototype.BIsValid=function(){return!!this.m_popup},e.prototype.BIsClosed=function(){return!this.m_popup||this.m_popup.closed},e.prototype.BIsVisible=function(){return this.m_popup&&!this.m_popup.closed&&"visible"==this.m_popup.document.visibilityState},e.prototype.BIsFocused=function(){return this.BIsVisible()&&this.m_popup.document.hasFocus()},e.prototype.OnFocusInternal=function(){this.m_bFocused=!0,this.OnFocus()},e.prototype.OnBlurInternal=function(){this.m_bFocused=!1,this.OnBlur()},Object.defineProperty(e.prototype,"focused",{get:function(){return this.m_bFocused},enumerable:!1,configurable:!0}),e.prototype.GetWindowRestoreDetails=function(){var e=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient?new Promise((function(t,n){e.m_popup.SteamClient.Window.GetWindowRestoreDetails((function(e){t(e)}))})):Promise.resolve("")},e.prototype.IsMinimized=function(){var e=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient&&this.m_popup.SteamClient.Window&&this.m_popup.SteamClient.Window.IsWindowMinimized?new Promise((function(t,n){e.m_popup.SteamClient.Window.IsWindowMinimized((function(e){t(e)}))})):Promise.resolve(!1)},e.prototype.ReleasePopup=function(){this.OnClose(),this.m_popup=null},e.prototype.OnBeforeUnload=function(){},e.prototype.OnFocus=function(){},e.prototype.OnBlur=function(){},Object(r.c)([i.B],e.prototype,"m_bFocused",void 0),Object(r.c)([l.a],e.prototype,"OnMessage",null),Object(r.c)([l.a],e.prototype,"OnResizeEvent",null),Object(r.c)([l.a],e.prototype,"OnBeforeUnloadEvent",null),Object(r.c)([l.a],e.prototype,"OnUnload",null),Object(r.c)([l.a],e.prototype,"OnFocusInternal",null),Object(r.c)([l.a],e.prototype,"OnBlurInternal",null),e}(),_=function(e){function t(t,n,o,r){var i=e.call(this,t,o)||this;return i.SetSavedDimensionsKey(n),i.m_bExpires=r,i}return Object(r.d)(t,e),t.prototype.BIsInOverlay=function(){return this.browser_info&&this.browser_info!={m_unPID:0,m_nBrowserID:-1}},t.prototype.SetSavedDimensionsKey=function(e){this.m_strSavedDimensionsKey=e},t.prototype.UpdateParamsBeforeShow=function(e){return!this.m_strSavedDimensionsKey||e.bIgnoreSavedDimensions||e.strRestoreDetails?e.strRestoreDetails&&(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),b.SetRestoreDetails(this.m_strInitialSavedDimensionsKey,e.strRestoreDetails,this.m_bExpires)):(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),e.strRestoreDetails=b.GetRestoreDetails(this.m_strInitialSavedDimensionsKey)),e},t.prototype.OnLoad=function(){var e=this;this.GetWindowRestoreDetails().then((function(t){e.m_strInitialRestoreDetails=t,e.OnResizeComplete(t)}))},t.prototype.OnResize=function(){this.QueryAndStoreWindowPosition()},t.prototype.OnResizeComplete=function(e){},t.prototype.QueryAndStoreWindowPosition=function(){var e=this;if(this.m_strInitialRestoreDetails){var t=this.GetSavedDimensionsKey();this.m_popup.setTimeout((function(){e.GetWindowRestoreDetails().then((function(n){var o=e.m_strInitialRestoreDetails==n&&t==e.m_strInitialSavedDimensionsKey;e.m_popup&&e.m_strSavedDimensionsKey&&n&&!o&&(b.SetRestoreDetails(t,n,e.m_bExpires),e.m_rgParams.strRestoreDetails=n,e.m_strInitialSavedDimensionsKey=t,e.OnResizeComplete(n))}))}),30)}},t.prototype.OnBeforeUnload=function(){this.QueryAndStoreWindowPosition(),e.prototype.OnBeforeUnload.call(this)},t.prototype.OnClose=function(){},t.prototype.SaveWindowPosition=function(e){b.SetRestoreDetails(this.GetSavedDimensionsKey(),e,!1),this.m_rgParams.strRestoreDetails=e},Object(r.c)([l.a],t.prototype,"QueryAndStoreWindowPosition",null),t}(f),g=function(){function e(){var t=this;if(this.m_bShuttingDown=!1,this.m_mapPopups=new Map,this.m_rgShutdownCallbacks=[],this.m_rgPopupCreatedCallbacks=[],this.m_unCurrentAccountID=0,this.m_mapRestoreDetails=new Map,this.m_bSaveRequired=!1,!Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD){window.addEventListener("beforeunload",(function(e){t.m_bShuttingDown=!0;for(var n=0,o=t.m_rgShutdownCallbacks;n<o.length;n++){(0,o[n])()}var r=[];t.m_mapPopups.forEach((function(e){e.BIsValid()&&!e.BIsClosed()&&r.push(e)}));for(var i=0,a=r;i<a.length;i++){a[i].Close()}t.m_bSaveRequired&&t.SaveSavedDimensionStore(),t.m_mapPopups.clear()}));var n=document.querySelector("head");Object(d.a)(n,"Couldn't find head element"),n&&(this.m_DynamicCSSObserver=new MutationObserver((function(n){for(var o=[],r=0,i=n;r<i.length;r++)for(var a=i[r],s=0;s<a.addedNodes.length;s++){var c=a.addedNodes[s];c.nodeType==Node.ELEMENT_NODE&&"LINK"==c.nodeName&&o.push(c)}o&&(console.log("adding dynamic CSS to child popups",o),t.m_mapPopups.forEach((function(t){e.CopyCSSLinksToPopup(t.window,o)})))})),this.m_DynamicCSSObserver.observe(n,{childList:!0}))}}return e.prototype.SetCurrentLoggedInAccountID=function(e){this.m_unCurrentAccountID=e,e?this.LoadSavedDimensionStore():this.ClearSavedDimensionStore()},e.prototype.AddShutdownCallback=function(e){this.m_rgShutdownCallbacks.push(e)},e.prototype.AddPopupCreatedCallback=function(e){this.m_rgPopupCreatedCallbacks.push(e)},e.prototype.AddTrackedPopup=function(e){this.m_mapPopups.set(e.GetName(),e);for(var t=0,n=this.m_rgPopupCreatedCallbacks;t<n.length;t++){(0,n[t])(e)}},e.prototype.RemoveTrackedPopup=function(e){this.m_mapPopups.delete(e.GetName())},e.prototype.GetExistingPopup=function(e){return this.m_mapPopups.get(e)},e.prototype.GetPopups=function(){return this.m_mapPopups.values()},e.prototype.ClosePopupsOwnedByBrowser=function(e){this.m_mapPopups.forEach((function(t){t.browser_info&&t.browser_info.m_nBrowserID==e.m_nBrowserID&&t.browser_info.m_unPID==e.m_unPID&&t.Close()}))},e.CreatePopup=function(t,n){var o=n.dimensions||{},r=o.width||300,i=o.height||300,a=n.title,s="width="+r+",height="+i;void 0!==o.left&&(s+=",left="+o.left),void 0!==o.top&&(s+=",top="+o.top),s+=",resizeable,status=0,toolbar=0,menubar=0,location=0";var c="about:blank",l=[];l.push("createflags="+n.eCreationFlags),n.minWidth&&l.push("minwidth="+n.minWidth),n.minHeight&&l.push("minheight="+n.minHeight),n.target_browser&&(l.push("pid="+n.target_browser.m_unPID),l.push("browser="+n.target_browser.m_nBrowserID),l.push("browserType="+n.target_browser.m_eBrowserType),n.availscreenwidth&&n.availscreenheight&&(l.push("screenavailwidth="+n.availscreenwidth),l.push("screenavailheight="+n.availscreenheight))),n.strVROverlayKey&&l.push("vrOverlayKey="+n.strVROverlayKey),n.strRestoreDetails&&l.push("restoredetails="+n.strRestoreDetails),l&&(c+="?"+l.join("&"));var u=(n.owner_window||window).open(c,t,s,!0);if(!u)return console.log("Failed to create popup.. browser popup blocker enabled?"),{};var p="";n.html_class&&(p='class="'+n.html_class+'"');var m="";n.body_class&&(m='class="'+n.body_class+'"');var d="<!DOCTYPE html><html "+p+"><head><title></title></head><body "+m+'><div id="popup_target"></div></body></html>';u.document.write(d),u.document.title=a;var h=document.getElementsByTagName("link");return e.CopyCSSLinksToPopup(u,h),{popup:u,element:u.document.getElementById("popup_target")}},e.CopyCSSLinksToPopup=function(e,t){for(var n=e.document.getElementsByTagName("head")[0],o=0;o<t.length;o++){var r=t[o];if("stylesheet"==r.rel){for(var i=e.document.createElement("link"),a=0;a<r.attributes.length;a++){var s=r.attributes.item(a);i.setAttribute(s.name,s.value)}n.appendChild(i)}}},e.prototype.BShuttingDown=function(){return this.m_bShuttingDown},e.prototype.GetLocalStorageKey=function(){return"PopupSavedDimensions_"+this.m_unCurrentAccountID},e.prototype.LoadSavedDimensionStore=function(){if(this.m_unCurrentAccountID){var e=this.GetLocalStorageKey();this.m_mapRestoreDetails=void 0;var t=window.localStorage.getItem(e);if(t)try{var n=JSON.parse(t);this.m_mapRestoreDetails=new Map(n)}catch(e){}this.m_mapRestoreDetails||(this.m_mapRestoreDetails=new Map)}},e.prototype.SaveSavedDimensionStore=function(){if(this.m_unCurrentAccountID&&this.m_bSaveRequired){var e=this.GetLocalStorageKey(),t=JSON.stringify(Array.from(this.m_mapRestoreDetails));window.localStorage.setItem(e,t),this.m_bSaveRequired=!1}},e.prototype.DebouncedSaveSavedDimensionStore=function(){this.SaveSavedDimensionStore()},e.prototype.ClearSavedDimensionStore=function(){this.m_mapRestoreDetails.clear(),this.m_bSaveRequired=!1},e.prototype.GetRestoreDetails=function(e){if(!this.m_mapRestoreDetails.has(e))return"";var t=this.m_mapRestoreDetails.get(e);return t.last_used=Date.now(),this.m_bSaveRequired=!0,t.strRestoreDetails},e.prototype.SetRestoreDetails=function(e,t,n){if(e){if(t){if(this.m_mapRestoreDetails.size>50){for(var o=null,r=Date.now(),i=0,a=Array.from(this.m_mapRestoreDetails.keys());i<a.length;i++){var s=a[i],c=this.m_mapRestoreDetails.get(s);c.last_used<r&&c.bExpires&&(r=c.last_used,o=s)}o&&this.m_mapRestoreDetails.delete(o)}var l={strRestoreDetails:t,last_used:Date.now(),bExpires:n};this.m_mapRestoreDetails.set(e,l)}else this.m_mapRestoreDetails.delete(e);this.m_bSaveRequired=!0,this.m_bShuttingDown?this.SaveSavedDimensionStore():this.DebouncedSaveSavedDimensionStore()}},Object(r.c)([l.a,Object(c.a)(100)],e.prototype,"DebouncedSaveSavedDimensionStore",null),e}(),b=new g;window.g_PopupManager=b},Kcgk:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return S}));var o=n("mrSG"),r=n("oh5H"),i=n("ujHl"),a=n("Gp1o");function s(e,t,n){var a,s=(a="boolean"==typeof t?{bExcludeAgo:t,bForceSingleUnits:n,bHighGranularity:!1}:Object(o.a)({bExcludeAgo:!1,bForceSingleUnits:!1,bHighGranularity:!1},t)).bExcludeAgo?"#TimeInterval_":"#TimeSince_";if(e>=2*i.d.PerYear)return Object(r.d)(s+"XYears",Math.floor(e/i.d.PerYear));if(e>=i.d.PerYear)return(e-=i.d.PerYear)>=2*i.d.PerMonth&&!a.bForceSingleUnits?Object(r.d)(s+"1YearXMonths",Math.floor(e/i.d.PerMonth)):Object(r.d)(s+"1Year");if(e>=2*i.d.PerMonth)return Object(r.d)(s+"XMonths",Math.floor(e/i.d.PerMonth));if(e>=2*i.d.PerWeek)return Object(r.d)(s+"XWeeks",Math.floor(e/i.d.PerWeek));if(e>=i.d.PerWeek)return Object(r.d)(s+"1Week",Math.floor(e/i.d.PerWeek));if(e>=2*i.d.PerDay)return Object(r.d)(s+"XDays",Math.floor(e/i.d.PerDay));if(e>=i.d.PerDay)return(e-=i.d.PerDay)>=2*i.d.PerHour&&!a.bForceSingleUnits?Object(r.d)(s+"1DayXHours",Math.floor(e/i.d.PerHour)):Object(r.d)(s+"1Day");if(e>=2*i.d.PerHour)return Object(r.d)(s+"XHours",Math.floor(e/i.d.PerHour));if(e>=i.d.PerHour)return(e-=i.d.PerHour)>=2*i.d.PerMinute&&!a.bForceSingleUnits?Object(r.d)(s+"1HourXMinutes",Math.floor(e/i.d.PerMinute)):Object(r.d)(s+"1Hour");if(e>=2*i.d.PerMinute){var c=Math.floor(e/i.d.PerMinute),l=e%i.d.PerMinute;return a.bHighGranularity&&0!=l?1==l?Object(r.d)(s+"XMinutes1Second",c):Object(r.d)(s+"XMinutesXSeconds",c,l):Object(r.d)(s+"XMinutes",c)}if(e>=i.d.PerMinute){l=e%i.d.PerMinute;return a.bHighGranularity&&0!=l?1==l?Object(r.d)(s+"1Minute1Second"):Object(r.d)(s+"1MinuteXSeconds",l):Object(r.d)(s+"1Minute")}return a.bHighGranularity?1==e?Object(r.d)(s+"1Second"):Object(r.d)(s+"XSeconds",e):Object(r.d)(s+"LessThanAMinute")}function c(e,t){var n={weekday:"short",month:"long",day:"numeric",year:t?void 0:"numeric"};return new Date(1e3*e).toLocaleDateString(r.c.GetPreferredLocales(),n)}function l(e){return new Date(1e3*e).toLocaleTimeString(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric"})}var u=new Map;function p(e){var t=new Date(1e3*e),n=r.c.GetPreferredLocales(),o=function(e){var t=u.get(e);if(!0===t||!1===t)return t;var n=new Date;return n.setHours(15),t=n.toLocaleTimeString(e,{hour:"numeric"})==n.toLocaleTimeString(e,{hour:"numeric",hour12:!1}),u.set(e,t),t}(n[0]);return t.toLocaleTimeString(n,o?{hour:"numeric",minute:"numeric"}:{hour:"numeric",hour12:!0})}var m=new Map,d=new Map;function h(e,t){var n=new Date,o=new Date(1e3*e);if(o.getFullYear()!=n.getFullYear())return function(e){var t=new Date(1e3*e),n=t.setHours(0,0,0,0),o=m.get(n);return o||(o=t.toLocaleDateString(r.c.GetPreferredLocales(),{year:"numeric",month:"short",day:"numeric"}),m.set(n,o),o)}(e);a.b((new Date).setHours(24,0,0,0)-n.getTime());var i=new Date;if(i.setHours(0,0,0,0),o>=i){if(i.setDate(i.getDate()+1),o<i)return Object(r.d)("#Time_Today");if(i.setDate(i.getDate()+1),o<i)return Object(r.d)("#Time_Tomorrow")}else if(i.setDate(i.getDate()-1),o>=i)return Object(r.d)("#Time_Yesterday");var s={month:t?"long":"short",day:"numeric"},c=o.setHours(0,0,0,0)+s.month,l=d.get(c);return l||(l=o.toLocaleDateString(r.c.GetPreferredLocales(),s),d.set(c,l),l)}function f(e,t){var n=new Date(1e3*e),s=new Date,c=Object(o.a)({bGranularFutureTime:!1},t);if(n>s){if(!c.bGranularFutureTime)return a.b(n.getTime()-s.getTime()),n.getFullYear()==s.getFullYear()?C(n):O(n);a.b((new Date).setHours(24,0,0,0)-s.getTime());var l=new Date;return l.setHours(0,0,0,0),l.setDate(l.getDate()+1),n<l?Object(r.d)("#Time_Today"):(l.setDate(l.getDate()+1),n<l?Object(r.d)("#Time_Tomorrow"):(l.setDate(l.getDate()+5),n<l?S(n):y(n,!0)))}a.b((new Date).setHours(24,0,0,0)-s.getTime());var u=new Date;if(u.setHours(0,0,0,0),n>=u)return Object(r.d)("#Time_Today");if(u.setDate(u.getDate()-1),n>=u)return Object(r.d)("#Time_Yesterday");if(u.setDate(u.getDate()-5),n>=u)return Object(r.d)("#TimeSince_ThisWeek");var p=new Date(u);if(u.setDate(u.getDate()-21),n>=u||n.getMonth()==s.getMonth()&&n.getFullYear()==s.getFullYear()){var m=Math.floor((p.valueOf()-n.valueOf())/(1e3*i.d.PerWeek))+1;return 1==m?Object(r.d)("#TimeSince_1Week"):Object(r.d)("#TimeSince_XWeeks",m)}return n.getFullYear()==s.getFullYear()?C(n):O(n)}var _=new Map,g=new Map,b=(new Map,new Map),v=new Map;function y(e,t){void 0===t&&(t=!1);var n=e.getDate()+31*(e.getMonth()+12*e.getFullYear()),o=v.get(n);return o||(o=e.toLocaleDateString(r.c.GetPreferredLocales(),{weekday:"long",day:"numeric",month:t?"long":"short"}),v.set(n,o),o)}function S(e){var t=_.get(e.getDay());return t||(t=e.toLocaleDateString(r.c.GetPreferredLocales(),{weekday:"long"}),_.set(e.getDay(),t),t)}function C(e){var t=g.get(e.getMonth());return t||(t=e.toLocaleDateString(r.c.GetPreferredLocales(),{month:"long"}),g.set(e.getMonth(),t),t)}function O(e){var t=e.getMonth()+12*e.getFullYear(),n=b.get(t);return n||(n=e.toLocaleDateString(r.c.GetPreferredLocales(),{month:"long",year:"numeric"}),b.set(t,n),n)}},Kqva:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var o=function(){function e(e,t,n){void 0===t&&(t=0),this.m_nOffset=t||0,e instanceof Uint8Array||e instanceof DataView?(this.m_nLength=n||e.byteLength-this.m_nOffset,this.m_nOffset+=e.byteOffset,this.m_viewPacket=new DataView(e.buffer,this.m_nOffset,this.m_nLength)):(this.m_nLength=n||e.byteLength-this.m_nOffset,this.m_viewPacket=new DataView(e,this.m_nOffset,this.m_nLength)),this.m_rgubPacket=new Uint8Array(this.m_viewPacket.buffer,this.m_viewPacket.byteOffset,this.m_viewPacket.byteLength),this.m_iGet=0,this.m_iPut=0}return e.prototype.TellGet=function(){return this.m_iGet+this.m_viewPacket.byteOffset},e.prototype.GetPacket=function(){return this.m_viewPacket.buffer},e.prototype.GetUint8=function(){return this.m_viewPacket.getUint8(this.m_iGet++)},e.prototype.GetUint32=function(e){void 0===e&&(e=!0);var t=this.m_viewPacket.getUint32(this.m_iGet,e);return this.m_iGet+=4,t},e.prototype.SeekGetHead=function(e){void 0===e&&(e=0),this.m_iGet=e||0},e.prototype.SeekGetCurrent=function(e){this.m_iGet+=e},e.prototype.TellPut=function(){return this.m_iPut+this.m_viewPacket.byteOffset},e.prototype.TellMaxPut=function(){return this.m_viewPacket.byteLength},e.prototype.PutUint8=function(e){this.m_viewPacket.setUint8(this.m_iPut++,e)},e.prototype.PutUint32=function(e,t){void 0===t&&(t=!0),this.m_viewPacket.setUint32(this.m_iPut,e,t),this.m_iPut+=4},e.prototype.PutBytes=function(e){this.m_rgubPacket.set(e,this.m_iPut),this.m_iPut+=e.length},e.prototype.SeekPut=function(e){this.m_iPut+=e},e.prototype.GetCountBytesRemaining=function(){return this.m_viewPacket.byteLength-this.m_iGet},e}(),r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(e){for(var t="",n=0;n<e.length;n++){var o=e[n];t+=r[o>>>4]+r[15&o]}return t}function a(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length-1;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}},LAqV:function(e,t,n){"use strict";n.d(t,"a",(function(){return L.a})),n.d(t,"b",(function(){return L.b})),n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return x})),n.d(t,"c",(function(){return V})),n.d(t,"e",(function(){return U})),n.d(t,"d",(function(){return H})),n.d(t,"f",(function(){return W}));var o=n("mrSG"),r=n("tkkQ"),i=n("2vnA"),a=n("hEDq"),s=n("4HGb"),c=n("s+DT"),l=n("nDwt"),u=n("1VtQ"),p=function(){function e(){this.m_status=new a.d,this.m_mapPendingRequests=new i.b,this.m_nRequestID=1,this.m_BroadcastDetails={}}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn((function(){r.a.IN_CLIENT&&(SteamClient&&SteamClient.Broadcast&&SteamClient.Broadcast.RegisterForBroadcastStatus&&SteamClient.Broadcast.RegisterForBroadcastStatus(t.OnBroadcastStatus),SteamClient&&SteamClient.Broadcast&&SteamClient.Broadcast.RegisterForViewerRequests&&SteamClient.Broadcast.RegisterForViewerRequests(t.OnViewerRequest))}))},e.prototype.MakeKey=function(e,t){return e+"_"+t},Object.defineProperty(e.prototype,"status",{get:function(){return this.m_status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_broadcasting",{get:function(){return this.m_status.bIsBroadcasting},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"broadcastid",{get:function(){return this.m_status.broadcastid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_broadcast_capable",{get:function(){return this.m_status.bBroadcastCapable},enumerable:!1,configurable:!0}),e.prototype.OnBroadcastStatus=function(e){(this.m_status.bIsBroadcasting&&!e.bIsBroadcasting||"0"!=this.m_status.broadcastid&&"0"==e.broadcastid)&&this.m_mapPendingRequests.forEach((function(e,t,n){e==a.g.k_EPending&&n.delete(t)})),this.m_status=e},e.prototype.OnViewerRequest=function(e,t,n){if(n==a.g.k_EPending){var o=this.m_nRequestID++;this.m_mapPendingRequests.set(this.MakeKey(e,o),n);var r=W.GetDefaultBrowserContext(),i=W.ShowFriendChatDialog(r,e);i&&i.ViewerNeedsApproval(o)}else this.m_mapPendingRequests.set(this.MakeKey(e,t),n)},e.prototype.ApproveViewerRequest=function(e,t){var n=c.a.InitFromAccountID(e);SteamClient.Broadcast.ApproveViewerRequest(n.ConvertTo64BitString(),Number(t))},e.prototype.RejectViewerRequest=function(e,t){var n=c.a.InitFromAccountID(e);SteamClient.Broadcast.RejectViewerRequest(n.ConvertTo64BitString(),Number(t))},e.prototype.GetRequestState=function(e,t){return this.m_mapPendingRequests.get(this.MakeKey(e,t))},e.prototype.InviteToWatch=function(e){var t=c.a.InitFromAccountID(e);return SteamClient.Broadcast.InviteToWatch(t.ConvertTo64BitString())},e.prototype.SubscribeToBroadcastDetails=function(e,t){if(this.m_BroadcastDetails[e])0===this.m_BroadcastDetails[e].refCount&&this.m_BroadcastDetails[e].details.Subscribe(),this.m_BroadcastDetails[e].refCount++;else{var n=new m(e,t,this.m_CMInterface.GetServiceTransport());n.Subscribe(),this.m_BroadcastDetails[e]={details:n,refCount:1}}},e.prototype.UnsubscribeFromBroadcastDetails=function(e,t){var n=this.m_BroadcastDetails[e];n&&(n.refCount>1?n.refCount--:(n.details.Unsubscribe(),delete this.m_BroadcastDetails[e]))},e.prototype.GetBroadcastDetails=function(e,t){var n=this.m_BroadcastDetails[e];return n||(n={details:new m(e,t,this.m_CMInterface.GetServiceTransport()),refCount:0},this.m_BroadcastDetails[e]=n),n.details},Object(o.c)([i.B],e.prototype,"m_status",void 0),Object(o.c)([i.B],e.prototype,"m_mapPendingRequests",void 0),Object(o.c)([i.n],e.prototype,"status",null),Object(o.c)([i.n],e.prototype,"is_broadcasting",null),Object(o.c)([i.n],e.prototype,"broadcastid",null),Object(o.c)([i.n],e.prototype,"is_broadcast_capable",null),Object(o.c)([u.a,i.k],e.prototype,"OnBroadcastStatus",null),Object(o.c)([u.a,i.k],e.prototype,"OnViewerRequest",null),Object(o.c)([i.k],e.prototype,"ApproveViewerRequest",null),Object(o.c)([i.k],e.prototype,"RejectViewerRequest",null),Object(o.c)([i.k],e.prototype,"InviteToWatch",null),e}(),m=function(){function e(e,t,n){this.m_bExpired=!1,this.m_strThumbnail="",this.m_nThumbnailCount=0,this.m_nTimeout=10,this.m_bSubscribed=!1,this.m_strBroadcastID=e,this.m_strBroadcasterID=t,this.m_ServiceTransport=n}return Object.defineProperty(e.prototype,"strThumbnail",{get:function(){return this.m_strThumbnail?this.m_strThumbnail+"?n="+this.m_nThumbnailCount:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bExpired",{get:function(){return this.m_bExpired},enumerable:!1,configurable:!0}),e.prototype.Subscribe=function(){this.m_bSubscribed||(this.m_bSubscribed=!0,this.PollForDetails())},e.prototype.SchedulePollForDetails=function(){var e=this,t=this.m_strThumbnail?this.m_nTimeout:10;this.m_nTimer=window.setTimeout((function(){e.m_nTimer=void 0,e.m_bSubscribed&&e.PollForDetails()}),1e3*t)},e.prototype.PollForDetails=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_nTimer||this.m_bExpired?[3,6]:[4,this.FetchBroadcastStatus()];case 1:return 1==t.sent().GetEResult()?[3,2]:(this.m_bExpired=!0,[3,6]);case 2:return this.m_strThumbnail?[3,4]:[4,this.FetchBroadcastThumbnail()];case 3:return 1===(e=t.sent()).GetEResult()&&(this.m_strThumbnail=e.Body().thumbnail_url(),this.m_nTimeout=e.Body().update_interval()),[3,5];case 4:this.m_nThumbnailCount++,t.label=5;case 5:this.SchedulePollForDetails(),t.label=6;case 6:return[2]}}))}))},e.prototype.FetchBroadcastStatus=function(){var e=s.b.Init(l.b);return e.Body().set_steamid(this.m_strBroadcasterID),e.Body().set_broadcast_id(this.m_strBroadcastID),l.a.GetBroadcastStatus(this.m_ServiceTransport,e)},e.prototype.FetchBroadcastThumbnail=function(){var e=s.b.Init(l.c);return e.Body().set_steamid(this.m_strBroadcasterID),e.Body().set_broadcast_id(this.m_strBroadcastID),l.a.GetBroadcastThumbnail(this.m_ServiceTransport,e)},e.prototype.Unsubscribe=function(){this.m_bSubscribed=!1,this.m_nTimer&&(clearTimeout(this.m_nTimer),this.m_nTimer=void 0)},Object(o.c)([i.B],e.prototype,"m_bExpired",void 0),Object(o.c)([i.B],e.prototype,"m_strThumbnail",void 0),Object(o.c)([i.B],e.prototype,"m_nThumbnailCount",void 0),e}(),d=n("5Nu3"),h=n("rrR9"),f=function(){function e(){}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.GetTradeOfferURL=function(){var e=this;if(this.m_strTradeOfferToken)return Promise.resolve(this.GetConstructedTradeOfferURL());var t=s.b.Init(h.b);return h.c.GetTradeOfferAccessToken(this.m_CMInterface.GetServiceTransport(),t).then((function(t){if(1==t.GetEResult())return e.m_strTradeOfferToken=t.Body().trade_offer_access_token(),e.GetConstructedTradeOfferURL();throw new Error("Error getting Trade Offer token")}))},e.prototype.GetDefaultTradeOfferURLForFriend=function(e){return r.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e},e.prototype.GetConstructedTradeOfferURL=function(){var e=this.m_CMInterface.steamid.GetAccountID();return r.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e+"&token="+encodeURIComponent(this.m_strTradeOfferToken)},e}(),_=n("+M9t"),g=n("SEab"),b=n("OJz+"),v=n("a6nX"),y=n("0N1H"),S=function(){function e(){var e=this;this.m_ParentalState=new a.m,this.m_ParentalLockHandler=Object(b.d)(v.d.NotifyLockHandler,(function(t){return r.a.SESSIONID==t.Body().sessionid()&&e.SetLockState(!0),1})),this.m_ParentalUnlockHandler=Object(b.d)(v.d.NotifyUnlockHandler,(function(t){return r.a.SESSIONID==t.Body().sessionid()&&e.SetLockState(!1),1})),this.m_ParentalSettingsChangeHandler=Object(b.d)(v.d.NotifySettingsChangeHandler,(function(e){return 1}))}return e.prototype.SetParentalState=function(e){this.m_ParentalState=e},e.prototype.SetLockState=function(e){this.m_ParentalState.locked=e},e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn((function(){var e=s.b.Init(v.a);e.Body().set_steamid(t.m_CMInterface.steamid.ConvertTo64BitString()),r.a.IN_CLIENT?SteamClient.Parental.RegisterForParentalSettingsChanges((function(e){return t.UpdateParentalState(e)})):v.e.GetParentalSettings(t.m_CMInterface.GetServiceTransport(),e).then((function(e){e.Body().settings().enabled_features();var n=e.Body().settings(),o=t.MsgParentalSettingsToParentalState(n);o.enabled?t.ValidateWebToken().then((function(e){o.locked=e,t.SetParentalState(o)})):(o.locked=!1,t.SetParentalState(o))}))}))},e.prototype.MsgParentalSettingsToParentalState=function(e){var t=new a.m;t.enabled=e.is_enabled(),t.features=e.enabled_features(),t.baselist={};for(var n=0,o=e.applist_base();n<o.length;n++){var r=o[n];t.baselist["App_"+r.appid()]=r.is_allowed()}t.customlist={};for(var i=0,s=e.applist_custom();i<s.length;i++){r=s[i];t.customlist["App_"+r.appid()]=r.is_allowed()}return t.locked=!0,t},e.prototype.UpdateParentalState=function(e){this.SetParentalState(e)},e.prototype.BIsFeatureBlocked=function(e){return this.m_ParentalState.locked&&0!=e&&0==(this.m_ParentalState.features&1<<e)},e.prototype.BIsAppBlocked=function(e){return!!this.isLocked&&(!this.m_ParentalState.allowallapps&&(0!=e&&(!(e>=y.k&&e<=y.l)&&(-1===[y.q,y.m,y.n,y.p,y.o].indexOf(e)&&(null!=this.m_ParentalState.customlist&&null!=this.m_ParentalState.customlist["App_"+e]?!this.m_ParentalState.customlist["App_"+e]:null==this.m_ParentalState.baselist||null==this.m_ParentalState.baselist["App_"+e]||!this.m_ParentalState.baselist["App_"+e])))))},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.m_ParentalState.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.m_ParentalState.locked},enumerable:!1,configurable:!0}),e.prototype.ValidateWebToken=function(){var e=this,t=r.a.SESSIONID,n=document.cookie.match("(^|; )steamparental=([^;]*)");if(!n||!n[2])return Promise.resolve(!1);var o=n[2],i=o.split("||");o=2==i.length?i[1]:i[0];var a=s.b.Init(v.c);return a.Body().set_unlock_token(t+"||"+o),new Promise((function(t,n){v.e.ValidateToken(e.m_CMInterface.GetServiceTransport(),a).then((function(e){1==e.GetEResult()?t(!0):t(!1)}))}))},Object.defineProperty(e.prototype,"locked",{get:function(){return console.log("ParentalState.locked",this.m_ParentalState.locked),this.m_ParentalState.locked},enumerable:!1,configurable:!0}),e.prototype.BIsFriendsBlocked=function(){return this.BIsFeatureBlocked(4)},e.prototype.Unlock=function(e){var t=this;if(r.a.IN_CLIENT)return new Promise((function(t,n){SteamClient.Parental.UnlockParentalLock(e,!1).then((function(e){t(e)}))}));var n=s.b.Init(v.b);return n.Body().set_password(e),n.Body().set_session(r.a.SESSIONID),n.Body().set_send_unlock_on_success(!0),new Promise((function(e,o){v.e.ValidatePassword(t.m_CMInterface.GetServiceTransport(),n).then((function(t){if(1==t.GetEResult()){var n=Date.now().toString()+"||"+t.Body().token();document.cookie="steamparental="+encodeURIComponent(n)+"; path=/"}e(t.GetEResult())}))}))},Object(o.c)([i.B],e.prototype,"m_ParentalState",void 0),Object(o.c)([i.k],e.prototype,"UpdateParentalState",null),Object(o.c)([i.n],e.prototype,"isEnabled",null),Object(o.c)([i.n],e.prototype,"isLocked",null),Object(o.c)([i.n],e.prototype,"locked",null),e}(),C=n("oh5H"),O=n("ha6C"),I=function(){function e(){this.m_bEnabled=!1,this.m_sessions=i.B.map(),this.m_controllerSlotPlayers=[],this.m_contextsWaitingForResults=i.B.map(),this.m_bIsShowingPlaceholder=!1}return e.prototype.Init=function(e){var t=this;this.m_controllerSlotPlayers.length=20,this.ClearControllerSlotPlayers(),this.m_CMInterface=e,Object(O.a)("RemotePlay.RegisterForSessionStarted")&&SteamClient.RemotePlay.RegisterForSessionStarted((function(e,n){return t.SessionStarted(e,n)})),Object(O.a)("RemotePlay.RegisterForSessionStopped")&&SteamClient.RemotePlay.RegisterForSessionStopped((function(e){return t.SessionStopped(e)})),Object(O.a)("RemotePlay.RegisterForSessionJoined")&&SteamClient.RemotePlay.RegisterForSessionJoined((function(e){return t.SessionJoined(e)})),Object(O.a)("RemotePlay.RegisterForInputUsed")&&SteamClient.RemotePlay.RegisterForInputUsed((function(e,n){t.PlayerUsedInput(e,n)})),Object(O.a)("RemotePlay.RegisterForPlayerInputSettingsChanged")&&SteamClient.RemotePlay.RegisterForPlayerInputSettingsChanged((function(e,n){t.PlayerInputSettingsChanged(e,n)})),Object(O.a)("RemotePlay.RegisterForPlaceholderStateChanged")&&SteamClient.RemotePlay.RegisterForPlaceholderStateChanged((function(e){t.m_bIsShowingPlaceholder=e})),Object(O.a)("RemotePlay.RegisterForClearControllers")&&SteamClient.RemotePlay.RegisterForClearControllers((function(){t.ClearControllerSlotPlayers()})),Object(O.a)("RemotePlay.RegisterForControllerIndexSet")&&SteamClient.RemotePlay.RegisterForControllerIndexSet((function(e,n){t.ControllerIndexSet(e,n)})),Object(O.a)("RemotePlay.BEnabled")&&SteamClient.RemotePlay.BEnabled().then((function(e){t.m_bEnabled=e})).catch()},e.prototype.BEnabled=function(){return this.m_bEnabled},e.prototype.BCanCreateInviteForGame=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return Object(O.a)("RemotePlay.BCanCreateInviteForGame")?[2,SteamClient.RemotePlay.BCanCreateInviteForGame(e)]:[2,!1]}))}))},e.prototype.BCanAcceptInviteForGame=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return Object(O.a)("RemotePlay.BCanAcceptInviteForGame")?[2,SteamClient.RemotePlay.BCanAcceptInviteForGame(e,t)]:r.a.COUNTRY&&-1!==t.indexOf(r.a.COUNTRY)?[2,!1]:[2,!0]}))}))},e.prototype.BCanHostIsolatedGameAudio=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return Object(O.a)("RemotePlay.BCanHostIsolatedGameAudio")?[2,SteamClient.RemotePlay.BCanHostIsolatedGameAudio()]:[2,!1]}))}))},e.prototype.HasInviteAndSession=function(e){var t=c.a.InitFromAccountID(e).ConvertTo64BitString();return this.m_sessions.has(t)&&this.m_sessions.get(t).bSession},e.prototype.HasInviteAndSessionForGameIDOtherThan=function(e){var t=!1;return this.m_sessions.forEach((function(n){n.bSession&&n.gameID!==e&&void 0!==n.gameID&&(t=!0)})),t},e.prototype.GetPlayerPropsIndexOf=function(e){var t=c.a.InitFromAccountID(e).ConvertTo64BitString(),n=this.m_sessions.get(t),o=-1,r=0;return this.m_sessions.forEach((function(e){e===n&&(o=r),r++})),o},e.prototype.GetPlayerProps=function(e){var t=c.a.InitFromAccountID(e).ConvertTo64BitString();return this.m_sessions.get(t)},e.prototype.GetPlayerPropsByIndex=function(e){return Array.from(this.m_sessions.values())[e]},Object.defineProperty(e.prototype,"player_props_count",{get:function(){return this.m_sessions.size},enumerable:!1,configurable:!0}),e.prototype.ClearControllerSlotPlayers=function(){for(var e=0;e<this.m_controllerSlotPlayers.length;++e)this.m_controllerSlotPlayers[e]=-1},e.prototype.ClearControllerSlotsWithPlayer=function(e){for(var t=0;t<this.m_controllerSlotPlayers.length;++t)this.m_controllerSlotPlayers[t]===e&&(this.m_controllerSlotPlayers[t]=-1)},e.prototype.SetPlayerInControllerSlot=function(e,t){e<0||e>=this.m_controllerSlotPlayers.length||(this.m_controllerSlotPlayers[e]=t)},e.prototype.GetPlayerInControllerSlot=function(e){return e<0||e>=this.m_controllerSlotPlayers.length?-1:this.m_controllerSlotPlayers[e]},Object.defineProperty(e.prototype,"bIsShowingPlaceholder",{get:function(){return this.m_bIsShowingPlaceholder},enumerable:!1,configurable:!0}),e.prototype.HasAnyContextWaitingForResults=function(){return this.m_contextsWaitingForResults.size>0},e.prototype.HasContextWaitingForResults=function(e){return this.m_contextsWaitingForResults.has(e)&&this.m_contextsWaitingForResults.get(e)},e.prototype.ClearContextsWaitingForResults=function(){return this.m_contextsWaitingForResults.clear()},e.prototype.CreateInviteAndSession=function(e,t,n){this.m_contextsWaitingForResults.has(n),this.m_contextsWaitingForResults.set(n,!0);var o=c.a.InitFromAccountID(e);return SteamClient.RemotePlay.CreateInviteAndSession(o.ConvertTo64BitString(),t)},e.prototype.CancelInviteAndSession=function(e){var t=c.a.InitFromAccountID(e);return SteamClient.RemotePlay.CancelInviteAndSession(t.ConvertTo64BitString())},e.prototype.CancelAllInvitesAndSessions=function(){var e=this;this.m_sessions.forEach((function(t){e.CancelInviteAndSession(t.friend.accountid)})),this.m_sessions.clear()},e.prototype.StopStreamingClient=function(){Object(O.a)("RemotePlay.StopStreamingClient")&&SteamClient.RemotePlay.StopStreamingClient()},e.prototype.SetStreamingDesktopToRemotePlayTogetherEnabled=function(e){return SteamClient.RemotePlay.SetStreamingDesktopToRemotePlayTogetherEnabled(e)},e.prototype.SetPerUserKeyboardInputEnabled=function(e,t){var n=c.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserKeyboardInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.SetPerUserMouseInputEnabled=function(e,t){var n=c.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserMouseInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.SetPerUserControllerInputEnabled=function(e,t){var n=c.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserControllerInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.GetPerUserInputSettings=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return t=c.a.InitFromAccountID(e),[4,SteamClient.RemotePlay.GetPerUserInputSettings(t.ConvertTo64BitString())];case 1:return[2,n.sent()]}}))}))},e.prototype.SessionStarted=function(e,t){var n=this,o=this.m_sessions.get(e);if(void 0===o){var r=new c.a(e).GetAccountID();o={friend:W.FriendStore.GetPlayer(r),gameID:t,bSession:!0,bJoined:!1,bKeyboardEnabled:!0,bMouseEnabled:!0,bControllerEnabled:!0,nKeyboardUsedTime:0,nMouseUsedTime:0,nControllerUsedTime:0},this.GetPerUserInputSettings(r).then((function(t){n.PlayerInputSettingsChanged(e,t)})).catch(),o.friend.LoadIfNecessary(),this.m_sessions.set(e,o)}else o.bSession=!0},e.prototype.SessionStopped=function(e){var t=this.m_sessions.get(e);void 0!==t&&t.bSession&&(t.bSession=!1,W.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_rpt_leave.m4a"));var n=new c.a(e).GetAccountID();this.ClearControllerSlotsWithPlayer(n)},e.prototype.SessionJoined=function(e){var t=this.m_sessions.get(e);if(void 0!==t&&!0!==t.bJoined){t.bJoined=!0;var n=new c.a(e).GetAccountID();if(0!=n&&n!==W.FriendStore.self.accountid&&(W.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_rpt_join.m4a"),W.NotificationManager.BNotificationsPermitted())){var o=W.FriendStore.GetPlayer(n);W.NotificationManager.DisplayNotificationFromFriend(o,{title:o.display_name,body:Object(C.d)("#RemotePlay_FriendJoinedSession"),tag:"message_"+n,steamid:e})}}},e.prototype.PlayerUsedInput=function(e,t){var n=this.m_sessions.get(e);if(void 0!==n)switch(t){case a.j.k_EClientUsedInputTypeKeyboard:n.nKeyboardUsedTime=performance.now();break;case a.j.k_EClientUsedInputTypeMouse:n.nMouseUsedTime=performance.now();break;case a.j.k_EClientUsedInputTypeController:n.nControllerUsedTime=performance.now()}},e.prototype.PlayerInputSettingsChanged=function(e,t){var n=this.m_sessions.get(e);void 0!==n&&(n.bKeyboardEnabled=t.bKeyboardEnabled,n.bMouseEnabled=t.bMouseEnabled,n.bControllerEnabled=t.bControllerEnabled)},e.prototype.ControllerIndexSet=function(e,t){var n=new c.a(e).GetAccountID();0==n&&(n=W.FriendStore.self.accountid),this.SetPlayerInControllerSlot(t,n)},Object(o.c)([i.B],e.prototype,"m_controllerSlotPlayers",void 0),Object(o.c)([i.B],e.prototype,"m_bIsShowingPlaceholder",void 0),Object(o.c)([i.k],e.prototype,"Init",null),Object(o.c)([i.n],e.prototype,"player_props_count",null),Object(o.c)([i.n],e.prototype,"bIsShowingPlaceholder",null),e}(),E=n("3Liw"),w=n("jELD"),M=n("XaMz"),D=function(){function e(e){var t=this;this.m_bReady=!1,this.m_unTimerUploadCommunityPreferences=void 0,this.m_rgOnReadyCallbacks=[],this.m_bFriendSettingsReady=!1,this.m_CommunityPreferencesChangedHandler=Object(b.d)(E.n.NotifyCommunityPreferencesChangedHandler,(function(e){return t.UpdateCommunityPreferences(e.Body().preferences()),1})),this.m_Storage=e,r.a.IN_CLIENT?this.m_iFriendSettingsStore=new j(this,this.OnFriendSettingsChanged.bind(this)):this.m_iFriendSettingsStore=new G(this,this.OnFriendSettingsChanged.bind(this)),this.m_CommunityPreferences=new a.e;var n=new E.b;this.m_CommunityPreferences.bBlurAdultContentViolence=n.hide_adult_content_violence(),this.m_CommunityPreferences.bBlurAdultContentSex=n.hide_adult_content_sex(),this.m_CommunityPreferences.bParenthesizeNicknames=n.parenthesize_nicknames(),this.m_ServerCommunityPreferences=void 0}return e.prototype.Init=function(e){var t=this;this.m_CM=e,this.m_CM.AddOnLogonCallback((function(){t.m_bReady||(t.m_iFriendSettingsStore.InternalInit(),t.SetReady());var e=s.b.Init(w.a);w.b.GetStorePreferences(t.m_CM.GetServiceTransport(),e).then((function(e){t.m_StorePreferences=e.Body()}));var n=s.b.Init(E.c);return E.o.GetCommunityPreferences(t.m_CM.GetServiceTransport(),n).then((function(e){return t.UpdateCommunityPreferences(e.Body().preferences())}))}))},e.prototype.BReady=function(){return this.m_bReady},Object.defineProperty(e.prototype,"FriendsSettings",{get:function(){return this.m_FriendsSettings},enumerable:!1,configurable:!0}),e.prototype.BUpdateFriendsSettings=function(e){return!!this.m_iFriendSettingsStore.BUpdateSettings(e)&&(this.m_FriendsSettings=e,!0)},e.prototype.BClientHasFeatureOrOnWeb=function(e){return!r.a.IN_CLIENT||!!this.BReady()&&("object"==typeof this.m_FriendsSettings.featuresEnabled&&(!!this.m_FriendsSettings.featuresEnabled.hasOwnProperty(e)&&this.m_FriendsSettings.featuresEnabled[e]))},e.prototype.BAlwaysShowChatsInNewWindow=function(){return this.m_FriendsSettings.bAlwaysNewChatWindow},e.prototype.BSingleWindowModeEnabled=function(){return!!this.m_FriendsSettings.bSingleWindowMode},e.prototype.BackfillSingleWindowMode=function(e){void 0===this.m_FriendsSettings.bSingleWindowMode&&(console.log("Performing single window mode backfill",e),this.SetSingleWindowMode(e))},e.prototype.SetSingleWindowMode=function(e){this.m_FriendsSettings.bSingleWindowMode=e,this.BUpdateFriendsSettings(this.m_FriendsSettings)},e.prototype.BForceAlphabeticFriendSorting=function(){return this.m_FriendsSettings.bForceAlphabeticFriendSorting},e.prototype.RunOnReady=function(e){this.m_bReady?e():this.m_rgOnReadyCallbacks.push(e)},e.prototype.GetAccountSpecificLocalStorageKey=function(e){return this.m_CM&&this.m_CM.steamid&&this.m_CM.steamid.BIsValid()?e+"_"+this.m_CM.steamid.GetAccountID():null},e.prototype.GetObjectFromLocalStorageWhenReady=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,this.WhenReady()];case 1:return n.sent(),[2,this.GetObjectFromLocalStorage(e,t)]}}))}))},e.prototype.GetObjectFromLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return n?this.m_Storage.GetObject(n).then((function(e){var n=Object.assign({},t,e);if(t&&"object"==typeof t)for(var o in t)"object"==typeof t[o]&&e&&(n[o]=Object.assign({},t[o],e[o]));return n})):Promise.reject("Storage not ready")},e.prototype.StoreObjectInLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return!!n&&(this.m_Storage.StoreObject(n,t),!0)},e.prototype.GetFlagFromLocalStorageWhenReady=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.WhenReady()];case 1:return t.sent(),[2,this.GetFlagFromLocalStorage(e)]}}))}))},e.prototype.GetFlagFromLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then((function(e){return"true"===e})):Promise.reject("Storage not ready")},e.prototype.SetFlagInLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return!!n&&(t?this.m_Storage.StoreString(n,"true"):this.m_Storage.RemoveObject(n),!0)},e.prototype.BFlagExistsInLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then((function(e){return null!==e})):Promise.reject("Storage not ready")},e.prototype.WhenReady=function(){var e=this;return this.m_bReady?Promise.resolve():new Promise((function(t){return e.RunOnReady(t)}))},e.prototype.SetReady=function(){if(this.m_bFriendSettingsReady&&this.m_CM.steamid.BIsValid()){this.m_bReady=!0;for(var e=0,t=this.m_rgOnReadyCallbacks;e<t.length;e++){(0,t[e])()}this.m_rgOnReadyCallbacks=[]}},e.prototype.OnFriendSettingsChanged=function(e){this.m_FriendsSettings=e,this.m_bFriendSettingsReady=!0,this.SetReady()},Object.defineProperty(e.prototype,"CommunityPreferences",{get:function(){return this.m_CommunityPreferences},enumerable:!1,configurable:!0}),e.prototype.UpdateCommunityPreferences=function(e){var t=Object(o.a)({},this.m_CommunityPreferences);void 0!==e.hide_adult_content_violence()&&(t.bBlurAdultContentViolence=e.hide_adult_content_violence()),void 0!==e.hide_adult_content_sex()&&(t.bBlurAdultContentSex=e.hide_adult_content_sex()),void 0!==e.parenthesize_nicknames()&&(t.bParenthesizeNicknames=e.parenthesize_nicknames()),this.m_ServerCommunityPreferences=Object(o.a)({},t),this.m_CommunityPreferences=t},e.prototype.CommunityPreferencesToMessage=function(e){var t=new E.b;return t.set_hide_adult_content_violence(e.bBlurAdultContentViolence),t.set_hide_adult_content_sex(e.bBlurAdultContentSex),t.set_parenthesize_nicknames(e.bParenthesizeNicknames),t},e.prototype.SetCommunityPreferences=function(e){var t=this;this.m_CommunityPreferences=e,Object(O.a)("Messaging.PostMessage")&&SteamClient.Messaging.PostMessage("Settings","CommunityPreferences",JSON.stringify(e)),this.m_unTimerUploadCommunityPreferences&&clearTimeout(this.m_unTimerUploadCommunityPreferences),this.m_unTimerUploadCommunityPreferences=SetBackgroundTimeout((function(){t.m_unTimerUploadCommunityPreferences=void 0,t.UploadCommunityPreferences()}),5e3)},e.prototype.UploadCommunityPreferences=function(){var e=!1;if(void 0===this.m_ServerCommunityPreferences)e=!0;else for(var t=0,n=Object.keys(this.m_ServerCommunityPreferences);t<n.length;t++){var o=n[t];if(this.m_ServerCommunityPreferences[o]!==this.CommunityPreferences[o]){e=!0;break}}if(e){var r=s.b.Init(E.k);r.Body().set_preferences(this.CommunityPreferencesToMessage(this.CommunityPreferences)),E.o.SetCommunityPreferences(this.m_CM.GetServiceTransport(),r).then((function(e){}))}},Object.defineProperty(e.prototype,"StorePreferences",{get:function(){return this.m_StorePreferences},enumerable:!1,configurable:!0}),e.prototype.FillInChatUsabilityMetrics=function(e){var t=e.settings(),n=this.FriendsSettings;t.set_notifications_show_ingame(n.bNotifications_ShowIngame),t.set_notifications_show_online(n.bNotifications_ShowOnline),t.set_notifications_show_message(n.bNotifications_ShowMessage),t.set_notifications_events_and_announcements(n.bNotifications_EventsAndAnnouncements),t.set_sounds_play_ingame(n.bSounds_PlayIngame),t.set_sounds_play_online(n.bSounds_PlayOnline),t.set_sounds_play_message(n.bSounds_PlayMessage),t.set_sounds_events_and_announcements(n.bSounds_EventsAndAnnouncements),t.set_always_new_chat_window(n.bAlwaysNewChatWindow),t.set_force_alphabetic_friend_sorting(n.bForceAlphabeticFriendSorting),t.set_chat_flash_mode(n.nChatFlashMode),t.set_remember_open_chats(n.bRememberOpenChats),t.set_compact_quick_access(n.bCompactQuickAccess),t.set_compact_friends_list(n.bCompactFriendsList),t.set_notifications_show_chat_room_notification(n.bNotifications_ShowChatRoomNotification),t.set_sounds_play_chat_room_notification(n.bSounds_PlayChatRoomNotification),t.set_hide_offline_friends_in_tag_groups(n.bHideOfflineFriendsInTagGroups),t.set_hide_categorized_friends(n.bHideCategorizedFriends),t.set_categorize_in_game_friends_by_game(n.bCategorizeInGameFriendsByGame),t.set_chat_font_size(n.nChatFontSize),t.set_use24hour_clock(n.b24HourClock),t.set_do_not_disturb_mode(n.bDoNotDisturbMode),t.set_disable_embed_inlining(n.bDisableEmbedInlining),t.set_sign_into_friends(n.bSignIntoFriends),t.set_animated_avatars(n.bAnimatedAvatars)},Object(o.c)([i.B],e.prototype,"m_bReady",void 0),Object(o.c)([i.B],e.prototype,"m_FriendsSettings",void 0),Object(o.c)([i.B],e.prototype,"m_CommunityPreferences",void 0),Object(o.c)([i.B],e.prototype,"m_StorePreferences",void 0),Object(o.c)([i.k],e.prototype,"BUpdateFriendsSettings",null),Object(o.c)([i.k],e.prototype,"UpdateCommunityPreferences",null),Object(o.c)([i.k],e.prototype,"SetCommunityPreferences",null),e}(),T=function(){return function(e,t){this.m_SettingsStore=e,this.m_fnFriendSettingsChanged=t}}(),j=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.m_bClientInitComplete=!1,o.InternalInit(),o}return Object(o.d)(t,e),t.prototype.InternalInit=function(){this.m_bClientInitComplete||(SteamClient&&SteamClient.FriendSettings&&SteamClient.FriendSettings.RegisterForSettingsChanges?(SteamClient.FriendSettings.RegisterForSettingsChanges(this.OnClientSettingsChange.bind(this)),this.m_bClientInitComplete=!0):Object(M.a)(!1,"Can't initialize settings from client"))},t.prototype.OnClientSettingsChange=function(e){var t,n=a.f();if("string"!=typeof e){if(t=e.FriendsSettings,SteamClient.FriendSettings&&SteamClient.FriendSettings.SetFriendSettings)return void this.BUpdateSettings(t)}else t=JSON.parse(e,(function(e,t){return"b"==e.substring(0,1)&&"number"==typeof t?0!=t:t}));Object.assign(n,t),this.m_fnFriendSettingsChanged(n)},t.prototype.BUpdateSettings=function(e){var t=JSON.stringify(e);return SteamClient.FriendSettings.SetFriendSettings(t),!0},t}(T),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.InternalInit=function(){var e=this;this.m_SettingsStore.GetObjectFromLocalStorage(t.k_strLocalStorageKeyPrefix,this.GetDefaultSettings()).then((function(t){e.m_fnFriendSettingsChanged(t.friendsSettings)}))},t.prototype.GetDefaultSettings=function(){return{friendsSettings:a.f()}},t.prototype.BUpdateSettings=function(e){var n={friendsSettings:e};return this.m_SettingsStore.StoreObjectInLocalStorage(t.k_strLocalStorageKeyPrefix,n)},t.k_strLocalStorageKeyPrefix="LocalStorageFriendsSettings",t}(T),R=n("Oefq"),k=function(){function e(){var e=this;this.m_PrivacySettings={privacy_state:0,privacy_state_inventory:0,privacy_state_gifts:0,privacy_state_ownedgames:0,privacy_state_playtime:0,privacy_state_friendslist:0},this.m_IncomingPrivacySettingsHandler=Object(b.d)(E.n.NotifyPrivacyPrivacySettingsChangedHandler,(function(t){return e.ReadPrivacySettings(t.Body().privacy_settings()),1}))}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn((function(){return Object(o.b)(t,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=s.b.Init(E.f),[4,E.o.GetPrivacySettings(this.m_CMInterface.GetServiceTransport(),e)];case 1:return 1==(t=n.sent()).GetEResult()&&this.ReadPrivacySettings(t.Body().privacy_settings()),[2]}}))}))}))},Object.defineProperty(e.prototype,"PrivacySettings",{get:function(){return this.m_PrivacySettings},enumerable:!1,configurable:!0}),e.prototype.ReadPrivacySettings=function(e){Object.assign(this.m_PrivacySettings,e.toObject())},Object(o.c)([i.B],e.prototype,"m_PrivacySettings",void 0),e}(),A=n("VZeO"),N=n("OTLo"),B=n("V7Fl"),L=n("8JTq");function P(e,t){return function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];W.ready_to_render?e.apply(this,n):Object(i.J)((function(){return W.ready_to_render}),(function(){e.apply(t,n)}))}}function F(e,t,n){return{value:P(n.value)}}function x(e){return P(e,e.name)}var V=function(){return function(){}}(),U=function(){return function(){}}(),H=function(){function e(e,t){void 0===t&&(t={}),this.m_BrowserContextDefaultTarget=L.a,this.m_AppInfoStore=N.a,this.m_EconomyStore=new f,this.m_UserStore=new k,this.m_ParentalStore=new S,this.m_BroadcastStore=new p,this.m_GroupMemberStore=new g.b,this.m_RemotePlayStore=new I,this.m_bReadyToRender=!1,this.m_bShuttingDown=!1,Object(M.a)(!W,"FriendsUIApp already initialized"),W=this,window.g_FriendsUIApp=this,this.m_Storage=e,this.m_SettingsStore=t.SettingsStore||new D(e),this.m_FriendStore=t.FriendStore||new _.a,this.m_ChatStore=t.ChatStore||new d.b(this.m_FriendStore),this.m_UIStore=t.UIStore||new R.b(this.m_ChatStore),this.m_VoiceChatStore=new A.a(this.m_SettingsStore)}return e.prototype.InitInternal=function(e,t,n){var r=this;void 0===n&&(n=[]),this.m_CMInterface=e,this.m_NotificationManager=t;var i=this.m_FriendStore.Init(e),a=this.m_ChatStore.Init(e,this.m_VoiceChatStore),s=this.InitAdjustClockDriftFromServer();this.m_VoiceChatStore.Init(e),this.m_SettingsStore.Init(e),this.m_AppInfoStore.Init(e),this.m_UIStore.Init(),this.m_EconomyStore.Init(e),this.m_ParentalStore.Init(e),this.m_BroadcastStore.Init(e),this.m_RemotePlayStore.Init(e),this.m_GroupMemberStore.Init(),this.m_UserStore.Init(e);Promise.all(Object(o.g)([i,a,s],n)).then((function(){console.log("Ready To Render promises succeeded"),r.SetReadyToRender()}),(function(e){console.error("Ready To Render promise failed: ",e),r.SetReadyToRender()}))},e.prototype.GetChatRoomBBCodeParser=function(){return this.m_ChatRoomBBCodeParser},e.prototype.GetFriendChatBBCodeParser=function(){return this.m_FriendChatBBCodeParser},e.prototype.GetNotificationBBCodeParser=function(){return this.m_NotificationBBCodeParser},e.prototype.GetChatRoomEffectSettings=function(){return this.m_ChatRoomEffectSettings},Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VoiceStore",{get:function(){return this.m_VoiceChatStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UIStore",{get:function(){return this.m_UIStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SettingsStore",{get:function(){return this.m_SettingsStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AppInfoStore",{get:function(){return this.m_AppInfoStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Storage",{get:function(){return this.m_Storage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NotificationManager",{get:function(){return this.m_NotificationManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EconomyStore",{get:function(){return this.m_EconomyStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UserStore",{get:function(){return this.m_UserStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ParentalStore",{get:function(){return this.m_ParentalStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BroadcastStore",{get:function(){return this.m_BroadcastStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RemotePlayStore",{get:function(){return this.m_RemotePlayStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GroupMemberStore",{get:function(){return this.m_GroupMemberStore},enumerable:!1,configurable:!0}),e.prototype.SetReadyToRender=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_bReadyToRender?[3,2]:(console.log("FriendsUI ready to render after "+(performance.now()-e.sm_msStartup)+"ms"),this.m_bReadyToRender=!0,[4,this.OnReadyToRender()]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Object.defineProperty(e.prototype,"ready_to_render",{get:function(){return this.m_bReadyToRender},enumerable:!1,configurable:!0}),e.prototype.GetStartupTime=function(){return e.sm_msStartup},e.prototype.ShowFriendChatDialog=function(e,t,n){return void 0===n&&(n=!0),this.UIStore.ShowFriendChatDialog(e,t,n,n)},e.prototype.GetDefaultBrowserContext=function(){return this.m_BrowserContextDefaultTarget},e.prototype.SetDefaultPopupContext=function(e){console.log("Set default popup context: "+e.m_unPID),this.m_BrowserContextDefaultTarget=e},e.prototype.CreateNewTabFromUniqueID=function(e,t,n,o){var r=t.match(/^f(\d+)$/);if(r&&r[1]){var i=parseInt(r[1]),a=W.FriendStore.GetPlayer(i);if(a&&!a.is_blocked){var s=this.m_ChatStore.GetFriendChat(i);if(s){var c=new d.c(e,s);return!o||a.is_friend||W.FriendStore.BApprovedNonFriendMessages(i)||s.SetShowNonFriendWarning(!0),c}}}var l=t.match(/^cg(\d+)$/);if(l&&l[1]){var u=this.m_ChatStore.GetChatRoomGroup(l[1]);if(u)return this.m_ChatStore.IncRefActiveChatRoomGroup(u.GetGroupID(),!n),new B.d(e,u)}return null},e.prototype.InitAdjustClockDriftFromServer=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(t){return[2,new Promise((function(t,n){e.m_CMInterface.RunWhenLoggedOn((function(){return Object(o.b)(e,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Object(i.J)((function(){return e.m_CMInterface.BPerformedInitialClockAdjustment()}),{timeout:1e3})];case 1:return o.sent(),t(),[3,3];case 2:return o.sent(),console.warn("Timed out waiting for initial server clock drift adjustment"),n(),[3,3];case 3:return[2]}}))}))}))}))]}))}))},e.prototype.GetServerTimeMS=function(){return this.m_CMInterface.GetServerTimeMS()},e.prototype.GetServerRTime32=function(){return this.m_CMInterface.GetServerRTime32()},e.prototype.RTime32ToDate=function(e){return this.m_CMInterface.RTime32ToDate(e)},e.prototype.GetLocalMidnightInRTime32=function(t){void 0===e.sm_tzOffset&&(e.sm_tzOffset=60*(new Date).getTimezoneOffset(),Object(M.a)(e.sm_tzOffset||0===e.sm_tzOffset,"Computed invalid timezone offset "+e.sm_tzOffset));var n=e.sm_tzOffset||0,o=(t||this.m_CMInterface.GetServerRTime32())-n;return 86400*Math.floor(o/86400)+n},e.prototype.IsInBeta=function(){return r.a.FRIENDSUI_BETA},e.prototype.BIsValidBrowserContext=function(e){return Object(L.b)(e,L.a)},e.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){},e.prototype.UpdatePersonaState=function(e){},e.prototype.BShowChatRoomNotification=function(){return this.SettingsStore.FriendsSettings.bNotifications_ShowChatRoomNotification},e.prototype.BShowDirectChatNotification=function(){return this.SettingsStore.FriendsSettings.bNotifications_ShowMessage},e.sm_msStartup=performance.now(),Object(o.c)([i.B],e.prototype,"m_bReadyToRender",void 0),Object(o.c)([i.n],e.prototype,"ready_to_render",null),e}(),W=void 0},LGkA:function(e,t,n){"use strict";function o(e,t){return e+"economy/sticker/"+t}n.d(t,"a",(function(){return o}))},MB4Y:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return g}));var o=n("mrSG"),r=n("rWGG"),i=n("q1tI"),a=n("2vnA"),s=n("tkkQ"),c=n("G+3Z"),l=n("1VtQ"),u=n("FkUk"),p=n("UqDm"),m=n("hReu"),d=n("LAqV"),h=n("eMko"),f=function(){function e(){this.m_mapHovers=new WeakMap}return e.prototype.GetHover=function(e){var t=this.m_mapHovers.get(e);return t||(t=new g(e),this.m_mapHovers.set(e,t)),t},e}(),_=function(){function e(){}return Object(o.c)([a.B],e.prototype,"visible",void 0),e}(),g=function(e){function t(t){var n=e.call(this,t.accountid)||this;return n.m_friend=t,n}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"friend",{get:function(){return this.m_friend},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"persona",{get:function(){return this.m_friend.persona},enumerable:!1,configurable:!0}),t.prototype.GetInstance=function(e,t){if(void 0===t&&(t=!1),this.m_rgInstances)for(var n=0,o=this.m_rgInstances;n<o.length;n++){if((r=o[n]).m_OwningElement==e)return r}var r;return t?((r=new _).m_OwningElement=e,r.visible=!1,r.hover=this,this.m_rgInstances?this.m_rgInstances.push(r):this.m_rgInstances=[r],r):null},t.prototype.ShowPopup=function(e,t,n){var o=this;t.visible=!0,t.m_OwningElement.ownerDocument.defaultView.setTimeout((function(){t.visible&&(t.popupWindow||(t.popupWindow=new r.a(e,t,n)),t.popupWindow.Show())}),250),t.m_BlurHandler=function(){o.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.defaultView.addEventListener("blur",t.m_BlurHandler),t.m_VisibilityHandler=function(e){"hidden"===e.target.visibilityState&&o.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.addEventListener("visibilitychange",t.m_VisibilityHandler)},t.prototype.Show=function(e,n,o){var a=this,c=e.currentTarget.ownerDocument.defaultView.innerWidth<500;if((!c||s.a.IN_CLIENT)&&!m.i.DragDropManager.BInDrag()){this.EnsureCommunityDataLoaded();var l=e.currentTarget,u=Object(m.e)(null,e),p=this.GetInstance(l,!0);p.context=n;var h=!1;if(s.a.IN_CLIENT){var f=d.f.UIStore.GetPerContextChatData(u);h=f.BUsePopups()}if(c&&h)this.ShowPopup(l,p,u);else{var _=i.createElement(r.b,{hoverInstance:p,target:l,direction:o,onNoSpace:function(){h&&a.ShowPopup(l,p,u)}});t.m_embeddedElements.ShowElementDelayed(l.ownerDocument,250,_,p).then((function(){p.visible=!0}))}}},t.prototype.Hide=function(e){this.HideByElement(e.currentTarget)},t.prototype.HideByElement=function(e){var n=this.GetInstance(e);if(n){if(n.visible=!1,n.m_BlurHandler&&(e.ownerDocument.defaultView.removeEventListener("blur",n.m_BlurHandler),n.m_BlurHandler=null),n.m_VisibilityHandler&&(e.ownerDocument.removeEventListener("visibilitychange",n.m_VisibilityHandler),n.m_VisibilityHandler=null),n.popupWindow&&!n.popupWindow.BIsClosed()){var o=n.popupWindow,r=function(){o.BIsClosed()||o.Close()};e.ownerDocument.defaultView.addEventListener("unload",r),e.ownerDocument.defaultView.setTimeout((function(){e.ownerDocument.defaultView.removeEventListener("unload",r),r()}),100)}else t.m_embeddedElements.HideElement(n.m_OwningElement.ownerDocument,n,500);p.c(this.m_rgInstances,n)}},t.prototype.OnContextMenu=function(e,t){var n=Object(u.b)(Object(m.e)(null,t),e,this.m_friend,t);return this.Hide(t),n},t.prototype.HideAllInstances=function(){if(this.m_rgInstances)for(var e=0,t=this.m_rgInstances.slice();e<t.length;e++){var n=t[e];this.HideByElement(n.m_OwningElement)}},t.m_embeddedElements=new c.a("CFriendHoverContainer"),Object(o.c)([l.a],t.prototype,"Show",null),Object(o.c)([l.a],t.prototype,"Hide",null),Object(o.c)([l.a],t.prototype,"OnContextMenu",null),t}(h.a)},MfD9:function(e,t,n){e.exports={ChatMessageSteamStore_Failed:"bbcode_ChatMessageSteamStore_Failed_2wa0X",ChatMessageSteamStore:"bbcode_ChatMessageSteamStore_gwzSZ",ChatMessagesSteamStore_FilteredContent:"bbcode_ChatMessagesSteamStore_FilteredContent_34k3I",TinyContent:"bbcode_TinyContent_2n40C",ChatMessageSteamStore_HeaderImage:"bbcode_ChatMessageSteamStore_HeaderImage_2s811",Blurred:"bbcode_Blurred_3BKMl",SmallContent:"bbcode_SmallContent_NKQSv",MediumContent:"bbcode_MediumContent_U7MPI",ChatMessageSteamStore_GameDetails:"bbcode_ChatMessageSteamStore_GameDetails_99hwV",ChatMessageSteamStore_MediaContainer:"bbcode_ChatMessageSteamStore_MediaContainer_2i_00",ChatMessageSteamStore_MainMedia:"bbcode_ChatMessageSteamStore_MainMedia_28eQq",senderName:"bbcode_senderName_1_tWd",URLSent:"bbcode_URLSent_2yalT",SteamURL:"bbcode_SteamURL_2VXfO",ChatMessageSteamStore_Name:"bbcode_ChatMessageSteamStore_Name_2-b92",ChatMessageSteamStore_GameNameAndIcon:"bbcode_ChatMessageSteamStore_GameNameAndIcon_qa-O1",ChatMessageSteamStore_Header:"bbcode_ChatMessageSteamStore_Header_3X7hC",ChatMessageSteamStore_HeaderImageFiltered:"bbcode_ChatMessageSteamStore_HeaderImageFiltered_2GO7-",ChatMessageSteamStore_Description:"bbcode_ChatMessageSteamStore_Description_17PwS",ChatMessageSteamStore_FilteredDescription:"bbcode_ChatMessageSteamStore_FilteredDescription_3Iqni",ChatMessageSteamStore_GameIcon:"bbcode_ChatMessageSteamStore_GameIcon_1EeOf",ChatMessageSteamStore_Body:"bbcode_ChatMessageSteamStore_Body_1L1hB",ChatMessageSteamStore_DetailsContainer:"bbcode_ChatMessageSteamStore_DetailsContainer_2d12m",ChatMessageSteamStore_VideoThumbnail:"bbcode_ChatMessageSteamStore_VideoThumbnail_2c-FU",ChatMessageSteamStore_ThumbnailsContainer:"bbcode_ChatMessageSteamStore_ThumbnailsContainer_246HV",ChatMessageSteamStore_Screenshot:"bbcode_ChatMessageSteamStore_Screenshot_3XVGb",ChatMessageSteamStore_ScreenshotThumbnail:"bbcode_ChatMessageSteamStore_ScreenshotThumbnail_3R0VG",videoPlaying:"bbcode_videoPlaying_1UpDR",ChatMessageSteamStore_VideoPlayButton:"bbcode_ChatMessageSteamStore_VideoPlayButton_2oeMy",ChatMessageSteamStore_VideoLargeContainer:"bbcode_ChatMessageSteamStore_VideoLargeContainer_2pzdG",ChatMessageSteamStore_VideoLarge:"bbcode_ChatMessageSteamStore_VideoLarge_2Dj_u",ChatMessageSteamStore_Footer:"bbcode_ChatMessageSteamStore_Footer_1mXJd",ChatMessageSteamStore_PricingContainer:"bbcode_ChatMessageSteamStore_PricingContainer_fYTQK",ChatMessageSteamStore_Pricing:"bbcode_ChatMessageSteamStore_Pricing_bKeQr",ChatMessageSteamStore_Pricing_Discount:"bbcode_ChatMessageSteamStore_Pricing_Discount_1BAfb",ChatMessageSteamStore_Pricing_FinalContainer:"bbcode_ChatMessageSteamStore_Pricing_FinalContainer_3piGx",ChatMessageSteamStore_Pricing_Final:"bbcode_ChatMessageSteamStore_Pricing_Final_2TCu5",hasDiscount:"bbcode_hasDiscount_2DoYC",ChatMessageSteamStore_Pricing_Initial:"bbcode_ChatMessageSteamStore_Pricing_Initial_1Jm7h",ChatMessageSteamStore_ViewStore:"bbcode_ChatMessageSteamStore_ViewStore_1_czf",ChatMessageSteamStore_Free:"bbcode_ChatMessageSteamStore_Free_3Zq0f",ChatMessageSteamStore_CopyURL:"bbcode_ChatMessageSteamStore_CopyURL_23S5M",ChatMessageTweet:"bbcode_ChatMessageTweet_1R69m",ChatMessageTweet_Header:"bbcode_ChatMessageTweet_Header_gpcGy",ChatMessageTweet_ProfileImage:"bbcode_ChatMessageTweet_ProfileImage_wRcpO",ChatMessageTweet_NameSection:"bbcode_ChatMessageTweet_NameSection_3c-Qw",ChatMessageTweet_NameGroup:"bbcode_ChatMessageTweet_NameGroup_3VNx1",ChatMessageTweet_Name:"bbcode_ChatMessageTweet_Name_1_swN",ChatMessageTweet_Logo:"bbcode_ChatMessageTweet_Logo_1ex2E",ChatMessageTweet_Verified:"bbcode_ChatMessageTweet_Verified_2roaO",ChatMessageTweet_ScreenName:"bbcode_ChatMessageTweet_ScreenName_3pM50",ChatMessageTweet_Body:"bbcode_ChatMessageTweet_Body_2mh_n",ChatMessageTweet_Footer:"bbcode_ChatMessageTweet_Footer_11DrN",ChatMessageTweet_Created:"bbcode_ChatMessageTweet_Created_1qrLY",numberCounterContainer:"bbcode_numberCounterContainer_mswnK",numberColumn:"bbcode_numberColumn_2SFVv",randomNumberLabel:"bbcode_randomNumberLabel_6Nz3l",randomActual:"bbcode_randomActual_1KvCn",randomNumberShadow:"bbcode_randomNumberShadow_3OoiC",startingZero:"bbcode_startingZero_20MSk",randomMsg:"bbcode_randomMsg_2x8Cn",MsgAnimating:"bbcode_MsgAnimating_3a9nR",none:"bbcode_none_3qH01",randomValues:"bbcode_randomValues_Vpi5G",coinLabel:"bbcode_coinLabel_1GhxZ",CoinModel:"bbcode_CoinModel_JExHJ",flipCoinContainer:"bbcode_flipCoinContainer_2PyUD",coinFade:"bbcode_coinFade_3vycN",flipCoinAndResult:"bbcode_flipCoinAndResult_1FjLD",coin:"bbcode_coin_AlQa_",front:"bbcode_front_h-0pm",back:"bbcode_back_22p29",coinFlipBottom:"bbcode_coinFlipBottom_38MhH",coinFlipTop:"bbcode_coinFlipTop_BnEA6",front_b:"bbcode_front_b_2ugtx",back_b:"bbcode_back_b_3YNs8",mid:"bbcode_mid_10JhA",coinFace:"bbcode_coinFace_3OmQy",flipCoinWinningSide:"bbcode_flipCoinWinningSide_17gzn",flipCoinLosingSide:"bbcode_flipCoinLosingSide_g63r6",coinFlip:"bbcode_coinFlip_3klbs",resultLabel:"bbcode_resultLabel_3Lefr",coinFlipResult:"bbcode_coinFlipResult_2a-5i",plusOne:"bbcode_plusOne_3mCUi",ImageModalBackground:"bbcode_ImageModalBackground_XfE_W",ImageModalContent:"bbcode_ImageModalContent_1jjqt",RoomEffectContainer:"bbcode_RoomEffectContainer_25cnP",RoomEffectIcon:"bbcode_RoomEffectIcon_MkqM8",randomNumbers:"bbcode_randomNumbers_2IGPW",randomNumbers0:"bbcode_randomNumbers0_1UWWl",randomNumbers1:"bbcode_randomNumbers1_2b7O2",randomNumbers2:"bbcode_randomNumbers2_TxzW6",randomNumbers3:"bbcode_randomNumbers3_1v-a7",randomNumbers4:"bbcode_randomNumbers4_2J19q",randomNumbers5:"bbcode_randomNumbers5_2tjCM",randomNumbers6:"bbcode_randomNumbers6_behC6",randomNumbers7:"bbcode_randomNumbers7_CGn78",randomNumbers8:"bbcode_randomNumbers8_261Uj",randomNumbers9:"bbcode_randomNumbers9_1orHm",randomNumbers10:"bbcode_randomNumbers10_2bRjg",randomNumbersZero:"bbcode_randomNumbersZero_OKABV",coinSpin:"bbcode_coinSpin_3_X1R"}},MsQV:function(e,t,n){"use strict";var o,r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.Hover=0]="Hover",e[e.ClickPopup=1]="ClickPopup",e[e.ClickSurroundingRegion=2]="ClickSurroundingRegion"}(o||(o={})),function(e){e[e.Chat=0]="Chat",e[e.Notification=1]="Notification",e[e.Error=2]="Error"}(r||(r={}));var i=function(){return function(){}}()},"N/w2":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("LAqV"),r=n("oh5H"),i={TimeOfDay:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric"}),TimeOfDayWithSecs:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric"}),TimeInWeek:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric"}),FullTimestamp:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),FullTimestampNoWeekday:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},a={TimeOfDay:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric",hour12:!1}),TimeOfDayWithSecs:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),TimeInWeek:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestamp:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestampNoWeekday:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})};function s(e,t){null==t.bIncludeWeekday&&(t.bIncludeWeekday=!0),null==t.bRelativeDate&&(t.bRelativeDate=!0);var n,s=o.f.RTime32ToDate(e),c=o.f.GetLocalMidnightInRTime32(),l=o.f.SettingsStore.FriendsSettings.b24HourClock?a:i,u=t.Format;null==u&&(u=t.bTimeOnly||e>=c-86400?t.bIncludeSeconds?l.TimeOfDayWithSecs:l.TimeOfDay:t.bRelativeDate&&e>=c-432e3?l.TimeInWeek:t.bIncludeWeekday?l.FullTimestamp:l.FullTimestampNoWeekday);try{n=u.format(s)}catch(e){n=Object(r.d)("#ChatRoom_Timestamp_InvalidDate")}return!t.bTimeOnly&&t.bRelativeDate&&e>=c-86400&&e<c&&(n=Object(r.d)("#ChatRoom_Timestamp_Yesterday",n)),n}},OAU9:function(e,t,n){e.exports={RecommendedNote:"voicesettings_RecommendedNote_3NFIb",TransmissionTypeSettings:"voicesettings_TransmissionTypeSettings_2wcxX",HotkeySettingRow:"voicesettings_HotkeySettingRow_2wDL4",HotkeyButton:"voicesettings_HotkeyButton_1bV2N",Capturing:"voicesettings_Capturing_2ZH0Q",WalkDashedOutline:"voicesettings_WalkDashedOutline_3xlIG",HotkeyClearButton:"voicesettings_HotkeyClearButton_3Us-N",HotkeySettingDescription:"voicesettings_HotkeySettingDescription_2zgmL",VoiceSettings:"voicesettings_VoiceSettings_1BDD0",AdvancedSettingsButton:"voicesettings_AdvancedSettingsButton_MjZeH",ToggleRow:"voicesettings_ToggleRow_3W79i"}},"OJz+":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var o=n("mrSG"),r=n("4HGb"),i=(n("qeMu"),n("2vnA")),a=(n("ywG3"),new(function(){function e(){this.m_mapCallbacks=new Map,this.m_rgRegisteredEMsgs=[],this.m_mapServiceMethodHandlers=new Map,this.m_rgRegisteredServiceMethodHandlers=[]}return e.prototype.DispatchMsgToHandlers=function(e,t){var n=e.GetEMsg();if(146==n){var o=e.Hdr().target_job_name();if(o)if(a=this.m_mapServiceMethodHandlers.get(o)){this.DEBUG_LogMessageDispatch(e,a[0]);for(var r=0,i=a;r<i.length;r++){i[r].invoke(e,t)}return!0}}else{var a;if(a=this.m_mapCallbacks.get(n)){this.DEBUG_LogMessageDispatch(e,a[0]);for(var s=0,c=a;s<c.length;s++){c[s].invoke(e)}return!0}}return!1},e.prototype.DEBUG_LogMessageDispatch=function(e,t){},Object.defineProperty(e.prototype,"emsg_list",{get:function(){return this.m_rgRegisteredEMsgs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servicemethod_list",{get:function(){return this.m_rgRegisteredServiceMethodHandlers},enumerable:!1,configurable:!0}),e.prototype.AddCallback=function(e,t,n){var o=this,r=this.m_mapCallbacks.get(e);return r||(r=[],this.m_mapCallbacks.set(e,r),this.m_rgRegisteredEMsgs.push(e)),r.push({invoke:n,msgClass:t}),{invoke:n,unregister:function(){var t=o.m_mapCallbacks.get(e);if(t)for(var r=0;r<t.length;r++)t[r].invoke==n&&(t.splice(r,1),r--)}}},e.prototype.AddServiceMethodHandler=function(e,t){var n=this,o=function(n,o){var i=r.b.InitFromMsg(e.request,n),a=r.b.Init(e.response,147),s=t(i,a),c=function(e){a.Hdr().set_eresult(e),o(a)};s instanceof Promise?s.then(c).catch((function(){c(2)})):c(s)};return this.m_mapServiceMethodHandlers.has(e.name)?console.error("Duplicate registration for method "+e.name):(this.m_mapServiceMethodHandlers.set(e.name,[{invoke:o,msgClass:e.request}]),this.m_rgRegisteredServiceMethodHandlers.push(e.name)),{invoke:o,unregister:function(){var t=n.m_mapServiceMethodHandlers.get(e.name);if(t)for(var r=0;r<t.length;r++)t[r].invoke==o&&(t.splice(r,1),r--)}}},e.prototype.AddServiceNotificationHandler=function(e,t){var n=this,o=function(n,o){var i=r.b.InitFromMsg(e.request,n);t(i)},i=this.m_mapServiceMethodHandlers.get(e.name);return i||(i=[],this.m_mapServiceMethodHandlers.set(e.name,i),this.m_rgRegisteredServiceMethodHandlers.push(e.name)),i.push({invoke:o,msgClass:e.request}),{invoke:o,unregister:function(){var t=n.m_mapServiceMethodHandlers.get(e.name);if(t)for(var r=0;r<t.length;r++)t[r].invoke==o&&(t.splice(r,1),r--)}}},Object(o.c)([i.B],e.prototype,"m_rgRegisteredEMsgs",void 0),Object(o.c)([i.B],e.prototype,"m_rgRegisteredServiceMethodHandlers",void 0),e}()));function s(e,t,n){return a.AddCallback(e,t,(function(e){n(r.b.InitFromMsg(t,e))}))}function c(e,t,n){return a.AddCallback(e,t,(function(e){Object(i.F)((function(){n(r.b.InitFromMsg(t,e))}))}))}function l(e,t){return a.AddServiceNotificationHandler(e,t)}function u(e,t){return a.AddServiceNotificationHandler(e,(function(e){var n;return Object(i.F)((function(){n=t(e)})),n}))}},OTLo:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n("mrSG"),r=n("2vnA"),i=n("hEDq"),a=n("4HGb"),s=n("CKJp"),c=n("1n9R"),l=function(){function e(e){this.m_nLastUpdated=0,this.m_mapLanguages=r.B.map(),this.m_fetching=null,this.m_appid=e}return e.prototype.GetAppID=function(){return this.m_appid},e.prototype.GetTokenList=function(e){return this.m_mapLanguages.has(e)?this.m_mapLanguages.get(e):null},e.prototype.Localize=function(e,t){var n=c.c.LANGUAGE;return u(e,this.GetTokenList(n),"english"!=n?this.GetTokenList("english"):null,this.m_appid,t)},e.prototype.SubstituteParams=function(e,t){var n=c.c.LANGUAGE;return p(e,this.GetTokenList(n),"english"!=n?this.GetTokenList("english"):null,this.m_appid,t)},e}();function u(e,t,n,o,r){if(!e.startsWith("#"))return console.log("Token doesn't start with #:",e),"";var i=e;e=e.toLowerCase();var a="";if(t&&t.has(e)&&(a=t.get(e)),!a&&n&&n.has(e)&&(a=n.get(e)),a)a=p(a,t,n,o,r);else if((t||n)&&console.log("No loc found for appid",o,i,"Tokens:",t,"Fallback:",n),t&&1!=c.c.EUNIVERSE)return e;return a}function p(e,t,n,o,r){var i=e.match(/{[A-za-z0-9_%#:]+}/g);if(i)for(var a=0,s=i;a<s.length;a++){var c=s[a],l=u(m(c.slice(1,-1),r),t,n,o,r);if(!l)return"";e=e.replace(c,l)}return e=m(e,r)}function m(e,t){var n=e.match(/%[A-Za-z0-9_:]+%/g);if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o],a=i.slice(1,-1).toLowerCase(),s=t.get(a);null==s?console.log("No rich presence found for",a):e=e.replace(i,s)}return e}var d=n("+9/f"),h=n("XaMz"),f=n("E7zH"),_=new(function(){function e(){this.m_mapAppInfo=r.B.map(),this.m_mapRichPresenceLoc=r.B.map(),this.m_cAppInfoRequestsInFlight=0,this.m_setPendingAppInfo=new Set,this.m_CacheStorage=null,this.m_fnCallbackOnAppInfoLoaded=new f.a}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.BHavePendingAppInfoRequests=function(){return this.m_setPendingAppInfo.size>0||this.m_cAppInfoRequestsInFlight>0},Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!1,configurable:!0}),e.prototype.RegisterCallbackOnLoad=function(e){if(!this.BHavePendingAppInfoRequests())return Object(h.a)(!1,"Registering for callback on appinfo load, but nothing queued"),void e();this.m_fnCallbackOnAppInfoLoaded.Register(e)},e.prototype.IsLoadingAppID=function(e){return this.m_setPendingAppInfo.has(e)},e.prototype.GetAppInfo=function(e){if(Object(h.a)(this.m_CMInterface,"CAppInfoStore.GetAppInfo called before Init"),Object(h.a)(e,"Requesting App ID 0, which won't ever exist"),!this.m_mapAppInfo.has(e)){var t=new s.a(e);this.m_mapAppInfo.set(e,t),this.QueueAppInfoRequest(e)}return this.m_mapAppInfo.get(e)},e.prototype.QueueAppInfoRequest=function(e){var t=this;return e?(this.m_setPendingAppInfo.size||(this.m_PendingAppInfoPromise=new Promise((function(e){return t.m_PendingAppInfoResolve=e})),window.setTimeout((function(){return t.FlushPendingAppInfo()}),25)),this.m_setPendingAppInfo.add(e),this.m_PendingAppInfoPromise):Promise.resolve()},e.prototype.FlushPendingAppInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=this.m_PendingAppInfoResolve,t=Array.from(this.m_setPendingAppInfo),this.m_PendingAppInfoPromise=void 0,this.m_PendingAppInfoResolve=void 0,this.m_setPendingAppInfo.clear(),[4,this.LoadAppInfoBatch(t)];case 1:return n.sent(),e(),[2]}}))}))},e.prototype.LoadAppInfoBatch=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,l,u;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_cAppInfoRequestsInFlight++,[4,this.LoadAppInfoBatchFromLocalCache(e)];case 1:return(t=o.sent()).length?(console.log("Loading batch of App Info from Steam: ",t),[4,this.m_CMInterface.WaitUntilLoggedOn()]):[3,5];case 2:o.sent(),(n=a.b.Init(d.b)).Body().set_language(Object(i.n)(c.c.LANGUAGE)),r=50,o.label=3;case 3:return t.length>0?(s=Math.min(r,t.length),l=t.slice(0,s),t=t.slice(s),n.Body().set_appids(l),[4,d.g.GetApps(this.m_CMInterface.GetServiceTransport(),n)]):[3,5];case 4:return 1==(u=o.sent()).GetEResult()?this.OnGetAppsResponse(u):console.error("Error when calling CommunityService.GetApps: EResult="+u.GetEResult()+", AppIDs:",l),[3,3];case 5:return 0==--this.m_cAppInfoRequestsInFlight&&0==this.m_setPendingAppInfo.size&&(this.m_fnCallbackOnAppInfoLoaded.Dispatch(),this.m_fnCallbackOnAppInfoLoaded.ClearAllCallbacks()),[2]}}))}))},e.prototype.OnGetAppsResponse=function(e){for(var t=[],n=0,o=e.Body().apps();n<o.length;n++){var r=o[n],i=this.m_mapAppInfo.get(r.appid());Object(h.a)(i,"Got AppInfo response for unrequested AppID: "+r.appid()),i&&((i=new s.a(r.appid())).DeserializeFromMessage(r),this.m_mapAppInfo.set(r.appid(),i),t.push(i))}this.SaveAppInfoBatchToLocalCache(t)},e.prototype.OnAppOverviewChange=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t],r=new s.a(o.appid());r.DeserializeFromAppOverview(o),this.m_mapAppInfo.set(o.appid(),r)}},e.prototype.EnsureAppInfoForAppIDs=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.e)(this,(function(o){return t=!1,e.forEach((function(e){var o=n.m_mapAppInfo.get(e);o?o.is_valid||(t=!0):(o=new s.a(e),n.m_mapAppInfo.set(e,o),n.QueueAppInfoRequest(e),t=!0)})),t&&void 0!==this.m_PendingAppInfoPromise?[2,this.m_PendingAppInfoPromise]:[2,Promise.resolve()]}))}))},e.prototype.SetCacheStorage=function(e){this.m_CacheStorage=e},e.prototype.GetCacheKeyForAppID=function(e){return"APPINFO_"+e},e.prototype.LoadAppInfoBatchFromLocalCache=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Object(o.e)(this,(function(c){switch(c.label){case 0:return this.m_CacheStorage?(console.log("Loading batch of App Info from Local Cache: ",e),t=new Date((new Date).getTime()-12096e5),n=function(e){return Object(o.b)(a,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,this.m_CacheStorage.GetObject(this.GetCacheKeyForAppID(e))];case 1:return(n=o.sent())?(r=this.m_mapAppInfo.get(e),Object(h.a)(r,"Didn't find AppInfo in our map when loading from cache but it should've been there?"),r?((r=new s.a(e)).DeserializeFromCacheObject(n),r.is_initialized?(this.m_mapAppInfo.set(e,r),r.time_updated_from_server<t?[2,e]:[2,null]):(console.warn("Failed to deserialize cached App Info: ",e,n),[2,e])):[2,e]):[2,e]}}))}))},r=e.map((function(e){return n(e)})),[4,Promise.all(r)]):[2,e];case 1:return i=c.sent(),[2,i.filter((function(e){return null!==e}))]}}))}))},e.prototype.SaveAppInfoBatchToLocalCache=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){if(!this.m_CacheStorage)return[2];for(console.log("Saving batch of App Info to Local Cache: ",e.map((function(e){return e.appid}))),t=0,n=e;t<n.length;t++)r=n[t],(i=r.SerializeToCacheObject())&&this.m_CacheStorage.StoreObject(this.GetCacheKeyForAppID(r.appid),i);return[2]}))}))},e.prototype.Localize=function(e,t,n){var o=this.GetRichPresenceLoc(e);return o?o.Localize(t,n):1!=c.c.EUNIVERSE?(console.log("Unable to find app localization information for app "+e+" token "+t+", this may not have had a chance to load yet"),t):""},e.prototype.GetRichPresenceLoc=function(e){if(this.m_mapRichPresenceLoc.has(e.toString())){var t=this.m_mapRichPresenceLoc.get(e.toString());return t.m_nLastUpdated+6e4*s.b<Date.now()&&this.QueueRichPresenceLocRequest(t),t}var n=new l(e);return this.m_mapRichPresenceLoc.set(e.toString(),n),this.QueueRichPresenceLocRequest(n),n},e.prototype.GetRichPresenceLocAsync=function(e){var t=this.GetRichPresenceLoc(e);return t.m_nLastUpdated?Promise.resolve(t):t.m_fetching},e.prototype.OnRichPresenceLocUpdate=function(e,t){e.m_nLastUpdated=Date.now();for(var n=0,o=t;n<o.length;n++){var r=o[n],i=r.language(),a=e.m_mapLanguages.get(i);a?a.clear():(e.m_mapLanguages.set(i,new Map),a=e.m_mapLanguages.get(i));for(var s=0,c=r.tokens();s<c.length;s++){var l=c[s];a.set(l.name().toLowerCase(),l.value())}}},e.prototype.QueueRichPresenceLocRequest=function(e){var t=this;return e.m_fetching||(e.m_fetching=this.m_CMInterface.WaitUntilLoggedOn().then((function(){var n=a.b.Init(d.a);return n.Body().set_appid(e.GetAppID()),n.Body().set_language(c.c.LANGUAGE),d.g.GetAppRichPresenceLocalization(t.m_CMInterface.GetServiceTransport(),n)})).then((function(n){return e.m_fetching=null,1!=n.GetEResult()?Promise.reject():(t.OnRichPresenceLocUpdate(e,n.Body().token_lists()),Promise.resolve(e))})),e.m_fetching.catch((function(){e.m_fetching=null}))),e.m_fetching},Object(o.c)([r.k],e.prototype,"OnGetAppsResponse",null),Object(o.c)([r.k],e.prototype,"OnRichPresenceLocUpdate",null),e}())},Oefq:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return o}));var o,r=n("mrSG"),i=n("tkkQ"),a=n("3zHc"),s=n("rsEv"),c=n("LAqV"),l=n("2vnA"),u=n("hEDq"),p=n("UqDm"),m=n("XaMz"),d=n("oh5H"),h=n("1VtQ"),f=function(){function e(e){this.m_bRestoredPopupState=!1,this.m_vecShowGroupsAfterRestorePopup=[],this.m_iLastChatPopupID=0,this.m_mapChatBrowserContexts=new Map,this.m_bSuppressBrowserContextBroadcasting=!1,this.m_bParentalLocked=void 0,this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,this.m_bShuttingDown=!1,this.m_bTheaterMode=!1,this.m_mapFriendChatBroadcastVisible=new Map,this.m_nTabActivationCount=0,this.m_bShowWinterSaleUI=!1,this.m_chatStore=e}return e.prototype.GetRootChatPerContextData=function(){return this.GetPerContextChatData(c.a)},e.prototype.Init=function(){var e=this;c.f.AddPopupManagerShutdownCallback((function(){e.SerializePopupState(),e.m_bShuttingDown=!0})),Object(l.l)((function(){var t=c.f.ParentalStore.BIsFriendsBlocked();e.OnFriendsParentalLockChanged(t)})),this.StartWinterSaleCountdown()},e.prototype.OnFriendsParentalLockChanged=function(e){!1===this.m_bParentalLocked&&e?(this.SerializePopupState(!0),this.m_mapChatBrowserContexts.forEach((function(e){e.CloseAllPopups()})),this.m_bRestoredPopupState=!1):!0!==this.m_bParentalLocked||e||this.RestorePopupState(),this.m_bParentalLocked=e},e.prototype.ShowFriendChatDialog=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var r=this.m_chatStore.GetFriendChat(t);return n&&r&&this.ShowAndOrActivateChat(e,r,o),r},e.prototype.ShowFriendChatDialogWhenReady=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.ShowFriendChatDialog(e,t,n,o)},e.prototype.ShowFriendChatDialogAndStartVoice=function(e,t){var n=this.ShowFriendChatDialog(e,t,!0,!0);return n.BVoiceActive()||n.ToggleVoiceChat(),n},e.prototype.ShowAndOrActivateChat=function(e,t,n){if(t instanceof s.a){var o=this.m_chatStore.GetChatRoomGroup(t.GetParentGroupID());if(!o)return void Object(m.a)(!1,"Can't find group for chat room ");var r=this.ShowAndOrActivateChatRoomGroup(e,o,n);r&&r.SelectChat(t.GetRoomID())}else this.ShowAndOrActivateTabByID(e,t.unique_id,n)},e.prototype.ShowAndOrActivateChatForTabset=function(e,t,n){var o=e.GetTabForChat(t);o||this.CreateNewTabFromUniqueID(e,t.unique_id,!1),n&&e.ActivateTab(o)},e.prototype.IsChatRoomGroupActive=function(e,t){var n=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(n,t.unique_id);return!!o&&o.tabSet.activeTab==o.tab},e.prototype.SetTheaterMode=function(e){this.m_bTheaterMode=e},e.prototype.GetTheaterMode=function(){return this.m_bTheaterMode},e.prototype.SetFriendBroadcastVisible=function(e,t){this.m_mapFriendChatBroadcastVisible.set(e,t)},e.prototype.IsFriendBroadcastVisible=function(e){return this.m_mapFriendChatBroadcastVisible.get(e)},e.prototype.ShowAndOrActivateChatRoomGroup=function(e,t,n){return t.BIsCurrentUserAMember()?this.ShowAndOrActivateTabByID(e,t.unique_id,n):(console.log("Failed to activate",t,"- user is not a member."),null)},e.prototype.ShowAndOrActivateChatRoomGroupWhenReady=function(e,t,n){this.ShowAndOrActivateChatRoomGroup(e,t,n)},e.prototype.ShowUnackedGroup=function(e){this.m_bRestoredPopupState?this.ShowAndOrActivateChatRoomGroup(c.a,e,!1):this.m_vecShowGroupsAfterRestorePopup.push(e)},e.prototype.ShowOrActivateBroadcast=function(e,t,n){var o="br"+t;return this.ShowAndOrActivateTabByID(e,o,n)},e.prototype.CloseTabByID=function(e,t){var n=this;t?this.CloseTabByIDInContext(t,e):this.m_mapChatBrowserContexts.forEach((function(t){n.CloseTabByIDInContext(t.browser_context,e)}))},e.prototype.ReplaceFriendChatWithGroup=function(e,t,n){var o=this.GetPerContextChatData(e),r=this.GetTabSetByUniqueID(o,n.unique_id);r||(this.ShowAndOrActivateChatRoomGroup(e,n,!0),r=this.GetTabSetByUniqueID(o,n.unique_id)),Object(m.a)(r,"Failed to find group tab");var i=this.GetTabSetByUniqueID(o,t.chat.unique_id);if(i){var a=r.tab,s=i.tabSet;r.tabSet!=s&&(r.tabSet.RemoveTab(a),s.AddTab(a)),s.MoveTabAfter(a,t),this.CloseTab(e,t),this.ShowAndOrActivateChatRoomGroup(e,n,!0)}},e.prototype.ForEachTabSet=function(e,t){e.IsFriendsListSingleWindow()&&e.default_tabset.tabCount>0&&t(e.default_tabset);for(var n=0,o=Array.from(e.popup_list);n<o.length;n++){t(o[n].tab_set)}},e.prototype.CloseTab=function(e,t,n){void 0===n&&(n=!1);var r=this.GetPerContextChatData(e);this.ForEachTabSet(r,(function(o){o.BHasTab(t)&&(n||o.RemoveTab(t),t.IsVoiceActive()&&c.f.ShowCloseActiveVoiceConfirmation(e,r.GetPopupForTabSet(o)))})),this.BroadcastCloseTabToAllBrowserContexts(e,t.GetUniqueID()),t.OnTabClosed(),r.IsFriendsListSingleWindow()&&0==r.default_tabset.tabCount&&(r.responsive_window_state.SetActiveView(o.FriendsList),this.SetTheaterMode(!1),r.SetFriendsListCollapsed(!1)),c.f.UIStore.SerializePopupState()},e.prototype.GetResponsiveWindowState=function(e){return this.GetPerContextChatData(e).responsive_window_state},e.prototype.CloseTabByIDInContext=function(e,t){var n=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(n,t);o&&(o.tabSet.RemoveTab(o.tab),o.tab.OnTabClosed(),this.BroadcastCloseTabToAllBrowserContexts(e,t))},e.prototype.ShowAndOrActivateTabByID=function(e,t,n){void 0===n&&(n=!0);var r,i=this.GetPerContextChatData(e),s=this.GetTabSetByUniqueID(i,t);if(s)n&&s.tabSet.ActivateTab(s.tab),r=s.tab;else{var l=c.f.SettingsStore.BAlwaysShowChatsInNewWindow();if(!i.BUsePopups()||!l&&i.default_tabset.is_popup_active)r=this.CreateNewTabFromUniqueID(i.default_tabset,t,n);else{var u=void 0;if(u=l&&0!=i.default_tabset.tabCount?new a.a(e):i.default_tabset,!(r=this.CreateNewTabFromUniqueID(u,t,n)))return null;var p=u==i.default_tabset;if(p&&i.IsFriendsListSingleWindow())c.f.ShowPopupFriendsList(e,!n,n);else if(!p||!i.IsFriendsListSingleWindow()&&!u.is_popup_active){var m=c.f.CreateChatPopup(e,this.GetNextChatPopupID(),u,void 0,void 0,!n);m.Show(n),i.AddPopup(u,m),this.SerializePopupState()}}}return r&&n&&i.responsive_window_state.SetActiveView(o.Chat),c.f.UIStore.SerializePopupState(),n&&this.m_nTabActivationCount++,r},e.prototype.GetTabSetByUniqueID=function(e,t){if(!e)return null;var n=e.GetTabSetForId(t);return n?{tabSet:n,tab:n.GetTabByUniqueID(t)}:null},e.prototype.BIsTabSetActive=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetActive(e)},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetVisible(e)},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetFocused(e)},e.prototype.GetAppContainerForChat=function(e){var t=this.GetRootChatPerContextData(),n=null;if(e instanceof s.a){var o=this.m_chatStore.GetChatRoomGroup(e.GetParentGroupID());o&&(n=this.GetTabSetByUniqueID(t,o.unique_id))}else n=this.GetTabSetByUniqueID(t,e.unique_id);if(!n||!n.tabSet)return null;var r=t.GetPopupForTabSet(n.tabSet);return r?r.popup?r.popup.container:null:t.IsTabSetInFriendListWindow(n.tabSet)?t.friends_list_window:null},e.prototype.FlashChatWindow=function(e,t){var n=this.GetAppContainerForChat(e);n&&!n.BIsClosed()&&n.FlashWindow(t)},e.prototype.IsChatWindowMinimized=function(e){var t=this.GetAppContainerForChat(e);return!t||t.BIsClosed()?Promise.resolve(!1):t.IsMinimized()},e.prototype.GetPerContextChatData=function(e){Object(m.a)(c.f.ready_to_render||this.m_bRestoringPopups,"GetPerContextChatData called before ready",e);var t=this.m_mapChatBrowserContexts.get(e.m_unPID);if(!t){var n=c.f.BIsValidBrowserContext(e);t=new b(e),n&&this.m_mapChatBrowserContexts.set(e.m_unPID,t)}return t},e.prototype.GetAllBrowserContexts=function(){var e=[];return this.m_mapChatBrowserContexts.forEach((function(t){return e.push(t.browser_context)})),e},e.prototype.GetDefaultTabSetForContext=function(e){return this.GetPerContextChatData(e).default_tabset},e.prototype.OnOverlayBrowserCreated=function(e,t,n){var o=this,r=this.GetPerContextChatData(e);if(r){r.SetScreenInfo(t,n),r.SetFriendsListSingleWindowMode(c.f.SettingsStore.BSingleWindowModeEnabled());var i=this.GetRootChatPerContextData();i&&(r.IsFriendsListSingleWindow()||this.ForEachTabSet(i,(function(e){var t=new a.a(r.browser_context);e.tabs.forEach((function(n){var r=e.activeTab==n;o.CreateNewTabFromUniqueID(t,n.GetUniqueID(),r)}));var n=c.f.CreateChatPopup(r.browser_context,o.GetNextChatPopupID(),t,void 0,void 0,!1);n.Show(!1),r.AddPopup(t,n)})))}},e.prototype.OnOverlayBrowserChanged=function(e,t,n){var o=this.GetPerContextChatData(e);o&&o.SetScreenInfo(t,n)},e.prototype.OnOverlayBrowserClosed=function(e){var t=this.m_mapChatBrowserContexts.get(e.m_unPID);t&&(Object(m.a)(e.m_nBrowserID==t.browser_context.m_nBrowserID,"Mismatch found in OnOverlayBrowserClosed"),this.m_mapChatBrowserContexts.delete(e.m_unPID))},e.prototype.SetSuppressBrowserContextBroadcasting=function(e){this.m_bSuppressBrowserContextBroadcasting=e},e.prototype.BroadcastNewTabToAllBrowserContexts=function(e,t){var n=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach((function(o){if(!Object(c.b)(o.browser_context,e)){var r=o.browser_context!=c.a;n.ShowAndOrActivateTabByID(o.browser_context,t,r)}})),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.BroadcastCloseTabToAllBrowserContexts=function(e,t){if(!this.m_bSuppressBrowserContextBroadcasting)if(Object(c.b)(e,c.a))this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t);else{var n=this.m_mapChatBrowserContexts.get(e.m_unPID);n&&Object(c.b)(e,n.browser_context)&&this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t)}},e.prototype.BroadcastCloseTabToAllBrowserContexts_Internal=function(e,t){var n=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach((function(o){Object(c.b)(o.browser_context,e)||n.CloseTabByIDInContext(o.browser_context,t)})),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.CreateNewTabFromUniqueID=function(e,t,n,o){void 0===o&&(o=!1);var r=c.f.CreateNewTabFromUniqueID(e,t,this.m_bRestoringPopups,o);return r?(e.AddTab(r),this.BroadcastNewTabToAllBrowserContexts(e.GetBrowserContext(),t),n&&e.ActivateTab(r),r):null},e.prototype.GetNextChatPopupID=function(){return"ChatWindow_"+this.m_iLastChatPopupID++},e.prototype.BIsFriendsListSingleWindow=function(e){var t=this.GetPerContextChatData(e);return!t.BUsePopups()||t.IsFriendsListSingleWindow()},e.prototype.BIsFriendsListCollapsed=function(e){var t=this.GetPerContextChatData(e);return t.IsFriendsListSingleWindow()&&t.IsFriendsListCollapsed()},e.prototype.SetFriendsListCollapsed=function(e,t){this.GetPerContextChatData(e).SetFriendsListCollapsed(t)},e.prototype.ConvertDefaultTabSetToPopup=function(e){var t=this.GetPerContextChatData(e);if(t.default_tabset.tabCount){var n=t.GetPopupForTabSet(t.default_tabset);return n||((n=c.f.CreateChatPopup(e,this.GetNextChatPopupID(),t.default_tabset,t.cached_popup_window_restore_details,void 0,!1)).Show(!0),t.AddPopup(t.default_tabset,n),this.SerializePopupState(),t.friends_list_window&&(t.friends_list_window.BringToFront(),t.friends_list_window.title=Object(d.d)("#WindowTitle_FriendsList")),n)}return null},e.prototype.ConvertDefaultTabSetToEmbedded=function(e){var t=this.GetPerContextChatData(e),n=t.GetPopupForTabSet(t.default_tabset);n&&(n.popup.GetWindowRestoreDetails().then((function(e){t.SetCachedDefaultPopupDimensions(e)})),t.RemovePopupForTabSet(t.default_tabset),this.SerializePopupState(),n.ClearTabSet(),n.popup.Close())},e.prototype.MergeTabSets=function(e){var t=this.GetPerContextChatData(e);this.ForEachTabSet(t,(function(e){e!==t.default_tabset&&e.tabs.forEach((function(n){e.RemoveTab(n),t.default_tabset.AddTab(n)}))}))},e.prototype.OnTabSetResized=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(e==t.default_tabset&&!t.IsFriendsListSingleWindow()){var n=t.GetPopupForTabSet(e);n&&n.popup.GetWindowRestoreDetails().then((function(e){t.SetCachedDefaultPopupDimensions(e)}))}},e.prototype.CloseTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),n=t.GetPopupForTabSet(e);n&&n.popup.Close(),t.RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.OnTabSetClosed=function(e){this.GetPerContextChatData(e.GetBrowserContext()).RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.FocusTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),n=t.GetPopupForTabSet(e);n&&n.popup&&!n.popup.container.BIsClosed()?n.popup.container.BringToFront():t.IsTabSetInFriendListWindow(e)&&t.IsFriendsListSingleWindow()&&(t.BUsePopups()?c.f.ShowPopupFriendsList(t.browser_context,!1,!0):t.friends_list_window&&t.friends_list_window.BringToFront())},e.prototype.MoveTabToNewPopup=function(e,t,n,o){Object(m.a)(e,"browserContext");var r=this.GetPerContextChatData(e);this.ForEachTabSet(r,(function(e){return e.RemoveTab(t)}));var i=new a.a(e);i.AddTab(t);var s=c.f.CreateChatPopup(e,this.GetNextChatPopupID(),i,o,n,!1);if(s.Show(!0),o){var l=s.popup.GetWindow();try{l.SteamClient.Window.PositionWindowRelative(o,n.left,n.top,n.width,n.height)}catch(e){console.error(e)}}r.AddPopup(i,s),this.SerializePopupState()},e.prototype.SerializePopupState=function(e){if(void 0===e&&(e=!1),this.m_bRestoredPopupState&&c.f.SettingsStore.BReady()&&!this.m_bShuttingDown){var t=this.SerializePopupStateToObject(e);c.f.SettingsStore.StoreObjectInLocalStorage("ChatStorePopupState",t)}},e.prototype.SerializePopupStateToObject=function(e){var t=this.GetPerContextChatData(c.a),n={window_restore_details:t.cached_popup_window_restore_details,defaultTabs:void 0,popupTabs:void 0,bFriendsListVisible:!1,always_restore:e,bFriendsListCollapsed:t.IsFriendsListCollapsed()};t.default_tabset&&t.default_tabset.tabCount>0&&(n.defaultTabs=t.default_tabset.Serialize());for(var o=[],r=0,i=Array.from(t.popup_list);r<i.length;r++){var a=i[r];a.tab_set!=t.default_tabset&&o.push(a.tab_set.Serialize())}return o.length>0&&(n.popupTabs=o),n.bFriendsListVisible=!!t.friends_list_window,n},e.prototype.BRestorePopups=function(){return c.f.SettingsStore.BAlwaysShowChatsInNewWindow()},e.prototype.BRestoreOpenChats=function(){return c.f.SettingsStore.FriendsSettings.bRememberOpenChats},e.prototype.DeserializeIntoTabSet=function(e,t){if(t.tabs&&Array.isArray(t.tabs))for(var n=0,o=t.tabs;n<o.length;n++){var r=o[n];r.startsWith("br")||this.CreateNewTabFromUniqueID(e,r,r==t.active_tab,!0)}},e.prototype.SetStateToRestoreFrom=function(e){this.m_stateToRestoreFrom=e},e.prototype.RestorePopupState=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return Object(m.a)(!this.m_bRestoredPopupState,"Second restore popup state"),Object(m.a)(!this.m_bRestoringPopups,"RestorePopupState called while already restoring"),c.f.ParentalStore.BIsFriendsBlocked()?[2]:(this.m_bRestoringPopups=!0,this.m_stateToRestoreFrom?(this.RestoreFromStateObject(this.m_stateToRestoreFrom,!1),this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,[2]):[4,c.f.SettingsStore.GetObjectFromLocalStorageWhenReady("ChatStorePopupState")]);case 1:return e=n.sent(),t=!1,"undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.BSuppressPopupsInRestore?[4,SteamClient.WebChat.BSuppressPopupsInRestore()]:[3,3];case 2:t=n.sent(),n.label=3;case 3:return this.RestoreFromStateObject(e,t),this.m_bRestoringPopups=!1,[2]}}))}))},e.prototype.RestoreFromStateObject=function(e,t){var n=this.GetPerContextChatData(c.a);if(Object(m.a)(n.BIsEmpty(),"Restoring to non-empty context",n),n.BIsEmpty()){if(e.window_restore_details&&n.SetCachedDefaultPopupDimensions(e.window_restore_details),void 0!==e.bFriendsListSingleWindow&&c.f.SettingsStore.BackfillSingleWindowMode(e.bFriendsListSingleWindow),n.SetFriendsListSingleWindowMode(c.f.SettingsStore.BSingleWindowModeEnabled()),n.SetFriendsListCollapsed(!!e.bFriendsListCollapsed),!t&&(e.always_restore||this.BRestoreOpenChats())){if(e.defaultTabs){var o=n.default_tabset;if(this.DeserializeIntoTabSet(o,e.defaultTabs),o.tabCount>0&&!n.IsFriendsListSingleWindow()){var r=c.f.CreateChatPopup(c.f.GetDefaultBrowserContext(),this.GetNextChatPopupID(),o,void 0,void 0,!1);n.AddPopup(o,r),r.Show(!1)}}if(e.popupTabs)for(var i=0,s=e.popupTabs;i<s.length;i++){var l=s[i];o=new a.a(c.a);if(this.DeserializeIntoTabSet(o,l),o.tabCount>0){r=c.f.CreateChatPopup(c.f.GetDefaultBrowserContext(),this.GetNextChatPopupID(),o,void 0,void 0,!1);n.AddPopup(o,r),r.Show(!1)}}}if(!t){var u=!e||void 0===e.bFriendsListVisible||e.bFriendsListVisible;n.BUsePopups()&&c.f.ShowPopupFriendsListAtStartup(u);for(var p=0,d=this.m_vecShowGroupsAfterRestorePopup;p<d.length;p++){var h=d[p];this.ShowAndOrActivateChatRoomGroup(c.a,h,!1)}}this.m_vecShowGroupsAfterRestorePopup=[],this.m_bRestoredPopupState=!0,this.m_chatStore.OnRestorePopupsComplete()}},e.prototype.RestorePopupStateForMobile=function(){this.m_bRestoringPopups=!0,this.GetPerContextChatData(c.a).SetFriendsListSingleWindowMode(!0),this.m_bRestoringPopups=!1},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this.GetPerContextChatData(c.a);e.ui_state().set_friends_list_docked(t.IsFriendsListSingleWindow()),e.ui_state().set_friends_list_visible(t.friends_list_window&&!t.friends_list_window.BIsClosed()),e.ui_state().set_chat_popups_opened(Array.from(t.popup_list).length),e.ui_state().set_friends_list_collapsed(t.IsFriendsListCollapsed());var n=0,o=0;n+=p.b(t.default_tabset.tabs,(function(e){return e.IsChatRoom()})),o+=p.b(t.default_tabset.tabs,(function(e){return e.IsFriendChat()}));for(var r=0,i=Array.from(t.popup_list);r<i.length;r++){var a=i[r];a.tab_set!=t.default_tabset&&(n+=p.b(a.tab_set.tabs,(function(e){return e.IsChatRoom()})),o+=p.b(a.tab_set.tabs,(function(e){return e.IsFriendChat()})))}e.ui_state().set_group_chat_tabs_opened(n),e.ui_state().set_friend_chat_tabs_opened(o)},Object.defineProperty(e.prototype,"show_winter_sale_ui",{get:function(){return this.m_bShowWinterSaleUI},enumerable:!1,configurable:!0}),e.prototype.StartWinterSaleCountdown=function(){var e=this;Date.now()>=15767784e5?this.m_bShowWinterSaleUI=!0:setTimeout((function(){return e.StartWinterSaleCountdown()}),15767784e5-Date.now())},Object(r.c)([l.B],e.prototype,"m_bTheaterMode",void 0),Object(r.c)([l.B],e.prototype,"m_mapFriendChatBroadcastVisible",void 0),Object(r.c)([l.B],e.prototype,"m_nTabActivationCount",void 0),Object(r.c)([l.B],e.prototype,"m_bShowWinterSaleUI",void 0),Object(r.c)([l.k],e.prototype,"OnFriendsParentalLockChanged",null),Object(r.c)([c.g],e.prototype,"ShowFriendChatDialogWhenReady",null),Object(r.c)([c.g],e.prototype,"ShowAndOrActivateChatRoomGroupWhenReady",null),Object(r.c)([h.a],e.prototype,"SerializePopupState",null),e}(),_=function(){function e(e,t){this.m_bShown=!1,this.m_popup=e,this.m_chatPopup=t}return e.prototype.Show=function(e){this.m_popup.Show(e),this.m_bShown||(this.m_bShown=!0)},Object.defineProperty(e.prototype,"popup",{get:function(){return this.m_popup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tab_set",{get:function(){return this.m_chatPopup.tab_set},enumerable:!1,configurable:!0}),e.prototype.ClearTabSet=function(){this.m_chatPopup.ClearTabSet()},e.prototype.IsSameBrowserContext=function(e){var t=this.m_popup.GetBrowserContext()||c.a;return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},e}();!function(e){e[e.FriendsList=0]="FriendsList",e[e.Chat=1]="Chat"}(o||(o={}));var g=function(){function e(){this.m_eActiveView=o.FriendsList}return e.prototype.GetActiveView=function(){return this.m_eActiveView},e.prototype.SetActiveView=function(e){this.m_eActiveView=e},Object(r.c)([l.B],e.prototype,"m_eActiveView",void 0),e}(),b=function(){function e(e){this.m_browserContext=e,this.m_DefaultTabSet=new a.a(e),this.m_FriendsListWindow=void 0,this.m_PopupWindowRestoreDetails=void 0,this.m_mapTabSetToPopup=new Map,this.m_ResponsiveWindowState=new g,this.SetFriendsListSingleWindowMode(!1),this.m_bFriendsListCollapsed=i.a.STEAM_TV}return e.prototype.BIsEmpty=function(){return 0==this.m_DefaultTabSet.tabCount&&(!i.a.IN_CLIENT||null==this.m_FriendsListWindow)&&0==this.m_mapTabSetToPopup.size},e.prototype.BUsePopups=function(){return i.a.USE_POPUPS&&!Object(u.c)(this.m_browserContext.m_eBrowserType)},e.prototype.IsFriendsListSingleWindow=function(){return this.m_bFriendsListSingleWindow},e.prototype.SetFriendsListSingleWindowMode=function(e){this.BUsePopups()?this.m_bFriendsListSingleWindow=e:this.m_bFriendsListSingleWindow=!0},e.prototype.IsFriendsListCollapsed=function(){return this.m_bFriendsListCollapsed},e.prototype.SetFriendsListCollapsed=function(e){this.m_bFriendsListCollapsed=e},Object.defineProperty(e.prototype,"browser_context",{get:function(){return this.m_browserContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"default_tabset",{get:function(){return Object(m.a)(this.m_DefaultTabSet,"Context has no default chat target"),this.m_DefaultTabSet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_window",{get:function(){return this.m_FriendsListWindow},enumerable:!1,configurable:!0}),e.prototype.SetFriendsListWindow=function(e){this.m_FriendsListWindow=e||void 0,!e&&this.IsFriendsListSingleWindow()&&this.m_DefaultTabSet.CloseAllTabs()},Object.defineProperty(e.prototype,"popup_list",{get:function(){return this.m_mapTabSetToPopup.values()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responsive_window_state",{get:function(){return this.m_ResponsiveWindowState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cached_popup_window_restore_details",{get:function(){return this.m_PopupWindowRestoreDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen_info",{get:function(){return this.m_ScreenInfo},enumerable:!1,configurable:!0}),e.prototype.SetScreenInfo=function(e,t){this.m_ScreenInfo={width:e,height:t}},e.prototype.SetCachedDefaultPopupDimensions=function(e){this.m_PopupWindowRestoreDetails=e},e.prototype.GetTabSetForId=function(e){if(this.m_DefaultTabSet.GetTabByUniqueID(e))return this.m_DefaultTabSet;for(var t=0,n=Array.from(this.m_mapTabSetToPopup.keys());t<n.length;t++){var o=n[t];if(o.GetTabByUniqueID(e))return o}return null},e.prototype.RemovePopupForTabSet=function(e){this.m_mapTabSetToPopup.delete(e)},e.prototype.AddPopup=function(e,t){Object(m.a)(!this.m_mapTabSetToPopup.has(e),"Added popup for tabset twice"),this.m_mapTabSetToPopup.set(e,t)},e.prototype.GetPopupForTabSet=function(e){return this.m_mapTabSetToPopup.get(e)},e.prototype.IsTabSetInFriendListWindow=function(e){return e==this.default_tabset&&this.IsFriendsListSingleWindow()},e.prototype.BIsTabSetActive=function(e){var t,n=this.GetPopupForTabSet(e);return(null===(t=null==n?void 0:n.popup)||void 0===t?void 0:t.container)?!n.popup.container.BIsClosed():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&!this.friends_list_window.BIsClosed()},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsVisible():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsVisible()},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsFocused():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsFocused()},e.prototype.CloseAllPopups=function(){for(var e=0,t=Array.from(this.popup_list);e<t.length;e++){t[e].popup.Close()}this.m_mapTabSetToPopup.clear(),this.friends_list_window&&this.m_FriendsListWindow.Close(),this.m_DefaultTabSet=new a.a(this.m_browserContext)},Object(r.c)([l.B],e.prototype,"m_DefaultTabSet",void 0),Object(r.c)([l.B],e.prototype,"m_bFriendsListSingleWindow",void 0),Object(r.c)([l.B],e.prototype,"m_bFriendsListCollapsed",void 0),e}()},PJQb:function(e,t,n){e.exports={Container:"pagedcontent_Container_3P-nO",Nav:"pagedcontent_Nav_2NEs2",NavTitle:"pagedcontent_NavTitle_2u4uE",NavItems:"pagedcontent_NavItems_ay0LT",NavItem:"pagedcontent_NavItem_V9sAC",Active:"pagedcontent_Active_310MQ",Content:"pagedcontent_Content_7oxxA"}},Q8iO:function(e,t,n){e.exports={confettiDurationMs:"7000s/s",goldfettiDurationMs:"7000s/s",goldfettiColorsNum:"3",goldfettiEmojiNum:"4",crackerDurationMs:"300s/s",balloonsDurationMs:"4000s/s",balloonsDurationS:"4s/s",balloonsDurationJitterS:"1s/s",balloonsDurationMaxMs:"5000s/s",snowballDurationMs:"3010s/s",snowballSpeed:"1s","animation-container":"chatroomeffects_animation-container_1PTrD",Snowflake:"chatroomeffects_Snowflake_aoFWZ","Snowflake-0":"chatroomeffects_Snowflake-0_2O8fB","snowflake-0":"chatroomeffects_snowflake-0_30tPn","Snowflake-1":"chatroomeffects_Snowflake-1_1V9Hw","snowflake-1":"chatroomeffects_snowflake-1_3m9UI","Snowflake-2":"chatroomeffects_Snowflake-2_Zf0dx","snowflake-2":"chatroomeffects_snowflake-2_1R-Nx","Snowflake-3":"chatroomeffects_Snowflake-3_2pvie","snowflake-3":"chatroomeffects_snowflake-3_1yqJU","Snowflake-4":"chatroomeffects_Snowflake-4_3-k2Z","snowflake-4":"chatroomeffects_snowflake-4_3I-Zz","Snowflake-5":"chatroomeffects_Snowflake-5_26vNm","snowflake-5":"chatroomeffects_snowflake-5_2zXei","Snowflake-6":"chatroomeffects_Snowflake-6_hXlKB","snowflake-6":"chatroomeffects_snowflake-6_24IuH","Snowflake-7":"chatroomeffects_Snowflake-7_1qo33","snowflake-7":"chatroomeffects_snowflake-7_1lDP2","Snowflake-8":"chatroomeffects_Snowflake-8_2tBVf","snowflake-8":"chatroomeffects_snowflake-8_2bssC","Snowflake-9":"chatroomeffects_Snowflake-9_2FSmF","snowflake-9":"chatroomeffects_snowflake-9_3aKmJ","Snowflake-10":"chatroomeffects_Snowflake-10_1-IwG","snowflake-10":"chatroomeffects_snowflake-10_2uX53","Snowflake-11":"chatroomeffects_Snowflake-11_3QUh4","snowflake-11":"chatroomeffects_snowflake-11_XehvX","Snowflake-12":"chatroomeffects_Snowflake-12_88fjm","snowflake-12":"chatroomeffects_snowflake-12_Bm1M7","Snowflake-13":"chatroomeffects_Snowflake-13_gNVZT","snowflake-13":"chatroomeffects_snowflake-13_3D5LS","Snowflake-14":"chatroomeffects_Snowflake-14_15TAT","snowflake-14":"chatroomeffects_snowflake-14_35TG1","Snowflake-15":"chatroomeffects_Snowflake-15_1WPlw","snowflake-15":"chatroomeffects_snowflake-15_29ZkS","Snowflake-16":"chatroomeffects_Snowflake-16_2yae0","snowflake-16":"chatroomeffects_snowflake-16_13TgF","Snowflake-17":"chatroomeffects_Snowflake-17_28v5b","snowflake-17":"chatroomeffects_snowflake-17_peNL_","Snowflake-18":"chatroomeffects_Snowflake-18_3by0S","snowflake-18":"chatroomeffects_snowflake-18_2NR9A","Snowflake-19":"chatroomeffects_Snowflake-19_I6DR9","snowflake-19":"chatroomeffects_snowflake-19_2-HH_","Snowflake-20":"chatroomeffects_Snowflake-20_1YTf-","snowflake-20":"chatroomeffects_snowflake-20_xzmzB",confetti:"chatroomeffects_confetti_xBcJ8","confetti-0":"chatroomeffects_confetti-0_2F-oM","drop-0":"chatroomeffects_drop-0_1W9pG","confetti-1":"chatroomeffects_confetti-1_3Fmhc","drop-1":"chatroomeffects_drop-1_3XOOX","confetti-2":"chatroomeffects_confetti-2_1_1xd","drop-2":"chatroomeffects_drop-2_1Dvco","confetti-3":"chatroomeffects_confetti-3_10_aJ","drop-3":"chatroomeffects_drop-3_1rzLI","confetti-4":"chatroomeffects_confetti-4_29B0B","drop-4":"chatroomeffects_drop-4_2Cr4h","confetti-5":"chatroomeffects_confetti-5_bEirD","drop-5":"chatroomeffects_drop-5_1N6Aj","confetti-6":"chatroomeffects_confetti-6_XSnHt","drop-6":"chatroomeffects_drop-6_Kq9Zc","confetti-7":"chatroomeffects_confetti-7_1DuD_","drop-7":"chatroomeffects_drop-7_1LxHl","confetti-8":"chatroomeffects_confetti-8_3Cr1a","drop-8":"chatroomeffects_drop-8_2ngUs","confetti-9":"chatroomeffects_confetti-9_FgZVZ","drop-9":"chatroomeffects_drop-9_1TgvT","confetti-10":"chatroomeffects_confetti-10_3yAHZ","drop-10":"chatroomeffects_drop-10_nzMAv","confetti-11":"chatroomeffects_confetti-11_29QZR","drop-11":"chatroomeffects_drop-11_20tsQ","confetti-12":"chatroomeffects_confetti-12_1CisS","drop-12":"chatroomeffects_drop-12_1e8Hg","confetti-13":"chatroomeffects_confetti-13_3mYsu","drop-13":"chatroomeffects_drop-13_2NyAt","confetti-14":"chatroomeffects_confetti-14_1Irfx","drop-14":"chatroomeffects_drop-14_1WaXA","confetti-15":"chatroomeffects_confetti-15_3A1TP","drop-15":"chatroomeffects_drop-15_MvVcE","confetti-16":"chatroomeffects_confetti-16_2knki","drop-16":"chatroomeffects_drop-16_3SXnD","confetti-17":"chatroomeffects_confetti-17_2jbjN","drop-17":"chatroomeffects_drop-17_2Pd0j","confetti-18":"chatroomeffects_confetti-18_1CYGW","drop-18":"chatroomeffects_drop-18_3wODP","confetti-19":"chatroomeffects_confetti-19_2q68o","drop-19":"chatroomeffects_drop-19_2Gwlj","confetti-20":"chatroomeffects_confetti-20_26ULU","drop-20":"chatroomeffects_drop-20_1-T_W","confetti-21":"chatroomeffects_confetti-21_3A3te","drop-21":"chatroomeffects_drop-21_G8MLf","confetti-22":"chatroomeffects_confetti-22_3pQ9h","drop-22":"chatroomeffects_drop-22_2Ehak","confetti-23":"chatroomeffects_confetti-23_3_ehR","drop-23":"chatroomeffects_drop-23_2Sysf","confetti-24":"chatroomeffects_confetti-24_1xw0l","drop-24":"chatroomeffects_drop-24_3m8Uu","confetti-25":"chatroomeffects_confetti-25_2Hjhb","drop-25":"chatroomeffects_drop-25_39w79","confetti-26":"chatroomeffects_confetti-26_3CQ5O","drop-26":"chatroomeffects_drop-26_7u4KH","confetti-27":"chatroomeffects_confetti-27_1qGrW","drop-27":"chatroomeffects_drop-27_ARiKf","confetti-28":"chatroomeffects_confetti-28_VvrP_","drop-28":"chatroomeffects_drop-28_2r-kr","confetti-29":"chatroomeffects_confetti-29_27yoO","drop-29":"chatroomeffects_drop-29_36ts_","confetti-30":"chatroomeffects_confetti-30_35KJJ","drop-30":"chatroomeffects_drop-30_FSEAN","confetti-31":"chatroomeffects_confetti-31_xfOuc","drop-31":"chatroomeffects_drop-31_117A8","confetti-32":"chatroomeffects_confetti-32_3oB1Q","drop-32":"chatroomeffects_drop-32_3d-5w","confetti-33":"chatroomeffects_confetti-33_2GQ8X","drop-33":"chatroomeffects_drop-33_2McHh","confetti-34":"chatroomeffects_confetti-34_2cxZi","drop-34":"chatroomeffects_drop-34_v5OOo","confetti-35":"chatroomeffects_confetti-35_18Xj3","drop-35":"chatroomeffects_drop-35_2HJ6r","confetti-36":"chatroomeffects_confetti-36_160B4","drop-36":"chatroomeffects_drop-36_1pmmZ","confetti-37":"chatroomeffects_confetti-37_lV1lT","drop-37":"chatroomeffects_drop-37_9BWaH","confetti-38":"chatroomeffects_confetti-38_10VGf","drop-38":"chatroomeffects_drop-38_24S4k","confetti-39":"chatroomeffects_confetti-39_TLnN1","drop-39":"chatroomeffects_drop-39_256KJ","confetti-40":"chatroomeffects_confetti-40_tilKd","drop-40":"chatroomeffects_drop-40_2Ni2Z","confetti-41":"chatroomeffects_confetti-41_2Efi5","drop-41":"chatroomeffects_drop-41_Lsk2P","confetti-42":"chatroomeffects_confetti-42_3bVPd","drop-42":"chatroomeffects_drop-42_22u-9","confetti-43":"chatroomeffects_confetti-43_1IRJJ","drop-43":"chatroomeffects_drop-43_2Hj1F","confetti-44":"chatroomeffects_confetti-44_3yunT","drop-44":"chatroomeffects_drop-44_1KWVx","confetti-45":"chatroomeffects_confetti-45_2ZNp_","drop-45":"chatroomeffects_drop-45_2odi4","confetti-46":"chatroomeffects_confetti-46_1RSJV","drop-46":"chatroomeffects_drop-46_cOJFG","confetti-47":"chatroomeffects_confetti-47_26ps7","drop-47":"chatroomeffects_drop-47_TnJCO","confetti-48":"chatroomeffects_confetti-48_r6QAl","drop-48":"chatroomeffects_drop-48__Kyg4","confetti-49":"chatroomeffects_confetti-49_1UOP6","drop-49":"chatroomeffects_drop-49_d5ECV","confetti-50":"chatroomeffects_confetti-50_1pxIz","drop-50":"chatroomeffects_drop-50__gmkT","confetti-51":"chatroomeffects_confetti-51_1S-2Z","drop-51":"chatroomeffects_drop-51_o0Cab","confetti-52":"chatroomeffects_confetti-52_1X63X","drop-52":"chatroomeffects_drop-52_3RgGH","confetti-53":"chatroomeffects_confetti-53_3_lQV","drop-53":"chatroomeffects_drop-53_3pj6j","confetti-54":"chatroomeffects_confetti-54_8uNQ7","drop-54":"chatroomeffects_drop-54_3O0xH","confetti-55":"chatroomeffects_confetti-55_iDjUQ","drop-55":"chatroomeffects_drop-55_ulKDw","confetti-56":"chatroomeffects_confetti-56_1SWO1","drop-56":"chatroomeffects_drop-56_3TLY-","confetti-57":"chatroomeffects_confetti-57_2L1qw","drop-57":"chatroomeffects_drop-57_2SlUH","confetti-58":"chatroomeffects_confetti-58_2VUcK","drop-58":"chatroomeffects_drop-58_3Sm6B","confetti-59":"chatroomeffects_confetti-59__Lqss","drop-59":"chatroomeffects_drop-59_XLkcN","confetti-60":"chatroomeffects_confetti-60_2JKQ5","drop-60":"chatroomeffects_drop-60_yV0os","confetti-61":"chatroomeffects_confetti-61_3rVuN","drop-61":"chatroomeffects_drop-61__NqSc","confetti-62":"chatroomeffects_confetti-62_2rpoF","drop-62":"chatroomeffects_drop-62_1FDCV","confetti-63":"chatroomeffects_confetti-63_3198h","drop-63":"chatroomeffects_drop-63_1zZ-Y","confetti-64":"chatroomeffects_confetti-64_3OK0y","drop-64":"chatroomeffects_drop-64_lNsSV","confetti-65":"chatroomeffects_confetti-65_VmehB","drop-65":"chatroomeffects_drop-65_1NvQE","confetti-66":"chatroomeffects_confetti-66_3QLBl","drop-66":"chatroomeffects_drop-66_p72jM","confetti-67":"chatroomeffects_confetti-67_3o-7O","drop-67":"chatroomeffects_drop-67_1oTTl","confetti-68":"chatroomeffects_confetti-68_3jyKO","drop-68":"chatroomeffects_drop-68_1_tiE","confetti-69":"chatroomeffects_confetti-69_3kU59","drop-69":"chatroomeffects_drop-69_3phaK","confetti-70":"chatroomeffects_confetti-70_1hU6u","drop-70":"chatroomeffects_drop-70_DNtpd","confetti-71":"chatroomeffects_confetti-71_WsoNj","drop-71":"chatroomeffects_drop-71_Uy1vN","confetti-72":"chatroomeffects_confetti-72_2_6hF","drop-72":"chatroomeffects_drop-72_1rGGz","confetti-73":"chatroomeffects_confetti-73_3JGM4","drop-73":"chatroomeffects_drop-73_3D0xh","confetti-74":"chatroomeffects_confetti-74_TEwzu","drop-74":"chatroomeffects_drop-74_1V64l","confetti-75":"chatroomeffects_confetti-75_3FJ-J","drop-75":"chatroomeffects_drop-75_3TKfF","confetti-76":"chatroomeffects_confetti-76_3O4-7","drop-76":"chatroomeffects_drop-76_pAbUN","confetti-77":"chatroomeffects_confetti-77_36qDl","drop-77":"chatroomeffects_drop-77_3YEWs","confetti-78":"chatroomeffects_confetti-78_2Cduh","drop-78":"chatroomeffects_drop-78_U6rKn","confetti-79":"chatroomeffects_confetti-79_2yo7J","drop-79":"chatroomeffects_drop-79_IlFOy","confetti-80":"chatroomeffects_confetti-80_1qzcm","drop-80":"chatroomeffects_drop-80_lvPWU","confetti-81":"chatroomeffects_confetti-81_1Z0zS","drop-81":"chatroomeffects_drop-81_2Y9tP","confetti-82":"chatroomeffects_confetti-82_1yyK6","drop-82":"chatroomeffects_drop-82_110Dq","confetti-83":"chatroomeffects_confetti-83_uGuyr","drop-83":"chatroomeffects_drop-83_1uGH6","confetti-84":"chatroomeffects_confetti-84_2H7gi","drop-84":"chatroomeffects_drop-84_2E38H","confetti-85":"chatroomeffects_confetti-85_X_KES","drop-85":"chatroomeffects_drop-85_3iBnQ","confetti-86":"chatroomeffects_confetti-86_1pK17","drop-86":"chatroomeffects_drop-86_3vgAf","confetti-87":"chatroomeffects_confetti-87_2YGan","drop-87":"chatroomeffects_drop-87_3-UwQ","confetti-88":"chatroomeffects_confetti-88_QE13h","drop-88":"chatroomeffects_drop-88_L7KWP","confetti-89":"chatroomeffects_confetti-89_3Ifdp","drop-89":"chatroomeffects_drop-89_20o_P","confetti-90":"chatroomeffects_confetti-90_1UuuG","drop-90":"chatroomeffects_drop-90_3Gftj","confetti-91":"chatroomeffects_confetti-91_2gAfr","drop-91":"chatroomeffects_drop-91_30C4q","confetti-92":"chatroomeffects_confetti-92_DP0t2","drop-92":"chatroomeffects_drop-92_faGzG","confetti-93":"chatroomeffects_confetti-93_25s5z","drop-93":"chatroomeffects_drop-93_11JA9","confetti-94":"chatroomeffects_confetti-94_3vlxE","drop-94":"chatroomeffects_drop-94_2QK9y","confetti-95":"chatroomeffects_confetti-95_CxrYj","drop-95":"chatroomeffects_drop-95_3z0ru","confetti-96":"chatroomeffects_confetti-96_ItjuO","drop-96":"chatroomeffects_drop-96_1Kyjs","confetti-97":"chatroomeffects_confetti-97_13B6G","drop-97":"chatroomeffects_drop-97__bMmq","confetti-98":"chatroomeffects_confetti-98_RpTo3","drop-98":"chatroomeffects_drop-98_fvQ8c","confetti-99":"chatroomeffects_confetti-99_3P9qj","drop-99":"chatroomeffects_drop-99_19pOX",cracker:"chatroomeffects_cracker_oaRMS","cracker-left":"chatroomeffects_cracker-left_1fOu2","cracker-right":"chatroomeffects_cracker-right_1yrZw",goldfetti:"chatroomeffects_goldfetti_2N-hZ","goldfetti-fragment":"chatroomeffects_goldfetti-fragment__oU55","goldfetti-color-1":"chatroomeffects_goldfetti-color-1_2v7rd","goldfetti-color-2":"chatroomeffects_goldfetti-color-2_1Xn8e","goldfetti-color-3":"chatroomeffects_goldfetti-color-3_1Otq0","goldfetti-emoji-1":"chatroomeffects_goldfetti-emoji-1_1NsOL","goldfetti-emoji-2":"chatroomeffects_goldfetti-emoji-2_2V-pZ","goldfetti-emoji-3":"chatroomeffects_goldfetti-emoji-3_2i3Rg","goldfetti-emoji-4":"chatroomeffects_goldfetti-emoji-4_3F3Wd",balloons:"chatroomeffects_balloons_2g-SX",lantern_glow:"chatroomeffects_lantern_glow_Gvv_o",snowball_fragment:"chatroomeffects_snowball_fragment_33iZq","snowball-container":"chatroomeffects_snowball-container_3X2Cm",snowball:"chatroomeffects_snowball_3Rfb2",SnowballImage:"chatroomeffects_SnowballImage_3FZFr",SnowballImageCW:"chatroomeffects_SnowballImageCW_qavl3","snowball-rotate-cw":"chatroomeffects_snowball-rotate-cw_2jluI",SnowballImageCCW:"chatroomeffects_SnowballImageCCW_10qMc","snowball-rotate-ccw":"chatroomeffects_snowball-rotate-ccw_1Y7B9","snowball-path":"chatroomeffects_snowball-path_U8ITP","snowball-residue":"chatroomeffects_snowball-residue_3FQ2j","snowball-chunk":"chatroomeffects_snowball-chunk_jpRWi","snowball-chunk-1":"chatroomeffects_snowball-chunk-1_2i2kn","snowball-chunk-2":"chatroomeffects_snowball-chunk-2_320_J","snowball-chunk-3":"chatroomeffects_snowball-chunk-3_2SoU9","snowball-chunk-4":"chatroomeffects_snowball-chunk-4_j-iRi","slide-out-tl":"chatroomeffects_slide-out-tl_2ZyG5","slide-out-tr":"chatroomeffects_slide-out-tr_lpKmJ","slide-out-bottom":"chatroomeffects_slide-out-bottom_2q-wo",pyro:"chatroomeffects_pyro_3L3vU",before:"chatroomeffects_before_1btDM",after:"chatroomeffects_after_3Bch7",bang:"chatroomeffects_bang_KjYNV",gravity:"chatroomeffects_gravity_273Ze",position:"chatroomeffects_position_1yKwq",pyroBodyShake:"chatroomeffects_pyroBodyShake_hWbMH","pyro-body-shake":"chatroomeffects_pyro-body-shake_5Rwz2",pyroBodyShake2:"chatroomeffects_pyroBodyShake2_1ZG2z","pyro-body-shake2":"chatroomeffects_pyro-body-shake2_3puVJ",FireworkPath:"chatroomeffects_FireworkPath_1CKy_","firework-path-animation":"chatroomeffects_firework-path-animation_2mwFy",FireworkContainer:"chatroomeffects_FireworkContainer_1QThW",FireworkPNG:"chatroomeffects_FireworkPNG_30yej",balloon_small_1:"chatroomeffects_balloon_small_1_SWgYi",balloon_move_right:"chatroomeffects_balloon_move_right_1LR6D",balloon_move_left:"chatroomeffects_balloon_move_left_2VfWa",balloon_big_1:"chatroomeffects_balloon_big_1_vpSsn",balloon_big_2:"chatroomeffects_balloon_big_2_3MWqR",balloon_small_2:"chatroomeffects_balloon_small_2_1Jic8",balloon_small_3:"chatroomeffects_balloon_small_3_3V1sE","snowball-path-1":"chatroomeffects_snowball-path-1_15h1p","snowball-path-2":"chatroomeffects_snowball-path-2_1smZg","snowball-path-3":"chatroomeffects_snowball-path-3_30WlX","snowball-path-4":"chatroomeffects_snowball-path-4_2q7hD","snowball-path-5":"chatroomeffects_snowball-path-5_bC2vt","snowball-path-6":"chatroomeffects_snowball-path-6_3QbxJ",fireworkBigX:"chatroomeffects_fireworkBigX_2uUzq",fireworkBigY:"chatroomeffects_fireworkBigY_b5rq3",fireworkSmallX:"chatroomeffects_fireworkSmallX_1rFga",fireworkSmallY:"chatroomeffects_fireworkSmallY_2iqGt",fireworkLongX:"chatroomeffects_fireworkLongX_inXay",fireworkLongY:"chatroomeffects_fireworkLongY_aUUPZ"}},QAot:function(e,t,n){"use strict";var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("tY0L"),s=n("Hk8Z"),c=n("dXEH"),l=n.n(c),u=n("QHER"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.performSearch=function(e){return this.props.emoticonStore.SearchEmoticons(e,10,!1)},t.prototype.getSelection=function(e){return e.name},t.prototype.getKey=function(e){return e.name},t.prototype.renderMatch=function(e){return i.a.createElement("div",{className:Object(u.a)(l.a.EmoticonSuggestion,e.recent?"Recent":"")},i.a.createElement("div",{className:l.a.Emoticon},i.a.createElement(a.b,{emoticon:e.name,emoticonHoverStore:this.props.emoticonHoverStore}),e.new&&i.a.createElement(a.d,null)),":",e.name,":")},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(s.a);t.a=p},QHER:function(e,t,n){"use strict";function o(e){return Object.keys(e).reduce((function(t,n){return e[n]?t?t+" "+n:n:t}),"")}t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return t?"string"==typeof t?e?e+" "+t:t:"object"==typeof t?e?e+" "+o(t):o(t):e:e}),"")}},QxgC:function(e,t,n){"use strict";var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("TyAF"),s=n("1VtQ"),c=n("8o0Y"),l=n("tY0L"),u=n("e2SU"),p=n("oh5H"),m=n("QHER"),d=n("UDpV"),h=n.n(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnEmoticonClick=function(e){var t=this,n=this.props,o=(n.emoticonStore,n.SetUIDisplayPref),r=n.contextOptions,a=n.bShowChatAddons?i.a.createElement(l.a,{emoticonStore:this.props.emoticonStore,emoticonHoverStore:this.props.emoticonHoverStore,strFlairGroupID:this.props.strFlairGroupID,onEmoticonSelected:function(e){return t.props.OnEmoticonSelected(e,!1)},roomEffectSettings:this.props.roomEffectSettings,onRoomEffectSelected:this.props.onRoomEffectSelected,onStickerSelected:this.props.onStickerSelected}):i.a.createElement(l.c,{emoticonStore:this.props.emoticonStore,emoticonHoverStore:this.props.emoticonHoverStore,strFlairGroupID:this.props.strFlairGroupID,OnSelected:this.props.OnEmoticonSelected});if(Object(c.a)(a,e,r||{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0}),this.BHaveUnseenEmoticons()&&o){var s=this.GetNewestIndicatorTime();(!s||s<1576780700)&&(s=1576780700),o("rtLastAckedNewEmoticons",s)}},t.prototype.GetNewestIndicatorTime=function(){var e=this.props.emoticonStore,t=Number.MIN_SAFE_INTEGER,n=e.GetTimeReceivedNewestEmoticon();n&&(t=n);var o=e.GetTimeReceivedForStickerOrEffect();return(t=Math.max(o,t))>Number.MIN_SAFE_INTEGER?t:void 0},t.prototype.BHaveUnseenEmoticons=function(){var e=this.props.rtLastAckedNewEmoticons,t=this.GetNewestIndicatorTime();return!e||e<1576780700||t&&(!e||e<t)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.className,o=e.ttip,r=e.useImg,a=[n],s=!1;return t?a.push("disabled"):this.BHaveUnseenEmoticons()&&(s=!0),o&&a.push("ttip"),r?i.a.createElement("span",{onClick:this.OnEmoticonClick},i.a.createElement("img",{src:this.props.useImg,className:m.a.apply(void 0,a),title:this.props.title||Object(p.d)("#ChatEntryButton_Emoticon"),"data-tooltip-text":o})):(a.push(h.a.chatSubmitButton,h.a.EmoticonPickerButton),i.a.createElement("button",{className:m.a.apply(void 0,a),type:"button",onClick:this.OnEmoticonClick,title:this.props.title||Object(p.d)("#ChatEntryButton_Emoticon"),disabled:t,"data-tooltip-text":o},this.props.buttonIcon||i.a.createElement(u.q,null),s&&i.a.createElement(l.d,null)))},Object(o.c)([s.a],t.prototype,"OnEmoticonClick",null),t=Object(o.c)([a.a],t)}(i.a.Component);t.a=f},"R+Pm":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("q1tI"),r=n.n(o),i=n("QHER"),a=n("pjYD"),s=n.n(a),c=function(e){var t=e.value,n=e.onChange,o=e.disabled;return r.a.createElement("div",{className:Object(i.a)(s.a.Toggle,o&&s.a.Disabled),onClick:function(){return!o&&n(!t)}},r.a.createElement("div",{className:s.a.ToggleRail}),r.a.createElement("div",{className:Object(i.a)(s.a.ToggleRail,s.a.Highlight,t?s.a.On:s.a.Off)}),r.a.createElement("div",{className:Object(i.a)(s.a.ToggleSwitch,t?s.a.On:s.a.Off)}))},l=function(e){var t=e.label,n=e.value,o=e.onChange,a=e.disabled,l=e.className;return r.a.createElement("div",{className:Object(i.a)(s.a.ToggleRow,l)},r.a.createElement("div",{className:Object(i.a)(s.a.Label,a&&s.a.Disabled)},t),r.a.createElement(c,{value:n,onChange:o,disabled:a}))}},SEab:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return _}));var o=n("mrSG"),r=n("UqDm"),i=n("1VtQ"),a=n("+M9t"),s=n("LAqV"),c=n("oh5H"),l=n("/SYB"),u=n("5FJe"),p=n("2vnA"),m=n("XaMz"),d=-1,h=function(){function e(e,t,n){this.m_id=e,this.m_rgMembers=[],this.m_fnSort=t,this.m_fnOnUpdate=n}return Object.defineProperty(e.prototype,"id",{get:function(){return this.m_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return-2==this.m_id?1==this.m_rgMembers.length?Object(c.d)("#FriendGroup_InGame"):Object(c.d)("#FriendGroup_InGame_Others"):0==this.m_id?Object(c.d)("#Chat_MemberGroup_Online"):this.m_id==d?Object(c.d)("#Chat_MemberGroup_PartyBeacon"):this.m_strName?this.m_strName:s.f.AppInfoStore.GetAppInfo(this.m_id).is_initialized?(this.m_strName=s.f.AppInfoStore.GetAppInfo(this.m_id).name,this.m_strName):(s.f.AppInfoStore.RegisterCallbackOnLoad(this.OnAppInfoLoaded),"")},enumerable:!1,configurable:!0}),e.prototype.OnAppInfoLoaded=function(){this.m_strName=s.f.AppInfoStore.GetAppInfo(this.m_id).name,this.m_fnOnUpdate()},Object.defineProperty(e.prototype,"member_list",{get:function(){return this.m_rgMembers},enumerable:!1,configurable:!0}),e.prototype.BReadyToDisplay=function(){return!this.BIsGameGroup()||!!this.name},e.prototype.BIsGameGroup=function(){return this.m_id>0},e.prototype.ClearMemberList=function(){this.m_rgMembers=[]},e.prototype.BHasMember=function(e){return this.m_rgMembers.findIndex((function(t){return t.accountid===e}))>=0},e.prototype.SetMembers=function(e){this.m_rgMembers=e,this.Sort()},e.prototype.SortedInsert=function(e){Object(m.a)(!this.BHasMember(e.accountid),"Double insert into bucket for accountid",e.accountid),r.j(this.m_rgMembers,e,this.m_fnSort)},e.prototype.Remove=function(e){return r.d(this.m_rgMembers,(function(t){return t.accountid===e}))},e.prototype.Sort=function(){this.m_rgMembers.sort(this.m_fnSort)},Object(o.c)([i.a],e.prototype,"OnAppInfoLoaded",null),e}(),f=function(){return function(e,t){this.rgRegistered=[],this.bFlatList=void 0,this.mapBuckets=new Map,this.nLastUpdate=0,this.msSpentSorting=0,this.groupSingletons=new h(-2,e,t)}}(),_=function(){function e(){this.m_mapGroupBuckets=new Map,this.m_mapGroupBeacons=new Map,this.m_bShowMembersInGameGroups=void 0,this.LOG=l.b.create((function(){return"CGroupMemberStore"}),!1)}return e.prototype.Init=function(){var e=this;this.m_disposePersonaStateChanged=s.f.FriendStore.AddPersonaStateChangedCallback(this.OnPersonaStateChanged),this.m_disposePlayerGameChanged=s.f.FriendStore.AddPlayerGameChangedCallback(this.OnPlayerGameChanged),s.f.SettingsStore.RunOnReady(this.ListenForSettingsChanges),s.f.CMInterface.AddOnDisconnectCallback((function(){e.Reset()}),102)},e.prototype.ListenForSettingsChanges=function(){var e=this;this.m_bShowMembersInGameGroups=s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame,Object(p.J)((function(){return s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame!==e.m_bShowMembersInGameGroups}),(function(){e.Reset(),e.ListenForSettingsChanges()}))},e.prototype.Reset=function(){var e=this;this.m_mapGroupBuckets.forEach((function(t,n){t.bFlatList=void 0,e.PerformInitialPopulate(n),e.FireMemberListChanged(t)}))},e.prototype.RegisterForGroupMemberList=function(e,t){var n=this;return this.m_mapGroupBuckets.has(t)||(this.m_mapGroupBuckets.set(t,new f(this.FriendSortFunc,(function(){n.OnGroupUpdate(t)}))),this.PerformInitialPopulate(t)),this.m_mapGroupBuckets.get(t).rgRegistered.push(e),{unregister:function(){return n.UnregisterForGroupMemberList(e,t)}}},e.prototype.OnGroupUpdate=function(e){var t=this.m_mapGroupBuckets.get(e);t&&this.FireMemberListChanged(t)},e.prototype.UnregisterForGroupMemberList=function(e,t){var n=this.m_mapGroupBuckets.get(t);n&&(r.c(n.rgRegistered,e),0==n.rgRegistered.length&&this.m_mapGroupBuckets.delete(t))},e.prototype.GroupSortFunc=function(e,t){return t.id==d&&e.id!=d?1:e.id==d&&t.id!=d?-1:e.id<=0&&t.id<=0?e.id-t.id:e.id<=0&&t.id>0?1:t.id<=0&&e.id>0?-1:t.member_list.length==e.member_list.length&&t.name&&e.name?t.name.localeCompare(e.name):t.member_list.length-e.member_list.length},e.prototype.GetGroupMemberList=function(e){var t=this,n=this.m_mapGroupBuckets.get(e);if(n.bFlatList)return Object(m.a)(1==n.mapBuckets.size,"Flat list has too many buckets"),[n.mapBuckets.get(0)];var o=[];return n.mapBuckets.forEach((function(e){e.BReadyToDisplay()&&(e.member_list.length>1||!t.BucketCanBeSingleton(e))&&o.push(e)})),n.groupSingletons.member_list.length>0&&(n.groupSingletons.Sort(),o.push(n.groupSingletons)),o.sort(this.GroupSortFunc)},e.prototype.SetGroupListFlat=function(e,t){var n=this.m_mapGroupBuckets.get(e);n&&n.bFlatList!=t&&(n.bFlatList=t,this.PerformInitialPopulate(e),this.FireMemberListChanged(n))},e.prototype.ScheduledFireMemberListChanged=function(e){e.hDelayUpdate=void 0,this.FireMemberListChanged(e)},e.prototype.FireMemberListChanged=function(e){var t=this;if(!e.hDelayUpdate){var n=performance.now();if(n-e.nLastUpdate<1e3)return e.hDelayUpdate=SetBackgroundTimeout((function(){return t.ScheduledFireMemberListChanged(e)}),1e3),void this.LOG("DELAY UPDATE");e.nLastUpdate=n;for(var o=0,r=e.rgRegistered;o<r.length;o++){(0,r[o])()}}},e.prototype.OnPlayerGameChanged=function(e,t,n){var o=this;this.m_mapGroupBuckets.forEach((function(r,i){var a=s.f.ChatStore.GetChatRoomGroup(i);if(!a.GetMemberPartyBeacon(e)&&a.BHasMember(e)){var c=s.f.FriendStore.GetPlayer(e);if(c.is_appinfo_ready(),o.LOG("OnPlayerGameChanged",c.display_name,t,n),r.bFlatList)return r.mapBuckets.get(0).Remove(e),r.mapBuckets.get(0).SortedInsert(s.f.FriendStore.GetPlayer(e)),void o.FireMemberListChanged(r);if(t==n){var l=n==u.d?r.groupSingletons:r.mapBuckets.get(n);if(l&&l.BHasMember(e))return void o.UpdatePersonaForGroup(i,c)}o.RemoveMemberFromBucket(r,t,e),o.AddMemberToBucketID(r,n,s.f.FriendStore.GetPlayer(e)),o.FireMemberListChanged(r)}}))},e.prototype.OnPersonaStateChanged=function(e){var t=this;this.m_mapGroupBuckets.forEach((function(n,o){var r=s.f.ChatStore.GetChatRoomGroup(o);if(r.BHasMember(e.accountid)){if(t.LOG("CGroupMemberStore - persona state",o,e.display_name),n.bReSortPending)return t.LOG(e.display_name,"not ready"),void e.is_appinfo_ready();e.is_appinfo_ready()?t.UpdatePersonaForGroup(r.GetGroupID(),e):(t.LOG("Delay sorting player "+e.accountid),s.f.AppInfoStore.RegisterCallbackOnLoad(t.UpdatePersonaForGroup.bind(t,o,e)))}}))},e.prototype.UpdatePersonaForGroup=function(e,t){var n=this.m_mapGroupBuckets.get(e);if(n){var o=performance.now(),r=!1;if(n.bFlatList)Object(m.a)(1==n.mapBuckets.size,"Flat map is too large"),n.mapBuckets.get(0).Remove(t.accountid),n.mapBuckets.get(0).SortedInsert(t),r=!0;else{var i=this.FindCurrentBucketForMember(n,t.accountid);if(void 0!==i){var a=void 0;(-2==i||1==(a=n.mapBuckets.get(i)).member_list.length&&this.BucketCanBeSingleton(a))&&(a=n.groupSingletons),(a.member_list.length>1||!this.BucketCanBeSingleton(a))&&(this.LOG("Resorting user",t.display_name,"in bucket",i),a.Remove(t.accountid),a.SortedInsert(t),r=!0)}}var s=performance.now();n.msSpentSorting+=s-o,this.LOG(e+": Resort user "+t.display_name+" took "+(s-o)+"ms (total "+n.msSpentSorting+"ms)"),r&&this.FireMemberListChanged(n)}},e.prototype.OnPartyBeaconsUpdated=function(e,t){this.m_mapGroupBeacons.set(e,t);var n=this.m_mapGroupBuckets.get(e),o=[],r=!1;if(n){for(var i=0,a=t;i<a.length;i++){var c=a[i];o.push(c.account_id);var l=this.FindCurrentBucketForMember(n,c.account_id);if(l!=d)(h=s.f.FriendStore.GetPlayer(c.account_id)).is_appinfo_ready(),r=!0,this.RemoveMemberFromBucket(n,l,c.account_id),this.AddMemberToBucketID(n,d,h)}var u=n.mapBuckets.get(d);if(u)for(var p=0,m=u.member_list;p<m.length;p++){var h=m[p];if(-1==o.indexOf(h.accountid)){r=!0;var f=this.GetBucketIdForPlayer(n,h,e);this.RemoveMemberFromBucket(n,d,h.accountid),this.AddMemberToBucketID(n,f,h)}}r&&this.ReSortGroup(e)}},e.prototype.ReSortGroup=function(e){var t=this.m_mapGroupBuckets.get(e);if(t){if(t.bFlatList){Object(m.a)(1==t.mapBuckets.size,"Flat list has too many buckets");var n=performance.now(),o=t.mapBuckets.get(0);o.Sort();var r=performance.now();t.msSpentSorting+=r-n,this.LOG(e+": List ReSort took "+(r-n)+"ms (total "+t.msSpentSorting+"ms) for "+o.member_list.length+" members")}else t.mapBuckets.get(0).Sort(),t.groupSingletons.Sort();t.bReSortPending=!1,this.FireMemberListChanged(t)}},e.prototype.FriendSortFunc=function(e,t){var n=a.b.FriendSortStatusComparator(e,t);if(0!=n)return n;if(e.persona.is_ingame&&t.persona.is_ingame){if(e.persona.is_in_nonsteam_game){if(!t.persona.is_in_nonsteam_game)return 1}else if(t.persona.is_in_nonsteam_game)return-1;var o=e.current_game_name,r=t.current_game_name;if(o){if(!r)return-1;if(o!=r)return o<r?-1:1}else if(r)return 1}return e.display_name.localeCompare(t.display_name)},e.prototype.PerformInitialPopulate=function(e){var t=this,n=this.m_mapGroupBuckets.get(e);n.mapBuckets.clear(),n.groupSingletons.ClearMemberList(),Object(m.a)(n,"PerformInitialPopulate didn't find group");var o=performance.now(),r=s.f.ChatStore.GetChatRoomGroup(e).memberList.member_list_unsorted.slice();if(void 0===n.bFlatList&&(n.bFlatList=r.length>100||!s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame),n.bFlatList){r.forEach((function(e){e.is_appinfo_ready()}));var i=new h(0,this.FriendSortFunc,(function(){t.FireMemberListChanged(n)}));i.SetMembers(r),n.mapBuckets.set(0,i)}else for(var a=0,c=r;a<c.length;a++){var l=c[a],u=this.GetBucketIdForPlayer(n,l,e);this.AddMemberToBucketID(n,u,l)}s.f.AppInfoStore.BHavePendingAppInfoRequests()&&(n.bReSortPending=!0,s.f.AppInfoStore.RegisterCallbackOnLoad(this.ReSortGroup.bind(this,e)));var p=performance.now();n.msSpentSorting+=p-o,this.LOG("List sort took "+(p-o)+" ms for "+r.length+" members of group "+e)},e.prototype.FindCurrentBucketForMember=function(e,t){var n=void 0;return e.mapBuckets.forEach((function(e){e.BHasMember(t)&&(n=e.id)})),void 0!==n?n:e.groupSingletons.BHasMember(t)?-2:void 0},e.prototype.BIsMemberInAnyBucket=function(e,t){return void 0!==this.FindCurrentBucketForMember(e,t)},e.prototype.AddMemberToBucketID=function(e,t,n){var o=this;if(Object(m.a)(!this.BIsMemberInAnyBucket(e,n.accountid),"Trying to double add accountid",n.accountid,"which is already in bucket",this.FindCurrentBucketForMember(e,n.accountid)),Object(m.a)(!e.bFlatList||0==t,"Trying to add to non-default bucket in flat list"),-2!=t)if(e.mapBuckets.has(t)){if(!e.bFlatList)1==(r=e.mapBuckets.get(t)).member_list.length&&this.BucketCanBeSingleton(r)&&this.RemoveFromSingletons(e,r.member_list[0].accountid);e.mapBuckets.get(t).SortedInsert(n)}else{var r;(r=new h(t,this.FriendSortFunc,(function(){o.FireMemberListChanged(e)}))).SortedInsert(n),e.mapBuckets.set(t,r),!e.bFlatList&&this.BucketCanBeSingleton(r)&&this.AddToSingletons(e,n)}else this.AddToSingletons(e,n)},e.prototype.BucketCanBeSingleton=function(e){return e.id!=d&&0!=e.id},e.prototype.AddToSingletons=function(e,t){Object(m.a)(!e.bFlatList,"Adding to singletons in flat list"),e.groupSingletons.SortedInsert(t)},e.prototype.RemoveFromSingletons=function(e,t){return Object(m.a)(!e.bFlatList,"Removing from singletons in flat list"),e.groupSingletons.Remove(t)},e.prototype.GetBucketIdForPlayer=function(e,t,n){if(e.bFlatList)return 0;var o=this.m_mapGroupBeacons.get(n);if(o&&o.find((function(e){return e.account_id==t.accountid})))return d;return t.persona.is_ingame?t.persona.is_in_nonsteam_game?-2:t.persona.m_unGamePlayedAppID:t.persona.m_broadcastAppId?t.persona.m_broadcastAppId:0},e.prototype.RemoveMemberFromBucket=function(e,t,n){if(-2==t)return this.RemoveFromSingletons(e,n),!0;var o=e.mapBuckets.get(t);return!(!o||!o.Remove(n))&&(0==o.member_list.length?(this.RemoveFromSingletons(e,n),this.LOG("Deleting bucket",t),e.mapBuckets.delete(t)):1==o.member_list.length&&!e.bFlatList&&this.BucketCanBeSingleton(o)&&(this.LOG("Removing member, adding",o.member_list[0].accountid,"to singletons"),this.AddToSingletons(e,o.member_list[0])),!0)},e.prototype.AddUserAndFireCallback=function(e,t,n){var o=s.f.FriendStore.GetPlayer(t),r=this.GetBucketIdForPlayer(e,o,n);this.AddMemberToBucketID(e,r,o),this.FireMemberListChanged(e)},e.prototype.OnMemberAdded=function(e,t){var n=this.m_mapGroupBuckets.get(e);n&&this.AddUserAndFireCallback(n,t,e)},e.prototype.OnMemberRemoved=function(e,t){var n=this.m_mapGroupBuckets.get(e);if(n){for(var o=0,r=Array.from(n.mapBuckets.keys());o<r.length;o++){var i=r[o];if(this.RemoveMemberFromBucket(n,i,t))return void this.FireMemberListChanged(n)}this.RemoveMemberFromBucket(n,-2,t)&&this.FireMemberListChanged(n)}},Object(o.c)([i.a],e.prototype,"ListenForSettingsChanges",null),Object(o.c)([i.a],e.prototype,"OnPlayerGameChanged",null),Object(o.c)([i.a],e.prototype,"OnPersonaStateChanged",null),Object(o.c)([i.a],e.prototype,"OnPartyBeaconsUpdated",null),e}()},SOfK:function(e,t,n){e.exports={PreMessage:"messages_PreMessage_1jeo-",CodeMessage:"messages_CodeMessage_1Fe4I",QuoteMessage:"messages_QuoteMessage_33jrq"}},TA9H:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var o=n("mrSG"),r=n("4HGb"),i=n("OJz+"),a=n("HxRt"),s=n("LAqV"),c=n("2vnA"),l=n("UqDm"),u=n("XaMz");function p(e,t){return e==t||e&&t&&e.friend==t.friend&&e.clan==t.clan&&e.chat==t.chat}var m=function(){function e(e){var t=this;this.m_rgFavorites=c.B.array(),this.m_IncomingFavoritesHandler=Object(i.d)(a.e.FavoritesChangedHandler,(function(e){return t.RecvFavoritesList(e.Body().favorites()),1})),this.m_FriendStore=e,this.m_ClanStore=e.ClanStore}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_ChatStore=s.f.ChatStore,this.m_CMInterface.AddOnLogonCallback((function(){var e=r.b.Init(a.b);a.f.GetFavorites(t.m_CMInterface.GetServiceTransport(),e).then((function(e){1==e.GetEResult()&&t.RecvFavoritesList(e.Body().favorites())}))}),47)},e.prototype.BIsFavorited=function(e){for(var t=0,n=this.m_rgFavorites;t<n.length;t++){if(p(n[t],e))return!0}return!1},Object.defineProperty(e.prototype,"favorites",{get:function(){return this.m_rgFavorites},enumerable:!1,configurable:!0}),e.prototype.AddToFavorites=function(e,t){var n=this.m_rgFavorites.findIndex((function(t){return p(t,e)}));return-1===n||void 0!==t&&n!==t?(-1!==n?l.f(this.m_rgFavorites,n,t>n?t-1:t):void 0!==t?this.m_rgFavorites.splice(t,0,e):this.m_rgFavorites.push(e),this.SaveFavorites()):Promise.resolve(!0)},e.prototype.RemoveFromFavorites=function(e){return l.d(this.m_rgFavorites,(function(t){return p(t,e)}))?this.SaveFavorites():Promise.resolve(!0)},e.prototype.OnFriendRemoved=function(e){var t=this.m_FriendStore.GetPlayer(e);this.RemoveFromFavorites({friend:t})},e.prototype.SaveFavorites=function(){for(var e=r.b.Init(a.d),t=0,n=this.m_rgFavorites;t<n.length;t++){var o=n[t],i=e.Body().add_favorites();o.friend?i.set_accountid(o.friend.accountid):o.clan?i.set_clanid(o.clan.clanid):o.chat?i.set_chat_group_id(o.chat.GetGroupID()):Object(u.a)(!1,"empty favorite struct")}return a.f.SetFavorites(this.m_CMInterface.GetServiceTransport(),e).then((function(e){return 1==e.GetEResult()}))},e.prototype.ReadFavorites=function(e){this.m_rgFavorites.clear();for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o.accountid()){var r=this.m_FriendStore.GetFriend(o.accountid());r&&this.m_rgFavorites.push({friend:r})}else if(o.clanid()){var i=this.m_ClanStore.GetClan(o.clanid());i&&this.m_rgFavorites.push({clan:i})}else if(o.chat_group_id()){var a=this.m_ChatStore.GetChatRoomGroup(o.chat_group_id());a&&this.m_rgFavorites.push({chat:a})}}},e.prototype.RecvFavoritesList=function(e){var t=this;Object(c.J)((function(){return t.m_FriendStore.friends_list_ready&&t.m_ChatStore.chat_group_list_ready}),this.ReadFavorites.bind(this,e))},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_friends_favorite_count(l.b(this.m_rgFavorites,(function(e){return!!e.friend}))),e.metrics().set_group_chat_favorite_count(l.b(this.m_rgFavorites,(function(e){return!!e.chat||!!e.clan})))},Object(o.c)([c.k],e.prototype,"AddToFavorites",null),Object(o.c)([c.k],e.prototype,"RemoveFromFavorites",null),Object(o.c)([c.k],e.prototype,"OnFriendRemoved",null),Object(o.c)([c.k],e.prototype,"ReadFavorites",null),e}()},TS4p:function(e,t,n){e.exports={ChatTabTransitionGroup:"chattabs_ChatTabTransitionGroup_2eqy8",ChatTab:"chattabs_ChatTab_1WfqA",Active:"chattabs_Active_3sMSI",ChatTabTransition_Enter:"chattabs_ChatTabTransition_Enter_3eAH3",ChatTabTransition_EnterActive:"chattabs_ChatTabTransition_EnterActive_5RU5n",ChatTabTransition_Exit:"chattabs_ChatTabTransition_Exit_1y02w",TabBounce:"chattabs_TabBounce_16Mga",ChatTabTransition_ExitActive:"chattabs_ChatTabTransition_ExitActive_3f6Ai",VoiceActive:"chattabs_VoiceActive_3FFuI",MicStatus:"chattabs_MicStatus_1cEht",MicMuted:"chattabs_MicMuted_3sBKY",ChatTabRow:"chattabs_ChatTabRow_OdWLp",CloseButton:"chattabs_CloseButton_SzByZ",ChatTabContent_Friend:"chattabs_ChatTabContent_Friend_3m7Ps",ChatTabContent_ChatRoom:"chattabs_ChatTabContent_ChatRoom_1AI14",ChatTabContent_ChatRoomName:"chattabs_ChatTabContent_ChatRoomName_2avXT",UnreadGlow:"chattabs_UnreadGlow_30PFd",UnreadCircle:"chattabs_UnreadCircle_2goOD"}},UDpV:function(e,t,n){e.exports={chatEntryControls:"chatentry_chatEntryControls_2O_X7",chatTextarea:"chatentry_chatTextarea_3e__5",chatEntryActionsGroup:"chatentry_chatEntryActionsGroup_15mWd",chatEntryActionsContainer:"chatentry_chatEntryActionsContainer_WZNUD",minHeightZero:"chatentry_minHeightZero_NcZQ_",chatSubmitButton:"chatentry_chatSubmitButton_3VRfL",EmbedButton:"chatentry_EmbedButton_1vvRh",EmoticonPickerButton:"chatentry_EmoticonPickerButton_3fgX0",disabled:"chatentry_disabled_2p2vW",Inactive:"chatentry_Inactive_gFWg4",AudioLines:"chatentry_AudioLines_3fUht",Active:"chatentry_Active_224Fj"}},UMCL:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("q1tI"),i=n("/IDK"),a=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.render=function(){if(null==this.props.text)return r.createElement(r.Fragment,null,this.props.children);var e;if(e=this.props.text instanceof Array?this.props.text.map((function(e){return e?e.toString():""})).filter((function(e){return e.length>0})).join("\n"):this.props.text.toString(),1==r.Children.count(this.props.children)){var t=r.Children.only(this.props.children);return r.cloneElement(t,{"data-copystyle":this.props.style,"data-copytext":e})}return console.log("Error: CopyableText must be the parent of exactly one child:\n\tcopystyle="+this.props.style+" copytext="+e),r.createElement(r.Fragment,null,this.props.children)},t.defaultProps={text:""},t}(r.Component);function s(e){for(var t=e.cloneContents(),n="",o="",r=!1,a=(t.querySelector("[data-activechat=true]")||t).querySelectorAll("[data-copytext]"),s=Array.from(a).map((function(e){return e.getAttribute("data-copystyle")||"msg"})),c=0;c<a.length;++c){var l=a[c],u=s[c];if(!(c+1<a.length&&i.d(l,a[c+1]))){var p=l.tagName.toLowerCase(),m=u.includes("block"),d=u.includes("timestamp"),h=u.includes("server"),f=u.includes("invite"),_=u.includes("emote"),g=u.includes("no-prefix"),b=u.includes("no-suffix"),v=u.includes("allow-embedded-newlines"),y=u.includes("block-continue"),S=u.includes("merge-adjacent"),C=u.includes("force-display"),O=u.includes("prepend-innertext"),I=u.includes("append-innertext"),E=u.includes("prepend-newline"),w=u.includes("append-newline"),M=u.includes("speaker");if(!C){var D=null!=p.match(/img|iframe/),T=null!=l.querySelector("img,iframe");if(!l.innerText&&!D&&!T)continue}S&&(c>0&&s[c-1].includes("merge-adjacent")&&(g=!0),c+1<s.length&&s[c+1].includes("merge-adjacent")&&(b=!0)),M&&(r=!0);var j="";d||M||h||f||_?(0!=n.length&&(j+="\n"),(h||f)&&(j+="\t\t")):(r&&(j+="\t"),o.includes("msg")&&m&&(E=!0),o.includes("block")&&!y&&(E=!0));var G=l.getAttribute("data-copytext");0==G.length?G=l.innerText:O&&l.innerText.length>0?G=l.innerText+(u.includes("-with-newline")?"\n":" ")+G:I&&l.innerText.length>0&&(G+=(u.includes("-with-newline")?"\n":" ")+l.innerText),0!=G.length&&(E&&(n+="\n"),g||(n+=j),n+=v?G:G.replace(/\n/g,"\n"+j),b||(n+="\n"),w&&(n+="\n")),o=u}}if(0!=n.length)return n}function c(e){var t=document.createRange();t.selectNode(e),function(e){var t=s(e);i.i(t)}(t)}},UqDm:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return m}));n("XaMz");function o(e){for(var t=e.length;0!==t;){var n=Math.floor(Math.random()*t),o=e[t-=1];e[t]=e[n],e[n]=o}}function r(e,t,n){t<0||n<0||(n>=e.length&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]))}function i(e,t){return a(e,(function(e){return t==e}))}function a(e,t){var n=e.findIndex(t);return n>=0&&(e.splice(n,1),!0)}function s(e,t){return e.reduce((function(e,n,o,r){return e+(t(n,o,r)?1:0)}),0)}function c(e,t){return e.filter((function(e){return t!==e}))}function l(e,t,n){for(var o=0,r=e.length-1;o<=r;){var i=Math.floor((o+r)/2),a=n(e[i],t);if(a<0)o=i+1;else if(a>0)r=i-1;else{if(r==i)return i;if(i==o)return r>i&&n(t,e[i+1])<0?i:i+1;o=i}}return r}function u(e,t,n){var o=l(e,t,n);e.splice(o+1,0,t)}function p(e,t,n){return e||console.error("array should be defined for us to fill in the missing indexes"),e.length<t?e.concat(Array(t-e.length).fill(n)):e}function m(e,t){if(t)for(var n=e.length-1;n>=0;--n){var o=e[n];if(t(o,n,e))return o}}},V0xx:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=function(){function e(){this.m_vecObjects=[],this.OnUnload=this.OnUnload.bind(this),Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||window.addEventListener("unload",this.OnUnload)}return e.prototype.OnUnload=function(){for(var e=0,t=this.m_vecObjects;e<t.length;e++){t[e].DeleteObserver()}this.m_vecObjects=[]},e.prototype.CreateObserver=function(e,t){var n=new r(e,t);return this.m_vecObjects.push(n),n},e.prototype.DeleteObserver=function(e){if(e){var t=e,n=this.m_vecObjects.indexOf(t);n>=0&&(t.DeleteObserver(),this.m_vecObjects.splice(n,1))}},e}(),r=function(){function e(e,t){this.m_resizeObserver=t?new t.ResizeObserver(e):new ResizeObserver(e)}return e.prototype.DeleteObserver=function(){this.m_resizeObserver&&(this.m_resizeObserver.disconnect(),delete this.m_resizeObserver)},e.prototype.observe=function(e){this.m_resizeObserver&&this.m_resizeObserver.observe(e)},e.prototype.unobserve=function(e){this.m_resizeObserver&&this.m_resizeObserver.unobserve(e)},e.prototype.disconnect=function(){this.m_resizeObserver&&this.m_resizeObserver.disconnect()},e}(),i=new o},V7Fl:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return w})),n.d(t,"a",(function(){return M})),n.d(t,"c",(function(){return T}));var o=n("mrSG"),r=n("UqDm"),i=n("2lpH"),a=n.n(i),s=n("/SYB"),c=n("5Nu3"),l=n("rsEv"),u=n("s+DT"),p=n("3zHc"),m=n("2vnA"),d=n("oh5H"),h=n("4HGb"),f=n("RBVV"),_=n("+M9t"),g=n("LAqV"),b=n("Kqva"),v=n("tkkQ"),y=n("XaMz"),S=function(){function e(t){this.m_mapMembers=m.B.map(),this.m_mapPersonaStates=m.B.map(),this.m_mapPersonaSubscriptions=new Map,this.m_setQueuedPersonaSubscriptions=new Set,this.m_setQueuedPersonaUnsubscriptions=new Set,this.m_ulChatRoomGroupID=t,this.m_nClientChangenumber=0,this.m_ulViewID=""+e.sm_ulNextViewID++}return e.prototype.GetViewID=function(){return this.m_ulViewID},e.prototype.OnServerUpdate=function(e){for(var t=e.view().client_changenumber()!=this.m_nClientChangenumber,n=0,o=e.members();n<o.length;n++){var r=o[n];t||this.m_mapMembers.set(r.rank(),r.accountid()),r.persona()&&this.UpdatePersonaState(r.accountid(),e.status_flags(),r.persona())}var i=e.member_summary(!1);i&&(this.m_cMemberSummaryTotal=i.offline()+i.online()+i.ingame(),this.m_cMemberSummaryOnline=i.online()+i.ingame(),this.m_cMemberSummaryInGame=i.ingame());for(var a=0,s=e.subscribed_personas();a<s.length;a++){var c=s[a],l=new u.a(c.friendid()).GetAccountID();this.UpdatePersonaState(l,e.status_flags(),c)}},e.prototype.GetAccountIDAt=function(e){return this.m_mapMembers.has(e)?this.m_mapMembers.get(e):null},e.prototype.GetMember=function(e){return this.m_mapPersonaStates.has(e)?this.m_mapPersonaStates.get(e):g.f.FriendStore.GetPlayer(e)},e.prototype.GetMemberCountTotal=function(){return this.m_cMemberSummaryTotal},e.prototype.GetMemberCountOnline=function(){return this.m_cMemberSummaryOnline},e.prototype.GetMemberCountInGame=function(){return this.m_cMemberSummaryInGame},e.prototype.UpdatePersonaState=function(e,t,n){if(n&&n.player_name())if(this.m_mapPersonaStates.has(e))this.m_mapPersonaStates.get(e).mutable_persona.UpdateFromMessage(t,n);else{var o=g.f.FriendStore.GetPlayer(e);o.mutable_persona.UpdateFromMessage(t,n),this.m_mapPersonaStates.set(e,o)}},e.prototype.SetViewExtents=function(e,t){if(e!=this.m_iStartIndex||t!=this.m_iEndIndex){this.m_iStartIndex=e,this.m_iEndIndex=t,this.m_nClientChangenumber++;var n=h.b.Init(f.R);n.Body().set_chat_group_id(this.m_ulChatRoomGroupID),n.Body().set_view_id(this.m_ulViewID),n.Body().set_client_changenumber(this.m_nClientChangenumber),n.Body().set_start(this.m_iStartIndex),n.Body().set_end(this.m_iEndIndex),f.X.UpdateMemberListView(g.f.CMInterface.GetServiceTransport(),n)}},e.prototype.SubscribeToPersona=function(e){var t=this.m_mapPersonaSubscriptions.get(e);t?this.m_mapPersonaSubscriptions.set(e,t+1):(this.m_mapPersonaSubscriptions.set(e,1),this.m_setQueuedPersonaSubscriptions.add(e),this.ScheduleSubscriptionUpdate())},e.prototype.UnsubscribeFromPersona=function(e){var t=this.m_mapPersonaSubscriptions.get(e);t?t>1?this.m_mapPersonaSubscriptions.set(e,t-1):(this.m_mapPersonaSubscriptions.delete(e),this.m_setQueuedPersonaUnsubscriptions.add(e),this.ScheduleSubscriptionUpdate()):console.warn("Attempting to unsubscribe from a persona that we are not subscribed to. Chat: "+this.m_ulChatRoomGroupID+", Account: "+e)},e.prototype.ScheduleSubscriptionUpdate=function(){var e=this;this.m_nPersonaSubscriptionTimer||(this.m_nPersonaSubscriptionTimer=window.setTimeout((function(){e.m_nClientChangenumber++;var t=h.b.Init(f.R);t.Body().set_chat_group_id(e.m_ulChatRoomGroupID),t.Body().set_view_id(e.m_ulViewID),t.Body().set_client_changenumber(e.m_nClientChangenumber),t.Body().set_start(e.m_iStartIndex),t.Body().set_end(e.m_iEndIndex),e.m_setQueuedPersonaSubscriptions.size&&(t.Body().set_persona_subscribe_accountids(Array.from(e.m_setQueuedPersonaSubscriptions)),e.m_setQueuedPersonaSubscriptions.clear()),e.m_setQueuedPersonaUnsubscriptions.size&&(t.Body().set_persona_unsubscribe_accountids(Array.from(e.m_setQueuedPersonaUnsubscriptions)),e.m_setQueuedPersonaUnsubscriptions.clear()),f.X.UpdateMemberListView(g.f.CMInterface.GetServiceTransport(),t),e.m_nPersonaSubscriptionTimer=void 0}),50))},e.prototype.UnregisterFromServer=function(){var e=h.b.Init(f.R);e.Body().set_chat_group_id(this.m_ulChatRoomGroupID),e.Body().set_view_id(this.m_ulViewID),e.Body().set_delete_view(!0),f.X.UpdateMemberListView(g.f.CMInterface.GetServiceTransport(),e)},e.prototype.PerformSearch=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var e,r,i=this;return Object(o.e)(this,(function(o){return e=n.toLocaleLowerCase(),(r=h.b.Init(f.J)).Body().set_chat_group_id(this.m_ulChatRoomGroupID),r.Body().set_search_id(t),r.Body().set_search_text(e),[2,f.X.SearchMembers(g.f.CMInterface.GetServiceTransport(),r).then((function(t){for(var n=[],o=0,r=t.Body().matching_members();o<r.length;o++){var a=r[o];a.persona()&&i.UpdatePersonaState(a.accountid(),t.Body().status_flags(),a.persona());var s=i.m_mapPersonaStates.get(a.accountid());if(Object(y.a)(s,"Missing persona in member matches"),s){var c=s.MatchSearchString(e);n.push({friend:s,iMatchOffset:c.iOffset,bNicknameMatch:2==c.match})}}return n}))]}))}))},e.prototype.GetAllKnownPersonas=function(){return Array.from(this.m_mapPersonaStates.values())},e.sm_ulNextViewID=1,Object(o.c)([m.B],e.prototype,"m_iStartIndex",void 0),Object(o.c)([m.B],e.prototype,"m_iEndIndex",void 0),Object(o.c)([m.B],e.prototype,"m_cMemberSummaryTotal",void 0),Object(o.c)([m.B],e.prototype,"m_cMemberSummaryOnline",void 0),Object(o.c)([m.B],e.prototype,"m_cMemberSummaryInGame",void 0),Object(o.c)([m.k],e.prototype,"OnServerUpdate",null),e}(),C=n("7sd/");var O=function(){function e(e,t){void 0===e&&(e=20),this.m_rank=e,this.m_role_ids=t}return e.prototype.BHasRole=function(e){return-1!=this.m_role_ids.findIndex((function(t){return t==e}))},Object(o.c)([m.B],e.prototype,"m_rank",void 0),Object(o.c)([m.B],e.prototype,"m_role_ids",void 0),e}(),I=function(){function e(e){this.m_roleActions=new f.a,this.m_roleActions=e}return e.prototype.BCanPerformAction=function(e){switch(e){case 1:return this.m_roleActions.can_create_rename_delete_channel();case 2:return this.m_roleActions.can_kick();case 3:return this.m_roleActions.can_ban();case 4:return this.m_roleActions.can_invite();case 5:return this.m_roleActions.can_change_tagline_avatar_name();case 6:return this.m_roleActions.can_chat();case 8:return this.m_roleActions.can_change_group_roles();case 9:return this.m_roleActions.can_change_user_roles();case 10:return this.m_roleActions.can_mention_all();case 11:return this.m_roleActions.can_set_watching_broadcast();default:return!1}},e.prototype.SetCanPerformAction=function(e,t){switch(e){case 1:this.m_roleActions.set_can_create_rename_delete_channel(t);break;case 2:this.m_roleActions.set_can_kick(t);break;case 3:this.m_roleActions.set_can_ban(t);break;case 4:this.m_roleActions.set_can_invite(t);break;case 5:this.m_roleActions.set_can_change_tagline_avatar_name(t);break;case 6:this.m_roleActions.set_can_chat(t);break;case 8:this.m_roleActions.set_can_change_group_roles(t);break;case 9:this.m_roleActions.set_can_change_user_roles(t);break;case 10:this.m_roleActions.set_can_mention_all(t);break;case 11:this.m_roleActions.set_can_set_watching_broadcast(t)}},e.prototype.toString=function(){var e=this.role_id;return this.m_roleActions.can_create_rename_delete_channel()&&(e+=" CreateRenameDeleteChannel"),this.m_roleActions.can_kick()&&(e+=" Kick"),this.m_roleActions.can_ban()&&(e+=" Ban"),this.m_roleActions.can_invite()&&(e+=" Invite"),this.m_roleActions.can_change_tagline_avatar_name()&&(e+=" ChangeTaglineAvatarName"),this.m_roleActions.can_chat()&&(e+=" Chat"),this.m_roleActions.can_change_group_roles()&&(e+=" ChangeGroupRoles"),this.m_roleActions.can_change_user_roles()&&(e+=" ChangeUserRoles"),e},Object.defineProperty(e.prototype,"role_id",{get:function(){return this.m_roleActions.role_id()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roleActions",{get:function(){return this.m_roleActions},enumerable:!1,configurable:!0}),e}(),E=function(){function e(e,t){var n=this;this.LOG=s.b.create((function(){return n.unique_id}),!1),this.m_chatStore=null,this.m_ulGroupID="",this.m_ulDefaultChatID="",this.m_rtTimeJoined=0,this.m_rtLastAck=0,this.m_bFullStateLoaded=!1,this.m_strName="",this.m_strTagLine="",this.m_strAvatarSHA="",this.m_strAvatarUGCURL="",this.m_strWatchingBroadcastChannelID="",this.m_mapRooms=m.B.map(null,{deep:!1}),this.m_rgPartyBeacons=[],this.m_eUserDesktopNotificationLevel=4,this.m_eUserMobileNotificationLevel=4,this.m_bUnreadIndicatorMuted=!1,this.m_roles=[],this.m_roleActions=[],this.m_groupMembers=new j,this.m_cMemberSummaryCount=0,this.m_bMemberListVirtualized=!1,this.m_chatStore=e,this.m_ulGroupID=t}return Object.defineProperty(e.prototype,"ChatStore",{get:function(){return this.m_chatStore},enumerable:!1,configurable:!0}),e.prototype.BIsValid=function(){return this.m_mapRooms.size>0},e.prototype.IsNamedGroupChat=function(){return!!this.m_strName||this.BIsClanChatRoom()},e.prototype.GetOwnerAccountID=function(){return this.m_unOwnerAccountID},e.prototype.BIsAccountIDOwner=function(e){return this.BIsClanChatRoom()?50==this.GetMemberRankIfPresent(e):this.GetOwnerAccountID()==e},e.prototype.SetOwnerAppID=function(e){e||(e=0),this.m_unAppID!=e&&(this.m_unAppID=e,this.m_unAppID&&(g.f.AppInfoStore.GetAppInfo(this.m_unAppID),g.f.AppInfoStore.GetRichPresenceLoc(this.m_unAppID)))},e.prototype.GetOwnerAppID=function(){return this.m_unAppID},Object.defineProperty(e.prototype,"name",{get:function(){if(this.m_strName||this.BIsClanChatRoom())return this.m_strName;var e=this.members_to_highlight_name,t=e.members;if(!t.length)return e.remaining_count?Object(d.d)("#ChatRoom_GenericWithOthers",e.remaining_count):Object(d.d)("#ChatRoom_GenericEmpty");switch(t.length){case 1:return e.remaining_count>0?Object(d.d)("#ChatRoom_OneFriendPlusMore",t[0].display_name,e.remaining_count):Object(d.d)("#ChatRoom_OneFriend",t[0].display_name);case 2:return e.remaining_count>0?Object(d.d)("#ChatRoom_TwoPlusMore",t[0].display_name,t[1].display_name,e.remaining_count):Object(d.d)("#ChatRoom_TwoFriends",t[0].display_name,t[1].display_name);case 3:return Object(d.d)("#ChatRoom_ThreeFriends",t[0].display_name,t[1].display_name,t[2].display_name);default:return Object(y.a)(!1,"unexpected number of friends: "+t.length),""}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagline",{get:function(){return this.m_strTagLine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarSHA",{get:function(){return this.m_strAvatarSHA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarUGCURL",{get:function(){return this.m_strAvatarUGCURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_steamid",{get:function(){return this.m_unWatchingBroadcastAccountID?u.a.InitFromAccountID(this.m_unWatchingBroadcastAccountID):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_channel_id",{get:function(){return this.m_strWatchingBroadcastChannelID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAvatarSHA",{get:function(){return this.m_strAvatarSHA.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasIcon",{get:function(){return this.hasAvatarSHA||0!=this.m_unAppID},enumerable:!1,configurable:!0}),e.prototype.GetAvatarOrAppIconURL=function(e){if(this.m_strAvatarUGCURL)return this.m_strAvatarUGCURL;if(!this.m_strAvatarSHA&&this.m_unAppID){var t=g.f.AppInfoStore.GetAppInfo(this.m_unAppID);if(t.is_valid&&t.icon_url)return t.icon_url}return function(e,t){return t=t<=32?32:t<=64?64:256,v.a.MEDIA_CDN_COMMUNITY_URL+"images/chaticons/"+e.substr(0,2)+"/"+e.substr(2,2)+"/"+e.substr(4,2)+"/"+e+"_"+t+".jpg"}(this.m_strAvatarSHA,e)},Object.defineProperty(e.prototype,"avatar_url_small",{get:function(){return this.GetAvatarOrAppIconURL(32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.GetAvatarOrAppIconURL(64)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.GetAvatarOrAppIconURL(256)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberCountTotal",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readyToRender",{get:function(){return this.m_bFullStateLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberCountOnline",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.member_counts.online:this.memberCountTotal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberCountInGame",{get:function(){return this.m_groupMembers.member_counts.ingame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberList",{get:function(){return this.m_groupMembers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"cg"+this.m_ulGroupID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeJoined",{get:function(){return this.m_rtTimeJoined},enumerable:!1,configurable:!0}),e.prototype.GetGroupID=function(){return this.m_ulGroupID},e.prototype.GetDefaultChatID=function(){return this.m_ulDefaultChatID},e.prototype.BIsClanChatRoom=function(){return!!this.m_unClanID},e.prototype.BIsVoiceChannel=function(e){var t=this.GetChatRoom(e);return null!=t&&(t.GetVoiceAllowed()&&t.GetRoomID()!=this.GetDefaultChatID())},e.prototype.BIsTempVoiceChannel=function(e){var t=this.GetChatRoom(e);return t&&t.IsTempVoiceRoom()},e.prototype.GetClanID=function(){return this.m_unClanID},Object.defineProperty(e.prototype,"chatRoomList",{get:function(){var e=Array.from(this.m_mapRooms.values());return e.sort((function(e,t){if(e.GetSortOrder()<t.GetSortOrder())return-1;if(e.GetSortOrder()>t.GetSortOrder())return 1;var n=a.a.fromString(e.GetRoomID()),o=a.a.fromString(t.GetRoomID());return n.lessThan(o)?-1:n.greaterThan(o)?1:0})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textRoomList",{get:function(){var e=this;return this.chatRoomList.filter((function(t){return!t.GetVoiceAllowed()||t.GetRoomID()==e.GetDefaultChatID()}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voiceRoomList",{get:function(){return this.chatRoomList.filter((function(e){return e.GetVoiceAllowed()}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasVoiceRoom",{get:function(){for(var e,t=this.m_mapRooms.values();(e=t.next())&&!e.done;)if(e.value.GetVoiceAllowed())return!0;return!1},enumerable:!1,configurable:!0}),e.prototype.GetDesktopNotificationLevel=function(e){return void 0===e&&(e=!1),0==this.m_eUserDesktopNotificationLevel?this.BIsClanChatRoom()?3:4:this.m_eUserDesktopNotificationLevel},e.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eUserMobileNotificationLevel?3:this.m_eUserMobileNotificationLevel},e.prototype.BIsUnreadIndicatorMuted=function(){return this.m_bUnreadIndicatorMuted},Object.defineProperty(e.prototype,"hasUnreadChatMessage",{get:function(){for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){var n=t[e];if((this.m_bUnreadIndicatorMuted?n.has_unread_messages:n.has_any_unread_messages)&&(n.BIsDefaultRoom()||n.time_last_ack>=this.m_rtLastAck||n.time_last_mention>this.m_rtLastAck))return!0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HasUnreadMention",{get:function(){for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){if(t[e].has_unread_mention)return!0}return!1},enumerable:!1,configurable:!0}),e.prototype.GetChatRoomsWithUnreadPriorityMessages=function(e){this.m_mapRooms.forEach((function(t){t.has_unread_priority_messages&&e.push(t)}))},Object.defineProperty(e.prototype,"time_last_activity",{get:function(){var e=this,t=0,n=0;this.m_mapRooms.forEach((function(o){if(o.BShouldTrackUnreadMessages()){var r=o.time_last_activity;r>e.m_rtLastAck?n=0==n?r:Math.min(r,n):t=Math.max(r,t)}}));var o=n;return o||(o=t),this.m_rtTimeJoined>o&&(o=this.m_rtTimeJoined),o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_with_last_message",{get:function(){var e,t=0;return this.m_mapRooms.forEach((function(n){t<n.time_last_message&&(e=n,t=n.time_last_message)})),e},enumerable:!1,configurable:!0}),e.prototype.BHasEverBeenAcked=function(){if(this.m_rtLastAck)return!0;for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){if(t[e].time_last_ack)return!0}return!1},e.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastAck<e&&(this.m_rtLastAck=e)},e.prototype.IsInRoom=function(e){return Object(y.a)(this.m_bFullStateLoaded,"Group state not fully loaded"),this.m_groupMembers.HasMember(e)},e.prototype.BRoomContainsJustTheseFriendsAndSelf=function(e){if(!this.BIsCurrentUserAMember())return!1;if(this.memberCountTotal!=e.length+1)return!1;for(var t=!0,n=0,o=e;n<o.length;n++){var r=o[n];if(this.m_rgGroupMembersSummary.indexOf(r)<0){t=!1;break}}return t},e.prototype.GetMyRank=function(){return this.GetMemberRank(this.m_chatStore.CMInterface.steamid.GetAccountID())},e.prototype.ChangeMemberRank=function(e,t){Object(y.a)(this.m_groupMembers.HasMember(e),"ChangeMemberRank: missing member"),this.m_groupMembers.GetExtra(e).m_rank=t},e.prototype.GetMemberRank=function(e){Object(y.a)(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var t=this.m_groupMembers.GetExtra(e);return t&&0!=t.m_rank?t.m_rank:this.BIsClanChatRoom()?0:20},e.prototype.GetMemberRankIfPresent=function(e){var t=this.m_groupMembers.GetExtra(e);return t?t.m_rank:0},e.prototype.GetMemberPartyBeacon=function(e){return this.m_rgPartyBeacons.find((function(t){return t.account_id==e}))},e.prototype.ChangeMemberRoles=function(e,t){Object(y.a)(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var n=this.m_groupMembers.GetExtra(e);n&&(n.m_role_ids=t)},e.prototype.GetMemberRankString=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return Object(d.d)("#Chat_rank_owner");case 40:return Object(d.d)("#Chat_rank_officer");case 30:return Object(d.d)("#Chat_rank_moderator");case 20:return Object(d.d)("#Chat_rank_member");case 15:return Object(d.d)("#Chat_rank_guest");case 10:return Object(d.d)("#Chat_rank_viewer");case 0:return"";default:return Object(d.d)("#Chat_rank_unknown")}},e.prototype.GetMemberRankStringUnlocalized=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return"Owner";case 40:return"Officer";case 30:return"Moderator";case 20:return"Member";case 15:return"Guest";case 10:return"Viewer";case 0:return"DefaultRank";default:return Object(d.d)("UnknownRank")}},e.prototype.GetMember=function(e){if(this.IsInRoom(e))return this.m_chatStore.FriendStore.GetPlayer(e);this.m_bFullStateLoaded},e.prototype.SetInitialGroupState=function(e){Object(y.a)(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateGroupStateFromSummary(e),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.UpdateGroupStateFromSummary=function(e){this.m_strTagLine=e.chat_group_tagline(),null!=e.chat_group_avatar_sha()&&(this.m_strAvatarSHA=Object(b.a)(e.chat_group_avatar_sha())),this.m_strAvatarUGCURL=e.avatar_ugc_url()||"",this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_strWatchingBroadcastChannelID=e.watching_broadcast_channel_id(),this.m_cMemberSummaryCount=e.active_member_count(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_rgGroupMembersSummary=e.top_members(),this.m_defaultRoleID=e.default_role_id(),this.m_roleActions=e.role_actions().map((function(e){return new I(e)})),this.m_groupMembers.AddMember(g.f.CMInterface.steamid.GetAccountID(),new O(e.rank(),e.role_ids())),this.SetOwnerAppID(e.appid()),this.SetNameCheckingForAppLocalization(e.chat_group_name()),this.m_rgPartyBeacons=e.party_beacons().map((function(e){return{account_id:new u.a(e.steamid_owner()).GetAccountID(),app_id:e.app_id(),beacon_id:e.beacon_id(),game_metadata:e.game_metadata()}})),g.f.GroupMemberStore.OnPartyBeaconsUpdated(this.m_ulGroupID,this.m_rgPartyBeacons)},e.prototype.SetNameCheckingForAppLocalization=function(e){var t=this,n=null;!this.m_unOwnerAccountID&&this.GetOwnerAppID()&&("#"==e[0]?n={tok:e}:"{"==e[0]&&(n=JSON.parse(e))),n&&n.tok?(this.m_strName="...",g.f.AppInfoStore.GetRichPresenceLocAsync(this.GetOwnerAppID()).then((function(e){var o=new Map;if(n.params)for(var r in n.params)o.set(r.toString(),n.params[r].toString());t.m_strName=e.Localize(n.tok,o)}))):this.m_strName=e},e.prototype.UpdateGroupState=function(e){Object(y.a)(e.header_state().chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateChatRoomHeaderState(e.header_state()),this.m_groupMembers.Clear();for(var t=[],n=0,o=e.members();n<o.length;n++){var r=o[n],i=r.accountid();this.m_groupMembers.AddMember(i,new O(r.rank(),r.role_ids())),t.length<10&&t.push(i)}(!this.m_rgGroupMembersSummary||this.m_rgGroupMembersSummary.length<t.length)&&(this.m_rgGroupMembersSummary=t),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms()),this.m_bFullStateLoaded=!0},e.prototype.SetMemberListVirtualized=function(e){this.m_bMemberListVirtualized=e,this.m_groupMembers.SetMemberDataVirtualized(e)},e.prototype.BIsMemberListVirtualized=function(){return this.m_bMemberListVirtualized},e.prototype.UnloadActiveGroupState=function(){this.UnloadGroupState(),this.m_mapRooms.forEach((function(e){e.UnloadActiveChatState()}))},e.prototype.UnloadGroupState=function(){this.m_bFullStateLoaded=!1,this.m_bMemberListVirtualized=!1,this.m_groupMembers.Clear()},e.prototype.UnloadAndResetGroupState=function(){this.UnloadGroupState(),this.UpdateUserState(new f.V),this.m_mapRooms.forEach((function(e){e.UnloadChatState()}))},e.prototype.OnUserStateChange=function(e,t){var n=e.accountid();1==t?(this.LOG("new member "+n+" roles ["+e.role_ids().toString()+"]"),this.m_groupMembers.AddMember(n,new O(e.rank(),e.role_ids())),g.f.GroupMemberStore.OnMemberAdded(this.m_ulGroupID,n),this.m_rgGroupMembersSummary.length<10&&-1==this.m_rgGroupMembersSummary.indexOf(n)&&(this.m_rgGroupMembersSummary=Object(o.g)(this.m_rgGroupMembersSummary,[n]))):2==t||3==t||10==t?(this.m_groupMembers.RemoveMember(n),g.f.GroupMemberStore.OnMemberRemoved(this.m_ulGroupID,n),-1!==this.m_rgGroupMembersSummary.indexOf(n)&&(this.m_rgGroupMembersSummary=r.a(this.m_rgGroupMembersSummary,n))):7==t?this.ChangeMemberRank(n,e.rank()):12==t&&this.ChangeMemberRoles(n,e.role_ids())},e.prototype.UpdateChatRoomState=function(e,t){var n=this;this.m_ulDefaultChatID=e;var o=new Set;this.m_mapRooms.forEach((function(e,t){return o.add(t)}));for(var r=0,i=t;r<i.length;r++){var a=i[r],s=a.chat_id();o.delete(s);var c=this.m_mapRooms.get(s);c||(c=new l.a(this.m_chatStore,this,s,s==e),this.m_mapRooms.set(s,c)),c.UpdateChatState(a)}o.forEach((function(e){return n.m_mapRooms.delete(e)}))},e.prototype.UpdateUserState=function(e){for(var t=0,n=e.user_chat_room_state();t<n.length;t++){var o=n[t],r=o.chat_id(),i=this.m_mapRooms.get(r);i&&i.UpdateUserState(o)}this.m_rtTimeJoined=e.time_joined(),this.m_rtLastAck=e.time_last_group_ack(),this.m_eUserDesktopNotificationLevel=e.desktop_notification_level(),this.m_eUserMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted()},e.prototype.UpdateChatRoomHeaderState=function(e){Object(y.a)(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.m_strTagLine=e.tagline(),null!=e.avatar_sha()&&(this.m_strAvatarSHA=Object(b.a)(e.avatar_sha())),this.m_strAvatarUGCURL=e.avatar_ugc_url()||"",this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_defaultRoleID=e.default_role_id(),this.m_roles=e.roles().map((function(e){return{role_id:e.role_id(),name:e.name(),ordinal:e.ordinal()}}));for(var t=0,n=this.m_roles;t<n.length;t++){var o=n[t];this.LOG("role "+o.role_id+" "+o.name)}this.m_roleActions=e.role_actions().map((function(e){return new I(e)}));for(var r=0,i=this.m_roleActions;r<i.length;r++){var a=i[r];this.LOG("role/action "+a.toString())}this.SetOwnerAppID(e.appid()),this.SetNameCheckingForAppLocalization(e.chat_name()),this.m_rgPartyBeacons=e.party_beacons().map((function(e){return{account_id:new u.a(e.steamid_owner()).GetAccountID(),app_id:e.app_id(),beacon_id:e.beacon_id(),game_metadata:e.game_metadata()}})),g.f.GroupMemberStore.OnPartyBeaconsUpdated(this.m_ulGroupID,this.m_rgPartyBeacons)},e.prototype.BIsCurrentUserAMember=function(){return!!this.m_rtTimeJoined},e.prototype.DefaultRoleID=function(){return this.m_defaultRoleID},e.prototype.GetRoleActions=function(e){for(var t=0,n=this.m_roleActions;t<n.length;t++){var o=n[t];if(o.role_id==e)return o}},e.prototype.GetRoles=function(){return this.m_roles},e.prototype.GetRoleOrdinal=function(e){for(var t=0,n=this.m_roles;t<n.length;t++){var o=n[t];if(o.role_id==e)return o.ordinal}},e.prototype.BIsUserGroupMember=function(e){for(var t=0,n=this.m_rgGroupMembersSummary;t<n.length;t++){if(n[t]==e.accountid)return!0}return!1},e.prototype.GetMemberRoleIDs=function(e){return null==this.m_groupMembers.GetExtra(e)?[]:this.m_groupMembers.GetExtra(e).m_role_ids},e.prototype.ToggleMemberRoleState=function(e,t){var n=this.BMemberHasRole(e,t);return this.SetMemberRoleState(e,t,!n)},e.prototype.SetMemberRoleState=function(e,t,n){if(n==this.BMemberHasRole(e,t))return Promise.resolve(!0);if(!this.BCanIAssignRole(t))return Promise.resolve(!1);var o,r=u.a.InitFromAccountID(e);return n?((o=h.b.Init(f.d)).Body().set_chat_group_id(this.GetGroupID()),o.Body().set_steamid(r.ConvertTo64BitString()),o.Body().set_role_id(t),f.X.AddRoleToUser(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then((function(e){return e.GetEResult(),1==e.GetEResult()}))):((o=h.b.Init(f.l)).Body().set_chat_group_id(this.GetGroupID()),o.Body().set_steamid(r.ConvertTo64BitString()),o.Body().set_role_id(t),f.X.DeleteRoleFromUser(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then((function(e){return e.GetEResult(),1==e.GetEResult()})))},e.prototype.BDoesRoleAllowAction=function(e,t){for(var n=0,o=this.m_roleActions;n<o.length;n++){var r=o[n];if(r.role_id==e&&r.BCanPerformAction(t))return!0}return!1},e.prototype.BCanIPerformActionOnUser=function(e,t,n){return void 0===n&&(n=!1),!(!n&&!this.BHasMember(e))&&(!this.BIsAccountIDOwner(e)&&this.BCanIPerformAction(t))},e.prototype.BHasMember=function(e){return void 0!==this.m_groupMembers.GetExtra(e)},e.prototype.BMemberHasRole=function(e,t){var n=this.m_groupMembers.GetExtra(e);return!!n&&n.BHasRole(t)},e.prototype.BCanIPerformAction=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;var t=this.m_chatStore.CMInterface.steamid.GetAccountID(),n=this.m_groupMembers.GetExtra(t);if(n)for(var o=0,r=n.m_role_ids;o<r.length;o++){var i=r[o];if(this.BDoesRoleAllowAction(i,e))return!0}return!1},e.prototype.BCanKickMember=function(e){return this.BCanIPerformActionOnUser(e,2)},e.prototype.BCanBanMember=function(e){return this.BCanIPerformActionOnUser(e,3)},e.prototype.BCanDeleteMemberMessages=function(e){if(g.f.FriendStore.self.accountid==e&&this.BIsAccountIDOwner(e))return!0;return this.BCanIPerformActionOnUser(e,2,!0)||this.BCanIPerformActionOnUser(e,3,!0)},e.prototype.BCanICreateRoles=function(){return this.BCanIPerformAction(8)},e.prototype.BCanIModifyRole=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(8))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(null==t)return!1;var n=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),8),o=this.GetRoleOrdinal(n);return null!=o&&o<t},e.prototype.BCanIAssignRoles=function(){return this.BCanIPerformAction(9)},e.prototype.BCanIAssignRole=function(e){if(this.BIsClanChatRoom())return!1;if(e==this.DefaultRoleID())return!1;if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(9))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(null==t)return!1;var n=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),9),o=this.GetRoleOrdinal(n);return null!=o&&o<t},e.prototype.BCanIMentionAll=function(){return this.BCanIPerformAction(10)},e.prototype.BCanIAssociateBroadcast=function(){return this.BCanIPerformAction(11)},e.prototype.GetHighestRankRoleIDForPermission=function(e,t){var n=void 0,o=Number.MAX_VALUE,r=this.m_groupMembers.GetExtra(e);if(r){for(var i=0,a=r.m_role_ids;i<a.length;i++){var s=a[i];if(this.BDoesRoleAllowAction(s,t)){var c=this.GetRoleOrdinal(s);c<o&&(n=s,o=c)}}return n}},e.prototype.GetDefaultChatRoom=function(){return this.m_mapRooms.get(this.m_ulDefaultChatID)},e.prototype.GetChatRoom=function(e){return this.m_mapRooms.get(e)},e.prototype.OnConnectionRestored=function(e){e&&this.UnloadGroupState(),this.m_mapRooms.forEach((function(e){return e.OnConnectionRestored()}))},e.prototype.OnRoomStateChange=function(e){this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.OnActivate=function(){if(!this.m_rtLastAck||this.hasUnreadChatMessage){var e=0;this.m_mapRooms.forEach((function(t){t.time_last_message&&(e=Math.max(e,t.time_last_message))})),this.m_rtLastAck=e||g.f.GetServerRTime32();var t=h.b.Init(f.c);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_timestamp(this.m_rtLastAck),f.X.AckChatMessage(g.f.CMInterface.GetServiceTransport(),t)}},e.prototype.InviteFriend=function(e,t){var n=u.a.InitFromAccountID(e),o=h.b.Init(f.u);o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n.ConvertTo64BitString()),t&&o.Body().set_chat_id(t.GetRoomID()),f.X.InviteFriendToChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){e.GetEResult()}))},e.prototype.SaveChatRoomGroup=function(e){var t=h.b.Init(f.I);return t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_name(e),f.X.SaveChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),t).then((function(e){var t=e.GetEResult();if(1!=t)throw t}))},e.prototype.RenameChatRoomGroup=function(e){var t=this;if(!e)return Promise.resolve(2);var n=this.m_strName;this.m_strName=e;var o=h.b.Init(f.B);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_name(e),f.X.RenameChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){return 1!=e.GetEResult()&&(t.m_strName=n),e.GetEResult()}))},e.prototype.SetChatRoomGroupTagline=function(e){var t=this,n=this.m_strTagLine;if(e.length>255&&(e=e.substring(0,255)),e==this.m_strTagLine)return Promise.resolve();this.m_strTagLine=e;var o=h.b.Init(f.M);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_tagline(e),f.X.SetChatRoomGroupTagline(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){1!=e.GetEResult()&&(t.m_strTagLine=n)}))},e.prototype.SetChatRoomGroupWatchingBroadcast=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e!=this.m_unWatchingBroadcastAccountID||t?((n=h.b.Init(f.N)).Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_watching_broadcast_accountid(e),t&&n.Body().set_watching_broadcast_channel_id(t),[4,f.X.SetChatRoomGroupWatchingBroadcast(this.m_chatStore.CMInterface.GetServiceTransport(),n)]):[2,Promise.resolve()];case 1:if(r=o.sent(),1!==(i=r.GetEResult()))throw i;return this.m_unWatchingBroadcastAccountID=e,this.m_strWatchingBroadcastChannelID=t,[2]}}))}))},e.prototype.SetChatRoomGroupAvatar=function(e){var t=this;if(e==this.m_strAvatarSHA)return Promise.resolve();var n=h.b.Init(f.L);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_avatar_sha(Object(b.c)(e)),f.X.SetChatRoomGroupAvatar(this.m_chatStore.CMInterface.GetServiceTransport(),n).then((function(n){var o=n.GetEResult();if(1!=o)throw o;t.m_strAvatarSHA=e}))},e.prototype.BCanInvite=function(){return this.BCanIPerformAction(4)},e.prototype.BCanBan=function(){return this.BCanIPerformAction(3)},e.prototype.BCanKick=function(){return this.BCanIPerformAction(2)},e.prototype.BCanAdminChannel=function(){return this.BCanIPerformAction(1)},e.prototype.BCanAdminGroup=function(){return this.BCanIPerformAction(5)},e.prototype.BCanChat=function(){return this.BCanIPerformAction(6)},e.prototype.BCanEditRoles=function(){return!this.BIsClanChatRoom()&&this.BCanIPerformAction(9)},Object.defineProperty(e.prototype,"members_to_highlight_name",{get:function(){return this.InternalGetMembersToHighlight(3,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"members_to_highlight",{get:function(){return this.InternalGetMembersToHighlight(4,!1)},enumerable:!1,configurable:!0}),e.prototype.InternalGetMembersToHighlight=function(e,t){var n=!t,o=!!this.m_rtTimeJoined,r=this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount;var i=r>e?e-1:e,a=g.f.FriendStore,s=a.self,c=[],l=a.GetPlayer(this.GetOwnerAccountID());if(l&&l.accountid!=s.accountid&&c.push(l),this.m_rgGroupMembersSummary){for(var u=0,p=this.m_rgGroupMembersSummary;u<p.length;u++){if((f=p[u])!=s.accountid&&!this.BIsAccountIDOwner(f)){var m=a.GetFriendIfCached(f);if(m&&(t||m.persona.BHasAvatarSet())&&(c.push(m),c.length>=i))break}}if(n&&c.length<i)for(var d=0,h=this.m_rgGroupMembersSummary;d<h.length;d++){var f;if((f=h[d])!=s.accountid&&!this.BIsAccountIDOwner(f)){var _=a.GetPlayer(f);if(_&&!_.is_friend&&(t||_.persona.BHasAvatarSet())&&(c.push(_),c.length>=i))break}}}return o&&c.length<i&&c.push(s),{members:c,remaining_count:r-c.length}},e.prototype.SetUserBanState=function(e,t){var n=u.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.P);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),o.Body().set_ban_state(t),f.X.SetUserBanState(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var t=e.GetEResult();if(1!=t&&29!=t)throw Object(y.a)(!1,"Failed to change ban state "+t),t}))},e.prototype.MuteUser=function(e,t){var n=u.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.A);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),o.Body().set_expiration(t),f.X.MuteUserInGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var t=e.GetEResult();if(1!=t)throw Object(y.a)(!1,"Failed to change muteexpiration "+t),t}))},e.prototype.KickUser=function(e,t){var n=this,o=u.a.InitFromAccountID(e).ConvertTo64BitString(),r=h.b.Init(f.x);return r.Body().set_chat_group_id(this.m_ulGroupID),r.Body().set_steamid(o),r.Body().set_expiration(t),f.X.KickUserFromGroup(this.m_chatStore.CMInterface.GetServiceTransport(),r).then((function(e){var t=e.GetEResult();if(1!=t)throw n.LOG("Kick returned "+t),t}))},e.prototype.RevokeInvite=function(e){var t=this,n=u.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.H);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),f.X.RevokeInviteToGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var n=e.GetEResult();if(1!=n)throw t.LOG("RevokeInvite returned "+n),n}))},e.prototype.CreateChatRoom=function(e,t){var n=this,o=h.b.Init(f.f);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_name(e),o.Body().set_allow_voice(t),f.X.CreateChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var t=e.Body().chat_room().chat_id();if(1!=e.GetEResult()||""==t||"0"==t)throw Object(y.a)(!1,"Failed to create chat room"),new Error("Failed to create chat room");return n.AddCreatedRoom(t,e.Body().chat_room())}))},e.prototype.CreateAndJoinTempVoiceRoom=function(){this.CreateChatRoom("",!0).then((function(e){e.StartVoiceChat()})).catch((function(){}))},e.prototype.AddCreatedRoom=function(e,t){var n=this.m_mapRooms.get(e);return n||(n=new l.a(this.m_chatStore,this,e,!1),this.m_mapRooms.set(e,n)),n.UpdateChatState(t),n},e.prototype.RenameRoom=function(e,t){if(e!=this.m_ulDefaultChatID&&t){var n=this.GetChatRoom(e);if(n){var o=n.name;n.ChangeNameWhileWaitingForRenameRequest(t);var r=h.b.Init(f.C);r.Body().set_chat_group_id(this.m_ulGroupID),r.Body().set_chat_id(e),r.Body().set_name(t),f.X.RenameChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),r).then((function(e){1==e.GetEResult()||(Object(y.a)(!1,"Failed to change room name"),n.ChangeNameWhileWaitingForRenameRequest(o))}))}}},e.prototype.ReorderRoom=function(e,t){var n=h.b.Init(f.E);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(e),n.Body().set_move_after_chat_id(t),f.X.ReorderChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),n).then((function(e){1==e.GetEResult()||Object(y.a)(!1,"Failed to reorder room")}))},e.prototype.DeleteChatRoom=function(e){var t=this,n=h.b.Init(f.j);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(e),f.X.DeleteChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),n).then((function(n){1==n.GetEResult()?t.RemoveRoom(e):Object(y.a)(!1,"Failed to delete chat room")}))},e.prototype.RemoveRoom=function(e){this.m_mapRooms.delete(e)},e.prototype.LeaveChatRoomGroup=function(e){this.m_chatStore.LeaveChatRoomGroup(e,this.m_ulGroupID).catch((function(){}))},e.prototype.GetInviteLinksForGroup=function(){var e=h.b.Init(f.q);return e.Body().set_chat_group_id(this.GetGroupID()),f.X.GetInviteLinksForGroup(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then((function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInviteLinks:null}:{loadingState:"loaded",rgInviteLinks:e.Body().invite_links()}}))},e.prototype.GetInvitedUsersForGroup=function(){var e=h.b.Init(f.r);return e.Body().set_chat_group_id(this.GetGroupID()),f.X.GetInviteList(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then((function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInvitedUsers:null}:{loadingState:"loaded",rgInvitedUsers:e.Body().invites()}}))},e.prototype.GetBanList=function(){var e=h.b.Init(f.n);return e.Body().set_chat_group_id(this.GetGroupID()),f.X.GetBanList(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then((function(e){var t=new M;return 15==e.GetEResult()?t.loadingState="denied":1==e.GetEResult()?(t.rgBans=e.Body().bans(),t.loadingState="loaded"):t.loadingState="failed",t}))},e.prototype.GetRoleName=function(e){var t=this.m_roles.findIndex((function(t){return t.role_id==e}));if(t>=0)return this.m_roles[t].name},e.prototype.CreateRole=function(e){var t=this;if(0==(e=e.trim()).length)return Promise.resolve();var n=h.b.Init(f.h);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_name(e),this.m_roles.push({role_id:"-1",name:e,ordinal:Number.MAX_VALUE}),f.X.CreateRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(n){var o=n.GetEResult();if(1!=o){var r=t.m_roles.findIndex((function(e){return"-1"==e.role_id}));throw r>=0&&t.m_roles.splice(r,1),new Error("unable to create role, error "+o)}t.LOG("created role "+e)}))},e.prototype.DeleteRole=function(e){var t=this,n=h.b.Init(f.m);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_role_id(e),f.X.DeleteRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(n){if(1!=n.GetEResult())throw new Error("unable to delete role "+e);var o=t.m_roles.findIndex((function(t){return t.role_id==e}));o>=0&&t.m_roles.splice(o,1)}))},e.prototype.RenameRole=function(e,t){var n=this;if(0==(t=t.trim()).length)return Promise.resolve();var o=h.b.Init(f.D);return o.Body().set_chat_group_id(this.GetGroupID()),o.Body().set_role_id(e),o.Body().set_name(t),f.X.RenameRole(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then((function(o){var r=o.GetEResult();if(1!=r)throw new Error("unable to rename role "+e+" "+r);var i=n.m_roles.findIndex((function(t){return t.role_id==e}));i>=0&&(n.m_roles[i].name=t)}))},e.prototype.ReorderRole=function(e,t){var n=h.b.Init(f.F);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_role_id(e),n.Body().set_ordinal(t),f.X.ReorderRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(e){return 1==e.GetEResult()}))},e.prototype.SetRoleAction=function(e,t,n){var o=this,r=this.GetRoleActions(e);if(r){if(n==r.BCanPerformAction(t))return;var i=r.BCanPerformAction(t);r.SetCanPerformAction(t,n);var a=h.b.Init(f.G);return a.Body().set_chat_group_id(this.GetGroupID()),a.Body().set_role_id(e),a.Body().set_actions(r.roleActions),f.X.ReplaceRoleActions(g.f.ChatStore.CMInterface.GetServiceTransport(),a).then((function(e){1!=e.GetEResult()&&(r.SetCanPerformAction(t,i),o.LOG("SetRoleAction error, restoring "+t+" to "+i))}))}},e.prototype.DeleteInviteLink=function(e,t){var n=h.b.Init(f.k);if(n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_invite_code(e),t&&"loaded"==t.loadingState){var o=t.rgInviteLinks.findIndex((function(t){return t.invite_code()==e}));o>=0&&(t.rgInviteLinks.splice(o,1),this.LOG("removed link "+t.rgInviteLinks))}return f.X.DeleteInviteLink(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(e){return 1==e.GetEResult()}))},e.prototype.SetNotificationPreferences=function(e,t,n){var o=h.b.Init(f.Q);return o.Body().set_chat_group_id(this.m_ulGroupID),void 0!==e&&(this.m_eUserDesktopNotificationLevel=e,o.Body().chat_group_preferences().set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(n=!1)),void 0!==t&&(this.m_eUserMobileNotificationLevel=t,o.Body().chat_group_preferences().set_mobile_notification_level(t)),void 0!==n&&(this.m_bUnreadIndicatorMuted=n,o.Body().chat_group_preferences().set_unread_indicator_muted(n)),f.X.SetUserChatGroupPreferences(g.f.CMInterface.GetServiceTransport(),o).then((function(e){return 1==e.GetEResult()}))},e.prototype.AddMetaMentionsToResults=function(e,t){var n=this.BCanIMentionAll()?"":Object(d.d)("#ChatMentionSuggest_NoPermission");"online".startsWith(e)&&t.unshift({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"online",strNotSelectable:n}),"all".startsWith(e)&&t.unshift({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"all",strNotSelectable:n})},e.prototype.SearchMembers=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=!1);for(var o=[],r=e.toLocaleLowerCase(),i=this.m_chatStore.CMInterface.steamid.GetAccountID(),a=[],s=[],c=0,l=this.memberList.member_list;c<l.length;c++){var u=l[c];if(u.accountid!=i){if(r.length){var p=u.MatchSearchString(r),m=0===p.iOffset;if(0==p.match||n&&!m)continue;var d={friend:u,iMatchOffset:p.iOffset,bNicknameMatch:2==p.match};m?p.bFullMatch?a.unshift(d):a.push(d):s.push(d)}else o.push({friend:u,iMatchOffset:0,bNicknameMatch:!1});if(o.length+a.length>=t)break}}for(var h=0;h<a.length&&o.length<t;h++)o.push(a[h]);for(h=0;h<s.length&&o.length<t;h++)o.push(s[h]);return o},e.prototype.BNameMatchesSearch=function(e){return-1!=this.name.toLocaleLowerCase().indexOf(e)},Object(o.c)([m.B],e.prototype,"m_rtTimeJoined",void 0),Object(o.c)([m.B],e.prototype,"m_rtLastAck",void 0),Object(o.c)([m.B],e.prototype,"m_unOwnerAccountID",void 0),Object(o.c)([m.B],e.prototype,"m_bFullStateLoaded",void 0),Object(o.c)([m.B],e.prototype,"m_strName",void 0),Object(o.c)([m.B],e.prototype,"m_strTagLine",void 0),Object(o.c)([m.B],e.prototype,"m_strAvatarSHA",void 0),Object(o.c)([m.B],e.prototype,"m_strAvatarUGCURL",void 0),Object(o.c)([m.B],e.prototype,"m_unWatchingBroadcastAccountID",void 0),Object(o.c)([m.B],e.prototype,"m_strWatchingBroadcastChannelID",void 0),Object(o.c)([m.B],e.prototype,"m_rgPartyBeacons",void 0),Object(o.c)([m.B],e.prototype,"m_eUserDesktopNotificationLevel",void 0),Object(o.c)([m.B],e.prototype,"m_eUserMobileNotificationLevel",void 0),Object(o.c)([m.B],e.prototype,"m_bUnreadIndicatorMuted",void 0),Object(o.c)([m.B],e.prototype,"m_roles",void 0),Object(o.c)([m.B],e.prototype,"m_rgGroupMembersSummary",void 0),Object(o.c)([m.B],e.prototype,"m_cMemberSummaryCount",void 0),Object(o.c)([m.B],e.prototype,"m_bMemberListVirtualized",void 0),Object(o.c)([m.n],e.prototype,"name",null),Object(o.c)([m.n],e.prototype,"hasAvatarSHA",null),Object(o.c)([m.n],e.prototype,"hasIcon",null),Object(o.c)([m.n],e.prototype,"avatar_url_small",null),Object(o.c)([m.n],e.prototype,"avatar_url_medium",null),Object(o.c)([m.n],e.prototype,"avatar_url_full",null),Object(o.c)([m.n],e.prototype,"chatRoomList",null),Object(o.c)([m.n],e.prototype,"textRoomList",null),Object(o.c)([m.n],e.prototype,"voiceRoomList",null),Object(o.c)([m.n],e.prototype,"hasVoiceRoom",null),Object(o.c)([m.n],e.prototype,"hasUnreadChatMessage",null),Object(o.c)([m.n],e.prototype,"HasUnreadMention",null),Object(o.c)([m.n],e.prototype,"time_last_activity",null),Object(o.c)([m.n],e.prototype,"room_with_last_message",null),Object(o.c)([m.k],e.prototype,"ChangeMemberRank",null),Object(o.c)([m.k],e.prototype,"ChangeMemberRoles",null),Object(o.c)([m.k],e.prototype,"SetInitialGroupState",null),Object(o.c)([m.k],e.prototype,"UpdateGroupStateFromSummary",null),Object(o.c)([m.k],e.prototype,"SetNameCheckingForAppLocalization",null),Object(o.c)([m.k],e.prototype,"UpdateGroupState",null),Object(o.c)([m.k],e.prototype,"UnloadActiveGroupState",null),Object(o.c)([m.k],e.prototype,"UnloadGroupState",null),Object(o.c)([m.k],e.prototype,"UnloadAndResetGroupState",null),Object(o.c)([m.k],e.prototype,"UpdateChatRoomState",null),Object(o.c)([m.k],e.prototype,"UpdateUserState",null),Object(o.c)([m.k],e.prototype,"UpdateChatRoomHeaderState",null),Object(o.c)([m.k],e.prototype,"OnActivate",null),Object(o.c)([m.n],e.prototype,"members_to_highlight_name",null),Object(o.c)([m.n],e.prototype,"members_to_highlight",null),Object(o.c)([m.k],e.prototype,"AddCreatedRoom",null),Object(o.c)([m.k],e.prototype,"RemoveRoom",null),e}(),w=function(e){function t(t,n){var o=e.call(this)||this;return o.LOG=s.b.create((function(){return o.GetUniqueID()}),!1),o.m_mapChatViews=new Map,o.m_bShowSettingsDialog=!1,o.m_bShowBroadcast=!1,o.m_bChatHidden=!1,o.m_bShowGlobalChat=!1,o.m_bMemberSearchActive=!1,o.m_strMemberSearchString="",o.m_bSearchError=!1,o.m_tabset=t,o.m_group=n,o.m_group.BIsValid()&&o.SelectChat(o.m_group.GetDefaultChatID()),o.m_disposeChatRooms=Object(m.l)((function(){var e=o.m_group.chatRoomList;o.m_selectedChatView&&e.length&&e.indexOf(o.m_selectedChatView.chat)<0&&o.SelectChat(o.m_group.GetDefaultChatID())})),o}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"search_results",{get:function(){return this.m_rgSearchResults},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"has_search_error",{get:function(){return this.m_bSearchError},enumerable:!1,configurable:!0}),t.prototype.GetGroup=function(){return this.m_group},t.prototype.GetSelectedChatView=function(){return this.m_selectedChatView},t.prototype.GetActiveChatView=function(){return this.GetPopoverChatView()||this.GetSelectedChatView()},t.prototype.GetPopoverChatView=function(){return this.m_popoverChatView},Object.defineProperty(t.prototype,"isBroadcastShown",{get:function(){return this.m_bShowBroadcast},enumerable:!1,configurable:!0}),t.prototype.ShowBroadcast=function(){this.m_bShowBroadcast=!0,this.SetLayoutForBroadcast()},t.prototype.SetLayoutForBroadcast=function(){var e=this;this.SetChannelListCollapsed(!0,!1),this.SetMemberListCollapsed(!0,!1),SetBackgroundTimeout((function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()}),30)},t.prototype.HideBroadcast=function(){this.m_bShowBroadcast=!1,this.SetLayoutForHiddenBroadcast()},t.prototype.SetLayoutForHiddenBroadcast=function(){var e=this;g.f.UIStore.SetTheaterMode(!1),SetBackgroundTimeout((function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()}),30)},t.prototype.SetVerticalBroadcastChat=function(e){this.m_bShowVerticalBroadcastChat=e},t.prototype.ToggleTheaterModeBroadcastChat=function(){g.f.UIStore.SetTheaterMode(!g.f.UIStore.GetTheaterMode())},t.prototype.SetChatHidden=function(e){this.m_bChatHidden=e},t.prototype.SetGlobalBroadcastChatShown=function(e){this.m_bShowGlobalChat=e,this.GetActiveChatView()&&this.GetActiveChatView().OnChatFrameChanged()},t.prototype.SetLocalBroadcastId=function(e){this.m_strLocalBroadcastId=e},t.prototype.SetMemberListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bMemberListCollapsedOverride=void 0;var n=this.GetGroup();g.f.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(n.GetGroupID(),"bMemberListCollapsed",e)}else this.m_bMemberListCollapsedOverride=e},t.prototype.SetChannelListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bChannelListCollapsedOverride=void 0;var n=this.GetGroup();g.f.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(n.GetGroupID(),"bChannelListCollapsed",e)}else this.m_bChannelListCollapsedOverride=e},t.prototype.ClosePopoverChat=function(){this.m_popoverChatView&&(this.m_popoverChatView.OnViewClosed(),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_popoverChatView=null)},t.prototype.SelectChat=function(e){var t=this,n=this.m_group.GetChatRoom(e);if(n){if(n.GetVoiceAllowed()&&n!=this.m_group.GetDefaultChatRoom()){if(this.m_popoverChatView&&this.m_popoverChatView.chat==n)return}else if(this.ClosePopoverChat(),this.m_selectedChatView&&this.m_selectedChatView.chat==n)return;n.GetVoiceAllowed()&&this.m_group.GetDefaultChatRoom()!=n?(this.ClosePopoverChat(),this.m_popoverChatView=this.GetChatViewForRoom(n),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeActiveVoice=Object(m.J)((function(){return!n.BVoiceActive()}),(function(){t.m_popoverChatView&&t.m_popoverChatView.chat==n&&t.ClosePopoverChat()}))):(this.m_selectedChatView&&this.m_selectedChatView.OnViewClosed(),this.m_selectedChatView=this.GetChatViewForRoom(n)),this.m_tabset.activeTab==this&&this.m_tabset.is_popup_focused&&this.OnTabActivate()}},t.prototype.SelectNextChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,n=e>=t.length-1?0:e+1;this.SelectChat(t[n].GetRoomID())},t.prototype.SelectPreviousChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,n=e<=0?t.length-1:e-1;this.SelectChat(t[n].GetRoomID())},t.prototype.GetSelectedChannelIndex=function(){var e=this.GetSelectedChatView().chat.GetRoomID();return this.GetGroup().textRoomList.findIndex((function(t){return t.GetRoomID()===e}))},t.prototype.GetChatViewForRoom=function(e){var t=e.GetRoomID(),n=this.m_mapChatViews.get(t);return n?this.LOG("reusing chat for "+t):n=new c.a(this.m_tabset,e,this),n},t.prototype.StartRoomRename=function(e){this.m_ulRenameChatRoomID=e},t.prototype.EndRoomRename=function(){this.m_ulRenameChatRoomID=""},t.prototype.IsRoomRenameActive=function(e){return""!=this.m_ulRenameChatRoomID&&this.m_ulRenameChatRoomID==e},t.prototype.GetRenameRoomID=function(){return this.m_ulRenameChatRoomID},t.prototype.OnTabClosed=function(){this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeChatRooms&&this.m_disposeChatRooms(),this.m_VirtualizedMemberList&&g.f.ChatStore.UnregisterVirtualizedMemberListView(this.m_VirtualizedMemberList),this.ClosePopoverChat(),this.GetSelectedChatView().OnViewClosed(),g.f.ChatStore.DecRefActiveChatRoomGroup(this.GetGroup().GetGroupID())},t.prototype.IsVoiceActive=function(){return g.f.ChatStore.VoiceChat.GetActiveChatRoomGroupID()==this.m_group.GetGroupID()},t.prototype.IsTabForChat=function(e){if(!(e instanceof l.a))return!1;var t=e;return!!this.m_group.GetChatRoom(t.GetRoomID())},t.prototype.GetUnreadMessageCount=function(){return this.m_group.hasUnreadChatMessage?1:0},t.prototype.UpdateMemberSearch=function(e){var t=this;this.m_bMemberSearchActive&&this.m_strMemberSearchString==e||(this.m_bMemberSearchActive=!0,this.m_strMemberSearchString=e||"",e?this.SearchMembers(e,200).then((function(e){t.m_rgSearchResults=e,t.m_bSearchError=!1}),(function(e){console.warn("Failed to filter members: "+e),t.m_bSearchError=!0})):this.m_rgSearchResults=void 0)},t.prototype.ClearMemberSearch=function(){this.m_bMemberSearchActive=!1,this.m_strMemberSearchString="",this.m_rgSearchResults=void 0},t.prototype.IsMemberSearchActive=function(){return this.m_bMemberSearchActive},t.prototype.GetMemberSearch=function(){return this.m_strMemberSearchString},Object.defineProperty(t.prototype,"normalizedMemberSearch",{get:function(){return this.m_strMemberSearchString.trim().toLocaleLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMemberListExpanded",{get:function(){if(this.m_bMemberSearchActive)return!0;if(void 0===this.m_bMemberListCollapsedOverride){var e=this.GetGroup();return!g.f.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bMemberListCollapsed")}return!this.m_bMemberListCollapsedOverride},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChannelListCollapsed",{get:function(){if(void 0===this.m_bChannelListCollapsedOverride){var e=this.GetGroup();return g.f.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bChannelListCollapsed")}return this.m_bChannelListCollapsedOverride},enumerable:!1,configurable:!0}),t.prototype.GetTabName=function(){return this.m_group.name},t.prototype.GetUniqueID=function(){return this.m_group.unique_id},t.prototype.OnTabFocus=function(){var e=this.GetActiveChatView();e&&e.OnFocus()},t.prototype.InternalOnTabActivate=function(){var e=this.GetActiveChatView();e&&e.OnActivate()},t.prototype.OnTabDeactivate=function(){var e=this.GetActiveChatView();e&&e.OnDeactivate()},t.prototype.IsChatRoom=function(){return!0},t.prototype.GetChatView=function(){return this.GetActiveChatView()},t.prototype.GetMemberCountTotal=function(){return this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetMemberCountTotal():this.m_group.memberCountTotal},t.prototype.GetMemberCountOnline=function(){return this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetMemberCountOnline():this.m_group.memberCountOnline},t.prototype.GetMemberCountInGame=function(){return this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetMemberCountInGame():this.m_group.memberCountInGame},t.prototype.GetVirtualizedMemberListView=function(){return this.m_VirtualizedMemberList||(this.m_VirtualizedMemberList=new S(this.m_group.GetGroupID()),g.f.ChatStore.RegisterVirtualizedMemberListView(this.m_VirtualizedMemberList)),this.m_VirtualizedMemberList},t.prototype.SearchMembers=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return this.m_group.BIsMemberListVirtualized()?[2,this.GetVirtualizedMemberListView().PerformSearch(this.m_group,"1",e)]:[2,this.m_group.SearchMembers(e,t)]}))}))},t.prototype.BIsMemberNameAmbiguous=function(e){return!!this.m_group.BIsMemberListVirtualized()||this.m_group.SearchMembers(e,2,!0).length>=2},t.prototype.ProcessMentions=function(e){e.replace(/＠/g,"@");for(var t=e.indexOf("@");-1!==t;){for(var n=e.indexOf("@",t+1),o=e.indexOf(" ",t+1),r=Math.min(-1===n?e.length:n,-1===o?e.length:o),i=e.substr(t+1,r-t-1).toLocaleLowerCase(),a=void 0,s=void 0,c=0,l=this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetAllKnownPersonas():this.m_group.memberList.member_list_unsorted;c<l.length;c++){var u=l[c],p=Object(C.f)(u.player_name_normalized),m=p+"#"+u.accountid.toString(36);if(m.startsWith(i)){var d=void 0,h=m.length===i.length,f=h||p.length===i.length;(f||h)&&(d=i.length),!h&&e.length-t-1>=m.length&&e.substr(t+1,m.length).toLocaleLowerCase()===m&&(f=h=!0,d=m.length),!f&&e.length-t-1>=p.length&&e.substr(t+1,p.length).toLocaleLowerCase()===p&&(d=p.length),d&&(void 0===s||d>=s)&&(a=u,s=d)}}var _=!1;this.m_group.BCanIMentionAll()&&(_="online"==i||"online#0"==i||"all"==i||"all#0"==i);var g=void 0,b=void 0,v=void 0;if(_&&(void 0===s||s<=i.length)){var y=i;-1!==i.indexOf("#")&&(y=i.substr(0,i.indexOf("#"))),g=y,b=y,v=i.length,"online"==g&&(g="here")}else a&&void 0!==s&&(g=""+a.accountid,b=a.persona.m_strPlayerName,v=s);if(b&&void 0!==v){var S=e.substr(0,t),O=e.substr(t+1+v),I="[mention="+g+"]@"+Object(C.f)(b)+"[/mention]";n=(e=S+I+O).indexOf("@",S.length+I.length)}t=n}return e},Object(o.c)([m.B],t.prototype,"m_selectedChatView",void 0),Object(o.c)([m.B],t.prototype,"m_popoverChatView",void 0),Object(o.c)([m.B],t.prototype,"m_bShowSettingsDialog",void 0),Object(o.c)([m.B],t.prototype,"m_ulRenameChatRoomID",void 0),Object(o.c)([m.B],t.prototype,"m_bShowBroadcast",void 0),Object(o.c)([m.B],t.prototype,"m_bShowVerticalBroadcastChat",void 0),Object(o.c)([m.B],t.prototype,"m_strLocalBroadcastId",void 0),Object(o.c)([m.B],t.prototype,"m_bChatHidden",void 0),Object(o.c)([m.B],t.prototype,"m_bShowGlobalChat",void 0),Object(o.c)([m.B],t.prototype,"m_bMemberSearchActive",void 0),Object(o.c)([m.B],t.prototype,"m_strMemberSearchString",void 0),Object(o.c)([m.B.ref],t.prototype,"m_rgSearchResults",void 0),Object(o.c)([m.B],t.prototype,"m_bSearchError",void 0),Object(o.c)([m.B],t.prototype,"m_bMemberListCollapsedOverride",void 0),Object(o.c)([m.B],t.prototype,"m_bChannelListCollapsedOverride",void 0),Object(o.c)([m.k],t.prototype,"ShowBroadcast",null),Object(o.c)([m.k.bound],t.prototype,"HideBroadcast",null),Object(o.c)([m.k.bound],t.prototype,"SetVerticalBroadcastChat",null),Object(o.c)([m.k],t.prototype,"ToggleTheaterModeBroadcastChat",null),Object(o.c)([m.k],t.prototype,"SetChatHidden",null),Object(o.c)([m.k],t.prototype,"SetGlobalBroadcastChatShown",null),Object(o.c)([m.k],t.prototype,"SetLocalBroadcastId",null),Object(o.c)([m.k],t.prototype,"SetMemberListCollapsed",null),Object(o.c)([m.k],t.prototype,"SetChannelListCollapsed",null),Object(o.c)([m.k],t.prototype,"ClosePopoverChat",null),Object(o.c)([m.k],t.prototype,"SelectChat",null),Object(o.c)([m.k],t.prototype,"SelectNextChannel",null),Object(o.c)([m.k],t.prototype,"SelectPreviousChannel",null),Object(o.c)([m.k],t.prototype,"StartRoomRename",null),Object(o.c)([m.k],t.prototype,"EndRoomRename",null),Object(o.c)([m.k],t.prototype,"OnTabClosed",null),Object(o.c)([m.k],t.prototype,"UpdateMemberSearch",null),Object(o.c)([m.k],t.prototype,"ClearMemberSearch",null),Object(o.c)([m.n],t.prototype,"isMemberListExpanded",null),Object(o.c)([m.n],t.prototype,"isChannelListCollapsed",null),t}(p.b),M=function(){function e(){this.loadingState="pending"}return Object(o.c)([m.B],e.prototype,"loadingState",void 0),Object(o.c)([m.B],e.prototype,"rgBans",void 0),e}(),D={bMemberListCollapsed:void 0,bChannelListCollapsed:void 0},T=function(){function e(){this.m_mapDisplayPrefs=m.B.map()}return e.prototype.Init=function(e){var t=this;this.m_SettingsStore=e,this.m_SettingsStore.GetObjectFromLocalStorageWhenReady("ChatRoomGroupDisplayPrefs").then((function(e){for(var n in t.m_mapDisplayPrefs.clear(),e.chatRoomGroups)t.m_mapDisplayPrefs.set(n,e.chatRoomGroups[n])}))},e.prototype.GetChatRoomDisplayPref=function(e,t){return(this.m_mapDisplayPrefs.get(e)||D)[t]},e.prototype.ToggleChatRoomDisplayPref=function(e,t){var n=this.GetChatRoomDisplayPref(e,t);this.SetChatRoomDisplayPref(e,t,!n)},e.prototype.SetChatRoomDisplayPref=function(e,t,n){var o=this.m_mapDisplayPrefs.get(e);o&&o[t]===n||(o||(this.m_mapDisplayPrefs.set(e,Object.assign({},D)),o=this.m_mapDisplayPrefs.get(e)),o[t]=n,this.WritePrefs())},e.prototype.WritePrefs=function(){this.m_SettingsStore.StoreObjectInLocalStorage("ChatRoomGroupDisplayPrefs",{chatRoomGroups:this.m_mapDisplayPrefs.toJSON()})},e.prototype.FillInChatUsabilityMetrics=function(e){var t=Array.from(this.m_mapDisplayPrefs.values());e.ui_state().set_group_chat_left_col_collapsed(r.b(t,(function(e){return e.bChannelListCollapsed}))),e.ui_state().set_group_chat_right_col_collapsed(r.b(t,(function(e){return e.bMemberListCollapsed})))},Object(o.c)([m.k],e.prototype,"SetChatRoomDisplayPref",null),e}(),j=function(){function e(){this.m_mapAccountToExtra=m.B.map(),this.m_bMemberDataVirtualized=!1}return e.prototype.GetCurrentMemberSet=function(){var e=new Set;return this.m_mapAccountToExtra.forEach((function(t,n){e.add(n)})),e},e.prototype.SetMemberDataVirtualized=function(e){this.m_bMemberDataVirtualized=e},Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.m_mapAccountToExtra.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,n=0,o=this.member_list_unsorted;n<o.length;n++){var r=o[n];r.persona.is_online&&(e++,r.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!1,configurable:!0}),e.prototype.Clear=function(){this.m_mapAccountToExtra.clear(),this.m_bMemberDataVirtualized=!1},e.prototype.AddMember=function(e,t){void 0===t&&(t=void 0),this.HasMember(e)||this.m_mapAccountToExtra.set(e,t)},e.prototype.RemoveMember=function(e){this.HasMember(e)&&this.m_mapAccountToExtra.delete(e)},e.prototype.GetExtra=function(e){return this.m_mapAccountToExtra.get(e)},e.prototype.HasMember=function(e){return this.m_mapAccountToExtra.has(e)},Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(_.b.DefaultFriendSortComparator),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){Object(y.a)(!this.m_bMemberDataVirtualized,"Shouldn't be accessing member_list when virtualized");var e=[];return this.m_bMemberDataVirtualized||this.m_mapAccountToExtra.forEach((function(t,n){e.push(g.f.FriendStore.GetPlayer(n))})),e},enumerable:!1,configurable:!0}),Object(o.c)([m.n],e.prototype,"unfiltered_count",null),Object(o.c)([m.n],e.prototype,"member_counts",null),Object(o.c)([m.k],e.prototype,"Clear",null),Object(o.c)([m.k],e.prototype,"AddMember",null),Object(o.c)([m.k],e.prototype,"RemoveMember",null),Object(o.c)([m.n],e.prototype,"member_list",null),Object(o.c)([m.n],e.prototype,"member_list_unsorted",null),e}()},VZeO:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return G}));var o,r=n("mrSG"),i=n("tkkQ"),a=n("4HGb"),s=n("Ezvv"),c=n("RBVV"),l=n("7t13"),u=n("48Gm"),p=n("LAqV"),m=function(){function e(e,t){if(!(e instanceof BaseAudioContext))throw"Not a valid audio context.";t||(t={});var n=t.numberOfChannels||1;if(n>2)throw"The maximum supported number of channels is two.";this.context_=e;var o=t.bufferSize||0;this.attack=t.attack||0,this.release=t.release||0;var r=void 0===t.timeConstant?.0025:t.timeConstant;this.threshold=void 0===t.threshold?-100:t.threshold,this.alpha_=this.getAlphaFromTimeConstant_(r,this.context_.sampleRate),this.noiseGateKernel_=this.context_.createScriptProcessor(o,n,n),this.noiseGateKernel_.onaudioprocess=this.onaudioprocess_.bind(this),this.input=new GainNode(this.context_),this.output=new GainNode(this.context_),this.input.connect(this.noiseGateKernel_).connect(this.output),this.previousLevel_=0,this.previousWeight_=1,this.channel_=new Float32Array(this.noiseGateKernel_.bufferSize),this.envelope_=new Float32Array(this.noiseGateKernel_.bufferSize),this.weights_=new Float32Array(this.noiseGateKernel_.bufferSize)}return e.prototype.onaudioprocess_=function(e){var t=e.inputBuffer,n=t.getChannelData(0);if(2===t.numberOfChannels)for(var o=t.getChannelData(1),r=0;r<o.length;r++)this.channel_[r]=(n[r]+o[r])/2;else this.channel_=n;var i=this.detectLevel_(this.channel_),a=this.computeWeights_(i);for(r=0;r<t.numberOfChannels;r++)for(var s=t.getChannelData(r),c=e.outputBuffer.getChannelData(r),l=0;l<s.length;l++)c[l]=a[l]*s[l]},e.prototype.detectLevel_=function(e){this.envelope_[0]=this.alpha_*this.previousLevel_+(1-this.alpha_)*Math.pow(e[0],2);for(var t=1;t<e.length;t++)this.envelope_[t]=this.alpha_*this.envelope_[t-1]+(1-this.alpha_)*Math.pow(e[t],2);return this.previousLevel_=this.envelope_[this.envelope_.length-1],this.envelope_},e.prototype.computeWeights_=function(t){var n=1,o=1;this.attack>0&&(n=1/Math.ceil(this.context_.sampleRate*this.attack)),this.release>0&&(o=1/Math.ceil(this.context_.sampleRate*this.release));for(var r=0;r<t.length;r++){if(e.toDecibel(2*t[r])<this.threshold){var i=this.previousWeight_-n;this.weights_[r]=Math.max(i,0)}else{i=this.previousWeight_+o;this.weights_[r]=Math.min(i,1)}this.previousWeight_=this.weights_[r]}return this.weights_},e.prototype.getAlphaFromTimeConstant_=function(e,t){return Math.exp(-1/(t*e))},e.toDecibel=function(e){return 10*Math.log10(e)},e}(),d=n("2vnA"),h=function(){function e(e,t){this.m_Analyser=void 0,this.m_rgInputNode=[],this.m_hUpdateInterval=0,this.m_buffer=void 0,this.m_lastTimeNonZero=0,this.m_flVolume=0,this.m_flRoundedVolume=0,this.m_flAveraging=.6,this.m_Analyser=t.createAnalyser(),this.m_Analyser.fftSize=128,this.m_buffer=new Float32Array(this.m_Analyser.fftSize),this.m_rgInputNode.push(e),e.connect(this.m_Analyser),this.StartUpdating()}return e.prototype.GetLastTimeNonZero=function(){return this.m_lastTimeNonZero},e.prototype.StartUpdating=function(){this.StopUpdating(),this.m_hUpdateInterval=SetBackgroundInterval(this.UpdateVolume,60)},e.prototype.StopUpdating=function(){0!=this.m_hUpdateInterval&&ClearBackgroundInterval(this.m_hUpdateInterval),this.m_hUpdateInterval=0},e.prototype.UpdateVolume=function(){this.m_Analyser.getFloatTimeDomainData(this.m_buffer);for(var e=0,t=0;t<this.m_buffer.length;++t){var n=this.m_buffer[t];e+=n*n}var o=Math.sqrt(e/this.m_buffer.length);this.m_flVolume=1.2*Math.max(o,this.m_flVolume*this.m_flAveraging);var r=Math.round(100*this.m_flVolume)/100;r!=this.m_flRoundedVolume&&(this.m_flRoundedVolume=r),this.m_flRoundedVolume>0&&(this.m_lastTimeNonZero=performance.now())},e.prototype.stop=function(){this.StopUpdating(),this.DisconnectAll()},e.prototype.Connect=function(e){this.m_rgInputNode.push(e),null!=this.m_Analyser&&e.connect(this.m_Analyser)},e.prototype.DisconnectAll=function(){for(var e=0;e<this.m_rgInputNode.length;++e){if(this.m_Analyser)try{this.m_rgInputNode[e].disconnect(this.m_Analyser)}catch(e){}this.m_rgInputNode[e]=void 0}this.m_rgInputNode=[]},Object.defineProperty(e.prototype,"rounded_volume",{get:function(){return this.m_flRoundedVolume},enumerable:!1,configurable:!0}),Object(r.c)([d.B],e.prototype,"m_lastTimeNonZero",void 0),Object(r.c)([d.B],e.prototype,"m_flVolume",void 0),Object(r.c)([d.B],e.prototype,"m_flRoundedVolume",void 0),Object(r.c)([d.k.bound],e.prototype,"UpdateVolume",null),Object(r.c)([d.k.bound],e.prototype,"stop",null),e}(),f=n("s+DT"),_=n("WpBz"),g=n("oh5H"),b=n("K4CH"),v=n("OJz+"),y=n("XaMz");!function(e){e[e.k_EAudioStreamType_Microphone=1]="k_EAudioStreamType_Microphone",e[e.k_EAudioStreamType_IncomingStream=2]="k_EAudioStreamType_IncomingStream"}(o||(o={}));var S,C,O=function(){function e(){this.destination_node=void 0,this.source_node=void 0,this.elem=void 0,this.output_gain_node=void 0,this.muted=!1,this.volume_meter=void 0}return Object(r.c)([d.B],e.prototype,"accountid",void 0),Object(r.c)([d.B],e.prototype,"muted",void 0),Object(r.c)([d.B],e.prototype,"volume_meter",void 0),e}();function I(e){switch(e){case C.k_EVoiceCallState_None:return"None";case C.k_EVoiceCallState_ScheduledInitiate:return"ScheduledInitiate";case C.k_EVoiceCallState_RequestedMicAccess:return"RequestedMicAccess";case C.k_EVoiceCallState_LocalMicOnly:return"LocalMicOnly";case C.k_EVoiceCallState_CreatePeerConnection:return"CreatePeerConnection";case C.k_EVoiceCallState_InitatedWebRTCSession:return"InitiatedWebRTCSession";case C.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected:return"WaitingOnICEConnected";case C.k_EVoiceCallState_RequestedPermission:return"RequestedPermission";case C.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession:return"NotifyingVoiceChatOfWebRTCSession";case C.k_EVoiceCallState_Connected:return"Connected"}}!function(e){e[e.k_ENoiseGateLevel_Off=0]="k_ENoiseGateLevel_Off",e[e.k_ENoiseGateLevel_Low=1]="k_ENoiseGateLevel_Low",e[e.k_ENoiseGateLevel_Medium=2]="k_ENoiseGateLevel_Medium",e[e.k_ENoiseGateLevel_High=3]="k_ENoiseGateLevel_High"}(S||(S={})),function(e){e[e.k_EVoiceCallState_None=0]="k_EVoiceCallState_None",e[e.k_EVoiceCallState_ScheduledInitiate=1]="k_EVoiceCallState_ScheduledInitiate",e[e.k_EVoiceCallState_RequestedMicAccess=2]="k_EVoiceCallState_RequestedMicAccess",e[e.k_EVoiceCallState_LocalMicOnly=3]="k_EVoiceCallState_LocalMicOnly",e[e.k_EVoiceCallState_CreatePeerConnection=4]="k_EVoiceCallState_CreatePeerConnection",e[e.k_EVoiceCallState_InitatedWebRTCSession=5]="k_EVoiceCallState_InitatedWebRTCSession",e[e.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected=6]="k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected",e[e.k_EVoiceCallState_RequestedPermission=7]="k_EVoiceCallState_RequestedPermission",e[e.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession=8]="k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession",e[e.k_EVoiceCallState_Connected=9]="k_EVoiceCallState_Connected"}(C||(C={}));var E=function(){function e(){this.m_eState=C.k_EVoiceCallState_None,this.m_targetAccountID=0,this.m_bInitiatedOneOnOneCall=!1,this.m_bWaitingOnOneOnOneRejoin=!1,this.m_bPostedOneOnOneEndedMsg=!1,this.m_voiceChatID="",this.m_webRTCConnectedNotification=void 0,this.m_webRTCServerIP=0,this.m_webRTCServerPort=0,this.m_webRTCClientIP=0,this.m_webRTCClientPort=0,this.m_nFailuresThisInitiate=0,this.m_bOfferUpdateInProgress=!1,this.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_nMostRecentRemoteDescriptionVersion="0"}return e.prototype.BMatchingCall=function(e,t){return 0!=e&&this.m_targetAccountID==e||!(!this.m_chatRoom||!t||this.m_chatRoom.chatID!=t.chatID||this.m_chatRoom.groupID!=t.groupID)},e.prototype.BCallActiveForGroup=function(e){return this.m_chatRoom&&this.m_chatRoom.groupID==e},Object(r.c)([d.B],e.prototype,"m_eState",void 0),Object(r.c)([d.B],e.prototype,"m_targetAccountID",void 0),Object(r.c)([d.B],e.prototype,"m_bInitiatedOneOnOneCall",void 0),Object(r.c)([d.B],e.prototype,"m_bWaitingOnOneOnOneRejoin",void 0),Object(r.c)([d.B],e.prototype,"m_bPostedOneOnOneEndedMsg",void 0),Object(r.c)([d.B],e.prototype,"m_chatRoom",void 0),Object(r.c)([d.B],e.prototype,"m_voiceChatID",void 0),Object(r.c)([d.B],e.prototype,"m_nFailuresThisInitiate",void 0),Object(r.c)([d.B],e.prototype,"m_bIsConnectionAttemptOverTwoSeconds",void 0),e}(),w=function(){return function(){this.m_SSRC=0,this.m_MostRecentDelayEstimateMs=0,this.m_MostRecentJitterReceivedMs=0,this.m_CurrentJitterBufferMs=0,this.m_PacketsReceived=0,this.m_PacketsLost=0,this.m_PacketsSent=0,this.m_BytesSent=0,this.m_googRTT=0,this.m_BytesReceived=0,this.m_DecodingThroughNetEQ=0,this.m_DecodingPacketLossCorrection=0,this.m_DecodingPacketLossFadeNoiseGeneration=0,this.m_DecodingComfortNoiseGeneration=0,this.m_DecodingNormal=0,this.m_DecodingSilenceGenerator=0,this.m_DecodingMuted=0}}(),M=function(){function e(e){this.m_VoiceInputGain=1,this.m_VoiceOutputGain=1,this.m_NoiseGateLevel=S.k_ENoiseGateLevel_Medium,this.m_VoiceUseEchoCancellation=!0,this.m_VoiceUseNoiseCancellation=!0,this.m_VoiceUseAutoGainControl=!0,this.m_SelectedMicID="default",this.m_SelectedOutputID="default",this.m_bPlayPTTSounds=!0,this.m_bSettingsLoaded=!1,this.m_bHasResetOpenMicHotkey=!1,this.m_SettingsStore=e}return e.prototype.SaveToLocalStorage=function(){this.m_SettingsStore.StoreObjectInLocalStorage("SteamVoiceSettings",{inputGain:this.m_VoiceInputGain,outputGain:this.m_VoiceOutputGain,noiseGateLevel:this.m_NoiseGateLevel,noiseCancellation:this.m_VoiceUseNoiseCancellation,echoCancellation:this.m_VoiceUseEchoCancellation,autoGainControl:this.m_VoiceUseAutoGainControl,selectedMic:this.m_SelectedMicID,selectedOutput:this.m_SelectedOutputID,pttSoundsEnabled:this.m_bPlayPTTSounds,hasResetOpenMicHotKey:this.m_bHasResetOpenMicHotkey})},e.prototype.LoadFromLocalStorage=function(e){var t=this;this.m_SettingsStore.GetObjectFromLocalStorageWhenReady("SteamVoiceSettings",void 0).then((function(n){null!=n&&(null!=n.inputGain&&(t.m_VoiceInputGain=n.inputGain),null!=n.outputGain&&(t.m_VoiceOutputGain=n.outputGain),null!=n.noiseGateLevel&&(t.m_NoiseGateLevel=n.noiseGateLevel),null!=n.noiseCancellation&&(t.m_VoiceUseNoiseCancellation=n.noiseCancellation),null!=n.autoGainControl&&(t.m_VoiceUseAutoGainControl=n.autoGainControl),null!=n.echoCancellation&&(t.m_VoiceUseEchoCancellation=n.echoCancellation),null!=n.selectedMic&&(t.m_SelectedMicID=n.selectedMic),null!=n.selectedOutput&&(t.m_SelectedOutputID=n.selectedOutput),null!=n.pttSoundsEnabled&&(t.m_bPlayPTTSounds=n.pttSoundsEnabled),null!=n.hasResetOpenMicHotKey&&(t.m_bHasResetOpenMicHotkey=n.hasResetOpenMicHotKey)),t.m_bSettingsLoaded=!0,e.LogMsg("(VoiceChat) Settings loaded from local storage"),e.RefreshPushToTalkKeySettings()}))},Object(r.c)([d.B],e.prototype,"m_VoiceInputGain",void 0),Object(r.c)([d.B],e.prototype,"m_VoiceOutputGain",void 0),Object(r.c)([d.B],e.prototype,"m_NoiseGateLevel",void 0),Object(r.c)([d.B],e.prototype,"m_VoiceUseEchoCancellation",void 0),Object(r.c)([d.B],e.prototype,"m_VoiceUseNoiseCancellation",void 0),Object(r.c)([d.B],e.prototype,"m_VoiceUseAutoGainControl",void 0),Object(r.c)([d.B],e.prototype,"m_SelectedMicID",void 0),Object(r.c)([d.B],e.prototype,"m_SelectedOutputID",void 0),Object(r.c)([d.B],e.prototype,"m_bPlayPTTSounds",void 0),Object(r.c)([d.B],e.prototype,"m_bSettingsLoaded",void 0),Object(r.c)([d.B],e.prototype,"m_bHasResetOpenMicHotkey",void 0),e}(),D=function(){function e(){this.muted=!1,this.gain=1}return Object(r.c)([d.B],e.prototype,"muted",void 0),Object(r.c)([d.B],e.prototype,"gain",void 0),e}(),T=function(){function e(){this.mic_muted_locally=!1,this.output_muted_locally=!1,this.has_no_mic_for_session=!1}return Object(r.c)([d.B],e.prototype,"mic_muted_locally",void 0),Object(r.c)([d.B],e.prototype,"output_muted_locally",void 0),Object(r.c)([d.B],e.prototype,"has_no_mic_for_session",void 0),e}(),j=function(){function e(){this.partner_accountid=0,this.voice_chatid="",this.previously_joined=!1,this.audio_repeat=0,this.audio_buffer=void 0}return e.prototype.ClearAudioRepeats=function(){0!=this.audio_repeat&&(ClearBackgroundTimeout(this.audio_repeat),this.audio_repeat=0),null!=this.audio_buffer&&(this.audio_buffer.StopPlayback(),this.audio_buffer=void 0)},Object(r.c)([d.B],e.prototype,"partner_accountid",void 0),Object(r.c)([d.B],e.prototype,"voice_chatid",void 0),Object(r.c)([d.B],e.prototype,"previously_joined",void 0),e}(),G=function(){function e(e){var t=this;if(this.m_VoiceCallState=new E,this.m_mapOneOnOneCallsWaitingJoinOrAccept=d.B.map(),this.m_hRegisterForPushToTalkStateChange=null,this.m_bPushToTalkEnabled=!1,this.m_bPushToMuteEnabled=!1,this.m_bVoicePTTStateEnabled=!1,this.m_VKPushToTalkHotKey=0,this.m_strPushToTalkDisplayString="",this.m_hPushToTalkReleaseTimeout=0,this.m_ConnectionCheck=0,this.m_ScheduledInitiate=0,this.m_ScheduledVoiceLogsUpload=0,this.m_bClientSideLogsUploadInProgress=!1,this.m_nLastLogLineUploaded=0,this.m_StatsTimeout=0,this.m_bUserHasDeniedMicPermissions=!1,this.m_bOutputMuted=!1,this.m_AudioContext=void 0,this.m_rgAudioStreams=Object(d.B)([]),this.m_MicVolumeMeter=void 0,this.m_MicNoiseGate=void 0,this.m_MicInputGainNode=void 0,this.m_rgLogLines=[],this.m_mapSSRCToAccountID=new Map,this.m_mapAccountIDToStats=new Map,this.m_mapPerUserOutputGain=d.B.map(),this.m_mapUserVoiceStatus=d.B.map(),this.m_LogVoiceChatDetails=!1,this.m_VoiceEchoLocalMic=!1,this.m_bLocalMicEchoStateBeforeMicTest=!1,this.m_bLocalMicTestActive=!1,this.m_bForceConnectingStatus=!1,this.m_bForceReconnectingStatus=!1,this.m_OnWebRTCUpdateRemoteDescriptionHandler=Object(v.c)(u.c.NotifyWebRTCUpdateRemoteDescriptionHandler,(function(e){return t.m_VoiceCallState.m_eState<C.k_EVoiceCallState_InitatedWebRTCSession?(t.LogMsg("(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler in wrong state "+t.m_VoiceCallState.m_eState),2):(t.m_VoiceCallState.m_bOfferUpdateInProgress?(t.LogMsg("(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler while already updating, queing work"),t.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=e.Body()):t.ProcessUpdatedRemoteDescription(e.Body()),1)})),this.m_OnWebRTCConnectionHandler=Object(v.c)(u.c.NotifyWebRTCSessionConnectedHandler,(function(e){return t.m_VoiceCallState.m_eState<C.k_EVoiceCallState_InitatedWebRTCSession?(t.LogMsg("(WebRTC) Hit NotifyWebRTCSessionConnectedHandler in wrong state "+t.m_VoiceCallState.m_eState),2):(t.m_VoiceCallState.m_webRTCConnectedNotification=e.Body(),t.m_VoiceCallState.m_webRTCServerIP=t.m_VoiceCallState.m_webRTCConnectedNotification.server_ip(),t.m_VoiceCallState.m_webRTCServerPort=t.m_VoiceCallState.m_webRTCConnectedNotification.server_port(),t.m_VoiceCallState.m_webRTCClientIP=t.m_VoiceCallState.m_webRTCConnectedNotification.client_ip(),t.m_VoiceCallState.m_webRTCClientPort=t.m_VoiceCallState.m_webRTCConnectedNotification.client_port(),"completed"==t.m_PeerConnection.iceConnectionState||"connected"==t.m_PeerConnection.iceConnectionState?(t.LogMsg("(VoiceChat) ICE state is already connected after successful SetRemoteDescription, joining voice chat immediately"),t.JoinVoiceChatOrAskForOneOnOneChatNow()):(t.LogMsg("(VoiceChat) ICE state is not connected after successful SetRemoteDescription, waiting for UDP connetivity"),t.m_VoiceCallState.m_eState=C.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected),1)})),this.m_OnVoiceAllUsersStatusUpdate=Object(v.c)(l.h.NotifyAllUsersVoiceStatusHandler,(function(e){if(t.m_VoiceCallState.m_voiceChatID!=e.Body().voice_chatid())return 1;for(var n=0;n<e.Body().users().length;++n){var o=e.Body().users()[n];t.UpdateUserVoiceStatus(o)}return 1})),this.m_OnVoiceStatusUpdate=Object(v.c)(l.h.NotifyUserVoiceStatusHandler,(function(e){return t.UpdateUserVoiceStatus(e.Body()),1})),this.m_VoiceChatResponseHandler=Object(v.c)(l.h.NotifyOneOnOneChatResponseHandler,(function(e){if(t.m_VoiceCallState.m_eState>=C.k_EVoiceCallState_RequestedPermission){var n=new f.a(e.Body().steamid_partner());if(e.Body().voicechat_id()!=t.m_VoiceCallState.m_voiceChatID)t.LogMsg("(VoiceChat) Got response from "+n.GetAccountID()+" but for different voice chat than we are in, ignoring. ");else if(n.GetAccountID()==t.m_VoiceCallState.m_targetAccountID&&1==e.Body().accepted_request())t.LogMsg("(VoiceChat) Got acceptance from "+n.GetAccountID()+" "+e.Hdr().steamid()),p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_enter.m4a?v=1"),t.OnVoiceChatAccepted(!0);else{t.LogMsg("(VoiceChat) Rejected by "+n.GetAccountID());var o=p.f.ChatStore.GetFriendChat(n.GetAccountID(),!1),r=p.f.FriendStore.GetFriend(n.GetAccountID());null!=o&&null!=r&&(t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,o.AddVoiceChannelInviteMsg(n.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEndedExplicit",r.display_name))),t.DeleteOneOnOneCallWaitingJoinOrAccept(n.GetAccountID()),p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1"),t.OnVoiceChatAccepted(!1)}}return 1})),this.m_IncomingVoiceChatRequestHandler=Object(v.c)(l.h.NotifyOneOnOneChatRequestedHandler,(function(e){var n=new f.a(e.Body().steamid_partner()),o=e.Body().voice_chatid(),r=p.f.FriendStore.GetFriend(n.GetAccountID());if(null==r||r.is_blocked||p.f.FriendStore.BIsInvisibleMode()||p.f.FriendStore.GetUserDoNotDisturb())return t.LogMsg("(VoiceChat) Rejecting one-on-one voice chat request because partner is not a friend, is blocked, we are invisible, or we are DND"),t.OnRejectOneOnOneVoiceChat(n,e.Body().voice_chatid()),1;var i=new j;i.partner_accountid=t.m_CMInterface.steamid.GetAccountID(),i.voice_chatid=o,i.previously_joined=!1;var a=t;if(i.audio_repeat=SetBackgroundTimeout((function(){i.audio_repeat=0,a.PlayRingSound(n.GetAccountID())}),2e4),t.m_mapOneOnOneCallsWaitingJoinOrAccept.set(n.GetAccountID(),i),t.LogMsg("(VoiceChat) voice chat request from "+n.GetAccountID()),t.LogMsg("(VoiceChat) current state "+t.m_VoiceCallState.m_eState),t.m_VoiceCallState.m_targetAccountID==n.GetAccountID())return t.LogMsg("(VoiceChat) We are already trying to one on one chat this user, just auto-acceptting to re-sync."),t.OnAcceptOneOnOneVoiceChat(n,o),1;p.f.NotificationManager.DisplayNotificationFromFriend(r,{title:r.display_name,body:Object(g.d)("#Friend_RequestingOneOnOneChat",r.display_name),tag:"state_"+r.accountid,steamid:r.persona.m_steamid.ConvertTo64BitString()});var s=p.f.ChatStore.GetFriendChat(n.GetAccountID(),!0);return null!=s&&(s.AddVoiceChannelInviteMsg(n.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelInvite",r.display_name,s.self.display_name)),p.f.UIStore.ShowAndOrActivateChat(p.f.GetDefaultBrowserContext(),s,!1)),t.PlayRingSound(r.accountid),1})),this.m_VoiceChatEndedHandler=Object(v.c)(l.h.NotifyVoiceChatEndedHandler,(function(e){for(var n=e.Body().voice_chatid(),o=0,r=Array.from(t.m_mapOneOnOneCallsWaitingJoinOrAccept.keys());o<r.length;o++){var a=r[o],s=t.m_mapOneOnOneCallsWaitingJoinOrAccept.get(a);if(null!=s&&s.voice_chatid==n){t.LogMsg("(VoiceChat) OneOnOne VoiceChat we were invited too with "+a+" has ended and is no longer joinable."),p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1");var c=Number(a);t.DeleteOneOnOneCallWaitingJoinOrAccept(c);var l=p.f.ChatStore.GetFriendChat(c,!1),u=p.f.FriendStore.GetFriend(c);null!=l&&(u?l.AddVoiceChannelInviteMsg(u.accountid,p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEndedExplicit",u.display_name)):l.AddVoiceChannelInviteMsg(t.m_CMInterface.steamid.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEnded")),t.m_VoiceCallState.m_targetAccountID==Number(a)&&(t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0))}}if(n==t.m_VoiceCallState.m_voiceChatID){if(0!=t.m_VoiceCallState.m_targetAccountID)null==(l=p.f.ChatStore.GetFriendChat(t.m_VoiceCallState.m_targetAccountID,!1))||t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg||(t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,l.AddVoiceChannelInviteMsg(t.m_CMInterface.steamid.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEnded")));0!=t.m_VoiceCallState.m_targetAccountID&&t.m_VoiceCallState.m_eState>C.k_EVoiceCallState_RequestedPermission&&p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1"),t.LogMsg("(VoiceChat) Got voice chat end notification from server for active chatid"),t.EndVoiceChatInternal(!1)}return 1})),this.m_VoiceChatEnteredNotification=Object(v.c)(l.h.NotifyUserJoinedVoiceChatHandler,(function(e){if(e.Body().voice_chatid()==t.m_VoiceCallState.m_voiceChatID){var n=new f.a(e.Body().user_steamid());t.LogMsg("(VoiceChat) User "+n.Render()+" has just JOINED our active voice chat"),0!=t.m_VoiceCallState.m_targetAccountID&&t.m_VoiceCallState.m_targetAccountID==n.GetAccountID()&&(t.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1)}return 1})),this.m_VoiceChatLeftNotification=Object(v.c)(l.h.NotifyUserLeftVoiceChatHandler,(function(e){if(e.Body().voice_chatid()==t.m_VoiceCallState.m_voiceChatID){var n=new f.a(e.Body().user_steamid());t.LogMsg("(VoiceChat) User "+n.Render()+" has just LEFT our active voice chat"),0!=t.m_VoiceCallState.m_targetAccountID&&t.m_VoiceCallState.m_targetAccountID==n.GetAccountID()&&(t.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!0)}return 1})),this.m_ShouldRejoinChatRoomVoiceChatHandler=Object(v.c)(c.W.NotifyShouldRejoinChatRoomVoiceChatHandler,(function(e){var n={groupID:e.Body().chat_group_id(),chatID:e.Body().chat_id()};return t.m_VoiceCallState.m_eState>C.k_EVoiceCallState_ScheduledInitiate&&t.m_VoiceCallState.BMatchingCall(0,n)&&(t.LogMsg("(ChatRoom) Notified that we need to rejoin new voicechat session for chat room... doing so now..."),t.EndVoiceChatInternal(!0),t.InitiateVoiceChat(0,n)),1})),this.m_Settings=new M(e),this.m_Settings.LoadFromLocalStorage(this),"undefined"!=typeof SteamClient&&null!=SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetVoiceChatActive)try{SteamClient.WebChat.SetVoiceChatActive(!1)}catch(e){}}return e.prototype.Init=function(e){this.m_CMInterface=e,window.SetVoiceEchoLocalMic=this.SetVoiceEchoLocalMic,window.SetVoiceLogDetails=this.SetVoiceLogDetails,window.SetVoiceForceReconnectingStatus=this.ForceReconnectingStatus,window.SetVoiceForceConnectingStatus=this.ForceConnectingStatus},e.prototype.RefreshPushToTalkKeySettings=function(){var e=this;"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.GetPushToTalkEnabled&&SteamClient.WebChat.GetPushToTalkEnabled().then((function(t){e.m_bPushToTalkEnabled=t.bEnabled,e.m_VKPushToTalkHotKey=t.vkHotKey,t.bPushToMute&&(e.m_bPushToMuteEnabled=t.bEnabled,e.m_bPushToTalkEnabled=!1),e.m_strPushToTalkDisplayString=t.strKeyName,e.m_bPushToTalkEnabled||e.m_bPushToMuteEnabled||null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkHotKey&&(Object(y.a)(e.m_Settings.m_bSettingsLoaded,"Settings not loaded but RefreshPushToTalkKeySettings hit"),e.m_Settings.m_bHasResetOpenMicHotkey||(e.m_Settings.m_bHasResetOpenMicHotkey=!0,e.m_Settings.SaveToLocalStorage(),console.log("Reset Open Mic hotkey to None on first run of new client in open mic mode"),SteamClient.WebChat.SetPushToTalkHotKey(0),e.RefreshPushToTalkKeySettings()))})),"undefined"!=typeof SteamClient&&null===this.m_hRegisterForPushToTalkStateChange&&null!=SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.RegisterForPushToTalkStateChange&&(this.m_hRegisterForPushToTalkStateChange=SteamClient.WebChat.RegisterForPushToTalkStateChange(this.OnPushToTalkStateChange))},e.prototype.InitiateFriendChat=function(e){this.BPartnerHasRequestedAndIsInOneOnOneChat(e)?this.AcceptPartnersOneOnOneChatRequest(e):(this.InitiateVoiceChat(e,null),p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_phonecall.m4a?v=1"))},e.prototype.InitiateRoomChat=function(e,t){this.InitiateVoiceChat(0,{groupID:e,chatID:t})},e.prototype.EndLocalMicTest=function(){this.m_bLocalMicTestActive=!1,this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_LocalMicOnly&&this.EndVoiceChatInternal(!1),this.SetVoiceEchoLocalMic(this.m_bLocalMicEchoStateBeforeMicTest)},e.prototype.IsLocalMicTestActive=function(){return this.m_bLocalMicTestActive},e.prototype.InitiateLocalMicTest=function(){this.m_bLocalMicTestActive=!0,this.m_bLocalMicEchoStateBeforeMicTest=this.m_VoiceEchoLocalMic,this.SetVoiceEchoLocalMic(!0),this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_None&&this.InitiateVoiceChat(0,null)},e.prototype.AcceptPartnersOneOnOneChatRequest=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t)return!1;this.m_VoiceCallState.m_timeStartedConnecting=void 0,t.ClearAudioRepeats();var n=f.a.InitFromAccountID(e);return this.OnAcceptOneOnOneVoiceChat(n,t.voice_chatid),!0},e.prototype.OnRejectOneOnOneVoiceChatForPartner=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t)return!1;t.ClearAudioRepeats();var n=f.a.InitFromAccountID(e);this.OnRejectOneOnOneVoiceChat(n,t.voice_chatid),this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e);var o=p.f.ChatStore.GetFriendChat(e,!1),r=p.f.FriendStore.self;return null!=o&&null!=r&&(this.m_VoiceCallState.m_targetAccountID==e&&this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg||o.AddVoiceChannelInviteMsg(r.accountid,p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEndedExplicit",r.display_name)),this.m_VoiceCallState.m_targetAccountID==e&&(this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0)),!0},e.prototype.OnUserLeaveOneOnOneVoiceChat=function(){0!=this.m_VoiceCallState.m_targetAccountID||this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_None?(this.LogMsg("(VoiceChat) User asking to leave but not end one-on-one chat with: "+this.m_VoiceCallState.m_targetAccountID),this.EndVoiceChatInternal(!1)):this.LogMsg("(VoiceChat) OnUserLeaveOneOnOneVoiceChat called when in a group not one-on-one chat!")},e.prototype.OnUserEndVoiceChat=function(){var e=this;if(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None&&0!=this.m_VoiceCallState.m_targetAccountID){if(!this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg){var t=p.f.ChatStore.GetFriendChat(this.m_VoiceCallState.m_targetAccountID,!1),n=p.f.FriendStore.self;null!=t&&null!=n&&(this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,t.AddVoiceChannelInviteMsg(p.f.CMInterface.steamid.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEndedExplicit",n.display_name)))}var o=this.m_VoiceCallState.m_targetAccountID;this.m_VoiceCallState.m_targetAccountID=0;var r=a.b.Init(l.b);r.Body().set_steamid_partner(f.a.InitFromAccountID(o).ConvertTo64BitString()),this.DeleteOneOnOneCallWaitingJoinOrAccept(o),l.i.EndOneOnOneChat(this.m_CMInterface.GetServiceTransport(),r).then((function(t){1==t.GetEResult()?e.LogMsg("(VoiceChat) Ended voice chat with "+o):e.LogMsg("(VoiceChat) Failed ending voice chat with "+o)}))}0!=this.m_VoiceCallState.m_targetAccountID&&this.DeleteOneOnOneCallWaitingJoinOrAccept(this.m_VoiceCallState.m_targetAccountID),this.EndVoiceChatInternal(!1)},e.prototype.SetSelectedMic=function(e){e!=this.m_Settings.m_SelectedMicID&&(this.LogMsg("(VoiceChat) Set selected mic "+e),this.m_Settings.m_SelectedMicID=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.SetSelectedOutput=function(e){e!=this.m_Settings.m_SelectedOutputID&&(this.LogMsg("(VoiceChat) Set selected output "+e),this.m_Settings.m_SelectedOutputID=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetAudioWorkletSupport=function(){return p.f.AudioPlaybackManager.supports_audio_worklets},e.prototype.GetUserDeniedMicAccess=function(){return this.m_bUserHasDeniedMicPermissions},e.prototype.GetSelectedMic=function(){return this.m_Settings.m_SelectedMicID},e.prototype.GetSelectedOutputDevice=function(){return this.m_Settings.m_SelectedOutputID},e.prototype.SetUseEchoCancellation=function(e){e!=this.m_Settings.m_VoiceUseEchoCancellation&&(this.m_Settings.m_VoiceUseEchoCancellation=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetUseEchoCancellation=function(){return this.m_Settings.m_VoiceUseEchoCancellation},e.prototype.SetUseNoiseCancellation=function(e){e!=this.m_Settings.m_VoiceUseNoiseCancellation&&(this.m_Settings.m_VoiceUseNoiseCancellation=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetUseNoiseCancellation=function(){return this.m_Settings.m_VoiceUseNoiseCancellation},e.prototype.SetUseAutoGainControl=function(e){e!=this.m_Settings.m_VoiceUseAutoGainControl&&(this.m_Settings.m_VoiceUseAutoGainControl=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetUseAutoGainControl=function(){return this.m_Settings.m_VoiceUseAutoGainControl},e.prototype.SetVoiceEchoLocalMic=function(e){this.m_VoiceEchoLocalMic=e,this.UpdateNoiseGateOnActiveMic()},e.prototype.GetVoiceEchoLocalMic=function(){return this.m_VoiceEchoLocalMic},e.prototype.GetPushToTalkOrMuteSoundsEnabled=function(){return this.m_Settings.m_bPlayPTTSounds},e.prototype.SetPushToTalkOrMuteSoundsEnabled=function(e){this.m_Settings.m_bPlayPTTSounds!=e&&(this.m_Settings.m_bPlayPTTSounds=e,this.m_Settings.SaveToLocalStorage())},e.prototype.SetPushToTalkEnabled=function(e){this.m_bPushToTalkEnabled=e,this.m_bPushToMuteEnabled=!1},e.prototype.GetPushToTalkEnabled=function(){return this.m_bPushToTalkEnabled},e.prototype.SetPushToMuteEnabled=function(e){this.m_bPushToMuteEnabled=e,this.m_bPushToTalkEnabled=!1},e.prototype.GetPushToMuteEnabled=function(){return this.m_bPushToMuteEnabled},e.prototype.GetPushToTalkVoiceStateEnabled=function(){return this.m_bVoicePTTStateEnabled},e.prototype.GetPushToTalkHotKeyVK=function(){return this.m_VKPushToTalkHotKey},e.prototype.GetPushToTalkHotKeyDisplayString=function(){return this.m_strPushToTalkDisplayString},e.prototype.SetVoiceLogDetails=function(e){this.m_LogVoiceChatDetails=e},e.prototype.GetVoiceLogDetails=function(){return this.m_LogVoiceChatDetails},e.prototype.SetUseNoiseGateLevel=function(e){e!=this.m_Settings.m_NoiseGateLevel&&(this.LogMsg("(VoiceChat) Nose Gate Level: "+e),this.m_Settings.m_NoiseGateLevel=e,this.m_Settings.SaveToLocalStorage(),this.UpdateNoiseGateOnActiveMic())},e.prototype.GetUseNoiseGateLevel=function(){return this.m_Settings.m_NoiseGateLevel},e.prototype.SetVoiceInputGain=function(t){this.m_Settings.m_VoiceInputGain!=t&&(this.m_Settings.m_VoiceInputGain=Math.max(0,Math.min(t,e.k_MaxInputOutputGainValue)),this.LogMsg("(VoiceChat) New mic Input Gain value is "+this.m_Settings.m_VoiceInputGain),null!=this.m_MicInputGainNode&&this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),this.m_Settings.SaveToLocalStorage())},e.prototype.GetVoiceInputGain=function(){return this.m_Settings.m_VoiceInputGain},e.prototype.SetVoiceOutputGain=function(t){if(this.m_Settings.m_VoiceOutputGain!=t){this.m_Settings.m_VoiceOutputGain=Math.max(0,Math.min(t,e.k_MaxInputOutputGainValue)),this.LogMsg("(VoiceChat) New global OutputGain value is "+this.m_Settings.m_VoiceOutputGain),this.m_Settings.SaveToLocalStorage();for(var n=0;n<this.m_rgAudioStreams.length;++n){var r=this.m_rgAudioStreams[n];r.output_gain_node&&(r.type==o.k_EAudioStreamType_Microphone?r.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain,this.m_AudioContext.currentTime):r.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*this.GetPerUserGainLevel(r.accountid),this.m_AudioContext.currentTime))}}},e.prototype.BIsAccountFullyConnectedToActiveVoiceChat=function(e){if(e==this.m_CMInterface.steamid.GetAccountID())return this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_Connected;if(this.m_VoiceCallState.m_eState<C.k_EVoiceCallState_Connected)return!1;for(var t=0;t<this.m_rgAudioStreams.length;++t){var n=this.m_rgAudioStreams[t];if(n.output_gain_node&&n.type==o.k_EAudioStreamType_IncomingStream&&n.accountid==e)return!0}return!1},e.prototype.GetVoiceOutputGain=function(){return this.m_Settings.m_VoiceOutputGain},e.prototype.GetUserMutedRemotely=function(e){var t=this.m_mapUserVoiceStatus.get(e);return null==t&&(t=new T,this.m_mapUserVoiceStatus.set(e,t)),t.mic_muted_locally},e.prototype.GetOutputMutedRemotely=function(e){var t=this.m_mapUserVoiceStatus.get(e);return null==t&&(t=new T,this.m_mapUserVoiceStatus.set(e,t)),t.output_muted_locally},e.prototype.GetUserHasNoMicForSession=function(e){var t=this.m_mapUserVoiceStatus.get(e);return null==t&&(t=new T,this.m_mapUserVoiceStatus.set(e,t)),t.has_no_mic_for_session},e.prototype.ConvertSliderToGainValue=function(e,t){return e=e<=50?e/50*1:1+t*((e-50)/50)},e.prototype.ConvertGainValueToSliderValue=function(e,t){return e<=1?50*e:50+(e-1)/t*50},e.prototype.ForceReconnectingStatus=function(e){this.m_bForceReconnectingStatus=!0},e.prototype.ForceConnectingStatus=function(e){this.m_bForceConnectingStatus=!0},e.prototype.GetActiveChatRoomGroupID=function(){return this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_None?"":this.m_VoiceCallState.m_chatRoom?this.m_VoiceCallState.m_chatRoom.groupID:""},e.prototype.GetActiveVoiceChatID=function(){return this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_None?"":this.m_VoiceCallState.m_chatRoom?this.m_VoiceCallState.m_chatRoom.chatID:""},e.prototype.BInitiatedOneOnOneChat=function(e){return this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None&&(this.m_VoiceCallState.m_targetAccountID==e&&this.m_VoiceCallState.m_bInitiatedOneOnOneCall)},e.prototype.ToggleMicMuting=function(){for(var e=0;e<this.m_rgAudioStreams.length;++e){var t=this.m_rgAudioStreams[e];if(t.type==o.k_EAudioStreamType_Microphone){t.muted=!t.muted;for(var n=t.stream.getTracks(),r=0;r<n.length;r++)n[r].enabled=!t.muted;t.muted?this.m_MicInputGainNode.gain.setValueAtTime(0,this.m_AudioContext.currentTime+.2):this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime)}}this.SendVoiceStatusUpdate()},e.prototype.BHasSampleRateTooHighInBrowser=function(){return!i.a.IN_CLIENT&&p.f.AudioPlaybackManager.GetLastObservedSampleRate()>48e3},e.prototype.BNoMicAvailableForSession=function(){if(this.m_VoiceCallState.m_eState<=C.k_EVoiceCallState_RequestedMicAccess)return!1;if(this.BHasSampleRateTooHighInBrowser())return!0;for(var e=0;e<this.m_rgAudioStreams.length;++e)if(this.m_rgAudioStreams[e].type==o.k_EAudioStreamType_Microphone)return!1;return!0},e.prototype.IsMicMuted=function(){for(var e=0;e<this.m_rgAudioStreams.length;++e)if(this.m_rgAudioStreams[e].type==o.k_EAudioStreamType_Microphone)return this.m_rgAudioStreams[e].muted;return!1},e.prototype.ToggleOutputMuting=function(){this.m_bOutputMuted=!this.m_bOutputMuted;for(var e=0;e<this.m_rgAudioStreams.length;++e){var t=this.m_rgAudioStreams[e];if(t.type==o.k_EAudioStreamType_IncomingStream){t.muted=this.m_bOutputMuted||this.GetPerUserMuting(t.accountid);for(var n=t.stream.getTracks(),r=0;r<n.length;r++)n[r].enabled=!this.m_bOutputMuted}}this.SendVoiceStatusUpdate()},e.prototype.IsOutputMuted=function(){return this.m_bOutputMuted},e.prototype.GetActiveOneOnOneVoiceChatAccountID=function(){return this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_None?0:this.m_VoiceCallState.m_targetAccountID},Object.defineProperty(e.prototype,"audio_streams",{get:function(){return this.m_rgAudioStreams},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mic_volume",{get:function(){return this.m_MicVolumeMeter},enumerable:!1,configurable:!0}),e.prototype.get_volume=function(e){if(e==this.m_CMInterface.steamid.GetAccountID()){if(this.IsMicMuted()||this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_Connected&&this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_LocalMicOnly)return 0}else if(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_Connected)return 0;for(var t=0,n=0;n<this.m_rgAudioStreams.length;++n){var o=this.m_rgAudioStreams[n];o.accountid==e&&null!=o.volume_meter&&(t=Math.max(t,o.volume_meter.rounded_volume))}return t},e.prototype.GetPerUserGainLevel=function(e){var t=this.m_mapPerUserOutputGain.get(e);return null==t?1:t.gain},e.prototype.GetPerUserMuting=function(e){var t=this.m_mapPerUserOutputGain.get(e);return null!=t&&t.muted},e.prototype.SetPerUserMuting=function(e,t){var n=this.m_mapPerUserOutputGain.get(e);null==n&&(n=new D),n.muted=t||this.m_bOutputMuted,this.m_mapPerUserOutputGain.set(e,n),this.UpdateStreamsForPerUseGainChange(e)},e.prototype.SetPerUserGainLevel=function(e,t){var n=Math.max(0,Math.min(4,t)),o=this.m_mapPerUserOutputGain.get(e);null==o&&(o=new D),o.gain=n,o.gain<.001?o.muted=!0:o.muted=!1,this.m_mapPerUserOutputGain.set(e,o),this.UpdateStreamsForPerUseGainChange(e)},e.prototype.UpdateStreamsForPerUseGainChange=function(e){var t=this.m_mapPerUserOutputGain.get(e);null==t&&(t=new D);for(var n=0;n<this.m_rgAudioStreams.length;++n){var o=this.m_rgAudioStreams[n];if(o.accountid==e&&null!=o.output_gain_node){o.muted=t.muted,o.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*t.gain,this.m_AudioContext.currentTime);for(var r=o.stream.getTracks(),i=0;i<r.length;i++)r[i].enabled=!o.muted}}},e.prototype.OnUserLeftChatRoomVoiceChat=function(e,t,n,o){var r={groupID:e,chatID:t};this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_RequestedPermission&&this.m_VoiceCallState.BMatchingCall(0,r)&&(n!=this.m_CMInterface.steamid.GetAccountID()||o||(this.LogMsg("(ChatRoom) We were told that we left chat "+t+" but we hadn't initiated that, trying to reconnect..."),this.RestartVoiceChatIfConnected()))},e.prototype.IsMicTestActive=function(){return this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_LocalMicOnly},e.prototype.IsAnyVoiceActive=function(){return!(this.m_VoiceCallState.m_eState<=C.k_EVoiceCallState_LocalMicOnly&&0==this.m_VoiceCallState.m_targetAccountID&&null==this.m_VoiceCallState.m_chatRoom)&&(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None||0!=this.m_ScheduledInitiate)},e.prototype.BSelfHasAcceptedOrInitiatedOneOnOneChat=function(e){return this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None&&this.m_VoiceCallState.m_targetAccountID==e&&(!!this.m_VoiceCallState.m_bInitiatedOneOnOneCall||this.m_VoiceCallState.m_eState>=C.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession)},e.prototype.BSelfHadPreviouslyJoinedOneOnOneChat=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t){var n=new j;return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e,n),!1}if(t.partner_accountid!=this.m_CMInterface.steamid.GetAccountID())return!1;var o=t.voice_chatid;return t.previously_joined&&""!=o},e.prototype.BPartnerHasAcceptedOrInitiatedOneOnOneChat=function(e){return!(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None||this.m_VoiceCallState.m_bInitiatedOneOnOneCall||!this.BPartnerHasRequestedAndIsInOneOnOneChat(e))||this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_RequestedPermission&&!this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin},e.prototype.BPartnerHasRequestedAndIsInOneOnOneChat=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t){var n=new j;return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e,n),!1}return t.partner_accountid==this.m_CMInterface.steamid.GetAccountID()&&""!=t.voice_chatid},e.prototype.IsAttemptingInitialConnection=function(){return(0==this.m_VoiceCallState.m_targetAccountID||this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_RequestedPermission)&&(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_LocalMicOnly&&(this.IsAnyVoiceActive()&&0==this.m_VoiceCallState.m_nFailuresThisInitiate&&this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_Connected))},e.prototype.HasBeenAttemptingOverTwoSeconds=function(){var e=this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds,t=this.IsAttemptingInitialConnection();return!!this.m_bForceConnectingStatus||e&&t},e.prototype.IsAttemptingReconnect=function(){var e=this.IsAnyVoiceActive(),t=this.m_VoiceCallState.m_nFailuresThisInitiate,n=this.m_VoiceCallState.m_eState;return!!this.m_bForceReconnectingStatus||e&&t>0&&n!=C.k_EVoiceCallState_Connected},e.prototype.IsVoiceActiveForFriend=function(e){return this.IsVoiceActive(e,null)},e.prototype.IsVoiceActiveForRoom=function(e,t){return this.IsVoiceActive(0,{groupID:e,chatID:t})},e.prototype.IsVoiceActiveForGroup=function(e){return!!this.m_VoiceCallState.BCallActiveForGroup(e)&&this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None},e.prototype.LogMsg=function(e){this.m_rgLogLines.push(e),this.m_LogVoiceChatDetails&&console.log(e)},e.prototype.GetVoiceLogs=function(){return this.m_rgLogLines.join("\r\n")},e.prototype.OnPushToTalkReleased=function(){(this.m_bPushToTalkEnabled&&null!=this.m_MicInputGainNode&&!this.m_bVoicePTTStateEnabled||this.m_bPushToMuteEnabled&&null!=this.m_MicInputGainNode&&this.m_bVoicePTTStateEnabled)&&this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime+.2)},e.prototype.DebouncedToggleMicMuting=function(){this.ToggleMicMuting(),this.GetPushToTalkOrMuteSoundsEnabled()&&(this.IsMicMuted()?p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"):p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"))},e.prototype.OnPushToTalkStateChange=function(e){var t=e,n=!1;p.f.SettingsStore.BClientHasFeatureOrOnWeb("NewVoiceHotKeyState")&&(n=!0,this.m_bPushToMuteEnabled&&(t=!e)),!n||this.m_bPushToTalkEnabled||this.m_bPushToMuteEnabled?t!=this.m_bVoicePTTStateEnabled&&(this.m_bVoicePTTStateEnabled=t,(this.m_bPushToTalkEnabled||this.m_bPushToMuteEnabled)&&null!=this.m_MicInputGainNode&&(this.m_bVoicePTTStateEnabled?(this.GetPushToTalkOrMuteSoundsEnabled()&&p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"),this.m_bPushToMuteEnabled?this.m_hPushToTalkReleaseTimeout=SetBackgroundTimeout(this.OnPushToTalkReleased,100):(this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),0!=this.m_hPushToTalkReleaseTimeout&&ClearBackgroundTimeout(this.m_hPushToTalkReleaseTimeout))):(this.GetPushToTalkOrMuteSoundsEnabled()&&p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"),this.m_bPushToMuteEnabled?(this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),0!=this.m_hPushToTalkReleaseTimeout&&ClearBackgroundTimeout(this.m_hPushToTalkReleaseTimeout)):this.m_hPushToTalkReleaseTimeout=SetBackgroundTimeout(this.OnPushToTalkReleased,100)))):e&&null!=this.m_MicInputGainNode&&this.DebouncedToggleMicMuting()},e.prototype.GetCurrentVoiceInputGainTarget=function(){return this.m_bPushToTalkEnabled&&!this.m_bVoicePTTStateEnabled||this.m_bPushToMuteEnabled&&!this.m_bVoicePTTStateEnabled?0:this.m_Settings.m_VoiceInputGain},e.prototype.RestartVoiceChatIfConnected=function(){if(this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_ScheduledInitiate){var e=this.m_VoiceCallState.m_targetAccountID,t=this.m_VoiceCallState.m_chatRoom;this.LogMsg("(WebRTC) Ending then auto-re-initiating voice chat - without leave of chatroom if joined as attempt is quick rejoin"),this.EndVoiceChatInternal(!0),this.InitiateVoiceChat(e,t)}},e.prototype.GetNoiseGateOptions=function(){var e={attack:2,release:.01,threshold:-80,bufferSize:1024};switch(this.m_Settings.m_NoiseGateLevel){case S.k_ENoiseGateLevel_Off:break;case S.k_ENoiseGateLevel_Low:e={attack:.8,release:.06,threshold:-48,bufferSize:1024};break;case S.k_ENoiseGateLevel_Medium:e={attack:.8,release:.06,threshold:-36,bufferSize:1024};break;case S.k_ENoiseGateLevel_High:e={attack:.8,release:.09,threshold:-22,bufferSize:1024}}return e},e.prototype.DeleteOneOnOneCallWaitingJoinOrAccept=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);null!=t&&(t.ClearAudioRepeats(),this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e))},e.prototype.UpdateNoiseGateOnActiveMic=function(){if(null!=this.m_MicInputGainNode){for(var e=void 0,t=0;t<this.m_rgAudioStreams.length;++t){var n=this.m_rgAudioStreams[t];if(n.type==o.k_EAudioStreamType_Microphone){e=n;break}}if(null!=e){if(null!=this.m_MicNoiseGate)this.m_MicInputGainNode.disconnect(this.m_MicNoiseGate.input),this.m_MicNoiseGate.input?(this.m_MicNoiseGate.input.disconnect(),this.m_MicNoiseGate.output.disconnect(),this.m_MicNoiseGate.noiseGateKernel_.disconnect()):this.m_MicNoiseGate.disconnect(),this.m_MicNoiseGate=void 0;else{this.m_MicInputGainNode.disconnect(e.destination_node);try{this.m_MicInputGainNode.disconnect(e.output_gain_node)}catch(e){}}this.m_MicVolumeMeter.stop(),this.m_MicVolumeMeter=void 0,null!=e.volume_meter&&(e.volume_meter.stop(),e.volume_meter=void 0),this.m_Settings.m_NoiseGateLevel!=S.k_ENoiseGateLevel_Off?this.SetupNoiseGateOnMic(e.destination_node):this.m_MicInputGainNode.connect(e.destination_node);var r=e.source_node;this.m_MicNoiseGate&&(r=this.m_MicNoiseGate.output?this.m_MicNoiseGate.output:this.m_MicNoiseGate),this.m_MicVolumeMeter=new h(r,this.m_AudioContext),e.volume_meter=this.m_MicVolumeMeter,this.m_VoiceEchoLocalMic&&null==this.m_MicNoiseGate?this.m_MicInputGainNode.connect(e.output_gain_node):this.m_VoiceEchoLocalMic&&(this.m_MicNoiseGate.output?this.m_MicNoiseGate.output.connect(e.output_gain_node):this.m_MicNoiseGate.connect(e.output_gain_node))}}},e.prototype.OnAudioContextStateChange=function(){null!=this.m_AudioContext&&this.LogMsg("(WebAudio) Audio context state changed: "+this.m_AudioContext.state)},e.prototype.OnIceCandidate=function(e){this.LogMsg("(ICE) Local candidate: "+JSON.stringify(e.candidate))},e.prototype.AddRemoteIceCandidate=function(e,t){var n=this.LogMsg;n("(ICE) Candidate from remote peer: "+JSON.stringify(t)),e.addIceCandidate(t).then((function(){})).catch((function(e){n("addIceCandidate error: "+e+" "+e.name)}))},e.prototype.OnSignalingStateChange=function(e,t){this.LogMsg("(WebRTC) OnSignalingStateChange: "+e.signalingState)},e.prototype.OnIceConnectionStateChange=function(e,t){this.LogMsg("(ICE) OnIceConnectionStateChange: "+e.iceConnectionState),"failed"==e.iceConnectionState&&this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_CreatePeerConnection?this.BackOffAndRetryInitiateVoiceChat():"completed"!=e.iceConnectionState&&"connected"!=e.iceConnectionState||this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected||(this.LogMsg("(VoiceChat) ICE connection state now 'completed' or 'connected', proceeding to join voice chat"),this.JoinVoiceChatOrAskForOneOnOneChatNow())},e.prototype.OnIceGatheringStateChange=function(e,t){this.LogMsg("(ICE) OnIceGatheringStateChange: "+e.iceGatheringState)},e.prototype.RemoveStreamToOutput=function(e){this.LogMsg("(WebRTC) RemoveStreamToOutput - "+e.id+" - "+e.getTracks().length);for(var t=0;t<this.m_rgAudioStreams.length;++t){var n=this.m_rgAudioStreams[t];if(n.unique_id==e.id){if(n.elem.pause(),n.elem.srcObject=void 0,n.elem.src=void 0,n.elem=void 0,null!=n.volume_meter&&(n.volume_meter.stop(),n.volume_meter=void 0),null!=n.output_gain_node&&(n.output_gain_node.disconnect(),n.output_gain_node=void 0),null!=n.source_node){try{n.source_node.disconnect()}catch(e){}n.source_node=void 0}return void this.m_rgAudioStreams.splice(t,1)}}},e.prototype.OnRemoveRemoteStream=function(e){this.RemoveStreamToOutput(e.stream)},e.prototype.SetupAudioStreamElementAndCreateSourceNode=function(e,t){var n=-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...");null!=e.source_node&&(e.source_node.disconnect(),e.source_node=void 0),null==e.elem?e.elem=document.createElement("audio"):e.elem.srcObject=void 0,e.elem.srcObject=t,n?(e.elem.play(),e.source_node=this.m_AudioContext.createMediaElementSource(e.elem)):e.source_node=this.m_AudioContext.createMediaStreamSource(t)},e.prototype.AddStreamToOutput=function(e){var t=new O;this.SetupAudioStreamElementAndCreateSourceNode(t,e),t.unique_id=e.id,t.stream=e,t.type=o.k_EAudioStreamType_IncomingStream;var n=e.id.match(/Peer-(\d+)-(\d+)-/);if(n&&3==n.length?t.accountid=Number(n[2]):t.accountid=0,this.LogMsg("(VoiceChat) AddStreamToOutput "+t.accountid+" "+t.unique_id),t.muted=this.m_bOutputMuted||this.GetPerUserMuting(t.accountid),t.muted)for(var r=t.stream.getTracks(),i=0;i<r.length;i++)r[i].enabled=!t.muted;this.m_rgAudioStreams.push(t),t.output_gain_node=this.m_AudioContext.createGain(),t.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*this.GetPerUserGainLevel(t.accountid),this.m_AudioContext.currentTime),t.output_gain_node.connect(p.f.AudioPlaybackManager.GetActiveDestination()),t.source_node.connect(t.output_gain_node),t.volume_meter=new h(t.source_node,this.m_AudioContext),t.volume_meter.Connect(t.source_node)},e.prototype.OnAddTrack=function(e,t){for(var n=0;n<this.m_rgAudioStreams.length;++n){var o=this.m_rgAudioStreams[n];if(o.unique_id==e.id&&(this.LogMsg("(VoiceChat) OnAddTrack to existing stream "+o.accountid+" "+o.unique_id),o.volume_meter.DisconnectAll(),this.SetupAudioStreamElementAndCreateSourceNode(o,e),o.volume_meter.Connect(o.source_node),o.source_node.connect(o.output_gain_node),o.muted))for(var r=o.stream.getTracks(),i=0;i<r.length;i++)r[i].enabled=!o.muted}},e.prototype.OnAddRemoteStream=function(e){if(this.LogMsg("(WebRTC) OnAddRemoteStream - "+e.stream.id+" - "+e.stream.getTracks().length),null!=this.m_AudioContext){if(null!=e.stream&&null!=this.m_AudioContext){this.AddStreamToOutput(e.stream);var t=this;e.stream.onaddtrack=function(e){t.OnAddTrack(this,e)}}}else this.LogMsg("(WebRTC)Got OnAddRemoteStream when we don't have audio context... stopped chat?")},e.prototype.ModifyLocalSDPBeforeSetting=function(e){for(var t=/a=rtpmap:(\d+)\sopus(.*)/,n=/a=fmtp:(\d+)\s(.*)/,o=e.sdp.split("\r\n"),r=-1!=e.sdp.indexOf("mozilla..."),i=!1,a=0;a<o.length;++a){var s=o[a];if("m="==s.substr(0,2)&&a+1<o.length){for(var c="0",l=a+1;l<o.length;++l){if("m="==(s=o[l]).substr(0,2)){a=l-1;break}if(u=s.match(t)){c=u[1];break}}if("0"!=c)for(l=a+1;l<o.length;++l){if("m="==(s=o[l]).substr(0,2)){a=l-1;break}var u;if((u=s.match(n))&&u[1]==c){r||(o[l]="a=fmtp:"+u[1]+" minptime=10;useinbandfec=1;usedtx=1"),i=!0;break}}}}return i&&(e.sdp=o.join("\r\n")),e},e.prototype.OnCreateOfferSuccess=function(e,t){if(this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_CreatePeerConnection){this.LogMsg("(WebRTC) OnCreateOfferSuccess");var n=this;t=this.ModifyLocalSDPBeforeSetting(t),e.setLocalDescription(t).then((function(){var e=a.b.Init(u.b);e.Body().set_sdp(JSON.stringify(t)),n.LogMsg("(WebRTC) Offer (Local Description): "+e.Body().sdp()),n.m_VoiceCallState.m_eState=C.k_EVoiceCallState_InitatedWebRTCSession,u.d.InitiateWebRTCConnection(n.m_CMInterface.GetServiceTransport(),e).then((function(e){if(null==n.m_PeerConnection)n.LogMsg("(WebRTC) Got response to InitiateWebRTCConnection with no local peer connection"),n.EndVoiceChatInternal(!1);else if(1==e.GetEResult()){var t=JSON.parse(e.Body().remote_description());n.m_PeerConnection.setRemoteDescription(new RTCSessionDescription(t)).then((function(){n.LogMsg("(WebRTC) Remote Description: "+t.sdp),"offer"==t.type?(n.LogMsg("(WebRTC) !! received 'offer' rather than 'answer' from InitiateWebRTCConnection, unexpected."),n.EndVoiceChatInternal(!1)):"answer"==t.type&&n.LogMsg("(WebRTC) setRemoteDescription success")})).catch((function(e){n.LogMsg("(WebRTC) setRemoteDescription error: "+e),n.LogMsg("(VoiceChat) Fatal error, ending chat"),n.EndVoiceChatInternal(!1)}))}else n.LogMsg("(WebRTC) Got failure ("+e.GetEResult()+") response from InitiateWebRTCConnection"),n.BackOffAndRetryInitiateVoiceChat()})).catch((function(e){n.LogMsg("(WebRTC) Failure in WebRTCClientService.InitiateWebRTCConnection"),n.BackOffAndRetryInitiateVoiceChat()}))})).catch((function(e){n.LogMsg("(WebRTC) setLocalDescription error: "+e),n.LogMsg("(VoiceChat) Fatal error, ending voice chat"),n.EndVoiceChatInternal(!1)}))}else this.LogMsg("(WebRTC) Hit OnCreateOfferSuccess in wrong state "+this.m_VoiceCallState.m_eState)},e.prototype.OnCreateOfferError=function(e){this.LogMsg("(WebRTC) OnCreateOfferError: "+e),this.LogMsg("(VoiceChat) Fatal Error, ending chat attempt"),this.EndVoiceChatInternal(!1)},e.prototype.CreatePeerConnection=function(e){var t=this,n=new RTCPeerConnection({sdpSemantics:"plan-b"});return n.onicecandidate=function(e){t.OnIceCandidate(e)},n.onaddstream=this.OnAddRemoteStream,n.onremovestream=this.OnRemoveRemoteStream,n.oniceconnectionstatechange=function(e){t.OnIceConnectionStateChange(n,e)},n.onicegatheringstatechange=function(e){t.OnIceGatheringStateChange(n,e)},n.onsignalingstatechange=function(e){t.OnSignalingStateChange(n,e)},null!=e&&n.addStream(e),this.m_PeerConnection=n,this.m_PeerConnection},e.prototype.OnMicStreamInactive=function(e,t){this.LogMsg("(WebRTC) Mic Stream went inactive: "+t.type),this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_RequestedMicAccess&&(this.LogMsg("(WebRTC) Ending then auto-re-initiating voice chat without mic"),this.RestartVoiceChatIfConnected())},e.prototype.OnNoiseGateMessage=function(e){this.LogMsg("(VoiceChat) "+e.data)},e.prototype.SetupNoiseGateOnMic=function(e){var t=this.GetNoiseGateOptions();if(p.f.AudioPlaybackManager.supports_audio_worklets){this.LogMsg("(VoiceChat) Audio Worklets supported - high performance mic noisegate in use!");var n=window;this.m_MicNoiseGate=new n.AudioWorkletNode(this.m_AudioContext,"noisegate-processor"),this.m_MicNoiseGate.port.onmessage=this.OnNoiseGateMessage,this.m_MicInputGainNode.connect(this.m_MicNoiseGate).connect(e),this.m_MicNoiseGate.parameters.get("threshold").setValueAtTime(t.threshold,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("attack").setValueAtTime(t.attack,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("release").setValueAtTime(t.release,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("sampleRate").setValueAtTime(this.m_AudioContext.sampleRate,this.m_AudioContext.currentTime)}else this.LogMsg("(VoiceChat) Browser doesn't support audio worklets, mic perf will suffer and may stutter/echo during repaint/high CPU usage"),this.m_MicNoiseGate=new m(this.m_AudioContext,t),this.m_MicInputGainNode.connect(this.m_MicNoiseGate.input),this.m_MicNoiseGate.output.connect(e)},e.prototype.OnGetUserMediaSuccess=function(e){if(this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_RequestedMicAccess){if(this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_CreatePeerConnection,null!=e){e.id;var t=this.m_AudioContext.createMediaStreamSource(e),n=this;e.oninactive=function(e){n.OnMicStreamInactive(this,e)},this.m_MicInputGainNode=this.m_AudioContext.createGain(),this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),t.connect(this.m_MicInputGainNode);var r=void 0;if(this.m_Settings.m_NoiseGateLevel!=S.k_ENoiseGateLevel_Off)r=this.m_AudioContext.createMediaStreamDestination(),this.SetupNoiseGateOnMic(r),e=r.stream;else r=this.m_AudioContext.createMediaStreamDestination(),this.m_MicInputGainNode.connect(r),e=r.stream;var i=new O;i.unique_id=e.id,i.destination_node=r,i.stream=e,i.source_node=t,i.type=o.k_EAudioStreamType_Microphone,i.accountid=this.m_CMInterface.steamid.GetAccountID(),i.muted=!1,i.elem=void 0,i.output_gain_node=this.m_AudioContext.createGain(),i.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain,this.m_AudioContext.currentTime),i.output_gain_node.connect(p.f.AudioPlaybackManager.GetActiveDestination()),this.m_rgAudioStreams.push(i);var a=t;this.m_MicNoiseGate&&(a=null!=this.m_MicNoiseGate.output?this.m_MicNoiseGate.output:this.m_MicNoiseGate),this.m_MicVolumeMeter=void 0,this.m_MicVolumeMeter=new h(a,this.m_AudioContext),i.volume_meter=this.m_MicVolumeMeter,this.m_VoiceEchoLocalMic&&null==this.m_MicNoiseGate?this.m_MicInputGainNode.connect(i.output_gain_node):this.m_VoiceEchoLocalMic&&(this.m_MicNoiseGate.output?this.m_MicNoiseGate.output.connect(i.output_gain_node):this.m_MicNoiseGate.connect(i.output_gain_node))}if(0!=this.m_VoiceCallState.m_targetAccountID||null!=this.m_VoiceCallState.m_chatRoom){var s=this.CreatePeerConnection(e),c=this;s.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:0,voiceActivityDetection:!0}).then((function(e){c.OnCreateOfferSuccess(s,e)})).catch((function(e){c.OnCreateOfferError(e)}))}else this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_LocalMicOnly,this.m_VoiceCallState.m_timeFinishedConnecting=performance.now()}else{for(var l=0,u=e.getTracks();l<u.length;l++){u[l].stop()}this.LogMsg("(VoiceChat) Hit OnGetUserMediaSuccess in wrong state "+this.m_VoiceCallState.m_eState)}},e.prototype.OnGetUserMediaFailure=function(e){if(!(this.m_VoiceCallState.m_eState<=C.k_EVoiceCallState_ScheduledInitiate)){var t=this,n=navigator;n.permissions&&n.permissions.query({name:"microphone"}).then((function(e){"granted"==e.stat||("denied"==e.state?t.m_bUserHasDeniedMicPermissions=!0:e.state)})),this.LogMsg("(WebAudio) The following error occured getting audio stream: "+e.name),this.OnGetUserMediaSuccess(void 0)}},e.prototype.InitiateChatRoomVoice=function(){this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_ScheduledInitiate?this.LogMsg("(VoiceChat) Hit InitiateChatRoomVoice in wrong state "+this.m_VoiceCallState.m_eState):p.f.AudioPlaybackManager.SetVoiceActive(this.OnRequestMicrophoneAccess)},e.prototype.JoinVoiceChatOrAskForOneOnOneChatNow=function(){var e,t=this;0==this.m_VoiceCallState.m_targetAccountID?(this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_RequestedPermission,(e=a.b.Init(c.w)).Body().set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),e.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID),this.LogMsg("(VoiceChat) InitiateChatRoomVoice request to group: "+this.m_VoiceCallState.m_chatRoom.groupID+", room: "+this.m_VoiceCallState.m_chatRoom.chatID),c.X.JoinVoiceChat(this.m_CMInterface.GetServiceTransport(),e).then((function(e){1==e.GetEResult()?(t.m_VoiceCallState.m_voiceChatID=e.Body().voice_chatid(),t.OnVoiceChatAccepted(!0)):2==e.GetEResult()?t.BackOffAndRetryInitiateVoiceChat():t.OnVoiceChatAccepted(!1)})).catch((function(e){t.BackOffAndRetryInitiateVoiceChat()}))):(this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_RequestedPermission,""==this.m_VoiceCallState.m_voiceChatID?((e=a.b.Init(l.d)).Body().set_steamid_partner(f.a.InitFromAccountID(this.m_VoiceCallState.m_targetAccountID).ConvertTo64BitString()),this.LogMsg("(VoiceChat) InitiateOneOnOneVoiceChat request to "+this.m_VoiceCallState.m_targetAccountID),l.i.RequestOneOnOneChat(this.m_CMInterface.GetServiceTransport(),e).then((function(e){if(1==e.GetEResult()){t.LogMsg("(VoiceChat) Waiting on acceptance from "+t.m_VoiceCallState.m_targetAccountID),t.m_VoiceCallState.m_voiceChatID=e.Body().voice_chatid();var n=p.f.FriendStore.self,o=p.f.ChatStore.GetFriendChat(t.m_VoiceCallState.m_targetAccountID,!1);null!=n&&null!=o&&o.AddVoiceChannelInviteMsg(t.m_CMInterface.steamid.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelInvite",n.display_name,o.chat_partner.display_name))}else t.LogMsg("(VoiceChat) Initiating voice chat to "+t.m_VoiceCallState.m_targetAccountID+" has failed."),t.EndVoiceChatInternal(!1)}))):this.OnVoiceChatAccepted(!0))},e.prototype.OnVoiceChatAccepted=function(e){this.m_VoiceCallState.m_eState<C.k_EVoiceCallState_RequestedPermission?this.LogMsg("(VoiceChat) Hit OnVoiceChatAccepted in wrong state "+this.m_VoiceCallState.m_eState):null!=this.m_VoiceCallState.m_webRTCConnectedNotification?e?(this.m_VoiceCallState.m_targetAccountID?(this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_VoiceCallState.m_timeStartedConnecting=performance.now(),this.LogMsg("(VoiceChat) Call accepted to individual "+this.m_VoiceCallState.m_targetAccountID)):this.m_VoiceCallState.m_chatRoom&&this.LogMsg("(VoiceChat) Call accepted to room "+this.m_VoiceCallState.m_chatRoom.chatID),this.OnWebRTCConnectedAndVoiceChatConnected()):this.m_VoiceCallState.m_targetAccountID?(this.LogMsg("(VoiceChat) Call rejected to individual "+this.m_VoiceCallState.m_targetAccountID),this.OnUserEndVoiceChat()):this.m_VoiceCallState.m_chatRoom&&(this.LogMsg("(VoiceChat) Call rejected to room "+this.m_VoiceCallState.m_chatRoom.chatID),this.EndVoiceChatInternal(!1)):this.LogMsg("(VoiceChat) Hit OnVoiceChatAccepted without WebRTC connected")},e.prototype.InitiateOneOnOneVoiceChat=function(e){this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_ScheduledInitiate?this.LogMsg("(VoiceChat) Hit InitiateOneOnOneVoiceChat in wrong state "+this.m_VoiceCallState.m_eState):(null==this.m_VoiceCallState.m_timeStartedConnecting&&(this.m_VoiceCallState.m_timeStartedConnecting=performance.now()),0==this.m_ConnectionCheck&&(this.m_ConnectionCheck=SetBackgroundInterval(this.CheckConnection,2e3)),p.f.AudioPlaybackManager.SetVoiceActive(this.OnRequestMicrophoneAccess))},e.prototype.IPIntToString=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)},e.prototype.OnSetUpdatedLocalDescriptionSuccess=function(){this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionSuccess");var e=a.b.Init(u.a);e.Body().set_ip_webrtc_server(this.m_VoiceCallState.m_webRTCServerIP),e.Body().set_port_webrtc_server(this.m_VoiceCallState.m_webRTCServerPort),e.Body().set_ip_webrtc_session_client(this.m_VoiceCallState.m_webRTCClientIP),e.Body().set_port_webrtc_session_client(this.m_VoiceCallState.m_webRTCClientPort),e.Body().set_remote_description_version(this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion),u.d.AcknowledgeUpdatedRemoteDescription(this.m_CMInterface.GetServiceTransport(),e).then((function(e){}))},e.prototype.OnSetUpdatedLocalDescriptionFailure=function(e){this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionFailure: "+e),this.EndVoiceChatInternal(!1)},e.prototype.OnCreateAnswerSuccess=function(e){this.LogMsg("(WebRTC) OnCreateAnswerSuccess: "+JSON.stringify(e));var t=this;if(this.m_PeerConnection.setLocalDescription(e).then((function(){t.OnSetUpdatedLocalDescriptionSuccess()})).catch((function(e){t.OnSetUpdatedLocalDescriptionFailure(e)})),this.m_VoiceCallState.m_bOfferUpdateInProgress=!1,null!=this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate){var n=this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate;this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=void 0,this.ProcessUpdatedRemoteDescription(n)}},e.prototype.OnCreateAnswerError=function(e){this.LogMsg("(WebRTC) OnCreateAnswerError: "+e),this.EndVoiceChatInternal(!1)},e.prototype.ProcessUpdatedRemoteDescription=function(e){this.m_VoiceCallState.m_bOfferUpdateInProgress=!0,this.m_mapSSRCToAccountID.clear();for(var t=e.ssrcs_to_accountids(),n=0;n<t.length;++n){var o=t[n];this.m_mapSSRCToAccountID.set(o.ssrc(),o.accountid())}var r=this,i=JSON.parse(e.remote_description());return this.m_PeerConnection.setRemoteDescription(new RTCSessionDescription(i)).then((function(){r.LogMsg("(WebRTC) Updated Remote Description: "+i.sdp),"offer"==i.type?(r.LogMsg("(WebRTC) setRemoteDescription success with new offer"),r.m_PeerConnection.createAnswer().then((function(e){r.OnCreateAnswerSuccess(e)})).catch((function(e){r.OnCreateAnswerError(e)})),r.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion=e.remote_description_version()):"answer"==i.type&&(r.LogMsg("(WebRTC) setRemoteDescription success"),r.m_VoiceCallState.m_bOfferUpdateInProgress=!1)})).catch((function(e){r.LogMsg("(WebRTC) setRemoteDescription error: "+e),r.LogMsg("(VoiceChat) Fatal error, ending chat"),r.EndVoiceChatInternal(!1)})),1},e.prototype.SendVoiceStatusUpdate=function(){var e=a.b.Init(l.g);e.Body().set_user_steamid(this.m_CMInterface.steamid.ConvertTo64BitString()),e.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),e.Body().set_user_muted_mic_locally(this.IsMicMuted()),e.Body().set_user_muted_output_locally(this.IsOutputMuted()),e.Body().set_user_has_no_mic_for_session(this.BNoMicAvailableForSession()),e.Body().set_user_webaudio_sample_rate(p.f.AudioPlaybackManager.GetLastObservedSampleRate()),l.i.NotifyUserVoiceStatus(this.m_CMInterface.GetServiceTransport(),e)},e.prototype.UpdateUserVoiceStatus=function(e){if(this.m_VoiceCallState.m_voiceChatID==e.voice_chatid()){var t=new f.a(e.user_steamid()),n=this.m_mapUserVoiceStatus.get(t.GetAccountID());null==n&&(n=new T),n.mic_muted_locally=e.user_muted_mic_locally(),n.output_muted_locally=e.user_muted_output_locally(),n.has_no_mic_for_session=e.user_has_no_mic_for_session();var o=p.f.FriendStore.GetPlayerIfCached(t.GetAccountID()),r="[U:1:"+t.GetAccountID()+"]",i="";null!=o&&(i=o.display_name+" ");var a="";a=n.has_no_mic_for_session?"nomic":n.mic_muted_locally?"muted":"on",this.LogMsg("(VoiceChat) User "+i+r+" status now: mic("+a+") output("+(n.output_muted_locally?"muted":"on")+")"),this.m_mapUserVoiceStatus.set(t.GetAccountID(),n)}},e.prototype.OnWebRTCConnectedAndVoiceChatConnected=function(){var e=this,t=this.m_VoiceCallState.m_webRTCConnectedNotification;this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession,this.LogMsg("(WebRTC) WebRTC session connected "+this.IPIntToString(t.client_ip())+":"+t.client_port()+" => "+this.IPIntToString(t.server_ip())+":"+t.server_port()),""==this.m_VoiceCallState.m_voiceChatID&&(this.LogMsg("(VoiceChat) Reached OnWebRTCConnectedAndVoiceChatConnected without voice chat id? Failing."),this.EndVoiceChatInternal(!1));var n=a.b.Init(l.e);n.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),n.Body().set_ssrc_my_sending_stream(t.ssrc()),n.Body().set_ip_webrtc_client(t.client_ip()),n.Body().set_port_webrtc_client(t.client_port()),n.Body().set_ip_webrtc_server(t.server_ip()),n.Body().set_port_webrtc_server(t.server_port()),n.Body().set_has_audio_worklets_support(p.f.AudioPlaybackManager.supports_audio_worklets),n.Body().set_user_agent(navigator.userAgent),l.i.UpdateVoiceChatWebRTCData(this.m_CMInterface.GetServiceTransport(),n).then((function(t){1==t.GetEResult()?(e.m_VoiceCallState.m_eState=C.k_EVoiceCallState_Connected,e.m_VoiceCallState.m_timeFinishedConnecting=performance.now(),e.SendVoiceStatusUpdate(),e.LogMsg("(WebRTC) Updated voice session with WebRTC session data "+e.m_VoiceCallState.m_voiceChatID),t.Body().send_client_voice_logs()&&e.ScheduleClientVoiceLogsUpload(2),e.CheckConnection()):(e.LogMsg("(WebRTC) Error updating voice session with WebRTC session data "+e.m_VoiceCallState.m_voiceChatID),e.BackOffAndRetryInitiateVoiceChat())})).catch((function(t){e.LogMsg("(WebRTC) Error updating voice session with WebRTC session data "+e.m_VoiceCallState.m_voiceChatID),e.BackOffAndRetryInitiateVoiceChat()}))},e.prototype.OnAcceptOneOnOneVoiceChat=function(e,t){var n=this;this.m_VoiceCallState.m_targetAccountID!=e.GetAccountID()&&this.EndVoiceChatInternal(!1),this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_None,this.m_VoiceCallState.m_targetAccountID=e.GetAccountID(),this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!1,this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1,this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!1,this.m_VoiceCallState.m_chatRoom=null,this.m_VoiceCallState.m_voiceChatID=t;var o=a.b.Init(l.a);o.Body().set_steamid_partner(e.ConvertTo64BitString()),o.Body().set_accepted_request(!0),o.Body().set_voice_chatid(t),l.i.AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(),o).then((function(t){1==t.GetEResult()?n.InitiateOneOnOneVoiceChat(e.GetAccountID()):(n.LogMsg("(VoiceChat) Failed responding to voice chat from "+e.GetAccountID()),n.EndVoiceChatInternal(!1))}))},e.prototype.OnRejectOneOnOneVoiceChat=function(e,t){var n=this,o=a.b.Init(l.a);o.Body().set_steamid_partner(e.ConvertTo64BitString()),o.Body().set_accepted_request(!1),o.Body().set_voice_chatid(t),l.i.AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(),o).then((function(t){1==t.GetEResult()||n.LogMsg("(VoiceChat) Failed responding to voice chat from "+e.GetAccountID())}))},e.prototype.PlayRingSound=function(e){this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e).audio_buffer=p.f.AudioPlaybackManager.PlayAudioURLWithRepeats(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_phonecall.m4a?v=1",1)},e.prototype.IsVoiceActive=function(e,t){return!!this.m_VoiceCallState.BMatchingCall(e,t)&&this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None},e.prototype.CheckVoiceSnoozeTiemout=function(){if(p.f.IdleTracker.GetUserIdleTime()>3600){var e=this.m_MicVolumeMeter.GetLastTimeNonZero();performance.now()-e>36e5&&(this.OnUserEndVoiceChat(),p.f.ShowAlert(Object(g.d)("#Voice_LeftIdleVoiceChat_Title"),Object(g.d)("#Voice_LeftIdleVoiceChat_Body"),Object(g.d)("#Voice_LeftIdleVoiceChat_OK")).then((function(){})).catch((function(){return!0})))}},e.prototype.ProcessStatsReport=function(){if((this.CheckVoiceSnoozeTiemout(),null!=this.m_PeerConnection)&&(this.m_StatsTimeout=SetBackgroundTimeout(this.ProcessStatsReport,1e4),i.a.IN_CLIENT&&s.b.BClientConnected().then((function(){})),!(-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...")))){var e=new Date,t=this,n=this.m_PeerConnection;t.LogMsg("-----------------------------------------------------------"),t.LogMsg(" Voice Report: "+e.toUTCString()),t.LogMsg("-----------------------------------------------------------");var o=n.getSenders();if(o.length>0){this.LogMsg("(WebRTC) "+this.PadOutput("(Sender SSRC)",40)+" "+this.PadOutput("Audio Packets Sent",20)+" "+this.PadOutput("Connection State",20)+" "+this.PadOutput("Writable",20)+" "+this.PadOutput("Track State",20)+" "+this.PadOutput("Round Trip MS",20)+" "+this.PadOutput("Transport Bytes Sent",24)+" "+this.PadOutput("Transport Bytes Received",24)+" ");try{for(var r=0;r<o.length;++r)o[r].getStats().then((function(e){e.forEach((function(n){if("outbound-rtp"==n.type&&"audio"==n.mediaType){var o=n.ssrc,r=n.packetsSent,i="",a="",s=0,c=0,l=0,u="",p=e.get(n.trackId);null!=p&&"track"==p.type&&"audio"==p.kind&&(u=p.ended&&p.detached?"ended+detached":p.ended?"ended":p.detached?"detached":"active");var m=e.get(n.transportId);if(null!=m&&"transport"==m.type){var d=e.get(m.selectedCandidatePairId);null!=d&&"candidate-pair"==d.type&&(i=d.state,a=d.writable?"writable":"not-writable",s=1e3*d.currentRoundTripTime),c=m.bytesSent,l=m.bytesReceived}t.LogMsg("(WebRTC) "+t.PadOutput(String(o),40)+" "+t.PadOutput(String(r),20)+" "+t.PadOutput(i,20)+" "+t.PadOutput(a,20)+" "+t.PadOutput(u,20)+" "+t.PadOutput(String(s),20)+" "+t.PadOutput(String(c),24)+" "+t.PadOutput(String(l),24))}}))}))}catch(e){t.LogMsg("(WebRTC) Can't log sender stats on this browser")}}SetBackgroundTimeout(this.ProcessReceiverStatsReport,100)}},e.prototype.ProcessReceiverStatsReport=function(){if(!(-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla..."))){var e=this,t=this.m_PeerConnection;try{t.getStats((function(t){t.result().forEach((function(t){if("ssrc"==t.type){var n=new w,o=t.names(),r=o.indexOf("mediaType");if(-1!=r&&"audio"==t.stat(o[r])){t.names().forEach((function(e){"ssrc"==e?n.m_SSRC=Number(t.stat(e)):"googCurrentDelayMs"==e?n.m_MostRecentDelayEstimateMs=Number(t.stat(e)):"packetsLost"==e?n.m_PacketsLost=Number(t.stat(e)):"packetsReceived"==e?n.m_PacketsReceived=Number(t.stat(e)):"googJitterReceived"==e?n.m_MostRecentJitterReceivedMs=Number(t.stat(e)):"googJitterBufferMs"==e?n.m_CurrentJitterBufferMs=Number(t.stat(e)):"bytesReceived"==e?n.m_BytesReceived=Number(t.stat(e)):"googDecodingCTN"==e?n.m_DecodingThroughNetEQ=Number(t.stat(e)):"googDecodingPLC"==e?n.m_DecodingPacketLossCorrection=Number(t.stat(e)):"googDecodingCNG"==e?n.m_DecodingComfortNoiseGeneration=Number(t.stat(e)):"googDecodingPLCCNG"==e?n.m_DecodingPacketLossFadeNoiseGeneration=Number(t.stat(e)):"googDecodingNormal"==e?n.m_DecodingNormal=Number(t.stat(e)):"googDecodingCTSG"==e?n.m_DecodingSilenceGenerator=Number(t.stat(e)):"googDecodingMuted"==e&&(n.m_DecodingMuted=Number(t.stat(e)))}));var i=e.m_mapSSRCToAccountID.get(n.m_SSRC);null!=i&&e.m_mapAccountIDToStats.set(i,n)}}}))})),e.LogMsg("-----------------------------------------------------------"),e.LogMsg("(WebRTC) "+e.PadOutput("(Receiving)",40)+" "+e.PadOutput("Packets Received",20)+" "+e.PadOutput("Est. Delay MS",20)+" "+e.PadOutput("Packets Lost",20)+" "+e.PadOutput("Last Jitter MS",20)+" "+e.PadOutput("Jitter Buffer MS",20)+" "+e.PadOutput("Decoding Successes",20)+" "+e.PadOutput("Decoding Errors",20)),e.m_mapAccountIDToStats.forEach((function(t,n){var o=p.f.FriendStore.GetPlayerIfCached(n),r="[unknown]";null!=o&&(r=o.display_name),e.LogMsg("(WebRTC) "+e.PadOutput(r.substr(0,40),40)+" "+e.PadOutput(String(t.m_PacketsReceived),20)+" "+e.PadOutput(String(t.m_MostRecentDelayEstimateMs),20)+" "+e.PadOutput(String(t.m_PacketsLost),20)+" "+e.PadOutput(String(t.m_MostRecentJitterReceivedMs),20)+" "+e.PadOutput(String(t.m_CurrentJitterBufferMs),20)+" "+e.PadOutput(String(t.m_DecodingNormal+t.m_DecodingComfortNoiseGeneration),20)+" "+e.PadOutput(String(t.m_DecodingPacketLossCorrection+t.m_DecodingPacketLossFadeNoiseGeneration+t.m_DecodingSilenceGenerator),20))})),e.LogMsg("-----------------------------------------------------------")}catch(e){}}},e.prototype.PadOutput=function(e,t,n){if(void 0===n&&(n=void 0),Math.abs(t)<=e.length)return e;var o=Math.max(Math.abs(t)-e.length||0,0),r=Array(o+1).join(String(n||" ").charAt(0));return t<0?r+e:e+r},e.prototype.CheckConnection=function(){if(this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_Connected||this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_LocalMicOnly)this.LogMsg("(VoiceChat) Succcess! Voice is fully connected took "+(this.m_VoiceCallState.m_timeFinishedConnecting-this.m_VoiceCallState.m_timeStartedConnecting).toFixed(0)+"ms to complete, "+(this.m_VoiceCallState.m_nFailuresThisInitiate+1)+" attempts made before success."),ClearBackgroundInterval(this.m_ConnectionCheck),this.m_ConnectionCheck=0,this.m_VoiceCallState.m_nFailuresThisInitiate=0,this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_StatsTimeout=SetBackgroundTimeout(this.ProcessStatsReport,1e4);else{var e=performance.now()-this.m_VoiceCallState.m_timeStartedConnecting;this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=e>2e3;var t=6e4;0!=this.m_VoiceCallState.m_targetAccountID&&this.m_VoiceCallState.m_eState==C.k_EVoiceCallState_RequestedPermission&&(t=3e5),e>t&&(this.LogMsg("(VoiceChat) Failure! Gave up after more than one minute trying to connect, last state was "+I(this.m_VoiceCallState.m_eState)+"("+this.m_VoiceCallState.m_eState+")"),this.EndVoiceChatInternal(!1)),this.LogMsg("(VoiceChat) Still trying to connect to voice chat/webrtc "+I(this.m_VoiceCallState.m_eState)+"("+this.m_VoiceCallState.m_eState+") "+(performance.now()-this.m_VoiceCallState.m_timeStartedConnecting).toFixed(0)+"ms elapsed...")}},e.prototype.BackOffAndRetryInitiateVoiceChat=function(){var e=this;if(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None){var t=this.m_VoiceCallState.m_nFailuresThisInitiate,n=this.m_VoiceCallState.m_targetAccountID,o=this.m_VoiceCallState.m_chatRoom;this.EndVoiceChatInternal(!0),this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_ScheduledInitiate,this.m_VoiceCallState.m_targetAccountID=n,this.m_VoiceCallState.m_chatRoom=o,this.m_VoiceCallState.m_nFailuresThisInitiate=t+1;var r=250;r=t<1?250:t<3?1e3:t<5?5e3:t<10?1e4:t<15?3e4:6e4,this.LogMsg("(VoiceChat) Retrying InitiateVoiceChat in "+r.toFixed(0)+" milliseconds..."),this.m_VoiceCallState.m_bInitiatedOneOnOneCall||0==this.m_VoiceCallState.m_targetAccountID?this.m_ScheduledInitiate=SetBackgroundTimeout((function(){e.ScheduledInitiate(n,o)}),r):this.m_ScheduledInitiate=SetBackgroundTimeout((function(){e.ScheduledAcceptOneOnOne(n)}),r)}},e.prototype.ScheduledAcceptOneOnOne=function(e){this.m_ScheduledInitiate=0,this.AcceptPartnersOneOnOneChatRequest(e)},e.prototype.ScheduledInitiate=function(e,t){this.m_ScheduledInitiate=0,this.InitiateVoiceChat(e,t)},e.prototype.InitiateVoiceChat=function(e,t){var n=this;s.b.BClientConnected().then((function(){}));var o=new b.UAParser(navigator.userAgent).getResult(),r="Chrome"==o.browser.name,a="Edge"==o.browser.name&&"Blink"==o.engine.name;if(r||a)if(0!=e&&t)this.LogMsg("Cant initiate voice chat for both friend & group");else{var c=this.m_VoiceCallState.BMatchingCall(e,t);!this.m_VoiceCallState.BMatchingCall(e,t)&&this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_ScheduledInitiate&&(this.LogMsg("(VoiceChat) InitiateVoiceChat called for new target account/room while already connected, ending prior session first"),this.EndVoiceChatInternal(!1)),this.m_ScheduledInitiate&&(ClearBackgroundTimeout(this.m_ScheduledInitiate),this.m_ScheduledInitiate=0);var l=performance.now();if(this.m_VoiceCallState.m_eState<=C.k_EVoiceCallState_ScheduledInitiate&&0!=this.m_VoiceCallState.m_timeEndedVoiceChat&&l-this.m_VoiceCallState.m_timeEndedVoiceChat<100){this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_ScheduledInitiate,this.m_VoiceCallState.m_targetAccountID=e,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!0,this.m_VoiceCallState.m_chatRoom=t;var u=100-(l-this.m_VoiceCallState.m_timeEndedVoiceChat);return this.LogMsg("(VoiceChat) Delaying requested InitiateChat for "+u.toFixed(0)+" milliseconds to let prior EndVoiceChat finish..."),void(this.m_ScheduledInitiate=SetBackgroundTimeout((function(){n.ScheduledInitiate(e,t)}),u))}if((!c||this.m_VoiceCallState.m_eState<=C.k_EVoiceCallState_ScheduledInitiate)&&(e?this.LogMsg("Resetting voice chat state and initiating to individual "+e):t?this.LogMsg("Resetting voice chat state and initiating to room "+t.chatID):(Object(y.a)(this.m_VoiceEchoLocalMic,"Shouldn't hit local mic access only without echo local mic on"),this.LogMsg("Resetting voice chat state and initiating local mic access only")),this.m_VoiceCallState.m_eState<=C.k_EVoiceCallState_ScheduledInitiate)){if(0!=e||null!=t&&"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetVoiceChatActive)try{SteamClient.WebChat.SetVoiceChatActive(!0)}catch(e){}this.m_VoiceCallState.m_targetAccountID=e,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!0,this.m_VoiceCallState.m_chatRoom=t,this.m_VoiceCallState.m_timeStartedConnecting=performance.now(),this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion="0",this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_ConnectionCheck=SetBackgroundInterval(this.CheckConnection,2e3),0!=e?this.InitiateOneOnOneVoiceChat(e):this.InitiateChatRoomVoice()}}else{this.LogMsg("(VoiceChat) Voice chat not supported in browser: "+o.browser.name);var m=Object(g.d)(i.a.IN_MOBILE?"#VoiceChat_Unavailable_NotSupported":"#Voice_VoiceUnavailableInBrowser_Title"),d=i.a.IN_MOBILE?Object(g.d)("#VoiceChat_Unavailable_MobileChat"):Object(g.d)("#Voice_VoiceUnavailableInBrowser_Body",o.browser.name);p.f.ShowAlert(m,d,Object(g.d)("#Voice_VoiceUnavailableInBrowser_OK")).then((function(){})).catch((function(){return!0}))}},e.prototype.OnRequestMicrophoneAccess=function(){var e=this;if(this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_ScheduledInitiate)return this.LogMsg("(VoiceChat) Hit OnRequestMicrophoneAccess in wrong state "+this.m_VoiceCallState.m_eState),void this.EndVoiceChatInternal(!1);null==this.m_AudioContext&&(this.m_AudioContext=p.f.AudioPlaybackManager.context);var t={optional:[{echoCancellation:this.m_Settings.m_VoiceUseEchoCancellation},{googEchoCancellation:this.m_Settings.m_VoiceUseEchoCancellation},{googEchoCancellation2:this.m_Settings.m_VoiceUseEchoCancellation},{googNoiseSupression:this.m_Settings.m_VoiceUseNoiseCancellation},{googNoiseSupression2:this.m_Settings.m_VoiceUseNoiseCancellation},{mozNoiseSuppression:this.m_Settings.m_VoiceUseNoiseCancellation},{googTypingNoiseDetection:this.m_Settings.m_VoiceUseNoiseCancellation},{googAutoGainControl:this.m_Settings.m_VoiceUseAutoGainControl},{googAutoGainControl2:this.m_Settings.m_VoiceUseAutoGainControl},{mozAutoGainControl:this.m_Settings.m_VoiceUseAutoGainControl},{googHighpassFilter:!0},{googAudioMirroring:!1}]};"default"!=this.m_Settings.m_SelectedMicID&&t.optional.push({sourceId:this.m_Settings.m_SelectedMicID}),this.m_VoiceCallState.m_targetAccountID?this.LogMsg("(VoiceChat) Call to individual "+this.m_VoiceCallState.m_targetAccountID+" now initating getUserMedia/WebRTC"):this.m_VoiceCallState.m_chatRoom&&this.LogMsg("(VoiceChat) Call to room "+this.m_VoiceCallState.m_chatRoom.chatID+" now initating getUserMedia/WebRTC"),this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_RequestedMicAccess;var n=navigator;this.m_bUserHasDeniedMicPermissions=!1,n.getUserMedia=n.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia,n.getUserMedia({audio:t,video:!1},(function(t){e.OnGetUserMediaSuccess(t)}),this.OnGetUserMediaFailure)},e.prototype.ScheduleClientVoiceLogsUpload=function(e){if(""!=this.m_VoiceCallState.m_voiceChatID){this.m_ScheduledVoiceLogsUpload&&(ClearBackgroundTimeout(this.m_ScheduledVoiceLogsUpload),this.m_ScheduledVoiceLogsUpload=0);this.m_ScheduledVoiceLogsUpload=SetBackgroundTimeout(this.UploadClientSideVoiceLogs,1e3*e)}},e.prototype.UploadClientSideVoiceLogs=function(){var e=this;if(""!=this.m_VoiceCallState.m_voiceChatID)if(this.m_bClientSideLogsUploadInProgress)this.ScheduleClientVoiceLogsUpload(2);else{this.m_bClientSideLogsUploadInProgress=!0;var t=a.b.Init(l.f);t.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);var n=this.m_rgLogLines.slice(this.m_nLastLogLineUploaded);t.Body().set_client_voice_logs_new_lines(n.join("\r\n"));var o=n.length;l.i.UploadClientVoiceChatLogs(this.m_CMInterface.GetServiceTransport(),t).then((function(t){1==t.GetEResult()?(e.m_nLastLogLineUploaded+=o,e.LogMsg("(VoiceChat) Uploaded "+o+" new lines of voice chat log info to server"),e.ScheduleClientVoiceLogsUpload(20)):(e.LogMsg("(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"),e.ScheduleClientVoiceLogsUpload(10+10*Math.random())),e.m_bClientSideLogsUploadInProgress=!1})).catch((function(t){e.LogMsg("(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"),e.ScheduleClientVoiceLogsUpload(10+10*Math.random()),e.m_bClientSideLogsUploadInProgress=!1}))}},e.prototype.EndVoiceChatInternal=function(e){var t=this;if(this.m_ScheduledVoiceLogsUpload&&this.UploadClientSideVoiceLogs(),this.m_ScheduledInitiate&&(ClearBackgroundTimeout(this.m_ScheduledInitiate),this.m_ScheduledInitiate=0),this.m_StatsTimeout&&(ClearBackgroundTimeout(this.m_StatsTimeout),this.m_StatsTimeout=0),"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetVoiceChatActive)try{SteamClient.WebChat.SetVoiceChatActive(!1)}catch(e){}if(this.m_VoiceCallState.m_eState!=C.k_EVoiceCallState_None){if(!e){if(this.m_VoiceCallState.m_targetAccountID){var n=this.m_VoiceCallState.m_targetAccountID;this.m_VoiceCallState.m_targetAccountID=0;var r=this.m_VoiceCallState.m_voiceChatID;(s=a.b.Init(l.c)).Body().set_steamid_partner(f.a.InitFromAccountID(n).ConvertTo64BitString()),s.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);var i=this.m_VoiceCallState.m_eState;l.i.LeaveOneOnOneChat(this.m_CMInterface.GetServiceTransport(),s).then((function(e){if(1==e.GetEResult())if(t.LogMsg("(VoiceChat) Left voice chat with "+n),i==C.k_EVoiceCallState_Connected){var o=new j;o.partner_accountid=t.m_CMInterface.steamid.GetAccountID(),o.voice_chatid=r,o.previously_joined=!0,t.m_mapOneOnOneCallsWaitingJoinOrAccept.set(n,o)}else{var a=p.f.FriendStore.self,s=p.f.ChatStore.GetFriendChat(n,!1);s&&a&&s.AddVoiceChannelInviteMsg(p.f.CMInterface.steamid.GetAccountID(),p.f.GetServerRTime32(),Object(g.d)("#FriendMsg_VoiceChannelEndedExplicit",a.display_name))}else t.LogMsg("(VoiceChat) Failed leaving voice chat with "+n)}))}else if(this.m_VoiceCallState.m_chatRoom){var s;(s=a.b.Init(c.z)).Body().set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),s.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID);var u=this.m_VoiceCallState.m_chatRoom.chatID;c.X.LeaveVoiceChat(this.m_CMInterface.GetServiceTransport(),s).then((function(e){1==e.GetEResult()?t.LogMsg("(VoiceChat) Left chat room ("+u+") voice chat"):t.LogMsg("(VoiceChat) Failed leaving chat room ("+u+") voice chat")}))}this.m_mapUserVoiceStatus.clear()}this.m_mapSSRCToAccountID.clear(),this.m_mapAccountIDToStats.clear();var m=this.m_VoiceCallState.m_eState>C.k_EVoiceCallState_RequestedPermission;this.m_VoiceCallState.m_eState=C.k_EVoiceCallState_None,this.m_VoiceCallState.m_targetAccountID=0,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!1,this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!1,this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1,this.m_VoiceCallState.m_chatRoom=null,e&&m||(this.m_VoiceCallState.m_voiceChatID=""),this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion="0",this.m_VoiceCallState.m_nFailuresThisInitiate=0,this.m_VoiceCallState.m_timeEndedVoiceChat=performance.now(),this.m_VoiceCallState.m_webRTCConnectedNotification=void 0,this.m_VoiceCallState.m_bOfferUpdateInProgress=!1,this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_ConnectionCheck&&(ClearBackgroundInterval(this.m_ConnectionCheck),this.m_ConnectionCheck=0);for(var d=this.m_rgAudioStreams.pop();null!=d;){null!=d.elem&&(d.elem.pause(),d.elem.src=void 0,d.elem.srcObject=void 0,d.elem=void 0),null!=d.volume_meter&&(d.volume_meter.stop(),d.volume_meter=void 0),d.stream.oninactive=void 0;for(var h=0,_=d.stream.getTracks();h<_.length;h++){_[h].stop()}if(null!=this.m_AudioContext&&d.source_node)try{if(d.source_node.disconnect(),d.type==o.k_EAudioStreamType_Microphone&&d.source_node instanceof MediaStreamAudioSourceNode)for(var b=0,v=d.source_node.mediaStream.getTracks();b<v.length;b++){v[b].stop()}}catch(e){}d.output_gain_node&&(d.output_gain_node.disconnect(),d.output_gain_node=void 0),d=this.m_rgAudioStreams.pop()}null!=this.m_MicVolumeMeter&&(this.m_MicVolumeMeter.stop(),this.m_MicVolumeMeter=void 0),null!=this.m_MicNoiseGate&&(this.m_MicNoiseGate.input?(this.m_MicNoiseGate.input.disconnect(),this.m_MicNoiseGate.output.disconnect(),this.m_MicNoiseGate.noiseGateKernel_.disconnect()):this.m_MicNoiseGate.disconnect(),this.m_MicNoiseGate=void 0),null!=this.m_MicInputGainNode&&(this.m_MicInputGainNode.disconnect(),this.m_MicInputGainNode=void 0),null!=this.m_AudioContext&&(p.f.AudioPlaybackManager.SetVoiceNotActive(),this.m_AudioContext=void 0),this.m_PeerConnection&&(this.m_PeerConnection.oniceconnectionstatechange=void 0,this.m_PeerConnection.onicegatheringstatechange=void 0,this.m_PeerConnection.onsignalingstatechange=void 0,this.m_PeerConnection.close(),this.m_PeerConnection=void 0)}},e.prototype.FillInChatUsabilityMetrics=function(e){var t=e.voice_settings();t.set_voice_input_gain(this.m_Settings.m_VoiceInputGain),t.set_voice_output_gain(this.m_Settings.m_VoiceOutputGain),t.set_noise_gate_level(Math.round(this.m_Settings.m_NoiseGateLevel)),t.set_voice_use_echo_cancellation(this.m_Settings.m_VoiceUseEchoCancellation),t.set_voice_use_noise_cancellation(this.m_Settings.m_VoiceUseNoiseCancellation),t.set_voice_use_auto_gain_control(this.m_Settings.m_VoiceUseAutoGainControl),t.set_selected_non_default_mic("default"!==this.m_Settings.m_SelectedMicID),t.set_selected_non_default_output("default"!==this.m_Settings.m_SelectedOutputID),t.set_push_to_talk_enabled(this.GetPushToTalkEnabled()),t.set_push_to_mute_enabled(this.GetPushToMuteEnabled()),t.set_play_ptt_sounds(this.m_Settings.m_bPlayPTTSounds),this.IsAnyVoiceActive()&&(this.m_VoiceCallState.m_targetAccountID?e.ui_state().set_in_one_on_one_voice_chat(!0):this.m_VoiceCallState.m_chatRoom&&e.ui_state().set_in_group_voice_chat(!0))},e.k_MaxPerUserGainMultiplier=2,e.k_MaxInputOutputGainValue=4,Object(r.c)([d.B],e.prototype,"m_VoiceCallState",void 0),Object(r.c)([d.B],e.prototype,"m_bPushToTalkEnabled",void 0),Object(r.c)([d.B],e.prototype,"m_bPushToMuteEnabled",void 0),Object(r.c)([d.B],e.prototype,"m_bVoicePTTStateEnabled",void 0),Object(r.c)([d.B],e.prototype,"m_VKPushToTalkHotKey",void 0),Object(r.c)([d.B],e.prototype,"m_strPushToTalkDisplayString",void 0),Object(r.c)([d.B],e.prototype,"m_bUserHasDeniedMicPermissions",void 0),Object(r.c)([d.B],e.prototype,"m_bOutputMuted",void 0),Object(r.c)([d.B],e.prototype,"m_AudioContext",void 0),Object(r.c)([d.B],e.prototype,"m_rgAudioStreams",void 0),Object(r.c)([d.B],e.prototype,"m_MicVolumeMeter",void 0),Object(r.c)([d.B],e.prototype,"m_MicNoiseGate",void 0),Object(r.c)([d.B],e.prototype,"m_MicInputGainNode",void 0),Object(r.c)([d.B],e.prototype,"m_PeerConnection",void 0),Object(r.c)([d.B],e.prototype,"m_Settings",void 0),Object(r.c)([d.B],e.prototype,"m_bLocalMicTestActive",void 0),Object(r.c)([d.B],e.prototype,"m_bForceConnectingStatus",void 0),Object(r.c)([d.B],e.prototype,"m_bForceReconnectingStatus",void 0),Object(r.c)([d.k.bound],e.prototype,"SetSelectedMic",null),Object(r.c)([d.k.bound],e.prototype,"SetSelectedOutput",null),Object(r.c)([d.k.bound],e.prototype,"SetUseEchoCancellation",null),Object(r.c)([d.k.bound],e.prototype,"SetUseNoiseCancellation",null),Object(r.c)([d.k.bound],e.prototype,"SetUseAutoGainControl",null),Object(r.c)([d.k.bound],e.prototype,"SetVoiceEchoLocalMic",null),Object(r.c)([d.k.bound],e.prototype,"SetVoiceLogDetails",null),Object(r.c)([d.k.bound],e.prototype,"GetVoiceLogDetails",null),Object(r.c)([d.k.bound],e.prototype,"SetUseNoiseGateLevel",null),Object(r.c)([d.k.bound],e.prototype,"SetVoiceInputGain",null),Object(r.c)([d.k.bound],e.prototype,"SetVoiceOutputGain",null),Object(r.c)([d.k.bound],e.prototype,"ForceReconnectingStatus",null),Object(r.c)([d.k.bound],e.prototype,"ForceConnectingStatus",null),Object(r.c)([d.k.bound],e.prototype,"LogMsg",null),Object(r.c)([d.k.bound],e.prototype,"GetVoiceLogs",null),Object(r.c)([d.k.bound],e.prototype,"OnPushToTalkReleased",null),Object(r.c)([d.k.bound,Object(_.a)(150)],e.prototype,"DebouncedToggleMicMuting",null),Object(r.c)([d.k.bound],e.prototype,"OnPushToTalkStateChange",null),Object(r.c)([d.k.bound],e.prototype,"UpdateNoiseGateOnActiveMic",null),Object(r.c)([d.k.bound],e.prototype,"OnAudioContextStateChange",null),Object(r.c)([d.k.bound],e.prototype,"OnIceCandidate",null),Object(r.c)([d.k.bound],e.prototype,"AddRemoteIceCandidate",null),Object(r.c)([d.k.bound],e.prototype,"OnSignalingStateChange",null),Object(r.c)([d.k.bound],e.prototype,"OnIceConnectionStateChange",null),Object(r.c)([d.k.bound],e.prototype,"OnIceGatheringStateChange",null),Object(r.c)([d.k.bound],e.prototype,"OnRemoveRemoteStream",null),Object(r.c)([d.k.bound],e.prototype,"OnAddRemoteStream",null),Object(r.c)([d.k.bound],e.prototype,"ModifyLocalSDPBeforeSetting",null),Object(r.c)([d.k.bound],e.prototype,"OnCreateOfferSuccess",null),Object(r.c)([d.k.bound],e.prototype,"OnCreateOfferError",null),Object(r.c)([d.k.bound],e.prototype,"OnNoiseGateMessage",null),Object(r.c)([d.k.bound],e.prototype,"SetupNoiseGateOnMic",null),Object(r.c)([d.k.bound],e.prototype,"OnGetUserMediaSuccess",null),Object(r.c)([d.k.bound],e.prototype,"OnGetUserMediaFailure",null),Object(r.c)([d.k.bound],e.prototype,"OnSetUpdatedLocalDescriptionSuccess",null),Object(r.c)([d.k.bound],e.prototype,"OnSetUpdatedLocalDescriptionFailure",null),Object(r.c)([d.k.bound],e.prototype,"OnCreateAnswerSuccess",null),Object(r.c)([d.k.bound],e.prototype,"OnCreateAnswerError",null),Object(r.c)([d.k.bound],e.prototype,"OnAcceptOneOnOneVoiceChat",null),Object(r.c)([d.k.bound],e.prototype,"OnRejectOneOnOneVoiceChat",null),Object(r.c)([d.k.bound],e.prototype,"PlayRingSound",null),Object(r.c)([d.k.bound],e.prototype,"ProcessStatsReport",null),Object(r.c)([d.k.bound],e.prototype,"ProcessReceiverStatsReport",null),Object(r.c)([d.k.bound],e.prototype,"CheckConnection",null),Object(r.c)([d.k.bound],e.prototype,"ScheduledAcceptOneOnOne",null),Object(r.c)([d.k.bound],e.prototype,"ScheduledInitiate",null),Object(r.c)([d.k.bound],e.prototype,"OnRequestMicrophoneAccess",null),Object(r.c)([d.k.bound],e.prototype,"UploadClientSideVoiceLogs",null),e}()},VtNY:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var o=n("mrSG"),r=n("2vnA"),i=n("RBVV"),a=n("4HGb"),s=n("s+DT"),c=n("0N1H"),l=n("LAqV"),u=n("J0bI"),p=n("oh5H"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.BIsExpired=function(){return l.f.GetServerRTime32()>=this.m_rtTimeExpires},t.prototype.InitFromInviteLinkInfo=function(e){this.m_ulChatRoomGroupID=e.group_summary().chat_group_id(),this.m_ulChatID=e.chat_id();var t=new s.a(e.steamid_sender());t.BIsIndividualAccount()&&(this.m_unAccountIDInviter=t.GetAccountID()),this.m_rtTimeExpires=e.time_expires(),this.m_bIsBanned=e.banned(),this.m_rtKickExpires=e.time_kick_expire(),this.m_bValid=!0,this.m_bReady=!0},t.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},t.prototype.InitDirectInvite=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=n,this.m_rtKickExpires=o,this.m_rtTimeExpires=c.i,this.m_bValid=!0,this.m_bReady=!0},Object(o.c)([r.k],t.prototype,"InitFromInviteLinkInfo",null),Object(o.c)([r.k],t.prototype,"InitInvalid",null),Object(o.c)([r.k],t.prototype,"InitDirectInvite",null),t}(u.b),d=function(){function e(e){this.m_mapInviteByCode=new Map,this.m_ChatStore=e}return e.prototype.JoinChatGroup=function(e,t,n){var o=new m;return o.InitDirectInvite(e,t),this.AcceptInvite(o,n)},e.prototype.AcceptInvite=function(e,t){var n=this;null==t&&(t=l.f.GetDefaultBrowserContext());var o=a.b.Init(i.v);return o.Body().set_chat_group_id(e.GetChatRoomGroupID()),e.BIsInviteLink()&&o.Body().set_invite_code(e.GetInviteCode()),e.GetChatID()&&o.Body().set_chat_id(e.GetChatID()),i.X.JoinChatRoomGroup(this.m_ChatStore.CMInterface.GetServiceTransport(),o).then((function(e){var o={result:e.GetEResult()};if(1==o.result){var r=n.m_ChatStore.AddJoinedChatRoomGroup(e.Body().state(),e.Body().user_chat_state());l.f.UIStore.ShowAndOrActivateChatRoomGroup(t,r,!0);var i=e.Body().join_chat_id();if(r){var a=r.GetChatRoom(i);a&&a.StartVoiceChat()}}else 15==o.result&&(o.time=e.Body().time_expire());return o}))},e.prototype.GetInviteFromCode=function(e){var t=this,n=this.m_mapInviteByCode.get(e);if(n||(n=new m(e),this.m_mapInviteByCode.set(e,n)),!n.BIsReady()||!this.m_ChatStore.GetChatRoomGroup(n.GetChatRoomGroupID())){var o=a.b.Init(i.p);o.Body().set_invite_code(e),i.X.GetInviteLinkInfo(this.m_ChatStore.CMInterface.GetServiceTransport(),o).then((function(e){1==e.GetEResult()?(t.m_ChatStore.AddKnownChatRoomGroup(e.Body().group_summary(),e.Body().user_chat_group_state()),n.InitFromInviteLinkInfo(e.Body())):n.InitInvalid()}))}return n},e.prototype.GetDirectInviteInfo=function(e,t,n){var o=this,r=new m,c=this.m_ChatStore.GetChatRoomGroup(e);if(c&&c.GetChatRoom(t))r.InitDirectInvite(e,t);else{var l=a.b.Init(i.o);l.Body().set_steamid_invitee(s.a.InitFromAccountID(n).ConvertTo64BitString()),l.Body().set_chat_group_id(e),l.Body().set_chat_id(t),i.X.GetInviteInfo(this.m_ChatStore.CMInterface.GetServiceTransport(),l).then((function(n){if(1!=n.GetEResult()||!n.Body().group_summary().chat_group_id())return console.log("GetDirectInviteInfo: respose EResult "+n.GetEResult()),void r.InitInvalid();o.m_ChatStore.AddKnownChatRoomGroup(n.Body().group_summary(),null),r.InitDirectInvite(e,t,n.Body().banned(),n.Body().time_kick_expire())}))}return r},e}();function h(e){if(15==e.result){0==e.time&&console.log("no longer valid");var t=l.f.RTime32ToDate(e.time).toLocaleString([],{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});return Object(p.d)("#ChatRoom_InviteMessage_Failed_Kicked",t)}return 17==e.result?Object(p.d)("#ChatRoom_InviteMessage_Failed_Banned"):42==e.result?Object(p.d)("#ChatRoom_InviteMessage_Not_Found"):null}},WpBz:function(e,t,n){"use strict";function o(e){return function(t,n,o){var r=o.value;o.value=function(){for(var t=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=this[n+"_DebounceProperties"];void 0===a&&(a=this[n+"_DebounceProperties"]={hTimer:void 0,nPending:0}),void 0===a.hTimer?(r.apply(this,o),a.hTimer=window.setInterval((function(){a.nPending>0?(r.apply(t,o),a.nPending=0):(window.clearInterval(a.hTimer),a.hTimer=void 0)}),e)):a.nPending+=1}}}n.d(t,"a",(function(){return o}))},XCHq:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("mrSG"),r=n("2vnA"),i=n("1n9R"),a=i.c.CHAT_BASE_URL+"public/images/broadcast/csgo_esl_2019_icon.png",s=(i.c.CHAT_BASE_URL,i.c.CHAT_BASE_URL+"public/images/broadcast/yule_30x30.png"),c=new(function(){function e(e){this.init(e)}return e.prototype.init=function(e){this.bValid=e.bValid,this.stream=e.stream,this.name=e.name,this.appName=e.appName,this.appID=e.appID,this.link=e.link,this.linkName=e.linkName,this.tabIcon=e.tabIcon,this.offlineImage=e.offlineImage},Object(o.c)([r.B],e.prototype,"bValid",void 0),Object(o.c)([r.B],e.prototype,"stream",void 0),Object(o.c)([r.B],e.prototype,"name",void 0),Object(o.c)([r.B],e.prototype,"appName",void 0),Object(o.c)([r.B],e.prototype,"appID",void 0),Object(o.c)([r.B],e.prototype,"link",void 0),Object(o.c)([r.B],e.prototype,"linkName",void 0),Object(o.c)([r.B],e.prototype,"tabIcon",void 0),Object(o.c)([r.B],e.prototype,"offlineImage",void 0),e}())({bValid:!1,stream:{0:"#Broadcast_EnglishMain"},name:"",appName:"",appID:0,link:"",linkName:"",tabIcon:"",offlineImage:""});function l(e){"76561198871875463"==e&&c.init({bValid:!0,stream:{"76561198871875463":"#Broadcast_Stream1",76561198871884930:"#Broadcast_Stream2"},name:"CSGO: StarLadder",appID:730,link:"https://store.steampowered.com/app/730",linkName:"CSGO on Steam",tabIcon:a,offlineImage:"public/images/broadcast/csgo_major_berlin2019.png"}),"76561197960266962"==e&&c.init({bValid:!0,stream:{},appName:"Winter Sale 2019",name:"Yule Log",appID:0,link:"https://store.steampowered.com/",linkName:"View Sale Info Here!",tabIcon:s,offlineImage:"public/images/broadcast/winter_sale_2019.png"})}},XaMz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("mrSG");function r(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];console.assert?0==n.length?console.assert(!!e,t):console.assert.apply(console,Object(o.g)([!!e,t],n)):e||console.warn.apply(console,Object(o.g)([t],n))}},Y3TG:function(e,t,n){"use strict";n("vDqi")},"Y3w+":function(e,t,n){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function r(e){var t=Math.floor(e/3600),n=Math.floor(e/60)%60,o=Math.floor(e)%60,r=o.toString();o<10&&(r="0"+r);var i=n.toString();return n<10&&t>0&&(i="0"+i),(t>0?t+":":"")+i+":"+r}function i(){var e=!1;try{e=MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d4032,mp4a.40.2"')}catch(e){}return e}function a(){var e=document.createElement("video").canPlayType('application/vnd.apple.mpegurl;codecs="avc1.64001f,mp4a.40.02"');return"probably"===e||"maybe"===e}n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}))},YZlK:function(e,t,n){"use strict";n.d(t,"b",(function(){return de})),n.d(t,"c",(function(){return ye})),n.d(t,"a",(function(){return Se})),n.d(t,"d",(function(){return Ce}));var o=n("mrSG"),r=n("h4qU"),i=n.n(r),a=n("hReu"),s=n("/IDK"),c=n("LAqV"),l=n("gtB6"),u=n("vDqi"),p=n.n(u),m=n("tkkQ"),d=n("V7Fl"),h=n("/ZM5"),f=n("20CD"),_=n("+mma"),g=n("bbBM"),b=n("Hi0u"),v=n("2vnA"),y=n("TyAF"),S=n("q1tI"),C=n.n(S),O=n("ljid"),I=n("e2SU"),E=n("GxRc"),w=n("UqDm"),M=n("oh5H"),D=n("1VtQ"),T=n("J0bI"),j=n("uWOQ"),G=n("s+DT"),R=n("XaMz"),k=n("PJQb"),A=n.n(k),N=n("QHER");function B(e){var t=e.title,n=e.pages,o=e.children,r=e.initialActivePage,i=e.renderNavFooter,a=Object(S.useState)(r||n[0]),s=a[0],c=a[1];return C.a.createElement("div",{className:A.a.Container},C.a.createElement("div",{className:A.a.Nav},C.a.createElement("span",{className:A.a.NavTitle},t),C.a.createElement("div",{className:A.a.NavItems},n.map((function(e){return C.a.createElement(L,{key:e,active:e===s,onClick:function(){return c(e)}},e)}))),i&&i()),C.a.createElement("div",{className:A.a.Content},o(s)))}var L=function(e){var t=e.active,n=Object(o.f)(e,["active"]);return C.a.createElement("span",Object(o.a)({},n,{className:Object(N.a)(A.a.NavItem,t&&A.a.Active)}))},P=n("dEzy"),F=n.n(P),x=function(e){var t=e.className,n=Object(o.f)(e,["className"]);return C.a.createElement("div",Object(o.a)({className:Object(N.a)(F.a.DialogTitle,t)},n))},V=function(e){var t=e.className,n=Object(o.f)(e,["className"]);return C.a.createElement("div",Object(o.a)({className:Object(N.a)(F.a.DialogContent,t)},n))},U=n("/edK"),H=n.n(U),W=n("R+Pm");var z=function(e){function t(t){var n=e.call(this,t)||this;return n.m_inviteLinks={loadingState:"pending",rgInviteLinks:null},n.m_bans=new d.a,n.m_invitedUsers={loadingState:"pending",rgInvitedUsers:null},n.state={strRoomName:n.props.groupView.GetGroup().name},n}return Object(o.d)(t,e),t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.CloseDialog=function(){this.props.closeModal()},t.prototype.OnLeave=function(e){var t=this,n=e.currentTarget.ownerDocument.defaultView,o=Object(a.e)(null,e),r=this.props.groupView.GetGroup(),i=r.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":r.BIsAccountIDOwner(c.f.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm";Object(_.d)(n,Object(M.d)("#GroupSettings_Leave_Section"),Object(M.d)(i,r.name),Object(M.d)("#GroupSettings_Leave_Button")).then((function(){r.LeaveChatRoomGroup(o)})).then((function(){t.props.closeModal()})).catch((function(){}))},t.prototype.GetNamedGroupPageList=function(){var e=this,t=this.props.groupView.GetGroup();return[{title:Object(M.d)("#GroupSettings_General_Section"),render:function(){return S.createElement(Y,{group:t})}},{title:Object(M.d)("#GroupSettings_Channels_Section"),render:function(){return S.createElement(J,{groupView:e.props.groupView})}},{title:Object(M.d)("#GroupSettings_Permissions_Section"),render:function(){return S.createElement($,{group:t})}},{title:Object(M.d)("#GroupSettings_Invite_Section"),render:function(){return S.createElement(ne,{group:t,inviteLinks:e.m_inviteLinks})}},{title:Object(M.d)("#GroupSettings_InvitedUsers_Section"),render:function(){return S.createElement(oe,{group:t,invitedUsers:e.m_invitedUsers})}},{title:Object(M.d)("#GroupSettings_Bans_Section"),render:function(){return S.createElement(re,{group:t,bans:e.m_bans})}}]},t.prototype.GetNonNamedGroupPageList=function(){var e=this,t=this.props.groupView.GetGroup();return[{title:Object(M.d)("#GroupSettings_Save_Section"),render:function(){return S.createElement(K,{group:t})}},{title:Object(M.d)("#GroupSettings_Invite_Section"),render:function(){return S.createElement(ne,{group:t,inviteLinks:e.m_inviteLinks})}},{title:Object(M.d)("#GroupSettings_Leave_Section"),render:function(){return S.createElement(X,{group:t})}}]},t.prototype.GetPageList=function(){return this.props.groupView.GetGroup().IsNamedGroupChat()?this.GetNamedGroupPageList():this.GetNonNamedGroupPageList()},t.prototype.render=function(){var e=this,t=this.GetPageList(),n=this.props.groupView.GetGroup(),o=n.unique_id+"_"+n.IsNamedGroupChat();return S.createElement(b.a,{onEscKeypress:this.DismissDialog},S.createElement(B,{title:Object(M.d)("#GroupSettings"),pages:t.map((function(e){return e.title})),renderNavFooter:function(){return S.createElement(q,{onClick:e.OnLeave})},key:o},(function(e){var n=t.find((function(t){return t.title===e})),o=n?n.render():null;return S.createElement(V,{style:{flexDirection:"column"},key:e},o)})))},Object(o.c)([v.B],t.prototype,"m_inviteLinks",void 0),Object(o.c)([v.B],t.prototype,"m_invitedUsers",void 0),Object(o.c)([D.a],t.prototype,"DismissDialog",null),Object(o.c)([D.a],t.prototype,"CloseDialog",null),Object(o.c)([D.a],t.prototype,"OnLeave",null),t=Object(o.c)([y.a],t)}(S.Component),q=function(e){return S.createElement("div",Object(o.a)({className:H.a.LeaveButton},e),S.createElement(I.s,null),Object(M.d)("#GroupSettings_Leave_Section"))},K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bSaving=!1,t.m_strError="",t}return Object(o.d)(t,e),t.prototype.BindInputRef=function(e){this.m_refInput=e},t.prototype.AnimateUpgrade_In=function(){document.getElementById("animUp")},t.prototype.AnimateUpgrade_Out=function(){document.getElementById("animDown")},t.prototype.SaveGroup=function(){var e=this,t=this.props.group;this.m_bSaving=!1,this.m_strError="",t.SaveChatRoomGroup(this.m_refInput.value).catch((function(t){e.m_bSaving=!1,e.m_strError=12==t?Object(M.d)("#GroupSettings_Save_NameError"):Object(M.d)("#GroupSettings_Save_GenericError")}))},t.prototype.render=function(){var e=this.m_bSaving,t=this.m_strError;return S.createElement(O.k,{className:"DialogBody",onSubmit:this.SaveGroup},S.createElement(O.c,null,Object(M.d)("#GroupSettings_Save_Desc"),S.createElement("div",null,S.createElement("ul",null,S.createElement("li",null,Object(M.d)("#GroupSettings_Save_Feature_1")),S.createElement("li",null,Object(M.d)("#GroupSettings_Save_Feature_2")),S.createElement("li",null,Object(M.d)("#GroupSettings_Save_Feature_3")),S.createElement("li",null,Object(M.d)("#GroupSettings_Save_Feature_4"))))),S.createElement(O.o,{ref:this.BindInputRef,autoFocus:!0,label:Object(M.d)("#GroupSettings_Save_NameGroup"),disabled:e}),!e&&S.createElement(S.Fragment,null,t.length>0&&S.createElement("div",{className:"ErrorWhileSaving"},t),S.createElement(O.x,{className:"_FixedHeight"},Object(M.d)("#GroupSettings_Save_Section"))),e&&S.createElement(E.a,null))},Object(o.c)([v.B],t.prototype,"m_bSaving",void 0),Object(o.c)([v.B],t.prototype,"m_strError",void 0),Object(o.c)([D.a],t.prototype,"BindInputRef",null),Object(o.c)([D.a],t.prototype,"AnimateUpgrade_In",null),Object(o.c)([D.a],t.prototype,"AnimateUpgrade_Out",null),Object(o.c)([D.a],t.prototype,"SaveGroup",null),t=Object(o.c)([y.a],t)}(S.Component),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.m_strRoomName=n.props.group.IsNamedGroupChat()?n.props.group.name:"",n.m_strTagLine=n.props.group.tagline,n.state={bNameSubmitted:!1,bTaglineSubmitted:!1},n}return Object(o.d)(t,e),t.prototype.AvatarUploadEResultToString=function(e){var t="#Chat_Settings_Error_Unknown";switch(e){case 21:t="#Chat_Settings_Error_NotLoggedOn";break;case 112:t="#Chat_Settings_Error_LimitedUser";break;case 15:t="#Chat_Settings_Error_AccessDenied";break;case 2:t="#Chat_Settings_Error_FailedToUpload";break;case 25:t="#Chat_Settings_Error_FileTooLarge";break;case 8:t="#Chat_Settings_Error_InvalidImage";break;case 37:t="#Chat_Settings_Error_ServerError"}return Object(M.d)(t)},t.prototype.SetChatRoomGroupAvatarEResultToString=function(e){var t="#Chat_Settings_Error_Unknown";switch(e){case 10:case 8:case 32:t="#Chat_Settings_Error_ServerError";break;case 15:t="#Chat_Settings_Error_NotAdmin"}return Object(M.d)(t)},t.prototype.OnFileChange=function(e){var t=this,n=e.target.files[0],o=this.props.group;e.preventDefault();var r=new FormData;r.set("sessionid",m.a.SESSIONID),r.set("avatar",n);p.a.post(m.a.CHAT_BASE_URL+"chat/avatarfileupload/",r,{headers:{"content-type":"multipart/form-data"}}).then((function(e){1==e.data.success&&o.SetChatRoomGroupAvatar(e.data.sha).catch((function(e){var n=t.SetChatRoomGroupAvatarEResultToString(e);Object(_.c)(window,Object(M.d)("#Generic_Error"),n)}))})).catch((function(e){var n=t.AvatarUploadEResultToString(e.response.data.success);Object(_.c)(window,Object(M.d)("#Generic_Error"),n),console.log(e.response)}))},t.prototype.bindFileUploadControl=function(e){this.m_fileInput=e},t.prototype.OnNameChange=function(e){this.m_strRoomName=e.target.value,this.setState({bNameSubmitted:!1})},t.prototype.OnAvatarChange=function(){this.m_fileInput.click()},t.prototype.OnTagLineChange=function(e){this.m_strTagLine=e.target.value,this.setState({bTaglineSubmitted:!1})},t.prototype.OnNameBlur=function(){var e=this,t=this.props.group;if((t.IsNamedGroupChat()||this.m_strRoomName)&&(!t.IsNamedGroupChat()||t.name!==this.m_strRoomName)){var n=function(){return e.m_strRoomName=e.props.group.name};t.RenameChatRoomGroup(this.m_strRoomName).then(n,n);var o=document.getElementById("b1");o&&o.blur(),this.setState({bNameSubmitted:!0})}},t.prototype.OnTagLineBlur=function(){var e=this.props.group;if(e.tagline!=this.m_strTagLine){e.SetChatRoomGroupTagline(this.m_strTagLine),this.setState({bTaglineSubmitted:!0});var t=document.getElementById("b2");t&&t.blur()}},t.prototype.OnSubmitSent=function(){this.OnTagLineBlur(),this.OnNameBlur()},t.prototype.render=function(){var e,t=this.props.group,n=t.BCanAdminGroup();if(t.BIsClanChatRoom())e=S.createElement("div",null);else if(null==t.GetOwnerAccountID())e=S.createElement("div",null," ",Object(M.d)("#Chat_Settings_No_Owner")," ");else{var o=c.f.FriendStore.GetPlayer(t.GetOwnerAccountID());e=S.createElement("div",null,S.createElement(O.p,null," ",Object(M.d)("#Chat_Settings_General_Owner")),S.createElement(g.c,{className:"groupOwnerFriend",friend:o,context:null}))}return S.createElement(S.Fragment,null,S.createElement(x,null,Object(M.d)("#GroupSettings_General_Section")),!n&&S.createElement(ie,null),S.createElement(O.k,{onSubmit:this.OnSubmitSent,className:Object(N.a)("DialogBody",H.a.General)},S.createElement(O.D,null,S.createElement("div",{className:H.a.AvatarAndUser},S.createElement(O.p,null,Object(M.d)("#Chat_Settings_General_Icon")),S.createElement("img",{className:Object(N.a)(H.a.Avatar,"no-drag"),src:t.hasIcon?t.avatar_url_full:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}),!t.hasIcon&&S.createElement("div",{className:H.a.NoIconLabel},Object(M.d)("#Chat_Settings_General_NoIcon")),S.createElement("input",{type:"file",style:{display:"none"},name:"fileupload",accept:".png, .jpg, .jpeg, .gif",ref:this.bindFileUploadControl,onChange:this.OnFileChange}),S.createElement(O.d,{onClick:this.OnAvatarChange,disabled:!n},Object(M.d)(t.hasIcon?"#Chat_Settings_General_ChangeIcon":"#Chat_Settings_General_AddIcon"))),S.createElement("div",{className:"GeneralChatSettings"},S.createElement(O.o,{autoComplete:"off",id:"b1",className:"groupChatName",label:Object(M.d)("#Chat_Settings_General_Chat_Name"),type:"text",value:this.m_strRoomName,onChange:this.OnNameChange,onBlur:this.OnNameBlur,autoFocus:!0,disabled:!n}),S.createElement("input",{type:"submit",style:{display:"none"}}),S.createElement(O.o,{autoComplete:"off",id:"b2",className:"groupChatTag",label:Object(M.d)("#Chat_Settings_General_Tagline"),type:"text",value:this.m_strTagLine,onChange:this.OnTagLineChange,onBlur:this.OnTagLineBlur,disabled:!n}),e))))},Object(o.c)([v.B],t.prototype,"m_strRoomName",void 0),Object(o.c)([v.B],t.prototype,"m_strTagLine",void 0),Object(o.c)([D.a],t.prototype,"OnFileChange",null),Object(o.c)([D.a],t.prototype,"bindFileUploadControl",null),Object(o.c)([D.a],t.prototype,"OnNameChange",null),Object(o.c)([D.a],t.prototype,"OnAvatarChange",null),Object(o.c)([D.a],t.prototype,"OnTagLineChange",null),Object(o.c)([D.a],t.prototype,"OnNameBlur",null),Object(o.c)([D.a],t.prototype,"OnTagLineBlur",null),Object(o.c)([D.a],t.prototype,"OnSubmitSent",null),t=Object(o.c)([y.a],t)}(S.Component),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnLeave=function(e){var t=this,n=e.currentTarget.ownerDocument.defaultView,o=Object(a.e)(null,e),r=this.props.group.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":this.props.group.BIsAccountIDOwner(c.f.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm";Object(_.d)(n,Object(M.d)("#GroupSettings_Leave_Section"),Object(M.d)(r,this.props.group.name),Object(M.d)("#GroupSettings_Leave_Button")).then((function(){t.props.group.LeaveChatRoomGroup(o)})).catch((function(){}))},t.prototype.render=function(){return S.createElement("div",null,Object(M.d)("#GroupSettings_Leave_Confirm"),S.createElement(O.d,{onClick:this.OnLeave},Object(M.d)("#GroupSettings_Leave_Button")))},Object(o.c)([D.a],t.prototype,"OnLeave",null),t=Object(o.c)([y.a],t)}(S.Component),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props.roomList.indexOf(this.props.room);Object(R.a)(-1!==t,"Couldn't find CChatRoom inside of its list?");var n=t-1,o=function(){e.props.room.GetGroup().ReorderRoom(e.props.roomList[n].GetRoomID(),e.props.room.GetRoomID())},r=t+1,i=function(){e.props.room.GetGroup().ReorderRoom(e.props.room.GetRoomID(),e.props.roomList[r].GetRoomID())};return(n<0||this.props.roomList[n].BIsDefaultRoom())&&(o=void 0),r>=this.props.roomList.length&&(i=void 0),this.props.room.BIsDefaultRoom()&&(o=void 0,i=void 0),this.props.enabled||(o=void 0,i=void 0),void 0===o&&void 0===i?null:S.createElement("div",{className:"rolePriorityContainer"},S.createElement("div",{className:"rolePriorityButton roleUp"+(void 0===o?" Disabled":""),onClick:o},S.createElement(I.t,{angle:0})),S.createElement("div",{className:"rolePriorityButton roleDown"+(void 0===i?" Disabled":""),onClick:i},S.createElement(I.t,{angle:180})))},t=Object(o.c)([y.a],t)}(S.Component),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCreateNewTextChannel=function(e){var t=e.currentTarget.ownerDocument.defaultView;Object(b.c)(S.createElement(h.b,{ownerWin:t,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!1}),t)},t.prototype.OnCreateNewVoiceChannel=function(e){var t=e.currentTarget.ownerDocument.defaultView;Object(b.c)(S.createElement(h.b,{ownerWin:t,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!1}),t)},t.prototype.OnDeleteChannel=function(e,t){var n=e.currentTarget.ownerDocument.defaultView;Object(_.d)(n,Object(M.d)("#GroupSettings_Channels_DeleteChannel"),Object(M.d)("#GroupSettings_Channels_DeleteConfirm"),Object(M.d)("#GroupSettings_Channels_DeleteButtonLabel"),Object(M.d)("#Button_Cancel"),!0).then((function(){var e=t.GetGroup(),n=t.GetRoomID();e.DeleteChatRoom(n)})).catch((function(){}))},t.prototype.render=function(){var e=this,t=this.props.groupView,n=t.GetGroup().BCanAdminChannel(),o=t.GetGroup().textRoomList,r=t.GetGroup().voiceRoomList,i=function(t,i,a){return S.createElement("div",{key:t.GetRoomID(),className:"ChatGroupSettingsChannels_Row"},S.createElement("div",{className:"_DialogRow _DialogRowBackground"},S.createElement("div",{className:"_DialogRowLabel"},a?S.createElement(I.ob,null):S.createElement(I.hb,null),S.createElement("div",{className:t.IsDefaultRoomForGroup()?"HomeChannel":"",style:{alignSelf:"center"}},t.BIsDefaultRoom()?Object(M.d)("#Chat_DefaultChannelName"):t.name)),t.IsDefaultRoomForGroup()&&S.createElement("div",{className:"_DialogRowSecondaryLabel"},Object(M.d)("#GroupSettings_Channels_HomeChannelDeleteLabel")),!t.IsDefaultRoomForGroup()&&n&&S.createElement("div",{className:"ChannelDeleteButton",onClick:function(n){return e.OnDeleteChannel(n,t)}},Object(M.d)("#GroupSettings_Channels_Delete"))),S.createElement(Q,{room:t,roomList:a?r:o,enabled:n}))},a=o.map((function(e){return i(e,0,!1)})),s=r.map((function(e){return i(e,0,!0)}));return S.createElement(S.Fragment,null,S.createElement(x,null,Object(M.d)("#GroupSettings_Channels_Section")),!n&&S.createElement(ie,null),S.createElement(O.k,{className:"DialogBody"},S.createElement(O.D,{className:H.a.ChannelsButtons},S.createElement(O.d,{className:"DialogButtonTall",svgicon:I.hb,onClick:this.OnCreateNewTextChannel,disabled:!n}," ",Object(M.d)("#GroupSettings_Channels_CreateText")," "),S.createElement(O.d,{className:"DialogButtonTall",svgicon:function(){return I.ob({})},onClick:this.OnCreateNewVoiceChannel,disabled:!n}," ",Object(M.d)("#GroupSettings_Channels_CreateVoice")," ")),S.createElement(O.n,null,0!=a.length&&S.createElement("div",{className:"displayColumn flexShrinkNone",style:{marginBottom:"32px"}},S.createElement(O.p,null,Object(M.d)("#GroupSettings_Channels_TextChannels")),S.createElement(O.l,null),a),0!=s.length&&S.createElement("div",{className:"displayColumn flexShrinkNone"},S.createElement(O.p,null,Object(M.d)("#GroupSettings_Channels_VoiceChannels")),S.createElement(O.l,null),s))))},Object(o.c)([D.a],t.prototype,"OnCreateNewTextChannel",null),Object(o.c)([D.a],t.prototype,"OnCreateNewVoiceChannel",null),Object(o.c)([D.a],t.prototype,"OnDeleteChannel",null),t=Object(o.c)([y.a],t)}(S.Component),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={strRoleName:""},t}return Object(o.d)(t,e),t.prototype.OnSubmit=function(){var e=this,t=this.m_refInput&&this.m_refInput.value.trim();t&&0!=t.length&&(this.props.closeModal(),this.props.group.CreateRole(t).catch((function(){Object(_.c)(e.props.ownerWin,Object(M.d)("#Generic_Error"),Object(M.d)("#GroupSettings_CreateRole_GenericError")),e.props.closeModal()})))},t.prototype.HandleTextEntry=function(e){this.setState({strRoleName:e.target.value})},t.prototype.render=function(){var e=this,t=this.state.strRoleName.length>0;return S.createElement(b.a,{onEscKeypress:this.props.closeModal},S.createElement(O.h,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},S.createElement(O.m,null,Object(M.d)("#GroupSettings_CreateRole_Title")),S.createElement(O.b,null,S.createElement(O.o,{ref:function(t){e.m_refInput=t},autoFocus:!0,label:Object(M.d)("#GroupSettings_CreateRole_Description"),value:this.state.strRoleName,onChange:this.HandleTextEntry})),S.createElement(O.j,null,S.createElement(O.s,{onCancel:this.props.closeModal,bOKDisabled:!t}))))},Object(o.c)([D.a],t.prototype,"OnSubmit",null),Object(o.c)([D.a],t.prototype,"HandleTextEntry",null),t}(S.Component),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.m_topRef=S.createRef(),t}return Object(o.d)(t,e),t.prototype.OnCreateRole=function(e){var t=e.currentTarget.ownerDocument.defaultView;Object(b.c)(S.createElement(Z,{ownerWin:t,group:this.props.group}),t)},t.prototype.BCanLocalUserEditRole=function(e){return this.props.group.BCanIModifyRole(e)},t.prototype.BCanLocalUserAssignRole=function(){return this.props.group.BCanIAssignRoles()},t.prototype.EditRole=function(e){var t=this.props.group.GetRoleName(e),n=this.props.group.GetRoleActions(e);t&&n&&this.setState({editRoleID:e,editRoleName:t,editRoleActions:n})},t.prototype.DoesRoleGrantPermission=function(e,t){return!0},t.prototype.OnSettingToggled=function(e,t){this.props.group.SetRoleAction(this.state.editRoleID,e,t)},t.prototype.MoveRoleUp=function(e){var t=this,n=this.props.group.GetRoleOrdinal(e),o=Math.max(0,n-1);this.props.group.ReorderRole(e,o).then((function(e){t.forceUpdate()}))},t.prototype.MoveRoleDown=function(e){var t=this,n=this.props.group.GetRoleOrdinal(e)+1;this.props.group.ReorderRole(e,n).then((function(e){t.forceUpdate()}))},t.prototype.componentDidUpdate=function(e,t){if(this.state.editRoleID!==t.editRoleID&&this.m_topRef&&this.m_topRef.current)for(var n=this.m_topRef.current.parentElement;n;){if(n.scrollHeight>n.clientHeight)return void(n.scrollTop=0);n=n.parentElement}},t.prototype.render=function(){var e=this,t=this.props.group,n=this.state.editRoleID,o=t.BIsAccountIDOwner(c.f.CMInterface.steamid.GetAccountID()),r=t.BIsClanChatRoom();if(n)return S.createElement("div",{ref:this.m_topRef},S.createElement(te,{group:t,roleID:n,onRequestClose:function(){return e.setState({editRoleID:void 0})}}));var i=t.DefaultRoleID(),a=t.GetRoles().slice().sort((function(e,t){return e.role_id==i?1:t.role_id==i?-1:e.ordinal-t.ordinal})),s=t.GetHighestRankRoleIDForPermission(c.f.FriendStore.self.accountid,8),l=s?t.GetRoleOrdinal(s):Number.MAX_VALUE-1,u=t.BIsAccountIDOwner(c.f.FriendStore.self.accountid),p=!1,d=this.BCanLocalUserAssignRole(),h=a.map((function(n,o){var s=!1,m=e.BCanLocalUserEditRole(n.role_id),d=m&&(u||n.ordinal>l+1)&&n.ordinal>0,h=m&&o<a.length-2;return m&&(p=!0),n.role_id==i?(s=!0,d=!1,h=!1):t.BMemberHasRole(c.f.FriendStore.self.accountid,n.role_id)&&(s=!0),S.createElement("div",{className:"roleRow",key:n.role_id},S.createElement(O.d,{className:"roleButton"+(s&&!u?" currentUserRole":""),onClick:function(t){e.EditRole(n.role_id)}},S.createElement(I.m,null),Object(M.d)(n.name),S.createElement("span",{className:"roleSubtitle"},m?Object(M.d)("#Generic_Edit"):Object(M.d)("#Generic_View"))),!r&&p&&a.length>2&&(d||h)&&S.createElement("div",{className:"rolePriorityContainer"},S.createElement("div",{className:"rolePriorityButton roleUp"+(d?"":" Disabled"),onClick:function(t){e.MoveRoleUp(n.role_id),t.stopPropagation()}},S.createElement(I.t,{angle:0})),S.createElement("div",{className:"rolePriorityButton roleDown"+(h?"":" Disabled"),onClick:function(t){e.MoveRoleDown(n.role_id),t.stopPropagation()}},S.createElement(I.t,{angle:180}))))})),f=Object(M.d)("#ChatRoomRole_Description_NoEdit");if(r){var _=G.a.InitFromClanID(t.GetClanID()),g=m.a.COMMUNITY_BASE_URL+"gid/"+_.ConvertTo64BitString()+"/membersManage";f=Object(M.k)("#ChatRoomRole_Description_Clan",S.createElement(j.b,{href:g},Object(M.d)("#ChatRoomRole_Description_ClanLink")))}else p&&!u?f=Object(M.d)("#ChatRoomRole_Description"):(d||u)&&(f=Object(M.d)("#ChatRoomRole_Description_NoEditCanAssign"));return S.createElement(S.Fragment,null,S.createElement("div",{ref:this.m_topRef}),S.createElement(x,null,Object(M.d)("#GroupSettings_Permissions_Section")),!o&&!p&&S.createElement(ie,null,Object(M.d)("#Chat_Settings_Permission_Denied_Permissions")),S.createElement("div",{className:"roleList"},S.createElement(O.c,{className:H.a.PermissionsDescription},f),S.createElement("div",{className:H.a.RoleNameHeader},S.createElement(O.p,null,Object(M.d)("#GroupSettings_Permissions_RolesTitle")," "),!u&&S.createElement(O.p,{className:"meKey"},S.createElement(I.m,null),Object(M.d)("#GroupSettings_meKey_Desc")),u&&S.createElement(O.p,{className:"meKey"},S.createElement(I.l,null),Object(M.d)("#GroupSettings_meKey_Desc_Owner"))),S.createElement(O.k,{className:"DialogBody"},S.createElement(O.d,{disabled:!0,className:"roleButton owner",svgicon:I.l,onClick:function(){}},Object(M.d)("#ChatRoomRole_Owner"),S.createElement("span",{className:"roleSubtitle"},Object(M.d)("#ChatRoomRole_OwnerSubtitle"))),h),!r&&S.createElement(O.x,{className:"createNewRoleButton",svgicon:function(){return I.R({minus:!1,nocircle:!1})},onClick:this.OnCreateRole,disabled:!t.BCanICreateRoles()},Object(M.d)("#GroupSettings_Permissions_CreateNew"))))},Object(o.c)([D.a],t.prototype,"OnCreateRole",null),Object(o.c)([D.a],t.prototype,"EditRole",null),Object(o.c)([D.a],t.prototype,"OnSettingToggled",null),Object(o.c)([D.a],t.prototype,"MoveRoleUp",null),Object(o.c)([D.a],t.prototype,"MoveRoleDown",null),t=Object(o.c)([y.a],t)}(S.Component),ee=function(e){var t=e.eAction,n=e.strLabel,o=e.disabled,r=e.group,i=e.roleID,a=r.GetRoleActions(i),s=a&&a.BCanPerformAction(t),c=S.useState(0),l=c[0],u=c[1];return S.createElement(W.b,{onChange:function(e){r.SetRoleAction(i,t,e),u(l+1)},label:n,value:s,disabled:o,className:H.a.PermissionToggle})},te=function(e){function t(t){var n=e.call(this,t)||this;return n.state={editRoleName:t.group.GetRoleName(t.roleID)},n}return Object(o.d)(t,e),t.prototype.OnEditRoleNameChange=function(e){this.setState({editRoleName:e.target.value})},t.prototype.OnEditRoleNameBlur=function(){this.RenameRole();var e=document.getElementById("b1");e&&e.blur()},t.prototype.RenameRole=function(){var e=this,t=this.props.roleID,n=this.state.editRoleName;this.props.group.RenameRole(t,n).catch((function(){e.setState({editRoleName:e.props.group.GetRoleName(t)})}))},t.prototype.DeleteRole=function(e,t){var n=this,o=e.currentTarget.ownerDocument.defaultView;if(t!=this.props.group.DefaultRoleID()){var r=this.props.group.GetRoleName(t),i=S.createElement("div",{style:{marginTop:"8px",color:"white"}},r);Object(_.d)(window,Object(M.d)("#GroupSettings_Permissions_ConfirmDeleteTitle"),Object(M.d)("#GroupSettings_Permissions_ConfirmDelete"),Object(M.d)("#GroupSettings_Permissions_ConfirmDeleteButton"),Object(M.d)("#Button_Cancel"),!0,i).then((function(){return n.props.group.DeleteRole(t)})).then((function(){return n.props.onRequestClose()})).catch((function(e){null!=e&&Object(_.c)(o,Object(M.d)("#Generic_Error"),Object(M.d)("#GroupSettings_DeleteRole_GenericError"))}))}},t.prototype.render=function(){var e=this,t=this.props,n=t.group,r=t.roleID,i=t.onRequestClose;if(!n.GetRoleActions(r))return null;var a=n.BIsClanChatRoom(),s=r==n.DefaultRoleID(),c=s&&!a?Object(M.d)("#ChatRoomRole_Member"):this.state.editRoleName,l=n.BCanIModifyRole(r),u={disabled:!l,group:n,roleID:r},p=a||!l?S.createElement("div",{className:Object(N.a)(H.a.RoleNameHeader,H.a.FixedRoleName)},Object(M.d)(c)):S.createElement("div",{className:H.a.RoleNameHeader},S.createElement(O.o,{autoComplete:"off",id:"b1",className:"editRoleName",label:Object(M.d)("#GroupSettings_Permissions_RoleName"),type:"text",value:c,disabled:s||!l,onChange:this.OnEditRoleNameChange,onBlur:this.OnEditRoleNameBlur}));return S.createElement(O.k,{onSubmit:this.OnEditRoleNameBlur,className:H.a.PermissionsEdit},S.createElement("div",{className:H.a.Back,onClick:function(){return i()}},S.createElement(I.gb,null),Object(M.d)("#GroupSettings_Permissions_BackButton")),!l&&S.createElement(ie,null,Object(M.d)("#Chat_Settings_Permission_Denied")),p,S.createElement(O.b,null,S.createElement("div",{className:Object(N.a)("SettingsGroup",H.a.PermissionsGroup)},S.createElement(O.p,{className:"PermissionsSectionHeader"},Object(M.d)("#GroupSettings_Permissions_Heading_General")),S.createElement(ee,Object(o.a)({},u,{eAction:6,strLabel:Object(M.d)("#GroupSettings_Permissions_Chat")})),S.createElement(ee,Object(o.a)({},u,{eAction:10,strLabel:Object(M.d)("#GroupSettings_Permissions_MentionAll")})),S.createElement(ee,Object(o.a)({},u,{eAction:11,strLabel:Object(M.d)("#GroupSettings_Permissions_SetWatchingBroadcast")}))),S.createElement("div",{className:Object(N.a)("SettingsGroup",H.a.PermissionsGroup)},S.createElement(O.p,{className:"PermissionsSectionHeader"},Object(M.d)("#GroupSettings_Permissions_Heading_MembersAndRoles")),S.createElement(ee,Object(o.a)({},u,{eAction:2,strLabel:Object(M.d)("#GroupSettings_Permissions_Kick")})),S.createElement(ee,Object(o.a)({},u,{eAction:3,strLabel:Object(M.d)("#GroupSettings_Permissions_Ban")})),S.createElement(ee,Object(o.a)({},u,{eAction:4,strLabel:Object(M.d)("#GroupSettings_Permissions_Invite")})),S.createElement(ee,Object(o.a)({},u,{eAction:8,strLabel:Object(M.d)("#GroupSettings_Permissions_ChangeGroupRoles"),disabled:u.disabled||s})),!a&&S.createElement(ee,Object(o.a)({},u,{eAction:9,strLabel:Object(M.d)("#GroupSettings_Permissions_ChangeUserRoles"),disabled:u.disabled||s}))),S.createElement("div",{className:Object(N.a)("SettingsGroup",H.a.PermissionsGroup)},S.createElement(O.p,{className:"PermissionsSectionHeader"},Object(M.d)("#GroupSettings_Permissions_Heading_RoomManagement")),S.createElement(ee,Object(o.a)({},u,{eAction:5,strLabel:Object(M.d)("#GroupSettings_Permissions_ChangeTaglineAvatarName")})),S.createElement(ee,Object(o.a)({},u,{eAction:1,strLabel:Object(M.d)("#GroupSettings_Permissions_CreateRenameDeleteChannel")})))),S.createElement(O.j,null,!a&&!s&&l&&S.createElement(O.d,{className:"deleteButton",onClick:function(t){e.DeleteRole(t,r)}},Object(M.d)("#GroupSettings_Permissions_DeleteRoleButton"))))},Object(o.c)([D.a],t.prototype,"OnEditRoleNameChange",null),Object(o.c)([D.a],t.prototype,"OnEditRoleNameBlur",null),Object(o.c)([D.a],t.prototype,"RenameRole",null),Object(o.c)([D.a],t.prototype,"DeleteRole",null),t=Object(o.c)([y.a],t)}(S.Component),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.group,n=e.inviteLinks;"loaded"!=n.loadingState&&(t.BCanInvite()&&"pending"==n.loadingState?t.GetInviteLinksForGroup().then((function(e){setTimeout((function(){"loaded"==e.loadingState&&(n.rgInviteLinks=e.rgInviteLinks.sort((function(e,t){return e.time_expires()-t.time_expires()}))),n.loadingState=e.loadingState}),500)})):n.loadingState="denied")},t.prototype.OnDeleteLink=function(e){var t=this,n=this.props.inviteLinks,o=S.createElement("div",{style:{marginTop:"5px",color:"#dee2e5"}},Object(T.a)(e.invite_code()));Object(_.d)(window,Object(M.d)("#GroupSettings_Invite_ConfirmDeleteTitle"),Object(M.d)("#GroupSettings_Invite_ConfirmDelete"),Object(M.d)("#GroupSettings_Invite_ConfirmDeleteButton"),Object(M.d)("#Button_Cancel"),!0,o).then((function(){t.props.group.DeleteInviteLink(e.invite_code()).then((function(t){Object(R.a)("loaded"==n.loadingState,"somehow got a valid link to delete without links being loaded");var o=n.rgInviteLinks.findIndex((function(t){return t.invite_code()==e.invite_code()}));o>=0&&(n.rgInviteLinks.splice(o,1),console.log("removed link",n.rgInviteLinks))}))})).then((function(){})).catch((function(){}))},t.prototype.FormatExpires=function(e){return e>2145916800?Object(M.d)("#GroupSettings_Invite_NeverExpires"):c.f.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.HandleFocus=function(e){e.target.select()},t.prototype.render=function(){var e,t=this,n=this.props,o=n.inviteLinks,r=n.group,i=r.BCanInvite();if("pending"==o.loadingState)e=S.createElement("div",null,S.createElement(E.a,null));else if("denied"==o.loadingState)e=S.createElement("div",null,Object(M.d)("#GroupSettings_Invite_Denied"));else if("failed"==o.loadingState)e=S.createElement("div",null,Object(M.d)("#GroupSettings_Invite_Failed"));else if("loaded"==o.loadingState){var a;e=0==(a=o.rgInviteLinks.map((function(e){return S.createElement("tr",{key:e.invite_code()},S.createElement("td",null," ",S.createElement(O.o,{className:"inviteURLLink",value:Object(T.a)(e.invite_code()),readOnly:!0,onClick:t.HandleFocus,onFocus:t.HandleFocus})," "),S.createElement("td",{className:"dateCell allCaps"}," ",t.FormatExpires(e.time_expires())," "),S.createElement("td",{className:"buttonCell"},S.createElement(O.d,{onClick:function(n){return t.OnDeleteLink(e)},disabled:!i},Object(M.d)("#GroupSettings_Invite_Delete"))))}))).length?S.createElement("div",null,Object(M.d)("#GroupSettings_Invite_NoInvites")):S.createElement("table",{className:"DialogSpanningTable InviteLinksTable"},S.createElement("thead",null,S.createElement("tr",null,S.createElement("th",{className:"inviteCodeColumn"}," ",Object(M.d)("#GroupSettings_Invite_Code")," "),S.createElement("th",{className:"dateColumn"}," ",Object(M.d)("#GroupSettings_Invite_Expiration")," "),S.createElement("th",{className:"buttonColumn"}," "))),S.createElement("tbody",null,a))}return S.createElement(S.Fragment,null,S.createElement(x,null,Object(M.d)("#GroupSettings_Invite_Section")),!i&&S.createElement(ie,null),S.createElement(O.k,{className:"DialogBody"},i&&S.createElement("div",{className:"inviteLinkContainer"},S.createElement(f.a,{chat:r.GetDefaultChatRoom(),disabled:!i})),i&&S.createElement("div",{className:"OrSeparator"},S.createElement(O.l,null)),e))},Object(o.c)([D.a],t.prototype,"OnDeleteLink",null),Object(o.c)([D.a],t.prototype,"HandleFocus",null),t=Object(o.c)([y.a],t)}(S.Component),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this.props.invitedUsers;if("loaded"!=e.loadingState){var t=this.props.group;"pending"==e.loadingState&&t.GetInvitedUsersForGroup().then((function(t){setTimeout((function(){"loaded"==t.loadingState&&(e.rgInvitedUsers=t.rgInvitedUsers.sort((function(e,t){return e.time_invited()-t.time_invited()}))),e.loadingState=t.loadingState}),500)}))}},t.prototype.RevokeInvite=function(e,t){var n=this,o=c.f.FriendStore.GetPlayer(t),r=e.currentTarget.ownerDocument.defaultView,i=S.createElement(g.c,{className:"friend",friend:o,context:null,disableContextMenu:!0});Object(_.d)(window,Object(M.d)("#GroupSettings_InvitedUsers_RevokeTitle"),Object(M.d)("#GroupSettings_InvitedUsers_RevokeBody"),Object(M.d)("#GroupSettings_InvitedUsers_RevokeConfirm"),Object(M.d)("#Button_Cancel"),!0,i).then((function(){n.props.group.RevokeInvite(t).then((function(){w.d(n.props.invitedUsers.rgInvitedUsers,(function(e){return e.accountid()===t}))})).catch((function(e){Object(_.c)(r,Object(M.d)("#Generic_Error"),Object(M.d)("#GroupSettings_InvitedUsers_RevokeGenericError"))}))})).catch((function(){}))},t.prototype.FormatDate=function(e){return c.f.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.RenderContent=function(){var e=this,t=this.props,n=t.invitedUsers,o=t.group.BCanInvite();if("loaded"==n.loadingState){if(!n.rgInvitedUsers||0==n.rgInvitedUsers.length)return S.createElement(O.k,null,Object(M.d)("#GroupSettings_InvitedUsers_Noone"));var r=n.rgInvitedUsers.map((function(t){var n=c.f.FriendStore.GetPlayer(t.accountid());return S.createElement("tr",{className:"hoverRow",key:t.accountid()},S.createElement("td",{className:"friendCell"}," ",S.createElement(g.c,{friend:n,context:null,bHideGameName:!0,bHidePersona:!0})," "),S.createElement("td",{className:"dateCell"}," ",e.FormatDate(t.time_invited())," "),S.createElement("td",{className:"buttonCell"},S.createElement(O.d,{onClick:function(n){return e.RevokeInvite(n,t.accountid())},disabled:!o},Object(M.d)("#GroupSettings_InvitedUsers_RevokeInvite"))))}));return S.createElement(O.k,{className:"DialogBody"},S.createElement("table",{className:"DialogSpanningTable InvitedUsersTable"},S.createElement("thead",null,S.createElement("tr",{className:"headerRow"},S.createElement("th",{className:"friendColumn"},Object(M.d)("#GroupSettings_InvitedUsers_InvitedHeader")," "),S.createElement("th",{className:"dateColumn"}," ",Object(M.d)("#GroupSettings_InvitedUsers_InvitedDate")," "),S.createElement("th",{className:"buttonColumn"}," "))),S.createElement("tbody",null,r)))}return S.createElement(O.k,null,"pending"==n.loadingState?S.createElement(E.a,{size:"medium"}):Object(M.d)("#GroupSettings_InvitedUsers_Failed"))},t.prototype.render=function(){var e=this.props.group.BCanInvite();return S.createElement(S.Fragment,null,S.createElement(x,null,Object(M.d)("#GroupSettings_InvitedUsers_Section")),!e&&S.createElement(ie,null),this.RenderContent())},Object(o.c)([D.a],t.prototype,"RevokeInvite",null),t=Object(o.c)([y.a],t)}(S.Component),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this.props.group,t=this.props.bans;"pending"==t.loadingState&&e.GetBanList().then((function(e){setTimeout((function(){t.rgBans=e.rgBans,t.loadingState=e.loadingState}),500)}))},t.prototype.OnClickUnban=function(e,t){var n=this,o=c.f.FriendStore.GetPlayer(t),r=e.currentTarget.ownerDocument.defaultView,i=S.createElement(g.c,{className:"friend",friend:o,context:null,disableContextMenu:!0});Object(_.d)(window,Object(M.d)("#GroupSettings_Bans_UnbanTitle"),Object(M.d)("#GroupSettings_Bans_UnbanBody",o.display_name),Object(M.d)("#GroupSettings_Bans_UnbanConfirm"),Object(M.d)("#Button_Cancel"),!0,i).then((function(){n.props.group.SetUserBanState(t,!1).then((function(){w.d(n.props.bans.rgBans,(function(e){return e.accountid()===t}))})).catch((function(e){Object(_.c)(r,Object(M.d)("#Generic_Error"),Object(M.d)("#GroupSettings_Bans_UnbanGenericError"))}))})).catch((function(){}))},t.prototype.FormatDate=function(e){return c.f.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.RenderContent=function(){var e,t=this,n=this.props.bans;if("loaded"==n.loadingState)return 0==n.rgBans.length?S.createElement(O.k,null,Object(M.d)("#GroupSettings_Bans_NoOneBanned")):(e=n.rgBans.map((function(e){var n=c.f.FriendStore.GetPlayer(e.accountid());return S.createElement("tr",{className:"hoverRow",key:e.accountid()},S.createElement("td",{className:"friendCell"}," ",S.createElement(g.c,{friend:n,context:null})," "),S.createElement("td",{className:"dateCell"}," ",t.FormatDate(e.time_banned())," "),S.createElement("td",{className:"buttonCell"}," ",S.createElement(O.d,{onClick:function(n){return t.OnClickUnban(n,e.accountid())}},Object(M.d)("#GroupSettings_Bans_RevokeBan"))))})),S.createElement(O.k,{className:"DialogBody"},S.createElement("table",{className:"DialogSpanningTable BannedUsersTable"},S.createElement("thead",null,S.createElement("tr",{className:"headerRow"},S.createElement("th",{className:"friendColumn"},Object(M.d)("#GroupSettings_Bans_InvitedHeader")," "),S.createElement("th",{className:"dateColumn"}," ",Object(M.d)("#GroupSettings_Bans_BannedDate")," "),S.createElement("th",{className:"buttonColumn"}," "))),S.createElement("tbody",null,e))));var o=void 0;return o="pending"==n.loadingState?S.createElement(E.a,{size:"medium"}):"denied"==n.loadingState?Object(M.d)("#GroupSettings_Bans_AccessDenied"):Object(M.d)("#GroupSettings_Bans_Failed"),S.createElement(O.k,{className:"DialogBody"},o)},t.prototype.render=function(){var e=this.props.group.BCanBan();return S.createElement(S.Fragment,null,S.createElement(x,null,Object(M.d)("#GroupSettings_Bans_Section")),!e&&S.createElement(ie,null),this.RenderContent())},Object(o.c)([D.a],t.prototype,"OnClickUnban",null),t=Object(o.c)([y.a],t)}(S.Component),ie=function(e){return S.createElement("div",{className:H.a.Notification},S.createElement(I.F,null),e.children||Object(M.d)("#Chat_Settings_Permission_Denied"))},ae=n("/Byk"),se=n("9Cmb"),ce=n("D3Kh"),le=n("xdma"),ue=n("EGkk"),pe=n("8o0Y"),me=["148618792083695825","76561197960266962"],de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.InviteFriend=function(e){Object(f.b)(Object(a.e)(this,e),e.currentTarget.ownerDocument.defaultView,this.props.groupView.GetGroup())},t.prototype.OpenSettings=function(e){var t,n;t=Object(s.q)(e),n=this.props.groupView,Object(b.c)(S.createElement(z,{groupView:n}),t,"ChatRoomGroupSettings",{strTitle:Object(M.d)("#GroupSettings"),popupWidth:842,popupHeight:600},Object(a.g)(t),{nDragAreaHeight:32})},t.prototype.OpenNotificationPreferences=function(e){Object(ae.b)(Object(s.q)(e),this.props.groupView)},t.prototype.OnContextMenu=function(e){Object(l.b)(e,this.props.groupView.GetGroup(),{is_chat_window:!0})},t.prototype.render=function(){var e=this.props.groupView,t=e.GetGroup(),n=t.name,o=t.tagline,r=!1;t.readyToRender&&(r=t.BCanInvite());var i=e.GetGroup().watching_broadcast_steamid;return S.createElement("div",{className:"chatRoomHeader"},S.createElement("div",{className:"chatRoomGroupHeader"+(i?" notifyBroadcast":""),onContextMenu:this.OnContextMenu},S.createElement(Se,{group:t}),S.createElement("div",{className:"chatRoomGroupHeaderNameandTag"},S.createElement("div",{className:"chatRoomGroupHeaderName"},n),S.createElement("div",{className:"chatRoomGroupHeaderTagline"},o)),S.createElement("div",{className:"chatRoomGroupSpacer"}),t.readyToRender&&S.createElement(S.Fragment,null,i&&S.createElement(he,{groupView:e}),S.createElement("div",{className:"chatRoomGroupControls"},S.createElement("div",{className:"chatRoomOptions"},S.createElement("div",{className:"chatRoomButton ManageNotifications",onClick:this.OpenNotificationPreferences,title:Object(M.d)("#Tooltip_NotificationSettings")},S.createElement(I.c,null)),r&&S.createElement("div",{className:"chatRoomButton InviteToGroupChat",onClick:this.InviteFriend,title:Object(M.d)("#Tooltip_InviteToGroup")},S.createElement(I.D,null)),!r&&S.createElement("div",{className:"chatRoomButton InviteToGroupChat Disabled",onClick:function(e){},title:Object(M.d)("#Tooltip_InviteToGroup_Denied")},S.createElement(I.D,null)),S.createElement("div",{className:"chatRoomButton GroupChatSettings",onClick:this.OpenSettings,title:Object(M.d)("#Tooltip_GroupChatSettings")},S.createElement(I.g,null))),S.createElement("div",{className:"chatRoomGroupStats"},S.createElement(ge,{groupView:e}),S.createElement(ve,{groupView:e}),S.createElement(be,{groupView:e}))))))},Object(o.c)([D.a],t.prototype,"InviteFriend",null),Object(o.c)([D.a],t.prototype,"OpenSettings",null),Object(o.c)([D.a],t.prototype,"OpenNotificationPreferences",null),Object(o.c)([D.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([y.a],t)}(S.Component),he=function(e){function t(t){var n=e.call(this,t)||this,o=n.GetBroadcastID(t.groupView);return n.state={info:ce.BroadcastWatchStore.StartInfo(o)},n}return Object(o.d)(t,e),t.prototype.GetBroadcastID=function(e){return e.GetGroup().watching_broadcast_steamid.ConvertTo64BitString()},t.prototype.componentWillUnmount=function(){ce.BroadcastWatchStore.StopInfo(this.state.info)},t.prototype.OnRemoveBroadcast=function(e){e.stopPropagation();var t=this.props.groupView.GetGroup();t.BCanIAssociateBroadcast()&&Object(_.d)(window,Object(M.d)("#Broadcast_EndWatchParty"),Object(M.d)("#Broadcast_EndWatchPartyPrompt"),Object(M.d)("#Broadcast_EndWatchParty")).then((function(){return t.SetChatRoomGroupWatchingBroadcast(void 0)}))},t.prototype.OnToggleBroadcast=function(e){var t=this.props.groupView;t.isBroadcastShown?t.HideBroadcast():t.ShowBroadcast()},t.prototype.render=function(){var e=this.state.info,t=e.m_strAppTitle,n=e.m_strThumbnailUrl,o=e.m_strTitle,r=this.props.groupView,i=r.GetGroup(),a=this.GetBroadcastID(this.props.groupView),s=r.isBroadcastShown;if(me.indexOf(a)>=0)return S.createElement(fe,{groupView:r,onClick:this.OnToggleBroadcast,onRemoveBroadcast:this.OnRemoveBroadcast,watchingBroadcast:s});if(s)return null;var l=new G.a(a),u=o;return o||(u=Object(M.d)("#PersonaStateWatchingBroadcast_Player",c.f.FriendStore.GetPlayer(l.GetAccountID()).display_name)),S.createElement("div",{className:"broadcastInfoContainer",onClick:this.OnToggleBroadcast},S.createElement("div",{className:"broadcastDetails"},S.createElement("div",{className:"nowWatching"},Object(M.d)("#Broadcast_NowWatching")),S.createElement("div",{className:"gameTitle"},t),S.createElement("div",{className:"broadcastTitle"},u)),S.createElement("div",{className:"thumbnail"},n&&S.createElement(le.a,{className:"thumbnailImg",src:n,duration:2500})),i.BCanIAssociateBroadcast()&&S.createElement("div",{className:"actions",onClick:this.OnRemoveBroadcast},S.createElement(I.rb,null)))},Object(o.c)([D.a],t.prototype,"OnRemoveBroadcast",null),Object(o.c)([D.a],t.prototype,"OnToggleBroadcast",null),t=Object(o.c)([y.a],t)}(S.Component),fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnContextMenu=function(e){this.props.groupView.GetGroup().BCanIAssociateBroadcast()&&function(e,t){Object(pe.a)(S.createElement(_e,{onRemoveBroadcast:t}),e)}(e,this.props.onRemoveBroadcast)},t.prototype.render=function(){var e=this.props.watchingBroadcast,t=Object(N.a)(i.a.YuleLog,e&&i.a.Watching);return S.createElement("div",{className:t,onClick:this.props.onClick,onContextMenu:this.OnContextMenu})},Object(o.c)([D.a],t.prototype,"OnContextMenu",null),t}(S.Component);var _e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return S.createElement(ue.c,{className:"chatRoomListItemContextMenu"},S.createElement(ue.d,{key:"removebroadcast",onSelected:this.props.onRemoveBroadcast},Object(M.d)("#Chat_Actions_RemoveRoom_Action")))},t}(S.Component),ge=Object(y.a)((function(e){var t=e.groupView;return S.createElement("div",{className:"statMemberStat statMembersTotal"},S.createElement("div",{className:"statCircle"}),Object(M.i)("#Chat_Members",t.GetMemberCountTotal()))})),be=Object(y.a)((function(e){var t=e.groupView.GetMemberCountInGame();return 0==t?null:S.createElement("div",{className:"statMemberStat statMembersInGame",title:Object(M.i)("#Chat_Members_InGame_Tooltip",t)},S.createElement("div",{className:"statCircle"}),t)})),ve=Object(y.a)((function(e){var t=e.groupView.GetMemberCountOnline();return 0==t?null:S.createElement("div",{className:"statMemberStat statMembersOnline",title:Object(M.i)("#Chat_Members_Online_Tooltip",t)},S.createElement("div",{className:"statCircle"}),t)})),ye=Object(y.a)((function(e){var t=e.size;if(("large"==t||"medium"==t)&&e.clan.BIsOGG()&&e.clan.GetOGGAppID()){var n=c.f.AppInfoStore.GetAppInfo(e.clan.GetOGGAppID());return S.createElement("div",{className:"ChatRoomGroupOGGAvatar Large"},S.createElement("img",{className:"OGGAvatar",src:n.header_image_url}))}var o="";"micro"==t?o="Micro":"smallish"==t?o="Small Smallish":"smaller"==t?o="Smaller":"small"==t?o="Small":"large"==t&&(o="Large");var r="large"==t?e.clan.avatar_url_full:e.clan.avatar_url_medium;return S.createElement("div",{className:"ChatRoomGroupAvatar "+o},S.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:r}))})),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props.group;if(t&&t.BIsClanChatRoom()){var n=c.f.FriendStore.ClanStore.GetClan(t.GetClanID()),o="medium";return this.props.micro?o="micro":this.props.small?o="small":this.props.smallish?o="smallish":this.props.smaller?o="smaller":this.props.large&&(o="large"),S.createElement(ye,{clan:n,size:o})}var r="";if(this.props.micro?r="Micro":this.props.small?r="Small":this.props.smallish?r="Small Smallish":this.props.smaller?r="Smaller":this.props.large&&(r="Large"),t&&!t.IsNamedGroupChat()){var i=t.members_to_highlight,a=i.members,s=i.remaining_count;if(a.length){var l=a.length+(s?1:0);return S.createElement("div",{className:"ChatRoomMultiFriendAvatar With"+l+"Items "+r},a.map((function(t,n){return S.createElement("img",{src:e.props.large?t.persona.avatar_url_medium:t.persona.avatar_url,key:n,className:"MultiAvatar Index"+n})})),s>0&&S.createElement("div",{className:"ChatRoomMultiFriendMore MultiAvatar Index3"},"+",s))}}if(t&&t.hasIcon)return S.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar "+r},S.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:t.avatar_url_full}));var u="";t?u=t.name:this.props.name&&(u=this.props.name);var p=Object(se.b)(u),m="ChatRoomGroupAvatar "+r;return se.d(p)&&(m+=" EmojiInitials"),S.createElement("div",{className:m},S.createElement("div",{className:"ChatRoomGroupAvatar_initials"},p))},t=Object(o.c)([y.a],t)}(S.Component);function Ce(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=Object(a.f)(e),r=t.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":t.BIsAccountIDOwner(c.f.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm",[4,Object(_.a)(e,Object(M.d)("#Chat_Actions_LeaveChatRoomGroup"),Object(M.d)(r,t.name),Object(M.d)("#Chat_Actions_LeaveChatRoomGroup"))];case 1:return o.sent()?(t.LeaveChatRoomGroup(n),[2]):[2]}}))}))}},YlSc:function(e,t,n){"use strict";function o(e){if(!i()||!window.document.cookie)return null;var t=document.cookie.match("(^|; )"+e+"=([^;]*)");return t&&t[2]?decodeURIComponent(t[2]):null}function r(e,t,n,o){if(i()){o||(o="/");var r="";if(void 0!==n&&n){var a=new Date;a.setTime(a.getTime()+864e5*n),r="; expires="+a.toUTCString()}document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+";path="+o}}function i(){return!!window.document}n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}))},Z578:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y}));var o=n("mrSG"),r=n("LAqV"),i=n("TyAF"),a=n("Hi0u"),s=n("q1tI"),c=n("+M9t"),l=n("1VtQ"),u=n("oh5H"),p=n("ljid"),m=n("y4mg"),d=n("hReu"),h=n("/IDK"),f=n("bbBM"),_=n("e2SU"),g=n("+mma");function b(e,t,n,o,r){void 0===o&&(o=!1),Object(a.c)(s.createElement(y,{browserContext:e,chatViewToReplace:n,bHideChatNameEntry:o,vecInvitePlayers:r}),t,"CreateChatDialog",{strTitle:Object(u.d)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:580},Object(d.g)(t))}function v(e,t,n,o){var i=Object(d.f)(e),a=r.f.ChatStore.FindNamelessChatGroupWithFriends(n);a?r.f.UIStore.ReplaceFriendChatWithGroup(i,t,a):r.f.ChatStore.CreateChatRoomGroup(i,"",n,o).then((function(e){r.f.UIStore.GetPerContextChatData(i);var n=r.f.ChatStore.GetChatRoomGroup(e);n&&r.f.UIStore.ReplaceFriendChatWithGroup(i,t,n)})).catch((function(){Object(g.c)(e,Object(u.d)("#Generic_Error"),Object(u.d)("#Chat_CreateChatRoom_GenericError"))}))}var y=function(e){function t(t){var n=e.call(this,t)||this,o=t.vecInvitePlayers?t.vecInvitePlayers.map((function(e){return r.f.FriendStore.GetPlayer(e)})):[];return n.state={strCurrentNameEntry:"",strError:void 0,bCreateInFlight:!1,rgSelectedFriends:o},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.target.value})},t.prototype.HandleSubmit=function(e){var t=this;if(e&&e.preventDefault(),!this.state.bCreateInFlight){var n=Object(h.q)(e);this.setState((function(e){return e.bCreateInFlight||t.InternalDoSubmit(n),{bCreateInFlight:!0}}))}},t.prototype.InternalDoSubmit=function(e){var t=this,n=this.state.rgSelectedFriends.map((function(e){return e.persona.m_steamid.ConvertTo64BitString()})),o=this.props.chatViewToReplace;if(o){var i=new c.b(this.props.chatViewToReplace.chat.accountid_partner);return n.push(i.persona.m_steamid.ConvertTo64BitString()),v(e,o,n),void this.props.closeModal()}var a=this.props.bHideChatNameEntry?"":this.state.strCurrentNameEntry;r.f.ChatStore.CreateChatRoomGroup(this.props.browserContext,a,n,this.props.creationOptions).then((function(e){t.props.closeModal()})).catch((function(){t.setState({strError:Object(u.d)("#Chat_CreateChatRoom_GenericError"),bCreateInFlight:!1})}))},t.prototype.IsChatRoomNameValid=function(){return this.state.strCurrentNameEntry.length>0},t.prototype.render=function(){var e=this,t=this.props.chatViewToReplace?this.props.chatViewToReplace.chat.chat_partner:null,n=Object(u.d)("#Chat_CreateChatRoom_Button"),o=this.state.rgSelectedFriends.length>0,i=this.state.rgSelectedFriends.some((function(e){return!1===e.is_in_beta})),c=new Set;this.props.chatViewToReplace&&c.add(this.props.chatViewToReplace.chat.accountid_partner);var l=!1;this.state.bCreateInFlight?(l=!1,n=Object(u.d)("#GroupSettings_Permissions_Saving")):t?l=this.state.rgSelectedFriends.length>0:(l=this.IsChatRoomNameValid()||o,this.IsChatRoomNameValid()&&!o?n=Object(u.d)("#Chat_CreateChatRoom_Button"):o&&!this.IsChatRoomNameValid()?n=Object(u.d)("#Chat_CreateChatRoom_InviteFriends"):o&&this.IsChatRoomNameValid()&&(n=Object(u.d)("#Chat_CreateChatRoom_Button_wFriends")));var d=this.props.strTitle||(t?Object(u.d)("#Chat_CreateChatRoom_InviteFriends"):Object(u.d)("#Chat_CreateChatRoom"));return s.createElement(a.a,{onEscKeypress:this.props.closeModal},s.createElement(p.h,{classNameContent:"CreateChatDialog",onSubmit:this.HandleSubmit},s.createElement(p.m,null,d),s.createElement(p.b,null,t&&s.createElement(p.c,null,s.createElement("span",null,Object(u.d)("#Chat_CreateChatRoom_With"),s.createElement("span",{className:"DialogHighlight"},Object(u.d)("#Chat_CreateChatRoom_You")),Object(u.d)("#Chat_CreateChatRoom_And"),s.createElement("span",{className:"DialogHighlight"},t.display_name))),this.state.strError&&s.createElement(p.c,{className:"nicknameError"},this.state.strError),!this.props.bHideChatNameEntry&&s.createElement(p.o,{type:"text",label:Object(u.d)("#Chat_Settings_Room_Name"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),s.createElement(p.c,{className:"CreateChat_NonBetaFriendsWarning "+(r.f.IsInBeta()?"":" Released")+(i?" Active":"")},s.createElement(S,null),Object(u.d)(r.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),s.createElement(m.a,{label:Object(u.d)("#Chat_DropToInviteGroup"),eSort:1,autoFocus:this.props.bHideChatNameEntry,renderChosenFriend:C,excludeFriend:function(e){return c.has(e.accountid)},onChange:function(t){return e.setState({rgSelectedFriends:t})},rgPickedFriends:this.state.rgSelectedFriends})),s.createElement(p.j,null,s.createElement(p.s,{strOKText:n,onCancel:this.props.closeModal,bOKDisabled:!l}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t=Object(o.c)([i.a],t)}(s.Component);function S(){return s.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(u.d)(r.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}var C=Object(i.a)((function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return s.createElement(s.Fragment,null,s.createElement(f.e,{friend:e.friend,context:null},s.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&s.createElement(S,null),s.createElement("span",null,e.friend.display_name),s.createElement(_.sb,null))))}))},ZsEe:function(e,t,n){e.exports={throbberContainer:"main_throbberContainer_29hiv","throbberContainer-exit-active":"main_throbberContainer-exit-active_24VO6",SteamPageHeader:"main_SteamPageHeader_3EaXO",SteamPageHeaderShortLogo:"main_SteamPageHeaderShortLogo_2KbGi",SteamPageHeaderTopLink:"main_SteamPageHeaderTopLink_17wXz"}},adxy:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var o=n("mrSG"),r=n("i8i4"),i=n("/IDK"),a=function(){function e(e,t){this.m_bActive=!1,this.m_fnBoundAnimationFunc=void 0,this.m_window=e,this.m_options=Object.assign({timing:"sine"},t)}return e.prototype.Start=function(){var e;switch(this.m_msStart=performance.now(),this.m_msEnd=this.m_msStart+this.m_options.msDuration,this.m_options.timing){case"linear":e=function(e){return e};break;case"cubic-in-out":e=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1};break;case"sine":default:e=function(e){return.5-Math.cos(e*Math.PI)/2}}this.m_bActive=!0,this.m_fnBoundAnimationFunc=this.OnInterval.bind(this,e),this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc)},e.prototype.BIsActive=function(){return this.m_bActive},e.prototype.End=function(){this.m_bActive&&(this.Update(1),this.ClearInterval(),this.FireOnComplete())},e.prototype.FireOnComplete=function(){this.m_options.onComplete&&this.m_options.onComplete()},e.prototype.Cancel=function(){this.m_bActive=!1},e.prototype.OnInterval=function(e){if(this.m_bActive){var t=performance.now()-this.m_msStart;if(t>=this.m_options.msDuration)this.End();else{var n=t/this.m_options.msDuration;this.Update(e(n)),this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc)}}},e.prototype.ClearInterval=function(){this.m_bActive=!1},e}(),s=function(e){function t(t,n,o){var r=e.call(this,i.p(t),o)||this;return r.m_props={},r.m_object=t,r.m_propTargets=n,r}return Object(o.d)(t,e),t.prototype.Start=function(){for(var t in this.m_props={},this.m_propTargets){var n=parseFloat(this.m_object[t])||0,o=this.m_propTargets[t];n!=o&&(this.m_props[t]={start:n,end:o})}e.prototype.Start.call(this)},t.prototype.Update=function(e){for(var t in this.m_props){var n=this.m_props[t],o=n.start+(n.end-n.start)*e;this.m_object[t]=o}},t}(a),c=function(e){function t(t,n,o){var a=e.call(this,i.p(r.findDOMNode(t)),o)||this;return a.m_props={},a.m_component=t,a.m_propTargets=n,a.m_setStateOnComplete=o.setStateOnComplete,a}return Object(o.d)(t,e),t.prototype.Start=function(){for(var t in this.m_props={},this.m_propTargets){var n=parseFloat(this.m_component.state[t])||0,o=this.m_propTargets[t];n!=o&&(this.m_props[t]={start:n,end:o})}e.prototype.Start.call(this)},t.prototype.Update=function(e){var t={};for(var n in this.m_props){var o=this.m_props[n],r=o.start+(o.end-o.start)*e;t[n]=r}this.m_component.setState(t)},t.prototype.FireOnComplete=function(){e.prototype.FireOnComplete.call(this),this.m_setStateOnComplete&&this.m_component.setState(this.m_setStateOnComplete)},t}(a)},az2Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n("mrSG"),r=n("q1tI"),i=n("TyAF"),a=n("oh5H"),s=n("0N1H"),c=n("lqmi"),l=n("9PRf"),u=n("da/R"),p=n("e2SU"),m=n("QHER"),d=n("s13G"),h=n.n(d);function f(e){return r.createElement(r.Fragment,null,r.createElement("span",{className:h.a.partyBeaconJoin},Object(a.d)("#User_WantsToPlay"))," – ",e.persona.GetCurrentGameName())}var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.onContextMenu,i=e.persona,d=e.eFriendRelationship,_=e.bIsSelf,g=e.bParenthesizeNicknames,b=e.strNickname,v=e.bCompactView,y=e.bHideGameName,S=e.bHideEnhancedRichPresenceLabel,C=e.bHideSnooze,O=e.renderStatus,I=e.renderRichPresence,E=e.bHidePersona,w=e.bDNDSet,M=e.bHasPartyBeacon,D=e.bHasGamePrivacy,T=e.bNoMask,j=Object(o.f)(e,["className","onContextMenu","persona","eFriendRelationship","bIsSelf","bParenthesizeNicknames","strNickname","bCompactView","bHideGameName","bHideEnhancedRichPresenceLabel","bHideSnooze","renderStatus","renderRichPresence","bHidePersona","bDNDSet","bHasPartyBeacon","bHasGamePrivacy","bNoMask"]),G=null,R=null,k=null,A=[t,h.a.personaNameAndStatusLabel,Object(c.d)(i),v&&h.a.compactView,T&&h.a.NoMask];O?R=O():M||i.has_public_party_beacon?R=r.createElement(f,{persona:i}):Object(s.b)(d)?(R=Object(a.d)("#PersonaStateBlocked"),A.push(h.a.blocked)):i.is_ingame?(R=!i.is_in_nonsteam_game||_||Object(s.c)(d)?i.GetCurrentGameName():Object(a.d)("#PersonaStateInNonSteamGame"),_||E?_&&i.is_awayOrSnooze&&(k=Object(a.d)("#PersonaStateAway")):k=i.GetCurrentGameRichPresence()):i.m_broadcastAccountId&&(R=Object(a.d)("#PersonaStateWatchingBroadcast")),R||(R=i.GetLocalizedOnlineStatus());var N=!E&&!C;!1===C&&(N=!0),i.is_awayOrSnooze&&N&&(G=r.createElement(l.a,{persona:i}));var B=null;n?B=r.createElement("div",{className:"ContextMenuButton",onClick:n},r.createElement(p.p,null)):A.push(h.a.noContextMenu),E&&A.push(h.a.hidePersona),I&&(k=I()),!y&&k||A.push(h.a.twoLine);var L=b&&!g,P=L?b:i.m_strPlayerName,F=!E&&(!y||!k)&&!S&&k;return r.createElement("div",Object(o.a)({},j,{className:m.a.apply(void 0,A),onContextMenu:n}),r.createElement("div",{className:Object(m.a)(h.a.statusAndName,F&&h.a.threeLines)},r.createElement("div",{className:h.a.playerName},P||" ",g&&b&&r.createElement("span",{className:h.a.playerNickname},"(",b,")")),w&&r.createElement("div",{className:h.a.DNDContainer,title:Object(a.d)("#User_ToggleDoNotDisturb")},r.createElement(p.n,null)),L&&r.createElement("span",{className:h.a.playerNicknameBracket,title:Object(a.d)("#isNickname")}," *"),r.createElement(u.a,{persona:i}),G,i.m_bPlayerNamePending&&r.createElement("div",{className:h.a.PendingPersona,title:Object(a.d)("#SteamChina_PendingPersonaName")},r.createElement(p.i,null)),B),!E&&r.createElement("div",{className:h.a.richPresenceContainer},(!y||!k)&&r.createElement("div",{className:Object(m.a)(h.a.gameName,h.a.richPresenceLabel,"no-drag")},D&&r.createElement("div",{className:h.a.gameIsPrivateIcon,title:Object(a.d)("#User_GameInfoHidden")},r.createElement(p.z,null)),R),!S&&k&&r.createElement("div",{className:Object(m.a)(h.a.richPresenceLabel,"no-drag")},k," ")))},t=Object(o.c)([i.a],t)}(r.Component);Object(i.a)((function(e){var t=e.persona,n=e.bParenthesizeNicknames,i=e.strNickname,a=e.className,s=Object(o.f)(e,["persona","bParenthesizeNicknames","strNickname","className"]),l=i&&!n?i:t.m_strPlayerName;return r.createElement("span",Object(o.a)({},s,{className:Object(m.a)(a,Object(c.d)(t))}),r.createElement("span",{className:h.a.playerName},l||" ",n&&i&&r.createElement("span",{className:h.a.playerNickname},"(",i,")")))}))},bbBM:function(e,t,n){"use strict";n.d(t,"a",(function(){return pe})),n.d(t,"g",(function(){return me})),n.d(t,"h",(function(){return de})),n.d(t,"f",(function(){return fe})),n.d(t,"b",(function(){return Ee})),n.d(t,"e",(function(){return Te})),n.d(t,"c",(function(){return je})),n.d(t,"d",(function(){return Re}));var o=n("mrSG"),r=n("tkkQ"),i=n("rsEv"),a=n("+M9t"),s=n("5FJe"),c=n("hReu"),l=n("LAqV"),u=n("29iz"),p=n("+mma"),m=n("FkUk"),d=n("V7Fl"),h=n("TA9H"),f=n("YZlK"),_=n("gtB6"),g=n("2vnA"),b=n("TyAF"),v=n("q1tI"),y=n("i8i4"),S=n("/IDK"),C=n("oh5H"),O=n("1VtQ"),I=n("ieu3"),E=n("uw3m"),w=n("9PRf"),M=function(e){function t(t){var n=e.call(this,t)||this;return n.m_iActiveDragIndex=void 0,n.m_ActiveDrag=void 0,n.m_ActiveDragOut=void 0,n.m_bGhostIsDupe=!1,n.m_rgFavoriteElementRefs=[],n.m_bAcceptDrag=!1,n.state={bHintDismissed:c.i.UIDisplayPrefs.bFavoritesHintDismissed},n}return Object(o.d)(t,e),t.prototype.DismissFavoritesHint=function(){this.setState({bHintDismissed:!0}),c.i.SetUIDisplayPref("bFavoritesHintDismissed",!0)},t.prototype.render=function(){var e=this,t=this.props.FavoritesStore.favorites,n=this.m_ActiveDrag,r="quickAccessFriends emptyQuickAccess";if(this.state.bHintDismissed&&(r+=" hintDismissed"),t.length||n){var i=t,a=l.f.SettingsStore.FriendsSettings.bCompactQuickAccess;if(n){if(this.m_bGhostIsDupe&&i.findIndex((function(e){return Object(h.b)(e,n)})),void 0===this.m_iActiveDragIndex||this.m_iActiveDragIndex>=i.length)i=Object(o.g)(i,[Object(o.a)({isActiveDrag:!0},n)]);else{this.m_iActiveDragIndex;i=Object(o.g)(i.slice(0,this.m_iActiveDragIndex),[Object(o.a)({isActiveDrag:!0},n)],i.slice(this.m_iActiveDragIndex))}}var s=i.map((function(t,o){var r;if(t.friend)r="f"+t.friend.accountid;else if(t.clan)r="cl"+t.clan.clanid;else{if(!t.chat)return null;r="cg"+t.chat.GetGroupID()}var i=e.m_bGhostIsDupe&&!t.isActiveDrag&&Object(h.b)(n,t),a=t.isActiveDrag;return a&&(r+="dragGhost"),v.createElement(D,{favorite:t,index:o,friendRenderContext:e.GetFriendRenderContext(),key:r,bIsDragGhost:a,bIsDragOutGhost:i,ref:e.OnFavoriteElementRef.bind(e,o)})})),c="quickAccessFriends";return a&&(c+=" compactQuickAccess"),v.createElement(u.a,Object(o.a)({className:c},this.GetDragDropProps()),s,v.createElement("div",{className:"dropTargetBox"}))}return v.createElement(u.a,Object(o.a)({className:r},this.GetDragDropProps()),v.createElement("div",{className:"quickAccessFriendsMessage"},Object(C.d)("#FriendsList_Favorites_Hint")),!this.state.bHintDismissed&&v.createElement("div",{className:"quickAccessFriendsMessageDismiss",onClick:this.DismissFavoritesHint},Object(C.d)("#Generic_Got_It")),v.createElement("div",{className:"dropTargetBox"}))},t.prototype.OnFavoriteElementRef=function(e,t){this.m_rgFavoriteElementRefs[e]=t},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext||(this.m_FriendRenderContext={chatContext:"friendslist"}),this.m_FriendRenderContext},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend","chattab","chatroomgroup","clan"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e.onDragStart=this.OnDragStart,e.onDragEndCapture=this.OnDragEnd,e},t.prototype.OnDragStart=function(e){var t=c.i.DragDropManager.GetDragData();!t||"friend"!=t.type&&"chatroomgroup"!=t.type&&"clan"!=t.type||(t.is_favorite=!0,this.m_ActiveDragOut=this.FindItemFromDrag(t))},t.prototype.OnDragEnd=function(e){var t=c.i.DragDropManager.GetDragData(),n=this.FindItemFromDrag(t);if(n&&"is_favorite"in t&&t.is_favorite&&!c.i.DragDropManager.BWasDropConsumed()){var o=e.currentTarget.getBoundingClientRect();Object(S.n)(o,e.clientX,e.clientY)>100&&(this.props.FavoritesStore.RemoveFromFavorites(n),c.i.DragDropManager.EndDrag())}this.m_ActiveDragOut=void 0},t.prototype.FindItemFromDrag=function(e){var t,n,o,r;if("friend"==e.type)n=e.friend;else if("chattab"==e.type){var i=e.tab;if(i instanceof d.d){var a=i.GetGroup();a.BIsClanChatRoom()&&(o=l.f.FriendStore.ClanStore.GetClan(a.GetClanID())),r=a}else{n=i.GetChatView().chat.chat_partner}}else"chatroomgroup"==e.type?r=e.group:"clan"==e.type&&(o=e.clan);return n?n.is_friend&&(t={friend:n}):o?t={clan:o}:r&&(t={chat:r}),t},t.prototype.OnDragEnter=function(e,t){var n=this.FindItemFromDrag(e);return n&&!Object(h.b)(this.m_ActiveDrag,n)&&(this.m_ActiveDrag=n,this.m_bGhostIsDupe=this.props.FavoritesStore.BIsFavorited(n)),!0},t.prototype.OnDragOver=function(e){for(var t,n,o=0,r=this.m_rgFavoriteElementRefs;o<r.length;o++){var i=r[o],a=i&&i.GetBoundingClientRect();if(a){var s=Object(S.n)(a,e.clientX,e.clientY);(void 0===n||s<n)&&(n=s,t=i)}}t&&(this.m_iActiveDragIndex=t.props.index),e.dataTransfer.dropEffect="copy"},t.prototype.ResetDragState=function(){this.m_ActiveDrag=void 0,this.m_ActiveDragOut=void 0,this.m_iActiveDragIndex=void 0},t.prototype.OnDragLeave=function(){this.m_ActiveDrag&&this.ResetDragState()},t.prototype.OnDrop=function(e,t){var n=this.FindItemFromDrag(e);this.m_ActiveDrag;n?(c.i.DragDropManager.SetDropConsumed(),this.props.FavoritesStore.AddToFavorites(n,this.m_iActiveDragIndex),n.friend&&n.friend.LoadEquippedProfileItems(),this.ResetDragState()):this.m_ActiveDrag&&this.ResetDragState()},Object(o.c)([g.B],t.prototype,"m_iActiveDragIndex",void 0),Object(o.c)([g.B],t.prototype,"m_ActiveDrag",void 0),Object(o.c)([g.B],t.prototype,"m_ActiveDragOut",void 0),Object(o.c)([O.a],t.prototype,"DismissFavoritesHint",null),Object(o.c)([O.a],t.prototype,"OnDragStart",null),Object(o.c)([O.a],t.prototype,"OnDragEnd",null),Object(o.c)([O.a],t.prototype,"OnDragEnter",null),Object(o.c)([O.a],t.prototype,"OnDragOver",null),Object(o.c)([O.a],t.prototype,"OnDragLeave",null),Object(o.c)([O.a],t.prototype,"OnDrop",null),t=Object(o.c)([b.a],t)}(v.Component),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetBoundingClientRect=function(){var e=y.findDOMNode(this);return e?e.getBoundingClientRect():null},t.prototype.onFavoriteElementClick=function(e){var t=this.props.favorite;if(t.friend)this.props.favorite.friend.OpenChatDialog(Object(c.e)(null,e));else if(t.clan)t.clan.OpenChatDialog(Object(c.e)(this,e));else{if(!t.chat)return;l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(c.e)(this,e),t.chat,!0)}e.stopPropagation()},t.prototype.OnFavoriteElementContextMenu=function(e){var t=this.props.favorite;if(t.friend)Object(m.b)(Object(c.e)(this,e),this.props.friendRenderContext,t.friend,e);else if(t.clan)Object(_.c)(e,t.clan,{is_favorites:!0});else{if(!t.chat)return;Object(_.b)(e,t.chat,{is_favorites:!0})}e.stopPropagation()},t.prototype.render=function(){var e,t,n="quickAccessFriend",o=this.props.favorite;this.props.bIsDragGhost?n+=" dropGhost":this.props.bIsDragOutGhost&&(n+=" dragOriginGhost"),this.props.bIsDragOutGhost&&(e={display:"none"}),t=o.friend?v.createElement(T,{key:o.friend.accountid,friend:o.friend,friendRenderContext:this.props.friendRenderContext,className:n}):o.clan?v.createElement(j,{key:o.clan.clanid,clan:o.clan,className:n}):o.chat?v.createElement(G,{key:o.chat.GetGroupID(),chat:o.chat,className:n}):null;var r=v.createElement("div",{style:e,className:"favoriteElement",onClick:this.onFavoriteElementClick,onContextMenu:this.OnFavoriteElementContextMenu},t);return o.friend?v.createElement(Te,{friend:o.friend,context:this.props.friendRenderContext},r):r},Object(o.c)([O.a],t.prototype,"onFavoriteElementClick",null),Object(o.c)([O.a],t.prototype,"OnFavoriteElementContextMenu",null),t}(v.Component),T=Object(b.a)((function(e){var t=e.friend,n=l.f.SettingsStore.FriendsSettings.bCompactQuickAccess,o=null;t.persona.is_awayOrSnooze&&(o=v.createElement(w.a,{persona:t.persona,className:"SnoozeContainer",size:"medium",dim:!0}));var r=void 0;if(t.persona.is_ingame){var i=l.f.AppInfoStore.GetAppInfo(t.persona.m_unGamePlayedAppID);i.is_valid&&(r=v.createElement("div",{className:"FavoriteFriend_GameIcon"},v.createElement("img",{className:"gameIcon",src:i.icon_url,draggable:!1})))}for(var a=!1,s=0,c=l.f.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();s<c.length;s++){if(c[s].accountid_partner==t.accountid){a=!0;break}}var u=null;a&&(u=v.createElement("div",{className:"ChatUnreadMessageIndicator"},v.createElement("div",{className:"chatUnreadCircle"})));var p=null,m=null,d=l.f.SettingsStore.FriendsSettings.bAnimatedAvatars&&t.persona.is_online,h=t.GetEquippedProfileItems();return h&&(p=h.animated_avatar,m=h.avatar_frame),v.createElement(je,{friend:t,key:t.accountid,className:e.className,context:e.friendRenderContext,bFriendsListEntry:!0,bSingleClickActivate:!0},v.createElement("div",null,v.createElement(E.b,{key:t.persona.GetAccountID()+"_"+t.persona.is_online,loopDuration:d?"Medium":"None",persona:t.persona,animatedAvatar:p,avatarFrame:m,size:"Medium"},r,o),!n&&v.createElement("div",{className:"playerNameQuickAccessContainer"},v.createElement("div",{className:"playerName"},t.display_name),t.is_display_name_nickname&&v.createElement("span",{className:"playerNicknameBracket",title:Object(C.d)("#isNickname")},"*")),u))})),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnDragStart=function(e){c.i.DragDropManager.StartDrag({type:"clan",clan:this.props.clan})},t.prototype.OnDragEnd=function(e){c.i.DragDropManager.EndDrag()},t.prototype.render=function(){var e="QuickAccessFriend QuickAccessClan",t=l.f.SettingsStore.FriendsSettings.bCompactQuickAccess;this.props.className&&(e+=" "+this.props.className);var n=null,o=this.props.clan.GetChatGroupIDIfLoaded();if(o){var r=l.f.ChatStore.GetChatRoomGroup(o);r&&(n=v.createElement(I.b,{group:r}))}return v.createElement("div",{className:e,draggable:!0,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd},v.createElement(f.c,{clan:this.props.clan,size:"small"}),!t&&v.createElement("div",{className:"clanName"},this.props.clan.name),n)},Object(o.c)([O.a],t.prototype,"OnDragStart",null),Object(o.c)([O.a],t.prototype,"OnDragEnd",null),t=Object(o.c)([b.a],t)}(v.Component),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnDragStart=function(e){c.i.DragDropManager.StartDrag({type:"chatroomgroup",group:this.props.chat})},t.prototype.OnDragEnd=function(e){c.i.DragDropManager.EndDrag()},t.prototype.render=function(){var e="QuickAccessChat",t=null,n=l.f.SettingsStore.FriendsSettings.bCompactQuickAccess;return this.props.chat.hasUnreadChatMessage&&(t=v.createElement(I.b,{group:this.props.chat})),this.props.className&&(e+=" "+this.props.className),v.createElement("div",{className:e,draggable:!0,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd},v.createElement(f.a,{group:this.props.chat}),!n&&v.createElement("div",{className:"clanName"},this.props.chat.name),t)},Object(o.c)([O.a],t.prototype,"OnDragStart",null),Object(o.c)([O.a],t.prototype,"OnDragEnd",null),t=Object(o.c)([b.a],t)}(v.Component),R=n("uWOQ"),k=n("1w3K"),A=n("8o0Y"),N=n("EGkk"),B=n("e2SU"),L=n("adxy"),P=n("/7KC"),F=n("Z578"),x=n("yolM"),V=n("Hi0u"),U=n("ljid"),H=n("UqDm"),W=n("ywG3"),z=n("GxRc"),q=n("rWGG"),K=n("MB4Y");v.Component;var Y=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgSelectOptions=[{label:"Option #1",data:1},{label:"Option #2",data:2},{label:v.createElement("span",null,"Option ",v.createElement("u",null,"#3")),data:3}],n.state={inputText:"Input text",checkboxChecked:!0,selectedOption:void 0},n}return Object(o.d)(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnInputChanged=function(e){this.setState({inputText:e.currentTarget.value})},t.prototype.OnToggled=function(e){this.setState({checkboxChecked:e})},t.prototype.OnSelectDropDownChanged=function(e){this.setState({selectedOption:e.data})},t.prototype.OnSubmit=function(){alert(JSON.stringify(this.state))},t.prototype.render=function(){return v.createElement(v.Fragment,null,v.createElement(U.k,{className:"DialogBody",onSubmit:this.OnSubmit},v.createElement("div",{className:"_FixedHeight"},v.createElement(U.c,null,"Text input"),v.createElement(U.o,{label:"INPUT TITLE",value:this.state.inputText,onChange:this.OnInputChanged}),v.createElement(U.o,{label:"READ ONLY",value:"You can't change this",disabled:!0}),v.createElement(U.i,{label:"Drop down",rgOptions:this.m_rgSelectOptions,strDefaultLabel:"Select one...",selectedOption:this.state.selectedOption,onChange:this.OnSelectDropDownChanged}),v.createElement(U.u,{label:"On Off Toggle",checked:this.state.checkboxChecked,onChange:this.OnToggled}),v.createElement("div",{style:{marginBottom:"20px"}},v.createElement("span",null,"Checkbox:"),v.createElement("div",{style:{display:"inline-block",marginLeft:"20px",verticalAlign:"middle"}},v.createElement(U.e,null))),v.createElement("div",{style:{marginBottom:"20px"}},v.createElement("span",null,"Round checkbox:"),v.createElement("div",{style:{display:"inline-block",marginLeft:"20px",verticalAlign:"middle"}},v.createElement(U.z,null))),v.createElement(U.A,{min:0,max:100,value:25}),v.createElement("div",{style:{marginBottom:"20px"}},v.createElement(U.C,null,v.createElement(U.x,null,"PrimaryButton"),v.createElement(U.B,null,"TextButton"),v.createElement(U.d,{svgicon:B.l},"Button w/ Icon"))),v.createElement(U.D,null,v.createElement(U.o,{label:"Left input",placeholder:"Placeholder"}),v.createElement(U.o,{label:"Right input",placeholder:"Placeholder"})),v.createElement(U.u,{label:"Another toggle",description:"This one has a longer description with more details."}))),v.createElement(U.j,null,v.createElement(U.s,{onCancel:this.props.onCancel})))},Object(o.c)([O.a],t.prototype,"OnInputChanged",null),Object(o.c)([O.a],t.prototype,"OnToggled",null),Object(o.c)([O.a],t.prototype,"OnSelectDropDownChanged",null),Object(o.c)([O.a],t.prototype,"OnSubmit",null),t}(U.w),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rgDragDropOptions=[v.createElement(U.r,{key:"key1",id:"key1"},v.createElement(U.u,{label:"Draggable toggle #1"})),v.createElement(U.r,{key:"key2",id:"key2"},v.createElement(U.u,{ref:t.RefTest,label:"Draggable toggle #2"})),v.createElement(U.r,{key:"key3",id:"key3"},v.createElement(U.u,{label:"Draggable toggle #3"})),v.createElement(U.r,{key:"keyz",id:"keyz"},v.createElement(Q,null)),v.createElement(U.r,{key:"key4",id:"key4"},v.createElement(U.u,{label:"Draggable toggle #4"}))],t}return Object(o.d)(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnSubmit=function(){alert(JSON.stringify(this.state))},t.prototype.RefTest=function(e){console.log("Got ref",e)},t.prototype.OnListReordered=function(e,t){H.f(this.rgDragDropOptions,e,t),this.forceUpdate()},t.prototype.render=function(){return v.createElement(U.k,{className:"DialogBody",onSubmit:this.OnSubmit},v.createElement(U.y,{onReorder:this.OnListReordered},this.rgDragDropOptions))},Object(o.c)([O.a],t.prototype,"OnSubmit",null),Object(o.c)([O.a],t.prototype,"RefTest",null),Object(o.c)([O.a],t.prototype,"OnListReordered",null),t}(U.w),Q=function(e){function t(t){var n=e.call(this,t)||this;return n.state={cSeconds:0},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this;this.m_iInterval=window.setInterval((function(){e.setState((function(e){return{cSeconds:e.cSeconds+1}}))}),1e3)},t.prototype.componentWillUnmount=function(){window.clearInterval(this.m_iInterval)},t.prototype.render=function(){return v.createElement(U.o,{value:this.state.cSeconds,disabled:!0,label:"COUNTER"})},t}(v.Component),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCMToggled=function(e){Object(W.d)(e),this.forceUpdate()},t.prototype.OnStickyContextMenuToggle=function(e){Object(N.j)(e),this.forceUpdate()},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.render=function(){return v.createElement(v.Fragment,null,v.createElement(U.b,null,v.createElement(U.u,{label:'"Sticky" Context Menus',description:"Context menus will stay open to allow inspecting CSS",checked:Object(N.h)(),onChange:this.OnStickyContextMenuToggle}),v.createElement(U.u,{label:"Log all CM Traffic",description:"All messages to and from the steam servers will be logged to the browser console (F12)",checked:Object(W.c)(),onChange:this.OnCMToggled}),v.createElement(Z,{label:"Enable Member List Virtualization",description:"Virtualize member lists for chats with > 10 members (must close and reopen any chat windows)",storageKey:"_devVirtualizeMemberList"})))},Object(o.c)([O.a],t.prototype,"OnCMToggled",null),Object(o.c)([O.a],t.prototype,"OnStickyContextMenuToggle",null),t}(U.w),Z=function(e){var t=e.label,n=e.description,o=e.storageKey,r=e.onChange,i=v.useState(void 0),a=i[0],s=i[1];v.useEffect((function(){l.f.Storage.GetString(o).then((function(e){return s("true"===e)}))}),[o]);return v.createElement(U.u,{label:t,description:n,checked:a,onChange:function(e){e?(l.f.Storage.StoreString(o,"true"),s(e)):(l.f.Storage.RemoveObject(o),s(e)),r&&r(e)}})},$=function(e){function t(t){var n=e.call(this,t)||this;return n.state={searchString:""},n}return Object(o.d)(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnSearchInput=function(e){e.currentTarget.value!=this.state.searchString&&this.setState({searchString:e.currentTarget.value})},t.prototype.render=function(){var e,t=new K.b;e=""==this.state.searchString?l.f.FriendStore.self.steamid.GetAccountID():this.state.searchString;var n=new K.a(l.f.FriendStore.GetPlayer(+e));return t.hover=n,t.visible=!0,n.EnsureCommunityDataLoaded(),v.createElement(U.k,{className:"DialogBody"},v.createElement(U.D,null,v.createElement("div",{style:{flex:1}},v.createElement(U.p,null,"Old Throbber"),v.createElement("div",{className:"LoadingWrapper"},v.createElement("div",{className:"LoadingThrobber"},v.createElement("div",{className:"Bar Bar1"}),v.createElement("div",{className:"Bar Bar2"}),v.createElement("div",{className:"Bar Bar3"})),v.createElement("div",{className:"LoadingText"}))),v.createElement("div",{style:{flex:2}},v.createElement(U.p,null,"New Throbber (W.I.P.)"),v.createElement("div",{className:"displayRow"},v.createElement(z.a,{size:"xlarge",string:"X-Large"}),v.createElement(z.a,{size:"large",string:"Large"}),v.createElement(z.a,{size:"medium",string:"Medium"}),v.createElement(z.a,{size:"small",string:"Small"})))),v.createElement(U.b,null,v.createElement(U.p,null,"Miniprofile Tester:"),v.createElement("form",null,v.createElement("input",{className:"friendSearchInput",type:"text",name:"memberlistSearch",placeholder:"Enter SteamID",value:this.state.searchString,onInput:this.OnSearchInput,autoComplete:"off"})),v.createElement("div",{className:"fakeMiniProfile",style:{zIndex:5}},v.createElement(q.c,{hoverInstance:t})),v.createElement(je,{friend:l.f.FriendStore.GetPlayer(+e),context:null})))},Object(o.c)([O.a],t.prototype,"OnSearchInput",null),t}(U.w),ee=n("lqmi"),te=n("0wLp"),ne=n("s+DT");var oe=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.Posts=function(){return[{date:"2019-05-17",content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.k)("#changeLog_UpdateItem77",v.createElement("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=com.valvesoftware.android.steam.friendsui"},"Android"),v.createElement("a",{target:"_blank",href:"https://itunes.apple.com/app/steam-chat/id1434890245"},"iOS"))))},{date:"2019-05-01",content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem76")))},{date:"2019-04-24",content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem75")))},{date:"2019-04-17",content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem72")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem73")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem74")))},{date:1532044800,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.k)("#changeLog_UpdateItem71",v.createElement("b",null,Object(C.d)("#changeLog_Note")))))},{date:1531443600,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem68")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem69")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem70")))},{date:1531263600,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem47")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem58")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem59")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem60")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem48")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem49")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem63")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem50")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem51")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem53")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem52")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem61")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem62")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem64")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem65")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem66")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem67")))},{date:1531162800,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem54")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem55")))},{date:1530298800,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem56")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem57")))},{date:1530126e3,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItemSubHeader"},Object(C.d)("#changeLog_UpdateItem_Permissions")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem39")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem40")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem41")),v.createElement("div",{className:"changeLogItemSubHeader"},Object(C.d)("#changeLog_UpdateSubHeader_General")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem45")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem30"),v.createElement("div",{style:{marginTop:"4px"}},v.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},Object(C.d)("#changeLog_Note")),v.createElement("span",{style:{fontStyle:"italic"}},Object(C.d)("#changeLog_UpdateItem30_Note")))),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem29")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem25")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem26")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem38")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem31")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem42")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem28")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem27")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem33")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem32")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem34"),v.createElement("div",{style:{marginTop:"4px"}},v.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},Object(C.d)("#changeLog_Note")),v.createElement("span",{style:{fontStyle:"italic"}},Object(C.d)("#changeLog_UpdateItem34_Note")))),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem35")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem36")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem37")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem43")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem44")))},{date:1529528400,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem20")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem21")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem22")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem23")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem24")))},{date:1529456400,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem17")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem18")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem15")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem16")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem12")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem13")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem14")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem19")))},{date:1529017200,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItemSubHeader"},Object(C.d)("#changeLog_UpdateSubHeader_General")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem11")),v.createElement("div",{className:"changeLogItemSubHeader"},Object(C.d)("#changeLog_UpdateSubHeader_Linux")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem10")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem09")))},{date:1528938e3,content:v.createElement("div",null,v.createElement("div",{className:"changeLogExtra"},Object(C.d)("#changeLog_UpdateExtraInfo01")),v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem02")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem03")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem04")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem05")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem06")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem07")),v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem08"))))},{date:1528923600,content:v.createElement("div",{className:"changeLogDescription"},v.createElement("div",{className:"changeLogItem"},Object(C.d)("#changeLog_UpdateItem01")))}]},t.prototype.PostDate=function(e){return("string"==typeof e?new Date(e):l.f.RTime32ToDate(e)).toLocaleDateString(C.c.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.render=function(){var e=this;return v.createElement(v.Fragment,null,t.Posts().map((function(t){return v.createElement("div",{key:t.date},v.createElement("div",{className:"changeLogTitle"},Object(C.d)("#changeLog_GenericUpdateTitle")),v.createElement("div",{className:"changeLogDate"},e.PostDate(t.date)),t.content)})))},Object(o.c)([O.a],t.prototype,"PostDate",null),t}(v.Component),re=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.render=function(){return v.createElement(V.a,{onEscKeypress:this.props.closeModal},v.createElement(U.g,{className:"changeLogPage"},v.createElement(U.m,null,Object(C.d)("#changeLog_Title")),v.createElement(U.b,null,v.createElement(U.c,null,Object(C.d)("#changeLog_SubTitle")),v.createElement(U.n,{className:"changeLogDetails"},v.createElement(oe,null))),v.createElement(U.j,null,v.createElement(U.x,{onClick:this.props.closeModal},Object(C.d)("#Button_Close")))))},t}(v.Component),ie=n("XaMz"),ae=n("az2Z"),se=n("QHER"),ce=n("syWt"),le=(n("dBNU"),function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.chat.VoiceChatStore.HasBeenAttemptingOverTwoSeconds(),t=this.props.chat.VoiceChatStore.IsAttemptingReconnect();return v.createElement("div",{className:"connectionStatusLabels"},e&&v.createElement("div",{className:"connectionStatus"},v.createElement("a",{title:Object(C.d)("#VoiceChatConnectingHelp"),className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(C.d)("#VoiceChatConnecting"))),t&&v.createElement("div",{className:"connectionStatus"},v.createElement("a",{className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(C.d)("#VoiceChatReconnecting"))))},t=Object(o.c)([b.a],t)}(v.Component)),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.chats.GetActiveVoiceChat();return this.props.chats.VoiceChat.IsAnyVoiceActive()&&e?v.createElement(pe,{chat:e,name:this.props.chats.GetActiveVoiceChannelName(),nostatus:!1}):v.createElement("div",{className:"activeVoiceControls"},v.createElement("div",{className:"buttonsContainer"},v.createElement("div",{className:"activeVoiceFlexBox"},v.createElement("div",{className:"activeVoiceLabels"},v.createElement("div",{className:"activeVoiceHeader"},Object(C.d)("#ActiveVoiceChat")),v.createElement("div",{className:"activeVoiceName"})),v.createElement("div",{className:"activeVoiceButtons"},v.createElement(me,null),v.createElement(de,null),v.createElement("div",{className:"activeVoiceButtonsSpacer"}),v.createElement(he,null),v.createElement("div",{className:"activeVoiceButtonsSpacerAfter"})))))},t=Object(o.c)([b.a],t)}(v.Component),pe=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.ActivateActiveVoiceChat=function(e){if(this.props.chat instanceof i.a){var t=l.f.ChatStore.GetChatRoomGroup(this.props.chat.GetParentGroupID());if(t)return void l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(c.e)(this,e),t,!0)}l.f.UIStore.ShowAndOrActivateChat(Object(c.e)(this,e),this.props.chat,!0)},t.prototype.render=function(){var e=l.f.VoiceStore.GetPushToTalkEnabled(),t=l.f.VoiceStore.GetPushToMuteEnabled(),n=l.f.VoiceStore.GetPushToTalkVoiceStateEnabled(),o=l.f.VoiceStore.GetPushToTalkHotKeyDisplayString(),r="";return(e||t)&&(r+=" pushToTalkEnabled"),n&&(r+=" pushToTalkKeyDown"),v.createElement("div",{className:"activeVoiceControls"+r},v.createElement("div",{className:"buttonsContainer"},v.createElement("div",{className:"activeVoiceFlexBox"},v.createElement("div",{className:"activeVoiceLabels"},v.createElement("div",{className:"activeVoiceHeader"},Object(C.d)("#ActiveVoiceChat")),v.createElement("div",{className:"activeVoiceName",onClick:this.ActivateActiveVoiceChat},this.props.name)),v.createElement("div",{className:"activeVoiceButtons"},v.createElement(me,null),v.createElement(de,null),v.createElement("div",{className:"activeVoiceButtonsSpacer"}),v.createElement(he,null),v.createElement("div",{className:"activeVoiceButtonsSpacerAfter"}))),!this.props.nostatus&&v.createElement(le,{chat:this.props.chat})),(e||t)&&v.createElement("div",{className:"activeVoicePushToTalk"+r},Object(C.d)(t?"#ActiveVoicePushToMute":"#ActiveVoicePushToTalk",o)))},Object(o.c)([O.a],t.prototype,"ActivateActiveVoiceChat",null),t=Object(o.c)([b.a],t)}(v.Component),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ToggleMicrophone=function(e){l.f.VoiceStore.IsMicMuted()&&l.f.VoiceStore.IsOutputMuted()&&l.f.VoiceStore.ToggleOutputMuting(),l.f.VoiceStore.ToggleMicMuting(),e.stopPropagation()},t.prototype.render=function(){var e=l.f.VoiceStore.BNoMicAvailableForSession(),t=l.f.VoiceStore.BHasSampleRateTooHighInBrowser(),n=l.f.VoiceStore.IsMicMuted(),o="VoiceControlPanelButton ToggleMicrophoneButton",r="";return r=n?Object(C.d)("#VoiceChat_UnmuteMic"):Object(C.d)("#VoiceChat_MuteMic"),e&&(o+=" NoMicrophone",r=t?Object(C.d)("#VoiceChat_ChromeSampleRateTooHighMicExplainer"):Object(C.d)("#VoiceChat_DeniedMicrophoneAccess")),n&&(o+=" disabled"),v.createElement("button",{className:o,onClick:this.ToggleMicrophone,title:r},v.createElement(B.J,null),v.createElement(B.J,{className:"SVGIcon_Shadow"}))},Object(o.c)([O.a],t.prototype,"ToggleMicrophone",null),t=Object(o.c)([b.a],t)}(v.Component),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ToggleVoiceOutput=function(e){l.f.VoiceStore.IsOutputMuted()==l.f.VoiceStore.IsMicMuted()&&l.f.VoiceStore.ToggleMicMuting(),l.f.VoiceStore.ToggleOutputMuting(),e.stopPropagation()},t.prototype.render=function(){var e=l.f.VoiceStore.IsOutputMuted(),t="VoiceControlPanelButton ToggleVoiceOutputButton";e&&(t+=" disabled");var n="";return n=e?Object(C.d)("#VoiceChat_UnmuteSpeaker"):Object(C.d)("#VoiceChat_MuteSpeaker"),v.createElement("button",{className:t,onClick:this.ToggleVoiceOutput,title:n},v.createElement(B.y,null),v.createElement(B.y,{className:"SVGIcon_Shadow"}))},Object(o.c)([O.a],t.prototype,"ToggleVoiceOutput",null),t=Object(o.c)([b.a],t)}(v.Component),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.EndVoiceChat=function(e){l.f.VoiceStore.OnUserEndVoiceChat(),e.stopPropagation()},t.prototype.render=function(){return v.createElement("button",{className:"VoiceControlPanelButton chatEndVoiceChat",onClick:this.EndVoiceChat,title:Object(C.d)("#VoiceChat_Leave")},v.createElement(B.ob,null))},Object(o.c)([O.a],t.prototype,"EndVoiceChat",null),t=Object(o.c)([b.a],t)}(v.Component),fe=function(e){function t(t){var n=e.call(this,t)||this;return n.state={searchString:"",bFriendTabSearch:!1,bViewingIncomingInvites:!1,tabLabelWidth:0},n.m_tabLabelWidth=-1,n}return Object(o.d)(t,e),t.prototype.OnSearchInputRef=function(e){this.m_refSearchInput=e},t.prototype.StartSearchOnKeyPress=function(e){var t=this.state.bFriendTabSearch;this.setState({bFriendTabSearch:!0}),t&&this.m_refSearchInput&&this.m_refSearchInput.focus()},t.prototype.OnSearchInput=function(e){e.currentTarget.value!=this.state.searchString&&this.setState({searchString:e.currentTarget.value})},t.prototype.OnSearchSubmit=function(e){e.preventDefault();var t=this.GetNormalizedSearchString();if(t&&t.length){var n=this.props.friends.FriendGroupStore.all_friends.GetMembersMatchingSearch(t);n.length&&n[0].OpenChatDialog(Object(c.e)(this,e))}this.setState({searchString:""})},t.prototype.OnSearchSelection=function(){this.setState({searchString:""})},t.prototype.OnSearchKeyDown=function(e){27==e.keyCode&&(this.setState({searchString:""}),e.preventDefault(),e.currentTarget.blur(),this.setState({bFriendTabSearch:!1}),this.CollapseTabLabel())},t.prototype.OnClearSearch=function(){this.setState({searchString:""}),this.OnTabSearchClick()},t.prototype.OnSettingsClick=function(e){Object(x.a)(Object(c.e)(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.ToggleCollapseExpand=function(e){l.f.UIStore.SetFriendsListCollapsed(Object(c.e)(this,e),!this.props.collapsed)},t.prototype.OnDoFriendsListUpdate=function(e){var t=e.currentTarget.ownerDocument.defaultView,n=c.i.GetSecondsOutOfDate(),o=Object(C.m)(n,!0);Object(p.d)(t,Object(C.d)("#Friends_ConfirmUpdate_Title"),Object(C.d)("#Friends_ConfirmUpdate_Body",o),Object(C.d)("#Friends_ConfirmUpdate_Ok")).then((function(){c.i.PerformFriendsUIUpdate()})).catch((function(){}))},t.prototype.BindTabLabel=function(e){this.m_elTabLabel=e,this.UpdateWindowIcon()},t.prototype.UpdateWindowIcon=function(){if(this.m_elTabLabel&&void 0!==this.m_elTabLabel.ownerDocument.defaultView.SteamClient){var e=!1;this.props.chats.VoiceChat.IsAnyVoiceActive()&&(e=!0);var t=this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext).length>0;try{this.m_elTabLabel&&null!=this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon&&(e?this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon("voice"):t?this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon("messages"):this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon("steam"))}catch(e){}}},t.prototype.CollapseTabLabel=function(){var e=this;if(this.m_animationTabLabelCollapse&&this.m_animationTabLabelCollapse.Cancel(),this.state.bFriendTabSearch){n=1;var t=this.m_tabLabelWidth;this.setState({tabLabelWidth:n},(function(){e.m_animationTabLabelCollapse=new L.b(e,{tabLabelWidth:t},{msDuration:300,timing:"sine"}),e.m_animationTabLabelCollapse.Start()}))}else{var n=this.m_tabLabelWidth;this.setState({tabLabelWidth:n},(function(){e.m_animationTabLabelCollapse=new L.b(e,{tabLabelWidth:1},{msDuration:300,timing:"sine"}),e.m_animationTabLabelCollapse.Start()}))}},t.prototype.OnTabSearchClick=function(){this.m_tabLabelWidth<0&&(this.m_tabLabelWidth=this.m_elTabLabel.clientWidth),this.setState({bFriendTabSearch:!this.state.bFriendTabSearch}),this.CollapseTabLabel()},t.prototype.GetNormalizedSearchString=function(){return this.state.searchString&&this.state.searchString.trim().toLocaleLowerCase()},t.prototype.ToggleViewingIncomingInvites=function(){var e=this;this.setState({bViewingIncomingInvites:!this.state.bViewingIncomingInvites},(function(){e.state.bViewingIncomingInvites&&(l.f.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),l.f.FriendStore.ClanStore.EnsureInitialStateForClanInvites())}))},t.prototype.componentDidUpdate=function(){var e=l.f.FriendStore.FriendGroupStore.incoming_invites_group.member_count>0,t=l.f.FriendStore.ClanStore.clan_invites.length>0,n=l.f.FriendStore.FriendGroupStore.outgoing_invites_group.member_count>0;e||t||n||!this.state.bViewingIncomingInvites||this.setState({bViewingIncomingInvites:!1})},t.prototype.render=function(){var e=this.props.friends.self,t=this.GetNormalizedSearchString(),n=l.f.FriendStore.FriendGroupStore.incoming_invites_group.member_count>0,o=l.f.FriendStore.ClanStore.clan_invites.length>0,i=l.f.FriendStore.FriendGroupStore.outgoing_invites_group.member_count>0,a=l.f.FriendStore.FriendGroupStore.incoming_invites_group.member_count+l.f.FriendStore.ClanStore.clan_invites.length,s="friendRequestButton";this.state.bViewingIncomingInvites&&(s+=" friendRequestViewActive"),i&&0==a&&(s+=" friendRequestOutgoingOnly");var u=this.state.bFriendTabSearch,p="friendTab socialListTab activeTab";u&&(p+=" TabSearchActive");var m={};this.state.tabLabelWidth>0&&(m.width=this.state.tabLabelWidth+"px");var d=!1;this.props.popup&&(d=Object(c.f)(this.props.popup)!=l.a);var h=!1,f=0,_=!1,g="friendListButton friendSettingsButton friendsListNeedsUpdate no-drag";null!=c.i&&(h=c.i.BNeedsUpdate(),(f=c.i.GetSecondsOutOfDate())<432e3?h=!1:f>604800&&(g+=" friendsListVeryOutOfDate",_=!0));var b=this.props.chats.GetActiveVoiceChat(),y=!1;(this.props.chats.VoiceChat.IsAnyVoiceActive()||b)&&(y=!0),this.UpdateWindowIcon();var S=l.f.SettingsStore.FriendsSettings.bCompactFriendsList,O=this.props.collapsed,I="friendlist";return S&&(I+=" compactView"),h&&(I+=" needsUpdate"),O&&this.props.collapsible&&(I+=" collapsed"),v.createElement("div",{className:I},v.createElement("div",{className:"friendListHeaderContainer titleBarContainer"},this.props.popup&&r.a.IN_CLIENT&&v.createElement(te.a,{hideMinMax:d,popup:this.props.popup,className:"chatTitleBar"}),this.props.collapsible&&v.createElement("div",{className:"friendListCollapse no-drag"},v.createElement("div",{className:"friendListButton friendCollapseButton no-drag "+(O?"Collapsed":""),onClick:this.ToggleCollapseExpand},v.createElement(B.o,null))),v.createElement(ve,{popup:this.props.popup&&this.props.popup,currentUser:e}),v.createElement("div",{className:"friendListButtons"},h&&v.createElement("div",{className:g,onClick:this.OnDoFriendsListUpdate,title:_?Object(C.d)("#Tooltip_FriendsListUpdate_VeryOld"):Object(C.d)("#Tooltip_FriendsListUpdate")},v.createElement(B.U,null)),v.createElement("div",{className:"friendListButton friendSettingsButton no-drag",onClick:this.OnSettingsClick,title:Object(C.d)("#Tooltip_Settings")},v.createElement(B.ab,null))),v.createElement(k.TransitionGroup,null,y&&v.createElement(k.CSSTransition,{key:"activeVoiceControls1",classNames:"activevoice-anim",timeout:500},v.createElement(ue,{chats:this.props.chats}))),v.createElement(M,{FavoritesStore:this.props.friends.FavoritesStore}),v.createElement("div",{className:"socialTabSearchContainer"},v.createElement("div",{className:"socialTabContainer"},v.createElement("div",{className:p},v.createElement("div",{className:"tabLabel",style:m,ref:this.BindTabLabel,onClick:u?void 0:this.OnTabSearchClick},Object(C.d)("#tab_friends")),v.createElement("div",{className:"friendsTabButtonsContainer"},v.createElement("div",{className:"TabSearchButton",onClick:u?null:this.OnTabSearchClick},v.createElement(k.TransitionGroup,{className:"tabSearchTransitionGroup"},u&&v.createElement(k.CSSTransition,{className:"tabSearchTransition",key:"tabSearch",classNames:"tab-search-anim",timeout:500},v.createElement("div",{className:"socialSearchContainer"},v.createElement("form",{className:"socialInputContainer"+(u?" SearchActive":""),name:"friendSearchForm",onSubmit:this.OnSearchSubmit},v.createElement("div",{className:"inputContainer no-drag"},v.createElement("input",{id:"friendSearchInputID",className:"friendSearchInput",autoFocus:!0,type:"text",name:"friendSearch",placeholder:Object(C.d)("#SearchFriends"),value:this.state.searchString,onInput:this.OnSearchInput,onKeyDown:this.OnSearchKeyDown,autoComplete:"off",ref:this.OnSearchInputRef}),v.createElement("div",{className:"friendSearchClear",onClick:this.OnClearSearch},v.createElement(B.sb,null))))))),v.createElement("div",{className:"searchIconButton",onClick:this.OnTabSearchClick,title:Object(C.d)("#Tooltip_SearchFriends")},v.createElement(B.G,null))),(n||o||i)&&v.createElement("div",{className:s,onClick:this.ToggleViewingIncomingInvites,title:Object(C.i)("#Tooltip_FriendRequest",a)},v.createElement(B.v,null),a>0&&v.createElement("div",{className:"requestsNumber"},a)),v.createElement(R.b,{href:r.a.COMMUNITY_BASE_URL+"friends/add"},v.createElement("div",{className:"friendListButton addFriendButton no-drag",title:Object(C.d)("#Tooltip_AddFriend")},v.createElement(B.a,null))))))),v.createElement("div",{className:"disconnectBlocker"})),v.createElement(ye,{friends:this.props.friends,chats:this.props.chats,searchString:t,fnOnSearchSelection:this.OnSearchSelection,onStartSearch:this.StartSearchOnKeyPress,browserContext:this.props.browserContext,bViewingIncomingInvites:this.state.bViewingIncomingInvites,onClose:this.ToggleViewingIncomingInvites}),v.createElement("div",{className:"friendListFooter"},v.createElement(be,null)))},Object(o.c)([O.a],t.prototype,"OnSearchInputRef",null),Object(o.c)([O.a],t.prototype,"StartSearchOnKeyPress",null),Object(o.c)([O.a],t.prototype,"OnSearchInput",null),Object(o.c)([O.a],t.prototype,"OnSearchSubmit",null),Object(o.c)([O.a],t.prototype,"OnSearchSelection",null),Object(o.c)([O.a],t.prototype,"OnSearchKeyDown",null),Object(o.c)([O.a],t.prototype,"OnClearSearch",null),Object(o.c)([O.a],t.prototype,"OnSettingsClick",null),Object(o.c)([O.a],t.prototype,"ToggleCollapseExpand",null),Object(o.c)([O.a],t.prototype,"OnDoFriendsListUpdate",null),Object(o.c)([O.a],t.prototype,"BindTabLabel",null),Object(o.c)([O.a],t.prototype,"CollapseTabLabel",null),Object(o.c)([O.a],t.prototype,"OnTabSearchClick",null),Object(o.c)([O.a],t.prototype,"ToggleViewingIncomingInvites",null),t=Object(o.c)([b.a],t)}(v.Component),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=r.a.COMMUNITY_BASE_URL+"groups/SteamClientBeta/discussions/3/";return l.f.IsInBeta()?v.createElement("div",{className:"betaFeedbackLabel"},Object(C.k)("#GiveFeedbackToSteam_Desc",v.createElement(R.b,{href:e,className:"betaFeedbackAnchor"}," ",Object(C.d)("#GiveFeedbackToSteam_URL")," "))):null},t}(v.Component),ge=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bShowChangeLogViolator:c.i.UIDisplayPrefs.nChangeLogDismissed<oe.Posts().length},n}return Object(o.d)(t,e),t.prototype.OpenChangeLog=function(e){var t;c.i.SetUIDisplayPref("nChangeLogDismissed",oe.Posts().length),this.setState({bShowChangeLogViolator:!1}),t=e.currentTarget.ownerDocument.defaultView,Object(V.c)(v.createElement(re,null),t,"ChangeLog",{strTitle:Object(C.d)("#changeLog_Title"),popupWidth:640,popupHeight:680},Object(c.g)(t))},t.prototype.render=function(){var e=this.state.bShowChangeLogViolator,t=0;return e&&(t=oe.Posts().length-(c.i.UIDisplayPrefs.nChangeLogDismissed||7)),oe.Posts().length&&Date.now()-Number(new Date(oe.Posts()[0].date))>36288e5?null:v.createElement("div",{className:"changeLog"+(e?" showViolator":""),onClick:this.OpenChangeLog,title:e?Object(C.d)("#changeLog_Value_Button",t):Object(C.d)("#changeLog_Button")},v.createElement(B.Z,null),e&&v.createElement("div",{className:"changeLogViolator"},t))},Object(o.c)([O.a],t.prototype,"OpenChangeLog",null),t}(v.Component),be=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.OnSettingsZooClick=function(e){0},t.prototype.render=function(){return v.createElement(v.Fragment,null,v.createElement("div",{className:"flexRowCentered"},!1,v.createElement(_e,null),v.createElement(ge,null)))},Object(o.c)([O.a],t.prototype,"OnSettingsZooClick",null),t=Object(o.c)([b.a],t)}(v.Component),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnShowContextMenu=function(e){return Object(m.a)(Object(c.e)(this,e),e,this.SetPendingPersonaNameCallback)},t.prototype.ShowCurrentUserProfile=function(e){var t=this.props.currentUser.GetCommunityProfileURL();Object(R.e)(e,t),e.stopPropagation()},t.prototype.SetPendingPersonaNameCallback=function(e){29!==e&&(this.props.currentUser.mutable_persona.m_bPlayerNamePending=22===e)},t.prototype.render=function(){var e=this.props.currentUser,t="currentUserContainer "+Object(ee.d)(e.persona);l.f.FriendStore.GetUserDoNotDisturb()&&(t+=" userDoNotDisturb");var n=null;l.f.FriendStore.BIsInvisibleMode()&&(n=function(){return Object(C.d)("#PersonaStateInvisible")});this.props.popup&&(Object(c.f)(this.props.popup),l.a);var o=null;e.persona.HasCurrentGameRichPresence()?o=function(){return e.persona.GetCurrentGameRichPresence()}:e.persona.m_broadcastAccountId&&(o=function(){return e.GetBroadcastDescription()});var r=e.persona.is_ingame&&1==l.f.UserStore.PrivacySettings.privacy_state_ownedgames,i=null,a=null,s=l.f.SettingsStore.FriendsSettings.bAnimatedAvatars,u=e.GetEquippedProfileItems();u&&(i=u.animated_avatar,a=u.avatar_frame);var p=v.createElement("div",{className:"currentUserAvatar"},v.createElement(E.b,{loopDuration:s?"Infinite":"None",size:"Medium",persona:e.persona,animatedAvatar:i,avatarFrame:a,onClick:this.ShowCurrentUserProfile}));return v.createElement("div",{className:t},v.createElement("svg",{className:"statusHeaderGlow",width:"100%",height:"132",xmlns:"http://www.w3.org/2000/svg"},v.createElement("defs",null,v.createElement("radialGradient",{id:"exampleGradient",cx:"50%",cy:"50%",r:"50%",fx:"35%",fy:"30%"},v.createElement("stop",{offset:"10%",stopColor:"gold"}),v.createElement("stop",{offset:"95%",stopColor:"green"}))),v.createElement("ellipse",{cx:"5%",cy:"28%",rx:"65%",ry:"60%",fill:"url(#exampleGradient)"})),v.createElement("div",{className:"AvatarAndUser",onContextMenu:this.OnShowContextMenu},v.createElement(Te,{friend:e,context:{chatContext:"friendslist"},onContextMenu:this.OnShowContextMenu},p),v.createElement(ae.a,{className:"labelHolder",persona:e.persona,bIsSelf:!0,eFriendRelationship:e.efriendrelationship,strNickname:e.nickname,bParenthesizeNicknames:l.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames,bCompactView:l.f.SettingsStore.FriendsSettings.bCompactFriendsList,bHideSnooze:!0,renderStatus:n,renderRichPresence:o,onContextMenu:this.OnShowContextMenu,bDNDSet:l.f.FriendStore.GetUserDoNotDisturb(),bHasGamePrivacy:r})))},Object(o.c)([O.a],t.prototype,"OnShowContextMenu",null),Object(o.c)([O.a],t.prototype,"ShowCurrentUserProfile",null),Object(o.c)([O.a],t.prototype,"SetPendingPersonaNameCallback",null),t=Object(o.c)([b.a],t)}(v.Component),ye=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bScrolledFromTop:!1},n}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"frame",{get:function(){return this.m_elFriendsListContent},enumerable:!1,configurable:!0}),t.prototype.OnContextMenu=function(e){var t=this.props.searchString&&this.props.searchString.length>0;this.props.bViewingIncomingInvites||t||Object(m.c)(Object(c.e)(this,e),null,e)},t.prototype.BindFriendsListContent=function(e){this.m_elFriendsListContent=e},t.prototype.OnFriendsListKeyDown=function(e){e.ctrlKey||e.altKey||e.metaKey||e.key.length>1||this.props.onStartSearch(e)},t.prototype.OnFriendsListScrollRef=function(e){this.m_elFriendsListScroll=e},t.prototype.ScrollToTop=function(){this.m_elFriendsListScroll&&(this.m_elFriendsListScroll.scrollTop=0)},t.prototype.OnScrollFriendsList=function(e){var t=e.currentTarget.scrollTop>10;t!=this.state.bScrolledFromTop&&this.setState({bScrolledFromTop:t})},t.prototype.OnAcceptClanInvite=function(e,t){var n=e.currentTarget.ownerDocument.defaultView;l.f.FriendStore.ClanStore.RespondToClanInvite(t,!0).then((function(e){e||Object(p.c)(n,Object(C.d)("#Friend_AcceptClanInvite"),Object(C.d)("#Friend_AcceptClanInvite_Error"))}))},t.prototype.OnDeclineClanInvite=function(e,t){var n=e.currentTarget.ownerDocument.defaultView;l.f.FriendStore.ClanStore.RespondToClanInvite(t,!1).then((function(e){e||Object(p.c)(n,Object(C.d)("#Friend_DeclineClanInvite"),Object(C.d)("#Friend_DeclineClanInvite_Error"))}))},t.prototype.render=function(){var e,t=this,n=this.props.searchString&&this.props.searchString.length>0,i=this.props.bViewingIncomingInvites,a={searchString:this.props.searchString,fnOnSearchSelection:this.props.fnOnSearchSelection};if(this.props.friends.self.is_ready)if(i){var s=l.f.FriendStore.ClanStore.clan_invites.length,c=(ne.a.InitFromAccountID(l.f.FriendStore.self.accountid),[]);if(s)for(var u=function(e){var n=e.steamid,o=void 0;o=e.BIsOGG()?r.a.COMMUNITY_BASE_URL+"app/"+e.GetOGGAppID():r.a.COMMUNITY_BASE_URL+"gid/"+n.ConvertTo64BitString(),c.push(v.createElement("div",{className:"clanInviteContainer",key:"clan_invite_"+n.GetAccountID()},v.createElement(R.b,{href:o},v.createElement("div",{className:"clanAvatar"},v.createElement("img",{className:"clanAvatarIcon",src:e.avatar_url_medium})),v.createElement("div",{className:"clanName"},e.name,v.createElement("div",{className:"clanDetails displayRow"},v.createElement("div",{className:"displayRow statMembersTotal"},v.createElement("div",{className:"statCircle"}),e.member_count," Members"),e.users_online>0&&v.createElement("div",{className:"displayRow statMembersOnline",title:Object(C.i)("#Chat_Members_Online_Tooltip",e.users_online)},v.createElement("div",{className:"statCircle"}),e.users_online),e.users_ingame>0&&v.createElement("div",{className:"displayRow statMembersInGame",title:Object(C.i)("#Chat_Members_InGame_Tooltip",e.users_ingame)},v.createElement("div",{className:"statCircle"}),e.users_ingame)))),v.createElement("div",{className:"clanActionButtons"},v.createElement("div",{className:"displayColumn",title:Object(C.d)("#FriendGroup_Tip_Accept_Invite")},v.createElement(U.B,{onClick:function(e){t.OnAcceptClanInvite(e,n)}},Object(C.d)("#Button_Accept"))),v.createElement("div",{className:"displayColumn",title:Object(C.d)("#FriendGroup_Tip_Decline_Invite")},v.createElement(U.B,{onClick:function(e){t.OnDeclineClanInvite(e,n)}},Object(C.d)("#Button_Decline"))))))},p=0,m=l.f.FriendStore.ClanStore.clan_invites;p<m.length;p++){u(m[p])}e=v.createElement(v.Fragment,null,s>0&&!n&&v.createElement(v.Fragment,null,v.createElement("div",{className:"clanInvitesGroupContainer"},v.createElement("div",{className:"clanInviteTitle"},Object(C.d)("#Friend_PendingClanInvites")),c)),v.createElement(Ie,Object(o.a)({group:this.props.friends.FriendGroupStore.incoming_invites_group,collapsed:!1},a,{onClose:this.props.onClose})),v.createElement(Ie,Object(o.a)({group:this.props.friends.FriendGroupStore.outgoing_invites_group,collapsed:!1},a,{onClose:this.props.onClose})))}else if(n)e=v.createElement(Ie,Object(o.a)({group:this.props.friends.FriendGroupStore.all_friends,collapsed:!1},a));else{var d=this.props.friends.FriendGroupStore.user_groups.map((function(e){return v.createElement(Ie,Object(o.a)({group:e,key:e.id,groupDisplayPrefs:t.props.friends.FriendGroupStore.groupDisplayPrefs},a))})),h=this.props.friends.FriendGroupStore.default_groups.map((function(e){return v.createElement(Ie,Object(o.a)({group:e,key:e.id,groupDisplayPrefs:t.props.friends.FriendGroupStore.groupDisplayPrefs},a))})),f=!1;this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext).length&&(f=!0),e=v.createElement(v.Fragment,null,f&&v.createElement("div",{className:"recentChatsGroup unreadChatsGroup"},v.createElement(Ae,{friendChatStore:this.props.chats.FriendChatStore,browserContext:this.props.browserContext}),!1),v.createElement(Oe,null),d,h)}else e=void 0;var _=l.f.SettingsStore.FriendsSettings.bCompactFriendsList;return v.createElement("div",{className:"FriendsListContent"+(_?" CompactFriendsList":""),ref:this.BindFriendsListContent},v.createElement(ce.b,null),v.createElement(ke,{browserContext:this.props.browserContext,bScrolledFromTop:this.state.bScrolledFromTop&&!n,onClick:this.ScrollToTop}),v.createElement("div",{className:"friendlistListContainer",onContextMenu:this.OnContextMenu,tabIndex:0,onKeyDown:this.OnFriendsListKeyDown,ref:this.OnFriendsListScrollRef,onScroll:this.OnScrollFriendsList},v.createElement("div",{className:"listContentContainer"},e,v.createElement("div",{className:"disconnectBlocker"}))),v.createElement(ce.a,null),v.createElement(Se,{friends:this.props.friends,chats:this.props.chats,parent:this}))},Object(o.c)([O.a],t.prototype,"OnContextMenu",null),Object(o.c)([O.a],t.prototype,"BindFriendsListContent",null),Object(o.c)([O.a],t.prototype,"OnFriendsListKeyDown",null),Object(o.c)([O.a],t.prototype,"OnFriendsListScrollRef",null),Object(o.c)([O.a],t.prototype,"ScrollToTop",null),Object(o.c)([O.a],t.prototype,"OnScrollFriendsList",null),t=Object(o.c)([b.a],t)}(v.Component),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bMouseOver=!1,n.state={nChatRoomListContainerHeight:c.i.UIDisplayPrefs.nChatRoomListHeightPx,nChatRoomListContainerMaxHeight:c.i.UIDisplayPrefs.nChatRoomListHeightPx,bChatRoomListCollapsed:c.i.UIDisplayPrefs.bChatRoomListCollapsed,nChatRoomListPreCollapseHeight:c.i.UIDisplayPrefs.nChatRoomListHeightPx,bChatRoomListResizing:!1},n}return Object(o.d)(t,e),t.prototype.UpdateChatSectionSize=function(){var e=this;if(Object(ie.a)(this.m_elChatSection,"m_elChatRoomListContainer not set"),this.m_bMouseOver)return this.m_iTimeoutUpdateChatSectionSize&&this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),void(this.m_iTimeoutUpdateChatSectionSize=this.m_window.setTimeout((function(){e.m_iTimeoutUpdateChatSectionSize=void 0,e.UpdateChatSectionSize()}),500));var t=this.m_elChatSection.maximumHeight,n=this.m_elChatSection.minimumHeight;if(this.m_elChatRoomListContainer.style.minHeight=n+"px",this.state.nChatRoomListContainerMaxHeight>t){this.m_animationChatSectionShrink&&this.m_animationChatSectionShrink.Cancel();var o=this.state.nChatRoomListContainerMaxHeight,r=t;this.setState({nChatRoomListContainerMaxHeight:o},(function(){e.m_animationChatSectionShrink=new L.b(e,{nChatRoomListContainerHeight:Object(P.a)(e.state.nChatRoomListContainerHeight,n,t),nChatRoomListContainerMaxHeight:r},{msDuration:300,timing:"sine"}),e.m_animationChatSectionShrink.Start()}))}else this.setState({nChatRoomListContainerMaxHeight:t})},t.prototype.OnChatSectionMutation=function(e,t){var n=this;this.m_iTimeoutUpdateChatSectionSize&&this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),this.m_iTimeoutUpdateChatSectionSize=this.m_window.setTimeout((function(){n.m_iTimeoutUpdateChatSectionSize=void 0,n.UpdateChatSectionSize()}),1e3)},t.prototype.BindChatRoomTitleContainer=function(e){this.m_elChatRoomTitleContainer=e},t.prototype.BindChatRoomListContainer=function(e){e&&(this.m_elChatRoomListContainer=e,this.UpdateChatSectionSize())},t.prototype.BindChatSection=function(e){this.m_observerChatSection&&(this.m_observerChatSection.disconnect(),this.m_observerChatSection=null),e&&(this.m_elChatSection=e,this.m_window=e.div.ownerDocument.defaultView,this.m_observerChatSection=new MutationObserver(this.OnChatSectionMutation),this.m_observerChatSection.observe(e.div,{childList:!0,subtree:!0}))},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.m_iGrabberBarInitialGrabOffset=e.clientY-this.m_elChatRoomTitleContainer.getBoundingClientRect().top,this.setState({nChatRoomListPreCollapseHeight:c.i.UIDisplayPrefs.nChatRoomListHeightPx}),t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterChatRoomListDragEvents)},t.prototype.OnGrabberTouchStart=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.m_iGrabberBarInitialGrabOffset=e.touches[0].clientY-this.m_elChatRoomTitleContainer.getBoundingClientRect().top,t.addEventListener("touchmove",this.HandleTouchMove),t.addEventListener("touchend",this.UnregisterChatRoomListDragEvents)},t.prototype.HandleTouchMove=function(e){e.touches.length>=1&&this.InternalAdjustChatRoomListContainerOnDrag(e.touches[0].clientY)},t.prototype.HandleMouseMove=function(e){this.InternalAdjustChatRoomListContainerOnDrag(e.clientY)},t.prototype.OnMouseEnter=function(e){this.m_bMouseOver=!0},t.prototype.OnMouseLeave=function(e){this.m_bMouseOver=!1},t.prototype.InternalAdjustChatRoomListContainerOnDrag=function(e){if(this.props.parent&&this.props.parent.frame){var t=this.props.parent.frame.getBoundingClientRect(),n=t.top,o=this.m_iGrabberBarInitialGrabOffset,r=t.height-(this.m_elChatRoomTitleContainer.getBoundingClientRect().height-o),i=e-n;i<0?i=0:i>r&&(i=r);var a=r-i;a=Object(P.a)(a,this.m_elChatSection.minimumHeight,this.m_elChatSection.maximumHeight),this.setState({nChatRoomListContainerHeight:a}),this.setState({bChatRoomListCollapsed:!(this.state.nChatRoomListContainerHeight>0)}),c.i.SetUIDisplayPref("bChatRoomListCollapsed",!(this.state.nChatRoomListContainerHeight>0)),this.setState({bChatRoomListResizing:!0})}},t.prototype.ToggleChatsList=function(){this.state.bChatRoomListCollapsed&&this.setState({nChatRoomListContainerHeight:this.state.nChatRoomListPreCollapseHeight}),this.setState({bChatRoomListCollapsed:!this.state.bChatRoomListCollapsed}),c.i.SetUIDisplayPref("bChatRoomListCollapsed",!this.state.bChatRoomListCollapsed)},t.prototype.UnregisterChatRoomListDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("touchmove",this.HandleTouchMove),e.view.removeEventListener("mouseup",this.UnregisterChatRoomListDragEvents),e.view.removeEventListener("touchend",this.UnregisterChatRoomListDragEvents),this.state.nChatRoomListContainerHeight<1?c.i.SetUIDisplayPref("nChatRoomListHeightPx",this.state.nChatRoomListPreCollapseHeight):(this.setState({nChatRoomListPreCollapseHeight:this.state.nChatRoomListContainerHeight}),c.i.SetUIDisplayPref("nChatRoomListHeightPx",this.state.nChatRoomListContainerHeight)),this.m_iGrabberBarInitialGrabOffset=null,this.setState({bChatRoomListResizing:!1})},t.prototype.OnCreateChatRoom=function(e){Object(F.c)(Object(c.e)(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.render=function(){var e={height:this.state.bChatRoomListCollapsed?0:this.state.nChatRoomListContainerHeight+"px",maxHeight:this.state.bChatRoomListCollapsed?0:this.state.nChatRoomListContainerMaxHeight+"px"},t=this.props.chats.currentChatRoomGroups,n=!1,o="FriendsListChatSection ChatRoomListContainerParent";if(this.props.chats.chat_group_list_ready)for(var r=0,i=t;r<i.length;r++){i[r].hasUnreadChatMessage&&(n=!0)}return this.state.bChatRoomListCollapsed&&(o+=" Collapsed"),this.state.bChatRoomListResizing&&(o+=" ChatListResizing"),n&&(o+=" HasUnreadChats"),v.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},v.createElement("div",{className:"friendsListSectionTitle chatSectionTitle",ref:this.BindChatRoomTitleContainer},this.state.bChatRoomListCollapsed&&n&&v.createElement(I.b,null),v.createElement("div",{className:"ToggleGroupChatList",onClick:this.ToggleChatsList,title:this.state.bChatRoomListCollapsed?Object(C.d)("#Tooltip_ChatsExpand"):Object(C.d)("#Tooltip_ChatsCollapse")},v.createElement(B.o,{angle:-90})),v.createElement("div",{className:"voiceRoomDragBar",onMouseDown:this.OnGrabberMouseDown,onTouchStart:this.OnGrabberTouchStart},v.createElement("div",{className:"groupChatSectionTitle"},Object(C.d)("#tab_chats"))),v.createElement("button",{className:"createChatRoomButton",onClick:this.OnCreateChatRoom,title:Object(C.d)("#Tooltip_CreateGroupChat")},v.createElement(B.M,null)),v.createElement("div",{className:"disconnectBlocker"})),v.createElement(ce.b,null),v.createElement("div",{className:"chatRoomListContainer",style:e,ref:this.BindChatRoomListContainer},v.createElement(I.a,{friends:this.props.friends,chats:this.props.chats,ref:this.BindChatSection})),v.createElement(ce.a,null))},Object(o.c)([O.a],t.prototype,"UpdateChatSectionSize",null),Object(o.c)([O.a],t.prototype,"OnChatSectionMutation",null),Object(o.c)([O.a],t.prototype,"BindChatRoomTitleContainer",null),Object(o.c)([O.a],t.prototype,"BindChatRoomListContainer",null),Object(o.c)([O.a],t.prototype,"BindChatSection",null),Object(o.c)([O.a],t.prototype,"OnGrabberMouseDown",null),Object(o.c)([O.a],t.prototype,"OnGrabberTouchStart",null),Object(o.c)([O.a],t.prototype,"HandleTouchMove",null),Object(o.c)([O.a],t.prototype,"HandleMouseMove",null),Object(o.c)([O.a],t.prototype,"OnMouseEnter",null),Object(o.c)([O.a],t.prototype,"OnMouseLeave",null),Object(o.c)([O.a],t.prototype,"ToggleChatsList",null),Object(o.c)([O.a],t.prototype,"UnregisterChatRoomListDragEvents",null),Object(o.c)([O.a],t.prototype,"OnCreateChatRoom",null),t=Object(o.c)([b.a],t)}(v.Component),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetDragDropProps=function(e){void 0===e&&(e=!0);var t={rgAcceptedTypes:[]};return e&&(t.fnDragEnter=this.OnDragEnter,t.fnDragLeave=this.OnDragLeave,t.fnDrop=this.OnDrop,t.rgAcceptedTypes=["friend"]),t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t},t.prototype.OnDragStart=function(e){var t=c.i.DragDropManager.GetDragData();if(t&&"friend"==t.type){var n=t;n.group=this.GetGroup(),this.setState({friendDraggedOut:n.friend})}},t.prototype.OnDragEnd=function(e){this.state.friendDraggedOut&&this.setState({friendDraggedOut:null})},t.prototype.OnDragEnter=function(e,t){Object(ie.a)(e&&"friend"==e.type,"Invalid data type passed to FriendGroupDragDrop.OnDragEnter");var n=e,o=n.friend,r=n.group,i=this.GetGroup();return(!i||r==i||!this.GetGroup().HasMember(o.accountid)||n.is_favorite||this.GetGroup().accepts_group_removals&&r.modifiable)&&o.is_friend&&this.state.friendDrag!=o&&this.setState({friendDrag:o}),!0},t.prototype.ResetDragState=function(){this.setState({friendDrag:null})},t.prototype.OnDragLeave=function(){this.state.friendDrag&&this.ResetDragState()},t.prototype.OnDrop=function(e,t){var n=this;Object(ie.a)(e&&"friend"==e.type,"Invalid data type passed to FriendGroupDragDrop.OnDrop");var o=e;if(o.group==this.GetGroup())this.setState({friendDraggedOut:null});else{var r=this.state.friendDrag,i=function(){n.state.friendDrag&&n.state.friendDrag==r&&n.ResetDragState()};this.PerformDropAction(o).then(i).catch(i)}},Object(o.c)([O.a],t.prototype,"OnDragStart",null),Object(o.c)([O.a],t.prototype,"OnDragEnd",null),Object(o.c)([O.a],t.prototype,"OnDragEnter",null),Object(o.c)([O.a],t.prototype,"OnDragLeave",null),Object(o.c)([O.a],t.prototype,"OnDrop",null),t}(v.Component),Oe=Object(b.a)((function(e){if(!l.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame)return null;var t=l.f.FriendStore.FriendGroupStore.game_groups,n=t.map((function(e){return v.createElement(Me,{key:e.id,group:e,bSingletonGroup:!1,bOtherGroups:!0,groupDisplayPrefs:l.f.FriendStore.FriendGroupStore.groupDisplayPrefs})})),o=l.f.FriendStore.FriendGroupStore.singleton_game_group;return o&&n.push(v.createElement(Me,{key:"singleton",group:o,bSingletonGroup:!0,bOtherGroups:t.length>0,groupDisplayPrefs:l.f.FriendStore.FriendGroupStore.groupDisplayPrefs})),v.createElement(v.Fragment,null,n)})),Ie=function(e){function t(t){var n=e.call(this,t)||this;return n.m_actions=g.B.map(),n.state={bLocalCollapsed:n.props.collapsed,bSortOfflineByRecent:!1},n}return Object(o.d)(t,e),t.prototype.GetGroup=function(){return this.props.group},t.prototype.PerformDropAction=function(e){var t=e.friend,n=e.group,o=this.props.group;return e.is_favorite||c.i.DragDropManager.SetDropConsumed(),l.f.FriendStore.FriendGroupStore.TransferFriendFromToGroup(t,n,o)},t.prototype.ToggleCollapsed=function(){this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(this.props.group.unique_id):this.setState({bLocalCollapsed:!this.state.bLocalCollapsed})},t.prototype.IsCollapsed=function(){return this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.GetUserGroupCollapsed(this.props.group.unique_id):this.state.bLocalCollapsed},t.prototype.IsInviteGroup=function(){return this.props.group.m_eDisplayType==s.c.eIncomingInvites},t.prototype.OnContextMenu=function(e){(this.props.group.modifiable||this.props.group.accepts_group_removals)&&Object(m.c)(Object(c.e)(this,e),this.props.group,e)},t.prototype.OnFriendSelected=function(e){this.props.friendSelectAction?this.props.friendSelectAction(e):(e.OpenChatDialog(Object(c.e)(this)),this.props.fnOnSearchSelection&&this.props.fnOnSearchSelection())},t.prototype.OnAcceptInvite=function(e,t){Object(ie.a)(this.IsInviteGroup(),"accept invite on non-invite group");var n=this.m_actions.get(t.accountid);n&&"accept"==n.action?this.m_actions.delete(t.accountid):this.m_actions.set(t.accountid,{friend:t,action:"accept"})},t.prototype.OnDeclineInvite=function(e,t){Object(ie.a)(this.IsInviteGroup(),"decline invite on non-invite group");var n=this.m_actions.get(t.accountid);!n||"decline"!=n.action&&"block"!=n.action?this.m_actions.set(t.accountid,{friend:t,action:"decline"}):this.m_actions.delete(t.accountid)},t.prototype.OnBlockInvite=function(e,t){Object(ie.a)(this.IsInviteGroup(),"block invite on non-invite group"),e?this.m_actions.set(t.accountid,{friend:t,action:"block"}):this.m_actions.set(t.accountid,{friend:t,action:"decline"})},t.prototype.AcceptInvite=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,l.f.FriendStore.SendFriendInvite(t)];case 1:return n=o.sent(),r=n.eResult,3!=(i=n.eFriendRelationship)&&Object(m.f)(e,r,i,t.display_name),[2]}}))}))},t.prototype.DeclineInvite=function(e,t){l.f.FriendStore.RemoveFriend(t).then((function(n){1!=n&&Object(p.c)(e,Object(C.d)("#Friend_Menu_IgnoreIncomingInvite"),Object(C.d)("#Friend_IgnoreIncomingInvite_Error",t.display_name))}))},t.prototype.BlockInvite=function(e,t){l.f.FriendStore.BlockPlayer(t).then((function(n){5!=n&&Object(p.c)(e,Object(C.d)("#Friend_Menu_BlockIncomingInvite"),Object(C.d)("#Friend_BlockIncomingInvite_Error",t.display_name))}))},t.prototype.OnConfirmChanges=function(e){var t=this;Object(ie.a)(this.IsInviteGroup(),"confirm changes on non-invite group");var n=e.currentTarget.ownerDocument.defaultView;this.m_actions.forEach((function(e){"accept"==e.action?t.AcceptInvite(n,e.friend):"decline"==e.action?t.DeclineInvite(n,e.friend):"block"==e.action?t.BlockInvite(n,e.friend):console.log("unknown action "+e.action)}))},t.prototype.OnIgnoreAllInvites=function(e){var t=this;Object(ie.a)(this.IsInviteGroup(),"ignore all invites on non-invite group");var n=e.currentTarget.ownerDocument.defaultView;Object(p.d)(n,Object(C.d)("#FriendGroup_ConfirmAllIgnore_Title"),Object(C.d)("#FriendGroup_ConfirmAllIgnore_Body"),Object(C.d)("#FriendGroup_ConfirmAllIgnore_OK")).then((function(){for(var e=0,o=t.props.group.member_list;e<o.length;e++){var r=o[e];t.DeclineInvite(n,r)}})).catch((function(){}))},t.prototype.OnCloseInvites=function(){Object(ie.a)(this.IsInviteGroup(),"close invites on non-invite group"),this.props.onClose()},t.prototype.ToggleOfflineSortMethod=function(){this.setState({bSortOfflineByRecent:!this.state.bSortOfflineByRecent})},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.friendGroup==this.props.group||(this.m_FriendRenderContext={friendGroup:this.props.group,chatContext:"friendslist"}),this.m_FriendRenderContext},t.prototype.render=function(){var e=this,t=this.props.searchString&&this.props.searchString.length>0,n=t,i=this.IsCollapsed()&&!t&&!this.state.friendDrag,c=[],p=this.IsInviteGroup(),m=this.props.group.m_eDisplayType==s.c.eOfflineOnly,d=!1;if(!i){var h=!1,f=void 0;if(f=this.props.searchString&&this.props.searchString.length?this.props.group.GetMembersMatchingSearch(this.props.searchString):this.props.group.member_list,this.state.friendDrag&&(this.props.group.HasMember(this.state.friendDrag.accountid)?h=!0:f=f.concat(this.state.friendDrag).sort(a.b.DefaultFriendSortComparator)),m&&this.state.bSortOfflineByRecent&&(f=this.props.group.member_list_unsorted.slice().sort(a.b.FriendSortByLastSeenComparator),d=!0),p){var _=l.f.FriendStore.FriendGroupStore.incoming_invites_group;f=f.slice().sort((function(e,t){var n=_.map_steamid_to_mutual_friends.get(e.steamid64),o=_.map_steamid_to_mutual_friends.get(t.steamid64),r=(n?n.size:0)-(o?o.size:0);return r>0||0==r&&e.accountid>t.accountid?-1:1}))}var g=null;!t&&this.props.group.should_filter_categorized_friends&&(g=l.f.FriendStore.FriendGroupStore.categorized_friend_set);for(var b=function(t){if(y.props.setExcludedFriends&&y.props.setExcludedFriends.has(t.accountid))return"continue";if(g&&g.has(t.accountid))return"continue";var n=4==t.efriendrelationship,r=y.state.friendDrag!=t||h?"":"dropGhost";y.state.friendDraggedOut==t&&y.state.friendDrag!=t&&(r+=" dragOriginGhost");var i=void 0,a=void 0,s=void 0;if(p){var l=y.m_actions.get(t.accountid);i=l&&"accept"==l.action?"bright":"dim",a=!l||"decline"!=l.action&&"block"!=l.action?"dim":"bright",s=!l||"decline"!=l.action&&"block"!=l.action?"":" declined",l&&"accept"==l.action?r+="bright":!l||"decline"!=l.action&&"block"!=l.action||(r+="dim")}c.push(v.createElement(k.CSSTransition,{className:p?"friendInviteContainer"+s:"friendCategoryContainer",key:t.accountid,classNames:"friend-anim",timeout:320},v.createElement("div",null,v.createElement(je,Object(o.a)({friend:t,key:t.accountid,className:r,context:y.GetFriendRenderContext(),action:n?function(){}:y.OnFriendSelected},y.props.friendProps,{bFriendsListEntry:!0})),p&&v.createElement("div",{className:"friendInviteButtons"},v.createElement("div",{className:"friendInviteButton acceptFriendInvite "+i,onClick:function(n){return e.OnAcceptInvite(n,t)},title:Object(C.d)("#FriendGroup_Tip_Accept")},v.createElement(B.h,null)),v.createElement("div",{className:"friendInviteButton declineFriendInvite "+a,onClick:function(n){return e.OnDeclineInvite(n,t)},title:Object(C.d)("#FriendGroup_Tip_Decline")},v.createElement(B.sb,null))),p&&v.createElement("div",{className:"friendInviteBlockContainer"},v.createElement(U.e,{onChange:function(n){return e.OnBlockInvite(n,t)}}),v.createElement("div",{className:"displayColumn"},v.createElement("div",{className:"blockCommunicationLabel"},Object(C.d)("#FriendGroup_IncomingInvites_Block")),v.createElement("div",{className:"blockCommunicationLabel subtitle"},Object(C.d)("#FriendGroup_IncomingInvites_Block_desc")))))))},y=this,S=0,O=f;S<O.length;S++){b(O[S])}}var I="friendGroup",E=!1,w=!1;if(n&&(I+=" noTransitions"),this.props.group.modifiable?(I+=" taggedGroup ",E=!0):this.props.group.m_eDisplayType==s.c.eOnlineOnlyNotInGame?(I+=" onlineFriends ",!0):this.props.group.m_eDisplayType==s.c.eOfflineOnly?(I+=" offlineFriends ",w=!0):this.IsInviteGroup()&&(I+=" friendRequests "),t&&(!c||!c.length))return v.createElement("div",{className:"friendSearchNoResultsContainer"},v.createElement("div",null,Object(C.d)("#FriendGroup_Search_NoResults",this.props.searchString)),v.createElement("div",{className:"searchSteamSuggestion"},Object(C.d)("#FriendGroup_Search_CantFind")),v.createElement(R.b,{href:r.a.COMMUNITY_BASE_URL+"search/users"},Object(C.d)("#FriendGroup_Search_Link")));if(0==c.length&&!this.IsCollapsed())return null;var M=0!=this.m_actions.size,D="SortByRecent";return d&&(D+=" Recent"),i&&(D+=" Collapsed"),v.createElement(u.a,Object(o.a)({className:I},this.GetDragDropProps(this.props.group.modifiable||this.props.group.accepts_group_removals)),v.createElement("div",{className:"groupHeaderContainer"},!t&&v.createElement("div",{className:"groupName"+(i?" Collapsed":""),onClick:this.ToggleCollapsed,onContextMenu:this.OnContextMenu},v.createElement("div",{className:"ExpandPlusMinus"},v.createElement(B.R,null)),this.props.group.icon_url&&v.createElement("img",{className:"groupIcon",src:this.props.group.icon_url}),this.props.group.name,!t&&v.createElement("span",{className:this.IsCollapsed()?"groupCount collapsed":"groupCount"},"(",this.props.group.member_count,")"),E&&v.createElement("hr",null)),w&&v.createElement("div",{className:D,onClick:this.ToggleOfflineSortMethod,title:d?Object(C.d)("#FriendGroup_Tip_SortByRecent"):Object(C.d)("#FriendGroup_Tip_SortByAlphabet")},v.createElement(B.cb,null))),v.createElement(k.TransitionGroup,{className:"groupList",enter:!n,exit:!n},c,p&&v.createElement(k.CSSTransition,{key:"inviteButtons",classNames:"opacityfade-anim",timeout:320},v.createElement("div",{className:"confirmInviteRequestContainer"},v.createElement("div",{className:"confirmInviteRequestActions"},M?v.createElement("div",{className:"confirmInviteButton confirmInvites",onClick:this.OnConfirmChanges},Object(C.d)("#FriendGroup_ConfirmInvites")):v.createElement("div",{className:"confirmInviteButton confirmInvites dim"},Object(C.d)("#FriendGroup_ConfirmInvites")),v.createElement("div",{className:"confirmInviteButton ignoreAllRequests",onClick:this.OnIgnoreAllInvites},Object(C.d)("#FriendGroup_AllIgnore"))),v.createElement("div",{className:"cancelAddFriends",onClick:this.OnCloseInvites,title:Object(C.d)("#FriendGroup_Close")},v.createElement(B.b,{angle:-90}))))),E&&v.createElement("div",{className:"dropTargetBox"}))},Object(o.c)([O.a],t.prototype,"ToggleCollapsed",null),Object(o.c)([O.a],t.prototype,"OnContextMenu",null),Object(o.c)([O.a],t.prototype,"OnFriendSelected",null),Object(o.c)([O.a],t.prototype,"OnAcceptInvite",null),Object(o.c)([O.a],t.prototype,"OnDeclineInvite",null),Object(o.c)([O.a],t.prototype,"OnBlockInvite",null),Object(o.c)([O.a],t.prototype,"OnConfirmChanges",null),Object(o.c)([O.a],t.prototype,"OnIgnoreAllInvites",null),Object(o.c)([O.a],t.prototype,"OnCloseInvites",null),Object(o.c)([O.a],t.prototype,"ToggleOfflineSortMethod",null),t=Object(o.c)([b.a],t)}(Ce);function Ee(e,t,n){return Object(A.a)(v.createElement(we,{browserContext:e,appid:t,ownerWindow:n.currentTarget.ownerDocument.defaultView}),n)}var we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return v.createElement(N.c,null,v.createElement(m.d,{unAppID:this.props.appid,bShowLargeHeader:!0}))},t}(v.PureComponent),Me=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bLocalCollapsed:n.props.collapsed},n}return Object(o.d)(t,e),t.prototype.GetGroup=function(){return this.props.group},t.prototype.PerformDropAction=function(e){return Promise.reject("FriendGameGroups do not accept drops")},t.prototype.ToggleCollapsed=function(){this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(this.props.group.unique_id):this.setState({bLocalCollapsed:!this.state.bLocalCollapsed})},t.prototype.IsCollapsed=function(){return this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.GetUserGroupCollapsed(this.props.group.unique_id):this.state.bLocalCollapsed},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.friendGroup==this.props.group||(this.m_FriendRenderContext={friendGroup:this.props.group,chatContext:"friendslist"}),this.m_FriendRenderContext},t.prototype.OnShowHeaderContextMenu=function(e){var t=this.props.group.id;t&&(l.f.AppInfoStore.GetAppInfo(t).is_valid&&Ee(Object(c.e)(this,e),t,e))},t.prototype.render=function(){if(this.props.bSingletonGroup&&0==this.props.group.unfiltered_count)return null;var e=[];if(!this.IsCollapsed()){var t=this.props.group.member_list,n=new Map,r=new Map,i=new Map;if(!this.props.bSingletonGroup){for(var a="",c=null,p=0,m=t;p<m.length;p++){var d=m[p];c&&d.persona.player_group!=a&&n.set(c.accountid,"lastInGroup"),d.persona.player_group&&(i.set(d.persona.player_group,d.persona.player_group_size),r.has(d.persona.player_group)?r.set(d.persona.player_group,r.get(d.persona.player_group)+1):r.set(d.persona.player_group,1),d.persona.player_group!=a?(n.set(d.accountid,"firstInGroup"),a=d.persona.player_group,c=d):(n.set(d.accountid,"inGroup"),c=d))}c&&n.set(c.accountid,"lastInGroup")}for(var h=!this.props.bSingletonGroup&&this.props.group.id!=s.d,f=null,_=0,g=t;_<g.length;_++){d=g[_];var b="";this.state.friendDraggedOut==d&&this.state.friendDrag!=d&&(b+=" dragOriginGhost");var y=!1;if(n.has(d.accountid)){y=!0;var S=n.get(d.accountid);if("lastInGroup"==S){var O=r.get(d.persona.player_group),I=i.get(d.persona.player_group);if(I<=1&&1==O)S="";else if(I&&O<I){var E=!1;l.f.FriendStore.self.persona.player_group==d.persona.player_group&&(E=!0);var M=I-O,D=I-O-(E?1:0),T="oneDigit";M>=10&&M<100?T="twoDigits":M>=100&&(T="manyDigits");var j=1==D?"#FriendGroup_PlayerGroupFooter_Label_Singular":"#FriendGroup_PlayerGroupFooter_Label";E&&(j=0==D?"#FriendGroup_PlayerGroupFooter_Label_PlusYouOnly":1==D?"#FriendGroup_PlayerGroupFooter_Label_PlusYou_Singular":"#FriendGroup_PlayerGroupFooter_Label_PlusYou"),S=1==O?"firstInGroup":"inGroup",f=v.createElement(k.CSSTransition,{key:d.persona.player_group+"_footer",classNames:"friend-anim",timeout:320},v.createElement("div",{className:"SteamPlayerGroupFooter lastInGroup",draggable:!1},v.createElement("div",{className:"SteamPlayerGroupLines"}),v.createElement("div",{className:"SteamPlayerGroupFooterCount "+T},v.createElement("div",{className:"count"},"+",M)),v.createElement("div",{className:"SteamPlayerGroupFooterLabel"},Object(C.d)(j,D))))}}b+=" "+S}var G=void 0;this.props.bSingletonGroup&&(G=v.createElement(De,{appid:d.persona.m_unGamePlayedAppID})),b+=" "+w.a.hoverClass,e.push(v.createElement(k.CSSTransition,{key:d.accountid,classNames:"friend-anim",timeout:320},v.createElement(je,{friend:d,key:d.accountid,bHideGameName:h,className:b,context:this.GetFriendRenderContext(),bInGroup:y,bFriendsListEntry:!0,listStatusIndicatorLeft:G}))),f&&e.push(f)}}var R="friendGroup gameGroup",A=this.props.group.name,N=null;return this.props.bSingletonGroup&&(R+=" OtherGamesGroup",N=this.props.bOtherGroups?Object(C.d)("#FriendGroup_InGame_Others"):Object(C.d)("#FriendGroup_InGame")),v.createElement(u.a,Object(o.a)({className:R},this.GetDragDropProps(this.props.group.modifiable||this.props.group.accepts_group_removals)),v.createElement("div",{className:"groupName"+(this.IsCollapsed()?" Collapsed":""),onClick:this.ToggleCollapsed,onContextMenu:this.OnShowHeaderContextMenu},v.createElement("div",{className:"gameGroupContainer"},v.createElement("div",{className:"ExpandPlusMinus"},v.createElement(B.R,null)),N,this.props.group.icon_url&&v.createElement("img",{className:"groupIcon",src:this.props.group.icon_url})),A,v.createElement("span",{className:this.IsCollapsed()?"groupCount collapsed":"groupCount"},"(",this.props.group.member_count,")"),v.createElement("hr",null)),v.createElement(k.TransitionGroup,{className:this.IsCollapsed()?"friendsContainer groupCollapsed":"friendsContainer"},e))},Object(o.c)([O.a],t.prototype,"ToggleCollapsed",null),Object(o.c)([O.a],t.prototype,"OnShowHeaderContextMenu",null),t=Object(o.c)([b.a],t)}(Ce),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnShowGameIconContextMenu=function(e){Ee(Object(c.e)(this,e),this.props.appid,e)},t.prototype.render=function(){var e=0!=this.props.appid?l.f.AppInfoStore.GetAppInfo(this.props.appid):null;return e&&e.is_valid?v.createElement("div",{className:"FriendInGameIcon",onContextMenu:this.OnShowGameIconContextMenu},v.createElement("img",{className:"gameIcon",alt:"",src:e.icon_url})):v.createElement("div",{className:"FriendInGameIcon"},v.createElement("div",{className:"FriendInGameIcon_NA"},"N/A"))},Object(o.c)([O.a],t.prototype,"OnShowGameIconContextMenu",null),t=Object(o.c)([b.a],t)}(v.Component),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnContextMenu=function(e){if(!this.props.disableContextMenu){var t=void 0;if(this.props.onContextMenu)t=this.props.onContextMenu(e);else t=c.i.FriendHoverStore.GetHover(this.props.friend).OnContextMenu(this.props.context,e);t&&this.props.onContextMenuShown&&this.props.onContextMenuShown(t)}},t.prototype.componentWillUnmount=function(){this.Hide()},t.prototype.Hide=function(){c.i.FriendHoverStore.GetHover(this.props.friend).HideByElement(y.findDOMNode(this))},t.prototype.render=function(){var e=v.Children.only(this.props.children);if(e){var t=this.props,n=c.i.FriendHoverStore.GetHover(t.friend);return v.cloneElement(e,{onMouseEnter:function(e){return n.Show(e,t.context,t.direction)},onMouseLeave:n.Hide,onContextMenu:this.OnContextMenu})}return this.props.children},Object(o.c)([O.a],t.prototype,"OnContextMenu",null),t}(v.Component),je=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bActive:!1},n}return Object(o.d)(t,e),t.prototype.OnDoubleClick=function(e){this.RunAction(!0,e)},t.prototype.OnClick=function(e){this.RunAction(!1,e)},t.prototype.RunAction=function(e,t){!this.props.bSingleClickActivate==e&&(this.props.action?this.props.action(this.props.friend,t):this.props.noActions||this.props.friend.OpenChatDialog(Object(c.e)(this,t)))},t.prototype.OnDragStart=function(e){e.dataTransfer.setData("text/plain",this.props.friend.persona.m_strPlayerName),e.dataTransfer.setData("text/steamid",this.props.friend.persona.m_steamid.ConvertTo64BitString()),this.props.friend.is_friend?c.i.DragDropManager.StartDrag({type:"friend",source:this.props.context.chatContext,friend:this.props.friend,sourceContext:this.props.context}):c.i.DragDropManager.StartDrag({type:"nonfriend",source:this.props.context.chatContext,friend:this.props.friend,sourceContext:this.props.context}),c.i.FriendHoverStore.GetHover(this.props.friend).HideAllInstances()},t.prototype.OnDragEnd=function(e){c.i.DragDropManager.EndDrag()},t.prototype.OnShowContextMenu=function(e){var t=Object(m.b)(Object(c.e)(this,e),this.props.context,this.props.friend,e);t&&this.OnContextMenuShown(t)},t.prototype.OnContextMenuShown=function(e){var t=this;this.setState({bActive:!0}),e.SetOnHideCallback((function(){t.setState({bActive:!1})}))},t.prototype.componentDidMount=function(){var e=this.props.friend;l.f.SettingsStore.FriendsSettings.bAnimatedAvatars&&e.persona.is_online&&e.LoadEquippedProfileItems()},t.prototype.render=function(){var e=this.props.friend;if(e.LoadIfNecessary(),!e.is_ready)return v.createElement("div",null);var t=l.f.CMInterface.steamid.GetAccountID()==e.accountid,n=null,r=0;this.props.showVoiceLevel&&(r=l.f.VoiceStore.get_volume(e.accountid));var i,a={className:"friend "+Object(ee.d)(e.persona)};if(this.props.className&&(a.className+=" "+this.props.className),this.props.bFriendsListEntry&&(a.className+=" friendStatusHover"),t){var s=l.f.VoiceStore.IsAttemptingInitialConnection(),c=l.f.VoiceStore.HasBeenAttemptingOverTwoSeconds(),u=l.f.VoiceStore.IsAttemptingReconnect(),p=Object(C.d)("#VoiceChatConnectingHelp"),m=null;c?m=Object(C.d)("#VoiceChatConnecting"):u&&(m=Object(C.d)("#VoiceChatReconnecting")),m&&(n=t?function(){return v.createElement("a",{target:"_blank",title:p,href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},m)}:function(){return m});var d="";s&&(d+=" connecting"),c&&(d+=" slowconnecting"),u&&(d+=" reconnecting"),a.className+=d}if(this.props.noActions&&!this.props.action||(a.onDoubleClick=this.OnDoubleClick,a.onClick=this.OnClick),this.props.noActions||this.props.disableContextMenu||(a.onContextMenu=this.OnShowContextMenu),this.props.noActions||this.props.notDraggable||(a.onDragStart=this.OnDragStart,a.onDragEnd=this.OnDragEnd,a.draggable=!0),this.props.children)i=v.createElement("div",Object(o.a)({},a),this.props.children);else{var h={};if(this.props.showVoiceLevel&&1!=r){var f=Math.min(3.2*r,1),_=Math.max(0,100*f);_=Math.round(10*_)/10,h.height=_+"%",h.top="auto",_>1&&(a.className+=" speaking")}var g=void 0;this.props.context&&this.props.context.group&&(g=this.props.context.group.GetMemberPartyBeacon(e.accountid))&&(a.className+=" partyBeacon"),this.state.bActive&&(a.className+=" Friend_ContextMenuActive");var b=l.f.VoiceStore.GetPerUserMuting(e.accountid),y=null,S=null,O=l.f.SettingsStore.FriendsSettings.bAnimatedAvatars&&e.persona.is_online;if(e.BLoadedEquippedItems()){var I=e.GetEquippedProfileItems();I&&(y=I.animated_avatar,S=I.avatar_frame)}var w=this.props.avatarSize||"Medium",M=v.createElement(E.b,{key:e.persona.GetAccountID()+"_"+e.persona.is_online,loopDuration:O?"Medium":"None",persona:e.persona,animatedAvatar:y,avatarFrame:S,size:w,statusStyle:h},this.props.bInVoiceList&&b&&v.createElement(B.pb,null));this.props.noActions||(M=v.createElement(Te,{friend:e,context:this.props.context,disableContextMenu:this.props.disableContextMenu,onContextMenuShown:this.OnContextMenuShown},M));var D=this.props.context&&"chatmemberlist"==this.props.context.chatContext,T="";if(2==e.efriendrelationship&&!D){var j,G,R=l.f.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(e.steamid64);void 0===R?(l.f.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),G=Object(C.d)("#FriendGroup_NoMutualFriends"),T="noMutualFriends"):(G=Object(C.i)("#FriendGroup_YesMutualFriends",R.size),j=R.size),n=function(){return v.createElement("span",{className:"inviteLabel"},v.createElement("span",{className:"mutualFriendNumber"},j&&j+" "),G)}}var k=null;e.persona.HasCurrentGameRichPresence()?k=function(){return e.persona.GetCurrentGameRichPresence()}:e.persona.m_broadcastAccountId&&(k=function(){return e.GetBroadcastDescription()}),i=v.createElement("div",Object(o.a)({},a),this.props.bInGroup&&v.createElement("div",{className:"SteamPlayerGroupLines"}),this.props.bInVoiceList&&v.createElement(Ge,{friend:e}),this.props.listStatusIndicatorLeft,M,!this.props.bHideStatusInfo&&v.createElement(ae.a,{className:Object(se.a)("labelHolder",T),persona:e.persona,eFriendRelationship:e.efriendrelationship,bIsSelf:l.f.FriendStore.self==e,strNickname:e.nickname,bParenthesizeNicknames:l.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames,renderStatus:n,renderRichPresence:k,bHideGameName:this.props.bHideGameName,bHideEnhancedRichPresenceLabel:this.props.bHideEnhancedRichPresenceLabel,bHidePersona:this.props.bHidePersona,bHideSnooze:this.props.bHideSnooze,bCompactView:l.f.SettingsStore.FriendsSettings.bCompactFriendsList,onContextMenu:this.props.noActions||this.props.disableContextMenu?void 0:this.OnShowContextMenu,bHasPartyBeacon:void 0!==g}),this.props.listStatusIndicator)}return i},Object(o.c)([O.a],t.prototype,"OnDoubleClick",null),Object(o.c)([O.a],t.prototype,"OnClick",null),Object(o.c)([O.a],t.prototype,"OnDragStart",null),Object(o.c)([O.a],t.prototype,"OnDragEnd",null),Object(o.c)([O.a],t.prototype,"OnShowContextMenu",null),Object(o.c)([O.a],t.prototype,"OnContextMenuShown",null),t=Object(o.c)([b.a],t)}(v.Component),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.friend,t=l.f.CMInterface.steamid.GetAccountID()==e.accountid,n="voiceStatusIconsContainer",o="",r="",i=!1,a=!1,s=!1,c=l.f.VoiceStore.GetPerUserMuting(e.accountid),u=l.f.VoiceStore.GetUserMutedRemotely(e.accountid),p=l.f.VoiceStore.GetOutputMutedRemotely(e.accountid);return t?(i=l.f.VoiceStore.IsMicMuted(),a=l.f.VoiceStore.IsOutputMuted(),s=l.f.VoiceStore.BNoMicAvailableForSession(),i&&(n+=" mic_muted_self"),a&&(n+=" output_muted_self")):s=l.f.VoiceStore.GetUserHasNoMicForSession(e.accountid),c&&(n+=" muted_locally"),u&&(n+=" mic_muted_remotely"),p&&(n+=" output_muted_remotely"),s&&(n+=" no_mic_for_session"),s?o=Object(C.d)("#Tooltip_MicStatus_NoMic"):u?o=Object(C.d)("#Tooltip_RemoteMicStatus_Muted"):i&&(o=Object(C.d)("#Tooltip_YourMicStatus_Muted")),p?r=Object(C.d)("#Tooltip_RemoteOutputStatus_Muted"):a&&(r=Object(C.d)("#Tooltip_YourOutputStatus_Muted")),v.createElement("div",{className:n},v.createElement("div",{className:"voicestatusIcon voiceStatusMic disabled",title:o},v.createElement(B.J,null)),v.createElement("div",{className:"voicestatusIcon voiceStatusOutput disabled",title:r},v.createElement(B.y,null)))},t=Object(o.c)([b.a],t)}(v.Component),Re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.friend,n=e.bLarge,o=e.className,r=e.context,i=e.children;return v.createElement(Te,{friend:t,context:r},v.createElement("div",{className:Object(se.a)("friend","FriendAvatar",Object(ee.d)(t.persona),o)},v.createElement(E.c,{persona:t.persona,size:n?"Large":"Medium",className:o},i)))},t=Object(o.c)([b.a],t)}(v.Component),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e,t=l.f.ChatStore.FriendChatStore.GetUnreadFriendMessageCount(this.props.browserContext);return this.props.bScrolledFromTop&&t>0&&(e=v.createElement(k.CSSTransition,{classNames:"unread-messages-anim",timeout:320},v.createElement("div",{className:"unreadMessageViolator",onClick:this.props.onClick},1==t&&Object(C.d)("#FriendGroup_UnreadMessagesViolator"),t>1&&Object(C.d)("#FriendGroup_UnreadMessagesViolatorPlural",t)))),v.createElement(k.TransitionGroup,null,e)},t=Object(o.c)([b.a],t)}(v.Component),Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.state={collapsed:!1},n}return Object(o.d)(t,e),t.prototype.OnHeaderClick=function(e){this.setState({collapsed:!this.state.collapsed})},t.prototype.render=function(){var e=this.props.friendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext);if(!e.length)return null;var t=this.state.collapsed,n=t?null:e.map((function(e){var t=e.unread_message_count,n=e.chat_partner,o=v.createElement("div",{className:"FriendMessageCount"},t);return v.createElement(k.CSSTransition,{key:n.accountid,classNames:"friend-anim",timeout:320},v.createElement("div",{className:"unreadFriend"},v.createElement(je,{friend:n,key:n.accountid,context:{chat:e},bFriendsListEntry:!0}),o))}));return v.createElement("div",{className:"friendGroup"},v.createElement("div",{className:"groupName"+(t?" Collapsed":""),onClick:this.OnHeaderClick},v.createElement("div",{className:"ExpandPlusMinus"},v.createElement(B.R,null)),Object(C.d)("#FriendGroup_UnreadMessages"),v.createElement("span",{className:"groupCount"},"(",e.length,")"),v.createElement("hr",null)),v.createElement(k.TransitionGroup,null,n))},Object(o.c)([O.a],t.prototype,"OnHeaderClick",null),t=Object(o.c)([b.a],t)}(v.Component);v.Component},dBNU:function(e,t,n){},dEzy:function(e,t,n){e.exports={DialogTitle:"dialogs_DialogTitle_3z6A8",DialogContent:"dialogs_DialogContent_2ZGKt"}},dXEH:function(e,t,n){e.exports={Emoticon_Toggle:"emoticonsuggestion_Emoticon_Toggle_2zKUt",Active:"emoticonsuggestion_Active_20wFc",Emoticon:"emoticonsuggestion_Emoticon_2h16s"}},"da/R":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("mrSG"),r=n("q1tI"),i=n("TyAF"),a=n("oh5H"),s=n("lqmi"),c=n("QHER"),l=n("e2SU"),u=n("Cebd"),p=n.n(u),m=Object(i.a)((function(e){var t=e.persona,n=e.className,i=Object(o.f)(e,["persona","className"]);if(!t)return null;if(!t.is_online)return null;var u=t.HasStateFlag(512),m=t.HasStateFlag(2048),d=!m&&t.HasStateFlag(1024);return r.createElement(r.Fragment,null,u&&r.createElement("div",Object(o.a)({className:Object(c.a)(n,p.a.PersonaStatusIcon,p.a.MobilePhoneIcon,Object(s.d)(t)),title:Object(a.d)("#Platform_Hint_Mobile")},i),r.createElement(l.L,null)),m&&r.createElement("div",Object(o.a)({className:Object(c.a)(n,p.a.PersonaStatusIcon,p.a.VRIcon,Object(s.d)(t)),title:Object(a.d)("#Platform_Hint_VR")},i),r.createElement(l.lb,null)),d&&r.createElement("div",Object(o.a)({className:Object(c.a)(n,p.a.PersonaStatusIcon,p.a.BigPictureIcon,Object(s.d)(t)),title:Object(a.d)("#Platform_Hint_BigPicture")},i),r.createElement(l.d,null)))}))},dcQ8:function(e,t,n){e.exports={BroadcastChat:"broadcastchat_BroadcastChat_25xed",ChatEntry:"broadcastchat_ChatEntry_3hSYv",ChatPanel:"broadcastchat_ChatPanel_3jc_d",ChatMessages:"broadcastchat_ChatMessages_PNfmQ",EmoticonContainer:"broadcastchat_EmoticonContainer_3ArHy",ChatSend:"broadcastchat_ChatSend_2szrh",ChatBox:"broadcastchat_ChatBox_3y_AV",ChatControls:"broadcastchat_ChatControls_35ufH",MessageChat:"broadcastchat_MessageChat_3eku_",MessageName:"broadcastchat_MessageName_2P_MO",MessageContents:"broadcastchat_MessageContents_555m-",EmoticonsOnly:"broadcastchat_EmoticonsOnly_3Z7Z3",MessageNotification:"broadcastchat_MessageNotification_2LJJp",MessageError:"broadcastchat_MessageError_YWUjL",minHeightZero:"broadcastchat_minHeightZero_3Cgfe",ChatLoginButton:"broadcastchat_ChatLoginButton_7EQxy",RateLimitProgressBarContainer:"broadcastchat_RateLimitProgressBarContainer_fFamE",RateLimitProgressBar:"broadcastchat_RateLimitProgressBar_kaFIe",TimedProgressBarContainer:"broadcastchat_TimedProgressBarContainer_321-Z",wrapper:"broadcastchat_wrapper_1iiJF",pie:"broadcastchat_pie_2q7aN",spinner:"broadcastchat_spinner_2u1pz",rota:"broadcastchat_rota_1D2nd",filler:"broadcastchat_filler_ZTWuH",fill:"broadcastchat_fill_1uXHe",mask:"broadcastchat_mask_xcUAc",FlairContainer:"broadcastchat_FlairContainer_tqyZ3"}},dpJ7:function(e,t,n){"use strict";n.d(t,"f",(function(){return Dt})),n.d(t,"h",(function(){return Tt})),n.d(t,"j",(function(){return jt})),n.d(t,"e",(function(){return Rt})),n.d(t,"a",(function(){return kt})),n.d(t,"i",(function(){return At})),n.d(t,"g",(function(){return Nt})),n.d(t,"c",(function(){return Bt})),n.d(t,"b",(function(){return Lt})),n.d(t,"d",(function(){return Pt}));var o=n("mrSG"),r=n("tkkQ"),i=n("rsEv"),a=n("V7Fl"),s=n("+M9t"),c=n("geE1"),l=n("LAqV"),u=n("hReu"),p=n("29iz"),m=n("q1tI"),d=n.n(m),h=n("1w3K"),f=n("fxWM"),_=n.n(f),g=function(e){var t=e.message,n=e.name,r=e.renderImage,i=Object(o.f)(e,["message","name","renderImage"]);return d.a.createElement(h.CSSTransition,Object(o.a)({key:"inviteDrop",classNames:Object(o.a)({},_.a),timeout:300},i),d.a.createElement("div",{className:_.a.ChatModalCover},d.a.createElement("div",{className:_.a.InviteDropContainer},d.a.createElement("span",{className:_.a.InviteDropImage},r()),d.a.createElement("span",{className:_.a.InviteDropName},n),d.a.createElement("span",{className:_.a.InviteDropMessage},t),d.a.createElement("span",{className:_.a.InviteDropBackground}))))},b=n("YZlK"),v=n("20CD"),y=n("Z578"),S=n("+mma"),C=n("uWOQ"),O=n("TyAF"),I=n("i8i4"),E=n("uw3m"),w=n("UMCL"),M=n("ljid"),D=n("vJVb"),T=n("Hi0u"),j=n("e2SU"),G=n("XaMz"),R=n("QHER"),k=n("/IDK"),A=n("oh5H"),N=n("1VtQ"),B=n("8o0Y"),L=n("EGkk"),P=n("bbBM"),F=n("/FkP"),x=n("mQsC"),V=n("yolM"),U=n("QxgC"),H=n("QAot"),W=n("Hk8Z"),z=n("UDpV"),q=n.n(z),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.fileUploadManager,t=e.file_upload_props.eUploadState;return 1==t?m.createElement(Y,{fileUploadManager:e}):3==t||5==t||4==t?m.createElement(Q,{fileUploadManager:e}):0!=t?m.createElement(X,{fileUploadManager:e}):null},t=Object(o.c)([O.a],t)}(m.Component),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bSpoilerChecked:!1},n}return Object(o.d)(t,e),t.prototype.OnCancelClick=function(e){this.props.fileUploadManager.Reset()},t.prototype.OnUploadClick=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,this.props.fileUploadManager.BeginFileUpload({bSpoiler:this.state.bSpoilerChecked})];case 1:return e.sent(),this.props.fileUploadManager.Reset(),[2]}}))}))},t.prototype.OnDialogChecked=function(){this.setState({bSpoilerChecked:!this.state.bSpoilerChecked})},t.prototype.render=function(){var e=void 0,t=this.props.fileUploadManager.file;return-1!=t.type.indexOf("image")?e=m.createElement("img",{className:"chatFileUploadPreview",src:this.props.fileUploadManager.file_upload_data_url}):-1!=t.type.indexOf("video")&&(e=m.createElement(j.mb,null)),m.createElement("div",{className:"chatFileUploadPreviewContainer"},e,m.createElement("div",{className:"chatFileUploadFileName"},"'",t.name,"'"),m.createElement("div",{className:"chatFileUploadCancel",onClick:this.OnCancelClick},m.createElement(j.sb,null)),m.createElement("button",{className:"DialogButton Primary chatFileUploadBtn",type:"button",onClick:this.OnUploadClick},Object(A.d)("#Chat_Upload")),m.createElement(M.e,{classname:"spoilerCheckBox",label:Object(A.d)("#ChatEntry_TagAsSpoiler"),checked:this.state.bSpoilerChecked,onChange:this.OnDialogChecked}))},Object(o.c)([N.a],t.prototype,"OnCancelClick",null),Object(o.c)([N.a],t.prototype,"OnUploadClick",null),Object(o.c)([N.a],t.prototype,"OnDialogChecked",null),t}(m.Component),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.fileUploadManager.file_upload_props,t=e.file?Object(A.d)("#Chat_Uploading",e.displayFileName):"",n={width:e.uploadProgress+"%"};return m.createElement("div",{className:"chatFileUploadProgressContainer"},m.createElement("div",{className:"chatFileUploadProgressName"},t),m.createElement("div",{className:"chatFileUploadProgressBarContainer DialogProgressBar_ProgressBarContainer"},m.createElement("div",{className:"DialogProgressBar_Value",style:n})))},t=Object(o.c)([O.a],t)}(m.Component),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ClearErrorState=function(){this.props.fileUploadManager.ClearFileUploadError()},t.prototype.OnRetryClick=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,this.props.fileUploadManager.RetryFileUpload()];case 1:return e.sent(),this.props.fileUploadManager.Reset(),[2]}}))}))},t.prototype.render=function(){var e=this.props.fileUploadManager.file_upload_props,t=e.displayFileName?Object(A.d)("#Chat_Uploading",e.displayFileName):"",n=e.strErrorDescription||Object(A.d)("#Chat_Settings_Error_Unknown"),o=void 0;return 3==e.eUploadState&&(o=m.createElement(M.x,{onClick:this.OnRetryClick},Object(A.d)("#Chat_Upload_ErrorAction_Retry"))),m.createElement("div",{className:"chatFileUploadProgressContainer"},m.createElement("div",{className:"chatFileUploadProgressName"},t),m.createElement("div",{className:"chatFileUploadErrorDescription"},n),m.createElement("div",{className:"chatFileUploadActions"},m.createElement(M.D,{className:"DialogLayout_NoMinWidth"},o,m.createElement(M.d,{onClick:this.ClearErrorState},Object(A.d)("#Chat_Upload_ErrorAction_Close")))))},Object(o.c)([N.a],t.prototype,"ClearErrorState",null),Object(o.c)([N.a],t.prototype,"OnRetryClick",null),t=Object(o.c)([O.a],t)}(m.Component),J=n("Jdiq"),Z=n("vDqi"),$=n.n(Z),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refTextInput=m.createRef(),t.m_refFileInput=m.createRef(),t.m_textFocusCallback=null,t.m_nChatEntryInitialHeight=void 0,t.state={messageInput:"",submitEnabled:!1,mentionSearch:void 0,activeSuggestSearchType:void 0},t}return Object(o.d)(t,e),t.prototype.BindMentionDialog=function(e){this.m_MentionDialog=e},t.prototype.SetMessageInput=function(e,t){this.setState({messageInput:e,submitEnabled:e.trim().length>0},t),this.props.chatView.text_entry=e,e&&e.length&&this.props.chatView.chat.OnTyping()},t.prototype.OnSubmit=function(e){e&&e.preventDefault(),this.props.chatView&&this.props.chatView.file_upload_manager.file&&this.props.chatView.UploadFile(),this.state.messageInput.trim().length&&this.props.chatView&&(this.props.chatView.SendChatMessage(this.state.messageInput),this.m_iMentionSearchCancelledOffset=void 0,this.ClearMentionSearchState(),this.setState({submitEnabled:!1}),this.SetMessageInput(""),this.props.chatView.is_scrolled_to_bottom=!0,this.FocusTextInput()),this.SizeChatEntry(this.m_refTextInput.current,!0)},t.prototype.OnTextAreaChange=function(e){this.SizeChatEntry(e.currentTarget),this.SetMessageInput(e.target.value)},t.prototype.SizeChatEntry=function(e,t){var n=l.f.SettingsStore.FriendsSettings.bCompactFriendsList?12:0;e.style.height="inherit";var o=window.getComputedStyle(e),r=parseInt(o.getPropertyValue("border-top-width"),10)+parseInt(o.getPropertyValue("padding-top"),10)+parseInt(o.getPropertyValue("padding-bottom"),10)+parseInt(o.getPropertyValue("border-bottom-width"),10);null==this.m_nChatEntryInitialHeight&&(this.m_nChatEntryInitialHeight=e.clientHeight-r-n+"px");var i=e.scrollHeight-r-n;t?(e.style.height=this.m_nChatEntryInitialHeight,this.m_nChatEntryInitialHeight=void 0):e.style.height=Math.min(120,i)+"px"},t.prototype.OnFocus=function(e){this.UpdateMentionSearchState()},t.prototype.OnBlur=function(e){if(!e.relatedTarget||!k.e(I.findDOMNode(this),e.relatedTarget)){if(Object(L.h)())return;this.m_iMentionSearchCancelledOffset=void 0,this.ClearMentionSearchState()}},t.prototype.OnKeyDown=function(e){this.state.activeSuggestSearchType&&this.m_MentionDialog&&!e.shiftKey&&!e.ctrlKey&&this.m_MentionDialog.BHandleKeyPress(e.keyCode)?e.preventDefault():8==e.keyCode||46==e.keyCode?this.m_iMentionSearchCancelledOffset=void 0:13!=e.keyCode||e.shiftKey||e.ctrlKey?13==e.keyCode&&e.ctrlKey&&(e.preventDefault(),this.InsertAtCursor("\n")):(e.preventDefault(),this.OnSubmit())},t.prototype.OnPaste=function(e){var t=k.o(e);t&&(this.props.chatView.SetFileToUpload(t),e.preventDefault(),e.stopPropagation())},t.prototype.OnFileInputChange=function(e){var t=e.currentTarget;t.files.length&&(this.props.chatView.SetFileToUpload(t.files[0]),t.value="")},t.prototype.OnEmbedClick=function(e){Object(B.a)(m.createElement(ie,{chatView:this.props.chatView,refFileInput:this.m_refFileInput.current,fnInsertText:this.InsertAtCursor.bind(this)}),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0})},t.prototype.OnEmoticonSelected=function(e,t){void 0===t&&(t=!1),t||this.m_refTextInput.current.focus(),this.InsertAtCursor(":"+e+":")},t.prototype.InsertAtCursor=function(e){var t=this.m_refTextInput.current,n=t.value,o=n.substr(0,t.selectionStart)+e+n.substr(t.selectionEnd),r=t.selectionStart+e.length;this.SetMessageInput(o,(function(){t.selectionStart=t.selectionEnd=r}))},t.prototype.OnKeyPress=function(e){this.UpdateMentionSearchState()},t.prototype.OnClick=function(e){this.UpdateMentionSearchState()},t.prototype.OnContextMenu=function(e){r.a.IN_CLIENT||e.stopPropagation()},t.prototype.ClearMentionSearchState=function(){this.m_iMentionSearchStartOffset=void 0,this.state.activeSuggestSearchType&&this.setState({activeSuggestSearchType:void 0,mentionSearch:void 0})},t.prototype.FindMatchOpener=function(e,t,n){for(var o=n-1;o>=0;o--){if(t[o]==e)return o;if(" "==t[o])break}},t.prototype.UpdateMentionSearchState=function(){var e=this.m_refTextInput.current;if(e){var t=(this.props.chatView&&this.props.chatView.chat)instanceof i.a;if(e.selectionStart==e.selectionEnd&&e.selectionStart){for(var n=e.selectionStart,o=e.value,r=void 0,a=void 0,s=n-1;s>=0;s--){var c=s>0?o[s-1]:void 0;if(("@"==o[s]||"＠"==o[s])&&t){c&&" "!=c&&"\n"!=c||(r=s,a="Mention");break}if(":"==o[s]&&n-s>2){c&&" "!=c&&"\n"!=c&&":"!=c||(r=s,a="Emoticon");break}if(o.startsWith("/store ")){r="/store ".length-1,a="Store";break}if("/"==o[s]&&0==s){r=s,a="SlashCommand";break}if(" "==o[s]||"\n"==o[s])break}if(void 0!==r&&r!==this.m_iMentionSearchCancelledOffset){var l=o.substr(r+1,n-r-1);this.m_iMentionSearchStartOffset=r,this.setState({activeSuggestSearchType:a,mentionSearch:l})}else this.ClearMentionSearchState()}else this.ClearMentionSearchState()}},t.prototype.ReplaceSuggestedText=function(e,t,n){var o=this.m_refTextInput.current.selectionStart,r=this.m_refTextInput.current.value,i=this.FindMatchOpener(e,r,o);if(void 0===i&&"@"==e&&(i=this.FindMatchOpener("＠",r,o)),void 0!==i){var a=r.substr(0,i);a+=t,(o>=r.length||" "!=r[o])&&(a+=" ");var s=a.length;a+=r.substr(o),this.SetMessageInput(a,n),this.m_refTextInput.current.value=a,this.m_refTextInput.current.selectionStart=this.m_refTextInput.current.selectionEnd=s,this.FocusTextInput()}},t.prototype.OnMentionSuggestionSelected=function(e,t){var n;if(t instanceof s.b?n=t.persona.m_strPlayerName:t&&(n=t),!n)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();var o=n;-1!==o.lastIndexOf("#")&&(o=o.substr(0,o.lastIndexOf("#"))),this.props.chatView.BIsMemberNameAmbiguous(o)&&(t instanceof s.b?n+="#"+t.accountid.toString(36):n+="#0"),this.ReplaceSuggestedText("@","@"+n),this.ClearMentionSearchState()},t.prototype.OnEmoticonSuggestionSelected=function(e,t){if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText(":",":"+t+":"),this.ClearMentionSearchState()},t.prototype.OnSlashCommandSuggestionSelected=function(e,t){var n=this;if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText("/",t,(function(){0===Object(F.i)(t).unExpectedArguments&&n.OnSubmit()})),this.ClearMentionSearchState()},t.prototype.OnStoreSuggestionSelected=function(e,t){var n=this;if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.SetMessageInput(t,(function(){n.OnSubmit()})),this.ClearMentionSearchState()},t.prototype.FocusTextInput=function(){this.m_refTextInput.current&&this.m_refTextInput.current.focus()},t.prototype.InitForChatView=function(e){this.m_textFocusCallback&&(this.m_textFocusCallback.Unregister(),this.m_textFocusCallback=null);var t=e.text_entry;t!=this.state.messageInput&&this.setState({messageInput:t}),this.m_textFocusCallback=e.RegisterForTextEntryFocus(this.FocusTextInput)},t.prototype.componentDidMount=function(){this.InitForChatView(this.props.chatView),this.FocusTextInput()},t.prototype.componentDidUpdate=function(e){var t=this;this.props.chatView!==e.chatView&&this.InitForChatView(this.props.chatView),this.props.isActive&&!e.isActive&&setTimeout((function(){return t.FocusTextInput()}),0)},t.prototype.componentWillUnmount=function(){this.m_textFocusCallback&&this.m_textFocusCallback.Unregister(),this.m_textFocusCallback=null},t.prototype.OnRoomEffectSelected=function(e){this.props.chatView&&this.props.chatView.SendChatMessage("/roomeffect "+e),this.m_refTextInput.current&&this.m_refTextInput.current.focus()},t.prototype.OnStickerSelected=function(e){this.props.chatView&&this.props.chatView.SendChatMessage("/sticker "+e).then((function(){return l.f.ChatStore.EmoticonStore.TrackStickerUsage(e,Date.now()/1e3)})),this.m_refTextInput.current&&this.m_refTextInput.current.focus()},t.prototype.render=function(){var e=this.props,t=e.chatView,n=e.disabled,o=t&&t.chat,r=void 0;switch(this.state.activeSuggestSearchType){case"Mention":r=m.createElement(ne,{chatView:t,strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnMentionSuggestionSelected,ref:this.BindMentionDialog});break;case"Emoticon":r=m.createElement(H.a,{emoticonStore:l.f.ChatStore.EmoticonStore,emoticonHoverStore:J.b,strSearch:this.state.mentionSearch,nMinimumSearchLengthBeforeAutoSelection:2,onSuggestionSelected:this.OnEmoticonSuggestionSelected,ref:this.BindMentionDialog});break;case"SlashCommand":r=m.createElement(oe,{strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnSlashCommandSuggestionSelected,ref:this.BindMentionDialog});break;case"Store":r=m.createElement(re,{strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnStoreSuggestionSelected,ref:this.BindMentionDialog})}var i=l.f.SettingsStore.FriendsSettings.bCompactFriendsList,a=l.f.SettingsStore.FriendsSettings.nChatFontSize,s="";return a==x.a.k_EChatFontSizeSmall?s=" smallChatFont":a==x.a.k_EChatFontSizeLarge&&(s=" largeChatFont"),m.createElement("div",{className:"chatEntry"+(i?" compactView":"")+s},m.createElement(K,{fileUploadManager:t.file_upload_manager}),m.createElement("form",{className:""+q.a.chatEntryControls,onSubmit:this.OnSubmit,onBlur:this.OnBlur},r,m.createElement("textarea",{className:q.a.chatTextarea,value:this.state.messageInput,onPaste:this.OnPaste,onContextMenu:this.OnContextMenu,ref:this.m_refTextInput,onChange:this.OnTextAreaChange,onKeyDown:this.OnKeyDown,onKeyUp:this.OnKeyPress,onClick:this.OnClick,onFocus:this.OnFocus,disabled:n||l.f.CMInterface.BDisconnected(),maxLength:5e3,spellCheck:!l.f.SettingsStore.FriendsSettings.bDisableSpellcheck}),m.createElement("button",{className:q.a.chatSubmitButton+(this.state.submitEnabled?"":" "+q.a.disabled),type:"submit",disabled:!this.state.submitEnabled,title:Object(A.d)("#ChatEntryButton_Submit")},m.createElement(j.fb,null)),m.createElement("input",{type:"file",style:{display:"none"},name:"fileupload",ref:this.m_refFileInput,onChange:this.OnFileInputChange})),m.createElement("div",{className:q.a.chatEntryActionsContainer+" compactableHeight"},m.createElement("div",{className:q.a.chatEntryActionsGroup},m.createElement(U.a,{disabled:n,OnEmoticonSelected:this.OnEmoticonSelected,onRoomEffectSelected:this.OnRoomEffectSelected,roomEffectSettings:l.f.GetChatRoomEffectSettings(),onStickerSelected:this.OnStickerSelected,rtLastAckedNewEmoticons:u.i.UIDisplayPrefs.rtLastAckedNewEmoticons,SetUIDisplayPref:u.i.SetUIDisplayPref.bind(u.i),emoticonHoverStore:J.b,emoticonStore:l.f.ChatStore.EmoticonStore,bShowChatAddons:!0}),m.createElement("button",{className:q.a.chatSubmitButton+" "+q.a.EmbedButton+(n?" "+q.a.disabled:""),type:"button",onClick:this.OnEmbedClick,title:Object(A.d)("#ChatEntryButton_SendEmbed"),disabled:n},m.createElement(j.N,null))),m.createElement(te,{chat:o})),m.createElement("div",{className:"disconnectBlocker compactableHeight"}))},Object(o.c)([N.a],t.prototype,"BindMentionDialog",null),Object(o.c)([N.a],t.prototype,"OnSubmit",null),Object(o.c)([N.a],t.prototype,"OnTextAreaChange",null),Object(o.c)([N.a],t.prototype,"SizeChatEntry",null),Object(o.c)([N.a],t.prototype,"OnFocus",null),Object(o.c)([N.a],t.prototype,"OnBlur",null),Object(o.c)([N.a],t.prototype,"OnKeyDown",null),Object(o.c)([N.a],t.prototype,"OnPaste",null),Object(o.c)([N.a],t.prototype,"OnFileInputChange",null),Object(o.c)([N.a],t.prototype,"OnEmbedClick",null),Object(o.c)([N.a],t.prototype,"OnEmoticonSelected",null),Object(o.c)([N.a],t.prototype,"OnKeyPress",null),Object(o.c)([N.a],t.prototype,"OnClick",null),Object(o.c)([N.a],t.prototype,"OnContextMenu",null),Object(o.c)([N.a],t.prototype,"OnMentionSuggestionSelected",null),Object(o.c)([N.a],t.prototype,"OnEmoticonSuggestionSelected",null),Object(o.c)([N.a],t.prototype,"OnSlashCommandSuggestionSelected",null),Object(o.c)([N.a],t.prototype,"OnStoreSuggestionSelected",null),Object(o.c)([N.a],t.prototype,"FocusTextInput",null),Object(o.c)([N.a],t.prototype,"OnRoomEffectSelected",null),Object(o.c)([N.a],t.prototype,"OnStickerSelected",null),t=Object(o.c)([O.a],t)}(m.Component),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.HandleStartVoice=function(e){var t=this.props.chat;if(t instanceof c.a)t.ToggleVoiceChat();else if(this.IsVoiceActiveForButton())l.f.VoiceStore.OnUserEndVoiceChat();else if(t instanceof i.a){var n=t.GetGroup();if(n){var o=n.voiceRoomList;if(0!=o.length)if(1!=o.length){var r=m.createElement(ae,{group:n});Object(B.a)(r,e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0})}else{var a=o[0];l.f.VoiceStore.InitiateRoomChat(n.GetGroupID(),a.GetRoomID())}else n.CreateAndJoinTempVoiceRoom()}}},t.prototype.IsVoiceActiveForButton=function(){var e=this.props.chat,t=!1;if(e instanceof c.a)t=e.BVoiceActive();else if(e instanceof i.a){var n=e.GetGroup();t=l.f.VoiceStore.IsVoiceActiveForGroup(n.GetGroupID())}return t},t.prototype.OnSettingsClick=function(e){Object(V.a)(Object(u.e)(this,e),e.currentTarget.ownerDocument.defaultView,"voice")},t.prototype.render=function(){var e=this.IsVoiceActiveForButton(),t=["VoiceToggle"],n="",o=this.props.chat;e?(t.push("Active"),l.f.VoiceStore.BNoMicAvailableForSession()&&t.push("NoMicrophone"),l.f.VoiceStore.IsMicMuted()&&t.push("MicMuted")):t.push(" Inactive");var r=!o.BIsVoiceAllowed();if(r)t.push(" Disabled"),n=o.GetVoiceNotAllowedReason();else if(o instanceof c.a)n=e?"#Tooltip_VoiceControlButton_1v1_active":"#Tooltip_VoiceControlButton_1v1_inactive";else if(o instanceof i.a)if(this.IsVoiceActiveForButton())n="#Tooltip_VoiceControlButton_group_leave";else{var a=o.GetGroup();a&&0==a.voiceRoomList.length?n="#Tooltip_VoiceControlButton_group_create":a&&1==a.voiceRoomList.length?n="#Tooltip_VoiceControlButton_group_joinsingle":a&&(n="#Tooltip_VoiceControlButton_group_joinmultiple")}var s=l.f.VoiceStore.GetPushToTalkEnabled(),u=l.f.VoiceStore.GetPushToMuteEnabled(),p=l.f.VoiceStore.GetPushToTalkVoiceStateEnabled(),d=l.f.VoiceStore.GetPushToTalkHotKeyDisplayString(),h="";return(s||u)&&(h+=" pushToTalkEnabled"),p&&(h+=" pushToTalkKeyDown"),m.createElement("div",{className:"ChatMessageEntryVoice"+h+(e?" Active":" Inactive")+(r?" Disabled":"")},m.createElement("div",{className:"buttonsContainer"},m.createElement("button",{disabled:r,className:t.join(" "),onClick:this.HandleStartVoice,title:Object(A.d)(n)},m.createElement("div",{className:"VoiceToggleIconCtn"},m.createElement(j.ob,null))),m.createElement("div",{className:"activeVoiceControls"},m.createElement("div",{className:"activeVoiceFlexBox"},m.createElement("div",{className:"activeVoiceButtons"},m.createElement(P.g,null),m.createElement(P.h,null),m.createElement("div",{className:"friendListButton friendSettingsButton no-drag",onClick:this.OnSettingsClick,title:Object(A.d)("#Tooltip_VoiceSettings")},m.createElement(j.ab,null)))))),(s||u)&&this.IsVoiceActiveForButton()&&m.createElement("div",{className:"activeVoicePushToTalk"+h,title:Object(A.d)(u?"#ActiveVoicePushToMute":"#ActiveVoicePushToTalk",d)},d))},Object(o.c)([N.a],t.prototype,"HandleStartVoice",null),Object(o.c)([N.a],t.prototype,"OnSettingsClick",null),t=Object(o.c)([O.a],t)}(m.Component),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.performSearch=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return[2,this.props.chatView.SearchMembersForMention(e,Number.MAX_VALUE)]}))}))},t.prototype.ChooseSuggestion=function(t){t&&t.strNotSelectable||e.prototype.ChooseSuggestion.call(this,t)},t.prototype.getSelection=function(e){return e.friend?e.friend:e.meta_mention},t.prototype.getKey=function(e){return""+(e.friend?e.friend.accountid:e.meta_mention)},t.prototype.renderMatch=function(e){var t,n,o=e.friend,r=e.iMatchOffset,i=e.bNicknameMatch,a=this.props.strSearch.length,s=null;return o?(t=o.persona.m_strPlayerName,n=o.has_nickname&&o.nickname,o.persona.avatar_url_medium&&(s=o.persona.avatar_url_medium)):(t="@"+e.meta_mention,n=null,r++),i?m.createElement("span",{className:"mentionSuggestion"},s&&m.createElement("img",{className:"mentionAvatar",src:o.persona.avatar_url_medium,draggable:!1}),t,m.createElement("span",{className:"nickname"}," (",n.substr(0,r).replace(/ /g," "),m.createElement("span",{className:"mentionSearchMatch"},n.substr(r,a).replace(/ /g," ")),n.substr(r+a).replace(/ /g," "),")")):m.createElement("span",{className:"mentionSuggestion"},t.substr(0,r).replace(/ /g," "),s&&m.createElement("img",{className:"mentionAvatar",src:o.persona.avatar_url_medium,draggable:!1}),m.createElement("span",{className:"mentionSearchMatch"},t.substr(r,a).replace(/ /g," ")),t.substr(r+a).replace(/ /g," "),e.strNotSelectable&&m.createElement("span",{className:"notSelectable"}," ",": "+e.strNotSelectable," "),n&&m.createElement("span",{className:"nickname"}," (",n,")"))},t.prototype.renderNoMatchMessage=function(){return m.createElement("div",{key:"nomatches",className:"suggestOption mentionSearchOption noMatches"},Object(A.d)("#ChatMentionSuggest_NoMatches"))},t.prototype.renderTooManyMatchesMessage=function(e){var t=e<=1?"#ChatMentionSuggest_ManyMatches":"#ChatMentionSuggest_ManyMatchesPlural";return m.createElement("div",{key:"manymatches",className:"suggestOption mentionSearchOption manyMatches"},Object(A.d)(t,e))},t.prototype.renderHeader=function(){return m.createElement("div",{className:"mentionSearchText"},Object(A.d)("#ChatMentionSuggest_MembersMatching",this.props.strSearch))},t.prototype.getMaxMatches=function(){return t.nMaxMatches},t.nMaxMatches=12,t}(W.a),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.performSearch=function(e){var t="/"+e;return Object(F.j)().filter((function(e){return e.startsWith(t)}))},t.prototype.getSelection=function(e){return e},t.prototype.getKey=function(e){return e},t.prototype.renderMatch=function(e){var t=Object(F.i)(e);if(!t)return null;var n=Object(A.d)(t.strDescriptionToken);return m.createElement("span",{className:"SlashCommandSuggestion"},m.createElement("span",{className:"SlashCommandSuggestion_SlashCommand"},e),": ",m.createElement("span",{className:"SlashCommandSuggestion_SlashCommandDescription"},n))},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(W.a),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.performSearch=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){return this.m_mapSuggestions||(this.m_mapSuggestions=new Map),t=e.trim(),this.m_mapSuggestions.has(t)||this.m_mapSuggestions.set(t,this.loadSearchFromStore(t)),[2,this.m_mapSuggestions.get(t)]}))}))},t.prototype.loadSearchFromStore=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t={term:e,f:"json",cc:r.a.COUNTRY,l:r.a.LANGUAGE,origin:self.origin},[4,$.a.get(r.a.STORE_BASE_URL+"search/suggest",{params:t})];case 1:return n=o.sent(),[2,n.data.filter((function(e){return"game"===e.type||"software"===e.type}))||[]]}}))}))},t.prototype.getSelection=function(e){return r.a.STORE_BASE_URL+"app/"+e.id},t.prototype.getKey=function(e){return String(e.id)},t.prototype.renderMatch=function(e){return m.createElement("span",{className:"SlashCommandSuggestion"},m.createElement("span",{className:"SlashCommandSuggestion_SlashCommand"},e.name))},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(W.a);function ie(e){var t=[];e.refFileInput&&t.push(m.createElement(L.d,{key:"upload",onSelected:function(){e.refFileInput.click()}},Object(A.d)("#ChatEntry_UploadImage")));return t.push(m.createElement(L.d,{key:"tradeoffer",onSelected:function(){l.f.EconomyStore.GetTradeOfferURL().then((function(t){e.fnInsertText(t)}))}},Object(A.d)("#ChatEntry_SendTradeURL"))),m.createElement(L.c,null,t)}function ae(e){var t=e.group.GetGroupID(),n=e.group.voiceRoomList.map((function(e){return m.createElement(L.d,{key:e.GetRoomID(),onSelected:function(){l.f.VoiceStore.InitiateRoomChat(t,e.GetRoomID())}},e.name)}));return m.createElement(L.c,null,n)}var se=n("ieu3"),ce=n("hx5d"),le=n("GxRc"),ue=n("/7KC"),pe=n("/ZM5"),me=n("jYz7"),de=n("iR1w"),he=n("SEab"),fe=n("V0xx"),_e=function(e){function t(t){var n=e.call(this,t)||this;return n.m_elContainer=null,n.m_resizeObserver=null,n.state={nWidth:0,nHeight:0},n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_resizeObserver&&fe.a.DeleteObserver(this.m_resizeObserver)},t.prototype.BindContainerRef=function(e){this.m_resizeObserver&&(this.m_resizeObserver.disconnect(),this.m_resizeObserver=null),this.m_elContainer=e,this.m_elContainer&&(this.m_resizeObserver=fe.a.CreateObserver(this.OnResize,Object(k.p)(this.m_elContainer)),this.m_resizeObserver.observe(this.m_elContainer),this.UpdateDimensions(this.m_elContainer.clientWidth,this.m_elContainer.clientHeight))},t.prototype.UpdateDimensions=function(e,t){this.state.nWidth==e&&this.state.nHeight==t||this.setState({nWidth:e,nHeight:t})},t.prototype.OnResize=function(e,t){var n=0,o=0;if(e.length>0){var r=e[0].contentRect;n=r.width,o=r.height}this.UpdateDimensions(n,o)},t.prototype.render=function(){var e={width:this.state.nWidth,height:this.state.nHeight},t=this.props.children(e),n=this.props.className;return m.createElement("div",{className:n,style:{position:"absolute",top:0,right:0,bottom:0,left:0},ref:this.BindContainerRef},t)},Object(o.c)([N.a],t.prototype,"BindContainerRef",null),Object(o.c)([N.a],t.prototype,"OnResize",null),t}(m.Component),ge=function(e){return r.a.IN_CLIENT?m.createElement(_e,Object(o.a)({},e)):m.createElement(me.a,Object(o.a)({},e))},be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetFriendRenderContext=function(){var e=this.props.groupView.GetGroup();return this.m_renderContext&&this.m_renderContext.group==e||(this.m_renderContext={group:e,chatContext:"chatmemberlist"}),this.m_renderContext},t.prototype.GetMembersMatchingSearch=function(e){var t=Ie(this.props.groupView.GetGroup().memberList.member_list,e);return t.sort(s.b.DefaultFriendSortComparator),t},t.prototype.OnMemberListToggleViewClick=function(){this.props.groupView.SetMemberListCollapsed(this.props.groupView.isMemberListExpanded)},t.prototype.OnSearchInput=function(e){this.props.groupView.UpdateMemberSearch(e.currentTarget.value)},t.prototype.OnSearchSubmit=function(e){e.preventDefault();var t=this.props.groupView,n=t.normalizedMemberSearch;if(n&&n.length){var o=this.GetMembersMatchingSearch(n);o.length&&o[0].OpenChatDialog(Object(u.e)(this,e))}t.ClearMemberSearch()},t.prototype.OnSearchKeyDown=function(e){27==e.keyCode&&(e.preventDefault(),e.currentTarget.blur(),this.props.groupView.ClearMemberSearch())},t.prototype.OnClearSearch=function(){this.props.groupView.ClearMemberSearch()},t.prototype.OnSearchFocus=function(){this.props.groupView.UpdateMemberSearch(this.props.groupView.GetMemberSearch())},t.prototype.OnSearchBlur=function(){0==this.props.groupView.GetMemberSearch().length&&this.props.groupView.ClearMemberSearch()},t.prototype.render=function(){var e=this.props.groupView,t=e.isMemberListExpanded,n=e.GetMemberSearch(),o="MemberListColumn",r=Object(A.d)("#Tooltip_MemberCollapse");t||(o+=" MemberListViewCompact",r=Object(A.d)("#Tooltip_MemberExpand"));var i="MemberListOptionsContainer";return e.IsMemberSearchActive()&&(i+=" SearchActive"),m.createElement("div",{className:o},m.createElement("div",{className:i},m.createElement("div",{className:"MemberListOption ToggleMemberListView"+(n.length>0?" SearchActive":""),onClick:this.OnMemberListToggleViewClick,title:r},m.createElement(j.o,null)),m.createElement("form",{className:"socialInputContainer",name:"friendSearchForm",onSubmit:this.OnSearchSubmit},m.createElement("div",{className:"inputContainer no-drag"},m.createElement("input",{className:"friendSearchInput",type:"text",name:"memberlistSearch",placeholder:Object(A.d)("#SearchByName"),value:n,onChange:this.OnSearchInput,onKeyDown:this.OnSearchKeyDown,onFocus:this.OnSearchFocus,onBlur:this.OnSearchBlur,autoComplete:"off"}),e.has_search_error?m.createElement("div",{className:"friendSearchError",title:Object(A.d)("#SearchError")},m.createElement(j.f,{color:"red"})):m.createElement("div",{className:"friendSearchClear",onClick:this.OnClearSearch},m.createElement(j.sb,null))))),m.createElement("div",{style:{display:"flex",flex:1,position:"relative"}},e.GetGroup().BIsMemberListVirtualized()?m.createElement(ve,{groupView:this.props.groupView,inactive:this.props.inactive,context:this.GetFriendRenderContext()}):m.createElement(Ee,{groupView:this.props.groupView,inactive:this.props.inactive,context:this.GetFriendRenderContext()})),m.createElement("div",{className:"disconnectBlocker"}))},Object(o.c)([N.a],t.prototype,"OnMemberListToggleViewClick",null),Object(o.c)([N.a],t.prototype,"OnSearchInput",null),Object(o.c)([N.a],t.prototype,"OnSearchSubmit",null),Object(o.c)([N.a],t.prototype,"OnSearchKeyDown",null),Object(o.c)([N.a],t.prototype,"OnClearSearch",null),Object(o.c)([N.a],t.prototype,"OnSearchFocus",null),Object(o.c)([N.a],t.prototype,"OnSearchBlur",null),t=Object(o.c)([O.a],t)}(m.Component),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=void 0!==this.props.groupView.search_results;return m.createElement(ge,null,(function(n){var r=n.height,i=n.width;return t?m.createElement(Se,Object(o.a)({},e.props,{width:i,height:r})):m.createElement(ye,Object(o.a)({},e.props,{width:i,height:r}))}))},t=Object(o.c)([O.a],t)}(m.Component),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=e.groupView,i=e.context,a=r.GetGroup().memberCountTotal,s=this.props.groupView.GetVirtualizedMemberListView();return m.createElement(de.a,{width:t,height:n,itemCount:a,itemSize:36,overscanCount:10,onItemsRendered:this.OnItemsRendered,itemKey:function(e){return s.GetAccountIDAt(e)||e},style:{overflowX:"hidden"}},(function(e){return m.createElement(Ce,Object(o.a)({},e,{virtualizer:s,groupView:r,context:i}))}))},t.prototype.OnItemsRendered=function(e){this.props.groupView.GetVirtualizedMemberListView().SetViewExtents(e.overscanStartIndex,e.overscanStopIndex)},Object(o.c)([N.a],t.prototype,"OnItemsRendered",null),t=Object(o.c)([O.a],t)}(m.Component),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=e.groupView,i=e.context,a=r.search_results.length;return m.createElement(de.a,{width:t,height:n,itemCount:a,itemSize:36,overscanCount:10,itemKey:function(e){return r.search_results[e].friend.accountid},style:{overflowX:"hidden"}},(function(e){return m.createElement(Oe,Object(o.a)({},e,{player:r.search_results[e.index].friend,groupView:r,context:i}))}))},t=Object(o.c)([O.a],t)}(m.Component),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.index,n=e.style,o=e.virtualizer,r=e.groupView,i=e.context,a=o.GetAccountIDAt(t);if(!a)return null;var s=o.GetMember(a);return s?m.createElement(Oe,{player:s,groupView:r,style:n,context:i}):null},t=Object(o.c)([O.a],t)}(m.Component),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.style,n=e.player,r=e.groupView,i=e.className,a=e.bHideGameName,s=e.context;return m.createElement("div",{style:Object(o.a)(Object(o.a)({},t),{height:"36px"}),className:i},m.createElement(Me,{friend:n,bHideGameName:a,groupView:r,context:s}))},t=Object(o.c)([O.a],t)}(m.Component);function Ie(e,t){return e.filter((function(e){return e.BMatchesSearchString(t,!1)}))}var Ee=function(e){function t(t){var n=e.call(this,t)||this;return n.state={collapsedBuckets:{}},n.m_disposeGetMemberList=l.f.GroupMemberStore.RegisterForGroupMemberList(n.OnMemberListChanged,t.groupView.GetGroup().GetGroupID()),n}return Object(o.d)(t,e),t.prototype.OnMemberListChanged=function(){this.forceUpdate()},t.prototype.componentWillUnmount=function(){this.m_disposeGetMemberList.unregister()},t.prototype.SortedPlayerSortFunc=function(e,t){return e.display_name.localeCompare(t.display_name)},t.prototype.BuildFilteredBuckets=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],a=Ie(i.member_list,t);if(a.length>0){var s=new he.a(i.id,this.SortedPlayerSortFunc,(function(){}));s.SetMembers(a),n.push(s)}}return n},t.prototype.render=function(){var e=this,t=this.props,n=t.inactive,r=t.groupView,i=t.context,a=this.state.collapsedBuckets;if(n)return null;var s=l.f.GroupMemberStore.GetGroupMemberList(r.GetGroup().GetGroupID());if(0==s.length)return null;var c=r.normalizedMemberSearch;c.length>0&&(s=this.BuildFilteredBuckets(s,c));var u=function(e,t,n){var o=s[e],a=o.id===he.c?"partybeacon":"regular";return m.createElement(Oe,{style:n,className:"chatroomBucket_"+a,bHideGameName:o.BIsGameGroup(),groupView:r,player:o.member_list[t],context:i})},p=function(t,n){var r=s[t],i=a[r.id];return m.createElement(we,{collapsible:s.length>1,collapsed:i,memberCount:r.member_list.length,name:r.name,onCollapseChanged:function(){var t;return e.setState({collapsedBuckets:Object(o.a)(Object(o.a)({},a),(t={},t[r.id]=!i,t))})},style:n})};return m.createElement("div",{className:"chatRoomMembers CompactFriendsList groupMemberList"},m.createElement("div",{className:"friendGroup",style:{width:"100%",height:"100%"}},m.createElement("div",{className:"ChatRoomMemberScrollList_List",style:{width:"100%",height:"100%",boxSizing:"border-box"}},m.createElement(ge,null,(function(e){var t=e.width,n=e.height;return m.createElement(De,{width:t,height:n,buckets:s.map((function(e){return a[e.id]?[]:e.member_list})),itemSize:36,estimatedItemSize:36,renderBucketHeader:p,bucketHeaderSize:28,itemKey:function(e,t){return s[e].member_list[t].accountid}},u)})))))},Object(o.c)([N.a],t.prototype,"OnMemberListChanged",null),t=Object(o.c)([O.a],t)}(m.Component),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.collapsed,n=e.collapsible,o=e.onCollapseChanged,r=e.style,i=e.memberCount,a=e.name;return m.createElement("div",{className:Object(R.a)("groupName",t&&"Collapsed"),onClick:function(){return n&&o()},style:r},m.createElement("div",{className:"groupIcon"},m.createElement(j.x,null)),n&&m.createElement("div",{className:"ExpandPlusMinus"},m.createElement(j.R,null)),m.createElement("span",{className:"groupCountCollapsed"},i),m.createElement("div",{className:"groupLabelsContainer"},m.createElement("span",{className:"groupNameLabel"},a),m.createElement("span",{className:"groupCount"},"(",i,")")))},t}(m.PureComponent),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnFriendSelected=function(e,t){this.props.friend.OpenChatDialog(Object(u.e)(null,t)),this.props.groupView.ClearMemberSearch()},t.prototype.render=function(){var e=this.props,t=e.friend,n=e.groupView,i=e.context,a=e.bHideGameName,s=[],c="",l=n.GetGroup(),u=n.isMemberListExpanded,p=l.GetMemberRank(t.accountid),d=t.efriendrelationship;switch(p){default:break;case 30:c="Moderator";break;case 40:c="Officer";break;case 50:c="Owner",l.BIsClanChatRoom()||s.push(m.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"+(t.is_friend?" isFriend":"")},m.createElement(j.l,null)))}switch(l.BIsClanChatRoom()&&(p>=40?s.push(m.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"},m.createElement("img",{src:r.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_officer.png"}))):p>=30&&s.push(m.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"},m.createElement("img",{src:r.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_moderator.png"})))),d){case 3:case 6:s.push(m.createElement("div",{key:"friendIcon",className:"chatMemberFriendIcon"},m.createElement(j.u,null)));break;case 2:s.push(m.createElement("div",{key:"friendIcon",className:"chatMemberFriendIcon"},m.createElement(j.u,{bPending:!0})))}l.GetMemberPartyBeacon(t.accountid)&&s.push(m.createElement("div",{key:"playIcon",className:"chatMemberPartyBeaconIcon"},m.createElement(j.Q,null)));var h={friend:t,context:i,className:c,action:this.OnFriendSelected,bHideGameName:a};return u?m.createElement(P.c,Object(o.a)({},h,{listStatusIndicatorLeft:s})):m.createElement(P.d,Object(o.a)({},h),s)},Object(o.c)([N.a],t.prototype,"OnFriendSelected",null),t=Object(o.c)([O.a],t)}(m.Component),De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_memoizedIndices={},t.m_ref=m.createRef(),t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){var t,n=this.props,o=n.renderBucketFooter,r=n.renderBucketHeader,i=o||r;e.buckets.length!=this.props.buckets.length&&(null===(t=this.m_ref)||void 0===t?void 0:t.current)&&i&&this.m_ref.current.resetAfterIndex(0,!0)},t.prototype.render=function(){var e=this;this.m_memoizedIndices={};var t=this.props,n=t.width,o=t.height,r=t.children,i=t.renderBucketFooter,a=t.renderBucketHeader,s=t.buckets,c=s.reduce((function(e,t){return e+t.length}),0);return a&&(c+=s.length),i&&(c+=s.length),m.createElement(de.b,{width:n,height:o,itemCount:c,itemSize:this.CalculateItemHeight,itemKey:this.ItemKey,ref:this.m_ref,style:{overflowX:"hidden"}},(function(t){var n=e.RawToRelativeIndex(t.index),o=n.bucket,s=n.item;return"header"===s?a(o,t.style):"footer"===s?i(o,t.style):r(o,s,t.style)}))},t.prototype.ItemKey=function(e){var t=this.props.itemKey,n=this.RawToRelativeIndex(e),o=n.bucket,r=n.item;return"header"===r||"footer"===r?o+"_"+r+"_"+e:t(o,r)},t.prototype.CalculateItemHeight=function(e){var t=this.RawToRelativeIndex(e),n=t.bucket,o=t.item,r=this.props,i=r.bucketHeaderSize,a=r.bucketFooterSize,s=r.itemSize;return"header"===o?"function"==typeof i?i(n):"number"==typeof i?i:(console.warn("[VirtualizedBucketList]: Header found but no header size provided!"),0):"footer"===o?"function"==typeof a?a(n):"number"==typeof a?a:(console.warn("[VirtualizedBucketList]: Footer found but no footer size provided!"),0):"function"==typeof s?s(n,o):s},t.prototype.RawToRelativeIndex=function(e){if(this.m_memoizedIndices[e])return this.m_memoizedIndices[e];if(this.m_memoizedIndices[e-1]){var t=this.CalculateNextRelativeIndex(this.m_memoizedIndices[e-1]);return this.m_memoizedIndices[e]=t,t}return this.m_memoizedIndices[e]=this.InternalRawToRelativeIndex(e),this.m_memoizedIndices[e]},t.prototype.InternalRawToRelativeIndex=function(e){for(var t=this.props,n=t.buckets,o=t.renderBucketHeader,r=t.renderBucketFooter,i=0,a=o?-1:0;e>0;){if(!(e>n[i].length+(r?1:0))){a+=e;break}e-=n[i].length+(r?1:0)+(o?1:0),i++}return-1===a?{bucket:i,item:"header"}:a===n[i].length?{bucket:i,item:"footer"}:{bucket:i,item:a}},t.prototype.CalculateNextRelativeIndex=function(e){var t=this.props,n=t.buckets,o=t.renderBucketFooter,r=t.renderBucketHeader,i=e.bucket,a=e.item,s=!!r,c=!!o;return"header"===a?n[i].length?{bucket:i,item:0}:c?{bucket:i,item:"footer"}:{bucket:i+1,item:"header"}:"footer"===a?{bucket:i+1,item:s?"header":0}:a<n[i].length-1?{bucket:i,item:a+1}:c?{bucket:i,item:"footer"}:{bucket:i+1,item:s?"header":0}},Object(o.c)([N.a],t.prototype,"ItemKey",null),Object(o.c)([N.a],t.prototype,"CalculateItemHeight",null),t}(m.Component),Te=n("2vnA"),je=n("/SYB"),Ge=n("adxy"),Re=n("0N1H"),ke=n("5Nu3"),Ae=n("9Cmb"),Ne=n("7sd/"),Be=n("N/w2");var Le=n("v5rQ"),Pe=n.n(Le);function Fe(e){return m.createElement("div",{className:"msg"},m.createElement("div",{className:"msgText MessageFromBlockedUser"},Object(A.d)("#Friend_Chat_Blocked")))}function xe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i=[],a=0,c=n;a<c.length;a++){var l=c[a];l instanceof s.b?i.push(m.createElement(Ve,{context:e,player:l})):i.push(l)}return A.k.apply(void 0,Object(o.g)([t],i))}var Ve=Object(O.a)((function(e){return m.createElement(P.e,{friend:e.player,context:e.context},m.createElement("span",null,e.player.display_name))})),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.messages,t=this.props.friendRenderContext;if(0==e.length)return null;for(var n=[],r=[],i=!0,a=0,s=e;a<s.length;a++){var c=s[a];if(-1==r.indexOf(c.unServerMsgParamAccountID)){n.length>0&&n.push(", ");var u=l.f.FriendStore.GetPlayer(c.unServerMsgParamAccountID);n.push(m.createElement(Ve,{context:t,player:u})),r.push(c.unServerMsgParamAccountID),u.is_ready||(u.LoadIfNecessary(),i=!1)}}var p=l.f.FriendStore.GetPlayer(e[0].unAccountID);p.is_ready||(p.LoadIfNecessary(),i=!1);var d=m.createElement(Ve,{context:t,player:p}),h="";if(n.length>1){var f=m.createElement.apply(m,Object(o.g)([m.Fragment,null],n));h=Object(A.k)("#ChatRoom_ServerMessage_Invited_Multiple",f,d)}else h=Object(A.k)("#ChatRoom_ServerMessage_Invited",n[0],d);return m.createElement(w.b,{style:"server"},m.createElement("div",{className:"msg serverMsg"},m.createElement("div",{className:"msgText"},i?h:" ")))},t=Object(o.c)([O.a],t)}(m.Component),He=(m.Component,function(e){var t=e.children;return m.createElement(w.b,{style:"server"},m.createElement("div",{className:"msg serverMsg"},m.createElement("div",{className:"msgText"},t)))}),We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnAnimationStart=function(){this.m_nAnimationsInFlight||(this.m_nAnimationsInFlight=0),this.m_nAnimationsInFlight++},t.prototype.OnAnimationEnd=function(){this.m_nAnimationsInFlight&&this.m_nAnimationsInFlight--,this.m_nAnimationsInFlight||this.props.msg.OnAnimationEnd()},t.prototype.render=function(){var e,t,n=this.props,o=n.msg,r=n.speakerWidth,i=n.chatView,a=n.onUpdate,s=n.children,c=n.extraClassName,u=i.chat,p=o.strMessage,d=this.props.hideTimeStamp||i.IsChatRoom(),h=!d&&l.f.FriendStore.GetPlayer(o.unAccountID),f=Object(Ae.a)(p);if(o.eErrorSending!=F.g.None)switch(o.eErrorSending){case F.g.NotFriends:t="ChatMessageErrorSending",e=m.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(A.d)("#Chat_ErrorSending_NotFriends"));break;case F.g.RateLimitExceeded:t="ChatMessageErrorSending",e=m.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(A.d)("#Chat_ErrorSending_RateLimitExceeded"));break;case F.g.NoChatPermissionInGroup:t="ChatMessageErrorSendingPermissionDenied",e=m.createElement("div",{className:"ChatMessageErrorPermissionDeniedAlert"},m.createElement(j.F,null),Object(A.d)("#Chat_ErrorPermissionDenied"));break;case F.g.Generic:default:t="ChatMessageErrorSending",e=m.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(A.d)("#Chat_ErrorSending"))}var _=Object(R.a)("msg",c,t,{isCurrentUser:u.self.accountid===o.unAccountID,HasTimeStamp:!d,EmojiOnly:Ae.d(p)}),g={width:r?r+"px":void 0},b={chat:u,unAccountIDSender:o.unAccountID,rtTimestamp:o.rtTimestamp,key:o.UniqueKey(),onLoad:a,bUseLargeEmoticons:Object(Ae.a)(p),bAnimate:o.eAnimationState===F.h.Animating,onAnimationStart:this.OnAnimationStart,onAnimationEnd:this.OnAnimationEnd};p=u.ChatStore.TextFilterStore.FilterText(o.unAccountID,p);var v=s||m.createElement(Ne.a,{bbcode:p,context:b,parser:u.GetBBCodeParser()}),y=Object(R.a)("msgText",{MsgNoUserContent:!o.HasUserContent(),EmoticonOnly:f});return m.createElement("div",{className:_},!d&&m.createElement(ze,{className:"FriendChatTimeStamp",friend:h,style:g},m.createElement(C.f,{rtime:o.rtTimestamp,bTimeOnly:!0})),e,m.createElement(w.b,null,m.createElement("div",{className:y},v)))},Object(o.c)([N.a],t.prototype,"OnAnimationStart",null),Object(o.c)([N.a],t.prototype,"OnAnimationEnd",null),t=Object(o.c)([O.a],t)}(m.Component),ze=Object(O.a)((function(e){var t=e.friend.persona,n=!1;t.m_broadcastAccountId&&(n=!0);var o=Object(R.a)(e.className,(t.is_ingame?"ingame":t.is_online&&"online")||"offline",{away:t.is_awayOrSnooze,watchingbroadcast:n});return m.createElement("div",{className:o,style:e.style},e.children)})),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetChatRoomSpeakerClass=function(e){var t=e.persona;return t.is_ingame?Pe.a.SpeakerName_InGame:t.m_broadcastAccountId?Pe.a.SpeakerName_WatchingBroadcast:t.is_online?Pe.a.SpeakerName_Online:Pe.a.SpeakerName_Default},t.prototype.render=function(){var e,t,n=this.props.friend,o="";if(this.props.chatView.IsChatRoom()){var i=this.props.chatView.chat,a=void 0;switch(i.GetMember(n.accountid)&&(a=i.GetGroup().GetMemberRank(n.accountid)),a){default:break;case 30:o="Moderator";break;case 40:o="Officer";break;case 50:o="Owner",i.GetGroup().BIsClanChatRoom()||(t=m.createElement("div",{className:"rankIcon rankOwner"},m.createElement(j.l,null)))}i.GetGroup().BIsClanChatRoom()&&(a>=40?t=m.createElement("div",{className:"rankIcon rankOwner"},m.createElement("img",{src:r.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_officer.png"})):a>=30&&(t=m.createElement("div",{className:"rankIcon rankOwner"},m.createElement("img",{src:r.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_moderator.png"}))))}else o="";e="speakerName "+this.GetChatRoomSpeakerClass(n);var s="avatar speakerAvatar",c=null,u=null;if(n.BLoadedEquippedItems()){var p=n.GetEquippedProfileItems();p&&(c=p.animated_avatar,(u=p.avatar_frame)&&u.image_small&&u.image_small.length>0&&(s+=" hasAvatarFrame"))}var d=l.f.SettingsStore.FriendsSettings.bAnimatedAvatars&&n.persona.is_online,h=l.f.GetServerRTime32()-this.props.msg.rtTimestamp<60;return m.createElement(w.b,{style:"speaker allow-embedded-newlines",text:["["+Object(Be.a)(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",n.primary_display_name+":"]},m.createElement("div",{className:"ChatSpeaker ChatRoomSpeaker SpeakerLineBreak"+(n.accountid==this.props.chatView.chat.self.accountid?" isCurrentUser":"")},m.createElement(ze,{friend:n,className:"speaker"},m.createElement(P.e,{friend:n,context:this.props.friendRenderContext},m.createElement("div",{className:"speakerHoverArea "+o},t,m.createElement(E.b,{loopDuration:d&&h?"Medium":"None",className:s,persona:n.persona,animatedAvatar:c,avatarFrame:u,size:"Small"}),m.createElement("div",{className:"speakerStatus"}),m.createElement("div",{className:e},n.primary_display_name,!n.is_display_name_nickname&&n.has_secondary_display_name&&m.createElement("span",{className:"playerNickname"}," (",n.secondary_display_name,")"),n.is_display_name_nickname&&m.createElement("span",{className:"playerNicknameBracket",title:Object(A.d)("#isNickname")},"*")))),m.createElement("div",{className:"speakerTimeStamp"},m.createElement(C.f,{rtime:this.props.msg.rtTimestamp,bTimeOnly:!1})))))},t=Object(o.c)([O.a],t)}(m.Component),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnUpdate=function(){this.props.onUpdate("ChatMessageSlashEmote "+this.props.msg.UniqueKey())},t.prototype.render=function(){var e=this.props.msg,t=this.props.chatView.chat,n=l.f.FriendStore.GetPlayer(e.unAccountID),o=e.strMessage.slice(e.strMessage.search(/\s/g)+1),r=Object(R.a)("speaker",n.persona.is_ingame?"ingame":n.persona.is_online?"online":"offline"),i={width:this.props.speakerWidth?this.props.speakerWidth+"px":void 0},a=Object(R.a)("msg","ChatMsgSlashEmote","ChatRoomSlashEmote",{isCurrentUser:t.self.accountid===e.unAccountID,ChatMessageErrorSending:e.eErrorSending!=F.g.None});return m.createElement("div",{className:a},e.eErrorSending!=F.g.None&&m.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(A.d)("#Chat_ErrorSending")),m.createElement("div",{className:"SpeakerLineBreak"+(e.unAccountID==t.self.accountid?" isCurrentUser":"")},m.createElement("div",{className:r},m.createElement(P.e,{friend:n,context:{chat:t,chatContext:"message"}},m.createElement(w.b,{style:"speaker allow-embedded-newlines",text:["["+Object(Be.a)(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",n.display_name+":"]},m.createElement("div",{className:"speakerHoverArea"},m.createElement("img",{className:"avatar speakerAvatar",src:n.persona.avatar_url,onLoad:this.OnUpdate}),m.createElement("div",{className:"speakerStatus"}),m.createElement("div",{className:"speakerName",style:i},n.display_name)))),m.createElement(w.b,{style:"force-display append-innertext",text:"/me"},m.createElement("div",{className:"msgText"},m.createElement(Ne.a,{bbcode:o,context:{chat:t,unAccountIDSender:e.unAccountID,rtTimestamp:e.rtTimestamp,onUpdate:this.props.onUpdate},parser:t.GetBBCodeParser()}))),m.createElement("div",{className:"speakerTimeStamp"},m.createElement(C.f,{rtime:e.rtTimestamp,bTimeOnly:!1})))))},Object(o.c)([N.a],t.prototype,"OnUpdate",null),t=Object(o.c)([O.a],t)}(m.Component),Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return m.createElement(We,Object(o.a)({},this.props,{extraClassName:"ChatMessageDeleted"}),m.createElement("div",{className:"msgText"},m.createElement("span",{className:"filteredURL bb_removedlink"},Object(A.d)("#Chat_MessageDeleted"))))},t=Object(o.c)([O.a],t)}(m.Component),Xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.msg,t=this.props.friendRenderContext;if(11==e.eServerMsgType){var n={unAccountIDSender:0,chat:t.chat,rtTimestamp:e.rtTimestamp,key:e.UniqueKey(),onLoad:void 0};return m.createElement(He,null,m.createElement(Ne.a,{bbcode:this.props.msg.strServerMsgAppCustomLocalized,context:n,parser:t.chat.GetBBCodeParser()}))}var r=function(e){switch(e.eServerMsgType){case 1:var t=l.f.FriendStore.GetPlayer(e.unAccountID);return{strToken:"#ChatRoom_ServerMessage_RenameChatRoom",parts:[e.strServerMsgParam,t]};case 2:return{strToken:"#ChatRoom_ServerMessage_Joined",parts:[l.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID)]};case 3:return{strToken:"#ChatRoom_ServerMessage_Parted",parts:[l.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID)]};case 4:var n=l.f.FriendStore.GetPlayer(e.unAccountID);return{strToken:"#ChatRoom_ServerMessage_Kicked",parts:[l.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID),n]};case 9:t=l.f.FriendStore.GetPlayer(e.unAccountID);return e.strServerMsgParam.length?{strToken:"#ChatRoom_ServerMessage_ChatRoomTaglineChanged",parts:[e.strServerMsgParam,t]}:{strToken:"#ChatRoom_ServerMessage_ChatRoomTaglineRemoved",parts:[t]};case 10:return{strToken:"#ChatRoom_ServerMessage_ChatRoomAvatarChanged",parts:[t=l.f.FriendStore.GetPlayer(e.unAccountID)]};case 5:return{strToken:"#ChatRoom_ServerMessage_Invited",parts:[l.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID),l.f.FriendStore.GetPlayer(e.unAccountID)]};default:return{strToken:"#ChatRoom_ServerMessage_Unhandled",parts:[]}}}(e),i=r.parts.length?xe.apply(void 0,Object(o.g)([t,r.strToken],r.parts)):Object(A.d)(r.strToken);return m.createElement(He,null,i)},t=Object(o.c)([O.a],t)}(m.Component),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.msg,t=this.props.friendRenderContext,n={unAccountIDSender:0,chat:t.chat,rtTimestamp:e.rtTimestamp,key:e.UniqueKey(),onLoad:void 0};return m.createElement(He,null,m.createElement(Ne.a,{bbcode:e.strMessage,context:n,parser:t.chat.GetBBCodeParser()}))},t=Object(o.c)([O.a],t)}(m.Component),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return m.createElement(w.b,{style:"invite",text:this.props.msg.strMessage},m.createElement("div",{className:"msg"},m.createElement("div",{className:"msg voiceChannelInvite"},this.props.msg.strMessage),m.createElement("div",{className:"msg voiceChannelInviteClear"})))},t=Object(o.c)([O.a],t)}(m.Component),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(){this.props.onUpdate("ChatMessageBlocks "+this.props.chatView.GetUniqueID())},t.prototype.renderBlock=function(e){var t,n=this.props,r=this.props.chatView,i=r.chat.chat_message_blocks,a=!r.IsChatRoom()&&i.time_passes_index,s=r.IsChatRoom()?r.chat.first_unread_msg_time:Re.j,c=i.message_blocks[e],l=0==e?Re.j:i.message_blocks[e-1].GetRTimeLastMessage();if(s&&l<=s&&c.GetRTimeLastMessage()>s){var u=c,p=void 0;s>c.GetRTimeFirstMessage()&&(p=(t=c.CreateVirtualSplitOnTimestamp(s))[0],u=t[1],Object(G.a)(p.messages.length,"No messages in prefix"));var d=s;return m.createElement(m.Fragment,{key:c.UniqueKey()},p&&m.createElement($e,Object(o.a)({},n,{block:p,bIsInitialBlock:0===e,bShowTimePasses:e===a})),m.createElement(rt,{rtTimestamp:d,bUnread:!0}),u.messages.length>0&&m.createElement($e,Object(o.a)({},n,{block:u,bIsInitialBlock:!1,bShowTimePasses:!1})))}return m.createElement($e,Object(o.a)({},n,{key:c.UniqueKey(),block:c,bIsInitialBlock:0===e,bShowTimePasses:e===a}))},t.prototype.render=function(){var e=this;this.props;return this.props.chatView.chat.chat_message_blocks.message_blocks.map((function(t,n){return e.renderBlock(n)}))},t=Object(o.c)([O.a],t)}(m.Component),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(){this.props.block.is_last_block&&this.props.onUpdate("ChatMessageBlock "+this.props.block.UniqueKey())},t.prototype.render=function(){var e,t,n=this.props,r=n.block,i=n.bIsInitialBlock,a=n.bShowTimePasses,s=Object(o.f)(n,["block","bIsInitialBlock","bShowTimePasses"]),c=s.friendRenderContext,u=r.messages;if(r.BIsInvite()?e=m.createElement(Ue,{messages:u,friendRenderContext:c}):r.BIsServerMsg()?e=m.createElement(it,{block:r,friendRenderContext:c}):r.BIsLocalMsg()?e=m.createElement(at,{block:r,friendRenderContext:c}):u.length&&(e=m.createElement(tt,Object(o.a)({},s,{messages:u,bLastMessageBlock:r.is_last_block}))),r.is_last_block){var p=l.f.GetLocalMidnightInRTime32();r.GetRTimeMidnightBeforeBlock()!=p&&(t=m.createElement(rt,{rtTimestamp:p}))}else r.GetRTimeMidnightBeforeBlock()!=r.GetRTimeMidnightBeforeNextBlock()&&(t=m.createElement(rt,{rtTimestamp:r.GetRTimeMidnightBeforeNextBlock()}));return m.createElement(m.Fragment,null,i&&u.length>0&&m.createElement(et,{msg:u[0]}),a&&m.createElement(rt,{rtTimestamp:u[0].rtTimestamp,bTimePassesLine:!0}),e,t)},t=Object(o.c)([O.a],t)}(m.Component);function et(e){return e.msg.rtTimestamp<l.f.GetLocalMidnightInRTime32()?m.createElement(rt,{rtTimestamp:e.msg.rtTimestamp}):null}var tt=function(e){function t(t){var n=e.call(this,t)||this;return n.m_element=m.createRef(),n.state={bHoveringDelete:!1},n}return Object(o.d)(t,e),t.prototype.OnHoverDelete=function(e){this.setState({bHoveringDelete:e})},t.prototype.CopyMessage=function(){Object(w.a)(this.m_element.current)},t.prototype.SelectMessage=function(e){e.getSelection().selectAllChildren(this.m_element.current)},t.prototype.OnMessageBlockContextMenu=function(e){var t,n=this,o=this.props.messages[0].unAccountID;this.props.chatView.chat instanceof i.a&&(t=this.props.chatView.chat);var r,a=[],s=Object(k.q)(e),c=s.getSelection(),l=c&&c.rangeCount>0&&c.toString().length>0;return r=document.queryCommandEnabled("copy")||l?function(){s.document.execCommand("copy")}:this.CopyMessage,a.push(m.createElement(L.d,{key:"copy",onSelected:r},Object(A.d)("#ContextMenu_Copy"))),a.push(m.createElement(L.d,{key:"select",onSelected:function(){n.SelectMessage(s)}},Object(A.d)("#Chat_Actions_Select_Message"))),t&&t.BCanDeleteMemberMessages(o)&&a.push(m.createElement(L.d,{key:"delete",onSelected:function(){ot(s,t,n.props.messages)}},Object(A.d)("#Chat_Actions_Delete"))),a.length?Object(B.a)(m.createElement(L.c,null,a),e):null},t.prototype.componentDidMount=function(){var e=this.props.chatView,t=this.props.messages[0].unAccountID;e instanceof ke.a&&e.virtualizer&&e.virtualizer.SubscribeToPersona(t)},t.prototype.componentDidUpdate=function(e){var t=this.props.chatView;e.messages[0].unAccountID!==this.props.messages[0].unAccountID&&t instanceof ke.a&&t.virtualizer&&(t.virtualizer.UnsubscribeFromPersona(e.messages[0].unAccountID),t.virtualizer.SubscribeToPersona(this.props.messages[0].unAccountID))},t.prototype.componentWillUnmount=function(){var e=this.props.chatView;e instanceof ke.a&&e.virtualizer&&e.virtualizer.UnsubscribeFromPersona(this.props.messages[0].unAccountID)},t.prototype.render=function(){var e=!0,t=!1,n=this.props.bLastMessageBlock,r=this.props.messages[0].unAccountID,i=l.f.FriendStore.GetPlayer(r),a=this.props.chatView.IsChatRoom()?this.props.chatView.chat:null,s=a&&a.BCanDeleteMemberMessages(r),c=s&&this.state.bHoveringDelete,u="ChatMessageBlock",p=[];if(a&&i.is_blocked)p.push(m.createElement(Fe,{key:"blocked"})),u+=" ChatMessageBlock_BlockedSender";else{this.props.messages.length&&"/me"===this.props.messages[0].GetSlashCommand()&&(e=!1);for(var d=0,h=!1,f=0;f<this.props.messages.length;f++){var _=this.props.messages[f],g=!0;if(!a){var b=Math.floor(_.rtTimestamp/60);d&&b!=d?(g=!1,t=!0):n&&t&&f==this.props.messages.length-1&&(g=!1),d=b}var v={msg:_,key:_.UniqueKey(),chatView:this.props.chatView,hideTimeStamp:g,onUpdate:this.props.onUpdate};_.eDeleteState!=F.f.Deleting&&_.eDeleteState!=F.f.Deleted?(h=!1,"/me"===_.GetSlashCommand()?p.push(m.createElement(Ke,Object(o.a)({},v))):_ instanceof F.d?(e=!1,p.push(m.createElement(Je,Object(o.a)({},v)))):p.push(m.createElement(We,Object(o.a)({},v,{speakerWidth:this.props.speakerWidth})))):(h||p.push(m.createElement(Ye,Object(o.a)({},v,{speakerWidth:this.props.speakerWidth}))),h=!0)}}return n&&(u+=" LastMessageBlock",t&&(u+=" HasInternalTimeStamp")),c&&(u+=" ChatMessageBlock_HighlightDelete"),1!=p.length||a||(u+=" SingletonMsg"),m.createElement(w.b,null,m.createElement("div",{ref:this.m_element,className:u,onContextMenu:this.OnMessageBlockContextMenu},e&&m.createElement(qe,{friend:i,chatView:this.props.chatView,msg:this.props.messages[0],friendRenderContext:this.props.friendRenderContext,key:"speaker",speakerWidth:this.props.speakerWidth,onUpdate:this.props.onUpdate}),s&&m.createElement(nt,{chatRoom:a,messages:this.props.messages,onHover:this.OnHoverDelete}),p))},Object(o.c)([N.a],t.prototype,"OnHoverDelete",null),Object(o.c)([N.a],t.prototype,"CopyMessage",null),Object(o.c)([N.a],t.prototype,"SelectMessage",null),Object(o.c)([N.a],t.prototype,"OnMessageBlockContextMenu",null),t=Object(o.c)([O.a],t)}(m.Component),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnMouseEnter=function(){this.props.onHover(!0)},t.prototype.OnMouseLeave=function(){this.props.onHover(!1)},t.prototype.OnDeleteMessages=function(e){ot(Object(k.q)(e),this.props.chatRoom,this.props.messages)},t.prototype.render=function(){return m.createElement("div",{className:"ChatMessageBlockDelete",onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave,onClick:this.OnDeleteMessages,title:Object(A.d)("#Chat_Actions_Delete")},m.createElement(j.kb,null))},Object(o.c)([N.a],t.prototype,"OnMouseEnter",null),Object(o.c)([N.a],t.prototype,"OnMouseLeave",null),Object(o.c)([N.a],t.prototype,"OnDeleteMessages",null),t}(m.Component);function ot(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c,u,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:return 0==n.length?[2]:(r=n[0].unAccountID,i=l.f.FriendStore.GetPlayer(r).primary_display_name,a=Object(A.d)("#Chat_Actions_DeleteChatMessages"),s=Object(A.d)("#Chat_Actions_DeleteChatMessages_Confirm",i),c=Object(A.d)("#Chat_Actions_Delete"),[4,Object(S.a)(e,a,s,c)]);case 1:return o.sent()?[4,t.DeleteChatMessages(n)]:[2];case 2:return 1==(u=o.sent())||(p=15==u?"#Chat_Actions_DeleteChatMessage_FailAccess":"#Chat_Actions_DeleteChatMessage_Fail",s=Object(A.d)(p,i),Object(S.c)(e,a,s)),[2]}}))}))}var rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.shouldComponentUpdate=function(e){return e.rtTimestamp!==this.props.rtTimestamp||e.bUnread!==this.props.bUnread||e.bTimePassesLine!==this.props.bTimePassesLine},t.prototype.render=function(){var e,t=l.f.RTime32ToDate(this.props.rtTimestamp),n=["msg","timeDivision"];if(this.props.bUnread){var o={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};e=Object(A.d)("#ChatRoom_New_Messages",t.toLocaleDateString(A.c.GetPreferredLocales(),o)),n.push("new_messages")}else if(this.props.bTimePassesLine)e="",n.push("time_passes");else{o={weekday:"long",year:"numeric",month:"long",day:"numeric"};e=t.toLocaleDateString(A.c.GetPreferredLocales(),o)}return m.createElement(w.b,{style:"timestamp",text:e},m.createElement("div",{className:n.join(" ")},m.createElement("div",{className:"preHorizDivider"}),e,m.createElement("div",{className:"horizDivider"})))},t}(m.Component),it=function(e){var t=e.block,n=e.friendRenderContext,o=t.messages.reduce((function(e,t){if(!e.length)return e.push([t]),e;var n=e[e.length-1],o=n[0],r=st(o),i=st(t);return r&&i?(n.push(t),e):(e.push([t]),e)}),[]);return m.createElement(m.Fragment,null,o.map((function(e){return st(e[0])?m.createElement(ct,{key:e[0].UniqueKey(),messages:e,friendRenderContext:n}):e.map((function(e){return m.createElement(Xe,{msg:e,key:e.UniqueKey(),friendRenderContext:n})}))})))},at=function(e){var t=e.block,n=e.friendRenderContext;return m.createElement(m.Fragment,null,t.messages.map((function(e){return m.createElement(Qe,{msg:e,key:e.UniqueKey(),friendRenderContext:n})})))},st=function(e){return 2===e.eServerMsgType||3===e.eServerMsgType},ct=function(e){var t,n=e.messages,o=e.friendRenderContext,r=n.reduce((function(e,t){return 2===t.eServerMsgType&&e.rgJoiners.push(t.unAccountID),3===t.eServerMsgType&&e.rgLeavers.push(t.unAccountID),e}),{rgLeavers:[],rgJoiners:[]}),i=r.rgLeavers,a=r.rgJoiners;return i.length||a.length?(t=0===i.length?a.length>2?Object(A.k)("#ChatRoom_ServerMessage_Joined_Number",m.createElement(ut,{accountids:a})):2===a.length?Object(A.k)("#ChatRoom_ServerMessage_Joined_Multiple",m.createElement(lt,{context:o,accountid:a[0]}),m.createElement(lt,{context:o,accountid:a[1]})):Object(A.k)("#ChatRoom_ServerMessage_Joined",m.createElement(lt,{context:o,accountid:a[0]})):0===a.length?i.length>2?Object(A.k)("#ChatRoom_ServerMessage_Parted_Number",m.createElement(ut,{accountids:i})):2===i.length?Object(A.k)("#ChatRoom_ServerMessage_Parted_Multiple",m.createElement(lt,{context:o,accountid:i[0]}),m.createElement(lt,{context:o,accountid:i[1]})):Object(A.k)("#ChatRoom_ServerMessage_Parted",m.createElement(lt,{context:o,accountid:i[0]})):1===i.length&&1===a.length?Object(A.k)("#ChatRoom_ServerMessage_SingleJoined_SingleParted",m.createElement(lt,{context:o,accountid:a[0]}),m.createElement(lt,{context:o,accountid:i[0]})):1===i.length?Object(A.k)("#ChatRoom_ServerMessage_MultipleJoined_SingleParted",m.createElement(ut,{accountids:a}),m.createElement(lt,{context:o,accountid:i[0]})):1===a.length?Object(A.k)("#ChatRoom_ServerMessage_SingleJoined_MultipleParted",m.createElement(lt,{context:o,accountid:a[0]}),m.createElement(ut,{accountids:i})):Object(A.k)("#ChatRoom_ServerMessage_MultipleJoined_MultipleParted",m.createElement(ut,{accountids:a}),m.createElement(ut,{accountids:i})),m.createElement(He,null,t)):null},lt=Object(O.a)((function(e){var t=e.context,n=e.accountid,o=l.f.FriendStore.GetPlayer(n);return m.createElement(P.e,{friend:o,context:t},m.createElement("span",null,o.display_name))})),ut=Object(O.a)((function(e){var t=e.accountids.map((function(e){return l.f.FriendStore.GetPlayer(e)}));return m.createElement("span",{title:t.map((function(e){return e.display_name})).join(", ")},t.length)})),pt=n("syWt"),mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chatSubscribed:null},t.LOG=je.b.create((function(){return t.props.chatView.GetUniqueID()}),!1),t.m_bLoadHistoryInProgress=!1,t.m_bLoadingOperationInProgress=!1,t.m_bHasPendedLoadOlder=!1,t.m_nIgnoreScrollUpUntilTime=0,t}return Object(o.d)(t,e),t.prototype.GetScrollTop=function(){return this.LOG("scrollTop is",this.m_elHistoryScroll.scrollTop,"returning",Math.ceil(this.m_elHistoryScroll.scrollTop)),Math.ceil(this.m_elHistoryScroll.scrollTop)},t.prototype.GetScrollInfo=function(){if(this.m_elHistoryScroll){var e=this.m_elHistoryScroll,t=e.scrollHeight,n=e.clientHeight;return{scrollTop:this.GetScrollTop(),scrollHeight:t,clientHeight:n}}return{scrollTop:0,scrollHeight:0,clientHeight:0}},t.prototype.LogScrollInfo=function(e){},t.prototype.DumpChildSizes=function(){},t.prototype.OnHistoryScrollRef=function(e){this.m_elHistoryScroll&&this.m_window&&this.m_window.removeEventListener("resize",this.OnResize),this.m_elHistoryScroll=e,e&&(this.m_window=e.ownerDocument.defaultView,this.m_window.addEventListener("resize",this.OnResize))},t.prototype.OnScrollEvent=function(e){this.LogScrollInfo("*** OnScrollEvent"),this.OnScroll()},t.prototype.OnScroll=function(){var e=this.props.chatView,t=this.GetScrollInfo(),n=t.scrollTop,o=t.scrollHeight,r=t.clientHeight,i=e.lastScrollTop,a=e.lastScrollHeight,s=e.lastClientHeight;if(this.LogScrollInfo("OnScroll"),0!=r){var c=o-n<=r,l=a-i<=s;Object(G.a)(l==e.is_scrolled_to_bottom,e.GetUniqueID()+": computed and stored at bottom don't match"),this.LOG("bAtBottom",c,"bWasAtBottom",l);var u=n;l&&i-u==1&&(this.LOG("*** Scroll position off by one while pinned, ignoring and setting scrollTop to",i),u=i),c||l&&o!=a||u<i&&l&&Date.now()<this.m_nIgnoreScrollUpUntilTime?(this.LogScrollInfo("At bottom"),u<i&&l&&Date.now()<this.m_nIgnoreScrollUpUntilTime&&this.LOG("**** IGNORING APPARENT SCROLL UP WHILE PINNED TO BOTTOM IN LAYOUT"),u=o-r,Object(G.a)(u>=0,e.GetUniqueID()+": Onscroll client height bigger than scroll height"),e.is_scrolled_to_bottom=!0,u!=n&&(this.LOG("Setting scrollTop to",u),this.m_elHistoryScroll.scrollTop=u)):r<s&&l?(this.LogScrollInfo("Shrinking window while pinned to bottom"),u=o-r,e.is_scrolled_to_bottom=!0,u!=n&&(this.LOG("Setting scrollTop to",u),this.m_elHistoryScroll.scrollTop=u)):u<i?(this.LogScrollInfo("Detected scroll up"),e.is_scrolled_to_bottom=c):u!=i&&(this.LogScrollInfo("Detected scroll down but not to bottom"),e.is_scrolled_to_bottom=!1),e.lastScrollTop=u,e.lastScrollHeight=o,e.lastClientHeight=r;var p=!(e.is_scrolled_to_bottom==e.lastScrollHeight-e.lastScrollTop<=e.lastClientHeight);p&&(Object(G.a)(!p,e.GetUniqueID()+": setting mismatched computed and stored"),this.LOG(e.lastScrollTop,e.lastScrollHeight,e.lastClientHeight,e.is_scrolled_to_bottom)),u<10&&this.LoadOlderMessages()}else this.LOG("Onscroll zero clientHeight, ignoring")},t.prototype.ScrollToBottom=function(){var e=this.GetScrollInfo(),t=e.scrollHeight,n=e.clientHeight;this.LogScrollInfo("ScrollToBottom");var o=t-n;Object(G.a)(o>=0,this.props.chatView.GetUniqueID()+": ScrollToBottom client height bigger than scroll height"),this.m_animation&&this.m_animation.Cancel(),this.m_animation=new Ge.a(this.m_elHistoryScroll,{scrollTop:o},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start()},t.prototype.LoadOlderMessages=function(){var e=this,t=this.props.chatView,n=t.chat;if(n.IsMoreHistoryAvailable()){if(this.m_bLoadingOperationInProgress)return this.LOG("noting pended load"),void(this.m_bHasPendedLoadOlder=!0);var o=function(){return n.LoadMoreHistory().then((function(n){var r=e.GetScrollInfo().scrollHeight,i=t.lastScrollTop+r-t.lastScrollHeight;return e.LogScrollInfo("LoadOlderMessags"),e.m_elHistoryScroll.scrollTop=i,e.m_bHasPendedLoadOlder?(e.LOG("LoadOlderMessages starting pended"),e.m_bHasPendedLoadOlder=!1,o()):(e.m_bLoadingOperationInProgress=!1,n)}))};this.LOG("LoadOlderMessages starting"),this.m_bLoadHistoryInProgress=!0,this.m_bLoadingOperationInProgress=!0,this.DoAndDelay(this.m_window,o,500).then((function(t){e.LOG("loading over"),e.m_bLoadHistoryInProgress=!1}))}},t.prototype.DoAndDelay=function(e,t,n){var o=performance.now();return t().then((function(t){var r=performance.now()-o;return r<n?new Promise((function(o){return e.setTimeout(o.bind(null,t),n-r)})):t}))},t.prototype.Focus=function(){this.m_elHistoryScroll&&this.m_elHistoryScroll.focus()},t.prototype.componentDidMount=function(){if(this.LOG("ComponentDidMount"),this.UpdateChatViewCallback(),this.m_elHistoryScroll&&this.props.chatView.is_scrolled_to_bottom){var e=this.props.chatView,t=this.GetScrollInfo(),n=t.scrollHeight,o=t.clientHeight;e.lastScrollTop=n-o,e.lastScrollHeight=n,e.lastClientHeight=o,this.m_elHistoryScroll.scrollTop=e.lastScrollTop,Object(G.a)(e.is_scrolled_to_bottom==e.lastScrollHeight-e.lastScrollTop<=e.lastClientHeight,e.GetUniqueID()+": setting mismatched computed and stored")}},t.prototype.componentDidUpdate=function(){var e=this.props.chatView;this.UpdateChatViewCallback();var t=this.GetScrollInfo(),n=t.scrollTop,o=t.scrollHeight,r=t.clientHeight,i=e.lastScrollTop,a=e.lastScrollHeight;if(0!=r){var s=n;o==a?s=i:o-n<=r&&(s=o-r),this.LogScrollInfo("componentDidUpdate"),this.DelayedScrollTo(s)}else this.LOG("componentDidUpdate clientHeight == 0, ignoring")},t.prototype.UpdateChatViewCallback=function(){var e=this.state.chatSubscribed;this.props.chatView!=e&&(this.props.chatView.RemoveOnChatFrameChangedCallback(this.OnFrameChanged),e=null),!e&&this.props.isActive&&(this.props.chatView.AddOnChatFrameChangedCallback(this.OnFrameChanged),e=this.props.chatView),this.state.chatSubscribed!=e&&this.setState({chatSubscribed:e})},t.prototype.componentWillUnmount=function(){this.m_window&&(this.m_window.removeEventListener("resize",this.OnResize),this.m_window=void 0),this.props.chatView.RemoveOnChatFrameChangedCallback(this.OnFrameChanged)},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.chat==this.props.chatView.chat||(this.m_FriendRenderContext={chatContext:"message",chat:this.props.chatView.chat}),this.m_FriendRenderContext},t.prototype.OnFrameChanged=function(){var e,t=this.props.chatView,n=this.GetScrollInfo(),o=n.scrollHeight,r=n.clientHeight,i=t.lastScrollTop,a=t.lastScrollHeight,s=t.lastClientHeight;this.LogScrollInfo("OnFrameChanged"),this.m_nIgnoreScrollUpUntilTime=Date.now()+300,t.is_scrolled_to_bottom?(this.LOG("OnFrameChanged scrolling to bottom"),e=o-r):(this.LOG("OnFrameChanged preserving bottom"),e=i+s+o-a-r),this.LOG("OnFrameChanged setting scrollTop to",e),this.DelayedScrollTo(e)},t.prototype.DelayedScrollTo=function(e){var t=this;this.LOG("DelayedScrollTo",e),this.m_elHistoryScroll.scrollTop=e,this.m_window.setTimeout((function(){t.LOG("DelayedOnScroll firing",e),t.OnScroll()}),150)},t.prototype.OnUpdate=function(e){var t=this.props.chatView,n=this.GetScrollInfo(),o=n.scrollHeight,r=n.clientHeight;if(this.LogScrollInfo("OnUpdate for "+e),this.LOG("Scrolled to bottom is",t.is_scrolled_to_bottom),0==o)this.LOG("OnUpdate zero scroll height");else if(t.is_scrolled_to_bottom){this.LogScrollInfo("OnUpdate currently scrolled to bottom");var i=o-r;this.DelayedScrollTo(i)}else if(t.chat.BIsPrepend){t.chat.ResetPrepended();var a=t.lastScrollTop,s=t.lastScrollHeight,c=t.lastClientHeight;this.LogScrollInfo("OnUpdate prepended messages");i=a+c+o-s-r;this.DelayedScrollTo(i)}else this.LogScrollInfo("OnUpdate content updated, doing nothing")},t.prototype.OnResize=function(){var e=this.GetScrollInfo(),t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;this.LogScrollInfo("OnResize");var r=t;n-t<=o&&(r=n-o),this.DelayedScrollTo(r)},t.prototype.Swallow=function(e){e.stopPropagation(),e.preventDefault()},t.prototype.render=function(){var e=this.props,t=e.chatView,n=e.speakerLabelWidth,o=e.blockInteraction;if(!t||t!=this.state.chatSubscribed)return null;var r=t.chat,i=this.GetFriendRenderContext(),a=n&&Math.max(Math.min(n,120),50);this.LOG("Render"),r.LoadChatLogs();var s=l.f.SettingsStore.FriendsSettings.nChatFontSize,c="ChatHistoryContainer";return s==x.a.k_EChatFontSizeSmall?c+=" smallChatFont":s==x.a.k_EChatFontSizeLarge&&(c+=" largeChatFont"),m.createElement("div",{className:c},o&&m.createElement("div",{className:"interactionBlocker",onClick:this.Swallow}),m.createElement(pt.b,null),m.createElement(dt,{chatHistory:this,chatView:t}),m.createElement("div",{className:"chatHistoryScroll",ref:this.OnHistoryScrollRef,onScroll:this.OnScrollEvent,tabIndex:0},m.createElement("div",{className:"chatHistory"},m.createElement(Ze,{chatView:t,friendRenderContext:i,onUpdate:this.OnUpdate,speakerWidth:a}),m.createElement("div",{className:"disconnectBlocker"}))),m.createElement(Pt,{chatView:t}),m.createElement(ht,{chatView:t,action:this.ScrollToBottom}),m.createElement(pt.a,null))},Object(o.c)([Te.B],t.prototype,"m_bLoadHistoryInProgress",void 0),Object(o.c)([N.a],t.prototype,"DumpChildSizes",null),Object(o.c)([N.a],t.prototype,"OnHistoryScrollRef",null),Object(o.c)([N.a],t.prototype,"OnScrollEvent",null),Object(o.c)([N.a],t.prototype,"OnScroll",null),Object(o.c)([N.a],t.prototype,"ScrollToBottom",null),Object(o.c)([N.a],t.prototype,"LoadOlderMessages",null),Object(o.c)([N.a],t.prototype,"OnFrameChanged",null),Object(o.c)([N.a],t.prototype,"OnUpdate",null),Object(o.c)([N.a],t.prototype,"OnResize",null),Object(o.c)([N.a],t.prototype,"Swallow",null),t=Object(o.c)([O.a],t)}(m.Component),dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e="LoadingOlderMessages";return this.props.chatHistory.m_bLoadHistoryInProgress||(e+=" Hidden"),m.createElement("div",{className:e},m.createElement("span",null,Object(A.d)("#Chat_Loading")))},t=Object(o.c)([O.a],t)}(m.Component),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.chatView,n=e.action,o="ScrollToBottomButton";t.is_scrolled_to_bottom&&(o+=" Hidden");var r=Object(A.d)("#Chat_ScrollToBottom");return t.chat.unread_message_count>0&&(r=Object(A.i)("#Chat_UnreadMessages",t.chat.unread_message_count),o+=" UnreadMessages"),m.createElement("div",{className:o,onClick:n},m.createElement("span",null,r))},t=Object(o.c)([O.a],t)}(m.Component),ft=n("HzvH"),_t=m.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,"wcL0"))})),gt=function(e){function t(t){var n=e.call(this,t)||this;return n.m_msWentInactive=0,n.m_bShownTabIsGroupChat=!0,n.m_keyEventListener="keydown",n.m_refBroadcastContainer=m.createRef(),n.state={dropToInviteFriend:void 0,bShowBothChats:!1},n.props.popup&&n.props.popup.addEventListener(n.m_keyEventListener,n.OnHTMLKeyEvent),n}return Object(o.d)(t,e),t.prototype.OnDragEnter=function(e,t){if(Object(G.a)(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var n=e;n.friend&&n.sourceContext.group!=this.props.groupView.GetGroup()&&this.setState({dropToInviteFriend:n.friend})}return!0},t.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){Object(G.a)(e&&"friend"==e.type||0!=t.dataTransfer.files.length,"Invalid data type passed to ChatRoomGroupDialog.OnDrop");var n=this.props.groupView.GetChatView();if(e&&"friend"==e.type){var o=e;if(o.friend){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),u.i.DragDropManager.SetDropConsumed();var r=t.currentTarget.ownerDocument.defaultView;o.sourceContext.group!=this.props.groupView.GetGroup()&&jt({invitee:o.friend,chatview:null,invitedto:this.props.groupView.GetGroup()},Object(u.e)(this,t),r)}}else if(0!=t.dataTransfer.files.length){var i=t.dataTransfer.files[0];n.SetFileToUpload(i)}},t.prototype.componentDidUpdate=function(e){e.isActive&&!this.props.isActive?this.OnBecameInactive():this.props.isActive&&this.OnBecameActive()},t.prototype.OnBecameInactive=function(){this.m_msWentInactive=performance.now(),this.m_iIntervalInactive=SetBackgroundTimeout(this.forceUpdate.bind(this),10100),this.m_iIntervalVeryInactive=SetBackgroundTimeout(this.forceUpdate.bind(this),60100)},t.prototype.OnBecameActive=function(){this.m_msWentInactive=0,this.ClearIntervals()},t.prototype.GetTitleBarDragDropProps=function(){var e={rgAcceptedTypes:[],bAcceptsFiles:!0};return e.fnDrop=this.OnDrop,e},t.prototype.GetChatBodyDragDropProps=function(){var e={rgAcceptedTypes:["friend"],bAcceptsFiles:!0};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDragOver=this.OnDragOver,e.fnDrop=this.OnDrop,e},t.prototype.ClearIntervals=function(){this.m_iIntervalInactive&&(ClearBackgroundTimeout(this.m_iIntervalInactive),this.m_iIntervalInactive=void 0),this.m_iIntervalVeryInactive&&(ClearBackgroundTimeout(this.m_iIntervalVeryInactive),this.m_iIntervalVeryInactive=void 0)},t.prototype.OnHTMLKeyEvent=function(e){if(r.a.IN_CLIENT&&this.props.isActive&&e.altKey&&!e.ctrlKey&&!e.shiftKey){var t=this.props.groupView;if(!t)return;38===e.keyCode&&t.SelectPreviousChannel(),40===e.keyCode&&t.SelectNextChannel()}},t.prototype.componentDidMount=function(){(this.props.popup?this.props.popup:window).addEventListener("resize",this.OnLayoutChange)},t.prototype.componentWillUnmount=function(){this.ClearIntervals(),this.props.popup&&this.props.popup.removeEventListener(this.m_keyEventListener,this.OnHTMLKeyEvent),(this.props.popup?this.props.popup:window).removeEventListener("resize",this.OnLayoutChange)},t.prototype.CalculateBroadcastSectionStyles=function(e){if(this.props.groupView.m_bChatHidden)return{width:"100%",height:"100%"};var t=u.i.UIDisplayPrefs,n=t.nWatchPartyBroadcastHeightPercentage,o=t.nWatchPartyBroadcastWidthPercentage,r={};if(e){var i=n||66;if(r.height=i+"%",this.m_elMainContent){var a=this.m_elMainContent,s=a.clientWidth,c=a.clientHeight,l=9/16*s+50,p=Object(ue.a)(i,1,l/c*100);r.height=p+"%"}}else r.width=o?o+"%":"66%",r.overflowY="auto";return r},t.prototype.ShouldShowVerticalBroadcastChat=function(){return void 0!==this.props.groupView.m_bShowVerticalBroadcastChat?this.props.groupView.m_bShowVerticalBroadcastChat:!!this.m_elMainContent&&this.m_elMainContent.clientHeight/this.m_elMainContent.clientWidth>5/7},t.prototype.OnLayoutChange=function(){this.forceUpdate()},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})},t.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),n=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),o=this.ShouldShowVerticalBroadcastChat(),r=o?t.top:t.left,i=o?e.clientY:e.clientX,a=o?n.height:n.width,s=Object(ue.a)((i-r)/a*100,1,100),c=o?"nWatchPartyBroadcastHeightPercentage":"nWatchPartyBroadcastWidthPercentage";u.i.SetUIDisplayPref(c,s)},t.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})},t.prototype.OnLocalStreamChange=function(e){this.props.groupView.SetLocalBroadcastId(e)},t.prototype.HideChat=function(){this.props.groupView.SetChatHidden(!0)},t.prototype.ShowChat=function(){this.props.groupView.SetChatHidden(!1)},t.prototype.ToggleVerticalBroadcastChat=function(){this.props.groupView.SetVerticalBroadcastChat(!this.ShouldShowVerticalBroadcastChat()),this.props.groupView.SetChatHidden(!1)},t.prototype.SetMainContentRef=function(e){this.m_elMainContent=e,this.OnLayoutChange()},t.prototype.ToggleShowBothChats=function(){this.state.bShowBothChats?this.m_bShownTabIsGroupChat&&this.state.bShowBothChats&&this.props.groupView.SetGlobalBroadcastChatShown(!1):(this.m_bShownTabIsGroupChat=!this.props.groupView.m_bShowGlobalChat,this.props.groupView.SetGlobalBroadcastChatShown(!0)),this.setState({bShowBothChats:!this.state.bShowBothChats})},t.prototype.RenderInnerChatTabs=function(){var e=this.props.groupView,t=e.GetGroup();return m.createElement("div",{className:"ChatBodyControls"},m.createElement("div",{className:"Close",onClick:this.HideChat,title:Object(A.d)("#Broadcast_View_HideChat")},m.createElement(j.A,{showChat:!1})),m.createElement("div",{className:"InnerChatTabs"},m.createElement("div",{className:Object(R.a)("InnerChatTab",!e.m_bShowGlobalChat&&"Active"),onClick:function(){return e.SetGlobalBroadcastChatShown(!1)}},m.createElement(se.b,{group:t}),m.createElement(b.a,{group:t,micro:!0}),m.createElement("span",{className:"InnerChatTabLabel"},Object(A.d)("#Broadcast_Chat_GroupChatTab",t.name))),(!this.state.bShowBothChats||this.state.bShowBothChats&&this.ShouldShowVerticalBroadcastChat())&&m.createElement("div",{className:Object(R.a)("InnerChatTab",e.m_bShowGlobalChat&&"Active"),onClick:function(){return e.SetGlobalBroadcastChatShown(!0)}},m.createElement(j.w,null),m.createElement("span",{className:"InnerChatTabLabel"},Object(A.d)("#Broadcast_Chat_PublicChatTab")))),m.createElement("div",{className:"showBothTabs",onClick:this.ToggleShowBothChats,title:Object(A.d)(this.state.bShowBothChats?"#Broadcast_View_ShowSingleChats":"#Broadcast_View_ShowBothChats")},m.createElement(j.bb,null)))},t.prototype.render=function(){if(!this.props.groupView||!this.props.groupView.GetChatView())return null;var e=this.props.groupView.GetGroup(),t=this.props.groupView,n=t.GetSelectedChatView(),i=t.GetPopoverChatView(),a=n.chat,s=this.state.bShowBothChats&&t.isBroadcastShown,c=t.m_bShowGlobalChat,u=c&&s||!c&&!s,d=s&&t.isBroadcastShown||!s&&c,f=this.state.dropToInviteFriend?m.createElement(Bt,{chatView:n,friend:this.state.dropToInviteFriend}):null,_=!1,g=null,v=this.ShouldShowVerticalBroadcastChat(),y=t.m_bChatHidden,S=4;if(r.a.STEAM_TV&&(S=2),e.watching_broadcast_steamid&&t.isBroadcastShown){var C=this.CalculateBroadcastSectionStyles(v),O=m.createElement(_t,{ref:this.m_refBroadcastContainer,steamID:e.watching_broadcast_steamid.ConvertTo64BitString(),localSteamID:t.m_strLocalBroadcastId,watchLocation:S,bWebRTC:!1,onRequestClose:t.HideBroadcast,onLocalStreamChange:this.OnLocalStreamChange,actions:[m.createElement("div",{key:"ChatPosToggle",onClick:this.ToggleVerticalBroadcastChat,title:""+(v?Object(A.d)("#Broadcast_View_Stack_H"):Object(A.d)("#Broadcast_View_Stack_V")),className:"BroadcastChatPositionToggle "+(v?"right":"bottom")})],style:C,onTheaterMode:t.ToggleTheaterModeBroadcastChat,bVerticalBroadcastChat:!v});g=m.createElement(m.Fragment,null,O,!y&&m.createElement("div",{className:"BroadcastChatDivider "+(v?"vertical":"horizontal"),onMouseDown:this.OnGrabberMouseDown}),y&&m.createElement(kt,{onClick:this.ShowChat,edge:v?"bottom":"right"})),_=!0}else _=!1;var I=!1,E=!1,w={};if(!this.props.isActive){w.display="none";var M=this.m_msWentInactive?performance.now()-this.m_msWentInactive:6e4;M>=1e4&&(I=!0),M>=6e4&&!g&&(E=!0)}var D="chatWindow MultiUserChat",T="ChatRoomGroupDialog_contents";i&&(T+=" InsetWindowOpen"),s&&(T+=" BothChatsDisplayed"),e.IsNamedGroupChat()&&(D+=" namedGroup");var G="chatBody";this.state.dropToInviteFriend&&(G="chatBody chatRoomActiveDrop"),l.f.SettingsStore.FriendsSettings.bCompactFriendsList&&(D+=" compactView"),_&&(D+=" broadcastVisible");var R=null;this.props.bHideMemberList||(R=m.createElement(be,{groupView:this.props.groupView,inactive:I}));var k,N=this.props.bHideMessageInput||t.isBroadcastShown&&(!s&&t.m_bShowGlobalChat||y)?null:m.createElement(ee,{key:a.unique_id,chatView:t.GetActiveChatView(),isActive:this.props.isActive,disabled:!1}),B=m.createElement(p.a,Object(o.a)({style:w,className:"chatHistoryAndMembers"},this.GetChatBodyDragDropProps()),m.createElement(h.TransitionGroup,null,f),m.createElement("div",{className:"displayColumn fullWidth"},m.createElement("div",{className:"displayRow minHeightZero"},m.createElement("div",{className:"ChatRoomGroupDialog_history"},l.f.UIStore.show_winter_sale_ui&&!l.f.SettingsStore.FriendsSettings.bDisableRoomEffects&&m.createElement(ft.b,{effectManager:a.RoomEffectManager()}),m.createElement(mt,{chatView:n,isActive:this.props.isActive}),m.createElement(h.TransitionGroup,null,m.createElement(At,{groupView:t}))),m.createElement("div",{className:"dropTargetBox"}),R),N));if(e.watching_broadcast_steamid&&t.isBroadcastShown){var L=m.createElement(ce.a,{emoticonStore:l.f.ChatStore.EmoticonStore,steamID:e.watching_broadcast_steamid.ConvertTo64BitString(),broadcastID:"0",watchLocation:S,hidden:!t.m_bShowGlobalChat,className:this.state.bDraggingChatGrabber?"avoidEvents":void 0});k=m.createElement(m.Fragment,null,L)}var P="chatStack "+(v?"displayRow":"displayColumn");return d&&(P+=" GlobalChatVisible"),u&&(P+=" GroupChatVisible"),m.createElement(p.a,Object(o.a)({"data-activechat":this.props.isActive,style:w,className:D},this.GetTitleBarDragDropProps()),!E&&!this.props.bHideHeader&&m.createElement("div",{className:"chatHeader titleBarContainer"},m.createElement("div",{className:"chatHeaderGradient"}),m.createElement(b.b,{groupView:t}),m.createElement("div",{className:"disconnectBlocker"})),!E&&m.createElement(bt,{className:T,readyToRender:e.readyToRender},m.createElement(pe.a,{groupView:t,inactive:I}),m.createElement("div",{className:"ChatRoomGroup_MainAndChatEntry displayColumn",ref:this.SetMainContentRef},m.createElement("div",{className:"ChatRoomGroup_Main_ContentAndMembers displayRow"},m.createElement("div",{className:"ChatRoomGroup_Main_Content "+(v?"Vertical":"Horizontal")+" "+(y?"chatHidden":"")},g,(!t.m_bChatHidden||!t.isBroadcastShown)&&m.createElement("div",{className:G},t.isBroadcastShown&&this.RenderInnerChatTabs(),m.createElement("div",{className:P},B,s&&m.createElement("div",{className:"BothChatsSeperator"}),s&&!this.ShouldShowVerticalBroadcastChat()&&m.createElement("div",{className:"InnerChatTab",onClick:function(){return t.SetGlobalBroadcastChatShown(!0)}},m.createElement(j.w,null),m.createElement("span",{className:"InnerChatTabLabel"},Object(A.d)("#Broadcast_Chat_PublicChatTab"))),k),!u&&t.isBroadcastShown&&N))))))},Object(o.c)([N.a],t.prototype,"OnDragEnter",null),Object(o.c)([N.a],t.prototype,"OnDragLeave",null),Object(o.c)([N.a],t.prototype,"OnDragOver",null),Object(o.c)([N.a],t.prototype,"OnDrop",null),Object(o.c)([N.a],t.prototype,"OnHTMLKeyEvent",null),Object(o.c)([N.a],t.prototype,"ShouldShowVerticalBroadcastChat",null),Object(o.c)([N.a],t.prototype,"OnLayoutChange",null),Object(o.c)([N.a],t.prototype,"OnGrabberMouseDown",null),Object(o.c)([N.a],t.prototype,"HandleMouseMove",null),Object(o.c)([N.a],t.prototype,"UnregisterDragEvents",null),Object(o.c)([N.a],t.prototype,"OnLocalStreamChange",null),Object(o.c)([N.a],t.prototype,"HideChat",null),Object(o.c)([N.a],t.prototype,"ShowChat",null),Object(o.c)([N.a],t.prototype,"ToggleVerticalBroadcastChat",null),Object(o.c)([N.a],t.prototype,"SetMainContentRef",null),Object(o.c)([N.a],t.prototype,"ToggleShowBothChats",null),t=Object(o.c)([O.a],t)}(m.Component),bt=function(e){var t=e.className,n=e.readyToRender,o=e.children,r=m.createElement(le.a,{position:"center",string:Object(A.d)("#Chat_ChatRoomGroup_Requesting")});return m.createElement("div",{className:t},m.createElement(m.Suspense,{fallback:r},n?o:r))},vt=n("HAz9"),yt=n("s+DT"),St=n("ewzr"),Ct=m.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,"NB6M"))})),Ot=function(e){function t(t){var n=e.call(this,t)||this;return n.m_fnUnregisterDropComplete=void 0,n.m_bChatHidden=!1,n.m_refBroadcastContainer=m.createRef(),n.state={dropToInviteFriend:void 0,dropGroupToInviteFriend:void 0,dropClanToInvite:void 0,speakerLabelWidth:0},n.m_friendSteamId=yt.a.InitFromAccountID(t.chatView.chat.accountid_partner).ConvertTo64BitString(),n}return Object(o.d)(t,e),t.prototype.OnDragEnter=function(e,t){if(e?Object(G.a)("friend"==e.type||"chatroomgroup"==e.type||"clan"==e.type,"Invalid data type passed to FriendChatDialog.OnDrop"):Object(G.a)(t,"Invalid data type passed to FriendChatDialog.OnDrop"),!e)return!0;var n="friend"==e.type?e.friend:void 0;if(n&&n.accountid!==this.props.chatView.chat.accountid_partner)return this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=u.i.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropToInviteFriend:n}),!0;var o="chatroomgroup"==e.type?e.group:void 0;if(o)return this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=u.i.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropGroupToInviteFriend:o}),!0;var r="clan"==e.type?e.clan:void 0;return!r||(this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=u.i.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropClanToInvite:r}),!0)},t.prototype.OnDragLeave=function(){(this.state.dropToInviteFriend||this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0,dropGroupToInviteFriend:void 0,dropClanToInvite:void 0}))},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){e?Object(G.a)("friend"==e.type||"chatroomgroup"==e.type||"clan"==e.type,"Invalid data type passed to FriendChatDialog.OnDrop"):Object(G.a)(0!=t.dataTransfer.files.length,"Invalid data type passed to FriendChatDialog.OnDrop");var n=this.props.chatView;if(e){var o=t.currentTarget.ownerDocument.defaultView,r=n.chat.chat_partner,i="friend"==e.type?e.friend:void 0,a="chatroomgroup"==e.type?e.group:void 0,s="clan"==e.type?e.clan:void 0;if(i){if(r==i)return;this.state.dropToInviteFriend&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0})),u.i.DragDropManager.SetDropConsumed(),jt({invitee:i,chatview:n,invitedto:r},Object(u.e)(this,t),o)}else(a||s)&&((this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropGroupToInviteFriend:void 0,dropClanToInvite:void 0})),u.i.DragDropManager.SetDropConsumed(),s&&(a=l.f.ChatStore.GetChatRoomGroup(s.GetChatGroupIDIfLoaded())),jt({invitee:r,invitedto:a},Object(u.e)(this,t),o))}else if(0!=t.dataTransfer.files.length){var c=t.dataTransfer.files[0];n.SetFileToUpload(c)}},t.prototype.OnDropComplete=function(e){!e&&this.state.dropToInviteFriend&&(this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0}))},t.prototype.OnNameWidthChanged=function(e){this.setState({speakerLabelWidth:e})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.OnLayoutChange)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.OnLayoutChange)},t.prototype.CalculateBroadcastSectionStyles=function(e){if(this.m_bChatHidden)return{width:"100%",height:"100%"};var t=u.i.UIDisplayPrefs,n=t.nWatchPartyBroadcastHeightPercentage,o=t.nWatchPartyBroadcastWidthPercentage,r={};if(e){var i=n||66;if(r.height=i+"%",this.m_elMainContent){var a=this.m_elMainContent,s=a.clientWidth,c=a.clientHeight,l=9/16*s+50,p=Object(ue.a)(i,1,l/c*100);r.height=p+"%"}}else r.width=o?o+"%":"66%",r.overflowY="auto";return r},t.prototype.ShouldShowVerticalBroadcastChat=function(){return void 0!==this.m_bShowVerticalBroadcastChat?this.m_bShowVerticalBroadcastChat:!!this.m_elMainContent&&this.m_elMainContent.clientHeight/this.m_elMainContent.clientWidth>5/7},t.prototype.OnLayoutChange=function(){this.forceUpdate()},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents)},t.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),n=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),o=this.ShouldShowVerticalBroadcastChat(),r=o?t.top:t.left,i=o?e.clientY:e.clientX,a=o?n.height:n.width,s=Object(ue.a)((i-r)/a*100,1,100),c=o?"nWatchPartyBroadcastHeightPercentage":"nWatchPartyBroadcastWidthPercentage";u.i.SetUIDisplayPref(c,s)},t.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents)},t.prototype.HideChat=function(){this.SetChatHidden(!0)},t.prototype.ShowChat=function(){this.SetChatHidden(!1)},t.prototype.SetChatHidden=function(e){this.m_bChatHidden=e,this.forceUpdate()},t.prototype.ShowBroadcast=function(){var e=this;l.f.UIStore.SetFriendBroadcastVisible(this.m_friendSteamId,!0),SetBackgroundTimeout((function(){e.props.chatView.OnChatFrameChanged()}),30)},t.prototype.HideBroadcast=function(){var e=this;l.f.UIStore.SetFriendBroadcastVisible(this.m_friendSteamId,!1),l.f.UIStore.SetTheaterMode(!1),SetBackgroundTimeout((function(){e.props.chatView.OnChatFrameChanged()}),30)},t.prototype.ToggleVerticalBroadcastChat=function(){this.SetVerticalBroadcastChat(!this.ShouldShowVerticalBroadcastChat()),this.SetChatHidden(!1)},t.prototype.ToggleTheaterModeBroadcastChat=function(){l.f.UIStore.SetTheaterMode(!l.f.UIStore.GetTheaterMode())},t.prototype.SetVerticalBroadcastChat=function(e){this.m_bShowVerticalBroadcastChat=e},t.prototype.SetLocalBroadcastId=function(e){this.m_strLocalBroadcastId=e},t.prototype.SetMainContentRef=function(e){this.m_elMainContent=e,this.OnLayoutChange()},t.prototype.GetTitleBarDragDropProps=function(){var e={rgAcceptedTypes:[],bAcceptsFiles:!0};return e.fnDrop=this.OnDrop,e},t.prototype.GetChatBodyDragDropProps=function(){var e={rgAcceptedTypes:["friend","chatroomgroup","clan"],bAcceptsFiles:!0};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDragOver=this.OnDragOver,e.fnDrop=this.OnDrop,e},t.prototype.RenderInnerChatTabs=function(){return m.createElement("div",{className:"ChatBodyControls"},m.createElement("div",{className:"Close",onClick:this.HideChat,title:Object(A.d)("#Broadcast_View_HideChat")},m.createElement(j.A,{showChat:!1})),m.createElement(Rt,{chatView:this.props.chatView,additionalClasses:"broadcastVisible"}))},t.prototype.render=function(){if(!this.props.chatView)return null;var e,t=this.props.chatView.chat,n=l.f.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(t.accountid_partner),r=this.props.chatView.BVoiceActive(),i=l.f.UIStore.IsFriendBroadcastVisible(this.m_friendSteamId),a=t.GetShowNonFriendWarning(),s=this.state,c=s.dropToInviteFriend,u=s.dropGroupToInviteFriend,d=s.dropClanToInvite;c?e=m.createElement(Bt,{chatView:this.props.chatView,friend:this.state.dropToInviteFriend}):(u||d)&&(e=m.createElement(Lt,{chatView:this.props.chatView,group:this.state.dropGroupToInviteFriend,clan:this.state.dropClanToInvite}));var f=!1,_=null,g=this.ShouldShowVerticalBroadcastChat(),b=this.m_bChatHidden;if(i){var v=this.CalculateBroadcastSectionStyles(g);_=m.createElement(m.Suspense,{fallback:m.createElement("div",null)},m.createElement(Et,{ref:this.m_refBroadcastContainer,steamID:yt.a.InitFromAccountID(t.accountid_partner).ConvertTo64BitString(),localSteamID:this.m_strLocalBroadcastId,watchLocation:12,bWebRTC:!0,onRequestClose:this.HideBroadcast,actions:[m.createElement("div",{key:"ChatPosToggle",onClick:this.ToggleVerticalBroadcastChat,title:""+(g?Object(A.d)("#Broadcast_View_Stack_H"):Object(A.d)("#Broadcast_View_Stack_V")),className:"BroadcastChatPositionToggle "+(g?"right":"bottom")})],style:v,onTheaterMode:this.ToggleTheaterModeBroadcastChat}),!b&&m.createElement("div",{className:"BroadcastChatDivider "+(g?"vertical":"horizontal"),onMouseDown:this.OnGrabberMouseDown}),b&&m.createElement(kt,{onClick:this.ShowChat,edge:g?"bottom":"right"})),f=!0}else f=!1;var y={};this.props.isActive||(y.display="none");var S=Object(R.a)("chatWindow","MultiUserChat",r&&"VoiceActive",r&&l.f.ChatStore.VoiceChat.IsMicMuted()&&"MicMuted",n&&"VoiceRequested",a&&"NotAFriendOrApproved",l.f.SettingsStore.FriendsSettings.bCompactFriendsList&&"compactView",f&&"broadcastVisible"),C=Object(R.a)("chatBody",(c||u||d)&&"chatRoomActiveDrop"),O=this.m_bChatHidden&&i?null:m.createElement(ee,{key:t.unique_id,chatView:this.props.chatView,isActive:this.props.isActive,disabled:!1}),I=m.createElement(p.a,Object(o.a)({style:y,className:"chatHistoryAndMembers"},this.GetChatBodyDragDropProps()),m.createElement(h.TransitionGroup,null,e),m.createElement("div",{className:"displayColumn fullWidth"},m.createElement("div",{className:"displayRow minHeightZero"},a&&m.createElement(Nt,{chatView:this.props.chatView,friend:t.chat_partner}),m.createElement("div",{className:"ChatRoomGroupDialog_history"},l.f.UIStore.show_winter_sale_ui&&!l.f.SettingsStore.FriendsSettings.bDisableRoomEffects&&m.createElement(ft.b,{effectManager:t.RoomEffectManager()}),m.createElement(mt,{chatView:this.props.chatView,isActive:this.props.isActive,speakerLabelWidth:this.state.speakerLabelWidth,blockInteraction:a})),!i&&m.createElement(Rt,{chatView:this.props.chatView,additionalClasses:void 0}),m.createElement("div",{className:"dropTargetBox"})),O)),E="chatStack "+(g?"displayRow":"displayColumn")+" GroupChatVisible";return m.createElement(p.a,Object(o.a)({"data-activechat":this.props.isActive,style:y,className:S},this.GetTitleBarDragDropProps()),m.createElement("div",{className:"chatHeader"}),this.props.isActive&&m.createElement(It,{chatView:this.props.chatView,onNameWidthChanged:this.OnNameWidthChanged}),m.createElement(h.TransitionGroup,null,(r||n)&&m.createElement(h.CSSTransition,{key:"OneOnOneVoiceHeader",classNames:"OneOnOneVoice-anim",timeout:300},m.createElement("div",null,m.createElement(Tt,{chatView:this.props.chatView})))),m.createElement("div",{className:"ChatRoomGroupDialog_contents"},m.createElement("div",{className:"ChatRoomGroup_MainAndChatEntry displayColumn",ref:this.SetMainContentRef},m.createElement("div",{className:"ChatRoomGroup_Main_ContentAndMembers displayRow"},m.createElement("div",{className:"ChatRoomGroup_Main_Content "+(g?"Vertical":"Horizontal")+" "+(b?"chatHidden":"")},_,(!this.m_bChatHidden||!i)&&m.createElement("div",{className:C},i&&this.RenderInnerChatTabs(),m.createElement("div",{className:E},I)))))))},Object(o.c)([N.a],t.prototype,"OnDragEnter",null),Object(o.c)([N.a],t.prototype,"OnDragLeave",null),Object(o.c)([N.a],t.prototype,"OnDragOver",null),Object(o.c)([N.a],t.prototype,"OnDrop",null),Object(o.c)([N.a],t.prototype,"OnDropComplete",null),Object(o.c)([N.a],t.prototype,"OnNameWidthChanged",null),Object(o.c)([N.a],t.prototype,"ShouldShowVerticalBroadcastChat",null),Object(o.c)([N.a],t.prototype,"OnLayoutChange",null),Object(o.c)([N.a],t.prototype,"OnGrabberMouseDown",null),Object(o.c)([N.a],t.prototype,"HandleMouseMove",null),Object(o.c)([N.a],t.prototype,"UnregisterDragEvents",null),Object(o.c)([N.a],t.prototype,"HideChat",null),Object(o.c)([N.a],t.prototype,"ShowChat",null),Object(o.c)([N.a],t.prototype,"SetChatHidden",null),Object(o.c)([N.a],t.prototype,"ShowBroadcast",null),Object(o.c)([N.a],t.prototype,"HideBroadcast",null),Object(o.c)([N.a],t.prototype,"ToggleVerticalBroadcastChat",null),Object(o.c)([N.a],t.prototype,"ToggleTheaterModeBroadcastChat",null),Object(o.c)([N.a],t.prototype,"SetVerticalBroadcastChat",null),Object(o.c)([N.a],t.prototype,"SetLocalBroadcastId",null),Object(o.c)([N.a],t.prototype,"SetMainContentRef",null),t=Object(o.c)([O.a],t)}(m.Component),It=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.SpeakerLabel=function(e){e&&this.props.onNameWidthChanged(e.clientWidth)},t.prototype.render=function(){var e=this.props.chatView.chat,t=l.f.SettingsStore.FriendsSettings.nChatFontSize,n="speakerLabelWidthContainer";return t==x.a.k_EChatFontSizeSmall?n+=" smallChatFont":t==x.a.k_EChatFontSizeLarge&&(n+=" largeChatFont"),e.chat_partner.is_ready&&e.self.is_ready?m.createElement("div",{className:n,ref:this.SpeakerLabel},m.createElement("div",{className:"nameWidthLabel"},e.self.display_name+":"),m.createElement("div",{className:"nameWidthLabel"},e.chat_partner.display_name+":")):null},Object(o.c)([N.a],t.prototype,"SpeakerLabel",null),t=Object(o.c)([O.a],t)}(m.Component),Et=m.forwardRef((function(e,t){var n=e.steamID,r=e.localSteamID,i=e.watchLocation,a=e.bWebRTC,s=e.style,c=e.onRequestClose,l=e.actions,u=e.onTheaterMode,p=r||n;return m.createElement("div",{ref:t,style:Object(o.a)({display:"flex",flexDirection:"column"},s)},m.createElement("div",{className:"BroadcastSection"},m.createElement(Ct,{key:p,steamIDBroadcast:p,watchLocation:i,bWebRTC:a,onRequestClose:c,actions:l,onTheaterMode:u,onOpenLinkInNewWindow:C.e}),m.createElement("div",{className:"videoContainerSizer"})),m.createElement(wt,{steamID:n}))})),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnClick=function(e,t){var n=Object(St.a)(t,"friendbroadcast");Object(C.e)(e,n),e.stopPropagation()},t.prototype.render=function(){var e=this,t=new yt.a(this.props.steamID),n=l.f.FriendStore.GetPlayer(t.GetAccountID()),o=n.persona.GetCurrentGameIconURL(),r=n.persona.GetCurrentGameName(),i=n.persona.m_unGamePlayedAppID;return r||o?m.createElement("div",{className:"FriendChatBroadcastDetails"},m.createElement("div",{className:"FriendChatBroadcastDetails_PlayingText"},Object(A.d)("#broadcastDetails_Playing")),o&&m.createElement("img",{className:"FriendChatBroadcastDetails_Icon",src:o}),m.createElement("div",{className:"FriendChatBroadcastDetails_GameName",onClick:function(t){return e.OnClick(t,i)}},r)):null},Object(o.c)([N.a],t.prototype,"OnClick",null),t=Object(o.c)([O.a],t)}(m.Component),Mt=m.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,"wjNJ"))})),Dt=function(e){function t(t){var n=e.call(this,t)||this;return n.m_keyEventListener="keydown",n.macUserAgentStrings=/(MacIntel|Macintosh|Mac OS X)/,n.linuxUserAgentStrings=/(Linux|X11)/,-1==navigator.userAgent.search(n.macUserAgentStrings)&&-1==navigator.userAgent.search(n.linuxUserAgentStrings)||(n.m_keyEventListener="keyup"),n.props.popup&&n.props.popup.addEventListener(n.m_keyEventListener,n.OnHTMLKeyEvent),n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.props.popup&&this.props.popup.removeEventListener(this.m_keyEventListener,this.OnHTMLKeyEvent)},t.prototype.OnCopy=function(e){var t=this.props.popup||window;if(t){var n=t.getSelection();if(0!=n.rangeCount){var o=Object(w.c)(n.getRangeAt(0));void 0!==o&&("Win32"==t.navigator.platform&&(o=o.replace(/\n/g,"\r\n")),e.clipboardData.setData("text",o),e.preventDefault())}}},t.prototype.OnChatTabRef=function(e){this.m_refChatTabs=e},t.prototype.OnDragEnter=function(e){if(Object(G.a)(e&&("chattab"==e.type||"friend"==e.type||"chatroomgroup"==e.type),"Invalid data type passed to MultiChatDialog.OnDragEnter",e.type),"chattab"==e.type){var t=this.props.tabs,n=e;(n.tabSet!=t||t.tabCount>1)&&(t.Focus(),this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()!=n.tab&&this.m_refChatTabs.SetDragTab(n.tab))}return!0},t.prototype.OnDragLeave=function(){this.m_refChatTabs&&this.m_refChatTabs.SetDragTab(void 0)},t.prototype.OnDragOver=function(e){this.m_refChatTabs&&this.m_refChatTabs.UpdateDragOffset(e)},t.prototype.OnDrop=function(e,t){if(Object(G.a)(e&&("chattab"==e.type||"friend"==e.type||"chatroomgroup"==e.type),"Invalid data type passed to MultiChatDialog.OnDrop",e.type),"chattab"==e.type){var n=e,o=-1;this.m_refChatTabs&&(o=this.m_refChatTabs.state.iDragIndex),u.i.DragDropManager.SetDropConsumed(),n.tabSet!=this.props.tabs&&(n.tabSet.RemoveTab(n.tab),this.props.tabs.AddTab(n.tab),u.i.DragDropManager.EndDrag()),-1!=o&&this.props.tabs.MoveTabToIndex(n.tab,o),this.props.tabs.ActivateTab(n.tab),this.setState({tabDrag:void 0})}else if("friend"==e.type){u.i.DragDropManager.SetDropConsumed(),e.friend.OpenChatDialog(Object(u.e)(this,t))}else if("chatroomgroup"==e.type){u.i.DragDropManager.SetDropConsumed();var r=e;l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(u.e)(this),r.group,!0)}},t.prototype.OnHTMLKeyEvent=function(e){if(r.a.IN_CLIENT&&e.ctrlKey&&!e.altKey){if(!e.shiftKey&&9==e.keyCode||34==e.keyCode)this.props.tabs.ActivateNextTab();else if(9==e.keyCode||33==e.keyCode)this.props.tabs.ActivatePreviousTab();else{if("W"!=e.key&&"w"!=e.key)return;this.props.tabs.RemoveTab(this.props.tabs.activeTab)}return e.preventDefault(),void e.stopPropagation()}},t.prototype.OnKeyDown=function(e){var t=this.props.tabs.activeTab;if(t&&!(e.ctrlKey||e.altKey||e.metaKey||e.key.length>1)){var n=e.target,o=n&&n.tagName?n.tagName.toLowerCase():"";"input"!=o&&"select"!=o&&"textarea"!=o&&t.GetChatView().FocusTextInput()}},t.prototype.render=function(){var e=this,t=this.props.tabs.activeTab;this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()&&(t=this.m_refChatTabs.GetDragTab());var n=this.props.tabs.tabs.slice();this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()&&-1==n.indexOf(this.m_refChatTabs.GetDragTab())&&n.push(this.m_refChatTabs.GetDragTab()),n.sort((function(e,t){return e.GetUniqueID()<t.GetUniqueID()?1:-1}));var o=n.map((function(n){var o=null,r=n instanceof a.d&&n,i=n.IsBroadcast();return o=r?m.createElement(gt,{groupView:r,isActive:n==t,popup:e.props.popup}):i?m.createElement(Mt,{broadcastView:n,isActive:n==t,popup:e.props.popup}):m.createElement(Ot,{chatView:n.GetChatView(),isActive:n==t}),m.createElement(D.a,{key:n.GetUniqueID()},m.createElement(m.Suspense,{fallback:m.createElement("div",null)},o))}));return m.createElement(p.a,{className:"multiChatDialog",rgAcceptedTypes:["chattab","friend","chatroomgroup"],fnDragEnter:this.OnDragEnter,fnDragOver:this.OnDragOver,fnDragLeave:this.OnDragLeave,fnDrop:this.OnDrop,onKeyDown:this.OnKeyDown,onCopy:this.OnCopy,tabIndex:0},m.createElement(vt.a,{tabSet:this.props.tabs,popup:this.props.popup,activeTab:t,ref:this.OnChatTabRef,ResponsiveWindowState:this.props.ResponsiveWindowState,showOpenFriendsList:this.props.showOpenFriendsList}),m.createElement("div",{className:"chatDialogs"},0==o.length&&m.createElement("div",{className:"emptyChatDialogs"},Object(A.d)("#Chat_EmptyDialogsWindowMsg")),o))},Object(o.c)([N.a],t.prototype,"OnCopy",null),Object(o.c)([N.a],t.prototype,"OnChatTabRef",null),Object(o.c)([N.a],t.prototype,"OnDragEnter",null),Object(o.c)([N.a],t.prototype,"OnDragLeave",null),Object(o.c)([N.a],t.prototype,"OnDragOver",null),Object(o.c)([N.a],t.prototype,"OnDrop",null),Object(o.c)([N.a],t.prototype,"OnHTMLKeyEvent",null),Object(o.c)([N.a],t.prototype,"OnKeyDown",null),t=Object(o.c)([O.a],t)}(m.Component),Tt=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.InitiateVoiceChat=function(){var e=this.props.chatView.chat.accountid_partner;l.f.VoiceStore.InitiateFriendChat(e)},t.prototype.VoidOnClick=function(){},t.prototype.EndVoiceChat=function(){l.f.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==this.props.chatView.chat.accountid_partner&&l.f.VoiceStore.OnUserEndVoiceChat()},t.prototype.OnCloseClick=function(){l.f.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==this.props.chatView.chat.accountid_partner?l.f.VoiceStore.OnUserEndVoiceChat():l.f.VoiceStore.OnRejectOneOnOneVoiceChatForPartner(this.props.chatView.chat.accountid_partner)},t.prototype.render=function(){var e=l.f.VoiceStore.BInitiatedOneOnOneChat(this.props.chatView.chat.accountid_partner),t=l.f.CMInterface.steamid.GetAccountID(),n=this.props.chatView.chat.accountid_partner,o=l.f.FriendStore.GetPlayer(t),r=l.f.VoiceStore.BSelfHasAcceptedOrInitiatedOneOnOneChat(n),i=l.f.VoiceStore.BSelfHadPreviouslyJoinedOneOnOneChat(n),a=this.props.chatView.chat.chat_partner,s=l.f.VoiceStore.BPartnerHasAcceptedOrInitiatedOneOnOneChat(n),c=!r&&l.f.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(a.accountid),u=!1,p=!1,d=!1;l.f.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==n&&(u=l.f.VoiceStore.HasBeenAttemptingOverTwoSeconds()||l.f.VoiceStore.IsAttemptingReconnect(),p=!l.f.VoiceStore.BIsAccountFullyConnectedToActiveVoiceChat(t)||l.f.VoiceStore.IsAttemptingReconnect(),d=!l.f.VoiceStore.BIsAccountFullyConnectedToActiveVoiceChat(n));var f=void 0;f=e||r?m.createElement(h.CSSTransition,{key:t,classNames:"friend-anim",timeout:320},m.createElement(P.c,{friend:o,key:t,showVoiceLevel:!0,context:{chat:this.props.chatView.chat},listStatusIndicator:m.createElement("div",{className:"connectionSpinner"})})):m.createElement(h.CSSTransition,{key:t,classNames:"friend-anim",timeout:320},m.createElement("div",{className:"friend emptyFriend",onClick:!r&&this.InitiateVoiceChat},m.createElement("div",{className:"avatarHolder"},m.createElement("img",{className:"avatar",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",draggable:!1}))));var _=[];e&&_.push(f),s||c?_.push(m.createElement(h.CSSTransition,{key:n,classNames:"friend-anim",timeout:320},m.createElement(P.c,{friend:a,key:n,showVoiceLevel:!0,context:{chat:this.props.chatView.chat},listStatusIndicator:m.createElement("div",{className:"connectionSpinner"})}))):_.push(m.createElement(h.CSSTransition,{key:n,classNames:"friend-anim",timeout:320},m.createElement("div",{className:"friend emptyFriend",onClick:r?this.VoidOnClick:this.InitiateVoiceChat},m.createElement("div",{className:"avatarHolder "},m.createElement("img",{className:"avatar",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",draggable:!1}))))),e||_.push(f);var g=void 0;g=r&&s?m.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.EndVoiceChat},Object(A.d)("#Voice_StopTalking")):r&&!s?m.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.EndVoiceChat},Object(A.d)("#Voice_EndVoice")):m.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.InitiateVoiceChat},Object(A.d)("#Voice_StartTalking"));var b="",v="OneOnOneVoiceRoomControls",y=!1;r&&!s?(b=Object(A.d)("#Voice_WaitingForFriendToJoin",a.display_name),v+=" WaitingForPartner"):s&&!r?(i?b=Object(A.d)("#Voice_ChannelRejoinAvailable",a.display_name):(b=Object(A.d)("#Voice_ChannelAvailable",a.display_name),v+=" WaitingForYouFirstTime"),v+=" WaitingForYou"):(b=p?u?m.createElement("a",{title:Object(A.d)("#VoiceChatConnectingHelp"),className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(A.d)("#VoiceChatConnecting")):"":!p&&d?m.createElement("a",{title:Object(A.d)("#VoiceChatConnectingHelp"),className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(A.d)("#VoiceChatParterConnecting",a.display_name)):Object(A.d)("#Voice_ChannelActive",a.display_name),v+=" OneOnOneVoiceActive",y=!0);var S=m.createElement("div",{className:"OneOnOneVoiceStatusLabel"},b);return m.createElement("div",{className:v},m.createElement("div",{className:"VoiceToggleIconCtn"},m.createElement(j.ob,null),m.createElement("div",{className:"Sonar"},m.createElement("div",{className:"SonarCircle"}))),m.createElement("div",{className:"OneOnOneVoiceMembers"},g,_,S),!y&&m.createElement("div",{className:"OneOnOneVoiceClose",onClick:this.OnCloseClick,title:r?Object(A.d)("#Voice_EndVoice"):Object(A.d)("#Tooltip_DismissVoice")},m.createElement(j.sb,null)))},Object(o.c)([N.a],t.prototype,"InitiateVoiceChat",null),Object(o.c)([N.a],t.prototype,"VoidOnClick",null),Object(o.c)([N.a],t.prototype,"EndVoiceChat",null),Object(o.c)([N.a],t.prototype,"OnCloseClick",null),t=Object(o.c)([O.a],t)}(m.Component);function jt(e,t,n){var r,c=!1,l=!0;if(e.invitedto instanceof s.b)r=300;else if(e.invitedto instanceof a.b){r=340,(p=e.invitedto).BCanInvite()||p.BHasMember(e.invitee.accountid)||(l=!1)}else if(e.invitedto instanceof i.a){var p;c=!0,r=340,(p=e.invitedto.GetGroup()).BCanInvite()||p.BHasMember(e.invitee.accountid)||(l=!1)}l?Object(T.c)(m.createElement(Gt,Object(o.a)({},e)),n,"InviteDialog",{strTitle:c?Object(A.d)("#Chat_Actions_InviteFriend_VoiceChat"):Object(A.d)("#Chat_Actions_DropGroupInvite_Title"),popupWidth:650,popupHeight:r},Object(u.g)(n)):Object(S.c)(n,Object(A.d)("#Chat_Actions_DropGroupInvite_Denied"),Object(A.d)("#Chat_Actions_DropGroupInvite_Denied_Description"))}var Gt=function(e){function t(t){var n=e.call(this,t)||this;return n.invitee=n.props.invitee,n}return Object(o.d)(t,e),t.prototype.AddMoreFriends=function(e){var t=[],n=e.currentTarget.ownerDocument.defaultView;t.push(this.invitee.accountid),this.props.invitedto instanceof s.b?Object(y.c)(Object(u.e)(this,e),n,this.props.chatview,!0,t):this.props.invitedto instanceof a.b?Object(v.c)(Object(u.e)(this,e),n,this.props.invitedto,void 0,!0,t):this.props.invitedto instanceof i.a&&Object(v.b)(Object(u.e)(this,e),n,this.props.invitedto.GetGroup(),this.props.invitedto,t),this.props.closeModal()},t.prototype.Cancel=function(){this.props.closeModal()},t.prototype.componentDidMount=function(){var e=I.findDOMNode(this);if(e){var t=e.querySelector("button[type=submit]");t&&t.focus()}},t.prototype.OnInviteClicked=function(e){var t=e.currentTarget.ownerDocument.defaultView;if(this.props.invitedto instanceof s.b)this.invitedToPlayer=this.props.invitedto,(n=[]).push(this.invitedToPlayer.persona.m_steamid.ConvertTo64BitString()),n.push(this.invitee.persona.m_steamid.ConvertTo64BitString()),Object(y.b)(t,this.props.chatview,n);else if(this.props.invitedto instanceof a.b)this.invitedToGroup=this.props.invitedto,this.invitedToGroup.InviteFriend(this.invitee.accountid);else if(this.props.invitedto instanceof i.a){var n;(n=[]).push(this.invitee.accountid),this.invitedToChatRoom=this.props.invitedto,this.invitedToChatRoom.GetGroup().InviteFriend(this.invitee.accountid,this.invitedToChatRoom)}this.props.closeModal()},t.prototype.render=function(){var e,t,n,o=this.props.invitee,r=l.f.FriendStore.self,c=!1;this.props.invitedto instanceof s.b?e=this.props.invitedto:this.props.invitedto instanceof a.b?t=this.props.invitedto:this.props.invitedto instanceof i.a&&(n=this.props.invitedto);var u,p,d=!o.is_in_beta,h=e&&!e.is_in_beta,f="#Chat_Actions_DropGroupInvite_Confirm",_=!1;t?(t.BIsUserGroupMember(o)&&(f="#Chat_Actions_DropGroupInvite_Member_Confirm"),c=!!t.BIsClanChatRoom()&&l.f.FriendStore.ClanStore.GetClan(t.GetClanID()).BIsOGG(),u=t.name,p=m.createElement(b.a,{group:t,name:t.name}),_=t.BIsUserGroupMember(o)):e?(f="#Chat_Actions_DropGroupInvite_1v2_Confirm",u=e.display_name,p=m.createElement("div",{className:"displayRow"},m.createElement("div",{className:"dropGroupInviteDialog_Friend"},m.createElement("img",{src:r.persona.avatar_url_medium})),m.createElement("div",{className:"dropGroupInviteDialog_Friend"},m.createElement("img",{src:e.persona.avatar_url_medium})))):n&&(f="#Chat_Actions_DropVoiceInvite_Confirm",u=n.name,p=m.createElement("div",{className:"displayRow"},m.createElement(j.ob,null)));var g=null,v=!0;return l.f.IsInBeta()&&(v=!d&&!h,h&&d?g=m.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(A.d)("#Chat_InviteFriend_Unavailable_Short_NoBetas")):d?g=m.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(A.k)("#Chat_InviteFriend_Unavailable_Short",m.createElement("span",{className:"whiteText"},o.display_name))):h&&(g=m.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(A.k)("#Chat_InviteFriend_Unavailable_Short_InvitedTo",m.createElement("span",{className:"whiteText"},e.display_name))))),m.createElement(T.a,{onEscKeypress:this.Cancel},m.createElement(M.h,{classNameContent:"GenericConfirmDialog",onSubmit:this.OnInviteClicked,bCenterVertically:!0},m.createElement(M.m,null,n?Object(A.d)("#Chat_Actions_InviteFriend_VoiceChat"):Object(A.d)("#Chat_Actions_DropGroupInvite_Title")),m.createElement(M.b,null,m.createElement("div",{className:"dropGroupInviteDialog displayColumn"+(t||n?" groupInviteHeight":"")},v&&m.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(A.k)(f,m.createElement("span",{className:"highlight"},o.display_name),m.createElement("span",{className:"highlight"},u),e&&m.createElement("span",{className:"highlight"},Object(A.d)("#Chat_You")))),g,m.createElement("div",{className:"dropGroupInviteDialog_Graphic"+(c?" isOGGGroup":"")},m.createElement("div",{className:"dropGroupInviteDialog_Friend"},m.createElement("img",{src:o.persona.avatar_url_medium})),v?m.createElement("div",{className:"movingArrow"},m.createElement(j.b,{angle:90})):m.createElement("div",{className:"staticX"},m.createElement(j.sb,null)),p,m.createElement("div",{className:"addMoreFriendsButton",onClick:this.AddMoreFriends},m.createElement("div",null,Object(A.d)("#Chat_Actions_AddMoreFriends")),m.createElement("div",{className:"ExpandArrow"}))))),m.createElement(M.j,null,m.createElement(M.D,null,m.createElement(M.x,{disabled:d||h,onClick:this.OnInviteClicked},_?Object(A.d)("#Chat_SendLink"):Object(A.d)("#Chat_Invite")," "),m.createElement(M.d,{onClick:this.Cancel},Object(A.d)("#Button_Cancel"))))))},Object(o.c)([N.a],t.prototype,"AddMoreFriends",null),Object(o.c)([N.a],t.prototype,"Cancel",null),Object(o.c)([N.a],t.prototype,"OnInviteClicked",null),t=Object(o.c)([O.a],t)}(m.Component),Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.AddFriendClick=function(e){this.ContinueCreateChat(Object(u.e)(this,e),Object(k.q)(e))},t.prototype.AddFriendClickNotInBeta=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=Object(u.e)(this,e),n=Object(k.q)(e),l.f.IsInBeta()?(Object(S.c)(n,"",Object(A.d)("#Chat_InviteFriend_Unavailable",this.props.chatView.chat.chat_partner.display_name)),[3,3]):[3,1];case 1:return[4,Object(S.a)(n,"",Object(A.d)("#Chat_InviteFriend_Unavailable_Released",this.props.chatView.chat.chat_partner.display_name),Object(A.d)("#Chat_StillInVoiceDialog_KeepChatting"))];case 2:o.sent()&&this.ContinueCreateChat(t,n),o.label=3;case 3:return[2]}}))}))},t.prototype.ContinueCreateChat=function(e,t){Object(y.c)(e,t,this.props.chatView,!0)},t.prototype.render=function(){var e=this.props.chatView.chat.chat_partner,t="inviteAnotherFriendButton";return this.props.additionalClasses&&(t+=" "+this.props.additionalClasses),m.createElement("div",{title:Object(A.d)("#Chat_AddFriend_Hint"),className:t,onClick:e.is_in_beta?this.AddFriendClick:this.AddFriendClickNotInBeta},m.createElement(j.D,null))},Object(o.c)([N.a],t.prototype,"AddFriendClick",null),Object(o.c)([N.a],t.prototype,"AddFriendClickNotInBeta",null),t=Object(o.c)([O.a],t)}(m.Component),kt=function(e){var t=e.onClick,n=e.edge;return m.createElement("div",{className:Object(R.a)("BroadcastChatExpander",n),onClick:t,title:Object(A.d)("#Broadcast_View_ShowChat")},m.createElement(j.A,{showChat:!0}))},At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnTextChannelCloseClick=function(e){this.props.groupView.ClosePopoverChat()},t.prototype.OnChatHistoryRef=function(e){e&&e.Focus()},t.prototype.render=function(){var e=this.props.groupView.GetPopoverChatView();return e?m.createElement(h.CSSTransition,{key:"quickChat",classNames:"chatWindow-anim",timeout:320},m.createElement("div",{className:"VoiceRoomChatHistory"},m.createElement("div",{className:"VoiceRoomChatWindow"},m.createElement("div",{className:"VoiceRoomChatTitle"},m.createElement("div",{className:"VoiceRoomTitleLabels"},m.createElement("div",{className:"VoiceChatTextChannelName"},Object(A.d)("#Chat_Scratch_Pad"))),m.createElement("div",{className:"MinimizeTextChat",onClick:this.OnTextChannelCloseClick},m.createElement(j.sb,null))),m.createElement("div",{className:"VoiceChatTextChannelDesc"},Object(A.d)("#Chat_Scratch_Pad_Desc")),m.createElement(mt,{chatView:e,isActive:!0,ref:this.OnChatHistoryRef})))):null},Object(o.c)([N.a],t.prototype,"OnTextChannelCloseClick",null),Object(o.c)([N.a],t.prototype,"OnChatHistoryRef",null),t=Object(o.c)([O.a],t)}(m.Component),Nt=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.OnBlock=function(){l.f.FriendStore.BlockPlayer(this.props.friend,!1),l.f.UIStore.CloseTabByID(this.props.chatView.GetUniqueID())},t.prototype.OnAllow=function(){l.f.FriendStore.SetApprovedNonFriendMessages(this.props.friend.accountid)},t.prototype.render=function(){return m.createElement("div",{className:"NotAFriendMessage"},m.createElement("div",{className:"NotAFriendBody"},m.createElement("div",{className:"Exclamation"},m.createElement(j.f,null)),m.createElement("div",{className:"Explanation"},m.createElement("div",{className:"ExplanationHeader"},Object(A.d)("#DirectMessageFromNonFriend")),m.createElement("div",{className:"ExplanationBody"},Object(A.d)("#DirectMessageFromNonFriendNote")),m.createElement(C.b,{href:"https://support.steampowered.com/kb_article.php?ref=1266-OAFV-8478",className:"ExplanationMoreInfo"},Object(A.d)("#Generic_More_Info"))),m.createElement("div",{className:"Buttons"},m.createElement("button",{className:"NotAFriendActionButton",onClick:this.OnBlock},Object(A.d)("#NonFriendAction_Block")),m.createElement("button",{className:"NotAFriendActionButton",onClick:this.OnAllow},Object(A.d)("#NonFriendAction_Allow")))))},Object(o.c)([N.a],t.prototype,"OnBlock",null),Object(o.c)([N.a],t.prototype,"OnAllow",null),t=Object(o.c)([O.a],t)}(m.Component),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.chatView,n=e.friend,r=Object(o.f)(e,["chatView","friend"]),a=t.chat instanceof i.a;return m.createElement(g,Object(o.a)({message:a?Object(A.d)("#Chat_DropToInviteGroup"):Object(A.d)("#Chat_DropToInvite"),name:n.display_name,renderImage:function(){return m.createElement(E.c,{size:"Large",persona:n.persona})}},r))},t=Object(o.c)([O.a],t)}(m.Component),Lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=(e.chatView,e.group),n=e.clan,r=Object(o.f)(e,["chatView","group","clan"]);if(!t&&!n)return Object(G.a)(!1,"Either a group or clan must be passed to DropGroupToInviteFriendMessage."),null;var i=(t||n).name;return m.createElement(g,Object(o.a)({message:Object(A.d)("#Chat_DropGroupToInviteFriend"),name:i,renderImage:function(){return n?m.createElement(b.c,{clan:n,size:"large"}):m.createElement(b.a,{group:t,large:!0})}},r))},t=Object(o.c)([O.a],t)}(m.Component),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=!1;if(!(this.props.chatView.chat instanceof c.a))return null;var t=this.props.chatView.chat;return t.is_friend_typing&&(e=!0),m.createElement("div",{className:"FriendChatTypingNotification"+(e?" FriendIsTyping":"")},Object(A.d)("#Friend_Chat_Typing",t.chat_partner.display_name))},t=Object(o.c)([O.a],t)}(m.Component)},e2SU:function(e,t,n){"use strict";n.d(t,"B",(function(){return c})),n.d(t,"ab",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"k",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"G",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"J",(function(){return f})),n.d(t,"q",(function(){return _})),n.d(t,"fb",(function(){return g})),n.d(t,"V",(function(){return b})),n.d(t,"S",(function(){return v})),n.d(t,"rb",(function(){return y})),n.d(t,"sb",(function(){return S})),n.d(t,"ob",(function(){return C})),n.d(t,"s",(function(){return O})),n.d(t,"hb",(function(){return I})),n.d(t,"y",(function(){return E})),n.d(t,"x",(function(){return w})),n.d(t,"P",(function(){return M})),n.d(t,"R",(function(){return D})),n.d(t,"a",(function(){return T})),n.d(t,"v",(function(){return j})),n.d(t,"D",(function(){return G})),n.d(t,"N",(function(){return R})),n.d(t,"pb",(function(){return k})),n.d(t,"M",(function(){return A})),n.d(t,"l",(function(){return N})),n.d(t,"Q",(function(){return B})),n.d(t,"O",(function(){return L})),n.d(t,"cb",(function(){return P})),n.d(t,"h",(function(){return F})),n.d(t,"m",(function(){return x})),n.d(t,"f",(function(){return V})),n.d(t,"F",(function(){return U})),n.d(t,"ib",(function(){return H})),n.d(t,"mb",(function(){return W})),n.d(t,"C",(function(){return z})),n.d(t,"c",(function(){return q})),n.d(t,"b",(function(){return K})),n.d(t,"o",(function(){return Y})),n.d(t,"gb",(function(){return X})),n.d(t,"H",(function(){return Q})),n.d(t,"K",(function(){return J})),n.d(t,"W",(function(){return Z})),n.d(t,"U",(function(){return $})),n.d(t,"jb",(function(){return ee})),n.d(t,"kb",(function(){return te})),n.d(t,"Z",(function(){return ne})),n.d(t,"t",(function(){return oe})),n.d(t,"u",(function(){return re})),n.d(t,"n",(function(){return ie})),n.d(t,"I",(function(){return ae})),n.d(t,"eb",(function(){return se})),n.d(t,"db",(function(){return ce})),n.d(t,"nb",(function(){return le})),n.d(t,"w",(function(){return ue})),n.d(t,"X",(function(){return pe})),n.d(t,"Y",(function(){return me})),n.d(t,"A",(function(){return de})),n.d(t,"bb",(function(){return he})),n.d(t,"d",(function(){return fe})),n.d(t,"L",(function(){return _e})),n.d(t,"lb",(function(){return ge})),n.d(t,"E",(function(){return be})),n.d(t,"r",(function(){return ve})),n.d(t,"tb",(function(){return ye})),n.d(t,"e",(function(){return Se})),n.d(t,"j",(function(){return Ce})),n.d(t,"z",(function(){return Oe})),n.d(t,"T",(function(){return Ie})),n.d(t,"qb",(function(){return Ee}));var o=n("mrSG"),r=n("q1tI"),i=n("twdX"),a=n.n(i),s=n("QHER");n("/7KC"),n("vvG3");function c(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Hyperlink","data-name":"Layer 1",viewBox:"0 0 100 100",x:"0px",y:"0px"},r.createElement("g",{"data-name":"Group"},r.createElement("path",{"data-name":"Path",d:"M50.86,20.23l-9,9,4.24,4.24,9-9c6.35-6.35,16.09-6.93,21.73-1.3s5,15.38-1.3,21.73l-9,9,4.24,4.24,9-9c8.69-8.69,9.27-22.24,1.3-30.21S59.55,11.55,50.86,20.23Z"}),r.createElement("path",{"data-name":"Path",d:"M44.89,75.53a17.22,17.22,0,0,1-11.28,5.13A13.23,13.23,0,0,1,19.34,66.39a17.22,17.22,0,0,1,5.13-11.28l9-9-4.24-4.24-9,9a23.21,23.21,0,0,0-6.88,15.22c0,.37,0,.74,0,1.11A19.19,19.19,0,0,0,33.91,86.66a23.21,23.21,0,0,0,15.22-6.88l9-9-4.24-4.24Z"}),r.createElement("rect",{"data-name":"Path",className:"Link1",x:"28.75",y:"47",width:"42.48",height:"6",transform:"translate(-20.71 50) rotate(-45)"})))}function l(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Settings",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-305.5 396.5 256 256",enableBackground:"new -305.5 396.5 256 256"},r.createElement("path",{d:"M-232.755,589.942l3.103,2.408c5.78,4.492,11.973,8.18,18.409,10.959l3.581,1.547l2.276,33.783 c0.089,1.33,1.385,2.54,2.715,2.54h48.62c1.355,0,2.745-1.273,2.852-2.621l2.74-33.284l3.602-1.496 c6.406-2.656,12.646-6.262,18.554-10.707l3.137-2.366l30.578,15.009c1.155,0.571,2.924,0.017,3.563-1.087l24.303-42.1 c0.674-1.173,0.265-3.014-0.852-3.785l-27.872-19.309l0.469-3.832c0.495-4.032,0.725-7.395,0.725-10.57 c0-3.129-0.227-6.5-0.687-10.307l-0.469-3.896l28.699-19.253c1.112-0.741,1.509-2.473,0.84-3.627l-24.3-42.104 c-0.657-1.139-2.502-1.727-3.7-1.155l-31.208,14.748l-3.091-2.341c-5.571-4.224-11.466-7.688-17.522-10.306l-3.58-1.548 l-2.34-34.887c-0.089-1.33-1.381-2.536-2.715-2.536h-48.617c-1.355,0-2.74,1.274-2.851,2.626l-2.834,34.371l-3.593,1.501 c-6.082,2.535-12.028,5.924-17.667,10.071l-3.124,2.302l-31.392-15.413c-1.168-0.575-2.924-0.025-3.559,1.074l-24.309,42.107 c-0.678,1.172-0.264,3.014,0.848,3.781l28.068,19.444l-0.524,3.883c-0.592,4.378-0.865,8.018-0.865,11.462 c0,2.988,0.179,6.065,0.55,9.403l0.431,3.853l-28.528,19.125c-1.108,0.742-1.509,2.468-0.84,3.632l24.308,42.1 c0.656,1.142,2.489,1.726,3.7,1.154L-232.755,589.942z M-177.498,560.051c-19.311,0-35.02-15.709-35.02-35.02 s15.709-35.02,35.02-35.02s35.02,15.709,35.02,35.02S-158.188,560.051-177.498,560.051z"}))}function u(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ChatSettings",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 600 600"},r.createElement("g",null,r.createElement("path",{d:"M256,0C126.6,0,21.3,104.7,21.3,233.7c0,65.9,26.5,125.4,74.7,168.3v99.3c0,3.8,2,7.4,5.3,9.2c1.7,1,3.5,1.5,5.3,1.5   c1.8,0,3.7-0.5,5.4-1.5l85.8-50.3c18.9,4.8,38.4,7.3,58.1,7.3c129.4,0,234.7-104.9,234.7-233.7C490.7,104.7,385.4,0,256,0z    M405.3,254.1L370,260c-3,13.5-8.3,26-15.5,37.3l20.8,29.2L347.8,354l-29.2-20.8c-11.3,7.2-23.8,12.5-37.3,15.5l-5.9,35.3h-39   l-5.9-35.3c-13.5-3-26-8.3-37.3-15.5L164.2,354l-27.5-27.5l20.8-29.2C150.3,286,145,273.5,142,260l-35.3-5.9v-39l35.3-5.9   c3-13.5,8.3-26,15.5-37.3l-20.8-29.2l27.5-27.5l29.2,20.8c11.3-7.2,23.8-12.5,37.3-15.5l5.9-35.3h39l5.9,35.3   c13.5,3,26,8.3,37.3,15.5l29.2-20.8l27.5,27.5L354.5,172c7.2,11.3,12.5,23.8,15.5,37.3l35.3,5.9V254.1z"}),r.createElement("circle",{cx:"256",cy:"234.6",r:"45.9"})))}function p(){return r.createElement("svg",{version:"1.1",className:"SVGIcon_Button SVGIcon_CopyToClipboard",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"178.25,197.25 247,197.25 247,82.5 175,10.25 111.5,10.25 111.5,56 "}),r.createElement("polygon",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"155,133 83,60.75 11,60.75 11,247.75 155,247.75 "}),r.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"83,60.75 83,133 155,133 "}),r.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"175,10.25 175,82.5 247,82.5 "}))}function m(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DownArrowContextMenu","data-name":"Layer 1",viewBox:"0 0 128 128",x:"0px",y:"0px"},r.createElement("polygon",{points:"50 59.49 13.21 22.89 4.74 31.39 50 76.41 95.26 31.39 86.79 22.89 50 59.49"}))}function d(e){var t="SVGIcon_Button SVGIcon_MagnifyingGlass";return e.className&&(t+=" "+e.className),r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"},r.createElement("g",{transform:"translate(0,-952.36218)"},r.createElement("path",{className:"ColorSelector",d:"m 40.99855,964.36216 c -15.9798,0 -28.9986,13.01864 -28.9986,28.99862 0,15.97992 13.0188,28.99862 28.9986,28.99862 6.9189,0 13.2881,-2.4349 18.2803,-6.4997 l 23.5927,23.6239 c 1.1714,1.1714 3.0784,1.1715 4.2498,0 1.1716,-1.1715 1.1716,-3.0783 0,-4.2498 l -23.6239,-23.5926 c 4.0649,-4.9923 6.4997,-11.3615 6.4997,-18.28042 0,-15.97998 -13.0187,-28.99862 -28.9986,-28.99862 z m 0,5.99972 c 12.7374,0 22.9989,10.26145 22.9989,22.9989 0,12.73732 -10.2615,22.99892 -22.9989,22.99892 -12.7374,0 -22.9989,-10.2616 -22.9989,-22.99892 0,-12.73745 10.2615,-22.9989 22.9989,-22.9989 z",fill:"#ffffff",fillOpacity:"1",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"})))}function h(){return r.createElement("svg",{className:"SVGIcon_Button SVGIcon_Clock",version:"1.1",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 20 20"},r.createElement("path",{d:"M15.999 15c-.15 0-.303-.034-.446-.105l-4-2A1.001 1.001 0 0111 12V5a1 1 0 012 0v6.382l3.447 1.724A1 1 0 0115.999 15zM12 24C5.383 24 0 18.617 0 12S5.383 0 12 0s12 5.383 12 12-5.383 12-12 12zm0-22C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2z"}))}function f(e){var t="SVGIcon_Button SVGIcon_Microphone";return e.className&&(t+=" "+e.className),r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-127.5 664.5 256 256"},r.createElement("g",{className:"MicBase"},r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M-64.7,826.3c-0.5-2.9-0.8-5.8-0.8-8.7v-38.2h11.2v36.5L-64.7,826.3z"}),r.createElement("path",{d:"M-54.8,779.9v35.8l-9.6,9.6c-0.4-2.6-0.6-5.1-0.6-7.6v-37.7H-54.8 M-53.8,778.9H-66v38.7c0,3.3,0.4,6.5,1,9.7l11.2-11.2 V778.9L-53.8,778.9z"})),r.createElement("g",null,r.createElement("path",{d:"M56.8,817.6c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1h-35.2 c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6v-38.7H56.8V817.6z"}),r.createElement("path",{d:"M69,778.9H56.8v38.7c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1 h-35.2c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6V778.9L69,778.9z"}))),r.createElement("g",null,r.createElement("path",{d:"M40.6,712.5c0-21.6-17.5-39.1-39.1-39.1c-21.6,0-39.1,17.5-39.1,39.1v87.4l10-10v-72.4h0v-5c0-16.1,13.1-29.1,29.1-29.1 c16.1,0,29.1,13.1,29.1,29.1v5v14.1l10-10V712.5z"})),r.createElement("g",null,r.createElement("path",{d:"M-4.7,835.4c-2.2-0.5-4.4-1.2-6.4-2.2C-9.1,834.2-6.9,834.9-4.7,835.4z"}),r.createElement("path",{d:"M-0.1,836c-0.2,0-0.4,0-0.6,0C-0.6,836-0.4,836-0.1,836z"}),r.createElement("path",{d:"M30.6,806.9C30.6,806.9,30.6,806.9,30.6,806.9v-16.6"}),r.createElement("path",{d:"M-11.9,832.8c0.2,0.1,0.5,0.2,0.7,0.3C-11.4,833-11.7,832.9-11.9,832.8L-11.9,832.8z"}),r.createElement("path",{d:"M-1.7,835.9c-0.3,0-0.5-0.1-0.8-0.1C-2.3,835.8-2,835.8-1.7,835.9z"}),r.createElement("path",{d:"M-3.3,835.7c-0.3-0.1-0.6-0.1-1-0.2C-3.9,835.6-3.6,835.6-3.3,835.7z"}),r.createElement("path",{d:"M30.6,776.1v14.1v16.6c0,0,0,0,0,0s0,0,0,0c0,16.1-13,29.1-29.1,29.1c-0.5,0-1.1,0-1.6,0c-0.2,0-0.4,0-0.6,0 c-0.3,0-0.6,0-1-0.1c-0.3,0-0.5-0.1-0.8-0.1c-0.2,0-0.5-0.1-0.7-0.1c-0.3-0.1-0.6-0.1-1-0.2c-0.2,0-0.3-0.1-0.5-0.1 c-2.2-0.5-4.4-1.2-6.4-2.2c0,0-0.1,0-0.1,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-3-1.6-5.7-3.6-8-6.1l-7.1,7.1 c7.1,7.6,17.3,12.3,28.5,12.3c21.6,0,39.1-17.5,39.1-39.1v-40.8L30.6,776.1z"}),r.createElement("path",{d:"M-0.8,836c-0.3,0-0.6-0.1-1-0.1C-1.4,835.9-1.1,835.9-0.8,836z"}),r.createElement("path",{d:"M1.5,836.1c-0.5,0-1.1,0-1.6,0C0.4,836,0.9,836.1,1.5,836.1z"}),r.createElement("path",{d:"M-2.6,835.8c-0.2,0-0.5-0.1-0.7-0.1C-3,835.7-2.8,835.7-2.6,835.8z"}),r.createElement("path",{d:"M1.5,836.1c16.1,0,29.1-13,29.1-29.1c0,0,0,0,0,0C30.6,823,17.6,836.1,1.5,836.1z"}),r.createElement("path",{d:"M-4.2,835.5c-0.2,0-0.3-0.1-0.5-0.1C-4.5,835.4-4.4,835.5-4.2,835.5z"}),r.createElement("path",{d:"M-11.1,833.2C-11.1,833.2-11.2,833.2-11.1,833.2C-11.2,833.2-11.1,833.2-11.1,833.2z"}))),r.createElement("g",{className:"MicFill"},r.createElement("g",null,r.createElement("path",{d:"M-53.8,816.1L-65,827.3c2.2,10.8,7.9,20.5,16.2,28.3l8.6-8.6c-8.5-7.9-13.6-18.2-13.6-29.4V816.1L-53.8,816.1z"})),r.createElement("g",null,r.createElement("path",{d:"M1.5,834.6c-15.2,0-27.6-12.4-27.6-27.6v-94.5c0-15.2,12.4-27.6,27.6-27.6c15.2,0,27.6,12.4,27.6,27.6v94.5 C29.1,822.2,16.7,834.6,1.5,834.6z"}),r.createElement("path",{d:"M1.5,696.3c8.9,0,16.1,7.2,16.1,16.1v94.5c0,8.9-7.2,16.1-16.1,16.1c-8.9,0-16.1-7.2-16.1-16.1v-94.5 C-14.6,703.6-7.4,696.3,1.5,696.3 M1.5,673.3c-21.6,0-39.1,17.5-39.1,39.1v94.5c0,21.6,17.5,39.1,39.1,39.1s39.1-17.5,39.1-39.1 v-94.5C40.6,690.8,23.1,673.3,1.5,673.3L1.5,673.3z"}))),r.createElement("g",{className:"MicStrike",fill:"none",strokeWidth:"1"},r.createElement("line",{x1:"-82.5",y1:"866.5",x2:"83.5",y2:"700.4"})))}function _(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Emoticon",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeMiterlimit:"10",cx:"128",cy:"128",r:"107.5"}),r.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",d:"M74.484,145.945 c0,0,12.996,37.533,53.514,37.533c38.084,0,53.499-37.533,53.499-37.533"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",x1:"94.5",y1:"97.5",x2:"94.5",y2:"109.5"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",x1:"160.5",y1:"97.5",x2:"160.5",y2:"109.5"}))}function g(){return r.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Submit",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"},r.createElement("g",{transform:"translate(0,-952.36218)"},r.createElement("path",{d:"m 92.115057,974.14842 a 2.0001999,2.0001999 0 0 0 -1.96764,2.02965 l 0.0376,31.19553 -77.475501,0 16.161909,-15.73013 a 2.0002746,2.0002746 0 1 0 -2.790355,-2.8667 L 6.3913393,1007.9405 a 2.0001999,2.0001999 0 0 0 -0.0011,2.8646 l 19.6896957,19.2036 a 2.0002671,2.0002671 0 1 0 2.792551,-2.8646 l -16.170767,-15.771 79.153048,0 a 2.0001999,2.0001999 0 0 0 1.72959,-0.5437 2.0001999,2.0001999 0 0 0 0.0598,-0.058 2.0001999,2.0001999 0 0 0 0.54259,-1.7218 l -0.0388,-32.87638 a 2.0001999,2.0001999 0 0 0 -2.03297,-2.02522 z",fill:"#FFFFFF",fillOpacity:"1",fillRule:"evenodd",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"})))}function b(){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ResizeIcon",x:"0px",y:"0px",viewBox:"0 0 256 256"},r.createElement("g",null,r.createElement("path",{fill:"#020202",d:"M115.512,137.263l21.6-21.6c0,0,25.5,25.5,45.8,45.8l35-35v91.6h-91.6l35-35 C141.012,162.763,115.512,137.263,115.512,137.263z"}),r.createElement("path",{fill:"#020202",d:"M108.312,129.763c-20.3-20.3-35.8-35.8-35.8-35.8l21.6-21.601c0,0,15.5,15.5,35.8,35.801L108.312,129.763z"}),r.createElement("path",{fill:"#020202",d:"M54.312,75.763c-20.3-20.3-15.8-15.8-15.8-15.8l21.6-21.601c0,0-4.5-4.5,15.8,15.801L54.312,75.763z"})))}function v(){return r.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Popout",viewBox:"0 0 8 8",x:"0px",y:"0px"},r.createElement("path",{d:"M0 0v8h8v-2h-1v1h-6v-6h1v-1h-2zm4 0l1.5 1.5-2.5 2.5 1 1 2.5-2.5 1.5 1.5v-4h-4z"}))}function y(e){return r.createElement("svg",Object(o.a)({fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_X",version:"1.1",x:"0px",y:"0px",viewBox:"-165 95 100 100"},e),r.createElement("g",null,r.createElement("polygon",{points:"-74.9,117.2 -102.2,145 -74.9,172.8 -89.1,186.8 -116.2,159.3 -143.2,186.8 -157.5,172.8 -130.2,145 -157.5,117.2 -143.2,103.2 -116.2,130.7 -89.1,103.2"})))}function S(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_X_Line",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"45",strokeMiterlimit:"10",x1:"212",y1:"212",x2:"44",y2:"44"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"45",strokeMiterlimit:"10",x1:"44",y1:"212",x2:"212",y2:"44"}))}function C(e){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_VoiceRoom",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64"},!e.exitOnly&&r.createElement("g",null,r.createElement("path",{className:"Bubble",fill:"none",strokeMiterlimit:"1",strokeWidth:"2.5px",d:"M60.1,32.3c0,15.1-12.3,27.3-27.4,27.3 c-5,0-9.7-1.4-13.8-3.7c-1.8-1.1-15,5.4-13.8,3.4c1.7-2.9,5.9-10.3,4.7-12C7,43,5.3,37.8,5.3,32.3C5.3,17.2,17.6,5,32.7,5 C47.8,5,60.1,17.2,60.1,32.3z"})),!e.exitOnly&&r.createElement("g",null,r.createElement("path",{className:"AudioLines",opacity:"0",strokeWidth:"1px",d:"M37.2,51.1c-0.5,0-1-0.1-1.3-0.4c-0.7-0.5-0.7-1.3,0-1.8c6.3-4.4,9.8-10.2,9.8-16.4c0-6.2-3.5-12-9.8-16.4 c-0.7-0.5-0.7-1.3,0-1.8s1.9-0.5,2.6,0c7.1,4.9,10.9,11.4,10.9,18.3c0,6.9-3.9,13.4-10.9,18.3C38.2,51,37.7,51.1,37.2,51.1 M21.4,40.2c0.5,0,0.9-0.1,1.3-0.4c2.8-2,4.3-4.6,4.3-7.3s-1.5-5.4-4.3-7.3c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c2.1,1.5,3.3,3.4,3.3,5.5c0,2.1-1.2,4-3.3,5.5c-0.7,0.5-0.7,1.3,0,1.8C20.4,40.1,20.9,40.2,21.4,40.2 M29.3,45.7 c0.5,0,1-0.1,1.3-0.4c4.9-3.4,7.7-7.9,7.7-12.7c0-4.8-2.7-9.3-7.7-12.7c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c4.2,2.9,6.6,6.8,6.6,10.9c0,4.1-2.3,8-6.6,10.9c-0.7,0.5-0.7,1.3,0,1.8C28.4,45.5,28.8,45.7,29.3,45.7"})),r.createElement("g",{className:"Arrow",opacity:e.exitOnly?1:0},r.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,19.4 "}),r.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,42 "})),r.createElement("g",null,r.createElement("polyline",{className:"ExitDoor",opacity:e.exitOnly?1:0,strokeLinecap:"round",strokeMiterlimit:"1",strokeWidth:"2px",fill:"none",points:"32.5,22.1 32.5,17.7 47.7,17.7 47.7,43.8 32.5,43.8 32.5,39.5"})),!e.exitOnly&&r.createElement("g",{className:"Microphone"},r.createElement("path",{d:"M40.971,28.593v6.278c0,4.007-4.023,7.284-8.971,7.284c-2.693,0-5.126-0.974-6.765-2.516 c-1.379-1.28-2.207-2.952-2.207-4.769v-6.278l0,0H21.05v6.278c0,0.536,0.064,1.055,0.162,1.573 c0.357,1.752,1.281,3.325,2.627,4.592c1.801,1.702,4.332,2.839,7.17,3.049v4.072H25.3c-0.341,0-0.616,0.438-0.616,0.989 c0,0.552,0.275,0.99,0.616,0.99h5.759h1.882H38.7c0.341,0,0.616-0.438,0.616-0.99c0-0.551-0.275-0.989-0.616-0.989h-5.71v-4.072 c5.58-0.422,9.96-4.396,9.96-9.214v-6.278H40.971z"}),r.createElement("g",null,r.createElement("path",{d:"M32,39.841c-3.493,0-6.343-2.344-6.343-5.213v-17.85c0-2.871,2.85-5.213,6.343-5.213s6.343,2.342,6.343,5.213v17.85,C38.343,37.497,35.493,39.841,32,39.841z"}))))}function O(){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ExitIcon",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64"},r.createElement("g",{className:"Arrow"},r.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,19.4 "}),r.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,42 "})),r.createElement("g",null,r.createElement("polyline",{className:"ExitDoor",strokeLinecap:"round",strokeMiterlimit:"1",strokeWidth:"2px",fill:"none",points:"32.5,22.1 32.5,17.7 47.7,17.7 47.7,43.8 32.5,43.8 32.5,39.5"})))}function I(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_TextRoom",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256",stroke:"#000",strokeWidth:"10px"},r.createElement("g",{className:"ScratchPad"},r.createElement("path",{fill:"none",strokeWidth:"0",strokeMiterlimit:"10",d:"M179.751,40.994h14.869 c8.388,0,15.25,6.862,15.25,15.25v141.193c0,8.388-6.862,15.25-15.25,15.25H57.37c-8.388,0-15.25-6.862-15.25-15.25V56.244 c0-8.388,6.862-15.25,15.25-15.25h14.869H179.751z"}),r.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"74.495",y1:"27.313",x2:"74.495",y2:"54.063"}),r.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"124.495",y1:"27.313",x2:"124.495",y2:"54.063"}),r.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"174.745",y1:"27.313",x2:"174.745",y2:"54.063"})),r.createElement("line",{className:"TextLines",x1:"71.6",y1:"115.4",x2:"179.4",y2:"115.4"}),r.createElement("line",{className:"TextLines",x1:"71.6",y1:"145.8",x2:"143.3",y2:"145.8"}),r.createElement("line",{className:"TextLines",x1:"71.6",y1:"175.9",x2:"179.4",y2:"175.9"}),r.createElement("line",{className:"TextLines",x1:"73.7",y1:"82.7",x2:"166.8",y2:"82.7"}))}function E(e){var t="SVGIcon_Button SVGIcon_Headphones";return e.className&&(t+=" "+e.className),r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-305.5 396.5 256 256"},r.createElement("g",{className:"HeadPhonesBase"},r.createElement("g",null,r.createElement("path",{fill:"none",d:"M-176.5,418.7c-37,0-69.5,30.2-69.5,64.5v25.3c11.3,2.3,19.9,12.3,19.9,24.3v8.6l100.9-100.9 C-138.2,427.3-156.7,418.7-176.5,418.7z"}),r.createElement("path",{d:"M-226.2,532.9c0-12-8.5-22-19.9-24.3v-25.3c0-34.4,32.5-64.5,69.5-64.5c19.8,0,38.3,8.6,51.2,21.9l6.9-6.9 c-14.8-15.1-35.7-24.9-58.2-24.9c-42.3,0-79.4,34.8-79.4,74.5v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8c0,7.8,3.6,14.7,9.2,19.3 l40.5-40.5V532.9z"}),r.createElement("path",{d:"M-97.1,508.6v-25.3c0-7.5-1.3-14.8-3.8-21.8l-7.9,7.9c1.2,4.5,1.8,9.1,1.8,13.9v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8 c0,13.7,11.1,24.8,24.8,24.8c13.7,0,24.8-11.1,24.8-24.8v-29.8C-77.2,520.9-85.8,510.9-97.1,508.6z"}))),r.createElement("g",{className:"HeadphonesStrike"},r.createElement("line",{fill:"none",x1:"-260.5",y1:"598.5",x2:"-94.5",y2:"432.4"})),r.createElement("g",{className:"HeadPhonesFill"},r.createElement("path",{d:"M-226.2,562.7v-21.2l-40.5,40.5c4.3,3.5,9.7,5.6,15.6,5.6C-237.3,587.5-226.2,576.4-226.2,562.7z"}),r.createElement("path",{d:"M-118.3,433.7l-6.9,6.9c7.9,8.1,13.7,18,16.5,28.8l7.9-7.9C-104.5,451.1-110.5,441.6-118.3,433.7z"})))}function w(){return r.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Group",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{transform:"translate(0,-952.36218)"},r.createElement("path",{d:"M58.6,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1\tC86.7,983,74,970.4,58.6,970.4z M202.1,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C230.2,983,217.6,970.4,202.1,970.4z M130.4,986c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C158.5,998.6,145.8,986,130.4,986z M242.8,1110.6c0-0.1,0-17.9,0-18l-0.1-16.1c0-22.4-18.2-40.6-40.6-40.6 c-17.8,0-30,7.7-36.3,18.8c-2,3.5-3.4,7.3-4.5,11.1c-7.5-8.7-18.6-14.3-31-14.3s-23.5,5.6-31,14.3c-1.1-3.9-2.5-7.6-4.5-11.1 c-6.3-11.1-18.4-18.8-36.3-18.8c-22.4,0-40.6,18.2-40.6,40.6v46.8c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2 c3.4,0,6.2-2.8,6.2-6.2v-31.2h9.4v9.4c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2H146c3.4,0,6.2-2.8,6.2-6.2v-31.2 h12.5c3.4,0,6.2-2.8,6.2-6.2v-9.4h9.4v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2c3.4,0,6.2-2.8,6.2-6.2v-31.2h12.5c3.4,0,6.3-2.7,6.3-6.2\tV1110.6z"})))}function M(e){var t="SVGIcon_Button SVGIcon_Pin";return e.bPinned&&(t+=" Pinned"),r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"point",d:"M134.787,129.241v52.051v26.025c0.041,4.334-0.092,8.677,0.094,13.009c-1.493,4.332-3.129,8.675-5.239,13.009 c-2.109-4.334-3.734-8.677-5.237-13.009c0.186-4.333,0.05-8.677,0.092-33.009v-26.025v-32.051v-5.146h10.291V129.241z"}),r.createElement("path",{className:"head",d:"M186.55,151.049H73.351l-5.146-5.146c0-23.791,11.186-40.359,30.871-46.091V39.394 c-6.843-3.478-17.164-10.034-17.154-27.312l5.146-5.146h85.167l5.146,5.146c0,17.227-9.828,23.803-16.537,27.292v60.521 c19.664,6.062,30.852,22.609,30.852,46.01L186.55,151.049z"}),r.createElement("line",{className:"ground",opacity:e.bPinned?1:0,fill:"none",stroke:"#ffffff",strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",x1:"33.833",y1:"238.5",x2:"221.834",y2:"238.5"}))}function D(e){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_PlusCircle",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},!e.nocircle&&r.createElement("circle",{fill:"none",strokeWidth:"10",strokeMiterlimit:"10",cx:"128",cy:"128",r:"95.333"}),r.createElement("line",{className:"horizontalLine",fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"73.333",y1:"128",x2:"183.333",y2:"128"}),!e.minus&&r.createElement("line",{className:"verticalLine",fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"128.333",y1:"73.335",x2:"128.333",y2:"183.333"}))}function T(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_AddFriend",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:"friendHead",transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},r.createElement("circle",{cx:"86.296",cy:"47.419",r:"33.526"})),r.createElement("path",{className:"friendBody",d:"M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"}),r.createElement("path",{className:"plusCircle",d:"M179.01,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.989,66.99,66.989c36.997,0,66.99-29.991,66.99-66.989 S216.008,103.892,179.01,103.892z M217.893,175.882h-33.647v33.882c0,2.762-2.239,5-5,5s-5-2.238-5-5v-33.882h-33.647 c-2.762,0-5-2.238-5-5c0-2.763,2.238-5,5-5h33.647V132.47c0-2.762,2.239-5,5-5s5,2.238,5,5v33.412h33.647c2.762,0,5,2.237,5,5 C222.893,173.643,220.654,175.882,217.893,175.882z"}))}function j(){return r.createElement("svg",{version:"1.1",id:"Layer_4",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FriendRequest",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:"friendHead",transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},r.createElement("circle",{cx:"85.923",cy:"47.419",r:"33.526"})),r.createElement("path",{className:"friendBody",d:"M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"}),r.createElement("path",{className:"friendBodyFull",d:"M176.504,217.922v-42.624c0-35.443-17.002-64.217-57.483-64.217H106.96h-1.017H94.898 c-40.48,0.001-57.484,28.774-57.484,64.217v42.624c0,0,0,22.197,69.544,22.197C177.521,240.121,176.504,217.922,176.504,217.922z"}),r.createElement("path",{className:"friendArm",d:"M18.167,63.833c6.53-0.734,39.348,39.127,50.007,47.647s21.327,16.686,15.16,25.353s-20.646,16.74-36.167,2.5 S-1.349,90.532,0,85.333S8.599,64.909,18.167,63.833z"}),r.createElement("path",{className:"redCircle",d:"M178.51,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.99,66.99,66.99c36.997,0,66.99-29.992,66.99-66.99 S215.508,103.892,178.51,103.892z"}))}function G(){return r.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Invite",x:"0px",y:"0px",width:"256px",height:"255.999px",viewBox:"0 0 256 255.999"},r.createElement("path",{d:"M165.678,20.535c-17.251,0-31.386,14.135-31.386,31.386c0,17.252,14.135,31.386,31.386,31.386 c17.251,0,31.386-14.134,31.386-31.386C197.063,34.67,182.929,20.535,165.678,20.535z"}),r.createElement("path",{d:"M165.678,93.121c24.995,0,45.335,20.34,45.335,45.335v52.31c0,3.853-3.123,6.975-6.975,6.975h-13.95v34.874 c0,3.852-3.123,6.974-6.974,6.975h-34.874c-3.852-0.001-6.974-3.123-6.975-6.975v-34.874h-13.95c-3.852,0-6.974-3.123-6.974-6.975 v-52.31C120.343,113.461,140.683,93.121,165.678,93.121z"}),r.createElement("g",{className:"invitePlus"},r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",x1:"14",y1:"128",x2:"101.5",y2:"128"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",x1:"57.75",y1:"84.25",x2:"57.75",y2:"171.75"})))}function R(){return r.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Paperclip",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M167.768,62.647 l-0.012,123.052c0,24.729-19.334,44.856-43.096,44.866c-23.765-0.006-43.099-20.134-43.096-44.872L81.557,48.851 c0-15.345,14.483-27.827,29.83-27.83c15.342,0.003,27.827,12.488,27.833,27.833l-0.002,139.245 c0.003,6.376-8.546,12.925-14.925,12.925c0,0-13.929-0.166-13.929-12.928l0.003-124.839"}))}function k(e){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Volume",x:"0px",y:"0px",width:"256px",height:"255.999px",viewBox:"0 0 256 255.999"},r.createElement("g",{className:"Speaker"},r.createElement("path",{d:"M93.785,52.265c-0.946,0-2.357,0.63-3.304,1.577L40.284,98.022c-0.947,0.789-2.831,1.578-4.093,1.578H9.367 C8.104,99.6,7,100.706,7,101.967v52.069c0,1.264,1.104,2.367,2.367,2.367H36.19c1.262,0,3.146,0.632,4.093,1.578l50.197,44.181 c0.947,0.789,2.516,1.578,3.304,1.578s1.578-1.104,1.578-2.367V54.631C95.363,53.369,94.731,52.265,93.785,52.265z"})),!e.muted&&r.createElement("g",{className:"SoundWaves"},r.createElement("path",{className:"SoundWavesHighest",d:"M193.826,30.402c24.959,24.958,40.349,59.403,40.349,97.604c0,38.199-15.388,72.645-40.349,97.603l9.916,9.916 c28.067-28.067,44.263-64.673,44.263-107.521c0-42.847-16.196-79.455-44.263-107.521"}),r.createElement("path",{className:"SoundWavesHigh",d:"M175.737,47.628l-8.924,8.924c18.271,18.27,29.536,43.484,29.536,71.448s-11.264,53.178-29.536,71.448l8.924,8.924 c20.546-20.546,33.234-49.008,33.234-80.374c0-31.366-12.688-59.829-33.234-80.374V47.628z"}),r.createElement("path",{className:"SoundWavesMed",d:"M148.913,74.454l-8.925,8.925c11.488,11.488,18.491,27.236,18.491,44.624c0,17.388-7.054,33.281-18.491,44.575l8.875,8.975 c13.811-13.635,22.239-32.753,22.239-53.55c0-20.797-8.432-39.793-22.189-53.55V74.454z"}),r.createElement("path",{className:"SoundWavesLow",d:"M121.989,101.229l-8.778,9.073c4.641,4.516,7.397,10.706,7.397,17.702c0,6.995-2.755,13.186-7.397,17.702l8.778,9.073 c7.035-6.844,11.243-16.413,11.243-26.775C133.232,117.643,129.024,108.075,121.989,101.229z"})),r.createElement("g",{className:"SoundX"},r.createElement("line",{fill:"none",strokeWidth:e.muted?10:0,stroke:"#fff",strokeMiterlimit:"10",x1:"137",y1:"170.667",x2:"223.167",y2:"84.5"}),r.createElement("line",{fill:"none",strokeWidth:e.muted?10:0,stroke:"#fff",strokeMiterlimit:"10",x1:"137",y1:"84.5",x2:"223.167",y2:"170.667"})))}function A(){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_NewChatGroup",x:"0px",y:"0px",viewBox:"0 0 256 256"},r.createElement("path",{className:"Bubble",strokeWidth:"12",strokeMiterlimit:"10",d:"M127.393,10.833 c64.854,0,117.46,52.609,117.46,117.013c0,24.035-7.254,45.804-19.5,63.943c-4.99,7.711,13.15,39.457,20.408,51.705 c4.989,8.612-51.701-19.05-59.412-14.514c-17.233,9.979-37.188,15.872-58.957,15.872c-64.859,0-117.465-52.607-117.465-117.008 C9.928,63.442,62.534,10.833,127.393,10.833z"}),r.createElement("line",{strokeWidth:"22",strokeLinecap:"round",strokeMiterlimit:"10",x1:"83.5",y1:"128.886",x2:"176.184",y2:"128.886"}),r.createElement("line",{strokeWidth:"22",strokeLinecap:"round",strokeMiterlimit:"10",x1:"129.842",y1:"82.544",x2:"129.842",y2:"175.228"}))}function N(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Crown",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",null,r.createElement("path",{d:"M239.874,94.963l-31.115,21.325c-18.18,12.586-43.351,5.594-52.44-14.333l-23.772-50.692c-2.099-4.194-8.041-4.194-9.789,0 l-23.074,50.343c-9.439,20.627-35.31,27.27-53.49,13.983L16.128,93.565c-4.195-3.147-10.139,1.049-8.391,6.293l31.464,106.628 c0.35,1.049,1.398,1.397,2.098,1.397h173.752c1.049,0,1.749-0.698,2.098-1.397l31.115-104.53 C250.012,96.36,244.068,91.816,239.874,94.963z"})))}function B(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Play",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"playTriangle",d:"M65.321,33.521c-11.274-6.615-20.342-1.471-20.342,11.52V210.96c0,12.989,9.068,18.135,20.342,11.521l137.244-82.348 c11.274-6.618,11.274-17.646,0-24.509L65.321,33.521z"}))}function L(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Pause",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{d:"M44.979,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6H50.979c-3.3,0-6,2.7-6,6V219.364z"}),r.createElement("path",{d:"M149.267,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6h-49.753c-3.3,0-6,2.7-6,6V219.364z"}))}function P(e){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_SortBy",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},e.bytime?r.createElement("g",{className:"time"},r.createElement("circle",{fill:"none",strokeWidth:"10",strokeMiterlimit:"10",cx:"91.735",cy:"128.014",r:"64"}),r.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"91.735,90.833 91.735,128.014 116.58,152.086 \t"})):r.createElement("g",{className:"alphabet"},r.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"70.268,109.934 94.483,63.635 119.77,109.934"}),r.createElement("line",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",x1:"77.458",y1:"97.861",x2:"112.135",y2:"97.861"}),r.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"70.045,145.379 119.547,145.379 70.045,192.032 119.547,192.032"})),r.createElement("g",{className:"Arrow"},r.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"199.735,63.66 199.735,192.366 171.207,163.675"}),r.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"199.735,63.66 199.735,192.366 228.266,163.675"})))}function F(){return r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Check",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polyline",{fill:"none",stroke:"#fff",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"49.5,147.75 95,210.75 206.5,45.25 "}))}function x(e){var t=e.highlightColor||"#00ccff",n=e.color||"#2d73ff";return r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DialogCheck",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("defs",null,r.createElement("linearGradient",{id:"linear",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},r.createElement("stop",{id:"stop0",offset:"0%",stopColor:t}),r.createElement("stop",{id:"stop1",offset:"100%",stopColor:n})),r.createElement("filter",{id:"f1",x:"0",y:"0",width:"200%",height:"200%"},r.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"20",dy:"20"}),r.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"10"}),r.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}))),r.createElement("path",{fill:"none",stroke:"url(#linear)",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"10",d:"M206.5,45.25L95,210.75l-45.5-63",strokeDasharray:"365.19 365.19",strokeDashoffset:"0.00"}),r.createElement("path",{fill:"none",opacity:".2",filter:"url(#f1)",stroke:"url(#linear)",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"10",d:"M206.5,45.25L95,210.75l-45.5-63",strokeDasharray:"365.19 365.19",strokeDashoffset:"0.00"}))}function V(e){var t=e.color||"#020202";return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Caution",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:"triangle"},r.createElement("path",{stroke:t,strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",d:"M127.9,76.632"}),r.createElement("path",{fill:"none",stroke:t,strokeWidth:"11",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"5",d:"M128.001,226.606c42.507,0,81.538,0,87.756,0c31.222,0,36.95-14.974,24.045-34.771c-6.921-10.617-78.297-122.962-89.163-140.254\tC141.859,37.613,138.542,29.393,128,29.393l0,0c-10.543,0-13.86,8.222-22.639,22.189C94.495,68.874,23.119,181.219,16.198,191.836 c-12.905,19.797-7.175,34.771,24.045,34.771C46.463,226.606,85.494,226.606,128.001,226.606"}),r.createElement("path",{fill:t,d:"M127.9,208.12"})),r.createElement("g",{className:"exclamation"},r.createElement("line",{fill:"none",stroke:t,strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",x1:"127.9",y1:"76.632",x2:"127.9",y2:"160.07"}),r.createElement("path",{fill:t,d:"M127.9,208.12c-6.377,0-11.548-5.17-11.548-11.548c0-6.377,5.17-11.547,11.548-11.547 c6.377,0,11.547,5.17,11.547,11.547C139.447,202.95,134.277,208.12,127.9,208.12"})))}function U(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Lock",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"topLock",d:"M203.553,197.794c0,21.929-17.778,39.706-39.706,39.706H92.154c-21.929,0-39.706-17.777-39.706-39.706v-71.693 c0-21.928,17.778-39.706,39.706-39.706h71.692c21.928,0,39.706,17.778,39.706,39.706V197.794z M128.001,129.664 c-8.941,0-16.19,7.248-16.19,16.189c0,5.589,2.833,10.518,7.137,13.427c2.066,1.395,0.318,23.508,0.318,32.842 c0,2.292-0.078,3.65,8.734,3.65c8.676,0,8.75-1.221,8.75-3.654c0-9.348-1.708-31.469,0.368-32.886 c4.269-2.916,7.071-7.821,7.071-13.38C144.191,136.912,136.941,129.664,128.001,129.664z"}),r.createElement("path",{className:"baseLock",fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",d:"M84.813,172.74V73.688l0,0 c0-23.85,19.335-43.188,43.187-43.188l0,0c23.852,0,43.188,19.337,43.188,43.188l0,0v23.885"}))}function H(e){var t="SVGIcon_Button SVGIcon_Throbber ";return e.className&&(t+=e.className),r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:a.a.partCircle},r.createElement("path",{className:a.a.roundOuter,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895"}),r.createElement("path",{className:a.a.roundOuter,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M201.432,101.166"}),r.createElement("path",{className:a.a.roundOuter,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754"})),r.createElement("g",{className:a.a.mainOutline},r.createElement("path",{className:a.a.roundFill,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundOuterOutline,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber01,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber02,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber03,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber04,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber05,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber06,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber07,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber08,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber09,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber10,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber11,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber12,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber13,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber14,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),r.createElement("path",{className:a.a.roundThrobber15,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"})),r.createElement("g",{className:a.a.bottomCircle},r.createElement("path",{fill:"#ffffff",d:"M89.226,181.579L76.5,176.321c2.256,4.696,6.159,8.628,11.339,10.786 c11.197,4.668,24.11-0.647,28.779-11.854c2.259-5.425,2.274-11.405,0.033-16.841c-2.237-5.436-6.46-9.675-11.886-11.938 c-5.384-2.24-11.151-2.156-16.22-0.244l13.146,5.436c8.261,3.443,12.166,12.93,8.725,21.189 C106.976,181.115,97.486,185.022,89.226,181.579"})),r.createElement("g",{className:a.a.topCircle},r.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",cx:"161.731",cy:"101.274",r:"23.019"})))}function W(){return r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Video",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"videoPlayButton",d:"M165.399,124.063L109.118,92.06c-1.399-0.797-3.118-0.787-4.508,0.026c-1.39,0.805-2.25,2.295-2.25,3.905v64.008 c0,1.609,0.86,3.1,2.25,3.913c0.705,0.412,1.491,0.613,2.277,0.613c0.768,0,1.546-0.191,2.241-0.596l56.283-32.003 c1.416-0.806,2.285-2.306,2.285-3.934C167.694,126.368,166.816,124.869,165.399,124.063z"}),r.createElement("path",{d:"M238.069,40.646H214.25h-28.82h-28.82h-28.458h-0.36H99.333H70.536H41.727h-23.82c-3.184,0-5.773,2.59-5.773,5.772v23.856 v120.441v18.867c0,3.184,2.589,5.771,5.773,5.771h2.415h21.394h28.82h28.82h28.459h0.361h28.457h28.82h28.82h23.82 c3.184,0,5.773-2.589,5.773-5.771v-18.867V70.274V46.418C243.844,43.223,241.254,40.646,238.069,40.646z M191.215,47.181h17.273  V64.5h-17.273V47.181L191.215,47.181z M162.396,47.181h17.272V64.5h-17.272V47.181z M133.938,47.181h16.912V64.5h-16.912V47.181z\tM105.128,47.181h16.912V64.5h-16.912V47.181z M76.309,47.181h17.273V64.5H76.309V47.181z M47.488,47.181h17.273V64.5H47.488V47.181 z M18.681,47.181h17.273V64.5H18.681V47.181z M35.954,208.811H18.681v-17.319h17.273V208.811z M64.763,208.811H47.489v-17.319 h17.273V208.811L64.763,208.811z M93.583,208.811H76.31v-17.319h17.273V208.811z M122.041,208.811h-16.912v-17.319h16.912V208.811z M150.849,208.811h-16.912v-17.319h16.912V208.811z M179.668,208.811h-17.272v-17.319h17.272V208.811z M208.488,208.811h-17.273 v-17.319h17.273V208.811z M237.297,208.811h-17.273v-17.319h17.273V208.811L237.297,208.811z M237.297,184.943H214.25h-28.819 h-28.82h-28.458h-0.361H99.333H70.537H41.728H18.682V71.047h23.046h28.82h28.82h28.458h0.36h28.458h28.82h28.82h23.045v113.896 H237.297z M237.297,64.5h-17.273V47.181h17.273V64.5L237.297,64.5z"}))}function z(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"SVGIcon_Button SVGIcon_Image",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},r.createElement("path",{stroke:"#ffffff",fill:"#ffffff",d:"M83.086,12.091H16.913C10.344,12.091,5,17.435,5,24.004v51.992l0.005,0.102c0.056,6.514,5.396,11.813,11.908,11.813h66.173  c6.531,0,11.874-5.314,11.906-11.764L95,24.004C95,17.435,89.654,12.091,83.086,12.091z M83.086,82.989H16.913  c-3.516,0-6.488-2.653-6.93-6.106l18.899-20.615c1.226-1.34,2.85-2.076,4.574-2.076c1.723,0,3.347,0.736,4.574,2.078l19.611,21.393  c0.885,0.961,2.508,1.029,3.473,0.148c1-0.916,1.068-2.476,0.152-3.478l-4.113-4.485l8.406-8.918  c1.258-1.332,2.926-2.064,4.696-2.064c1.772,0,3.44,0.732,4.696,2.064l15.061,15.973C89.564,80.346,86.594,82.989,83.086,82.989z   M90.08,69.801L78.532,57.555c-2.194-2.328-5.132-3.609-8.275-3.609c-3.142,0-6.08,1.281-8.272,3.609l-8.164,8.656l-12.162-13.27  c-2.171-2.366-5.084-3.67-8.201-3.67c-3.119,0-6.031,1.304-8.202,3.67L9.92,69.673V24.004c0-3.856,3.137-6.994,6.993-6.994h66.173  c3.857,0,6.994,3.137,6.994,6.994V69.801z"}),r.createElement("path",{stroke:"#ffffff",fill:"#ffffff",d:"M68.907,22.489c-6.569,0-11.914,5.344-11.914,11.914c0,6.569,5.345,11.913,11.914,11.913  c6.567,0,11.913-5.344,11.913-11.913C80.82,27.833,75.477,22.489,68.907,22.489z M68.907,41.396c-3.856,0-6.993-3.137-6.993-6.993  s3.137-6.994,6.993-6.994c3.854,0,6.991,3.138,6.991,6.994S72.764,41.396,68.907,41.396z"}))}function q(){return r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Bell",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{d:"M107.785,33.965c-34.875,8.972-60.644,40.618-60.644,78.308v53.903c0,4.965-4.035,8.99-8.975,8.99 c-9.929,0-17.978,8.066-17.978,17.971c0,9.924,8.059,17.969,18.013,17.969h179.598c9.948,0,18.014-8.066,18.014-17.969 c0-9.926-8.087-17.971-17.979-17.971c-4.956,0-8.975-3.993-8.975-8.99v-53.903c0-37.676-25.763-69.333-60.644-78.308v-9.281 c0-11.193-9.052-20.219-20.215-20.219c-11.143,0-20.215,9.052-20.215,20.219V33.965L107.785,33.965z M96.554,220.09h62.891 c0,17.366-14.079,31.445-31.445,31.445C110.633,251.535,96.554,237.458,96.554,220.09z"}))}function K(e){return r.createElement("svg",{style:{transform:"rotate("+e.angle+"deg)"},version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Arrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"128,247.688 128,8.313 181.061,61.674 "}),r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"128,247.688 128,8.313 74.939,61.674 "}))}function Y(e){return r.createElement("svg",{style:{transform:"rotate("+e.angle+"deg)"},version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoubleArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polyline",{className:"Arrow1",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"135.65,21.667 30.081,127.235 137.18,234.333 "}),!e.singlearrow&&r.createElement("polyline",{className:"Arrow2",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"224.389,21.667 118.821,127.235 225.92,234.333 "}))}function X(){return r.createElement("svg",{version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoubleArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polyline",{className:"Arrow1",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"135.65,21.667 30.081,127.235 137.18,234.333 "}),r.createElement("polyline",{className:"Arrow2",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"224.389,21.667 118.821,127.235 225.92,234.333 "}))}function Q(){return r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Maximize",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("rect",{x:"24",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"208",height:"171.667"}),r.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"24",y1:"54.01",x2:"232",y2:"54.01"}))}function J(){return r.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Minimize",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",x1:"24",y1:"209.01",x2:"232",y2:"209.01"}))}function Z(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Restore",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polyline",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"12",strokeMiterlimit:"10",points:"83,90.861 83,42.167 232,42.167 232,165.14 173,165.14 "}),r.createElement("rect",{x:"24",y:"90.861",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"149",height:"122.973"}))}function $(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Reload",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"30",strokeLinecap:"round",strokeMiterlimit:"10",d:"M229.809,147.639 c-9.178,47.863-51.27,84.027-101.809,84.027c-57.253,0-103.667-46.412-103.667-103.666S70.747,24.334,128,24.334 c34.107,0,64.368,16.472,83.261,41.895"}),r.createElement("polygon",{points:"147.639,108.361 245.755,10.166 245.834,108.361 "}))}function ee(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Trade",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{d:"M132.025,162.943h40.246c0,0,3.219,56.879-31.303,79.599c-12.298,8.094,71.103-6.708,75.574-79.599h35.775l-60.146-74.681 L132.025,162.943z"}),r.createElement("path",{d:"M123.975,93.056H83.729c0,0-3.219-56.879,31.303-79.599c12.298-8.094-71.103,6.708-75.574,79.599H3.682l60.146,74.681 L123.975,93.056z"}))}function te(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Trash",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:"base"},r.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M216.773,43.909 l-7.399,177.589c-0.37,8.893-7.919,16.1-16.812,16.1H63.437c-8.914,0-16.442-7.24-16.812-16.1L39.226,43.909"})),r.createElement("g",{className:"lines"},r.createElement("path",{className:"line1",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M128,68.12v137.197"}),r.createElement("path",{className:"line2",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M83.613,68.12 l4.035,137.197"}),r.createElement("path",{className:"line3",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M172.387,68.12 l-4.035,137.197"})),r.createElement("g",{className:"lid"},r.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.121,38.577H228.88"}),r.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",d:"M87.648,38.577l4.319-10.796c2.072-5.181,8.292-9.379,13.84-9.379h44.386 c5.572,0,11.761,4.18,13.841,9.379l4.319,10.796"})))}function ne(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Scroll",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{transform:"translate(0,-952.36215)"},r.createElement("path",{d:"M49.624,963.362c-20.72,0-37.667,14.78-37.667,32.806c0,3.589,3.353,6.499,7.486,6.499l52.407-0.305v162.5 c0,18.134,17.404,32.5,38.018,32.5h96.508c20.612,0,37.667-14.475,37.667-32.5c0-3.59-3.354-6.499-7.486-6.5H217.84V996.168 c0-18.024-16.947-32.806-37.667-32.806H49.624z M49.624,976.362h2.223c0.569,0.162,1.158,0.265,1.754,0.306 c8.159,1.274,14.426,6.085,16.962,12.694l-42.112,0.306C31.513,981.897,39.656,976.362,49.624,976.362z M79.337,976.362h100.836 c12.587,0,22.694,8.77,22.694,19.806v162.194H139.23c-4.135,0.001-7.486,2.91-7.488,6.5c0,4.609-1.43,7.796-4.21,10.765 c-2.78,2.972-7.203,5.757-13.686,7.923c-0.624,0.201-1.214,0.476-1.755,0.813h-2.223c-12.695,0-23.044-8.573-23.044-19.5v-169 C86.824,988.529,84.023,981.812,79.337,976.362z M108.582,1005.611c-4.135,0.169-7.33,3.216-7.135,6.807 c0.193,3.59,3.702,6.363,7.837,6.194h71.123c4.135,0.051,7.535-2.817,7.592-6.407c0.059-3.591-3.246-6.542-7.381-6.594 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1005.603,108.816,1005.603,108.582,1005.611z M108.582,1044.612 c-4.135,0.169-7.33,3.215-7.135,6.807c0.193,3.588,3.702,6.362,7.837,6.192h71.123c4.135,0.051,7.535-2.816,7.592-6.407 c0.059-3.59-3.246-6.542-7.381-6.592c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1044.603,108.816,1044.603,108.582,1044.612z M108.582,1083.612c-4.135,0.169-7.33,3.216-7.135,6.806c0.193,3.589,3.702,6.363,7.837,6.193h71.123 c4.135,0.052,7.535-2.816,7.592-6.407c0.059-3.59-3.246-6.541-7.381-6.592c-0.069-0.001-0.141-0.001-0.211,0h-71.123 C109.05,1083.602,108.816,1083.602,108.582,1083.612z M108.582,1122.611c-4.135,0.17-7.33,3.216-7.135,6.806 c0.193,3.591,3.702,6.364,7.837,6.195h71.123c4.135,0.05,7.535-2.818,7.592-6.408c0.059-3.591-3.246-6.541-7.381-6.593 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1122.602,108.816,1122.602,108.582,1122.611z M145.547,1171.363h82.002 c-3.09,7.604-11.189,12.999-21.173,12.999h-67.849c0.196-0.197,0.512-0.306,0.703-0.509 C142.576,1180.277,144.436,1175.973,145.547,1171.363z"})))}function oe(e){return r.createElement("svg",{style:{transform:"rotate("+e.angle+"deg)"},version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FlatArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polygon",{points:"13.913,141 128,59 242.087,141 ",fill:"#ffffff"}))}function re(e){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FriendIcon"+(e.bPending?" SVGIcon_FriendIcon_Pending":""),x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:"Outline"},r.createElement("g",{transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},r.createElement("path",{d:"M102.239,90.394c-22.556,0-40.906-18.351-40.906-40.906c0-22.556,18.35-40.906,40.906-40.906s40.906,18.35,40.906,40.906 C143.145,72.043,124.795,90.394,102.239,90.394z"})),r.createElement("path",{d:"M127.453,250.212c-30.208,0-52.086-4.188-65.028-12.45c-12.507-7.983-13.141-17.484-13.141-19.308v-41.781 c0-20.554,5.356-38.104,15.489-50.754c11.63-14.519,29.216-22.193,50.858-22.194h23.646c21.643,0,39.229,7.674,50.858,22.193 c10.133,12.65,15.488,30.201,15.488,50.754v41.751c0.011,2.202-0.586,8.058-6.43,14.175 c-11.164,11.687-35.301,17.613-71.732,17.613C127.458,250.212,127.458,250.212,127.453,250.212z"}),r.createElement("path",{className:"WavingArm",opacity:e.bPending?"1":"0",d:"M87.625,170.102c-5.877,0-14.85-1.804-24.219-10.4c-8.677-7.961-20.959-20.438-30.563-31.048 c-18.766-20.732-21.125-26.658-19.522-32.832c1.463-5.64,10.288-27.077,26.729-28.926c0.429-0.048,0.867-0.072,1.303-0.072 c7.609,0,14.543,6.335,38.063,31.516c7.141,7.645,14.524,15.549,18.002,18.33l0.803,0.641c5.551,4.432,11.291,9.015,15.104,14.136 c8.477,11.383,3.634,20.705,1.158,24.185C108.034,164.692,97.995,170.102,87.625,170.102z"})),r.createElement("g",{className:"foreground"},r.createElement("g",{transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},r.createElement("circle",{fill:"#FFFFFF",cx:"102.239",cy:"49.488",r:"33.446"})),r.createElement("path",{fill:"#FFFFFF",d:"M195.624,218.454v-41.781c0-34.743-16.666-62.948-56.347-62.948h-11.822h-0.997h-10.826 c-39.68,0.001-56.348,28.205-56.348,62.948v41.781c0,0,0,21.758,68.169,21.758C196.62,240.214,195.624,218.454,195.624,218.454z"}),r.createElement("path",{className:"WavingArm",opacity:e.bPending?"1":"0",d:"M41.167,76.833c6.53-0.734,39.348,39.127,50.007,47.647c10.659,8.52,21.327,16.686,15.16,25.353 s-20.646,16.74-36.167,2.5 s-48.516-48.801-47.167-54S31.599,77.909,41.167,76.833z"})))}function ie(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoNotDisturb",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"24",strokeMiterlimit:"10",cx:"128",cy:"128",r:"101.5"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"24",strokeMiterlimit:"10",x1:"73",y1:"128",x2:"183",y2:"128"}))}function ae(e){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scaleX("+(e.bFlipHorizontal?-1:1)+")"},className:"SVGIcon_Button SVGIcon_MediaControls",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"Arrow",d:"M77.003,54.763h32.784c3.794,0,9.113,2.181,11.814,4.848l63.604,62.773c2.703,2.667,2.727,7.054,0.05,9.748 l-63.705,64.206c-2.674,2.693-7.968,4.898-11.763,4.898H77.003"}),r.createElement("polyline",{className:"preArrowBox",opacity:e.bHidePreArrow?"0":"1",points:"6.833,54.763 46.71,54.763 46.71,201.236 6.833,201.236 \t"}),r.createElement("polyline",{className:"jumpAheadBox",opacity:e.bShowJumpAheadBox?"1":"0",points:"6.833,54.764 86.386,54.764 86.386,201.236 6.833,201.236 \t"}),r.createElement("polyline",{className:"postArrowBox",opacity:e.bHidePostArrow?"0":"1",points:"209.29,54.763 249.167,54.763 249.167,201.236 209.29,201.236 \t"}))}function se(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_SteamTV",x:"0px",y:"0px",width:"1024px",height:"256px",viewBox:"0 0 1024 256"},r.createElement("defs",null,r.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.createElement("stop",{offset:"0%",stopColor:"rgb(55, 102, 251)"}),r.createElement("stop",{offset:"100%",stopColor:"rgb(91, 106, 219)"})),r.createElement("linearGradient",{id:"gradientText",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.createElement("stop",{offset:"0%",stopColor:"rgb(91, 106, 219)"}),r.createElement("stop",{offset:"100%",stopColor:"rgb(125, 110, 188)"}))),r.createElement("circle",{className:"logoBG",opacity:"0",fill:"#000000",cx:"156.586",cy:"128",r:"125.914"}),r.createElement("g",{id:"logo"},r.createElement("path",{fill:"url(#gradient)",d:"M156.374,5.355c-64.404,0-117.167,49.661-122.18,112.77l65.712,27.171 c5.567-3.808,12.293-6.032,19.53-6.032c0.649,0,1.294,0.016,1.934,0.051l29.226-42.355c0-0.202-0.005-0.399-0.005-0.598 c0-25.496,20.74-46.241,46.237-46.241c25.498,0,46.239,20.745,46.239,46.241c0,25.494-20.741,46.241-46.239,46.241 c-0.352,0-0.698-0.01-1.047-0.021l-41.68,29.741c0.022,0.546,0.041,1.095,0.041,1.644c0,19.14-15.569,34.707-34.706,34.707 c-16.796,0-30.843-11.991-34.026-27.87l-46.993-19.429c14.55,51.464,61.831,89.19,117.957,89.19 c67.713,0,122.605-54.893,122.605-122.604C278.978,60.244,224.086,5.355,156.374,5.355"}),r.createElement("path",{fill:"rgb(67, 104, 241)",d:"M111.026,191.387l-15.061-6.22c2.67,5.56,7.285,10.208,13.418,12.767 c13.25,5.521,28.531-0.771,34.054-14.028c2.674-6.416,2.694-13.5,0.04-19.929c-2.646-6.431-7.64-11.451-14.063-14.129 c-6.371-2.648-13.196-2.552-19.198-0.291l15.561,6.436c9.776,4.074,14.396,15.299,10.324,25.072 C132.031,190.841,120.801,195.464,111.026,191.387"}),r.createElement("path",{fill:"rgb(79, 105, 230)",d:"M227.639,96.359c0-16.987-13.82-30.809-30.809-30.809c-16.987,0-30.812,13.821-30.812,30.809 c0,16.988,13.824,30.806,30.812,30.806C213.818,127.165,227.639,113.347,227.639,96.359 M173.736,96.306 c0-12.783,10.364-23.142,23.145-23.142c12.783,0,23.145,10.359,23.145,23.142c0,12.783-10.361,23.142-23.145,23.142 C184.1,119.447,173.736,109.089,173.736,96.306"})),r.createElement("g",{id:"steam"},r.createElement("path",{fill:"rgb(92, 106, 218)",d:"M404.52,91.9l-7.968,14.006c-6.138-4.287-14.455-6.862-21.717-6.862c-8.299,0-13.437,3.43-13.437,9.586 c0,7.473,9.124,9.212,22.682,14.082c14.574,5.149,22.948,11.21,22.948,24.558c0,18.264-14.359,28.519-34.998,28.519 c-10.063,0-22.195-2.595-31.53-8.265l5.815-15.539c7.579,4.008,16.644,6.381,24.722,6.381c10.897,0,16.071-4.021,16.071-9.96 c0-6.802-7.893-8.843-20.641-13.06c-14.521-4.856-24.586-11.213-24.586-25.992c0-16.658,13.34-26.225,32.538-26.225 C387.797,83.128,398.551,87.367,404.52,91.9"}),r.createElement("polygon",{fill:"rgb(99, 107, 211)",points:"468.163,100.753 468.163,174.252 449.402,174.252 449.402,100.753 422.166,100.753 422.166,84.663 495.315,84.663 495.315,100.753 \t"}),r.createElement("polygon",{fill:"rgb(108, 108, 203)",points:"533.512,100.706 533.512,120.896 569.417,120.896 569.417,136.982 533.512,136.982 533.512,158.014 575.173,158.014 575.173,174.253 514.757,174.253 514.757,84.665 575.173,84.665 575.173,100.706"}),r.createElement("path",{fill:"rgb(117, 109, 195)",d:"M617.054,156.857l-5.932,17.396h-19.67l33.593-89.594h18.888l34.539,89.594h-20.336l-6.061-17.396H617.054z M634.378,106.035l-12.23,35.87h24.723L634.378,106.035z"}),r.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"773.403,119.291 748.888,171.645 738.302,171.645 714.182,119.758 714.182,174.253 696.212,174.253 696.212,84.665 714.138,84.665 744.251,149.33 773.285,84.665 791.374,84.665 791.374,174.253 773.406,174.253"})),r.createElement("g",{id:"tv"},r.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"853.961,92.664 823.506,92.664 823.506,84.147 893.835,84.147 893.835,92.664 863.51,92.664 863.51,174.479 853.961,174.479"}),r.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"909.835,84.147 920.286,84.147 950.612,165.831 980.033,84.147 990.487,84.147 956.421,174.479 944.159,174.479"})))}function ce(e){var t=Object(s.a)("SVGIcon_Button","SVGIcon_SteamLogo",e&&e.className);return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",viewBox:"0 0 256 256"},r.createElement("path",{fill:"#ffffff",d:"M127.374,5.355c-64.404,0-117.167,49.661-122.18,112.77l65.712,27.171 c5.567-3.808,12.293-6.032,19.53-6.032c0.649,0,1.294,0.017,1.934,0.051l29.226-42.354c0-0.202-0.005-0.399-0.005-0.598 c0-25.496,20.74-46.241,46.237-46.241c25.498,0,46.238,20.745,46.238,46.241c0,25.494-20.74,46.242-46.238,46.242 c-0.352,0-0.698-0.011-1.047-0.021l-41.68,29.741c0.022,0.546,0.041,1.095,0.041,1.644c0,19.141-15.569,34.707-34.706,34.707 c-16.796,0-30.843-11.99-34.026-27.869l-46.993-19.43c14.55,51.464,61.831,89.189,117.957,89.189 c67.713,0,122.604-54.893,122.604-122.604C249.979,60.244,195.086,5.355,127.374,5.355"}),r.createElement("path",{fill:"#ffffff",d:"M82.026,191.387l-15.061-6.22c2.67,5.56,7.285,10.208,13.418,12.767 c13.25,5.521,28.531-0.771,34.054-14.027c2.674-6.416,2.694-13.5,0.04-19.93c-2.646-6.431-7.64-11.451-14.063-14.129 c-6.371-2.647-13.196-2.552-19.198-0.291l15.561,6.437c9.776,4.073,14.396,15.299,10.324,25.071 C103.031,190.841,91.801,195.464,82.026,191.387"}),r.createElement("path",{fill:"#ffffff",d:"M198.639,96.359c0-16.987-13.82-30.809-30.809-30.809c-16.987,0-30.813,13.821-30.813,30.809 c0,16.988,13.824,30.806,30.813,30.806S198.639,113.347,198.639,96.359 M144.736,96.306c0-12.783,10.363-23.142,23.145-23.142 c12.783,0,23.145,10.359,23.145,23.142c0,12.783-10.36,23.142-23.145,23.142C155.1,119.447,144.736,109.089,144.736,96.306"}))}function le(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Viewers",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"frontGuy",fill:"#666666",d:"M181.732,53.151c-17.255,0-31.321,13.316-31.321,32.634v25.132 c0,18.005,24.006,21.006,24.382,21.381c-10.691,2.813-30.947,8.252-40.888,15.566c-8.252,6.003-11.44,18.005-13.128,22.882 c-0.75,2.063-1.688,5.064-1.688,7.127c0,0,0,9.94,0,19.881s12.941,16.505,18.005,16.505h89.65c4.877,0,18.006-5.627,18.006-16.505 s0-19.881,0-19.881c0-2.251-0.938-5.627-1.688-7.689c-4.313-10.878-4.688-16.316-13.315-22.319 c-9.941-6.939-30.009-12.19-40.512-15.004c0.374-0.563,24.193-4.127,24.193-22.131V85.785 C213.053,66.467,198.986,53.151,181.732,53.151L181.732,53.151z"}),r.createElement("path",{className:"backGuy",fill:"rgb(144, 153, 161)",d:"M84.204,34.396c-20.068,0-36.385,15.38-36.385,38.074v29.258c0,20.818,27.945,24.382,28.32,24.944 c-12.378,3.189-36.01,9.565-47.638,18.006c-9.753,7.127-13.504,21.006-15.379,26.632c-0.75,2.251-1.876,6.002-1.876,8.253  c0,0,0,11.44,0,23.257c0,11.815,15.004,19.13,20.819,19.13h104.279c5.814,0,20.818-6.564,20.818-19.13c0-12.566,0-23.257,0-23.257 c0-2.438-1.125-6.564-2.063-8.815c-5.063-12.566-5.438-18.942-15.566-26.069c-11.628-8.065-34.885-14.067-47.076-17.443 c0.375-0.563,28.133-4.876,28.133-25.695V72.469C120.59,49.775,104.272,34.396,84.204,34.396L84.204,34.396z"}))}function ue(){return r.createElement("svg",{version:"1.1",id:"Layer_5",className:"SVGIcon_Button SVGIcon_Globe",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 64 64"},r.createElement("g",null,r.createElement("path",{d:"M32.5,5C17.9,5,6,16.9,6,31.5C6,46.1,17.9,58,32.5,58S59,46.1,59,31.5C59,16.9,47.1,5,32.5,5 M32.5,54.7c-1.2,0-2.5-0.1-3.7-0.3c-1.1-1.1-2.1-2.8-3-4.8c-0.8-1.8-1.4-3.8-2-6c2.7-0.3,5.6-0.5,8.6-0.5c3,0,5.9,0.2,8.6,0.5c-0.5,2.2-1.2,4.2-2,6c-0.9,2-1.9,3.7-3,4.8C35,54.6,33.7,54.7,32.5,54.7 M32.5,41.4c-3.2,0-6.2,0.2-9,0.5c-0.6-3-0.9-6.2-1-9.6h19.9c0,3.4-0.4,6.6-1,9.6C38.7,41.6,35.7,41.4,32.5,41.4 M32.5,8.3c1.2,0,2.5,0.1,3.7,0.3c1.1,1.1,2.1,2.8,3,4.8c0.8,1.8,1.4,3.8,2,6c-2.7,0.3-5.6,0.5-8.6,0.5c-3,0-5.9-0.2-8.6-0.5c0.5-2.2,1.2-4.2,2-6c0.9-2,1.9-3.7,3-4.8C30,8.4,31.3,8.3,32.5,8.3 M32.5,21.6c3.2,0,6.2-0.2,9-0.5c0.6,3,0.9,6.2,1,9.6H22.6c0-3.4,0.4-6.6,1-9.6C26.3,21.4,29.3,21.6,32.5,21.6 M44.1,30.7c0-3.5-0.4-6.8-1-9.8c3.4-0.5,6.4-1.1,8.8-2c2.3,3.5,3.6,7.5,3.7,11.8H44.1z M20.9,30.7H9.3c0.1-4.2,1.4-8.3,3.7-11.8c2.5,0.8,5.5,1.5,8.8,2C21.3,23.9,21,27.2,20.9,30.7 M20.9,32.3c0,3.5,0.4,6.8,1,9.8c-3.4,0.5-6.4,1.1-8.8,2c-2.3-3.5-3.6-7.5-3.7-11.8H20.9z M44.1,32.3h11.6c-0.1,4.2-1.4,8.3-3.7,11.8c-2.5-0.8-5.5-1.5-8.8-2C43.7,39.1,44,35.8,44.1,32.3 M51,17.5c-0.1,0-0.2,0.1-0.3,0.1c-2.3,0.7-5,1.3-7.9,1.7c-0.9-4.1-2.3-7.6-4-10.1c3.8,1.1,7.3,3.1,10.2,5.9C49.6,15.9,50.3,16.6,51,17.5 M26.3,9.2c-1.7,2.5-3.1,6-4,10.1c-2.9-0.4-5.6-1-7.9-1.7c-0.1,0-0.2-0.1-0.3-0.1c0.6-0.8,1.3-1.6,2.1-2.4C19,12.2,22.5,10.2,26.3,9.2 M14,45.5c0.1,0,0.2-0.1,0.3-0.1c2.3-0.7,5-1.3,7.9-1.7c0.9,4.1,2.3,7.6,4,10.1c-3.8-1.1-7.3-3.1-10.2-5.9C15.4,47.1,14.7,46.4,14,45.5 M38.7,53.8c1.7-2.5,3.1-6,4-10.1c2.9,0.4,5.6,1,7.9,1.7c0.1,0,0.2,0.1,0.3,0.1c-0.6,0.8-1.3,1.6-2.1,2.4C46,50.8,42.5,52.8,38.7,53.8"})))}function pe(){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_STVTimelineGrabber",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{className:"leftarrow",opacity:"0"},r.createElement("polygon",{points:"127.817,4.403 4,128 127.817,251.598"})),r.createElement("g",{className:"rightarrow",opacity:"0"},r.createElement("polygon",{points:"127.816,4.403 251.633,128 127.816,251.598"})),r.createElement("g",{className:"grabber"},r.createElement("polygon",{points:"145.692,22.132 145.692,234.361 127.817,251.598 110.307,234.361 110.307,22.132 127.817,4.403"})))}function me(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_STVTimelineMarker",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polygon",{className:"pointer",points:"128,154.979 46.374,230.548 46.374,253.333 209.626,253.333 209.626,230.548 \t"}),r.createElement("rect",{className:"line",x:"116.271",y:"3.168",width:"23.459",height:"137.332"}))}function de(e){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_HideShowChat",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("g",{id:"hidechat",opacity:e.showChat?"0":"1"},r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011"}),r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"49.786",y1:"15.012",x2:"214.409",y2:"233.723"})),r.createElement("g",{id:"showchat",opacity:e.showChat?"1":"0"},r.createElement("polygon",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 225.299,59.011 225.299,189.834"})),r.createElement("g",{id:"textlines",opacity:e.showChat?"1":"0"},r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"124.75",x2:"194.167",y2:"124.75"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"155.75",x2:"194.167",y2:"155.75"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"93.75",x2:"179.926",y2:"93.75"}),r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011 "}),r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"})))}function he(){return r.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ShowBothChats",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("circle",{opacity:"0",fill:"#FFFFFF",strokeWidth:"0",cx:"166.241",cy:"161.906",r:"75.259"}),r.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeLinecap:"round",strokeMiterlimit:"10",points:"92.367,155.634 51.311,183 51.311,150.296 23.834,150.296 23.834,19.473 140.5,19.473 140.5,91.5"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"82.167",x2:"113.379",y2:"82.167"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"113.167",x2:"113.379",y2:"113.167"}),r.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"51.167",x2:"99.138",y2:"51.167"}),r.createElement("path",{d:"M166.241,82.167c-43.933,0-79.74,35.807-79.74,79.74c0,43.932,35.808,79.739,79.74,79.739 c43.932,0,79.739-35.808,79.739-79.739C245.98,117.975,210.173,82.167,166.241,82.167 M166.241,231.717 c-3.611,0-7.522-0.301-11.134-0.902c-3.31-3.311-6.318-8.426-9.027-14.444c-2.407-5.416-4.212-11.434-6.018-18.054  8.124-0.902,16.851-1.505,25.878-1.505c9.026,0,17.753,0.603,25.877,1.505c-1.504,6.62-3.61,12.638-6.018,18.054 c-2.708,6.019-5.718,11.134-9.027,14.444C173.764,231.416,169.852,231.717,166.241,231.717 M166.241,191.696 c-9.629,0-18.656,0.602-27.082,1.505c-1.805-9.027-2.708-18.656-3.009-28.887h59.88c0,10.23-1.203,19.859-3.009,28.887 C184.896,192.298,175.87,191.696,166.241,191.696 M166.241,92.097c3.61,0,7.522,0.301,11.133,0.903 c3.311,3.31,6.319,8.425,9.027,14.443c2.407,5.416,4.213,11.435,6.019,18.055c-8.125,0.902-16.851,1.504-25.878,1.504  s-17.753-0.602-25.878-1.504c1.505-6.62,3.611-12.639,6.019-18.055c2.708-6.018,5.717-11.133,9.026-14.443 \tC158.719,92.398,162.63,92.097,166.241,92.097 M166.241,132.117c9.629,0,18.655-0.602,27.081-1.504 \tc1.806,9.026,2.708,18.655,3.009,28.887h-59.88c0-10.231,1.204-19.86,3.01-28.887 \tC147.585,131.516,156.612,132.117,166.241,132.117 M201.146,159.5c0-10.532-1.203-20.462-3.009-29.488 c10.23-1.505,19.258-3.311,26.479-6.019c6.921,10.531,10.833,22.567,11.134,35.507H201.146z M131.336,159.5H96.432 c0.301-12.639,4.212-24.976,11.133-35.507c7.522,2.407,16.55,4.514,26.479,6.019C132.54,139.038,131.637,148.968,131.336,159.5 M131.336,164.314c0,10.531,1.204,20.461,3.01,29.488c-10.231,1.505-19.259,3.31-26.48,6.018 c-6.921-10.531-10.832-22.567-11.133-35.506H131.336z M201.146,164.314h34.905c-0.301,12.638-4.213,24.975-11.134,35.506 c-7.522-2.406-16.55-4.513-26.479-6.018C199.942,184.775,200.845,174.846,201.146,164.314 M221.908,119.78 c-0.301,0-0.602,0.301-0.903,0.301c-6.92,2.106-15.045,3.912-23.771,5.115c-2.708-12.337-6.921-22.868-12.036-30.391 c11.434,3.31,21.966,9.328,30.691,17.753C217.695,114.966,219.802,117.072,221.908,119.78 M147.585,94.806 c-5.115,7.522-9.328,18.054-12.036,30.391c-8.727-1.203-16.851-3.009-23.771-5.115c-0.301,0-0.602-0.301-0.902-0.301 c1.805-2.407,3.911-4.814,6.318-7.222C125.619,103.833,136.15,97.814,147.585,94.806 M110.574,204.033 c0.301,0,0.602-0.301,0.902-0.301c6.921-2.106,15.045-3.912,23.771-5.115c2.708,12.337,6.921,22.869,12.036,30.392 c-11.435-3.311-21.966-9.328-30.692-17.754C114.786,208.848,112.68,206.742,110.574,204.033 M184.896,229.009 c5.116-7.522,9.329-18.055,12.036-30.392c8.727,1.203,16.852,3.009,23.771,5.115c0.301,0,0.603,0.301,0.903,0.301 c-1.806,2.407-3.912,4.814-6.319,7.222C206.863,219.981,196.331,226,184.896,229.009"}))}function fe(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_BigPicture",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{fill:"#ffffff",d:"M213.771,68.659c-4.108-7.066-46.007-7.231-49.293-7.231H128H91.522c-3.286,0-45.186,0.165-49.293,7.231 c-19.555,29.248-27.385,100.263-27.276,104.01c0.238,8.294,2.11,24.583,16.595,35.162c9.201,6.72,22.183,8.709,29.083,3.614 c4.989-3.682,11.995-19.224,19.061-32.204c7.064-12.981,9.202-11.174,12.98-12.159c3.78-0.986,36.066-0.74,36.066-0.74 s30.809-0.247,34.588,0.74c3.777,0.985,5.915-0.822,12.98,12.159c7.064,12.98,14.07,28.522,19.061,32.204 c6.9,5.095,19.882,3.106,29.083-3.614c14.485-10.58,16.356-26.868,16.595-35.162C241.154,168.922,233.325,97.906,213.771,68.659z M67.251,128.14c-14.974,0-27.112-12.137-27.112-27.111c0-14.975,12.137-27.112,27.112-27.112 c14.973,0,27.111,12.137,27.111,27.112C94.362,116.003,82.224,128.14,67.251,128.14z M188.749,128.14 c-14.974,0-27.111-12.137-27.111-27.111c0-14.975,12.138-27.112,27.111-27.112c14.973,0,27.111,12.137,27.111,27.112 C215.86,116.003,203.722,128.14,188.749,128.14z"}))}function _e(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_MobilePhone",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{d:"M165.693,45.186H91.368c-7.963,0-14.41,6.447-14.41,14.41V210.9c0,7.964,6.447,14.41,14.41,14.41h74.134 c7.965,0,14.41-6.447,14.41-14.41V59.596C180.102,51.633,173.657,45.186,165.693,45.186z M113.172,57.509h30.717 c1.707,0,3.223,1.327,3.223,3.224c0,1.896-1.328,3.223-3.223,3.223h-30.717c-1.707,0-3.223-1.328-3.223-3.223 C109.949,58.837,111.465,57.509,113.172,57.509z M128.529,213.554c-4.551,0-8.152-3.603-8.152-8.153c0-4.55,3.604-8.152,8.152-8.152 s8.151,3.603,8.151,8.152C136.682,209.761,133.081,213.554,128.529,213.554z M169.105,186.819h-81.15V74.384h81.15V186.819 L169.105,186.819z"}))}function ge(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_VR",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{d:"M224.389,62.411H31.613c-10.147,0-18.36,8.214-18.36,18.36v94.453c0,10.147,8.215,18.359,18.36,18.359h192.775 c10.146,0.241,18.358-7.968,18.358-18.116V80.771C242.747,70.625,234.534,62.411,224.389,62.411z M92.317,175.026H71.646 L35.472,79.832h21.895l25.022,72.484l24.343-72.484h21.895L92.317,175.026z M195.264,175.026l-19.175-32.095h-2.176h-14.279 v32.095h-19.991V79.832h35.63c13.056,0,22.664,2.607,28.831,7.819c6.164,5.215,9.247,12.49,9.247,21.827 c0,7.343-1.61,13.463-4.828,18.359c-3.219,4.896-7.729,8.614-13.531,11.151l22.575,36.038H195.264z"}),r.createElement("path",{d:"M187.784,100.298c-2.812-2.312-7.391-3.468-13.735-3.468h-14.415v28.966h15.639c5.257,0,9.36-1.336,12.308-4.012 c2.945-2.673,4.42-6.368,4.42-11.083C192,106.078,190.593,102.61,187.784,100.298z"}))}function be(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_LargeMobilePhone",x:"0px",y:"0px",width:"128px",height:"255px",viewBox:"0 0 128 255"},r.createElement("rect",{className:"screen",x:"7.756",y:"5.518",fill:"#292D33",width:"112.144",height:"234.357"}),r.createElement("path",{className:"frame",fill:"#3C414B",d:"M40.334,15.72h47.237c3.957,0,7.164-3.259,7.164-7.28c0-1.113,0.889-2.017,1.984-2.017h9.746 c7.417,0,13.432,6.108,13.432,13.646v206.156c0,7.538-6.015,13.647-13.431,13.647H21.459c-7.417,0-13.429-6.109-13.429-13.647 V20.071c0-7.536,6.013-13.646,13.429-13.646h9.728c1.096,0,1.983,0.903,1.983,2.017C33.17,12.461,36.377,15.72,40.334,15.72 M107.057,0.001H20.87c-9.922,0-17.965,8.174-17.965,18.256v217.505c0,10.082,8.043,18.256,17.965,18.256h86.188 c9.923,0,17.966-8.174,17.966-18.256V18.257C125.022,8.175,116.979,0.001,107.057,0.001"}),r.createElement("path",{fill:"#3C414B",d:"M0.826,33.349C0.369,33.349,0,33.725,0,34.189v7.616c0,0.464,0.37,0.84,0.826,0.84s0.827-0.376,0.827-0.84 v-7.617C1.653,33.725,1.283,33.349,0.826,33.349"}),r.createElement("path",{fill:"#3C414B",d:"M0.826,51.56C0.369,51.56,0,51.936,0,52.4v16.8c0,0.465,0.37,0.841,0.826,0.841s0.827-0.376,0.827-0.841 V52.4C1.653,51.936,1.283,51.56,0.826,51.56"}),r.createElement("path",{fill:"#3C414B",d:"M0.826,75.304C0.369,75.304,0,75.68,0,76.144v15.904c0,0.464,0.37,0.84,0.826,0.84s0.827-0.376,0.827-0.84 V76.144C1.653,75.68,1.283,75.304,0.826,75.304"}),r.createElement("path",{fill:"#3C414B",d:"M127.617,58.056c-0.457,0-0.827,0.376-0.827,0.84v27.328c0,0.464,0.37,0.84,0.827,0.84 c0.456,0,0.826-0.376,0.826-0.84V58.896C128.443,58.432,128.073,58.056,127.617,58.056"}))}function ve(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Envelope",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("polygon",{fill:"#3C414B",points:"3.167,48.809 127.22,128 252.833,48.809 "}),r.createElement("polygon",{fill:"#3C414B",points:"252.833,203.68 252.833,55.439 185.151,99.131 "}),r.createElement("polygon",{fill:"#3C414B",points:"247.958,207.191 180.47,101.472 128.001,134.24 75.142,101.472 7.849,207.191 "}),r.createElement("polygon",{fill:"#3C414B",points:"3.167,203.682 3.167,55.441 70.851,99.132 "}))}function ye(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_YouTube",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{d:"M243.402,70.101c-2.775-10.309-10.906-18.439-21.217-21.217c-18.838-5.152-94.185-5.152-94.185-5.152 s-75.348,0-94.185,4.957c-10.112,2.775-18.44,11.104-21.216,21.413C7.644,88.94,7.644,128,7.644,128s0,39.257,4.957,57.896 c2.775,10.313,10.905,18.439,21.216,21.219c19.036,5.154,94.185,5.154,94.185,5.154s75.347,0,94.185-4.957 c10.311-2.771,18.441-10.906,21.217-21.217c4.953-18.838,4.953-57.898,4.953-57.898S248.557,88.94,243.402,70.101z M104.008,164.088 V91.912L166.668,128L104.008,164.088z"}))}function Se(){return r.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_CSGO",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M236.979,138.059c0.548,0.078,6.91,0.101,7.772,0.032 c1.215-0.095,1.396,0.068,1.388,0.708c-0.01,0.397,0.012,3.039-2.365,7.32c-3.301,5.948-12.079,10.436-12.55,10.672 c-0.47,0.233-0.53,0.484-0.136,0.75c0.434,0.295,8.068,1.454,9.084,1.611c1.017,0.154,0.637,1.001,0.637,1.001 s-0.704,2.621-2.895,5.36c-2.189,2.738-9.311,6.123-8.583,6.123c0.731,0,7.187,0.159,6.181,1.422 c-3.019,3.786-13.603,9.528-18.43,13.813c-13.388,11.885-13.217,12.864-15.52,15.09c-0.983-3.298-3.02-12.658-3.02-12.658 l-6.105-11.467c4.413,0.18,6.364,0.081,8.952,0.081c9.214,0,17.525-2.185,22.234-5.841l2.371-1.843l-2.911-0.728 c-2.131-0.528-7.121-1.782-11.896-2.979c2.184-0.104,10.803-1.299,14.413-5.339c0.136-0.151,0.276-0.321,0.406-0.494l1.245-1.664 l-2.404-0.735c-2.607-0.799-5.948-1.682-8.517-2.335c3.173-1.572,7.585-3.942,10.048-6.088c4.83-4.203,7.226-9.709,7.322-9.943 l0.9-2.098l-10.772,0.318c1.503-1.483,3.218-3.197,3.939-3.991c1.43-1.571,4.053-6.221,4.198-9.896l0.072-1.787l-1.763,0.288 c-1.979,0.322-5.301,1.279-8.179,2.173c2.025-2.193,4.296-4.767,5.46-6.484c2.687-3.964,2.76-8.371,2.597-12.916l-0.104-2.881 l-2.261,1.79c-2.559,2.028-7.595,5.031-11.097,7.047c1.538-3.644,3.54-8.752,3.813-11.276c0.5-4.681-0.248-10.196-0.248-10.196 l-10.76,9.394c0.885-1.953,1.684-4.013,2.117-5.832c1.735-7.29,0.055-17.892-0.021-18.338l-0.452-2.807l-7.777,7.739 c0.722-3.535,1.465-8.253,1.23-11.789c-0.426-6.321-2.278-10.517-2.359-10.694l-1.01-2.251l-6.465,8.577 c0.231-4.285,0.27-10.24-0.948-13.547c-1.934-5.262-3.651-8.007-3.723-8.121l-1.232-1.958l-3.057,4.85 c0.018-2.967-0.11-6.475-0.69-8.68c-1.202-4.543-2.825-6.396-3.002-6.592l-1.325-1.433l-1.623,2.705 c-0.278-3.19-1.112-7.084-3.343-9.478l-0.814-0.872l-1.012,0.623c-0.327,0.201-0.714,0.497-1.104,0.823 c-0.154-1.135-0.365-2.451-0.639-3.691c0.563-4.733,1.186-10.03,1.206-10.452c0.027-0.547,0.274-0.767,1.017-0.391 c0.898,0.452,3.156,2.064,5.187,6.133c2.036,4.067,3.132,11.324,3.117,12.044c-0.009,0.383,0.291,0.757,0.438,0.151 c0.145-0.607,0.478-7.591,0.623-8.312c0.081-0.383,0.199-0.484,0.737-0.212c0.496,0.249,2.959,2.181,4.899,6.463 c1.179,2.599,1.634,11.946,1.574,12.653c-0.106,1.278,0.313,0.891,0.339,0.883c-0.009,0.013-0.025,0.04-0.03,0.049 c0.03-0.041,0.036-0.049,0.03-0.049c0.573-0.841,4.21-8.99,4.519-9.377c0.313-0.39,0.521-0.395,0.835,0.002 c0.262,0.33,2.095,1.717,4.049,10.088c1.902,8.135,1.949,11.542,1.848,12.682c-0.08,0.86,0.339,0.993,0.731,0.524 c0.389-0.47,5.104-9.201,5.497-9.515c0.389-0.313,0.613-0.309,0.927,0.161c0.312,0.469,2.718,4.762,3.684,11.448 c0.861,5.947,0.608,13.599,0.375,14.381c-0.235,0.782-0.135,1.077,0.493,0.53c0.623-0.548,10.299-8.412,11.004-9.038 c0.703-0.627,1.18-0.65,1.34-0.046c0.172,0.654,0.822,8.654,0.275,15.225c-0.549,6.571-2.626,12.752-2.94,13.145 c-0.312,0.391,0.087,0.712,0.478,0.555c0.394-0.157,11.902-10.018,12.645-10.402c0.711-0.367,1.043,0.005,1.105,0.507 c0.068,0.544,0.966,3.098-0.419,11.269c-0.959,5.65-3.54,11.876-3.855,12.033c-0.313,0.157-0.077,0.336,0.234,0.259 c0.315-0.079,8.324-3.488,8.872-3.567c0.546-0.079,0.671,0.339,0.514,0.808c-0.158,0.469-0.458,6.273-2.534,11.639 c-2.603,6.732-6.056,11.001-6.056,11.001s-0.252,0.519,0.217,0.519s9.266-0.186,9.813-0.263c0.547-0.079,0.627,0.156,0.547,0.704 c-0.077,0.547,0.858,9.116-8.624,14.601C236.524,137.734,236.432,137.979,236.979,138.059z M174.473,24.823 c1.981,3.34,2.018,9.248,1.836,11.469l-0.52,6.238l5.25-8.744c0.395,0.843,0.85,2.003,1.25,3.524 c1.02,3.877,0.422,13.082,0.417,13.173l-0.384,5.752l6.435-10.212c0.628,1.27,1.45,3.097,2.32,5.459 c1.466,3.983,0.772,13.806,0.381,17.257l-0.602,5.308l9.568-12.69c0.493,1.707,1.058,4.21,1.259,7.227 c0.39,5.821-2.272,15.731-2.299,15.83l-1.428,5.26l11.125-11.068c0.377,3.586,0.772,9.774-0.304,14.302 c-1.2,5.057-5.778,12.588-5.823,12.664l-1.806,3.992l16.878-14.09c-0.116,1.366-0.262,2.944-0.423,4.435 c-0.312,2.935-3.954,11.389-5.335,14.399l-1.827,4.002l3.856-2.115c0.381-0.208,8.027-4.41,12.979-7.778 c-0.039,3.484-0.537,6.042-2.139,8.4c-2.189,3.234-9.05,10.198-9.118,10.268l-4.352,4.408l5.861-2.004 c0.08-0.025,6.868-2.34,11.188-3.41c-0.675,2.445-2.208,5.125-3.11,6.118c-1.319,1.449-6.429,6.429-6.48,6.482l-2.682,2.614 l13.475-0.404c-1.06,1.837-2.89,4.549-5.457,6.783c-3.727,3.244-12.956,7.341-13.048,7.383l-3.952,1.746l4.201,1.008 c0.062,0.015,5.637,1.354,10.266,2.67c-3.412,2.191-9.291,3.081-10.948,3.138c-2.06,0.072-11.075,0.125-11.075,0.125l-11.51,0.069 l11.162,2.804c0,0,12.587,3.164,19.486,4.894c-4.398,2.216-10.717,3.493-17.657,3.493c-3.102,0-10.335-0.284-15.048-0.483 c4.064,6.069,7.041,11.004,7.992,13.681c2.813,7.915,6.777,28.269,6.889,48.907c0.039,6.572-1.081,11.649-9.022,11.649 c-0.288,0-0.597-0.038-0.908-0.092c-1.846,0.339-4.351,0.595-5.438-0.095c-1.805-1.149-3.163-2.627-3.544-3.957 c-0.383-1.334-1.146-9.374-3.106-20.675c-1.92-11.046-4.038-19.431-4.237-19.525c-1.535-0.731-9.358-18.45-9.358-18.45 l-37.23-47.615c0,0-20.737,23.917-37.455,47.8c-0.867,1.235-5.994,11.251-9.275,17.989c-0.212,0.437-0.181,0.475-0.281,0.808 c-0.604,2.015-2.396,9.525-4.039,18.994c-1.962,11.301-2.725,19.341-3.105,20.675c-0.384,1.33-1.74,2.808-3.546,3.957 c-1.085,0.689-3.592,0.434-5.437,0.095c-0.313,0.054-0.621,0.092-0.909,0.092c-7.941,0-9.061-5.077-9.024-11.649 c0.114-20.639,4.078-40.992,6.892-48.907c0.95-2.677,3.926-7.611,7.993-13.681c-4.714,0.199-11.946,0.483-15.051,0.483 c-6.939,0-13.26-1.277-17.653-3.493c6.896-1.729,19.486-4.894,19.486-4.894l11.159-2.804l-11.508-0.069 c0,0-9.019-0.053-11.076-0.125c-1.66-0.057-7.537-0.946-10.949-3.138c4.629-1.315,10.202-2.655,10.264-2.67l4.201-1.008l-3.95-1.746 c-0.094-0.042-9.324-4.139-13.049-7.383c-2.566-2.234-4.397-4.946-5.458-6.783l13.477,0.404l-2.684-2.614 c-0.05-0.054-5.16-5.033-6.48-6.482c-0.9-0.993-2.436-3.673-3.108-6.118c4.319,1.069,11.108,3.384,11.188,3.41l5.861,2.004 l-4.352-4.408c-0.069-0.069-6.928-7.033-9.12-10.268c-1.601-2.358-2.099-4.916-2.139-8.4c4.953,3.368,12.601,7.57,12.98,7.778 l3.858,2.115l-1.829-4.002c-1.379-3.011-5.022-11.465-5.334-14.399c-0.161-1.491-0.305-3.068-0.421-4.435l16.877,14.09l-1.806-3.992 c-0.046-0.076-4.622-7.607-5.821-12.664c-1.078-4.528-0.682-10.716-0.307-14.302L58.57,89.672l-1.426-5.26 c-0.025-0.098-2.688-10.008-2.3-15.83c0.203-3.017,0.767-5.52,1.26-7.227l9.566,12.69l-0.601-5.308 c-0.391-3.451-1.083-13.274,0.381-17.257c0.871-2.362,1.693-4.189,2.32-5.459l6.435,10.212l-0.382-5.752 c-0.006-0.091-0.604-9.295,0.416-13.173c0.401-1.521,0.854-2.681,1.251-3.524l5.249,8.744l-0.52-6.238 c-0.181-2.221-0.144-8.129,1.836-11.469c0.596,0.522,1.248,1.148,1.67,1.575l2.215,2.245l0.276-3.142 c0.162-1.838,0.783-7.003,1.703-8.813c1.342-2.635,4.69-3.91,7.104-4.505c-6.691,13.614-36.889,77.59-36.889,122.937 c0,23.658,16.206,23.931,16.368,23.931c4.881,0,6.947-7.914,6.947-11.063V133.45c0-2.744,1.148-2.744,1.835-2.744 c5.807,0,10.48,3.196,13.855,6.69c8.813-11.615,15.81-20.526,15.81-20.526s0.16-0.182,0.248-0.345 c-1.03-2.443-7.165-16.995-7.165-16.995l1.708-43.717c0,0-0.278-3.797,1.044-6.052c1.314-2.245,4.247-3.175,4.247-3.175 l13.307,41.443c0,0-4.107,0.866-4.107,5.585c0,2.982,2.658,4.99,6.227,5.013c3.572-0.022,6.227-2.031,6.227-5.013 c0-4.719-4.109-5.585-4.109-5.585l13.311-41.443c0,0,2.93,0.93,4.245,3.175c1.322,2.255,1.043,6.052,1.043,6.052l1.709,43.717 l-7.309,17.34c0,0,6.997,8.911,15.809,20.526c3.375-3.494,8.048-6.69,13.855-6.69c0.687,0,1.833,0,1.833,2.744v14.538 c0,3.148,2.068,11.063,6.95,11.063c0.159,0,16.367-0.272,16.367-23.931c0-45.347-30.197-109.322-36.888-122.937 c2.412,0.595,5.761,1.87,7.104,4.505c0.92,1.809,1.541,6.975,1.705,8.813l0.275,3.142l2.213-2.245 C173.226,25.972,173.875,25.345,174.473,24.823z M176.157,181.396c-1.644-2.189-41.07-55.856-41.07-55.856l-6.723,8.809 l-0.946-1.233l-0.829-1.082l-5.053-6.594l-0.095,0.101c0,0-39.427,53.667-41.07,55.856c-1.643,2.191-4.777,6.708-6.058,9.322 c-1.279,2.614-8.946,39.306-8.946,42.592c0,2.005,0.041,8.618,0.071,13.47c1.536,0.2,3.411,0.761,4.357,0.125 c1.624-1.093,2.363-2.323,2.491-3.372c0.128-1.048,1.367-12.969,2.69-20.812c1.779-10.547,4.571-19.005,4.415-18.97 c3.213-6.672,8.966-17.938,9.887-19.252c17.808-25.439,38.994-49.947,38.994-49.947s21.166,24.502,38.978,49.947 c0.921,1.313,6.672,12.58,9.888,19.252c-0.158-0.035,2.635,8.423,4.414,18.97c1.322,7.843,2.562,19.764,2.688,20.812 c0.131,1.049,0.87,2.279,2.493,3.372c0.944,0.636,2.818,0.075,4.355-0.125c0.032-4.852,0.073-11.465,0.073-13.47 c0-3.286-7.667-39.978-8.948-42.592C180.936,188.104,177.801,183.588,176.157,181.396z M82.538,21.517l-1.014-0.623l-0.813,0.872 c-2.231,2.394-3.063,6.287-3.342,9.478l-1.624-2.705l-1.323,1.433c-0.179,0.197-1.801,2.049-3.004,6.592 c-0.581,2.205-0.709,5.712-0.689,8.68l-3.057-4.85l-1.234,1.958c-0.072,0.114-1.787,2.859-3.722,8.121 c-1.22,3.307-1.179,9.262-0.949,13.547l-6.463-8.577l-1.012,2.251c-0.08,0.177-1.934,4.373-2.359,10.694 c-0.234,3.536,0.51,8.253,1.231,11.789l-7.778-7.739l-0.453,2.807c-0.073,0.446-1.754,11.048-0.02,18.338 c0.433,1.819,1.231,3.879,2.117,5.832l-10.759-9.394c0,0-0.749,5.515-0.248,10.196c0.271,2.523,2.272,7.632,3.813,11.276 c-3.503-2.016-8.539-5.019-11.099-7.047l-2.259-1.79l-0.106,2.881c-0.162,4.545-0.087,8.952,2.6,12.916 c1.161,1.717,3.433,4.291,5.459,6.484c-2.877-0.894-6.201-1.851-8.179-2.173l-1.763-0.288l0.071,1.787 c0.148,3.675,2.771,8.324,4.198,9.896c0.723,0.794,2.436,2.508,3.941,3.991L21.93,137.83l0.896,2.098 c0.1,0.234,2.493,5.74,7.324,9.943c2.464,2.146,6.876,4.516,10.047,6.088c-2.57,0.653-5.908,1.536-8.518,2.335l-2.402,0.735 l1.246,1.664c0.13,0.173,0.27,0.343,0.407,0.494c3.608,4.04,12.229,5.234,14.412,5.339c-4.774,1.197-9.767,2.451-11.896,2.979 l-2.911,0.728l2.371,1.843c4.708,3.656,13.02,5.841,22.233,5.841c2.588,0,4.539,0.099,8.954-0.081l-6.105,11.467 c0,0-2.038,9.36-3.02,12.658c-2.304-2.226-2.133-3.205-15.52-15.09c-4.829-4.284-15.411-10.026-18.429-13.813 c-1.005-1.263,5.449-1.422,6.179-1.422c0.73,0-6.393-3.385-8.582-6.123c-2.191-2.739-2.895-5.36-2.895-5.36s-0.38-0.847,0.637-1.001 c1.018-0.157,8.65-1.316,9.084-1.611c0.395-0.266,0.332-0.517-0.137-0.75c-0.469-0.236-9.248-4.724-12.548-10.672 c-2.375-4.281-2.357-6.923-2.364-7.32c-0.01-0.64,0.17-0.803,1.385-0.708c0.862,0.068,7.226,0.046,7.774-0.032 c0.546-0.08,0.453-0.324,0.019-0.576c-9.483-5.484-8.546-14.054-8.624-14.601c-0.079-0.548,0-0.783,0.548-0.704 c0.546,0.077,9.342,0.263,9.812,0.263c0.469,0,0.218-0.519,0.218-0.519s-3.452-4.27-6.056-11.001 c-2.077-5.366-2.377-11.169-2.533-11.639c-0.157-0.469-0.034-0.887,0.514-0.808c0.549,0.079,8.558,3.488,8.87,3.567 c0.313,0.077,0.548-0.103,0.235-0.259c-0.314-0.157-2.896-6.383-3.855-12.033c-1.384-8.17-0.488-10.725-0.42-11.269 c0.063-0.502,0.397-0.874,1.105-0.507c0.743,0.385,12.255,10.245,12.646,10.402c0.391,0.157,0.79-0.164,0.477-0.555 c-0.313-0.392-2.392-6.574-2.938-13.145c-0.548-6.571,0.1-14.571,0.274-15.225c0.161-0.604,0.635-0.581,1.339,0.046 c0.704,0.626,10.381,8.489,11.006,9.038c0.625,0.547,0.727,0.252,0.492-0.53c-0.235-0.782-0.484-8.435,0.375-14.381 c0.965-6.686,3.372-10.979,3.685-11.448s0.536-0.474,0.927-0.161c0.391,0.313,5.106,9.045,5.497,9.515 c0.391,0.469,0.809,0.336,0.732-0.524c-0.104-1.14-0.057-4.547,1.845-12.682c1.956-8.371,3.789-9.758,4.052-10.088 c0.313-0.396,0.521-0.392,0.833-0.002c0.309,0.387,3.945,8.536,4.519,9.377c-0.005,0,0,0.008,0.031,0.049 c-0.007-0.009-0.022-0.036-0.031-0.049c0.025,0.008,0.446,0.395,0.34-0.883c-0.058-0.707,0.396-10.055,1.574-12.653 c1.941-4.282,4.404-6.214,4.899-6.463c0.54-0.272,0.658-0.171,0.737,0.212c0.146,0.721,0.478,7.705,0.625,8.312 c0.146,0.606,0.444,0.232,0.437-0.151c-0.015-0.72,1.081-7.977,3.115-12.044c2.033-4.069,4.292-5.681,5.188-6.133 c0.742-0.376,0.989-0.156,1.018,0.391c0.022,0.422,0.645,5.719,1.206,10.452c-0.272,1.24-0.484,2.556-0.639,3.691 C83.251,22.014,82.866,21.718,82.538,21.517z M127.35,141.814c-1.158,12.032-4.978,23.045-6.326,29.486 c-1.643,7.849-4.788,18.061-6.793,20.931c-4.433,6.343-18.036,18.547-20.403,19.732c-1.094,0.547-6.376-4.115-6.56-4.846 c-0.182-0.728,2.883-3.993,2.154-3.627c-0.731,0.364-4.104,0.906-5.06,0.87c-0.753-0.026,0.633-2.728,0.633-2.728 s-1.484,2.217-3.021,2.947c-0.03,0.015,9.433-18.119,9.433-18.119S127.52,140.043,127.35,141.814z M119.7,169.39l3.104-10.647 l-1.869-0.559l-3.152,10.656L119.7,169.39z M114.072,167.242l4.687-10.051l-1.764-0.838l-4.735,10.055L114.072,167.242z  M126.961,159.319l-0.82,11.06l-1.991-0.139l0.867-11.079L126.961,159.319z M131.727,170.391l-1.986,0.167l-0.828-11.078 l1.944-0.144L131.727,170.391z M164.422,186.462c0,0,9.463,18.134,9.434,18.119c-1.54-0.73-3.021-2.947-3.021-2.947 s1.384,2.701,0.633,2.728c-0.957,0.036-4.33-0.506-5.06-0.87c-0.731-0.366,2.334,2.899,2.153,3.627 c-0.185,0.73-5.467,5.393-6.56,4.846c-2.368-1.186-15.973-13.39-20.404-19.732c-2.007-2.87-5.149-13.082-6.792-20.931 c-1.349-6.441-4.621-17.127-5.778-29.16C128.854,140.373,164.422,186.462,164.422,186.462z M142.029,167.242l1.813-0.834 l-4.735-10.055l-1.762,0.838L142.029,167.242z M136.402,169.39l1.917-0.55l-3.152-10.656l-1.868,0.559L136.402,169.39z"}))}function Ce(){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ClosedCaption",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{className:"CCBox",fill:"none",stroke:"#000000",strokeWidth:"10",strokeMiterlimit:"10",d:"M238,210c0,6.627-5.373,12-12,12H30 c-6.627,0-12-5.373-12-12V46c0-6.627,5.373-12,12-12h196c6.627,0,12,5.373,12,12V210z"}),r.createElement("path",{className:"C1",d:"M90.505,173.207c11.431,0,22.338-4.276,30.72-12.036c2.6-2.407,2.753-6.47,0.347-9.068c-2.41-2.604-6.47-2.757-9.072-0.349 c-5.998,5.559-13.811,8.62-21.995,8.62c-17.852,0-32.373-14.524-32.373-32.372c0-17.849,14.521-32.373,32.373-32.373 c8.177,0,15.981,3.055,21.979,8.603c2.603,2.407,6.662,2.25,9.072-0.353c2.407-2.602,2.249-6.662-0.353-9.068 c-8.375-7.751-19.276-12.019-30.694-12.019c-24.931,0-45.209,20.281-45.209,45.209C45.3,152.93,65.574,173.207,90.505,173.207z"}),r.createElement("path",{className:"C1",d:"M177.926,173.207c11.431,0,22.338-4.276,30.721-12.036c2.6-2.407,2.754-6.47,0.347-9.068 c-2.41-2.604-6.47-2.757-9.072-0.349c-5.998,5.559-13.812,8.62-21.995,8.62c-17.852,0-32.372-14.524-32.372-32.372 c0-17.849,14.521-32.373,32.372-32.373c8.178,0,15.981,3.055,21.979,8.603c2.604,2.407,6.663,2.25,9.072-0.353 c2.407-2.602,2.25-6.662-0.353-9.068c-8.375-7.751-19.277-12.019-30.694-12.019c-24.932,0-45.209,20.281-45.209,45.209 C132.721,152.93,152.996,173.207,177.926,173.207z"}))}function Oe(){return r.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Hidden",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},r.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M62.499,172.263 c-32.755-16.197-47.415-39.509-47.415-39.509"}),r.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M177.948,85.392 c48.213,14.998,68.451,47.362,68.451,47.362s-36.393,54.737-115.689,54.737c-17.938,0-33.591-2.671-47.096-6.832"}),r.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M15.084,132.754 c0,0,32.933-56.576,115.674-54.785c8.505,0.185,16.486,0.913,23.96,2.072"}),r.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M93.981,141.131 c-0.475-2.385-0.725-4.852-0.725-7.377c0-20.711,16.789-37.5,37.5-37.5c2.42,0,4.787,0.229,7.08,0.668"}),r.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M156.528,106.512 c7.223,6.836,11.729,16.513,11.729,27.242c0,20.711-16.789,37.5-37.5,37.5c-10.609,0-20.189-4.405-27.012-11.487"}),r.createElement("line",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"53.007",y1:"210.504",x2:"208.507",y2:"55.004"}))}function Ie(){return r.createElement("svg",{height:"100px",width:"100px",fill:"#000000",x:"0px",y:"0px",viewBox:"0 0 101 101",enableBackground:"new 0 0 101 101",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},r.createElement("g",null,r.createElement("path",{d:"M16.929,30.115 M84.446,84.262c0-37.271-30.323-67.613-67.587-67.613l0,0l0.069,13.467   c29.777,0.039,53.995,24.256,54.051,54.042L84.446,84.262z"}),r.createElement("path",{d:"M16.843,53.089 M61.472,84.262c0-24.616-20.026-44.639-44.628-44.639l0,0v13.466c17.182,0,31.161,13.984,31.161,31.173   H61.472z"}),r.createElement("circle",{cx:"26.695",cy:"74.305",r:"9.812"})))}function Ee(e){return r.createElement("svg",Object(o.a)({},e,{height:"24px",width:"24px",viewBox:"0 0 24 24",x:"0px",y:"0px"}),r.createElement("path",{fill:"white",d:"M3.3,0.5v23h17.5v-23H3.3z M10.2,9.6l-3-2.2h3.7L12,3.9l1.2,3.6H17l-3,2.2l1.2,3.6L12,11l-3,2.2L10.2,9.6z M17.3,16.1 M17.4,18H6.6v-1.2h10.7L17.4,18L17.4,18z M17.3,19.9"}))}},eMko:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return I}));var o=n("mrSG"),r=n("q1tI"),i=n("2vnA"),a=n("TyAF"),s=n("vDqi"),c=n.n(s),l=n("1n9R"),u=n("lqmi"),p=n("oh5H"),m=n("9PRf"),d=n("uw3m"),h=n("da/R"),f=n("QHER"),_=n("r6f6"),g=n.n(_),b=n("ujHl").d.PerMinute,v=function(){function e(e){this.m_bLoadingData=!1,this.m_rtLastLoad=0,this.m_accountid=e}return Object.defineProperty(e.prototype,"community_data",{get:function(){return this.m_communityData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"community_data_ready",{get:function(){return void 0!==this.m_communityData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player_level",{get:function(){return this.m_communityData&&this.m_communityData.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player_level_class",{get:function(){return this.m_communityData&&this.m_communityData.level_class},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player_badge",{get:function(){return this.m_communityData&&this.m_communityData.favorite_badge},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profile_background",{get:function(){return this.m_communityData&&this.m_communityData.profile_background},enumerable:!1,configurable:!0}),e.prototype.Reload=function(){this.m_rtLastLoad=0,this.EnsureCommunityDataLoaded()},e.prototype.EnsureCommunityDataLoaded=function(){var e=this,t=this.m_communityData||this.m_bLoadingData,n=Date.now()>this.m_rtLastLoad+1e3*b;(!t||n&&!this.m_bLoadingData)&&(this.m_bLoadingData=!0,c.a.get(l.c.CHAT_BASE_URL+"miniprofile/"+this.m_accountid+"/json").then((function(t){var n=t.data;"number"==typeof n.level&&"string"==typeof n.level_class&&(e.m_communityData=n),e.m_bLoadingData=!1,e.m_rtLastLoad=Date.now()})).catch((function(t){e.m_bLoadingData=!1})))},Object(o.c)([i.B],e.prototype,"m_communityData",void 0),e}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.community_data,t=e&&e.favorite_badge;return t?r.createElement("div",{className:Object(f.a)(g.a.miniProfileFeaturedContainer,this.props.className)},r.createElement("div",{className:g.a.favoriteBadgeIcon},r.createElement("img",{src:t.icon,className:g.a.badgeIcon})),r.createElement("div",{className:Object(f.a)(g.a.featuredLabels,g.a.favoriteBadgeDescription)},r.createElement("div",{className:g.a.featuredTitle},t.name),r.createElement("div",{className:g.a.featuredSubTitle},Object(p.d)("#Hover_BadgeXP",t.xp)))):null},t=Object(o.c)([a.a],t)}(r.Component),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.community_data,n=e.className;return t?r.createElement("div",{className:Object(f.a)(g.a.miniProfileFeaturedContainer,n)},r.createElement("div",{className:t.level_class},r.createElement("span",{className:g.a.friendPlayerLevelNum},t.level)),r.createElement("div",{className:g.a.featuredLabels},r.createElement("div",{className:g.a.featuredTitle},Object(p.d)("#Hover_SteamLevel")+" "))):null},t=Object(o.c)([a.a],t)}(r.Component),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.persona;return r.createElement("div",{className:Object(f.a)(g.a.miniProfileGameContainer,this.props.className)},this.props.persona.GetCurrentGameLogoURL()&&r.createElement("img",{className:g.a.gameLogo,src:this.props.persona.GetCurrentGameLogoURL()}),r.createElement("div",{className:Object(f.a)(g.a.gameContent,g.a.persona,g.a.ingame,g.a.ellipsis)},r.createElement("div",{className:g.a.gameState},Object(p.d)(e.is_in_nonsteam_game?"#PersonaStateInNonSteamGame":"#PersonaStateInGame")),this.props.persona.GetCurrentGameName(),this.props.persona.HasCurrentGameRichPresence()&&r.createElement("div",{className:g.a.richPresence},this.props.persona.GetCurrentGameRichPresence()),this.props.in_game_section_additional))},t=Object(o.c)([a.a],t)}(r.Component),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e,t,n=this.props.broadcast_description;return n&&(e=Object(p.d)("#PersonaStateWatchingBroadcast"),t=n),r.createElement("div",{className:Object(f.a)(g.a.miniProfileGameContainer,this.props.className)},this.props.persona.GetBroadcastGameLogoURL()&&r.createElement("img",{className:g.a.gameLogo,src:this.props.persona.GetBroadcastGameLogoURL()}),r.createElement("div",{className:Object(f.a)(g.a.gameContent,g.a.persona,g.a.watchingbroadcast,g.a.ellipsis)},r.createElement("div",{className:g.a.gameState},e),t&&r.createElement("div",{className:g.a.richPresence},t),r.createElement("div",{className:g.a.watchingbroadcastThumbnail},this.props.broadcast_thumbnail)))},t=Object(o.c)([a.a],t)}(r.Component),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=(e.className,e.persona),n=e.data_loader,i=e.community_data_override,a=e.nickname,s=e.is_friend,c=e.is_blocked,l=(e.friend_relationship,e.broadcast_description,e.broadcast_thumbnail,e.mutual_friends,e.in_game_section_additional,e.bottom_section_additional),d=Object(o.f)(e,["className","persona","data_loader","community_data_override","nickname","is_friend","is_blocked","friend_relationship","broadcast_description","broadcast_thumbnail","mutual_friends","in_game_section_additional","bottom_section_additional"]),_=n.community_data;i&&(_=Object(o.a)(Object(o.a)({},_),i));var b=Object.keys(_&&_.profile_background||{}).length>0,v=void 0,I=g.a.miniProfileContent;t.is_ingame?v=r.createElement(C,Object(o.a)({},this.props,{className:b?g.a.miniProfileBackdropBlur:void 0})):t.is_watchingbroadcast?v=r.createElement(O,Object(o.a)({},this.props,{className:b?g.a.miniProfileBackdropBlur:void 0})):I+=" "+g.a.notInOrWatchingGame;var M=!0,D=!1,T=!1;s||(I+=" "+g.a.notFriends,M=!1),c&&(I+=" "+g.a.communicationBlocked,T=!0);var j=void 0!==a,G=t.is_awayOrSnooze,R=void 0;return R=j?r.createElement("div",null,r.createElement("div",{className:g.a.personaAndIcons},r.createElement("div",{className:Object(f.a)(g.a.personaName,g.a.nickName)},r.createElement("div",{className:g.a.personaNameLabel},this.props.nickname),r.createElement("div",{className:g.a.playerNicknameBracket,title:Object(p.d)("#isNickname")},"*")),r.createElement(h.a,{persona:t})),r.createElement("div",{className:Object(f.a)(g.a.personaName,g.a.hasNickname)},"(",r.createElement("div",{className:g.a.personaNameLabel},t.m_strPlayerName),")")):r.createElement("div",{className:g.a.personaAndIcons},r.createElement("div",{className:g.a.personaName},r.createElement("div",{className:g.a.personaNameLabel},t.m_strPlayerName)),r.createElement(h.a,{persona:t})),2==this.props.friend_relationship&&(D=!0),r.createElement(r.Fragment,null,r.createElement("div",Object(o.a)({key:t.GetAccountID(),className:Object(f.a)(this.props.className,g.a.miniProfile)},d),r.createElement("div",{className:I},r.createElement(E,{community_data:_,persona:t}),r.createElement("div",{className:g.a.miniProfileHeader},r.createElement("div",{className:Object(f.a)(g.a.miniProfilePlayer,t.online_state,G&&g.a.isAway,Object(u.d)(t))},r.createElement(w,{persona:this.props.persona,community_data:_}),G&&r.createElement(m.a,{persona:t,animating:!0,className:g.a.SnoozeContainer,size:"large"}),r.createElement("div",{className:g.a.playerContent},r.createElement("div",{className:g.a.playerName},r.createElement("div",{className:g.a.persona},R,G&&r.createElement("div",{className:g.a.awayStatusLabel},Object(p.d)("#PersonaStateAway")),!t.is_online&&r.createElement("div",{className:g.a.awayStatusLabel},this.props.persona.GetLocalizedOnlineStatus()),"online"==t.online_state&&!G&&r.createElement("div",{className:g.a.awayStatusLabel},Object(p.d)("#PersonaStateOnline")),!M&&r.createElement("div",{className:g.a.miniProfileNotFriends},D?Object(p.d)("#Friend_Menu_NotAFriendRequesting"):Object(p.d)("#Friend_Menu_NotAFriendLabel")),T&&r.createElement("div",{className:g.a.miniProfileBlocked},Object(p.d)("#PersonaStateBlocked"))))))),v,r.createElement("div",{className:Object(f.a)(g.a.miniProfileBottom,b&&g.a.miniProfileBackdropBlur)},r.createElement(y,{community_data:_}),r.createElement(S,{community_data:_})),l,r.createElement("div",{className:g.a.mutualFriends},this.props.mutual_friends))))},t=Object(o.c)([a.a],t)}(r.Component),E=function(e){var t=e.community_data,n=e.persona;if(t&&t.profile_background){var i=t.profile_background,a=i.image,s=Object(o.f)(i,["image"]);if(Object.keys(s).length)return r.createElement("div",{className:g.a.miniProfileVideoBackgroundContainer,key:s["video/webm"]||s["video/mp4"]||"image"},r.createElement("video",{className:g.a.miniProfileVideoBackground,playsInline:!0,muted:!0,autoPlay:!0,loop:!0,poster:a},Object.keys(s).map((function(e){return r.createElement("source",{key:e,src:s[e],type:e})}))));if(a)return r.createElement("div",{className:g.a.miniProfileVideoBackgroundContainer},r.createElement("img",{className:g.a.miniProfileVideoBackground,src:a}))}return r.createElement("div",{className:g.a.miniProfileBackground},r.createElement("img",{className:g.a.miniProfileBackgroundBlur,src:n.avatar_url}))},w=function(e){var t=e.persona,n=e.community_data,i=n&&n.avatar_frame&&r.createElement("img",{src:n.avatar_frame,className:g.a.Frame}),a=n&&n.animated_avatar,s={size:"X-Large",statusPosition:"bottom",className:g.a.playerAvatar};return a?r.createElement(d.a,Object(o.a)({strAvatarURL:a},s),i):r.createElement(d.c,Object(o.a)({persona:t},s),i)}},eeM7:function(e,t,n){e.exports={v6:"shared_common_v6_39eAm",SubText:"shared_common_SubText_iXOar",AvatarImageContainer:"shared_common_AvatarImageContainer_2-Mc0",GameImageContainer:"shared_common_GameImageContainer_tFW9T",AvatarImage:"shared_common_AvatarImage_HVcru",STV_HomeGridPreviewDetails:"shared_common_STV_HomeGridPreviewDetails_1FyZE",ChatAvatarImage:"shared_common_ChatAvatarImage_3n4wV",EditButton:"shared_common_EditButton_DLPvj",Small:"shared_common_Small_lUt7Z",FlexCenter:"shared_common_FlexCenter_2xt9g",ThrobberCtn:"shared_common_ThrobberCtn_10smC",MarkdownLink:"shared_common_MarkdownLink_KOE6T",SummaryTextArea:"shared_common_SummaryTextArea_3Ar18",RemoveIcon:"shared_common_RemoveIcon_2Dwi9"}},ewzr:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("f825"),r=n("XaMz"),i=n("1n9R");function a(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=null),s.InstrumentLink(i.c.STORE_BASE_URL+"app/"+e,t,n)}var s=function(){function e(){}return e.SetNavEventParams=function(t,n,o,r){void 0===o&&(o=null),void 0===r&&(r=null),e.sm_strDomain=t,e.sm_strController=n,e.sm_strMethod=o,e.sm_strSubmethod=r,e.sm_strComputedLinkPrefix=null},e.GetDefaultParams=function(){var t={domain:e.sm_strDomain,controller:e.sm_strController};return e.sm_strMethod&&(t.method=e.sm_strMethod),e.sm_strSubmethod&&(t.submethod=e.sm_strSubmethod),t},e.InstrumentLink=function(t,n,o){void 0===o&&(o=null);var r=e.GetLinkParam(n,o);return e.AddNavParamToURL(t,r)},e.GetLinkParam=function(t,n){var o,r;if(void 0===n&&(n=null),"string"==typeof t||t.domain||(t=t.feature),"string"!=typeof t&&t.domain)o=e.ComputeLinkPrefix(t.domain,t.controller,t.method,t.submethod),r=t.feature;else{if(!e.sm_strComputedLinkPrefix&&!e.ComputeStaticLinkPrefix())return null;o=e.sm_strComputedLinkPrefix,r="string"==typeof t?t:t.feature}var i=e.EncodeEventComponent(r);return i&&(o+="_"+i,n&&(o+="_"+n)),o},e.AddNavParamToURL=function(e,t){var n="",o=e.indexOf("#");-1!==o&&(n=e.substr(o),e=e.substr(0,o));var r=e+(-1===e.indexOf("?")?"?":"&")+"snr="+encodeURIComponent(t);return r+=n},e.ComputeStaticLinkPrefix=function(){return e.sm_strDomain?(e.sm_strComputedLinkPrefix=e.ComputeLinkPrefix(e.sm_strDomain,e.sm_strController,e.sm_strMethod,e.sm_strSubmethod),!0):(Object(r.a)(!1,"CStoreNavEvents::SetNavEventParams was not called before calling InstrumentLink!"),!1)},e.ComputeLinkPrefix=function(t,n,o,r){var i="";return i+=e.EncodeEventComponent(t),i+="_",i+=e.EncodeEventComponent(n),i+="_",i+=e.EncodeEventComponent(o),i+="_",i+=e.EncodeEventComponent(r)},e.EncodeEventComponent=function(e){if(!e)return"";return e in o?""+o[e]:(e=e.replace(/^[0-9]+/,"")).replace(/[^a-zA-Z0-9\- ]+/g,"")},e}();t.b=s},f825:function(e){e.exports=JSON.parse('{"store.steampowered.com":1,"steamtv":2200,"steamclient":5000,"library":5100,"friendsui":5200,"friendcontextmenu":5201,"topsellers":7000}')},fxWM:function(e,t,n){e.exports={InviteDropMessage:"invitedrop_InviteDropMessage_3wNvd",InviteDropImage:"invitedrop_InviteDropImage_2FPXD",InviteDropName:"invitedrop_InviteDropName_1Opii",InviteDropContainer:"invitedrop_InviteDropContainer_23ASr",InviteDropBackground:"invitedrop_InviteDropBackground_3Q3b0",ChatModalCover:"invitedrop_ChatModalCover_3JCmd",appear:"invitedrop_appear_3vHg_",enter:"invitedrop_enter_3Fndl",appearActive:"invitedrop_appearActive_kaYbY",enterActive:"invitedrop_enterActive_2tuuM",exit:"invitedrop_exit_2b5oH",exitActive:"invitedrop_exitActive_3isQR"}},geE1:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return S}));var o=n("mrSG"),r=n("/7KC"),i=n("tkkQ"),a=n("4HGb"),s=n("s+DT"),c=n("OJz+"),l=n("nRcY"),u=n("+M9t"),p=n("LAqV"),m=n("2vnA"),d=n("oh5H"),h=n("tZiA"),f=(n("5Nu3"),n("/FkP")),_=n("1VtQ"),g=n("WpBz"),b=n("ujHl"),v=n("9Eit");var y=function(){function e(e){var t=this;this.m_rgFriendChats=[],this.m_bReceivedFriendChats=!1,this.m_rtLastSessionUpdate=0,this.m_mapLastChatTimeByFriend=m.B.map(),this.m_mapRecentIgnoreTimeBeforeByFriend=m.B.map(),this.m_LastMessageCache=i.a.IN_MOBILE?new C:new O,this.m_IncomingFriendMessageHandler=Object(c.d)(l.f.IncomingMessageHandler,(function(e){var n=new s.a(e.Body().steamid_friend()),o=p.f.FriendStore.GetPlayerIfCached(n.GetAccountID());if(!o){if(e.Body().low_priority())return 41;o=p.f.FriendStore.GetPlayer(n.GetAccountID())}if(1==e.Body().chat_entry_type()){var r=e.Body().local_echo(),a=o.is_blocked||e.Body().low_priority()&&!o.is_friend,c=r?t.m_ChatStore.FriendStore.self.persona.m_steamid:n,l=(h=t.GetFriendChat(n.GetAccountID(),!a)).GetVisibilityState();if(!(a||r||p.f.FriendStore.BIsInvisibleMode()||p.f.FriendStore.GetUserDoNotDisturb())&&!i.a.IN_MOBILE&&p.f.UIStore.ShowAndOrActivateChat(p.f.GetDefaultBrowserContext(),h,!1),h)if(o.is_friend||0!=l||h.SetShowNonFriendWarning(!0),r||!o.is_blocked){h.AddNewChatMsgAndNotify(c.GetAccountID(),e.Body().rtime32_server_timestamp(),e.Body().ordinal(),e.Body().message(),e.Body().message_no_bbcode());var u=t.m_ChatStore.TextFilterStore;if(!r&&!u.BShownFilterTip()&&u.BHasFilter()){var m=e.Body().message();u.FilterText(c.GetAccountID(),m)!==m&&(h.AddLocalMsg(c.GetAccountID(),e.Body().rtime32_server_timestamp(),Object(d.d)("#Chat_TextFilter_Active",t.m_ChatStore.GetTextFilterSettingsURL())),u.SetFilterTipShown(!0))}}else h.AppendChatMsg(c.GetAccountID(),e.Body().rtime32_server_timestamp(),e.Body().ordinal(),e.Body().message());t.m_mapLastChatTimeByFriend.set(n.GetAccountID(),e.Body().rtime32_server_timestamp())}else if(2==e.Body().chat_entry_type()&&!e.Body().local_echo()){var h;if(!o.is_blocked)(h=t.GetFriendChat(n.GetAccountID(),!1))&&h.OnFriendTypingNotification()}return 1})),this.m_AckMessageEchoHandler=Object(c.d)(l.f.NotifyAckMessageEchoHandler,(function(e){var n=new s.a(e.Body().steamid_partner()),o=t.GetFriendChat(n.GetAccountID());return o&&o.UpdateLastAckTimeFromServer(e.Body().timestamp()),1})),this.m_ChatStore=e}return e.prototype.Init=function(){this.m_LastMessageCache.Init()},e.prototype.GetFriendChat=function(e,t){void 0===t&&(t=!0);for(var n=0,o=this.m_rgFriendChats;n<o.length;n++){var r=o[n];if(r.accountid_partner==e)return r}if(!t)return null;var i=new S(e,this.m_ChatStore,this.m_ChatStore.CMInterface);return this.m_rgFriendChats.push(i),i},e.prototype.OnLogon=function(){var e=this;this.LoadFriendMessageSessions(),p.f.SettingsStore.GetObjectFromLocalStorageWhenReady("FriendRecentChats").then((function(t){for(var n in e.m_mapRecentIgnoreTimeBeforeByFriend.clear(),t.ignoretimes){var o=parseInt(n,10);e.m_mapRecentIgnoreTimeBeforeByFriend.set(o,t.ignoretimes[n])}}))},e.prototype.RestoreStatePostDisconnect=function(e){e&&this.LoadFriendMessageSessions();for(var t=0,n=this.m_rgFriendChats;t<n.length;t++){n[t].OnConnectionRestored()}},e.prototype.GetServiceTransport=function(){return this.m_ChatStore.CMInterface.GetServiceTransport()},e.prototype.LoadFriendMessageSessions=function(){var e=this,t=a.b.Init(l.e);t.Body().set_lastmessage_since(this.m_rtLastSessionUpdate),t.Body().set_only_sessions_with_messages(!0),l.g.GetActiveMessageSessions(this.GetServiceTransport(),t).then((function(t){e.m_rtLastSessionUpdate=t.Body().timestamp();for(var n=0,o=t.Body().message_sessions();n<o.length;n++){var r=o[n];e.m_mapLastChatTimeByFriend.set(r.accountid_friend(),r.last_message()),e.GetFriendChat(r.accountid_friend()).InitMessageSessionFromServer(r.unread_message_count(),r.last_view(),r.last_message())}p.f.FriendStore.UpdateUnreadMessagesGlobal(),e.m_bReceivedFriendChats=!0}))},e.prototype.GetFriendChatsByLastChatTime=function(){var e=this,t=[];return this.m_mapLastChatTimeByFriend.forEach((function(n,o){t.push([n,e.GetFriendChat(o)])})),t.sort((function(e,t){var n=e[0];return t[0]-n})).map((function(e){e[0];return e[1]}))},e.prototype.GetFriendsWithUnreadMessages=function(e){for(var t=[],n=0,o=this.m_rgFriendChats;n<o.length;n++){var r=o[n];r.unread_message_count>0&&(!e||r.GetVisibilityState(e)<2)&&!r.is_blocked_friend&&t.push(r)}return t.sort((function(e,t){return e.time_last_message-t.time_last_message})),t},e.prototype.BIsFriendChatRecent=function(e){var t=p.f.GetServerRTime32()-this.RecentChatCutoffDuration,n=this.m_mapLastChatTimeByFriend.get(e);if(!n)return!1;if(n>=t){var o=this.m_mapRecentIgnoreTimeBeforeByFriend.get(e);if(!o||o<n)return!0}return!1},e.prototype.GetFriendChatsWithRecentMessages=function(){var e=this;return this.m_rgFriendChats.filter((function(t){return e.BIsFriendChatRecent(t.accountid_partner)}))},e.prototype.GetUnfilteredFriendsWithUnreadMessages=function(){for(var e=[],t=0,n=this.m_rgFriendChats;t<n.length;t++){var o=n[t];o.unread_message_count>0&&!o.is_blocked_friend&&e.push(o)}return e.sort((function(e,t){return e.time_last_message-t.time_last_message})),e},e.prototype.GetAllChats=function(){return this.m_rgFriendChats.slice()},Object.defineProperty(e.prototype,"RecentChatCutoffDuration",{get:function(){return 3600},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LastMessageCache",{get:function(){return this.m_LastMessageCache},enumerable:!1,configurable:!0}),e.prototype.ClearRecentChatsForFriend=function(e){this.m_mapRecentIgnoreTimeBeforeByFriend.set(e,p.f.GetServerRTime32()),this.WriteRecentChatsPrefs()},e.prototype.WriteRecentChatsPrefs=function(){var e=this,t=p.f.GetServerRTime32()-this.RecentChatCutoffDuration;this.m_mapRecentIgnoreTimeBeforeByFriend.forEach((function(n,o){n<t&&e.m_mapRecentIgnoreTimeBeforeByFriend.delete(o)})),p.f.SettingsStore.StoreObjectInLocalStorage("FriendRecentChats",{ignoretimes:this.m_mapRecentIgnoreTimeBeforeByFriend.toJS()})},Object.defineProperty(e.prototype,"GetRecentlyChattingFriends",{get:function(){var e=this,t=[];return this.m_mapLastChatTimeByFriend.forEach((function(n,o){if(e.BIsFriendChatRecent(o)){var r=p.f.FriendStore.GetFriend(o);r&&t.push(r)}})),t.sort(u.b.DefaultFriendSortComparator),t},enumerable:!1,configurable:!0}),e.prototype.GetUnreadFriendMessageCount=function(e){for(var t=0,n=0,o=this.m_rgFriendChats;n<o.length;n++){var r=o[n];r.unread_message_count>0&&(!e||r.GetVisibilityState(e)<2)&&!r.is_blocked_friend&&(t+=r.unread_message_count)}return t},e.prototype.GetFriendLastChatTime=function(e){return this.m_mapLastChatTimeByFriend.get(e)||0},e.prototype.AddFriendPushNotificationData=function(e,t){var n=new s.a(e.steamid_friend()).GetAccountID();if(1==e.chat_entry_type()){var o=e.local_echo()?this.m_ChatStore.FriendStore.self.persona.m_steamid.GetAccountID():n,r=this.GetFriendChat(n,!1);if(!r)return;if(e.local_echo()&&r.HasClientMessageInFlight(e.client_message_id()))return;if(!r.HasChatMessage(e.previous_message_timestamp(),e.previous_message_ordinal()))return;r.AppendChatMsg(o,e.current_message_timestamp(),e.current_message_ordinal(),e.message()),this.m_mapLastChatTimeByFriend.set(n,e.current_message_timestamp())}},Object(o.c)([m.B],e.prototype,"m_rgFriendChats",void 0),Object(o.c)([m.B],e.prototype,"m_bReceivedFriendChats",void 0),Object(o.c)([m.k],e.prototype,"ClearRecentChatsForFriend",null),Object(o.c)([m.n],e.prototype,"GetRecentlyChattingFriends",null),e}(),S=function(e){function t(t,n,o){var r=e.call(this,n.FriendStore,n,o)||this;return r.m_iClearFriendIsTypingInterval=void 0,r.m_bFriendIsTyping=!1,r.m_bNeedsNonFriendWarning=!1,r.m_unAccountIDFriend=t,r.m_MessageSendQueue=new v.a(t.toString()),r.m_MessageSendQueue.InitFromStorage().then((function(){return r.InitQueuedMessages()})),r}return Object(o.d)(t,e),t.prototype.GetLastMessage=function(){var e=this;if(!this.m_strLastMessage&&!this.m_bChatLogsLoaded){var t=this.m_ChatStore.FriendChatStore.LastMessageCache.GetLastMessage(this.m_unAccountIDFriend);if(t&&this.m_rtLastMessageReceived<=t.rtTime)return t.strMessage;if(this.LoadChatLogs().then((function(){var t=e.chat_messages[e.chat_messages.length-1];t&&(e.m_strLastMessage=t.strMessage,e.m_accountIDLastMessage=t.unAccountID,e.m_rtLastMessageReceived=t.rtTimestamp,e.m_ChatStore.FriendChatStore.LastMessageCache.UpdateLastMessage(e.m_unAccountIDFriend,{strMessage:t.strMessage,rtTime:t.rtTimestamp,unAccountIDSender:t.unAccountID}))})),t)return t.strMessage}return this.m_strLastMessage},Object.defineProperty(t.prototype,"time_last_message",{get:function(){if(this.m_rtLastMessageReceived)return this.m_rtLastMessageReceived;var e=this.m_ChatStore.FriendChatStore.LastMessageCache.GetLastMessage(this.m_unAccountIDFriend);return e?e.rtTime:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accountid_last_message",{get:function(){if(this.m_accountIDLastMessage)return this.m_accountIDLastMessage;var e=this.m_ChatStore.FriendChatStore.LastMessageCache.GetLastMessage(this.m_unAccountIDFriend);return e?e.unAccountIDSender:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unread_message_count",{get:function(){var e=this.m_ChatStore.VoiceChat.BPartnerHasRequestedAndIsInOneOnOneChat(this.m_unAccountIDFriend);return e=e&&!this.BVoiceActive(),this.m_cUnreadChatMessages+(e?1:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VoiceChatStore",{get:function(){return this.m_ChatStore.VoiceChat},enumerable:!1,configurable:!0}),t.prototype.SetShowNonFriendWarning=function(e){this.m_bNeedsNonFriendWarning=e},t.prototype.GetShowNonFriendWarning=function(){var e=this.m_bNeedsNonFriendWarning&&!p.f.FriendStore.BApprovedNonFriendMessages(this.accountid_partner);if(e){var t=p.f.FriendStore.GetFriend(this.accountid_partner);e=!t||!t.is_friend}return e},t.prototype.GetMessagesFromTimeRange=function(e,t,n,o,r){var i=this,c=a.b.Init(l.b);return c.Body().set_steamid1(this.m_CMInterface.steamid.ConvertTo64BitString()),c.Body().set_steamid2(s.a.InitFromAccountID(this.m_unAccountIDFriend).ConvertTo64BitString()),c.Body().set_count(h.a.k_LoadMoreMessageCount),c.Body().set_bbcode_format(!0),c.Body().set_rtime32_start_time(e),c.Body().set_start_ordinal(t),c.Body().set_time_last(n),c.Body().set_ordinal_last(o),console.log(this.unique_id+" friend trying to load "+r+" messages in range "+e+":"+t+" - "+n+":"+o),l.g.GetRecentMessages(this.m_ChatStore.CMInterface.GetServiceTransport(),c).then((function(e){var t=e.GetEResult();if(1!=t)throw t;return{messages:i.GetMessagesFromResponse(e),moreAvailable:e.Body().more_available()}}))},t.prototype.GetMessagesFromResponse=function(e){for(var t=e.Body().messages(),n=[],o=t.length-1;o>=0;o--){var r=t[o],i=r.accountid();n.push(new f.e(i,r.timestamp(),r.ordinal(),r.message()||""))}return n},t.prototype.OnNewChatMsgAdded=function(e,t,n,o){},t.prototype.GetBBCodeParser=function(){return this.m_ChatStore.FriendChatBBCodeParser},t.prototype.AckChatMsgOnServer=function(e){var t=a.b.Init(l.a);t.Body().set_steamid_partner(s.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),t.Body().set_timestamp(e),l.g.AckMessage(this.m_CMInterface.GetServiceTransport(),t)},t.prototype.CheckShouldNotify=function(t,n,o){e.prototype.CheckShouldNotify.call(this,t,n,o),this.m_ChatStore.FriendChatStore.LastMessageCache.UpdateLastMessage(this.m_unAccountIDFriend,{rtTime:t.rtTimestamp,strMessage:t.strMessage,unAccountIDSender:t.unAccountID})},Object.defineProperty(t.prototype,"name",{get:function(){var e=this.chat_partner;return e?e.display_name:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"f"+this.accountid_partner},enumerable:!1,configurable:!0}),t.prototype.BIsVoiceAllowed=function(){return!!this.chat_partner.is_friend&&(0!=this.chat_partner.persona.m_ePersonaState&&!!this.chat_partner.is_online_in_beta)},t.prototype.GetVoiceNotAllowedReason=function(){return this.chat_partner.is_friend?0==this.chat_partner.persona.m_ePersonaState?Object(d.d)("#VoiceChat_Unavailable_NotOnline",this.chat_partner.display_name):this.chat_partner.is_online_in_beta?null:Object(d.d)("#VoiceChat_Unavailable_NotInBeta",this.chat_partner.display_name):Object(d.d)("#VoiceChat_Unavailable_NotFriend",this.chat_partner.display_name)},t.prototype.ToggleVoiceChat=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(this.accountid_partner)?this.ChatStore.VoiceChat.OnUserEndVoiceChat():this.ChatStore.VoiceChat.InitiateFriendChat(this.accountid_partner),!0},t.prototype.BVoiceActive=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(this.accountid_partner)},Object.defineProperty(t.prototype,"is_blocked_friend",{get:function(){return this.chat_partner.is_blocked},enumerable:!1,configurable:!0}),t.prototype.SendChatMessageInternal=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,i,c,u=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.chat_partner.is_friend||p.f.FriendStore.SetApprovedNonFriendMessages(this.chat_partner.accountid),t=this.AppendLocalEchoChatMsg(e),this.m_strLastMessage=e,(n=a.b.Init(l.d)).Body().set_chat_entry_type(1),n.Body().set_message(e),n.Body().set_steamid(s.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),n.Body().set_contains_bbcode(!0),i=function(){for(var e="",t=0;t<16;t++)e+=r.b(0,15).toString(16);return e}(),n.Body().set_client_message_id(i),this.m_setInflightClientMessageID.add(i),this.m_tsLastSentTypingNotification=void 0,[4,this.SendWithRetries(t,(function(){return l.g.SendMessage(u.m_CMInterface.GetServiceTransport(),n)}))];case 1:return c=o.sent(),this.m_setInflightClientMessageID.delete(i),c===f.g.None&&this.m_ChatStore.FriendChatStore.LastMessageCache.UpdateLastMessage(this.m_unAccountIDFriend,{rtTime:t.rtTimestamp,unAccountIDSender:this.self.accountid,strMessage:t.strMessage}),[2,c]}}))}))},t.prototype.OnTyping=function(){if(!this.m_tsLastSentTypingNotification||performance.now()-this.m_tsLastSentTypingNotification>1e4){this.m_tsLastSentTypingNotification=performance.now();var e=a.b.Init(l.d);e.Body().set_chat_entry_type(2),e.Body().set_steamid(s.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),l.g.SendMessage(this.m_CMInterface.GetServiceTransport(),e)}},Object.defineProperty(t.prototype,"is_friend_typing",{get:function(){return this.m_bFriendIsTyping},enumerable:!1,configurable:!0}),t.prototype.OnFriendTypingNotification=function(){var e=this;this.m_bFriendIsTyping||(this.m_bFriendIsTyping=!0),void 0!==this.m_iClearFriendIsTypingInterval&&window.clearInterval(this.m_iClearFriendIsTypingInterval),this.m_iClearFriendIsTypingInterval=window.setTimeout((function(){e.m_iClearFriendIsTypingInterval=void 0,e.ClearFriendIsTypingState()}),11e3)},t.prototype.PlayFriendMessageSound=function(){p.f.FriendStore.GetUserDoNotDisturb()||p.f.AudioPlaybackManager.PlayAudioURL(i.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_message_old_smooth.m4a")},t.prototype.OnReceivedNewMessage=function(e,t,n,o){var r=this;if(!e.BIsLocalEcho()&&e.unAccountID!=this.self.accountid){if(this.ClearFriendIsTypingState(),t<2&&(this.is_blocked_friend||p.f.FriendStore.BIsInvisibleMode()))return;if(p.f.NotificationManager.BNotificationsPermitted()&&this.chat_partner.BShowMessageNotification()&&t<4&&!p.f.FriendStore.GetUserDoNotDisturb()){var i={title:this.chat_partner.display_name,body:n,tag:"message_"+this.chat_partner.accountid,steamid:this.chat_partner.persona.m_steamid.ConvertTo64BitString()};(i=this.DecorateNotification(e,i,n,o)).body=this.m_ChatStore.TextFilterStore.FilterText(e.unAccountID,i.body),i.body&&(this.GetShowNonFriendWarning()&&p.f.SettingsStore.BClientHasFeatureOrOnWeb("NonFriendMessageHandling")&&(i.body=""),p.f.NotificationManager.DisplayNotificationFromFriend(this.chat_partner,i),this.m_bHasUnreadPriorityChatMessages||(this.m_bHasUnreadPriorityChatMessages=!0,p.f.FriendStore.UpdateUnreadMessagesGlobal()))}if(this.chat_partner.BPlayMessageSound()&&t<4&&this.PlayFriendMessageSound(),t<4&&!p.f.FriendStore.GetUserDoNotDisturb()){var a=p.f.SettingsStore.FriendsSettings.nChatFlashMode,s=Promise.resolve(0==a);1==a&&(s=p.f.UIStore.IsChatWindowMinimized(this)),s.then((function(e){e&&p.f.UIStore.FlashChatWindow(r,!0)}))}}},t.prototype.ClearFriendIsTypingState=function(){void 0!==this.m_iClearFriendIsTypingInterval&&(window.clearInterval(this.m_iClearFriendIsTypingInterval),this.m_iClearFriendIsTypingInterval=void 0),this.m_bFriendIsTyping=!1},t.prototype.PopulateCommitFileUploadFormData=function(e,t){e.append("friend_steamid",s.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),e.append("spoiler",t.bSpoiler?"1":"0")},t.prototype.GetMember=function(e){return e==this.m_unAccountIDFriend?this.chat_partner:e==this.self.accountid?this.self:void 0},Object.defineProperty(t.prototype,"accountid_partner",{get:function(){return this.m_unAccountIDFriend},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chat_partner",{get:function(){return p.f.FriendStore.GetPlayer(this.m_unAccountIDFriend)},enumerable:!1,configurable:!0}),t.prototype.ViewerNeedsApproval=function(e){var t='[broadcastviewrequest requestid="'+e+'"][/broadcastviewrequest]';this.InternalAppendChatMsg(new f.e(this.chat_partner.accountid,p.f.GetServerRTime32(),0,t)),p.f.FriendStore.GetUserDoNotDisturb()||p.f.NotificationManager.DisplayNotificationFromFriend(this.chat_partner,{title:"",body:Object(d.d)("#Chat_BroadcastViewRequest_Notification"),tag:"message_"+this.chat_partner.accountid,steamid:this.chat_partner.persona.m_steamid.ConvertTo64BitString()})},Object(o.c)([m.B],t.prototype,"m_bFriendIsTyping",void 0),Object(o.c)([m.B],t.prototype,"m_bNeedsNonFriendWarning",void 0),Object(o.c)([m.k],t.prototype,"ToggleVoiceChat",null),Object(o.c)([_.a,Object(g.a)(100)],t.prototype,"PlayFriendMessageSound",null),Object(o.c)([m.k],t.prototype,"ClearFriendIsTypingState",null),Object(o.c)([m.k],t.prototype,"ViewerNeedsApproval",null),t}(h.a),C=function(){function e(){this.m_cache=m.B.map()}return e.prototype.Init=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,p.f.Storage.GetObject(e.StorageKey)];case 1:return t=o.sent(),this.Validate(t)?(this.m_cache.replace(t),this.TrimCache()):this.ClearCache(),[3,3];case 2:return n=o.sent(),console.error("There was a problem loading recent friend messages from storage: "+n),this.ClearCache(),[3,3];case 3:return[2]}}))}))},e.prototype.Validate=function(e){if("object"!=typeof e||!e)return!1;for(var t in e){if(isNaN(parseInt(t)))return!1;var n=e[t];if("object"!=typeof n)return!1;if("string"!=typeof n.strMessage&&null!==n.strMessage||"number"!=typeof n.rtTime||"number"!=typeof n.unAccountIDSender)return!1}return!0},e.prototype.ClearCache=function(){this.m_cache.clear(),this.SerializeToStorage()},e.prototype.SerializeToStorage=function(){return p.f.Storage.StoreObject(e.StorageKey,this.m_cache.toJSON())},e.prototype.GetLastMessage=function(e){return this.m_cache.get(e.toString())},e.prototype.UpdateLastMessage=function(e,t){return this.m_cache.set(e.toString(),t),this.SerializeToStorage()},e.prototype.TrimCache=function(){var e=this,t=Date.now()/1e3;this.m_cache.forEach((function(n,o){n.rtTime<t-b.d.PerYear/2&&e.m_cache.delete(o)})),this.SerializeToStorage()},e.StorageKey="FriendLastMessageCache",e}(),O=function(){function e(){}return e.prototype.Init=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return[2]}))}))},e.prototype.GetLastMessage=function(){},e.prototype.UpdateLastMessage=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return[2]}))}))},e}()},gfbn:function(e,t,n){"use strict";n.r(t);var o,r,i,a=n("mrSG"),s=n("tkkQ"),c=n("1n9R"),l=n("ywG3"),u=n("YiOU"),p=n("vDqi"),m=n.n(p),d=n("4HGb"),h=n("1VtQ"),f=n("2vnA"),_=n("s+DT"),g=n("OJz+"),b=n("XaMz"),v=function(){function e(e){var t=this;this.m_bLogonFailed=!1,this.m_bForcedDisconnect=!1,this.m_bConnectSucceeded=!1,this.m_bEverConnected=!1,this.m_bEverLoggedOn=!1,this.m_cConsecutiveConnectionFailures=0,this.m_bWaitingToReconnect=!1,this.m_rgdtRecentFailures=[],this.m_eWebLogonState=0,this.m_ClientLogoffHandler=Object(g.b)(757,u.c,(function(e){34==e.Body().eresult()&&(t.m_eWebLogonState=15,t.m_bWaitingToReconnect=!0)})),this.m_CMInterface=e,this.m_CMInterface.AddOnDisconnectCallback(this.OnCMDisconnected),this.m_CMInterface.AddOnLogonCallback(this.OnCMLoggedOn)}return Object.defineProperty(e.prototype,"web_logon_state",{get:function(){return this.m_eWebLogonState},enumerable:!1,configurable:!0}),e.prototype.BIsInInitialConnect=function(){return 1==this.m_eWebLogonState||5==this.m_eWebLogonState},e.prototype.BIsWaitingToReconnect=function(){return this.m_bWaitingToReconnect},e.prototype.BWillAutoReconnect=function(){return void 0!==this.m_iTimeoutRetryLogon},e.prototype.ClearRetryTimeout=function(){this.m_iTimeoutRetryLogon&&(window.clearTimeout(this.m_iTimeoutRetryLogon),this.m_iTimeoutRetryLogon=void 0)},e.prototype.GetMSUntilNextReconnectAttempt=function(){return this.m_dtNextLogonAttempt?Math.max(0,this.m_dtNextLogonAttempt.getTime()-(new Date).getTime()):0},e.prototype.ReconnectNow=function(){this.m_bWaitingToReconnect&&(this.m_rgdtRecentFailures=[],this.RetryLogin())},e.prototype.OnCMDisconnected=function(e){if(13!=this.m_eWebLogonState&&14!=this.m_eWebLogonState&&15!=this.m_eWebLogonState){if(this.m_bForcedDisconnect)return this.m_bForcedDisconnect=!1,void this.RetryLogin();for(;this.m_rgdtRecentFailures.length>=24;)this.m_rgdtRecentFailures.shift();if(this.m_rgdtRecentFailures.push(new Date),this.m_bConnectSucceeded&&!this.m_CMInterface.session.m_bWaitingForLogonResponse){var t=this.m_CMInterface.session.m_eResultLogonSuccess;this.m_eWebLogonState=1!=t?this.m_bEverLoggedOn?6:8:10}else this.m_eWebLogonState=this.m_bEverConnected?10:2;this.m_cConsecutiveConnectionFailures++,e||this.RescheduleLogin()}},e.prototype.OnCMLoggedOn=function(){this.m_eWebLogonState=9,this.m_bEverLoggedOn=!0,this.m_cConsecutiveConnectionFailures=0},e.prototype.PerformInitialLogon=function(e){e.token_use_id&&(window.sessionStorage.getItem("token_use_id")==e.token_use_id?(console.log("In-page token has already been consumed, requesting a new token."),e=null):window.sessionStorage.setItem("token_use_id",e.token_use_id)),this.PerformWebLogOn(e)},e.prototype.PerformWebLogOn=function(e){var t=this;if(this.m_bConnectSucceeded=!1,this.m_eWebLogonState=this.m_bEverConnected?3:1,e&&e.steamid&&e.token&&e.account_name){s.c.steamid=e.steamid,s.c.accountid=new _.a(e.steamid).GetAccountID(),s.c.account_name=e.account_name;var n=d.b.Init(u.d,5514);n.Body().set_account_name(e.account_name),n.Body().set_protocol_version(65580),n.Body().set_qos_level(2),n.Body().set_client_os_type(4294966596),n.Body().set_ui_mode(4),n.Body().set_chat_mode(2),n.Body().set_web_logon_nonce(e.token),n.Hdr().set_steamid(e.steamid),this.m_CMInterface.session.m_nSessionIDLast&&n.Body().set_last_session_id(this.m_CMInterface.session.m_nSessionIDLast>>>0),n.Body().set_client_instance_id(this.m_CMInterface.session.m_nClientInstanceID),this.m_CMInterface.Connect().then((function(){s.c.logged_in=!0,t.m_bConnectSucceeded=!0,t.m_bEverConnected=!0,t.m_eWebLogonState=t.m_bEverLoggedOn?7:5,t.m_CMInterface.Send(n)}))}else this.RetryLogin()},e.prototype.RetryLogin=function(){var e=this;if(this.m_bWaitingToReconnect=!1,this.ClearRetryTimeout(),this.m_CMInterface.BIsConnected()&&this.m_bConnectSucceeded)return this.m_bForcedDisconnect=!0,void this.m_CMInterface.ForceDisconnect();Object(b.a)(11!=this.m_eWebLogonState,"RetryLogin called while request in flight"),11!=this.m_eWebLogonState&&(this.m_eWebLogonState=11,this.m_CMInterface.Connect().catch((function(){})),m.a.get(s.a.TOKEN_URL,{method:"POST"}).then((function(t){var n=t.data;if(n.logged_in&&n.steamid&&n.token&&n.account_name){var o=new _.a(n.steamid);e.m_bEverLoggedOn&&e.m_CMInterface.steamid.GetAccountID()!=o.GetAccountID()?(e.m_eWebLogonState=14,e.m_CMInterface.ForceDisconnect()):e.PerformWebLogOn(n)}else e.m_eWebLogonState=13,e.m_CMInterface.ForceDisconnect()})).catch((function(t){e.m_eWebLogonState=12,e.RescheduleLogin()})))},e.prototype.RescheduleLogin=function(){for(var e=this,t=0,n=0,o=new Date,r=0,i=this.m_rgdtRecentFailures;r<i.length;r++){var a=i[r];a.getTime()>=o.getTime()-6e4?t++:a.getTime()>=o.getTime()-36e5&&n++}n+=t;var s=this.m_cConsecutiveConnectionFailures+t;if(s<=2)this.RetryLogin();else if(s<=10&&n<=10){var c=5e3*(s-2);this.m_dtNextLogonAttempt=new Date((new Date).getTime()+c),this.m_bWaitingToReconnect=!0,this.ClearRetryTimeout(),this.m_iTimeoutRetryLogon=window.setTimeout((function(){e.m_dtNextLogonAttempt=void 0,e.RetryLogin()}),c)}else this.m_bWaitingToReconnect=!0},Object(a.c)([f.B],e.prototype,"m_eWebLogonState",void 0),Object(a.c)([h.a],e.prototype,"OnCMDisconnected",null),Object(a.c)([h.a],e.prototype,"OnCMLoggedOn",null),e}(),y=n("hReu"),S=n("yoQ3"),C=n("oh5H"),O=(n("Y3TG"),n("XCHq")),I=(n("w/TS"),n("whIR"),n("eeM7"),n("m1EC"),n("ewzr"));window.AssertMsg=b.a,document.addEventListener("DOMContentLoaded",(function(){Object(s.b)(),n.p=s.a.COMMUNITY_CDN_URL+"public/javascript/webui/";var e=!0;c.a.steamid&&Object(O.a)(c.a.steamid),!s.a.IN_CLIENT&&s.a.STEAM_TV&&(s.c.logged_in?Object(y.h)(c.a.steamid):(e=!1,function(){Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.e)(this,(function(t){switch(t.label){case 0:return Object(y.d)(),[4,Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,"Kwyy"))];case 1:return e=t.sent().CBroadcastApp,(new e).Init((function(){window.location=window.location})),[2]}}))}))}())),I.b.SetNavEventParams("steamclient",s.a.STEAM_TV?"steamtv":"friendsui"),e&&function(){var e,t=new y.c,n=null,o=!1;if(s.a.IN_CLIENT){Object(c.f)();var r={message:"ChatJavascriptInitialized",data:s.a.BUILD_TIMESTAMP};window.parent.postMessage(r,"https://steamloopback.host"),window.parent.postMessage("ChatJavascriptIntialized","https://steamloopback.host"),o=!0,(e=new l.a).Connect()}else{var i=e=new l.b(t.Storage);(n=new v(i)).PerformInitialLogon(s.c)}t.Init(e,o,n),Object(S.c)(y.a,t.FriendStore,t.ChatStore,document.getElementById("friendslist-container"),o)}()})),window.LocalizationReady=function(e,t,n){if("english"!==t)"friendsui"==e?o=n:"shared"==e&&(r=n);else if("shared"==e)i=n;else{var a=void 0,s=null,c=void 0,l=null;void 0!==o?(a=o,s=n):a=n,void 0!==r?(c=r,l=i):c=i,C.c.InitFromObjects(a,s,c,l),o=void 0,r=void 0,i=void 0}}},gtB6:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return M}));var o=n("mrSG"),r=n("tkkQ"),i=n("hReu"),a=n("/IDK"),s=n("LAqV"),c=n("YZlK"),l=n("+mma"),u=n("FkUk"),p=n("Hi0u"),m=n("uWOQ"),d=n("TyAF"),h=n("q1tI"),f=n("8o0Y"),_=n("EGkk"),g=n("ljid"),b=n("oh5H"),v=n("1VtQ"),y=n("e2SU"),S=n("20CD"),C=n("AAGn"),O=n.n(C);function I(e,t,n){var o,r=Object(i.e)(null,e);return t.BIsClanChatRoom()&&(o=s.f.FriendStore.ClanStore.GetClan(t.GetClanID())),Object(f.a)(h.createElement(w,{browserContext:r,group:t,clan:o,context:n,ownerWindow:e.currentTarget.ownerDocument.defaultView}),e)}function E(e,t,n){var o,r=Object(i.e)(null,e);return t.GetChatGroupIDIfLoaded()&&(o=s.f.ChatStore.GetChatRoomGroup(t.GetChatGroupIDIfLoaded())),Object(f.a)(h.createElement(w,{browserContext:r,group:o,clan:t,context:n,ownerWindow:e.currentTarget.ownerDocument.defaultView}),e)}var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OpenChatWindow=function(e){this.props.group?s.f.UIStore.ShowAndOrActivateChatRoomGroup(this.props.browserContext,this.props.group,!0):this.props.clan.OpenChatDialog(this.props.browserContext,!0)},t.prototype.ShowClanProfile=function(e){var t;if(this.props.clan.BIsOGG())t=r.a.COMMUNITY_BASE_URL+"app/"+this.props.clan.GetOGGAppID();else{var n=this.props.clan.steamid;t=r.a.COMMUNITY_BASE_URL+"gid/"+n.ConvertTo64BitString()}Object(m.e)(e,t),e.stopPropagation()},t.prototype.LeaveChatRoomGroup=function(e){Object(c.d)(e.currentTarget.ownerDocument.defaultView,this.props.group)},t.prototype.render=function(){var e=this,t=[],n=this.props.group,o=this.props.clan,r=this.props.context||{},i=s.f.FriendStore.FavoritesStore;r.tab?t.push(h.createElement(_.d,{key:"closetab",onSelected:function(){s.f.UIStore.CloseTab(e.props.browserContext,r.tab)}},Object(b.d)("#Chat_CloseTabAction"))):r.is_chat_window||t.push(h.createElement(_.d,{key:"opentab",onSelected:this.OpenChatWindow},Object(b.d)("#Chat_Actions_OpenChat"))),o&&!o.BIsOGG()&&t.push(h.createElement(_.d,{key:"viewprofile",onSelected:this.ShowClanProfile},Object(b.d)("#Friend_Menu_ViewProfile"))),t.push(h.createElement(_.d,{key:"leavechatroom",onSelected:this.LeaveChatRoomGroup},Object(b.d)(o?"#Chat_Actions_LeaveChatRoom":"#Chat_Actions_LeaveChatRoomGroup")));var a=o?{clan:o}:{chat:n};return s.f.FriendStore.FavoritesStore.BIsFavorited(a)?r.is_favorites&&t.push(h.createElement(_.d,{key:"quickaccess",onSelected:function(){i.RemoveFromFavorites(a)}},Object(b.d)("#Friend_Menu_RemoveFromQuickAccess"))):t.push(h.createElement(_.d,{key:"quickaccess",onSelected:function(){i.AddToFavorites(a)}},Object(b.d)("#Friend_Menu_AddToQuickAccess"))),o&&o.BIsOGG()&&t.push(h.createElement(u.d,{unAppID:o.GetOGGAppID(),strGameName:o.name})),h.createElement(_.c,{className:"chatRoomListItemContextMenu"},t)},Object(o.c)([v.a],t.prototype,"OpenChatWindow",null),Object(o.c)([v.a],t.prototype,"ShowClanProfile",null),Object(o.c)([v.a],t.prototype,"LeaveChatRoomGroup",null),t}(h.Component);function M(e,t,n,o,r){return t.GetDefaultChatID()==n||D.BIsMenuEmpty(t,n,!!r)?null:Object(f.a)(h.createElement(D,{browserContext:e,group:t,roomID:n,ownerWindow:o.currentTarget.ownerDocument.defaultView,onStartRoomRename:r}),o)}var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ShowInviteDialog=function(){var e=this.props.group.GetChatRoom(this.props.roomID);Object(S.b)(this.props.browserContext,this.props.ownerWindow,this.props.group,e)},t.prototype.SaveVoiceRoom=function(e){var t,n,o,r=Object(a.q)(e);t=r,n=this.props.group,o=this.props.roomID,Object(p.c)(h.createElement(T,{group:n,roomID:o}),t,"SaveVoiceRoomDialog",{strTitle:Object(b.d)("#Chat_SaveVoiceRoom"),popupWidth:664,popupHeight:380},Object(i.g)(t))},t.prototype.RemoveRoom=function(){var e=this;Object(l.d)(this.props.ownerWindow,Object(b.d)("#Chat_Actions_RemoveRoom"),Object(b.d)("#Chat_Actions_RemoveRoom_Confirm"),Object(b.d)("#Chat_Actions_RemoveRoom_Action")).then((function(){var t=e.props.group,n=e.props.roomID;t.DeleteChatRoom(n)})).catch((function(){}))},t.prototype.ChangeRoomName=function(){this.props.onStartRoomRename(this.props.roomID)},t.BIsMenuEmpty=function(e,t,n){var o=e.GetDefaultChatID()==t,r=e.BIsTempVoiceChannel(t),i=e.BCanAdminChannel();return!e.BIsVoiceChannel(t)&&((!r||!i)&&(!(n&&!o&&!r&&i)&&!(!o&&i)))},t.prototype.render=function(){var e=[],t=this.props.group,n=this.props.roomID,o=t.GetDefaultChatID()==n,r=t.BIsTempVoiceChannel(n),i=t.BCanAdminChannel();t.BCanInvite();return e.push(h.createElement(_.d,{key:"invitefriend",onSelected:this.ShowInviteDialog},Object(b.d)("#Chat_Actions_InviteFriendtoVoice"))),r&&e.push(h.createElement(_.d,{key:"savechannel",className:i?"":O.a.ChatRoomContextNoPermission,onSelected:this.SaveVoiceRoom},!i&&h.createElement(y.F,null),Object(b.d)("#Chat_Actions_SaveChannel"))),this.props.onStartRoomRename&&!o&&!r&&i&&e.push(h.createElement(_.d,{key:"renameroom",onSelected:this.ChangeRoomName},Object(b.d)("#Chat_Actions_ChangeRoomName"))),!o&&i&&e.push(h.createElement(_.d,{key:"removeroom",onSelected:this.RemoveRoom},Object(b.d)("#Chat_Actions_RemoveRoom"))),e.length<1?(console.log("warning: empty context menu. Did someone not update BIsMenuEmpty?"),null):h.createElement(_.c,{className:"friendsContextMenu"},e)},Object(o.c)([v.a],t.prototype,"ShowInviteDialog",null),Object(o.c)([v.a],t.prototype,"SaveVoiceRoom",null),Object(o.c)([v.a],t.prototype,"RemoveRoom",null),Object(o.c)([v.a],t.prototype,"ChangeRoomName",null),t}(h.PureComponent);var T=function(e){function t(t){var n=e.call(this,t)||this;return n.state={strName:"",strError:void 0},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strName:e.target.value})},t.prototype.HandleSubmit=function(e){e&&e.preventDefault();var t=this.state.strName;0!=t.length?(this.props.group.RenameRoom(this.props.roomID,t),this.props.closeModal()):this.setState({strError:Object(b.d)("#Chat_SaveVoiceRoom_Error_EmptyName")})},t.prototype.render=function(){return h.createElement(p.a,{onEscKeypress:this.props.closeModal},h.createElement(g.h,{classNameContent:"SaveVoiceRoomDialog",onSubmit:this.HandleSubmit},h.createElement(g.m,null,Object(b.d)("#Chat_SaveVoiceRoom")),h.createElement(g.b,null,this.state.strError&&h.createElement(g.c,{className:"nicknameError"},this.state.strError),h.createElement(g.c,null,Object(b.d)("#Chat_SaveVoiceRoom_Description")),h.createElement(g.o,{type:"text",label:Object(b.d)("#Chat_SaveVoiceRoom_Name"),className:"nicknameInput",value:this.state.strName,onChange:this.HandleTextEntry,autoFocus:!0})),h.createElement(g.j,null,h.createElement(g.s,{onCancel:this.props.closeModal}))))},Object(o.c)([v.a],t.prototype,"HandleTextEntry",null),Object(o.c)([v.a],t.prototype,"HandleSubmit",null),t=Object(o.c)([d.a],t)}(h.Component)},h4qU:function(e,t,n){e.exports={YuleLog:"chatroom_YuleLog_HA-l4",Watching:"chatroom_Watching_5JpxB"}},hEDq:function(e,t,n){"use strict";n.d(t,"m",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"o",(function(){return f})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return _})),n.d(t,"j",(function(){return g})),n.d(t,"l",(function(){return b}));var o=n("mrSG"),r=n("0N1H");n.d(t,"a",(function(){return r.a})),n.d(t,"n",(function(){return r.f}));var i=n("2vnA"),a=function(){function e(){this.enabled=!1,this.locked=!1,this.features=0,this.allowallapps=!1,this.baselist=void 0,this.customlist=void 0}return Object(o.c)([i.B],e.prototype,"enabled",void 0),Object(o.c)([i.B],e.prototype,"locked",void 0),Object(o.c)([i.B],e.prototype,"features",void 0),Object(o.c)([i.B],e.prototype,"allowallapps",void 0),Object(o.c)([i.B],e.prototype,"baselist",void 0),Object(o.c)([i.B],e.prototype,"customlist",void 0),e}(),s=function(){return function(){this.broadcastid="0",this.nViewers=0,this.nRequests=0,this.bIsBroadcasting=!1,this.bIsRecordingDesktop=!1,this.bBroadcastCapable=!1}}();function c(){return{bNotifications_ShowIngame:!0,bNotifications_ShowOnline:!1,bNotifications_ShowMessage:!0,bNotifications_EventsAndAnnouncements:!0,bSounds_PlayIngame:!1,bSounds_PlayOnline:!1,bSounds_PlayMessage:!0,bSounds_EventsAndAnnouncements:!1,bAlwaysNewChatWindow:!1,bForceAlphabeticFriendSorting:!1,nChatFlashMode:0,bRememberOpenChats:!0,bCompactQuickAccess:!1,bCompactFriendsList:!1,bNotifications_ShowChatRoomNotification:!0,bSounds_PlayChatRoomNotification:!0,bHideOfflineFriendsInTagGroups:!1,bHideCategorizedFriends:!1,bCategorizeInGameFriendsByGame:!0,nChatFontSize:2,b24HourClock:!1,bDoNotDisturbMode:!1,bDisableEmbedInlining:!1,bSignIntoFriends:!0,bDisableSpellcheck:!1,bDisableRoomEffects:!1,bAnimatedAvatars:!0,featuresEnabled:{}}}var l;function u(e){return e==l.EBrowserType_OpenVROverlay||e==l.EBrowserType_OpenVROverlay_Dashboard}!function(e){e[e.EBrowserType_OffScreen=0]="EBrowserType_OffScreen",e[e.EBrowserType_OpenVROverlay=1]="EBrowserType_OpenVROverlay",e[e.EBrowserType_OpenVROverlay_Dashboard=2]="EBrowserType_OpenVROverlay_Dashboard",e[e.EBrowserType_DirectHWND=3]="EBrowserType_DirectHWND",e[e.EBrowserType_DirectHWND_Borderless=4]="EBrowserType_DirectHWND_Borderless",e[e.EBrowserType_DirectHWND_Hidden=5]="EBrowserType_DirectHWND_Hidden",e[e.EBrowserType_ChildHWNDNative=6]="EBrowserType_ChildHWNDNative",e[e.EBrowserType_Transparent_Toplevel=7]="EBrowserType_Transparent_Toplevel",e[e.EBrowserType_OffScreen_SharedTexture=8]="EBrowserType_OffScreen_SharedTexture",e[e.EBrowserType_OffScreen_GameOverlay=9]="EBrowserType_OffScreen_GameOverlay",e[e.EBrowserType_OffScreen_GameOverlay_SharedTexture=10]="EBrowserType_OffScreen_GameOverlay_SharedTexture",e[e.EBrowserType_Offscreen_FriendsUI=11]="EBrowserType_Offscreen_FriendsUI",e[e.EBrowserType_MAX=12]="EBrowserType_MAX"}(l||(l={}));var p,m;!function(e){e[e.k_EClientUINotificationGroupChatMessage=1]="k_EClientUINotificationGroupChatMessage",e[e.k_EClientUINotificationFriendChatMessage=2]="k_EClientUINotificationFriendChatMessage",e[e.k_EClientUINotificationFriendPersonaState=3]="k_EClientUINotificationFriendPersonaState"}(p||(p={})),function(e){e[e.k_EComputerActiveStateInvalid=0]="k_EComputerActiveStateInvalid",e[e.k_EComputerActiveStateActive=1]="k_EComputerActiveStateActive",e[e.k_EComputerActiveStateIdle=2]="k_EComputerActiveStateIdle"}(m||(m={}));var d,h=function(){return function(){}}(),f=function(){return function(){}}();!function(e){e[e.k_EPending=0]="k_EPending",e[e.k_EAccepted=1]="k_EAccepted",e[e.k_ERejected=2]="k_ERejected"}(d||(d={}));function _(e){return"game"===e||"dlc"===e||"software"===e||"music"===e||"application"===e||"demo"===e}var g,b;!function(e){e[e.k_EClientUsedInputTypeKeyboard=0]="k_EClientUsedInputTypeKeyboard",e[e.k_EClientUsedInputTypeMouse=1]="k_EClientUsedInputTypeMouse",e[e.k_EClientUsedInputTypeController=2]="k_EClientUsedInputTypeController",e[e.k_EClientUsedInputTypeMax=3]="k_EClientUsedInputTypeMax"}(g||(g={})),function(e){e[e.k_ERemoteClientLaunchOK=1]="k_ERemoteClientLaunchOK",e[e.k_ERemoteClientLaunchFail=2]="k_ERemoteClientLaunchFail",e[e.k_ERemoteClientLaunchRequiresUI=3]="k_ERemoteClientLaunchRequiresUI",e[e.k_ERemoteClientLaunchRequiresLaunchOption=4]="k_ERemoteClientLaunchRequiresLaunchOption",e[e.k_ERemoteClientLaunchRequiresEULA=5]="k_ERemoteClientLaunchRequiresEULA",e[e.k_ERemoteClientLaunchTimeout=6]="k_ERemoteClientLaunchTimeout",e[e.k_ERemoteClientLaunchStreamTimeout=7]="k_ERemoteClientLaunchStreamTimeout",e[e.k_ERemoteClientLaunchStreamClientFail=8]="k_ERemoteClientLaunchStreamClientFail",e[e.k_ERemoteClientLaunchOtherGameRunning=9]="k_ERemoteClientLaunchOtherGameRunning",e[e.k_ERemoteClientLaunchDownloadStarted=10]="k_ERemoteClientLaunchDownloadStarted",e[e.k_ERemoteClientLaunchDownloadNoSpace=11]="k_ERemoteClientLaunchDownloadNoSpace",e[e.k_ERemoteClientLaunchDownloadFiltered=12]="k_ERemoteClientLaunchDownloadFiltered",e[e.k_ERemoteClientLaunchDownloadRequiresUI=13]="k_ERemoteClientLaunchDownloadRequiresUI",e[e.k_ERemoteClientLaunchAccessDenied=14]="k_ERemoteClientLaunchAccessDenied",e[e.k_ERemoteClientLaunchNetworkError=15]="k_ERemoteClientLaunchNetworkError",e[e.k_ERemoteClientLaunchProgress=16]="k_ERemoteClientLaunchProgress",e[e.k_ERemoteClientLaunchParentalUnlockFailed=17]="k_ERemoteClientLaunchParentalUnlockFailed",e[e.k_ERemoteClientLaunchScreenLocked=18]="k_ERemoteClientLaunchScreenLocked",e[e.k_ERemoteClientLaunchUnsupported=19]="k_ERemoteClientLaunchUnsupported",e[e.k_ERemoteClientLaunchDisabledLocal=20]="k_ERemoteClientLaunchDisabledLocal",e[e.k_ERemoteClientLaunchDisabledRemote=21]="k_ERemoteClientLaunchDisabledRemote",e[e.k_ERemoteClientLaunchBroadcasting=22]="k_ERemoteClientLaunchBroadcasting",e[e.k_ERemoteClientLaunchBusy=23]="k_ERemoteClientLaunchBusy",e[e.k_ERemoteClientLaunchDriversNotInstalled=24]="k_ERemoteClientLaunchDriversNotInstalled",e[e.k_ERemoteClientLaunchTransportUnavailable=25]="k_ERemoteClientLaunchTransportUnavailable",e[e.k_ERemoteClientLaunchCanceled=26]="k_ERemoteClientLaunchCanceled",e[e.k_ERemoteClientLaunchInvisible=27]="k_ERemoteClientLaunchInvisible",e[e.k_ERemoteClientLaunchRestrictedCountry=28]="k_ERemoteClientLaunchRestrictedCountry"}(b||(b={}));var v;!function(e){e[e.k_ESteamRealmUnknown=0]="k_ESteamRealmUnknown",e[e.k_ESteamRealmGlobal=1]="k_ESteamRealmGlobal",e[e.k_ESteamRealmChina=2]="k_ESteamRealmChina"}(v||(v={}));var y,S,C;!function(e){e[e.Unknown=0]="Unknown",e[e.Wired=1]="Wired",e[e.Wireless=2]="Wireless"}(y||(y={})),function(e){e[e.NotPresent=0]="NotPresent",e[e.Failed=1]="Failed",e[e.Disconnected=2]="Disconnected",e[e.Disconnecting=3]="Disconnecting",e[e.Connecting=4]="Connecting",e[e.Connected=5]="Connected",e[e.Retrying=6]="Retrying"}(S||(S={})),function(e){e[e.None=0]="None",e[e.StaticWep=1]="StaticWep",e[e.DynamicWep=2]="DynamicWep",e[e.Wpa=4]="Wpa",e[e.WpaEnterprise=8]="WpaEnterprise",e[e.Wpa2=16]="Wpa2",e[e.Wpa2Enterprise=32]="Wpa2Enterprise",e[e.Unsupported=32768]="Unsupported"}(C||(C={}))},hReu:function(e,t,n){"use strict";n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return M})),n.d(t,"a",(function(){return C.a})),n.d(t,"b",(function(){return En})),n.d(t,"c",(function(){return Tn})),n.d(t,"d",(function(){return jn})),n.d(t,"h",(function(){return Gn})),n.d(t,"i",(function(){return Rn}));var o=n("mrSG"),r=n("2vnA"),i=n("1VtQ"),a=n("vDqi"),s=n.n(a),c=n("tkkQ"),l=n("LAqV"),u=function(){function e(){this.m_mapPlaybackObjs=new Map,this.m_bVoiceActive=!1,this.m_hCloseContextTimeout=void 0,this.m_nLastObservedSampleRate=0,this.m_bSupportsAudioWorkletProcessors=!1,this.m_MediaStreamDestination=void 0,this.m_MediaStreamAudioElem=void 0}return Object.defineProperty(e.prototype,"context",{get:function(){return this.m_Context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supports_audio_worklets",{get:function(){return this.m_bSupportsAudioWorkletProcessors},enumerable:!1,configurable:!0}),e.prototype.GetActiveDestination=function(){if(this.CreateContextIfNeeded(),l.f.VoiceStore.IsAnyVoiceActive()&&"default"!=l.f.VoiceStore.GetSelectedOutputDevice()){if(null==this.m_MediaStreamDestination){var e=this.m_Context;this.m_MediaStreamDestination=e.createMediaStreamDestination(),this.m_MediaStreamAudioElem=document.createElement("audio"),this.m_MediaStreamAudioElem.srcObject=this.m_MediaStreamDestination.stream,this.m_MediaStreamAudioElem.play();try{var t;this.m_MediaStreamAudioElem.setSinkId(l.f.VoiceStore.GetSelectedOutputDevice())}catch(t){console.log("(CAudioPlaybackManager) Failed setting audio output device to "+l.f.VoiceStore.GetSelectedOutputDevice()+": "+t)}}return this.m_MediaStreamDestination}return this.m_Context.destination},e.prototype.PlayAudioURL=function(e,t){return void 0===t&&(t=1),this.PlayAudioURLWithRepeats(e)},e.prototype.PlayAudioURLWithRepeats=function(e,t){void 0===t&&(t=0),console.log("(CAudioPlaybackManager) web audio playback requested: "+e),this.CreateContextIfNeeded();var n=new p(this,e,t);return this.m_mapPlaybackObjs.set(n,!0),n},e.prototype.PlaybackFinished=function(e){this.m_mapPlaybackObjs.delete(e),this.CleanupContextIfUneeded(!1)},e.prototype.SetVoiceActive=function(e){this.m_bVoiceActive=!0,this.CreateContextIfNeeded(e)},e.prototype.SetVoiceNotActive=function(){this.m_bVoiceActive=!1,this.CleanupContextIfUneeded(!0)},e.prototype.GetLastObservedSampleRate=function(){return this.m_nLastObservedSampleRate},e.prototype.CreateContextIfNeeded=function(e){if(void 0===e&&(e=void 0),null==this.m_Context){console.log("(CAudioPlaybackManager) new context");var t=window,n=t.AudioContext||t.webkitAudioContext||!1;this.m_Context=new n,this.m_Context.onstatechange=this.OnAudioContextStateChange,console.log("(CAudioPlaybackManager) sample rate "+this.m_Context.sampleRate),this.m_nLastObservedSampleRate=this.m_Context.sampleRate;var o=this.m_Context;null!=o.audioWorklet?(this.m_bSupportsAudioWorkletProcessors=!0,o.audioWorklet.addModule(c.a.CHAT_BASE_URL+"public/javascript/webui/noisegate-audio-worklet.js?v=3").then((function(){console.log("(CAudioPlaybackManager) noisegate-audio-worklet.js worklet processor loaded"),e&&e()})).catch((function(t){console.log("(CAudioPlaybackManager) Failed to load noisegate-audio-worklet.js worklet processor"),e&&e()}))):e&&e()}else e&&e()},e.prototype.DelayedCleanupContextIfInactive=function(){this.m_hCloseContextTimeout=void 0,0==this.m_mapPlaybackObjs.size&&0==this.m_bVoiceActive&&(console.log("(CAudioPlaybackManager) close context"),null!=this.m_MediaStreamAudioElem&&(this.m_MediaStreamAudioElem.pause(),this.m_MediaStreamAudioElem.src=void 0,this.m_MediaStreamAudioElem.srcObject=void 0),this.m_MediaStreamAudioElem=void 0,this.m_MediaStreamDestination=void 0,this.m_Context.close(),this.m_Context=void 0)},e.prototype.CleanupContextIfUneeded=function(e){if(0==this.m_mapPlaybackObjs.size&&0==this.m_bVoiceActive){if(null!=this.m_hCloseContextTimeout&&(clearTimeout(this.m_hCloseContextTimeout),this.m_hCloseContextTimeout=void 0),e)return void this.DelayedCleanupContextIfInactive();this.m_hCloseContextTimeout=SetBackgroundTimeout(this.DelayedCleanupContextIfInactive,1e4)}},e.prototype.OnAudioContextStateChange=function(){null!=this.m_Context&&console.log("(CAudioPlaybackManager) web audio context state changed: "+this.m_Context.state)},Object(o.c)([r.B],e.prototype,"m_nLastObservedSampleRate",void 0),Object(o.c)([r.B],e.prototype,"m_bSupportsAudioWorkletProcessors",void 0),Object(o.c)([i.a],e.prototype,"DelayedCleanupContextIfInactive",null),Object(o.c)([r.k.bound],e.prototype,"OnAudioContextStateChange",null),e}(),p=function(){function e(e,t,n){var o=this;this.m_Source=void 0,this.m_RepeatCount=0,this.m_TimesPlayed=0,this.m_Cancelled=!1,this.m_Manager=e,this.m_URL=t,this.m_RepeatCount=n,s.a.get(t,{responseType:"arraybuffer"}).then((function(t){e.context.decodeAudioData(t.data).then((function(t){if(o.m_Cancelled)o.m_Manager.PlaybackFinished(o);else{var n=e.context.createBufferSource();n.buffer=t,n.connect(e.GetActiveDestination()),n.start(0),n.onended=o.OnPlaybackEnded,o.m_Source=n}})).catch((function(e){o.OnFailure()}))})).catch((function(e){o.OnFailure()}))}return e.prototype.StopPlayback=function(){this.m_Cancelled=!0,this.m_Source&&(this.m_Source.stop(0),this.m_Source.disconnect(),this.m_Source=void 0,this.m_Manager.PlaybackFinished(this))},Object.defineProperty(e.prototype,"url",{get:function(){return this.m_URL},enumerable:!1,configurable:!0}),e.prototype.OnFailure=function(){var e=this;SetBackgroundTimeout((function(){return e.m_Manager.PlaybackFinished(e)}),1)},e.prototype.OnPlaybackEnded=function(e){if(this.m_TimesPlayed+=1,!this.m_Cancelled&&this.m_TimesPlayed<=this.m_RepeatCount){var t=this.m_Manager.context.createBufferSource();return t.buffer=this.m_Source.buffer,t.connect(this.m_Manager.GetActiveDestination()),t.start(0),t.onended=this.OnPlaybackEnded,this.m_Source.disconnect(),this.m_Source=void 0,void(this.m_Source=t)}this.m_Source.disconnect(),this.m_Source=void 0,this.m_Manager.PlaybackFinished(this)},Object(o.c)([r.k.bound],e.prototype,"OnFailure",null),Object(o.c)([r.k.bound],e.prototype,"OnPlaybackEnded",null),e}(),m=n("hEDq"),d=function(){function e(){this.m_rgActivityCallbacks=[]}return e.prototype.AddTrackedWindow=function(e){},e.prototype.BIsUserIdle=function(e){return this.GetUserIdleTime()>e},e.prototype.AddOnIdleCallback=function(e,t){this.RunOnIdleCallback(e,t)},e.prototype.AddOnNextActivityCallback=function(e){this.m_rgActivityCallbacks.push(e)},e.prototype.FireOnUserActivityCallbacks=function(){if(this.m_rgActivityCallbacks.length){for(var e=0,t=this.m_rgActivityCallbacks;e<t.length;e++){(0,t[e])()}this.m_rgActivityCallbacks=[]}},e.prototype.RunOnIdleCallback=function(e,t){this.GetUserIdleTime()>=t-1?e():SetBackgroundTimeout(this.RunOnIdleCallback.bind(this,e,t),1e3*(t-this.GetUserIdleTime()))},e}(),h=n("UqDm"),f=function(e){function t(){var t=e.call(this)||this;return t.m_rgWindows=[],t.m_bEventTrackingActive=!1,t.OnUserAction(),t}return Object(o.d)(t,e),t.prototype.GetUserIdleTime=function(){return Math.floor((performance.now()-this.m_msUserLastAction)/1e3)},t.prototype.AddTrackedWindow=function(e){this.m_rgWindows.push(e),e.addEventListener("unload",this.RemoveTrackedWindow.bind(this,e)),this.m_bEventTrackingActive&&this.BindEventsForWindow(e)},t.prototype.RemoveTrackedWindow=function(e){this.m_bEventTrackingActive&&this.UnbindEventsForWindow(e),h.c(this.m_rgWindows,e)},t.prototype.OnUserAction=function(){this.m_msUserLastAction=performance.now(),this.FireOnUserActivityCallbacks(),this.UnbindEvents(),window.setTimeout(this.BindEvents.bind(this),1e4)},t.prototype.BindEvents=function(){if(!this.m_bEventTrackingActive){this.m_bEventTrackingActive=!0;for(var e=0,t=this.m_rgWindows;e<t.length;e++){var n=t[e];this.BindEventsForWindow(n)}}},t.prototype.UnbindEvents=function(){if(this.m_bEventTrackingActive){this.m_bEventTrackingActive=!1;for(var e=0,t=this.m_rgWindows;e<t.length;e++){var n=t[e];this.UnbindEventsForWindow(n)}}},t.prototype.UnbindEventsForWindow=function(e){for(var n=0,o=t.sm_rgUserEvents;n<o.length;n++){var r=o[n];e.removeEventListener(r,this.OnUserAction)}},t.prototype.BindEventsForWindow=function(e){for(var n=0,o=t.sm_rgUserEvents;n<o.length;n++){var r=o[n];e.addEventListener(r,this.OnUserAction)}},t.sm_rgUserEvents=["mousemove","mousedown","keypress","focus"],Object(o.c)([i.a],t.prototype,"OnUserAction",null),t}(d),_=function(e){function t(){var t=e.call(this)||this;return t.m_eActiveState=m.k.k_EComputerActiveStateActive,t.m_hRegisterForComputerActiveStateChange=null,t.m_hFireUserStillActive=void 0,t.m_hRegisterForComputerActiveStateChange=SteamClient.WebChat.RegisterForComputerActiveStateChange(t.OnComputerActiveStateChange),t}return Object(o.d)(t,e),t.prototype.OnComputerActiveStateChange=function(e,t){var n=(new Date).getTime()/1e3-t;this.m_eActiveState=e,this.m_msUserLastAction=Math.max(performance.now()-1e3*n,this.m_msUserLastAction),this.m_eActiveState==m.k.k_EComputerActiveStateActive&&(this.m_hFireUserStillActive&&(clearTimeout(this.m_hFireUserStillActive),this.m_hFireUserStillActive=void 0),this.UpdateStillActive())},t.prototype.UpdateStillActive=function(){this.m_hFireUserStillActive=void 0,this.m_eActiveState==m.k.k_EComputerActiveStateActive&&(this.OnUserAction(),this.m_hFireUserStillActive=SetBackgroundTimeout(this.UpdateStillActive,1e4))},Object(o.c)([i.a],t.prototype,"OnComputerActiveStateChange",null),Object(o.c)([i.a],t.prototype,"UpdateStillActive",null),t}(f),g=function(){function e(e){this.m_FriendStore=e}return e.prototype.DisplayNotificationFromFriend=function(e,t,n){return void 0===n&&(n={}),this.DisplayNotification(Object(o.a)({icon:e.persona.avatar_url_medium},t),(function(t){return e.OpenChatDialog(t)}),n)},e.prototype.BNotificationsPermitted=function(){return!l.f.ParentalStore.BIsFriendsBlocked()},e.prototype.RequestNotificationPermission=function(){return Promise.resolve(!0)},e}(),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.DisplayNotification=function(e,t,n){if(void 0===n&&(n={}),e.tag){var o=JSON.stringify(e);e.tag.startsWith("groupmsg_")?SteamClient.ClientNotifications.DisplayClientNotification(m.i.k_EClientUINotificationGroupChatMessage,o,t):e.tag.startsWith("message_")?SteamClient.ClientNotifications.DisplayClientNotification(m.i.k_EClientUINotificationFriendChatMessage,o,t):l.f.SettingsStore.BClientHasFeatureOrOnWeb("PersonaNotifications")&&e.tag.startsWith("state_")&&SteamClient.ClientNotifications.DisplayClientNotification(m.i.k_EClientUINotificationFriendPersonaState,o,t)}return Promise.resolve()},t}(g),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetNotificationPermissionLevel=function(){if("undefined"==typeof Notification)return"unsupported";var e=Notification.permission;return"default"==e||"granted"==e||"denied"==e?e:"unsupported"},t.prototype.DisplayNotification=function(e,t,n){var r=this;void 0===n&&(n={});var i={body:e.body,icon:e.icon,tag:e.tag,silent:!0},a=new Notification(e.title,Object(o.a)({badge:c.a.COMMUNITY_CDN_URL+"public/shared/images/responsive/share_steam_logo.png"},i));return window.setTimeout((function(){a.close()}),n.timeoutMS||5e3),a.addEventListener("click",(function(){return r.OnNotificationClicked(a,t)})),new Promise((function(e,t){a.addEventListener("close",(function(){e()}))}))},t.prototype.OnNotificationClicked=function(e,t){t(l.a),e.close()},t.prototype.BNotificationsPermitted=function(){return"granted"==this.GetNotificationPermissionLevel()},t.prototype.RequestNotificationPermission=function(){return"unsupported"==this.GetNotificationPermissionLevel()?Promise.resolve(!1):this.BNotificationsPermitted()?e.prototype.RequestNotificationPermission.call(this):new Promise((function(e,t){Notification.requestPermission((function(t){e("granted"==t)}))}))},t}(g),y=n("65YP"),S=n("i8i4"),C=n("8JTq"),O=n("/IDK"),I=n("XaMz");function E(e,t){var n=Object(O.q)(t);if(!n&&e){var o=S.findDOMNode(e);o&&o.ownerDocument&&(n=o.ownerDocument.defaultView)}return Object(I.a)(n,"Couldn't find owning window to determine browser context"),w(n)}function w(e){var t=C.a;return e&&(Object(I.a)(e.__FriendsUIBrowserContext,"FriendsUI Browser context missing from owner window"),e.__FriendsUIBrowserContext&&(t=e.__FriendsUIBrowserContext)),t}function M(e){var t=w(e);return t&&t.m_unPID!=C.a.m_unPID&&t.m_nBrowserID!=C.a.m_nBrowserID?t:null}var D=n("JtU4"),T=n("E7zH"),j=function(){function e(){this.m_bDropConsumed=!1,this.m_onDropCompleteCallbacks=new T.a,this.m_vecClasses=[]}return e.prototype.BInDrag=function(){return!!this.m_data},e.prototype.StartDrag=function(e){var t,n;Object(I.a)(!this.m_data,"second drag started, existing data discarded",this.m_data),this.m_data=e,this.m_bDropConsumed=!1,this.m_vecClasses.push("in_global_drag"),this.m_vecClasses.push("drag_type_"+e.type),void 0!==e.source&&this.m_vecClasses.push("drag_source_"+e.source);for(var o=0,r=Array.from(D.d.GetPopups());o<r.length;o++){var i=r[o];i.window&&i.window.document.body&&(t=i.window.document.body.classList).add.apply(t,this.m_vecClasses)}(n=window.document.body.classList).add.apply(n,this.m_vecClasses)},e.prototype.EndDrag=function(){var e,t;this.m_onDropCompleteCallbacks.Dispatch(this.m_bDropConsumed),this.m_onDropCompleteCallbacks.ClearAllCallbacks(),this.m_data=void 0,this.m_bDropConsumed=void 0;for(var n=0,o=Array.from(D.d.GetPopups());n<o.length;n++){var r=o[n];r.window&&r.window.document.body&&(e=r.window.document.body.classList).remove.apply(e,this.m_vecClasses)}(t=window.document.body.classList).remove.apply(t,this.m_vecClasses),this.m_vecClasses=[]},e.prototype.GetDragData=function(){return this.m_data},e.prototype.BWasDropConsumed=function(){return this.m_bDropConsumed},e.prototype.SetDropConsumed=function(){Object(I.a)(this.BInDrag(),"Asked to set drop consumed but no active drag"),this.m_bDropConsumed=!0},e.prototype.RegisterForDropComplete=function(e){return this.m_onDropCompleteCallbacks.Register(e)},e}(),G=n("OJz+"),R=n("RBVV"),k=n("4HGb"),A=function(){return function(e){var t=this;this.m_UsabilityHandler=Object(G.c)(R.Z.NotifyRequestClientUsabilityMetricsHandler,(function(e){return Object(o.b)(t,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return(t=k.b.Init(R.S)).Body().set_metrics_run_id(e.Body().metrics_run_id()),t.Body().set_metrics_version(3),t.Body().set_client_build(c.a.BUILD_TIMESTAMP),t.Body().set_in_web(!c.a.IN_CLIENT),l.f.ready_to_render?[3,2]:[4,Object(r.J)((function(){return l.f.ready_to_render}))];case 1:n.sent(),n.label=2;case 2:return[4,l.f.SettingsStore.FillInChatUsabilityMetrics(t.Body())];case 3:return n.sent(),[4,l.f.FriendStore.FillInChatUsabilityMetrics(t.Body())];case 4:return n.sent(),[4,l.f.ChatStore.FillInChatUsabilityMetrics(t.Body())];case 5:return n.sent(),[4,l.f.UIStore.FillInChatUsabilityMetrics(t.Body())];case 6:return n.sent(),[4,l.f.VoiceStore.FillInChatUsabilityMetrics(t.Body())];case 7:return n.sent(),this.m_fnFillAppUsabilityMetrics?[4,this.m_fnFillAppUsabilityMetrics(t.Body())]:[3,9];case 8:n.sent(),n.label=9;case 9:return R.ab.NotifyClientUsabilityMetrics(l.f.CMInterface.GetServiceTransport(),t),[2,1]}}))}))})),this.m_fnFillAppUsabilityMetrics=e}}(),N=n("MB4Y"),B=function(){function e(){this.m_mapBrowserInfo=new Map,this.m_hOverlayChatBrowserInfoChanged=null}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_hOverlayChatBrowserInfoChanged=SteamClient.WebChat.RegisterOverlayChatBrowserInfoChanged(this.OnOverlayChatBrowserInfoChanged),this.m_CMInterface.RunWhenLoggedOn((function(){t.OnOverlayChatBrowserInfoChanged()}))},e.prototype.HasOverlayInstance=function(e){return this.m_mapBrowserInfo.has(e)},e.prototype.OnOverlayChatBrowserInfoChanged=function(){var e=this;SteamClient.WebChat.GetOverlayChatBrowserInfo().then((function(t){for(var n=new Map(e.m_mapBrowserInfo),o=0,r=t;o<r.length;o++){var i=r[o];n.delete(i.unPID);var a={m_unPID:i.unPID,m_nBrowserID:i.nBrowserID,m_eBrowserType:i.eBrowserType},s=e.m_mapBrowserInfo.get(i.unPID);s&&(s.m_nBrowserID!=i.nBrowserID?(e.OverlayBrowserClosed(s),e.m_mapBrowserInfo.delete(i.unPID),s=void 0):l.f.UIStore.OnOverlayBrowserChanged(a,i.nScreenWidth,i.nScreenHeight)),s||(e.m_mapBrowserInfo.set(i.unPID,a),e.OverlayBrowserCreated(a,i.nScreenWidth,i.nScreenHeight))}n.forEach((function(t,n){e.m_mapBrowserInfo.delete(n),e.OverlayBrowserClosed(t)}))})).catch((function(e){console.log("Failed to load overlay browser info:",e)}))},e.prototype.OverlayBrowserCreated=function(e,t,n){l.f.UIStore.OnOverlayBrowserCreated(e,t,n),Rn.ShowPopupFriendsList(e,!1,!1),l.f.SetDefaultPopupContext(e)},e.prototype.OverlayBrowserClosed=function(e){l.f.UIStore.SetSuppressBrowserContextBroadcasting(!0),l.f.GetDefaultBrowserContext().m_nBrowserID==e.m_nBrowserID&&l.f.GetDefaultBrowserContext().m_unPID==e.m_unPID&&l.f.SetDefaultPopupContext(l.a),console.log("Removing overlay browser window:",e.m_unPID,e.m_nBrowserID),D.d.ClosePopupsOwnedByBrowser(e),l.f.UIStore.SetSuppressBrowserContextBroadcasting(!1),l.f.UIStore.OnOverlayBrowserClosed(e)},Object(o.c)([i.a],e.prototype,"OnOverlayChatBrowserInfoChanged",null),e}(),L=n("Oefq"),P=n("q1tI"),F=n.n(P),x=n("geE1"),V=n("oh5H");function U(e){if(e.context.chat instanceof x.a){var t=e.args.appid,n=l.f.AppInfoStore.GetAppInfo(parseInt(t)).name,o="";return o=e.context.unAccountIDSender===e.context.chat.self.accountid?e.args.remoteplay?"#ChatRoom_GameInviteRemotePlay_YouInvited":"#ChatRoom_GameInvite_YouInvited":e.args.remoteplay?"#Friend_Notification_GameInviteRemotePlay":"#Friend_Notification_GameInvite",{title:"",body:Object(V.d)(o,e.context.chat.chat_partner.display_name,n,"")}}return null}function H(e){if(e.context.chat instanceof x.a){var t=e.args.appid,n=l.f.AppInfoStore.GetAppInfo(parseInt(t)).name;return{title:"",body:e.context.unAccountIDSender===e.context.chat.self.accountid?Object(V.d)("#Friend_Notification_GameInviteYouInvited",e.context.chat.chat_partner.display_name,n):Object(V.d)("#Friend_Notification_GameInvite",e.context.chat.chat_partner.display_name,n)}}return null}function W(e){return e.context.chat instanceof x.a?null!=e.args.chatid?{title:"",body:e.context.unAccountIDSender===e.context.chat.self.accountid?Object(V.d)("#bbcode_invite_you_invited_friend_voice",e.context.chat.chat_partner.display_name,e.args.chatname):Object(V.d)("#Friend_Notification_InviteVoice",e.context.chat.chat_partner.display_name,e.args.chatname)}:{title:"",body:e.context.unAccountIDSender===e.context.chat.self.accountid?Object(V.d)("#bbcode_invite_you_invited_friend",e.context.chat.chat_partner.display_name):Object(V.d)("#Friend_Notification_Invite",e.context.chat.chat_partner.display_name,e.args.chatgroupname)}:null}function z(e){var t=e.context.chat;return t instanceof x.a?{title:Object(V.d)("#TradeOffer_FriendSentYou",t.chat_partner.display_name),body:e.text}:null}function q(e){return{body:Object(V.d)("#Notification_Spoiler")}}function K(e){var t=l.f.FriendStore.GetPlayer(e.context.unAccountIDSender),n=e.args.type;if(!n)return null;var o=e.context.chat.ChatStore.ChatRoomEffectSettings[n];return o&&o.locToken?{body:Object(V.d)(o.locToken,t.display_name)}:null}X("#bbcode_random_description"),X("#bbcode_flip_description"),X("#bbcode_video_description"),X("#bbcode_inviteurl_description"),X("#bbcode_image_description");var Y=X("#bbcode_sticker_description");function X(e){return function(t){var n=l.f.FriendStore.GetPlayer(t.context.unAccountIDSender);return{body:Object(V.d)(e,n.display_name)}}}var Q=n("e2SU"),J=n("B7ut"),Z=n("/7KC"),$=n("MfD9"),ee=n.n($),te=n("TyAF"),ne=n("HzvH"),oe=n("KrQr"),re=n("rrR9"),ie=n("VtNY"),ae=n("YZlK"),se=n("+mma"),ce=n("Hi0u"),le=n("GxRc"),ue=n("UMCL");var pe,me=Object(l.h)((function(e,t,n){Object(ce.c)(P.createElement(fe,Object(o.a)({},e,{bIsInviteDialog:!0})),n,"InviteDialog",{strTitle:"Invite",popupWidth:540,popupHeight:260},M(n))})),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.AcceptInvite=function(e){var t=this,n=O.q(e);l.f.ChatStore.InviteStore.AcceptInvite(this.props.invite,E(this,e)).then((function(e){t.HandleJoinResult(n,e)}))},t.prototype.HandleJoinResult=function(e,t){var n=Object(ie.b)(t);n&&Object(se.c)(e,Object(V.d)("#ChatRoom_InviteMessage_Header"),n,Object(V.d)("#Button_OK")),this.props.onAccept&&this.props.onAccept()},t.prototype.render=function(){var e=this.props.invite;if(!e||!e.BIsReady())return P.createElement("div",{className:"ChatMessageInvite RequestingInfo displayRow"},P.createElement(le.a,{size:"small"}),P.createElement("div",{className:"postedExpiredInvite"},Object(V.d)("#bbcode_invite_requesting_info")));if(!e.BIsValid())return P.createElement("div",{className:"ChatMessageInvite InviteExpired"},P.createElement("div",{className:"postedExpiredInvite"},Object(V.d)("#bbcode_invite_no_longer_valid")));var t=this.props.inviter&&l.f.FriendStore.self.accountid==this.props.inviter.accountid,n=l.f.ChatStore.GetChatRoomGroup(e.GetChatRoomGroupID()),o=n&&n.BIsCurrentUserAMember(),r=e.BIsExpired(),i=n&&n.name,a="",s="ChatMessageInvite NoBGSplitInvite",c="inviteButton inviteButtonJoinChat";this.props.strClassName&&(s+=" "+this.props.strClassName);var u,p,m=e.BIsInviteLink(),d=e.BIsVoiceChatInvite();if(d){c+=" inviteButtonJoinVoice",s+=" VoiceChannelInvite";var h=n.GetChatRoom(e.GetChatID());h&&(a=h.name)}if(this.props.bIsInviteDialog||(o&&!t&&(s+=" GroupAlreadyJoined"),t&&(s+=" Inviter")),m&&(s+=" InviteLink"),r)s+=" InviteExpired";else if(e.BNeverExpires())u=P.createElement("div",{className:"Invite_ExpireTime"},Object(V.d)("#bbcode_invite_never_expires"));else{var f=l.f.RTime32ToDate(e.time_expires);u=P.createElement("div",{className:"Invite_ExpireTime"},Object(V.d)("#bbcode_invite_expires",f.toLocaleTimeString(),f.toDateString()))}p=t?d?Object(V.d)("#Voice_StartTalking"):Object(V.d)("#ChatRoom_Invite_Accept_Inviter"):d?Object(V.d)("#Voice_StartTalking"):o?Object(V.d)("#ChatRoom_Invite_Accept_Inviter"):Object(V.d)("#ChatRoom_Invite_Accept");var _=null,g=!1;if(e.BIsUserBanned())g=!0,_=P.createElement("div",null,Object(V.d)("#bbcode_invite_banned_forever"));else if(e.GetTimeKickExpires()&&e.GetTimeKickExpires()>l.f.GetServerRTime32()){g=!0;var b=(f=l.f.RTime32ToDate(e.GetTimeKickExpires())).toLocaleString([],{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});_=P.createElement("div",null,Object(V.d)("#bbcode_invite_banned_until",b))}var v=this.props.inviter&&o,y=!v&&!t,S=d?a:i;return P.createElement(ue.b,{text:[p,S,e.GetURL()]},P.createElement("div",{className:s},P.createElement("div",{className:"leftInviteContainer"},P.createElement(ae.a,{group:n,small:v,large:y}),d&&P.createElement("div",null,P.createElement(Q.ob,null))),P.createElement("div",{className:"rightInviteContainer"+(o||t?" rightInvite_Horizontal":"")},P.createElement("div",{className:"rightInviteContainerContent"},P.createElement(he,{invite:this.props.invite,inviter:this.props.inviter,invitee:this.props.invitee}),P.createElement("div",null,P.createElement("div",{className:"groupName"},S)),m&&P.createElement(_e,{url:e.GetURL(),bDisabled:e.BIsExpired()}),_,!t&&o&&!d&&P.createElement("div",null,P.createElement("span",{className:"groupAlreadyJoined"},Object(V.d)("#bbcode_invite_already_group_member")))),!r&&!g&&P.createElement("button",{className:c,type:"button",onClick:this.AcceptInvite},p)),(!t&&!o||m)&&u,P.createElement("div",{style:{clear:"left"}})))},Object(o.c)([i.a],t.prototype,"AcceptInvite",null),t=Object(o.c)([te.a],t)}(P.Component),he=Object(te.a)((function(e){var t=e.invite,n=e.inviter,o=e.invitee,r=t.BIsVoiceChatInvite(),i=t.BIsInviteLink(),a=e.inviter&&l.f.FriendStore.self.accountid==e.inviter.accountid,s=l.f.ChatStore.GetChatRoomGroup(t.GetChatRoomGroupID()).name,c=Object(V.d)("#bbcode_invite_youre_invited");return a?c=r?i?Object(V.k)("#bbcode_invite_you_shared_voice_link",P.createElement("span",{className:"inviteHighlight"},s," ")):Object(V.k)("#bbcode_invite_you_invited_friend_voice",P.createElement("span",{className:"inviteHighlight"},o.display_name," "),P.createElement("span",{className:"inviteHighlight"},s," ")):i?Object(V.k)("#bbcode_invite_you_shared_invite_link"):Object(V.k)("#bbcode_invite_you_invited_friend",P.createElement("span",{className:"inviteHighlight"},o.display_name," ")):n&&(c=r?i?Object(V.k)("#bbcode_invite_voice_url_description",P.createElement("span",{className:"inviteHighlight"},n.display_name," "),P.createElement("span",{className:"inviteHighlight"},s," ")):Object(V.k)("#bbcode_invite_voice_description",P.createElement("span",{className:"inviteHighlight"},n.display_name," "),P.createElement("span",{className:"inviteHighlight"},s," ")):i?Object(V.k)("#bbcode_invite_url_description",P.createElement("span",{className:"inviteHighlight"},n.display_name," ")):Object(V.k)("#bbcode_invite_description",P.createElement("span",{className:"inviteHighlight"},n.display_name," "))),P.createElement("div",{className:"inviteLabel"},c)})),fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.closeModal,r=t.onAccept,i=t.strClassName,a=Object(o.f)(t,["closeModal","onAccept","strClassName"]);return i="InviteDialog"+(i?" "+i:""),P.createElement(ce.a,{onEscKeypress:n},P.createElement(de,Object(o.a)({},a,{strClassName:i,onAccept:function(){e.props.closeModal&&e.props.closeModal(),r&&r()}})))},t}(P.Component),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.CopyToClipboard=function(e){O.j(this.props.url)},t.prototype.HandleFocus=function(e){e.currentTarget.select()},t.prototype.render=function(){var e=this.props.strLabel||Object(V.d)("#bbcode_invite_url_desc");return P.createElement("div",{className:"inviteURLContainer"},P.createElement("span",{className:"inviteURLLinkDesc"},e),P.createElement("div",{className:"inviteURLAndCopy"},P.createElement("input",{className:"inviteURLLink",value:this.props.bDisabled?Object(V.d)("#bbcode_invite_link_text_expired"):this.props.url,onFocus:this.HandleFocus,onClick:this.HandleFocus,readOnly:!0}),!this.props.bDisabled&&P.createElement("span",{className:"copyInviteLink",onClick:this.CopyToClipboard,title:Object(V.d)("#Chat_Copy_Clipboard")},P.createElement(Q.k,null))))},Object(o.c)([i.a],t.prototype,"CopyToClipboard",null),Object(o.c)([i.a],t.prototype,"HandleFocus",null),t}(P.Component),ge=n("bbBM"),be=n("uWOQ"),ve=n("CKJp"),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bCanAcceptRemotePlayInvite:!1},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.props.gameInvite.remoteplayString?(e=this.props.gameInvite.remoteplayString.split("&"),"restricted_countries=",t="",e.forEach((function(e){e.startsWith("restricted_countries=")&&(t=e.slice("restricted_countries=".length))})),[4,l.f.RemotePlayStore.BCanAcceptInviteForGame(this.props.gameInvite.appID.toString(),t)]):[3,2];case 1:n=o.sent(),this.setState({bCanAcceptRemotePlayInvite:n}),o.label=2;case 2:return[2]}}))}))},t.prototype.AcceptGameInvite=function(){this.props.gameInvite.AcceptGameInvite()},t.prototype.BCanAcceptVoiceChat=function(){var e=this.props.inviter,t=2==e.efriendrelationship,n=4==e.efriendrelationship,o=e.persona.is_online&&!t&&!n&&!e.is_blocked;return!l.f.VoiceStore.IsAnyVoiceActive()&&o},t.prototype.AcceptGameInviteAndVoiceChat=function(){this.props.gameInvite.AcceptGameInvite(),this.BCanAcceptVoiceChat()&&l.f.UIStore.ShowFriendChatDialogAndStartVoice(l.f.GetDefaultBrowserContext(),this.props.inviter.accountid)},t.prototype.DismissInvite=function(){this.props.gameInvite.DismissInvite()},t.prototype.OnShowGameContextMenu=function(e){Object(ge.b)(E(this,e),this.props.gameInvite.appID,e)},t.prototype.render=function(){var e=l.f.AppInfoStore.GetAppInfo(this.props.gameInvite.appID);if(e||(e=new ve.a(this.props.gameInvite.appID)).DeserializeFromCacheObject({strName:Object(V.d)("#ChatRoom_GameInvite_UnreleasedGame"),strIconURL:"",strLogoURL:""}),l.f.FriendStore.self==this.props.inviter){var t=this.props.inviteTarget.display_name,n=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_YouInvited":"#ChatRoom_GameInvite_YouInvited";return P.createElement("div",{className:"gameInviteSelf"},P.createElement("div",{onClick:this.OnShowGameContextMenu},Object(V.k)(n,t,P.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.bOld||this.props.gameInvite.bDismissed||this.props.inviter.persona.m_unGamePlayedAppID!=this.props.gameInvite.appID){var o=this.props.inviter.display_name;n=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_Dismissed":"#ChatRoom_GameInvite_Dismissed";return P.createElement("div",{className:"gameInviteDismissed"},P.createElement("div",{onClick:this.OnShowGameContextMenu},Object(V.k)(n,o,P.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.bAccepted){n=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_Accepted":"#ChatRoom_GameInvite_Accepted";return P.createElement("div",{className:"gameInviteAccepted"},P.createElement("div",{onClick:this.OnShowGameContextMenu},Object(V.k)(n,P.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.remoteplayString&&!this.state.bCanAcceptRemotePlayInvite){var r=this.props.inviter.display_name;n="#ChatRoom_GameInviteRemotePlay_CantAccept";return P.createElement("div",{className:"gameInviteDismissed"},P.createElement("div",{onClick:this.OnShowGameContextMenu},Object(V.k)(n,r,P.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}var i=this.props.inviter,a=null,s=i.persona.player_group_size-1;if(i.persona.m_unGamePlayedAppID==this.props.gameInvite.appID&&i.persona.player_group_size>0){var c=i.persona.player_group;l.f.FriendStore.all_friends;a=l.f.FriendStore.FriendGroupStore.ingame_group.member_list.map((function(e){return e!=i&&e.persona.player_group==c?(s--,P.createElement(ge.d,{key:e.accountid,friend:e,context:null})):null}))}var u={paddingLeft:0,display:"flex",alignItems:"stretch",overflow:"hidden"};this.props.chatGutterWidth&&(u.marginLeft="-"+this.props.chatGutterWidth+"px");var p=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_Invite":"#ChatRoom_GameInvite_Invite",m=Object(V.k)(p,this.props.inviter.display_name),d=this.props.gameInvite.remoteplayString&&this.BCanAcceptVoiceChat()&&l.f.VoiceStore.BPartnerHasAcceptedOrInitiatedOneOnOneChat(this.props.inviter.accountid),h=l.f.ParentalStore.BIsAppBlocked(this.props.gameInvite.appID);return P.createElement("div",{className:"msg ChatMessageInvite gameInviteMsg",style:u},P.createElement("div",{className:"leftInviteContainer",style:{overflow:"visible"}},P.createElement("img",{src:e.header_image_url,className:"productImage productImageBlur"}),P.createElement("img",{src:e.header_image_url,className:"productImage"})),P.createElement("div",{className:"rightInviteContainer"},P.createElement("div",{className:"centerBlock"},P.createElement("div",{className:"invitedTimeLabel"},Object(V.d)("#ChatRoom_GameInvite_InviteTime"),P.createElement(be.f,{rtime:this.props.gameInvite.rtTimestamp,bTimeOnly:!0})),P.createElement(ue.b,null,P.createElement("div",{className:"inviteLabel"},m)),P.createElement(ue.b,null,P.createElement("div",{className:"productName"},e.name)),i.persona.player_group_size>0&&P.createElement(ue.b,null,P.createElement("div",{className:"playingWithBlock"},P.createElement("div",null,Object(V.d)("#ChatRoom_GameInvite_PlayingWith")),P.createElement("div",{className:"playingWithAvatars"},P.createElement("div",{className:"playingWithLine"}),a,s>0&&P.createElement("div",{className:"playingWithExtraCount"},Object(V.d)("#ChatRoom_GameInvite_PartyMore",s)," "))))),P.createElement("div",{className:"acceptButtonsGroup"},h?P.createElement("div",null,Object(V.d)("#ChatRoom_GameInvite_Family_View")):P.createElement(P.Fragment,null,P.createElement("button",{className:"DialogButton GreenPlay",onClick:this.AcceptGameInvite},Object(V.d)("#ChatRoom_GameInvite_Accept")),d&&P.createElement("button",{className:"DialogButton GreenPlay",onClick:this.AcceptGameInviteAndVoiceChat},Object(V.d)("#ChatRoom_GameInvite_Accept_And_Voice_Chat")))),P.createElement("div",{className:"closeButton",onClick:this.DismissInvite},P.createElement(Q.sb,null))))},Object(o.c)([i.a],t.prototype,"AcceptGameInvite",null),Object(o.c)([i.a],t.prototype,"BCanAcceptVoiceChat",null),Object(o.c)([i.a],t.prototype,"AcceptGameInviteAndVoiceChat",null),Object(o.c)([i.a],t.prototype,"DismissInvite",null),Object(o.c)([i.a],t.prototype,"OnShowGameContextMenu",null),t=Object(o.c)([te.a],t)}(P.Component),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bSubscribed:!1,bDismissed:!1,bThumbnailLoaded:!1},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.props.broadcaster.accountid!=l.f.FriendStore.self.accountid&&this.props.broadcastid&&(l.f.BroadcastStore.SubscribeToBroadcastDetails(this.props.broadcastid,this.props.broadcaster.steamid64),this.setState({bSubscribed:!0}))},t.prototype.componentWillUnmount=function(){this.state.bSubscribed&&l.f.BroadcastStore.UnsubscribeFromBroadcastDetails(this.props.broadcastid,this.props.broadcaster.steamid64)},t.prototype.OnWatch=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.broadcaster.steamid64,n=E(this,e);SteamClient.WebChat.OpenURLInClient(t,n.m_unPID,!1)}else{var o=c.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.broadcaster.steamid64;Object(be.e)(e,o),e.stopPropagation()}this.OnClose()},t.prototype.OnClose=function(){this.setState({bDismissed:!0})},t.prototype.OnOpen=function(){this.setState({bDismissed:!1})},t.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},t.prototype.render=function(){var e=l.f.AppInfoStore.GetAppInfo(this.props.appid),t=P.createElement("span",null,P.createElement("img",{src:e.icon_url,className:"productImage"}),P.createElement("span",{className:"productName"},e.name));if(this.props.broadcaster.accountid==l.f.FriendStore.self.accountid){var n=this.props.viewer.display_name;return P.createElement("div",{className:"broadcastInviteSelf"},this.props.appid?Object(V.k)("#ChatRoom_BroadcastInvite_YouInvited",n,t):Object(V.k)("#ChatRoom_BroadcastInvite_YouInvited_NoAppID",n))}var o=this.props.broadcaster.display_name,r=l.f.BroadcastStore.GetBroadcastDetails(this.props.broadcastid,this.props.broadcaster.steamid64)||{strThumbnail:"",bExpired:!1};if(this.state.bDismissed||!this.props.broadcastid||r.bExpired)return P.createElement("div",{className:"broadcastInviteDismissed"},this.props.appid?Object(V.k)("#ChatRoom_BroadcastInvite_Expired",o,t):Object(V.k)("#ChatRoom_BroadcastInvite_Expired_NoAppID",o));var i=c.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",a=Object(V.k)("#ChatRoom_BroadcastInvite_Invite",o);return P.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg"},P.createElement("div",{className:"leftInviteContainer"},P.createElement("img",{src:r.strThumbnail,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),P.createElement("img",{src:i,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),P.createElement("div",{className:"noisePattern"})),P.createElement("div",{className:"rightInviteContainer"},P.createElement(ue.b,null,P.createElement("div",{className:"centerBlock"},P.createElement("div",{className:"inviteLabel"},a),P.createElement("div",{className:"productName"},e.name))),P.createElement("button",{className:"DialogButton Primary inviteButtonWatchBroadcast",onClick:this.OnWatch},Object(V.d)("#ChatRoom_BroadcastInvite_Watch")),P.createElement("div",{className:"closeButton",onClick:this.OnClose},P.createElement(Q.sb,null))))},Object(o.c)([i.a],t.prototype,"OnWatch",null),Object(o.c)([i.a],t.prototype,"OnClose",null),Object(o.c)([i.a],t.prototype,"OnOpen",null),Object(o.c)([i.a],t.prototype,"ShowThumbnail",null),t=Object(o.c)([te.a],t)}(P.Component),Ce=function(e){function t(t){var n=e.call(this,t)||this;return n.m_pollTimeout=void 0,n.m_broadcastid=void 0,n.m_bExpired=!1,n.state={strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},n}return Object(o.d)(t,e),t.prototype.OnAccept=function(e){l.f.BroadcastStore.ApproveViewerRequest(this.props.viewer.accountid,this.props.requestid)},t.prototype.OnClose=function(){l.f.BroadcastStore.RejectViewerRequest(this.props.viewer.accountid,this.props.requestid)},t.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},t.prototype.render=function(){var e=l.f.AppInfoStore.GetAppInfo(this.props.appid),t=P.createElement("span",null,P.createElement("img",{src:e.icon_url,className:"productImage"}),P.createElement("span",{className:"productName"},e.name)),n=this.props.viewer.display_name,o=l.f.BroadcastStore.GetRequestState(this.props.viewer.accountid,this.props.requestid),r=void 0!==this.m_broadcastid&&this.m_broadcastid!=l.f.BroadcastStore.broadcastid;if(void 0===this.m_broadcastid&&"0"!==l.f.BroadcastStore.broadcastid&&(this.m_broadcastid=l.f.BroadcastStore.broadcastid),r||o!=m.g.k_EPending){var i="#ChatRoom_BroadcastViewRequest_Expired";return o==m.g.k_EAccepted?i="#ChatRoom_BroadcastViewRequest_Accepted":o==m.g.k_ERejected&&(i="#ChatRoom_BroadcastViewRequest_Dismissed"),P.createElement("div",{className:"broadcastViewRequestDismissed"},Object(V.k)(i,n,t))}var a=c.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",s=(this.state.bThumbnailLoaded,this.state.nThumbnailUpdateCounter),u=Object(V.k)("#ChatRoom_BroadcastViewRequest_Invite",n);return P.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg broadcastViewRequestMsg"},P.createElement("div",{className:"leftInviteContainer"},this.state.strThumbnail&&P.createElement("img",{src:this.state.strThumbnail+"?n="+s,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),P.createElement("img",{src:a,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),P.createElement("div",{className:"noisePattern"})),P.createElement("div",{className:"rightInviteContainer"},P.createElement(ue.b,null,P.createElement("div",{className:"centerBlock"},P.createElement("div",{className:"inviteLabel"},u),P.createElement("div",{className:"productName"},e.name))),P.createElement("button",{className:"inviteButton inviteButtonWatchBroadcast",onClick:this.OnAccept},Object(V.d)("#ChatRoom_BroadcastViewRequest_Accept")),P.createElement("div",{className:"closeButton",onClick:this.OnClose})))},Object(o.c)([i.a],t.prototype,"OnAccept",null),Object(o.c)([i.a],t.prototype,"OnClose",null),Object(o.c)([i.a],t.prototype,"ShowThumbnail",null),t=Object(o.c)([te.a],t)}(P.Component),Oe=function(e){function t(t){var n=e.call(this,t)||this;return n.m_pollTimeout=void 0,n.m_broadcastid=void 0,n.m_bExpired=!1,n.state={strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},n}return Object(o.d)(t,e),t.prototype.OnWatch=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.broadcaster.steamid64,n=E(this,e);SteamClient.WebChat.OpenURLInClient(t,n.m_unPID,!1)}else{var o=c.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.broadcaster.steamid64;Object(be.e)(e,o),e.stopPropagation()}},t.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},t.prototype.render=function(){var e=this.props.broadcaster.current_game_name,t=this.props.broadcaster.display_name,n=c.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",o=(this.state.bThumbnailLoaded,this.state.nThumbnailUpdateCounter),r=Object(V.k)("#ChatRoom_BroadcastInvite_WatchGame",t);return P.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg",style:{padding:0,display:"flex",overflow:"hidden"}},P.createElement("div",{className:"leftInviteContainer"},this.state.strThumbnail&&P.createElement("img",{src:this.state.strThumbnail+"?n="+o,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),P.createElement("img",{src:n,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),P.createElement("div",{className:"noisePattern"})),P.createElement("div",{className:"rightInviteContainer"},P.createElement(ue.b,null,P.createElement("div",{className:"centerBlock"},P.createElement("div",{className:"inviteLabel"},r),e&&P.createElement("div",{className:"productName"},e))),P.createElement("button",{className:"DialogButton Primary inviteButtonWatchBroadcast",onClick:this.OnWatch},Object(V.d)("#ChatRoom_BroadcastInvite_Watch"))))},Object(o.c)([i.a],t.prototype,"OnWatch",null),Object(o.c)([i.a],t.prototype,"ShowThumbnail",null),t}(P.Component),Ie=n("tY0L"),Ee=n("7sd/"),we=n("uuth"),Me=n("QHER");!function(e){e[e.NotLoaded=0]="NotLoaded",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded"}(pe||(pe={}));var De=pe.NotLoaded,Te=[];function je(){De=pe.Loaded;for(var e=0,t=Te;e<t.length;e++){(0,t[e])()}Te=[]}var Ge=function(e){function t(n){var o=e.call(this,n)||this;return o.m_strPlayerID="",o.m_player=null,o.m_playerContainer=null,o.m_bPlayerReady=!1,o.m_strPlayerID="YoutubePlayer_"+t.s_nPlayerIndex++,o.state={bYoutubeLoaded:!1},o}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){var e;this.DestroyPlayer(),e=this.OnYoutubeScriptsReady,h.c(Te,e)},t.prototype.shouldComponentUpdate=function(e,t){if(!this.m_player)return!1;var n=this.props;return n.autoplay!=e.autoplay||n.controls!=e.controls||n.showInfo!=e.showInfo||n.video!=e.video?(this.CreatePlayer(e),!1):(n.width==e.width&&n.height==e.height||this.m_bPlayerReady&&e.width&&e.height&&this.m_player.setSize(e.width,e.height),!1)},t.prototype.DestroyPlayer=function(){if(this.m_player)try{this.m_player.stopVideo&&this.m_player.stopVideo(),this.m_player.destroy&&this.m_player.destroy()}catch(e){}finally{this.m_player=null}},t.prototype.BindPlayerContainer=function(e){this.m_playerContainer!=e&&(this.m_playerContainer=e,this.DestroyPlayer(),this.m_playerContainer&&function(e){if(De!=pe.Loaded){if(De==pe.NotLoaded){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=je}Te.findIndex((function(t){return e==t}))<0&&Te.push(e)}else e()}(this.OnYoutubeScriptsReady))},t.prototype.OnYoutubeScriptsReady=function(){this.CreatePlayer(this.props)},t.prototype.CreatePlayer=function(e){if(this.DestroyPlayer(),this.m_playerContainer){var t=!1===e.autoplay?0:1,n=!0===e.showInfo?1:0,o=!0===e.controls?1:0,r=!0===e.showFullscreenBtn?1:0,i=!0===e.playsInline?1:0,a={width:void 0!==e.width?String(e.width):void 0,height:void 0!==e.height?String(e.height):void 0,videoId:e.video,playerVars:{autoplay:t,showinfo:n,autohide:1,fs:r,modestbranding:1,rel:0,playsinline:i,iv_load_policy:3,controls:o,start:e.startSeconds},events:{onReady:this.OnPlayerReady,onStateChange:this.OnPlayerStateChange,onError:this.OnError}},s=this.m_playerContainer.firstElementChild;this.m_bPlayerReady=!1,this.m_player=new YT.Player(s,a)}},t.prototype.OnPlayerReady=function(e){if(this.m_bPlayerReady=!0,this.props.onVideoInfoChanged){var t=this.m_player.getVideoData(),n={strAuthor:"",strTitle:"",strVideoID:""};t.author&&(n.strAuthor=t.author),t.title&&(n.strTitle=t.title),t.video_id&&(n.strVideoID=t.video_id),this.props.onVideoInfoChanged(n)}this.props.width&&this.props.height&&this.m_player.setSize(this.props.width,this.props.height),this.props.autoplay&&this.m_player.playVideo(),this.props.onPlayerReady&&this.props.onPlayerReady()},t.prototype.OnPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.UNSTARTED:case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:case YT.PlayerState.BUFFERING:break;case YT.PlayerState.ENDED:this.props.onMovieEnd&&this.props.onMovieEnd()}},t.prototype.OnError=function(e){console.log("Youtube: Playback failed",e),this.props.onError&&this.props.onError(e)},t.prototype.OnPlayerLeftView=function(){this.props.autopause&&this.m_player&&this.m_bPlayerReady&&this.m_player.pauseVideo()},t.prototype.render=function(){var e=P.createElement("div",{key:this.m_strPlayerID,ref:this.BindPlayerContainer,className:Object(Me.a)("YoutubePlayer",this.props.classnames)},P.createElement(le.a,{className:"YoutubePlayerThrobber"}));return this.props.autopause?P.createElement(we.a,{onLeave:this.OnPlayerLeftView},e):e},t.s_nPlayerIndex=0,Object(o.c)([i.a],t.prototype,"BindPlayerContainer",null),Object(o.c)([i.a],t.prototype,"OnYoutubeScriptsReady",null),Object(o.c)([i.a],t.prototype,"CreatePlayer",null),Object(o.c)([i.a],t.prototype,"OnPlayerReady",null),Object(o.c)([i.a],t.prototype,"OnPlayerStateChange",null),Object(o.c)([i.a],t.prototype,"OnError",null),Object(o.c)([i.a],t.prototype,"OnPlayerLeftView",null),t}(P.Component),Re=n("adxy"),ke=n("s+DT"),Ae=function(e){var t=e.children;return F.a.createElement(ue.b,{text:t},F.a.createElement("div",{className:"spoilerMsgText"},F.a.createElement("div",{className:"spoilerMsg"},t)))},Ne=n("SOfK"),Be=n.n(Ne),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.CheckLoadPrettify=function(){var e=this;if(this.m_preElem){var t=this.m_preElem.ownerDocument.defaultView;if(t&&"object"!=typeof t.PR&&!0!==t.PR){t.PR=!0;var n=t.document.createElement("script");t.document.head.appendChild(n),n.onload=function(){e.TryRunPrettyPrint()},n.src=c.a.COMMUNITY_CDN_ASSET_URL+"prettify/prettify.js"}}},t.prototype.BindRef=function(e){this.m_preElem=e},t.prototype.TryRunPrettyPrint=function(){if(this.CheckLoadPrettify(),this.m_preElem){var e=this.m_preElem.ownerDocument.defaultView;e&&"object"==typeof e.PR&&e.PR.prettyPrint()}},t.prototype.componentDidMount=function(){this.TryRunPrettyPrint()},t.prototype.componentDidUpdate=function(){this.TryRunPrettyPrint()},t.prototype.render=function(){return F.a.createElement("div",null,F.a.createElement("pre",{className:Object(Me.a)("prettyprint",Be.a.CodeMessage),ref:this.BindRef},this.props.children))},Object(o.c)([i.a],t.prototype,"BindRef",null),t}(F.a.Component),Pe=function(e){var t=e.children;return F.a.createElement("div",null,F.a.createElement("pre",{className:Be.a.PreMessage},t))},Fe=function(e){var t=e.children;return F.a.createElement("div",{className:Be.a.QuoteMessage},t)},xe=n("Jdiq"),Ve=n("9Cmb"),Ue=n("LGkA"),He=n("ljid"),We=n("ewzr"),ze=n("V0xx"),qe=n("WpBz");function Ke(){return{url:Xe,youtube:et,filteredurl:Rt,emoticon:At,img:nt,video:at,og:lt,tweet:ut,inviteurl:St,publishedfile:Mt,tradeofferlink:Dt,econitem:Gt,steamstore:Nt,broadcast:jt,oembed:pt,spoiler:ht,plusone:ft,flip:_t,random:gt,quote:bt,pre:vt,code:yt,roomeffect:Bt,sticker:Lt}}function Ye(e){if("string"==typeof e)return e;var t="";return P.Children.forEach(e,(function(e){if("string"!=typeof e){if("object"==typeof e&&e.props){var n=e.props["bbcode-text"];n&&(t+=n)}}else t+=e})),t}var Xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.GetArgument(),t=this.props.children,n=null,o=J.b(e);return o!=e&&(n=o),t&&!this.GetArgument("fromclient")||(n=o),l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining&&"string"!=typeof t?P.createElement(tt,{href:e},P.createElement(Q.B,null),o):P.createElement(ue.b,{text:e,style:"merge-adjacent"},P.createElement(be.b,{href:e},n||t))},t=Object(o.c)([te.a],t)}(Ee.b),Qe=function(e){function t(t){var n=e.call(this,t)||this,o=l.f.ChatStore.EmbedStore.GetCollapsedState(n.props.unAccountIDSender,n.props.msgUniqueKey),r=l.f.ChatStore.EmbedStore.GetWidths(n.props.unAccountIDSender,n.props.msgUniqueKey);return n.state={nResizedWidth:o?16:r?r.nDesiredWidth:0,bResized:void 0!==r,bIsResizing:!1,bIsRestoring:!1,bMinimized:o,bIsMinimizing:!1},n.m_frameInitialXPos=-1,n.m_frameInitialYPos=-1,n.m_frameInitialWidth=-1,n.m_frameDefaultWidth=r?r.nDefaultWidth:-1,n.m_frameDesiredWidth=r?r.nDesiredWidth:-1,n}return Object(o.d)(t,e),t.prototype.BindContainer=function(e){this.m_elContainer=e,this.m_elContainer&&this.props.height>450&&this.HandleTallImages()},t.prototype.handleCollapse=function(e){var t=this;this.state.bMinimized||(this.m_frameDesiredWidth=this.m_elContainer.clientWidth),this.m_animationCollapse&&this.m_animationCollapse.Cancel();var n=!this.state.bMinimized,o=n?this.m_frameDesiredWidth:16,r=n?16:this.m_frameDesiredWidth;this.setState({nResizedWidth:o,bMinimized:!1,bIsMinimizing:!0},(function(){t.m_animationCollapse=new Re.b(t,{nResizedWidth:r},{msDuration:300,timing:"sine",setStateOnComplete:{bMinimized:n,bIsMinimizing:!1},onComplete:t.OnSizeChanged}),t.m_animationCollapse.Start()})),l.f.ChatStore.EmbedStore.SetCollapsedState(this.props.unAccountIDSender,this.props.msgUniqueKey,n)},t.prototype.OnSizeChanged=function(){this.props.onSizeChanged("BBCodeResizableComponent "+this.props.msgUniqueKey+this.state.bResized+this.state.bMinimized)},t.prototype.handleRestore=function(e){var t=this;this.state.bResized&&(this.m_animationCollapse&&this.m_animationCollapse.Cancel(),this.setState({bIsRestoring:!0},(function(){t.m_animationCollapse=new Re.b(t,{nResizedWidth:t.m_frameDefaultWidth},{msDuration:300,timing:"sine",setStateOnComplete:{bMinimized:!1,bIsRestoring:!1,bResized:!1},onComplete:t.OnSizeChanged}),t.m_animationCollapse.Start()})),l.f.ChatStore.EmbedStore.SetWidths(this.props.unAccountIDSender,this.props.msgUniqueKey,this.m_frameDefaultWidth,this.m_frameDefaultWidth))},t.prototype.OnResize=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.HandleMouseUp)},t.prototype.HandleMouseMove=function(e){this.m_frameInitialXPos<0&&(this.m_frameInitialXPos=e.clientX),this.m_frameInitialWidth<0&&(this.m_frameInitialWidth=this.m_elContainer.clientWidth),this.m_frameDefaultWidth<0&&!this.state.bResized&&(this.m_frameDefaultWidth=this.m_elContainer.clientWidth),this.m_frameInitialYPos<0&&(this.m_frameInitialYPos=e.clientY);var t=e.clientX-this.m_frameInitialXPos,n=e.clientY-this.m_frameInitialYPos,o=this.m_frameInitialWidth+t+n,r="image"==this.props.strMediaType?64:320;o<r&&(o=r),o>1280&&(o=1280),this.setState({nResizedWidth:o,bResized:!0,bIsResizing:!0}),this.OnSizeChanged()},t.prototype.HandleTallImages=function(){var e=450*(this.props.width/this.props.height),t=this.props.width;t>Math.min(1280,e)&&(t=Math.min(1280,e)),t<parseInt(this.m_elContainer.ownerDocument.defaultView.getComputedStyle(this.m_elContainer).maxWidth)&&this.setState({nMaxWidth:t}),this.OnSizeChanged()},t.prototype.HandleMouseUp=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.HandleMouseUp),this.m_frameInitialXPos=-1,this.m_frameInitialYPos=-1,this.m_frameInitialWidth=-1,this.state.bIsResizing&&this.setState({bIsResizing:!1}),!this.state.bMinimized&&this.m_elContainer&&(this.m_frameDesiredWidth=this.m_elContainer.clientWidth),l.f.ChatStore.EmbedStore.SetWidths(this.props.unAccountIDSender,this.props.msgUniqueKey,this.m_frameDesiredWidth,this.m_frameDefaultWidth)},t.prototype.render=function(){var e={};this.state.nResizedWidth>0?e.width=this.state.nResizedWidth+"px":this.state.nMaxWidth&&(e.maxWidth=this.state.nMaxWidth+"px");var t="BBCodeResizableComponent";this.props.className&&(t+=" "+this.props.className),this.state.bResized&&(t+=" Resized"),this.state.bIsResizing&&(t+=" ActivelyResizing"),this.state.bMinimized&&(t+=" Minimized"),this.state.bIsMinimizing&&(t+=" Minimizing");var n=this.props.titleInfo?this.props.titleInfo:"";return P.createElement(ue.b,{style:this.props["data-copystyle"],text:this.props["data-copytext"]},P.createElement("div",{className:t,style:e,ref:this.BindContainer},P.createElement("div",{className:"BBCodeCollapsed",onClick:this.handleCollapse,title:n},Object(V.d)("#bbcode_"+this.props.strMediaType+"_minimized")),!this.state.bMinimized&&!this.state.bIsMinimizing&&this.props.children,P.createElement("div",{className:"BBCodeRestoreControl",onClick:this.handleRestore,title:Object(V.d)("#bbcode_"+this.props.strMediaType+"_tooltip_restore")},P.createElement("div",{className:"restoreSize"})),P.createElement("div",{className:"BBCodeResizeControl",onMouseDown:this.OnResize,title:Object(V.d)("#bbcode_"+this.props.strMediaType+"_tooltip_resize")},P.createElement(Q.V,null)),P.createElement("div",{className:"BBCodeCollapseControl",onClick:this.handleCollapse,title:this.state.bMinimized?Object(V.d)("#bbcode_"+this.props.strMediaType+"_tooltip_uncollapse"):Object(V.d)("#bbcode_"+this.props.strMediaType+"_tooltip_collapse")},P.createElement(Q.rb,null))))},Object(o.c)([i.a],t.prototype,"BindContainer",null),Object(o.c)([i.a],t.prototype,"handleCollapse",null),Object(o.c)([i.a],t.prototype,"OnSizeChanged",null),Object(o.c)([i.a],t.prototype,"handleRestore",null),Object(o.c)([i.a],t.prototype,"OnResize",null),Object(o.c)([i.a],t.prototype,"HandleMouseMove",null),Object(o.c)([i.a],t.prototype,"HandleTallImages",null),Object(o.c)([i.a],t.prototype,"HandleMouseUp",null),t}(P.Component);P.Component;function Je(e){return P.createElement("div",{className:"BBCodeCollapseControl",onClick:e.onClick,title:e.title},P.createElement(Q.rb,null))}function Ze(e){var t=e.titleInfo?e.titleInfo:"",n=Object(V.d)("#bbcode_"+e.mediaType+"_minimized");Object(V.d)("#bbcode_"+e.mediaType+"_tooltip_restore");return P.createElement("div",{className:"BBCodeAlreadyCollapsed Minimized"},P.createElement("div",{className:"BBCodeAlreadyCollapsedText",onClick:e.onClick,title:t},n),P.createElement("div",{className:"BBCodeCollapseControl",onClick:e.onClick,title:e.titleInfo},P.createElement(Q.rb,null)))}var $e,et=function(e){function t(t){var n=e.call(this,t)||this;return n.state={strTitle:"",strAuthor:"",strVideoID:""},n}return Object(o.d)(t,e),t.prototype.OnVideoInfoChanged=function(e){var t=e.strTitle,n=e.strAuthor,o=e.strVideoID;this.setState({strTitle:t,strAuthor:n,strVideoID:o})},t.prototype.OnPlayerReady=function(){this.props.context.onLoad&&this.props.context.onLoad("BBCodeYouTubeComponent "+this.state.strVideoID)},t.prototype.OnPlaceholderImageLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("BBCodeYouTubeComponent "+this.state.strVideoID)},t.prototype.componentDidMount=function(){var e=this;S.findDOMNode(this).ownerDocument.defaultView.setTimeout((function(){e.props.context.onLoad&&e.props.context.onLoad("BBCodeYouTubeComponent "+e.state.strVideoID)}),250)},t.prototype.GetVideoID=function(){return this.GetArgument("v").replace(/^[^a-z0-9\-_]*([a-z0-9\-_]+).*$/gi,"$1")},t.prototype.render=function(){var e=this.state.strAuthor,t=this.state.strTitle,n="https://www.youtube.com/watch?v="+this.state.strVideoID,o=this.GetArgument("t");if(o&&(n+="&t="+encodeURIComponent(o)),l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var r="https://www.youtube.com/watch?v="+encodeURIComponent(this.GetVideoID());return o&&(r+="&t="+encodeURIComponent(o)),P.createElement(tt,{href:r},P.createElement(Q.tb,null),r)}var i=0;if(o){var a=o.match(/^(?:([\d]+)h)?(?:([\d]+)m)?(?:([\d]+)s)?/);a[0].length>0?(null!=a[1]&&(i+=3600*parseInt(a[1])),null!=a[2]&&(i+=60*parseInt(a[2])),null!=a[3]&&(i+=parseInt(a[3]))):i=parseInt(o)}return P.createElement(ue.b,{style:"block",text:[t,n]},P.createElement(Qe,{className:"BBCodeYouTubeComponent",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,strMediaType:"video",titleInfo:t,onSizeChanged:this.props.context.onLoad},P.createElement("div",{className:"BBCodeYouTubeComponent_Sizer BBCodeResizableElement"},P.createElement(Ge,{video:this.GetVideoID(),startSeconds:i,width:640,height:385,autoplay:!1,controls:!0,showFullscreenBtn:!0,onVideoInfoChanged:this.OnVideoInfoChanged,onPlayerReady:this.OnPlayerReady}),P.createElement(ue.b,{style:"block",text:[t,n]},P.createElement("img",{src:c.a.PUBLIC_SHARED_URL+"images/responsive/youtube_16x9_placeholder.gif",width:"100%",onLoad:this.OnPlaceholderImageLoad}))),t.length>0&&P.createElement(be.b,{className:"test HideWhenMinimized",href:n},P.createElement("div",{className:"BBCodeTitle"},t)),e.length>0&&P.createElement("div",{className:"BBCodeDetails HideWhenMinimized"},Object(V.d)("#bbcode_youtube_author",e))))},Object(o.c)([i.a],t.prototype,"OnVideoInfoChanged",null),Object(o.c)([i.a],t.prototype,"OnPlayerReady",null),Object(o.c)([i.a],t.prototype,"OnPlaceholderImageLoad",null),t=Object(o.c)([te.a],t)}(Ee.b);function tt(e){var t=e.copyText;null==t&&(t=e.href);var n="NonInlinedEmbed";return e.loadFailed&&(n+=" LoadFailed"),P.createElement(ue.b,{text:t,style:"merge-adjacent"},P.createElement("div",{className:n},P.createElement(be.b,{href:e.href,title:e.href},e.children)))}!function(e){e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error"}($e||($e={}));var nt=function(e){function t(t){var n=e.call(this,t)||this;n.k_nUnknownImageWidth=300,n.k_nUnknownImageHeight=300,n.k_nMaxImageWidth=315;var o=l.f.ChatStore.EmbedStore.GetCollapsedState(n.props.context.unAccountIDSender,n.props.context.key),r=parseInt(n.GetArgument("width")),i=parseInt(n.GetArgument("height"));return n.state={eLoadingState:$e.Loading,bCollapsed:o,nMediaWidth:r,nMediaHeight:i},n}return Object(o.d)(t,e),t.prototype.OnToggleCollapse=function(e){var t=!this.state.bCollapsed;this.setState({bCollapsed:t}),l.f.ChatStore.EmbedStore.SetCollapsedState(this.props.context.unAccountIDSender,this.props.context.key,t)},t.prototype.IsEmbeddedInOtherTag=function(){for(var e=0,t=this.props.parentTags;e<t.length;e++){if("tweet"==t[e])return!0}return!1},t.prototype.IsGiphy=function(){return void 0!==this.GetArgument("giphy_search")},t.prototype.IsImgur=function(){return this.GetArgument("src").startsWith("https://imgur.com")},t.prototype.OnImageLoad=function(e){var t=e.currentTarget;this.setState({eLoadingState:$e.Loaded,nMediaWidth:t.naturalWidth,nMediaHeight:t.naturalHeight}),this.props.context.onLoad&&this.props.context.onLoad("BBCodeImage "+this.props.args.src)},t.prototype.OnImageError=function(){this.setState({eLoadingState:$e.Error})},t.prototype.ShowModal=function(e,t){var n=parseInt(this.GetArgument("width")),o=parseInt(this.GetArgument("height")),r=n/o,i=e.currentTarget.ownerDocument.defaultView,a=.85*i.screen.height,s=Z.a(n||600,.5*i.screen.width,.85*i.screen.width),c=Z.a(o||800,.5*i.screen.height,a);r>=1?(c=(s-50)/r+50)>a&&(s=((c=a)-50)*r+50):s=(c-50)*r+50,Object(ce.c)(P.createElement(it,{imageUrl:t,ownerWin:i}),i,"ImageModal",{strTitle:Object(V.d)("#bbcode_image_popout"),popupHeight:c,popupWidth:s},M(i))},t.prototype.OnContextMenu=function(e){Object(be.d)(e,this.GetArgument("src"))},t.prototype.OnClick=function(e){var t=this.GetArgument("src"),n=this.GetArgument("thumbnail_src");this.IsGiphy()?t=n:this.IsImgur()&&(t=n.replace("?fb","")),this.ShowModal(e,t)},t.prototype.render=function(){var e,t=this.GetArgument("thumbnail_src"),n=this.GetArgument("srcset",!0),o=this.GetArgument("src"),r=this.GetArgument("title"),i=this.state.eLoadingState,a=this.IsGiphy(),s=i==$e.Error;if(a&&(e="/giphy "+this.GetArgument("giphy_search")),s||l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){if(a)return P.createElement(tt,{href:o,copyText:[e,o],loadFailed:s},P.createElement("div",{className:"NonInlinedEmbedLogo NonInlinedEmbedLogo_Giphy"}),P.createElement("span",{style:{fontWeight:"bold"}}," ",Object(V.k)("#bbcode_image_link_giphy",P.createElement("span",{className:"giphySearch"},this.GetArgument("giphy_search")))));var c=o;return r&&(c=Object(V.d)("#bbcode_disable_embed_inlining_parenthetical",r,J.c(o))),P.createElement(tt,{href:o,copyText:[r,o],loadFailed:s},P.createElement(Q.C,null),c)}if(this.IsEmbeddedInOtherTag())return P.createElement(st,{className:"embeddedImg",context:this.props.context,src:t,onContextMenu:be.c,onError:this.OnImageError});if(this.state.bCollapsed)return P.createElement(Ze,{onClick:this.OnToggleCollapse,mediaType:"image"});var u=this.state.nMediaWidth,p=this.state.nMediaHeight;u&&p||(u=this.k_nUnknownImageWidth,p=this.k_nUnknownImageHeight),"true"==this.GetArgument("proxied")&&(t+="?s=652x652");var m="chatImageContainer";a&&(m+=" giphyImg");var d=a?Object(V.d)("#bbcode_image_link_giphy",this.GetArgument("giphy_search")):o;return P.createElement(P.Fragment,null,a&&P.createElement(ue.b,null,P.createElement("div",null,e)),P.createElement(ue.b,{style:"block",text:[r,o]},P.createElement("div",{className:m},P.createElement(ot,{className:"BBCodeImageWrapper",width:u,height:p,maxHeight:Math.min(p,this.k_nMaxImageWidth)},P.createElement("img",{className:"chatImageFull BBCodeResizableElement",src:t,srcSet:n,onLoad:this.OnImageLoad,onError:this.OnImageError,onContextMenu:this.OnContextMenu,onClick:this.OnClick}),a&&P.createElement(rt,{strLink:o,searchText:this.GetArgument("giphy_search")}),P.createElement(Je,{onClick:this.OnToggleCollapse,title:d})))))},Object(o.c)([i.a],t.prototype,"OnToggleCollapse",null),Object(o.c)([i.a],t.prototype,"OnImageLoad",null),Object(o.c)([i.a],t.prototype,"OnImageError",null),Object(o.c)([i.a],t.prototype,"ShowModal",null),Object(o.c)([i.a],t.prototype,"OnContextMenu",null),Object(o.c)([i.a],t.prototype,"OnClick",null),t=Object(o.c)([te.a],t)}(Ee.b);function ot(e){var t=e.height/e.width,n={height:0,overflow:"hidden",paddingTop:"calc( "+t+" * 100% )",position:"relative"},o={};return e.maxHeight&&(o.maxWidth=e.maxHeight/t),P.createElement("div",{style:o,className:e.className},P.createElement("div",{style:n,className:"PreserveAspect"},e.children))}function rt(e){var t=Object(V.d)("#bbcode_image_tooltip_link_giphy",e.searchText);return P.createElement(P.Fragment,null,P.createElement(be.b,{className:"chatImageURL",href:e.strLink,title:t},P.createElement("div",{className:"giphyTag"},Object(V.k)("#bbcode_image_link_giphy",P.createElement("span",{className:"giphySearch"},e.searchText)))))}var it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return P.createElement(ce.a,{onEscKeypress:this.props.closeModal,hideTopBar:!0},P.createElement("div",{className:ee.a.ImageModalBackground},P.createElement("img",{className:ee.a.ImageModalContent,src:this.props.imageUrl})))},t}(P.Component),at=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bSeeking:!1,bPlay:!1,bError:!1},n}return Object(o.d)(t,e),t.prototype.StartVideo=function(){this.m_elVideo&&this.m_elVideo.play()},t.prototype.BindVideo=function(e){this.m_elVideo=e},t.prototype.OnVideoPlay=function(){this.setState({bPlay:!0})},t.prototype.OnVideoPause=function(){this.state.bPlay||this.state.bSeeking||this.setState({bPlay:!1})},t.prototype.OnVideoError=function(e){this.setState({bError:!0})},t.prototype.OnVideoLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeVideo "+this.props.context.key)},t.prototype.render=function(){this.GetArgument("simple");var e=this.GetArgument("src"),t=this.GetArgument("title"),n=this.state.bError;if(l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var r=e;return t&&(r=Object(V.d)("#bbcode_disable_embed_inlining_parenthetical",t,J.c(e))),P.createElement(tt,{href:e},P.createElement(Q.mb,null),r)}var i,a={controls:this.state.bPlay,autoPlay:!1,loop:!1,muted:!1};return n&&(i=P.createElement(be.b,{className:"failedVideoURL",href:e,title:Object(V.d)("#bbcode_video_tooltip_link")},P.createElement("span",{className:"failedVideoSpan"},e))),n?P.createElement("div",{className:"ChatMessageErrorSendingAlert VideoFailed"},Object(V.k)("#Chat_VideoLoadError",i)):P.createElement(ue.b,{style:"block",text:[t,e]},P.createElement(Qe,{className:"chatVideoContainer",strMediaType:"video",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,titleInfo:e,onSizeChanged:this.props.context.onLoad},P.createElement("video",Object(o.a)({className:"BBCodeResizableElement"},a,{ref:this.BindVideo,onPause:this.OnVideoPause,onPlay:this.OnVideoPlay,controlsList:"nodownload",onError:this.OnVideoError,onLoadedData:this.OnVideoLoaded}),P.createElement("source",{src:e,type:this.GetArgument("type",!0),onError:this.OnVideoError,onLoad:this.OnVideoLoaded})),!this.state.bPlay&&P.createElement("div",{className:"chatVideoPlayControl HideWhenMinimized",onClick:this.StartVideo},P.createElement("div",{className:"playButtonContainer"},P.createElement(Q.Q,null))),P.createElement(be.b,{className:"chatImageURL",href:e,title:Object(V.d)("#bbcode_video_tooltip_link")},P.createElement(Q.S,null))))},Object(o.c)([i.a],t.prototype,"StartVideo",null),Object(o.c)([i.a],t.prototype,"BindVideo",null),Object(o.c)([i.a],t.prototype,"OnVideoPlay",null),Object(o.c)([i.a],t.prototype,"OnVideoPause",null),Object(o.c)([i.a],t.prototype,"OnVideoError",null),Object(o.c)([i.a],t.prototype,"OnVideoLoaded",null),t=Object(o.c)([te.a],t)}(Ee.b),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("ImgNotifyChatOnLoad "+this.props.src)},t.prototype.render=function(){var e=this.props,t=(e.context,Object(o.f)(e,["context"]));return P.createElement("img",Object(o.a)({},t,{onLoad:this.OnLoad}))},Object(o.c)([i.a],t.prototype,"OnLoad",null),t}(P.Component);function ct(e){var t=e.context,n=e.width,r=e.height,i=e.src,a=Object(o.f)(e,["context","width","height","src"]),s=i+"?s="+n+"x"+r,c=s+"dpx2x";return P.createElement(st,Object(o.a)({context:t},a,{src:s,srcSet:s+" 1x, "+c+" 2x"}))}var lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.CopyToClipboard=function(){var e=this.GetArgument("url");e&&0!=e.length&&O.j(e)},t.prototype.HandleFocus=function(e){e.target.select()},t.prototype.OnLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeOpenGraph.OnLoad "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("img"),t=this.GetArgument("title"),n=this.GetArgument("desc"),o=this.GetArgument("url"),r=J.c(o);if(l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var i=o;return t&&(i=Object(V.d)("#bbcode_disable_embed_inlining_parenthetical",t,r)),P.createElement(tt,{href:o,copyText:[i,o]},P.createElement(Q.B,null),i)}return P.createElement(ue.b,{style:"block",text:[t,n,o]},P.createElement("div",{className:"ChatMessageOpenGraph"},P.createElement("div",{className:"OpenGraphContent"},e&&e.length>0&&P.createElement("div",{className:"OpenGraphImgBackground"},P.createElement("img",{className:"ChatMessageOpenGraph_Image",src:e,onLoad:this.OnLoad})),e&&e.length>0&&P.createElement(be.b,{className:"OpenGraphImgContainer",href:o},P.createElement(ct,{width:256,height:140,context:this.props.context,className:"ChatMessageOpenGraph_Image",src:e,onContextMenu:function(e){Object(be.c)(e,o)}})),P.createElement("div",{className:"ChatMessageOpenGraph_Body"},t&&t.length>0&&P.createElement(be.b,{className:"ChatMessageOpenGraph_Title",href:o},t),n&&n.length>0&&P.createElement("div",{className:"ChatMessageOpenGraph_Description"},n)),P.createElement("div",{style:{clear:"left"}})),P.createElement("div",{className:"OpenGraphFooter"},P.createElement("div",{className:"OpenGraphMessageURL"},P.createElement("span",{className:"OpenGraphMessageURLPosition",onFocus:this.HandleFocus,onClick:this.HandleFocus},P.createElement("span",{className:"OpenGraphMessageURL_short"},r),P.createElement("input",{className:"OpenGraphMessageURL_full",value:o,onFocus:this.HandleFocus,onClick:this.HandleFocus,readOnly:!0}))),P.createElement("div",{className:"OpenGraphURLButton CopyToClipboard",onClick:this.CopyToClipboard,title:Object(V.d)("#Chat_Copy_Link_Clipboard")},P.createElement(Q.k,null)))))},Object(o.c)([i.a],t.prototype,"CopyToClipboard",null),Object(o.c)([i.a],t.prototype,"HandleFocus",null),Object(o.c)([i.a],t.prototype,"OnLoad",null),t=Object(o.c)([te.a],t)}(Ee.b),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.FormatCreatedDate=function(e){var t=new Date(e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+t.getFullYear()},t.prototype.OpenTweet=function(e){for(var t=!1,n=e.target,o=e.currentTarget;n&&n!=o;){if("A"==n.nodeName||n.classList.contains("chatVideoContainer")){t=!0;break}n=n.parentElement}t||O.a(o)||Object(be.e)(e,this.GetArgument("url"))},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeTweet "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("created"),t=this.GetArgument("profile_name"),n=this.GetArgument("profile_screen_name"),o=this.GetArgument("profile_image"),r=this.GetArgument("profile_verified"),i=this.GetArgument("url"),a="http://twitter.com/"+n,s="true"==r;if(e=this.FormatCreatedDate(e),l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var c=new Date(e).toLocaleDateString(V.c.GetPreferredLocales(),{year:"numeric",month:"long",day:"numeric"}),u=void 0;if("string"==typeof this.props.children)u=this.props.children;else if(this.props.children instanceof Array)for(var p=0,m=this.props.children;p<m.length;p++){var d=m[p];if("string"==typeof d){u=d;break}}return P.createElement(tt,{href:i,copyText:[u,i]},P.createElement("div",{className:"NonInlinedEmbedLogo NonInlinedEmbedLogo_Twitter"}),Object(V.d)("#bbcode_disable_embed_inlining_tweet",t,c),P.createElement("br",null),P.createElement("div",{className:"NonInlinedEmbedSingleLine"},u))}return P.createElement("div",{className:ee.a.ChatMessageTweet,onClick:this.OpenTweet},P.createElement(ue.b,{style:"block",text:t+" (@"+n+")"},P.createElement("div",{className:ee.a.ChatMessageTweet_Header},P.createElement(be.b,{className:ee.a.ChatMessageTweet_ProfileImage,href:a},P.createElement("img",{src:o,onLoad:this.OnImageLoaded})),P.createElement("div",{className:ee.a.ChatMessageTweet_NameSection},P.createElement("div",{className:ee.a.ChatMessageTweet_NameGroup},P.createElement(be.b,{className:ee.a.ChatMessageTweet_Name,href:a},t),s&&P.createElement("div",{className:ee.a.ChatMessageTweet_Verified})),P.createElement(be.b,{className:ee.a.ChatMessageTweet_ScreenName,href:a},"@",n)),P.createElement(be.b,{className:ee.a.ChatMessageTweet_Logo,href:i}))),P.createElement(ue.b,{style:"block-continue prepend-innertext-with-newline",text:i},P.createElement("div",{className:ee.a.ChatMessageTweet_Body},this.props.children)),P.createElement("div",{className:ee.a.ChatMessageTweet_Footer},P.createElement("div",{className:ee.a.ChatMessageTweet_Created},e)))},Object(o.c)([i.a],t.prototype,"OpenTweet",null),Object(o.c)([i.a],t.prototype,"OnImageLoaded",null),t=Object(o.c)([te.a],t)}(Ee.b),pt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bActivated:!1},n}return Object(o.d)(t,e),t.prototype.Activate=function(){this.setState({bActivated:!0})},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeOEmbed "+this.props.context.key)},t.prototype.render=function(){var e=this.GetArgument("url"),t=this.GetArgument("title"),n=this.GetArgument("author"),o=this.GetArgument("provider_name"),r=this.GetArgument("preview_image");if(l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var i=e;return t&&(i=Object(V.d)("#bbcode_disable_embed_inlining_parenthetical",t,e)),P.createElement(tt,{href:e,copyText:[t,e]},P.createElement(Q.B,null),i)}var a,s=!this.state.bActivated;if("SoundCloud"!=o&&"Spotify"!=o||(s=!1),s)a=P.createElement("div",{className:"OEmbedPreview",onClick:this.Activate},P.createElement("div",{className:"oembedImgContainer"},P.createElement(ue.b,{style:"block",text:[t,e]},P.createElement("img",{src:r,onLoad:this.OnImageLoaded})),P.createElement("div",{className:"oembedHint"},Object(V.d)("#bbcode_oembed_preview_hint"))),P.createElement("div",{className:"oembedProvider"},o),P.createElement("div",{className:"oembedTitle"},t));else{var c=JSON.parse(this.GetArgument("iframe_attrs")),u=c.src,p=c.width,m=c.height;a=P.createElement(be.b,{className:"OpenGraphImgContainer",href:e,style:{display:"flex",flexDirection:"column"}},P.createElement(mt,{width:p,height:m,src:u,strProviderName:o}),o&&o.length&&P.createElement("div",{className:"oembedProvider"},o),t&&t.length>0&&P.createElement("div",{className:"oembedTitle"},t),n&&n.length>0&&P.createElement("div",{className:"oembedAuthor"},Object(V.d)("#bbcode_oembed_author",n)))}return P.createElement(ue.b,{style:"block",text:[t,e]},P.createElement("div",{className:"BBCodeOEmbedComponent "+o},a))},Object(o.c)([i.a],t.prototype,"Activate",null),Object(o.c)([i.a],t.prototype,"OnImageLoaded",null),t=Object(o.c)([te.a],t)}(Ee.b);function mt(e){var t=e.strProviderName,n=e.src,o=e.width,r=e.height;if(!n||!n.startsWith("http"))return null;"SoundCloud"==t&&(n=n.replace("visual=true","visual=false"));var i="number"==typeof o?o:parseInt(o),a="number"==typeof r?r:parseInt(r);!isNaN(i)&&!isNaN(a)&&i>640&&(a*=640/i,i=640);var s={flex:isNaN(a)?void 0:"1 1 "+a+"px",maxWidth:640};return P.createElement("iframe",{height:isNaN(a)?void 0:a+"px",style:s,src:n,scrolling:"no",frameBorder:0,sandbox:"allow-scripts allow-same-origin",allowFullScreen:"Vimeo"===t||void 0})}var dt,ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return P.createElement(Ae,null,this.props.children)},t}(Ee.b),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.context,t=e.bAnimate,n=e.onAnimationStart,o=e.onAnimationEnd;return P.createElement("div",{className:Object(Me.a)(ee.a.plusOne,t&&ee.a.MsgAnimating),onAnimationStart:n,onAnimationEnd:o},"+1")},t}(Ee.b),_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.context,t=e.bAnimate,n=e.onAnimationStart,o=e.onAnimationEnd,r=this.props.children,i=this.GetArgument("result"),a=Object(Me.a)(ee.a.flipCoinAndResult,t&&ee.a.MsgAnimating),s=Object(Me.a)(ee.a.flipCoinContainer,i);return P.createElement(ue.b,{text:r},P.createElement("div",{className:a,onAnimationStart:n,onAnimationEnd:o},P.createElement("div",null,"/flip:"),P.createElement("div",{className:s},P.createElement("div",{className:ee.a.coin},P.createElement("div",{className:ee.a.front}),P.createElement("div",{className:ee.a.front_b}),P.createElement("div",{className:ee.a.mid}),P.createElement("div",{className:ee.a.back}),P.createElement("div",{className:ee.a.back_b}))),P.createElement("div",{className:ee.a.resultLabel},Object(V.d)("#SlashCommandCoinFlip_Result_"+i))))},t}(Ee.b),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.Pad=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},t.prototype.GetLastNumber=function(e){if(e<10)return e;var t=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))-1),n=Math.floor(e/t);return n-10*Math.floor(n/10)},t.prototype.render=function(){for(var e=this.props.children,t=this.GetArgument("min"),n=this.GetArgument("max"),o=this.Pad(this.GetArgument("result"),n.length),r=[],i=!0,a=0;a<n.length;a++){"0"!=o[a]&&(i=!1);var s=(n.length-a)*Math.max(.5*n.length,2)/n.length,c=10-a;r.push(P.createElement("div",{key:"random"+a,className:ee.a.numberCounterContainer},P.createElement("div",{className:ee.a.numberColumn+(i?" "+ee.a.startingZero:""),style:{animationDuration:s+"s",animationName:ee.a["randomNumbers"+c]}},P.createElement("div",{className:ee.a.randomNumberLabel+" "+ee.a.randomActual},o[a]),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+1)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+2)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+3)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+4)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+5)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+6)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+7)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+8)),P.createElement("div",{className:ee.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+9)),P.createElement("div",{className:ee.a.randomNumberLabel},o[a])),P.createElement("div",{className:ee.a.randomNumberShadow})))}var l=this.props.context,u=l.bAnimate,p=l.onAnimationStart,m=l.onAnimationEnd;return P.createElement(ue.b,{text:e},P.createElement("div",{className:Object(Me.a)(ee.a.randomMsg,u&&ee.a.MsgAnimating),onAnimationStart:p,onAnimationEnd:m},P.createElement("span",null,"/random "),P.createElement("span",{className:ee.a.randomValues},t,"-",n)," : ",r))},t}(Ee.b),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return P.createElement(Fe,null,this.props.children)},t}(Ee.b),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return P.createElement(Pe,null,this.props.children)},t}(Ee.b),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return P.createElement(Le,null,this.props.children)},t}(Ee.b),St=function(e){function t(t){var n=e.call(this,t)||this;return n.state={invite:void 0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.args.invitecode;return{invite:e.context.chat.ChatStore.InviteStore.GetInviteFromCode(n)}},t.prototype.render=function(){var e=this.props.context.chat.GetMember(this.props.context.unAccountIDSender);return P.createElement(de,{invite:this.state.invite,inviter:e})},t}(Ee.b),Ct=function(e){function t(t){var n=e.call(this,t)||this;return n.state={invite:void 0,inviter:void 0,invitee:void 0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n,o,r,i=e.args.chatgroupid,a=e.args.chatid,s=e.context.chat;return s.self.accountid==e.context.unAccountIDSender?(o=s.self,r=s.chat_partner,n=s.accountid_partner):(o=s.chat_partner,r=s.self,n=s.self.accountid),{invite:e.context.chat.ChatStore.InviteStore.GetDirectInviteInfo(i,a,n),inviter:o,invitee:r}},t.prototype.render=function(){return P.createElement(de,{invite:this.state.invite,inviter:this.state.inviter,invitee:this.state.invitee})},t}(Ee.b),Ot=function(e){function t(t){var n=e.call(this,t)||this;return n.state={inviter:void 0,inviteTarget:void 0,gameInvite:void 0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n,o,r=e.args.appid,i=e.args.connect,a=e.args.remoteplay,s=e.context.chat;return s.self.accountid==e.context.unAccountIDSender?(n=s.self,o=s.chat_partner):(n=s.chat_partner,o=s.self),{inviter:n,inviteTarget:o,gameInvite:e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(e.context.unAccountIDSender,e.context.rtTimestamp,parseInt(r),i,a,void 0)}},t.prototype.render=function(){return P.createElement(ye,{inviter:this.state.inviter,inviteTarget:this.state.inviteTarget,gameInvite:this.state.gameInvite})},t}(Ee.b),It=function(e){function t(t){var n=e.call(this,t)||this;return n.state={inviter:void 0,inviteTarget:void 0,gameInvite:void 0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n,o,r=e.args.appid,i=e.args.lobbyid,a=e.context.chat;return a.self.accountid==e.context.unAccountIDSender?(n=a.self,o=a.chat_partner):(n=a.chat_partner,o=a.self),{inviter:n,inviteTarget:o,gameInvite:e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(e.context.unAccountIDSender,e.context.rtTimestamp,parseInt(r),"","",i)}},t.prototype.render=function(){return P.createElement(ye,{inviter:this.state.inviter,inviteTarget:this.state.inviteTarget,gameInvite:this.state.gameInvite})},t}(Ee.b),Et=function(e){function t(t){var n=e.call(this,t)||this;return n.state={broadcastid:"",broadcaster:void 0,viewer:void 0,appid:0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n,o,r=e.args.broadcastid,i=Number(e.args.appid),a=e.context.chat;return a.self.accountid==e.context.unAccountIDSender?(n=a.self,o=a.chat_partner):(n=a.chat_partner,o=a.self),{broadcastid:r,broadcaster:n,viewer:o,appid:i}},t.prototype.render=function(){return P.createElement(Se,{broadcastid:this.state.broadcastid,appid:this.state.appid,broadcaster:this.state.broadcaster,viewer:this.state.viewer})},t}(Ee.b),wt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={broadcaster:void 0,viewer:void 0,requestid:0,appid:0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n,o,r=Number(e.args.requestid),i=e.context.chat,a=l.f.FriendStore.self.persona.m_unGamePlayedAppID;return i.self.accountid!=e.context.unAccountIDSender?(n=i.self,o=i.chat_partner):(n=i.chat_partner,o=i.self),{requestid:r,appid:a,broadcaster:n,viewer:o}},t.prototype.render=function(){return P.createElement(Ce,{requestid:this.state.requestid,appid:this.state.appid,broadcaster:this.state.broadcaster,viewer:this.state.viewer})},t}(Ee.b),Mt=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bMounted=!1,n.state={bHaveVoteData:!1,bLocalVoteDown:!1,bLocalVoteUp:!1,nCommentCount:parseInt(n.GetArgument("num_comments_public"))},n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_bMounted=!1},t.prototype.componentDidMount=function(){var e=this;this.m_bMounted=!0;var t=l.f.CMInterface;if(t){var n=this.GetArgument("fileid"),o=k.b.Init(oe.a,8509);o.Body().add_published_file_ids().set_published_file_id(n),t.SendMsgAndAwaitResponse(o,oe.b).then((function(t){if(1==t.Body().eresult()&&1==t.Body().user_item_vote_details().length){var n=t.Body().user_item_vote_details()[0].vote();e.m_bMounted&&e.setState({bHaveVoteData:!0,bLocalVoteUp:1==n,bLocalVoteDown:2==n})}}))}},t.prototype.VoteItem=function(e,t){var n=this,o=l.f.CMInterface;if(o){var r=k.b.Init(oe.c,8507);r.Body().set_published_file_id(t),r.Body().set_vote_up(e),o.SendMsgAndAwaitResponse(r,oe.d).then((function(t){1==t.Body().eresult()&&n.m_bMounted&&n.setState({bLocalVoteUp:e,bLocalVoteDown:!e})}))}},t.prototype.render=function(){var e=this,t=this.GetArgument("fileid"),n=this.GetArgument("url"),o=this.GetArgument("title"),r=this.GetArgument("description"),i=this.GetArgument("preview_url"),a=parseInt(this.GetArgument("file_type")),s=["SteamPublishedFile"];switch(a){case 4:s.push("video");break;case 3:case 5:s.push("image")}if(l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var c=n;o&&(c=Object(V.d)("#bbcode_disable_embed_inlining_steam_workshop",o));var u=P.createElement(Q.B,null);switch(a){case 4:u=P.createElement(Q.mb,null);break;case 3:case 5:u=P.createElement(Q.C,null)}return P.createElement(tt,{href:n,copyText:[c,n]},u,c)}var p,m=parseInt(this.GetArgument("num_comments_public")),d=parseInt(this.GetArgument("votes_up"));return this.state.bLocalVoteUp&&d++,(o||r)&&(p=P.createElement(ue.b,{text:[o,r,n]},P.createElement("div",{className:"ChatLargeImageContainer_Description"},o&&P.createElement(be.b,{className:"ChatMessageOpenGraph_Title",href:n},o),r&&P.createElement("div",{className:"ChatMessageOpenGraph_Description"},r)))),P.createElement("div",{className:s.join(" ")},i&&i.length>0&&P.createElement(be.b,{className:"ChatLargeImageContainer",href:n},P.createElement(st,{context:this.props.context,className:"ChatLargeImageContainer_Image",src:i,onContextMenu:function(e){Object(be.d)(e,n)}})),p,P.createElement(be.b,{className:"SteamPublishedFile_Logo",href:n}),this.state.bHaveVoteData&&P.createElement("div",null,P.createElement("div",{className:"workshopItemControls"},P.createElement("div",{className:"workshopItemControlCtn"},d>=0&&P.createElement("span",{className:"upvoteCount"},d),m>=0&&P.createElement("span",{className:"commentCount"},m),P.createElement("span",{className:this.state.bLocalVoteUp?"general_btn voteUp toggled":"general_btn voteUp",onClick:function(){e.VoteItem(!0,t)}},Object(V.d)("#bbcode_community_publishedfile_vote_up")),P.createElement("span",{className:this.state.bLocalVoteDown?"general_btn voteDown toggled":"general_btn voteDown",onClick:function(){e.VoteItem(!1,t)}})))))},t=Object(o.c)([te.a],t)}(Ee.b),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCreateOfferClick=function(e){var t="NewTradeOffer"+parseInt(this.GetArgument("partner"));O.q(e).open(this.GetArgument("url"),t,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.render=function(){var e=this.GetArgument("url"),t=parseInt(this.GetArgument("partner"));if(t&&t==this.props.context.unAccountIDSender){var n=this.props.context.chat.GetMember(t);if(n){var o=Object(V.d)("#TradeOfferLink_Label");return P.createElement(ue.b,{style:"block",text:[o,e]},P.createElement("div",{className:"ChatMessageInvite NoBGSplitInvite TradeOfferInvite"},P.createElement("div",{className:"leftInviteContainer"},P.createElement(ge.d,{friend:n,context:{chat:this.props.context.chat},bLarge:!0})),P.createElement("div",{className:"rightInviteContainer rightInvite_Horizontal"},P.createElement("div",{className:"rightInviteContainerContent"},P.createElement("div",{className:"inviteLabel TradeOfferInvite_Title"},Object(V.k)("#TradeOfferLink_SharedTradeLink",n.display_name)),P.createElement(_e,{url:e,strLabel:o})),P.createElement("button",{className:"inviteButton inviteButtonJoinChat",type:"button",onClick:this.OnCreateOfferClick},Object(V.k)("#TradeOfferLink_SendUserOffer"))),P.createElement("div",{style:{clear:"left"}})))}}return P.createElement(be.b,{href:e},e)},Object(o.c)([i.a],t.prototype,"OnCreateOfferClick",null),t}(Ee.b),Tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ViewOfferClick=function(e){var t=this.GetArgument("id"),n=c.a.COMMUNITY_BASE_URL+"tradeoffer/"+t+"/",o="ViewTradeOffer"+t;O.q(e).open(n,o,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.ViewMyOffersClick=function(e){var t=this.props.context.chat.self.steamid64,n=this.GetArgument("id"),o=c.a.COMMUNITY_BASE_URL+"profiles/"+t+"/tradeoffers/sent/#tradeofferid_"+n;Object(be.e)(e,o)},t.prototype.render=function(){var e=this.GetArgument("id"),t=parseInt(this.GetArgument("sender"));if(!e&&this.GetArgument("url"))return P.createElement(Dt,Object(o.a)({},this.props));var n=this.props.context.chat,r=n.self.accountid==t,i=P.createElement("span",{className:"inviteeNameLabel"},n.chat_partner.display_name);return P.createElement("div",{className:"ChatMessageInvite TradeOfferInvite"},P.createElement("div",{className:"leftInviteContainer"},P.createElement(ge.d,{friend:r?n.self:n.chat_partner,context:{chat:n},bLarge:!0}),P.createElement(Q.jb,null)),P.createElement("div",{className:"rightInviteContainer"+(r?" rightInvite_Horizontal":"")},P.createElement("div",{className:"rightInviteContainerContent"},P.createElement(ue.b,null,P.createElement("div",{className:"inviteLabel TradeOfferInvite_Title"},Object(V.k)(r?"#TradeOffer_YouSentFriend":"#TradeOffer_FriendSentYou",i)),P.Children.count(this.props.children)>0&&P.createElement("div",{className:"TradeOffer_NoteFromFriendCtn"},P.createElement("div",{className:"TradeOffer_NoteFromFriend_QuoteArrow"}),P.createElement("div",{className:"inviteLabel TradeOffer_NoteFromFriend"},this.props.children)))),P.createElement("button",{className:"DialogButton Primary",type:"button",onClick:r?this.ViewMyOffersClick:this.ViewOfferClick},Object(V.k)("#TradeOffer_ViewTradeOffer"))),P.createElement("div",{style:{clear:"left"}}))},Object(o.c)([i.a],t.prototype,"ViewOfferClick",null),Object(o.c)([i.a],t.prototype,"ViewMyOffersClick",null),t}(Ee.b),jt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={broadcaster:void 0},n}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){var n=new ke.a(e.args.broadcaster);return{broadcaster:l.f.FriendStore.GetPlayer(n.GetAccountID())}},t.prototype.render=function(){return P.createElement(Oe,{broadcaster:this.state.broadcaster})},t}(Ee.b),Gt=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bMounted=!1,n.state={bLoading:!0,bStillLoading:!1,bLoadFail:!1,bLoadSuccess:!1,description:null},n}return Object(o.d)(t,e),t.prototype.CopyToClipboard=function(){var e=this.GetArgument("url");e&&0!=e.length&&O.j(e)},t.prototype.componentWillUnmount=function(){this.m_bMounted=!1},t.prototype.componentDidMount=function(){var e=this;this.m_bMounted=!0;var t=l.f.CMInterface;if(t){var n=parseInt(this.GetArgument("appid")),o=this.GetArgument("classid"),r=this.GetArgument("instanceid"),i=k.b.Init(re.a);i.Body().set_language(c.a.LANGUAGE),i.Body().set_appid(n);var a=i.Body().add_classes();a.set_classid(o),a.set_instanceid(r),re.c.GetAssetClassInfo(t.GetServiceTransport(),i).then((function(t){e.m_bMounted&&(1==t.GetEResult()?e.setState({bLoading:!1,bLoadFail:!1,bLoadSuccess:!0,description:t.Body().descriptions()[0]}):e.setState({bLoading:!1,bLoadFail:!0,bLoadSuccess:!1}))}))}S.findDOMNode(this).ownerDocument.defaultView.setTimeout((function(){e.m_bMounted&&e.setState((function(e){return e.bLoading?{bStillLoading:!0}:null}))}),500)},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeEconItem "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("image"),t=this.GetArgument("url"),n=parseInt(this.GetArgument("appid")),o=this.GetArgument("contextid"),r=this.GetArgument("assetid"),i=this.GetArgument("market_hash_name"),a=parseInt(this.GetArgument("owner")),s=l.f.AppInfoStore.GetAppInfo(n);if(a&&t){var u=this.props.context.chat.GetMember(a),p=u?u.display_name:this.GetArgument("persona"),m=J.c(t),d=c.a.COMMUNITY_BASE_URL+"economy/image/"+e+"/512x512",h={color:""},f=c.a.COMMUNITY_BASE_URL+"market/listings/"+n+"/"+i,_=c.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+a+"&for_items[]="+n+"_"+o+"_"+r;return this.state.bLoadSuccess&&(this.state.description.name_color()&&(h.color="#"+this.state.description.name_color()),this.state.description.icon_url_large()?d=c.a.COMMUNITY_BASE_URL+"economy/image/"+this.state.description.icon_url_large()+"/512x512":this.state.description.icon_url()&&(d=c.a.COMMUNITY_BASE_URL+"economy/image/"+this.state.description.icon_url()+"/512x512")),P.createElement(ue.b,{text:t},P.createElement("div",{className:"ChatMessageOpenGraph"},P.createElement("div",{className:"OpenGraphContent ClientFetchesData"},P.createElement("div",{className:"OpenGraphImgBackground"},P.createElement("img",{className:"ChatMessageOpenGraph_Image",src:d,onLoad:this.OnImageLoaded})),P.createElement(be.b,{className:"OpenGraphImgContainer",href:t},P.createElement(st,{context:this.props.context,className:"ChatMessageOpenGraph_Image",src:d,onContextMenu:function(e){Object(be.c)(e,t)}})),P.createElement("div",{className:"ChatMessageOpenGraph_Body"},this.state.bStillLoading&&P.createElement(le.a,{size:"medium",position:"center"}),this.state.bLoadSuccess&&P.createElement(ue.b,{text:[Object(V.d)("#bbcode_econ_ItemTitle",p,this.state.description.name()),t]},P.createElement("div",null,P.createElement(be.b,{className:"ChatMessageOpenGraph_Title",href:t,style:h},Object(V.d)("#bbcode_econ_ItemTitle",p,this.state.description.name())),P.createElement("div",{className:"ChatMessageOpenGraph_Description"},P.createElement("div",{className:"EconItemOpenGraph_GameInfo"},P.createElement("img",{src:s.icon_url,onLoad:this.OnImageLoaded}),P.createElement("div",null,P.createElement("div",null,s.name),P.createElement("div",null,this.state.description.type())))),P.createElement("div",{style:{marginTop:"1em"}},this.state.description.tradable()&&l.f.CMInterface&&a!=l.f.CMInterface.steamid.GetAccountID()&&P.createElement(be.b,{className:"general_btn inline",href:_},Object(V.d)("#bbcode_econ_TradeWithOwner",p)),this.state.description.marketable()&&P.createElement(be.b,{className:"general_btn inline",href:f},Object(V.d)("#bbcode_econ_ViewInMarket"))))),this.state.bLoadFail&&P.createElement("div",null,P.createElement(be.b,{className:"ChatMessageOpenGraph_Title",href:t},Object(V.d)("#bbcode_econ_UnknownItem")),P.createElement("div",{className:"ChatMessageOpenGraph_Description"},Object(V.d)("#bbcode_econ_LoadFail"))))),P.createElement("div",{className:"OpenGraphFooter"},P.createElement(be.b,{className:"OpenGraphMessageURL",href:t},P.createElement("span",{className:"OpenGraphMessageURLPosition"},P.createElement("span",{className:"OpenGraphMessageURL_short"},m),P.createElement("span",{className:"OpenGraphMessageURL_full"},t))),P.createElement("div",{className:"OpenGraphURLButton CopyToClipboard",onClick:this.CopyToClipboard},P.createElement(Q.k,null)))))}return P.createElement(be.b,{href:t},t)},Object(o.c)([i.a],t.prototype,"CopyToClipboard",null),Object(o.c)([i.a],t.prototype,"OnImageLoaded",null),t=Object(o.c)([te.a],t)}(Ee.b),Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.children?this.props.args[""]:"";return P.createElement(ue.b,{text:Object(V.d)("#bbcode_linkremoved")},P.createElement("span",{className:"filteredURL bb_removedlink",title:Object(V.d)("#Community_RemoveLink_Tooltip")},P.createElement(Q.f,null),P.createElement("span",{className:"threatURLDesc"},Object(V.d)("#bbcode_linkremoved_desc")),P.createElement("span",{className:"threatURL"},e)))},t}(Ee.b),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.GetArgument();if(e){if("here"==e&&(e="online"),"all"==e||"online"==e)return P.createElement("span",{className:"mention me"},P.createElement("span",{className:"MentionAtSymbol"},"@"),e);var t=parseInt(e),n=t&&this.props.context.chat.GetMember(t);if(n||(n=t&&l.f.FriendStore.GetPlayer(t)),n){var o=n.accountid==this.props.context.chat.self.accountid;return P.createElement(ge.e,{friend:n,context:{chat:this.props.context.chat}},P.createElement("span",{className:"mention"+(o?" me":"")},P.createElement("span",{className:"MentionAtSymbol"},"@"),n.display_name))}}return P.createElement("span",null,"@"+e)},t=Object(o.c)([te.a],t)}(Ee.b),At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e="";return"string"==typeof this.props.children?e=this.props.children:P.Children.forEach(this.props.children,(function(t){if("string"==typeof t&&(e+=t),"object"==typeof t&&t.props){var n=t.props["bbcode-text"];n&&(e+=n)}})),e?P.createElement(Ie.b,{emoticon:e,emoticonHoverStore:xe.b,large:this.props.context.bUseLargeEmoticons}):null},t}(Ee.b);!function(e){e[e.Large=3]="Large",e[e.Medium=2]="Medium",e[e.Small=1]="Small",e[e.Tiny=0]="Tiny"}(dt||(dt={}));var Nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={SteamStoreItem:null,bStoreRequestFailed:!1,bPlayVideo:!1,nThumbnailHovered:-1,nContentSize:dt.Large},t.m_contentRef=P.createRef(),t.m_storePreferences=l.f.SettingsStore.StorePreferences,t.m_resizeObserver=null,t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=this.GetArgument("app"),"basic,price_overview,developers,screenshots,movies,release_date,content_descriptors",t=c.a.COUNTRY||"US",[4,s.a.get(c.a.STORE_BASE_URL+"api/appdetails?appids="+e+"&cc="+t+"&language="+c.a.LANGUAGE+"&filters=basic,price_overview,developers,screenshots,movies,release_date,content_descriptors&client="+c.a.IN_CLIENT)];case 1:return n=o.sent(),r=null,n&&n.data&&(i=this.GetArgument("app"),r=n.data[i]),r&&r.success?this.setState({SteamStoreItem:this.ExtractGameData(r.data),bStoreRequestFailed:!1},this.OnFrameLoaded):this.setState({bStoreRequestFailed:!0}),(a=this.m_contentRef.current)&&(this.m_resizeObserver=ze.a.CreateObserver(this.OnResize,O.p(a)),this.m_resizeObserver.observe(this.m_contentRef.current)),[2]}}))}))},t.prototype.componentWillUnmount=function(){this.m_resizeObserver&&(ze.a.DeleteObserver(this.m_resizeObserver),this.m_resizeObserver=null)},t.prototype.OnResize=function(){var e=this.m_contentRef.current.getClientRects()[0].width;e<288?this.setState({nContentSize:dt.Tiny}):e<348?this.setState({nContentSize:dt.Small}):e<484?this.setState({nContentSize:dt.Medium}):this.setState({nContentSize:dt.Large})},t.prototype.ExtractGameData=function(e){var t=e.name,n=e.is_free,o=e.short_description,r=e.header_image,i=e.developers,a=e.screenshots,s=e.movies,c=e.release_date,l=e.price_overview,u=e.content_descriptors,p=e.steam_appid;return{name:t,is_free:n,description:Object(Ve.c)(o),header_image:r,developer:i&&i[0],screenshot:a&&a[0]&&a[0].path_thumbnail,screenshots:a&&a,movie:s&&s[0]&&s[0].webm&&s[0].webm[480]&&s[0].webm[480].replace("http://","https://"),thumbnail:s&&s[0]&&s[0].thumbnail,release_date:c&&c.date,url:Object(We.a)(p,"chatlink"),price:l&&l.final_formatted,initial_price:l&&l.initial_formatted,discount:l&&l.discount_percent&&l.discount_percent,content_descriptor_ids:u&&u.ids}},t.prototype.OnFrameLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeSteamStore "+this.GetArgument("app"))},t.prototype.OpenStoreLink=function(e){Object(be.e)(e,this.state.SteamStoreItem.url)},t.prototype.PlayVideoClicked=function(){this.setState({bPlayVideo:!this.state.bPlayVideo})},t.prototype.OnThumbnailOver=function(e){this.setState({nThumbnailHovered:e})},t.prototype.OnThumbnailLeave=function(){this.setState({nThumbnailHovered:-1})},t.prototype.CopyToClipboard=function(){var e=this.props.children;e&&0!=e.length&&O.j(e)},t.prototype.render=function(){var e=this;if(l.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var t=Ye(this.props.children);return P.createElement(tt,{href:t},P.createElement(Q.B,null),t)}if(this.state.bStoreRequestFailed){var n=l.f.FriendStore.GetPlayer(this.props.context.unAccountIDSender).display_name,o=(t=Ye(this.props.children),P.createElement("span",{className:ee.a.senderName},n)),r=P.createElement("span",{className:ee.a.URLSent},t),i=P.createElement(be.b,{className:ee.a.SteamURL,href:"https://store.steampowered.com/"},Object(V.d)("#bbcode_steam_store_embed_Failed_Steam_Store"));return P.createElement("div",{className:ee.a.ChatMessageSteamStore_Failed},P.createElement("span",null,Object(V.k)("#bbcode_steam_store_embed_Failed",o,i,r)))}var a=this.state.SteamStoreItem;if(!a)return P.createElement("div",{className:ee.a.ChatMessageSteamStore,style:{width:640,height:208}},P.createElement("div",{className:ee.a.ChatMessageSteamStore_Header,style:{height:70}},P.createElement("div",{className:ee.a.ChatMessageSteamStore_HeaderImage})),P.createElement(le.a,null));var s=a.name,c=a.price,u=a.description,p=a.header_image,m=a.developer,d=a.movie,h=a.thumbnail,f=a.release_date,_=a.screenshots,g=a.is_free,b=a.initial_price,v=a.discount,y=a.content_descriptor_ids,S=!1,C=this.m_storePreferences&&this.m_storePreferences.content_descriptor_preferences()&&this.m_storePreferences.content_descriptor_preferences().content_descriptors_to_exclude()&&this.m_storePreferences.content_descriptor_preferences().content_descriptors_to_exclude().map((function(e){return e.content_descriptorid()}));y&&C&&y.some((function(e){return-1!==C.indexOf(e)}))&&(S=!0);var O=[],I=!0;if(S)I=!1;else for(var E=function(t){var n=t;if(d||(n=t+1),d&&n>2||!d&&n>3)return"break";var o="";_&&_[n]&&"undefined"!==_[n].path_thumbnail?o=""+_[n].path_thumbnail:I=!1,O.push(P.createElement("div",{key:"screenshot"+n,className:ee.a.ChatMessageSteamStore_Screenshot},P.createElement("img",{className:ee.a.ChatMessageSteamStore_ScreenshotThumbnail,src:o,onMouseEnter:function(){return e.OnThumbnailOver(n)}})))},w=0;w<_.length;w++){if("break"===E(w))break}var M=ee.a.Large,D=!("0"==v||null==v),T=this.state.nThumbnailHovered,j=this.state.bPlayVideo,G=P.createElement("div",{className:ee.a.ChatMessageSteamStore_FilteredDescription},Object(V.d)("#bbcode_steam_store_embed_Filtered")," ");switch(this.state.nContentSize){case dt.Tiny:M=ee.a.TinyContent;break;case dt.Small:M=ee.a.SmallContent;break;case dt.Medium:M=ee.a.MediumContent;break;case dt.Large:M=ee.a.LargeContent}return P.createElement("div",{ref:this.m_contentRef,className:Object(Me.a)(ee.a.ChatMessageSteamStore,S?ee.a.ChatMessagesSteamStore_FilteredContent:null,M)},P.createElement("div",{className:ee.a.ChatMessageSteamStore_Header},p&&P.createElement(P.Fragment,null,P.createElement("img",{className:ee.a.ChatMessageSteamStore_HeaderImage,src:p,onClick:S?null:this.OpenStoreLink}),S&&P.createElement("div",{className:ee.a.ChatMessageSteamStore_HeaderImageFiltered},Object(V.d)("#bbcode_steam_store_embed_Image_Filtered")),P.createElement("img",{className:Object(Me.a)(ee.a.ChatMessageSteamStore_HeaderImage,ee.a.Blurred),src:p})),P.createElement("div",{className:ee.a.ChatMessageSteamStore_GameDetails},P.createElement("div",{className:ee.a.ChatMessageSteamStore_GameNameAndIcon,onClick:S?null:this.OpenStoreLink},P.createElement("div",{className:ee.a.ChatMessageSteamStore_Name},s)),P.createElement("div",null,Object(V.d)("#bbcode_steam_store_embed_From"),P.createElement("span",{style:{color:"#fffc"}},""+m)),P.createElement("div",{style:{fontSize:12}},Object(V.d)("#bbcode_steam_store_embed_ReleaseDate"),P.createElement("span",{style:{color:"#fffc"}},""+f)))),P.createElement("div",{className:ee.a.ChatMessageSteamStore_Body},P.createElement("div",{className:ee.a.ChatMessageSteamStore_DetailsContainer},P.createElement("div",{className:ee.a.ChatMessageTweet_NameSection},P.createElement("div",{className:ee.a.ChatMessageSteamStore_Description},S?G:u," "),P.createElement("div",{className:ee.a.ChatMessageSteamStore_Footer},P.createElement("div",{className:ee.a.ChatMessageSteamStore_PricingContainer},P.createElement("div",{className:ee.a.ChatMessageSteamStore_Pricing},D&&P.createElement("div",{className:ee.a.ChatMessageSteamStore_Pricing_Discount},"-"+v+"%"),P.createElement("div",{className:ee.a.ChatMessageSteamStore_Pricing_FinalContainer},D&&b&&P.createElement("div",{className:ee.a.ChatMessageSteamStore_Pricing_Initial},""+b),c&&P.createElement("div",{className:Object(Me.a)(ee.a.ChatMessageSteamStore_Pricing_Final,D?ee.a.hasDiscount:null)},""+c)),g&&!c&&P.createElement("span",{className:ee.a.ChatMessageSteamStore_Free},Object(V.d)("#bbcode_steam_store_embed_FreeToPlay"))),P.createElement("div",{className:ee.a.ChatMessageSteamStore_ViewStore,onClick:this.OpenStoreLink},Object(V.d)(S?"#bbcode_steam_store_embed_ViewStorePage_Filtered":"#bbcode_steam_store_embed_ViewStorePage"))),P.createElement("div",{className:ee.a.ChatMessageSteamStore_CopyURL,onClick:this.CopyToClipboard,title:Object(V.d)("#Chat_Copy_Link_Clipboard")},P.createElement(Q.k,null))))),!S&&P.createElement("div",{className:ee.a.ChatMessageSteamStore_MediaContainer},P.createElement("div",{className:ee.a.ChatMessageSteamStore_MainMedia},d&&P.createElement("div",{className:Object(Me.a)(ee.a.ChatMessageSteamStore_VideoThumbnail,j?ee.a.videoPlaying:null),onClick:this.PlayVideoClicked},T<0||null==T?P.createElement(P.Fragment,null,P.createElement("img",{src:h}),P.createElement("div",{className:ee.a.ChatMessageSteamStore_VideoPlayButton},P.createElement(Q.Q,null))):P.createElement("img",{src:""+_[T].path_thumbnail,style:{width:"100%"}})),!d&&_&&P.createElement("img",{src:""+_[Math.max(T,0)].path_thumbnail,style:{width:"100%"}})),I&&_&&P.createElement("div",{className:ee.a.ChatMessageSteamStore_ThumbnailsContainer,onMouseLeave:this.OnThumbnailLeave},O)),P.createElement("div",{className:Object(Me.a)(ee.a.ChatMessageSteamStore_VideoLargeContainer,j?ee.a.videoPlaying:null),onClick:this.PlayVideoClicked},j&&P.createElement("video",{className:ee.a.ChatMessageSteamStore_VideoLarge,src:d,controls:!0,autoPlay:!0}),P.createElement("div",{onClick:this.PlayVideoClicked},P.createElement(Q.sb,null)))))},Object(o.c)([i.a,Object(qe.a)(100)],t.prototype,"OnResize",null),Object(o.c)([i.a],t.prototype,"ExtractGameData",null),Object(o.c)([i.a],t.prototype,"OnFrameLoaded",null),Object(o.c)([i.a],t.prototype,"OpenStoreLink",null),Object(o.c)([i.a],t.prototype,"PlayVideoClicked",null),Object(o.c)([i.a],t.prototype,"OnThumbnailOver",null),Object(o.c)([i.a],t.prototype,"OnThumbnailLeave",null),Object(o.c)([i.a],t.prototype,"CopyToClipboard",null),t=Object(o.c)([te.a],t)}(Ee.b),Bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bDisabled:!1},t}var n;return Object(o.d)(t,e),n=t,t.prototype.OnReplayAnimation=function(){var e=this,t=this.props.args.type;this.props.context.chat.RoomEffectManager().ActivateRoomEffect(t);var o=window.setTimeout((function(){e.setState({bDisabled:!1,iTimerID:void 0})}),n.k_iCooldownMs);this.setState({bDisabled:!0,iTimerID:o})},t.prototype.componentWillUnmount=function(){this.state.iTimerID&&window.clearTimeout(this.state.iTimerID)},t.prototype.render=function(){var e=l.f.FriendStore.GetPlayer(this.props.context.unAccountIDSender),t=this.props.args.type,n=ne.a[t];if(!n)return console.log("Attempt to render unknown room effect "+t),null;var o=n.locToken;return P.createElement("div",{className:ee.a.RoomEffectContainer},P.createElement("span",{className:ee.a.RoomEffectIcon},n.renderEffectIcon()),Object(V.k)(o,e.display_name),P.createElement("div",{style:{marginLeft:"auto",marginRight:"16px"}},P.createElement(He.x,{disabled:this.state.bDisabled,style:{padding:"0px 8px"},onClick:this.state.bDisabled?void 0:this.OnReplayAnimation},Object(V.d)("#ChatRoom_ReplayRoomEffect"))))},t.k_iCooldownMs=5e3,Object(o.c)([i.a],t.prototype,"OnReplayAnimation",null),t=n=Object(o.c)([te.a],t)}(Ee.b),Lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_canvasRef=P.createRef(),t.m_imageRef=P.createRef(),t.state={imageURL:Object(Ue.a)(c.a.COMMUNITY_CDN_URL,t.props.args.type),bIsHovered:!1,bIsTimerPending:!1},t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.CancelTimer()},t.prototype.OnImageLoad=function(e){var t=O.q(e),n=this.m_canvasRef.current,o=this.m_imageRef.current,r=n&&n.getContext("2d");r&&o&&(r.drawImage(o,0,0,150,150),this.CancelTimer(),this.StartTimer(t,5e3))},t.prototype.StartTimer=function(e,t){var n=this;this.m_timerOwningWindow&&this.m_schTimer||(this.m_timerOwningWindow=e,this.m_schTimer=e.setTimeout((function(){return n.CancelTimer()}),t),this.setState({bIsTimerPending:!0}))},t.prototype.CancelTimer=function(){this.m_timerOwningWindow&&this.m_schTimer&&this.m_timerOwningWindow.clearTimeout(this.m_schTimer),this.m_schTimer=void 0,this.m_timerOwningWindow=void 0,this.setState({bIsTimerPending:!1})},t.prototype.OnMouseOver=function(e){var t=O.q(e);this.StartTimer(t,1e3),this.setState({bIsHovered:!0})},t.prototype.OnMouseOut=function(){this.setState({bIsHovered:!1})},t.prototype.render=function(){var e=this.state.bIsHovered||this.state.bIsTimerPending;return P.createElement("div",{style:{cursor:"pointer",position:"relative",width:"150px",height:"150px"},onMouseOver:this.OnMouseOver,onMouseOut:this.OnMouseOut,onFocus:this.OnMouseOver,onBlur:this.OnMouseOut},P.createElement("canvas",{ref:this.m_canvasRef,style:{position:"absolute",top:0,left:0,display:e?"none":"block"},width:150,height:150}),P.createElement("img",{ref:this.m_imageRef,style:{display:e?"block":"none",zIndex:1},onLoad:this.OnImageLoad,src:this.state.imageURL}),this.state.bIsHovered&&P.createElement(Pt,{target:this.m_imageRef.current,sticker:this.GetArgument("type")}))},Object(o.c)([i.a],t.prototype,"OnImageLoad",null),Object(o.c)([i.a],t.prototype,"OnMouseOver",null),Object(o.c)([i.a],t.prototype,"OnMouseOut",null),t}(Ee.b);function Pt(e){var t=e.target,n=function(e){var t=P.useState(null),n=t[0],o=t[1];return P.useEffect((function(){var t=!0;return s.a.get(c.a.COMMUNITY_CDN_URL+"economy/stickerjson/"+e).then((function(e){return t&&o(e.data)})).catch((function(e){return console.error("Failed to load stickerJSON: "+e)})),function(){t=!1}}),[e]),n}(e.sticker);if(!n)return null;var o=n.item_name,r=n.appid;return P.createElement(Ie.e,{target:t,sticker:{appid:r,name:o}})}var Ft=n("HAz9"),xt=n("VZeO"),Vt=n("ha6C"),Ut=n("29iz"),Ht=n("yolM"),Wt=n("yIxU");function zt(e,t,n,o){var r=o?758:988;Object(ce.c)(P.createElement(Kt,{streamHost:t,bIsHost:o,browserContext:e}),n,"RemotePlayDialog",{strTitle:Object(V.d)("#Friend_Menu_RemotePlay"),popupWidth:512,popupHeight:r},M(n))}var qt,Kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bHadPlayers=!1,t.nCurrentAppID=0,t.bUnmounted=!1,t.state={gameVolumeNumber:-1,bAllowDesktopStream:!1,clientStreamingQuality:2},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return c.a.IN_CLIENT?Object(Vt.a)("RemotePlay.GetGameSystemVolume")?[4,SteamClient.RemotePlay.GetGameSystemVolume()]:[3,2]:[3,5];case 1:if(e=o.sent(),this.bUnmounted)return[2];this.setState({gameVolumeNumber:e}),o.label=2;case 2:return Object(Vt.a)("RemotePlay.GetClientStreamingQuality")?[4,SteamClient.RemotePlay.GetClientStreamingQuality()]:[3,4];case 3:if(t=o.sent(),this.bUnmounted)return[2];this.setState({clientStreamingQuality:t}),o.label=4;case 4:Object(Vt.a)("RemotePlay.RegisterForRemoteClientStopped")&&SteamClient.RemotePlay.RegisterForRemoteClientStopped((function(e){return n.RemoteClientStopped(e)})),this.forceUpdate(),o.label=5;case 5:return[2]}}))}))},t.prototype.componentWillUnmount=function(){this.bUnmounted=!0,this.props.bIsHost?l.f.RemotePlayStore.CancelAllInvitesAndSessions():l.f.RemotePlayStore.StopStreamingClient()},t.prototype.RemoteClientStopped=function(e){this.props.closeModal()},t.prototype.OnChangePauseOnDesktop=function(e){l.f.RemotePlayStore.SetStreamingDesktopToRemotePlayTogetherEnabled(!e),this.setState({bAllowDesktopStream:e})},t.prototype.OnGameVolumeChanged=function(e){c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.SetGameSystemVolume")&&(SteamClient.RemotePlay.SetGameSystemVolume(e),this.setState({gameVolumeNumber:e}))},t.prototype.OnInputGainChanged=function(e){l.f.VoiceStore.SetVoiceInputGain(l.f.VoiceStore.ConvertSliderToGainValue(e,xt.a.k_MaxInputOutputGainValue))},t.prototype.OnClientStreamingQualityClick=function(e){var t=this.state.clientStreamingQuality;(t+=1)>3&&(t=1),c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.SetClientStreamingQuality")&&SteamClient.RemotePlay.SetClientStreamingQuality(t),this.setState({clientStreamingQuality:t})},t.prototype.OnSettingsClick=function(e){Object(Ht.a)(E(this,e),e.currentTarget.ownerDocument.defaultView,"voice")},t.prototype.render=function(){var e=this,t=this.props.bIsHost;if(t){for(var n=0,o=0;o<l.f.RemotePlayStore.player_props_count;o++){l.f.RemotePlayStore.GetPlayerPropsByIndex(o).bSession&&++n}0==n?this.bHadPlayers&&this.props.closeModal():this.bHadPlayers=!0}var r=!0,i=this.state.gameVolumeNumber;i<0&&(r=!1);Object(Me.a)(Wt.remotePlayIcon,Wt.IconAllowDesktop);this.state.bAllowDesktopStream?Wt.accessEnabled:Wt.accessDisabled;var a=l.f.VoiceStore.IsAnyVoiceActive(),s=l.f.VoiceStore.ConvertGainValueToSliderValue(l.f.VoiceStore.GetVoiceInputGain(),xt.a.k_MaxInputOutputGainValue);0==this.nCurrentAppID&&(this.nCurrentAppID=this.props.streamHost.persona.m_unGamePlayedAppID);var c=this.nCurrentAppID;var u={friend:l.f.FriendStore.GetPlayer(l.f.FriendStore.self.accountid),gameID:"0",bSession:!0,bJoined:!0,bKeyboardEnabled:!0,bMouseEnabled:!0,bControllerEnabled:!0,nKeyboardUsedTime:0,nMouseUsedTime:0,nControllerUsedTime:0},p=t&&l.f.RemotePlayStore.bIsShowingPlaceholder,m=this.state.clientStreamingQuality;return P.createElement(ce.a,{className:Object(Me.a)(Wt.Dialog_RemotePlay,"Dialog_RemotePlay")},P.createElement(He.h,{classNameContent:"RemotePlayDialog"},P.createElement(He.m,{className:Object(Me.a)(Wt.NoRightMargin,Wt.BottomMargin)},Object(V.d)("#Friend_Menu_RemotePlay"),!1,P.createElement(He.c,null,P.createElement("div",{className:Wt.VerticalContainer},P.createElement("div",{className:Object(Me.a)(Wt.EndStreamContainer,t&&Wt.EndStreamContainerHost,!l.f.RemotePlayStore.bIsShowingPlaceholder&&Wt.EndStreamContainerUnpaused)},P.createElement("div",{className:Object(Me.a)(Wt.TextButton,Wt.FitContent,Wt.AlignRight),onClick:function(){return e.props.closeModal()}},Object(V.d)(t?"#RemotePlay_EndStream":"#RemotePlay_LeaveStream")),!t&&P.createElement("div",{className:Object(Me.a)(Wt.TextButton,Wt.FitContent,Wt.AlignRight,Wt.RightPadding),onClick:this.OnClientStreamingQualityClick},Object(V.d)(m>=3?"#RemotePlay_ClientQualityBeautiful":m>=2?"#RemotePlay_ClientQualityBalanced":"#RemotePlay_ClientQualityFast"))),p&&P.createElement("div",{className:Wt.StreamPausedContainer},Object(V.d)("#RemotePlay_StreamPaused")),!t&&P.createElement(Yt,{currentAppID:c}),P.createElement("div",{className:Wt.GroupingBox},r&&P.createElement("div",{className:Wt.HorizontalContainer},P.createElement("div",{className:Wt.IconSpeaker,title:Object(V.d)("#RemotePlay_GameMasterVolume")}),P.createElement("div",{className:Wt.VolumeSlider},P.createElement(He.A,{min:0,max:100,value:i,onChange:this.OnGameVolumeChanged}))),!!a&&P.createElement("div",{className:Wt.MediumSpacer}),!!a&&P.createElement("div",{className:Wt.HorizontalContainer},P.createElement("div",{className:Object(Me.a)(Wt.SmallAvatarContainer,Wt.HorizontalContainer,"OneOnOneVoiceMembers")},P.createElement(ge.c,{friend:l.f.FriendStore.self,key:l.f.FriendStore.self.accountid,showVoiceLevel:!0,avatarSize:"Medium",noActions:!0,notDraggable:!0,bHideStatusInfo:!0,context:void 0})),P.createElement("div",{className:Wt.MicSettingsContainer},P.createElement("div",{className:"friendListButton friendSettingsButton no-drag",onClick:this.OnSettingsClick,title:Object(V.d)("#Tooltip_VoiceSettings")},P.createElement(Q.ab,null))),P.createElement("div",{className:Wt.VolumeSlider},P.createElement(He.A,{min:0,max:100,value:s,onChange:this.OnInputGainChanged}))),t&&P.createElement(Zt,{player:u,accountid:l.f.FriendStore.self.accountid,isHost:t}),t&&!1)),P.createElement("div",{className:Wt.Spacer}),P.createElement("div",{className:Wt.PlayerSectionTitle},Object(V.d)("#RemotePlay_Players")))),P.createElement(Xt,{isHost:t,streamHost:this.props.streamHost,showStreamPausedBanner:p,browserContext:this.props.browserContext}),P.createElement(He.j,null)))},Object(o.c)([i.a],t.prototype,"OnChangePauseOnDesktop",null),Object(o.c)([i.a],t.prototype,"OnGameVolumeChanged",null),Object(o.c)([i.a],t.prototype,"OnInputGainChanged",null),Object(o.c)([i.a],t.prototype,"OnClientStreamingQualityClick",null),Object(o.c)([i.a],t.prototype,"OnSettingsClick",null),t=Object(o.c)([te.a],t)}(P.Component),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.OnGameImageClick=function(e){var t=Object(We.a)(this.props.currentAppID,"remoteplay");Object(be.e)(e,t)},t.prototype.render=function(){var e=l.f.AppInfoStore.GetAppInfo(this.props.currentAppID);return P.createElement("div",{className:Wt.ActiveGameButton,onClick:this.OnGameImageClick,title:Object(V.d)(e.name)},P.createElement("img",{src:e.header_image_url,className:Wt.ProductImage}))},Object(o.c)([i.a],t.prototype,"OnGameImageClick",null),t=Object(o.c)([te.a],t)}(P.Component),Xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dragOver:!1},t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.CanBeInvited=function(e){if(l.f.FriendStore.self===e)return!1;for(var t=0;t<l.f.RemotePlayStore.player_props_count;t++){var n=l.f.RemotePlayStore.GetPlayerPropsByIndex(t);if(n.bSession&&n.friend===e)return!1}return!0},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.OnDragEnter=function(e){Object(I.a)(e&&"friend"==e.type,"Invalid data type passed to ToggleInputButton.OnDragEnter",e.type);var t=e.friend;return this.CanBeInvited(t)&&this.setState({dragOver:!0}),!0},t.prototype.OnDragLeave=function(){this.setState({dragOver:!1})},t.prototype.OnDrop=function(e,t){Object(I.a)(e&&"friend"==e.type,"Invalid data type passed to ToggleInputButton.OnDrop",e.type);var n=e.friend;this.CanBeInvited(n)&&(l.f.RemotePlayStore.CreateInviteAndSession(n.accountid,l.f.FriendStore.self.persona.m_gameid,this.props.browserContext),Rn.DragDropManager.SetDropConsumed()),this.setState({dragOver:!1})},t.prototype.render=function(){var e=Object(Me.a)(Wt.InvitedPlayersBody);return this.state.dragOver&&(e+=" "+Wt.dragOver),P.createElement(Ut.a,Object(o.a)({className:e},this.GetDragDropProps()),P.createElement(Qt,{isHost:this.props.isHost,streamHost:this.props.streamHost,showStreamPausedBanner:this.props.showStreamPausedBanner,browserContext:this.props.browserContext}))},Object(o.c)([i.a],t.prototype,"OnDragEnter",null),Object(o.c)([i.a],t.prototype,"OnDragLeave",null),Object(o.c)([i.a],t.prototype,"OnDrop",null),t=Object(o.c)([te.a],t)}(P.Component),Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.render=function(){var e=[],t=!0;this.props.isHost||(e.push(P.createElement(Jt,{key:"player_host",accountid:this.props.streamHost.accountid,isHost:this.props.isHost,isHostPlayer:!0})),t=!1);for(var n=0;n<1;n++)for(var o=0;o<l.f.RemotePlayStore.player_props_count;o++){var r=l.f.RemotePlayStore.GetPlayerPropsByIndex(o);r.bSession&&(t||e.push(P.createElement("div",{key:"spacer_"+n+"_"+o,className:Wt.Spacer})),e.push(P.createElement(Jt,{key:"player_client_"+o+"_"+n,accountid:r.friend.accountid,isHost:this.props.isHost})),t=!1)}var i=Object(Me.a)(Wt.HeightLimited);return this.props.showStreamPausedBanner&&(i+=" "+Wt.HeightLimitedPaused),P.createElement("div",{className:i},e)},t=Object(o.c)([te.a],t)}(P.Component),Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.render=function(){var e=l.f.RemotePlayStore.GetPlayerProps(this.props.accountid);void 0===e&&(e={friend:l.f.FriendStore.GetPlayer(this.props.accountid),gameID:"0",bSession:!0,bJoined:!0,bKeyboardEnabled:!0,bMouseEnabled:!0,bControllerEnabled:!0,nKeyboardUsedTime:0,nMouseUsedTime:0,nControllerUsedTime:0});var t=e.friend;return P.createElement(He.c,{className:"NoBottomMargin"},P.createElement("div",{className:Wt.GroupingBox},P.createElement("div",{className:Wt.SmallSpacer}),this.props.isHost&&P.createElement("div",{className:Wt.KickPlayerContainer},P.createElement("div",{className:Object(Me.a)(Wt.TextButton,Wt.FitContent,Wt.AlignRight),onClick:function(){return l.f.RemotePlayStore.CancelInviteAndSession(t.accountid)}},Object(V.d)(e.bJoined?"#RemotePlay_Kick":"#RemotePlay_CancelInvite"))),!this.props.isHost&&P.createElement("div",{className:Wt.NegativeSpacer}),P.createElement($t,{player:t,joined:e.bJoined,isHost:this.props.isHost,isHostPlayer:this.props.isHostPlayer}),this.props.isHost&&P.createElement("div",{className:Wt.SharedInputContainer},P.createElement("div",{className:Wt.HorizontalContainer},P.createElement(en,{inputType:m.j.k_EClientUsedInputTypeKeyboard,enabled:e.bKeyboardEnabled,usedTime:e.nKeyboardUsedTime,accountID:e.friend.accountid,isHost:this.props.isHost}),P.createElement(en,{inputType:m.j.k_EClientUsedInputTypeMouse,enabled:e.bMouseEnabled,usedTime:e.nMouseUsedTime,accountID:e.friend.accountid,isHost:this.props.isHost}),P.createElement(Zt,{player:e,accountid:this.props.accountid,isHost:this.props.isHost}))),!this.props.isHost&&P.createElement("div",{className:Wt.SharedInputContainer},P.createElement("div",{className:Wt.HorizontalContainer},P.createElement(Zt,{player:e,accountid:this.props.accountid,isHost:this.props.isHost})))))},t=Object(o.c)([te.a],t)}(P.Component),Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){for(var e=[],t=2,n=2;n<4;n++){-1!==(a=l.f.RemotePlayStore.GetPlayerInControllerSlot(n))&&(t=n+1)}var o=!1;for(n=4;n<20;n++){if(-1!==(a=l.f.RemotePlayStore.GetPlayerInControllerSlot(n))){o=!0;break}}var r=!0;for(n=0;n<t||o&&r&&n<t+1&&n<4;n++){-1===(a=l.f.RemotePlayStore.GetPlayerInControllerSlot(n))&&(r=!1),a===this.props.accountid?e.push(P.createElement(en,{key:n,inputType:m.j.k_EClientUsedInputTypeController,enabled:this.props.player.bControllerEnabled,usedTime:this.props.player.nControllerUsedTime,accountID:this.props.player.friend.accountid,owningAccountID:a,isHost:this.props.isHost,controllerID:n})):e.push(P.createElement(en,{key:n,inputType:m.j.k_EClientUsedInputTypeController,enabled:!0,usedTime:0,accountID:this.props.player.friend.accountid,owningAccountID:a,isHost:this.props.isHost,controllerID:n,dropSlot:!0}))}var i=0;for(n=4;n<20&&i<2;n++){var a;(a=l.f.RemotePlayStore.GetPlayerInControllerSlot(n))===this.props.accountid&&(e.push(P.createElement(en,{key:n,inputType:m.j.k_EClientUsedInputTypeController,enabled:this.props.player.bControllerEnabled,usedTime:this.props.player.nControllerUsedTime,accountID:this.props.player.friend.accountid,owningAccountID:a,isHost:this.props.isHost,controllerID:n})),i++)}var s=Wt.BasicHorizontalContainer;return this.props.isHost&&this.props.accountid!==l.f.FriendStore.self.accountid||(s+=" "+Wt.HostControllers),P.createElement("div",{className:Object(Me.a)(s)},e)},t=Object(o.c)([te.a],t)}(P.Component),$t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_schInputUsedReset=new T.b,t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.OnMicVolumeChanged=function(e,t){l.f.VoiceStore.SetPerUserGainLevel(t,l.f.VoiceStore.ConvertSliderToGainValue(e,xt.a.k_MaxPerUserGainMultiplier))},t.prototype.OnMutingToggleClick=function(e){l.f.VoiceStore.SetPerUserMuting(e,!l.f.VoiceStore.GetPerUserMuting(e))},t.prototype.OnMutingClick=function(e,t){l.f.VoiceStore.SetPerUserMuting(t,e)},t.prototype.render=function(){var e=this,t=l.f.VoiceStore.ConvertGainValueToSliderValue(l.f.VoiceStore.GetPerUserGainLevel(this.props.player.accountid),xt.a.k_MaxPerUserGainMultiplier),n=l.f.VoiceStore.GetPerUserMuting(this.props.player.accountid),o=this.props.isHostPlayer||this.props.joined||!1,r=Object(Me.a)(Wt.HorizontalContainer,Wt.playerVoiceContainer);return this.props.isHost||(r+=" "+Wt.streamingClientVoiceContainer),P.createElement("div",{className:Object(Me.a)(Wt.HorizontalContainer,"OneOnOneVoiceMembers",Wt.AvatarContainer)},P.createElement(ge.c,{friend:this.props.player,key:this.props.player.accountid,showVoiceLevel:!0,avatarSize:"Large",context:void 0}),o&&P.createElement("div",{className:r},P.createElement(He.d,{className:Wt.BasicButton,onClick:function(){return e.OnMutingToggleClick(e.props.player.accountid)},title:Object(V.d)(n?"#VoiceChat_UnmuteSpeaker":"#VoiceChat_MuteSpeaker")},P.createElement("div",{className:Object(Me.a)(Wt.remotePlayIcon,Wt.IconSpeaker)}),n&&P.createElement("div",{className:Object(Me.a)(Wt.remotePlayIcon,Wt.Slashout)})),P.createElement("div",{className:Wt.ShortVolumeSlider},P.createElement(He.A,{min:0,max:100,value:t,onChange:function(t){return e.OnMicVolumeChanged(t,e.props.player.accountid)}}))),!o&&P.createElement("div",{className:Wt.InviteSentContainer},Object(V.d)("#RemotePlay_Invited")))},Object(o.c)([i.a],t.prototype,"OnMicVolumeChanged",null),Object(o.c)([i.a],t.prototype,"OnMutingToggleClick",null),Object(o.c)([i.a],t.prototype,"OnMutingClick",null),t=Object(o.c)([te.a],t)}(P.Component),en=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_schInputUsedReset=new T.b,t.state={dragOver:!1},t}return Object(o.d)(t,e),t.prototype.ToggleButton=function(){switch(this.props.inputType){case m.j.k_EClientUsedInputTypeKeyboard:this.props.isHost&&l.f.RemotePlayStore.SetPerUserKeyboardInputEnabled(this.props.accountID,!this.props.enabled);break;case m.j.k_EClientUsedInputTypeMouse:this.props.isHost&&l.f.RemotePlayStore.SetPerUserMouseInputEnabled(this.props.accountID,!this.props.enabled);break;case m.j.k_EClientUsedInputTypeController:this.props.isHost&&l.f.RemotePlayStore.SetPerUserControllerInputEnabled(this.props.accountID,!this.props.enabled),c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.IdentifyController")&&SteamClient.RemotePlay.IdentifyController(this.props.controllerID)}},t.prototype.GetDragDropProps=function(e){var t={rgAcceptedTypes:[]};return this.props.isHost&&this.props.inputType===m.j.k_EClientUsedInputTypeController&&(this.props.controllerID<4&&(t.fnDragEnter=this.OnDragEnter,t.fnDragLeave=this.OnDragLeave,t.fnDrop=this.OnDrop,t.rgAcceptedTypes=["rptcontroller"]),e&&(t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t.draggable=!0)),t},t.prototype.OnDragStart=function(e){Rn.DragDropManager.StartDrag({type:"rptcontroller",controllerID:this.props.controllerID}),c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.IdentifyController")&&SteamClient.RemotePlay.IdentifyController(this.props.controllerID)},t.prototype.OnDragEnd=function(e){Rn.DragDropManager.EndDrag()},t.prototype.OnDragEnter=function(e){return Object(I.a)(e&&"rptcontroller"==e.type,"Invalid data type passed to ToggleInputButton.OnDragEnter",e.type),e.controllerID!==this.props.controllerID&&(this.setState({dragOver:!0}),c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.IdentifyController")&&SteamClient.RemotePlay.IdentifyController(this.props.controllerID)),!0},t.prototype.OnDragLeave=function(){this.setState({dragOver:!1})},t.prototype.OnDragOver=function(e){},t.prototype.OnDrop=function(e,t){Object(I.a)(e&&"rptcontroller"==e.type,"Invalid data type passed to ToggleInputButton.OnDrop",e.type);var n=e;n.controllerID!==this.props.controllerID&&(c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.MoveControllerToSlot")&&SteamClient.RemotePlay.MoveControllerToSlot(n.controllerID,this.props.controllerID),c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.IdentifyController")&&(SteamClient.RemotePlay.IdentifyController(n.controllerID),SteamClient.RemotePlay.IdentifyController(this.props.controllerID)),Rn.DragDropManager.SetDropConsumed()),this.setState({dragOver:!1})},t.prototype.render=function(){var e=this,t=performance.now(),n=Wt.remotePlayIconHolder,r=Wt.ControllerNumber,i=Wt.remotePlayIcon,a="";switch(this.props.inputType){case m.j.k_EClientUsedInputTypeKeyboard:i+=" "+Wt.IconKeyboard,a=this.props.enabled?"#Tooltip_RemotePlayDisableKeyboard":"#Tooltip_RemotePlayEnableKeyboard";break;case m.j.k_EClientUsedInputTypeMouse:i+=" "+Wt.IconMouse,a=this.props.enabled?"#Tooltip_RemotePlayDisableMouse":"#Tooltip_RemotePlayEnableMouse";break;case m.j.k_EClientUsedInputTypeController:i+=" "+Wt.IconController,a=this.props.enabled?"#Tooltip_RemotePlayDisableController":"#Tooltip_RemotePlayEnableController"}!0===this.props.dropSlot&&(i+=" "+Wt.dropSlot),this.state.dragOver&&(i+=" "+Wt.dragOver,r+=" "+Wt.dragOver),t-this.props.usedTime<800&&(i+=" "+Wt.wiggleIcon,this.m_schInputUsedReset.Cancel(),this.m_schInputUsedReset.Schedule(900,(function(){e.forceUpdate()})));var s=-1,c=0;switch(this.props.controllerID>=0&&(this.props.owningAccountID<=0?(c=0,a=""):(c=(s=l.f.RemotePlayStore.GetPlayerPropsIndexOf(this.props.owningAccountID)+1)%16+1,i+=" "+Wt.Filled,r+=" "+Wt.Filled,!0!==this.props.dropSlot&&this.props.isHost?0===s&&(a=""):a="#Tooltip_RemotePlayOtherController")),c){case 0:r+=" "+Wt.ColorNumber0;break;case 1:r+=" "+Wt.ColorNumber1;break;case 2:r+=" "+Wt.ColorNumber2;break;case 3:r+=" "+Wt.ColorNumber3;break;case 4:r+=" "+Wt.ColorNumber4;break;case 5:r+=" "+Wt.ColorNumber5;break;case 6:r+=" "+Wt.ColorNumber6;break;case 7:r+=" "+Wt.ColorNumber7;break;case 8:r+=" "+Wt.ColorNumber8;break;case 9:r+=" "+Wt.ColorNumber9;break;case 10:r+=" "+Wt.ColorNumber10;break;case 11:r+=" "+Wt.ColorNumber11;break;case 12:r+=" "+Wt.ColorNumber12;break;case 13:r+=" "+Wt.ColorNumber13;break;case 14:r+=" "+Wt.ColorNumber14;break;case 15:r+=" "+Wt.ColorNumber15;break;case 16:r+=" "+Wt.ColorNumber16}var u=l.f.FriendStore.GetPlayer(this.props.owningAccountID);return!0===this.props.dropSlot?P.createElement(Ut.a,Object(o.a)({className:Wt.BasicButton},this.GetDragDropProps(!1),{title:Object(V.d)(a,u.has_nickname?u.nickname:u.primary_display_name)}),void 0!==this.props.controllerID&&P.createElement("div",{className:n},P.createElement("div",{className:Object(Me.a)(i,"RemotePlay_DropSlot")}),P.createElement("div",{className:Object(Me.a)(r,"RemotePlay_ControllerNumber")},this.props.controllerID+1)),void 0===this.props.controllerID&&P.createElement("div",{className:i})):P.createElement(Ut.a,Object(o.a)({},this.GetDragDropProps(!0)),P.createElement(He.d,{className:Wt.BasicButton,onClick:function(){return e.ToggleButton()},title:Object(V.d)(a,u.has_nickname?u.nickname:u.primary_display_name)},void 0!==this.props.controllerID&&P.createElement("div",{className:n},P.createElement("div",{className:i}),P.createElement("div",{className:Object(Me.a)(r,"RemotePlay_ControllerNumber")},this.props.controllerID+1)),void 0===this.props.controllerID&&P.createElement("div",{className:i}),!this.props.enabled&&P.createElement("div",{className:Object(Me.a)(Wt.remotePlayIcon,Wt.Slashout)})))},Object(o.c)([i.a],t.prototype,"ToggleButton",null),Object(o.c)([i.a],t.prototype,"OnDragStart",null),Object(o.c)([i.a],t.prototype,"OnDragEnd",null),Object(o.c)([i.a],t.prototype,"OnDragEnter",null),Object(o.c)([i.a],t.prototype,"OnDragLeave",null),Object(o.c)([i.a],t.prototype,"OnDragOver",null),Object(o.c)([i.a],t.prototype,"OnDrop",null),t}(P.Component),tn=n("FkUk"),nn=n("yoQ3"),on=function(){function e(){}return e.prototype.GetObject=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.GetString(e)];case 1:return[2,(t=n.sent())?JSON.parse(t):null];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))},e.prototype.StoreObject=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return[2,this.StoreString(e,JSON.stringify(t))]}))}))},e}(),rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetString=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,SteamClient.Storage.GetString(e).then((function(t){if(t)return t;var n=localStorage.getItem(e);return n&&SteamClient.Storage.SetString(e,n),n}))];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))},t.prototype.StoreString=function(e,t){return SteamClient.Storage.SetString(e,t),Promise.resolve()},t.prototype.RemoveObject=function(e){return SteamClient.Storage.DeleteKey(e),Promise.resolve()},t}(on),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetString=function(e){return Promise.resolve(localStorage.getItem(e))},t.prototype.StoreString=function(e,t){return localStorage.setItem(e,t),Promise.resolve()},t.prototype.RemoveObject=function(e){return localStorage.removeItem(e),Promise.resolve()},t}(on),sn=n("8o0Y"),cn=n("nD25"),ln=n("vJVb"),un=[],pn=function(e,t){return un.push({error:e,cCallsitesToIgnore:t})},mn=console.assert;console.assert=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e||pn(new Error(fn.apply(void 0,Object(o.g)([t],n))),2),mn.apply(console,Object(o.g)([e,t],n))};var dn=console.error;console.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];pn(new Error(fn.apply(void 0,Object(o.g)([e],t))),1),dn.apply(console,Object(o.g)([e],t))},window.addEventListener("error",(function(e){pn(e.error,0)})),qt=window.setTimeout((function(){un=[],pn=function(){}}),3e4);var hn=function(){function e(e){var t=this;void 0===e&&(e=!0),this.m_transport=null,this.m_rgErrorQueue=[],this.m_bEnabled=!0,this.m_bInitialized=!1,e?(un.forEach((function(e){var n=e.error,o=e.cCallsitesToIgnore;return t.ReportError(n,o)})),pn=function(e,n){return t.ReportError(e,n)}):pn=function(){},un=[],clearTimeout(qt),window.setTimeout((function(){t.m_bInitialized||(t.m_bEnabled=!1,t.m_rgErrorQueue=[])}),3e4)}return e.prototype.Init=function(e,t,n){this.m_bInitialized=!0,this.m_strProduct=e,this.m_strVersion=t,this.m_transport=n,this.m_bEnabled||(console.error("Error reporting was initialized after being disabled, possibly dropping errors."),this.m_bEnabled=!0),this.m_rgErrorQueue.length&&(this.SendErrorReports(this.m_rgErrorQueue),this.m_rgErrorQueue=[])},e.prototype.ReportError=function(e,t){return void 0===t&&(t=0),Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.m_bEnabled?[4,vn(e,t)]:[2,null];case 1:return(n=o.sent())?(this.SendErrorReport(n),[2,n]):[2,null];case 2:return r=o.sent(),console.log("Failed to report error: "+r),[2,null];case 3:return[2]}}))}))},e.prototype.SendErrorReport=function(e){this.m_transport?this.SendErrorReports([e]):this.m_rgErrorQueue.push(e)},e.prototype.SendErrorReports=function(e){if(e&&e.length){var t=k.b.Init(cn.a),n=e.reduce((function(e,t){return e[t.identifier]?e[t.identifier].count++:e[t.identifier]={report:t,count:1},e}),{}),o=Object.keys(n).map((function(e){var t=n[e],o=t.report,r=t.count,i=new cn.b;return i.set_count(r),i.set_identifier(o.identifier+" "+o.identifierHash),i.set_message(JSON.stringify(o.message)),i}));t.Body().set_product(this.m_strProduct),t.Body().set_version(this.m_strVersion),t.Body().set_errors(o),cn.c.ReportClientError(this.m_transport,t)}},Object.defineProperty(e.prototype,"version",{get:function(){return this.m_strVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"product",{get:function(){return this.m_strProduct},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reporting_enabled",{get:function(){return!0},enumerable:!1,configurable:!0}),e}();function fn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if("string"==typeof e&&0===t.length)return e;var r=Object(o.g)([e],t);return r.map((function(e){try{return String(e)}catch(e){return"[Stringify Error]"}})).join(", ")}var _n,gn=/^\s*at .*(\S+:\d+|\(native\))/m,bn=/(^|@)\S+:\d+/;function vn(e,t){void 0===t&&(t=0);try{return e.stack&&e.stack.match(gn)?function(e,t){void 0===t&&(t=0);return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=e.stack.split("\n"),r=n.filter((function(e){return!!e.match(gn)})),c=r[t],i=function(e){var t=e.indexOf("https://");if(-1===t)return e;var n=e.indexOf("/",t+"https://".length);return-1===n?e:e.slice(0,t)+e.slice(n)}(function(e){var t=e.lastIndexOf("?");if(-1===t)return e;var n=e.indexOf(":",t);return-1===n?e:e.slice(0,t)+e.slice(n)}(c)),a=n.map((function(e){var t=e.match(/(.*)\((.*):(\d+):(\d+)\)/);if(!t)return e;if(5===t.length){t[0];var n=t[1],o=t[2],r=t[3],i=t[4],a=parseInt(r),s=parseInt(i);if(!isNaN(a)&&!isNaN(s))return[n,o,a,s]}return e})).filter((function(e){return!!e})),s={identifier:i},[4,Sn(i)];case 1:return[2,(s.identifierHash=o.sent(),s.message=a,s)]}var c}))}))}(e,t):e.stack&&e.stack.match(bn)?function(e,t){void 0===t&&(t=0);return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return[2,null]}))}))}(0,t):null}catch(e){return console.warn("Failed to normalize error stack: "+e),null}}var yn=function(e){_n=e,ln.a.InstallErrorReportingStore(_n)};function Sn(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.digest("SHA-256",Cn(e))];case 1:return t=n.sent(),o=t,[2,Array.prototype.map.call(new Uint8Array(o),(function(e){return("00"+e.toString(16)).slice(-2)})).join("").slice(0,16)];case 2:return n.sent(),[2,""];case 3:return[2]}var o}))}))}function Cn(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),o=0,r=e.length;o<r;o++)n[o]=e.charCodeAt(o);return t}var On=n("kQil"),In=function(e){function t(t,n,o){var r=e.call(this,"",{title:"",bIgnoreSavedDimensions:!0,dimensions:{width:1,height:1,left:t,top:n},eCreationFlags:D.c.Tooltip})||this;return r.m_fnOnRender=o,r}return Object(o.d)(t,e),t.prototype.OnClose=function(){},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.Render=function(e,t){this.m_fnOnRender(e,t)},t}(D.a),En=function(e){function t(t){var n=e.call(this)||this;return n.m_window=t,n}return Object(o.d)(t,e),t.prototype.BringToFront=function(){null!=this.m_window.SteamClient&&null!=this.m_window.SteamClient.Window&&null!=this.m_window.SteamClient.Window.BringToFront?this.m_window.SteamClient.Window.BringToFront():this.m_window.focus()},t.prototype.FlashWindow=function(e){null!=this.m_window.SteamClient&&null!=this.m_window.SteamClient.Window&&(e&&null!=this.m_window.SteamClient.Window.FlashWindow?this.m_window.SteamClient.Window.FlashWindow():null!=this.m_window.SteamClient.Window.StopFlashWindow&&this.m_window.SteamClient.Window.StopFlashWindow())},t.prototype.Close=function(){this.m_window&&this.m_window.close()},Object.defineProperty(t.prototype,"title",{get:function(){return this.m_window.document.title},set:function(e){this.m_window.document.title=e},enumerable:!1,configurable:!0}),t.prototype.BIsClosed=function(){return this.m_window.closed},t.prototype.BIsVisible=function(){return"visible"==this.m_window.document.visibilityState},t.prototype.BIsFocused=function(){return this.m_window.document.hasFocus()},t.prototype.IsMinimized=function(){var e=this;return null!=this.m_window.SteamClient&&null!=this.m_window.SteamClient.Window&&null!=this.m_window.SteamClient.Window.IsWindowMinimized?new Promise((function(t,n){e.m_window.SteamClient.Window.IsWindowMinimized((function(e){t(e)}))})):Promise.resolve(!1)},t.prototype.OnFocus=function(e){var t=this,n=function(){e()};return this.m_window.addEventListener("focus",n),{unregister:function(){t.m_window.removeEventListener("focus",n)}}},t.prototype.GetWindow=function(){return this.m_window},t}(l.c),wn=function(e){function t(t){var n=e.call(this)||this;return n.m_popup=t,n}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"container",{get:function(){return!this.m_container&&this.m_popup.window&&(this.m_container=new En(this.m_popup.window)),this.m_container},enumerable:!1,configurable:!0}),t.prototype.Show=function(e){l.f.ParentalStore.BIsFriendsBlocked()?console.log("Blocked popup due to parental controls"):this.m_popup.Show(e)},t.prototype.Close=function(){this.m_popup.Close()},t.prototype.GetWindowRestoreDetails=function(){return this.m_popup.GetWindowRestoreDetails()},t.prototype.IsMinimized=function(){return this.m_popup.IsMinimized()},t.prototype.GetBrowserContext=function(){return this.m_popup.browser_info},t.prototype.GetWindow=function(){return this.m_popup.window},t}(l.e),Mn={nChatRoomListHeightPx:224,bChatRoomListCollapsed:!1,bDontShowVoiceAlert:!1,nFriendsListSingleWindowWidthPx:300,bFavoritesHintDismissed:!1,nChangeLogDismissed:0},Dn=function(){function e(e,t){var n=this;this.m_FriendHoverStore=new N.c,this.m_DragDropManager=new j,this.m_OverlayStore=new B,this.m_UsabilityMetricsStore=new A(this.FillInChatUsabilityMetrics.bind(this)),this.m_mapFriendsListPopups=new Map,this.m_UIDisplayPrefs=Mn,this.m_bUpdatedBuildAvailable=!1,this.m_nSecondsOutOfDate=0,this.m_strLoaderWindowRestoreDetails=void 0,this.m_bShowFriendsListOnLoadFromLoader=void 0,this.m_FriendsUIApp=e,this.m_bEmbeddedApp=t,this.IsEmbeddedApp()||("undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.RegisterForFriendPostMessage?(SteamClient.WebChat.RegisterForFriendPostMessage(this.HandlePostMessage),window.addEventListener("message",this.HandleWebLoaderPostMessage)):(Object(I.a)(!c.a.IN_CLIENT,"Config.IN_CLIENT set but SteamClient globals not available"),window.addEventListener("message",this.HandlePostMessage)),Object(Vt.a)("Messaging.RegisterForMessages")&&(SteamClient.Messaging.RegisterForMessages("LibraryCommands",this.HandleLibraryCommandMessage),SteamClient.Messaging.RegisterForMessages("ContextMenus",this.HandleContextMenuMessage),SteamClient.Messaging.RegisterForMessages("PersonaState",this.HandlePersonaStateMessage)),this.InstrumentWindow(window,C.a),D.d.AddPopupCreatedCallback((function(e){n.InstrumentWindow(e.window,e.browser_info||C.a)})))}return e.prototype.IsEmbeddedApp=function(){return this.m_bEmbeddedApp},e.prototype.OverlayStore=function(){return this.m_OverlayStore},e.prototype.BNeedsUpdate=function(){return this.m_bUpdatedBuildAvailable},e.prototype.GetSecondsOutOfDate=function(){return this.m_nSecondsOutOfDate},e.prototype.InstrumentWindow=function(e,t){e.__FriendsUIBrowserContext=t,this.m_FriendsUIApp.IdleTracker.AddTrackedWindow(e)},e.prototype.HandlePostMessage=function(e){var t=e.data;if(t&&t.command){var n=this.m_FriendsUIApp.GetDefaultBrowserContext();void 0!==e.data.pid&&(n={m_unPID:e.data.pid,m_nBrowserID:e.data.browserid}),this.ExecuteCommand(n,e.data)}},e.prototype.HandleLibraryCommandMessage=function(e,t,n){var o=this.m_FriendsUIApp.GetDefaultBrowserContext(),r=JSON.parse(n);r.command=t,this.ExecuteCommand(o,r)},e.prototype.OnCloseFakeContextMenu=function(e){SteamClient.Messaging.PostMessage("ContextMenus","OnFriendContextMenuClosed",""),this.m_LibraryFriendContextMenu=void 0},e.prototype.HandleContextMenuMessage=function(e,t,n){var o=this;if("ShowFriendContextMenu"==t){var r=JSON.parse(n),i=new ke.a(r.steamid);if(i.GetAccountID()==this.m_FriendsUIApp.FriendStore.self.steamid.GetAccountID())return void this.OnCloseFakeContextMenu(r.steamid);var a=new In(r.x,r.y,(function(e,t){var n=l.f.FriendStore.GetFriend(i.GetAccountID());n?(o.m_LibraryFriendContextMenu=Object(sn.b)(Object(tn.e)(o.m_FriendsUIApp.GetDefaultBrowserContext(),{chatContext:"friendslist"},n,e),t,r.x,r.y),o.m_LibraryFriendContextMenu.SetOnHideCallback((function(){o.OnCloseFakeContextMenu(r.steamid),a.Close()})),SteamClient.Messaging.PostMessage("ContextMenus","OnFriendContextMenuShown","")):o.OnCloseFakeContextMenu(r.steamid)}));a.Show()}else"CloseFriendContextMenu"==t&&this.m_LibraryFriendContextMenu&&this.m_LibraryFriendContextMenu.Hide()},e.prototype.SendPersonaUpdateToLibrary=function(e){Object(Vt.a)("Messaging.PostMessage")&&SteamClient.Messaging.PostMessage("PersonaState","PersonaUpdate",JSON.stringify(e))},e.prototype.HandlePersonaStateMessage=function(e,t,n){"RequestPersonaState"==t&&this.SendPersonaUpdateToLibrary(l.f.FriendStore.self.persona.m_ePersonaState)},e.prototype.PerformFriendsUIUpdate=function(){var e=this.m_FriendsUIApp.UIStore.SerializePopupStateToObject(!0);window.parent.postMessage({message:"ChatReloadRequest",state:e},"https://steamloopback.host")},e.prototype.HandleWebLoaderPostMessage=function(e){null!=e.data.message&&("UpdatedBuildAvailable"==e.data.message?(console.log("There is an updated friendsui build available, we are "+(e.data.bVeryOutOfDate?"":"NOT ")+"very out of date. We are "+(e.data.bForce?"":"NOT ")+"forcing an update."),this.m_bUpdatedBuildAvailable=!0,void 0!==e.data.nSecondsOutOfDate&&(this.m_nSecondsOutOfDate=e.data.nSecondsOutOfDate),(this.m_FriendsUIApp.IdleTracker.GetUserIdleTime()>7200||void 0!==e.data.bForce&&1==e.data.bForce)&&this.PerformFriendsUIUpdate()):"ReloadSerializedChatState"==e.data.message&&void 0!==e.data.state?(console.log("Asked by loader to reload serialized chat state"),this.m_FriendsUIApp.UIStore.SetStateToRestoreFrom(e.data.state)):"LoaderWindowRestoreDetails"==e.data.message?(this.m_bShowFriendsListOnLoadFromLoader=e.data.bVisible,this.m_strLoaderWindowRestoreDetails=e.data.data):"SetPersonaState"==e.data.message&&this.SetUserPersonaStateWhenReady(e.data.persona_state))},e.prototype.SetUserPersonaStateWhenReady=function(e){this.m_FriendsUIApp.FriendStore.SetUserPersonaState(e)},e.prototype.ExecuteCommand=function(e,t){switch(t.command){case"CheckForUpdates":window.parent.postMessage({message:"CheckForAndForceUpdate"},"https://steamloopback.host");break;case"ShowPopupFriendsList":this.ShowPopupFriendsList(e,!1,!0,"1"===t.force_to_foreground);break;case"ShowFriendChatDialog":var n=new ke.a(t.steamid),o=0!=t.btakefocus;n.BIsValid()?n.BIsIndividualAccount()?this.m_FriendsUIApp.UIStore.ShowFriendChatDialogWhenReady(e,n.GetAccountID(),!0,o):n.BIsClanAccount()&&this.m_FriendsUIApp.FriendStore.ClanStore.JoinClanChatRoom(e,n):this.ShowChatUnreadMessages(e);break;case"CloseChatDialog":if((n=new ke.a(t.steamid)).BIsIndividualAccount()){var r=this.m_FriendsUIApp.ChatStore.GetFriendChat(n.GetAccountID(),!1);r&&this.m_FriendsUIApp.UIStore.CloseTabByID(r.unique_id)}else if(n.BIsClanAccount()){var i=this.m_FriendsUIApp.FriendStore.ClanStore.GetClan(n);if(i&&i.GetChatGroupIDIfLoaded())(a=this.m_FriendsUIApp.ChatStore.GetChatRoomGroup(i.GetChatGroupIDIfLoaded()))&&this.m_FriendsUIApp.UIStore.CloseTabByID(a.unique_id)}break;case"ShowChatRoomGroupDialog":var a,s=t.chat_group_id,c=t.chat_room_id;if((a=this.m_FriendsUIApp.ChatStore.GetChatRoomGroup(s))&&a.BIsCurrentUserAMember()&&!c)this.m_FriendsUIApp.UIStore.ShowAndOrActivateChatRoomGroupWhenReady(e,a,!0);else{var l=this.m_FriendsUIApp.ChatStore.InviteStore.GetDirectInviteInfo(s,c,this.m_FriendsUIApp.FriendStore.self.accountid);me({invite:l,inviter:null},e,window)}break;case"ShowChatRoomGroupInvite":if(this.m_FriendsUIApp.ready_to_render){var u=t.invite_code;l=this.m_FriendsUIApp.ChatStore.InviteStore.GetInviteFromCode(u);me({invite:l,inviter:null},e,window)}break;case"SetPersonaState":this.m_FriendsUIApp.FriendStore.SetUserPersonaState(t.persona_state);break;case"ShowWatchBroadcast":var p=new ke.a(t.steamid);this.m_FriendsUIApp.UIStore.ShowOrActivateBroadcast(e,p.GetAccountID(),!0).ShowWatchPromptDialog()}},e.prototype.Init=function(e,t,n){var o=this,i=[],a=this.m_FriendsUIApp.SettingsStore.GetObjectFromLocalStorageWhenReady("UIDisplayPrefs",Mn).then((function(e){Object(r.F)((function(){o.m_UIDisplayPrefs=e}))}));if(i.push(a),e.RunWhenLoggedOn((function(){D.d.SetCurrentLoggedInAccountID(e.steamid.GetAccountID()),(_n||yn(new hn),_n).Init("Chat",CLSTAMP,e.GetServiceTransport())})),this.m_WebLogonManager=n,sn.c.GetBrowserInfoForPopup=M,t&&this.m_OverlayStore.Init(e),window.addEventListener("dragover",(function(e){(e||event).preventDefault()}),!1),window.addEventListener("dragenter",(function(e){(e||event).preventDefault()}),!1),window.addEventListener("drop",(function(e){(e||event).preventDefault()}),!1),c.a.IN_CLIENT&&void 0!==SteamClient.FriendSettings.GetEnabledFeatures){var s=SteamClient.FriendSettings.GetEnabledFeatures().then((function(e){for(var t=!1,n=0,i=e;n<i.length;n++){var a=i[n];if("LoaderWindowSynchronization"==a.feature){t=a.bEnabled;break}}return t?Object(r.J)((function(){return void 0!==o.m_strLoaderWindowRestoreDetails})):Promise.resolve()}));i.push(s)}return i},Object.defineProperty(e.prototype,"FriendHoverStore",{get:function(){return this.m_FriendHoverStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"WebLogonManager",{get:function(){return this.m_WebLogonManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DragDropManager",{get:function(){return this.m_DragDropManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UIDisplayPrefs",{get:function(){return this.m_UIDisplayPrefs},enumerable:!1,configurable:!0}),e.prototype.SetUIDisplayPref=function(e,t){var n=this;this.m_UIDisplayPrefs[e]!=t&&(this.m_UIDisplayPrefs[e]=t,this.m_iTimeoutSaveUIDisplayPrefs&&window.clearTimeout(this.m_iTimeoutSaveUIDisplayPrefs),this.m_iTimeoutSaveUIDisplayPrefs=window.setTimeout((function(){n.m_FriendsUIApp&&n.m_FriendsUIApp.SettingsStore&&n.m_FriendsUIApp.SettingsStore.StoreObjectInLocalStorage("UIDisplayPrefs",n.m_UIDisplayPrefs),n.m_iTimeoutSaveUIDisplayPrefs=void 0}),1e3))},e.prototype.ShowPopupFriendsList=function(e,t,n,o,r){if(this.m_FriendsUIApp.ParentalStore.BIsFriendsBlocked())console.log("Blocked friends list popup due to parental controls");else{var i=this.m_mapFriendsListPopups.get(e.m_unPID);if(i)!t&&n&&i.Focus(o);else{i=new nn.b(this.m_FriendsUIApp.FriendStore,this.m_FriendsUIApp.ChatStore,e,t,r),this.m_mapFriendsListPopups.set(e.m_unPID,i),i.Show(!t&&n,o);var a=new wn(i),s=this.m_FriendsUIApp.UIStore.GetPerContextChatData(e);s.SetFriendsListWindow(a.container),this.m_FriendsUIApp.UIStore.SerializePopupState(),Object(On.e)(a.GetWindow()).SetUsePopups(s.BUsePopups())}}},e.prototype.OnFriendsListClosed=function(e){this.m_mapFriendsListPopups.delete(e.m_unPID),this.m_FriendsUIApp.UIStore.GetPerContextChatData(e).SetFriendsListWindow(void 0),this.m_FriendsUIApp.UIStore.SerializePopupState()},e.prototype.ToggleSingleWindowMode=function(e){if(l.f.SettingsStore.BSingleWindowModeEnabled()!=e){l.f.SettingsStore.SetSingleWindowMode(e);for(var t=0,n=this.m_FriendsUIApp.UIStore.GetAllBrowserContexts();t<n.length;t++){var o=n[t];this.ToggleSingleWindowModeForContext(e,o)}}},e.prototype.ToggleSingleWindowModeForContext=function(e,t){var n,o=this.m_FriendsUIApp.UIStore.GetPerContextChatData(t);if(o.IsFriendsListSingleWindow()!=e&&(o.SetFriendsListSingleWindowMode(e),o.IsFriendsListSingleWindow()==e))if(e)this.m_FriendsUIApp.UIStore.ConvertDefaultTabSetToEmbedded(t),this.m_FriendsUIApp.UIStore.MergeTabSets(t),(n=o.friends_list_window)?n instanceof En&&((r=n.GetWindow()).SteamClient.Window.SetMinSize&&r.SteamClient.Window.SetMinSize(nn.f,nn.d),r.SteamClient.Window.ResizeTo(1280,r.innerHeight)):this.ShowPopupFriendsList(t,!1,!0,!0,{width:1280});else if(this.m_FriendsUIApp.UIStore.ConvertDefaultTabSetToPopup(t),n=o.friends_list_window){var r;if(n instanceof En)(r=n.GetWindow()).SteamClient.Window.SetMinSize&&r.SteamClient.Window.SetMinSize(nn.e,nn.d),r.SteamClient.Window.ResizeTo(Rn.UIDisplayPrefs.nFriendsListSingleWindowWidthPx,r.innerHeight)}else{var i=Rn.UIDisplayPrefs.nFriendsListSingleWindowWidthPx;this.ShowPopupFriendsList(t,!1,!0,!0,{width:i})}},e.prototype.FillInChatUsabilityMetrics=function(e){e.ui_state().set_friends_list_group_chats_height(this.UIDisplayPrefs.nChatRoomListHeightPx);var t=this.m_FriendsUIApp.UIStore.GetPerContextChatData(C.a),n=t.friends_list_window;n&&n instanceof En&&(e.ui_state().set_friends_list_width(n.GetWindow().outerWidth),e.ui_state().set_friends_list_height(n.GetWindow().outerHeight));for(var o=void 0,r=0,i=Array.from(t.popup_list);r<i.length;r++){var a=i[r];if(o=a,a.tab_set===t.default_tabset&&!t.IsFriendsListSingleWindow())break}o&&o.popup.GetWindow()&&(e.ui_state().set_friends_list_width(o.popup.GetWindow().outerWidth),e.ui_state().set_friends_list_height(o.popup.GetWindow().outerHeight))},e.prototype.ShowChatUnreadMessages=function(e){if(!this.m_FriendsUIApp.ParentalStore.BIsFriendsBlocked()){var t=this.m_FriendsUIApp.ChatStore.GetChatToActivateForOldestUnread(e);return t?(console.log("ShowChatUnreadMessages - showing chat "+t.unique_id),void this.m_FriendsUIApp.UIStore.ShowAndOrActivateChat(e,t,!0)):this.ShowPopupFriendsList(e,!1,!0)}console.log("Blocked friends list popup due to parental controls")},e.prototype.CreateRemotePlayDialogs=function(e,t,n){var o=l.f.RemotePlayStore.HasAnyContextWaitingForResults(),r=!1;this.m_mapFriendsListPopups.size>0&&this.m_mapFriendsListPopups.forEach((function(t,i){var a=w(t.window);(!o&&a!=C.a||o&&l.f.RemotePlayStore.HasContextWaitingForResults(a))&&(zt(a,e,t.window,n),r=!0)})),r||zt(C.a,e,t,n),l.f.RemotePlayStore.ClearContextsWaitingForResults()},Object(o.c)([r.B],e.prototype,"m_UIDisplayPrefs",void 0),Object(o.c)([r.B],e.prototype,"m_bUpdatedBuildAvailable",void 0),Object(o.c)([r.B],e.prototype,"m_nSecondsOutOfDate",void 0),Object(o.c)([r.B],e.prototype,"m_strLoaderWindowRestoreDetails",void 0),Object(o.c)([r.B],e.prototype,"m_bShowFriendsListOnLoadFromLoader",void 0),Object(o.c)([i.a],e.prototype,"HandlePostMessage",null),Object(o.c)([i.a],e.prototype,"HandleLibraryCommandMessage",null),Object(o.c)([i.a],e.prototype,"OnCloseFakeContextMenu",null),Object(o.c)([i.a],e.prototype,"HandleContextMenuMessage",null),Object(o.c)([i.a],e.prototype,"HandlePersonaStateMessage",null),Object(o.c)([i.a],e.prototype,"HandleWebLoaderPostMessage",null),Object(o.c)([l.g],e.prototype,"SetUserPersonaStateWhenReady",null),Object(o.c)([r.n],e.prototype,"UIDisplayPrefs",null),Object(o.c)([r.k],e.prototype,"SetUIDisplayPref",null),Object(o.c)([l.g],e.prototype,"ShowPopupFriendsList",null),Object(o.c)([l.g],e.prototype,"ShowChatUnreadMessages",null),e}(),Tn=function(e){function t(){var t=e.call(this,c.a.IN_CLIENT&&void 0!==SteamClient.Storage?new rn:new an)||this;return t.m_AudioPlaybackManager=new u,t.m_IdleTracker=c.a.IN_CLIENT?new _:new f,t.m_DesktopApp=Rn=new Dn(t,!1),t.m_ChatRoomBBCodeParser=new Ee.d(Object.assign(Ke(),{mention:kt}),Ee.c),t.m_FriendChatBBCodeParser=new Ee.d(Object.assign(Ke(),{invite:Ct,gameinvite:Ot,lobbyinvite:It,tradeoffer:Tt,broadcastinvite:Et,broadcastviewrequest:wt}),Ee.c),t.m_NotificationBBCodeParser=new Ee.e({gameinvite:U,lobbyinvite:H,invite:W,tradeoffer:z,spoiler:q,roomeffect:K,sticker:Y}),t.m_ChatRoomEffectSettings=ne.a,c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.RegisterForRemoteClientStarted")&&SteamClient.RemotePlay.RegisterForRemoteClientStarted((function(e){return t.RemoteClientStarted(e)})),c.a.IN_CLIENT&&Object(Vt.a)("RemotePlay.RegisterForRemoteClientLaunchResult")&&SteamClient.RemotePlay.RegisterForRemoteClientLaunchResult((function(e,n,o,r){return t.RemoteClientLaunchResult(e,n,o,r)})),Rn=t.m_DesktopApp,Object(I.a)(!c.a.IN_MOBILE,"DesktopApp initialized in mobile context"),t}return Object(o.d)(t,e),t.prototype.Init=function(t,n,o){var r=n?new b(this.m_FriendStore):new v(this.m_FriendStore),i=this.m_DesktopApp.Init(t,n,o);e.prototype.InitInternal.call(this,t,r,i)},t.prototype.OnReadyToRender=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,n,r,i,a,s,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,this.UIStore.RestorePopupState()];case 1:o.sent(),(e=D.d.GetRestoreDetails("PopupFriendsListDimensions"))&&window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:e},"https://steamloopback.host");try{(n=window.sessionStorage.getItem(t.k_pchStartupParamKey))&&(r=JSON.parse(n))&&r.command&&this.m_DesktopApp.ExecuteCommand(C.a,r.command),window.sessionStorage.removeItem(t.k_pchStartupParamKey)}catch(e){}if(window.opener)for(i=[c.a.COMMUNITY_BASE_URL,c.a.STORE_BASE_URL,c.a.CHAT_BASE_URL],a=0,s=i;a<s.length;a++)l=s[a],window.opener.postMessage("FriendsUIReady",l.replace(/\/$/,""));return[2]}}))}))},Object.defineProperty(t.prototype,"AudioPlaybackManager",{get:function(){return this.m_AudioPlaybackManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IdleTracker",{get:function(){return this.m_IdleTracker},enumerable:!1,configurable:!0}),t.prototype.AddPopupManagerShutdownCallback=function(e){D.d.AddShutdownCallback(e)},t.prototype.CreateChatPopup=function(e,t,n,o,r,i){var a=new nn.a(e,t,n,this.m_ChatStore,o,r,i),s=new wn(a);return new L.a(s,a)},t.prototype.ShowPopupFriendsListAtStartup=function(e){var t=e;if(void 0!==Rn.m_bShowFriendsListOnLoadFromLoader&&(t=Rn.m_bShowFriendsListOnLoadFromLoader),t){var n=!0===Rn.m_bShowFriendsListOnLoadFromLoader;l.f.GetDefaultBrowserContext()!=C.a&&(console.log("Blocked taking focus in root context during ShowPopupFriendsList, because other context is primary"),n=!1),l.f.ShowPopupFriendsList(C.a,!1,n)}},t.prototype.ShowPopupFriendsList=function(e,t,n){this.m_DesktopApp.ShowPopupFriendsList(e,t,n)},t.prototype.OnFriendsListClosed=function(e){this.m_DesktopApp.OnFriendsListClosed(e)},t.prototype.RemoteClientStarted=function(e){var t=new ke.a(e).GetAccountID();if(0!=t&&t!=l.f.FriendStore.self.accountid){var n=l.f.FriendStore.GetPlayer(t);this.m_DesktopApp.CreateRemotePlayDialogs(n,window,!1)}},t.prototype.RemoteClientLaunchResult=function(e,t,n,o){var r=new ke.a(e).GetAccountID(),i=l.f.FriendStore.GetPlayer(r);if(n===m.l.k_ERemoteClientLaunchOK){var a=2==i.efriendrelationship,s=4==i.efriendrelationship,c=i.persona.is_online&&!a&&!s&&!i.is_blocked;!l.f.VoiceStore.IsAnyVoiceActive()&&c&&o?l.f.UIStore.ShowFriendChatDialogAndStartVoice(l.f.GetDefaultBrowserContext(),i.accountid):l.f.UIStore.ShowFriendChatDialog(l.f.GetDefaultBrowserContext(),i.accountid,!0,!1),this.m_DesktopApp.CreateRemotePlayDialogs(l.f.FriendStore.self,window,!0)}else{var u="";switch(n){case m.l.k_ERemoteClientLaunchParentalUnlockFailed:u="#RemotePlay_ErrorInviteFailed_ParentalUnlockFailed";break;case m.l.k_ERemoteClientLaunchScreenLocked:u="#RemotePlay_ErrorInviteFailed_ScreenLocked";break;case m.l.k_ERemoteClientLaunchDriversNotInstalled:u="#RemotePlay_ErrorInviteFailed_DriversNotInstalled";break;case m.l.k_ERemoteClientLaunchDisabledRemote:u="#RemotePlay_ErrorInviteFailed_Disabled";break;case m.l.k_ERemoteClientLaunchBroadcasting:u="#RemotePlay_ErrorInviteFailed_BroadcastingActive";break;case m.l.k_ERemoteClientLaunchTransportUnavailable:u="#RemotePlay_ErrorInviteFailed_TransportUnavailable";break;case m.l.k_ERemoteClientLaunchInvisible:u="#RemotePlay_ErrorInviteFailed_Invisible";break;case m.l.k_ERemoteClientLaunchRestrictedCountry:u="#RemotePlay_ErrorInviteFailed_RestrictedCountry";break;default:u="#RemotePlay_ErrorInviteFailed_Failed"}Object(se.c)(window,Object(V.d)("#RemotePlay_Error"),Object(V.d)(u))}},t.prototype.ShowAlert=function(e,t,n){return Object(se.c)(window,e,t,n)},t.prototype.OpenURLInBrowser=function(e,t){c.a.IN_CLIENT?SteamClient.WebChat.OpenURLInClient(e,t.m_unPID,!1):Object(be.e)(window,e)},t.prototype.BIsValidBrowserContext=function(t){return e.prototype.BIsValidBrowserContext.call(this,t)||this.m_DesktopApp.OverlayStore().HasOverlayInstance(t.m_unPID)},t.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){if(!this.m_DesktopApp.UIDisplayPrefs.bDontShowVoiceAlert){var n=t.popup;Object(Ft.b)(n.GetWindow())}},t.prototype.SignOutOfFriends=function(e){this.m_DesktopApp.SendPersonaUpdateToLibrary(0);var t=l.f.UIStore.GetRootChatPerContextData().friends_list_window&&l.f.UIStore.GetRootChatPerContextData().friends_list_window.BIsVisible();window.parent.postMessage({message:"SignOutRequest",bShowLoaderWindow:t,browserContext:e},"https://steamloopback.host")},t.prototype.UpdatePersonaState=function(e){this.m_DesktopApp.SendPersonaUpdateToLibrary(e)},t.prototype.CreateNewTabFromUniqueID=function(t,n,o,r){var i=n.match(/^br(\d+)$/);if(i&&i[1]){var a=parseInt(i[1]);return new y.a(t,a)}return e.prototype.CreateNewTabFromUniqueID.call(this,t,n,o,r)},t.k_pchStartupParamKey="oFriendsUIStartupParam",t}(l.d);function jn(){return Rn=new Dn(new Tn,!1)}function Gn(e){var t=Tn.k_pchStartupParamKey;window.sessionStorage.setItem(t,JSON.stringify({command:{command:"ShowWatchBroadcast",steamid:e}}))}var Rn=void 0},ha6C:function(e,t,n){"use strict";function o(e){var t,n=e.split(".");return 2==n.length&&(t=n[0],"object"==typeof SteamClient&&t in SteamClient)&&n[1]in SteamClient[n[0]]}n.d(t,"a",(function(){return o}))},hlKB:function(e,t,n){"use strict";n.d(t,"a",(function(){return re}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("QHER"),s=n("1VtQ"),c={x:"y",y:"x"};function l(e,t){return e.x*t.x+e.y*t.y}function u(e,t){return{x:t.x-e.x,y:t.y-e.y}}function p(e,t){return{x:e.x+t.x,y:e.y+t.y}}function m(e,t){return{x:e.x*t,y:e.y*t}}function d(e){return(e.min+e.max)/2}function h(e,t){return!(e.max<t.min||t.max<e.min)}var f,_=n("UqDm"),g=n("XaMz"),b=n("/IDK"),v=n("FOB4");!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.X=2]="X",e[e.Y=3]="Y",e[e.Menu=4]="Menu"}(f||(f={}));var y=i.a.createContext(void 0);var S,C,O,I="Focusable",E="FocusGroup",w="NavArea",M=function(){function e(){}return Object.defineProperty(e,"IsNavEnabled",{get:function(){return e.s_bIsNavEnabled},set:function(t){e.s_bIsNavEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsLoggingToConsole",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsDebuggingNavAddresses",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsPointerVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsFocusMarkerAlwaysVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsDefaultFocusMarkerVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsDocumentUsingZoom",{get:function(){return!0},enumerable:!1,configurable:!0}),e.s_bIsNavEnabled=!1,e}(),D=0;function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(M.IsLoggingToConsole)if(e.length>0&&"string"==typeof e[0]){var n=e.shift();console.log.apply(console,Object(o.g)(["\t".repeat(D)+n],e))}else console.log.apply(console,e)}function j(e,t,n){if(!M.IsLoggingToConsole)return n;var o=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];++D;try{var n=o.apply(this,e);return--D,n}catch(e){throw--D,e}},n}function G(e){var t=e;return k(t)?"#'"+t.id+"'.'"+t.className+"'":"#?.?"}function R(e){return null==e?"(?, ?)":"("+e.x+", "+e.y+")"}function k(e){return null!=e&&void 0!==e.focus}function A(e){for(var t=1,n=e.ownerDocument.defaultView,o=e;null!=o;o=o.parentElement){var r=parseFloat(n.getComputedStyle(o).zoom);r>0&&(t*=r)}return t}function N(e){if(M.IsDocumentUsingZoom){var t=A(e),n=e.getBoundingClientRect();return{x:{min:n.left*t,max:n.right*t},y:{min:n.top*t,max:n.bottom*t}}}return function(e){return{x:{min:e.left,max:e.right},y:{min:e.top,max:e.bottom}}}(e.getBoundingClientRect())}function B(e){return{x:d((t=N(e)).x),y:d(t.y)};var t}function L(e,t){e&&("function"==typeof e?e(t):e.current=t)}function P(e,t,n){var o=e,r=null!=o.getAttribute("data-nav"),i=r?o.getAttribute("data-nav-scroll-axes"):void 0;if(r&&i!==C.XY&&i!==t)return S.None;var a="x"===t?[o.scrollLeft,o.scrollWidth,o.clientWidth]:[o.scrollTop,o.scrollHeight,o.clientHeight],s=a[0],c=a[1],l=a[2],u=-1===n?Math.abs(s)<1:Math.abs(s+l-c)<=1;if(r)return u?S.AtEnd:S.Scrollable;if(!u&&c<=l)return S.None;var p=o.ownerDocument.defaultView.getComputedStyle(o),m="x"===t?p.overflowX:p.overflowY;return"auto"===m||"scroll"===m?u?S.AtEnd:S.Scrollable:S.None}!function(e){e[e.None=2]="None",e[e.Scrollable=1]="Scrollable",e[e.AtEnd=3]="AtEnd"}(S||(S={})),function(e){e.X="x",e.Y="y",e.XY="xy"}(C||(C={})),function(e){e.Area="area",e.Group="group",e.Stop="stop",e.Click="click"}(O||(O={}));var F=r.createContext(null);function x(e){for(var t=[],n=e;null!=n;n=n.parent)t.push(n.key);return t.reverse(),JSON.stringify(t)}var V,U=r.createContext(void 0),H=r.createContext(void 0),W=r.createContext(void 0);function z(e,t,n){var o=null!=e.navKey?e.navKey:void 0;return null!=o&&M.IsNavEnabled?r.createElement(H.Consumer,null,(function(e){return r.createElement(W.Consumer,null,(function(i){return r.createElement(U.Consumer,null,(function(a){var s={parent:a,key:o};return"function"==typeof n&&n(s,e,i),r.createElement(U.Provider,{value:s},t)}))}))})):t}!function(e){e.Lazy="lazy",e.Start="start",e.Center="center",e.End="end",e.Nearest="nearest"}(V||(V={}));var q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_containerRef=r.createRef(),t}return Object(o.d)(t,e),t.prototype.IsEventSource=function(e){var t=this.m_containerRef.current;return null!=t&&t.contains(e.target)},t.prototype.HandleOnFocusChanged=function(e,t,n,o){var r=this.m_containerRef.current;if(r){var i=A(r);if(null!=o)r.style.opacity=n?"100%":"75%",r.style.left=o.x/i+"px",r.style.top=o.y/i+"px";else if(null!=t){var a=N(t);r.style.opacity=n?"100%":M.IsFocusMarkerAlwaysVisible?"25%":"0%",r.style.left=a.x.min/i+"px",r.style.top=a.y.min/i+"px"}else r.style.opacity="33%"}else r.style.display="none"},t.prototype.render=function(){var e=this.props,t=e.children,n=e.style,i=Object(o.f)(e,["children","style"]);return r.createElement("div",Object(o.a)({ref:this.m_containerRef,style:Object(o.a)(Object(o.a)({},n),{position:"absolute",willChange:"left, top"})},i),t)},Object(o.c)([j],t.prototype,"HandleOnFocusChanged",null),t}(r.Component),K=function(){function e(e,t){this.m_bNeedsUpdate=!1,this.m_containerRef=e,this.m_nPaddingPx=t||0}return e.prototype.IsEventSource=function(e){var t=this.m_containerRef.current;return null!=t&&t.contains(e.target)},e.prototype.HandleOnFocusChanged=function(e,t,n){if((!0===e||this.m_focusedElement!=t||this.m_bDisplay!=n)&&(this.m_focusedElement=t,this.m_bDisplay=n,!this.m_bNeedsUpdate)){var o=((this.m_containerRef.current||{}).ownerDocument||{}).defaultView;this.m_bNeedsUpdate=!0,o&&o.requestAnimationFrame(this.HandleOnAnimationFrame)}},e.prototype.HandleOnAnimationFrame=function(){var e="BoxFM.HandleOnAnimationFrame",t=this.m_containerRef.current;if(this.m_bNeedsUpdate=!1,null==this.m_focusedElement)T(e+" none"),t.style.display="none";else if(null!=this.m_focusedElement){var n=N(this.m_focusedElement),o=A(t);T(e+" ("+n.x.min+", "+n.y.min+")-("+n.x.max+", "+n.y.max+")"),t.style.display="unset",t.style.opacity=this.m_bDisplay?"100%":M.IsFocusMarkerAlwaysVisible?"25%":"0%",t.style.left=n.x.min/o-this.m_nPaddingPx+"px",t.style.top=n.y.min/o-this.m_nPaddingPx+"px",t.style.width=(n.x.max-n.x.min)/o+2*this.m_nPaddingPx+"px",t.style.height=(n.y.max-n.y.min)/o+2*this.m_nPaddingPx+"px"}},Object(o.c)([j],e.prototype,"HandleOnFocusChanged",null),Object(o.c)([s.a],e.prototype,"HandleOnAnimationFrame",null),e}(),Y=function(){function e(){}return e.prototype.FocusableElementAttributes=function(e){var t={};return M.IsNavEnabled&&e.navStop&&(t.tabIndex=-2),"number"==typeof e.tabStop&&(t.tabIndex=e.tabStop),!0===e.tabStop&&(t.tabIndex=0),t},e}(),X=function(e){function t(t){var n=e.call(this)||this;n.m_focusListeners=new Map,n.m_blurListeners=new Map,T("HDFC.constructor"),n.m_doc=t;var o=n.m_doc.defaultView;return o?(n.m_win=o,n):(T("- No window!"),n)}return Object(o.d)(t,e),t.prototype.GetFocus=function(){return void 0!==this.m_doc&&k(this.m_doc.activeElement)?this.m_doc.activeElement:null},t.prototype.Focus=function(e,t){null!=e?(T("HDFC Focus e.focus {",e),e.focus(t),T("+ }")):k(this.m_doc.activeElement)&&(T("HDFC Focus null with active IsHTMLElement e.blur() {",e),this.m_doc.activeElement.blur(),T("+ }"))},t.prototype.Click=function(e){T("HDFC Click: e.click {"),e.click(),T("+ }")},t.prototype.AddFocusListener=function(e){T("CHtmlDomFocusController AddFocusListener");var t=function(t){k(t.target)&&(T("HDFC focus listener {"),e(t.target),T("+ }"))};this.m_focusListeners.set(e,t),this.m_win.addEventListener("focus",t,!0)},t.prototype.RemoveFocusListener=function(e){T("CHtmlDomFocusController RemoveFocusListener");var t=this.m_focusListeners.get(e);this.m_doc.removeEventListener("focus",t,!0),this.m_focusListeners.delete(e)},t.prototype.AddBlurListener=function(e){T("CHtmlDomFocusController AddBlurListener");var t=function(t){k(t.target)&&(T("HDFC blur listener {"),e(t.target),T("+ }"))};this.m_blurListeners.set(e,t),this.m_win.addEventListener("blur",t,!0)},t.prototype.RemoveBlurListener=function(e){T("CHtmlDomFocusController RemoveBlurListener");var t=this.m_blurListeners.get(e);this.m_doc.removeEventListener("blur",t,!0),this.m_blurListeners.delete(e)},Object(o.c)([j],t.prototype,"Focus",null),Object(o.c)([j],t.prototype,"Click",null),Object(o.c)([j],t.prototype,"AddFocusListener",null),Object(o.c)([j],t.prototype,"RemoveFocusListener",null),Object(o.c)([j],t.prototype,"AddBlurListener",null),Object(o.c)([j],t.prototype,"RemoveBlurListener",null),t}(Y);function Q(e,t){e.navScrollX&&(t["data-nav-scroll-snap-type-x"]=e.navScrollX),e.navScrollY&&(t["data-nav-scroll-snap-type-y"]=e.navScrollY),e.navScrollMarginX&&(t["data-nav-scroll-snap-margin-x"]=e.navScrollMarginX),e.navScrollMarginY&&(t["data-nav-scroll-snap-margin-y"]=e.navScrollMarginY)}var J=new Map;function Z(e,t){J.set(e,t)}function $(e){J.delete(e)}function ee(e){return J.get(e)}var te,ne=function(){function e(){}return e.Attributes=function(e,t){var n={};if(M.IsNavEnabled&&(e.navClick&&(n["data-nav"]=O.Click),!e.navClick&&e.navStop&&(n["data-nav"]=O.Stop),!e.navClick&&e.navStop&&e.noPrimaryAction&&(n["data-nav-npa"]="true"),!e.navClick&&e.preferredNavStop&&(n["data-nav-preferred"]="true"),Q(e,n)),!t)return n;var r=t.FocusableElementAttributes(e);return r?Object(o.a)(Object(o.a)({},n),r):n},Object.defineProperty(e,"navStopClass",{get:function(){return M.IsNavEnabled?I:void 0},enumerable:!1,configurable:!0}),e}(),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.NeedsComponentFromElement=function(){return!0},t.prototype.SetRef=function(e){null==e?$(this.m_htmlElement):(this.m_htmlElement=e,this.NeedsComponentFromElement&&Z(this.m_htmlElement,this),L(this.props.htmlElementRef,e))},t.prototype.assembleAttributes=function(e){e.navKey,e.navStop,e.noPrimaryAction,e.preferredNavStop,e.tabStop,e.navClick;var t=e.startFocused,n=(e.navScrollX,e.navScrollY,e.navScrollMarginX,e.navScrollMarginY,e.htmlElementRef),r=e.className,i=(e.children,Object(o.f)(e,["navKey","navStop","noPrimaryAction","preferredNavStop","tabStop","navClick","startFocused","navScrollX","navScrollY","navScrollMarginX","navScrollMarginY","htmlElementRef","className","children"]));return null!=this.context&&M.IsNavEnabled?Object(o.a)(Object(o.a)(Object(o.a)({},ne.Attributes(e,this.context.GetFocusControllerDomIntegrator())),{className:Object(a.a)(ne.navStopClass,r),ref:t||this.NeedsComponentFromElement?this.SetRef:n}),i):Object(o.a)({className:r,ref:n},i)},t.prototype.GotFocus=function(){null!=this.m_navAddress&&null!=this.m_currentNavEpoch&&this.m_currentNavEpoch.SetFocusAddress(this.m_navAddress)},t.prototype.componentDidMount=function(){var e,t;if(M.IsDebuggingNavAddresses&&null!=this.m_htmlElement&&null!=this.m_navAddress&&this.m_htmlElement.setAttribute("data-nav-addr",x(this.m_navAddress)),null==(null===(e=this.m_currentNavEpoch)||void 0===e?void 0:e.GetFocusAddress())){var n=null===(t=this.m_recalledNavEpoch)||void 0===t?void 0:t.GetFocusAddress();(null!=n?function(e,t){for(var n=[e,t],o=n[0],r=n[1];;o=o.parent,r=r.parent){if(null==o&&null==r)return!0;if(null==o||null==r||o.key!==r.key)return!1}}(n,this.m_navAddress):this.props.startFocused&&this.m_htmlElement&&this.context)&&this.context.ClaimFocus(this.m_htmlElement)}},t.prototype.render=function(){var e=this;return r.createElement(y.Consumer,null,(function(t){return e.m_actionDescriptionContext=t,z(e.props,r.createElement(e.m_elementType,e.assembleAttributes(e.props),e.props.children),(function(t,n,o){e.m_navAddress=t,e.m_recalledNavEpoch=n,e.m_currentNavEpoch=o}))}))},t.contextType=F,t.defaultProps={navStop:!1,tabStop:!1},Object(o.c)([s.a],t.prototype,"SetRef",null),t}(r.Component),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_elementType="div",t}return Object(o.d)(t,e),t}(oe);!function(e){e.Geometry="Geometry",e.DomOrder="DomOrder",e.ReverseDomOrder="ReverseDomOrder"}(te||(te={}));var ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.GetOnNavOut=function(e){var n=ee(e);if(n&&n instanceof t)return n.props.onNavOut},t.Attributes=function(e){if(!M.IsNavEnabled)return{};var t={"data-nav":O.Group};return e.xOrder&&(t["data-nav-xorder"]=e.xOrder),e.yOrder&&(t["data-nav-yorder"]=e.yOrder),e.scrollAxes&&(t["data-nav-scroll-axes"]=e.scrollAxes),e.preferredNavStopWithin&&(t["data-nav-preferred"]="true"),e.enterAsScrolledAxes&&(t["data-nav-enter-as-scrolled-axes"]=e.enterAsScrolledAxes),Q(e,t),t},t.prototype.NeedsComponentFromElement=function(){return!!this.props.onNavOut||null!=this.props.navKey},t.prototype.SetRef=function(e){null==e?$(this.m_htmlElement):(this.m_htmlElement=e,this.NeedsComponentFromElement&&Z(this.m_htmlElement,this),L(this.props.htmlElementRef,e))},t.prototype.FocusWithin=function(){this.m_htmlElement&&se.FocusWithin(this.m_htmlElement)},t.prototype.UpdateScrollPos=function(){var e=this.m_htmlElement;if(null!=e&&null!=this.m_navAddress&&null!=this.m_currentNavEpoch){var t={x:e.scrollLeft,y:e.scrollTop};this.m_currentNavEpoch.SetNavAddressScroll(this.m_navAddress,t)}},t.prototype.componentDidMount=function(){var e,t;if(M.IsDebuggingNavAddresses&&null!=this.m_htmlElement&&null!=this.m_navAddress&&this.m_htmlElement.setAttribute("data-nav-addr",x(this.m_navAddress)),null!=this.m_htmlElement&&null!=this.m_navAddress&&null==(null===(e=this.m_currentNavEpoch)||void 0===e?void 0:e.GetNavAddressScroll(this.m_navAddress))){var n=null===(t=this.m_recalledNavEpoch)||void 0===t?void 0:t.GetNavAddressScroll(this.m_navAddress);null!=n&&(this.m_htmlElement.scrollLeft=n.x,this.m_htmlElement.scrollTop=n.y)}},t.prototype.componentWillUnmount=function(){this.m_currentNavEpoch&&this.m_currentNavEpoch.SetNavAddressScroll(this.m_navAddress,void 0)},t.prototype.render=function(){var e=this,n=this.props,i=(n.navKey,n.xOrder,n.yOrder,n.preferredNavStopWithin,n.scrollAxes,n.enterAsScrolledAxes,n.navScrollX,n.navScrollY,n.navScrollMarginX,n.navScrollMarginY,n.onNavOut,n.htmlElementRef),s=n.className,c=n.children,l=Object(o.f)(n,["navKey","xOrder","yOrder","preferredNavStopWithin","scrollAxes","enterAsScrolledAxes","navScrollX","navScrollY","navScrollMarginX","navScrollMarginY","onNavOut","htmlElementRef","className","children"]);return null!=this.context&&M.IsNavEnabled?z(this.props,r.createElement("div",Object(o.a)({ref:this.SetRef},t.Attributes(this.props),{className:Object(a.a)(E,s)},l),c),(function(t,n,o){e.m_navAddress=t,e.m_recalledNavEpoch=n,e.m_currentNavEpoch=o})):r.createElement("div",Object(o.a)({ref:i,className:s},l),c)},t.contextType=F,Object(o.c)([s.a],t.prototype,"SetRef",null),Object(o.c)([j],t,"GetOnNavOut",null),t}(r.Component);var ae=function(){function e(e){this.m_navAreaStack=[],this.m_elementNavAreaMap=new Map,this.m_focusControllers=new v.b,this.m_focusMarkers=new v.b,this.m_defaultFocusController=new X(e)}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.m_navAreaStack.length&&0===this.m_elementNavAreaMap.size&&0===this.m_focusControllers.size&&0===this.m_focusMarkers.size},enumerable:!1,configurable:!0}),e}(),se=function(e){function t(n){var o=e.call(this,n)||this;return o.m_navAreaDivRef=r.createRef(),o.m_inFocusCallType=null,o.m_focusClaimElement=void 0,o.m_focusedHtmlElement=null,o.m_focusPos=null,o.m_focusPosOffsetFromAnchorElement=null,o.m_lastFocusedHtmlElement=null,o.m_lastFocusPosOffsetFromAnchorElement=null,o.m_pointerFocusMarkerRef=r.createRef(),o.m_boxFocusMarkerDivRef=r.createRef(),void 0!==n&&void 0===t.sm_htmlDomFocusControllerDomIntegrator&&(t.sm_htmlDomFocusControllerDomIntegrator=new Y),o}return Object(o.d)(t,e),t.FocusWithin=function(e){var n=t.GetNavAreaObjects(e,"NavArea.FocusWithin",{target:!0,navArea:!0,activeNavArea:!1}),o=n.navArea,r=n.navAreaElement,i=(n.activeNavArea,n.activeNavAreaElement);n.dn;if(null!=o){T("NavArea.FocusWithin",e),null!=i&&i==r||(T("+ ("+i.id+") is active, but FG in ("+o.props.id+"); activating."),o.Activate());var a=o.FindBestNavStopFocus(e);null!=a&&(T("+ focusing:",a.htmlElement,a.pos),o.SetFocus(a.htmlElement,a.pos))}},t.HandleKeyDown=function(e){var n,o="NavArea.HandleKeyDown",r=this.GetNavAreaObjects(e.target,o,{target:!1,navArea:!1,activeNavArea:!1}),i=r.navArea,a=r.activeNavArea,s=(r.doc,r.dn);if(null!=a){a.m_focusClaimElement=void 0,T(o+" '"+e.key+"' target in:"+(i?i.props.id:"-")+" active:("+(a?a.props.id:"-")+")"),this.SetIsDoingKeyNav(s,!0);var c=function(){null!=e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()},l=t.k_KeyNavigationDirections[e.key];if(l){T("+ Arrow Key.");var u=l[0],p=l[1],m=a.FindNextNavStop(u,p);m&&this.IsTargetable(m.htmlElement)&&(a.SetFocus(m.htmlElement,m.pos),c())}else{T("+ Non-Arrow Key.");var d=a.GetFocusedElement(),h=d&&ee(d),_=null==h?void 0:h.m_actionDescriptionContext,g=null===(n=null==_?void 0:_.currentActions)||void 0===n?void 0:n.find((function(t){return t.button===function(e){if(console.info("pressed "+e.key),e.ctrlKey)switch(e.key){case"1":return f.Menu;default:return}switch(e.key){case"Enter":return f.A;case"Escape":return f.B;case"backspace":return f.X;case" ":return f.Y;default:return}}(e)}));if(g)T("+ actionDescription {"),g.action(),c(),T("+ }");else if("Enter"===e.key){var b=a.GetFocusedElement();!(null!=b&&"true"==b.getAttribute("data-nav-npa"))&&a.ClickFocusedElement()&&c()}else"Escape"===e.key?a.props.onGoBack&&(T("+ onGoBack {"),a.props.onGoBack(),c(),T("+ }")):"1"===e.key&&e.ctrlKey&&a.props.onHome&&(T("+ onHome {"),a.props.onHome(),c(),T("+ }"))}}else T(o+": no active nav area.")},t.SetDefaultFocusMarker=function(e){t.sm_defaultFocusMarker=e},t.GetDocumentNavState=function(e){return t.sm_documentStates.get(e)},t.GetActiveNavArea=function(e){var t=e.m_navAreaStack;if(0!==t.length)return t[t.length-1]},t.SetIsDoingKeyNav=function(e,n){t.sm_bIsDoingKeyNav=n},t.GetIsDoingKeyNav=function(e){return t.sm_bIsDoingKeyNav},t.GetNavAreaObjects=function(e,n,o){if(!M.IsNavEnabled)return{};if(!k(e))return Object(g.a)(!0!==o.target,n+" expects target is HTML element."),{};var r=e,i=r.ownerDocument;if(null==i)return Object(g.a)(!0!==o.target,n+" expects target has ownerDocument.",r),{};if(!i.contains(e))return Object(g.a)(!0!==o.target,n+" expects target is in document."),{};var a=t.GetDocumentNavState(i);if(null==a)return Object(g.a)(!1,n+" expects target document nav state"),{};var s=null==o.navArea?{}:function(){var r=t.FindAncestorNavAreaElement(e);if(null==r)return Object(g.a)(!0!==o.navArea,n+" expects target has nav area ancestor."),{};var s=r.ownerDocument;if(null==s)return Object(g.a)(!0!==o.navArea,n+" expects target nav area has ownerDocument."),{};if(!s.contains(r))return Object(g.a)(!0!==o.navArea,n+" expects target nav area is in document."),{};if(!(s===i))return Object(g.a)(!0!==o.navArea,n+" expects target and target nav area are in same document."),{};var c=a.m_elementNavAreaMap.get(r);return null==c?(Object(g.a)(!0!==o.navArea,n+" expects target nav area is registered."),{}):{navArea:c,navAreaElement:r}}(),c=s.navArea,l=void 0===c?void 0:c,u=s.navAreaElement,p=void 0===u?void 0:u,m=null==o.activeNavArea?{}:function(){var e=t.GetActiveNavArea(a);if(null==e)return Object(g.a)(!0!==o.activeNavArea,n+" expects nav area is registered."),{};var r=e.m_navAreaDivRef.current,s=r.ownerDocument;return null==s?(Object(g.a)(!0!==o.activeNavArea,n+" expects nav area has ownerDocument."),{}):s.contains(r)?s===i?{activeNavArea:e,activeNavAreaElement:r}:(Object(g.a)(!0!==o.navArea,n+" expects target and active nav area are in same document."),{}):(Object(g.a)(!0!==o.activeNavArea,n+" expects nav area is in document."),{})}(),d=m.activeNavArea,h=void 0===d?void 0:d,f=m.activeNavAreaElement;return{navArea:l,navAreaElement:p,activeNavArea:h,activeNavAreaElement:void 0===f?void 0:f,doc:i,dn:a}},t.FindAncestorNavAreaElement=function(e){return Object(b.l)(e,(function(e){return e.getAttribute("data-nav")===O.Area}))},t.IsTargetable=function(e){var t=e.getAttribute("data-nav");return t===O.Stop||t===O.Click},t.IsFocusable=function(e){return e.getAttribute("data-nav")===O.Stop},t.IsClickable=function(e){return e.getAttribute("data-nav")===O.Stop},t.FindAnchorElement=function(e){return e},t.GetScrollOffset=function(e,t,n){var o=e,r=o.getAttribute("data-nav-enter-as-scrolled-axes");if(r===C.XY||r===t)return null;var i=null!=o.getAttribute("data-nav"),a=i?o.getAttribute("data-nav-scroll-axes"):void 0;return i&&a!==C.XY&&a!==t?null:"x"===t?{x:o.scrollLeft,y:0}:{x:0,y:o.scrollTop}},t.UpdateFocusPosAfterLayoutChange=function(e,n){for(var o=e;null!=o;o=t.FindAncestorNavAreaElement(o.parentElement)){var r=n.m_elementNavAreaMap.get(o),i=r.m_focusPos,a=r.GetFocusPos();i!==a&&(r.m_focusPos=a,r.UpdateFocusMarker(!0))}},t.FindNextNavStopInContainer=function(e,n,o,r,i,a,s){T("NavArea.FindNextNavStopInContainer c:"+G(e)+" foc:"+G(n)+" "+R(o));var l="x"===r?"data-nav-xorder":"y"===r?"data-nav-yorder":void 0,d=e.getAttribute(l),f=d===te.Geometry||null==d,_=d===te.ReverseDomOrder,g=s?t.GetScrollOffset(e,r,i):null,v=g?m(g,-1):null,y=v?p(o,v):o,S=c[r];var C,I,E=-1===i?"max":"min",w={min:y[S],max:y[S]},M=a&&k(n)?(C=w,I=N(n)[S],{min:C.min<I.min?C.min:I.min,max:C.max>I.max?C.max:I.max}):w,D=null,j=null,A=1/0,L=Object(b.m)(e,"data-nav");_!==(-1===i)&&L.reverse();for(var P=[],F=null==n?0:null,x=0,V=L;x<V.length;x++){if((ne=V[x])!==n){if(null!==F&&++F,ne.getAttribute("data-nav")!==O.Area){s&&null===D&&"true"===ne.getAttribute("data-nav-preferred")&&(D=ne);var U=0;if(f){var H=N(ne),W=y[r],z=i*(H[r][E]-W);if(z<0)continue;var q=y[S],K=H[S].min,Y=H[S].max,X=q<K?q-K:q>Y?q-Y:0;if(a)if(!h(M,{min:K,max:Y}))continue;var Q={x:0,y:0};Q[r]=H[r][E],Q[S]=q+X;var J=u(y,Q);U=(z*z+X*X)/Math.abs(J[r])}else{if(null==F)continue;U=F}U<A&&(A=U,j=ne),P.push({score:U,element:ne})}}else F=0}var Z=function(n,a){void 0===a&&(a=!1);var s=n.getAttribute("data-nav");if(s===O.Stop||s===O.Click){if(k(n)){var c=n,l=B(c),u=!o||a?l:{x:o.x,y:o.y};u[r]=l[r];var p={htmlElement:c,pos:u};return g&&(p.onscreenTestElement=e),p}return null}if(s===O.Group){var m=t.FindNextNavStopInContainer(n,null,y,r,i,!1,!0);if(m)return m}return null};if((T("+ Searching "+L.length+" elements:",L,P,D,j),D)&&($=Z(D,!0)))return $;if(j){var $;if($=Z(j))return $;P.sort((function(e,t){return e.score-t.score}));for(var ee=0;ee<P.length;++ee){var ne;if((ne=P[ee].element)!==j){var oe=Z(ne);if(oe)return oe}}}return null},t.FindNextNavStopWithinAndAcrossContainers=function(e,n,o,r,i){T("NavArea.FindNextNavStopWithinAndAcrossContainers root:#"+e.id+".'"+e.className+"' focus:#"+n.id+".'"+n.className+"'");for(var a=n;;){var s=Object(b.k)(e,a,"data-nav"),c=t.FindNextNavStopInContainer(s,a,o,r,i,!0,!1);if(null!==c)return c;if(s===e)return null;for(var l=a.parentElement;l&&l!==s;){if(P(l,r,i)===S.Scrollable)return null;l=l.parentElement}if(!l)return null;if(l===s&&P(l,r,i)===S.Scrollable)return null;var u=ie.GetOnNavOut(s);if(u){T("+ onNavOut {");var p={x:0,y:0};p[r]=i;var m=u(p);if(T("+ } => "+m),!1===m)return null}a=s}},t.AddEventListeners=function(e){for(var n=0,o=t.k_EventListeners;n<o.length;n++){var r=o[n],i=r[0],a=r[1];e.addEventListener(i,a,!0)}},t.RemoveEventListeners=function(e){for(var t=0,n=this.k_EventListeners;t<n.length;t++){var o=n[t],r=o[0],i=o[1];e.removeEventListener(r,i,!0)}},t.HandleAllOnKeyDown=function(e){T("NavArea.HandleAllOnKeyDown "+e.key),t.HandleKeyDown({target:e.target,key:e.key,ctrlKey:e.ctrlKey,stopPropagation:function(){return e.stopImmediatePropagation()},preventDefault:function(){return e.preventDefault()}})},t.HandleAllOnScroll=function(e){var n=t.GetNavAreaObjects(e.target,"NavArea.HandleAllOnScroll",{target:!0,navArea:!1}),o=n.navArea,r=n.navAreaElement,i=n.dn;if(null!=o){T("NavArea.HandleAllOnScroll ("+o.props.id+") "+G(e.target));var a=ee(e.target);null!=a&&a instanceof ie&&a.UpdateScrollPos(),t.UpdateFocusPosAfterLayoutChange(r,i)}},t.HandleAllOnAnimationStart=function(e){},t.HandleAllOnAnimationEnd=function(e){var n=t.GetNavAreaObjects(e.target,"NavArea.HandleAllOnAnimationEnd",{target:!0,navArea:!1}),o=n.navArea,r=n.navAreaElement,i=n.dn;null!=o&&t.UpdateFocusPosAfterLayoutChange(r,i)},t.HandleAllOnTransitionStart=function(e){},t.HandleAllOnTransitionEnd=function(e){var n=t.GetNavAreaObjects(e.target,"NavArea.HandleAllOnTransitionEnd",{target:!0,navArea:!1}),o=n.navArea,r=n.navAreaElement,i=n.dn;null!=o&&(o.m_focusMarker.IsEventSource(e)||t.UpdateFocusPosAfterLayoutChange(r,i))},t.HandleAllOnMouseDown=function(e){var n="NavArea.HandleAllOnMouseDown",o=t.GetNavAreaObjects(e.target,n,{target:!0,navArea:!1}),r=o.navArea,i=o.dn;if(null!=r){T(n+" ("+r.props.id+"):",e.target),t.SetIsDoingKeyNav(i,!1);var a=r.GetFocusController();null!=(null==a?void 0:a.HandleNavStopClick)&&(T("+ preventDefault"),e.preventDefault())}},t.HandleAllOnClick=function(e){var n=t.GetNavAreaObjects(e.target,"NavArea.HandleAllOnClick",{target:!0,navArea:!1}).navArea;if(null!=n){T("NavArea.HandleAllOnClick ("+n.props.id+"):",e.target);var o=n.GetFocusController(),r=null==o?void 0:o.HandleNavStopClick;if(null!=r){var i=e.target;i.getAttribute("data-nav")===O.Stop&&(T("+ handleNavStopClick {"),r(e,i),T("+ }"))}else T("+ nop.")}},t.HandleFocusControllerOnFocus=function(e){var n="NavArea.HandleFocusControllerOnFocus",o=ee(e),r=null==o?void 0:o.m_actionDescriptionContext;if(r&&r.setCurrentActions(r.focusActions),null!=e.ownerDocument){var i=t.GetNavAreaObjects(e,n,{target:!0,navArea:!1}),a=i.navArea,s=i.dn;null!=a&&(T(n+" ("+a.props.id+")",e),a!==t.GetActiveNavArea(s)&&a.Activate(),a.UpdateFocus(e))}},t.HandleFocusControllerOnBlur=function(e){var n="NavArea.HandleFocusControllerOnBlur",o=ee(e),r=null==o?void 0:o.m_actionDescriptionContext;if(r&&r.setCurrentActions(void 0),null!=e.ownerDocument){var i=t.GetNavAreaObjects(e,n,{target:!0,navArea:!1}).navArea;null!=i&&(T(n+" ("+i.props.id+")",e),i.UpdateFocus(null))}},t.prototype.HandleKeyDown=function(e){t.HandleKeyDown({target:this.m_navAreaDivRef.current,key:e.key,ctrlKey:e.ctrlKey,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}})},t.prototype.GetFocusedElement=function(){if(T("NavArea.GetFocusedElement ("+this.props.id+")"),null!=this.GetElementDocState("NavArea.GetFocusedElement").dn)return this.GetFocusController().GetFocus()},t.prototype.ClickFocusedElement=function(){T("NavArea.ClickFocusedElement ("+this.props.id+")");var e=this.GetFocusedElement();return null!=e&&(this.GetFocusController().Click(e),!0)},t.prototype.Blur=function(e){T("NavArea.Blur ("+this.props.id+")");var n=this.GetElementDocState("NavArea.Blur").dn;if(null!=n){var o=this.m_inFocusCallType;this.m_inFocusCallType="blur",this.m_focusClaimElement=void 0,this.m_lastFocusedHtmlElement=null,this.m_lastFocusPosOffsetFromAnchorElement=null,this.m_focusedHtmlElement=null,this.m_focusPos=null,this.m_focusPosOffsetFromAnchorElement=null,this===t.GetActiveNavArea(n)&&this.GetFocusController().Focus(null),this.m_inFocusCallType=o}},t.prototype.Activate=function(){T("NavArea.Activate ("+this.props.id+") "+(this.props.startInactive?"startInactive":""));var e=this.GetElementDocState("NavArea.Activate"),n=e.thisElement,o=e.dn;if(null!=o){var r=t.GetActiveNavArea(o);null!=r&&r!=this&&(T("+ remembering last focused element:",r.m_focusedHtmlElement,r.m_focusPos),r.m_lastFocusedHtmlElement=r.m_focusedHtmlElement,r.m_lastFocusPosOffsetFromAnchorElement=r.m_focusPosOffsetFromAnchorElement,r.m_focusedHtmlElement=null,r.m_focusPosOffsetFromAnchorElement=null),o.m_navAreaStack=Object(_.a)(o.m_navAreaStack,this),n.setAttribute("data-nav-area-active","true"),o.m_navAreaStack.push(this);var i=this.m_lastFocusedHtmlElement;if(null!=i&&t.IsFocusable(i)){T("+ focusing last:",i,this.m_focusPos);var a=t.FindAnchorElement(i);if(a){var s=B(a);this.SetFocus(i,p(s,this.m_lastFocusPosOffsetFromAnchorElement))}else this.SetFocus(i,void 0)}else{var c=this.FindBestNavStopFocus(this.m_navAreaDivRef.current,void 0,void 0);null!==c&&t.IsFocusable(c.htmlElement)?(T("+ focusing found:",c.htmlElement,c.pos),this.SetFocus(c.htmlElement,c.pos)):T("+ no focus found.")}var l=this.props.onActivate;null!=l&&(T("+ onActivate {"),l(),T("+ }"))}},t.prototype.Deactivate=function(){T("NavArea.Deactivate ("+this.props.id+") "+(this.props.startInactive?"startInactive":""));var e=this.GetElementDocState("NavArea.Deactivate"),n=e.thisElement,o=e.dn;if(null!=o){this.Blur(),n.setAttribute("data-nav-area-active","false"),o.m_navAreaStack=Object(_.a)(o.m_navAreaStack,this);var r=t.GetActiveNavArea(o);null!=r&&r.Activate(),T("+ now active: "+(null!=r?r.props.id:"-"));var i=this.props.onDeactivate;null!=i&&(T("+ onDeactivate {"),i(),T("+ }"))}},t.prototype.GetFocusControllerDomIntegrator=function(){return null!=this.props.focusController?this.props.focusController:t.sm_htmlDomFocusControllerDomIntegrator},t.prototype.GetFocusController=function(){return this.m_focusController},t.prototype.ClaimFocus=function(e){var t="NavArea.ClaimFocus";null!=this.m_navAreaDivRef.current?null!==this.m_focusClaimElement?(T(t+" first claim now."),this.SetFocus(e,void 0),this.m_focusClaimElement=null):T(t+" already claimed now, ignored."):null==this.m_focusClaimElement?(T(t+" first claim delay."),this.m_focusClaimElement=e):T(t+" already claimed delay, ignored.")},t.prototype.GetElementDoc=function(e){if(!M.IsNavEnabled)return{};var t=this.m_navAreaDivRef.current;if(null==t)return Object(g.a)(!1,e+" expects nav area ref."),{};var n=t.ownerDocument;return null==n?(Object(g.a)(!1,e+" expects nav area ownerDocument."),{}):n.contains(t)?{thisElement:t,doc:n}:(Object(g.a)(!1,e+" expects nav area to be in document."),{})},t.prototype.GetElementDocState=function(e){var n=this.GetElementDoc(e),o=n.thisElement,r=n.doc;if(null==r)return{};var i=t.GetDocumentNavState(r);return null==i?(Object(g.a)(!1,e+" expects document nav state."),{}):{thisElement:o,doc:r,dn:i}},t.prototype.SetFocus=function(e,t){if(e.ownerDocument.contains(e)){var n=this.GetFocusController();if(e.getAttribute("data-nav")!==O.Click){var o=this.m_inFocusCallType;this.m_inFocusCallType="focus",T("NavArea.SetFocus ("+this.m_navAreaDivRef.current.id+") "+R(t),e),this.UpdateFocus(e,t);var r=function(t,n){var o=Object(b.l)(e,(function(e){return null!=e.getAttribute(t)}));return null==o?[void 0,void 0,void 0]:[o,o.getAttribute(t),parseFloat(o.getAttribute(n)||"0")]},i=r("data-nav-scroll-snap-type-x","data-nav-scroll-snap-margin-x"),a=i[0],s=i[1],c=i[2],l=r("data-nav-scroll-snap-type-y","data-nav-scroll-snap-margin-y"),u=l[0],p=l[1],m=l[2];if(s||p){n.Focus(e,{preventScroll:!0});var d=e.ownerDocument.defaultView,h=function(e,t,n,o){if(null!=t)for(var r=N(t),i=A(t),a=r[e].min-o*i,s=r[e].max+o*i,c=t.parentElement;null!=c;c=c.parentElement){var l="x"===e?[c.scrollLeft,c.scrollWidth,c.clientWidth]:[c.scrollTop,c.scrollHeight,c.clientHeight];if(!(l[1]<=l[2])){var u=d.getComputedStyle(c),p="x"===e?u.overflowX:u.overflowY;if("auto"===p||"scroll"===p){var m=N(c);if(n===V.Lazy&&m[e].min<=a&&m[e].max>=s)return;var h={min:a-m[e].min,max:s-m[e].max},f=n===V.Start?0:n===V.Center?.5:n===V.End?1:Math.abs(h.min)<=Math.abs(h.max)?0:1,_=A(c),g=((1-f)*h.min+f*h.max)/_;return T("+ snap "+e+": "+n+" [ "+h.min+" -- "+f+" -- "+h.max+" ]"),void("x"===e?c.scrollLeft+=g:c.scrollTop+=g)}}}};h("x",a,s,c),h("y",u,p,m)}else n.Focus(e);this.m_inFocusCallType=o}else n.Click(e)}else T("NavArea.SetFocus ** LOST ELEMENT ** ("+this.m_navAreaDivRef.current.id+") "+R(t),e)},t.prototype.UpdateFocus=function(e,n){if(null==n&&null!=e&&e!=this.m_focusedHtmlElement&&(n=B(e)),T("NavArea.UpdateFocus ("+this.props.id+") "+R(n),e),e!=this.m_focusedHtmlElement){T("+ updating last focus element");var o=t.FindAnchorElement(e);if(null!=o){var r=B(o);this.m_focusPosOffsetFromAnchorElement=u(r,n)}else this.m_focusPosOffsetFromAnchorElement=null;this.m_focusedHtmlElement=e,this.m_focusPos=null!=n?n:null}var i=ee(e);i instanceof oe&&i.GotFocus(),this.UpdateFocusMarker(!1)},t.prototype.UpdateFocusMarker=function(e){if(T("NavArea.UpdateFocusMarker "+G(this.m_navAreaDivRef.current)),null!=this.m_focusMarker){var n=t.GetIsDoingKeyNav(this.m_docNavState);this.m_focusMarker.HandleOnFocusChanged(e,this.m_focusedHtmlElement,n,this.GetFocusPos()),null!=this.m_pointerFocusMarkerRef.current&&this.m_pointerFocusMarkerRef.current.HandleOnFocusChanged(e,this.m_focusedHtmlElement,n,this.GetFocusPos())}},t.prototype.GetFocusPos=function(){var e=this.m_navAreaDivRef.current,n=this.m_focusedHtmlElement,o=this.m_focusPosOffsetFromAnchorElement;if(e&&n&&e.contains(n)&&o){var r=t.FindAnchorElement(n);if(r)return p(B(r),o)}return this.m_focusPos},t.prototype.FindBestNavStopFocus=function(e,n,o){var r="NavArea.FindBestNavStopFocus";if(!e)return null;var i=e.ownerDocument;if(!i)return null;T(r+" #"+e.id+".'"+e.className+"'");var a=this.m_focusClaimElement;if(this.m_focusClaimElement=void 0,null!=a&&i.contains(a)&&e.contains(a)&&a.getAttribute("data-nav")===O.Stop)return{htmlElement:a,pos:B(a)};var s=this.m_focusedHtmlElement,c=this.GetFocusPos();if(s&&i.contains(s)&&e.contains(s)&&s.getAttribute("data-nav")===O.Stop)return{htmlElement:s,pos:c||B(s)};var p=Object(b.m)(e,"data-nav").filter((function(e){return k(e)&&"true"===e.getAttribute("data-nav-preferred")}));if(p.length>0){var m=p[0],d=m.getAttribute("data-nav");if(d===O.Group){var h=this.FindBestNavStopFocus(m,n,o);if(h)return h}else if(d===O.Stop){return{htmlElement:m,pos:B(m)}}}var f=Array.from(e.querySelectorAll("[data-nav='"+O.Stop+"'],[data-nav='"+O.Click+"]")).filter((function(e){return k(e)}));if(!f||0===f.length)return null;var g=t.GetNavAreaObjects(e,r,{target:!0,activeNavArea:!0}),v=g.activeNavArea,y=(g.activeNavAreaElement,g.dn);if(void 0===y)return null;if(v.props.initFromBoundary&&void 0!==n&&void 0!==o){var S="x"===n?"data-nav-xorder":"y"===n?"data-nav-yorder":void 0,C=e.getAttribute(S);if(!(C===te.Geometry||null==C)){var I=C===te.ReverseDomOrder!==(-1===o)?f[f.length-1]:f[0];return{htmlElement:I,pos:B(I)}}for(var E=-1===o?"max":"min",w=null,M=1/0,D=0,j=f;D<j.length;D++){var G=o*N(H=j[D])[n][E];G<M&&(M=G,w=H)}if(null!==w)return{htmlElement:w,pos:B(w)}}var R,A=y.m_navAreaStack,L=Object(_.e)(A,(function(e){return null!==e.m_focusPos}));if(L){for(var P=L.GetFocusPos(),F=Number.POSITIVE_INFINITY,x=null,V=0,U=f;V<U.length;V++){var H,W=B(H=U[V]),z=(R=void 0,R=u(P,W),Math.sqrt(l(R,R)));z<F&&(F=z,x=H)}if(x)return{htmlElement:x,pos:B(x)}}var q=f[0];return q?{htmlElement:q,pos:B(q)}:(T("+ found no nav stop."),null)},t.prototype.FindNextNavStop=function(e,n){T("NavArea.FindNextNavStop ("+this.props.id+")");var o=this.m_navAreaDivRef.current;if(!o)return null;var r=o.ownerDocument;if(!r||r!==this.m_document||!r.contains(o))return null;var i,a,s=null,c=this.GetFocusController().GetFocus();if(k(c)&&r.contains(c)&&c!==o&&o.contains(c)){var l=null!==this.m_focusPos&&this.m_focusedHtmlElement===c&&this.GetFocusPos()||B(c),u=t.FindNextNavStopWithinAndAcrossContainers(o,c,l,e,n);if(!u){T("NavArea.FindNextNavStop: Navigated to self (shouldn't happen!); retrying");var p=B(c);u=t.FindNextNavStopWithinAndAcrossContainers(o,c,p,e,n)}u&&(s=u)}else s=this.FindBestNavStopFocus(this.m_navAreaDivRef.current,e,n);if(null!==s){var m=r.defaultView;if(!m)return null;var d=parseFloat(m.getComputedStyle(r.firstElementChild).zoom)||1,f={x:{min:-40*d,max:(m.innerWidth+40)*d},y:{min:-40*d,max:(m.innerHeight+40)*d}},_=N(s.onscreenTestElement||s.htmlElement);if(h((i=f).x,(a=_).x)&&h(i.y,a.y))return s}return null},t.prototype.Register=function(){T("NavArea.Register ("+this.props.id+")");var e=this.GetElementDoc("NavArea.Register"),n=e.thisElement,o=e.doc;if(null!=o){var r=function(){var e=t.GetDocumentNavState(o);if(null!=e)return e;T("+ creating new DocumentNavState");var n=new ae(o);return t.AddEventListeners(o),t.sm_documentStates.set(o,n),n}();this.m_document=o,this.m_docNavState=r;var i=this.props.focusController||r.m_defaultFocusController;null!=i&&(r.m_focusControllers.has(i)||(i.AddFocusListener(t.HandleFocusControllerOnFocus),i.AddBlurListener(t.HandleFocusControllerOnBlur)),r.m_focusControllers.add(i)),this.m_focusController=i;var a=this.props.focusMarker||t.sm_defaultFocusMarker||(null!=this.m_boxFocusMarker?this.m_boxFocusMarker:this.m_boxFocusMarker=new K(this.m_boxFocusMarkerDivRef));null!=a&&r.m_focusMarkers.add(a),this.m_focusMarker=a,r.m_elementNavAreaMap.set(n,this),this.props.startInactive||this.Activate()}},t.prototype.Unregister=function(){T("NavArea.Unregister ("+this.props.id+")");var e=this.GetElementDocState("NavArea.Unregister"),n=e.thisElement,o=e.doc,r=e.dn;if(null!=r){this.Deactivate(),r.m_elementNavAreaMap.delete(n);var i=this.m_focusMarker;null!=i&&r.m_focusMarkers.delete(i);var a=this.m_focusController;null!=a&&(r.m_focusControllers.delete(a),r.m_focusControllers.has(a)||(a.RemoveFocusListener(t.HandleFocusControllerOnFocus),a.RemoveBlurListener(t.HandleFocusControllerOnBlur))),r.isEmpty&&(t.RemoveEventListeners(o),t.sm_documentStates.delete(o))}},t.prototype.componentDidMount=function(){T("NavArea.componentDidMount ("+this.props.id+")"),this.Register()},t.prototype.componentWillUnmount=function(){T("NavArea.componentWillUnmount ("+this.props.id+")"),this.Unregister()},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(e.initFromBoundary,e.onActivate,e.onDeactivate,e.onGoBack,e.onHome,e.focusController,e.focusMarker,e.startInactive),s=Object(o.f)(e,["className","children","initFromBoundary","onActivate","onDeactivate","onGoBack","onHome","focusController","focusMarker","startInactive"]),c=M.IsNavEnabled,l=M.IsPointerVisible,u=M.IsDefaultFocusMarkerVisible;return c?r.createElement(F.Provider,{value:this},r.createElement("div",Object(o.a)({"data-nav":O.Area,"data-nav-area-active":"false","data-nav-area-pass":i?"true":void 0,ref:this.m_navAreaDivRef,className:Object(a.a)(w,t)},s),c&&l&&r.createElement(q,{ref:this.m_pointerFocusMarkerRef,className:"nav-area-pointer-fm",style:{margin:0,padding:0,background:"linear-gradient( -45deg, rgba( 0, 0, 0, 0 ) 0%, rgba( 0, 0, 0, 0 ) 50%, rgba( 255, 0, 0, 0.95 ) 75% )",borderTop:"3px solid black",borderLeft:"3px solid black",width:"30px",height:"30px",zIndex:1e6}}),c&&u&&r.createElement("div",{ref:this.m_boxFocusMarkerDivRef,className:"nav-area-box-fm",style:{position:"absolute",boxSizing:"border-box",pointerEvents:"none",margin:"0",border:"4px solid magenta",padding:"4px",width:"10px",height:"10px",zIndex:1e5,willChange:"left, top, width, height"}}),n)):r.createElement("div",Object(o.a)({ref:this.m_navAreaDivRef,className:t},s),n)},t.sm_documentStates=new Map,t.sm_bIsDoingKeyNav=!0,t.k_EventListeners=[["keydown",t.HandleAllOnKeyDown],["scroll",t.HandleAllOnScroll],["mousedown",t.HandleAllOnMouseDown],["click",t.HandleAllOnClick],["animationstart",t.HandleAllOnAnimationStart],["animationend",t.HandleAllOnAnimationEnd],["transitionstart",t.HandleAllOnTransitionStart],["transitionend",t.HandleAllOnTransitionEnd]],t.k_KeyNavigationDirections={ArrowLeft:["x",-1],ArrowRight:["x",1],ArrowUp:["y",-1],ArrowDown:["y",1]},Object(o.c)([j],t.prototype,"HandleKeyDown",null),Object(o.c)([j],t.prototype,"GetFocusedElement",null),Object(o.c)([j],t.prototype,"ClickFocusedElement",null),Object(o.c)([j],t.prototype,"Blur",null),Object(o.c)([j],t.prototype,"Activate",null),Object(o.c)([j],t.prototype,"Deactivate",null),Object(o.c)([j],t.prototype,"ClaimFocus",null),Object(o.c)([j],t.prototype,"SetFocus",null),Object(o.c)([j],t.prototype,"UpdateFocus",null),Object(o.c)([j],t.prototype,"UpdateFocusMarker",null),Object(o.c)([j],t.prototype,"FindBestNavStopFocus",null),Object(o.c)([j],t.prototype,"FindNextNavStop",null),Object(o.c)([j],t.prototype,"Register",null),Object(o.c)([j],t.prototype,"Unregister",null),Object(o.c)([j],t.prototype,"componentDidMount",null),Object(o.c)([j],t.prototype,"componentWillUnmount",null),Object(o.c)([j],t,"FocusWithin",null),Object(o.c)([j],t,"HandleKeyDown",null),Object(o.c)([j],t,"GetScrollOffset",null),Object(o.c)([j],t,"UpdateFocusPosAfterLayoutChange",null),Object(o.c)([j],t,"FindNextNavStopInContainer",null),Object(o.c)([j],t,"FindNextNavStopWithinAndAcrossContainers",null),Object(o.c)([j],t,"HandleAllOnKeyDown",null),Object(o.c)([j],t,"HandleAllOnScroll",null),Object(o.c)([j],t,"HandleAllOnAnimationStart",null),Object(o.c)([j],t,"HandleAllOnAnimationEnd",null),Object(o.c)([j],t,"HandleAllOnTransitionStart",null),Object(o.c)([j],t,"HandleAllOnTransitionEnd",null),Object(o.c)([j],t,"HandleAllOnMouseDown",null),Object(o.c)([j],t,"HandleAllOnClick",null),Object(o.c)([j],t,"HandleFocusControllerOnFocus",null),Object(o.c)([j],t,"HandleFocusControllerOnBlur",null),t}(r.Component)},hx5d:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var o=n("mrSG"),r=n("q1tI"),i=n("2vnA"),a=n("TyAF"),s=n("1VtQ"),c=n("vDqi"),l=n.n(c),u=n("nDwt"),p=n("E7zH"),m=n("oh5H"),d=n("1n9R"),h=n("MsQV"),f=n("4HGb"),_=n("Dss5"),g=n("4nBw"),b=function(){function e(){this.m_mapChats=new Map}return e.prototype.GetOrCreateChat=function(e,t){var n=this.m_mapChats.get(e)||this.m_mapChats.get(t);return n||(n=new v,this.m_mapChats.set(e||t,n)),n},Object(o.c)([i.B],e.prototype,"m_mapChats",void 0),e}(),v=function(){function e(){this.m_ulBroadcastChannelID="",this.m_ulChatID="",this.m_strFlairGroupID="",this.m_bAutoScroll=!0,this.m_ulBroadcastID="",this.m_ulBroadcastSteamID="",this.m_tsFirstRequest=null,this.m_nFromFirstRequestMS=0,this.m_nNextChatTS=0,this.m_cConsecutiveErrors=0,this.m_nNudgeFactorMS=0,this.m_nLastSleepMS=0,this.m_bReconnecting=!1,this.m_unInstanceID=Math.floor(4294967296*Math.random()),this.m_strUserSteamID="",this.m_regexUserEmoticons=null,this.m_chatScheduledFunc=null,this.m_webAPIInterface=null,this.m_mapMutedUsers={},this.m_mapChannelModeratorUsers=new Map,this.m_nRateLimitSeconds=0,this.m_bRateLimited=!1,this.m_rgChatMessages=[],this.m_webAPIInterface=new g.a(d.c.WEBAPI_BASE_URL,d.i.webapi_token)}return e.prototype.GetBroadcastSteamID=function(){return this.m_ulBroadcastSteamID},e.prototype.GetUserSteamID=function(){return this.m_strUserSteamID},e.prototype.StartForSteamID=function(e,t){this.m_webAPIInterface=new g.a(d.c.WEBAPI_BASE_URL,d.i.webapi_token),this.m_ulBroadcastSteamID=e,this.m_ulBroadcastID=t,this.RequestChatInfo()},e.prototype.StartForChannel=function(e){this.m_webAPIInterface=new g.a(d.c.WEBAPI_BASE_URL,d.i.webapi_token),this.m_ulBroadcastChannelID=e,this.m_strUserSteamID=d.i.steamid,this.JoinChannelChat()},e.prototype.Stop=function(){this.m_chatScheduledFunc&&this.m_chatScheduledFunc.Cancel()},e.prototype.SendMessage=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,p=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(0==(t=e.trim()).length)return[2];o.label=1;case 1:return o.trys.push([1,6,,7]),n=void 0,r=void 0,i=void 0,this.m_webApiToken?((a=new FormData).append("chat_id",this.m_ulChatID),a.append("message",t),a.append("instance_id",this.m_unInstanceID.toString()),[4,l.a.post(d.c.WEBAPI_BASE_URL+"IBroadcastService/PostChatMessage/v0001?access_token="+this.m_webApiToken,a)]):[3,3];case 2:return r=o.sent(),i=r.data&&r.data.response,[3,5];case 3:return(s=f.b.Init(u.e)).SetBodyFields({chat_id:this.m_ulChatID,message:t,instance_id:this.m_unInstanceID.toString()}),[4,u.a.PostChatMessage(this.m_webAPIInterface.GetServiceTransport(),s)];case 4:n=o.sent(),i={result:n.GetEResult(),cooldown_time_seconds:n.Body().cooldown_time_seconds(),in_game:n.Body().in_game(),persona_name:n.Body().persona_name()},o.label=5;case 5:return i&&i.result&&1!=i.result?(c="",c=17==i.result?Object(m.d)("#BroadcastChat_YouMuted"):84==i.result?Object(m.d)("#BroadcastChat_Cooldown",i.cooldown_time_seconds):Object(m.d)("#BroadcastChat_FailedToSendMsg",t),this.m_rgChatMessages.push({type:h.a.Error,msg:c,client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:i.in_game,persona_name:i.persona_name,steamid:""}),[2]):(this.m_nRateLimitSeconds||(this.m_nRateLimitSeconds=i.cooldown_time_seconds),this.m_nRateLimitSeconds&&(this.m_bRateLimited=!0,setTimeout((function(){return p.m_bRateLimited=!1}),1e3*this.m_nRateLimitSeconds)),[3,7]);case 6:return o.sent(),this.m_rgChatMessages.push({type:h.a.Error,msg:Object(m.d)("#BroadcastChat_FailedToSendMsg",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 7:return[2]}}))}))},e.prototype.RequestChatInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:this.m_cConsecutiveErrors=0,this.m_bReconnecting=!1,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.a.get(d.c.CHAT_BASE_URL+"broadcast/getchatinfo",{params:{steamid:this.m_ulBroadcastSteamID,broadcastid:this.m_ulBroadcastID,sessionid:d.c.SESSIONID},withCredentials:!0})];case 2:return e=o.sent(),t=e.data,this.m_strChatURL=t.view_url_template,this.m_ulChatID=t.chat_id,this.m_strFlairGroupID=t.flair_group_ids&&t.flair_group_ids[0],t.blocked&&console.log("User is blocked from chat"),t.steamid&&(this.m_strUserSteamID=t.steamid),t.token&&(this.m_webApiToken=t.token),t.emoticons&&this.SetOwnedEmoticons(t.emoticons),this.m_rgChatMessages.push({type:h.a.Notification,msg:Object(m.d)("#BroadcastChat_DefaultMessage"),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),this.m_chatScheduledFunc=new p.b,this.m_chatScheduledFunc.Schedule(0,this.RequestLoop),[3,4];case 3:return n=o.sent(),console.error(n),console.log("Failed to get chat info!"),[3,4];case 4:return[2]}}))}))},e.prototype.JoinChannelChat=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),(e=f.b.Init(_.d)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID}),[4,_.e.JoinChat(this.m_webAPIInterface.GetServiceTransport(),e)];case 1:return(t=o.sent()).Body().chat_id&&t.Body().view_url_template?(this.m_strChatURL=t.Body().view_url_template(),this.m_ulChatID=t.Body().chat_id(),this.m_strFlairGroupID=t.Body().flair_group_ids()&&t.Body().flair_group_ids()[0],this.FetchChatModerators(),this.m_rgChatMessages=[],this.m_rgChatMessages.push({type:h.a.Notification,msg:Object(m.d)("#BroadcastChat_DefaultMessage"),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),this.m_chatScheduledFunc=new p.b,this.m_chatScheduledFunc.Schedule(0,this.RequestLoop),[3,3]):(console.log("Failed to join channel chat"),[2]);case 2:return n=o.sent(),console.error(n),console.log("Failed to join chat!"),[3,3];case 3:return[2]}}))}))},e.prototype.FetchChatModerators=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(e=f.b.Init(_.c)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID}),[4,_.e.GetChatModerators(this.m_webAPIInterface.GetServiceTransport(),e)];case 1:return t=o.sent(),n=t.Body().results(),r=new Map,n.forEach((function(e){r.set(e.steamid(),!0)})),this.m_mapChannelModeratorUsers=r,[2]}}))}))},e.prototype.RequestLoop=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,c,u,p,d=this;return Object(o.e)(this,(function(f){switch(f.label){case 0:e={},(t=this.m_strChatURL.replace("{0}",this.m_nNextChatTS.toString()))==this.m_strChatURL&&this.m_nNextChatTS>0&&(e.t=this.m_nNextChatTS),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,l.a.get(t,{params:e})];case 2:if(n=f.sent(),r=n.data,this.m_cConsecutiveErrors=0,i=r.messages.map((function(e){return Object(o.a)(Object(o.a)({},e),{type:h.a.Chat,client_ts:Number(new Date)})})).filter((function(e){return!d.IsUserMutedLocally(e.steamid)})),(p=this.m_rgChatMessages).push.apply(p,i),a=this.m_bAutoScroll?150:300,this.m_rgChatMessages.length>a&&this.m_rgChatMessages.splice(0,this.m_rgChatMessages.length-a),r.muted)for(c=0;c<r.muted.length;c++)s=r.muted[c].muted==this.m_strUserSteamID?Object(m.d)("#BroadcastChat_YouMuted",r.muted[c].persona_name):Object(m.d)("#BroadcastChat_UserMuted",r.muted[c].persona_name),this.m_rgChatMessages.push({type:h.a.Notification,msg:s,client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""});if(r.remove_msgs)for(c=0;c<r.remove_msgs.length;c++)this.RemoveUserMessagesLocal(r.remove_msgs[c].steamid);if(u=0,null==this.m_tsFirstRequest||0==this.m_nNextChatTS||r.initial_delay){if("undefined"===r.initial_delay)return console.log("Need initial_delay to know when to request first chat message"),[2];this.m_tsFirstRequest=performance.now()+r.initial_delay,this.m_nFromFirstRequestMS=0,this.m_nNextChatTS=r.next_request,u=r.initial_delay}else{if(r.next_request<this.m_nNextChatTS)return console.log("Next request in past"),[2];this.m_nFromFirstRequestMS+=r.next_request-this.m_nNextChatTS,this.m_nNextChatTS=r.next_request,u=this.m_tsFirstRequest+this.m_nFromFirstRequestMS-performance.now()+this.m_nNudgeFactorMS}return this.m_bReconnecting&&(this.m_bReconnecting=!1),this.m_nLastSleepMS=u,u<0&&(u=0),this.m_chatScheduledFunc.Schedule(u,this.RequestLoop),[3,4];case 3:if(f.sent(),console.log("Failed to get chat messages. Previous sleep set to: "+this.m_nLastSleepMS+" firstReq: "+this.m_tsFirstRequest+" firstFromRequest: "+this.m_nFromFirstRequestMS+" nudge: "+this.m_nNudgeFactorMS),this.m_cConsecutiveErrors++,this.m_nNudgeFactorMS+=10,this.m_cConsecutiveErrors>=4){if(null==this.m_tsFirstRequest)return this.m_rgChatMessages.push({type:h.a.Error,msg:Object(m.d)("#BroadcastChat_UnableToJoinChat"),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[2];this.m_cConsecutiveErrors=0,this.m_bReconnecting=!0,this.SyncChat()}return this.m_chatScheduledFunc.Schedule(500,this.RequestLoop),[3,4];case 4:return[2]}}))}))},e.prototype.GetUserEmoticons=function(){return this.m_regexUserEmoticons},e.prototype.SetOwnedEmoticons=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.length>=2&&":"==o[0]?t.push(o.substr(1,o.length-2)):t.push(o)}var r=":("+t.join("|")+"):";this.m_regexUserEmoticons=new RegExp(r,"g")},e.prototype.UpdateBroadcastChatModerator=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!this.m_ulBroadcastChannelID)return[3,6];o.label=1;case 1:return o.trys.push([1,4,,5]),(r=f.b.Init(_.b)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID,moderator_steamid:e,undo:!t}),[4,_.e.AddChatModerator(this.m_webAPIInterface.GetServiceTransport(),r)];case 2:return o.sent(),this.m_rgChatMessages.push({type:h.a.Notification,msg:"Moderator '"+n+"' "+(t?"added.":"removed.")}),[4,this.FetchChatModerators()];case 3:return o.sent(),[3,5];case 4:return o.sent(),this.m_rgChatMessages.push({type:h.a.Error,msg:"Failed to "+(t?"assign":"remove")+" '"+n+"' as moderator!"}),[3,5];case 5:return[3,10];case 6:(i=new FormData).append("broadcaststeamid",this.m_ulBroadcastSteamID),i.append("moderatorsteamid",e),i.append("bAdd",t?"1":"0"),i.append("sessionid",d.c.SESSIONID),o.label=7;case 7:return o.trys.push([7,9,,10]),[4,l.a.post(d.c.CHAT_BASE_URL+"broadcast/ajaxupdatechannelmod",i)];case 8:return o.sent(),this.m_mapChannelModeratorUsers.set(e,t),this.m_rgChatMessages.push({type:h.a.Notification,msg:"Moderator '"+n+"' "+(t?"added.":"removed.")}),[3,10];case 9:return o.sent(),this.m_rgChatMessages.push({type:h.a.Error,msg:"Failed to "+(t?"assign":"remove")+" '"+n+"' as moderator!"}),[3,10];case 10:return[2]}}))}))},e.prototype.UpdateUserChatBan=function(e,t,n,r,i,a){return Object(o.b)(this,void 0,void 0,(function(){var s,c,u,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:return s=this.m_ulBroadcastSteamID,c=this.m_strUserSteamID,this.m_ulBroadcastChannelID?((u=f.b.Init(_.a)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID,chatter_steamid:e,duration:3600*n,permanent:r,undo:a}),[4,_.e.AddChatBan(this.m_webAPIInterface.GetServiceTransport(),u)]):[3,2];case 1:return o.sent(),[3,6];case 2:(p=new FormData).append("broadcaststeamid",s),p.append("issuersteamid",c),p.append("chattersteamid",e),p.append("bantype",t),p.append("duration",n.toString()),p.append("perm",r?"1":"0"),p.append("sessionid",d.c.SESSIONID),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,l.a.post(d.c.CHAT_BASE_URL+"broadcast/ajaxupdateusermute",p)];case 4:return o.sent(),0==t?delete this.m_mapMutedUsers[e]:this.m_mapMutedUsers[e]=i,[3,6];case 5:return o.sent(),console.log("Failed to update mute for "+i),[3,6];case 6:return[2]}}))}))},e.prototype.MuteUserForSession=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(e==this.m_strUserSteamID)return[2];if(this.m_ulBroadcastSteamID==e)return[2];if(n=this.m_ulBroadcastSteamID==this.m_strUserSteamID,this.m_mapMutedUsers[e])return[3,7];this.m_mapMutedUsers[e]=t,o.label=1;case 1:return o.trys.push([1,6,,7]),this.m_webApiToken?((r=new FormData).append("chat_id",this.m_ulChatID),r.append("user_steamid",e),r.append("muted","1"),[4,l.a.post(d.c.WEBAPI_BASE_URL+"IBroadcastService/MuteBroadcastChatUser/v0001/?access_token="+this.m_webApiToken,r)]):[3,3];case 2:return o.sent(),[3,5];case 3:return(i=f.b.Init(u.d)).SetBodyFields({chat_id:this.m_ulChatID,user_steamid:e,muted:!0}),[4,u.a.MuteBroadcastChatUser(this.m_webAPIInterface.GetServiceTransport(),i)];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return o.sent(),n&&(this.m_rgChatMessages.push({type:h.a.Error,msg:Object(m.d)("#BroadcastChat_UserMuteFailed",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),delete this.m_mapMutedUsers[e]),[3,7];case 7:return n||this.m_rgChatMessages.push({type:h.a.Notification,msg:Object(m.d)("#BroadcastChat_UserMutedLocal",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[2]}}))}))},e.prototype.UnmuteUserForSession=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(e==this.m_strUserSteamID)return[2];if(this.m_mapMutedUsers[e]&&delete this.m_mapMutedUsers[e],!(this.m_ulBroadcastSteamID==this.m_strUserSteamID))return[3,8];o.label=1;case 1:return o.trys.push([1,6,,7]),this.m_webApiToken?((n=new FormData).append("chat_id",this.m_ulChatID),n.append("user_steamid",e),n.append("muted","0"),[4,l.a.post(d.c.WEBAPI_BASE_URL+"IBroadcastService/MuteBroadcastChatUser/v0001/?access_token="+this.m_webApiToken,n)]):[3,3];case 2:return o.sent(),[3,5];case 3:return(r=f.b.Init(u.d)).SetBodyFields({chat_id:this.m_ulChatID,user_steamid:e,muted:!1}),[4,u.a.MuteBroadcastChatUser(this.m_webAPIInterface.GetServiceTransport(),r)];case 4:o.sent(),o.label=5;case 5:return this.m_rgChatMessages.push({type:h.a.Notification,msg:Object(m.d)("#BroadcastChat_UserUnmutedLocal",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 6:return o.sent(),this.m_rgChatMessages.push({type:h.a.Error,msg:Object(m.d)("#BroadcastChat_UserUnmuteFailed",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 7:return[3,9];case 8:this.m_rgChatMessages.push({type:h.a.Notification,msg:Object(m.d)("#BroadcastChat_UserUnmutedLocal",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),o.label=9;case 9:return[2]}}))}))},e.prototype.RemoveUserMessagesLocal=function(e){this.m_rgChatMessages=this.m_rgChatMessages.filter((function(t){return t.steamid!==e}))},e.prototype.RemoveUserMessagesServer=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(e==this.m_strUserSteamID)return[2];o.label=1;case 1:return o.trys.push([1,6,,7]),this.m_webApiToken?((n=new FormData).append("chat_id",this.m_ulChatID),n.append("user_steamid",e),[4,l.a.post(d.c.WEBAPI_BASE_URL+"IBroadcastService/RemoveUserChatText/v0001/?access_token="+this.m_webApiToken,n)]):[3,3];case 2:return o.sent(),[3,5];case 3:return(r=f.b.Init(u.f)).SetBodyFields({chat_id:this.m_ulChatID,user_steamid:e}),[4,u.a.RemoveUserChatText(this.m_webAPIInterface.GetServiceTransport(),r)];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return o.sent(),this.m_rgChatMessages.push({type:h.a.Error,msg:Object(m.d)("#BroadcastChat_RemoveMessagesFailed",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 7:return[2]}}))}))},e.prototype.UpdateChatMessageFlair=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_webApiToken?((t=new FormData).append("chat_id",this.m_ulChatID),t.append("flair","^"+this.m_strFlairGroupID+"^:"+e+":"),[4,l.a.post(d.c.WEBAPI_BASE_URL+"IBroadcastService/UpdateChatMessageFlair/v0001/?access_token="+this.m_webApiToken,t)]):[3,2];case 1:return o.sent(),[3,4];case 2:return(n=f.b.Init(u.g)).SetBodyFields({chat_id:this.m_ulChatID,flair:"^"+this.m_strFlairGroupID+"^:"+e+":"}),[4,u.a.UpdateChatMessageFlair(this.m_webAPIInterface.GetServiceTransport(),n)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},e.prototype.IsUserMutedLocally=function(e){return Boolean(this.m_mapMutedUsers[e])},e.prototype.IsUserChannelModerator=function(e){return this.m_mapChannelModeratorUsers.get(e)},e.prototype.IsUserBroadcaster=function(e){return e===this.m_ulBroadcastSteamID},e.prototype.SyncChat=function(){this.m_tsFirstRequest=null,this.m_nFromFirstRequestMS=0,this.m_nNextChatTS=0,this.m_rgChatMessages=[]},Object(o.c)([i.B],e.prototype,"m_mapChannelModeratorUsers",void 0),Object(o.c)([i.B],e.prototype,"m_nRateLimitSeconds",void 0),Object(o.c)([i.B],e.prototype,"m_bRateLimited",void 0),Object(o.c)([i.B],e.prototype,"m_rgChatMessages",void 0),Object(o.c)([s.a],e.prototype,"FetchChatModerators",null),Object(o.c)([s.a],e.prototype,"RequestLoop",null),Object(o.c)([s.a],e.prototype,"MuteUserForSession",null),e}(),y=new b,S=n("8o0Y"),C=n("EGkk"),O=n("dcQ8"),I=n.n(O),E=n("UDpV"),w=n.n(E),M=n("QxgC"),D=n("e2SU"),T=n("tY0L"),j=n("Jdiq"),G=n("syWt"),R=new RegExp("ː([^ː]*)ː","g"),k=(new RegExp("(https?://[^ '\"<>]*)","gi"),new RegExp("^https?://(?:[^/?#]+?\\.)?(?:valvesoftware|steamcommunity|steampowered)\\.com(?:/?#|$)","i")),A=function(e){function t(t){var n=e.call(this,t)||this;return n.m_chat=null,n.messagesContainer=r.createRef(),n.textInput=r.createRef(),n.state={message:""},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.StartChat()},t.prototype.componentDidUpdate=function(e){this.m_chat&&this.m_chat.m_bAutoScroll&&this.ScrollToBottom(),this.props.steamID===e.steamID&&this.props.broadcastID===e.broadcastID&&this.props.broadcastChannelID===e.broadcastChannelID||this.StartChat()},t.prototype.componentWillUnmount=function(){this.m_chat&&this.m_chat.Stop()},t.prototype.StartChat=function(){this.m_chat&&this.m_chat.Stop(),this.m_chat=y.GetOrCreateChat(this.props.broadcastChannelID,this.props.steamID),this.props.broadcastChannelID?this.m_chat.StartForChannel(this.props.broadcastChannelID):this.props.steamID&&this.props.steamID&&this.props.broadcastID&&(this.m_chat.StartForSteamID(this.props.steamID,this.props.broadcastID),this.ScrollToBottom())},t.prototype.ChatBoxChange=function(e){this.setState({message:e.target.value})},t.prototype.ChatBoxKeypress=function(e){!!e.shiftKey||13!==e.charCode||(this.SendMessage(),e.preventDefault())},t.prototype.SendMessage=function(e){this.m_chat.m_bRateLimited||(this.m_chat.SendMessage(this.state.message),this.setState({message:""}),e&&e.preventDefault())},t.prototype.IsTrustedDomain=function(e){return!!e.match(k)},t.prototype.AddLinksEmoticons=function(e,t){t&&this.m_chat.GetUserEmoticons();for(var n=e.split(R),o=[],i=0;i<n.length;i+=1)i%2==1?o.push(r.createElement(T.b,{emoticonHoverStore:j.b,key:i,emoticon:n[i],large:!0})):o.push(n[i]);return o},t.prototype.HandleScroll=function(e){var t=e.currentTarget.scrollTop+e.currentTarget.clientHeight>=e.currentTarget.scrollHeight-6;this.m_chat&&(this.m_chat.m_bAutoScroll=t)},t.prototype.ScrollToBottom=function(){this.messagesContainer&&this.messagesContainer.current&&(this.messagesContainer.current.scrollTop=this.messagesContainer.current.scrollHeight)},t.prototype.OnContextMenu=function(e,t){var n=this;if(t.type!==h.a.Chat)return null;var o=[];return d.i&&d.i.is_support||this.m_chat.IsUserBroadcaster(this.m_chat.GetUserSteamID())||this.m_chat.IsUserChannelModerator(this.m_chat.GetUserSteamID())?o.push(r.createElement(C.d,{key:"remove",onSelected:function(){return n.m_chat.RemoveUserMessagesServer(t.steamid,t.persona_name)}},Object(m.d)("#BroadcastChat_RemoveMessages")),r.createElement(C.d,{key:"updatebanh",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,12,!1,t.persona_name)}},Object(m.d)("#BroadcastChat_half_Mute")),r.createElement(C.d,{key:"updateband",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,24,!1,t.persona_name)}},Object(m.d)("#BroadcastChat_day_Mute")),r.createElement(C.d,{key:"updatebanw",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,168,!1,t.persona_name)}},Object(m.d)("#BroadcastChat_week_Mute")),r.createElement(C.d,{key:"updatebanp",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,0,!0,t.persona_name)}},Object(m.d)("#BroadcastChat_perm_Mute")),r.createElement(C.d,{key:"removeban",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,0,0,!1,t.persona_name,!0)}},Object(m.d)("#BroadcastChat_Unmute"))):this.m_chat.IsUserMutedLocally(t.steamid)?o.push(r.createElement(C.d,{key:"unmuteuser",onSelected:function(){return n.m_chat.UnmuteUserForSession(t.steamid,t.persona_name)}},Object(m.d)("#BroadcastChat_UnmuteLocal"))):o.push(r.createElement(C.d,{key:"muteuser",onSelected:function(){return n.m_chat.MuteUserForSession(t.steamid,t.persona_name)}},Object(m.d)("#BroadcastChat_MuteLocal"))),(d.i&&d.i.is_support||this.m_chat.IsUserBroadcaster(this.m_chat.GetUserSteamID()))&&o.push(r.createElement(C.d,{key:"addmod",onSelected:function(){return n.m_chat.UpdateBroadcastChatModerator(t.steamid,!0,t.persona_name)}},Object(m.d)("#BroadcastChat_Add_Moderator")),r.createElement(C.d,{key:"removemod",onSelected:function(){return n.m_chat.UpdateBroadcastChatModerator(t.steamid,!1,t.persona_name)}},Object(m.d)("#BroadcastChat_Remove_Moderator"))),o.length?Object(S.a)(r.createElement(C.c,null,o),e):null},t.prototype.OnEmoticonSelected=function(e,t){void 0===t&&(t=!1),this.setState({message:this.state.message+"ː"+e+"ː"}),this.textInput&&this.textInput.current&&this.textInput.current.focus()},t.prototype.OnFlairSelected=function(e){this.m_chat.UpdateChatMessageFlair(e),this.textInput&&this.textInput.current&&this.textInput.current.focus()},t.prototype.GetTypeClassName=function(e){return e.type===h.a.Notification?I.a.MessageNotification:e.type===h.a.Error?I.a.MessageError:I.a.MessageChat},t.prototype.render=function(){var e=this,t=this.m_chat?this.m_chat.m_rgChatMessages:[];return r.createElement("div",{className:I.a.ChatPanel,style:this.props.hidden?{display:"none"}:void 0},r.createElement(G.b,null),r.createElement("div",{className:I.a.ChatMessages+" "+w.a.minHeightZero,onScroll:this.HandleScroll,ref:this.messagesContainer},t.map((function(t,n){return r.createElement("div",{key:t.instance_id+"_"+t.client_ts+"_"+n,className:e.GetTypeClassName(t),onContextMenu:function(n){return e.OnContextMenu(n,t)}},t.flair&&r.createElement("span",{className:I.a.FlairContainer}," ",e.AddLinksEmoticons(t.flair,!1)),t.type===h.a.Chat&&r.createElement("span",null,r.createElement("a",{className:I.a.MessageName,href:d.c.COMMUNITY_BASE_URL+"profiles/"+t.steamid,target:"_blank",rel:"noopener noreferrer"},t.persona_name)),t.type===h.a.Chat&&e.m_chat.GetBroadcastSteamID()===t.steamid&&r.createElement("span",{className:I.a.MessageNotification+" "+I.a.MessageContents}," ("+Object(m.d)("#BroadcastChat_Broadcaster")+")"),t.type===h.a.Chat&&e.m_chat.m_mapChannelModeratorUsers.get(t.steamid)&&r.createElement("span",{className:I.a.MessageNotification+" "+I.a.MessageContents}," ("+Object(m.d)("#BroadcastChat_Moderator")+")"),r.createElement("span",{className:I.a.MessageContents+" "+(e.AddLinksEmoticons(t.msg,!1).filter((function(e){return e&&"string"==typeof e})).length?"":I.a.EmoticonsOnly)},t.type===h.a.Chat?" : ":"",t.type===h.a.Chat?e.AddLinksEmoticons(t.msg,!1):t.msg))}))),r.createElement(G.a,null),d.i&&d.i.logged_in&&this.m_chat?r.createElement("div",null,r.createElement("div",{className:I.a.ChatEntry},r.createElement("form",{className:""+w.a.chatEntryControls},r.createElement("textarea",{className:w.a.chatTextarea,placeholder:Object(m.d)("#BroadcastChat_EnterResponse"),onKeyPress:this.ChatBoxKeypress,onChange:this.ChatBoxChange,value:this.state.message,ref:this.textInput}),this.m_chat.m_bRateLimited&&r.createElement(N,{nSeconds:this.m_chat.m_nRateLimitSeconds,bRateLimited:this.m_chat.m_bRateLimited}),r.createElement("button",{className:w.a.chatSubmitButton+" "+(this.state.message?"":w.a.disabled),title:Object(m.d)("#ChatEntryButton_Submit"),onClick:this.SendMessage},r.createElement(D.fb,null))),r.createElement("div",{style:{height:"50px"},className:""+w.a.chatEntryActionsContainer},r.createElement("div",{className:w.a.chatEntryActionsGroup},r.createElement(M.a,{disabled:!1,OnEmoticonSelected:this.OnEmoticonSelected,rtLastAckedNewEmoticons:Number.MAX_VALUE,emoticonStore:this.props.emoticonStore,emoticonHoverStore:j.b}),this.m_chat.m_strFlairGroupID&&this.props.emoticonStore.flair_list&&this.props.emoticonStore.GetFlairListByGroupID(this.m_chat.m_strFlairGroupID).length?r.createElement(M.a,{disabled:!1,OnEmoticonSelected:this.OnFlairSelected,rtLastAckedNewEmoticons:Number.MAX_VALUE,emoticonStore:this.props.emoticonStore,emoticonHoverStore:j.b,strFlairGroupID:this.m_chat.m_strFlairGroupID,title:Object(m.d)("#ChatEntryButton_Flair"),buttonIcon:r.createElement(D.e,null)}):null)))):null)},Object(o.c)([i.B],t.prototype,"m_chat",void 0),Object(o.c)([s.a],t.prototype,"StartChat",null),Object(o.c)([s.a],t.prototype,"ChatBoxChange",null),Object(o.c)([s.a],t.prototype,"ChatBoxKeypress",null),Object(o.c)([s.a],t.prototype,"SendMessage",null),Object(o.c)([s.a],t.prototype,"HandleScroll",null),Object(o.c)([s.a],t.prototype,"OnContextMenu",null),Object(o.c)([s.a],t.prototype,"OnEmoticonSelected",null),Object(o.c)([s.a],t.prototype,"OnFlairSelected",null),t=Object(o.c)([a.a],t)}(r.Component),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return r.createElement("div",{className:I.a.TimedProgressBarContainer},r.createElement("div",{className:I.a.wrapper},r.createElement("div",{className:I.a.spinner+" "+I.a.pie,style:{animationDuration:(this.props.nSeconds||0)+"s"}}),r.createElement("div",{className:I.a.filler+" "+I.a.pie,style:{animationDuration:(this.props.nSeconds||0)+"s"}}),r.createElement("div",{className:I.a.mask,style:{animationDuration:(this.props.nSeconds||0)+"s"}})))},t}(r.Component)},ieu3:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return I}));var o=n("mrSG"),r=n("+M9t"),i=n("hReu"),a=n("LAqV"),s=n("YZlK"),c=n("/ZM5"),l=n("gtB6"),u=n("TyAF"),p=n("q1tI"),m=n("1w3K"),d=n("e2SU"),h=n("/IDK"),f=n("oh5H"),_=n("1VtQ"),g=n("bbBM"),b=n("uWOQ"),v=n("tkkQ"),y=n("D3Kh"),S=n("s+DT"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ulSelectedGroupID:""},n}return Object(o.d)(t,e),t.prototype.BindDiv=function(e){this.m_elDiv=e},Object.defineProperty(t.prototype,"div",{get:function(){return this.m_elDiv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"recommendedHeight",{get:function(){return this.m_elDiv.clientHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maximumHeight",{get:function(){return this.recommendedHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumHeight",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.OnGroupSelected=function(e){e==this.state.ulSelectedGroupID?this.setState({ulSelectedGroupID:""}):this.setState({ulSelectedGroupID:e})},t.prototype.render=function(){var e=this,t=this.props.chats.currentChatRoomGroups.sort((function(e,t){return t.time_last_activity-e.time_last_activity}));return p.createElement("div",{className:"ChatRoomList CompactFriendsList",ref:this.BindDiv},0==t.length&&p.createElement("div",{className:"ChatRoomList_Empty"},Object(f.d)("#Chat_ChatRoomList_Empty"),p.createElement("br",null),p.createElement("br",null),Object(f.k)("#Chat_ChatRoomList_Empty_How",p.createElement(b.b,{href:v.a.COMMUNITY_BASE_URL+"my/groups/"},Object(f.d)("#Chat_ChatRoomList_Empty_HowLink")))),t.map((function(t){return p.createElement(O,{key:t.GetGroupID(),group:t,bExpanded:!1,onSelect:e.OnGroupSelected})})),p.createElement("div",{className:"disconnectBlocker"}))},Object(o.c)([_.a],t.prototype,"BindDiv",null),Object(o.c)([_.a],t.prototype,"OnGroupSelected",null),t=Object(o.c)([u.a],t)}(p.Component),O=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bAcceptDrag=!1,n.state={friendDrag:void 0,bStateExpanded:!1,bNonGroupHovered:!1,broadcastInfo:t.group.watching_broadcast_steamid&&y.BroadcastWatchStore.StartInfo(t.group.watching_broadcast_steamid.ConvertTo64BitString())},n}return Object(o.d)(t,e),t.prototype.GetDragDropProps=function(e){void 0===e&&(e=!0);var t={};return e&&(t.onDragEnter=this.OnDragEnter,t.onDragOver=this.OnDragOver,t.onDragLeave=this.OnDragLeave,t.onDrop=this.OnDrop),t.draggable=!0,t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t},t.prototype.OnDragStart=function(e){var t=this.props.group;if(t.BIsClanChatRoom()){var n=a.f.FriendStore.ClanStore.GetClan(t.GetClanID());i.i.DragDropManager.StartDrag({type:"clan",clan:n})}else i.i.DragDropManager.StartDrag({type:"chatroomgroup",group:t})},t.prototype.componentWillUnmount=function(){this.state.broadcastInfo&&y.BroadcastWatchStore.StopInfo(this.state.broadcastInfo)},t.prototype.OnDragEnd=function(e){i.i.DragDropManager.EndDrag()},t.prototype.OnDragEnter=function(e){var t=i.i.DragDropManager.GetDragData();if(t&&"friend"==t.type){var n=t.friend;this.m_bAcceptDrag=!0,e.preventDefault(),this.setState({friendDrag:n})}else this.m_bAcceptDrag=!1;e&&(e.preventDefault(),this.m_bAcceptDrag&&e.stopPropagation())},t.prototype.OnDragOver=function(e){this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())},t.prototype.OnDragLeave=function(e){Object(h.c)(e)&&(this.m_bAcceptDrag=!1,this.state.friendDrag&&this.setState({friendDrag:void 0}))},t.prototype.OnDrop=function(e){var t=i.i.DragDropManager.GetDragData();if(t&&"friend"==t.type){e.preventDefault(),e.stopPropagation();var n=this.props.group.memberList.member_list.slice(),o=t;if(null!=o.friend&&-1!=n.indexOf(o.friend))return;i.i.DragDropManager.SetDropConsumed(),this.props.group.InviteFriend(o.friend.accountid),this.setState({friendDrag:void 0})}},t.prototype.OnClick=function(e){a.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(i.e)(this),this.props.group,!0)},t.prototype.OnToggleSelected=function(e){this.setState({bStateExpanded:!this.state.bStateExpanded}),e.stopPropagation()},t.prototype.OnOpenGroup=function(e){a.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(i.e)(this),this.props.group,!0),e.stopPropagation()},t.prototype.OnContextMenu=function(e){Object(l.b)(e,this.props.group)},t.prototype.OnMouseEnterNonTitle=function(){this.setState({bNonGroupHovered:!0})},t.prototype.OnMouseLeaveNonTitle=function(){this.setState({bNonGroupHovered:!1})},t.prototype.render=function(){var e=this.props.group,t=this.state.bStateExpanded,n=null!==e.watching_broadcast_steamid,r=n&&new S.a(e.watching_broadcast_steamid),i=n&&this.state.broadcastInfo?this.state.broadcastInfo.m_strTitle||this.state.broadcastInfo.m_strAppTitle||Object(f.d)("#PersonaStateWatchingBroadcast_Player",a.f.FriendStore.GetPlayer(r.GetAccountID()).display_name):void 0,c=["ChatRoomListGroupItem"],l=this.props.group.hasVoiceRoom;return l||c.push("NoChannels"),t&&c.push("ShowAllChannels"),this.state.bNonGroupHovered&&c.push("NonGroupHovered"),n&&c.push("HasLinkedBroadcast"),p.createElement("div",Object(o.a)({className:c.join(" ")},this.GetDragDropProps(!0)),p.createElement("div",{className:"ChatRoomListGroupItem_header",onClick:this.OnClick,onContextMenu:this.OnContextMenu},p.createElement(s.a,{group:e,small:!0}),n&&p.createElement("div",{className:"steamTVSubtitle"},p.createElement(d.eb,null),": ",i," "),p.createElement("div",{className:"groupNameStatusContainer"},p.createElement("div",{className:"displayRow"},p.createElement("div",{className:"chatRoomName"},this.props.group.name),p.createElement("div",{className:"ContextMenuButton",onClick:this.OnContextMenu,onMouseEnter:this.OnMouseEnterNonTitle,onMouseLeave:this.OnMouseLeaveNonTitle},p.createElement(d.p,null))),!t&&l&&p.createElement(M,{group:e})),p.createElement(I,{group:e}),l&&p.createElement("div",{onMouseEnter:this.OnMouseEnterNonTitle,onMouseLeave:this.OnMouseLeaveNonTitle},p.createElement(E,{expanded:t,onClick:this.OnToggleSelected}))),l&&p.createElement("div",{className:"detailsView"},p.createElement("div",{className:"ChatRoomListGroupItemChatRooms"},p.createElement(w,{group:e,expanded:t}))))},Object(o.c)([_.a],t.prototype,"OnDragStart",null),Object(o.c)([_.a],t.prototype,"OnDragEnd",null),Object(o.c)([_.a],t.prototype,"OnDragEnter",null),Object(o.c)([_.a],t.prototype,"OnDragOver",null),Object(o.c)([_.a],t.prototype,"OnDragLeave",null),Object(o.c)([_.a],t.prototype,"OnDrop",null),Object(o.c)([_.a],t.prototype,"OnClick",null),Object(o.c)([_.a],t.prototype,"OnToggleSelected",null),Object(o.c)([_.a],t.prototype,"OnOpenGroup",null),Object(o.c)([_.a],t.prototype,"OnContextMenu",null),Object(o.c)([_.a],t.prototype,"OnMouseEnterNonTitle",null),Object(o.c)([_.a],t.prototype,"OnMouseLeaveNonTitle",null),t=Object(o.c)([u.a],t)}(p.Component),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.group,t=this.props.chat;if(e&&!e.hasUnreadChatMessage||t&&!t.has_any_unread_messages)return null;var n=(this.props.className||"")+" ChatUnreadMessageIndicator";return(e&&e.HasUnreadMention||t&&t.has_unread_mention)&&(n+=" UnreadMention"),p.createElement("div",{className:n},p.createElement("div",{className:"chatUnreadCircle"},"@"))},t=Object(o.c)([u.a],t)}(p.Component);function E(e){var t=e.expanded?Object(f.d)("#Chat_ChatRoomListO_OpenGroupCollapse"):Object(f.d)("#Chat_ChatRoomListO_OpenGroupExpand");return p.createElement("div",{className:"openGroupButton",title:t,onClick:e.onClick},p.createElement(d.o,null))}var w=Object(u.a)((function(e){for(var t=[],n=0,o=e.group.voiceRoomList;n<o.length;n++){var r=o[n];(e.expanded||r.voice_active_contains_self)&&t.push(r)}var i=null;return t&&(i=t.map((function(e){return p.createElement(m.CSSTransition,{classNames:"heightcollapseandfade-anim",timeout:300,key:e.unique_id},p.createElement(c.c,{key:e.unique_id,chat:e,bRenameActive:!1,context:"ChatRoomList",onSelect:e.StartVoiceChat}))}))),p.createElement(m.TransitionGroup,null,i)})),M=Object(u.a)((function(e){for(var t=[],n=0,o=e.group.voiceRoomList;n<o.length;n++){var i=o[n];if(!i.voice_active_contains_self){var a=i.voice_active_member_list;if(0!=a.member_count){var s=a.member_list.filter((function(e){return e.is_friend}));0!=s.length&&((s=a.member_list.slice()).sort(r.b.FriendSortByFriendOrNotComparator),t.push({ulRoomID:i.unique_id,rgFriends:s}))}}}return t&&0!=t.length?p.createElement("div",{className:"membersInVoice"},p.createElement("div",{className:"voiceChannelIcon"},p.createElement(d.ob,null)),t.map((function(e){return p.createElement(D,{key:e.ulRoomID,friendsInRoom:e})}))):null})),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.friendsInRoom;return p.createElement("span",{className:"voiceChatGroup"},e.rgFriends.map((function(e){return p.createElement(g.e,{key:e.accountid,friend:e,context:{},disableContextMenu:!1},p.createElement("img",{className:"voiceFriendAvatar"+(e.is_friend?"":" isNotFriend"),src:e.persona.avatar_url,draggable:!1}))})))},t=Object(o.c)([u.a],t)}(p.Component)},kQil:function(e,t,n){"use strict";n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return C})),n.d(t,"e",(function(){return I}));var o=n("mrSG"),r=n("q1tI"),i=n("/IDK"),a=n("oh5H"),s=n("ljid"),c=n("vJVb"),l=n("1VtQ"),u=n("e2SU"),p=n("TyAF"),m=n("QHER"),d=n("Au4U"),h=n.n(d),f=n("XaMz");function _(e,t,n,o,i,a,s){return new Promise((function(c,l){e(r.createElement(v,{strTitle:t,strDescription:n,strOKButtonText:o,strCancelButtonText:i,onOK:c,onCancel:l,bDestructiveWarning:a,children:s}))}))}function g(e,t,n,o,i){return new Promise((function(a,s){e(r.createElement(v,{bAlertDialog:!0,strTitle:t,strDescription:n,strOKButtonText:o,onOK:a,onCancel:a,children:i}))}))}r.Component;function b(e){var t,n={};e.onEscKeypress&&(n.tabIndex=0,n.onKeyDown=function(t){27==t.keyCode&&e.onEscKeypress()},n.onMouseDown=function(t){t.currentTarget!==t.target||e.bDisableBackgroundDismiss||e.onEscKeypress()},t=function(e){e&&(i.e(e,e.ownerDocument.activeElement)||e.focus())});var a=["ModalPosition"];return e.className&&a.push(e.className),e.bDestructiveWarning&&a.push("Destructive"),r.createElement("div",Object(o.a)({className:a.join(" ")},n,{ref:t}),r.createElement("div",{className:"ModalPosition_Content"},!e.hideTopBar&&r.createElement("div",{className:"ModalPosition_TopBar"}),e.onEscKeypress&&!e.bHideCloseIcon&&r.createElement("div",{className:"ModalPosition_Dismiss"},r.createElement("div",{className:"closeButton",onClick:e.onEscKeypress},r.createElement(u.sb,null))),r.createElement(c.a,null,e.children)))}r.Component;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.Cancel=function(){this.props.onCancel&&this.props.onCancel(),this.props.closeModal&&this.props.closeModal()},t.prototype.render=function(){var e=this.props,t=e.strTitle,n=e.strDescription,i=e.strOKButtonText,c=e.strCancelButtonText,l=e.bAlertDialog,u=e.children,p=Object(o.f)(e,["strTitle","strDescription","strOKButtonText","strCancelButtonText","bAlertDialog","children"]),m=i||Object(a.d)("#Button_Close");return r.createElement(y,Object(o.a)({},p),r.createElement(s.m,null," ",t," "),r.createElement(s.b,null,r.createElement(s.c,null,n,u),r.createElement(s.j,null,l?r.createElement(s.x,null,m):r.createElement(s.s,{bOKDisabled:this.props.bOKDisabled,strOKText:i,onCancel:this.Cancel,strCancelText:c}))))},Object(o.c)([l.a],t.prototype,"Cancel",null),t=Object(o.c)([p.a],t)}(r.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.Cancel=function(){this.props.onCancel&&this.props.onCancel(),this.props.closeModal&&this.props.closeModal()},t.prototype.OK=function(){this.props.bOKDisabled||(this.props.onOK&&this.props.onOK(),this.props.closeModal&&this.props.closeModal())},t.prototype.render=function(){return r.createElement(b,{onEscKeypress:this.Cancel,bDestructiveWarning:this.props.bDestructiveWarning,bDisableBackgroundDismiss:this.props.bDisableBackgroundDismiss,bHideCloseIcon:this.props.bHideCloseIcon},r.createElement(s.h,{classNameContent:Object(m.a)("GenericConfirmDialog",this.props.bAllowFullSize&&"DialogContentFullSize",this.props.className),onSubmit:this.OK,bCenterVertically:!0},this.props.children))},Object(o.c)([l.a],t.prototype,"Cancel",null),Object(o.c)([l.a],t.prototype,"OK",null),t=Object(o.c)([p.a],t)}(r.Component),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=Object(o.a)({strTitle:Object(a.d)("#Error_FailureNotice"),strDescription:Object(a.d)("#Error_GenericFailureDescription"),bAlertDialog:!0,bDestructiveWarning:!0,onOK:function(){},onCancel:function(){}},this.props);return r.createElement(v,Object(o.a)({},e))},t=Object(o.c)([p.a],t)}(r.Component),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.ModalManager.modals;e&&e.length?document.body.classList.add(h.a.BodyNoScrollDialog):document.body.classList.remove(h.a.BodyNoScrollDialog)},t.prototype.componentDidMount=function(){this.props.ModalManager.RegisterOverlay(this)},t.prototype.componentWillUnmount=function(){this.props.ModalManager.UnregisterOverlay(this)},t.prototype.OnActiveRef=function(e){if(e){var t=e.firstChild;t&&t.focus&&t.focus()}},t.prototype.render=function(){var e=this,t=this.props.ModalManager.modals;if(!t||!t.length)return null;var n=this.props.ModalManager.active_modal,o=t.map((function(t,o){var i=t==n,a=i?"active":"inactive";return r.createElement("div",{className:Object(m.a)("ModalOverlayContent",a),key:"modal-"+o,ref:i?e.OnActiveRef:null,tabIndex:-1},t.element)}));return r.createElement("div",{className:"FullModalOverlay"},r.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),o)},t}(r.Component),O=function(){function e(){this.m_bUsePopups=!0,this.m_rgModals=[],this.m_ActiveOverlay=null}return e.prototype.RegisterOverlay=function(e){Object(f.a)(!this.m_ActiveOverlay,"Registering second overlay"),this.m_ActiveOverlay=e},e.prototype.UnregisterOverlay=function(e){Object(f.a)(this.m_ActiveOverlay==e,"Active overlay mismatch"),this.m_ActiveOverlay==e&&(this.m_ActiveOverlay=null)},e.prototype.ForceUpdate=function(){var e=this;this.m_ActiveOverlay?window.setTimeout((function(){return e.m_ActiveOverlay.forceUpdate()}),1):Object(f.a)(!1,"Modal action was taken, but there is no <DialogOverlay> element to show it in")},Object.defineProperty(e.prototype,"modals",{get:function(){return this.m_rgModals},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active_modal",{get:function(){return this.m_rgModals.length?this.m_rgModals[this.m_rgModals.length-1]:void 0},enumerable:!1,configurable:!0}),e.prototype.ShowModal=function(e){var t=this,n={element:e};return this.m_rgModals.push(n),this.ForceUpdate(),{Close:function(){var e=t.m_rgModals.indexOf(n);-1!=e&&t.m_rgModals.splice(e,1),t.ForceUpdate()},Update:function(e){n.element=e,t.ForceUpdate()}}},e.prototype.SetUsePopups=function(e){this.m_bUsePopups=e},e.prototype.BUsePopups=function(){return this.m_bUsePopups},e}();function I(e){var t=E.get(e);return t||(t=new O,E.set(e,t)),t}var E=new WeakMap},ljid:function(e,t,n){"use strict";n.d(t,"m",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"n",(function(){return f})),n.d(t,"D",(function(){return g})),n.d(t,"C",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"k",(function(){return S})),n.d(t,"h",(function(){return C})),n.d(t,"x",(function(){return O})),n.d(t,"d",(function(){return I})),n.d(t,"B",(function(){return E})),n.d(t,"l",(function(){return w})),n.d(t,"s",(function(){return M})),n.d(t,"t",(function(){return D})),n.d(t,"e",(function(){return j})),n.d(t,"z",(function(){return G})),n.d(t,"u",(function(){return R})),n.d(t,"o",(function(){return B})),n.d(t,"q",(function(){return L})),n.d(t,"A",(function(){return P})),n.d(t,"i",(function(){return x})),n.d(t,"r",(function(){return K})),n.d(t,"y",(function(){return Y})),n.d(t,"w",(function(){return te})),n.d(t,"v",(function(){return ne})),n.d(t,"a",(function(){return oe}));var o=n("mrSG"),r=n("q1tI"),i=n("e2SU"),a=n("oh5H"),s=n("1VtQ"),c=n("R+Pm"),l=n("QHER"),u=k("DialogHeader"),p=(k("DialogSubHeader"),k("DialogFooter")),m=k("DialogLabel _DialogLayout"),d=k("DialogBodyText"),h=k("DialogBody"),f=k("DialogInnerBody"),_=k("DialogBodyNotificationBar"),g=k("DialogTwoColLayout _DialogColLayout"),b=k("DialogThreeColLayout _DialogColLayout"),v=(k("DialogTwoThirdColLayout _DialogColLayout"),k("DialogColumn _DialogLayout"));function y(e){var t=e.children,n=e.bCenterVertically,i=Object(o.f)(e,["children","bCenterVertically"]),a="DialogContent _DialogLayout"+(e.className?" "+e.className:"");return n&&(a+=" _DialogCenterVertically"),r.createElement("div",Object(o.a)({},i,{className:a}),r.createElement("div",{className:"DialogContent_InnerWidth"},t))}var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnSubmit=function(e){e.preventDefault(),this.props.onSubmit&&this.props.onSubmit(e)},t.prototype.render=function(){return r.createElement("form",Object(o.a)({},this.props,{onSubmit:this.OnSubmit}))},Object(o.c)([s.a],t.prototype,"OnSubmit",null),t}(r.Component);function C(e){var t=e.classNameContent,n=e.bCenterVertically,i=Object(o.f)(e,["classNameContent","bCenterVertically"]);return r.createElement(y,{className:t,bCenterVertically:n},r.createElement(S,Object(o.a)({},i)))}function O(e){e.svgicon;var t,n=Object(o.f)(e,["svgicon"]),i="DialogButton _DialogLayout Primary"+(e.className?" "+e.className:""),a=void 0!==e.svgicon;return a&&(i+=" hasSVGIcon",t=e.svgicon),r.createElement("button",Object(o.a)({type:e.onClick?"button":"submit"},n,{className:i}),a&&r.createElement(t,null),e.children)}function I(e){e.svgicon;var t,n=Object(o.f)(e,["svgicon"]),i="DialogButton _DialogLayout Secondary"+(e.className?" "+e.className:""),a=void 0!==e.svgicon;return a&&(i+=" hasSVGIcon",t=e.svgicon),r.createElement("button",Object(o.a)({type:"button"},n,{className:i}),a&&r.createElement(t,null),e.children)}function E(e){e.svgicon;var t,n=Object(o.f)(e,["svgicon"]),i="TextButton"+(e.className?" "+e.className:""),a=void 0!==e.svgicon;return a&&(i+=" hasSVGIcon",t=e.svgicon),r.createElement("button",Object(o.a)({type:"button"},n,{className:i}),a&&r.createElement(t,null),e.children)}function w(e){var t="DialogHBar"+(e.className?" "+e.className:"");return r.createElement("div",Object(o.a)({},e,{className:t}))}function M(e){return r.createElement(g,null,r.createElement(O,{onClick:e.onOK,disabled:e.bOKDisabled},e.strOKText||Object(a.d)("#Button_Confirm")," "),r.createElement(I,{onClick:e.onCancel},e.strCancelText||Object(a.d)("#Button_Cancel")))}function D(e){return r.createElement(b,null,r.createElement(O,{onClick:e.onOK,disabled:e.bOKDisabled},e.strOKText||Object(a.d)("#Button_Confirm")," "),r.createElement(O,{onClick:e.onUpdate,disabled:e.bUpdateDisabled},e.strUpdateText||Object(a.d)("#Button_Update")," "),r.createElement(I,{onClick:e.onCancel},e.strCancelText||Object(a.d)("#Button_Cancel")))}var T=function(e){function t(t){var n=e.call(this,t)||this;return n.state={checked:t.checked,disabled:t.disabled},n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.checked!=this.props.checked&&this.props.checked!=this.state.checked&&this.setState({checked:this.props.checked}),e.disabled!=this.props.disabled&&this.props.disabled!=this.state.disabled&&this.setState({disabled:this.props.disabled})},t.prototype.shouldComponentUpdate=function(e,t){return e.label!=this.props.label||e.description!=this.props.description||e.onChange!=this.props.onChange||e.disabled!=this.props.disabled||e.checked!=this.state.checked||t.checked!=this.state.checked},Object.defineProperty(t.prototype,"checked",{get:function(){return this.state.checked},enumerable:!1,configurable:!0}),t.prototype.GetElementProps=function(){return{tabIndex:this.props.tabIndex||0,onClick:this.Toggle,onKeyDown:this.KeyDown}},t.prototype.Toggle=function(){if(!this.props.disabled){var e=!this.state.checked;this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},t.prototype.KeyDown=function(e){32==e.keyCode&&(this.Toggle(),e.preventDefault(),e.stopPropagation())},Object(o.c)([s.a],t.prototype,"Toggle",null),Object(o.c)([s.a],t.prototype,"KeyDown",null),t}(r.Component),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e="DialogCheckbox"+(this.state.checked?" Active":"");return 1==this.state.disabled&&(e+=" Disabled"),this.props.label?r.createElement("div",Object(o.a)({className:"DialogCheckbox_Container _DialogLayout "+(this.props.classname?this.props.classname:"")},this.GetElementProps()),r.createElement("div",{className:e},r.createElement(i.m,{color:this.props.color,highlightColor:this.props.highlightColor})),r.createElement("div",{className:"DialogToggle_Label"},r.createElement("span",null,this.props.label),this.props.tooltip&&r.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)")),r.createElement("div",{style:{clear:"left"}}),this.props.description&&r.createElement("div",{className:"DialogToggle_Description"},this.props.description)):r.createElement("div",Object(o.a)({className:e},this.GetElementProps()),r.createElement(i.m,null))},t}(T),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.state.checked?" Active":"";return r.createElement("div",Object(o.a)({className:Object(l.a)("DialogRoundCheckbox_Container",this.props.classname,this.props.label?"WithLabel":"")},this.GetElementProps()),r.createElement("div",{className:"DialogRoundCheckbox"},r.createElement("div",{className:"DialogRoundCheckbox_Control"+e},r.createElement("div",{className:"DialogRoundCheckbox_OuterCircle"},r.createElement("div",{className:"DialogRoundCheckbox_InnerCircle"})))),this.props.label&&r.createElement("div",{className:"DialogToggle_Label"},r.createElement("span",null,this.props.label),this.props.tooltip&&r.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)")))},t}(T),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnOffKeyDown=function(e){37==e.keyCode&&this.state.checked||39==e.keyCode&&!this.state.checked?(this.Toggle(),e.preventDefault(),e.stopPropagation()):this.KeyDown(e)},t.prototype.OnNewUIToggle=function(e){e!==this.state.checked&&this.Toggle()},t.prototype.render=function(){var e="DialogOnOffToggle _DialogInputContainer _DialogLayout "+(this.props.classname?this.props.classname:"");return this.props.disabled&&(e+=" Disabled"),r.createElement("div",{className:e,tabIndex:this.props.tabIndex||0,onKeyDown:this.OnOffKeyDown},r.createElement("div",{className:"displayColumn alignSelfCenter"},r.createElement("div",{className:"DialogToggle_Label"},r.createElement("span",null,this.props.label),this.props.tooltip&&r.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)")),this.props.description&&r.createElement("div",{className:"DialogToggle_Description"},this.props.description),this.props.children),this.props.useToggleRail?r.createElement("div",{className:"DialogOnOffToggle_NewUIContainer"},r.createElement(c.a,{onChange:this.OnNewUIToggle,value:this.state.checked})):r.createElement("div",{className:"DialogOnOffToggle_Control",onClick:this.Toggle},r.createElement("div",{className:"DialogOnOffToggle_Option Off"+(this.state.checked?"":" Active")},Object(a.d)("#Dialog_Off")),r.createElement("div",{className:"DialogOnOffToggle_Option On"+(this.state.checked?" Active":"")},Object(a.d)("#Dialog_On"))))},Object(o.c)([s.a],t.prototype,"OnOffKeyDown",null),Object(o.c)([s.a],t.prototype,"OnNewUIToggle",null),t}(T);function k(e){return function(t){var n=e+(t.className?" "+t.className:"");return r.createElement("div",Object(o.a)({},t,{className:n}))}}var A=n("adxy"),N=n("XaMz"),B=function(e){function t(t){var n=e.call(this,t)||this;return n.CheckProps(t),n.state={m_CopiedYPos:0,m_bPlayingCopiedAnimation:!1,m_bCompletedCopiedAnimation:!1,m_bNumberBelowMinRange:!1,m_bNumberAboveMaxRange:!1,m_bIsNotNumeric:!1,m_bIsInvalidURL:!1,m_bIsInvalidEmail:!1},n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){this.CheckProps(this.props)},t.prototype.OnInputRef=function(e){this.m_elInput=e,this.m_elInput&&this.props.focusOnMount&&this.m_elInput.focus()},Object.defineProperty(t.prototype,"element",{get:function(){return this.m_elInput},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.m_elInput&&this.m_elInput.value},enumerable:!1,configurable:!0}),t.validateUrl=function(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},t.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())},t.prototype.Validate=function(){this.setState({m_bNumberBelowMinRange:null!==this.props.rangeMin&&void 0!==this.props.rangeMin&&Number(this.m_elInput.value)<this.props.rangeMin,m_bNumberAboveMaxRange:null!==this.props.rangeMax&&void 0!==this.props.rangeMax&&Number(this.m_elInput.value)>this.props.rangeMax,m_bIsNotNumeric:1==this.props.mustBeNumeric&&isNaN(Number(this.m_elInput.value)),m_bIsInvalidURL:1==this.props.mustBeURL&&!t.validateUrl(this.m_elInput.value),m_bIsInvalidEmail:1==this.props.mustBeEmail&&!t.validateEmail(this.m_elInput.value)})},t.prototype.OnChanged=function(e){this.props.onChange&&this.props.onChange(e),this.Validate()},t.prototype.OnCopyClick=function(e){var t=this;if(this.m_elInput){this.m_elInput.select();var n=this.m_elInput.ownerDocument;if(n.queryCommandEnabled("copy")){n.execCommand("copy"),e.currentTarget.focus(),this.m_CopiedAnimation&&this.m_CopiedAnimation.Cancel();this.setState({m_bCompletedCopiedAnimation:!1}),this.setState({m_CopiedYPos:-4},(function(){t.m_CopiedAnimation=new A.b(t,{m_CopiedYPos:-24},{msDuration:300,timing:"sine",setStateOnComplete:{m_bCompletedCopiedAnimation:!0}}),t.m_CopiedAnimation.Start()}))}}},t.prototype.OnClearClick=function(e){this.m_elInput&&this.m_elInput.value&&(Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(this.m_elInput,""),this.m_elInput.dispatchEvent(new Event("input",{bubbles:!0})))},t.prototype.CheckProps=function(e){Object(N.a)(!(e.bShowClearAction||e.bAlwaysShowClearAction)||e.onChange,"In order for bShowClearAction to work correctly, you should be handling onChange and passing value to the Dialog.Input.")},t.prototype.render=function(){var e=this.props,t=e.label,n=e.explainer,s=(e.requiredLabel,e.bShowCopyAction),c=e.bShowClearAction,l=e.bAlwaysShowClearAction,u=e.bIsPassword,p=(e.rangeMin,e.rangeMax,e.mustBeNumeric,e.mustBeURL,e.mustBeEmail,e.focusOnMount,e.tooltip,Object(o.f)(e,["label","explainer","requiredLabel","bShowCopyAction","bShowClearAction","bAlwaysShowClearAction","bIsPassword","rangeMin","rangeMax","mustBeNumeric","mustBeURL","mustBeEmail","focusOnMount","tooltip"])),m="DialogInput DialogInputPlaceholder DialogTextInputBase"+(p.className?" "+p.className:""),d="copiedAnimation",h=this.state.m_bCompletedCopiedAnimation;this.m_CopiedAnimation&&(d="copiedAnimation animationPlaying"),h&&(d="copiedAnimation animationComplete");var f={};void 0!==this.state.m_CopiedYPos&&(f.transform="translateY("+this.state.m_CopiedYPos+"px)");var _=void 0;n&&(_=r.createElement("div",{className:"DialogLabelExplainer"},n));var g=r.createElement(r.Fragment,null,r.createElement("div",{className:"DialogInput_Wrapper _DialogLayout"},r.createElement("input",Object(o.a)({type:u?"password":"text"},p,{className:m,ref:this.OnInputRef,onChange:this.OnChanged})),s&&r.createElement("div",{className:"displayRow"},r.createElement(I,{className:"DialogInput_CopyAction Primary",onClick:this.OnCopyClick},Object(a.d)("#Button_CopyLink")),r.createElement("div",{style:f,className:d},"Link Copied")),(l||c&&p.value)&&r.createElement("div",{className:"DialogInput_ClearAction",onClick:this.OnClearClick},r.createElement(i.sb,null))),_);return t?r.createElement("div",{className:"DialogInputLabelGroup _DialogLayout "},r.createElement("label",null,r.createElement("div",{className:"DialogLabel"},t," ",this.props.tooltip&&r.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)"),r.createElement("span",{className:"DialogInputRequirementLabel"},this.props.requiredLabel)," "),g,this.state.m_bNumberBelowMinRange?r.createElement("div",null," ",Object(a.d)("#Input_Error_NumberTooSmall")," "):null,this.state.m_bNumberAboveMaxRange?r.createElement("div",null," ",Object(a.d)("#Input_Error_NumberTooLarge")," "):null,this.state.m_bIsInvalidURL?r.createElement("div",null," ",Object(a.d)("#Input_Error_MustBeURL")," "):null,this.state.m_bIsInvalidEmail?r.createElement("div",null," ",Object(a.d)("#Input_Error_MustBeEmail")," "):null,this.state.m_bIsNotNumeric?r.createElement("div",null," ",Object(a.d)("#Input_Error_MustBeNumber")," "):null)):g},Object(o.c)([s.a],t.prototype,"OnInputRef",null),Object(o.c)([s.a],t.prototype,"OnChanged",null),Object(o.c)([s.a],t.prototype,"OnCopyClick",null),Object(o.c)([s.a],t.prototype,"OnClearClick",null),t}(r.PureComponent),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnBackgroundClick=function(){this.m_elInput&&this.m_elInput.focus()},t.prototype.OnInputFocus=function(e){this.m_bFocused||(this.m_bFocused=!0,this.forceUpdate()),this.props.onFocus&&this.props.onFocus(e)},t.prototype.OnInputBlur=function(e){this.m_bFocused&&(this.m_bFocused=!1,this.forceUpdate()),this.props.onBlur&&this.props.onBlur(e)},t.prototype.render=function(){var e=this.props,t=e.label,n=e.explainer,i=e.children,a=(e.className,Object(o.f)(e,["label","explainer","children","className"]));return r.createElement("div",{className:"DialogInputLabelGroup _DialogLayout DialogListBuilderInput"},r.createElement("label",null,t&&r.createElement("div",{className:"DialogLabel"},t),r.createElement("div",{className:"_DialogInputContainer"+(this.m_bFocused?" Active":""),onClick:this.OnBackgroundClick},r.createElement("div",{className:"DialogListBuilderInput_List"},r.Children.map(i,(function(e,t){return r.createElement("div",{className:"DialogListBuilderInput_ListItem",key:t},e)})),r.createElement("input",Object(o.a)({type:"text"},a,{className:"DialogListBuilderInput_Input DialogInputPlaceholder",ref:this.OnInputRef,onFocus:this.OnInputFocus,onBlur:this.OnInputBlur,size:4})))),this.props.explainer&&r.createElement("div",{className:"DialogLabelExplainer"},n)))},Object(o.c)([s.a],t.prototype,"OnBackgroundClick",null),Object(o.c)([s.a],t.prototype,"OnInputFocus",null),Object(o.c)([s.a],t.prototype,"OnInputBlur",null),t}(B),P=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.ClampValue(t.value)},n}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.state.value},enumerable:!1,configurable:!0}),t.prototype.ClampValue=function(e){return void 0===e||isNaN(e)||e<this.props.min?this.props.min:e>this.props.max?this.props.max:e},t.prototype.BPropsValid=function(){return this.props.max>this.props.min},t.prototype.shouldComponentUpdate=function(e,t){return t.value!=this.state.value||(e.max!==this.props.max||e.min!==this.props.min||e.value!==this.state.value&&e.value!==this.props.value||e.onChange!==this.props.onChange)},t.prototype.componentDidUpdate=function(e){e.value!=this.props.value&&this.setState({value:this.props.value})},t.prototype.OnMouseDown=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.clientX),this.m_elSlider.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},t.prototype.OnMouseMove=function(e){this.AdjustSliderForClientX(e.clientX)},t.prototype.OnMouseUp=function(e){this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp)},t.prototype.OnTouchStart=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.touches[0].clientX),this.m_elSlider.ownerDocument.defaultView.addEventListener("touchmove",this.OnTouchMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("touchend",this.OnTouchEnd)},t.prototype.OnTouchMove=function(e){this.AdjustSliderForClientX(e.touches[0].clientX)},t.prototype.OnTouchEnd=function(e){this.m_elSlider.ownerDocument.defaultView.removeEventListener("touchmove",this.OnTouchMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("touchend",this.OnTouchEnd)},t.prototype.OnKeyDown=function(e){var t=1;e.ctrlKey&&(t=Math.max(1,Math.floor(.1*(this.props.max-this.props.min)+.5))),37==e.keyCode?(this.IncrementValue(-1*t),e.preventDefault()):39==e.keyCode&&(this.IncrementValue(1*t),e.preventDefault())},t.prototype.AdjustSliderForClientX=function(e){var t=(e-this.m_rectSlider.left)/(this.m_rectSlider.right-this.m_rectSlider.left)*(this.props.max-this.props.min)+this.props.min;t=Math.floor(t+.5);var n=this.ClampValue(t);n!=this.state.value&&(this.setState({value:n}),this.props.onChange&&this.props.onChange(n))},t.prototype.IncrementValue=function(e){var t=this.ClampValue(this.state.value+e);t!=this.state.value&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(t))},t.prototype.render=function(){var e={},t={};if(this.BPropsValid()){var n=100*(this.state.value-this.props.min)/(this.props.max-this.props.min)+"%";e.width=n,t.left=n}var i=this.props,a=i.label,s=i.explainer,c=i.tooltip,l=(Object(o.f)(i,["label","explainer","tooltip"]),void 0);return s&&(l=r.createElement("div",{className:"DialogLabelExplainer"},s)),r.createElement("div",{className:"DialogSlider_Container _DialogInputContainer _DialogLayout"+(this.props.classname?" "+this.props.classname:""),onKeyDown:this.OnKeyDown,tabIndex:this.props.tabIndex||0},a&&r.createElement("div",{className:"DialogLabel"},a,Boolean(c)&&r.createElement("span",{"data-tooltip-text":c}," (?)")),r.createElement("div",{className:"DialogSlider_Slider",onMouseDown:this.OnMouseDown,onTouchStart:this.OnTouchStart},r.createElement("div",{className:"DialogSlider_Value",style:e}),r.createElement("div",{className:"DialogSlider_Grabber",style:t})),this.props.bShowValue?r.createElement("div",{className:"DialogLabelExplainer"},this.state.value):null,l)},Object(o.c)([s.a],t.prototype,"OnMouseDown",null),Object(o.c)([s.a],t.prototype,"OnMouseMove",null),Object(o.c)([s.a],t.prototype,"OnMouseUp",null),Object(o.c)([s.a],t.prototype,"OnTouchStart",null),Object(o.c)([s.a],t.prototype,"OnTouchMove",null),Object(o.c)([s.a],t.prototype,"OnTouchEnd",null),Object(o.c)([s.a],t.prototype,"OnKeyDown",null),t}(r.Component),F=n("8o0Y"),x=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bRebuildMenu=!1,n.state={iSelectedOption:n.FindActiveOptionIndex(t.selectedOption),bOpened:!1},n}return Object(o.d)(t,e),t.prototype.FindAndSetActiveOption=function(e){var t=this.FindActiveOptionIndex(e);t!==this.state.iSelectedOption&&this.setState({iSelectedOption:t})},t.prototype.FindActiveOptionIndex=function(e){for(var t=0;t<this.props.rgOptions.length;t++)if(this.props.rgOptions[t].data===e)return t},Object.defineProperty(t.prototype,"value",{get:function(){return void 0!==this.state.iSelectedOption?this.props.rgOptions[this.state.iSelectedOption]:void 0},enumerable:!1,configurable:!0}),t.prototype.SetSelectedOption=function(e){null!=e?this.FindAndSetActiveOption(e):this.setState({iSelectedOption:void 0})},t.prototype.shouldComponentUpdate=function(e,t,n){if(e.selectedOption!=this.props.selectedOption){this.FindActiveOptionIndex(e.selectedOption);if(this.state.iSelectedOption!==t.iSelectedOption)return!0}if(e.disabled!=this.props.disabled)return!0;if(e.postDropdownElement!=this.props.postDropdownElement)return!0;if(e.postOptionElement!=this.props.postOptionElement)return!0;if(t.bOpened!==this.state.bOpened||t.iSelectedOption!==this.state.iSelectedOption)return!0;for(var o=0,r=["label","tooltip","selectedOption","tabIndex","onChange","strDefaultLabel"];o<r.length;o++){var i=r[o];if(e[i]!==this.props[i])return!0}return!(!this.state.bOpened||!this.DoOptionsDiffer(e.rgOptions))},t.prototype.DoOptionsDiffer=function(e){if(e.length!=this.props.rgOptions.length)return!0;for(var t=0;t<e.length;t++)if(e[t].label!==this.props.rgOptions[t].label)return!0;return!1},t.prototype.componentDidUpdate=function(e){if(this.DoOptionsDiffer(e.rgOptions)){if(void 0!==this.state.iSelectedOption){var t=e.rgOptions[this.state.iSelectedOption];t&&this.FindAndSetActiveOption(t.data)}this.state.bOpened?(this.m_iMenuInstance.SetOnHideCallback(null),this.m_iMenuInstance.Hide(),this.m_iMenuInstance=void 0,this.BuildMenu()):this.m_iMenuInstance&&(this.m_iMenuInstance.SetOnHideCallback(null),this.m_iMenuInstance=void 0)}else e.selectedOption!==this.props.selectedOption&&this.FindAndSetActiveOption(this.props.selectedOption)},t.prototype.OnInputRef=function(e){this.m_elInput=e},t.prototype.ToggleMenu=function(){this.state.bOpened?this.HideMenu():this.ShowMenu()},t.prototype.OnItemSelected=function(e,t){this.HideMenu(),this.setState({iSelectedOption:e}),this.props.onChange&&this.props.onChange(void 0!==e?this.props.rgOptions[e]:void 0,this)},t.prototype.BuildMenu=function(){var e="DialogMenuPosition";this.props.strDropDownClassName&&(e+=" "+this.props.strDropDownClassName);var t=Object(o.a)({bOverlapHorizontal:!0,bMatchWidth:!0,bFitToWindow:!0,strClassName:e,bDisableMouseOverlay:this.props.bDisableMouseOverlay},this.props.contextMenuPositionOptions);this.m_iMenuInstance=Object(F.a)(r.createElement(V,{rgOptions:this.props.rgOptions,fnOnItemSelected:this.OnItemSelected,strDropDownItemClassName:this.props.strDropDownItemClassName,renderMenuContainer:this.props.renderMenuContainer,renderMenuItem:this.props.renderMenuItem}),this.m_elInput,t),this.m_iMenuInstance.SetOnHideCallback(this.HideMenu)},t.prototype.ShowMenu=function(){this.m_iMenuInstance?this.m_iMenuInstance.Show():this.BuildMenu(),this.props.onMenuOpened&&this.props.onMenuOpened(),this.setState({bOpened:!0})},t.prototype.HideMenu=function(){this.m_iMenuInstance&&this.m_iMenuInstance.Hide(),this.setState({bOpened:!1})},t.prototype.render=function(){var e=void 0!==this.state.iSelectedOption&&this.props.rgOptions[this.state.iSelectedOption],t=e?e.label:this.props.strDefaultLabel,n="DialogDropDown _DialogInputContainer",o="DialogInputLabelGroup _DialogLayout";this.state.bOpened&&(n+=" Active"),this.props.disabled&&(n+=" Disabled"),this.props.strClassName&&(o+=" "+this.props.strClassName);var a=r.createElement(r.Fragment,null,this.props.postDropdownElement,!this.props.disabled&&r.createElement("div",{className:"DialogDropDown_Arrow"},r.createElement(i.p,null)),this.props.postOptionElement,r.createElement("div",{className:"DialogDropDown_CurrentDisplay"},t));return r.createElement("div",{className:o},this.props.label&&r.createElement("div",{className:"DialogLabel"},this.props.label,Boolean(this.props.tooltip)&&r.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)")),this.props.fnRenderControl?this.props.fnRenderControl({className:n,tabIndex:this.props.tabIndex||0,onClick:this.props.disabled?void 0:this.ToggleMenu,htmlElementRef:this.OnInputRef,children:a}):r.createElement("div",{className:n,tabIndex:this.props.tabIndex||0,onClick:this.props.disabled?void 0:this.ToggleMenu,ref:this.OnInputRef},a))},Object(o.c)([s.a],t.prototype,"OnInputRef",null),Object(o.c)([s.a],t.prototype,"ToggleMenu",null),Object(o.c)([s.a],t.prototype,"OnItemSelected",null),Object(o.c)([s.a],t.prototype,"ShowMenu",null),Object(o.c)([s.a],t.prototype,"HideMenu",null),t}(r.Component),V=function(e){function t(t){var n=e.call(this,t)||this;return n.state={iFocus:0},n}return Object(o.d)(t,e),t.prototype.OnItemClicked=function(e){var t=parseInt(e.currentTarget.getAttribute("data-dropdown-index"));(t||0===t)&&t>=0&&t<this.props.rgOptions.length&&this.props.fnOnItemSelected(t,this.props.rgOptions[t])},t.prototype.render=function(){var e=this,t="DialogDropDownMenu_Item";this.props.strDropDownItemClassName&&(t+=" "+this.props.strDropDownItemClassName);var n=this.props.renderMenuItem||"div",o=this.props.rgOptions.map((function(o,i){return r.createElement(n,{className:t+" "+o.strOptionClass,key:i,"data-dropdown-index":i,onClick:e.OnItemClicked},o.label)})),i=this.props.renderMenuContainer||"div";return r.createElement(i,{className:"DialogDropDownMenu _DialogInputContainer"},o)},Object(o.c)([s.a],t.prototype,"OnItemClicked",null),t}(r.Component),U=(r.Component,n("2vnA")),H=n("G+3Z"),W=n("UqDm"),z=n("/7KC"),q=n("hlKB");function K(e){return e.children}var Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_coordinator=new Q,t}return Object(o.d)(t,e),t.prototype.OnDrop=function(e,t){t>e&&t--,t!=e&&this.props.onReorder(e,t)},t.prototype.render=function(){var e=this,t=[];return t.push(r.createElement(ee,{coordinator:this.m_coordinator,key:"dropregion_top",fnBAcceptDraggable:function(e){return 0!=e.props.data},fnOnDrop:function(t){return e.OnDrop(t.props.data,0)}})),r.Children.forEach(this.props.children,(function(n,o){var i=n.props.id||"__list_"+o,a=o+1;t.push(r.createElement(J,{coordinator:e.m_coordinator,data:o,key:i},n)),t.push(r.createElement(ee,{coordinator:e.m_coordinator,key:"dropregion_"+i,fnBAcceptDraggable:function(e){return e.props.data!=a},fnOnDrop:function(t){return e.OnDrop(t.props.data,a)}}))})),r.createElement("div",{className:"DialogReorderableList"},t)},Object(o.c)([s.a],t.prototype,"OnDrop",null),t}(r.Component);function X(e,t,n,o){return o?n&&e>n.left&&e<n.right&&t>n.top&&t<n.bottom:n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}var Q=function(){function e(){this.m_embeddedElement=new H.a("DragGhosts"),this.m_rgDropRegions=[],this.m_rgActiveDropRegions=[]}return e.prototype.RegisterDropRegion=function(e){this.m_rgDropRegions.push(e),this.m_activeDraggable&&e.BAcceptDraggable(this.m_activeDraggable)&&(e.OnDragStarted(this.m_activeDraggable),this.m_rgActiveDropRegions.push(e))},e.prototype.UnregisterDropRegion=function(e){W.c(this.m_rgDropRegions,e),W.c(this.m_rgActiveDropRegions,e),this.m_activeDropRegion==e&&(this.m_activeDropRegion=void 0,this.m_activeDraggable&&this.ShowDragGhost())},e.prototype.OnDragGhostRef=function(e){this.m_dragGhost=e},e.prototype.ShowDragGhost=function(){var e=this.m_activeDraggable.renderDragGhost(),t=Object(l.a)(e.props.className,!!this.m_activeDropRegion&&"DraggedOverActiveDrop"),n=r.cloneElement(e,{ref:this.OnDragGhostRef,className:t});this.m_embeddedElement.ShowElement(this.m_activeDraggable.GetDragDocument(),n,this.m_activeDraggable)},e.prototype.HideDragGhost=function(){this.m_embeddedElement.HideElement(this.m_activeDraggable.GetDragDocument(),this.m_activeDraggable)},e.prototype.OnDragStart=function(e){this.m_activeDraggable=e,this.m_rgActiveDropRegions=[];for(var t=0,n=this.m_rgDropRegions;t<n.length;t++){var o=n[t];o.BAcceptDraggable(e)&&(o.OnDragStarted(e),this.m_rgActiveDropRegions.push(o))}this.ShowDragGhost()},e.prototype.EndDrag=function(){if(this.m_activeDraggable){this.HideDragGhost(),this.m_activeDropRegion&&this.m_activeDropRegion.OnDrop(this.m_activeDraggable);for(var e=0,t=this.m_rgActiveDropRegions;e<t.length;e++){t[e].OnDragEnded(this.m_activeDraggable)}this.m_activeDraggable=void 0,this.m_dropGhost=void 0,this.m_rgActiveDropRegions=[]}},e.prototype.FindBestActiveDropRegionForPoint=function(e,t){var n,o=this.m_activeDraggable.GetDragDocument();if("elementsFromPoint"in o)n=o.elementsFromPoint(e,t);else if("msElementsFromPoint"in o){var r=o.msElementsFromPoint;n=Array.from(r(e,t))}if(n){var i=new Map;this.m_rgActiveDropRegions.forEach((function(e){return i.set(e.GetElement(),e)}));for(var a=0,s=n;a<s.length;a++){var c=s[a],l=i.get(c);if(l)return l}}else{if(this.m_activeDropRegion&&this.m_activeDropRegion.BDraggableInRegion(e,t,this.m_activeDraggable))return this.m_activeDropRegion;for(var u=this.m_rgActiveDropRegions.length-1;u>=0;u--){var p=this.m_rgActiveDropRegions[u];if(p.BDraggableInRegion(e,t,this.m_activeDraggable))return p}}return null},e.prototype.OnDrag=function(e,t,n){var o=this,r=void 0===t?0:t-this.m_dragGhost.state.clientX,i=void 0===n?0:n-this.m_dragGhost.state.clientY;if(e.props.bEnableHTMLDrag&&this.m_dragOffWindowTimer&&window.clearTimeout(this.m_dragOffWindowTimer),this.m_dragGhost&&(this.m_dragGhost.setState({clientX:t,clientY:n,clientXDelta:r,clientYDelta:i,bVisible:!0}),e.props.bEnableHTMLDrag&&(r||i))){var a=t+r,s=n+i,c=e.GetDragDocument().body.getBoundingClientRect();if(X(t,n,c)&&!X(a,s,c,!0)){var l=z.c(a,c.left,c.right,c.left-200,c.right+200),u=z.c(s,c.top,c.bottom,c.top-100,c.bottom+100);this.m_dragOffWindowTimer=window.setTimeout((function(){e==o.m_activeDraggable&&o.OnDrag(e,l,u)}),50)}}var p=this.FindBestActiveDropRegionForPoint(t,n);!!this.m_activeDropRegion!=!!p&&(this.ShowDragGhost(),this.m_dropGhost||(this.m_dropGhost=this.m_activeDraggable.renderDropGhost())),this.m_activeDropRegion&&this.m_activeDropRegion!=p&&this.m_activeDropRegion.OnDragLeave(this.m_activeDraggable),p&&this.m_activeDropRegion!=p&&p.OnDragEnter(this.m_activeDraggable,this.m_dropGhost),this.m_activeDropRegion=p,this.m_activeDropRegion&&this.m_activeDropRegion.OnDragMove(t,n,this.m_activeDraggable)},Object(o.c)([s.a],e.prototype,"OnDragGhostRef",null),e}(),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_DragInfo={bStarted:!1,startClientX:void 0,startClientY:void 0,startOffsetX:void 0,startOffsetY:void 0,startWidth:void 0,startHeight:void 0,ownerWin:void 0},t.m_divRef=r.createRef(),t}return Object(o.d)(t,e),t.prototype.GetDragDocument=function(){return this.m_DragInfo.ownerWin&&this.m_DragInfo.ownerWin.document},t.prototype.RecordDragStart=function(e,t,n){this.m_DragInfo.startClientX=t,this.m_DragInfo.startClientY=n;var o=e.getBoundingClientRect();this.m_DragInfo.startOffsetX=t-o.left,this.m_DragInfo.startOffsetY=n-o.top,this.m_DragInfo.startWidth=o.width,this.m_DragInfo.startHeight=o.height,this.m_DragInfo.ownerWin=e.ownerDocument.defaultView},t.prototype.ProcessDragMove=function(e){var t=function(e){if("touches"in e){var t=e;return[t.touches[0].clientX,t.touches[0].clientY]}return[e.clientX,e.clientY]}(e),n=t[0],o=t[1];if(this.m_DragInfo.bStarted){if(this.props.bEnableHTMLDrag&&0==n&&0==o)return;this.props.coordinator.OnDrag(this,n,o)}else Math.pow(n-this.m_DragInfo.startClientX,2)+Math.pow(o-this.m_DragInfo.startClientY,2)>=25&&(this.m_DragInfo.bStarted=!0,this.forceUpdate(),this.props.fnOnDragStart&&this.props.fnOnDragStart(),this.props.coordinator.OnDragStart(this),this.props.coordinator.OnDrag(this,n,o))},t.prototype.OnMouseDown=function(e){this.m_DragInfo.bStarted||0!=e.button||(this.RecordDragStart(e.currentTarget,e.clientX,e.clientY),this.m_DragInfo.ownerWin.addEventListener("mousemove",this.ProcessDragMove),this.m_DragInfo.ownerWin.addEventListener("mouseup",this.OnMouseUp))},t.prototype.OnMouseUp=function(e){this.m_DragInfo.ownerWin.removeEventListener("mousemove",this.ProcessDragMove),this.m_DragInfo.ownerWin.removeEventListener("mouseup",this.OnMouseUp),this.ResetDragState()},t.prototype.OnTouchStart=function(e){this.m_DragInfo.bStarted||(this.RecordDragStart(e.currentTarget,e.touches[0].clientX,e.touches[0].clientY),this.m_DragInfo.ownerWin.addEventListener("touchmove",this.ProcessDragMove),this.m_DragInfo.ownerWin.addEventListener("touchend",this.OnTouchEnd))},t.prototype.OnTouchEnd=function(e){this.m_DragInfo.ownerWin.removeEventListener("touchmove",this.ProcessDragMove),this.m_DragInfo.ownerWin.removeEventListener("touchend",this.OnTouchEnd),this.ResetDragState()},t.prototype.ResetDragState=function(){this.m_DragInfo.bStarted&&(this.props.coordinator.EndDrag(),this.props.fnOnDragEnd&&this.props.fnOnDragEnd()),this.m_DragInfo.bStarted=!1,this.m_DragInfo.startClientX=void 0,this.m_DragInfo.startClientY=void 0,this.m_DragInfo.startOffsetX=void 0,this.m_DragInfo.startOffsetY=void 0,this.m_DragInfo.ownerWin=void 0,this.forceUpdate()},t.prototype.OnHTMLDragStart=function(e){e.dataTransfer.effectAllowed="copyMove",this.props.strHTMLDragData&&this.props.strHTMLDragData.forEach((function(t,n){return e.dataTransfer.setData(n,t)})),e.dataTransfer.getData("text/plain")||e.dataTransfer.setData("text/plain",this.props.data.toString());var t=new Image;e.dataTransfer.setDragImage(t,0,0),this.RecordDragStart(e.currentTarget,e.clientX,e.clientY)},t.prototype.OnHTMLDragEnd=function(){this.ResetDragState()},t.prototype.render=function(){var e=this.props,t=(e.coordinator,e.data,e.bEnableHTMLDrag),n=(e.strHTMLDragData,e.fnOnDragStart,e.fnOnDragEnd,e.fnRenderDragGhost,e.fnRenderDropGhost,e.className),i=e.strActiveClassName,a=e.children,s=Object(o.f)(e,["coordinator","data","bEnableHTMLDrag","strHTMLDragData","fnOnDragStart","fnOnDragEnd","fnRenderDragGhost","fnRenderDropGhost","className","strActiveClassName","children"]),c={},u=n||"DialogDraggable";return this.m_DragInfo.bStarted?(u=Object(l.a)(u,i||"DraggedOut"),t&&(c={onDrag:this.ProcessDragMove,onDragEnd:this.OnHTMLDragEnd})):c=t?{onDragStart:this.OnHTMLDragStart,onDrag:this.ProcessDragMove,onDragEnd:this.OnHTMLDragEnd}:{onMouseDown:this.OnMouseDown,onTouchStart:this.OnTouchStart},r.createElement("div",Object(o.a)({ref:this.m_divRef,className:u},c,s,{draggable:t}),a)},t.prototype.renderDropGhost=function(){return this.props.fnRenderDropGhost?this.props.fnRenderDropGhost():r.createElement(Z,{elContent:this.GetClone()})},t.prototype.renderDragGhost=function(){return this.props.fnRenderDragGhost?this.props.fnRenderDragGhost():r.createElement($,{elContent:this.GetClone(),offsetX:this.m_DragInfo.startOffsetX,offsetY:this.m_DragInfo.startOffsetY,width:this.m_DragInfo.startWidth,height:this.m_DragInfo.startHeight})},t.prototype.GetClone=function(){var e,t=this.m_divRef.current;if(t&&t.childElementCount)if(1==t.childElementCount)e=t.firstElementChild.cloneNode(!0);else{e=document.createElement("div");for(var n=t.firstChild;n;n=n.nextSibling)e.appendChild(n.cloneNode(!0))}return e},Object(o.c)([s.a],t.prototype,"ProcessDragMove",null),Object(o.c)([s.a],t.prototype,"OnMouseDown",null),Object(o.c)([s.a],t.prototype,"OnMouseUp",null),Object(o.c)([s.a],t.prototype,"OnTouchStart",null),Object(o.c)([s.a],t.prototype,"OnTouchEnd",null),Object(o.c)([U.k],t.prototype,"ResetDragState",null),Object(o.c)([s.a],t.prototype,"OnHTMLDragStart",null),Object(o.c)([s.a],t.prototype,"OnHTMLDragEnd",null),t}(r.Component),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnRef=function(e){e&&e.appendChild(this.props.elContent)},t.prototype.render=function(){return r.createElement("div",{className:"DialogDraggable_DropGhost",ref:this.OnRef})},Object(o.c)([s.a],t.prototype,"OnRef",null),t}(r.Component),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={clientX:void 0,clientY:void 0,bVisible:!0,clientXDelta:void 0,clientYDelta:void 0},t}return Object(o.d)(t,e),t.prototype.OnRef=function(e){e&&e.appendChild(this.props.elContent)},t.prototype.CalculateRotationDegrees=function(e){return!e||Math.abs(e)<4?0:(e>0?7.5:-7.5)*Math.sqrt(Math.abs(e))},t.prototype.render=function(){if(!this.state.bVisible||void 0===this.state.clientX||void 0===this.state.clientY)return r.createElement("div",null);var e={left:this.state.clientX-(this.props.offsetX||0),top:this.state.clientY-(this.props.offsetY||0),width:this.props.width||"auto",height:this.props.height||"auto",perspective:"600px"},t=z.c(this.CalculateRotationDegrees(this.state.clientYDelta),-90,90,2,0),n={transform:"rotateX("+this.CalculateRotationDegrees(-1*this.state.clientYDelta)+"deg) rotateY( "+this.CalculateRotationDegrees(this.state.clientXDelta)+"deg)",transition:"transform .16s ease-out, filter .16s ease-out",filter:"brightness("+t+")"},o=this.props.className||"DialogDraggable_DragGhost";return r.createElement("div",{className:o,style:e},r.createElement("div",{ref:this.OnRef,style:n}))},Object(o.c)([s.a],t.prototype,"OnRef",null),t}(r.Component),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.BDraggableInRegion=function(e,t,n){var o=this.GetClientRect();return!!o&&(e>=o.left&&e<=o.right&&t>=o.top-20&&t<=o.bottom+20)},t}(function(e){function t(t){var n=e.call(this,t)||this;return n.m_divRef=r.createRef(),n.state={},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.props.coordinator.RegisterDropRegion(this)},t.prototype.componentWillUnmount=function(){this.props.coordinator.UnregisterDropRegion(this)},t.prototype.OnDragStarted=function(e){this.setState({bDraggableActive:!0})},t.prototype.OnDragEnded=function(e){this.setState({bDraggableActive:!1})},t.prototype.OnDragEnter=function(e,t){this.setState({dropGhost:t}),this.props.fnOnDragEnter&&this.props.fnOnDragEnter(e)},t.prototype.OnDragLeave=function(e){this.setState({dropGhost:void 0}),this.props.fnOnDragLeave&&this.props.fnOnDragLeave(e)},t.prototype.OnDragMove=function(e,t,n){},t.prototype.OnDrop=function(e){this.setState({dropGhost:void 0}),this.props.fnOnDrop(e)},t.prototype.BAcceptDraggable=function(e){return!this.props.fnBAcceptDraggable||this.props.fnBAcceptDraggable(e)},t.prototype.BDraggableInRegion=function(e,t,n){return X(e,t,this.GetClientRect())},t.prototype.GetElement=function(){return this.m_divRef.current},t.prototype.GetClientRect=function(){return this.m_divRef.current&&this.m_divRef.current.getBoundingClientRect()},t.prototype.render=function(){var e=this.props,t=(e.coordinator,e.fnBAcceptDraggable,e.fnOnDrop,e.fnOnDragEnter,e.fnOnDragLeave,e.className),n=e.strActiveClassName,i=e.children,a=Object(o.f)(e,["coordinator","fnBAcceptDraggable","fnOnDrop","fnOnDragEnter","fnOnDragLeave","className","strActiveClassName","children"]),s=Object(l.a)(t||"DialogDropRegion",this.state.bDraggableActive&&(n||"Active"));return r.createElement(q.a,Object(o.a)({htmlElementRef:this.m_divRef,className:s},a,{navStop:a.navStop||!!a.onClick}),this.state.dropGhost,i)},t}(r.Component)),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(r.Component),ne=function(e){function t(t){var n=e.call(this,t)||this;return void 0!==t.startingPage?n.state={activePage:t.startingPage}:n.state={activePage:-1},n}return Object(o.d)(t,e),t.prototype.OnActivePageRef=function(e){e instanceof te?this.m_ActivePage=e:(Object(N.a)(!e,'PagedSettingsDialog page "'+this.GetActivePage().title+'" does not derive from PagedSettingsPageComponent'),this.m_ActivePage=null)},t.prototype.GetActivePage=function(){return this.state.activePage<0||this.state.activePage>=this.props.pages.length?this.props.pages[0]:this.props.pages[this.state.activePage]},t.prototype.SelectPage=function(e){e!=this.state.activePage&&(this.m_ActivePage&&!this.m_ActivePage.OKToSwitchAway()||this.setState({activePage:e}))},t.prototype.render=function(){for(var e=this,t=this.GetActivePage(),n=[],o=function(o){var a=s.props.pages[o],c=a==t,l=a.className||"",u=a.click||function(){e.SelectPage(o)},p=["PagedSettingsDialog_PageListItem"],m=!1;"ChatRoomLeave"==a.className&&(m=!0),c&&p.push("Active"),p.push(l),n.push(r.createElement("div",{className:p.join(" "),key:a.title,onClick:u},m&&r.createElement(i.ob,null),a.title))},s=this,c=0;c<this.props.pages.length;c++)o(c);var l=t.hideTitle,p="";t.uniqueName&&(p=" Page_"+t.uniqueName.replace(/\s/g,""));var m=!1!==t.enabled;return m||(p+=" noPermission"),r.createElement("div",{className:(this.props.className?this.props.className:"")+" PagedSettingsDialog"},r.createElement("div",{className:"PagedSettingsDialog_PageListColumn"},r.createElement("div",{className:"PagedSettingsDialog_Title"},this.props.title),r.createElement("div",{className:"PagedSettingsDialog_PageList"},n)),r.createElement("div",{className:"DialogContentTransition"},t&&r.createElement(y,{className:"PagedSettingsDialog_PageContent"+p},!l&&r.createElement(u,null,t.title,r.createElement(_,null,!m&&r.createElement(r.Fragment,null,r.createElement(i.F,null),Object(a.d)("#Chat_Settings_Permission_Denied")))),null!=t.content&&r.cloneElement(t.content,{ref:this.OnActivePageRef}))))},Object(o.c)([s.a],t.prototype,"OnActivePageRef",null),t}(r.Component),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refTextArea=r.createRef(),t.m_cEntryLength=Number.MAX_VALUE,t}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"textarea",{get:function(){return this.m_refTextArea.current},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.m_refTextArea.current&&this.m_refTextArea.current.value},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.m_refTextArea.current.focus()},t.prototype.InternalOnInput=function(){var e,t=this.m_refTextArea.current,n=this.GetMinHeight(),o=this.GetMaxHeight(),r=t.value.length;if(void 0===this.m_nTextAreaPadding&&this.CalculatePadding(),r<this.m_cEntryLength&&(e=window.scrollY,t.style.height=n+"px"),t.scrollHeight>o)t.style.height=o+"px",t.style.overflow="auto";else if(t.scrollHeight!=t.clientHeight){var i=Math.max(t.scrollHeight,n);t.style.height=i-this.m_nTextAreaPadding+"px","auto"==t.style.overflow&&(t.style.overflow="hidden")}void 0!==e&&window.scrollTo(window.scrollX,e),this.m_cEntryLength=r},t.prototype.CalculatePadding=function(){var e=getComputedStyle(this.m_refTextArea.current);this.m_nTextAreaPadding=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)},t.prototype.GetMinHeight=function(){return this.props.nMinHeight||20},t.prototype.GetMaxHeight=function(){return this.props.nMaxHeight||500},t.prototype.DeferredInternalOnInput=function(){window.setTimeout(this.InternalOnInput,1)},t.prototype.OnKeyUp=function(e){this.InternalOnInput(),this.props.onKeyUp&&this.props.onKeyUp(e)},t.prototype.OnBlur=function(e){this.DeferredInternalOnInput(),this.props.onBlur&&this.props.onBlur(e)},t.prototype.OnClick=function(e){this.InternalOnInput(),this.props.onClick&&this.props.onClick(e)},t.prototype.OnPaste=function(e){this.DeferredInternalOnInput(),this.props.onPaste&&this.props.onPaste(e)},t.prototype.OnCut=function(e){this.InternalOnInput(),this.props.onCut&&this.props.onCut(e)},t.prototype.componentDidMount=function(){this.m_refTextArea.current.style.overflow="hidden",this.m_refTextArea.current.style.resize="none",this.InternalOnInput()},t.prototype.componentDidUpdate=function(e){e.nMinHeight==this.props.nMinHeight&&e.nMaxHeight==this.props.nMaxHeight||(this.m_cEntryLength=Number.MAX_VALUE),this.m_refTextArea.current.value.length!=this.m_cEntryLength&&this.InternalOnInput()},t.prototype.render=function(){var e=this.props,t=(e.nMinHeight,e.nMaxHeight,Object(o.f)(e,["nMinHeight","nMaxHeight"]));return r.createElement("textarea",Object(o.a)({},t,{ref:this.m_refTextArea,onKeyUp:this.OnKeyUp,onBlur:this.OnBlur,onClick:this.OnClick,onPaste:this.OnPaste,onCut:this.OnCut}))},Object(o.c)([s.a],t.prototype,"InternalOnInput",null),Object(o.c)([s.a],t.prototype,"OnKeyUp",null),Object(o.c)([s.a],t.prototype,"OnBlur",null),Object(o.c)([s.a],t.prototype,"OnClick",null),Object(o.c)([s.a],t.prototype,"OnPaste",null),Object(o.c)([s.a],t.prototype,"OnCut",null),t}(r.Component)},lqmi:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return p}));var o=n("mrSG"),r=n("2vnA"),i=n("Gp1o"),a=n("OTLo"),s=n("oh5H"),c=n("1n9R"),l=n("yovy");function u(e){var t="offline";return e&&(e.is_ingame?t="ingame":e.m_broadcastAccountId?t="watchingbroadcast":e.is_online&&(t="online"),e.is_awayOrSnooze&&(t+=" awayOrSnooze")),t}n.d(t,"a",(function(){return l.a})),n.d(t,"c",(function(){return l.b}));var p=function(){function e(e){this.m_bInitialized=!1,this.m_ePersonaState=0,this.m_unGamePlayedAppID=0,this.m_gameid="0",this.m_unPersonaStateFlags=0,this.m_strPlayerName="",this.m_strAvatarHash=l.b,this.m_rtLastSeenOnline=0,this.m_strGameExtraInfo="",this.m_unGameServerIP=0,this.m_unGameServerPort=0,this.m_game_lobby_id="",this.m_bPlayerNamePending=!1,this.m_mapRichPresence=r.B.map(),this.m_bNameInitialized=!1,this.m_bStatusInitialized=!1,this.m_steamid=e}return e.prototype.Reset=function(){this.m_ePersonaState=0,this.m_unGamePlayedAppID=0,this.m_gameid="0",this.m_strGameExtraInfo="",this.m_unGameServerIP=0,this.m_unGameServerPort=0,this.m_game_lobby_id="",this.m_mapRichPresence.clear(),this.m_broadcastId=void 0,this.m_broadcastAccountId=void 0,this.m_broadcastAppId=void 0,this.m_broadcastViewerCount=void 0,this.m_strBroadcastTitle=void 0},e.prototype.GetAccountID=function(){return this.m_steamid.GetAccountID()},Object.defineProperty(e.prototype,"is_online",{get:function(){return 0!=this.m_ePersonaState&&7!=this.m_ePersonaState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_ingame",{get:function(){return this.is_online&&(0!=this.m_unGamePlayedAppID||"0"!=this.m_gameid)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_watchingbroadcast",{get:function(){return!!this.m_broadcastAccountId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_in_nonsteam_game",{get:function(){return 0==this.m_unGamePlayedAppID&&"0"!=this.m_gameid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_in_joinable_game",{get:function(){return this.has_joinable_game_flag||this.is_in_valid_lobby||this.has_server_ip},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_joinable_game_flag",{get:function(){return 0!=(2&this.m_unPersonaStateFlags)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connect_string",{get:function(){return this.m_mapRichPresence.get("connect")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_in_valid_lobby",{get:function(){return this.m_game_lobby_id&&"0"!=this.m_game_lobby_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_server_ip",{get:function(){return 0!=this.m_unGameServerIP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_awayOrSnooze",{get:function(){return 3==this.m_ePersonaState||4==this.m_ePersonaState},enumerable:!1,configurable:!0}),e.prototype.HasStateFlag=function(e){return 0!=(this.m_unPersonaStateFlags&e)},Object.defineProperty(e.prototype,"last_seen_online",{get:function(){return this.m_rtLastSeenOnline},enumerable:!1,configurable:!0}),e.prototype.ClearStateOnDisconnect=function(){0!=this.m_ePersonaState&&this.Reset()},Object.defineProperty(e.prototype,"is_golden",{get:function(){return this.HasStateFlag(4)},enumerable:!1,configurable:!0}),e.prototype.GetCurrentGameName=function(){return this.m_strGameExtraInfo?this.m_strGameExtraInfo:this.m_unGamePlayedAppID?a.a.GetAppInfo(this.m_unGamePlayedAppID).name:""},e.prototype.GetCurrentGameIconURL=function(){return this.m_unGamePlayedAppID?a.a.GetAppInfo(this.m_unGamePlayedAppID).icon_url:""},e.prototype.GetCurrentGameLogoURL=function(){return this.m_unGamePlayedAppID?a.a.GetAppInfo(this.m_unGamePlayedAppID).logo_url:""},e.prototype.GetBroadcastGameLogoURL=function(){return this.m_broadcastAppId?a.a.GetAppInfo(this.m_broadcastAppId).logo_url:""},e.prototype.BIsAppInfoReady=function(){return!this.m_unGamePlayedAppID||a.a.GetAppInfo(this.m_unGamePlayedAppID).is_initialized},e.prototype.HasCurrentGameRichPresence=function(){return this.m_mapRichPresence.has("steam_display")},e.prototype.GetCurrentGameRichPresence=function(){if(this.HasCurrentGameRichPresence()){var e=a.a.GetRichPresenceLoc(this.m_unGamePlayedAppID);if(e){var t=this.m_mapRichPresence.get("steam_display");return e.Localize(t,this.m_mapRichPresence)}}else if(this.HasStateFlag(8))return Object(s.d)("#PersonaStateRemotePlayTogether");return""},e.prototype.GetOfflineStatusUpdateRate=function(){if(0==this.last_seen_online)return 3e4;var e=1e3,t=a.a.CMInterface.GetServerRTime32()-this.last_seen_online;return e*=t>86400?3600:t>7200?60:15},e.prototype.GetOfflineStatusTime=function(){if(0==this.last_seen_online)return Object(s.d)("#PersonaStateOffline");var e=this.GetOfflineStatusUpdateRate();(!c.c.IN_MOBILE||e<=60)&&Object(i.b)(e);var t=a.a.CMInterface.GetServerRTime32()-this.last_seen_online;return t<60?Object(s.d)("#PersonaStateLastSeen_JustNow"):Object(s.d)("#PersonaStateLastSeen",Object(s.m)(t))},e.prototype.GetLocalizedOnlineStatus=function(){switch(this.m_ePersonaState){case 0:case 7:return this.GetOfflineStatusTime();case 1:return Object(s.d)("#PersonaStateOnline");case 2:return Object(s.d)("#PersonaStateBusy");case 3:return Object(s.d)("#PersonaStateAway");case 4:return Object(s.d)("#PersonaStateSnooze");case 5:return Object(s.d)("#PersonaStateLookingToTrade");case 6:return Object(s.d)("#PersonaStateLookingToPlay");default:return""}},Object.defineProperty(e.prototype,"has_public_party_beacon",{get:function(){return this.m_mapRichPresence.has("__beacon")&&this.is_ingame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player_group",{get:function(){return this.m_mapRichPresence.has("steam_player_group")?this.m_mapRichPresence.get("steam_player_group"):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player_group_size",{get:function(){return this.m_mapRichPresence.has("steam_player_group_size")?Number.parseInt(this.m_mapRichPresence.get("steam_player_group_size")):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"online_state",{get:function(){return this.is_online?this.is_ingame?"in-game":this.m_broadcastAccountId?"watchingbroadcast":"online":"offline"},enumerable:!1,configurable:!0}),e.prototype.BHasAvatarSet=function(){return this.m_strAvatarHash!=l.b},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return Object(l.a)(this.m_strAvatarHash)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return Object(l.a)(this.m_strAvatarHash,"medium")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return Object(l.a)(this.m_strAvatarHash,"full")},enumerable:!1,configurable:!0}),e.SortStatusComparator=function(e,t,n){if(t.has_public_party_beacon){if(!n.has_public_party_beacon)return-1}else{if(n.has_public_party_beacon)return 1;if(t.is_ingame){if(!n.is_ingame)return-1;if(!e)return 0;if(t.is_awayOrSnooze){if(!n.is_awayOrSnooze)return 1}else if(n.is_awayOrSnooze)return-1}else if(n.is_ingame)return 1}if(t.is_online){if(!n.is_online)return-1}else if(n.is_online)return 1;if(e)if(t.is_awayOrSnooze){if(!n.is_awayOrSnooze)return 1}else if(n.is_awayOrSnooze)return-1;return 0},Object(o.c)([r.B],e.prototype,"m_bInitialized",void 0),Object(o.c)([r.B],e.prototype,"m_ePersonaState",void 0),Object(o.c)([r.B],e.prototype,"m_unGamePlayedAppID",void 0),Object(o.c)([r.B],e.prototype,"m_gameid",void 0),Object(o.c)([r.B],e.prototype,"m_unPersonaStateFlags",void 0),Object(o.c)([r.B],e.prototype,"m_strPlayerName",void 0),Object(o.c)([r.B],e.prototype,"m_strAvatarHash",void 0),Object(o.c)([r.B],e.prototype,"m_rtLastSeenOnline",void 0),Object(o.c)([r.B],e.prototype,"m_strGameExtraInfo",void 0),Object(o.c)([r.B],e.prototype,"m_unGameServerIP",void 0),Object(o.c)([r.B],e.prototype,"m_unGameServerPort",void 0),Object(o.c)([r.B],e.prototype,"m_game_lobby_id",void 0),Object(o.c)([r.B],e.prototype,"m_bPlayerNamePending",void 0),Object(o.c)([r.B],e.prototype,"m_broadcastId",void 0),Object(o.c)([r.B],e.prototype,"m_broadcastAccountId",void 0),Object(o.c)([r.B],e.prototype,"m_broadcastAppId",void 0),Object(o.c)([r.B],e.prototype,"m_broadcastViewerCount",void 0),Object(o.c)([r.B],e.prototype,"m_strBroadcastTitle",void 0),e}()},m1EC:function(e,t,n){},mQsC:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return C}));var o,r=n("mrSG"),i=n("q1tI"),a=n("ljid"),s=n("tkkQ"),c=n("TyAF"),l=n("1VtQ"),u=n("oh5H"),p=n("lqmi"),m=n("uw3m"),d=n("az2Z"),h=n("s+DT"),f=n("hReu"),_=n("LAqV"),g=n("uWOQ"),b=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bSettingsChanged=!1,n.m_bCommunityPreferencesChanged=!1,n.state={friendSettings:Object(r.a)({},t.friendsSettingsInitial),communityPreferences:Object(r.a)({},t.communityPreferencesInitial)},n}return Object(r.d)(t,e),t.prototype.componentDidUpdate=function(e){for(var t={},n=this.props,o=n.friendsSettingsInitial,i=n.communityPreferencesInitial,a=0,s=Object.keys(o);a<s.length;a++){o[p=s[a]]!=e.friendsSettingsInitial[p]&&(t[p]=o[p])}for(var c={},l=0,u=Object.keys(i);l<u.length;l++){var p;i[p=u[l]]!=e.communityPreferencesInitial[p]&&(c[p]=i[p])}Object.keys(t).length&&this.setState({friendSettings:Object(r.a)(Object(r.a)({},this.state.friendSettings),t)}),Object.keys(c).length&&this.setState({communityPreferences:Object(r.a)(Object(r.a)({},this.state.communityPreferences),c)}),this.props.bSubmitImmediate&&(this.m_bSettingsChanged||this.m_bCommunityPreferencesChanged)&&this.props.onSubmit(this.state.friendSettings,this.state.communityPreferences),this.m_bSettingsChanged=!1,this.m_bCommunityPreferencesChanged=!1},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnSubmit=function(){this.props.onSubmit(this.state.friendSettings,this.state.communityPreferences),this.m_bSettingsChanged=!1,this.m_bCommunityPreferencesChanged=!1},t.prototype.HandleRadioChange=function(e){this.setState({friendSettings:Object(r.a)(Object(r.a)({},this.state.friendSettings),{nChatFlashMode:parseInt(e.currentTarget.value)})}),this.m_bSettingsChanged=!0},t.prototype.OnSettingToggled=function(e,t){var n;this.setState({friendSettings:Object(r.a)(Object(r.a)({},this.state.friendSettings),(n={},n[e]=t,n))}),this.m_bSettingsChanged=!0},t.prototype.OnCommunityPreferenceToggled=function(e,t){var n;this.setState({communityPreferences:Object(r.a)(Object(r.a)({},this.state.communityPreferences),(n={},n[e]=t,n))}),this.m_bCommunityPreferencesChanged=!0},t.prototype.FriendsSettingsToggleRow=function(e){var t=this;return i.createElement(a.u,{key:e.strName,onChange:function(n){t.OnSettingToggled(e.strName,n)},label:e.strLabel,checked:!!this.state.friendSettings[e.strName],description:e.strDesc?e.strDesc:""})},t.prototype.FriendsSettingsCheckbox=function(e){var t=this;return i.createElement(a.e,{key:e.strName,onChange:function(n){t.OnSettingToggled(e.strName,n)},checked:!!this.state.friendSettings[e.strName]})},t.prototype.FriendsSettingsCommunityPreferenceToggleRow=function(e){var t=this;return i.createElement(a.u,{key:"CommunityPreference"+e.strName,onChange:function(n){t.OnCommunityPreferenceToggled(e.strName,n)},label:e.strLabel,checked:!!this.state.communityPreferences[e.strName],description:e.strDesc?e.strDesc:""},e.children)},t.prototype.SettingLink=function(e){return i.createElement("div",{className:"_DialogInputContainer _DialogLayout"},i.createElement("div",{className:"displayColumn alignSelfCenter"},i.createElement("div",{className:"DialogToggle_Label"},i.createElement(g.b,{href:e.strLink},e.strLabel)),e.strDesc&&i.createElement("div",{className:"DialogToggle_Description"},e.strDesc),this.props.children))},Object(r.c)([l.a],t.prototype,"OnSubmit",null),Object(r.c)([l.a],t.prototype,"HandleRadioChange",null),Object(r.c)([l.a],t.prototype,"OnSettingToggled",null),Object(r.c)([l.a],t.prototype,"OnCommunityPreferenceToggled",null),Object(r.c)([l.a],t.prototype,"FriendsSettingsToggleRow",null),Object(r.c)([l.a],t.prototype,"FriendsSettingsCheckbox",null),Object(r.c)([l.a],t.prototype,"FriendsSettingsCommunityPreferenceToggleRow",null),Object(r.c)([l.a],t.prototype,"SettingLink",null),t}(a.w);!function(e){e[e.k_EChatFontSizeSmall=1]="k_EChatFontSizeSmall",e[e.k_EChatFontSizeDefault=2]="k_EChatFontSizeDefault",e[e.k_EChatFontSizeLarge=3]="k_EChatFontSizeLarge"}(o||(o={}));var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props.bParenthesizeNicknames,t=Object(u.d)("#FriendSettings_ExampleFriend"),n=Object(u.d)("#FriendSettings_ExampleNickname"),o=new p.b(new h.a);return o.m_strPlayerName=t,o.m_ePersonaState=1,o.m_strAvatarHash=p.c,i.createElement("div",{className:"friend online friendSettingsFakeFriend"},i.createElement(m.c,{className:"fakeFriendAvatar",persona:o,statusPosition:"right"}),i.createElement(d.a,{className:"labelHolder",persona:o,eFriendRelationship:3,bIsSelf:!1,strNickname:n,bParenthesizeNicknames:e,bCompactView:!1}))},t}(i.Component),y=function(e){function t(t){return e.call(this,t)||this}return Object(r.d)(t,e),t.prototype.SetChatFontSize=function(e){this.setState({friendSettings:Object(r.a)(Object(r.a)({},this.state.friendSettings),{nChatFontSize:e})}),this.m_bSettingsChanged=!0},t.prototype.render=function(){var e=this,t=this.FriendsSettingsToggleRow,n=this.state.friendSettings.nChatFontSize;return i.createElement(a.k,{className:"DialogBody",onSubmit:this.OnSubmit},i.createElement("div",{className:"SettingsGroup"},i.createElement(t,{strName:"bCompactFriendsList",strLabel:Object(u.d)("#FriendSettings_CompactFriendsAndChat")}),i.createElement(t,{strName:"bCompactQuickAccess",strLabel:Object(u.d)("#FriendSettings_CompactQuickAccess")}),i.createElement(a.p,{className:"friendSettingsSubheader"},Object(u.d)("#FriendSettings_ChatFontSize")),i.createElement(a.C,{className:"FriendsSettingsChatFontSizeSection_ButtonRow"},i.createElement(a.d,{className:"smallFontSetting "+(n==o.k_EChatFontSizeSmall?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(o.k_EChatFontSizeSmall)}},Object(u.d)("#FriendSetting_ChatFontSmall")),i.createElement(a.d,{className:"defaultFontSetting "+(n==o.k_EChatFontSizeDefault?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(o.k_EChatFontSizeDefault)}},Object(u.d)("#FriendSetting_ChatFontDefault")),i.createElement(a.d,{className:"largeFontSetting "+(n==o.k_EChatFontSizeLarge?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(o.k_EChatFontSizeLarge)}},Object(u.d)("#FriendSetting_ChatFontLarge")))),!this.props.bSubmitImmediate&&i.createElement(a.s,{onCancel:this.props.onCancel}))},Object(r.c)([l.a],t.prototype,"SetChatFontSize",null),t=Object(r.c)([c.a],t)}(b),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.FriendsSettingsToggleRow,t=s.a.IN_CLIENT?"#FriendSettings_RememberOpenChats_DescClient":"#FriendSettings_RememberOpenChats_Desc",n=this.SettingLink;return i.createElement(a.k,{className:"DialogBody",onSubmit:this.OnSubmit},i.createElement("div",{className:"SettingsGroup"},this.props.bShowPopupOpts&&i.createElement(i.Fragment,null,i.createElement(a.u,{onChange:function(e){return f.i.ToggleSingleWindowMode(e)},label:Object(u.d)("#FriendSettings_DockChats"),checked:_.f.SettingsStore.BSingleWindowModeEnabled()}),i.createElement(e,{strName:"bAlwaysNewChatWindow",strLabel:Object(u.d)("#FriendSettings_AlwaysNewChatWindow")})),i.createElement(e,{strName:"bDisableEmbedInlining",strLabel:Object(u.d)("#FriendSettings_DisableEmbedInlining")}),i.createElement(e,{strName:"bRememberOpenChats",strLabel:Object(u.d)("#FriendSettings_RememberOpenChats"),strDesc:Object(u.d)(t)}),i.createElement(e,{strName:"b24HourClock",strLabel:Object(u.d)("#FriendSettings_AlwaysUse24HourClock")}),i.createElement(e,{strName:"bDisableSpellcheck",strLabel:Object(u.d)("#FriendSettings_DisableSpellcheck")}),_.f.UIStore.show_winter_sale_ui&&i.createElement(e,{strName:"bDisableRoomEffects",strLabel:Object(u.d)("#FriendSettings_DisableRoomEffects")}),i.createElement(n,{strLabel:Object(u.d)("#TextFilterStatus_ChangeSettings"),strLink:_.f.ChatStore.GetTextFilterSettingsURL(),strDesc:_.f.ChatStore.GetTextFilterStatus()})))},t=Object(r.c)([c.a],t)}(b),C=function(e){function t(t){return e.call(this,t)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.FriendsSettingsToggleRow,t=this.FriendsSettingsCommunityPreferenceToggleRow;return i.createElement(a.k,{className:"DialogBody",onSubmit:this.OnSubmit},i.createElement("div",{className:"SettingsGroup"},i.createElement(t,{strName:"bParenthesizeNicknames",strLabel:Object(u.d)("#FriendSettings_ParenthesizeNicknames")},i.createElement(v,{bParenthesizeNicknames:this.state.communityPreferences.bParenthesizeNicknames})),i.createElement(e,{strName:"bCategorizeInGameFriendsByGame",strLabel:Object(u.d)("#FriendSettings_CategorizeInGameFriendsByGame")}),i.createElement(e,{strName:"bHideOfflineFriendsInTagGroups",strLabel:Object(u.d)("#FriendSettings_HideOfflineFriendsInCategories")}),i.createElement(e,{strName:"bHideCategorizedFriends",strLabel:Object(u.d)("#FriendSettings_HideCategorizedFriends")}),i.createElement(e,{strName:"bForceAlphabeticFriendSorting",strLabel:Object(u.d)("#FriendSettings_SortFriendsByStatus")}),this.props.bDoNotDisturbSupported&&i.createElement(e,{strName:"bSignIntoFriends",strLabel:Object(u.d)("#FriendSettings_SignInToFriends")}),i.createElement(e,{strName:"bAnimatedAvatars",strLabel:Object(u.d)("#FriendSettings_AnimatedAvatars")})))},t=Object(r.c)([c.a],t)}(b)},mh12:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("G4oX"),c=n("1n9R"),l=n("7l8a"),u=new(function(){function e(){this.m_mapAppLinkInfo=new Map,this.m_mapMissingApps=new Map,this.m_mapInFlightRequests=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.GetNumMissingAppLinks=function(){return this.m_mapMissingApps.size},e.prototype.GetNumAppLinks=function(){return this.m_mapAppLinkInfo.size},e.prototype.GetMissingAppIDs=function(){return this.m_mapMissingApps},e.prototype.GetAllLoadedAppLinks=function(){return this.m_mapAppLinkInfo},e.prototype.BHasAllAppLinksLoaded=function(e){for(var t=0;t<e.length;++t)if(!this.m_mapAppLinkInfo.has(e[t])&&!this.m_mapMissingApps.has(e[t]))return!1;return!0},e.prototype.BHasAppLinkLoaded=function(e){return"string"==typeof e&&(e=Number.parseInt(e)),this.m_mapAppLinkInfo.has(e)||this.m_mapMissingApps.has(e)},e.prototype.LazyInit=function(){var e=this;if(!this.m_bLoadedFromConfig){var t=Object(c.g)("applinkinfo","application_config");this.ValidateStoreDefault(t)&&t.forEach((function(t){var n=new l.a;n.InitFrom(t),e.m_mapAppLinkInfo.set(n.appid,n)}));var n=Object(c.g)("additional_applinks","application_config");this.ValidateStoreDefault(n)&&n.forEach((function(t){t.appid=Number(t.appid);var n=t.appid;if(!e.m_mapAppLinkInfo.has(n)){var o=new l.a;o.InitFrom(t),e.m_mapAppLinkInfo.set(n,o)}}));var o=Object(c.g)("appunknown","application_config");Object(s.a)(o)&&o.forEach((function(t){return e.m_mapMissingApps.set(t,!0)})),this.m_bLoadedFromConfig=!0}},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&"string"==typeof t[0].title},e.prototype.GetAppLinkInfo=function(e){return this.LazyInit(),"string"==typeof e&&(e=Number.parseInt(e)),this.m_mapAppLinkInfo.get(e)},e.prototype.LoadAppLinkInfo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,u=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.LazyInit(),t=e.map((function(e){return"string"==typeof e&&(e=Number.parseInt(e)),u.m_mapInFlightRequests.get(e)})),n=[],e.forEach((function(e){"string"==typeof e&&(e=Number.parseInt(e)),!e||u.m_mapAppLinkInfo.has(e)||u.m_mapMissingApps.has(e)||u.m_mapInFlightRequests.has(e)||n.push(e)})),!n.length)return[3,2];for(n.sort(),r=Promise.resolve(),s=function(){var e=Math.min(50,n.length),t=n.slice(0,e);n=n.slice(e);var o={appids:t.join(","),cc:c.c.COUNTRY||"US",l:c.c.LANGUAGE,origin:self.origin},s=r.then((function(){return i.a.get(c.c.STORE_BASE_URL+"broadcast/ajaxgetbatchappcapsuleinfo",{params:o})})).then((function(e){return Object(a.F)((function(){var n=e&&e.data&&e.data.apps;if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o],a=new l.a;a.InitFrom(i),u.m_mapAppLinkInfo.set(a.appid,a)}t.forEach((function(e){u.m_mapAppLinkInfo.has(e)||(u.m_mapMissingApps.set(e,!0),"dev"===c.c.WEB_UNIVERSE&&console.log("Debug/Dev: AppID marked as missing: "+e)),u.m_mapInFlightRequests.delete(e)}))}))}));t.forEach((function(e){return u.m_mapInFlightRequests.set(e,s)})),r=s};n.length>0;)s();return[4,r];case 1:o.sent(),o.label=2;case 2:return[4,Promise.all(t)];case 3:return o.sent(),[2]}}))}))},e.prototype.AddAppLinks=function(e){if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(!this.m_mapAppLinkInfo.has(o.appid)){var r=new l.a;r.InitFrom(o),this.m_mapAppLinkInfo.set(r.appid,r)}}},Object(o.c)([a.B],e.prototype,"m_mapAppLinkInfo",void 0),Object(o.c)([a.k],e.prototype,"LazyInit",null),Object(o.c)([a.k],e.prototype,"LoadAppLinkInfo",null),Object(o.c)([a.k],e.prototype,"AddAppLinks",null),e}());window.g_AppLinkStore=u},mrSG:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return u}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function s(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function l(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function u(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o}},oZT8:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return _}));var o=n("mrSG"),r=n("s+DT"),i=n("vDqi"),a=n.n(i),s=n("1n9R"),c=n("2vnA"),l=n("/SYB"),u=n("/1MB"),p=n("D3Kh");function m(e){return Boolean(e&&e.thumbnail_http_address)}var d=function(){function e(){this.m_chatVisibility="hide",this.m_bHideBroadcast=void 0,this.m_setStreamsLoadedListeners=new Set,this.m_bHasStartedVideo=!1,this.m_bUseFakeData=!1,this.m_bAllowStreamAutoPlay=!0}return e.prototype.BHasStreams=function(){return this.m_streams&&this.m_streams.length>0},e.prototype.GetPlayReadyStream=function(){return this.m_playReadyStream},e.prototype.AddStreamsLoadedListener=function(e){this.m_setStreamsLoadedListeners.add(e)},e.prototype.RemoveStreamsLoadedListener=function(e){this.m_setStreamsLoadedListeners.delete(e)},e.prototype.NotifyStreamsLoadedListeners=function(){this.m_setStreamsLoadedListeners.forEach((function(e){return e()}))},e.prototype.LoadBIsEmbeddedBroadcastHidden=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(void 0!==this.m_bHideBroadcast)return[3,5];if(t=Object(s.g)("broadcastuser","application_config"))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),n=s.c.STORE_BASE_URL+"broadcast/ajaxgetuserbroadcastpreferences",[4,a.a.get(n,{params:{},cancelToken:e.token})];case 2:return r=o.sent(),t=r.data,[3,4];case 3:return i=o.sent(),console.log("LoadBIsEmbeddedBroadcastHidden: "+Object(l.a)(i).strErrorMsg),t={bHideStoreBroadcast:!1},[3,4];case 4:this.m_bHideBroadcast=t.bHideStoreBroadcast,o.label=5;case 5:return[2,this.m_bHideBroadcast]}}))}))},e.prototype.BIsEmbeddedBroadcastHidden=function(){return Boolean(this.m_bHideBroadcast)},e.prototype.GetSettings=function(){return this.m_settings},e.prototype.GetConcurrentStreams=function(){return this.m_streams?this.m_streams.length:0},e.prototype.GetChatVisibility=function(){return this.m_chatVisibility},e.prototype.ToggleChatVisibility=function(){"remove"!==this.m_chatVisibility&&(this.m_chatVisibility="hide"===this.GetChatVisibility()?"show":"hide")},e.prototype.HintLoadEmbeddablePreviewStreams=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:this.m_settings=e,t=null,n={eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.join(","):void 0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.a.get(s.c.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpreview",{params:n})];case 2:return t=o.sent(),[3,4];case 3:return r=o.sent(),console.error(r),[3,4];case 4:return[2,this.HandleHintLoadBroadcastResponse(t)]}}))}))},e.prototype.HintLoadEmbeddableStreams=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:this.m_settings=e,t=null,n={appid:e.appid,promotionName:e.bIsPreview?"preview":e.promotionName,clanid:e.clanid?e.clanid:e.event?e.event.clanSteamID.GetAccountID():void 0,listid:e.listid,subid:e.subid,bundleid:e.bundleid,eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.join(","):void 0,test:!1,cc:s.c.COUNTRY,l:s.c.LANGUAGE},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.a.get(s.c.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpage",{params:n})];case 2:return t=o.sent(),[3,4];case 3:return r=o.sent(),console.error(r),[3,4];case 4:return[2,this.HandleHintLoadBroadcastResponse(t)]}}))}))},e.prototype.HandleHintLoadBroadcastResponse=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return e?(this.m_mapDynamicStoreData=e.data.rgAppData,this.m_bUseFakeData=!1,e&&e.data&&e.data.filtered&&e.data.filtered.length>0||!this.m_settings.bIsPreview||(e.data={filtered:[{}],success:1,total_count:1,err_msg:"",broadcast_chat_visibility:"hide",rgAppData:null},this.m_bUseFakeData=!0),this.m_streams=e.data.filtered,e.data.broadcast_chat_visibility&&(this.m_chatVisibility=e.data.broadcast_chat_visibility),this.NotifyStreamsLoadedListeners(),this.m_bAllowStreamAutoPlay?[4,this.AutoStartVideoStream(this.m_streams)]:[3,2]):[2,null];case 1:return[2,t.sent()];case 2:return[2,null]}}))}))},e.prototype.AutoStartVideoStream=function(t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_bHasStartedVideo)return[2,null];n=new Set,o.label=1;case 1:return this.m_bUseFakeData?(this.m_playReadyStream||(this.m_playReadyStream={accountid:0,appid:7,thumbnail_http_address:""}),[2,this.m_playReadyStream]):[3,2];case 2:return r=t.filter((function(e){return!n.has(e)})),(i=e.GetAutoStartStream(r))?[4,this.AttemptToPlayStream(i)]:[2,null];case 3:if(o.sent())return[2,i];n.add(i),o.label=4;case 4:return[3,1];case 5:return[2]}}))}))},e.prototype.DisableAutoPlay=function(){this.m_bAllowStreamAutoPlay=!1},e.prototype.EnableAutoPlay=function(e){this.m_bAllowStreamAutoPlay||(this.m_bAllowStreamAutoPlay=!0,this.AutoStartVideoStream(e))},e.prototype.AttemptToPlayStream=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:t=null,this.m_bHasStartedVideo=!0,o.label=1;case 1:return o.trys.push([1,3,,4]),n=s.c.STORE_BASE_URL+"broadcast/ajaxcheckbroadcast",r={broadcastaccountid:e.accountid,viewer_token:p.BroadcastWatchStore.GetViewerToken()},[4,a.a.get(n,{params:r})];case 2:return t=o.sent(),[3,4];case 3:return i=o.sent(),console.error(i),[3,4];case 4:return 1!=t.data.success?[2,null]:(e.steamid=t.data.steamid,this.m_playReadyStream=e,(this.m_settings.appid||this.m_settings.event)&&"remove"!==this.m_chatVisibility&&(this.GetConcurrentStreams()>1?this.m_chatVisibility="hide":this.m_chatVisibility=e.chat_visibility),h(e.appid,1,e.snr),[2,e])}}))}))},e.SelectRandomStream=function(e){var t=e.filter((function(e){return m(e)}));return 0===t.length?null:t[Math.floor(Math.random()*t.length)]},e.GetAutoStartStream=function(t){if(!t)return null;var n=e.SelectRandomStream(t.filter((function(e){return e.is_primary_stream})));return n||(n=e.SelectRandomStream(t.filter((function(e){return e.is_featured}))))||(n=e.SelectRandomStream(t)),n},e.prototype.GetStreams=function(){return this.m_streams},e.prototype.GetBroadcastURL=function(e){var t=null;return t=e.steamid?new r.a(e.steamid):r.a.InitFromAccountID(e.accountid),s.c.COMMUNITY_BASE_URL+"broadcast/watch/"+t.ConvertTo64BitString()},e.prototype.BIsAppStreaming=function(e){return Boolean(this.m_streams)&&this.m_streams.some((function(t){return Number(t.appid)===e}))},Object(o.c)([c.B],e.prototype,"m_mapDynamicStoreData",void 0),Object(o.c)([c.B],e.prototype,"m_streams",void 0),Object(o.c)([c.B],e.prototype,"m_playReadyStream",void 0),Object(o.c)([c.B],e.prototype,"m_settings",void 0),Object(o.c)([c.B],e.prototype,"m_chatVisibility",void 0),Object(o.c)([c.B],e.prototype,"m_bHideBroadcast",void 0),Object(o.c)([c.k],e.prototype,"HintLoadEmbeddablePreviewStreams",null),Object(o.c)([c.k],e.prototype,"HintLoadEmbeddableStreams",null),Object(o.c)([c.k],e.prototype,"AttemptToPlayStream",null),e}();function h(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r;return Object(o.e)(this,(function(o){return e>0&&7!=e&&n&&((r=new URLSearchParams).append("page_action",""+t),r.append("snr",n),a.a.post(s.c.STORE_BASE_URL+"ajaxreportproductaction/"+e+"/",r)),[2]}))}))}var f=new d,_=new u.a},oh5H:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return d}));var o=n("mrSG"),r=n("q1tI"),i=n("0N1H"),a=n("1n9R"),s=(n("XaMz"),n("Kcgk"));function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=d.LocalizeString(e);return void 0===o?e:(t.length>0&&(o=o.replace(/%(?:(\d+)\$)?s/g,(function(e,n){if(n<=t.length&&n>=1){var o=t[n-1];return String(null==o?"":o)}return e}))),o)}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=d.LocalizeString(e);if(void 0===i)return e;for(var a,s=[],c=/(.*?)%(\d+)\$s/g,l=0;a=c.exec(i);){l+=a[0].length,s.push(a[1]);var u=parseInt(a[2]);u>=1&&u<=t.length&&s.push(t[u-1])}return s.push(i.substr(l)),r.createElement.apply(r,Object(o.g)([r.Fragment,null],s))}function u(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return 1===t||"1"===t?c.apply(void 0,Object(o.g)([e,t],n)):c.apply(void 0,Object(o.g)([e+"_Plural",t],n))}n.d(t,"e",(function(){return s.a})),n.d(t,"f",(function(){return s.b})),n.d(t,"h",(function(){return s.d})),n.d(t,"j",(function(){return s.e})),n.d(t,"l",(function(){return s.g})),n.d(t,"m",(function(){return s.h})),n.d(t,"g",(function(){return s.c}));var p={english:"en",german:"de",french:"fr",italian:"it",korean:"ko",latam:"es-419",spanish:"es",schinese:"zh-cn",tchinese:"zh-tw",russian:"ru",thai:"th",japanese:"ja",brazilian:"pt-br",portuguese:"pt",polish:"pl",danish:"da",dutch:"nl",finnish:"fi",norwegian:"no",swedish:"sv",hungarian:"hu",czech:"cs",romanian:"ro",turkish:"tr",arabic:"ar",bulgarian:"bg",greek:"el",ukrainian:"uk",vietnamese:"vn"};function m(){var e="koreana"==a.c.LANGUAGE?"korean":a.c.LANGUAGE;return p[e]||null}var d=new(function(){function e(){this.m_mapTokens=new Map,this.m_mapFallbackTokens=new Map}return e.prototype.InitFromObjects=function(e,t,n,r,i){i||this.m_mapTokens.clear();var a=Object(o.a)(Object(o.a)({},n||{}),e),s=Object(o.a)(Object(o.a)({},r||{}),t||{});this.AddTokens(a,s)},e.prototype.InitDirect=function(e,t){this.m_mapTokens.clear(),this.m_mapFallbackTokens.clear(),this.AddTokens(e,t)},e.prototype.AddTokens=function(e,t){var n=this;Object.keys(e).forEach((function(t){n.m_mapTokens.set(t,e[t])})),t&&Object.keys(t).forEach((function(e){n.m_mapTokens.has(e)||n.m_mapTokens.set(e,t[e]),n.m_mapFallbackTokens.set(e,t[e])}))},e.prototype.GetPreferredLocales=function(){return this.m_rgLocalesToUse?this.m_rgLocalesToUse:navigator&&navigator.languages?navigator.languages:["en-US"]},e.prototype.GetELanguageFallbackOrder=function(e){void 0===e&&(e=!1);var t=new Array;return t.push(Object(i.f)(a.c.LANGUAGE)),(a.c.SUPPORTED_LANGUAGES||[]).forEach((function(e){e.value!=a.c.LANGUAGE&&t.push(Object(i.f)(e.value))})),e&&i.g.forEach((function(e){-1==t.indexOf(e)&&t.push(e)})),t},e.prototype.SetPreferredLocales=function(e){this.m_rgLocalesToUse=e},e.prototype.LocalizeString=function(e){if(e&&0!=e.length&&"#"==e.charAt(0)){var t=this.m_mapTokens.get(e.substring(1));if(void 0!==t)return t}},e.prototype.LocalizeStringFromFallback=function(e){if(e&&0!=e.length&&"#"==e.charAt(0)){var t=this.m_mapFallbackTokens.get(e.substring(1));if(void 0!==t)return t}},e}());window.LocalizationManager=d},pjYD:function(e,t,n){e.exports={Toggle:"toggle_Toggle_3RkmL",Disabled:"toggle_Disabled_1D8CR",ToggleRail:"toggle_ToggleRail_9iU2T",Highlight:"toggle_Highlight_2DAMR",On:"toggle_On_2xdfY",Off:"toggle_Off_2C6dp",ToggleSwitch:"toggle_ToggleSwitch_3Ac8T",ToggleRow:"toggle_ToggleRow_332T0",Label:"toggle_Label_3BEb7"}},r6f6:function(e,t,n){e.exports={miniProfile:"miniprofile_miniProfile_s5zcg",miniProfileContent:"miniprofile_miniProfileContent_25Sge",miniProfileHeader:"miniprofile_miniProfileHeader_3oBIW",miniProfilePlayer:"miniprofile_miniProfilePlayer_3cN6K",playerContent:"miniprofile_playerContent_PV11V",miniProfileBackground:"miniprofile_miniProfileBackground_3gfFJ",miniProfileBackgroundBlur:"miniprofile_miniProfileBackgroundBlur_G000o",miniProfileVideoBackground:"miniprofile_miniProfileVideoBackground_2rkGb",miniProfileVideoBackgroundContainer:"miniprofile_miniProfileVideoBackgroundContainer_nHYWp",miniProfileBackdropBlur:"miniprofile_miniProfileBackdropBlur_2MA75",miniProfileBlocked:"miniprofile_miniProfileBlocked_1fKEq",miniProfileNotFriends:"miniprofile_miniProfileNotFriends_7gGbH",notFriends:"miniprofile_notFriends_nfBN5",SnoozeContainer:"miniprofile_SnoozeContainer_2HCB2",miniProfileHover:"miniprofile_miniProfileHover_2P8wD",miniprofile_arrow:"miniprofile_miniprofile_arrow_38UVn",left:"miniprofile_left_qVPF2",playerAvatar:"miniprofile_playerAvatar_1dzWG",Frame:"miniprofile_Frame_3MZRj",avatarStatus:"miniprofile_avatarStatus_23H45",miniProfileAvatarStatus:"miniprofile_miniProfileAvatarStatus_1VgK8",personaName:"miniprofile_personaName_W3QjS",hasNickname:"miniprofile_hasNickname_dgG-l",personaNameLabel:"miniprofile_personaNameLabel_390p4",nickName:"miniprofile_nickName_2E8Iz",persona:"miniprofile_persona_1Z3Ey",personaAndIcons:"miniprofile_personaAndIcons_2OhlV",awayStatusLabel:"miniprofile_awayStatusLabel_2UzRy",nickname:"miniprofile_nickname_1W3dU",playerNicknameBracket:"miniprofile_playerNicknameBracket_1bkKo",notInOrWatchingGame:"miniprofile_notInOrWatchingGame_3AIC2",miniProfileBottom:"miniprofile_miniProfileBottom_3Agb6",miniProfileGameContainer:"miniprofile_miniProfileGameContainer_2FyZH",gameLogo:"miniprofile_gameLogo_2B0di",ingame:"miniprofile_ingame_3H2mq",richPresence:"miniprofile_richPresence_1rud4",gameState:"miniprofile_gameState_2Va3_",watchingbroadcast:"miniprofile_watchingbroadcast_24vwG",watchingbroadcastThumbnail:"miniprofile_watchingbroadcastThumbnail_3EoM-",gameContent:"miniprofile_gameContent_3x24t",miniProfileFeaturedContainer:"miniprofile_miniProfileFeaturedContainer_3ljT4",favoriteBadgeIcon:"miniprofile_favoriteBadgeIcon_icnrU",badgeIcon:"miniprofile_badgeIcon_2TBf0",featuredLabels:"miniprofile_featuredLabels_1dGw1",friendPlayerLevelNum:"miniprofile_friendPlayerLevelNum_2Ni_1",featuredTitle:"miniprofile_featuredTitle_2_2RA",mutualFriends:"miniprofile_mutualFriends_36Vl4",featuredSubTitle:"miniprofile_featuredSubTitle_2p8kJ"}},r95U:function(e,t,n){e.exports={scrollMaskVertical:"chatroomnotificationsettings_scrollMaskVertical_3HdsB"}},rWGG:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return C}));var o=n("mrSG"),r=n("5FJe"),i=n("TyAF"),a=n("q1tI"),s=n("i8i4"),c=n("JtU4"),l=n("/IDK"),u=n("oh5H"),p=n("1VtQ"),m=n("LAqV"),d=n("D3Kh"),h=n("s+DT"),f=n("xdma"),_=n("eMko"),g=n("8AUz");n("7oej");function b(e){return a.createElement(g.a,{target:e.target,className:"friendHover miniProfileHover",visibilityObserver:e.hoverInstance,onNoSpace:e.onNoSpace,direction:e.direction},a.createElement(S,{hoverInstance:e.hoverInstance}))}var v=function(e){function t(t){var n=e.call(this,t)||this,o=n.props.broadcastAccountID&&h.a.InitFromAccountID(n.props.broadcastAccountID);return n.state={broadcastInfo:o&&d.BroadcastWatchStore.StartInfo(o.ConvertTo64BitString())},n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){if(this.props.broadcastAccountID!==e.broadcastAccountID){this.state.broadcastInfo&&d.BroadcastWatchStore.StopInfo(this.state.broadcastInfo);var t=this.props.broadcastAccountID&&h.a.InitFromAccountID(this.props.broadcastAccountID);this.setState({broadcastInfo:t&&d.BroadcastWatchStore.StartInfo(t.ConvertTo64BitString())})}},t.prototype.componentWillUnmount=function(){this.state.broadcastInfo&&d.BroadcastWatchStore.StopInfo(this.state.broadcastInfo)},t.prototype.render=function(){return this.state.broadcastInfo?a.createElement(f.a,{src:this.state.broadcastInfo.m_strThumbnailUrl}):null},t=Object(o.c)([i.a],t)}(a.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=m.f.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(this.props.friend.steamid64);if(null!=e){for(var t=a.createElement("div",{className:"mutualFriendTitle"}," ",Object(u.d)("#FriendGroup_MutualFriends_Title")," "),n=[],o=Array.from(e),r=0;r<o.length&&r<10;r++){var i=m.f.FriendStore.GetFriend(o[r]);n.push(a.createElement("div",{className:"mutualFriend",key:i.steamid64},a.createElement("img",{className:"mutualFriendAvatar",src:i.persona.avatar_url_medium}),a.createElement("div",{className:"mutualFriendLabel"},i.display_name)))}return o.length>=10&&n.push(a.createElement("div",{className:"mutualFriend"},a.createElement("div",{className:"mutualFriendLabel plusOthersLabel"},Object(u.i)("#FriendGroup_MutualFriends_Others",o.length-10)))),a.createElement("div",{className:"mutualFriendsContainer"}," ",t," ",a.createElement("div",null," ",n," ")," ")}return a.createElement("div",null)},t}(a.Component),S=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.hoverInstance.hover,t=e.persona,n={className:"miniProfileHoverInner",persona:e.persona,data_loader:e};t.is_watchingbroadcast&&(n.broadcast_description=e.friend.GetBroadcastDescription(),n.broadcast_thumbnail=a.createElement("div",{className:"watchingbroadcastThumbnail"},a.createElement(v,{broadcastAccountID:t.m_broadcastAccountId}))),e.friend.has_nickname&&(n.nickname=e.friend.nickname),n.is_friend=e.friend.is_friend||e.friend==m.f.FriendStore.self,n.is_blocked=e.friend.is_blocked,n.friend_relationship=e.friend.efriendrelationship;var i=a.createElement("div",null),s=this.props.hoverInstance.context;return s&&s.friendGroup&&s.friendGroup.m_eDisplayType==r.c.eIncomingInvites&&(i=a.createElement(y,{friend:e.friend})),n.mutual_friends=i,a.createElement(_.b,Object(o.a)({},n))},t=Object(o.c)([i.a],t)}(a.Component),C=function(e){function t(t,n,o){var r=e.call(this,{target:t,visibilityObserver:n,className:"friendHover miniProfileHover"},o)||this;return r.m_instance=n,r}return Object(o.d)(t,e),t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){},t.prototype.InternalRender=function(){return a.createElement(S,{hoverInstance:this.m_instance})},t}(function(e){function t(t,n){var o=e.call(this,"hoverpopup",{title:"hover",html_class:"HoverPopup client_chat_frame",body_class:"HoverPopupBody Hover"+t.className,replace_existing_popup:!0,target_browser:n,eCreationFlags:c.c.Tooltip})||this;return o.m_hoverProps=t,o}return Object(o.d)(t,e),t.prototype.UpdateParamsBeforeShow=function(e){var t=l.h(this.m_hoverProps.target.ownerDocument.defaultView,this.m_hoverProps.target.getBoundingClientRect());return e.dimensions={left:t.right,top:t.top,width:1,height:1},e.availscreenwidth=this.m_hoverProps.target.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_hoverProps.target.ownerDocument.defaultView.screen.availHeight,e},t.prototype.Render=function(e,t){var n=this.InternalRender();s.render(a.createElement(O,Object(o.a)({},this.m_hoverProps,{popup:e}),n),t)},t}(c.a)),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bNoSpace=!1,t.state={x:void 0,y:void 0,width:void 0,height:void 0,hoverPositionReady:!1},t}return Object(o.d)(t,e),t.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},t.prototype.componentDidUpdate=function(){this.positionHover()},t.prototype.render=function(){var e=this;return void 0!==this.state.x&&this.props.target.ownerDocument.defaultView.SteamClient.Window.GetWindowRestoreDetails((function(t){var n=e.state.x-e.props.target.ownerDocument.defaultView.screenX,o=e.state.y-e.props.target.ownerDocument.defaultView.screenY;try{e.props.popup.SteamClient.Window.PositionWindowRelative(t,n,o,e.state.width,e.state.height)}catch(e){console.error(e)}})),a.createElement("div",{className:"HoverPositionPopup",ref:this.bindHover},this.props.children)},t.prototype.positionHover=function(){var e=this.m_elHover,t=this.props.target;if(e&&t&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var n=this.props.popup,o=t.ownerDocument.defaultView;if(n&&!n.closed){var r=l.h(o,t.getBoundingClientRect()),i=l.h(n,e.getBoundingClientRect()),a=r.left,s=r.top,c=n.screen,u=0;c.availLeft&&(u=c.availLeft);var p=r.right+i.width+2,m=n.screen.availWidth+u-p,d=r.left-i.width-u;a=m<2&&d>m?r.left-i.width-3+3:r.left+r.width- -3;var h=0;r.height<48&&(h=Math.floor(r.height/2)-24),s=r.top-15+h;if(r.top+i.height+0>n.screen.availHeight){var f=i.height+0-(n.screen.availHeight-r.top),_=null!=e.querySelector(".miniprofile_ingame")?78:24;f=Math.min(i.height-_,f),s=r.top-f}a=Math.floor(a),s=Math.floor(s);var g=Math.ceil(i.width),b=Math.ceil(i.height);a!=this.state.x&&this.setState({x:a}),s!=this.state.y&&this.setState({y:s}),g!=this.state.width&&this.setState({width:g}),b!=this.state.height&&this.setState({height:b}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},Object(o.c)([p.a],t.prototype,"bindHover",null),t=Object(o.c)([i.a],t)}(a.Component)},rsEv:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var o=n("mrSG"),r=n("tkkQ"),i=n("4HGb"),a=n("RBVV"),s=n("7sd/"),c=n("2vnA"),l=n("oh5H"),u=n("/SYB"),p=n("tZiA"),m=(n("5Nu3"),n("5FJe")),d=n("LAqV"),h=n("1VtQ"),f=n("/FkP"),_=n("J0bI"),g=n("WpBz"),b=n("XaMz"),v=n("9Eit"),y=n("ha6C"),S=function(e){function t(t,n,o,r){var i=e.call(this,t.FriendStore,t,t.CMInterface)||this;return i.LOG=u.b.create((function(){return i.unique_id}),!1),i.m_unSortOrder=0,i.m_lastChatLink=null,i.m_groupVoiceActiveMembers=new m.b(Object(l.d)("#Chat_MemberGroup_VoiceChatting")),i.m_eDesktopNotificationLevel=0,i.m_eMobileNotificationLevel=0,i.m_bUnreadIndicatorMuted=!1,i.m_group=n,i.m_ulGroupID=n.GetGroupID(),i.m_ulChatID=o,i.m_bIsDefaultForGroup=r,i.m_groupVoiceActiveMembers.SetOnHeaderClick(i.StartVoiceChat),i.m_MessageSendQueue=new v.a(i.m_ulGroupID+"."+i.m_ulChatID),i.m_MessageSendQueue.InitFromStorage().then((function(){return i.InitQueuedMessages()})),i}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"VoiceChatStore",{get:function(){return this.ChatStore.VoiceChat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unread_message_count",{get:function(){switch(this.GetPlatformNotificationLevel()){case 4:return this.m_cUnreadChatMessages;case 3:case 2:return this.has_unread_mention?1:0;case 1:case 0:default:return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time_last_activity",{get:function(){var e=this.GetPlatformNotificationLevel(),t=0,n=this.m_rtFirstUnread||this.time_last_ack;switch(n&&(t=Math.max(n,t)),e){case 4:t=Math.max(this.time_last_message||0,t);break;case 3:case 2:t=Math.max(this.time_last_mention||0,t);break;case 1:case 0:break;default:Object(b.a)(!1,"unhandled EChatRoomNotificationLevel: "+e)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"has_unread_messages",{get:function(){return this.BIsUnreadIndicatorMuted()?this.unread_message_count>0:this.has_any_unread_messages},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"has_any_unread_messages",{get:function(){return this.m_cUnreadChatMessages>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"has_unread_mention",{get:function(){return this.m_rtLastMention>this.m_rtLastAckedChatMsg},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time_last_mention",{get:function(){return this.m_rtLastMention},enumerable:!1,configurable:!0}),t.prototype.BHasAckedChatMsg=function(){return this.m_rtLastAckedChatMsg&&0!=this.m_rtLastAckedChatMsg},t.prototype.LoadChatLogs=function(){return e.prototype.LoadChatLogs.call(this)},t.prototype.GetMessagesFromTimeRange=function(e,t,n,o,r){var s=this,c=i.b.Init(a.s);return c.Body().set_chat_group_id(this.m_ulGroupID),c.Body().set_chat_id(this.m_ulChatID),c.Body().set_max_count(r),c.Body().set_start_time(e),c.Body().set_start_ordinal(t),c.Body().set_last_time(n),c.Body().set_last_ordinal(o),this.LOG("trying to load "+r+" messages in range "+e+":"+t+" - "+n+":"+o),a.X.GetMessageHistory(this.m_ChatStore.CMInterface.GetServiceTransport(),c).then((function(e){var t=e.GetEResult();if(1!=t)throw t;return{messages:s.GetMessagesFromResponse(e),moreAvailable:e.Body().more_available()}}))},t.prototype.GetMessagesFromResponse=function(e){for(var t=e.Body().messages(),n=[],o=t.length-1;o>=0;o--){var r=t[o],i=r.server_message().message()||0,a=void 0,s=void 0;if(0!=i){if(i=r.server_message().message(),a=r.server_message().string_param(),s=r.server_message().accountid_param(),!Object(f.k)(i)){this.LOG("unrenderable message "+i);continue}}else if(!r.message()||0==r.message().trim().length)continue;var c=new f.e(r.sender(),r.server_timestamp(),r.ordinal()||0,r.message(),i,a,s);r.deleted()&&(c.eDeleteState=f.f.Deleted),n.push(c)}return n},t.prototype.GetBBCodeParser=function(){return this.m_ChatStore.ChatRoomBBCodeParser},t.prototype.OnNewChatMsgAdded=function(e,t,n,o){r.a.IN_CLIENT&&Object(y.a)("WebChat.OnNewGroupChatMsgAdded")&&d.f.SettingsStore.BClientHasFeatureOrOnWeb("SteamworksChatAPI")&&SteamClient.WebChat.OnNewGroupChatMsgAdded(this.m_ulGroupID,this.m_ulChatID,e,t,n,o)},t.prototype.AckChatMsgOnServer=function(e){var t=i.b.Init(a.c);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_chat_id(this.m_ulChatID),t.Body().set_timestamp(e),a.X.AckChatMessage(this.m_CMInterface.GetServiceTransport(),t)},t.prototype.GetPlatformNotificationLevel=function(){return r.a.IN_MOBILE?this.GetMobileNotificationLevel():this.GetDesktopNotificationLevel()},t.prototype.GetDesktopNotificationLevel=function(){return 0==this.m_eDesktopNotificationLevel?this.m_group.GetDesktopNotificationLevel():this.m_eDesktopNotificationLevel},t.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eMobileNotificationLevel?this.m_group.GetMobileNotificationLevel():this.m_eMobileNotificationLevel},t.prototype.BIsUnreadIndicatorMuted=function(){return this.m_group.BIsUnreadIndicatorMuted()},t.prototype.GetDesktopNotificationLevelSetting=function(){return this.m_eDesktopNotificationLevel},t.prototype.GetMobileNotificationLevelsetting=function(){return this.m_eMobileNotificationLevel},t.prototype.UpdateUserState=function(e){this.m_rtLastAckedChatMsg=e.time_last_ack(),this.m_rtLastMention=e.time_last_mention(),this.m_eDesktopNotificationLevel=e.desktop_notification_level(),this.m_eMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted(),this.m_rtFirstUnread=e.time_first_unread(),(this.m_rtLastAckedChatMsg||0)<this.m_rtLastMessageReceived&&(this.m_cUnreadChatMessages=1,this.m_rtLastAckedChatMsg&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastAckedChatMsg+1),d.f.FriendStore.UpdateUnreadMessagesGlobal())},t.prototype.UpdateChatState=function(e){var t=this;Object(b.a)(this.m_ulChatID==e.chat_id(),"State for different chat room"),this.m_strName=e.chat_name(),this.m_bVoiceAllowed=e.voice_allowed();for(var n=!1,o=!1,i=this.m_FriendStore.self.accountid,a=new Set(this.m_groupVoiceActiveMembers.GetCurrentMemberSet()),s=0,c=e.members_in_voice();s<c.length;s++){var l=c[s];a.delete(l)||(this.m_groupVoiceActiveMembers.AddMember(l),l!=i&&(n=!0))}a.forEach((function(e){t.m_groupVoiceActiveMembers.RemoveMember(e);var n=t.m_groupVoiceActiveMembers.HasMember(e);t.VoiceChatStore.OnUserLeftChatRoomVoiceChat(t.m_ulGroupID,t.m_ulChatID,e,n),e!=i&&(o=!0)})),this.BVoiceActive()&&(n?d.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_enter.m4a?v=1"):o&&d.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1")),this.m_rtLastMessageReceived=e.time_last_message(),this.m_strLastMessage=e.last_message(),this.m_accountIDLastMessage=e.accountid_last_message(),this.m_unSortOrder=e.sort_order()},Object.defineProperty(t.prototype,"voice_active_member_list",{get:function(){return this.m_groupVoiceActiveMembers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voice_active_contains_friends",{get:function(){for(var e=0;e<this.m_groupVoiceActiveMembers.member_list.length;e++)if(this.m_groupVoiceActiveMembers.member_list[e].is_friend||this.m_groupVoiceActiveMembers.member_list[e]==d.f.FriendStore.self)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voice_active_contains_self",{get:function(){for(var e=0;e<this.m_groupVoiceActiveMembers.member_list.length;e++)if(this.m_groupVoiceActiveMembers.member_list[e]==d.f.FriendStore.self)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voice_active_contains_only_self",{get:function(){return 1==this.m_groupVoiceActiveMembers.member_list.length&&this.m_groupVoiceActiveMembers.member_list[0]==d.f.FriendStore.self},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.IsDefaultRoomForGroup()?"Home":this.IsUnsavedVoiceChannel()?Object(l.d)("#Chat_CreateChatChannel_DefaultName"):this.m_strName},enumerable:!1,configurable:!0}),t.prototype.IsUnsavedVoiceChannel=function(){return!(0!=this.m_strName.length||!this.m_bVoiceAllowed)},t.prototype.GetParentGroupID=function(){return this.m_ulGroupID},t.prototype.GetGroup=function(){return this.m_group},t.prototype.IsDefaultRoomForGroup=function(){return this.m_bIsDefaultForGroup},t.prototype.GetRoomID=function(){return this.m_ulChatID},t.prototype.BIsDefaultRoom=function(){return this.m_bIsDefaultForGroup},Object.defineProperty(t.prototype,"unique_id",{get:function(){return"cr"+this.m_ulChatID},enumerable:!1,configurable:!0}),t.prototype.GetVoiceAllowed=function(){return this.m_bVoiceAllowed},t.prototype.IsTempVoiceRoom=function(){return!!this.GetVoiceAllowed()&&(!this.m_strName||0==this.m_strName.length)},t.prototype.GetSortOrder=function(){return this.m_unSortOrder},t.prototype.StartVoiceChat=function(){this.BVoiceActive()||this.ChatStore.VoiceChat.InitiateRoomChat(this.m_ulGroupID,this.m_ulChatID)},t.prototype.ToggleVoiceChat=function(){this.BVoiceActive()?this.ChatStore.VoiceChat.OnUserEndVoiceChat():this.StartVoiceChat()},t.prototype.BVoiceActive=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForRoom(this.m_ulGroupID,this.m_ulChatID)},t.prototype.SendChatMessageInternal=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,c=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.GetChatRoomGroup().BCanChat()?((n=i.b.Init(a.K)).Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(this.m_ulChatID),n.Body().set_message(e),r=this.AppendLocalEchoChatMsg(e),this.m_strLastMessage=e,this.m_accountIDLastMessage=this.m_FriendStore.self.accountid,[4,this.SendWithRetries(r,(function(){return a.X.SendChatMessage(c.m_ChatStore.CMInterface.GetServiceTransport(),n)}))]):((t=this.AppendLocalEchoChatMsg("")).eErrorSending=f.g.NoChatPermissionInGroup,[2,t.eErrorSending]);case 1:return(s=o.sent())===f.g.None&&(this.m_accountIDLastMessage=this.m_FriendStore.self.accountid),[2,s]}}))}))},t.prototype.DeleteChatMessages=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,c,l,u,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:for(t=e.map((function(e){return{rtTimestamp:e.rtTimestamp,unOrdinal:e.unOrdinal}})),this.UpdateChatMessageDeletedState(t,f.f.Deleting),(n=i.b.Init(a.i)).Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(this.m_ulChatID),r=0,s=e;r<s.length;r++)c=s[r],(l=n.Body().add_messages()).set_server_timestamp(c.rtTimestamp),l.set_ordinal(c.unOrdinal);return[4,a.X.DeleteChatMessages(this.m_ChatStore.CMInterface.GetServiceTransport(),n)];case 1:return u=o.sent(),1!=(p=u.GetEResult())?(this.UpdateChatMessageDeletedState(t,f.f.None),[2,p]):(this.UpdateChatMessageDeletedState(t,f.f.Deleted),[2,1])}}))}))},t.prototype.PopulateCommitFileUploadFormData=function(e,t){e.append("chat_group_id",this.m_ulGroupID),e.append("chat_id",this.m_ulChatID),e.append("spoiler",t.bSpoiler?"1":"0")},t.prototype.BShouldTrackUnreadMessages=function(){return this.m_bIsDefaultForGroup||!this.m_bVoiceAllowed||this.BVoiceActive()},t.prototype.BShouldSilentlyAddMessage=function(e){return d.f.FriendStore.GetPlayer(e.unAccountID).is_blocked},t.prototype.PlayChatRoomNotificationSound=function(){d.f.FriendStore.GetUserDoNotDisturb()||d.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_chatroom_notification.m4a?v=1")},t.prototype.PlayAtMentionSound=function(){d.f.FriendStore.GetUserDoNotDisturb()||d.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_at_mention.m4a?v=1")},t.prototype.OnReceivedNewMessage=function(e,t,n,o){var r=this;if(this.BShouldTrackUnreadMessages()){if(!e.BIsLocalEcho()&&e.unAccountID!=this.self.accountid){(e.Mentions.mention_all||e.Mentions.mention_here||e.Mentions.mention_user)&&(this.m_rtLastMention=e.rtTimestamp);var i=void 0;switch(this.GetPlatformNotificationLevel()){case 1:i=!1;break;case 2:i=e.Mentions.mention_user;break;case 3:i=e.Mentions.mention_user||e.Mentions.mention_here||e.Mentions.mention_all;break;case 4:default:i=!0}if(i&&!d.f.FriendStore.GetUserDoNotDisturb()){if(d.f.SettingsStore.FriendsSettings.bSounds_PlayChatRoomNotification&&(e.Mentions.mention_all||e.Mentions.mention_here||e.Mentions.mention_user)?this.PlayAtMentionSound():d.f.SettingsStore.FriendsSettings.bSounds_PlayChatRoomNotification&&t<4&&this.PlayChatRoomNotificationSound(),d.f.NotificationManager.BNotificationsPermitted()&&t<4&&d.f.BShowChatRoomNotification()){var a=d.f.FriendStore.GetPlayer(e.unAccountID);a.LoadIfNecessary();Object(c.J)((function(){return a.is_ready}),(function(){var t={title:r.m_bIsDefaultForGroup?r.GetGroup().name:r.GetGroup().name+" | "+r.name,body:a.display_name+': "'+n+'"',icon:a.persona.avatar_url_medium,rawbody:n,tag:"groupmsg_"+a.accountid,steamid:a.persona.m_steamid.ConvertTo64BitString(),chatroomgroupid:r.GetParentGroupID(),chatroomid:r.GetRoomID()};(t=r.DecorateNotification(e,t,n,o)).body=r.m_ChatStore.TextFilterStore.FilterText(e.unAccountID,t.body),t.body&&(d.f.NotificationManager.DisplayNotification(t,(function(e){return d.f.UIStore.ShowAndOrActivateChat(e,r,!0)})),r.m_bHasUnreadPriorityChatMessages||(r.m_bHasUnreadPriorityChatMessages=!0,d.f.FriendStore.UpdateUnreadMessagesGlobal()))}),{timeout:1e3})}if(t<4){var s=d.f.SettingsStore.FriendsSettings.nChatFlashMode,l=Promise.resolve(0==s);1==s&&(l=d.f.UIStore.IsChatWindowMinimized(this)),l.then((function(e){e&&d.f.UIStore.FlashChatWindow(r,!0)}))}}}(!this.m_rtFirstUnread||!this.m_group.BIsUnreadIndicatorMuted()&&this.m_rtFirstUnread<=this.m_rtLastAckedChatMsg)&&(this.m_rtFirstUnread=e.rtTimestamp)}},t.prototype.GetChatRoomGroup=function(){return this.m_ChatStore.GetChatRoomGroup(this.m_ulGroupID)},t.prototype.GetMember=function(e){return this.GetChatRoomGroup().GetMember(e)},t.prototype.CreateInviteLink=function(e){var t=this,n=i.b.Init(a.g);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_seconds_valid(e),n.Body().set_chat_id(this.m_ulChatID),a.X.CreateInviteLink(this.m_ChatStore.CMInterface.GetServiceTransport(),n).then((function(e){var n=e.Body().invite_code(),o=Object(_.a)(n),r=e.Body().seconds_valid();0!=r&&(r+=Math.floor(Date.now()/1e3)),t.m_lastChatLink={strInviteURL:o,rtExpires:r}}))},t.prototype.OnActivate=function(){this.m_ChatStore.OnChatRoomActivated(this),e.prototype.OnActivate.call(this)},Object.defineProperty(t.prototype,"lastChatLinkInfo",{get:function(){return this.m_lastChatLink},enumerable:!1,configurable:!0}),t.prototype.BCanDeleteMemberMessages=function(e){return this.GetChatRoomGroup().BCanDeleteMemberMessages(e)},t.prototype.ChangeNameWhileWaitingForRenameRequest=function(e){this.m_strName=e},t.prototype.SetNotificationPreferences=function(e,t,n){var o=i.b.Init(a.Q);o.Body().set_chat_group_id(this.m_ulGroupID);var r=o.Body().add_chat_room_preferences();return r.set_chat_id(this.m_ulChatID),void 0!==e&&(this.m_eDesktopNotificationLevel=e,r.set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(n=!1)),void 0!==t&&(this.m_eMobileNotificationLevel=t,r.set_mobile_notification_level(t)),void 0!==n&&(this.m_bUnreadIndicatorMuted=n,r.set_unread_indicator_muted(n)),a.X.SetUserChatGroupPreferences(d.f.CMInterface.GetServiceTransport(),o).then((function(e){return 1==e.GetEResult()}))},t.prototype.SetupAppCustomServerMsg=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a,c,l,u,p,m,h,f;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(t=JSON.parse(e.strMessage)||{},n=new Map,t.params)for(r in t.params)n.set(r.toString(),t.params[r].toString());return e.strServerMsgAppCustomLocalized="...",[4,d.f.AppInfoStore.GetRichPresenceLocAsync(this.m_group.GetOwnerAppID())];case 1:for(i=o.sent(),t.tok?e.strServerMsgAppCustomLocalized=i.Localize(t.tok,n):t.msg?e.strServerMsgAppCustomLocalized=i.SubstituteParams(t.msg,n):e.strServerMsgAppCustomLocalized=e.strMessage,a=Object(s.g)(e.strServerMsgAppCustomLocalized),c=null,l="",u=!1,p=0,m=a;p<m.length;p++)1!=(h=m[p]).type?2==h.type&&("mention"!=h.tag?"spoiler"!=h.tag&&(console.log("bbcode tag '"+h.tag+"' not allowed!"),u=!0):h.args&&(c||(c={}),"all"==(f=h.args[""])?c.mention_all=!0:"here"==f?c.mention_here=!0:f==this.m_FriendStore.self.accountid.toString()&&(c.mention_user=!0))):l+=h.text;return u&&(e.strServerMsgAppCustomLocalized=l),c&&(e.Mentions=c),[2,l]}}))}))},Object(o.c)([c.B],t.prototype,"m_strName",void 0),Object(o.c)([c.B],t.prototype,"m_unSortOrder",void 0),Object(o.c)([c.B],t.prototype,"m_lastChatLink",void 0),Object(o.c)([c.B],t.prototype,"m_rtLastMention",void 0),Object(o.c)([c.B],t.prototype,"m_eDesktopNotificationLevel",void 0),Object(o.c)([c.B],t.prototype,"m_eMobileNotificationLevel",void 0),Object(o.c)([c.B],t.prototype,"m_bUnreadIndicatorMuted",void 0),Object(o.c)([c.k],t.prototype,"UpdateUserState",null),Object(o.c)([c.k],t.prototype,"UpdateChatState",null),Object(o.c)([c.n],t.prototype,"name",null),Object(o.c)([h.a],t.prototype,"StartVoiceChat",null),Object(o.c)([h.a,Object(g.a)(100)],t.prototype,"PlayChatRoomNotificationSound",null),Object(o.c)([h.a,Object(g.a)(100)],t.prototype,"PlayAtMentionSound",null),Object(o.c)([c.k],t.prototype,"CreateInviteLink",null),Object(o.c)([c.k],t.prototype,"OnActivate",null),Object(o.c)([c.k],t.prototype,"ChangeNameWhileWaitingForRenameRequest",null),t}(p.a)},"s+DT":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("2lpH"),r=n.n(o),i=n("0N1H"),a=n("1n9R"),s=function(){function e(t,n,o,i){void 0===t&&(t=0),t instanceof e?this.m_ulSteamID=t.m_ulSteamID:"string"==typeof t?this.m_ulSteamID=r.a.fromString(t,!0):n&&o&&void 0!==i?this.SetFromComponents(t,i,o,n):this.m_ulSteamID=t?r.a.fromNumber(t,!0):r.a.UZERO}return e.InitFromAccountID=function(t){return new e(Number(t),a.c.EUNIVERSE,1,i.r)},e.InitFromClanID=function(t){return new e(Number(t),a.c.EUNIVERSE,7,0)},e.prototype.GetAccountID=function(){return this.m_ulSteamID.getLowBitsUnsigned()},e.prototype.GetInstance=function(){return 1048575&this.m_ulSteamID.getHighBitsUnsigned()},e.prototype.GetAccountType=function(){return this.m_ulSteamID.getHighBitsUnsigned()>>20&15},e.prototype.GetUniverse=function(){return this.m_ulSteamID.getHighBitsUnsigned()>>24&255},e.prototype.ConvertTo64BitString=function(){return this.m_ulSteamID.toString()},e.prototype.Render=function(){switch(this.GetAccountType()){case 0:return"[I:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 7:return"[g:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 4:return"[A:"+this.GetUniverse()+":"+this.GetAccountID()+":"+this.GetInstance()+"]";case 3:return"[G:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 2:return"[M:"+this.GetUniverse()+":"+this.GetAccountID()+":"+this.GetInstance()+"]";case 5:return"[P:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 6:return"[C:"+this.GetUniverse()+":"+this.GetAccountID()+"]";default:return"[U:"+this.GetUniverse()+":"+this.GetAccountID()+"]"}},e.prototype.BIsValid=function(){var e=this.GetAccountType();if(e<=0||e>=11)return!1;var t=this.GetUniverse();if(t<=0||t>=5)return!1;if(1==e){if(0==this.GetAccountID()||this.GetInstance()>i.s)return!1}else if(7==e){if(0==this.GetAccountID()||0!=this.GetInstance())return!1}else if(3==e&&0==this.GetAccountID())return!1;return!0},e.prototype.BIsIndividualAccount=function(){return 1==this.GetAccountType()},e.prototype.BIsClanAccount=function(){return 7==this.GetAccountType()},e.prototype.SetAccountID=function(e){this.m_ulSteamID=new r.a(e,this.m_ulSteamID.getHighBitsUnsigned(),!0)},e.prototype.SetInstance=function(e){this.SetFromComponents(this.GetAccountID(),e,this.GetAccountType(),this.GetUniverse())},e.prototype.SetAccountType=function(e){this.SetFromComponents(this.GetAccountID(),this.GetInstance(),e,this.GetUniverse())},e.prototype.SetUniverse=function(e){this.SetFromComponents(this.GetAccountID(),this.GetInstance(),this.GetAccountType(),e)},e.prototype.SetFromComponents=function(e,t,n,o){var i=((255&o)<<24)+((15&n)<<20)+(1048575&t),a=4294967295&e;this.m_ulSteamID=new r.a(a,i,!0)},e}()},s13G:function(e,t,n){e.exports={statusAndName:"personanameandstatus_statusAndName_9U-hi",threeLines:"personanameandstatus_threeLines_2pPym",blocked:"personanameandstatus_blocked_138jh",richPresenceLabel:"personanameandstatus_richPresenceLabel_3Q6g1",playerName:"personanameandstatus_playerName_1uxaf",playerNickname:"personanameandstatus_playerNickname_3-32P",playerNicknameBracket:"personanameandstatus_playerNicknameBracket_1lu-g",richPresenceContainer:"personanameandstatus_richPresenceContainer_21cNf",NoMask:"personanameandstatus_NoMask_1Wsqc",twoLine:"personanameandstatus_twoLine_2wZNn",DNDContainer:"personanameandstatus_DNDContainer_3h0SR",partyBeaconJoin:"personanameandstatus_partyBeaconJoin__ugTP",gameName:"personanameandstatus_gameName_qvibF",hidePersona:"personanameandstatus_hidePersona_1-otV",compactView:"personanameandstatus_compactView_2PCWF",noContextMenu:"personanameandstatus_noContextMenu_35VFv",gameIsPrivateIcon:"personanameandstatus_gameIsPrivateIcon_1cu1a",PendingPersona:"personanameandstatus_PendingPersona_1PcIG"}},sQq0:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return p})),n.d(t,"a",(function(){return m}));var o=n("mrSG"),r=n("hRO2"),i=r.BinaryReader.prototype,a=r.BinaryWriter.prototype;function s(e){var t={},n=e.fields;for(var o in n){var r=n[o];t[r.n]=r}return t}function c(e,t){var n=e.proto,o=e.fields,i=new n,a=function(e){var n=o[e],a=n.n,s=n.c,c=n.r;n.d,n.q;if(!t.hasOwnProperty(e))return"continue";var l=t[e];s?c?r.Message.setRepeatedWrapperField(i,a,(Array.isArray(l)?l:[]).map((function(e){return s.fromObject(e)}))):r.Message.setWrapperField(i,a,s.fromObject(l)):r.Message.setField(i,a,l)};for(var s in o)a(s);return i}function l(e,t,n){e.proto;var o=e.fields,i={};for(var a in o){var s=o[a],c=s.n,l=s.c,u=s.r,p=s.d,m=s.q;if(l)if(u)i[a]=r.Message.toObjectList(r.Message.getRepeatedWrapperField(n,l,c),l.toObject,t);else{var d=r.Message.getWrapperField(n,l,c,m?1:0);d&&(i[a]=l.toObject(t,d))}else{var h=r.Message.getFieldWithDefault(n,c,void 0!==p?p:null);(null!==h||m)&&(i[a]=h)}}return t&&(i.$jspbMessageInstance=n),i}function u(e,t,n){for(;n.nextField()&&!n.isEndGroup();){var o=e[n.getFieldNumber()];if(o){var i=o.n,a=o.c,s=o.r,c=(o.d,o.q,o.br);if(a){var l=new a;n.readMessage(l,a.deserializeBinaryFromReader),s?r.Message.addToRepeatedWrapperField(t,i,l,a):r.Message.setWrapperField(t,i,l)}else if(c){l=c.call(n);s?r.Message.addToRepeatedField(t,i,l):r.Message.setField(t,i,l)}else console.assert(c,"Reader func not set for field number "+i+" in class "+a),n.skipField()}else n.skipField()}return t}function p(e,t,n){var o=e.fields;for(var i in o){var a,s=o[i],c=s.n,l=s.c,u=s.r,p=(s.d,s.q),m=s.bw;if(l)if(u)((a=r.Message.getRepeatedWrapperField(t,l,c))&&a.length||p)&&n.writeRepeatedMessage(c,a,l.serializeBinaryToWriter);else(a=r.Message.getWrapperField(t,l,c,p?1:0))&&n.writeMessage(c,a,l.serializeBinaryToWriter);else if(m)void 0!==(a=r.Message.getField(t,c))&&m.call(n,c,a);else console.assert(m,"Writer func not set for field number "+c+" in class "+l)}}function m(e){var t=e.proto;for(var n in e.fields){var o=e.fields[n],i=o.n,a=o.c,s=o.r,c=o.d;o.q;o.hasOwnProperty("d")?t.prototype[n]=d(r.Message.getFieldWithDefault,i,c):t.prototype[n]=a?s?d(r.Message.getRepeatedWrapperField,a,i):h(a,i):d(r.Message.getField,i),t.prototype["set_"+n]=f(a?s?r.Message.setRepeatedWrapperField:r.Message.setWrapperField:r.Message.setField,i),s&&(t.prototype["add_"+n]=_(i,a))}}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(void 0,Object(o.g)([this],t))}}function h(e,t){return function(n){return void 0===n&&(n=!0),r.Message.getWrapperField(this,e,t,n?1:0)}}function f(e,t){return function(n){return e(this,t,n)}}function _(e,t){return t?function(n,o){return r.Message.addToRepeatedWrapperField(this,e,n,t,o)}:function(t,n){r.Message.addToRepeatedField(this,e,t,n)}}},syWt:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var o=n("q1tI"),r=n.n(o),i=n("DMSt"),a=n.n(i),s=function(){return r.a.createElement("div",{className:a.a.FriendsListInsetShadowCtn},r.a.createElement("div",{className:a.a.FriendListInsetShadowTop}))},c=function(){return r.a.createElement("div",{className:a.a.FriendsListInsetShadowCtn},r.a.createElement("div",{className:a.a.FriendListInsetShadowBottom}))}},tY0L:function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return F})),n.d(t,"e",(function(){return Y})),n.d(t,"d",(function(){return J}));var o=n("mrSG"),r=n("1KZt"),i=n("TyAF"),a=n("q1tI"),s=n("i8i4"),c=n("8AUz"),l=n("1VtQ"),u=n("EGkk"),p=n("2vnA"),m=n("oh5H"),d=n("UMCL"),h=n("HVDT"),f=n.n(h),_=n("QHER"),g=n("LGkA"),b=n("1n9R"),v=n("EnDp"),y=n("ljid"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.state={activeIndex:t.initialActiveIndex||0},n}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.config,t=this.state.activeIndex,n=e[t]&&e[t].renderContent?e[t].renderContent():null,o=e.length>1;return a.createElement("div",{className:v.Picker},o&&a.createElement(C,null,this.RenderTabs()),n)},t.prototype.RenderTabs=function(){var e=this;return this.props.config.map((function(t,n){var o=t.renderTab,r=e.state.activeIndex===n;return a.createElement(I,{key:n,active:r,onClick:function(){return e.setState({activeIndex:n})}},o(r))}))},t}(a.Component);function C(e){return a.createElement("div",{className:v.Tabs},e.children)}function O(e){return a.createElement("div",{className:v.Content},e.children)}function I(e){var t=e.active,n=e.children,o=e.onClick;return a.createElement("div",{className:Object(_.a)(v.Tab,t&&v.Active),onClick:o},a.createElement("div",{className:Object(_.a)(v.TabContent,t&&v.Active)},n))}function E(e){var t=e.items,n=e.renderItem,o=e.onItemSelect,r=e.keyExtractor,i=e.renderEmpty,s=t.map((function(e,i){return a.createElement("div",{key:r(e),className:v.Item,onClick:function(){return o(t[i])}},n(t[i]))}));return 0===t.length&&i&&(s=i()),a.createElement("div",{className:v.ItemList},s)}function w(e){var t=e.title,n=e.onFilterChange,r=e.filter,i=e.onSubmit,s=Object(o.f)(e,["title","onFilterChange","filter","onSubmit"]);return a.createElement(a.Fragment,null,a.createElement(O,null,a.createElement(D,{title:t},a.createElement(E,Object(o.a)({},s)))),a.createElement(T,{value:r,onChange:n,onSubmit:i}))}function M(e){var t=e.onFilterChange,n=e.filter,r=e.sections,i=e.title;return a.createElement(a.Fragment,null,a.createElement(O,null,i&&a.createElement("div",{className:v.SectionedPageTitle},i),r.map((function(e){var t=e.title,n=Object(o.f)(e,["title"]);return a.createElement(D,{title:t,key:t},a.createElement(E,Object(o.a)({},n)))}))),a.createElement(T,{value:n,onChange:t}))}function D(e){return a.createElement("div",{className:v.Section},a.createElement("div",{className:v.SectionTitle},e.title),a.createElement("div",{className:v.SectionContent},e.children))}function T(e){var t=e.value,n=e.onChange,o=e.onSubmit;return a.createElement("div",{className:v.FilterInputContainer},a.createElement(y.o,{type:"text",placeholder:"Search...",className:v.FilterInput,value:t,onChange:function(e){return n(e.target.value)},onSubmit:o}))}function j(e){var t=e.className,n=Object(o.f)(e,["className"]);return a.createElement("div",Object(o.a)({className:Object(_.a)(t,v.AddonPickerMessage)},n))}var G=n("OTLo"),R=n("z9WT"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showHover:!1},t.m_ref=a.createRef(),t}return Object(o.d)(t,e),t.prototype.OnMouseEnter=function(e){this.setState({showHover:!0})},t.prototype.OnMouseLeave=function(e){this.setState({showHover:!1})},t.prototype.render=function(){var e=this.props,t=e.emoticon,n=e.large,o=e.emoticonHoverStore,i=":"+t+":",s=n&&o.BLoaded(t)?o.Get(t).url:r.a.GetEmoticonURL(t,n);return a.createElement(a.Fragment,null,a.createElement(d.b,{text:i,style:"merge-adjacent"},a.createElement("img",{src:s,className:Object(_.a)(f.a.emoticon,n?f.a.large:void 0),"data-emoticon":t,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave,ref:this.m_ref})),this.state.showHover&&a.createElement(A,{target:this.m_ref.current,store:o,emoticon:t}))},Object(o.c)([l.a],t.prototype,"OnMouseEnter",null),Object(o.c)([l.a],t.prototype,"OnMouseLeave",null),t}(a.PureComponent),A=Object(i.a)((function(e){var t=e.target,n=e.store,o=e.emoticon,r=n.Get(o);return a.createElement(N,{target:t,title:":"+o+":",subtitle:r&&r.app_name?r.app_name:void 0},a.createElement(k,{emoticon:o,emoticonHoverStore:n,large:!0}))})),N=function(e){var t=e.target,n=e.title,o=e.subtitle,r=e.children;return a.createElement(c.a,{target:t,style:{zIndex:1700},className:f.a.EmoticonHover},r,a.createElement("div",{className:f.a.Info},a.createElement("div",{className:f.a.Name},n||a.createElement("span",null," ")),a.createElement("div",{className:f.a.AppName},o||a.createElement("span",null," "))))};function B(e){return e.recent_emoticons}function L(e){return e.recent_stickers}var P=function(e){function t(t){var n=e.call(this,t)||this;n.state={strSearchText:""};var o=n.props.emoticonStore;return o.is_initialized||(o.UpdateEmoticonList(),n.m_disposeEmoticonStore=Object(p.J)((function(){return o.is_initialized}),(function(){return n.forceUpdate()}))),n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_disposeEmoticonStore&&this.m_disposeEmoticonStore()},t.prototype.render=function(){var e,t=this.props,n=t.emoticonStore,r=t.emoticonHoverStore,i=t.roomEffectSettings,s=t.onEmoticonSelected,c=t.onStickerSelected,l=t.onRoomEffectSelected,p=t.strFlairGroupID,d=[];return B(e=n).length+L(e).length>0&&d.push({renderTab:function(e){return a.createElement("span",{title:Object(m.d)("#AddonPicker_RecentlyUsed"),className:Object(_.a)(f.a.PickerTab,f.a.Clock,e&&f.a.ActiveTab)},a.createElement(te,null))},renderContent:function(){return a.createElement(x,{store:n,hoverStore:r,onEmoticonSelect:function(e){return s(e.name)},onStickerSelect:function(e){return c(e.name)},flairGroupID:p})}}),a.createElement(u.c,null,a.createElement(S,{config:Object(o.g)(d,[{renderTab:function(e){return a.createElement("span",{title:Object(m.d)("#AddonPicker_Emoticons"),className:Object(_.a)(f.a.PickerTab,e&&f.a.ActiveTab)},a.createElement($,null))},renderContent:function(){return a.createElement(V,{store:n,hoverStore:r,onItemSelect:function(e){return s(e.name)},flairGroupID:p})}},{renderTab:function(e){return a.createElement("span",{title:Object(m.d)("#AddonPicker_Stickers"),className:Object(_.a)(f.a.PickerTab,e&&f.a.ActiveTab)},a.createElement(Z,null))},renderContent:function(){return a.createElement(H,{store:n,onItemSelect:function(e){return c(e.name)}})}},{renderTab:function(e){return a.createElement("span",{title:Object(m.d)("#AddonPicker_RoomEffects"),className:Object(_.a)(f.a.PickerTab,e&&f.a.ActiveTab)},a.createElement(ee,null))},renderContent:function(){return a.createElement(W,{store:n,effectSettings:i,onItemSelect:function(e){return l(e.name)}})}}])}))},t=Object(o.c)([i.a],t)}(a.Component),F=function(e){function t(t){var n=e.call(this,t)||this;n.state={strSearchText:""};var o=n.props.emoticonStore;return o.is_initialized||(o.UpdateEmoticonList(),n.m_disposeEmoticonStore=Object(p.J)((function(){return o.is_initialized}),(function(){return n.forceUpdate()}))),n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_disposeEmoticonStore&&this.m_disposeEmoticonStore()},t.prototype.render=function(){var e=this;return a.createElement(u.c,null,a.createElement(S,{config:[{renderTab:function(){return a.createElement("span",{title:Object(m.d)("#AddonPicker_Emoticons"),className:f.a.PickerTab},a.createElement($,null))},renderContent:function(){return a.createElement(z,{store:e.props.emoticonStore,hoverStore:e.props.emoticonHoverStore,onItemSelect:function(t){return e.props.OnSelected(t.name,!1)},flairGroupID:e.props.strFlairGroupID})}}]}))},t}(a.Component),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={filter:""},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.store,o=t.hoverStore,i=t.onEmoticonSelect,s=t.onStickerSelect,c=this.state.filter,l=[];return B(n)&&l.push({title:Object(m.d)("#AddonPicker_RecentEmoticons"),items:r.a.FilterEmoticons(B(n),c),onItemSelect:i,renderItem:function(e){return a.createElement(q,{emoticon:e,emoticonHoverStore:o})},keyExtractor:function(e){return e.name},renderEmpty:function(){return a.createElement(j,null,c?Object(m.d)("#AddonPicker_NoResults"):Object(m.d)("#AddonPicker_NoRecent",Object(m.d)("#AddonPicker_Emoticons")))}}),L(n).length&&l.push({title:Object(m.d)("#AddonPicker_RecentStickers"),items:r.a.FilterStickers(L(n),c),onItemSelect:s,renderItem:function(e){return a.createElement(K,{sticker:e})},keyExtractor:function(e){return e.name},renderEmpty:function(){return a.createElement(j,null,c?Object(m.d)("#AddonPicker_NoResults"):Object(m.d)("#AddonPicker_NoRecent",Object(m.d)("#AddonPicker_Stickers")))}}),a.createElement(M,{onFilterChange:function(t){return e.setState({filter:t})},filter:c,sections:l})},t}(a.Component),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={filter:""},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.store,o=t.hoverStore,i=t.onItemSelect,s=t.flairGroupID,c=this.state.filter,l=!c&&s?n.GetFlairListByGroupID(s):n.emoticon_list,u=r.a.FilterEmoticons(l,c).slice(0,1e3);return a.createElement(w,{title:Object(m.d)("#AddonPicker_Emoticons"),items:u,onItemSelect:i,renderItem:function(e){return a.createElement(q,{emoticon:e,emoticonHoverStore:o})},keyExtractor:function(e){return e.name},onFilterChange:function(t){return e.setState({filter:t})},filter:c,onSubmit:function(){return i(u[0])},renderEmpty:function(){return c?a.createElement(j,null,Object(m.d)("#AddonPicker_NoResults")):a.createElement(U,null)}})},t}(a.Component);function U(){return a.createElement(a.Fragment,null,a.createElement(j,null,Object(m.d)("#AddonPicker_NoneOwned",Object(m.d)("#AddonPicker_Emoticons"))),a.createElement(j,null,Object(m.k)("#AddonPicker_AcquireAtPointsShopOrMarket",a.createElement(R.b,{href:b.c.STORE_BASE_URL+"points/shop/c/emoticons"},Object(m.d)("#AddonPicker_AcquireAtPointsShop_Link")),a.createElement(R.b,{href:b.c.COMMUNITY_BASE_URL+"market"},Object(m.d)("#AddonPicker_AcquireAtPointsShopOrMarket_Link")))))}var H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={filter:""},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.store,o=t.onItemSelect,i=this.state.filter,s=r.a.FilterStickers(n.GetStickerList(),i);return a.createElement(w,{title:Object(m.d)("#EmoticonPicker_StickerHeading"),items:s,onItemSelect:o,renderItem:function(e){return a.createElement(K,{sticker:e})},keyExtractor:function(e){return e.name},onFilterChange:function(t){return e.setState({filter:t})},filter:i,onSubmit:function(){return o(s[0])},renderEmpty:function(){return i?a.createElement(j,null,Object(m.d)("#AddonPicker_NoResults")):a.createElement(a.Fragment,null,a.createElement(j,null,Object(m.d)("#AddonPicker_NoneOwned",Object(m.d)("#AddonPicker_Stickers"))),a.createElement(j,null,Object(m.k)("#AddonPicker_AcquireAtPointsShop",a.createElement(R.b,{href:b.c.STORE_BASE_URL+"points/shop/c/stickers"},Object(m.d)("#AddonPicker_AcquireAtPointsShop_Link")))))}})},t}(a.Component),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={filter:""},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.store,o=t.effectSettings,r=t.onItemSelect,i=this.state.filter,s=n.GetEffectList().filter((function(e){return e.name.indexOf(i)>-1}));return a.createElement(w,{title:Object(m.d)("#EmoticonPicker_EffectHeading"),items:s,onItemSelect:r,renderItem:function(e){return a.createElement(X,{effect:e,roomEffectSettings:o})},keyExtractor:function(e){return e.name},onFilterChange:function(t){return e.setState({filter:t})},filter:i,onSubmit:function(){return r(s[0])},renderEmpty:function(){return i?a.createElement(j,null,Object(m.d)("#AddonPicker_NoResults")):a.createElement(a.Fragment,null,a.createElement(j,null,Object(m.d)("#AddonPicker_NoneOwned",Object(m.d)("#AddonPicker_RoomEffects"))),a.createElement(j,null,Object(m.k)("#AddonPicker_AcquireAtPointsShop",a.createElement(R.b,{href:b.c.STORE_BASE_URL+"points/shop/c/chateffects"},Object(m.d)("#AddonPicker_AcquireAtPointsShop_Link")))))}})},t}(a.Component),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={filter:""},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.store,i=t.hoverStore,s=t.onItemSelect,c=(t.flairGroupID,this.state.filter),l=[];return B(n).length&&l.push({title:Object(m.d)("#AddonPicker_RecentEmoticons"),items:r.a.FilterEmoticons(B(n),c),onItemSelect:s,renderItem:function(e){return a.createElement(q,{emoticon:e,emoticonHoverStore:i})},keyExtractor:function(e){return e.name},renderEmpty:function(){return a.createElement(j,null,c?Object(m.d)("#AddonPicker_NoResults"):Object(m.d)("#AddonPicker_NoRecent",Object(m.d)("#AddonPicker_Emoticons")))}}),a.createElement(M,{onFilterChange:function(t){return e.setState({filter:t})},filter:c,sections:Object(o.g)(l,[{title:Object(m.d)("#AddonPicker_AllEmoticons"),items:r.a.FilterStickers(n.emoticon_list,c).slice(0,1e3),onItemSelect:s,renderItem:function(e){return a.createElement(q,{emoticon:e,emoticonHoverStore:i})},keyExtractor:function(e){return e.name},renderEmpty:function(){return c?a.createElement(j,null,Object(m.d)("#AddonPicker_NoResults")):a.createElement(U,null)}}])})},t=Object(o.c)([i.a],t)}(a.Component),q=function(e){var t=e.emoticon,n=e.emoticonHoverStore,o=!t.last_used&&t.time_received;return a.createElement("div",{className:f.a.EmoticonItem},a.createElement(k,{emoticon:t.name,emoticonHoverStore:n}),o&&a.createElement(J,null))},K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showHover:!1},t.m_ref=a.createRef(),t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.sticker,r=t.className,i=Object(o.f)(t,["sticker","className"]),s=Object(g.a)(b.c.COMMUNITY_CDN_URL,n.name);return a.createElement("div",Object(o.a)({ref:this.m_ref,className:Object(_.a)(r,f.a.StickerButton),onMouseOver:function(){return e.setState({showHover:!0})},onFocus:function(){return e.setState({showHover:!0})},onMouseLeave:function(){return e.setState({showHover:!1})},onBlur:function(){return e.setState({showHover:!1})}},i),a.createElement("img",{style:{width:"100%"},src:s}),this.state.showHover&&a.createElement(Y,{target:this.m_ref.current,sticker:n}))},t}(a.Component),Y=Object(i.a)((function(e){var t=e.target,n=e.sticker,o=n.name,r=n.appid,i=G.a.GetAppInfo(r);return a.createElement(N,{target:t,title:o,subtitle:i.name},a.createElement("img",{src:Object(g.a)(b.c.COMMUNITY_CDN_URL,o),className:f.a.StickerHoverSticker}))})),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showHover:!1},t.m_ref=a.createRef(),t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.effect,r=t.roomEffectSettings,i=t.className,s=Object(o.f)(t,["effect","roomEffectSettings","className"]),c=r[n.name];return a.createElement("div",Object(o.a)({ref:this.m_ref,onMouseOver:function(){return e.setState({showHover:!0})},onFocus:function(){return e.setState({showHover:!0})},onMouseLeave:function(){return e.setState({showHover:!1})},onBlur:function(){return e.setState({showHover:!1})},className:Object(_.a)(i,f.a.EffectButton)},s),c.renderEffectIcon(),this.state.showHover&&a.createElement(Q,{target:this.m_ref.current,effect:n,roomEffectSettings:r}))},t}(a.Component),Q=Object(i.a)((function(e){var t=e.target,n=e.effect,o=n.name,r=n.appid,i=e.roomEffectSettings[o],s=G.a.GetAppInfo(r);return a.createElement(N,{target:t,title:o,subtitle:s.name},a.createElement("div",{className:f.a.EffectHoverEffect},i.renderEffectIcon()))}));function J(){return a.createElement("div",{className:f.a.NewEmoticonIndicator},a.createElement("div",{className:f.a.NewEmoticonCircle}))}a.Component;function Z(e){return a.createElement("svg",Object(o.a)({viewBox:"0 0 59 59",width:"32"},e),a.createElement("switch",null,a.createElement("g",null,a.createElement("path",{d:"M58 30.2v-.1L23.4 58.5l-.2-.3-.1.1C9.9 55.4 0 43.6 0 29.5 0 13.2 13.2 0 29.5 0S59 13.2 59 29.4l-1 .8zm0-1.5c-5-2.2-16.1-4-26 4.6-9.8 8.4-10.3 18.8-9.2 23.9C10.3 54.2 1 42.9 1 29.5 1 13.8 13.8 1 29.5 1 45 1 57.6 13.3 58 28.7zm-.8.8L23.7 56.9c-1-4.8-.5-14.8 8.9-22.9 9.4-8 19.7-6.6 24.6-4.5z",fillRule:"evenodd",clipRule:"evenodd",fill:"#fff"}))))}function $(e){return a.createElement("svg",Object(o.a)({viewBox:"0 -8 60 60",width:"32"},e),a.createElement("path",{d:"M.5 5.5C.5 2.5 3 0 6 0h48c3 0 5.5 2.5 5.5 5.5V35c0 3-2.5 5.5-5.5 5.5h-1.5c-.8 0-1.5.7-1.5 1.5v8.1c0 1.3-1.6 2-2.6 1.1L37.8 40.5H6C3 40.5.5 38 .5 35V5.5zM6 1C3.5 1 1.5 3 1.5 5.5V35c0 2.5 2 4.5 4.5 4.5h32.2l.1.1 10.8 10.8c.3.3.9.1.9-.4v-8c0-1.4 1.1-2.5 2.5-2.5H54c2.5 0 4.5-2 4.5-4.5V5.5C58.5 3 56.5 1 54 1H6zm24 31c6.6 0 12-5.4 12-12S36.6 8 30 8s-12 5.4-12 12 5.4 12 12 12zm0 1c7.2 0 13-5.8 13-13S37.2 7 30 7s-13 5.8-13 13 5.8 13 13 13zm-3.5-15c.8 0 1.5-.7 1.5-1.5s-.7-1.5-1.5-1.5-1.5.7-1.5 1.5.7 1.5 1.5 1.5zm8.5-1.5c0 .8-.7 1.5-1.5 1.5s-1.5-.7-1.5-1.5.7-1.5 1.5-1.5 1.5.7 1.5 1.5zM24.5 22c0 2.5 2 4.5 4.5 4.5h2c2.5 0 4.5-2 4.5-4.5h-1c0 1.9-1.6 3.5-3.5 3.5h-2c-1.9 0-3.5-1.6-3.5-3.5h-1z",fillRule:"evenodd",clipRule:"evenodd",fill:"#fff"}))}function ee(e){return a.createElement("svg",Object(o.a)({viewBox:"0 0 60 38",width:"32"},e),a.createElement("path",{d:"M16 8.9l1.9 5.1c.2.5.6 1 1.2 1.2l5.1 1.9-5.1 1.9c-.5.2-1 .6-1.2 1.2L16 25.1 14.1 20c-.2-.5-.6-1-1.2-1.2l-5-1.8 5.1-1.9c.5-.2 1-.6 1.2-1.2l1.8-5zm-.9-.4c.3-.9 1.6-.9 1.9 0l1.9 5.1c.1.3.3.5.6.6l5.1 1.9c.9.3.9 1.6 0 1.9l-5.1 1.9c-.3.1-.5.3-.6.6L17 25.6c-.3.9-1.6.9-1.9 0l-1.9-5.1c-.1-.3-.3-.5-.6-.6L7.5 18c-.9-.3-.9-1.6 0-1.9l5.1-1.9c.3-.1.5-.3.6-.6l1.9-5.1zm17.8 15.4l-1.9-5-1.9 5.1c-.2.5-.6 1-1.2 1.2l-5 1.8 5.1 1.9c.5.2 1 .6 1.2 1.2l1.9 5.1 1.9-5.1c.2-.5.6-1 1.2-1.2l5.1-1.9-5.1-1.9c-.7-.2-1.1-.6-1.3-1.2zm-1-5.4c-.3-.9-1.6-.9-1.9 0l-1.9 5.1c-.1.3-.3.5-.6.6l-5.1 1.9c-.9.3-.9 1.6 0 1.9l5.1 1.9c.3.1.5.3.6.6l1.9 5.1c.3.9 1.6.9 1.9 0l1.9-5.1c.1-.3.3-.5.6-.6l5.1-1.9c.9-.3.9-1.6 0-1.9l-5.1-1.9c-.3-.1-.5-.3-.6-.6l-1.9-5.1zM43 4.9l1.9 5.1c.2.5.6 1 1.2 1.2l5.1 1.9-5.1 1.9c-.5.2-1 .6-1.2 1.2L43 21.1 41.1 16c-.2-.5-.6-1-1.2-1.2l-5-1.8 5.1-1.9c.5-.2 1-.6 1.2-1.2l1.8-5zm-.9-.4c.3-.9 1.6-.9 1.9 0l1.9 5.1c.1.3.3.5.6.6l5.1 1.9c.9.3.9 1.6 0 1.9l-5.1 1.9c-.3.1-.5.3-.6.6L44 21.6c-.3.9-1.6.9-1.9 0l-1.9-5.1c-.1-.3-.3-.5-.6-.6L34.5 14c-.9-.3-.9-1.6 0-1.9l5.1-1.9c.3-.1.5-.3.6-.6l1.9-5.1z",fillRule:"evenodd",clipRule:"evenodd",fill:"#fff"}))}function te(e){var t=e.className,n=Object(o.f)(e,["className"]);return a.createElement("svg",Object(o.a)({className:Object(_.a)("SVGIcon_Button SVGIcon_Clock",t),version:"1.1",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 24 24"},n),a.createElement("path",{d:"M15.999 15c-.15 0-.303-.034-.446-.105l-4-2A1.001 1.001 0 0111 12V5a1 1 0 012 0v6.382l3.447 1.724A1 1 0 0115.999 15zM12 24C5.383 24 0 18.617 0 12S5.383 0 12 0s12 5.383 12 12-5.383 12-12 12zm0-22C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2z"}))}},tZiA:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("mrSG"),r=n("2vnA"),i=n("0N1H"),a=n("/SYB"),s=n("/FkP"),c=n("7sd/"),l=n("LAqV"),u=n("XaMz"),p=n("tkkQ"),m=function(){function e(e,t){if(!t.hasOwnProperty(e))throw new Error("Room effect "+e+" is not defined.");this.name=e,this.timestamp=Date.now(),this.settings=t[e],this.expires=this.timestamp+this.settings.timeout}return e.QueueFor=function(t){return e.k_QueueForEffect[t]},e.prototype.Queue=function(){return e.k_QueueForEffect[this.name]},e.prototype.bIsExpired=function(){return Date.now()>this.expires},e.prototype.bIsActive=function(){var e=Date.now();return this.timestamp<=e&&this.expires>e},e.prototype.iTimeToExpiry=function(){return this.expires-Date.now()},e.prototype.render=function(){return this.bIsActive()?this.settings.render(this):null},e.k_QueueForEffect={snowball:"snowball",snow:"confetti_snow",confetti:"confetti_snow",goldfetti:"confetti_snow",firework:"festive",balloons:"festive",lny2020_lanterns:"festive",lny2020_firework:"festive",lny2020_confetti:"confetti_snow"},e}(),d=function(){function e(e){this.m_mapRoomEffectQueue={default:[],snowball:[],confetti_snow:[],festive:[]},this.m_rgRunningEffects=[],this.m_effectSettings=e}return e.prototype.AddRoomEffect=function(e){this.QueueRoomEffect(e),this.UpdateRunningRoomEffects()},e.prototype.QueueRoomEffect=function(e){this.m_mapRoomEffectQueue[m.QueueFor(e)].push(e)},e.prototype.ActivateRoomEffect=function(e){var t=this;try{var n=new m(e,this.m_effectSettings);this.m_rgRunningEffects.push(n),window.setTimeout((function(){t.UpdateRunningRoomEffects()}),n.iTimeToExpiry()+100)}catch(e){console.log(e)}},e.prototype.BIsQueueFull=function(t){return this.m_rgRunningEffects.filter((function(e){return e.Queue()==t})).length>=e.k_MaxRoomEffectRunning[t]},e.prototype.UpdateRunningRoomEffects=function(){for(var e in this.m_rgRunningEffects=this.m_rgRunningEffects.filter((function(e){return!e.bIsExpired()})),this.m_mapRoomEffectQueue)for(var t=e;this.m_mapRoomEffectQueue[t].length>0&&!this.BIsQueueFull(t);)this.ActivateRoomEffect(this.m_mapRoomEffectQueue[t].shift())},e.k_MaxRoomEffectRunning={default:1,snowball:10,confetti_snow:3,festive:10},Object(o.c)([r.B],e.prototype,"m_rgRunningEffects",void 0),e}(),h=n("ujHl"),f=h.d.PerMinute,_=6*h.d.PerHour,g=function(){function e(e,t,n){var o=this;this.BASELOG=a.b.create((function(){return"CChat-"+o.unique_id}),!1),this.m_rgChatViews=[],this.m_bChatLogsLoaded=!1,this.m_bReceivedChatLogs=!1,this.m_bMoreAvailable=!1,this.m_nLoadingHistoryInProgressCount=0,this.m_rgChatMessages=[],this.m_ChatMessageBlockList=new s.a,this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,this.m_rtFirstUnreadChatMsg=0,this.m_rtLastAckedChatMsg=0,this.m_rtLastServerAckedChatMsg=0,this.m_rtLastMessageReceived=0,this.m_rtLastServerMessageReceived=0,this.m_rtFirstUnread=0,this.m_msTimeActivated=0,this.m_setInflightClientMessageID=new Set,this.m_bPrepended=!1,this.m_FriendStore=e,this.m_ChatStore=t,this.m_CMInterface=n,this.m_chatRoomEffects=new d(t.ChatRoomEffectSettings)}return e.prototype.UnloadChatState=function(){this.UnloadActiveChatState(),this.m_rtLastMessageReceived=0,this.m_rtLastServerMessageReceived=0},e.prototype.UnloadActiveChatState=function(){this.m_rgChatMessages=[],this.m_ChatMessageBlockList.Clear(),this.m_bChatLogsLoaded=!1,this.m_bReceivedChatLogs=!1},Object.defineProperty(e.prototype,"BIsPrepend",{get:function(){return this.m_bPrepended},enumerable:!1,configurable:!0}),e.prototype.ResetPrepended=function(){this.m_bPrepended=!1},e.prototype.OnTyping=function(){},Object.defineProperty(e.prototype,"is_friend_typing",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.OnReceivedNewMessage=function(e,t,n,o){},e.prototype.BShouldTrackUnreadMessages=function(){return!0},e.prototype.BIsVoiceAllowed=function(){return!0},e.prototype.GetVoiceNotAllowedReason=function(){return null},e.prototype.SendChatMessage=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:t=this.m_MessageSendQueue.Add(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.SendChatMessageInternal(e)];case 2:return(n=o.sent())===s.g.None?this.m_MessageSendQueue.RemoveItem(t):this.m_MessageSendQueue.SetItemFailed(t,n),[3,4];case 3:return o.sent(),this.m_MessageSendQueue.SetItemFailed(t,s.g.Generic),[3,4];case 4:return[2]}}))}))},e.prototype.SendWithRetries=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,i,a,c,l=this;return Object(o.e)(this,(function(u){switch(u.label){case 0:n=1,i=Date.now(),a=function(){var i,a,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t()];case 1:if(1===(i=o.sent()).GetEResult())return[2,{value:Object(r.F)((function(){e.rtTimestamp=i.Body().server_timestamp(),e.unOrdinal=i.Body().ordinal()||0,l.OnUserChatEcho(e.rtTimestamp,e.unOrdinal,e.strMessage,i.Body().message_without_bb_code()||e.strMessage);var t=i.Body().modified_message();return t&&(l.m_ChatStore.EmoticonStore.TrackEmoticonUsage(t,e.rtTimestamp),e.strMessage=t,l.m_strLastMessage=t,l.m_accountIDLastMessage=l.m_FriendStore.self.accountid,l.AddRoomEffectIfNeeded(t)),e.OnServerAcknowledged(),s.g.None}))}];switch(i.GetEResult()){case 15:return e.eErrorSending=s.g.NotFriends,[2,{value:e.eErrorSending}];case 84:return e.eErrorSending=s.g.RateLimitExceeded,[2,{value:e.eErrorSending}];default:if(3===i.Hdr().transport_error())return e.eErrorSending=s.g.Generic,[2,{value:e.eErrorSending}];console.warn("Error sending message (Attempt #"+n+"). Got EResult "+i.GetEResult())}return[3,3];case 2:return a=o.sent(),console.warn("Error sending message (Attempt #"+n+"). Got error "+a),[3,3];case 3:return c=1*Math.pow(2,n-1),[4,new Promise((function(e){return setTimeout(e,1e3*c)}))];case 4:return o.sent(),n++,[2]}}))},u.label=1;case 1:return Date.now()-1e3*f<i?[5,a()]:[3,3];case 2:return"object"==typeof(c=u.sent())?[2,c.value]:[3,1];case 3:return e.eErrorSending=s.g.Generic,[2,e.eErrorSending]}}))}))},e.prototype.InitMessageSessionFromServer=function(e,t,n){4!==this.GetVisibilityState()&&(this.m_cUnreadChatMessages=e),this.m_bHasUnreadPriorityChatMessages=!1,this.m_rtLastAckedChatMsg=this.m_rtLastServerAckedChatMsg=t,this.m_rtLastMessageReceived=n,this.m_rtLastAckedChatMsg<this.m_rtLastMessageReceived&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastAckedChatMsg+1)},e.prototype.AddChatView=function(e){this.m_rgChatViews.push(e)},e.prototype.RemoveChatView=function(e){var t=this.m_rgChatViews.indexOf(e);-1!=t&&this.m_rgChatViews.splice(t,1)},e.prototype.IsMoreHistoryAvailable=function(){return this.m_bMoreAvailable},e.prototype.RoomEffectManager=function(){return this.m_chatRoomEffects},e.prototype.InternalLoadChatLogs=function(t){var n,o,r,a=this;if(void 0===t&&(t=!1),t){var s=this.GetMostRecentChatMsg();s?(n=s.rtTimestamp,o=s.unOrdinal):(n=i.j,o=0)}else n=i.j,o=0;return r=i.i,0,this.m_nLoadingHistoryInProgressCount+=1,this.GetMessagesFromTimeRange(n,o,r,0,e.k_InitialMessageCount).then((function(e){var t=e.messages,n=e.moreAvailable;a.AddMessagesToHistory(t,n),a.m_nLoadingHistoryInProgressCount-=1,a.m_bReceivedChatLogs=!0})).catch((function(e){return a.m_nLoadingHistoryInProgressCount-=1,Promise.reject(e)}))},e.prototype.LoadMoreHistory=function(){var t=this;return 0!=this.m_nLoadingHistoryInProgressCount?Promise.resolve(!0):(this.m_nLoadingHistoryInProgressCount+=1,this.GetMessagesFromTimeRange(i.j,0,this.m_oldestMessageTime,this.m_oldestMessageOrdinal,e.k_LoadMoreMessageCount).then((function(e){var n=e.messages,o=e.moreAvailable;return t.AddMessagesToHistory(n,o),t.m_nLoadingHistoryInProgressCount-=1,!0})).catch((function(e){return t.m_nLoadingHistoryInProgressCount-=1,Promise.reject(e)})))},e.prototype.AddMessagesToHistory=function(e,t){this.BASELOG("merging "+e.length+" messages"),this.MergeChatHistoryChunk(e),this.BASELOG(this.m_rgChatMessages.length+" total messages"),this.m_bMoreAvailable=t,this.BASELOG("friend chat oldest time "+this.m_oldestMessageTime+" oldest ordinal "+this.m_oldestMessageOrdinal+" bMoreAvailable "+this.m_bMoreAvailable)},Object.defineProperty(e.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!1,configurable:!0}),e.prototype.OnActivate=function(){(this.m_cUnreadChatMessages||this.m_bHasUnreadPriorityChatMessages)&&(this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,this.m_rtLastMessageReceived&&(this.m_rtLastAckedChatMsg=this.m_rtLastMessageReceived,this.AckChatMsg(this.m_rtLastMessageReceived)),l.f.FriendStore.UpdateUnreadMessagesGlobal(),l.f.UIStore.FlashChatWindow(this,!1))},e.prototype.OnDeactivate=function(){this.m_rtFirstUnreadChatMsg=0},Object.defineProperty(e.prototype,"self",{get:function(){return this.m_FriendStore.self},enumerable:!1,configurable:!0}),e.prototype.InternalAppendChatMsg=function(e){(0!=this.m_rgChatViews.length||this.m_bChatLogsLoaded)&&(this.HasChatMessage(e.rtTimestamp,e.unOrdinal)||(this.m_rgChatMessages.push(e),this.m_ChatMessageBlockList.AppendNewMessage(e),this.TrimLogsIfPossible()))},e.prototype.TrimLogsIfPossible=function(){var t=this.m_rgChatMessages.length-e.k_KeepLoadedWhenAtScrollBottom;if(!(t<=0)){for(var n=0,o=this.m_rgChatViews;n<o.length;n++){if(!o[n].is_scrolled_to_bottom)return}var r=this.m_ChatMessageBlockList.RemoveOldestMessages(t);if(r){var i=this.m_rgChatMessages.indexOf(r);i<0?Object(u.a)(!1,"Failed to find message being removed"):this.m_rgChatMessages.splice(0,i+1)}}},e.prototype.HasChatMessage=function(e,t){for(var n=this.m_rgChatMessages.length-1;n>=0;n--){var o=this.m_rgChatMessages[n];if(o.rtTimestamp==e&&o.unOrdinal==t)return!0}return!1},e.prototype.HasClientMessageInFlight=function(e){return this.m_setInflightClientMessageID.has(e)},e.prototype.AppendChatMsg=function(e,t,n,o){var r=new s.e(e,t,n,o);return r.eAnimationState=s.h.Animating,this.InternalAppendChatMsg(r),r},e.prototype.AppendLocalEchoChatMsg=function(e){var t=new s.b(this.self.accountid,l.f.GetServerRTime32(),e);return t.eAnimationState=s.h.Animating,this.InternalAppendChatMsg(t),t},e.prototype.RemoveMessage=function(e){var t=this.m_rgChatMessages.findIndex((function(t){return t.UniqueKey()===e.UniqueKey()}));-1===t?console.warn("Could not find message to remove."):this.m_rgChatMessages.splice(t,1),this.m_ChatMessageBlockList.RemoveLocalMessage(e),this.TrimLogsIfPossible()},e.prototype.RetryFailedMessage=function(e){e.eErrorSending!==s.g.None?(this.RemoveMessage(e),this.SendChatMessage(e.strMessage)):console.log("RetryFailedMessage called with a non-failed message. Ignoring.")},e.prototype.AddNewChatMsgAndNotify=function(e,t,n,o,r,i){var a=this.AppendChatMsg(e,t,n,o);a.Mentions=i,this.OnNewChatMsgAdded(e,t,n,o);var s=void 0!==r;this.CheckShouldNotify(a,s?r:o,o),this.AddRoomEffectIfNeeded(a.strMessage)},e.prototype.AddRoomEffectIfNeeded=function(e){var t=Object(c.g)(e);t&&t[0]&&"roomeffect"===t[0].tag&&this.m_chatRoomEffects.AddRoomEffect(t[0].args.type)},e.prototype.UpdateChatMessageDeletedState=function(e,t){for(var n=0,o=this.m_rgChatMessages;n<o.length;n++)for(var r=o[n],i=0,a=e;i<a.length;i++){var c=a[i];r.rtTimestamp==c.rtTimestamp&&r.unOrdinal==c.unOrdinal&&(r.eDeleteState!=s.f.Deleted&&(r.eDeleteState=t))}},e.prototype.BShouldSilentlyAddMessage=function(e){return!1},e.prototype.DecorateNotification=function(e,t,n,r){if(r!==n){var i=this.m_ChatStore.NotificationBBCodeParser,a={chat:this,unAccountIDSender:e.unAccountID,key:e.UniqueKey(),rtTimestamp:e.rtTimestamp,onLoad:function(){}},s=i.ParseBBCode(r,a);if(s)return Object(o.a)(Object(o.a)({},t),s)}return t},e.prototype.CheckShouldNotify=function(e,t,n){var o=this,r=this.self.accountid==e.unAccountID,i=!1,a=!1,s=this.GetVisibilityState(),c=this.BShouldSilentlyAddMessage(e),u=e.Mentions;if(!e.BIsServerMessage()||u.mention_all||u.mention_here||u.mention_user){r?(i=!0,a=!0):c&&0==this.m_cUnreadChatMessages||4==s?i=!0:3==s&&0==this.m_cUnreadChatMessages&&l.f.IdleTracker.AddOnNextActivityCallback((function(){4==o.GetVisibilityState()&&o.OnActivate()})),this.m_rtLastMessageReceived=e.rtTimestamp,this.m_strLastMessage=e.strMessage,this.m_accountIDLastMessage=e.unAccountID;var p=this.m_cUnreadChatMessages,m=this.m_bHasUnreadPriorityChatMessages;this.BShouldTrackUnreadMessages()&&(i?(this.m_rtLastAckedChatMsg=e.rtTimestamp,this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,a||this.AckChatMsg(e.rtTimestamp)):(0==this.m_rtFirstUnreadChatMsg&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastMessageReceived),this.m_cUnreadChatMessages++)),c||this.OnReceivedNewMessage(e,s,t,n),p==this.m_cUnreadChatMessages&&m==this.m_bHasUnreadPriorityChatMessages||l.f.FriendStore.UpdateUnreadMessagesGlobal()}else this.m_rtLastServerMessageReceived=e.rtTimestamp},e.prototype.AddVoiceChannelInviteMsg=function(e,t,n){this.InternalAppendChatMsg(new s.d(e,t,n))},e.prototype.AddLocalMsg=function(e,t,n){this.InternalAppendChatMsg(new s.c(e,t,n))},e.prototype.AddNewServerMsg=function(e,t,n,o,r,i,a){var c=this;if(Object(s.k)(o)){var l=new s.e(e,t,n,r,o,i,a);11==l.eServerMsgType&&this.SetupAppCustomServerMsg(l).then((function(o){c.OnNewChatMsgAdded(e,t,n,o),c.CheckShouldNotify(l,o,l.strServerMsgAppCustomLocalized)})),this.InternalAppendChatMsg(l)}},e.prototype.AckChatMsg=function(e){(this.m_cUnreadChatMessages>0||this.m_rtLastServerAckedChatMsg!=e)&&(this.AckChatMsgOnServer(e),this.m_rtLastServerAckedChatMsg=e)},e.prototype.OnUserChatEcho=function(e,t,n,o){e>=this.m_rtLastAckedChatMsg&&(this.m_rtLastMessageReceived=e,this.UpdateLastAckTimeFromServer(e)),this.OnNewChatMsgAdded(this.m_FriendStore.self.accountid,e,t,n)},e.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastServerAckedChatMsg<=e&&(this.m_rtLastServerAckedChatMsg=e,this.m_rtLastAckedChatMsg=e,this.m_rtLastMessageReceived<=e&&(this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,l.f.FriendStore.UpdateUnreadMessagesGlobal(),l.f.UIStore.FlashChatWindow(this,!1)))},e.prototype.GetMostRecentChatMsg=function(){for(var e=this.m_rgChatMessages.length-1;e>=0;e--)if(-1!=this.m_rgChatMessages[e].unOrdinal)return this.m_rgChatMessages[e];return null},e.prototype.MergeChatHistoryChunk=function(e){var t;if(e.length){var n,r=e[0],a=e[e.length-1],s=0;for(n=this.m_rgChatMessages.length-1;n>=0;n--)if(-1!=this.m_rgChatMessages[n].unOrdinal){if(this.m_rgChatMessages[n].BIsOlderThan(r))break;this.m_rgChatMessages[n].BIsNewerThan(a)&&s++}for(var c=0,l=e;c<l.length;c++){var u=l[c];this.MsgLoadedFromHistory(u)}for(n++,(t=this.m_rgChatMessages).splice.apply(t,Object(o.g)([n,this.m_rgChatMessages.length-n-s],e)),n=0;n<this.m_rgChatMessages.length&&-1==this.m_rgChatMessages[n].unOrdinal;n++);n>=this.m_rgChatMessages.length?(this.m_oldestMessageTime=i.i,this.m_oldestMessageOrdinal=0):(this.m_oldestMessageTime=this.m_rgChatMessages[n].rtTimestamp,this.m_oldestMessageOrdinal=this.m_rgChatMessages[n].unOrdinal),this.m_ChatMessageBlockList.BuildMessageBlocks(this.m_rgChatMessages),this.m_bPrepended=!0}},e.prototype.InitQueuedMessages=function(){var e=this,t=this.m_MessageSendQueue.queued_messages;if(0!==t.length){var n=[];t.forEach((function(t){var o=t.timestamp,r=t.message,i=t.eError,a=t.id;if(void 0===i||i===s.g.None)Date.now()-1e3*_<o&&(e.m_MessageSendQueue.RemoveItem(a),e.SendChatMessage(r));else{var c=new s.b(e.self.accountid,l.f.GetServerRTime32(),r);c.rtTimestamp=o,c.eErrorSending=i,n.push(c)}})),this.MergeLocalMessages(n)}},e.prototype.MergeLocalMessages=function(e){e.sort((function(e,t){return e.rtTimestamp-t.rtTimestamp}));for(var t=[],n=0,o=0;n<this.m_rgChatMessages.length||o<e.length;)n>=this.m_rgChatMessages.length?t.push(e[o++]):o>=e.length?t.push(this.m_rgChatMessages[n++]):this.m_rgChatMessages[n].rtTimestamp<e[o].rtTimestamp?t.push(e[o++]):t.push(this.m_rgChatMessages[n++]);this.m_rgChatMessages=t},e.prototype.GetBeginFileUploadURL=function(){return p.a.CHAT_BASE_URL+"chat/beginfileupload/"},e.prototype.GetCommitFileUploadURL=function(){return p.a.CHAT_BASE_URL+"chat/commitfileupload/"},e.prototype.LogFileUploadMessage=function(e){this.BASELOG(e)},e.prototype.MsgLoadedFromHistory=function(e){11==e.eServerMsgType&&this.SetupAppCustomServerMsg(e)},e.prototype.SetupAppCustomServerMsg=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return console.warn("App custom server message should only be used in a class that knows what to do with it"),[2,""]}))}))},e.prototype.GetVisibilityState=function(e){for(var t=0,n=0,o=this.m_rgChatViews;n<o.length;n++){var r=o[n];if(!e||r.BIsInBrowserContext(e)){var i=r.GetVisibilityState();i>t&&(t=i)}}return t},e.prototype.GetLastMessage=function(){return this.m_strLastMessage},Object.defineProperty(e.prototype,"accountid_last_message",{get:function(){return this.m_accountIDLastMessage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unread_message_count",{get:function(){return this.m_cUnreadChatMessages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_unread_priority_messages",{get:function(){return this.m_bHasUnreadPriorityChatMessages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"first_unread_msg_time",{get:function(){return this.m_rtFirstUnreadChatMsg},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time_last_message",{get:function(){return this.m_rtLastMessageReceived},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time_last_ack",{get:function(){return this.m_rtLastAckedChatMsg},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chat_messages",{get:function(){return this.m_rgChatMessages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chat_message_blocks",{get:function(){return this.m_ChatMessageBlockList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last_voice_participation_time",{get:function(){return this.m_rtLastAckedChatMsg},enumerable:!1,configurable:!0}),e.prototype.LoadChatLogs=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return this.m_bChatLogsLoaded?[2]:(this.m_bChatLogsLoaded=!0,[2,this.InternalLoadChatLogs(!1)])}))}))},e.prototype.OnConnectionRestored=function(){this.m_bChatLogsLoaded&&this.InternalLoadChatLogs(!0)},e.k_InitialMessageCount=100,e.k_KeepLoadedWhenAtScrollBottom=2*e.k_InitialMessageCount,e.k_LoadMoreMessageCount=50,Object(o.c)([r.B],e.prototype,"m_bReceivedChatLogs",void 0),Object(o.c)([r.B],e.prototype,"m_bMoreAvailable",void 0),Object(o.c)([r.B.shallow],e.prototype,"m_rgChatMessages",void 0),Object(o.c)([r.B],e.prototype,"m_cUnreadChatMessages",void 0),Object(o.c)([r.B],e.prototype,"m_rtFirstUnreadChatMsg",void 0),Object(o.c)([r.B],e.prototype,"m_rtLastAckedChatMsg",void 0),Object(o.c)([r.B],e.prototype,"m_rtLastMessageReceived",void 0),Object(o.c)([r.B],e.prototype,"m_rtLastServerMessageReceived",void 0),Object(o.c)([r.B],e.prototype,"m_strLastMessage",void 0),Object(o.c)([r.B],e.prototype,"m_accountIDLastMessage",void 0),Object(o.c)([r.B],e.prototype,"m_rtFirstUnread",void 0),Object(o.c)([r.k],e.prototype,"InitMessageSessionFromServer",null),Object(o.c)([r.k],e.prototype,"AddMessagesToHistory",null),Object(o.c)([r.k],e.prototype,"OnActivate",null),Object(o.c)([r.k],e.prototype,"OnDeactivate",null),Object(o.c)([r.k],e.prototype,"AppendChatMsg",null),Object(o.c)([r.k],e.prototype,"AppendLocalEchoChatMsg",null),Object(o.c)([r.k],e.prototype,"AddNewChatMsgAndNotify",null),Object(o.c)([r.k],e.prototype,"UpdateChatMessageDeletedState",null),Object(o.c)([r.k],e.prototype,"AddVoiceChannelInviteMsg",null),Object(o.c)([r.k],e.prototype,"AddLocalMsg",null),Object(o.c)([r.k],e.prototype,"AddNewServerMsg",null),e}()},tkkQ:function(e,t,n){"use strict";var o=n("1n9R");n.d(t,"a",(function(){return o.c})),n.d(t,"c",(function(){return o.i})),n.d(t,"b",(function(){return o.h}))},twdX:function(e,t,n){e.exports={LoadingWrapper:"throbber_LoadingWrapper_9UFR8",Static:"throbber_Static_2qWST",none:"throbber_none_3yGk4",bottomCircle:"throbber_bottomCircle_1XTvd",noString:"throbber_noString_2uxjb",Throbber:"throbber_Throbber_1Y6Da",throbber_small:"throbber_throbber_small_21jHr",throbber_medium:"throbber_throbber_medium_1nACb",throbber_large:"throbber_throbber_large_3hJM_",throbber_center_wrapper:"throbber_throbber_center_wrapper_1Dn-N",ThrobberText:"throbber_ThrobberText_3r290",blur:"throbber_blur_3cMTP",ThrobberRoundLoop:"throbber_ThrobberRoundLoop_3iwJU",roundOuterOutline:"throbber_roundOuterOutline_1yAiX",roundOuter:"throbber_roundOuter_3LNze",roundFill:"throbber_roundFill_3dnp9",ThrobberFillLoop:"throbber_ThrobberFillLoop_1e442",topCircle:"throbber_topCircle_3Zy4H",circlePulse:"throbber_circlePulse_17mrs",ThrobberTopCircleLoop:"throbber_ThrobberTopCircleLoop_RFW6m",ThrobberBottomCircleLoop:"throbber_ThrobberBottomCircleLoop_1AigW",roundThrobber15:"throbber_roundThrobber15_Ty6Px",roundThrobber14:"throbber_roundThrobber14_T03GA",roundThrobber13:"throbber_roundThrobber13_2YjHq",roundThrobber12:"throbber_roundThrobber12_39ueX",roundThrobber11:"throbber_roundThrobber11_ze_zC",roundThrobber10:"throbber_roundThrobber10_jIdSr",roundThrobber09:"throbber_roundThrobber09_3R4dR",roundThrobber08:"throbber_roundThrobber08_2WJ-s",roundThrobber07:"throbber_roundThrobber07_2UhCH",roundThrobber06:"throbber_roundThrobber06_gkW0p",roundThrobber05:"throbber_roundThrobber05_20j9w",roundThrobber04:"throbber_roundThrobber04_3TMdv",roundThrobber03:"throbber_roundThrobber03_3aNO_",roundThrobber02:"throbber_roundThrobber02_1m8h_",roundThrobber01:"throbber_roundThrobber01_2h6Ph",ThrobberRoundLoopThickness:"throbber_ThrobberRoundLoopThickness_1YJDV",throbber_xlarge:"throbber_throbber_xlarge_iO6_X",throbber_xxlarge:"throbber_throbber_xxlarge_3KPYp"}},uWOQ:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return d}));var o=n("mrSG"),r=n("hReu"),i=n("N/w2"),a=n("TyAF"),s=n("q1tI"),c=n("z9WT");function l(e){return s.createElement(c.b,Object(o.a)({},e,{onContextMenu:u}))}function u(e){var t=Object(r.e)(null,e);return Object(c.e)(e,t.m_unPID)}function p(e,t){var n=Object(r.e)(null,e);return Object(c.c)(e,t,n.m_unPID)}function m(e,t,n){void 0===n&&(n=!1);var o,i={bForceExternal:n};if(o="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,"undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection){var a=Object(r.f)(o);i.unPID=a.m_unPID}return Object(c.f)(o,t,i)}n.d(t,"a",(function(){return c.a})),n.d(t,"d",(function(){return c.d}));var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return s.createElement(s.Fragment,null,Object(i.a)(this.props.rtime,{bTimeOnly:this.props.bTimeOnly,bIncludeSeconds:this.props.bIncludeSeconds}))},t=Object(o.c)([a.a],t)}(s.Component)},ugMY:function(e,t,n){e.exports={avatarHolder:"steamavatar_avatarHolder_1G7LI",avatarStatus:"steamavatar_avatarStatus_1Pwr6",avatar:"steamavatar_avatar_f2laR",avatarFrame:"steamavatar_avatarFrame_1wl8m",avatarFrameImg:"steamavatar_avatarFrameImg_1hmyX"}},ujHl:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s}));var o={PerYear:31536e3,PerMonth:2628e3,PerWeek:604800,PerDay:86400,PerHour:3600,PerMinute:60};function r(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function i(e,t){return e.getFullYear()==t.getFullYear()}function a(e){return new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0)}function s(e){return new Promise((function(t){return setTimeout(t,e)}))}},uw3m:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return h}));var o=n("mrSG"),r=n("q1tI"),i=n("TyAF"),a=n("lqmi"),s=n("QHER"),c=n("ugMY"),l=n.n(c),u=n("1n9R"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.strAvatarURL,n=e.size,i=e.className,a=e.statusStyle,c=e.statusPosition,u=e.children,p=Object(o.f)(e,["strAvatarURL","size","className","statusStyle","statusPosition","children"]);return r.createElement("div",Object(o.a)({className:Object(s.a)(l.a.avatarHolder,"avatarHolder","no-drag",n||"Medium",i)},p),r.createElement("div",{className:Object(s.a)(l.a.avatarStatus,"avatarStatus",c),style:a}),r.createElement("img",{className:Object(s.a)(l.a.avatar,"avatar"),src:t,draggable:!1}),u)},t}(r.Component),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.persona,n=e.size,i=e.animatedAvatar,c=e.className,l=Object(o.f)(e,["persona","size","animatedAvatar","className"]),m="";return i&&i.image_small&&0!=i.image_small.length?m=u.c.MEDIA_CDN_COMMUNITY_URL+"images/"+i.image_small:t?(m=t.avatar_url_medium,"Small"==n||"X-Small"==n?m=t.avatar_url:"Large"!=n&&"X-Large"!=n&&"FillArea"!=n||(m=t.avatar_url_full)):(m=u.c.MEDIA_CDN_COMMUNITY_URL+"images/avatars/fe/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_medium.jpg","Small"==n||"X-Small"==n?m=u.c.MEDIA_CDN_COMMUNITY_URL+"images/avatars/fe/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb.jpg":"Large"!=n&&"X-Large"!=n&&"FillArea"!=n||(m=u.c.MEDIA_CDN_COMMUNITY_URL+"images/avatars/fe/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg")),r.createElement(p,Object(o.a)({strAvatarURL:m,size:n,className:Object(s.a)(Object(a.d)(t),c)},l))},t=Object(o.c)([i.a],t)}(r.Component),d=Object(i.a)((function(e){var t=e.profileItem,n=e.className,i=Object(o.f)(e,["profileItem","className"]);if(!t||!t.image_small||0==t.image_small.length)return null;var a=null;return a=t.image_small.startsWith("https://")?t.image_small:u.c.MEDIA_CDN_COMMUNITY_URL+"images/"+t.image_small,r.createElement("div",Object(o.a)({className:Object(s.a)(l.a.avatarFrame,n,"avatarFrame")},i),r.createElement("img",{className:l.a.avatarFrameImg,src:a}))})),h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bAnimate:"None"!=n.props.loopDuration},n.m_timer=0,n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.SetupAnimationTimer()},t.prototype.SetupAnimationTimer=function(){var e=this,t=0;switch(this.props.loopDuration){case"Short":t=2500;break;case"Medium":t=5e3;break;case"Long":t=1e4}0!=t&&(this.m_timer=window.setTimeout((function(){return e.setState({bAnimate:!1})}),t))},t.prototype.StopAnimationTimer=function(){this.m_timer&&(window.clearTimeout(this.m_timer),this.m_timer=0)},t.prototype.componentWillUnmount=function(){this.StopAnimationTimer()},t.prototype.componentDidUpdate=function(e){this.props.loopDuration!=e.loopDuration&&("None"==this.props.loopDuration?(this.setState({bAnimate:!1}),this.StopAnimationTimer()):"Infinite"==this.props.loopDuration&&(this.setState({bAnimate:!0}),this.StopAnimationTimer()))},t.prototype.render=function(){var e=this.props,t=(e.loopDuration,e.animatedAvatar),n=e.avatarFrame,i=e.children,a=e.style,s=Object(o.f)(e,["loopDuration","animatedAvatar","avatarFrame","children","style"]);return s.onClick&&(a=Object(o.a)(Object(o.a)({},a),{cursor:"pointer"})),this.state.bAnimate||(t=null),r.createElement(m,Object(o.a)({animatedAvatar:t},s),i,r.createElement(d,{profileItem:n}))},t=Object(o.c)([i.a],t)}(r.Component)},v5rQ:function(e,t,n){e.exports={SpeakerName_InGame:"messages_SpeakerName_InGame_1vaKy",SpeakerName_WatchingBroadcast:"messages_SpeakerName_WatchingBroadcast_3DQ_c",SpeakerName_Online:"messages_SpeakerName_Online_2nKVN",SpeakerName_Default:"messages_SpeakerName_Default_1Qo8j"}},vJVb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("mrSG"),r=n("q1tI"),i=n("1VtQ"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return Object(o.d)(t,e),t.InstallErrorReportingStore=function(e){this.sm_ErrorReportingStore=e},t.prototype.componentDidCatch=function(e,n){var o=this,r=t.sm_ErrorReportingStore;r?r.ReportError(e).then((function(e){return e&&o.setState({identifierHash:e.identifierHash})})):console.warn("No ErrorReportingStore - use ErrorReportingStore().Init() to configure error reporting to server"),this.setState({error:{error:e,info:n}})},t.prototype.Reset=function(){this.setState({error:null})},t.prototype.render=function(){var e=this.props,n=e.children,o=e.fallback,i=this.state,a=i.error,l=i.identifierHash;return a?void 0!==o?"function"==typeof o?o(a.error):o:t.sm_ErrorReportingStore&&t.sm_ErrorReportingStore.reporting_enabled?r.createElement(c,{error:a,identifierHash:l,store:t.sm_ErrorReportingStore,onRefresh:this.Reset}):r.createElement(s,{error:a,onDismiss:this.Reset}):n},Object(o.c)([i.a],t.prototype,"Reset",null),t}(r.Component),s=function(e){var t=e.error,n=e.onDismiss,o=t.error?t.error.stack:"Stack missing",i=t.info?t.info.componentStack:"",a=t.error&&t.error.message||"unknown error";return r.createElement(l,null,r.createElement(u,null,'Error: "',a,'"'),"   ",r.createElement("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:n},"(x) Dismiss"),r.createElement("br",null),r.createElement(p,null,o),r.createElement(p,null,"The error occurred while rendering:",i))},c=function(e){var t=e.error,n=e.onRefresh,o=e.identifierHash,i=e.store,a=t.error&&t.error.message||"unknown error",s=i.product+"_"+i.version+"_"+o;return r.createElement(l,null,r.createElement(u,null,"Something went wrong while displaying this content. ",r.createElement("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:n},"Refresh")),r.createElement(p,null,"Error Reference: ",s),r.createElement(p,null,a))},l=function(e){var t=e.children;return r.createElement("div",{style:{overflow:"auto",marginLeft:"15px",color:"white",fontSize:"16px"}},t)},u=function(e){var t=e.children;return r.createElement("h1",{style:{fontSize:"20px",display:"inline-block",marginTop:"15px"}},t)},p=function(e){var t=e.children;return r.createElement("pre",{style:{marginTop:"15px",opacity:.7}},t)}},vN90:function(e,t,n){},vvG3:function(e,t,n){e.exports={EmoticonBow:"shared_svg_library_EmoticonBow_2ly3o",EmoticonBow_st0:"shared_svg_library_EmoticonBow_st0_HMUMS",EmoticonBow_st1:"shared_svg_library_EmoticonBow_st1_3wZe-"}},"w/TS":function(e,t,n){},whIR:function(e,t,n){},xdma:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("q1tI"),i=n("1w3K"),a=n("QHER"),s=(n("vN90"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.keyExtractor,n=e.style,s=e.duration,c=e.className,l=e.children,u=Object(o.f)(e,["keyExtractor","style","duration","className","children"]),p=Object(o.a)(Object(o.a)({},n||{}),{transitionDuration:s/1e3+"s"});return r.createElement(i.TransitionGroup,Object(o.a)({},u,{className:Object(a.a)("crossfade",c)}),r.createElement(i.CSSTransition,{classNames:"crossfade-anim",timeout:s||500,key:t(),style:p},l))},t}(r.Component)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=Object(o.f)(e,["src"]),i={backgroundImage:"url("+t+")"};return r.createElement(s,Object(o.a)({style:i,keyExtractor:function(){return t}},n),r.createElement("div",{className:"crossfade-img"}))},t}(r.Component)},y4mg:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("q1tI"),r=n.n(o),i=n("+M9t"),a=n("LAqV"),s=n("bbBM"),c=n("ljid"),l=n("oh5H"),u=n("e2SU"),p=n("QHER"),m=function(e){var t=e.label,n=e.eSort,u=e.onChange,m=e.rgPickedFriends,f=e.excludeFriend,_=e.autoFocus,g=e.bDropInvite,b=e.renderChosenFriend,v=Object(o.useState)(""),y=v[0],S=v[1],C=Object(o.useState)(-1),O=C[0],I=C[1],E=function(t){e.onFriendPicked&&e.onFriendPicked(t),u&&u(m.concat(t)),S("")},w=function(t){if(e.onFriendUnpicked&&e.onFriendUnpicked(t),u){var n=m.findIndex((function(e){return e.accountid===t.accountid}));-1!==n&&u(m.slice(0,n).concat(m.slice(n+1)))}},M=Object(o.useMemo)((function(){var e=a.f.FriendStore.all_friends.filter((function(e){return(!f||!f(e))&&!m.some((function(t){return t.accountid===e.accountid}))})),t=a.f.ChatStore.FriendChatStore;switch(n){case 0:e.sort((function(e,n){var o=t.GetFriendLastChatTime(n.accountid)-t.GetFriendLastChatTime(e.accountid);return 0!==o?o:i.b.DefaultFriendSortComparator(e,n)}));break;case 1:default:e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)}))}return e}),[f,n,m]),D=Object(o.useMemo)((function(){for(var e=y&&y.trim().toLocaleLowerCase(),t=[],n=0;n<M.length&&t.length<500;n++){var o=M[n];e&&!o.BMatchesSearchString(e,!1)||t.push(o)}return t}),[y,M]),T=Object(o.useCallback)((function(e){if(e){var t=e.parentElement,n=e.offsetTop;n<t.scrollTop?t.scrollTop=n:n+e.offsetHeight>t.scrollTop+t.offsetHeight&&(t.scrollTop=n+e.offsetHeight-t.offsetHeight)}}),[]),j=m.length>0,G=Object(p.a)("FriendPicker",j&&"FriendPicker_FriendsChosen"),R=b||h,k=m.map((function(e){return r.a.createElement(R,{friend:e,key:e.accountid,onClick:function(){return w(e)}})})),A=D.map((function(e,t){var n=t===O,o=Object(p.a)("FriendPicker_SuggestedFriend",n&&"Focus");return r.a.createElement("div",{className:o,onClick:function(){return E(e)},onMouseEnter:function(){return I(t)},key:e.accountid,"data-index":t,ref:n?T:void 0},r.a.createElement(s.c,{noActions:!0,friend:e,context:null}))}));return r.a.createElement("div",{className:G},r.a.createElement(c.q,{onChange:function(e){var t=e.currentTarget.value;return S(t)},onKeyDown:function(e){if(13===e.keyCode){if(e.currentTarget.value.trim().length||-1!==O){e.preventDefault();var t=D[O];t&&E(t)}}else if(8===e.keyCode&&0===e.currentTarget.selectionEnd&&m.length){e.preventDefault();var n=m[m.length-1];n&&w(n)}else if((38==e.keyCode||40==e.keyCode||34==e.keyCode||33==e.keyCode)&&D.length){e.preventDefault();var o=void 0;38==e.keyCode?o=O-1:33==e.keyCode?o=Math.max(0,O-5):34==e.keyCode?o=Math.min(D.length-1,O+5):40==e.keyCode&&(o=O+1),I((o+D.length)%D.length)}},label:t,value:y,placeholder:j?"":Object(l.d)("#FriendPicker_StartTyping"),autoFocus:_},k),g&&r.a.createElement("div",{className:"DialogLabel"},Object(l.d)("#Chat_InviteFriends_DropInvite")),r.a.createElement(d,null,A))},d=function(e){var t=e.children;return r.a.createElement("div",{className:"FriendPicker_Suggestions CompactFriendsList"},r.a.createElement("div",{className:"insetShadow verticalInsetShadow"}),r.a.createElement("div",{className:"FriendPicker_Suggestions_List"},t))},h=function(e){return r.a.createElement(s.e,{friend:e.friend,context:null},r.a.createElement("div",{className:"FriendPicker_ChosenFriend",onClick:function(){e.onClick(e.friend)}},r.a.createElement("span",null,e.friend.display_name),r.a.createElement(u.sb,null)))}},yIxU:function(e,t,n){e.exports={Separator:"remoteplay_Separator_HudB6",FriendPickerSeparator:"remoteplay_FriendPickerSeparator_1tFSY",Spacer:"remoteplay_Spacer_2CNje",SmallSpacer:"remoteplay_SmallSpacer_2odGE",MediumSpacer:"remoteplay_MediumSpacer_3tlCq",NegativeSpacer:"remoteplay_NegativeSpacer_k4oQ6",Dialog_RemotePlay:"remoteplay_Dialog_RemotePlay_KxSGW",NoRightMargin:"remoteplay_NoRightMargin_2lF51",BottomMargin:"remoteplay_BottomMargin_10Hm5",BasicHorizontalContainer:"remoteplay_BasicHorizontalContainer_3OXUz",HorizontalContainer:"remoteplay_HorizontalContainer_2Hgly",HostControllers:"remoteplay_HostControllers_26tO2",SmallAvatarContainer:"remoteplay_SmallAvatarContainer_XZwtu",AvatarContainer:"remoteplay_AvatarContainer_1GpXq",playerVoiceContainer:"remoteplay_playerVoiceContainer_RACvk",streamingClientVoiceContainer:"remoteplay_streamingClientVoiceContainer_bLZom",StreamPauseOptionContainer:"remoteplay_StreamPauseOptionContainer_3rtYF",SharedInputContainer:"remoteplay_SharedInputContainer_3mLvF",StreamPauseOptionLabel:"remoteplay_StreamPauseOptionLabel_3lNx_",VerticalContainer:"remoteplay_VerticalContainer_JlcJr",HeightLimited:"remoteplay_HeightLimited_3YWYC",HeightLimitedPaused:"remoteplay_HeightLimitedPaused_2iUoW",AlignRight:"remoteplay_AlignRight_33Dx4",RightPadding:"remoteplay_RightPadding_3GDa_",Width100:"remoteplay_Width100_2pizL",GroupingBox:"remoteplay_GroupingBox_3RQlG",EndStreamContainer:"remoteplay_EndStreamContainer_2wVqS",EndStreamContainerHost:"remoteplay_EndStreamContainerHost_2Bp5D",EndStreamContainerUnpaused:"remoteplay_EndStreamContainerUnpaused_2OyOp",StreamPausedContainer:"remoteplay_StreamPausedContainer_1qgCi",InviteSentContainer:"remoteplay_InviteSentContainer_1ZcDv",inviteGlow:"remoteplay_inviteGlow_3Rj5v",MicContainer:"remoteplay_MicContainer_190N4",MicSettingsContainer:"remoteplay_MicSettingsContainer_2eQ5X",PlayerSectionTitle:"remoteplay_PlayerSectionTitle_2Pqsn",ActiveGameButton:"remoteplay_ActiveGameButton_1CVa6",ProductImage:"remoteplay_ProductImage_3685D",BasicButton:"remoteplay_BasicButton_1xo61",FitButton:"remoteplay_FitButton_3Hql6",FitContent:"remoteplay_FitContent_1CSne",TextButton:"remoteplay_TextButton_1ppit",VoiceSettingsButtonContainer:"remoteplay_VoiceSettingsButtonContainer_2UFte",KickPlayerContainer:"remoteplay_KickPlayerContainer_3VGUM",VolumeSlider:"remoteplay_VolumeSlider_2TzD0",ShortVolumeSlider:"remoteplay_ShortVolumeSlider_3Nd-F",AutoSizeButton:"remoteplay_AutoSizeButton_2wzm1",AddFriendButton:"remoteplay_AddFriendButton_3UWe3",remotePlayAddFriendText:"remoteplay_remotePlayAddFriendText_5SyTY",remotePlayIconHolder:"remoteplay_remotePlayIconHolder_2v9y_",remotePlayIcon:"remoteplay_remotePlayIcon_JOpvU",DialogButton:"remoteplay_DialogButton_hSk9D",dropSlot:"remoteplay_dropSlot_NWVK7",Filled:"remoteplay_Filled_14S33",dragOver:"remoteplay_dragOver_33I5_",InvitedPlayersBody:"remoteplay_InvitedPlayersBody_2sDkZ",IconKeyboard:"remoteplay_IconKeyboard_2egIR",IconMouse:"remoteplay_IconMouse_3a1rQ",IconController:"remoteplay_IconController_3mRay",IconSpeaker:"remoteplay_IconSpeaker_2iecr",Slashout:"remoteplay_Slashout_37vz8",ControllerNumber:"remoteplay_ControllerNumber_2_bUw",ColorNumber0:"remoteplay_ColorNumber0_LQJgg",ColorNumber1:"remoteplay_ColorNumber1_3OWgM",ColorNumber2:"remoteplay_ColorNumber2_2g3PG",ColorNumber3:"remoteplay_ColorNumber3_1A2T_",ColorNumber4:"remoteplay_ColorNumber4_2ABpi",ColorNumber5:"remoteplay_ColorNumber5_2QxpB",ColorNumber6:"remoteplay_ColorNumber6_15s-y",ColorNumber7:"remoteplay_ColorNumber7_2t6iO",ColorNumber8:"remoteplay_ColorNumber8_1VSz1",ColorNumber9:"remoteplay_ColorNumber9_3uLux",ColorNumber10:"remoteplay_ColorNumber10_3EDLq",ColorNumber11:"remoteplay_ColorNumber11_aBuP9",ColorNumber12:"remoteplay_ColorNumber12_3IRr7",ColorNumber13:"remoteplay_ColorNumber13_2bwud",ColorNumber14:"remoteplay_ColorNumber14_vcATq",ColorNumber15:"remoteplay_ColorNumber15_2POGI",ColorNumber16:"remoteplay_ColorNumber16_2o5Ev",wiggleIcon:"remoteplay_wiggleIcon_2fQQS",wiggleIconDisabled:"remoteplay_wiggleIconDisabled_3CUcV"}},yoQ3:function(e,t,n){"use strict";n.d(t,"c",(function(){return G})),n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return B})),n.d(t,"f",(function(){return L})),n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return U}));var o=n("mrSG"),r=n("tkkQ"),i=n("hReu"),a=n("LAqV"),s=n("Oefq"),c=n("dpJ7"),l=n("bbBM"),u=n("q1tI"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.m_fnExistingPopupInitializer=void 0,n.BindResizeGrip=n.BindResizeGrip.bind(n),n}return Object(o.d)(t,e),t.prototype.BindResizeGrip=function(e){var t=0,n=0;if(e){var o=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;o&&r&&(t=Math.ceil(r.innerWidth-o.left),n=Math.ceil(r.innerHeight-o.top))}var i=this.props.popup;i.SteamClient&&i.SteamClient.Window&&i.SteamClient.Window.SetResizeGrip&&i.SteamClient.Window.SetResizeGrip(t,n)},t.prototype.componentWillUnmount=function(){this.props.popup.SteamClient.Window.SetResizeGrip(0,0)},t.prototype.render=function(){return u.createElement("div",{className:"window_resize_grip",ref:this.BindResizeGrip})},t}(u.PureComponent),m=n("oh5H"),d=n("1VtQ"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.m_refTextInput=null,n.state={error:1,strPIN:""},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.m_refTextInput.focus()},t.prototype.BindTextInput=function(e){this.m_refTextInput=e},t.prototype.OnPINInput=function(e){this.setState({strPIN:e.target.value})},t.prototype.onOK=function(e){var t=this;return e.preventDefault(),a.f.ParentalStore.Unlock(this.state.strPIN).then((function(e){1!=e&&t.setState({error:e})})),!0},t.prototype.render=function(){var e="";switch(this.state.error){case 1:break;case 25:e=Object(m.d)("#FamilyView_TooManyAttempts");break;default:e=Object(m.d)("#FamilyView_BadPIN")}return u.createElement("div",null,u.createElement("div",{className:"FamilyViewTitle"},Object(m.d)("#FamilyView_Title")),u.createElement("div",{className:"FamilyViewInstructions"},Object(m.d)("#FamilyView_Unlock_Instructions")),u.createElement("form",{onSubmit:this.onOK},u.createElement("input",{type:"password",maxLength:4,className:"pinInput",autoComplete:"current-pin",ref:this.BindTextInput,value:this.state.strPIN,onChange:this.OnPINInput}),u.createElement("button",{type:"submit"},Object(m.d)("#Button_OK"))),e&&u.createElement("p",{className:"error_text"},e))},Object(o.c)([d.a],t.prototype,"BindTextInput",null),Object(o.c)([d.a],t.prototype,"OnPINInput",null),Object(o.c)([d.a],t.prototype,"onOK",null),t}(u.Component),f=n("2vnA"),_=n("TyAF"),g=n("i8i4"),b=n("1w3K"),v=n("JtU4"),y=n("vJVb"),S=n("0wLp"),C=n("EGkk"),O=n("/7KC"),I=n("GxRc"),E=n("29iz"),w=n("ZsEe"),M=n.n(w),D=n("XaMz"),T=n("kQil"),j=n("hEDq");function G(e,t,n,o,r){(r?a.h:setTimeout)((function(){g.render(u.createElement(R,{friends:t,chats:n,browserContext:e,elTarget:o}),o)}))}var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.browserContext,n=e.friends,o=e.chats,r=e.elTarget,s=new i.b(r.ownerDocument.defaultView),c=null,l=a.f.ready_to_render;return l&&(c=a.f.UIStore.GetDefaultTabSetForContext(t),a.f.UIStore.GetPerContextChatData(t).SetFriendsListWindow(s)),[u.createElement(k,{key:"throbber",fadeOut:l}),a.f.ready_to_render?u.createElement(F,{key:"interface",friends:n,chats:o,tabset:c,container:s}):null]},t=Object(o.c)([_.a],t)}(u.Component),k=function(e){function t(t){var n=e.call(this,t)||this;return n.m_refElement=u.createRef(),n.state={bFadeOutComplete:!1},n}return Object(o.d)(t,e),t.prototype.OnTransitionEnd=function(e){var t=this.m_refElement.current;t&&e.target==t&&this.props.fadeOut&&"opacity"==e.propertyName&&this.setState({bFadeOutComplete:!0})},t.prototype.render=function(){if(this.state.bFadeOutComplete)return null;var e=M.a.throbberContainer;return this.props.fadeOut&&(e+=" "+M.a["throbberContainer-exit-active"]),u.createElement("div",{className:e,onTransitionEnd:this.OnTransitionEnd,ref:this.m_refElement},u.createElement("div",{className:"WaitingForInterFaceReadyContainer"},u.createElement("div",{className:"WaitingForInterFaceReadyThrobber"},u.createElement(I.a,{className:"Throbber_Blur",size:"xlarge"}),u.createElement(I.a,{size:"xlarge"}))))},Object(o.c)([d.a],t.prototype,"OnTransitionEnd",null),t}(u.Component),A=function(e){function t(t,n,o,r){return e.call(this,t,n,o,r)||this}return Object(o.d)(t,e),t.prototype.GetSavedDimensionsKey=function(){if(this.BIsInOverlay()){var e=a.f.UIStore.GetPerContextChatData(this.m_rgParams.target_browser).screen_info;return"Overlay_"+(e&&e.width&&e.height?e.width+"x"+e.height+"_":"")+this.m_strSavedDimensionsKey}return this.m_strSavedDimensionsKey},t}(v.b),N=226,B=400,L=3*N,P=function(e){function t(t,n,o,r,a){var s=this,c=v.c.Resizable;r&&(c|=v.c.Minimized);var l=300,u=650,p="PopupFriendsListDimensions";o.m_eBrowserType==j.h.EBrowserType_OpenVROverlay_Dashboard&&(l=1440,u=810,c&=~v.c.Resizable,p=null);var d=!1;a&&(a.width&&(l=a.width,d=!0),a.height&&(u=a.height,d=!0));var h={dimensions:{width:l,height:u},minWidth:N,minHeight:B,title:Object(m.d)("#WindowTitle_FriendsList"),html_class:"client_chat_frame fullheight SavedDimensionsPopup",body_class:"fullheight",target_browser:o.m_unPID>0?o:void 0,eCreationFlags:c,bIgnoreSavedDimensions:d};return(s=e.call(this,"friendslist",p,h,!1)||this).m_friends=t,s.m_chats=n,i.i.m_strLoaderWindowRestoreDetails&&(s.SaveWindowPosition(i.i.m_strLoaderWindowRestoreDetails),i.i.m_strLoaderWindowRestoreDetails=void 0),s}return Object(o.d)(t,e),t.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame");var n=new i.b(e),o=this.browser_info||a.a,r=a.f.UIStore.GetDefaultTabSetForContext(o);this.m_browserContext=o,a.f.UIStore.BIsFriendsListSingleWindow(o)&&e.SteamClient.Window.SetMinSize&&e.SteamClient.Window.SetMinSize(L,B),g.render(u.createElement(F,{popup:this,friends:this.m_friends,chats:this.m_chats,tabset:r,container:n}),t)},t.prototype.OnResizeComplete=function(t){e.prototype.OnResizeComplete.call(this,t),window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:t},"https://steamloopback.host")},t.prototype.OnClose=function(){e.prototype.OnClose.call(this),window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:this.m_rgParams.strRestoreDetails},"https://steamloopback.host"),this.m_browserContext&&a.f.OnFriendsListClosed(this.m_browserContext)},t}(A),F=function(e){function t(t){var n=e.call(this,t)||this;n.m_bUsePopups=!1,n.m_nWindowTitleUnreadCycleCount=0,n.m_refChatDialog=u.createRef(),n.m_refRoot=u.createRef(),n.m_lastFocusElement=null;n.m_browserContext=n.props.popup&&n.props.popup.browser_info?n.props.popup.browser_info:a.a;var o=a.f.UIStore.GetPerContextChatData(n.m_browserContext);return n.m_bUsePopups=o.BUsePopups(),n.m_bUsePopups?n.m_nInlineChatWidth=640:(n.m_nInlineChatWidth=530,n.m_ResponsiveWindowState=a.f.UIStore.GetResponsiveWindowState(n.m_browserContext)),n.state={bIsResizingWindow:!1},n}return Object(o.d)(t,e),t.prototype.OnCopy=function(e){this.m_refChatDialog&&this.m_refChatDialog.current&&this.m_refChatDialog.current.OnCopy(e)},t.prototype.BindWindowHandlers=function(){var e=this;this.m_popupActionDisposer=Object(f.l)((function(){if(!r.a.IN_CLIENT){var t=a.f.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();t.length&&void 0===e.m_unTimerWindowTitleUnreadCycle?e.m_unTimerWindowTitleUnreadCycle=window.setInterval((function(){e.m_nWindowTitleUnreadCycleCount=(e.m_nWindowTitleUnreadCycleCount+1)%1e3}),2e3):t.length||void 0===e.m_unTimerWindowTitleUnreadCycle||(window.clearInterval(e.m_unTimerWindowTitleUnreadCycle),e.m_unTimerWindowTitleUnreadCycle=void 0);var n=1+t.length,o=e.m_nWindowTitleUnreadCycleCount%n;if(o>0){var i=t[o-1];return void(e.props.container.title=Object(m.d)("#WindowTitle_UnreadMessage",i.name))}}a.f.UIStore.BIsFriendsListSingleWindow(e.m_browserContext)&&e.props.tabset.GetTitle()?r.a.IN_CLIENT?e.props.container.title=Object(m.d)("#WindowTitle_FriendsList")+" - "+e.props.tabset.GetTitle():e.props.container.title=e.props.tabset.GetTitle():e.props.container.title=Object(m.d)("#WindowTitle_FriendsList")})),this.m_popupFocusDisposer=this.props.container.OnFocus((function(){a.f.UIStore.BIsFriendsListSingleWindow(e.m_browserContext)&&e.props.tabset.OnWindowFocus()}))},t.prototype.UnbindWindowHandlers=function(){this.m_popupActionDisposer&&(this.m_popupActionDisposer(),this.m_popupActionDisposer=void 0),this.m_popupFocusDisposer&&(this.m_popupFocusDisposer.unregister(),this.m_popupFocusDisposer=void 0)},t.prototype.componentWillUnmount=function(){this.UnbindWindowHandlers()},t.prototype.componentDidMount=function(){this.BindWindowHandlers(),this.m_browserContext.m_eBrowserType!=j.h.EBrowserType_OpenVROverlay&&this.m_browserContext.m_eBrowserType!=j.h.EBrowserType_OpenVROverlay_Dashboard||(this.m_refRoot.current.addEventListener("focusin",this.OnFocusIn),this.m_refRoot.current.addEventListener("focusout",this.OnFocusOut))},t.prototype.OnFocusIn=function(e){var t=!1;switch(e.target.tagName){case"TEXTAREA":t=!0;break;case"INPUT":t="text"==e.target.type}t&&(e.currentTarget.ownerDocument.defaultView.SteamClient.OpenVR.ShowKeyboard(),console.log("Showing VR Keyboard"),this.m_lastFocusElement=e.target,this.m_lastFocusElement.addEventListener("click",this.OnTextInputClick))},t.prototype.OnFocusOut=function(e){e.target==this.m_lastFocusElement&&(e.currentTarget.ownerDocument.defaultView.SteamClient.OpenVR.HideKeyboard(),this.m_lastFocusElement.removeEventListener("click",this.OnTextInputClick),this.m_lastFocusElement=null,console.log("Hiding VR Keyboard"))},t.prototype.OnTextInputClick=function(e){e.currentTarget.ownerDocument.defaultView.SteamClient.OpenVR.ShowKeyboard()},t.prototype.BindFriendsListContainer=function(e){this.m_elFriendsListContainer=e&&e.div},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.setState({bIsResizingWindow:!0}),t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterFriendsListDragEvents)},t.prototype.OnGrabberTouchStart=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("touchmove",this.HandleTouchMove),t.addEventListener("touchend",this.UnregisterFriendsListDragEvents)},t.prototype.HandleTouchMove=function(e){e.touches.length>=1&&this.InternalAdjustFriendsListContainerOnDrag(e.touches[0].clientX)},t.prototype.HandleMouseMove=function(e){this.InternalAdjustFriendsListContainerOnDrag(e.clientX)},t.prototype.InternalAdjustFriendsListContainerOnDrag=function(e){if(this.m_elFriendsListContainer){var t=this.m_elFriendsListContainer.getBoundingClientRect().left;this.SetFriendsListSingleWindowWidth(e-t)}},t.prototype.SetFriendsListSingleWindowWidth=function(e){var t=(this.props.popup?this.props.popup.window:window).innerWidth,n=Object(O.a)(t-400,200,440);e=Object(O.a)(e,200,n),i.i.SetUIDisplayPref("nFriendsListSingleWindowWidthPx",e)},t.prototype.UnregisterFriendsListDragEvents=function(e){this.setState({bIsResizingWindow:!1}),e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("touchmove",this.HandleTouchMove),e.view.removeEventListener("mouseup",this.UnregisterFriendsListDragEvents),e.view.removeEventListener("touchend",this.UnregisterFriendsListDragEvents)},t.prototype.render=function(){var e=!0,t=!0,n=!1,o=!1;if(!a.f.UIStore.BIsFriendsListSingleWindow(this.m_browserContext))if(this.m_ResponsiveWindowState){var m=this.m_ResponsiveWindowState.GetActiveView();e=m==s.c.FriendsList,t=m==s.c.Chat}else t=!1;var d=a.f.UIStore.GetTheaterMode(),f=!(r.a.IN_CLIENT||d||r.a.IN_TENFOOT||window.__bHideHeader),_="chat_main fullheight",g=null;e&&t?(this.props.tabset.tabCount>0&&(o=!0,n=a.f.UIStore.BIsFriendsListCollapsed(this.m_browserContext)),_+=" singlewindow",g=u.createElement("div",{className:"singleWindowDivider"+(n?" friendsListCollapsed":""),onMouseDown:this.OnGrabberMouseDown,onTouchStart:this.OnGrabberTouchStart})):e?_+=" responsive_friends":t&&(_+=" responsive_chats"),this.state.bIsResizingWindow&&(_+=" resizingSingleWindow"),d&&(_+=" TheaterMode"),this.props.popup&&this.props.popup.focused&&(_+=" focused"),a.f.CMInterface.BDisconnected()&&(_+=" errorDisconnected");var b=this.props.popup&&this.props.popup.window,v=n?{width:0,transition:"width 0.32s ease-in-out, opacity 0.32s ease-in-out"}:{width:i.i.UIDisplayPrefs.nFriendsListSingleWindowWidthPx+"px"};return a.f.ParentalStore.BIsFriendsBlocked()?r.a.IN_CLIENT?u.createElement("div",{className:_},u.createElement(h,null)):(location.reload(),u.createElement("div",null)):u.createElement("div",{className:_,onContextMenu:C.i,ref:this.m_refRoot},u.createElement(y.a,null,u.createElement(W,{popup:this.props.popup?this.props.popup.window:void 0})),f&&u.createElement(x,{friends:this.props.friends}),u.createElement("div",{className:"chat_main_flex displayRow",onCopy:this.OnCopy},a.f.ready_to_render&&u.createElement(y.a,null,u.createElement(T.a,{ModalManager:Object(T.e)(b||window)}),e&&u.createElement(E.a,{className:"friendsListContainer fullheight "+(n?"collapsed":""),style:t?v:null,ref:this.BindFriendsListContainer,rgAcceptedTypes:[],bAcceptsFiles:!0},u.createElement(l.f,{friends:this.props.friends,chats:this.props.chats,popup:b,browserContext:this.m_browserContext,collapsible:o,collapsed:n})),g,t&&u.createElement(c.f,{tabs:this.props.tabset,popup:b,ref:this.m_refChatDialog,ResponsiveWindowState:e?null:this.m_ResponsiveWindowState,showOpenFriendsList:o&&n}),this.props.popup&&r.a.IN_CLIENT&&u.createElement(p,{popup:b}),u.createElement("div",{className:"singleWindowFocusBar chatSingleWindowFocusBar"}))))},Object(o.c)([f.B],t.prototype,"m_nWindowTitleUnreadCycleCount",void 0),Object(o.c)([d.a],t.prototype,"OnCopy",null),Object(o.c)([d.a],t.prototype,"OnFocusIn",null),Object(o.c)([d.a],t.prototype,"OnFocusOut",null),Object(o.c)([d.a],t.prototype,"OnTextInputClick",null),Object(o.c)([d.a],t.prototype,"BindFriendsListContainer",null),Object(o.c)([d.a],t.prototype,"OnGrabberMouseDown",null),Object(o.c)([d.a],t.prototype,"OnGrabberTouchStart",null),Object(o.c)([d.a],t.prototype,"HandleTouchMove",null),Object(o.c)([d.a],t.prototype,"HandleMouseMove",null),Object(o.c)([d.a],t.prototype,"UnregisterFriendsListDragEvents",null),t=Object(o.c)([_.a],t)}(u.Component),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.friends.self;return u.createElement("div",{className:M.a.SteamPageHeader},u.createElement("a",{href:""+r.a.STORE_BASE_URL},u.createElement("div",{className:M.a.SteamPageHeaderShortLogo})),u.createElement(V,{text:"STORE",href:""+r.a.STORE_BASE_URL}),u.createElement(V,{text:"COMMUNITY",href:""+r.a.COMMUNITY_BASE_URL}),u.createElement(V,{text:e.primary_display_name,href:e.GetCommunityProfileURL()}),u.createElement(V,{text:"SUPPORT",href:""+r.a.HELP_BASE_URL}))},t=Object(o.c)([_.a],t)}(u.Component);function V(e){return u.createElement("a",{className:M.a.SteamPageHeaderTopLink,href:e.href},e.text)}var U=function(e){function t(t,n,o,r,i,a,s){var c=this,l={title:"",html_class:"client_chat_frame fullheight ChatPopup",body_class:"fullheight",minWidth:400,minHeight:400,strRestoreDetails:i,dimensions:{width:740,height:650},target_browser:t.m_unPID>0?t:void 0,eCreationFlags:v.c.Resizable};return s&&(l.eCreationFlags|=v.c.Minimized),a&&(Object.assign(l.dimensions,a),l.bIgnoreSavedDimensions=!0),(c=e.call(this,"chat_"+n,o.GetTabSetIdentifier(),l,!0)||this).m_tabSet=o,c.m_chats=r,c}return Object(o.d)(t,e),t.prototype.SetTitle=function(){if(this.m_popup&&this.m_popup.document&&this.m_tabSet){var e=this.m_tabSet.GetTitle();this.m_popup.document.title=e}},t.prototype.OnFocus=function(){this.m_tabSet.OnWindowFocus()},t.prototype.BindWindowHandlers=function(){this.m_popupActionDisposer||(this.m_popupActionDisposer=Object(f.l)(this.SetTitle))},t.prototype.UnbindWindowHandlers=function(){this.m_popupActionDisposer&&(this.m_popupActionDisposer(),this.m_popupActionDisposer=void 0)},Object.defineProperty(t.prototype,"tab_set",{get:function(){return this.m_tabSet},enumerable:!1,configurable:!0}),t.prototype.ClearTabSet=function(){this.m_tabSet=void 0},t.prototype.OnResize=function(){a.f.UIStore.OnTabSetResized(this.m_tabSet),e.prototype.OnResize.call(this)},t.prototype.OnBeforeUnload=function(){this.m_tabSet&&e.prototype.SetSavedDimensionsKey.call(this,this.m_tabSet.GetTabSetIdentifier()),e.prototype.OnBeforeUnload.call(this)},t.prototype.OnClose=function(){if(this.m_tabSet){var e=!1;null!=this.m_popup.window&&this.m_popup.window.SteamClient&&this.m_popup.window.SteamClient.Window&&this.m_popup.window.SteamClient.Window.ProcessShuttingDown&&(e=this.m_popup.window.SteamClient.Window.ProcessShuttingDown()),this.m_tabSet.OnPopupClosed(e)}this.UnbindWindowHandlers()},t.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame"),this.BindWindowHandlers(),g.render(u.createElement(H,{popup:this,chatTabs:this.m_tabSet}),t)},Object(o.c)([d.a],t.prototype,"SetTitle",null),t}(A),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.popup.window,t=this.props.chatTabs,n="popup_chat_frame fullheight";return this.props.popup.focused&&(n+=" focused"),a.f.UIStore.GetTheaterMode()&&(n+=" TheaterMode"),a.f.CMInterface.BDisconnected()&&(n+=" errorDisconnected"),u.createElement("div",{className:n,onContextMenu:C.i},u.createElement(W,{popup:this.props.popup.window}),u.createElement(T.a,{ModalManager:Object(T.e)(e)}),u.createElement(c.f,{tabs:t,popup:e,ResponsiveWindowState:null}),r.a.IN_CLIENT&&u.createElement(p,{popup:e}))},t=Object(o.c)([_.a],t)}(u.Component),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnKeyDown=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.render=function(){if(r.a.IN_CLIENT){if(a.f.CMInterface.BDisconnected()){Object(i.f)(this.props.popup),a.a;return u.createElement("div",{className:"ConnectionTrouble",tabIndex:0,onKeyDown:this.OnKeyDown},u.createElement("div",{className:"ConnectionTroubleContent"},u.createElement(S.a,{hideMinMax:!0,popup:this.props.popup}),u.createElement("div",{className:"ConnectionTroubleMessage"},Object(m.d)("#ConnectionTrouble_CurrentlyDisconnected"))))}return null}return u.createElement(z,null)},Object(o.c)([d.a],t.prototype,"OnKeyDown",null),t=Object(o.c)([_.a],t)}(u.Component),z=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bRequestingNotificationPermission=!1,n.state={bShouldRequestNotificationPermission:!0,bShowStartupDelayMessage:!1,bShowReconnectWaitMessage:!1,cReconnectWaitSeconds:0},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this;if(!a.f.ready_to_render){var t=performance.now()-a.f.GetStartupTime();this.m_iIntervalDelayedStartup=window.setTimeout((function(){e.setState({bShowStartupDelayMessage:!0}),e.m_iIntervalDelayedStartup=void 0}),1500-t)}},t.prototype.componentWillUnmount=function(){this.m_iIntervalDelayedStartup&&(window.clearTimeout(this.m_iIntervalDelayedStartup),this.m_iIntervalDelayedStartup=void 0),this.m_iIntervalUpdateReconnectStatus&&(window.clearInterval(this.m_iIntervalUpdateReconnectStatus),this.m_iIntervalUpdateReconnectStatus=void 0)},t.prototype.IntervalUpdateReconnectWaitStatus=function(){var e=i.i.WebLogonManager;if(e.BIsWaitingToReconnect()){var t=Math.ceil(e.GetMSUntilNextReconnectAttempt()/1e3);t!=this.state.cReconnectWaitSeconds&&this.setState({bShowReconnectWaitMessage:!0,cReconnectWaitSeconds:t})}else window.clearInterval(this.m_iIntervalUpdateReconnectStatus),this.m_iIntervalUpdateReconnectStatus=void 0,this.setState({bShowReconnectWaitMessage:!1,cReconnectWaitSeconds:0})},t.prototype.StartReconnectUpdateInterval=function(){this.m_iIntervalUpdateReconnectStatus||(this.m_iIntervalUpdateReconnectStatus=window.setInterval(this.IntervalUpdateReconnectWaitStatus,250))},t.prototype.OnReconnectNowClick=function(){i.i.WebLogonManager.ReconnectNow()},t.prototype.OnLoginClick=function(){window.location.href=window.location.href},t.prototype.render=function(){var e=this,t=i.i.WebLogonManager;if(Object(D.a)(t,"No WebLogonManager in WebConnectionTroubleOverlay"),!t)return null;var n=null,o=t.web_logon_state,r=!a.f.NotificationManager.BNotificationsPermitted()&&this.state.bShouldRequestNotificationPermission;if(9!=o||r){var s=void 0,c="",l=!1,p=!1;if(9!=o)if(a.f.ready_to_render||this.state.bShowStartupDelayMessage||!t.BIsInInitialConnect())switch(o){case 1:case 3:s=Object(m.d)("#ConnectionTrouble_Connecting"),p=!0;break;case 5:case 7:s=Object(m.d)("#ConnectionTrouble_LoggingIn"),p=!0;break;case 11:s=Object(m.d)("#ConnectionTrouble_RetrievingLogin"),p=!0;break;case 2:case 4:case 12:s=Object(m.d)("#ConnectionTrouble_FailedToConnect");break;case 8:case 6:s=Object(m.d)("#ConnectionTrouble_FailedToLogIn");break;case 10:s=Object(m.d)("#ConnectionTrouble_DisconnectedFinal");break;case 13:s=Object(m.d)("#ConnectionTrouble_LoginLost"),l=!0;break;case 14:s=Object(m.d)("#ConnectionTrouble_LoginChanged"),l=!0;break;case 15:s=Object(m.d)("#ConnectionTrouble_LoggedOnElsewhere");break;default:Object(D.a)(!1,"No message for trouble state "+o)}else c="InitialConnect";else r&&(this.m_bRequestingNotificationPermission||(a.f.NotificationManager.RequestNotificationPermission().then((function(){e.m_bRequestingNotificationPermission=!1,e.setState({bShouldRequestNotificationPermission:!1})})),this.m_bRequestingNotificationPermission=!0),c="NotificationBrowserWarning",s=Object(m.d)("#NotificationBrowserWarning"));var d=t.BIsWaitingToReconnect(),h=t.BWillAutoReconnect();!this.state.bShowReconnectWaitMessage&&h&&this.StartReconnectUpdateInterval(),!s&&a.f.ready_to_render||(n=u.createElement(b.CSSTransition,{classNames:"modalbg-anim",timeout:300},u.createElement("div",{className:"ConnectionTrouble WebConnectionTrouble"+(a.f.ready_to_render?"":" NotReadyToRender")},u.createElement("div",{className:""+c}),u.createElement("div",{className:"ConnectionTroubleContent"},u.createElement("div",{className:"ConnectionTroubleMessage "+c},u.createElement("div",{className:"errorMessageContainer"},u.createElement("div",{className:"connectionThrobber"+(p?" showThrobber":"")},p&&u.createElement(I.a,{size:"small"})," "),u.createElement("div",null,a.f.ready_to_render?s:Object(m.d)("#ConnectionTrouble_Connecting"))),d&&h&&u.createElement("div",{className:"ReconnectWaitMessage"},Object(m.i)("#ConnectionTrouble_ReconnectingInSeconds",Math.ceil(t.GetMSUntilNextReconnectAttempt()/1e3))),d&&u.createElement("div",{className:"ConnectionTroubleReconnectMessage"},u.createElement("div",{className:"ReconnectNow"},u.createElement("button",{type:"button",className:"DialogButton Primary",onClick:this.OnReconnectNowClick},Object(m.d)("#ConnectionTrouble_ReconnectNow")))),l&&u.createElement("div",{className:"ConnectionTroubleReconnectMessage"},u.createElement("div",{className:"ReconnectNow"},u.createElement("button",{type:"button",className:"DialogButton Primary",onClick:this.OnLoginClick},Object(m.d)(14!=o?"#ConnectionTrouble_LoginAgain":"#ConnectionTrouble_LoginChanged_Reload")))))))))}return u.createElement(b.TransitionGroup,null,n)},Object(o.c)([d.a],t.prototype,"IntervalUpdateReconnectWaitStatus",null),Object(o.c)([d.a],t.prototype,"OnReconnectNowClick",null),Object(o.c)([d.a],t.prototype,"OnLoginClick",null),t=Object(o.c)([_.a],t)}(u.Component)},yolM:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var o=n("mrSG"),r=n("LAqV"),i=n("hReu"),a=n("tkkQ"),s=n("Hi0u"),c=n("q1tI"),l=n.n(c),u=n("TyAF"),p=n("mQsC"),m=n("1VtQ"),d=n("oh5H"),h=n("ljid"),f=n("VZeO"),_=n("bbBM"),g=n("e2SU"),b=n("z95k"),v=n.n(b),y=n("QHER"),S=l.a.createContext({setValue:function(){}}),C=function(e){var t=e.value,n=e.onChange,o=e.children,r={value:t,setValue:n};return l.a.createElement(S.Provider,{value:r},l.a.createElement("div",{className:v.a.Group},o))},O=function(e){var t=e.value,n=l.a.useContext(S),o=n.value,r=n.setValue,i=t===o;return l.a.createElement("div",{className:Object(y.a)(v.a.Button,i&&v.a.Active),onClick:function(){return r(t)}},e.children)},I=n("R+Pm"),E=n("OAU9"),w=n.n(E),M=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgMicOptions=[{label:"Default",data:"default"}],n.m_rgOutputOptions=[{label:"Default",data:"default"}],n.state={showAdvanced:!1,micOptionsReady:!1,outputOptionsReady:!1,hotkeyCapturing:!1},navigator.mediaDevices.enumerateDevices().then(n.gotMediaDevices).catch(n.gotMediaDevicesError),n}return Object(o.d)(t,e),t.prototype.gotMediaDevices=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("audioinput"==n.kind){if("default"!=n.deviceId){var o=n.label;"communications"==n.deviceId&&(o=Object(d.d)("#Voice_DefaultCommunicationsDefault")),this.m_rgMicOptions.push({label:o,data:n.deviceId})}}else if("audiooutput"==n.kind&&"default"!=n.deviceId){o=n.label;"communications"==n.deviceId&&(o=Object(d.d)("#Voice_DefaultCommunicationsDefault")),this.m_rgOutputOptions.push({label:o,data:n.deviceId})}}this.setState({micOptionsReady:!0}),this.setState({outputOptionsReady:!0})},t.prototype.gotMediaDevicesError=function(){this.setState({micOptionsReady:!0}),this.setState({outputOptionsReady:!0})},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.onSubmit=function(){return!1},t.prototype.VoiceSettingsRefMarker=function(e){e&&e.ownerDocument&&(this.m_elVoiceSettingsMarkerScroll=e,this.m_window=e.ownerDocument.defaultView)},t.prototype.OnShowAdvancedSettings=function(){var e=this;this.setState({showAdvanced:!this.state.showAdvanced}),this.m_iTimeOutVoiceSettingsScroll=this.m_window.setTimeout((function(){e.m_elVoiceSettingsMarkerScroll&&e.state.showAdvanced&&e.m_elVoiceSettingsMarkerScroll.scrollIntoView({behavior:"smooth"}),e.m_window.clearTimeout(e.m_iTimeOutVoiceSettingsScroll)}),200)},t.prototype.OnMicDropdownChanged=function(e){this.props.voiceStore.SetSelectedMic(e.data)},t.prototype.OnOutputDeviceDropdownChanged=function(e){this.props.voiceStore.SetSelectedOutput(e.data)},t.prototype.OnInputGainChanged=function(e){this.props.voiceStore.SetVoiceInputGain(this.props.voiceStore.ConvertSliderToGainValue(e,f.a.k_MaxInputOutputGainValue))},t.prototype.OnOutputGainChanged=function(e){this.props.voiceStore.SetVoiceOutputGain(this.props.voiceStore.ConvertSliderToGainValue(e,f.a.k_MaxInputOutputGainValue))},t.prototype.SetHotKeyCaptureState=function(e){0==e?(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.UnregisterForMouseXButtonDown&&SteamClient.WebChat.UnregisterForMouseXButtonDown(),this.setState({hotkeyCapturing:!1})):(this.setState({hotkeyCapturing:!0}),null!=SteamClient.WebChat&&null!=SteamClient.WebChat.RegisterForMouseXButtonDown&&SteamClient.WebChat.RegisterForMouseXButtonDown(this.OnXButtonDown))},t.prototype.OnXButtonDown=function(e){e>0&&this.state.hotkeyCapturing&&(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkMouseButton&&(SteamClient.WebChat.SetPushToTalkMouseButton(e),r.f.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1))},t.prototype.OnTogglePushToTalk=function(){if("undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkEnabled){var e=r.f.VoiceStore.GetPushToTalkEnabled();SteamClient.WebChat.SetPushToTalkEnabled(!e),r.f.VoiceStore.SetPushToTalkEnabled(!e)}},t.prototype.AssignHotkey=function(){0==this.state.hotkeyCapturing&&this.SetHotKeyCaptureState(!0)},t.prototype.ClearHotKey=function(){"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkHotKey&&(SteamClient.WebChat.SetPushToTalkHotKey(0),r.f.VoiceStore.RefreshPushToTalkKeySettings())},t.prototype.OnTransmissionTypeChange=function(e){if("undefined"!=typeof SteamClient&&SteamClient.WebChat)if("pushtomute"===e)SteamClient.WebChat.SetPushToMuteEnabled&&(SteamClient.WebChat.SetPushToMuteEnabled(!0),r.f.VoiceStore.SetPushToMuteEnabled(!0));else if("openmic"===e||"pushtotalk"===e){var t="pushtotalk"===e;SteamClient.WebChat.SetPushToTalkEnabled&&(SteamClient.WebChat.SetPushToTalkEnabled(t),r.f.VoiceStore.SetPushToTalkEnabled(t))}},t.prototype.onMouseDown=function(e){0!=this.state.hotkeyCapturing&&0!=e.button&&this.onClick(e)},t.prototype.onClick=function(e){0!=this.state.hotkeyCapturing&&(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkMouseButton&&(SteamClient.WebChat.SetPushToTalkMouseButton(e.button),r.f.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1),e.preventDefault(),e.stopPropagation())},t.prototype.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.onKeyDown=function(e){0!=this.state.hotkeyCapturing&&(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkHotKey&&(SteamClient.WebChat.SetPushToTalkHotKey(e.keyCode),r.f.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1),e.preventDefault(),e.stopPropagation())},t.prototype.OnPPTSoundChecked=function(e){r.f.VoiceStore.SetPushToTalkOrMuteSoundsEnabled(e)},t.prototype.componentWillUnmount=function(){r.f.VoiceStore.IsLocalMicTestActive()&&r.f.VoiceStore.EndLocalMicTest()},t.prototype.OnStartLocalMicTest=function(){r.f.VoiceStore.InitiateLocalMicTest()},t.prototype.OnStopLocalMicTest=function(){r.f.VoiceStore.EndLocalMicTest()},t.prototype.render=function(){var e=this,t=r.f.VoiceStore.GetPushToTalkEnabled(),n=r.f.VoiceStore.GetPushToMuteEnabled(),o=!1,i=r.f.VoiceStore.GetPushToTalkHotKeyDisplayString(),a=Object(d.d)("#VoicePushToTalkAssigned"),s=Object(d.d)("#VoicePushToMuteAssigned"),l=Object(d.d)("#VoiceMuteToggleAssigned"),u=r.f.VoiceStore.GetPushToTalkOrMuteSoundsEnabled(),p=(r.f.SettingsStore.BClientHasFeatureOrOnWeb("NewVoiceHotKeyState"),r.f.VoiceStore.IsLocalMicTestActive()),m=r.f.FriendStore.self;"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.GetPushToTalkEnabled&&(o=!0),this.state.hotkeyCapturing&&(a=Object(d.d)("#VoicePushToTalkPressHotKey"));var b=n?"pushtomute":t?"pushtotalk":"openmic";return c.createElement(h.k,{className:Object(y.a)("DialogBody","VoiceSettings",w.a.VoiceSettings),onContextMenu:this.onContextMenu,onSubmit:this.onSubmit,onMouseDown:this.onMouseDown,onClick:this.onClick,onKeyDown:this.onKeyDown},c.createElement("div",{className:"_FixedHeight"},c.createElement("div",{className:"voiceSelfHeader"},c.createElement("div",{className:"DialogLabel"},Object(d.d)("#VoiceSetupHeader")),c.createElement("div",{className:"voiceMicTestContainer"},c.createElement("div",{className:"voiceSelfDirections",title:Object(d.d)("#VoiceWhenMicIsWorking")},c.createElement(_.c,{friend:m,key:m.accountid,showVoiceLevel:!0,context:void 0,noActions:!0,listStatusIndicator:c.createElement("div",{className:"connectionSpinner"})}),c.createElement(h.d,{className:"LocalMicTestButton "+(p?"Primary":"Off"),onClick:p?this.OnStopLocalMicTest:this.OnStartLocalMicTest},p?Object(d.d)("#VoiceStopLocalMicTest"):Object(d.d)("#VoiceStartLocalMicTest"))))),this.state.micOptionsReady&&c.createElement(h.i,{strClassName:"InputDevice",label:Object(d.d)("#VoiceDevice"),rgOptions:this.m_rgMicOptions,strDefaultLabel:Object(d.d)("#DefaultMic"),selectedOption:this.props.voiceStore.GetSelectedMic(),onChange:this.OnMicDropdownChanged}),!this.state.micOptionsReady&&c.createElement(h.i,{label:Object(d.d)("#VoiceDevice"),rgOptions:this.m_rgMicOptions,strDefaultLabel:Object(d.d)("#MicLoading...")}),this.state.outputOptionsReady&&c.createElement(h.i,{label:Object(d.d)("#VoiceOutputDevice"),rgOptions:this.m_rgOutputOptions,strDefaultLabel:Object(d.d)("#DefaultOutputDevice"),selectedOption:this.props.voiceStore.GetSelectedOutputDevice(),onChange:this.OnOutputDeviceDropdownChanged}),!this.state.outputOptionsReady&&c.createElement(h.i,{label:Object(d.d)("#VoiceOutputDevice"),rgOptions:this.m_rgOutputOptions,strDefaultLabel:Object(d.d)("#OutputDeviceLoading...")}),c.createElement(h.p,null,Object(d.d)("#VoiceVolume")),c.createElement(h.D,{className:"DialogLabelStrong"},c.createElement(h.A,{min:0,max:100,label:Object(d.d)("#VoiceInputGain"),explainer:Object(d.d)("#VoiceInputGainExplainer"),value:this.props.voiceStore.ConvertGainValueToSliderValue(this.props.voiceStore.GetVoiceInputGain(),f.a.k_MaxInputOutputGainValue),onChange:this.OnInputGainChanged}),c.createElement(h.A,{min:0,max:100,label:Object(d.d)("#VoiceOutputGain"),explainer:Object(d.d)("#VoiceOutputGainExplainer"),value:this.props.voiceStore.ConvertGainValueToSliderValue(this.props.voiceStore.GetVoiceOutputGain(),f.a.k_MaxInputOutputGainValue),onChange:this.OnOutputGainChanged})),"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToMuteEnabled?c.createElement("div",{className:"_DialogSection pushToTalkSection"+(o?"":" disabled")},c.createElement(h.p,null,Object(d.d)("#VoiceTransmissionType_Label"),!o&&c.createElement("span",{className:"disabledNotice"}," (",Object(d.d)("#VoiceTransmissionType_Disabled"),") ")),c.createElement("div",{className:w.a.TransmissionTypeSettings},c.createElement(C,{value:b,onChange:this.OnTransmissionTypeChange},c.createElement(O,{value:"openmic"},Object(d.d)("#VoiceTransmissionType_OpenMic")),c.createElement(O,{value:"pushtotalk"},Object(d.d)("#VoiceTransmissionType_PushToTalk")),c.createElement(O,{value:"pushtomute"},Object(d.d)("#VoiceTransmissionType_PushToMute"))),c.createElement("div",{className:w.a.HotkeySettingRow},c.createElement("div",{className:w.a.HotkeySettingDescription},t?a:n?s:l),c.createElement(h.d,{disabled:!o,className:Object(y.a)(w.a.HotkeyButton,this.state.hotkeyCapturing&&w.a.Capturing),onClick:this.AssignHotkey},i),!t&&!n&&c.createElement(h.d,{className:w.a.HotkeyClearButton,onClick:this.ClearHotKey,title:Object(d.d)("#VoiceClearHotKeyTooltip")},c.createElement(g.sb,null))),c.createElement("div",{className:w.a.HotkeySettingRow},c.createElement("span",{className:w.a.HotkeySettingDescription},Object(d.d)("#VoicePushToSomethingSoundOption")),c.createElement(I.a,{value:u,onChange:function(t){return e.OnPPTSoundChecked(t)}})))):c.createElement("div",{className:"_DialogSection pushToTalkSection"+(o?"":" disabled")},c.createElement(h.p,null,Object(d.d)("#VoiceTransmissionType"),!o&&c.createElement("span",{className:"disabledNotice"}," (",Object(d.d)("#g_DisabledOnWeb"),") ")),c.createElement(I.b,{disabled:!o,label:Object(d.d)("#VoiceTransmissionTypeExplainer"),value:t,onChange:this.OnTogglePushToTalk}),t&&c.createElement("div",{className:"pushtoTalkKeyAssignContainer displayRow"},c.createElement(h.p,{className:"DialogLabelExplainer"},a),c.createElement(h.d,{disabled:!o,className:this.state.hotkeyCapturing&&"capturingKey",onClick:this.AssignHotkey},i))),c.createElement(D,{voiceStore:this.props.voiceStore}),c.createElement(h.d,{className:Object(y.a)("advancedSettingsButton",w.a.AdvancedSettingsButton),onClick:this.OnShowAdvancedSettings},this.state.showAdvanced?Object(d.d)("#VoiceHideAdvancedSettings"):Object(d.d)("#VoiceShowAdvancedSettings"),c.createElement(g.p,null)),c.createElement(T,{voiceStore:this.props.voiceStore,visible:this.state.showAdvanced}),c.createElement("div",{className:"scrollToRef",ref:this.VoiceSettingsRefMarker})))},Object(o.c)([m.a],t.prototype,"gotMediaDevices",null),Object(o.c)([m.a],t.prototype,"gotMediaDevicesError",null),Object(o.c)([m.a],t.prototype,"onSubmit",null),Object(o.c)([m.a],t.prototype,"VoiceSettingsRefMarker",null),Object(o.c)([m.a],t.prototype,"OnShowAdvancedSettings",null),Object(o.c)([m.a],t.prototype,"OnMicDropdownChanged",null),Object(o.c)([m.a],t.prototype,"OnOutputDeviceDropdownChanged",null),Object(o.c)([m.a],t.prototype,"OnInputGainChanged",null),Object(o.c)([m.a],t.prototype,"OnOutputGainChanged",null),Object(o.c)([m.a],t.prototype,"OnXButtonDown",null),Object(o.c)([m.a],t.prototype,"OnTogglePushToTalk",null),Object(o.c)([m.a],t.prototype,"AssignHotkey",null),Object(o.c)([m.a],t.prototype,"ClearHotKey",null),Object(o.c)([m.a],t.prototype,"OnTransmissionTypeChange",null),Object(o.c)([m.a],t.prototype,"onMouseDown",null),Object(o.c)([m.a],t.prototype,"onClick",null),Object(o.c)([m.a],t.prototype,"onContextMenu",null),Object(o.c)([m.a],t.prototype,"onKeyDown",null),Object(o.c)([m.a],t.prototype,"OnPPTSoundChecked",null),Object(o.c)([m.a],t.prototype,"OnStartLocalMicTest",null),Object(o.c)([m.a],t.prototype,"OnStopLocalMicTest",null),t=Object(o.c)([u.a],t)}(h.w),D=Object(u.a)((function(e){var t=e.voiceStore,n=t.GetUseNoiseGateLevel(),o=n===f.b.k_ENoiseGateLevel_Low?f.b.k_ENoiseGateLevel_Off:n;return c.createElement("div",{className:"_DialogSection"},c.createElement(h.p,null,Object(d.d)("#VoiceTransmisionThreshold")),c.createElement(h.p,{className:"DialogLabelStrong"},Object(d.d)("#VoiceTransmissionThresholdExplainer")),c.createElement(C,{value:o,onChange:function(e){return t.SetUseNoiseGateLevel(e)}},c.createElement(O,{value:f.b.k_ENoiseGateLevel_Off},Object(d.d)("#VoiceTransmissionThresholdOff")),c.createElement(O,{value:f.b.k_ENoiseGateLevel_Medium},Object(d.d)("#VoiceTransmissionThresholdMedium"),c.createElement("span",{className:w.a.RecommendedNote},Object(d.d)("#VoiceTransmissionThresholdRecommended"))),c.createElement(O,{value:f.b.k_ENoiseGateLevel_High},Object(d.d)("#VoiceTransmissionThresholdHigh"))))}));var T=Object(u.a)((function(e){var t=e.voiceStore,n=e.visible;return c.createElement("div",{className:"advancedSettings"+(n?" showAdvanced":"")},c.createElement(h.p,null,Object(d.d)("#VoiceAdvancedSettings")),c.createElement(h.p,{className:"DialogLabelExplainer Left"},Object(d.d)("#VoiceAdvancedSettingsExplainer")),c.createElement(I.b,{className:w.a.ToggleRow,label:Object(d.d)("#VoiceEchoCancellation"),value:t.GetUseEchoCancellation(),onChange:function(e){return t.SetUseEchoCancellation(e)}}),c.createElement(I.b,{className:w.a.ToggleRow,label:Object(d.d)("#VoiceNoiseCancellation"),value:t.GetUseNoiseCancellation(),onChange:function(e){return t.SetUseNoiseCancellation(e)}}),c.createElement(I.b,{className:w.a.ToggleRow,label:Object(d.d)("#VoiceAutoGainControl"),value:t.GetUseAutoGainControl(),onChange:function(e){return t.SetUseAutoGainControl(e)}}),c.createElement(h.d,{className:"copyVoiceLogsButton",onClick:function(){return function(e){var t=e.GetVoiceLogs(),n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{document.execCommand("copy")}catch(e){console.warn("Copy voice logs to clipboard failed.",e)}finally{document.body.removeChild(n)}}(t)}},Object(d.d)("#CopyVoiceChatLogs")))})),j=n("/Byk");function G(e,t,n){Object(s.c)(c.createElement(R,{browserContext:e,startingPage:n}),t,Object(d.d)("#Settings"),{strTitle:Object(d.d)("#Settings"),popupWidth:842,popupHeight:720},Object(i.g)(t))}var R=function(e){function t(t){return e.call(this,t,Object(d.d)("#Settings"))||this}return Object(o.d)(t,e),t.prototype.SaveFriendSettings=function(e,t){r.f.SettingsStore.BUpdateFriendsSettings(e),r.f.SettingsStore.SetCommunityPreferences(t)},t.prototype.render=function(){var e=r.f.UIStore.GetPerContextChatData(this.props.browserContext),t={friendsSettingsInitial:r.f.SettingsStore.FriendsSettings,communityPreferencesInitial:r.f.SettingsStore.CommunityPreferences,onCancel:this.props.closeModal,onSubmit:this.SaveFriendSettings,bShowClientOpts:a.a.IN_CLIENT,bShowPopupOpts:e.BUsePopups(),bShowGroupOpts:!0,bSubmitImmediate:!0,bDoNotDisturbSupported:a.a.IN_CLIENT&&r.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")},n={title:Object(d.d)("#FriendSettings_Title"),className:"FriendSettingsContainer",pages:[{title:Object(d.d)("#FriendSettings_Friends"),uniqueName:"FriendSettings_Friends",content:c.createElement(p.d,Object(o.a)({},t))},{title:Object(d.d)("#FriendSettings_Chat"),uniqueName:"FriendSettings_Chat",content:c.createElement(p.c,Object(o.a)({},t))},{title:Object(d.d)("#FriendSettings_SizeAndScaling"),uniqueName:"FriendSettings_SizeAndScaling",content:c.createElement(p.e,Object(o.a)({},t))},{title:Object(d.d)("#FriendSettings_Notifications"),uniqueName:"FriendSettings_Notifications",content:c.createElement(k,Object(o.a)({},t))},{title:Object(d.d)("#FriendSettings_Voice"),uniqueName:"FriendSettings_Voice",content:c.createElement(M,{onCancel:this.props.closeModal,voiceStore:r.f.ChatStore.VoiceChat})}],startingPage:-1};if(void 0!==this.props.startingPage)switch(this.props.startingPage){case"friends":n.startingPage=0;break;case"chat":n.startingPage=1;break;case"sizeAndScaling":n.startingPage=2;break;case"notifications":n.startingPage=3;break;case"voice":n.startingPage=4}return c.createElement(s.a,{onEscKeypress:this.props.closeModal},c.createElement(h.v,Object(o.a)({},n)))},t=Object(o.c)([u.a],t)}(c.Component),k=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgOptions=Object(j.a)(!1),n}return Object(o.d)(t,e),t.prototype.FriendsSettingsNotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return c.createElement("div",null,c.createElement("div",{className:"FriendsSettingsNotificationRow"},c.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},c.createElement(t,{strName:e.strNameShow})),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},c.createElement(t,{strName:e.strNameSound}))))},t.prototype.render=function(){var e=this.state.friendSettings,t=this.FriendsSettingsNotificationRow;return c.createElement(h.k,{className:"DialogBody",onSubmit:this.OnSubmit},c.createElement("div",{className:"SettingsGroup"},c.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},c.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(d.d)("#FriendSettings_Notification_Table_Label")),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(d.d)("#FriendSettings_Notification_Table_Show")),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(d.d)("#FriendSettings_Notification_Table_Play"))),c.createElement(t,{strLabel:Object(d.d)("#FriendSettings_Notification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),c.createElement(t,{strLabel:Object(d.d)("#FriendSettings_Notification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),c.createElement(t,{strLabel:Object(d.d)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}),c.createElement(t,{strLabel:Object(d.d)("#FriendSettings_Notification_ChatRoomNotification"),strNameShow:"bNotifications_ShowChatRoomNotification",strNameSound:"bSounds_PlayChatRoomNotification"}),this.props.bShowGroupOpts&&c.createElement(t,{strLabel:Object(d.d)("#FriendSettings_Notification_GroupEvent"),strNameShow:"bNotifications_EventsAndAnnouncements",strNameSound:"bSounds_EventsAndAnnouncements"})),this.props.bShowPopupOpts&&this.props.bShowClientOpts&&c.createElement("div",{className:"SettingsGroup"},c.createElement("div",{className:"FriendsSettingsFlashSection"},c.createElement(h.p,{className:"FriendsSettingsFlashSection_Header"},Object(d.d)("#FriendSettings_Flash_Header")),c.createElement(h.C,{className:"FriendsSettingsFlashSection_ButtonRow"},c.createElement(h.d,{className:0==e.nChatFlashMode?"Primary":"Off",value:0,onClick:this.HandleRadioChange},Object(d.d)("#FriendSettings_Flash_Always")),c.createElement(h.d,{className:1==e.nChatFlashMode?"Primary":"Off",value:1,onClick:this.HandleRadioChange},Object(d.d)("#FriendSettings_Flash_Minimized")),c.createElement(h.d,{className:2==e.nChatFlashMode?"Primary":"Off",value:2,onClick:this.HandleRadioChange},Object(d.d)("#FriendSettings_Flash_Never"))))),!this.props.bSubmitImmediate&&c.createElement(h.s,{onCancel:this.props.onCancel}))},Object(o.c)([m.a],t.prototype,"FriendsSettingsNotificationRow",null),t=Object(o.c)([u.a],t)}(p.b)},yovy:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n("1n9R"),r="fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb";function i(e,t){var n=".jpg";e&&"0000000000000000000000000000000000000000"!==e||(e=r),44==e.length&&(n=e.substr(-4),e=e.substr(0,40));var i=o.c.MEDIA_CDN_COMMUNITY_URL+"images/avatars/";return i+=e.substr(0,2)+"/"+e,t&&"small"!=t&&(i+="_"+t),i+=n}},ywG3:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return G}));var o=n("mrSG"),r=n("OJz+"),i=n("H7XF"),a=n("1n9R"),s=n("4HGb"),c=n("s+DT"),l=n("Kqva"),u=n("R/D/"),p=n("2vnA"),m=n("qeMu"),d=n("YiOU"),h=n("BpBa"),f=n("E7zH"),_=n("XaMz");function g(){return window.localStorage&&"true"==window.localStorage.getItem("DEBUG_LogCMTraffic")}function b(e){e?window.localStorage.setItem("DEBUG_LogCMTraffic","true"):window.localStorage.removeItem("DEBUG_LogCMTraffic")}var v=function(){function e(e){void 0===e&&(e=!1),this.m_bRunOnce=!1,this.m_ClientConnectionCallbacks=new f.a,this.m_mapServerTypeCallbacks=new Map,this.m_bRunOnce=e}return e.prototype.RunCallbacks=function(e,t){void 0===e?(this.m_ClientConnectionCallbacks.Dispatch(t),this.m_bRunOnce&&this.m_ClientConnectionCallbacks.ClearAllCallbacks()):this.m_mapServerTypeCallbacks.has(e)&&(this.m_mapServerTypeCallbacks.get(e).Dispatch(),this.m_bRunOnce&&this.m_mapServerTypeCallbacks.delete(e))},e.prototype.RunAllCallbacks=function(e,t){var n=this;this.RunCallbacks(void 0,t),e.forEach((function(e){return n.RunCallbacks(e,t)}))},e.prototype.AddCallback=function(e,t){var n=this.m_ClientConnectionCallbacks;return void 0!==t&&(this.m_mapServerTypeCallbacks.has(t)||this.m_mapServerTypeCallbacks.set(t,new f.a),n=this.m_mapServerTypeCallbacks.get(t)),n.Register(e)},e}();function y(e,t){return function(){try{e()}catch(e){console.error("Error in "+t+" callback:",e)}}}var S=function(){function e(){var e=this;this.m_steamid=new c.a,this.m_bLoggedOn=!1,this.m_bCompletedInitialConnect=!1,this.m_unAccountFlags=0,this.m_strIPCountry="",this.m_strPersonaName="",this.m_steamidLastLoggedOn=new c.a,this.m_bConnected=!1,this.m_bConnectionFailed=!1,this.m_setConnectedServers=new Set,this.m_callbacksOnConnectOneTime=new v(!0),this.m_callbacksOnConnect=new v,this.m_callbacksOnDisconnect=new v,this.m_bForceDisconnect=!1,this.m_bPerformedInitialClockAdjustment=!1,this.m_nWallClockDriftMS=0,this.m_nPerfClockServerMSOffset=(new Date).getTime()-performance.now(),this.ClientServersAvailableHandler=Object(r.a)(5501,h.f,(function(t){for(var n=new Set(e.m_setConnectedServers),o=0,r=t.Body().server_types_available();o<r.length;o++){var i=r[o],a=i.server();void 0!==a&&(e.m_bLoggedOn&&(e.m_setConnectedServers.has(a)&&!i.changed()||(i.changed()&&e.m_setConnectedServers.has(a)&&e.m_callbacksOnDisconnect.RunCallbacks(a),e.m_callbacksOnConnect.RunCallbacks(a),e.m_callbacksOnConnectOneTime.RunCallbacks(a))),e.m_setConnectedServers.add(a),n.delete(a))}n.forEach((function(t){e.m_setConnectedServers.delete(t),e.m_bLoggedOn&&e.m_callbacksOnDisconnect.RunCallbacks(t)}))})),this.m_ServiceTransport={SendMsg:function(t,n,o){return n.SetEMsg(151),n.Hdr().set_target_job_name(t),e.SendMsgAndAwaitResponse(n,o)},SendNotification:function(t,n){return n.SetEMsg(151),n.Hdr().set_target_job_name(t),e.Send(n)}},window&&window.addEventListener&&window.addEventListener("unload",(function(t){e.ForceDisconnect()}))}return Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamidLastLoggedOn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logged_on",{get:function(){return this.m_bLoggedOn},enumerable:!1,configurable:!0}),e.prototype.BDisconnected=function(){return!this.logged_on&&this.m_steamidLastLoggedOn.BIsValid()},e.prototype.BConnectedToServer=function(e){return void 0===e?this.m_bLoggedOn:this.m_setConnectedServers.has(e)},Object.defineProperty(e.prototype,"has_completed_initial_connect",{get:function(){return this.m_bCompletedInitialConnect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"account_flags",{get:function(){return this.m_unAccountFlags},enumerable:!1,configurable:!0}),e.prototype.GetServiceTransport=function(){return this.m_ServiceTransport},e.prototype.GetAnonymousServiceTransport=function(){return this.m_ServiceTransport},e.prototype.RunWhenLoggedOn=function(e,t){var n=y(e,"RunWhenLoggedOn");this.BConnectedToServer(t)?n():this.m_callbacksOnConnectOneTime.AddCallback(n,t)},e.prototype.WaitUntilLoggedOn=function(){var e=this;return new Promise((function(t){return e.RunWhenLoggedOn(t)}))},e.prototype.AddOnLogonCallback=function(e,t){var n=y(e,"AddOnLogonCallback");return this.BConnectedToServer(t)&&n(),this.m_callbacksOnConnect.AddCallback(n,t)},e.prototype.AddOnDisconnectCallback=function(e,t){var n=function(e,t){return function(n){try{e(n)}catch(e){console.error("Error in "+t+" callback:",e)}}}(e,"AddOnDisconnectCallback");this.m_callbacksOnDisconnect.AddCallback(n,t)},e.prototype.ForceDisconnect=function(){this.m_bForceDisconnect=!0,this.Disconnect()},e.prototype.Send=function(e){return!!this.BIsConnected()&&(this.DEBUG_LogCMInterfaceActivity(e,"send"),this.SendInternal(e))},e.prototype.BInternalShouldDispatchMessage=function(e){return!0},e.prototype.ResolveAwaitWithTransportError=function(e,t,n,o){var r=s.b.Init(t);r.Hdr().set_eresult(2),r.Hdr().set_transport_error(n),o&&r.Hdr().set_error_message(o),e(r)},e.prototype.DispatchMessage=function(e){var t=this;try{if(!this.BInternalShouldDispatchMessage(e))return;if(e.BIsValid()){r.e.DispatchMsgToHandlers(e,(function(n){n.Hdr().set_jobid_target(e.Hdr().jobid_source()),t.Send(n)}))||this.DEBUG_LogCMInterfaceActivity(e,"receive",!1)}else console.error("CMInterface RECV could not parse message of type "+Object(m.a)(e.GetEMsg())+" "+e.GetEMsg())}catch(t){console.error("CMInterface RECV exception thrown while processing message of type "+Object(m.a)(e.GetEMsg()),t),e.DEBUG_LogToConsole()}},e.prototype.BIsConnected=function(){return this.m_bConnected},e.prototype.OnConnect=function(){this.m_bConnected=!0,this.m_bConnectionFailed=!1,this.m_bForceDisconnect=!1},e.prototype.OnLoggedOn=function(){this.m_bCompletedInitialConnect=!0,this.InternalAdjustClock(),this.m_callbacksOnConnect.RunAllCallbacks(this.m_setConnectedServers),this.m_callbacksOnConnectOneTime.RunAllCallbacks(this.m_setConnectedServers)},e.prototype.OnDisconnect=function(){this.m_bConnected;this.m_bConnected=!1,this.m_bConnectionFailed=!0,this.m_onConnect=void 0,this.m_steamid=new c.a,this.m_bLoggedOn=!1,this.m_unAccountFlags=0,this.m_strIPCountry="",this.m_strPersonaName="",this.m_callbacksOnDisconnect.RunAllCallbacks(this.m_setConnectedServers,this.m_bForceDisconnect),this.m_setConnectedServers.clear()},e.prototype.DEBUG_LogCMInterfaceActivity=function(e,t,n){void 0===n&&(n=!0)},e.prototype.DEBUG_LogMessage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.InternalAdjustClock=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t=this;return Object(o.e)(this,(function(n){return(e=s.b.Init(d.f,9802)).Body().set_client_request_timestamp(Math.floor(performance.now()).toString()),[2,this.SendMsgAndAwaitResponse(e,d.g).then((function(e){var n=performance.now(),o=new Date,r=parseInt(e.Body().client_request_timestamp()),i=parseInt(e.Body().server_timestamp_ms())-(n-r>>1);return i&&!isNaN(i)&&n&&!isNaN(n)?(t.m_bPerformedInitialClockAdjustment=!0,t.m_nPerfClockServerMSOffset=i-n,t.m_nWallClockDriftMS=o.getTime()-i):Object(_.a)(!1,"Error computing server time, server echo: "+r+" server time "+i),!0}))]}))}))},e.prototype.BPerformedInitialClockAdjustment=function(){return this.m_bPerformedInitialClockAdjustment},e.prototype.GetServerTimeMS=function(){return performance.now()+this.m_nPerfClockServerMSOffset},e.prototype.GetServerRTime32=function(){return Math.floor((performance.now()+this.m_nPerfClockServerMSOffset)/1e3)},e.prototype.RTime32ToDate=function(e){return new Date(1e3*e+this.m_nWallClockDriftMS)},Object(o.c)([p.B],e.prototype,"m_steamid",void 0),Object(o.c)([p.B],e.prototype,"m_bLoggedOn",void 0),Object(o.c)([p.B],e.prototype,"m_bCompletedInitialConnect",void 0),Object(o.c)([p.B],e.prototype,"m_unAccountFlags",void 0),Object(o.c)([p.B],e.prototype,"m_strIPCountry",void 0),Object(o.c)([p.B],e.prototype,"m_strPersonaName",void 0),Object(o.c)([p.B],e.prototype,"m_steamidLastLoggedOn",void 0),Object(o.c)([p.B],e.prototype,"m_bPerformedInitialClockAdjustment",void 0),Object(o.c)([p.k],e.prototype,"DispatchMessage",null),Object(o.c)([p.k],e.prototype,"OnDisconnect",null),e}(),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_setEMsgHandlers=new Set,t.m_setServiceMethodHandlers=new Set,t}return Object(o.d)(t,e),t.prototype.SendMsgAndAwaitResponse=function(e,t){var n=this;return new Promise((function(o,r){if(n.m_hSharedConnection){n.DEBUG_LogCMInterfaceActivity(e,"send");var a=i.fromByteArray(e.Serialize());SteamClient.SharedConnection.SendMsgAndAwaitResponse(n.m_hSharedConnection,a).then((function(e){var r=new l.b(i.toByteArray(e)),a=s.b.InitFromPacket(t,r);n.DEBUG_LogCMInterfaceActivity(a,"receive",!0),a.BIsValid()?o(a):n.ResolveAwaitWithTransportError(o,t,102,"Failed to parse response from server")})).catch((function(e){n.ResolveAwaitWithTransportError(o,t,2,e)}))}}))},t.prototype.SendInternal=function(e){var t=i.fromByteArray(e.Serialize());return SteamClient.SharedConnection.SendMsg(this.m_hSharedConnection,t),!0},t.prototype.OnMsgRecvd=function(e){var t=new l.b(i.toByteArray(e)),n=s.a.InitHeaderFromPacket(t);this.DispatchMessage(n)},t.prototype.OnLogonInfoChanged=function(e){this.DEBUG_LogMessage("Login info from client: ",e),this.m_bLoggedOn=e.bLoggedOn,a.c.EUNIVERSE=e.eUniverse,a.c.MEDIA_CDN_COMMUNITY_URL=e.strCommunityImagesURL,e.strSteamid?(this.m_steamid=new c.a(e.strSteamid),this.m_steamidLastLoggedOn=this.m_steamid,a.i.logged_in=!0,a.i.steamid=e.strSteamid,a.i.accountid=this.m_steamid.GetAccountID(),a.i.account_name=e.strAccountName):0!=this.m_steamid.GetAccountID()&&(this.m_steamid=new c.a),this.m_bLoggedOn?(this.m_bConnected||this.OnConnect(),this.OnLoggedOn()):this.OnDisconnect()},t.prototype.Connect=function(){var e=this;return this.m_hSharedConnection?Promise.resolve():this.m_onConnect=new Promise((function(t,n){SteamClient.SharedConnection.AllocateSharedConnection().then((function(o){o?(e.OnSharedConnectionEstablished(o),e.DEBUG_LogMessage("obtained handle ",e.m_hSharedConnection),e.OnConnect(),t()):n()})).catch(n)}))},t.prototype.OnSharedConnectionEstablished=function(e){var t=this;this.m_hSharedConnection=e,this.m_setEMsgHandlers.clear(),this.m_setServiceMethodHandlers.clear(),this.m_hEMsgRegistrationObserver&&this.m_hEMsgRegistrationObserver(),this.m_hEMsgRegistrationObserver=Object(p.l)((function(){if(t.m_hSharedConnection){for(var e=0,n=r.e.emsg_list;e<n.length;e++){var o=n[e];t.m_setEMsgHandlers.has(o)||(t.m_setEMsgHandlers.add(o),SteamClient.SharedConnection.SubscribeToEMsg(t.m_hSharedConnection,o))}for(var i=0,a=r.e.servicemethod_list;i<a.length;i++){var s=a[i];t.m_setServiceMethodHandlers.has(s)||(t.m_setServiceMethodHandlers.add(s),SteamClient.SharedConnection.SubscribeToClientServiceMethod(t.m_hSharedConnection,s))}}}));var n=!1;SteamClient.SharedConnection.RegisterOnLogonInfoChanged(this.m_hSharedConnection,(function(e){t.OnLogonInfoChanged(e),n||(n=!0,SteamClient.SharedConnection.RegisterOnMessageReceived(t.m_hSharedConnection,t.OnMsgRecvd.bind(t)))}))},t.prototype.OnConnect=function(){e.prototype.OnConnect.call(this)},t.prototype.Disconnect=function(){if(this.m_hSharedConnection){var e=s.b.Init(u.c,716);e.Body().set_persona_state(0),e.Body().set_persona_set_by_user(!1),this.Send(e),SteamClient.SharedConnection.Close(this.m_hSharedConnection),this.OnSharedConnectionClosed()}},t.prototype.OnSharedConnectionClosed=function(){e.prototype.OnDisconnect.call(this),this.m_hSharedConnection=void 0,this.m_setEMsgHandlers.clear(),this.m_hEMsgRegistrationObserver&&(this.m_hEMsgRegistrationObserver(),this.m_hEMsgRegistrationObserver=void 0)},t.prototype.SendHeartbeat=function(){},t.prototype.ClearHeartbeatInterval=function(){},t.prototype.ResetHeartbeatInterval=function(){},Object(o.c)([p.k],t.prototype,"OnLogonInfoChanged",null),t}(S),O=n("16wW"),I=n("/511"),E=n("0N1H"),w=n("vDqi"),M=n.n(w),D=function(){function e(){this.m_CMList={rgCMList:[],rtLastLoaded:0}}return e.prototype.Init=function(e){this.m_Storage=e,this.m_InitPromise=this.LoadFromCache()},e.prototype.LoadFromCache=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_InitPromise?[2,this.m_InitPromise]:[4,this.m_Storage.GetObject(this.GetLocalStorageKey())];case 1:return e=t.sent(),(n=e)&&"object"==typeof n&&Array.isArray(n.rgCMList)&&"number"==typeof n.rtLastLoaded?(this.m_CMList=e,[2,this.m_CMList]):(this.m_CMList={rgCMList:[],rtLastLoaded:0},this.WriteCMListToLocalStorage(),[2,this.m_CMList])}var n}))}))},e.prototype.GetBestCMsToConnectTo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,this.LoadFromCache()];case 1:return!(e=o.sent()).rgCMList.length||Date.now()/1e3-e.rtLastLoaded>604800?(t=this,[4,this.GetCMListFromWebAPI()]):[3,3];case 2:t.m_CMList=o.sent(),this.WriteCMListToLocalStorage(),o.label=3;case 3:return[3,5];case 4:return n=o.sent(),console.error("There was a problem loading CM list. Attempting to use stale data. "+n),[3,5];case 5:return[2,this.PingCMs()]}}))}))},e.prototype.RecordCMDisconnected=function(e){e.nConnectFailures=(e.nConnectFailures||0)+1,e.msPing=Number.MAX_SAFE_INTEGER,e.nCMLoad=Number.MAX_SAFE_INTEGER,this.WriteCMListToLocalStorage()},e.prototype.BuildCMWebSocketURL=function(e){return"wss://"+this.FixDevHost(e)+"/cmsocket/"},e.prototype.FixDevHost=function(e){if(4==a.c.EUNIVERSE&&"dev"==a.c.WEB_UNIVERSE&&e.match(/^127\.0\.0\.1/)){var t=a.c.WEBAPI_BASE_URL.match(/https?:\/\/([^\/:]*)/);if(t&&t[1])return e.replace(/^127\.0\.0\.1/,t[1])}return e},e.prototype.GetLocalStorageKey=function(){return"CCMList_"+a.c.EUNIVERSE},e.prototype.WriteCMListToLocalStorage=function(){this.m_Storage.StoreObject(this.GetLocalStorageKey(),this.m_CMList)},e.prototype.GetCMListFromWebAPI=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(r=T,i=1e4,function(){return new Promise((function(e,t){var n=!1,o=window.setTimeout((function(){n=!0,t(new Error("Timed out"))}),i);r().then((function(t){n||(clearTimeout(o),e(t))}),(function(e){n||(clearTimeout(o),t(e))}))}))})()];case 1:return e=n.sent(),t=this.m_CMList.rgCMList.reduce((function(e,t){var n;return Object(o.a)(Object(o.a)({},e),((n={})[t.strHost]=t,n))}),{}),[2,{rgCMList:e.map((function(e){return Object(o.a)(Object(o.a)({},t[e.strHost]||{}),e)})),rtLastLoaded:(new Date).getTime()/1e3}];case 2:throw n.sent(),new Error("Failed to load CM List from webapi");case 3:return[2]}var r,i}))}))},e.prototype.PingCMs=function(){for(var e=this,t=(new Date).getTime()/1e3-18e3,n=[],o={},r=0,i=this.m_CMList.rgCMList;r<i.length;r++){var s=i[r],c=j(s),l=!c||s.rtLastCheck<t;l&&n.length<20&&n.push(s),l&&!a.c.IN_MOBILE||c&&c<1e4&&(o[s.strHost]=s)}n.length;var u=!1;return new Promise((function(t,r){var i,s,c="immediate",l=function(n){if(Object(_.a)(!u,"fnPingingComplete called a second time"),!u){var o=Object.keys(n).map((function(e){return n[e]})).sort((function(e,t){return j(e)-j(t)}));if(o.length,o.length&&o[0].strHost,u=!0,e.WriteCMListToLocalStorage(),i&&window.clearTimeout(i),s&&window.clearTimeout(s),o.length)return t(o);var a=e.GetCMWithFewestDisconnects();if(a)return t([a]);r("No CMs available")}};(0===n.length||Object.keys(o).some((function(t){return e.BCMOkToUse(o[t],c)}))||a.c.IN_MOBILE&&Object.keys(o).length)&&(Object.keys(o).length&&a.c.IN_MOBILE,l(o)),u||(i=window.setTimeout((function(){c="timeout",!u&&Object.keys(o).some((function(t){return e.BCMOkToUse(o[t],c)}))&&l(o)}),400),s=window.setTimeout((function(){c="seriouslytimeout",l(o)}),12e3));var p,m=0,d=0;p=function(){if(m<n.length){var t=n[m++];return e.PingCM(t).then((function(){!function(t){var n,r;!u&&e.BCMOkToUse(t,c)?l(((n={})[t.strHost]=t,n)):o[t.strHost]=t,!u&&p()||0==--d&&(u?e.WriteCMListToLocalStorage():e.BCMOkToUse(t,"seriouslytimeout")?l(((r={})[t.strHost]=t,r)):(o[t.strHost]=t,l(o)))}(t)})),!0}return!1};for(var h=0;h<4;h++)p()&&d++}))},e.prototype.GetCMWithFewestDisconnects=function(){if(this.m_CMList.rgCMList.length){for(var e=this.m_CMList.rgCMList[0],t=1;e.nConnectFailures>0&&t<this.m_CMList.rgCMList.length;){var n=this.m_CMList.rgCMList[t++];(!n.nConnectFailures||n.nConnectFailures<e.nConnectFailures)&&(e=n)}return e&&this.FixDevHost(e.strHost),e}},e.prototype.BCMOkToUse=function(e,t){if(!e)return!1;var n=e.msPing+e.nCMLoad;return n<80&&e.msPing<60||"immediate"!==t&&(n<140&&e.msPing<100||"timeout"!==t&&(n<350&&e.msPing<275))},e.prototype.PingCM=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:t="https://"+this.FixDevHost(e.strHost)+"/cmping/",n=performance.now(),r=M.a.CancelToken.source(),i=window.setTimeout((function(){e.strHost,r.cancel()}),1e3),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,M.a.head(t,{cancelToken:r.token})];case 2:return a=o.sent(),e.strHost,window.clearTimeout(i),s=performance.now()-n,c=a.headers["x-steam-cmload"]?parseInt(a.headers["x-steam-cmload"]):void 0,e.strHost,e.msPing=s,e.nCMLoad=c,[3,4];case 3:return l=o.sent(),M.a.isCancel(l)?e.strHost:window.clearTimeout(i),e.msPing=1e4,e.nCMLoad=0,[3,4];case 4:return e.rtLastCheck=(new Date).getTime()/1e3,[2,e.msPing]}}))}))},e}();function T(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=a.c.WEBAPI_BASE_URL+"ISteamDirectory/GetCMList/v1/?cellid=0",[4,M.a.get(e)];case 1:return t=o.sent(),n=t.data,(r=n&&n.response&&n.response.serverlist_websockets||[]).length,[2,r.map((function(e,t){return{strHost:e,nPriority:t}}))]}}))}))}function j(e){return(e.msPing||0)+(e.nCMLoad||0)}var G=function(e){function t(t){var n=e.call(this)||this;return n.m_Session={m_bWaitingForLogonResponse:!1,m_nSessionID:0,m_eResultLogonSuccess:2,m_nSessionIDLast:0,m_nClientInstanceID:"0"},n.m_bLoadingCMList=!1,n.m_iCallSeq=1,n.m_mapWaitingCallbacks=new Map,n.m_CMList=new D,n.LogOnResponseHandler=Object(r.a)(751,d.e,(function(e){var t=e.Body().eresult();n.m_Session.m_bWaitingForLogonResponse=!1,n.m_Session.m_eResultLogonSuccess=t,1==t?(n.m_steamid=new c.a(e.Body().client_supplied_steamid()),n.m_steamidLastLoggedOn=n.m_steamid,n.m_bLoggedOn=!0,n.m_Session.m_nSessionID=e.Hdr().client_sessionid(),n.m_Session.m_nSessionIDLast=n.m_Session.m_nSessionID,n.m_Session.m_nClientInstanceID=e.Body().client_instance_id(),n.OnLoggedOn()):(console.warn("Received error code from LogOnResponse, disconnecting. EResult=",e.Body().eresult()),48==t&&n.m_CMList.RecordCMDisconnected(n.m_SocketCMHost),n.Disconnect())})),n.ClientAccountInfoHandler=Object(r.a)(768,d.a,(function(e){n.m_unAccountFlags=e.Body().account_flags()||0,n.m_strIPCountry=e.Body().ip_country()||"",n.m_strPersonaName=e.Body().persona_name()||""})),n.m_CMList.Init(t),n}return Object(o.d)(t,e),t.prototype.BIsConnected=function(){return this.m_Socket&&this.m_Socket.readyState==WebSocket.OPEN},t.prototype.Connect=function(){var e=this;return this.m_onConnect||(console.log("Loading CM List"),this.m_bConnected=!1,this.m_bLoggedOn=!1,this.m_bForceDisconnect=!1,this.m_Session.m_bWaitingForLogonResponse=!0,this.m_bLoadingCMList=!0,this.m_onConnect=this.m_CMList.GetBestCMsToConnectTo().then((function(t){return e.m_bLoadingCMList=!1,new Promise((function(n,o){var r=0,i=!1;t.slice(0,3).forEach((function(t,a,s){return e.AttemptHostConnect(t).then((function(o){i?o.close(4e3):(i=!0,e.m_Socket=o,e.m_SocketCMHost=t,e.m_bConnected=!0,e.OnConnect(),n())}),(function(){console.log("Failed to connect to CM "+(a+1)+" of "+s.length+": "+t.strHost),++r===s.length&&(console.log("Failed to connect to all "+s.length+" best CMs"),o())}))}))}))})).catch((function(t){throw e.m_bLoadingCMList=!1,e.OnDisconnect(),t}))),this.m_onConnect},t.prototype.AttemptHostConnect=function(e){var t=this;console.log("Attempting to connect to host "+e.strHost);var n=new WebSocket(this.m_CMList.BuildCMWebSocketURL(e.strHost));return n.binaryType="arraybuffer",n.onmessage=function(e){var n=new l.b(e.data),o=s.a.InitHeaderFromPacket(n);1==o.GetEMsg()?t.DecodeAndDispatchMultiMsg(s.b.InitFromMsg(I.e,o)):t.DispatchMessage(o)},new Promise((function(o,r){var i=!1,a=window.setTimeout((function(){console.warn("Socket connection timed out after 3000ms: "+e.strHost),i=!0,n.close(4e3),t.m_CMList.RecordCMDisconnected(e),r()}),3e3);n.onopen=function(){console.log("Connected socket to host "+e.strHost),Object(_.a)(!i,"Socket connection was opened after timing out."),i||window.clearTimeout(a),o(n)},n.onerror=function(n){i||(window.clearTimeout(a),Object(_.a)(!1,"Socket connect failed",n),t.m_CMList.RecordCMDisconnected(e),r())}}))},Object.defineProperty(t.prototype,"session",{get:function(){return this.m_Session},enumerable:!1,configurable:!0}),t.prototype.ClearHeartbeatInterval=function(){this.m_iIntervalHeartbeat&&(window.clearInterval(this.m_iIntervalHeartbeat),this.m_iIntervalHeartbeat=void 0)},t.prototype.ResetHeartbeatInterval=function(){var e=this;this.ClearHeartbeatInterval(),this.m_iIntervalHeartbeat=window.setInterval((function(){return e.SendHeartbeat()}),27e3)},t.prototype.SendHeartbeat=function(){var e=s.b.Init(d.b,703);this.Send(e)},t.prototype.OnConnect=function(){var t=this;e.prototype.OnConnect.call(this),this.m_Socket&&(this.m_Socket.onerror=function(e){},this.ResetHeartbeatInterval(),this.m_Socket.onclose=function(e){t.OnDisconnect()})},t.prototype.Disconnect=function(){this.m_Socket&&this.m_Socket.close()},t.prototype.OnDisconnect=function(){this.m_Socket=void 0,this.m_SocketCMHost=void 0,this.m_onConnect=void 0,this.ClearHeartbeatInterval(),e.prototype.OnDisconnect.call(this)},t.prototype.SendMsgAndAwaitResponse=function(e,t){var n=this;return new Promise((function(o,r){var i=n.m_iCallSeq++;e.Hdr().set_jobid_source(""+i),n.Send(e)?n.m_mapWaitingCallbacks.set(i,{iSeq:i,msgClass:t,fnCallback:o}):n.ResolveAwaitWithTransportError(o,t,2,"Web socket not connected")}))},t.prototype.SendInternal=function(e){return!!this.m_Socket&&(this.m_steamid.BIsValid()&&e.Hdr().set_steamid(this.m_steamid.ConvertTo64BitString()),this.m_Session.m_nSessionID&&e.Hdr().set_client_sessionid(this.m_Session.m_nSessionID),this.m_Socket.send(e.Serialize()),703!=e.GetEMsg()&&this.ResetHeartbeatInterval(),!0)},t.prototype.BInternalShouldDispatchMessage=function(e){if(e.BIsValid()&&e.Hdr().jobid_target()&&e.Hdr().jobid_target()!==E.h){var t=parseInt(e.Hdr().jobid_target());if(this.m_mapWaitingCallbacks.has(t)){var n=this.m_mapWaitingCallbacks.get(t);if(n){var o=s.b.InitFromMsg(n.msgClass,e);this.DEBUG_LogCMInterfaceActivity(o,"receive",!0),o.BIsValid()?n.fnCallback(o):this.ResolveAwaitWithTransportError(n.fnCallback,n.msgClass,102,"Failed to parse response from server"),this.m_mapWaitingCallbacks.delete(t)}return!1}this.DEBUG_LogCMInterfaceActivity(e,"receive",!1)}return!0},t.prototype.DecodeAndDispatchMultiMsg=function(e){var t=e.Body().message_body();if(t){e.Body().size_unzipped()&&(t=O.inflate(t));for(var n=new l.b(t);n.GetCountBytesRemaining()>0;){var o=n.GetUint32(),r=s.a.InitHeaderFromPacket(new l.b(n.GetPacket(),n.TellGet(),o));this.DispatchMessage(r),n.SeekGetCurrent(o)}}},Object(o.c)([p.k],t.prototype,"DecodeAndDispatchMultiMsg",null),t}(S)},z95k:function(e,t,n){e.exports={Group:"radio_Group_1Ma_m",Button:"radio_Button_3aFxE",Active:"radio_Active_3w-nK"}},z9WT:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return _}));var o=n("mrSG"),r=n("q1tI"),i=n("EGkk"),a=n("oh5H"),s=n("/IDK"),c=n("8o0Y");function l(e,t){var n;n="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,0==t.indexOf("steam://")?n.location.href=t:n.open(t,null,"menubar,location,resizable,scrollbars,status,noopener")}function u(e){var t=e.bDisableContextMenu,n=e.onContextMenu,i=e.bForceExternal,a=e.href,s=Object(o.f)(e,["bDisableContextMenu","onContextMenu","bForceExternal","href"]);return t||n||(n=m),r.createElement("a",Object(o.a)({},s,{href:a,onClick:function(e){e.preventDefault(),_(window,a,{bForceExternal:!!i})},onContextMenu:n}),e.children)}function p(e){var t=e.strURL,n=e.unPID;return r.createElement(r.Fragment,null,r.createElement(i.d,{onSelected:function(){s.j(t)}},Object(a.d)("#ContextMenu_CopyLinkURL")),r.createElement(i.d,{onSelected:function(e){_(e,t,{unPID:n})}},Object(a.d)("#ContextMenu_OpenLinkInNewWindow")))}function m(e,t){var n=e.currentTarget;return Object(c.a)(r.createElement(i.c,null,r.createElement(p,{strURL:n.href,unPID:t})),e)}function d(e){var t=e.strFullImageURL,n=e.unPID;return r.createElement(r.Fragment,null,r.createElement(i.d,{onSelected:function(){s.j(t)}},Object(a.d)("#ContextMenu_CopyImageURL")),r.createElement(i.d,{onSelected:function(e){_(e,t,{unPID:n})}},Object(a.d)("#ContextMenu_OpenImageInNewWindow")))}function h(e,t,n){return f(e,e.currentTarget.src,t,n)}function f(e,t,n,o){return Object(c.a)(r.createElement(i.c,null,n&&r.createElement(p,{strURL:n}),r.createElement(d,{strFullImageURL:t,unPID:o})),e)}function _(e,t,n){void 0===n&&(n={});var o,r=n.bForceExternal,i=n.unPID;o="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,"undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat?SteamClient.WebChat.OpenURLInClient(t,i||0,!!r):0==t.indexOf("steam://")&&0!=t.indexOf("steam://remoteplay/connect")?o.location.href=t:o.open(t,null,"menubar,location,resizable,scrollbars,status,noopener")}}});