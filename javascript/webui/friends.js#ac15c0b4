/*! This file includes third-party software, governed by the licenses described here: https://steamcommunity.com/public/javascript/webui/friends.licenses.txt */










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
!function(c){function e(e){for(var t,n,o=e[0],i=e[1],r=e[2],a=0,s=[];a<o.length;a++)n=o[a],p[n]&&s.push(p[n][0]),p[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(c[t]=i[t]);for(m&&m(e);s.length;)s.shift()();return u.push.apply(u,r||[]),l()}function l(){for(var e,t=0;t<u.length;t++){for(var n=u[t],o=!0,i=1;i<n.length;i++){var r=n[i];0!==p[r]&&(o=!1)}o&&(u.splice(t--,1),e=a(a.s=n[0]))}return e}var n={},p={6:0},u=[];function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=c,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var t=window.webpackJsonp=window.webpackJsonp||[],o=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var m=o;u.push(["gfbn",1,0,2]),l()}({"+M9t":function(e,t,n){"use strict";var r=n("mrSG"),a=n("tkkQ"),p=n("4HGb"),s=n("lqmi"),D=n("s+DT"),o=n("OJz+"),u=n("RBVV"),i=n("R/D/"),c=n("BpBa"),l=n("p7Z6"),m=n("nRcY"),d=n("HxRt"),h=n("3Liw"),f=n("Kqva"),_=n("KrQr"),g=n("lgHT"),T=n("LAqV"),b=n("2vnA"),v=n("XaMz"),S=function(){function e(e,t){this.m_bInitialized=!1,this.m_bGotInitialState=!1,this.m_strClanName="",this.m_strClanTag="",this.m_strAvatarHash=s.c,this.m_eClanAccountFlags=0,this.m_cMemberCount=0,this.m_cUsersOnline=0,this.m_cUsersInGame=0,this.m_cChatRoomMembers=0,this.m_bPersonaStateLoadRequested=!1,this.m_steamid=e,this.m_eClanRelationship=t}return e.prototype.BNeedsPersonaData=function(){return!this.m_bInitialized&&!this.m_bPersonaStateLoadRequested},e.prototype.SetPersonaStateLoadRequested=function(){this.m_bPersonaStateLoadRequested=!0},Object.defineProperty(e.prototype,"name",{get:function(){return this.m_bInitialized?this.m_strClanName:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clanid",{get:function(){return this.m_steamid.GetAccountID()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_count",{get:function(){return this.m_cMemberCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"users_online",{get:function(){return this.m_cUsersOnline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"users_ingame",{get:function(){return this.m_cUsersInGame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count_chat_room_members",{get:function(){return this.m_cChatRoomMembers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chat_room_private",{get:function(){return this.m_bChatRoomPrivate},enumerable:!0,configurable:!0}),e.prototype.BIsMember=function(){return 3==this.m_eClanRelationship},e.prototype.BIsInvite=function(){return 2==this.m_eClanRelationship},e.prototype.SetRelationship=function(e){this.m_eClanRelationship=e},e.prototype.BIsOGG=function(){return!!this.m_unOGGAppID||this.m_bGotInitialState&&0!=(16&this.m_eClanAccountFlags)},e.prototype.GetOGGAppID=function(){return this.m_unOGGAppID},e.prototype.BMatchesSearchString=function(e){return-1!==this.m_strClanName.toLocaleLowerCase().indexOf(e)},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return Object(s.a)(this.m_strAvatarHash)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.BIsOGG()?this.avatar_url:Object(s.a)(this.m_strAvatarHash,"medium")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.BIsOGG()?this.avatar_url:Object(s.a)(this.m_strAvatarHash,"full")},enumerable:!0,configurable:!0}),e.prototype.OpenChatDialog=function(t,n){return void 0===n&&(n=!0),this.GetChatRoomGroupID().then(function(e){return T.f.ChatStore.JoinAndShowChatRoomGroup(t,e,n),e})},e.prototype.ReadPersonaStateUpdate=function(e,t){if(this.m_bInitialized=!0,0!=(2&e)&&(this.m_strClanName=t.player_name()),0!=(1024&e)&&(this.m_strClanTag=t.clan_tag(),t.clan_data().chat_group_id()&&(this.m_ulChatRoomGroupID=t.clan_data().chat_group_id()),t.clan_data().ogg_app_id()&&(this.m_unOGGAppID=t.clan_data().ogg_app_id())),0!=(16&e)){var n=t.avatar_hash(),o=!0;if(n){for(var i=0;i<n.length&&o;i++)o=!n[i];this.m_strAvatarHash=o?s.c:Object(f.a)(n)}}},e.prototype.ReadStateUpdate=function(e){if(this.m_bGotInitialState=!0,this.m_eClanAccountFlags=e.clan_account_flags(),this.m_bChatRoomPrivate=e.chat_room_private(),void 0!==e.user_counts()&&e.user_counts().members()){var t=e.user_counts();this.m_cMemberCount=t.members(),this.m_cUsersOnline=t.online(),this.m_cUsersInGame=t.in_game(),this.m_cChatRoomMembers=t.chat_room_members()}},e.prototype.GetChatGroupIDIfLoaded=function(){return this.m_ulChatRoomGroupID},e.prototype.GetChatRoomGroupID=function(){var t=this;if(this.m_ulChatRoomGroupID)return Promise.resolve(this.m_ulChatRoomGroupID);var e=p.b.Init(u.S);return e.Body().set_steamid(this.steamid.ConvertTo64BitString()),e.Body().set_autocreate(!0),u.Z.GetClanChatRoomInfo(T.f.CMInterface.GetServiceTransport(),e).then(function(e){return 1==e.GetEResult()&&e.Body().chat_group_summary().chat_group_id()?(t.m_ulChatRoomGroupID=e.Body().chat_group_summary().chat_group_id(),t.m_ulChatRoomGroupID):null})},e.prototype.SetChatGroupID=function(e){this.m_ulChatRoomGroupID=e},Object(r.c)([b.x],e.prototype,"m_bInitialized",void 0),Object(r.c)([b.x],e.prototype,"m_bGotInitialState",void 0),Object(r.c)([b.x],e.prototype,"m_eClanRelationship",void 0),Object(r.c)([b.x],e.prototype,"m_strAvatarHash",void 0),Object(r.c)([b.x],e.prototype,"m_ulChatRoomGroupID",void 0),Object(r.c)([b.x],e.prototype,"m_cMemberCount",void 0),Object(r.c)([b.x],e.prototype,"m_cUsersOnline",void 0),Object(r.c)([b.x],e.prototype,"m_cUsersInGame",void 0),Object(r.c)([b.x],e.prototype,"m_cChatRoomMembers",void 0),Object(r.c)([b.x],e.prototype,"m_bChatRoomPrivate",void 0),Object(r.c)([b.i],e.prototype,"avatar_url",null),Object(r.c)([b.i],e.prototype,"avatar_url_medium",null),Object(r.c)([b.i],e.prototype,"avatar_url_full",null),e}(),y=function(){function e(e){var n=this;this.m_mapClans=b.x.map(),this.m_eClanStateHandler=Object(o.a)(822,c.c,function(e){var t=new D.a(e.Body().steamid_clan());n.GetOrCreateClan(t).ReadStateUpdate(e.Body())}),this.m_FriendStore=e}return e.prototype.Init=function(e){this.m_CMInterface=e,this.m_CMInterface.AddOnLogonCallback(this.OnLogOn.bind(this))},e.prototype.OnLogOn=function(){},Object.defineProperty(e.prototype,"clan_invites",{get:function(){var t=[];return this.m_mapClans.forEach(function(e){e.m_bInitialized&&e.BIsInvite()&&t.push(e)}),t.sort(function(e,t){return e.name.localeCompare(t.name)}),t},enumerable:!0,configurable:!0}),e.prototype.GetClan=function(e){var t;return t=e instanceof D.a?(Object(v.a)(e.BIsClanAccount(),"expected clan steamid in GetClan()"),e.GetAccountID()):e,this.m_mapClans.get(t)},e.prototype.JoinClanChatRoom=function(e,t){var n=this.GetOrCreateClan(t);n.OpenChatDialog(e,!0),n.BNeedsPersonaData()&&this.LoadMissingClanPersonas()},e.prototype.ClearClanMembershipData=function(){this.m_mapClans.forEach(function(e){e.SetRelationship(0)})},e.prototype.SetClanChatGroupID=function(e,t){var n=this.GetOrCreateClan(e);n.SetChatGroupID(t),n.BNeedsPersonaData()&&this.ScheduleLoadMissingClanPersonas()},e.prototype.GetOrCreateClan=function(e,t){var n;n=e instanceof D.a?e:D.a.InitFromClanID(e);var o=this.m_mapClans.get(n.GetAccountID());return o?void 0!==t&&o.SetRelationship(t):(o=new S(n,t||0),this.m_mapClans.set(n.GetAccountID(),o)),o},e.prototype.OnClanRelationshipChanged=function(e,t){this.GetOrCreateClan(e,t)},e.prototype.RespondToClanInvite=function(e,t){var n=p.b.Init(g.a);return n.Body().set_steamid(e.ConvertTo64BitString()),n.Body().set_accept(t),g.b.RespondToClanInvite(this.m_CMInterface.GetServiceTransport(),n).then(function(e){return 1==e.GetEResult()})},e.prototype.EnsureInitialStateForClanInvites=function(){var t=p.b.Init(_.e,5554);this.clan_invites.forEach(function(e){e.m_bGotInitialState||t.Body().add_steamid_clans(e.steamid.ConvertTo64BitString())}),t.Body().steamid_clans().length<=0||this.m_CMInterface.Send(t)},e.prototype.ScheduleLoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData||(this.m_iIntervalLoadClanData=SetBackgroundTimeout(this.LoadMissingClanPersonas.bind(this),100))},e.prototype.LoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData&&(ClearBackgroundTimeout(this.m_iIntervalLoadClanData),this.m_iIntervalLoadClanData=void 0);var t=p.b.Init(i.p,815);t.Body().set_persona_state_requested(1042),this.m_mapClans.forEach(function(e){e.BNeedsPersonaData()&&(t.Body().add_friends(e.steamid.ConvertTo64BitString()),e.SetPersonaStateLoadRequested())}),t.Body().friends().length&&this.m_CMInterface.Send(t)},e.prototype.OnClanPersonaStateUpdate=function(e,t){var n=new D.a(t.friendid());this.GetOrCreateClan(n).ReadPersonaStateUpdate(e,t)},Object(r.c)([b.i],e.prototype,"clan_invites",null),e}(),G=n("5FJe"),C=n("TA9H"),O=n("0N1H"),I=n("E7zH"),E=n("WpBz"),w=n("oh5H"),M=n("1VtQ"),R=n("XCHq");n.d(t,"c",function(){return j}),n.d(t,"b",function(){return L}),n.d(t,"a",function(){return P});var j=function(){return function(){this.Notifications_ShowInGame=0,this.Notifications_ShowOnline=0,this.Notifications_ShowMessage=0,this.Notifications_SendMobile=0,this.Sounds_PlayInGame=0,this.Sounds_PlayOnline=0,this.Sounds_PlayMessage=0}}(),L=function(){function i(e){this.m_eFriendRelationship=0,this.m_bPersonaStateLoadRequested=!1,this.m_bPersonaStateReady=!1,this.m_bPersonaNameHistoryLoaded=void 0,this.m_rgPersonaNameHistory=[],this.m_bBetaStatusLoading=!1,this.m_bBetaStatusStale=!0,this.m_bIsOnlineInBeta=void 0,this.m_bIsInBeta=void 0,this.m_unAccountID=e,this.m_persona=new s.b(D.a.InitFromAccountID(e)),0==e&&(Object(v.a)(!1,"unset accountid"),this.m_bPersonaStateReady=!0,this.m_persona.m_bInitialized=!0)}return i.prototype.LoadIfNecessary=function(){this.m_persona.m_bInitialized||this.m_bPersonaStateLoadRequested||(this.m_bPersonaStateLoadRequested=!0,T.f.FriendStore.QueueFriendPersonaStateLoad(this))},Object.defineProperty(i.prototype,"is_ready",{get:function(){return!(!this.m_persona.m_bInitialized&&!this.m_bPersonaStateReady)&&(Object.defineProperty(this,"is_ready",{value:!0}),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"persona",{get:function(){return this.LoadIfNecessary(),Object.defineProperty(this,"persona",{value:this.m_persona}),this.m_persona},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accountid",{get:function(){return this.m_unAccountID},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"steamid",{get:function(){return this.m_persona.m_steamid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"steamid64",{get:function(){return this.m_persona.m_steamid.ConvertTo64BitString()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"efriendrelationship",{get:function(){return this.m_eFriendRelationship},set:function(e){this.m_eFriendRelationship=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"is_friend",{get:function(){return Object(O.b)(this.m_eFriendRelationship)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"is_blocked",{get:function(){return Object(O.a)(this.m_eFriendRelationship)},enumerable:!0,configurable:!0}),i.prototype.GetCommunityProfileURL=function(){return a.a.COMMUNITY_BASE_URL+"profiles/"+this.steamid64+"/"},Object.defineProperty(i.prototype,"has_nickname",{get:function(){return!!this.m_strNickname},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nickname",{get:function(){return this.m_strNickname},set:function(e){this.m_strNickname=e,this.m_strPlayerNicknameNormalized=e?i.NormalizeNameForSearch(e):""},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"notification_settings",{get:function(){return this.m_NotificationSettings||(this.m_NotificationSettings=new j),this.m_NotificationSettings},set:function(e){this.m_NotificationSettings=e},enumerable:!0,configurable:!0}),i.prototype.BShowInGameNotification=function(){return 1==this.notification_settings.Notifications_ShowInGame||T.f.SettingsStore.FriendsSettings.bNotifications_ShowIngame&&2!=this.notification_settings.Notifications_ShowInGame},i.prototype.BShowMessageNotification=function(){return a.a.IN_MOBILE?1===this.notification_settings.Notifications_SendMobile||T.f.BShowDirectChatNotification()&&2!==this.notification_settings.Notifications_SendMobile:1===this.notification_settings.Notifications_ShowMessage||T.f.BShowDirectChatNotification()&&2!==this.notification_settings.Notifications_ShowMessage},i.prototype.BShowOnlineNotification=function(){return 1==this.notification_settings.Notifications_ShowOnline||T.f.SettingsStore.FriendsSettings.bNotifications_ShowOnline&&2!=this.notification_settings.Notifications_ShowOnline},i.prototype.BPlayInGameSound=function(){return 1==this.notification_settings.Sounds_PlayInGame||T.f.SettingsStore.FriendsSettings.bSounds_PlayIngame&&2!=this.notification_settings.Sounds_PlayInGame},i.prototype.BPlayMessageSound=function(){return 1==this.notification_settings.Sounds_PlayMessage||T.f.SettingsStore.FriendsSettings.bSounds_PlayMessage&&2!=this.notification_settings.Sounds_PlayMessage},i.prototype.BPlayOnlineSound=function(){return 1==this.notification_settings.Sounds_PlayOnline||T.f.SettingsStore.FriendsSettings.bSounds_PlayOnline&&2!=this.notification_settings.Sounds_PlayOnline},Object.defineProperty(i.prototype,"display_name",{get:function(){if(this.has_nickname){var e=this.primary_display_name;return this.showing_secondary_display_name&&(e+=" ("+this.secondary_display_name+")"),e}return this.persona.m_strPlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"primary_display_name",{get:function(){if(this.has_nickname&&!T.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames)return this.nickname;return this.persona.m_strPlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"has_secondary_display_name",{get:function(){return this.has_nickname},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showing_secondary_display_name",{get:function(){return!!T.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_secondary_display_name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"secondary_display_name",{get:function(){return T.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_nickname?this.nickname:this.persona.m_strPlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"is_display_name_nickname",{get:function(){return this.has_nickname&&!T.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames},enumerable:!0,configurable:!0}),i.NormalizeNameForSearch=function(e){return e.toLocaleLowerCase()},Object.defineProperty(i.prototype,"player_name_normalized",{get:function(){var e=this;if(void 0===this.m_strPlayerNameNormalized){if(!this.is_ready)return"";var t=function(){e.m_strPlayerNameNormalized=i.NormalizeNameForSearch(e.m_persona.m_strPlayerName)};Object(b.h)(t),void 0===this.m_strPlayerNameNormalized&&t()}return this.m_strPlayerNameNormalized},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"current_game_name",{get:function(){return this.m_persona.GetCurrentGameName()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"current_game_icon_url",{get:function(){return this.m_persona.GetCurrentGameIconURL()},enumerable:!0,configurable:!0}),i.prototype.is_appinfo_ready=function(){return this.m_persona.BIsAppInfoReady()},Object.defineProperty(i.prototype,"current_game_rich_presence",{get:function(){return this.m_persona.GetCurrentGameRichPresence()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"game_name_normalized",{get:function(){var e=this;if(void 0===this.m_strGameNameNormalized){if(!this.is_ready)return"";var t=function(){e.m_strGameNameNormalized=i.NormalizeNameForSearch(e.current_game_name)};Object(b.h)(t),void 0===this.m_strGameNameNormalized&&t()}return this.m_strGameNameNormalized},enumerable:!0,configurable:!0}),i.prototype.MatchSearchString=function(e){var t=this.player_name_normalized.indexOf(e);return-1!==t?{match:1,iOffset:t,bFullMatch:0===t&&this.player_name_normalized.length===e.length}:this.has_nickname&&-1!==(t=this.m_strPlayerNicknameNormalized.indexOf(e))?{match:2,iOffset:t,bFullMatch:0===t&&this.m_strPlayerNicknameNormalized.length===e.length}:{match:0}},i.prototype.BMatchesSearchString=function(e,t){if(-1!==this.player_name_normalized.indexOf(e))return!0;if(this.has_nickname){if(-1!==this.m_strPlayerNicknameNormalized.indexOf(e))return!0}else if(t&&this.m_persona.is_ingame&&-1!==this.game_name_normalized.indexOf(e))return!0;return!1},Object.defineProperty(i.prototype,"persona_name_history",{get:function(){var i=this;if(void 0===this.m_bPersonaNameHistoryLoaded){var e=p.b.Init(c.a,5570);e.Body().add_Ids().set_steamid(this.steamid64),e.Body().set_id_count(1),T.f.CMInterface.SendMsgAndAwaitResponse(e,c.b).then(function(e){if(Object(v.a)(1==e.Body().responses().length,"Got an invalid number of responses to CMsgClientAMGetPersonaNameHistory"),1==e.Body().responses().length){var o=e.Body().responses()[0];Object(v.a)(o.steamid()==i.steamid64,"Got a response for the wrong user from CMsgClientAMGetPersonaNameHistory"),o.steamid()==i.steamid64&&(Object(v.a)(0==i.m_rgPersonaNameHistory.length,"Got persona name history response for same user twice."),Object(b.A)(function(){for(var e=0,t=o.names();e<t.length;e++){var n=t[e];i.m_rgPersonaNameHistory.push(n.name())}i.m_bPersonaNameHistoryLoaded=!0}))}}),this.m_bPersonaNameHistoryLoaded=!1}return this.m_rgPersonaNameHistory},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"persona_name_history_loaded",{get:function(){return!0===this.m_bPersonaNameHistoryLoaded},enumerable:!0,configurable:!0}),i.prototype.OpenChatDialog=function(e){return this.is_blocked?(a.a.IN_MOBILE?T.f.ShowAlert(Object(w.c)("#Friend_Chat_OpenError_Blocked"),Object(w.c)("#Friend_Chat_OpenError_BlockedBody")):T.f.OpenURLInBrowser(this.GetCommunityProfileURL(),e),null):T.f.ShowFriendChatDialog(e,this.m_unAccountID,!0)},Object.defineProperty(i,"FriendSortStatusComparator",{get:function(){var e=T.f.SettingsStore.BForceAlphabeticFriendSorting();return i.FriendSortStatusComparatorInternal.bind(null,e)},enumerable:!0,configurable:!0}),i.FriendSortStatusComparatorInternal=function(e,t,n){var o=t.persona,i=n.persona;return s.b.SortStatusComparator(!e,o,i)},Object.defineProperty(i,"DefaultFriendSortComparator",{get:function(){var o=T.f.SettingsStore.BForceAlphabeticFriendSorting();return function(e,t){var n=i.FriendSortStatusComparatorInternal(o,e,t);return 0!=n?n:e.display_name.localeCompare(t.display_name)}},enumerable:!0,configurable:!0}),i.FriendSortByLastSeenComparator=function(e,t){var n=e.persona,o=t.persona;if(!n.is_online&&!o.is_online){var i=T.f.GetServerRTime32()-n.last_seen_online,r=T.f.GetServerRTime32()-o.last_seen_online;if(r<i)return 1;if(i<r)return-1}return e.display_name.localeCompare(t.display_name)},i.FriendSortByFriendOrNotComparator=function(e,t){return e.is_friend&&!t.is_friend||!e.is_friend&&t.is_friend?e.is_friend?-1:1:e.display_name.localeCompare(t.display_name)},Object.defineProperty(i.prototype,"localized_online_status",{get:function(){return this.persona.GetLocalizedOnlineStatus()},enumerable:!0,configurable:!0}),i.prototype.GetBroadcastDescription=function(){if(this.persona.m_strBroadcastTitle)return this.persona.m_strBroadcastTitle;if(this.persona.m_broadcastAccountId){var e=T.f.FriendStore.GetPlayer(this.persona.m_broadcastAccountId),t=this.persona.m_broadcastAppId?T.f.AppInfoStore.GetAppInfo(this.persona.m_broadcastAppId):null;return t&&t.is_valid?Object(w.c)("#PersonaStateWatchingBroadcast_PlayerGame",e.display_name,t.name):Object(w.c)("#PersonaStateWatchingBroadcast_Player",e.display_name)}return null},i.prototype.LoadFriendsUIBetaStatus=function(){var t=this;if(this.is_friend&&this.m_bBetaStatusStale&&!this.m_bBetaStatusLoading){this.m_bBetaStatusLoading=!0;var n=this.persona.is_online,e=p.b.Init(m.c);e.Body().set_steamid(this.steamid64),m.g.IsInFriendsUIBeta(T.f.CMInterface.GetServiceTransport(),e).then(function(e){t.m_bBetaStatusLoading=!1,t.m_bBetaStatusStale=!1,t.m_bIsOnlineInBeta=e.Body().online_in_friendsui()||!1,t.m_bIsInBeta=e.Body().has_used_friendsui()||!1,Object(b.E)(function(){return t.persona.is_online!=n}).then(function(){t.m_bBetaStatusStale=!0})})}},Object.defineProperty(i.prototype,"is_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsInBeta},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"is_online_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsOnlineInBeta},enumerable:!0,configurable:!0}),Object(r.c)([b.x],i.prototype,"m_eFriendRelationship",void 0),Object(r.c)([b.x],i.prototype,"m_bPersonaStateReady",void 0),Object(r.c)([b.x],i.prototype,"m_bPersonaNameHistoryLoaded",void 0),Object(r.c)([b.x],i.prototype,"m_rgPersonaNameHistory",void 0),Object(r.c)([b.x],i.prototype,"m_strPlayerNicknameNormalized",void 0),Object(r.c)([b.x],i.prototype,"m_strNickname",void 0),Object(r.c)([b.x],i.prototype,"m_bBetaStatusStale",void 0),Object(r.c)([b.x],i.prototype,"m_bIsOnlineInBeta",void 0),Object(r.c)([b.x],i.prototype,"m_bIsInBeta",void 0),Object(r.c)([b.x],i.prototype,"m_NotificationSettings",void 0),Object(r.c)([b.i],i.prototype,"display_name",null),Object(r.c)([b.i],i.prototype,"secondary_display_name",null),Object(r.c)([b.i],i.prototype,"current_game_name",null),Object(r.c)([b.i],i.prototype,"current_game_icon_url",null),Object(r.c)([b.i],i.prototype,"current_game_rich_presence",null),Object(r.c)([b.i],i.prototype,"persona_name_history",null),Object(r.c)([b.i],i.prototype,"persona_name_history_loaded",null),Object(r.c)([b.i],i.prototype,"localized_online_status",null),i}(),A="FriendStoreLocalPrefs",k=function(){function e(){this.m_currentMsg=null,this.m_mapLastSeenApp=new Map}return e.prototype.Init=function(e){this.m_CMInterface=e,a.a.IN_MOBILE||SetBackgroundInterval(this.NotifyImpressions,12e4)},e.prototype.RecordFriendInGameImpression=function(e){if(!a.a.IN_MOBILE&&!(e==O.n||e>=O.h&&e<=O.i)){this.m_currentMsg||(this.m_currentMsg=p.b.Init(l.a));var t=!0;if(this.m_mapLastSeenApp.has(e)){var n=this.m_mapLastSeenApp.get(e);t=864e5<Date.now()-n}var o=null;if(t)this.m_mapLastSeenApp.set(e,Date.now()),(o=this.m_currentMsg.Body().add_impressions()).set_appid(e),o.set_type(2),o.set_num_impressions(0);else{for(var i=0;i<this.m_currentMsg.Body().impressions().length;++i){var r=this.m_currentMsg.Body().impressions()[i];if(r.appid()==e&&1==r.type()){o=r;break}}o||((o=this.m_currentMsg.Body().add_impressions()).set_appid(e),o.set_type(1),o.set_num_impressions(0))}o.set_num_impressions(o.num_impressions()+1)}},e.prototype.NotifyImpressions=function(){if(this.m_currentMsg){var e=this.m_currentMsg;this.m_currentMsg=null,l.b.ReportProductImpressionsFromClient(this.m_CMInterface.GetServiceTransport(),e)}},Object(r.c)([b.g.bound],e.prototype,"NotifyImpressions",null),e}(),P=function(){function e(){var M=this;this.m_FriendGroupStore=new G.a(this),this.m_ClanStore=new y(this),this.m_FavoritesStore=new C.a(this),this.m_mapPlayerCache=new Map,this.m_mapApprovedNonFriendMessages=b.x.map(),this.m_setFriendsNeedingPersonaStateLoad=new Set,this.m_iIntervalSubscribeToPersonaStateUpdates=0,this.m_setFriendAccountIDs=new Set,this.m_setIncomingInviteAccountIDs=new Set,this.m_bUserSetPersonaState=!1,this.m_eUserPersonaState=0,this.m_bIsClientIdle=!1,this.m_FriendStorePrefs={ePersonaState:1,strNonFriendsAllowedToMsg:""},this.m_cFriendPersonaStatesInitialized=0,this.m_bReadyToRender=!1,this.m_bPerFriendPreferencesLoaded=!1,this.m_bReceivedFriendsList=!1,this.m_bInitialPersonaStatesLoaded=!1,this.m_InitialAppInfoPromises=[],this.m_bInitialAppInfoLoaded=!1,this.m_bParentalLocked=void 0,this.m_eUserPersonaStateParental=1,this.m_rgPersonaStateChangeCallbacks=new I.a,this.m_rgPlayerGameChangedCallbacks=new I.a,this.m_nMissingPersonaStateRetryCount=0,this.m_nMissingPersonaStateMaxRetries=5,this.m_FriendInGameNotificationStore=new k,this.m_bSnoozeCallbackFired=!0,this.m_bAwayCallbackFired=!0,this.m_bNextActivityCallbackRegistered=!1,this.fnRecvMsgClientFriendsList=Object(o.a)(767,i.i,function(e){e.Body().bincremental()&&M.SetFriendsList(e.Body())}),this.fnRecvMsgClientPersonaState=Object(o.a)(766,i.m,function(e){for(var t=e.Body().status_flags(),n=new Set,o=new Set,i=0,r=e.Body().friends();i<r.length;i++){var a=r[i],s=new D.a(a.friendid());if(s.BIsClanAccount())M.m_ClanStore.OnClanPersonaStateUpdate(t,a);else if(s.BIsIndividualAccount()){var c=M.GetPlayerIfCached(s.GetAccountID());c||(c=M.GetPlayer(s.GetAccountID()));var l=c.persona,p=l.m_ePersonaState,u=l.m_strPlayerName,m=l.m_unGamePlayedAppID,d=l.m_strGameExtraInfo,h=l.is_in_nonsteam_game,f=l.m_broadcastAppId,_=l.m_bInitialized;l.UpdateFromMessage(t,a),!_&&l.m_bInitialized&&M.m_setFriendAccountIDs.has(c.accountid)&&M.m_cFriendPersonaStatesInitialized++;var g=0!=(1&t);if(s.GetAccountID()==M.self.accountid&&g){var b=!!a.persona_set_by_user(),v=l.m_ePersonaState;M.UpdateUserPersonaStateInternal(v,b,M.m_bIsClientIdle,!0),1==v&&1!=(v=M.AdjustPersonaStateForIdleTime(v))&&M.UpdateUserPersonaStateInternal(v,!1,M.m_bIsClientIdle)}var S=!1,y=l.m_unGamePlayedAppID,C=l.m_broadcastAppId;R.b.bValid&&f&&f!=R.b.appID&&(f=void 0),R.b.bValid&&C&&C!=R.b.appID&&(C=void 0);var O=!1;if(y||m||h||l.is_in_nonsteam_game||C||f){if(S=m!=y,y&&n.add(y),C&&n.add(C),l.GetAccountID()!=M.m_self.accountid){var I=m,E=y;0==l.m_ePersonaState&&(E=0),h&&(I=G.d),l.is_in_nonsteam_game&&(E=G.d),!I&&f&&(I=f),!E&&C&&(E=C),c.is_friend&&M.m_FriendGroupStore.OnFriendGameChanged(s.GetAccountID(),I,E),M.m_rgPlayerGameChangedCallbacks.Dispatch(s.GetAccountID(),I,E),O=!0}}else l.m_strGameExtraInfo&&(S=d!=l.m_strGameExtraInfo);(4096&t||S)&&y&&l.HasCurrentGameRichPresence()&&o.add(y),_&&c.is_friend&&c.accountid!=M.m_self.accountid&&(p!=l.m_ePersonaState||S)&&(c.BPlayInGameSound()&&S&&c.persona.is_ingame?M.PlayJoinGameSound():c.BPlayOnlineSound()&&p!=l.m_ePersonaState&&1==l.m_ePersonaState&&M.PlayFriendOnlineSound(),M.OnFriendPersonaStateChanged(c,p,l.m_ePersonaState,S)),O||l.m_ePersonaState==p&&!S&&l.m_strPlayerName==u||M.m_rgPersonaStateChangeCallbacks.Dispatch(c)}}var w=T.f.AppInfoStore.EnsureAppInfoForAppIDs(n);M.m_bInitialPersonaStatesLoaded||M.m_InitialAppInfoPromises.push(w),!M.m_bInitialPersonaStatesLoaded&&o.size&&(console.log("Preloading Game Rich Presence for AppIDs:",Array.from(o)),o.forEach(function(e){return T.f.AppInfoStore.GetRichPresenceLoc(e)})),M.m_cFriendPersonaStatesInitialized>=M.m_setFriendAccountIDs.size&&M.m_bReceivedFriendsList&&!M.m_bInitialPersonaStatesLoaded&&(M.m_bInitialPersonaStatesLoaded=!0,M.StartWaitForInitialAppInfo())}),this.m_PerFriendPreferencesChangedHandler=Object(o.d)(h.k.NotifyPerFriendPreferencesChangedHandler,function(e){var t=M.GetPlayer(e.Body().accountid());if(t){var n=e.Body().preferences();t.nickname=n.nickname()||void 0;var o=new j;M.FillPerFriendNotificationSettingsFromMessage(o,n),t.notification_settings=o}return 1})}return e.prototype.Init=function(e){var s=this;this.m_CMInterface=e,this.m_FriendGroupStore.Init(e),this.m_ClanStore.Init(e),this.m_FavoritesStore.Init(e),this.m_FriendInGameNotificationStore.Init(e);var t=!1;return this.m_CMInterface.AddOnLogonCallback(function(){t?s.SendPersonaStateToServer(!0):(t=!0,s.m_self=s.AddPlayerToCache(s.m_CMInterface.steamid.GetAccountID(),1),T.f.SettingsStore.GetObjectFromLocalStorage(A,s.m_FriendStorePrefs).then(function(e){if(null!=(s.m_FriendStorePrefs=e).strNonFriendsAllowedToMsg&&""!=e.strNonFriendsAllowedToMsg)for(var t=(new Date).getTime(),n=e.strNonFriendsAllowedToMsg.split(","),o=0;o<n.length;++o){var i=n[o].split("=");if(2==i.length){var r=Number(i[0]),a=Number(i[1]);t<a&&s.m_mapApprovedNonFriendMessages.set(r,a)}}s.m_eUserPersonaState=e.ePersonaState,s.m_bUserSetPersonaState=!1,s.SendPersonaStateToServer(!0)}),s.m_bReadyToRender||SetBackgroundTimeout(s.ForceReadyToRender.bind(s),1e3)),s.GetFriendsList()}),this.m_CMInterface.AddOnDisconnectCallback(function(){s.SetPersonasOffline(!0)},102),Object(b.h)(function(){var e=T.f.ParentalStore.BIsFriendsBlocked();s.OnParentalLockChanged(e)}),this.InitializeIdleTracking(),this.m_bReadyToRender?Promise.resolve():new Promise(function(e,t){s.m_fnOnReadyToRender=e})},e.prototype.UpdateUnreadMessagesGlobal=function(){if(void 0!==window.SteamClient&&null!=window.SteamClient.WebChat&&null!=window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages){var e=T.f.ChatStore.GetChatsWithUnreadPriorityMessages().length;window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages(e)}},e.prototype.GetFriendsList=function(){return Object(r.b)(this,void 0,void 0,function(){var t,n,o;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=p.b.Init(d.c),[4,d.f.GetFriendsList(this.m_CMInterface.GetServiceTransport(),t)];case 1:return 1==(n=e.sent()).GetEResult()?this.SetFriendsList(n.Body().friendslist()):(o={message:"ShowFriendsErrorRetryDialog"},window.parent.postMessage(o,"https://steamloopback.host"),Object(v.a)(!1,"GetFriendsList returned",n.GetEResult())),[2]}})})},Object.defineProperty(e.prototype,"not_ready_to_render_reason",{get:function(){if(this.m_bReadyToRender)return"";var e="";return this.m_bPerFriendPreferencesLoaded||(e+="P"),this.m_bReceivedFriendsList||(e+="F"),this.m_bInitialPersonaStatesLoaded||(e+="I"),this.m_bInitialAppInfoLoaded||(e+="A"),e},enumerable:!0,configurable:!0}),e.prototype.UpdateReadyToRenderState=function(){this.m_bReadyToRender||this.m_bReceivedFriendsList&&this.m_bInitialPersonaStatesLoaded&&this.m_bPerFriendPreferencesLoaded&&this.m_bInitialAppInfoLoaded&&(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.ForceReadyToRender=function(){Object(v.a)(this.m_bReadyToRender,"FriendStore: Forcing ready to render, was not ready in time."),this.m_bInitialPersonaStatesLoaded=!0,this.m_bPerFriendPreferencesLoaded=!0,this.m_bInitialAppInfoLoaded=!0,this.UpdateReadyToRenderState()},e.prototype.AddPersonaStateChangedCallback=function(e){return this.m_rgPersonaStateChangeCallbacks.Register(e)},e.prototype.AddPlayerGameChangedCallback=function(e){return this.m_rgPlayerGameChangedCallbacks.Register(e)},e.prototype.BIsInvisibleMode=function(){return 7==this.m_eUserPersonaState},e.prototype.GetUserDoNotDisturb=function(){return T.f.SettingsStore.FriendsSettings.bDoNotDisturbMode},e.prototype.SetUserDoNotDisturb=function(e){T.f.SettingsStore.FriendsSettings.bDoNotDisturbMode=e,T.f.SettingsStore.BUpdateFriendsSettings(T.f.SettingsStore.FriendsSettings)},e.prototype.SetUserPersonaState=function(e){this.UpdateUserPersonaStateInternal(e,!0,!1)},e.prototype.BApprovedNonFriendMessages=function(e){var t=new Date,n=this.m_mapApprovedNonFriendMessages.get(e);return null!=n&&n>t.getTime()},e.prototype.SetApprovedNonFriendMessages=function(e){var o=(new Date).getTime();this.m_mapApprovedNonFriendMessages.set(e,o+864e5);var i="";this.m_mapApprovedNonFriendMessages.forEach(function(e,t,n){o<e&&(0!=i.length&&(i+=","),i+=t.toString()+"="+e.toString())}),this.m_FriendStorePrefs.strNonFriendsAllowedToMsg=i,T.f.SettingsStore.StoreObjectInLocalStorage(A,this.m_FriendStorePrefs)},e.prototype.OnParentalLockChanged=function(e){!this.m_bParentalLocked&&e?(this.m_eUserPersonaStateParental=this.m_eUserPersonaState,this.UpdateUserPersonaStateInternal(0,!1,this.m_bIsClientIdle),this.m_bParentalLocked=e):this.m_bParentalLocked&&!e&&(this.m_bParentalLocked=e,this.UpdateUserPersonaStateInternal(this.m_eUserPersonaStateParental,!1,this.m_bIsClientIdle))},e.prototype.UpdateUserPersonaStateInternal=function(e,t,n,o){void 0===o&&(o=!1),this.m_bParentalLocked||(T.f.UpdatePersonaState(e),e==this.m_eUserPersonaState&&this.m_bUserSetPersonaState==t&&this.m_bIsClientIdle==n||(0==e&&t?T.f.SignOutOfFriends(void 0):(t||3!=e&&4!=e||(n=!0),o&&this.m_bIsClientIdle!=n&&(o=!1),this.m_eUserPersonaState=e,this.m_bUserSetPersonaState=t,this.m_bIsClientIdle=n,o||this.SendPersonaStateToServer(!1),(t||1==this.m_eUserPersonaState)&&(this.m_FriendStorePrefs.ePersonaState=e,T.f.SettingsStore.StoreObjectInLocalStorage(A,this.m_FriendStorePrefs)))))},e.prototype.SendPersonaStateToServer=function(e){void 0===e&&(e=!1);var t=p.b.Init(i.c,716);t.Body().set_persona_state(this.m_eUserPersonaState),t.Body().set_persona_set_by_user(this.m_bUserSetPersonaState),t.Body().set_need_persona_response(e),t.Body().set_is_client_idle(this.m_bIsClientIdle),this.m_CMInterface.Send(t)},e.prototype.AdjustPersonaStateForIdleTime=function(e){return(1==e||3==e)&&7200<=T.f.IdleTracker.GetUserIdleTime()?4:1==e&&300<=T.f.IdleTracker.GetUserIdleTime()?3:e},Object.defineProperty(e.prototype,"FriendGroupStore",{get:function(){return this.m_FriendGroupStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClanStore",{get:function(){return this.m_ClanStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FavoritesStore",{get:function(){return this.m_FavoritesStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all_friends",{get:function(){var t=this,n=[];return this.m_setFriendAccountIDs.forEach(function(e){n.push(t.GetFriend(e))}),n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all_friends_accountids",{get:function(){return this.m_setFriendAccountIDs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_ready",{get:function(){return this.m_bReceivedFriendsList},enumerable:!0,configurable:!0}),e.prototype.GetFriend=function(e){var t=this.m_mapPlayerCache.get(e);if(t){if(!t.is_friend)return null}else Object(v.a)(!1,"Friend missing from cache: "+e);return t},e.prototype.GetPlayer=function(e){var t=this.m_mapPlayerCache.get(e);return t||(t=this.AddPlayerToCache(e,3)),t},e.prototype.AddPlayerToCache=function(e,t,n){if(void 0===n&&(n=!0),this.m_mapPlayerCache.has(e))return this.m_mapPlayerCache.get(e);var o=new L(e);return this.m_mapPlayerCache.set(e,o),o},e.prototype.GetPlayerIfCached=function(e){return this.m_mapPlayerCache.get(e)},e.prototype.GetFriendIfCached=function(e){var t=this.m_mapPlayerCache.get(e);return t&&t.is_friend?t:null},e.prototype.SetPersonasOffline=function(t){var n=this;this.m_mapPlayerCache.forEach(function(e){t&&(e.is_friend||e.accountid==n.self.accountid)||e.persona.is_online&&e.persona.ClearStateOnDisconnect()})},e.prototype.QueueFriendPersonaStateLoad=function(e){this.m_setFriendsNeedingPersonaStateLoad.add(e.accountid),this.m_iIntervalSubscribeToPersonaStateUpdates||(this.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(this.SubscribeToMissingPersonaStates.bind(this),50))},Object.defineProperty(e.prototype,"self",{get:function(){return this.m_self},enumerable:!0,configurable:!0}),e.prototype.SubscribeToMissingPersonaStates=function(){var r=this;this.m_iIntervalSubscribeToPersonaStateUpdates&&(ClearBackgroundTimeout(this.m_iIntervalSubscribeToPersonaStateUpdates),this.m_iIntervalSubscribeToPersonaStateUpdates=0);var a=[];if(this.m_setFriendsNeedingPersonaStateLoad.forEach(function(e){var t=r.m_mapPlayerCache.get(e);t&&!t.persona.m_bInitialized&&a.push(t.accountid)}),this.m_setFriendsNeedingPersonaStateLoad.clear(),a.length){var e=p.b.Init(i.p,815);e.Body().set_persona_state_requested(1106);for(var t=0,n=a;t<n.length;t++){var o=n[t];e.Body().add_friends(D.a.InitFromAccountID(o).ConvertTo64BitString())}this.m_CMInterface.Send(e),SetBackgroundTimeout(function(){for(var e=0,t=0,n=a;t<n.length;t++){var o=n[t],i=r.GetPlayer(o);i&&!i.persona.m_bInitialized&&(i.m_bPersonaStateReady=!0,i.persona.m_bNameInitialized||(Object(v.a)(i.m_bPersonaStateLoadRequested,"PersonaStateLoadRequested not set"),r.m_setFriendsNeedingPersonaStateLoad.add(o)),e++)}0<e?r.m_nMissingPersonaStateRetryCount<r.m_nMissingPersonaStateMaxRetries?(r.m_nMissingPersonaStateRetryCount++,r.m_iIntervalSubscribeToPersonaStateUpdates||(r.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(r.SubscribeToMissingPersonaStates.bind(r),1e3))):console.log("Giving up persona state retries with",e,"still not filled",r.m_setFriendsNeedingPersonaStateLoad):r.m_nMissingPersonaStateRetryCount=0},500)}},e.prototype.InitializeIdleTracking=function(){this.m_bAwayCallbackFired&&(this.m_bAwayCallbackFired=!1,T.f.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,3),300)),this.m_bSnoozeCallbackFired&&(this.m_bSnoozeCallbackFired=!1,T.f.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,4),7200))},e.prototype.ResetIdleState=function(){var e=this.m_eUserPersonaState;this.m_bUserSetPersonaState||3!=this.m_eUserPersonaState&&4!=this.m_eUserPersonaState||(e=1),this.UpdateUserPersonaStateInternal(e,this.m_bUserSetPersonaState,!1),this.m_bNextActivityCallbackRegistered=!1,this.InitializeIdleTracking()},e.prototype.OnIdle=function(e){var t=e;3==e?(this.m_bAwayCallbackFired=!0,4==this.m_eUserPersonaState&&(t=4)):4==e&&(this.m_bSnoozeCallbackFired=!0),this.m_bUserSetPersonaState&&(t=this.m_eUserPersonaState),this.UpdateUserPersonaStateInternal(t,this.m_bUserSetPersonaState,!0),this.m_bNextActivityCallbackRegistered||(this.m_bNextActivityCallbackRegistered=!0,T.f.IdleTracker.AddOnNextActivityCallback(this.ResetIdleState.bind(this)))},e.prototype.SendFriendInvite=function(e){var t=p.b.Init(h.a);return t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),h.l.AddFriend(this.m_CMInterface.GetServiceTransport(),t).then(function(e){return e.Body().friend_relationship()})},e.prototype.RemoveFriend=function(e){var t=p.b.Init(h.h);return t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),h.l.RemoveFriend(this.m_CMInterface.GetServiceTransport(),t).then(function(e){return e.Body().friend_relationship()})},e.prototype.BlockPlayer=function(e,t){void 0===t&&(t=!1);var n=p.b.Init(h.g);return n.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),t&&n.Body().set_unignore(!0),h.l.IgnoreFriend(this.m_CMInterface.GetServiceTransport(),n).then(function(e){return e.Body().friend_relationship()})},e.prototype.AddFriend=function(e,t){var n=new D.a(e).GetAccountID(),o=this.m_setIncomingInviteAccountIDs.has(n);2==t?o||((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,s.LoadIfNecessary(),this.m_setIncomingInviteAccountIDs.add(n),this.m_FriendGroupStore.OnIncomingInviteAdded(n)):o&&((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,this.m_setIncomingInviteAccountIDs.delete(n),this.m_FriendGroupStore.OnIncomingInviteRemoved(n));4==t?((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,s.LoadIfNecessary(),this.m_FriendGroupStore.OnOutgoingInviteAdded(n)):this.m_FriendGroupStore.OnOutgoingInviteRemoved(n);if(5==t||6==t){var i=T.f.ChatStore.GetFriendChat(n,!1);i&&T.f.UIStore.CloseTabByID(i.unique_id)}var r=this.m_setFriendAccountIDs.has(n);if(Object(O.b)(t)){var a=void 0;r?a=this.GetFriend(n):(this.m_setFriendAccountIDs.add(n),(a=this.AddPlayerToCache(n,2,!1)).LoadIfNecessary(),this.m_FriendGroupStore.OnFriendAdded(n)),a.efriendrelationship=t}else{var s;r&&(this.m_FriendGroupStore.OnFriendRemoved(n),this.m_FavoritesStore.OnFriendRemoved(n),this.m_setFriendAccountIDs.delete(n)),(s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t}},e.prototype.SetFriendsList=function(e){var t=e.friends();if(!e.bincremental()){for(var n=0,o=this.all_friends;n<o.length;n++){o[n].efriendrelationship=0}this.m_setFriendAccountIDs.clear(),this.m_setIncomingInviteAccountIDs.clear(),this.m_FriendGroupStore.OnFullFriendsListUpdateStart(),this.m_ClanStore.ClearClanMembershipData()}for(var i=0,r=t;i<r.length;i++){var a=r[i],s=new D.a(a.ulfriendid());if(s.BIsIndividualAccount()){var c=a.efriendrelationship();this.AddFriend(s.ConvertTo64BitString(),c)}else s.BIsClanAccount()&&this.m_ClanStore.OnClanRelationshipChanged(s,a.efriendrelationship())}if(!e.bincremental()){this.m_FriendGroupStore.OnFullFriendsListUpdateComplete(),this.m_ClanStore.LoadMissingClanPersonas(),this.m_bReceivedFriendsList=!0;var l=p.b.Init(u.R);u.W.RequestFriendPersonaStates(this.m_CMInterface.GetServiceTransport(),l),this.RequestPerFriendPreferences(),0==this.m_setFriendAccountIDs.size?(this.m_bInitialPersonaStatesLoaded=!0,this.StartWaitForInitialAppInfo()):this.SubscribeToMissingPersonaStates()}},e.prototype.OnFriendPersonaStateChanged=function(e,t,n,o){if(T.f.NotificationManager.BNotificationsPermitted()&&T.f.SettingsStore.BReady()&&!T.f.FriendStore.GetUserDoNotDisturb()){if(o&&e.persona.is_ingame&&e.BShowInGameNotification()){var i=e.current_game_name;return e.persona.is_in_nonsteam_game||this.m_FriendInGameNotificationStore.RecordFriendInGameImpression(e.persona.m_unGamePlayedAppID),void(i&&T.f.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(w.c)("#Friend_StateChange_InGame",i),rawbody:i,tag:"state_"+e.accountid,state:"ingame",steamid:e.persona.m_steamid.ConvertTo64BitString()}))}0==t&&0!=n&&e.BShowOnlineNotification()&&T.f.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(w.c)("#Friend_StateChange_Online"),tag:"state_"+e.accountid,state:"online",steamid:e.persona.m_steamid.ConvertTo64BitString()})}},e.prototype.PlayJoinGameSound=function(){T.f.FriendStore.GetUserDoNotDisturb()||T.f.AudioPlaybackManager.PlayAudioURL(a.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_join.m4a")},e.prototype.PlayFriendOnlineSound=function(){T.f.FriendStore.GetUserDoNotDisturb()||T.f.AudioPlaybackManager.PlayAudioURL(a.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_online.m4a")},e.prototype.FillPerFriendNotificationSettingsFromMessage=function(e,t){e.Notifications_ShowInGame=t.notifications_showingame(),e.Notifications_ShowMessage=t.notifications_showmessages(),e.Notifications_ShowOnline=t.notifications_showonline(),e.Notifications_SendMobile=t.notifications_sendmobile(),e.Sounds_PlayInGame=t.sounds_showingame(),e.Sounds_PlayMessage=t.sounds_showmessages(),e.Sounds_PlayOnline=t.sounds_showonline()},e.prototype.RequestPerFriendPreferences=function(){var a=this,e=p.b.Init(h.e);h.l.GetPerFriendPreferences(this.m_CMInterface.GetServiceTransport(),e).then(function(r){Object(b.A)(function(){for(var e=0,t=r.Body().preferences();e<t.length;e++){var n=t[e],o=a.GetPlayer(n.accountid());if(o){o.nickname=n.nickname()||void 0;var i=new j;a.FillPerFriendNotificationSettingsFromMessage(i,n),o.notification_settings=i}else console.log("Got per-friend preferences back for a user we don't have a Player for:",n)}a.m_bPerFriendPreferencesLoaded=!0,a.UpdateReadyToRenderState()})})},e.prototype.StartWaitForInitialAppInfo=function(){return Object(r.b)(this,void 0,void 0,function(){return Object(r.e)(this,function(e){switch(e.label){case 0:return[4,Promise.all(this.m_InitialAppInfoPromises)];case 1:return e.sent(),this.m_bInitialAppInfoLoaded=!0,this.UpdateReadyToRenderState(),[2]}})})},e.prototype.FillMessageFromPerFriendNotificationSettings=function(e,t){e.set_notifications_showingame(t.Notifications_ShowInGame),e.set_notifications_showmessages(t.Notifications_ShowMessage),e.set_notifications_showonline(t.Notifications_ShowOnline),e.set_notifications_sendmobile(t.Notifications_SendMobile),e.set_sounds_showingame(t.Sounds_PlayInGame),e.set_sounds_showmessages(t.Sounds_PlayMessage),e.set_sounds_showonline(t.Sounds_PlayOnline)},e.prototype.SetPlayerNickname=function(e,t){return this.SetPlayerPerFriendPreferences(e,t,e.notification_settings)},e.prototype.SetPlayerNotificationSettings=function(e,t){return this.SetPlayerPerFriendPreferences(e,e.nickname,t)},e.prototype.SetPlayerPerFriendPreferences=function(e,t,n){var o=p.b.Init(h.j),i=o.Body().preferences();return i.set_accountid(e.accountid),i.set_nickname(t),this.FillMessageFromPerFriendNotificationSettings(i,n),h.l.SetPerFriendPreferences(T.f.CMInterface.GetServiceTransport(),o).then(function(e){return e.GetEResult()})},e.prototype.InviteToGame=function(e,t){var n=p.b.Init(c.d,7005);n.Hdr().set_routing_appid(t),n.Body().set_steam_id_src(this.m_CMInterface.steamid.ConvertTo64BitString()),n.Body().set_steam_id_dest(D.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),this.m_CMInterface.Send(n)},e.prototype.InviteToLobby=function(e,t,n){var o=p.b.Init(c.e,6621);o.Hdr().set_routing_appid(t),o.Body().set_steam_id_lobby(n),o.Body().set_steam_id_user_invited(D.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),this.m_CMInterface.Send(o)},e.prototype.InviteToWatch=function(e){T.f.ShowFriendChatDialog(T.f.GetDefaultBrowserContext(),e.accountid,!0);T.f.BroadcastStore.InviteToWatch(e.accountid).then(function(e){})},e.prototype.FillInChatUsabilityMetrics=function(e){for(var t=0,n=0,o=0,i=0,r=this.all_friends;i<r.length;i++){var a=r[i];3==a.efriendrelationship&&(t++,a.persona.is_online&&n++,a.persona.is_ingame&&o++)}e.metrics().set_friends_count(t),e.metrics().set_friends_online_count(n),e.metrics().set_friends_in_game_count(o),this.m_FriendGroupStore.FillInChatUsabilityMetrics(e),this.m_FavoritesStore.FillInChatUsabilityMetrics(e)},Object(r.c)([b.x],e.prototype,"m_eUserPersonaState",void 0),Object(r.c)([b.x],e.prototype,"m_bPerFriendPreferencesLoaded",void 0),Object(r.c)([b.x],e.prototype,"m_bReceivedFriendsList",void 0),Object(r.c)([b.x],e.prototype,"m_bInitialPersonaStatesLoaded",void 0),Object(r.c)([b.x],e.prototype,"m_bInitialAppInfoLoaded",void 0),Object(r.c)([b.i],e.prototype,"not_ready_to_render_reason",null),Object(r.c)([b.g],e.prototype,"OnParentalLockChanged",null),Object(r.c)([b.g],e.prototype,"SetPersonasOffline",null),Object(r.c)([b.g],e.prototype,"SetFriendsList",null),Object(r.c)([M.a,Object(E.a)(100)],e.prototype,"PlayJoinGameSound",null),Object(r.c)([M.a,Object(E.a)(100)],e.prototype,"PlayFriendOnlineSound",null),Object(r.c)([b.g],e.prototype,"SetPlayerNickname",null),Object(r.c)([b.g],e.prototype,"SetPlayerNotificationSettings",null),Object(r.c)([b.g],e.prototype,"SetPlayerPerFriendPreferences",null),Object(r.c)([b.g],e.prototype,"InviteToGame",null),Object(r.c)([b.g],e.prototype,"InviteToLobby",null),Object(r.c)([b.g],e.prototype,"InviteToWatch",null),e}()},"+mma":function(e,t,n){"use strict";n.d(t,"d",function(){return u}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return m});var s=n("Hi0u"),c=n("hReu"),o=n("LAqV"),l=n("oh5H"),p=n("kQil");function u(n,o,e,t,i,r,a){return void 0===i&&(i=Object(l.c)("#Button_Cancel")),Object(p.f)(function(e){var t=m(n,o);Object(s.b)(e,n,"alertdialog",t,Object(c.g)(n))},o,e,t,i,r,a)}function i(e,t,n,o,i,r,a){return void 0===i&&(i=Object(l.c)("#Button_Cancel")),u(e,t,n,o,i,r,a).then(function(){return Promise.resolve(!0)}).catch(function(){return Promise.resolve(!1)})}function r(n,o,e,t){return void 0===t&&(t=Object(l.c)("#Button_OK")),Object(p.e)(function(e){var t=m(n,o);Object(s.b)(e,n,"alertdialog",t,Object(c.g)(n))},o,e,t)}function m(e,t){return o.f.UIStore.GetPerContextChatData(Object(c.f)(e)).BUsePopups()&&e.innerWidth<600?{strTitle:t,popupWidth:638,popupHeight:300}:null}},"/7KC":function(e,t,n){"use strict";function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function i(e,t,n){return Math.max(t,Math.min(n,e))}function r(e,t,n,o,i){return o+(i-o)*(e-t)/(n-t)}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r})},"/Byk":function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return g});var o=n("mrSG"),a=n("q1tI"),s=n("ljid"),i=n("hReu"),c=n("Hi0u"),l=n("oh5H"),r=n("1VtQ"),p=n("LAqV"),u=n("okNM"),m=n("yolM"),d=n("XaMz"),h=n("r95U"),f=n.n(h);function _(e,t){var n=t.GetGroup().textRoomList.length;7<n&&(n=7);var o=60*n;n<2&&(o-=32),Object(c.b)(a.createElement(b,{group:t.GetGroup()}),e,"ChatRoomGroupNotificationSettings",{strTitle:Object(l.c)("#NotificationSettings_Title"),popupWidth:600,popupHeight:348+o},Object(i.g)(e))}a.createElement("div",{className:"notificationChimeAndToast FriendsSettingsNotificationRow"},a.createElement(s.e,null),a.createElement(s.e,null));function g(e){void 0===e&&(e=!0);var t=[];return e&&(t=t.concat([{label:a.createElement("span",{className:"ChannelSpecificNotificationSettings_Inherit"},Object(l.c)("#NotificationSetting_Inherit")),data:0}])),t=t.concat([{label:Object(l.c)("#NotificationSetting_AllMessages"),data:4},{label:Object(l.c)("#NotificationSetting_AnyMention",p.f.FriendStore.self.display_name),data:3},{label:Object(l.c)("#NotificationSetting_DirectMention",p.f.FriendStore.self.display_name),data:2},{label:Object(l.c)("#NotificationSetting_None"),data:1}])}var b=function(n){function e(e){var t=n.call(this,e)||this;return t.m_rgSelectOptions=g(!1),t.state={cSavesInFlight:0},t}return Object(o.d)(e,n),e.prototype.IncrementSavesInFlight=function(){this.setState(function(e){return{cSavesInFlight:e.cSavesInFlight+1}})},e.prototype.DecrementSavesInFlight=function(){this.setState(function(e){return Object(d.a)(0<e.cSavesInFlight,"expected "+e.cSavesInFlight+" > 0"),{cSavesInFlight:e.cSavesInFlight-1}})},e.prototype.WrapSavePromise=function(e){this.IncrementSavesInFlight(),e.then(this.DecrementSavesInFlight,this.DecrementSavesInFlight)},e.prototype.OnGroupNotificationLevelChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(e))},e.prototype.OnShowUnreadIndicatorChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(void 0,void 0,e))},e.prototype.DismissDialog=function(){this.props.closeModal()},e.prototype.OnFriendsSettingsClicked=function(e){Object(m.a)(Object(i.e)(this,e),e.currentTarget.ownerDocument.defaultView)},e.prototype.render=function(){var e,t=this,n=this.props.group,o=n.chatRoomList.filter(function(e){return e.BShouldTrackUnreadMessages()}),i=0<o.length;if(1==o.length&&0==o[0].GetDesktopNotificationLevelSetting()&&0==o[0].GetMobileNotificationLevelsetting()&&(i=!1),i){var r=o.map(function(e){return a.createElement(v,{fnHandleSave:t.WrapSavePromise,group:n,chat:e,key:e.unique_id})});e=a.createElement(a.Fragment,null,a.createElement("div",{className:"notificationsChannelListContainer\t"},r))}return a.createElement(c.a,{onEscKeypress:this.DismissDialog},a.createElement(s.h,{classNameContent:"ChatRoomNotificationSettingsDialog"},a.createElement(s.m,null,Object(l.c)("#NotificationSettings_Title")),a.createElement(s.p,null,Object(l.e)("#NotificationSettings_SubTitle",a.createElement("span",{className:"whiteText"},n.name))),a.createElement(s.b,null,a.createElement(s.p,{className:"NotificationSettingsSavingIndicator "+(this.state.cSavesInFlight?"Saving":"")},Object(l.c)("#GroupSettings_Permissions_Saving"),"..."),a.createElement(S,{drop_down_options:this.m_rgSelectOptions,get_notification_level:function(e){return t.props.group.GetDesktopNotificationLevel(e)},set_notification_level:this.OnGroupNotificationLevelChanged,get_muted:function(){return t.props.group.BIsUnreadIndicatorMuted()},set_muted:this.OnShowUnreadIndicatorChanged}),i&&a.createElement(a.Fragment,null,a.createElement(s.l,null),a.createElement(s.D,{className:"notificationsChannelHeader"},a.createElement(s.p,{className:"NotificationChannelNameLabel"},Object(l.c)("#GroupSettings_Channels_TextChannels")),a.createElement(s.p,{className:"OverrideChannelLabel"},Object(l.c)("#NotificationSetting_ShortLabel"))),a.createElement(s.n,{className:f.a.scrollMaskVertical},e))),a.createElement(s.j,null,Object(l.e)("#NotificationSetting_Footer_Desc",a.createElement("span",{className:"textLink",onClick:this.OnFriendsSettingsClicked},Object(l.c)("#FriendSettings_Title"))))))},Object(o.c)([r.a],e.prototype,"IncrementSavesInFlight",null),Object(o.c)([r.a],e.prototype,"DecrementSavesInFlight",null),Object(o.c)([r.a],e.prototype,"WrapSavePromise",null),Object(o.c)([r.a],e.prototype,"OnGroupNotificationLevelChanged",null),Object(o.c)([r.a],e.prototype,"OnShowUnreadIndicatorChanged",null),Object(o.c)([r.a],e.prototype,"DismissDialog",null),Object(o.c)([r.a],e.prototype,"OnFriendsSettingsClicked",null),e=Object(o.c)([u.a],e)}(a.Component),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_rgSelectOptions=g(),e}return Object(o.d)(e,t),e.prototype.OnChatNotificationLevelChanged=function(e){this.props.fnHandleSave(this.props.chat.SetNotificationPreferences(e.data))},e.prototype.render=function(){var e=this.props.chat;e.GetDesktopNotificationLevelSetting();return a.createElement(s.C,{className:"notificationsChannel"},a.createElement("div",{className:"NotificationChannelName"},e.name),a.createElement(s.i,{rgOptions:this.m_rgSelectOptions,selectedOption:e.GetDesktopNotificationLevelSetting(),onChange:this.OnChatNotificationLevelChanged}))},Object(o.c)([r.a],e.prototype,"OnChatNotificationLevelChanged",null),e=Object(o.c)([u.a],e)}(a.Component),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnNotificationLevelChanged=function(e){this.props.set_notification_level(e.data)},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.props.set_muted(!e)},t.prototype.render=function(){var e=this.props.get_notification_level(!0);this.props.bIsDefault&&0==e&&(e=4);var t=this.props.get_notification_level();return this.props.bIsDefault&&0==t&&(t=4),a.createElement("div",{className:"ChatRoomNotificationSettingsDialog"},a.createElement("div",{className:"notificationGeneralHeader"+(this.props.bIsDefault?" isDefault":"")},a.createElement(s.p,null,this.props.bIsDefault?Object(l.c)("#NotificationSetting_DefaultLabel"):Object(l.c)("#NotificationSetting_Label"))),a.createElement("div",{style:{marginBottom:16}},a.createElement("div",{className:"notificationRow"},a.createElement(s.i,{rgOptions:this.props.drop_down_options,selectedOption:e,onChange:this.OnNotificationLevelChanged})),4!=t&&a.createElement("div",{className:"indicatorOptionContainer"},a.createElement(s.u,{classname:"indicatorOption",label:Object(l.c)("#NotificationSetting_Indicator"),onChange:this.OnShowUnreadIndicatorChanged,checked:!this.props.get_muted()}),a.createElement("div",{className:"ChatUnreadMessageIndicator"+(this.props.get_muted()?" Hidden":"")},a.createElement("div",{className:"chatUnreadCircle"})))))},Object(o.c)([r.a],t.prototype,"OnNotificationLevelChanged",null),Object(o.c)([r.a],t.prototype,"OnShowUnreadIndicatorChanged",null),t=Object(o.c)([u.a],t)}(a.Component)},"/FkP":function(e,t,n){"use strict";n.d(t,"i",function(){return h}),n.d(t,"h",function(){return f}),n.d(t,"e",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"f",function(){return a}),n.d(t,"d",function(){return _}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"j",function(){return v}),n.d(t,"a",function(){return S});var s,o,c,i,a,r,l=n("mrSG"),p=n("2vnA"),u=n("0N1H"),m=n("LAqV"),d={"/me":{strDescriptionToken:"#SlashCommandDescription_Me"},"/code":{strDescriptionToken:"#SlashCommandDescription_Code"},"/pre":{strDescriptionToken:"#SlashCommandDescription_Pre"},"/giphy":{strDescriptionToken:"#SlashCommandDescription_Giphy"},"/spoiler":{strDescriptionToken:"#SlashCommandDescription_Spoiler"},"/quote":{strDescriptionToken:"#SlashCommandDescription_Quote"},"/random":{strDescriptionToken:"#SlashCommandDescription_Random",unExpectedArguments:[1,2]},"/flip":{strDescriptionToken:"#SlashCommandDescription_Flip",unExpectedArguments:0},"/store":{strDescriptionToken:"#SlashCommandDescription_Store"}};function h(){return Object.keys(d)}function f(e){return d[e]}(o=s||(s={}))[o.None=0]="None",o[o.Deleting=1]="Deleting",o[o.Deleted=2]="Deleted",(i=c||(c={}))[i.None=0]="None",i[i.Animating=1]="Animating",(r=a||(a={}))[r.None=0]="None",r[r.Generic=1]="Generic",r[r.NotFriends=2]="NotFriends",r[r.NoChatPermissionInGroup=3]="NoChatPermissionInGroup",r[r.RateLimitExceeded=4]="RateLimitExceeded";var _=function(){function e(e,t,n,o,i,r,a){this.unOrdinal=0,this.eDeleteState=s.None,this.eAnimationState=c.None,this.unAccountID=e,this.rtTimestamp=t,this.unOrdinal=n||0,o&&13e3<o.length?this.strMessage=o.substr(0,13e3):this.strMessage=o,this.m_strSlashCommand=function(e){if(!e)return null;var t=e.split(/\s/),n=t[0],o=t.slice(1);if(d[n]){var i=d[n].unExpectedArguments;if(void 0===i||("number"==typeof i?i===o.length:-1<i.indexOf(o.length)))return n}return null}(o),this.strMessage=this.HandleSpecialMessage(this.strMessage),void 0!==i&&(this.eServerMsgType=i,this.strServerMsgParam=r,this.unServerMsgParamAccountID=a)}return e.prototype.UniqueKey=function(){return this.unOrdinal?this.rtTimestamp+"_"+this.unOrdinal:this.rtTimestamp},Object.defineProperty(e.prototype,"Mentions",{get:function(){return this.m_mentions||{}},set:function(e){this.m_mentions=e},enumerable:!0,configurable:!0}),e.prototype.BIsLocalEcho=function(){return!1},e.prototype.BHasServerAcknowledged=function(){return!0},Object.defineProperty(e.prototype,"eErrorSending",{get:function(){return a.None},enumerable:!0,configurable:!0}),e.prototype.BIsServerMessage=function(){return null!=this.eServerMsgType&&0!=this.eServerMsgType},e.prototype.BIsInvite=function(){return 5==this.eServerMsgType},e.prototype.GetSlashCommand=function(){return this.m_strSlashCommand},e.prototype.BIsOlderThan=function(e){return this.rtTimestamp<e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal<e.unOrdinal},e.prototype.BIsNewerThan=function(e){return this.rtTimestamp>e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal>e.unOrdinal},e.prototype.HasUserContent=function(){return!this.m_bNoUserContent},e.prototype.HandleSpecialMessage=function(e){return"+1"==e?(this.m_bNoUserContent=!0,"[plusone][/plusone]"):e},e.prototype.OnAnimationEnd=function(){this.eAnimationState=c.None},Object(l.c)([p.x],e.prototype,"rtTimestamp",void 0),Object(l.c)([p.x],e.prototype,"unOrdinal",void 0),Object(l.c)([p.x],e.prototype,"eDeleteState",void 0),Object(l.c)([p.x],e.prototype,"eAnimationState",void 0),Object(l.c)([p.x],e.prototype,"strServerMsgAppCustomLocalized",void 0),e}(),g=function(i){function r(e,t,n){var o=i.call(this,e,t,-1,n)||this;return o.eErrorSending=a.None,o.m_bServerAcknowledged=!1,o.strMessageObservable=o.HandleSpecialMessage(n),o.m_iLocalEchoID=r.sm_iLocalEchoID++,o}return Object(l.d)(r,i),Object.defineProperty(r.prototype,"strMessage",{get:function(){return this.strMessageObservable},set:function(e){this.strMessageObservable=this.HandleSpecialMessage(e)},enumerable:!0,configurable:!0}),r.prototype.BIsLocalEcho=function(){return!0},r.prototype.UniqueKey=function(){return this.m_bServerAcknowledged?i.prototype.UniqueKey.call(this):"localecho_"+this.m_iLocalEchoID},r.prototype.BHasServerAcknowledged=function(){return this.m_bServerAcknowledged},r.prototype.OnServerAcknowledged=function(){this.m_bServerAcknowledged=!0},r.sm_iLocalEchoID=0,Object(l.c)([p.x],r.prototype,"eErrorSending",void 0),Object(l.c)([p.x],r.prototype,"strMessageObservable",void 0),Object(l.c)([p.x],r.prototype,"m_bServerAcknowledged",void 0),Object(l.c)([p.g],r.prototype,"OnServerAcknowledged",null),r}(_),b=function(o){function i(e,t,n){return o.call(this,e,t,++i.m_nOrdinal,n)||this}return Object(l.d)(i,o),i.m_nOrdinal=0,i}(_);function v(e){switch(e){case 1:case 5:case 2:case 3:case 4:case 9:case 10:case 11:return!0}return!1}var S=function(){function e(){this.m_rgMessageBlocks=p.x.array([],{deep:!1}),this.Clear()}return Object.defineProperty(e.prototype,"message_blocks",{get:function(){return this.m_rgMessageBlocks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_passes_index",{get:function(){return this.m_iIndexLastTimePassesGap},enumerable:!0,configurable:!0}),e.prototype.Clear=function(){this.m_rgMessageBlocks.clear(),this.m_rgMessageBlocks.push(new y),this.m_iIndexLastTimePassesGap=void 0},e.prototype.AppendMessage=function(e){var t=this.m_rgMessageBlocks[this.m_rgMessageBlocks.length-1];if(!t.BCanAccumulateMessage(e)){var n=t;t=new y,this.m_rgMessageBlocks.push(t),n.SetNextBlock(t),3600<=e.rtTimestamp-n.GetRTimeLastMessage()&&(n.GetRTimeMidnightBeforeBlock()==m.f.GetLocalMidnightInRTime32(e.rtTimestamp)?this.m_iIndexLastTimePassesGap=this.m_rgMessageBlocks.length-1:this.m_iIndexLastTimePassesGap=void 0)}t.AppendMessage(e)},e.prototype.BuildMessageBlocks=function(e){this.Clear();for(var t=0,n=e;t<n.length;t++){var o=n[t];this.AppendMessage(o)}},e.prototype.AppendNewMessage=function(e){this.AppendMessage(e)},e.prototype.RemoveLocalMessage=function(e){for(var t=0,n=this.m_rgMessageBlocks;t<n.length;t++){if(n[t].RemoveLocalMessage(e))return!0}return!1},e.prototype.RemoveOldestMessages=function(e){for(var t=0;0<e&&!(t>=this.m_rgMessageBlocks.length);){if((i=this.m_rgMessageBlocks[t].messages).length>e)break;e-=i.length,t++}if(0==t)return null;for(var n=null,o=t-1;0<=o;o--){var i;if(0!=(i=this.m_rgMessageBlocks[o].messages).length){n=i[i.length-1];break}}return this.m_rgMessageBlocks.splice(0,t),n},Object(l.c)([p.x],e.prototype,"m_iIndexLastTimePassesGap",void 0),Object(l.c)([p.g],e.prototype,"BuildMessageBlocks",null),Object(l.c)([p.g],e.prototype,"AppendNewMessage",null),Object(l.c)([p.g],e.prototype,"RemoveLocalMessage",null),Object(l.c)([p.g],e.prototype,"RemoveOldestMessages",null),e}(),y=function(){function a(){this.m_rgMessages=[],this.m_bMessageBlockIsOnlyEmotes=!0}return a.prototype.CreateVirtualSplitOnTimestamp=function(e){var t=new a,n=new a;t.SetNextBlock(n),n.SetNextBlock(this.m_nextBlock);for(var o=0,i=this.m_rgMessages;o<i.length;o++){var r=i[o];r.rtTimestamp<e?t.AppendMessage(r):n.AppendMessage(r)}return[t,n]},a.prototype.UniqueKey=function(){return this.m_rgMessages.length?this.m_rgMessages[0].UniqueKey():"EmptyBlock"},Object.defineProperty(a.prototype,"messages",{get:function(){return this.m_rgMessages},enumerable:!0,configurable:!0}),a.prototype.SetNextBlock=function(e){this.m_nextBlock=e},Object.defineProperty(a.prototype,"is_last_block",{get:function(){return void 0===this.m_nextBlock},enumerable:!0,configurable:!0}),a.prototype.GetRTimeMidnightBeforeBlock=function(){return this.m_rtMidnightBeforeBlock},a.prototype.GetRTimeMidnightBeforeNextBlock=function(){return this.m_nextBlock?this.m_nextBlock.GetRTimeMidnightBeforeBlock():m.f.GetLocalMidnightInRTime32()},a.prototype.GetRTimeLastMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp:u.f},a.prototype.GetRTimeFirstMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[0].rtTimestamp:0},a.prototype.AppendMessage=function(e){"/me"===e.GetSlashCommand()||(this.m_bMessageBlockIsOnlyEmotes=!1),this.m_rgMessages.length||(this.m_rtMidnightBeforeBlock=m.f.GetLocalMidnightInRTime32(e.rtTimestamp)),this.m_rgMessages.push(e)},a.prototype.BCanAccumulateMessage=function(e){if(!this.m_rgMessages.length)return!0;var t=this.m_rgMessages[0].unAccountID,n=this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp,o=this.m_rgMessages[this.m_rgMessages.length-1];return e.BIsServerMessage()==this.m_rgMessages[0].BIsServerMessage()&&(!(!e.BIsServerMessage()||e.BIsInvite()||this.m_rgMessages[0].BIsInvite())||!(!t||t!=e.unAccountID)&&(e.BIsInvite()==this.m_rgMessages[0].BIsInvite()&&(!(300<e.rtTimestamp-n)&&((!this.m_bMessageBlockIsOnlyEmotes||"/me"===e.GetSlashCommand())&&(!(e instanceof b||o instanceof b)&&!(m.f.GetLocalMidnightInRTime32(e.rtTimestamp)>this.m_rtMidnightBeforeBlock))))))},a.prototype.BIsInvite=function(){return 0<this.m_rgMessages.length&&this.m_rgMessages[0].BIsInvite()},a.prototype.BIsServerMsg=function(){return 0<this.m_rgMessages.length&&this.m_rgMessages[0].BIsServerMessage()&&!this.m_rgMessages[0].BIsInvite()},a.prototype.RemoveLocalMessage=function(t){var e=this.m_rgMessages.findIndex(function(e){return e.BIsLocalEcho()&&e.UniqueKey()===t.UniqueKey()});return-1!==e&&(this.m_rgMessages.splice(e,1),!0)},Object(l.c)([p.x.shallow],a.prototype,"m_rgMessages",void 0),Object(l.c)([p.x.shallow],a.prototype,"m_nextBlock",void 0),Object(l.c)([p.g],a.prototype,"CreateVirtualSplitOnTimestamp",null),a}()},"/IDK":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"p",function(){return c}),n.d(t,"k",function(){return l}),n.d(t,"h",function(){return p}),n.d(t,"n",function(){return u}),n.d(t,"m",function(){return m}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return h}),n.d(t,"l",function(){return f}),n.d(t,"b",function(){return _}),n.d(t,"o",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"f",function(){return v});var o=n("UqDm");n("XaMz");function i(e){if(!(e.clientX||e.clientY||e.screenX||e.screenY))return!0;if(e.relatedTarget)return!r(e.currentTarget,e.relatedTarget);var t=e.currentTarget.getBoundingClientRect();return(e.clientX<=t.left||e.clientX>=t.right||e.clientY<=t.top||e.clientY>=t.bottom)&&(console.log(e.clientX+" <= "+t.left+" || "+e.clientX+" >= "+t.right+" ||\n\t\t\t\t"+e.clientY+" <= "+t.top+" || "+e.clientY+" >= "+t.bottom),!0)}function r(e,t){for(;t;){if(t.parentNode.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(t=t.parentNode.host),t==e)return!0;t=t.parentElement}return!1}function a(e,t){for(;t;)if((t=t.parentElement)==e)return!0;return!1}function s(e){if(!window.getSelection)return!1;for(var t=window.getSelection(),n=0,o=0;o<t.rangeCount;o++){var i=t.getRangeAt(o);if(i.startOffset!=i.endOffset)r(e,i.commonAncestorContainer)&&n++}return 0<t.rangeCount&&t.rangeCount==n}function c(e,t){var n=e.offsetTop;e.offsetParent!=t&&(n-=t.offsetTop),n<t.scrollTop?e.scrollIntoView(!0):n+e.offsetHeight>t.scrollTop+t.offsetHeight&&e.scrollIntoView(!1)}function l(e,t,n){var o=0,i=0;return t<e.left?o=e.left-t:t>e.right&&(o=t-e.right),n<e.top?i=e.top-n:n>e.bottom&&(i=n-e.bottom),Math.sqrt(o*o+i*i)}function p(e,t){return{width:t.width,height:t.height,top:e.screenTop+t.top,bottom:e.screenTop+t.bottom,left:e.screenLeft+t.left,right:e.screenLeft+t.right}}function u(e){var t=void 0;return e&&e.currentTarget&&(t=e.currentTarget.ownerDocument.defaultView),t}function m(e){var t=void 0;return e&&(t=e.ownerDocument.defaultView),t}function d(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{document.body.removeChild(t)}}function h(e){var t="steam://openurl/";e.startsWith(t)&&(e=e.slice(t.length)),d(e)}function f(e){return e?0==e.clipboardData.files.length?null:e.clipboardData.types.some(function(e){return("text"==e||e.startsWith("text/"))&&"text/html"!==e})?null:e.clipboardData.files[0]:null}function _(e){var t=e.ownerDocument;return t.fullscreen||t.webkitIsFullScreen||t.mozFullScreen||t.msFullscreenElement}function g(e,t){var n=e;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():t&&t.webkitSetPresentationMode?t.webkitSetPresentationMode("fullscreen"):n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}function b(e){var t=e.ownerDocument;t.cancelFullscreen?t.cancelFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()}var v=function(){function e(e){var r=this;this.m_bNeedSort=!1,this.m_bOffsetsInvalidated=!1,this.m_rgChildren=[],this.RecomputeVisibility=function(){var e=r.m_elParent.scrollTop-r.m_nBufferPx,t=r.m_elParent.scrollTop+r.m_elParent.clientHeight+r.m_nBufferPx;r.EnsureSort();for(var n=0,o=r.m_rgChildren;n<o.length;n++){var i=o[n];if(!(i.yOffset<e)){if(i.yOffset>t)break;i.fnCallback(!0)}}r.m_nLastYMin=e,r.m_nLastYMax=t},this.m_nBufferPx=e}return e.prototype.SetParent=function(e){this.m_elParent&&this.m_elParent.ownerDocument.defaultView.removeEventListener("resize",this.RecomputeVisibility),this.m_elParent=e,this.m_elParent&&this.m_elParent.ownerDocument.defaultView.addEventListener("resize",this.RecomputeVisibility)},e.prototype.InvalidateOffsetsAndRecompute=function(){this.m_bOffsetsInvalidated=!0,this.RecomputeVisibility()},e.prototype.EnsureSort=function(){if(this.m_bOffsetsInvalidated){for(var e=0;e<this.m_rgChildren.length;e++)this.m_rgChildren[e].yOffset=this.m_rgChildren[e].element.offsetTop;this.m_bOffsetsInvalidated=!1}this.m_bNeedSort&&(this.m_rgChildren.sort(function(e,t){return e.yOffset-t.yOffset}),this.m_bNeedSort=!1)},e.prototype.RegisterChild=function(e,t){this.m_rgChildren.push({element:e,yOffset:e.offsetTop,fnCallback:t}),this.m_bNeedSort=!0,void 0!==this.m_nLastYMin&&void 0!==this.m_nLastYMax&&e.offsetTop>=this.m_nLastYMin&&e.offsetTop<=this.m_nLastYMax&&t(!0)},e.prototype.UnregisterChild=function(t){o.d(this.m_rgChildren,function(e){return e.element==t})},e}()},"/SYB":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var i=n("mrSG"),o=n("vDqi"),r=n.n(o),a=function(){function o(e){this.idGenerator=e||function(){return""}}return o.prototype.LOG=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&console.log.apply(console,Object(i.g)([this.idGenerator()+":"],e))},o.create=function(e,t){void 0===t&&(t=!1);var n=new o(e);return n.enabled=t,n.LOG.bind(n)},o}();function s(e){if(r.a.isCancel(e))return{strErrorMsg:"Action Cancelled:"+e,errorCode:52};if(void 0!==e.response&&"object"==typeof e.response.data){if("msg"in e.response.data)return{strErrorMsg:e.response.data.msg,errorCode:e.response.data.success};if("err_msg"in e.response.data)return{strErrorMsg:e.response.data.err_msg,errorCode:e.response.data.success};if("message"in e.response.data)return{strErrorMsg:e.response.data.message,errorCode:e.response.data.success}}else{if(void 0!==e.success&&void 0!==e.msg)return{strErrorMsg:e.msg,errorCode:e.success};if(void 0!==e.success&&void 0!==e.message)return{strErrorMsg:e.message,errorCode:e.success};if(void 0!==e.success&&void 0!==e.err_msg)return{strErrorMsg:e.err_msg,errorCode:e.success};console.error("GetMsgAndErrorCodeFromResponse: ",e)}return"status"in e?{strErrorMsg:"Unknown Error: "+e+"\nStatus Code:"+e.status,errorCode:2}:{strErrorMsg:"Unknown Error: "+e,errorCode:2}}},"/ZM5":function(e,t,n){"use strict";var d=n("mrSG"),h=n("q1tI"),f=n("1w3K"),o=n("ljid"),_=n("e2SU"),i=n("+M9t"),r=n("hReu"),g=n("LAqV"),b=n("29iz"),a=n("gtB6"),s=n("+mma"),c=n("Hi0u"),l=n("2vnA"),p=n("okNM"),u=n("8o0Y"),m=n("EGkk"),v=n("oh5H"),S=n("1VtQ"),y=n("bbBM"),C=n("ieu3"),O=n("dpJ7"),I=n("tkkQ"),E=n("/IDK"),w=n("c7k8"),M=n("SEab"),D=function(){function e(){this.m_vecObjects=[],this.OnUnload=this.OnUnload.bind(this),Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||window.addEventListener("unload",this.OnUnload)}return e.prototype.OnUnload=function(){for(var e=0,t=this.m_vecObjects;e<t.length;e++){t[e].DeleteObserver()}this.m_vecObjects=[]},e.prototype.CreateObserver=function(e,t){var n=new T(e,t);return this.m_vecObjects.push(n),n},e.prototype.DeleteObserver=function(e){if(e){var t=e,n=this.m_vecObjects.indexOf(t);0<=n&&(t.DeleteObserver(),this.m_vecObjects.splice(n,1))}},e}(),T=function(){function e(e,t){this.m_resizeObserver=t?new t.ResizeObserver(e):new ResizeObserver(e)}return e.prototype.DeleteObserver=function(){this.m_resizeObserver&&(this.m_resizeObserver.disconnect(),delete this.m_resizeObserver)},e.prototype.observe=function(e){this.m_resizeObserver&&this.m_resizeObserver.observe(e)},e.prototype.unobserve=function(e){this.m_resizeObserver&&this.m_resizeObserver.unobserve(e)},e.prototype.disconnect=function(){this.m_resizeObserver&&this.m_resizeObserver.disconnect()},e}(),G=new D,R=function(n){function e(e){var t=n.call(this,e)||this;return t.m_elContainer=null,t.m_resizeObserver=null,t.state={nWidth:0,nHeight:0},t}return Object(d.d)(e,n),e.prototype.componentWillUnmount=function(){this.m_resizeObserver&&G.DeleteObserver(this.m_resizeObserver)},e.prototype.BindContainerRef=function(e){this.m_resizeObserver&&(this.m_resizeObserver.disconnect(),this.m_resizeObserver=null),this.m_elContainer=e,this.m_elContainer&&(this.m_resizeObserver=G.CreateObserver(this.OnResize,Object(E.m)(this.m_elContainer)),this.m_resizeObserver.observe(this.m_elContainer),this.UpdateDimensions(this.m_elContainer.clientWidth,this.m_elContainer.clientHeight))},e.prototype.UpdateDimensions=function(e,t){this.state.nWidth==e&&this.state.nHeight==t||this.setState({nWidth:e,nHeight:t})},e.prototype.OnResize=function(e,t){var n=0,o=0;if(0<e.length){var i=e[0].contentRect;n=i.width,o=i.height}this.UpdateDimensions(n,o)},e.prototype.render=function(){var e={width:this.state.nWidth,height:this.state.nHeight},t=this.props.children(e),n=this.props.className;return h.createElement("div",{className:n,style:{position:"absolute",top:0,right:0,bottom:0,left:0},ref:this.BindContainerRef},t)},Object(d.c)([S.a],e.prototype,"BindContainerRef",null),Object(d.c)([S.a],e.prototype,"OnResize",null),e}(h.Component),j=n("20CD"),L=n("XaMz"),A=n("E7zH");n.d(t,"a",function(){return P}),n.d(t,"b",function(){return N}),n.d(t,"c",function(){return F}),n.d(t,"d",function(){return H});function k(e,t){return e.filter(function(e){return e.BMatchesSearchString(t,!1)})}var P=function(n){function e(e){var t=n.call(this,e)||this;return t.m_schHoverDelay=new A.b,t.state={bCollapsed:!1,bMouseHover:!1},t}return Object(d.d)(e,n),e.prototype.OnRoomsContextMenu=function(e){var t=this;if(this.props.groupView.GetGroup().BCanAdminChannel()){var n=e.currentTarget.ownerDocument.defaultView;Object(u.a)(h.createElement(m.c,null,h.createElement(m.d,{onSelected:function(){t.CreateTextChannel(n)}},Object(v.c)("#GroupSettings_Channels_CreateText")),h.createElement(m.d,{onSelected:function(){t.CreateVoiceChannel(n)}},Object(v.c)("#GroupSettings_Channels_CreateVoice"))),e)}},e.prototype.CreateTextChannel=function(e){Object(c.b)(h.createElement(F,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!0}),e)},e.prototype.CreateVoiceChannel=function(e){Object(c.b)(h.createElement(F,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!0}),e)},e.prototype.OnMouseEnter=function(e){var t=this;this.m_schHoverDelay.Schedule(400,function(){t.setState({bMouseHover:!0})})},e.prototype.OnMouseLeave=function(e){this.setState({bMouseHover:!1}),this.m_schHoverDelay.Cancel()},e.prototype.ToggleCollapseExpand=function(){var e=this.props.groupView;e.SetChannelListCollapsed(!e.isChannelListCollapsed)},e.prototype.render=function(){var e=this.props.groupView.GetGroup(),t=e.IsNamedGroupChat(),n=!1,o="chatRoomGroupNavColumn",i=this.props.groupView.isChannelListCollapsed;return 0!=e.voiceRoomList.length||t?i&&!this.state.bMouseHover&&(o+=" chatRoomGroupNavCollapsed"):(n=!0,o+=" defaultChatOnly"),this.props.inactive||n?h.createElement("div",{className:o}):h.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},h.createElement("div",{className:"chatRoomChannelGroups",onContextMenu:this.OnRoomsContextMenu},t&&h.createElement(x,{groupView:this.props.groupView}),h.createElement(U,{groupView:this.props.groupView}),(!i||this.state.bMouseHover)&&h.createElement("div",{className:"chatRoomGroupNavCollapseExpand",title:Object(v.c)(i?"#Tooltip_PinChannelList":"#Tooltip_UnpinChannelList"),onClick:this.ToggleCollapseExpand},h.createElement(_.N,{bPinned:!i}))),h.createElement("div",{className:"disconnectBlocker"}))},Object(d.c)([S.a],e.prototype,"OnRoomsContextMenu",null),Object(d.c)([S.a],e.prototype,"OnMouseEnter",null),Object(d.c)([S.a],e.prototype,"OnMouseLeave",null),Object(d.c)([S.a],e.prototype,"ToggleCollapseExpand",null),e=Object(d.c)([p.a],e)}(h.Component),N=function(t){function e(e){return t.call(this,e)||this}return Object(d.d)(e,t),e.prototype.GetMembersMatchingSearch=function(e){var t=k(this.props.groupView.GetGroup().memberList.member_list,e);return t.sort(i.b.DefaultFriendSortComparator),t},e.prototype.OnMemberListToggleViewClick=function(e){this.props.groupView.SetMemberListCollapsed(this.props.groupView.isMemberListExpanded)},e.prototype.OnSearchInput=function(e){this.props.groupView.SetMemberSearchEnabled(e.currentTarget.value)},e.prototype.OnSearchSubmit=function(e){e.preventDefault();var t=this.props.groupView,n=t.normalizedMemberSearch;if(n&&n.length){var o=this.GetMembersMatchingSearch(n);o.length&&o[0].OpenChatDialog(Object(r.e)(this,e))}t.ClearMemberSearch()},e.prototype.OnSearchKeyDown=function(e){27==e.keyCode&&(e.preventDefault(),e.currentTarget.blur(),this.props.groupView.ClearMemberSearch())},e.prototype.OnClearSearch=function(){this.props.groupView.ClearMemberSearch()},e.prototype.OnSearchFocus=function(){this.props.groupView.SetMemberSearchEnabled()},e.prototype.OnSearchBlur=function(){0==this.props.groupView.GetMemberSearch().length&&this.props.groupView.ClearMemberSearch()},e.prototype.render=function(){var e=this.props.groupView,t=e.isMemberListExpanded,n=e.GetMemberSearch(),o="MemberListColumn",i=Object(v.c)("#Tooltip_MemberCollapse");t||(o+=" MemberListViewCompact",i=Object(v.c)("#Tooltip_MemberExpand"));var r="MemberListOptionsContainer";return e.IsMemberSearchActive()&&(r+=" SearchActive"),h.createElement("div",{className:o},h.createElement("div",{className:r},h.createElement("div",{className:"MemberListOption ToggleMemberListView"+(0<n.length?" SearchActive":""),onClick:this.OnMemberListToggleViewClick,title:i},h.createElement(_.n,null)),h.createElement("form",{className:"socialInputContainer",name:"friendSearchForm",onSubmit:this.OnSearchSubmit},h.createElement("div",{className:"inputContainer no-drag"},h.createElement("input",{id:"memberListSearchInputID",className:"friendSearchInput",type:"text",name:"memberlistSearch",placeholder:Object(v.c)("#SearchByName"),defaultValue:n,onInput:this.OnSearchInput,onKeyDown:this.OnSearchKeyDown,onFocus:this.OnSearchFocus,onBlur:this.OnSearchBlur,autoComplete:"off"}),h.createElement("div",{className:"friendSearchClear",onClick:this.OnClearSearch},h.createElement(_.pb,null))))),h.createElement(B,{groupView:this.props.groupView,inactive:this.props.inactive}),h.createElement("div",{className:"disconnectBlocker"}))},Object(d.c)([S.a],e.prototype,"OnMemberListToggleViewClick",null),Object(d.c)([S.a],e.prototype,"OnSearchInput",null),Object(d.c)([S.a],e.prototype,"OnSearchSubmit",null),Object(d.c)([S.a],e.prototype,"OnSearchKeyDown",null),Object(d.c)([S.a],e.prototype,"OnClearSearch",null),Object(d.c)([S.a],e.prototype,"OnSearchFocus",null),Object(d.c)([S.a],e.prototype,"OnSearchBlur",null),e=Object(d.c)([p.a],e)}(h.Component),B=function(n){function e(e){var t=n.call(this,e)||this;return t.m_mapCollapsedBuckets=new Map,t.m_refList=h.createRef(),t.m_disposeGetMemberList=g.f.GroupMemberStore.RegisterForGroupMemberList(t.OnMemberListChanged,t.props.groupView.GetGroup().GetGroupID()),t.state={nBucketChanges:1},t}return Object(d.d)(e,n),e.prototype.componentWillUnmount=function(){this.m_disposeGetMemberList.unregister()},e.prototype.GetFriendRenderContext=function(){var e=this.props.groupView.GetGroup();return this.m_renderContext&&this.m_renderContext.group==e||(this.m_renderContext={group:e,chatContext:"chatmemberlist"}),this.m_renderContext},e.prototype.OnMemberListChanged=function(){var e=this.state.nBucketChanges+1;this.setState({nBucketChanges:e}),null!=this.m_refList.current&&this.m_refList.current.recomputeRowHeights()},e.prototype.SortedPlayerSortFunc=function(e,t){return e.display_name.localeCompare(t.display_name)},e.prototype.BuildFilteredBuckets=function(e,t){for(var n=[],o=0,i=e;o<i.length;o++){var r=i[o],a=k(r.member_list,t);if(0<a.length){var s=new M.a(r.id,this.SortedPlayerSortFunc,function(){});s.SetMembers(a),n.push(s)}}return n},e.prototype.GetListGroupForIndex=function(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(t<0)break;var r=this.GetVisibleRowsForBucket(i);if(t<r)return{index:t,bucket:i};t-=r}return null},e.prototype.GetVisibleRowsForBucket=function(e){return this.BIsBucketCollapsed(e)?1:e.member_list.length+1},e.prototype.OnToggleBucketCollapsed=function(e){1<this.m_rgLastRenderBuckets.length&&(this.m_mapCollapsedBuckets.set(e.id,!this.BIsBucketCollapsed(e)),this.OnMemberListChanged())},e.prototype.BIsBucketCollapsed=function(e){return this.m_mapCollapsedBuckets.get(e.id)},e.prototype.GetRowHeight=function(e){var t=this.m_rgLastRenderBuckets,n=this.GetListGroupForIndex(t,e.index);return n?0==n.index?28:36:0},e.prototype.RenderRow=function(e){var t=this,n=e.index,o=(e.isScrolling,e.key,e.isVisible,e.style),i=this.m_rgLastRenderBuckets,r=this.GetListGroupForIndex(i,n);if(!r)return null;n=r.index;var a=r.bucket;if(0==n)return h.createElement("div",{key:"group_"+a.id,style:o},h.createElement(z,{collapsible:1<this.m_rgLastRenderBuckets.length,collapsed:this.BIsBucketCollapsed(a),memberCount:a.member_list.length,name:a.name,onToggleCollapse:function(){t.OnToggleBucketCollapsed(a)}}));var s=a.BIsGameGroup();n--;var c=a.member_list[n];return h.createElement("div",{key:c.accountid,style:o,className:"chatroomBucket_"+this.GetFriendlyNameForBucket(a.id)},h.createElement(q,{friend:c,bHideGameName:s,groupView:this.props.groupView,context:this.GetFriendRenderContext()}))},e.prototype.GetFriendlyNameForBucket=function(e){switch(e){case M.c:return"partybeacon"}return"regular"},e.prototype.render=function(){var t=this;if(this.props.inactive)return null;var e=g.f.GroupMemberStore.GetGroupMemberList(this.props.groupView.GetGroup().GetGroupID()),n=this.state.nBucketChanges;if(0==e.length)return null;var o=this.props.groupView.normalizedMemberSearch;0<o.length&&(e=this.BuildFilteredBuckets(e,o)),this.m_rgLastRenderBuckets=e;for(var i=0,r=0,a=e;r<a.length;r++){var s=a[r];i+=this.GetVisibleRowsForBucket(s)}var c,l=function(e){return h.createElement(w.b,{ref:t.m_refList,className:"ChatRoomMemberScrollList_List",width:e.width,height:e.height,rowCount:i,rowHeight:t.GetRowHeight,rowRenderer:t.RenderRow,bucketChanges:n})};return c=I.a.IN_CLIENT?h.createElement(R,{className:"friendGroup"},l):h.createElement(w.a,{className:"friendGroup"},l),h.createElement("div",{className:"chatRoomMembers CompactFriendsList groupMemberList",style:{position:"relative"}},c)},Object(d.c)([S.a],e.prototype,"OnMemberListChanged",null),Object(d.c)([S.a],e.prototype,"OnToggleBucketCollapsed",null),Object(d.c)([S.a],e.prototype,"GetRowHeight",null),Object(d.c)([S.a],e.prototype,"RenderRow",null),e=Object(d.c)([p.a],e)}(h.Component),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnSubmit=function(){var t=this,e=this.m_refInput&&this.m_refInput.value;e&&this.props.groupView.GetGroup().CreateChatRoom(e,this.props.bVoiceChannel).then(function(e){e&&(t.props.closeModal(),t.props.bJoinChannel&&(t.props.bVoiceChannel?e.StartVoiceChat():t.props.groupView.SelectChat(e.GetRoomID())))}).catch(function(e){Object(s.c)(t.props.ownerWin,Object(v.c)("#Generic_Error"),Object(v.c)("#Chat_CreateChatRoom_GenericError")),t.props.closeModal()})},t.prototype.render=function(){var t=this;return h.createElement(c.a,{onEscKeypress:this.props.closeModal},h.createElement(o.h,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},h.createElement(o.m,null,Object(v.c)(this.props.bVoiceChannel?"#GroupSettings_Channels_CreateVoice":"#GroupSettings_Channels_CreateText")),h.createElement(o.b,null,h.createElement(o.o,{ref:function(e){t.m_refInput=e},autoFocus:!0,label:Object(v.c)("#Chat_SaveVoiceRoom_Name")})),h.createElement(o.j,null,h.createElement(o.t,{onCancel:this.props.closeModal}))))},Object(d.c)([S.a],t.prototype,"OnSubmit",null),t}(h.Component);var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnCreateNewTextChannel=function(e){var t,n,o,i=Object(E.n)(e);this.props.groupView.GetGroup().BCanAdminChannel()&&(t=i,n=this.props.groupView,o=!1,Object(c.b)(h.createElement(F,{ownerWin:t,groupView:n,bVoiceChannel:o,bJoinChannel:!0}),t,"CreateChatChannelDialog",{strTitle:Object(v.c)("#GroupSettings_Channels_CreateText"),popupWidth:800,popupHeight:400},Object(r.g)(t)))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var t=this,n=this.props.groupView,e=n.GetGroup().textRoomList,o=n.GetGroup().BCanAdminChannel();n.isChannelListCollapsed;return h.createElement("div",{className:"chatRoomTextChannelsGroup"},h.createElement("div",{className:"ChannelTypeTitle",title:Object(v.c)("#Tooltip_TextChannel"),onClick:this.OnCreateNewTextChannel},h.createElement("div",{className:"ChannelTypeLabel"+(o?"":" NoPermission"),title:o?Object(v.c)("#Tooltip_TextChannelCreate"):Object(v.c)("#Tooltip_NoPermissionChannelCreate")},o?Object(v.c)("#Chat_AddTextChat"):Object(v.c)("#Chat_CreateTextChannel_DefaultName")),h.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(v.c)("#Tooltip_TextChannelCreate")},h.createElement(_.P,null))),e.map(function(e){return h.createElement(V,{key:e.unique_id,chat:e,bRenameActive:n.IsRoomRenameActive(e.GetRoomID()),bActiveChat:e==n.GetActiveChatView().chat,bDefaultRoom:e==n.GetGroup().GetDefaultChatRoom(),onStartRename:t.OnStartChannelRename,onRename:t.OnChannelRename,onEndRename:t.OnEndChannelRename})}))},Object(d.c)([S.a],t.prototype,"OnCreateNewTextChannel",null),Object(d.c)([S.a],t.prototype,"OnStartChannelRename",null),Object(d.c)([S.a],t.prototype,"OnChannelRename",null),Object(d.c)([S.a],t.prototype,"OnEndChannelRename",null),t=Object(d.c)([p.a],t)}(h.Component),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.ToggleTextChat=function(){if(!this.props.bRenameActive){var e=g.f.UIStore.IsChatRoomGroupActive(Object(r.e)(this),this.props.chat.GetGroup()),t=g.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(r.e)(this),this.props.chat.GetGroup(),!1),n=t.GetPopoverChatView();e&&n&&n.chat&&n.chat==this.props.chat?t.ClosePopoverChat():t.SelectChat(this.props.chat.GetRoomID())}},t.prototype.OnContextMenu=function(e){this.props.bRenameActive||Object(a.a)(Object(r.e)(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename)},t.prototype.render=function(){var e=this.props.chat,t="chatRoomTextChannel";this.props.bActiveChat&&(t+=" ActiveTextChannel");var n="chatRoomTextChannelName";this.props.bDefaultRoom&&(n+=" IsCommonsChannel");var o=this.props.bRenameActive&&!this.props.chat.GetVoiceAllowed();return h.createElement("div",{className:t,onClick:this.ToggleTextChat,onContextMenu:this.OnContextMenu},h.createElement(C.b,{chat:e}),h.createElement("div",{className:"chatRoomTextChannelIcon"},h.createElement(_.fb,null)),!o&&h.createElement("div",{className:n},e.BIsDefaultRoom()?Object(v.c)("#Chat_DefaultChannelName"):e.name),!this.props.bDefaultRoom&&o&&h.createElement(W,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}))},Object(d.c)([S.a],t.prototype,"ToggleTextChat",null),Object(d.c)([S.a],t.prototype,"OnContextMenu",null),t=Object(d.c)([p.a],t)}(h.Component),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.CreateVoiceRoom=function(){this.props.groupView.GetGroup().CreateAndJoinTempVoiceRoom()},t.prototype.OnVoiceRoomSelected=function(e){this.props.groupView.GetRenameRoomID()==e.GetRoomID()||(g.f.ChatStore.VoiceChat.GetActiveVoiceChatID()==e.GetRoomID()||(this.props.groupView.ClosePopoverChat(),e.StartVoiceChat()))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var t=this,n=this.props.groupView,e=n.GetGroup().voiceRoomList;return h.createElement("div",{className:"chatRoomVoiceChannelsGroup"},h.createElement("div",{className:"ChannelTypeTitle",title:Object(v.c)("#Tooltip_VoiceChannelCreate"),onClick:this.CreateVoiceRoom},h.createElement("div",{className:"ChannelTypeLabel"},Object(v.c)("#Chat_AddVoiceChat")),h.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(v.c)("#Tooltip_VoiceChannelCreate")},h.createElement(_.P,null))),e.map(function(e){return h.createElement(H,{key:e.unique_id,context:"VoiceRoomsGroup",chat:e,bRenameActive:n.GetRenameRoomID()==e.GetRoomID(),onSelect:function(){t.OnVoiceRoomSelected(e)},onStartRename:t.OnStartChannelRename,onRename:t.OnChannelRename,onEndRename:t.OnEndChannelRename})}))},Object(d.c)([S.a],t.prototype,"CreateVoiceRoom",null),Object(d.c)([S.a],t.prototype,"OnVoiceRoomSelected",null),Object(d.c)([S.a],t.prototype,"OnStartChannelRename",null),Object(d.c)([S.a],t.prototype,"OnChannelRename",null),Object(d.c)([S.a],t.prototype,"OnEndChannelRename",null),t=Object(d.c)([p.a],t)}(h.Component),H=function(n){function e(e){var t=n.call(this,e)||this;return t.state={dropToInviteFriend:void 0,bDropConfirmationNotice:!1},t}return Object(d.d)(e,n),e.prototype.OnContextMenu=function(e){this.props.bRenameActive||Object(a.a)(Object(r.e)(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename),e.preventDefault(),e.stopPropagation()},e.prototype.InviteToChat=function(e){Object(j.b)(Object(r.e)(this,e),e.currentTarget.ownerDocument.defaultView,this.props.chat.GetGroup(),this.props.chat),e.stopPropagation()},e.prototype.OnDragEnter=function(e,t){if(Object(L.a)(e&&"friend"==e.type,"Invalid type passed to VoiceRoom.OnDragEnter"),e){var n=e;n.friend&&this.setState({dropToInviteFriend:n.friend})}return!0},e.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},e.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},e.prototype.OnDrop=function(e,t){var n=this;if(Object(L.a)(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var o=e;if(o.friend&&o.friend!=g.f.FriendStore.self){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),r.h.DragDropManager.SetDropConsumed();var i=t.currentTarget.ownerDocument.defaultView;this.props.chat.GetGroup().BIsUserGroupMember(o.friend)?(this.props.chat.GetGroup().InviteFriend(o.friend.accountid,this.props.chat),this.setState({bDropConfirmationNotice:!0}),this.m_dropInviteInvitee=o.friend,this.m_dropConfirmationInterval=window.setInterval(function(){n.setState({bDropConfirmationNotice:!1}),window.clearInterval(n.m_dropConfirmationInterval)},1200)):Object(O.k)({invitee:o.friend,chatview:null,invitedto:this.props.chat},Object(r.e)(this,t),i)}}},e.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},e.prototype.GetFriendContext=function(){var e=this.props.chat&&this.props.chat.GetGroup().readyToRender?this.props.chat:null;return this.m_FriendContext&&this.m_FriendContext.chat==e||(this.m_FriendContext={chat:e}),this.m_FriendContext},e.prototype.render=function(){var t=this,e=this.props.chat.GetGroup(),n=this.props.chat==e.GetDefaultChatRoom(),o=g.f.ChatStore.VoiceChat.GetActiveVoiceChatID()==this.props.chat.GetRoomID(),i=g.f.CMInterface.steamid.GetAccountID(),r=g.f.FriendStore.GetPlayer(i),a=this.props.chat.voice_active_contains_only_self,s="emptyChannelNotice",c=this.props.chat.voice_active_member_list.member_list.map(function(e){return h.createElement(f.CSSTransition,{key:e.accountid,classNames:"friend-anim",timeout:320},h.createElement(y.c,{friend:e,key:e.accountid,context:t.GetFriendContext(),showVoiceLevel:!0,bInVoiceList:!0}))}),l=this.props.chat.voice_active_contains_friends;o&&!this.props.chat.voice_active_contains_self&&(0==c.length&&(a=!0),l=!0,c.push(h.createElement(f.CSSTransition,{key:i,classNames:"friend-anim",timeout:320},h.createElement(y.c,{friend:r,key:i,context:this.GetFriendContext(),showVoiceLevel:!0}))));var p=["chatRoomVoiceChannel"];o&&p.push("ActiveVoiceChannel"),l||"ChatRoomList"!=this.props.context||p.push("MinimizeMemberList"),this.state.dropToInviteFriend&&p.push("voiceRoomActiveDrop"),o&&a&&(s+=" Visible");var u=this.props.chat.IsUnsavedVoiceChannel(),m=this.props.chat.name;return h.createElement(b.a,Object(d.a)({className:p.join(" "),onClick:this.props.onSelect},this.GetDragDropProps()),h.createElement("div",{className:"chatRoomVoiceChannelIconGlow"}),h.createElement("div",{className:"chatRoomVoiceChannelNameContainer",onContextMenu:this.OnContextMenu},h.createElement("div",{className:"chatRoomVoiceChannelIcon"},h.createElement(_.mb,null)),!this.props.bRenameActive&&h.createElement("div",{className:"chatRoomVoiceChannelName"+(u?" unsavedVoiceChannel":"")},m),this.props.bRenameActive&&h.createElement(W,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}),!this.props.bRenameActive&&h.createElement(h.Fragment,null,h.createElement("div",{onContextMenu:this.OnContextMenu,onClick:this.OnContextMenu,className:"VoiceControlPanelButton chatPinRoom",title:Object(v.c)("#Chat_ChannelOptions")},h.createElement(_.o,null)))),h.createElement("div",{className:"VoiceChannelParticipants CompactFriendsList"},!l&&c,l&&h.createElement(f.TransitionGroup,{enter:!0,exit:!0},c)),h.createElement("div",{className:s},Object(v.c)("#Chat_VoiceEmptyChannel")),h.createElement(y.a,{name:m,chat:this.props.chat,nostatus:!0}),!n&&h.createElement(V,{chat:this.props.chat,bRenameActive:!1,bActiveChat:!1,bDefaultRoom:!1}),h.createElement("div",{className:"ScratchPadConnect"}),this.state.bDropConfirmationNotice&&h.createElement("div",{className:"dropConfirmationNotice"+(this.state.bDropConfirmationNotice?" Active":"")},h.createElement("div",{className:"dropConfirmationLabel"},h.createElement("img",{className:"avatar",src:this.m_dropInviteInvitee.persona.avatar_url_medium}))),h.createElement("div",{className:"dropTargetBox"}))},Object(d.c)([S.a],e.prototype,"OnContextMenu",null),Object(d.c)([S.a],e.prototype,"InviteToChat",null),Object(d.c)([S.a],e.prototype,"OnDragEnter",null),Object(d.c)([S.a],e.prototype,"OnDragLeave",null),Object(d.c)([S.a],e.prototype,"OnDragOver",null),Object(d.c)([S.a],e.prototype,"OnDrop",null),e=Object(d.c)([p.a],e)}(h.Component),W=function(n){function e(e){var t=n.call(this,e)||this;return t.m_strValue="",t.m_strValue=t.props.chat.name,t}return Object(d.d)(e,n),e.prototype.componentWillReceiveProps=function(e){this.props.chat!=e.chat&&(this.m_strValue=e.chat.name)},e.prototype.componentDidMount=function(){window.addEventListener("keydown",this.OnGlobalKeyDown,!1)},e.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.OnGlobalKeyDown,!1)},e.prototype.BindInputRef=function(e){e&&e.focus()},e.prototype.OnChange=function(e){this.m_strValue=e.target.value},e.prototype.OnSubmit=function(e){this.SubmitAndClose(),e.preventDefault()},e.prototype.OnGlobalKeyDown=function(e){27==e.keyCode&&this.Close()},e.prototype.OnBlur=function(e){this.SubmitAndClose()},e.prototype.SubmitAndClose=function(){this.props.onRename(this.props.chat.GetRoomID(),this.m_strValue),this.Close()},e.prototype.Close=function(){this.props.onEndRename()},e.prototype.render=function(){return h.createElement("form",{className:"RenameChatRoomInline",onSubmit:this.OnSubmit},h.createElement("input",{ref:this.BindInputRef,type:"text",value:this.m_strValue,onChange:this.OnChange,onBlur:this.OnBlur}))},Object(d.c)([l.x],e.prototype,"m_strValue",void 0),Object(d.c)([S.a],e.prototype,"BindInputRef",null),Object(d.c)([S.a],e.prototype,"OnChange",null),Object(d.c)([S.a],e.prototype,"OnSubmit",null),Object(d.c)([S.a],e.prototype,"OnGlobalKeyDown",null),Object(d.c)([S.a],e.prototype,"OnBlur",null),e=Object(d.c)([p.a],e)}(h.Component),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnToggleCollapsed=function(e){this.props.onToggleCollapse()},t.prototype.render=function(){var e=this.props.collapsed,t=this.props.memberCount,n=this.props.name,o="groupName";return e&&(o+=" Collapsed"),h.createElement("div",{className:o,onClick:this.OnToggleCollapsed},h.createElement("div",{className:"groupIcon"},h.createElement(_.v,null)),this.props.collapsible&&h.createElement("div",{className:"ExpandPlusMinus"},h.createElement(_.P,null)),h.createElement("span",{className:"groupCountCollapsed"},t),h.createElement("div",{className:"groupLabelsContainer"},h.createElement("span",{className:"groupNameLabel"},n),h.createElement("span",{className:"groupCount"},"(",t,")")))},Object(d.c)([S.a],t.prototype,"OnToggleCollapsed",null),t}(h.PureComponent),q=function(t){function e(e){return t.call(this,e)||this}return Object(d.d)(e,t),e.prototype.OnFriendSelected=function(){this.props.friend.OpenChatDialog(Object(r.e)(null)),this.props.groupView.ClearMemberSearch()},e.prototype.render=function(){var e=[],t="",n=this.props.groupView,o=n.GetGroup(),i=n.isMemberListExpanded,r=o.GetMemberRank(this.props.friend.accountid),a=this.props.friend.efriendrelationship;switch(r){default:break;case 30:t="Moderator";break;case 40:t="Officer";break;case 50:t="Owner",o.BIsClanChatRoom()||e.push(h.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"+(this.props.friend.is_friend?" isFriend":"")},h.createElement(_.k,null)))}switch(o.BIsClanChatRoom()&&(40<=r?e.push(h.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"},h.createElement("img",{src:I.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_officer.png"}))):30<=r&&e.push(h.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"},h.createElement("img",{src:I.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_moderator.png"})))),a){case 3:case 6:e.push(h.createElement("div",{key:"friendIcon",className:"chatMemberFriendIcon"},h.createElement(_.s,null)));break;case 2:e.push(h.createElement("div",{key:"friendIcon",className:"chatMemberFriendIcon"},h.createElement(_.s,{bPending:!0})))}o.GetMemberPartyBeacon(this.props.friend.accountid)&&e.push(h.createElement("div",{key:"playIcon",className:"chatMemberPartyBeaconIcon"},h.createElement(_.O,null)));var s={friend:this.props.friend,context:this.props.context,className:t,action:this.OnFriendSelected,bHideGameName:this.props.bHideGameName};return i?h.createElement(y.c,Object(d.a)({},s,{listStatusIndicatorLeft:e})):h.createElement(y.d,Object(d.a)({},s),e)},Object(d.c)([S.a],e.prototype,"OnFriendSelected",null),e=Object(d.c)([p.a],e)}(h.Component)},"0N1H":function(e,t,n){"use strict";function o(e){return 3==e||6==e}function i(e){return 5==e||6==e}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"o",function(){return s}),n.d(t,"p",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"i",function(){return p}),n.d(t,"n",function(){return u}),n.d(t,"j",function(){return m}),n.d(t,"k",function(){return d}),n.d(t,"m",function(){return h}),n.d(t,"l",function(){return f}),n.d(t,"e",function(){return _}),n.d(t,"g",function(){return g}),n.d(t,"f",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return S});var r,a,s=1,c=4,l=750,p=799,u=7,m=250820,d=330050,h=358510,f=366490,_="18446744073709551615",g=0,b=2147483647;function v(e,t){switch(void 0===t&&(t=""),e){case 0:return"english";case 1:return"german";case 2:return"french";case 3:return"italian";case 4:return"korean";case 5:return"spanish";case 6:return"schinese";case 7:return"tchinese";case 8:return"russian";case 9:return"thai";case 10:return"japanese";case 11:return"portuguese";case 12:return"polish";case 13:return"danish";case 14:return"dutch";case 15:return"finnish";case 16:return"norwegian";case 17:return"swedish";case 18:return"hungarian";case 19:return"czech";case 20:return"romanian";case 21:return"turkish";case 25:return"arabic";case 22:return"brazilian";case 23:return"bulgarian";case 24:return"greek";case 26:return"ukrainian";case 27:return"latam";case 28:return"vietnamese";default:return t}}function S(e,t){switch(void 0===t&&(t=0),e){case"english":return 0;case"german":return 1;case"french":return 2;case"italian":return 3;case"korean":case"koreana":return 4;case"spanish":return 5;case"schinese":return 6;case"tchinese":return 7;case"russian":return 8;case"thai":return 9;case"japanese":return 10;case"portuguese":return 11;case"polish":return 12;case"danish":return 13;case"dutch":return 14;case"finnish":return 15;case"norwegian":return 16;case"swedish":return 17;case"hungarian":return 18;case"czech":return 19;case"romanian":return 20;case"turkish":return 21;case"arabic":return 25;case"brazilian":return 22;case"bulgarian":return 23;case"greek":return 24;case"ukrainian":return 26;case"latam":return 27;case"vietnamese":return 28;default:return t}}(a=r||(r={}))[a.k_EOtherEvent=1]="k_EOtherEvent",a[a.k_EGameEvent=2]="k_EGameEvent",a[a.k_EPartyEvent=3]="k_EPartyEvent",a[a.k_EMeetingEvent=4]="k_EMeetingEvent",a[a.k_ESpecialCauseEvent=5]="k_ESpecialCauseEvent",a[a.k_EMusicAndArtsEvent=6]="k_EMusicAndArtsEvent",a[a.k_ESportsEvent=7]="k_ESportsEvent",a[a.k_ETripEvent=8]="k_ETripEvent",a[a.k_EChatEvent=9]="k_EChatEvent",a[a.k_EGameReleaseEvent=10]="k_EGameReleaseEvent",a[a.k_EBroadcastEvent=11]="k_EBroadcastEvent",a[a.k_ESmallUpdateEvent=12]="k_ESmallUpdateEvent",a[a.k_ERegularUpdateEvent=13]="k_ERegularUpdateEvent",a[a.k_EMajorUpdateEvent=14]="k_EMajorUpdateEvent",a[a.k_EFutureReleaseEvent=16]="k_EFutureReleaseEvent",a[a.k_EESportTournamentStreamEvent=17]="k_EESportTournamentStreamEvent",a[a.k_EDevStreamEvent=18]="k_EDevStreamEvent",a[a.k_EFamousStreamEvent=19]="k_EFamousStreamEvent",a[a.k_EGameSalesEvent=20]="k_EGameSalesEvent",a[a.k_EGameItemSalesEvent=21]="k_EGameItemSalesEvent",a[a.k_EInGameBonusXPEvent=22]="k_EInGameBonusXPEvent",a[a.k_EInGameLootEvent=23]="k_EInGameLootEvent",a[a.k_EInGamePerksEvent=24]="k_EInGamePerksEvent",a[a.k_EInGameChallengeEvent=25]="k_EInGameChallengeEvent",a[a.k_EInGameContestEvent=26]="k_EInGameContestEvent",a[a.k_EIRLEvent=27]="k_EIRLEvent",a[a.k_ENewsEvent=28]="k_ENewsEvent",a[a.k_EBetaReleaseEvent=29]="k_EBetaReleaseEvent",a[a.k_EFreeTrial=31]="k_EFreeTrial",a[a.k_ESeasonRelease=32]="k_ESeasonRelease",a[a.k_ECrosspostEvent=34]="k_ECrosspostEvent",a[a.k_EInGameEventGeneral=35]="k_EInGameEventGeneral";var y,C;r.k_EOtherEvent,r.k_EGameEvent,r.k_EPartyEvent,r.k_EMeetingEvent,r.k_ESpecialCauseEvent,r.k_EMusicAndArtsEvent,r.k_ESportsEvent,r.k_ETripEvent,r.k_EChatEvent,r.k_EGameReleaseEvent,r.k_EBroadcastEvent,r.k_ESmallUpdateEvent,r.k_ERegularUpdateEvent,r.k_EMajorUpdateEvent,r.k_EFutureReleaseEvent,r.k_EESportTournamentStreamEvent,r.k_EDevStreamEvent,r.k_EFamousStreamEvent,r.k_EGameSalesEvent,r.k_EGameItemSalesEvent,r.k_EInGameBonusXPEvent,r.k_EInGameLootEvent,r.k_EInGamePerksEvent,r.k_EInGameChallengeEvent,r.k_EInGameContestEvent,r.k_EIRLEvent,r.k_ENewsEvent,r.k_EBetaReleaseEvent,r.k_EFreeTrial,r.k_ESeasonRelease,r.k_ECrosspostEvent,r.k_EInGameEventGeneral;(C=y||(y={}))[C.k_ELaunchSource_None=0]="k_ELaunchSource_None",C[C.k_ELaunchSource_2ftLibraryDetails=100]="k_ELaunchSource_2ftLibraryDetails",C[C.k_ELaunchSource_2ftLibraryListView=101]="k_ELaunchSource_2ftLibraryListView",C[C.k_ELaunchSource_2ftLibraryGrid=103]="k_ELaunchSource_2ftLibraryGrid",C[C.k_ELaunchSource_InstallSubComplete=104]="k_ELaunchSource_InstallSubComplete",C[C.k_ELaunchSource_DownloadsPage=105]="k_ELaunchSource_DownloadsPage",C[C.k_ELaunchSource_RemoteClientStartStreaming=106]="k_ELaunchSource_RemoteClientStartStreaming",C[C.k_ELaunchSource_2ftMiniModeList=107]="k_ELaunchSource_2ftMiniModeList",C[C.k_ELaunchSource_10ft=200]="k_ELaunchSource_10ft",C[C.k_ELaunchSource_DashAppLaunchCmdLine=300]="k_ELaunchSource_DashAppLaunchCmdLine",C[C.k_ELaunchSource_DashGameIdLaunchCmdLine=301]="k_ELaunchSource_DashGameIdLaunchCmdLine",C[C.k_ELaunchSource_RunByGameDir=302]="k_ELaunchSource_RunByGameDir",C[C.k_ELaunchSource_SubCmdRunDashGame=303]="k_ELaunchSource_SubCmdRunDashGame",C[C.k_ELaunchSource_SteamURL_Launch=400]="k_ELaunchSource_SteamURL_Launch",C[C.k_ELaunchSource_SteamURL_Run=401]="k_ELaunchSource_SteamURL_Run",C[C.k_ELaunchSource_SteamURL_JoinLobby=402]="k_ELaunchSource_SteamURL_JoinLobby",C[C.k_ELaunchSource_SteamURL_RunGame=403]="k_ELaunchSource_SteamURL_RunGame",C[C.k_ELaunchSource_SteamURL_RunGameIdOrJumplist=404]="k_ELaunchSource_SteamURL_RunGameIdOrJumplist",C[C.k_ELaunchSource_SteamURL_RunSafe=405]="k_ELaunchSource_SteamURL_RunSafe",C[C.k_ELaunchSource_TrayIcon=500]="k_ELaunchSource_TrayIcon",C[C.k_ELaunchSource_LibraryLeftColumnContextMenu=600]="k_ELaunchSource_LibraryLeftColumnContextMenu",C[C.k_ELaunchSource_LibraryLeftColumnDoubleClick=601]="k_ELaunchSource_LibraryLeftColumnDoubleClick",C[C.k_ELaunchSource_Dota2Launcher=700]="k_ELaunchSource_Dota2Launcher",C[C.k_ELaunchSource_IRunGameEngine=800]="k_ELaunchSource_IRunGameEngine",C[C.k_ELaunchSource_DRMFailureResponse=801]="k_ELaunchSource_DRMFailureResponse",C[C.k_ELaunchSource_DRMDataRequest=802]="k_ELaunchSource_DRMDataRequest",C[C.k_ELaunchSource_CloudFilePanel=803]="k_ELaunchSource_CloudFilePanel",C[C.k_ELaunchSource_DiscoveredAlreadyRunning=804]="k_ELaunchSource_DiscoveredAlreadyRunning",C[C.k_ELaunchSource_GameActionJoinParty=900]="k_ELaunchSource_GameActionJoinParty",C[C.k_ELaunchSource_AppPortraitContextMenu=1e3]="k_ELaunchSource_AppPortraitContextMenu"},"0wLp":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("mrSG"),i=n("q1tI"),r=n("e2SU"),a=n("1VtQ"),s=function(n){function e(e){var t=n.call(this,e)||this;return t.state={maximized:t.BIsMaximized()},t}return Object(o.d)(e,n),e.prototype.BIsMaximized=function(){var e=this.props.popup.screen.availWidth-this.props.popup.innerWidth,t=this.props.popup.screen.availHeight-this.props.popup.innerHeight;return 0===e&&0===t},e.prototype.componentDidMount=function(){this.props.popup.addEventListener("resize",this.UpdateMaximizeState)},e.prototype.componentWillUnmount=function(){this.props.popup.removeEventListener("resize",this.UpdateMaximizeState)},e.prototype.UpdateMaximizeState=function(){var e=this.BIsMaximized();e!=this.state.maximized&&this.setState({maximized:e})},e.prototype.render=function(){var e=this,t=this.props.popup,n="title-area-icon";return this.state.maximized?n+=" restoreButton":n+=" maximizeButton",i.createElement("div",{className:"TitleBar title-area"},i.createElement("div",{className:"title-area-highlight"}),i.createElement("div",{className:"title-area-children"},this.props.children),!this.props.hideActions&&i.createElement("div",{className:"title-bar-actions"},i.createElement("div",{className:"title-area-icon closeButton",onClick:function(){e.props.OnClose&&e.props.OnClose(),t&&t.close()}},i.createElement(r.pb,null)),!this.props.hideMinMax&&i.createElement("div",{className:n,onClick:function(){t.SteamClient.Window.ToggleMaximize()}},this.state.maximized&&i.createElement(r.T,null),!this.state.maximized&&i.createElement(r.F,null)),!this.props.hideMinMax&&i.createElement("div",{className:"title-area-icon minimizeButton",onClick:function(){t.SteamClient.Window.Minimize()}},i.createElement(r.I,null))))},Object(o.c)([a.a],e.prototype,"UpdateMaximizeState",null),e}(i.Component)},"1KZt":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n("mrSG"),i=n("1n9R"),r=n("2vnA"),a=function(){function e(){this.m_bEmoticonListRequested=!1,this.m_bInitialized=!1,this.m_rgEmoticons=[],this.m_rgFlairs=[],this.m_rgRecentEmoticons=void 0}return e.GetEmoticonURL=function(e,t){return t?i.b.COMMUNITY_CDN_URL+"economy/emoticonlarge/"+e:i.b.COMMUNITY_CDN_URL+"economy/emoticon/"+e},e.GetEmoticonReplaceRegex=function(){return e.sm_EmoticonRegex},e.prototype.SearchEmoticons=function(t,l,n){function p(e){return e.name_normalized||e.name}void 0===l&&(l=25),void 0===n&&(n=!0),this.UpdateEmoticonList(),t=t.toLocaleLowerCase();var e=this.recent_emoticons.filter(function(e){return!t||p(e).startsWith(t)}),o=this.recent_emoticons.filter(function(e){return!n&&-1!==p(e).indexOf(t)}),i=this.m_rgEmoticons.filter(function(e){return!t||p(e).startsWith(t)}),r=this.m_rgEmoticons.filter(function(e){return!n&&-1!==p(e).indexOf(t)}),u=new Set,m=[];function a(e,t,n){for(var o=0,i=e;o<i.length;o++){var r=i[o];if(s=t,c=n(a=r),m.length>=l||(u.has(a)||(u.add(a),m.push({name:p(a),recent:s,new:c})),0))break}var a,s,c}return a(e,!0,function(e){return!(e.last_used||!e.time_received)}),a(i,!1,function(){return!1}),a(o,!0,function(e){return!(e.last_used||!e.time_received)}),a(r,!1,function(){return!1}),m},Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!0,configurable:!0}),e.prototype.GetTimeReceivedNewestEmoticon=function(){return this.UpdateEmoticonList(),this.m_rtMostRecentEmoticon},e.prototype.UpdateEmoticonList=function(){this.m_bInitialized||this.RequestEmoticonList()},Object.defineProperty(e.prototype,"emoticon_list",{get:function(){return this.UpdateEmoticonList(),this.m_rgEmoticons},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flair_list",{get:function(){return this.UpdateEmoticonList(),this.m_rgFlairs},enumerable:!0,configurable:!0}),e.prototype.GetFlairListByGroupID=function(t){return this.m_rgFlairs.filter(function(e){return e.flairGroupID===t})},Object.defineProperty(e.prototype,"recent_emoticons",{get:function(){return void 0===this.m_rgRecentEmoticons&&this.BuildRecentEmoticonList(),this.m_rgRecentEmoticons},enumerable:!0,configurable:!0}),e.prototype.TrackEmoticonUsage=function(e,t){if(this.m_bInitialized){for(var n,o=new Map,i=/\[emoticon\]([^[]*)/g;n=i.exec(e);){var r=o.get(n[1])||0;o.set(n[1],r+1)}var a=!1;if(o.size){if(void 0!==this.m_rgRecentEmoticons)for(var s=0,c=this.m_rgRecentEmoticons;s<c.length;s++){var l=c[s];o.has(l.name)&&(l.last_used=t,l.use_count+=o.get(l.name),o.delete(l.name),l.time_received&&(a=!0,delete l.time_received))}if(o.size)for(var p=0,u=this.m_rgEmoticons;p<u.length;p++){l=u[p];o.has(l.name)&&(l.last_used=t,l.use_count+=o.get(l.name),delete l.time_received,void 0!==this.m_rgRecentEmoticons&&this.m_rgRecentEmoticons.push(l))}if(void 0!==this.m_rgRecentEmoticons&&(this.SortRecentEmoticons(),a)){this.m_rtMostRecentEmoticon=void 0;for(var m=0,d=this.m_rgRecentEmoticons;m<d.length;m++){!(l=d[m]).last_used&&l.time_received&&(!this.m_rtMostRecentEmoticon||l.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=l.time_received)}}}}},e.prototype.RequestEmoticonList=function(){!this.m_bEmoticonListRequested&&this.BInitialized()&&(this.m_bEmoticonListRequested=!0,this.RequestEmoticonListInternal())},e.prototype.BuildRecentEmoticonList=function(){this.m_rgRecentEmoticons=[];for(var e=this.GetServerTime()-604800,t=0,n=this.m_rgEmoticons;t<n.length;t++){var o=n[t];(o.last_used||o.time_received&&o.time_received>e)&&this.m_rgRecentEmoticons.push(o)}this.SortRecentEmoticons()},e.prototype.SortRecentEmoticons=function(){this.m_rgRecentEmoticons.sort(function(e,t){return(t.last_used||t.time_received)-(e.last_used||e.time_received)}),this.m_rgRecentEmoticons=this.m_rgRecentEmoticons.slice(0,50)},e.prototype.OnEmoticonListReceived=function(e){this.m_rgFlairs=[],this.m_rgEmoticons=[],this.m_rgRecentEmoticons=void 0,this.m_rtMostRecentEmoticon=void 0;for(var t=this.GetServerTime()-604800,n=0,o=e;n<o.length;n++){var i=o[n],r=i.name;r.startsWith("^")?this.m_rgFlairs.push({name:r.match(new RegExp(/:(.*):/))[1],flairGroupID:r.match(new RegExp(/\^(.*)\^/))[1]}):(!i.last_used&&i.time_received>t?(!this.m_rtMostRecentEmoticon||i.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=i.time_received):delete i.time_received,this.m_rgEmoticons.push(i))}this.m_bInitialized=!0,this.m_bEmoticonListRequested=!1},e.sm_EmoticonRegex=new RegExp("ː([a-zA-Z0-9_\\-]+)ː","g"),Object(o.c)([r.x],e.prototype,"m_bInitialized",void 0),Object(o.c)([r.x],e.prototype,"m_rtMostRecentEmoticon",void 0),Object(o.c)([r.g],e.prototype,"TrackEmoticonUsage",null),e}()},"1VtQ":function(e,t,n){"use strict";function o(e,t,n){return{get:function(){var e=n.value.bind(this);return this.hasOwnProperty(t)||Object.defineProperty(this,t,{value:e}),e}}}function i(e,t,n){return[e,t,n]}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i})},"1n9R":function(e,t,n){"use strict";n("mrSG");var o=n("/7KC");function a(){return!!window.document}n.d(t,"b",function(){return r}),n.d(t,"g",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return h});var i,r={EUNIVERSE:0,WEB_UNIVERSE:"",LANGUAGE:"english",SUPPORTED_LANGUAGES:[],COUNTRY:"",CDN_URL:"",MEDIA_CDN_COMMUNITY_URL:"",MEDIA_CDN_URL:"",COMMUNITY_CDN_URL:"",COMMUNITY_CDN_ASSET_URL:"",STORE_CDN_URL:"",PUBLIC_SHARED_URL:"",COMMUNITY_BASE_URL:"",CHAT_BASE_URL:"",STORE_BASE_URL:"",STORE_ICON_BASE_URL:"",IMG_URL:"",STEAMTV_BASE_URL:"",HELP_BASE_URL:"",PARTNER_BASE_URL:"",IN_CLIENT:!1,USE_POPUPS:!1,IN_MOBILE:!1,IN_TENFOOT:!1,PLATFORM:"",SNR:"",LOCAL_HOSTNAME:"",WEBAPI_BASE_URL:"",TOKEN_URL:"",BUILD_TIMESTAMP:0,PAGE_TIMESTAMP:0,get SESSIONID(){return function(){if(!a())return i||(i=u()),i;var e=function(e){if(!a()||!window.document.cookie)return null;var t=document.cookie.match("(^|; )"+e+"=([^;]*)");return t&&t[2]?decodeURIComponent(t[2]):null}("sessionid");e||(e=u());return e}()},FRIENDSUI_BETA:!1,STEAM_TV:!1,DEV_MODE:!1,OFFLINE_MODE:!1},s={logged_in:!1,steamid:"",accountid:0,account_name:"",token:void 0,token_use_id:void 0,webapi_token:"",authwgtoken:"",is_support:!1,short_url:""},c={steamid:"",clanid:0,listid:0},l={CLANSTEAMID:"",CLANACCOUNTID:0,ANNOUNCEMENT_GID:"",IMG_URL:"",APPID:0,VANITY_ID:"",IS_CREATOR_HOME:!1,HEADER_IMAGE:"",APP_NAME:"",HAS_ADULT_CONTENT:!1,HAS_ADULT_CONTENT_SEX:!1,HAS_ADULT_CONTENT_VIOLENCE:!1},p="webui_config";function u(){var e=function(){for(var e="",t=0;t<24;t++)e+=Object(o.b)(0,35).toString(36);return e}();return function(e,t,n,o){if(a()){o||(o="/");var i="";if(void 0!==n&&n){var r=new Date;r.setTime(r.getTime()+864e5*n),i="; expires="+r.toUTCString()}document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+i+";path="+o}}("sessionid",e,0),e}function m(e){void 0===e&&(e=p);var t=d("config",e);t&&(delete t.SESSIONID,Object.assign(r,t));var n=d("userinfo",e);n&&Object.assign(s,n);var o=d("broadcast",e);o&&Object.assign(c,o);var i=d("community",e);i&&Object.assign(l,i)}function d(e,t){var n;if(void 0===t&&(t=p),n="string"==typeof t?document.getElementById(t):t)try{return n.hasAttribute("data-"+e)?JSON.parse(n.getAttribute("data-"+e)):null}catch(e){console.error("Failed to parse config",e)}else console.error("Missing config element #",t)}function h(){var e=window.location.href;return e.startsWith(r.STORE_BASE_URL)?"store":e.startsWith(r.COMMUNITY_BASE_URL)?"community":e.startsWith(r.PARTNER_BASE_URL)?"partnerweb":e.startsWith(r.HELP_BASE_URL)?"help":e.startsWith(r.STEAMTV_BASE_URL)?"steamtv":""}},"20CD":function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return y});var s=n("mrSG"),a=n("hReu"),c=n("LAqV"),l=n("29iz"),p=n("YZlK"),u=n("y4mg"),o=n("bbBM"),m=n("Hi0u"),d=n("2vnA"),i=n("okNM"),h=n("q1tI"),f=n("ljid"),r=n("e2SU"),_=n("oh5H"),g=n("1VtQ"),b=n("XaMz");function v(e,t,n,o,i){S(e,t,n,o,!1,i)}function S(e,t,n,o,i,r){Object(m.b)(h.createElement(O,{browserContext:e,chatRoomGroup:n,chatRoom:o,bIsDropInvite:i,vecInvitePlayers:r}),t,"ChatRoomGroupInviteDialog",{strTitle:Object(_.c)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:680},Object(a.g)(t))}var y=function(t){function e(e){return t.call(this,e)||this}return Object(s.d)(e,t),e.prototype.componentDidMount=function(){var e=this.props.chat.lastChatLinkInfo;(!e||Date.now()>=e.rtExpires)&&this.GenerateLink(86400)},e.prototype.GenerateLink=function(e){this.props.chat.CreateInviteLink(e)},e.prototype.OnFocus=function(e){e.target.select()},e.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=Object(_.c)("#Chat_Invite_Loading");return this.props.disabled&&(e=void 0,t=""),h.createElement(h.Fragment,null,h.createElement(f.o,{label:Object(_.c)("#Chat_Invite_Linkheader"),className:"InviteFriendToChatDialog_LinkInput",type:"text",value:e?e.strInviteURL:t,readOnly:!0,bShowCopyAction:!!e,onFocus:this.OnFocus,onClick:this.OnFocus}),!this.props.disabled&&h.createElement(C,{onGenerate:this.GenerateLink,chat:this.props.chat}))},Object(s.c)([g.a],e.prototype,"GenerateLink",null),Object(s.c)([g.a],e.prototype,"OnFocus",null),e=Object(s.c)([i.a],e)}(h.Component),C=function(t){function e(e){return t.call(this,e)||this}return Object(s.d)(e,t),e.prototype.OnDropDownChange=function(e,t){this.props.onGenerate(e.data),t.SetSelectedOption(void 0)},e.prototype.CreateExpiresText=function(e){return 0==e?Object(_.c)("#InviteLink_ExpiresNever_Short"):3600<e-c.f.GetServerRTime32()?Object(_.c)("#InviteLink_ExpiresDay_Short"):Object(_.c)("#InviteLink_ExpiresHour_Short")},e.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=[{label:Object(_.c)("#InviteLink_ExpiresHour_Short"),data:3600},{label:Object(_.c)("#InviteLink_ExpiresDay_Short"),data:86400},{label:Object(_.c)("#InviteLink_ExpiresNever_Short"),data:0}];return h.createElement("div",{className:"expireLinkInContainer"},h.createElement(f.p,null,Object(_.c)("#InviteLink_ExpireDropDownLabel")),h.createElement(f.i,{strClassName:"inviteLinkDropDown",rgOptions:t,strDefaultLabel:e?this.CreateExpiresText(e.rtExpires):h.createElement("span",null," "),onChange:this.OnDropDownChange,selectedOption:void 0}))},Object(s.c)([g.a],e.prototype,"OnDropDownChange",null),e=Object(s.c)([i.a],e)}(h.Component),O=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bShowSubmit:e.vecInvitePlayers&&0<e.vecInvitePlayers.length,dropToInviteFriend:void 0,bHaveNonBetaFriendsSelected:!1},t.BuildMemberOfGroupSet(e),t}return Object(s.d)(e,n),e.prototype.componentWillReceiveProps=function(e){e.chatRoomGroup!=this.props.chatRoomGroup&&this.BuildMemberOfGroupSet(e),e.vecInvitePlayers&&0<e.vecInvitePlayers.length&&this.setState({bShowSubmit:!0})},e.prototype.BuildMemberOfGroupSet=function(e){var t=e.chatRoomGroup;this.m_setMembersOfGroup=t.memberList.GetCurrentMemberSet()},e.prototype.DismissDialog=function(){this.props.closeModal()},e.prototype.OnSubmit=function(){if(this.m_friendPicker&&this.m_friendPicker.state.rgFriendsChosen.length)for(var e=0,t=this.m_friendPicker.state.rgFriendsChosen;e<t.length;e++){var n=t[e];this.props.chatRoomGroup.InviteFriend(n.accountid,this.props.chatRoom)}this.props.closeModal()},e.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e,this.OnFriendPickerChange()},e.prototype.OnFriendPickerChange=function(){var e=!1,t=!1;if(this.m_friendPicker){e=0<this.m_friendPicker.selectedFriendCount;for(var n=function(e){if(!1===e.is_in_beta)return t=!0,"break";void 0===e.is_in_beta&&Object(d.E)(function(){return void 0!==e.is_in_beta},o.OnFriendPickerChange)},o=this,i=0,r=this.m_friendPicker.state.rgFriendsChosen;i<r.length;i++){if("break"===n(r[i]))break}}var a=e;a==this.state.bShowSubmit&&t==this.state.bHaveNonBetaFriendsSelected||this.setState({bShowSubmit:a,bHaveNonBetaFriendsSelected:t})},e.prototype.OnDragEnter=function(e,t){if(Object(b.a)(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var n=e;n.friend&&(this.setState({dropToInviteFriend:n.friend}),this.m_friendPicker&&this.m_friendPicker.SelectFriendSuggestion(n.friend))}return!0},e.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&(this.m_friendPicker&&this.m_friendPicker.RemoveFriendFromList(this.state.dropToInviteFriend),this.setState({dropToInviteFriend:void 0}))},e.prototype.OnDrop=function(e,t){if(Object(b.a)(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var n=e;n.friend&&(this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),a.h.DragDropManager.SetDropConsumed(),this.m_friendPicker&&this.m_friendPicker.SelectFriendSuggestion(n.friend))}},e.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},e.prototype.render=function(){var t=this,e=this.props.chatRoomGroup.GetDefaultChatRoom();this.props.chatRoom&&(e=this.props.chatRoom);var n,o=this.props.chatRoomGroup.name,i=null!=this.props.chatRoom,r=new Set([]),a=this.props.chatRoomGroup.BCanInvite();return a?this.props.chatRoom||(r=this.m_setMembersOfGroup):this.props.chatRoom?c.f.FriendStore.all_friends.forEach(function(e){t.props.chatRoomGroup.BHasMember(e.accountid)||r.add(e.accountid)}):Object(b.a)(!1,"User should not be able to invite to the group"),n=this.props.bIsDropInvite?Object(_.c)("#Chat_InviteFriends_DropInvite_Pre"):a?Object(_.c)("#Chat_InviteFriends"):Object(_.c)("#Chat_InviteGroupMembers"),h.createElement(m.a,{onEscKeypress:this.DismissDialog},h.createElement(f.h,{classNameContent:"ChatRoomGroupInviteDialog"+(this.props.bIsDropInvite?" IsDropInvite":""),onSubmit:this.OnSubmit},h.createElement(f.m,null,i?h.createElement("div",null,Object(_.c)("#Chat_Actions_InviteFriend_VoiceChat"),h.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},'"',this.props.chatRoom.name,'"')):Object(_.c)("#Chat_Actions_InviteFriend"),h.createElement("div",{className:"displayRow"},h.createElement(p.a,{group:this.props.chatRoomGroup,small:!0}),h.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},o))),h.createElement(f.b,null,!this.props.bIsDropInvite&&a&&h.createElement(h.Fragment,null,h.createElement("div",{className:"inviteLinkContainer"},h.createElement(y,{chat:e,disabled:!1})),h.createElement("div",{className:"OrSeparator"},h.createElement("div",{className:"HBar"}),h.createElement("div",{className:"OrSeparatorLabel"},Object(_.c)("#Chat_InviteFriends_OR_Separator")),h.createElement("div",{className:"HBar"}))),h.createElement(l.a,Object(s.a)({className:""},this.GetDragDropProps()),h.createElement(f.c,{className:"CreateChat_NonBetaFriendsWarning"+(c.f.IsInBeta()?"":" Released")+(this.state.bHaveNonBetaFriendsSelected?" Active":"")},h.createElement(I,null),Object(_.c)(c.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),h.createElement(u.a,{ref:this.OnFriendPickerRef,label:n,eSort:1,onFriendSelected:this.OnFriendPickerChange,onFriendRemoved:this.OnFriendPickerChange,setExcludedFriends:r,rgSelectedFriends:this.props.vecInvitePlayers,bDropInvite:this.props.bIsDropInvite,chosenFriendComponent:E}))),h.createElement(f.j,null,h.createElement("div",{className:"DialogTwoColLayout _DialogColLayout"},h.createElement(f.x,{disabled:!this.state.bShowSubmit},Object(_.c)("#Chat_Invite")),h.createElement(f.d,{onClick:this.DismissDialog},Object(_.c)("#Button_Close"))))))},Object(s.c)([g.a],e.prototype,"DismissDialog",null),Object(s.c)([g.a],e.prototype,"OnSubmit",null),Object(s.c)([g.a],e.prototype,"OnFriendPickerRef",null),Object(s.c)([g.a],e.prototype,"OnFriendPickerChange",null),Object(s.c)([g.a],e.prototype,"OnDragEnter",null),Object(s.c)([g.a],e.prototype,"OnDragLeave",null),Object(s.c)([g.a],e.prototype,"OnDrop",null),e}(h.PureComponent);function I(){return h.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(_.c)(c.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}var E=Object(i.a)(function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return h.createElement(h.Fragment,null,h.createElement(o.f,{friend:e.friend,context:null},h.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&h.createElement(I,null),h.createElement("span",null,e.friend.display_name),h.createElement(r.pb,null))))})},"29iz":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("mrSG"),i=n("hReu"),r=n("q1tI"),a=n("/IDK"),s=n("1VtQ"),c=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bAcceptDrag=!1,t.m_deferredEnter=null,t.m_divElement=null,t}return Object(o.d)(e,n),e.prototype.BindDiv=function(e){this.m_divElement=e},Object.defineProperty(e.prototype,"div",{get:function(){return this.m_divElement},enumerable:!0,configurable:!0}),e.prototype.DeliverDeferredDragEnter=function(){var e=i.h.DragDropManager.GetDragData();return this.props.fnDragEnter(e,this.m_deferredEnter.bFiles)},e.prototype.OnDragEnter=function(e){if(!this.m_bAcceptDrag){var t=i.h.DragDropManager.GetDragData(),n=this.props.bAcceptsFiles&&-1!=e.dataTransfer.types.indexOf("Files");t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.m_bAcceptDrag=!0:this.m_bAcceptDrag=!!n,this.m_bAcceptDrag&&this.props.fnDragEnter&&(this.m_deferredEnter={bFiles:n}),this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())}},e.prototype.OnDragLeave=function(e){if(this.m_bAcceptDrag){if(!Object(a.c)(e))return;this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation(),this.props.fnDragLeave&&this.props.fnDragLeave()}},e.prototype.OnDragOver=function(e){if(this.m_bAcceptDrag){if(this.m_deferredEnter){var t=this.DeliverDeferredDragEnter();if(this.m_deferredEnter=null,!t)return void(this.m_bAcceptDrag=!1)}e.preventDefault(),e.stopPropagation(),this.props.fnDragOver&&this.props.fnDragOver(e)}},e.prototype.OnDrop=function(e){if(this.m_bAcceptDrag){this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation();var t=i.h.DragDropManager.GetDragData();t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.props.fnDrop&&this.props.fnDrop(t,e):this.props.bAcceptsFiles&&0!=e.dataTransfer.files.length&&this.props.fnDrop&&this.props.fnDrop(null,e)}},e.prototype.render=function(){var e=this.props,t=(e.rgAcceptedTypes,e.bAcceptsFiles,e.fnDragEnter,e.fnDragLeave,e.fnDragOver,e.fnDrop,Object(o.f)(e,["rgAcceptedTypes","bAcceptsFiles","fnDragEnter","fnDragLeave","fnDragOver","fnDrop"]));return r.createElement("div",Object(o.a)({},t,{ref:this.BindDiv,className:"DropTarget "+this.props.className,onDragEnter:this.OnDragEnter,onDragLeave:this.OnDragLeave,onDragOver:this.OnDragOver,onDrop:this.OnDrop}),this.props.children)},Object(o.c)([s.a],e.prototype,"BindDiv",null),Object(o.c)([s.a],e.prototype,"DeliverDeferredDragEnter",null),Object(o.c)([s.a],e.prototype,"OnDragEnter",null),Object(o.c)([s.a],e.prototype,"OnDragLeave",null),Object(o.c)([s.a],e.prototype,"OnDragOver",null),Object(o.c)([s.a],e.prototype,"OnDrop",null),e}(r.PureComponent)},"2sgH":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var p=n("mrSG"),o=n("vDqi"),u=n.n(o),m=n("2vnA"),d=n("1n9R"),h=n("oh5H"),c=n("XaMz"),i=function(){function e(){this.timestamp=0,this.imageWidth=0,this.imageHeight=0,this.eUploadState=0,this.uploadProgress=0}return Object(p.c)([m.x],e.prototype,"file",void 0),Object(p.c)([m.x],e.prototype,"dataURL",void 0),Object(p.c)([m.x],e.prototype,"imageWidth",void 0),Object(p.c)([m.x],e.prototype,"imageHeight",void 0),Object(p.c)([m.x],e.prototype,"eUploadState",void 0),Object(p.c)([m.x],e.prototype,"uploadProgress",void 0),Object(p.c)([m.x],e.prototype,"strErrorDescription",void 0),e}(),r=function(){function e(e){this.m_fileUploadProps=new i,this.m_Callbacks=e}return Object.defineProperty(e.prototype,"file_upload_props",{get:function(){return this.m_fileUploadProps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file_upload_data_url",{get:function(){return this.m_fileUploadProps.dataURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.m_fileUploadProps.file},enumerable:!0,configurable:!0}),e.prototype.LogFileUploadMessage=function(e){this.m_Callbacks.LogFileUploadMessage&&this.m_Callbacks.LogFileUploadMessage(e)},e.prototype.SetUploadFileError=function(e,t){this.m_fileUploadProps.eUploadState=e,this.m_fileUploadProps.strErrorDescription=t,this.m_fileUploadProps.displayFileName=null},e.prototype.SetImageFileToUpload=function(i,r){return void 0===r&&(r=a),Object(p.b)(this,void 0,void 0,function(){var t,n,o;return Object(p.e)(this,function(e){switch(e.label){case 0:return i?10485760<i.size?(this.SetUploadFileError(4,Object(h.c)("#Chat_Settings_Error_ChatFileTooLarge",i.name)),[2]):(t=["jpg","jpeg","png","gif","webm","mpg","mp4","mpeg","ogv"],n=i.name.split(".").pop().toLowerCase(),-1==t.indexOf(n)?(this.SetUploadFileError(5,Object(h.c)("#Chat_Settings_Error_ChatFileTypeNotSupported",i.name)),[2]):[4,r(i)]):(this.SetFileToUpload(null),[2]);case 1:return o=e.sent(),this.SetFileToUpload(o.file),this.m_fileUploadProps.imageHeight=o.height,this.m_fileUploadProps.imageWidth=o.width,[2]}})})},e.prototype.SetFileToUpload=function(e){if(this.m_fileUploadProps.file=e,this.m_fileUploadProps.dataURL=null,this.m_fileUploadProps.hmac=null,this.m_fileUploadProps.sha1=null,this.m_fileUploadProps.imageWidth=0,this.m_fileUploadProps.imageHeight=0,e){this.m_fileUploadProps.eUploadState=1;for(var t="";t.length<40;)t+=Math.floor(16*Math.random()).toString(16);this.m_fileUploadProps.dataURL=URL.createObjectURL(e),this.m_fileUploadProps.displayFileName=e.name,this.m_fileUploadProps.uploadFileName=window.performance.now()+"_"+e.name,this.m_fileUploadProps.sha1=t,this.m_fileUploadProps.hmac="",this.m_fileUploadProps.timestamp=0}else this.m_fileUploadProps.eUploadState=0},e.prototype.RetryFileUpload=function(){return Object(p.b)(this,void 0,void 0,function(){return Object(p.e)(this,function(e){return[2,this.BeginFileUpload(this.m_fileUploadProps.additionalProps)]})})},e.prototype.BeginFileUpload=function(s){return Object(p.b)(this,void 0,void 0,function(){var t,n,o,i,r,a=this;return Object(p.e)(this,function(e){switch(e.label){case 0:if(!(t=this.m_fileUploadProps.file))throw Object(c.a)(!1,"Must SetImageFileToUpload before calling BeginFileUpload"),new Error("Invalid State");this.m_fileUploadProps.eUploadState=2,this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.additionalProps=s,(n=new FormData).append("sessionid",d.b.SESSIONID),n.append("l",d.b.LANGUAGE),n.append("file_size",t.size.toString()),n.append("file_name",this.m_fileUploadProps.uploadFileName),n.append("file_sha",this.m_fileUploadProps.sha1),n.append("file_image_width",this.m_fileUploadProps.imageWidth.toString()),n.append("file_image_height",this.m_fileUploadProps.imageHeight.toString()),n.append("file_type",t.type),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,u.a.post(this.m_Callbacks.GetBeginFileUploadURL(),n,{params:{l:d.b.LANGUAGE}})];case 2:return o=e.sent(),this.m_fileUploadProps.timestamp=o.data.timestamp,this.m_fileUploadProps.hmac=o.data.hmac,[2,this.DoFileUpload(o.data.result)];case 3:throw i=e.sent(),r=null,Object(m.A)(function(){if(a.m_fileUploadProps.eUploadState=3,a.LogFileUploadMessage(i.response),i.response){var e=i.response.data;i.response.status,e&&e.success;r=e.message?e.message:Object(h.c)("#Chat_Settings_Error_ServerError")}else r=Object(h.c)("#ConnectionTrouble_FailedToConnect");a.m_fileUploadProps.strErrorDescription=Object(h.c)("#Chat_Upload_ErrorStart",r)}),r;case 4:return[2]}})})},e.prototype.DoFileUpload=function(c){return Object(p.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s=this;return Object(p.e)(this,function(e){switch(e.label){case 0:for(t=this.m_fileUploadProps.file,n=c.use_https?"https://":"http://",n+=c.url_host+c.url_path,o={onUploadProgress:function(e){var t=e.loaded/e.total*100;Object(m.A)(function(){s.m_fileUploadProps.uploadProgress=t})},headers:{},transformRequest:[function(e){return e}]},i=0;i<c.request_headers.length;++i)"Content-Length"!=(r=c.request_headers[i]).name&&"Host"!=r.name&&(o.headers[r.name]=r.value);e.label=1;case 1:return e.trys.push([1,3,,4]),[4,u.a.put(n,t,o)];case 2:return e.sent(),[2,this.CommitFileUpload(!0,c.ugcid)];case 3:throw a=e.sent(),this.LogFileUploadMessage(a.response),Object(m.A)(function(){s.m_fileUploadProps.strErrorDescription=Object(h.c)("#Chat_Upload_ErrorCloud"),s.m_fileUploadProps.eUploadState=3,s.m_fileUploadProps.uploadProgress=0}),this.CommitFileUpload(!1,c.ugcid),this.m_fileUploadProps.strErrorDescription;case 4:return[2]}})})},e.prototype.CommitFileUpload=function(c,l){return Object(p.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s=this;return Object(p.e)(this,function(e){switch(e.label){case 0:t=this.m_fileUploadProps.file,n=this.m_fileUploadProps.sha1,(o=new FormData).append("sessionid",d.b.SESSIONID),o.append("l",d.b.LANGUAGE),o.append("file_name",this.m_fileUploadProps.uploadFileName),o.append("file_sha",n),o.append("success",c?"1":"0"),o.append("ugcid",l),o.append("file_type",t.type),o.append("file_image_width",this.m_fileUploadProps.imageWidth.toString()),o.append("file_image_height",this.m_fileUploadProps.imageHeight.toString()),o.append("timestamp",this.m_fileUploadProps.timestamp.toString()),o.append("hmac",this.m_fileUploadProps.hmac),this.m_Callbacks.PopulateCommitFileUploadFormData(o,this.file_upload_props.additionalProps),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,u.a.post(this.m_Callbacks.GetCommitFileUploadURL(),o)];case 2:return i=e.sent(),this.m_fileUploadProps.eUploadState=c?(this.m_fileUploadProps.uploadProgress=0,6):3,[2,i];case 3:if(r=e.sent(),!c)return[2,null];throw a=null,Object(m.A)(function(){if(s.LogFileUploadMessage(r),s.m_fileUploadProps.uploadProgress=0,s.m_fileUploadProps.eUploadState=3,r.response){var e=r.response.data;r.response.status,e&&e.success;a=e.message?e.message:Object(h.c)("#Chat_Settings_Error_ServerError")}else a=Object(h.c)("#ConnectionTrouble_FailedToConnect");s.m_fileUploadProps.strErrorDescription="Failed to commit upload: "+a}),a;case 4:return[2]}})})},e.prototype.ClearFileUploadError=function(){3!=this.m_fileUploadProps.eUploadState&&4!=this.m_fileUploadProps.eUploadState&&5!=this.m_fileUploadProps.eUploadState||this.Reset()},e.prototype.Reset=function(){this.SetFileToUpload(null)},Object(p.c)([m.g],e.prototype,"SetUploadFileError",null),Object(p.c)([m.g],e.prototype,"SetImageFileToUpload",null),Object(p.c)([m.g],e.prototype,"SetFileToUpload",null),Object(p.c)([m.g],e.prototype,"RetryFileUpload",null),Object(p.c)([m.g],e.prototype,"BeginFileUpload",null),Object(p.c)([m.g],e.prototype,"DoFileUpload",null),Object(p.c)([m.g],e.prototype,"CommitFileUpload",null),Object(p.c)([m.g],e.prototype,"ClearFileUploadError",null),Object(p.c)([m.g],e.prototype,"Reset",null),e}();function a(s){return new Promise(function(r){var a=new FileReader;a.onload=function(){var t=s,e=function(n){var e=new DataView(n),t=0,o=0,i=[],r=0;if(65496!=e.getUint16(t))return n;t+=2;var a=e.getUint16(t);t+=2;for(;t<e.byteLength&&t<131072;){if(65505==a)i[r]={recess:o,offset:t-2},o=t+e.getUint16(t),r++;else if(65498==a)break;t+=e.getUint16(t),a=e.getUint16(t),t+=2}var s=n.byteLength-o;if(i.forEach(function(e){s+=e.offset-e.recess}),s===n.byteLength)return n;var c=new Uint8Array(s);if(0<i.length){var l=0;i.forEach(function(e){var t=e.offset-e.recess;c.set(new Uint8Array(n.slice(e.recess,e.offset)),l),l+=t}),c.set(new Uint8Array(n.slice(o)),l)}return c.buffer}(a.result),n=new Blob([e],{type:s.type});if(n){var o=n;o.lastModifiedDate=new Date(s.lastModified),o.name=s.name,t=o}if(0==s.type.indexOf("image")){var i=new Image;i.src=URL.createObjectURL(s),i.onload=function(e){r({file:t,width:i.width,height:i.height})}}else r({file:t,width:0,height:0})},a.readAsArrayBuffer(s)})}},"2wX0":function(e,t,n){e.exports={PartnerEventFont:"partnereventshared_PartnerEventFont_guiIY",BetaContainer:"partnereventshared_BetaContainer_2yDhg",EventBetaTextTitle:"partnereventshared_EventBetaTextTitle_3NjnO",Clear:"partnereventshared_Clear_3n3_O",Divider:"partnereventshared_Divider_26Tlx",EventDefaultRowContainer:"partnereventshared_EventDefaultRowContainer_3Q8Dr",EventStartPublic:"partnereventshared_EventStartPublic_3oV6b",EventOptions:"partnereventshared_EventOptions_2vHY_",FlexColumnContainer:"partnereventshared_FlexColumnContainer_1IIW_",FlexRowContainer:"partnereventshared_FlexRowContainer_34oey",FlexContainSpaceBetween:"partnereventshared_FlexContainSpaceBetween_2yJdN",FlexRowWrapSpaceBetweenContainer:"partnereventshared_FlexRowWrapSpaceBetweenContainer_12nJm",Button:"partnereventshared_Button_vHRhC",FlexRowWrapFlexStartContainer:"partnereventshared_FlexRowWrapFlexStartContainer_1t48T",SaveBackground:"partnereventshared_SaveBackground_1GJS5",LangaugeWithContent:"partnereventshared_LangaugeWithContent_sidWp",InputBorder:"partnereventshared_InputBorder_2XVMj",RadioOption:"partnereventshared_RadioOption_dMFpL",EventEditorTextTitleCtn:"partnereventshared_EventEditorTextTitleCtn_2qs1W",doclink:"partnereventshared_doclink_vnuV8",EventEditorUnpaddedTextTitle:"partnereventshared_EventEditorUnpaddedTextTitle_3zuPV",EventEditorTextTitle:"partnereventshared_EventEditorTextTitle_4u8AK",EventEditorTextTitleLengthInfo:"partnereventshared_EventEditorTextTitleLengthInfo_3uNCx",EventSectionTitleCtn:"partnereventshared_EventSectionTitleCtn_ozwVb",EventSectionTitle:"partnereventshared_EventSectionTitle_KEXXa",EventSectionSpacer:"partnereventshared_EventSectionSpacer_5FbJa",EventSectionMoreBtn:"partnereventshared_EventSectionMoreBtn_2hdIF",EventEditorSpacerPadding:"partnereventshared_EventEditorSpacerPadding_2trt_",EventEditorVisibilityCtn:"partnereventshared_EventEditorVisibilityCtn_1dC8o",EventEditorTextSubTitle:"partnereventshared_EventEditorTextSubTitle_1HRiS",FloatingTitle:"partnereventshared_FloatingTitle_3TKtJ",EventEditorEventStatus:"partnereventshared_EventEditorEventStatus_1H_x_",EventHidden:"partnereventshared_EventHidden_33eoA",EventVisible:"partnereventshared_EventVisible_9OA0F",EventBarTitleCtn:"partnereventshared_EventBarTitleCtn_1rO-6",EventBarTitle:"partnereventshared_EventBarTitle_2iysK",EventBarBack:"partnereventshared_EventBarBack_1Xr6O",EditPreviewButton:"partnereventshared_EditPreviewButton_2PEIa",BrowseMoreButton:"partnereventshared_BrowseMoreButton_QTrhr",Icon:"partnereventshared_Icon_fCQJR",Primary:"partnereventshared_Primary_3uuII",ClearThings:"partnereventshared_ClearThings_1p6-J",OnIndicator:"partnereventshared_OnIndicator_lPo-r",OffIndicator:"partnereventshared_OffIndicator_U53TH",IconImage:"partnereventshared_IconImage_1iap9",RightColumnContainer:"partnereventshared_RightColumnContainer_3ofiw",EventPublishButton:"partnereventshared_EventPublishButton_U0o0u",FloatRight:"partnereventshared_FloatRight_3qSeX",TTip:"partnereventshared_TTip_3E9wx",ValveSupportOnly:"partnereventshared_ValveSupportOnly_2hj7U",ArtworkAgeNotAppropriate:"partnereventshared_ArtworkAgeNotAppropriate_-1se4",EventDashboardHeader:"partnereventshared_EventDashboardHeader_2lb6f",ContainerSpaceBetween:"partnereventshared_ContainerSpaceBetween_3T0Pr",EventDashboardTitles:"partnereventshared_EventDashboardTitles_3XWe3",EventDashboardActions:"partnereventshared_EventDashboardActions_2i1-P",EventDashboardStatsCtn:"partnereventshared_EventDashboardStatsCtn_iDETf",EventDashboardAppCtn:"partnereventshared_EventDashboardAppCtn_iUAoi",maintitle:"partnereventshared_maintitle_21WFS",AppTitle:"partnereventshared_AppTitle_3-UCH",subtitle:"partnereventshared_subtitle_2psnk",ValveOnlyBackground:"partnereventshared_ValveOnlyBackground_3HNFH",Columns:"partnereventshared_Columns_3F7nd",LeftCol:"partnereventshared_LeftCol_jRpF9",RightCol:"partnereventshared_RightCol_1Rsr2",DropDownScroll:"partnereventshared_DropDownScroll_22e7r",CloseButton:"partnereventshared_CloseButton_1sshi",HalfColumn:"partnereventshared_HalfColumn_iCcAr",ThemedCtn:"partnereventshared_ThemedCtn_2jzrF",Halloween:"partnereventshared_Halloween_juiix",tooltip_Ctn:"partnereventshared_tooltip_Ctn_1JlN_",SaleSectionHeader:"partnereventshared_SaleSectionHeader_tYyZc"}},"3/mw":function(e,t,n){e.exports={mentionDialogPosition:"suggestdialog_mentionDialogPosition_3I0f3",mentionDialog:"suggestdialog_mentionDialog_2hRnz",mentionSearchText:"suggestdialog_mentionSearchText_26-gv",suggestOption:"suggestdialog_suggestOption_t54xp",nickname:"suggestdialog_nickname_NtV85",selected:"suggestdialog_selected_e-sy7",mentionSearchMatch:"suggestdialog_mentionSearchMatch_m3oS2"}},"3zHc":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return p});var o=n("mrSG"),i=n("UqDm"),r=n("2vnA"),a=n("oh5H"),s=n("LAqV"),c=function(){function e(){}return e.prototype.OnTabActivate=function(){this.m_msLastActive=performance.now(),this.InternalOnTabActivate()},e.prototype.GetTimeLastActivate=function(){return this.m_msLastActive||0},e.prototype.IsChatRoom=function(){return!1},e.prototype.IsFriendChat=function(){return!1},e}(),l=0,p=function(){function e(e){this.m_vecTabs=r.x.array(null,{deep:!1}),this.m_id=l++,this.m_browserContext=e}return e.prototype.GetBrowserContext=function(){return this.m_browserContext},e.prototype.GetTitle=function(){return this.m_activeTab?2==this.tabCount?Object(a.c)("#WindowTitle_ChatTabTitle",this.m_activeTab.GetTabName()):2<this.tabCount?Object(a.c)("#WindowTitle_ChatTabTitlePlural",this.m_activeTab.GetTabName(),this.tabCount-1):this.m_activeTab.GetTabName():""},e.prototype.OnWindowFocus=function(){this.m_activeTab&&this.m_activeTab.OnTabFocus()},Object.defineProperty(e.prototype,"tabs",{get:function(){return this.m_vecTabs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabCount",{get:function(){return this.m_vecTabs.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTab",{get:function(){return this.m_activeTab},enumerable:!0,configurable:!0}),e.prototype.GetTabSetIdentifier=function(){return this.m_vecTabs.map(function(e){return e.GetUniqueID()}).join("_")},e.prototype.GetTabForChat=function(e){for(var t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];if(o.IsTabForChat(e))return o}return null},e.prototype.GetTabByUniqueID=function(e){for(var t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];if(o.GetUniqueID()==e)return o}return null},e.prototype.BHasTab=function(e){return-1!==this.m_vecTabs.indexOf(e)},e.prototype.AddTab=function(e){-1==this.m_vecTabs.indexOf(e)&&(this.m_vecTabs.push(e),!this.m_activeTab&&0<this.m_vecTabs.length&&(this.m_activeTab=this.m_vecTabs[0]))},e.prototype.ActivateTab=function(e){-1!=this.m_vecTabs.indexOf(e)?(this.activeTab&&this.activeTab!=e&&this.activeTab.OnTabDeactivate(),(this.m_activeTab=e).OnTabActivate(),this.Focus()):console.log("Tab not found")},e.prototype.ActivateNextTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.ActivatePreviousTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+this.m_vecTabs.length-1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.DeactivateTab=function(e){-1!==this.m_vecTabs.indexOf(e)?this.activeTab&&this.activeTab===e&&(e.OnTabDeactivate(),this.m_activeTab=void 0):console.log("Tab not found")},e.prototype.RemoveTab=function(e){var t=this.m_vecTabs.indexOf(e);if(-1==t)return!1;var n=e&&e==this.m_activeTab;if(this.m_vecTabs.splice(t,1),n)if(this.m_vecTabs.length){for(var o=void 0,i=0,r=this.m_vecTabs;i<r.length;i++){var a=r[i];(!o||a.GetTimeLastActivate()>o.GetTimeLastActivate())&&(o=a)}this.m_activeTab=o||this.m_vecTabs[Math.max(t-1,0)]}else this.m_activeTab=void 0;return 0==this.m_vecTabs.length&&s.f.UIStore.CloseTabSet(this),!0},e.prototype.MoveTabAfter=function(e,t){var n=this.m_vecTabs.indexOf(t);-1!=n&&this.MoveTabToIndex(e,n+1)},e.prototype.MoveTabToIndex=function(e,t){var n=this.m_vecTabs.indexOf(e);-1!=n&&i.e(this.m_vecTabs,n,Math.min(t,this.m_vecTabs.length-1))},e.prototype.Focus=function(){s.f.UIStore.FocusTabSet(this)},e.prototype.OnPopupClosed=function(e){e&&s.f.UIStore.SetSuppressBrowserContextBroadcasting(!0),s.f.UIStore.OnTabSetClosed(this),this.CloseAllTabs(),e&&s.f.UIStore.SetSuppressBrowserContextBroadcasting(!1)},e.prototype.CloseAllTabs=function(){this.m_activeTab=void 0;for(var e=0,t=this.m_vecTabs;e<t.length;e++){var n=t[e];s.f.UIStore.CloseTab(this.m_browserContext,n,!0)}this.m_vecTabs.clear()},Object.defineProperty(e.prototype,"is_popup_active",{get:function(){return s.f.UIStore.BIsTabSetActive(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_visible",{get:function(){return s.f.UIStore.BIsTabSetVisible(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_focused",{get:function(){return s.f.UIStore.BIsTabSetFocused(this)},enumerable:!0,configurable:!0}),e.prototype.Serialize=function(){for(var e=[],t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];o.GetUniqueID().startsWith("br")||e.push(o.GetUniqueID())}return{tabs:e,active_tab:this.activeTab&&this.activeTab.GetUniqueID()}},Object(o.c)([r.x],e.prototype,"m_id",void 0),Object(o.c)([r.x],e.prototype,"m_activeTab",void 0),Object(o.c)([r.g],e.prototype,"AddTab",null),Object(o.c)([r.g],e.prototype,"ActivateTab",null),Object(o.c)([r.g],e.prototype,"ActivateNextTab",null),Object(o.c)([r.g],e.prototype,"ActivatePreviousTab",null),Object(o.c)([r.g],e.prototype,"DeactivateTab",null),Object(o.c)([r.g],e.prototype,"RemoveTab",null),Object(o.c)([r.g],e.prototype,"OnPopupClosed",null),Object(o.c)([r.g],e.prototype,"CloseAllTabs",null),e}()},"4HGb":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var o=n("mrSG"),r=n("Kqva"),a=n("hRO2"),s=(n("qeMu"),n("/511")),i=(n("s+DT"),function(){function t(e,t,n,o,i){if(o)this.m_eMsg=o.m_eMsg,this.m_bValid=o.m_bValid,this.m_bValid&&(this.m_netPacket=o.m_netPacket,this.m_cubHeader=o.m_cubHeader,this.m_header=o.m_header,this.InitForType(n));else{if(this.m_header=new s.f(null),this.m_bValid=!0,t)if(this.m_netPacket=t,this.m_netPacket.SeekGetHead(),this.m_eMsg=this.m_netPacket.GetUint32(),2147483648&this.m_eMsg){this.m_eMsg=2147483647&this.m_eMsg,this.m_cubHeader=this.m_netPacket.GetUint32();try{s.f.deserializeBinaryFromReader(this.m_header,new a.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_cubHeader)),this.m_netPacket.SeekGetCurrent(this.m_cubHeader),n&&this.InitForType(n)}catch(e){console.error("Exception deserializing protobuf",e),this.m_bValid=!1}}else this.m_bValid=!1;else e&&(this.m_eMsg=e),n&&(this.m_body=new n);i&&this.m_header.set_jobid_target(i.Hdr().jobid_target())}}return t.InitHeaderFromPacket=function(e){return new t(void 0,e)},t.prototype.InitForType=function(e){if(this.m_body=new e,this.m_netPacket){this.m_netPacket.SeekGetHead(8+this.m_cubHeader);try{e.deserializeBinaryFromReader(this.m_body,new a.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_netPacket.GetCountBytesRemaining()))}catch(e){this.m_bValid=!1,console.error("Exception parsing protobuf message body.  Definitions may be out of sync with server version."),console.log(e.stack||e)}}},t.prototype.BIsValid=function(){return this.m_bValid},t.prototype.Body=function(){return this.m_body},t.prototype.SetBodyJSON=function(e){e.toObject=function(){return e},this.m_body=e},t.prototype.Hdr=function(){return this.m_header},t.prototype.GetEMsg=function(){return this.m_eMsg},t.prototype.SetEMsg=function(e){this.m_eMsg=e},t.prototype.GetEResult=function(){return this.Hdr().eresult()},t.prototype.Serialize=function(){var e=this.m_header.serializeBinary(),t=this.m_body.serializeBinary(),n=2147483648|this.m_eMsg,o=new Uint8Array(8+e.length+t.length),i=new r.b(o);return i.PutUint32(n),i.PutUint32(e.length),i.PutBytes(e),i.PutBytes(t),o},t.prototype.SerializeBody=function(){var e=this.m_body.serializeBinary(),t=new Uint8Array(e.length);return new r.b(t).PutBytes(e),t},t.prototype.DEBUG_ToObject=function(){return{}},t.prototype.DEBUG_LogToConsole=function(){},t}()),c=function(i){function n(e,t,n,o){return void 0===t&&(t=0),i.call(this,t,n,e,o)||this}return Object(o.d)(n,i),n.InitFromPacket=function(e,t){return new n(e,0,t)},n.InitFromMsg=function(e,t){return new n(e,void 0,void 0,t)},n.Init=function(e,t){return new n(e,t)},n.prototype.Body=function(){return i.prototype.Body.call(this)},n.prototype.SetBodyFields=function(e){var n=this,t=function(t){Array.isArray(e[t])?o.Body()["add_"+t]&&e[t].forEach(function(e){n.Body()["add_"+t](e)}):o.Body()["set_"+t]&&o.Body()["set_"+t](e[t])},o=this;for(var i in e)t(i)},n}(i)},"5FJe":function(e,t,n){"use strict";n.d(t,"d",function(){return g}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return G});var l,o,i=n("mrSG"),r=n("UqDm"),u=n("4HGb"),m=n("s+DT"),d=n("R/D/"),a=n("3Liw"),s=n("LAqV"),h=n("2vnA"),c=n("oh5H"),p=n("+M9t"),f=n("HxRt"),_=n("XCHq"),g=-6;(o=l||(l={}))[o.eOnlineOnly=0]="eOnlineOnly",o[o.eOnlineOnlyNotInGame=1]="eOnlineOnlyNotInGame",o[o.eOfflineOnly=2]="eOfflineOnly",o[o.eIncomingInvites=3]="eIncomingInvites",o[o.eAll=4]="eAll";var b=function(){function e(e){this.m_eDisplayType=l.eAll,this.m_strName="",this.m_bCollapsed=!1,this.m_OnHeaderClick=void 0,this.m_rgAccountIDMembers=h.x.array(),this.m_setMembers=new Set,this.m_strName=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},set:function(e){this.m_strName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display_type",{get:function(){return this.m_eDisplayType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onheaderclick",{get:function(){return this.m_OnHeaderClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this.m_bCollapsed},set:function(e){this.m_bCollapsed=e},enumerable:!0,configurable:!0}),e.prototype.GetCurrentMemberSet=function(){return this.m_setMembers},Object.defineProperty(e.prototype,"member_count",{get:function(){return this.display_type==l.eAll?this.unfiltered_count:this.member_list.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.member_accountid_list.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,n=0,o=this.member_list_unsorted;n<o.length;n++){var i=o[n];i.persona.is_online&&(e++,i.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!0,configurable:!0}),e.prototype.SetOnHeaderClick=function(e){this.m_OnHeaderClick=e},e.prototype.Clear=function(){this.m_rgAccountIDMembers.clear(),this.m_setMembers.clear()},e.prototype.AddMember=function(e){this.HasMember(e)||(this.m_setMembers.add(e),this.m_rgAccountIDMembers.push(e))},e.prototype.RemoveMember=function(e){this.HasMember(e)&&(this.m_setMembers.delete(e),r.c(this.m_rgAccountIDMembers,e))},e.prototype.HasMember=function(e){return this.m_setMembers.has(e)},Object.defineProperty(e.prototype,"GetRawMemberList",{get:function(){return this.m_rgAccountIDMembers.map(function(e){return s.f.FriendStore.GetPlayer(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(p.b.DefaultFriendSortComparator),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){for(var e=[],t=0,n=this.GetRawMemberList;t<n.length;t++){var o=n[t];if((this.display_type!=l.eOnlineOnly||o.persona.is_online)&&(this.display_type!=l.eOfflineOnly||!o.persona.is_online)){if(this.display_type==l.eOnlineOnlyNotInGame){if(!o.persona.is_online||o.persona.is_ingame)continue;if(o.persona.m_broadcastAppId&&o.persona.m_broadcastAppId==_.b.appID)continue}e.push(o)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_accountid_list",{get:function(){return this.m_rgAccountIDMembers},enumerable:!0,configurable:!0}),Object(i.c)([h.x],e.prototype,"m_strName",void 0),Object(i.c)([h.x],e.prototype,"m_bCollapsed",void 0),Object(i.c)([h.i],e.prototype,"member_count",null),Object(i.c)([h.i],e.prototype,"unfiltered_count",null),Object(i.c)([h.i],e.prototype,"member_counts",null),Object(i.c)([h.g],e.prototype,"SetOnHeaderClick",null),Object(i.c)([h.g],e.prototype,"Clear",null),Object(i.c)([h.g],e.prototype,"AddMember",null),Object(i.c)([h.g],e.prototype,"RemoveMember",null),Object(i.c)([h.i],e.prototype,"member_list",null),Object(i.c)([h.i],e.prototype,"member_list_unsorted",null),e}(),v=function(r){function e(e,t,n,o){void 0===t&&(t=-1),void 0===n&&(n=!1),void 0===o&&(o=!1);var i=r.call(this,e)||this;return i.m_bModifiable=!1,i.m_bAcceptsGroupRemovals=!1,i.m_iGroupID=t,i.m_bModifiable=n,i.m_bAcceptsGroupRemovals=o,i}return Object(i.d)(e,r),Object.defineProperty(e.prototype,"id",{get:function(){return this.m_iGroupID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return""+this.m_iGroupID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modifiable",{get:function(){return this.m_bModifiable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accepts_group_removals",{get:function(){return this.m_bAcceptsGroupRemovals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"should_filter_categorized_friends",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GetRawMemberList",{get:function(){return this.member_accountid_list.map(function(e){return s.f.FriendStore.GetPlayer(e)})},enumerable:!0,configurable:!0}),e.prototype.GetMembersMatchingSearch=function(e){for(var t=[],n=0,o=this.GetRawMemberList;n<o.length;n++){var i=o[n];i.BMatchesSearchString(e,!1)&&t.push(i)}return t.sort(p.b.DefaultFriendSortComparator),t},Object(i.c)([h.i],e.prototype,"GetRawMemberList",null),e}(b),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"display_type",{get:function(){return s.f.SettingsStore.FriendsSettings.bHideOfflineFriendsInTagGroups?l.eOnlineOnly:l.eAll},enumerable:!0,configurable:!0}),t}(v),y=function(o){function e(e,t){var n=o.call(this,e,t,!1,!0)||this;return n.m_eDisplayType=l.eOnlineOnlyNotInGame,n}return Object(i.d)(e,o),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"all"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display_type",{get:function(){return s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame?l.eOnlineOnlyNotInGame:l.eOnlineOnly},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"should_filter_categorized_friends",{get:function(){return s.f.SettingsStore.FriendsSettings.bHideCategorizedFriends},enumerable:!0,configurable:!0}),e}(v),C=function(n){function e(e,t){return n.call(this,e,t,!1,!0)||this}return Object(i.d)(e,n),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"offline"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"should_filter_categorized_friends",{get:function(){var e=s.f.SettingsStore.FriendsSettings;return e.bHideCategorizedFriends&&!e.bHideOfflineFriendsInTagGroups},enumerable:!0,configurable:!0}),e}(v),O=function(n){function e(e,t){return n.call(this,e,t,!1,!0)||this}return Object(i.d)(e,n),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"outgoing"},enumerable:!0,configurable:!0}),e}(v),I=function(n){function e(e,t){return n.call(this,e,t,!1,!0)||this}return Object(i.d)(e,n),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"ingame"},enumerable:!0,configurable:!0}),e}(v),E=function(o){function e(e,t){var n=o.call(this,e,t,!1,!0)||this;return n.m_mapSteamIDToMutualFriends=h.x.map(),n.m_unMutualFriendsCacheHash=0,n.m_eDisplayType=l.eIncomingInvites,n}return Object(i.d)(e,o),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"incominginvites"},enumerable:!0,configurable:!0}),e.prototype.GetMutualFriendsCacheHash=function(){return this.m_unMutualFriendsCacheHash},e.prototype.SetMutualFriendsCacheHash=function(e){this.m_unMutualFriendsCacheHash=e},e.prototype.SetMutualFriends=function(e){this.m_mapSteamIDToMutualFriends.replace(e)},Object.defineProperty(e.prototype,"map_steamid_to_mutual_friends",{get:function(){return this.m_mapSteamIDToMutualFriends},enumerable:!0,configurable:!0}),e}(v),w=function(t){function e(e){return t.call(this,"",e,!1,!1)||this}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"is_initialized",{get:function(){return 0!=this.id&&s.f.AppInfoStore.GetAppInfo(this.id).is_initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"game_"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return!this.is_initialized||this.id<0?"":s.f.AppInfoStore.GetAppInfo(this.id).name},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return!this.is_initialized||this.id<0?"":s.f.AppInfoStore.GetAppInfo(this.id).icon_url},enumerable:!0,configurable:!0}),e.prototype.PlayerGroupSortComparator=function(e,t,n,o){var i=e.persona.player_group,r=t.persona.player_group,a=i?Math.max(e.persona.player_group_size,n.get(i)||1):1,s=r?Math.max(t.persona.player_group_size,n.get(r)||1):1;return a!=s?s-a:1<a&&i!=r?i.localeCompare(r):o(e,t)},Object.defineProperty(e.prototype,"member_list",{get:function(){for(var n=this,e=[],o=new Map,t=0,i=this.GetRawMemberList;t<i.length;t++){var r=i[t];if(e.push(r),r.persona.player_group){var a=o.get(r.persona.player_group);o.set(r.persona.player_group,a?a+1:1)}}var s=p.b.DefaultFriendSortComparator;return 0==this.id?e.sort(s):e.sort(function(e,t){return n.PlayerGroupSortComparator(e,t,o,s)}),e},enumerable:!0,configurable:!0}),Object(i.c)([h.i],e.prototype,"member_list",null),e}(v),M={groups:{offline:!0,outgoing:!0}},D="FriendGroupCollapse",T=function(){function e(){this.m_mapCollapsePrefs=h.x.map()}return e.prototype.Init=function(){var n=this;s.f.SettingsStore.GetObjectFromLocalStorageWhenReady(D,M).then(function(e){for(var t in n.m_mapCollapsePrefs.clear(),e.groups)n.m_mapCollapsePrefs.set(t,e.groups[t])})},e.prototype.GetUserGroupCollapsed=function(e){return!!this.m_mapCollapsePrefs.get(e)},e.prototype.SetUserGroupCollapsed=function(e,t){!!this.m_mapCollapsePrefs.get(e)!=t&&(t||M.groups[e]?this.m_mapCollapsePrefs.set(e,t):this.m_mapCollapsePrefs.delete(e),this.WritePrefs())},e.prototype.ToggleUserGroupCollapsed=function(e){this.SetUserGroupCollapsed(e,!this.GetUserGroupCollapsed(e))},e.prototype.WritePrefs=function(){s.f.SettingsStore.StoreObjectInLocalStorage(D,{groups:this.m_mapCollapsePrefs.toJSON()})},Object(i.c)([h.g],e.prototype,"SetUserGroupCollapsed",null),Object(i.c)([h.g],e.prototype,"ToggleUserGroupCollapsed",null),e}(),G=function(){function e(e){this.m_FriendGroupDisplayPrefs=new T,this.m_mapGroups=h.x.map(),this.m_mapGameGroups=h.x.map(),this.m_singletonGameGroup=new w(0),this.m_groupAllFriends=new y(Object(c.c)("#FriendGroup_Online"),-1),this.m_groupOfflineFriends=new C(Object(c.c)("#FriendGroup_Offline"),-3),this.m_groupIngameFriends=new I(Object(c.c)("#FriendGroup_InGame"),-4),this.m_groupIncomingInvites=new E(Object(c.c)("#FriendGroup_IncomingInvites"),-5),this.m_groupOutgoingInvites=new O(Object(c.c)("#FriendGroup_Outgoing"),-6),this.m_FriendStore=e,this.m_groupOfflineFriends.m_eDisplayType=l.eOfflineOnly}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupDisplayPrefs.Init(),this.m_CMInterface.AddOnLogonCallback(function(){return Object(i.b)(t,void 0,void 0,function(){var t,n;return Object(i.e)(this,function(e){switch(e.label){case 0:return t=u.b.Init(f.a),[4,f.f.GetCategories(this.m_CMInterface.GetServiceTransport(),t)];case 1:return 1==(n=e.sent()).GetEResult()&&this.RecvCategoriesList(n.Body()),[2]}})})},47)},Object.defineProperty(e.prototype,"all_friends",{get:function(){return this.m_groupAllFriends},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ingame_group",{get:function(){return this.m_groupIngameFriends},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incoming_invites_group",{get:function(){return this.m_groupIncomingInvites},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoing_invites_group",{get:function(){return this.m_groupOutgoingInvites},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friend_groups",{get:function(){return Object(i.g)(this.game_groups,this.user_groups,this.default_groups)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupDisplayPrefs",{get:function(){return this.m_FriendGroupDisplayPrefs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user_groups",{get:function(){var t=[];return this.m_mapGroups.forEach(function(e){t.push(e)}),t.sort(function(e,t){return e.name.localeCompare(t.name)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"game_groups",{get:function(){var t=[],n=2;return 1==this.m_singletonGameGroup.unfiltered_count&&(n=1),this.m_mapGameGroups.forEach(function(e){e.name&&e.member_count>=n&&t.push(e)}),t.sort(function(e,t){return e.member_count==t.member_count?e.name.localeCompare(t.name):t.member_count-e.member_count}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleton_game_group",{get:function(){if(1==this.m_singletonGameGroup.unfiltered_count){var e=this.m_singletonGameGroup.member_accountid_list[0];if(!s.f.FriendStore.GetPlayer(e).persona.is_in_nonsteam_game)return}return this.m_singletonGameGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"default_groups",{get:function(){return[this.m_groupAllFriends,this.m_groupOfflineFriends]},enumerable:!0,configurable:!0}),e.prototype.OnFullFriendsListUpdateStart=function(){this.m_groupOfflineFriends.Clear(),this.m_groupAllFriends.Clear(),this.m_groupIncomingInvites.Clear(),this.m_groupOutgoingInvites.Clear()},e.prototype.OnFullFriendsListUpdateComplete=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear();for(var e=0,t=this.m_FriendStore.all_friends;e<t.length;e++){var n=t[e];if(n.persona.is_ingame){var o=n.persona.is_in_nonsteam_game?g:n.persona.m_unGamePlayedAppID;this.OnFriendGameChanged(n.accountid,0,o)}}},e.prototype.OnPersonaStateCacheReset=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear()},e.prototype.OnFriendAdded=function(e){this.m_groupAllFriends.AddMember(e),this.m_groupOfflineFriends.AddMember(e)},e.prototype.OnFriendRemoved=function(t){this.m_groupAllFriends.RemoveMember(t),this.m_groupOfflineFriends.RemoveMember(t),this.m_groupIngameFriends.RemoveMember(t),this.m_singletonGameGroup.RemoveMember(t),this.m_mapGroups.forEach(function(e){e.RemoveMember(t)}),this.m_mapGameGroups.forEach(function(e){e.RemoveMember(t)})},e.prototype.OnFriendGameChanged=function(e,t,n){var o=t==g?this.m_singletonGameGroup:0!=t?this.m_mapGameGroups.get(t):null,i=n==g?this.m_singletonGameGroup:0!=n?this.m_mapGameGroups.get(n):null;if(!(o&&i&&t==n||i&&i.HasMember(e))){if(o&&o.HasMember(e)&&(o.RemoveMember(e),o!=this.m_singletonGameGroup&&(0==o.unfiltered_count?this.m_singletonGameGroup.RemoveMember(e):1==o.unfiltered_count&&this.m_singletonGameGroup.AddMember(o.member_accountid_list[0]))),i)i!=this.m_singletonGameGroup&&(1==i.unfiltered_count?this.m_singletonGameGroup.RemoveMember(i.member_accountid_list[0]):0==i.unfiltered_count&&this.m_singletonGameGroup.AddMember(e)),i.AddMember(e);else if(0!=n){var r=new w(n);r.AddMember(e),this.m_singletonGameGroup.AddMember(e),this.m_mapGameGroups.set(n,r)}0!=n?this.m_groupIngameFriends.AddMember(e):this.m_groupIngameFriends.RemoveMember(e)}},e.prototype.OnIncomingInviteAdded=function(e){this.m_groupIncomingInvites.AddMember(e)},e.prototype.OnIncomingInviteRemoved=function(e){this.m_groupIncomingInvites.RemoveMember(e)},e.prototype.OnOutgoingInviteAdded=function(e){this.m_groupOutgoingInvites.AddMember(e)},e.prototype.OnOutgoingInviteRemoved=function(e){this.m_groupOutgoingInvites.RemoveMember(e)},e.prototype.EnsureMutualFriendsForIncomingInvites=function(){var l=this;function e(e){for(var t=2166136261,n=0;n<e.length;++n)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}for(var p=0,t=0,n=this.m_groupIncomingInvites.member_list;t<n.length;t++){var o=n[t];p^=e(""+o.accountid)}if(this.m_groupIncomingInvites.GetMutualFriendsCacheHash()!=p){this.m_groupIncomingInvites.SetMutualFriendsCacheHash(p);var i=u.b.Init(a.d);a.l.GetMutualFriendsForIncomingInvites(this.m_CMInterface.GetServiceTransport(),i).then(function(e){if(1==e.GetEResult()&&l.m_groupIncomingInvites.GetMutualFriendsCacheHash()==p){for(var t=h.x.map(),n=0,o=e.Body().incoming_invite_mutual_friends_lists();n<o.length;n++){for(var i=o[n],r=new Set,a=0,s=i.mutual_friend_account_ids();a<s.length;a++){var c=s[a];r.add(c)}t.set(i.steamid(),r)}l.m_groupIncomingInvites.SetMutualFriends(t)}})}},e.prototype.CreateGroup=function(a,s){var c=this,n=u.b.Init(d.d,5560);return n.Body().set_groupname(a),s&&n.Body().set_steamid_friends(s),new Promise(function(e,t){c.m_CMInterface.SendMsgAndAwaitResponse(n,d.e).then(function(r){1==r.Body().eresult()&&Object(h.A)(function(){var e=r.Body().groupid(),t=new S(a,r.Body().groupid(),!0);if(s)for(var n=0,o=s;n<o.length;n++){var i=o[n];t.AddMember(new m.a(i).GetAccountID())}c.m_mapGroups.set(e,t)}),e(1==r.Body().eresult())}).catch(function(){e(!1)})})},e.prototype.ManageGroup=function(s,c,l,p){var t=this;if(c==s.name&&!l&&!p)return Promise.resolve(!0);var n=u.b.Init(d.k,5564);return n.Body().set_groupid(s.id),c&&c!=s.name&&n.Body().set_groupname(c),l&&n.Body().set_steamid_friends_added(l),p&&n.Body().set_steamid_friends_removed(p),new Promise(function(a,e){t.m_CMInterface.SendMsgAndAwaitResponse(n,d.l).then(function(e){if(1==e.Body().eresult()){s.name=c;for(var t=0,n=l;t<n.length;t++){var o=n[t];s.AddMember(new m.a(o).GetAccountID())}for(var i=0,r=p;i<r.length;i++){o=r[i];s.RemoveMember(new m.a(o).GetAccountID())}}a(1==e.Body().eresult())}).catch(function(){a(!1)})})},e.prototype.RemoveGroup=function(t){var n=this,e=u.b.Init(d.f,5562);e.Body().set_groupid(t.id),this.m_CMInterface.SendMsgAndAwaitResponse(e,d.g).then(function(e){1==e.Body().eresult()&&n.HandleGroupRemoval(t)})},e.prototype.HandleGroupRemoval=function(e){this.m_mapGroups.delete(e.id)},Object.defineProperty(e.prototype,"categorized_friend_set",{get:function(){var t=new Set;return this.m_mapGroups.forEach(function(e){e.member_accountid_list.forEach(t.add.bind(t))}),t},enumerable:!0,configurable:!0}),e.prototype.RecvCategoriesList=function(e){this.m_mapGroups.clear();for(var t=0,n=e.categories();t<n.length;t++){var o=n[t],i=o.groupid(),r=new S(o.name()||"",o.groupid(),!0);r.m_eDisplayType=l.eAll,this.m_mapGroups.set(i,r);for(var a=0,s=o.accountid_members();a<s.length;a++){var c=s[a];r.AddMember(c)}}},e.prototype.TransferFriendFromToGroup=function(t,n,o){var e,i=this,r=o&&o.modifiable,a=n&&n.modifiable,s=[];r&&((e=u.b.Init(d.a,5566)).Body().set_groupid(o.id),e.Body().set_steamiduser(t.persona.m_steamid.ConvertTo64BitString()),s.push(this.m_CMInterface.SendMsgAndAwaitResponse(e,d.b).then(function(e){return 1==e.Body().eresult()&&(o.AddMember(t.accountid),!0)})));a&&((e=u.b.Init(d.n,5568)).Body().set_groupid(n.id),e.Body().set_steamiduser(t.persona.m_steamid.ConvertTo64BitString()),s.push(this.m_CMInterface.SendMsgAndAwaitResponse(e,d.o).then(function(e){return 1==e.Body().eresult()&&(n.RemoveMember(t.accountid),0==n.unfiltered_count&&i.HandleGroupRemoval(n),!0)})));return Promise.all(s)},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this;e.metrics().set_friends_category_count(this.m_mapGroups.size),e.metrics().set_friends_categorized_count(this.categorized_friend_set.size),this.singleton_game_group&&e.metrics().set_friends_in_game_singleton_count(this.singleton_game_group.unfiltered_count),e.metrics().set_game_group_count(this.game_groups.length);var n=function(e){return t.m_FriendGroupDisplayPrefs.GetUserGroupCollapsed(e.unique_id)},o=e.ui_state().category_collapse();o.set_in_game_collapsed(n(this.m_singletonGameGroup)),o.set_online_collapsed(n(this.m_groupAllFriends)),o.set_offline_collapsed(n(this.m_groupOfflineFriends)),o.set_categories_collapsed(r.b(Array.from(this.m_mapGroups.values()),n)),o.set_game_groups_collapsed(r.b(Array.from(this.m_mapGameGroups.values()),n))},Object(i.c)([h.i],e.prototype,"friend_groups",null),Object(i.c)([h.i],e.prototype,"user_groups",null),Object(i.c)([h.i],e.prototype,"game_groups",null),Object(i.c)([h.i],e.prototype,"singleton_game_group",null),Object(i.c)([h.i],e.prototype,"default_groups",null),Object(i.c)([h.g],e.prototype,"OnFullFriendsListUpdateComplete",null),Object(i.c)([h.g],e.prototype,"OnPersonaStateCacheReset",null),Object(i.c)([h.g],e.prototype,"HandleGroupRemoval",null),Object(i.c)([h.i],e.prototype,"categorized_friend_set",null),Object(i.c)([h.g],e.prototype,"RecvCategoriesList",null),Object(i.c)([h.g],e.prototype,"TransferFriendFromToGroup",null),e}()},"5Nu3":function(e,t,n){"use strict";var r=n("mrSG"),i=n("2vnA"),p=n("4HGb"),a=n("s+DT"),o=n("OJz+"),u=n("RBVV"),s=n("3zHc"),c=n("VtNY"),l=n("LAqV"),m=n("tkkQ"),d=function(){function e(e,t,n,o,i,r,a){this.unAccountIDInviter=e,this.rtTimestamp=t,this.appID=n,this.connectString=o,this.remoteplayString=i,this.lobbyID=a,this.bDismissed=r,this.bAccepted=!1}return e.prototype.AcceptGameInvite=function(){var e,t=a.a.InitFromAccountID(this.unAccountIDInviter);null!=this.lobbyID?e="steam://joinlobby/"+this.appID+"/"+this.lobbyID+"/"+t.ConvertTo64BitString():this.remoteplayString?e=m.a.IN_MOBILE?"https://s.team/remoteplay/connect/"+t.ConvertTo64BitString()+"?appid="+this.appID+"&"+this.remoteplayString:"steam://remoteplay/connect/"+t.ConvertTo64BitString()+"?appid="+this.appID+"&"+this.remoteplayString:(e="steam://rungame/"+this.appID+"/"+t.ConvertTo64BitString(),void 0!==this.connectString&&(e+="/"+encodeURIComponent(this.connectString))),l.f.OpenURLInBrowser(e,l.a),this.bAccepted=!0,l.f.ChatStore.GameInviteStore.RecordDismissTime(this)},e.prototype.DismissInvite=function(){this.bDismissed=!0,l.f.ChatStore.GameInviteStore.RecordDismissTime(this)},Object.defineProperty(e.prototype,"bOld",{get:function(){return 21600<l.f.GetServerRTime32()-this.rtTimestamp},enumerable:!0,configurable:!0}),Object(r.c)([i.x],e.prototype,"bDismissed",void 0),Object(r.c)([i.x],e.prototype,"bAccepted",void 0),Object(r.c)([i.g],e.prototype,"AcceptGameInvite",null),Object(r.c)([i.g],e.prototype,"DismissInvite",null),e}(),h={dismisstimes:{}},f="GameInvites",_=function(){function e(){this.m_mapGameInvites=new Map,this.m_mapDismissedInvites=i.x.map(),this.m_mapInviteByCode=new Map}return e.prototype.Init=function(){var r=this;l.f.SettingsStore.GetObjectFromLocalStorageWhenReady(f,h).then(function(e){var t=new Date;for(var n in t.setDate(t.getDate()-14),r.m_mapDismissedInvites.clear(),e.dismisstimes){var o=parseInt(n),i=e.dismisstimes[n];new Date(1e3*i)<t||r.m_mapDismissedInvites.set(o,i)}})},e.prototype.RegisterGameInvite=function(e,t,n,o,i,r){var a=this.m_mapGameInvites.get(e);a||(a=new Map,this.m_mapGameInvites.set(e,a));var s=a.get(t);if(!s){var c=!1,l=this.m_mapDismissedInvites.get(e);l&&(c=t<=l),s=new d(e,t,n,o,i,c,r),a.set(t,s),a.forEach(function(e){e.rtTimestamp<t&&e.DismissInvite()})}return s},e.prototype.RecordDismissTime=function(e){var t=this.m_mapDismissedInvites.get(e.unAccountIDInviter);t&&t>e.rtTimestamp||(this.m_mapDismissedInvites.set(e.unAccountIDInviter,e.rtTimestamp),this.WriteToLocalStorage())},e.prototype.WriteToLocalStorage=function(){l.f.SettingsStore.StoreObjectInLocalStorage(f,{dismisstimes:this.m_mapDismissedInvites})},e}(),g=function(){function e(){this.bCollapsed=!1}return e.prototype.IsEmpty=function(){return!this.bCollapsed&&void 0===this.nDefaultWidth&&void 0===this.nDesiredWidth},e}(),b="ChatEmbeds",v=function(){function e(){this.m_mapEmbed=new i.b}return e.prototype.Init=function(){var o=this;l.f.SettingsStore.GetObjectFromLocalStorageWhenReady(b,{}).then(function(e){for(var t in o.m_mapEmbed.clear(),e){var n=new g;Object.assign(n,e[t]),o.m_mapEmbed.set(t,n)}})},e.prototype.GetKey=function(e,t){return t+"_"+e},e.prototype.EvictOldestIfNecessary=function(){if(100<this.m_mapEmbed.size){var e=Array.from(this.m_mapEmbed.keys()).sort()[0];this.m_mapEmbed.delete(e)}},e.prototype.GetOrCreateEmbedData=function(e,t){var n=this.GetKey(e,t),o=this.m_mapEmbed.get(n);return o||((o=new g).bCollapsed=!1),o},e.prototype.SaveEmbedData=function(e,t,n){n.IsEmpty()?this.m_mapEmbed.delete(this.GetKey(e,t)):this.m_mapEmbed.set(this.GetKey(e,t),n),this.EvictOldestIfNecessary(),this.WriteToLocalStorage()},e.prototype.WriteToLocalStorage=function(){l.f.SettingsStore.StoreObjectInLocalStorage(b,this.m_mapEmbed)},e.prototype.GetCollapsedState=function(e,t){var n=this.m_mapEmbed.get(this.GetKey(e,t));return!(!n||!n.bCollapsed)},e.prototype.SetCollapsedState=function(e,t,n){var o=this.GetOrCreateEmbedData(e,t);o.bCollapsed=n,this.SaveEmbedData(e,t,o)},e.prototype.GetWidths=function(e,t){var n=this.m_mapEmbed.get(this.GetKey(e,t));if(n&&n.nDesiredWidth&&n.nDefaultWidth)return{nDesiredWidth:n.nDesiredWidth,nDefaultWidth:n.nDefaultWidth}},e.prototype.SetWidths=function(e,t,n,o){var i=this.GetOrCreateEmbedData(e,t);n==o?(delete i.nDefaultWidth,delete i.nDesiredWidth):(i.nDesiredWidth=n,i.nDefaultWidth=o),this.SaveEmbedData(e,t,i)},e}(),S=n("rsEv"),y=n("V7Fl"),C=n("1KZt"),O=n("R/D/"),I=function(e){function t(){var c=null!==e&&e.apply(this,arguments)||this;return c.fnRecvEmoticonList=Object(o.a)(9331,O.h,function(e){for(var t=[],n=0,o=e.Body().emoticons();n<o.length;n++){var i=o[n],r=i.name();if(r.startsWith("^"))t.push({name:r});else{var a={name:r.substr(1,r.length-2)},s=a.name.toLowerCase();s!=a.name&&(a.name_normalized=s),i.time_last_used()&&(a.last_used=i.time_last_used()),i.use_count()&&(a.use_count=i.use_count()),i.time_received()&&(a.time_received=i.time_received()),t.push(a)}}c.OnEmoticonListReceived(t)}),c}return Object(r.d)(t,e),t.prototype.Init=function(e){this.m_CMInterface=e},t.prototype.BInitialized=function(){return!!this.m_CMInterface},t.prototype.GetServerTime=function(){return this.m_CMInterface.GetServerRTime32()},t.prototype.RequestEmoticonListInternal=function(){var t=this;this.m_CMInterface.RunWhenLoggedOn(function(){var e=p.b.Init(O.j,9330);t.m_CMInterface.Send(e)})},t}(C.a),E=n("geE1"),w=n("UqDm"),M=n("E7zH");function D(e,t){if(!e||!t)return[];for(var n=[],o=e.values(),i=o.next();!i.done;)t(i.value)&&n.push(i.value),i=o.next();return n}var T=n("/FkP"),G=n("oh5H"),R=n("/SYB"),j=n("XaMz"),L=n("2sgH"),A=n("9Eit"),k=n("ujHl");n("tZiA");n.d(t,"a",function(){return P}),n.d(t,"b",function(){return N});var P=function(){function e(e){var s=this;this.LOG=R.b.create(function(){return"chatstore"},!1),this.m_EmoticonStore=new I,this.m_FriendChatStore=new E.b(this),this.m_InviteStore=new c.a(this),this.m_GameInviteStore=new _,this.m_ChatRoomGroupDisplayPrefs=new y.c,this.m_EmbedStore=new v,this.m_mapChatGroups=i.x.map(),this.m_mapActiveChatGroupsToRefCount=i.x.map(),this.m_mapClanChatsByClanID=new Map,this.m_bReceivedChatGroupList=!1,this.m_bReadyToRender=!1,this.m_bSendingActiveGroups=!1,this.m_bSendActiveGroupsQueued=!1,this.m_IncomingChatRoomMessageHandler=Object(o.d)(u.U.NotifyIncomingChatMessageHandler,function(e){var t=e.Body(),n=s.FindChatRoom(t.chat_group_id(),t.chat_id());if(!n)return 2;var o=new a.a(t.steamid_sender());if(0!=(t.server_message().message()||0))n.AddNewServerMsg(o.GetAccountID(),t.timestamp(),t.ordinal(),t.server_message().message(),t.message(),t.server_message().string_param(),t.server_message().accountid_param());else{var i=t.mentions(),r=null;i&&(r={},i.mention_all()&&(r.mention_all=!0),i.mention_here()&&(r.mention_here=!0),i.mention_accountids()&&-1!==i.mention_accountids().indexOf(s.m_FriendStore.self.accountid)&&(r.mention_user=!0)),n.AddNewChatMsgAndNotify(o.GetAccountID(),t.timestamp(),t.ordinal(),t.message(),t.message_no_bbcode(),r)}return 1}),this.m_ChatMessageModifiedHandler=Object(o.d)(u.U.NotifyChatMessageModifiedHandler,function(e){var t=e.Body(),n=s.FindChatRoom(t.chat_group_id(),t.chat_id());if(!n)return 2;for(var o=[],i=0,r=e.Body().messages();i<r.length;i++){var a=r[i];a.deleted&&o.push({rtTimestamp:a.server_timestamp(),unOrdinal:a.ordinal()})}return n.UpdateChatMessageDeletedState(o,T.e.Deleting),1}),this.m_IncomingChatRoomHeaderStateChangeHandler=Object(o.c)(u.U.NotifyChatRoomHeaderStateChangeHandler,function(e){var t=e.Body().header_state().chat_group_id(),n=s.m_mapChatGroups.get(t);return n&&n.UpdateChatRoomHeaderState(e.Body().header_state()),1}),this.m_IncomingStateChangeHandler=Object(o.c)(u.U.NotifyMemberStateChangeHandler,function(e){var t=e.Body().chat_group_id(),n=s.m_mapChatGroups.get(t);return n&&n.OnUserStateChange(e.Body().member(),e.Body().change()),1}),this.m_IncomingChatRoomGroupRoomsChangeHandler=Object(o.c)(u.U.NotifyChatRoomGroupRoomsChangeHandler,function(e){var t=e.Body(),n=s.m_mapChatGroups.get(t.chat_group_id());return n&&n.OnRoomStateChange(t),1}),this.m_IncomingChatGroupUserStateChangedHandler=Object(o.c)(u.U.NotifyChatGroupUserStateChangedHandler,function(e){var t=e.Body(),n=t.chat_group_id(),o=t.user_action();switch(o){case 1:var i=s.AddJoinedChatRoomGroup(t.group_summary(),t.user_chat_group_state());l.f.UIStore.ShowAndOrActivateChatRoomGroup(l.a,i,!1);break;case 2:case 3:case 10:l.f.VoiceStore.GetActiveChatRoomGroupID()==n&&l.f.VoiceStore.OnUserEndVoiceChat();var r=(i=s.GetChatRoomGroup(n))?i.name:void 0;s.RemoveChatRoomGroup(n),r&&(3==o?l.f.ShowAlert(Object(G.c)("#Alert_YouWereKickedTitle"),Object(G.c)("#Alert_YouWereKickedDescription",r)):10==o&&l.f.ShowAlert(Object(G.c)("#Alert_YouWereBannedTitle"),Object(G.c)("#Alert_YouWereBannedDescription",r)));break;case 7:case 0:i=s.GetChatRoomGroup(n);Object(j.a)(i,"Got state change for ChatRoomGroup we don't know about"),i&&i.UpdateUserState(t.user_chat_group_state());break;case 4:break;default:Object(j.a)(!1,"Don't know how to handle state change of type "+Object(u.ab)(o)+" ")}return 1}),this.m_AckChatMessageEchoHandler=Object(o.d)(u.U.NotifyAckChatMessageEchoHandler,function(e){var t=e.Body().chat_group_id(),n=e.Body().chat_id(),o=e.Body().timestamp(),i=s.GetChatRoomGroup(t);if(!i)return 2;if(n){var r=i.GetChatRoom(n);if(!r)return 11;r.UpdateLastAckTimeFromServer(o)}else i.UpdateLastAckTimeFromServer(o);return 1}),this.m_FriendStore=e}return e.prototype.Init=function(t,e){var n=this;this.m_CMInterface=t,this.m_EmoticonStore.Init(t),this.m_VoiceChat=e,this.m_ChatRoomBBCodeParser=l.f.GetChatRoomBBCodeParser(),this.m_FriendChatBBCodeParser=l.f.GetFriendChatBBCodeParser(),this.m_NotificationBBCodeParser=l.f.GetNotificationBBCodeParser(),this.m_ChatRoomGroupDisplayPrefs.Init(l.f.SettingsStore),this.m_EmbedStore.Init(),this.m_FriendChatStore.Init();var o=!1,i=0;return this.m_CMInterface.AddOnLogonCallback(function(){if(o){var e=i<Date.now()/1e3-k.b.PerMinute/2;e?function(n,o){Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=Math.floor(Math.random()*o*1e3),[4,new Promise(function(e){return setTimeout(e,t)})];case 1:return e.sent(),[2,n()]}})})}(function(){return n.RestoreStatePostDisconnect(e)},4):n.RestoreStatePostDisconnect(e)}else A.b.Init(l.f.Storage,t.steamid.GetAccountID().toString()).then(function(){return n.LoadMyChatRooms()}),n.m_FriendChatStore.OnLogon(),o=!0;n.m_GameInviteStore.Init()},102),this.m_CMInterface.AddOnDisconnectCallback(function(){return i=Date.now()/1e3},102),new Promise(function(e){n.m_fnOnReadyToRender=e})},e.prototype.SetReadyToRender=function(){this.m_bReadyToRender||(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.RestoreStatePostDisconnect=function(t){t&&this.LoadMyChatRooms();var n=this.m_mapActiveChatGroupsToRefCount.toPOJO(),e=Object.keys(n).some(function(e){return 0<n[e]});this.m_FriendChatStore.RestoreStatePostDisconnect(t),this.m_mapChatGroups.forEach(function(e){return e.OnConnectionRestored(t)}),e&&this.SendActiveChatRoomGroupsToServer()},e.prototype.LoadMyChatRooms=function(){var a=this,e=p.b.Init(u.t);u.V.GetMyChatRoomGroups(this.m_CMInterface.GetServiceTransport(),e).then(function(r){Object(i.A)(function(){1!=r.GetEResult()&&!0;for(var e=0,t=r.Body().chat_room_groups();e<t.length;e++){var n=t[e],o=n.group_summary().chat_group_id();if(o){var i=a.m_mapChatGroups.get(o);i||(i=new y.b(a,o),a.m_mapChatGroups.set(o,i)),i.SetInitialGroupState(n.group_summary()),i.UpdateUserState(n.user_chat_group_state()),a.OnGroupAdded(i),i.BHasEverBeenAcked()||l.f.UIStore.ShowUnackedGroup(i)}else!0}a.SetReadyToRender(),a.m_bReceivedChatGroupList=!0})}).catch(function(e){console.error("Failed to load chat rooms from server",e),a.SetReadyToRender()})},e.prototype.OnGroupAdded=function(e){e.GetClanID()&&(this.m_mapClanChatsByClanID.set(e.GetClanID(),e.GetGroupID()),this.m_FriendStore.ClanStore.SetClanChatGroupID(e.GetClanID(),e.GetGroupID()))},e.prototype.OnChatRoomActivated=function(e){e.GetGroup().OnActivate()},e.prototype.JoinAndShowChatRoomGroup=function(e,t,n){var o=this.GetChatRoomGroup(t);o&&o.BIsCurrentUserAMember()?l.f.UIStore.ShowAndOrActivateChatRoomGroup(e,o,n):this.m_InviteStore.JoinChatGroup(t,null,e)},e.prototype.AddCreatedChatRoomGroup=function(e,t,n,o){if(!this.m_mapChatGroups.has(t)){var i=new y.b(this,t);this.m_mapChatGroups.set(t,i),i.UpdateGroupState(n),i.UpdateUserState(o),this.OnGroupAdded(i),l.f.UIStore.ShowAndOrActivateChatRoomGroup(e,i,!0)}},e.prototype.AddKnownChatRoomGroup=function(e,t){var n=e.chat_group_id();if(this.m_mapChatGroups.has(n)){(o=this.m_mapChatGroups.get(n)).SetInitialGroupState(e)}else{var o=new y.b(this,n);this.m_mapChatGroups.set(n,o),o.SetInitialGroupState(e),t&&o.UpdateUserState(t),this.OnGroupAdded(o)}},e.prototype.AddJoinedChatRoomGroup=function(e,t){var n=t.chat_group_id(),o=this.m_mapChatGroups.get(n);return o||(o=new y.b(this,n),this.m_mapChatGroups.set(n,o)),e instanceof u.b?o.UpdateGroupState(e):o.SetInitialGroupState(e),this.OnGroupAdded(o),o.UpdateUserState(t),o},e.prototype.RemoveChatRoomGroup=function(e){var t=this.m_mapChatGroups.get(e);if(t){var n=this.m_mapChatGroups.get(e);n&&l.f.UIStore.CloseTabByID(n.unique_id),this.GetRefCountActiveChatRoomGroup(e)<=0&&t.UnloadAndResetGroupState()}},e.prototype.FindChatRoom_Deprecated=function(n){var o=null;return this.m_mapChatGroups.forEach(function(e){var t=e.GetChatRoom(n);t&&(o=t)}),o},e.prototype.FindChatRoom=function(e,t){var n=this.m_mapChatGroups.get(e);return n?n.GetChatRoom(t):null},Object.defineProperty(e.prototype,"chat_group_list_ready",{get:function(){return this.m_bReceivedChatGroupList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VoiceChat",{get:function(){return this.m_VoiceChat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomBBCodeParser",{get:function(){return this.m_ChatRoomBBCodeParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatBBCodeParser",{get:function(){return this.m_FriendChatBBCodeParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NotificationBBCodeParser",{get:function(){return this.m_NotificationBBCodeParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatStore",{get:function(){return this.m_FriendChatStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EmoticonStore",{get:function(){return this.m_EmoticonStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InviteStore",{get:function(){return this.m_InviteStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameInviteStore",{get:function(){return this.m_GameInviteStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EmbedStore",{get:function(){return this.m_EmbedStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomGroupDisplayPrefs",{get:function(){return this.m_ChatRoomGroupDisplayPrefs},enumerable:!0,configurable:!0}),e.prototype.GetActiveVoiceChat=function(){var e=this.m_VoiceChat.GetActiveVoiceChatID();if(""!=e){if(t=this.FindChatRoom_Deprecated(e))return t}else{var t,n=this.m_VoiceChat.GetActiveOneOnOneVoiceChatAccountID();if(0!=n)if(t=this.GetFriendChat(n,!1))return t}},e.prototype.GetActiveVoiceChannelName=function(){var e=this.GetActiveVoiceChat();return null!=e?e.name:""},e.prototype.GetFriendChat=function(e,t){return void 0===t&&(t=!0),e==this.FriendStore.self.accountid?null:this.m_FriendChatStore.GetFriendChat(e,t)},e.prototype.GetChatRoomGroup=function(e){return this.m_mapChatGroups.get(e)},Object.defineProperty(e.prototype,"currentChatRoomGroups",{get:function(){return D(this.m_mapChatGroups,function(e){return e.BIsCurrentUserAMember()})},enumerable:!0,configurable:!0}),e.prototype.FindChatRoomGroupsMatchingSearch=function(t){return this.currentChatRoomGroups.filter(function(e){return-1!==e.name.toLocaleLowerCase().indexOf(t)})},Object.defineProperty(e.prototype,"ClanChatRooms",{get:function(){return D(this.m_mapChatGroups,function(e){return e.BIsClanChatRoom()})},enumerable:!0,configurable:!0}),e.prototype.GetRefCountActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===t&&(t=0),t},e.prototype.IncRefActiveChatRoomGroup=function(e,t){var n=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===n&&(n=0),n+=1,this.m_mapActiveChatGroupsToRefCount.set(e,n),1==n&&t&&this.SendActiveChatRoomGroupsToServer(),n},e.prototype.DecRefActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e),n=void 0!==t&&0<t;if(Object(j.a)(n,"Attempting to DecRef a Chat Group that has no existing references. Doing nothing."),!n)return 0;if((t-=1)<=0){this.m_mapActiveChatGroupsToRefCount.delete(e);var o=this.m_mapChatGroups.get(e);o&&o.UnloadActiveGroupState(),this.SendActiveChatRoomGroupsToServer()}else this.m_mapActiveChatGroupsToRefCount.set(e,t);return t},e.prototype.OnRestorePopupsComplete=function(){0<this.m_mapActiveChatGroupsToRefCount.size&&this.SendActiveChatRoomGroupsToServer()},e.prototype.SendActiveChatRoomGroupsToServer=function(){return Object(r.b)(this,void 0,void 0,function(){var t,n,o=this;return Object(r.e)(this,function(e){switch(e.label){case 0:if(this.m_bSendingActiveGroups)return this.m_bSendActiveGroupsQueued=!0,[2];t=.5,n=function(){return Object(r.b)(o,void 0,void 0,function(){return Object(r.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.InternalSendActiveChatRoomGroupsToServer()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},e.label=1;case 1:return[4,n()];case 2:return e.sent()?[3,4]:[4,new Promise(function(e){return setTimeout(e,1e3*t)})];case 3:return e.sent(),t*=2,[3,1];case 4:return[2]}})})},e.prototype.InternalSendActiveChatRoomGroupsToServer=function(){return Object(r.b)(this,void 0,void 0,function(){var s=this;return Object(r.e)(this,function(e){return[2,new Promise(function(t){var a=[],o=p.b.Init(u.N);s.m_mapActiveChatGroupsToRefCount.forEach(function(e,t){if(Object(j.a)(0<e,"SendActiveChatRoomGroupsToServer found invalid ref count for chat group."),!(e<=0)){o.Body().add_chat_group_ids(t);var n=s.m_mapChatGroups.get(t);n&&n.readyToRender||o.Body().add_chat_groups_data_requested(t),n&&n.BIsClanChatRoom()&&a.push(n.GetClanID())}});var e=function(e){m.a.IN_CLIENT&&SteamClient.WebChat.SetActiveClanChatIDs(a),e&&void 0!==n&&ClearBackgroundTimeout(n),s.m_bSendingActiveGroups=!1,s.m_bSendActiveGroupsQueued?t(!1):t(e)},n=SetBackgroundTimeout(function(){s.m_bSendActiveGroupsQueued=!0,e(!1)},1e4);s.m_bSendActiveGroupsQueued=!1,s.m_bSendingActiveGroups=!0,u.V.SetSessionActiveChatRoomGroups(s.m_CMInterface.GetServiceTransport(),o).then(function(e){var t=!1;if(1!=e.GetEResult())return!1;for(var n=0,o=e.Body().chat_states();n<o.length;n++){var i=o[n],r=s.m_mapChatGroups.get(i.header_state().chat_group_id());if(r)try{r.UpdateGroupState(i),r.BIsClanChatRoom()&&-1===a.indexOf(r.GetClanID())&&a.push(r.GetClanID())}catch(e){t=!0,console.error("exception processing group update for group "+r.GetGroupID(),e)}}return!t},function(){return!1}).then(e)})]})})},e.prototype.CreateChatRoomGroup=function(n,e,t,o){var i=this;void 0===o&&(o={});var r=o.unBroadcastAccountId,a=p.b.Init(u.e);a.Body().set_name(e);for(var s=0,c=t;s<c.length;s++){var l=c[s];a.Body().add_steamid_invitees(l)}return r&&a.Body().set_watching_broadcast_accountid(r),u.V.CreateChatRoomGroup(this.m_CMInterface.GetServiceTransport(),a).then(function(e){var t=e.GetEResult();if(1!=t)throw t;return i.AddCreatedChatRoomGroup(n,e.Body().chat_group_id(),e.Body().state(),e.Body().user_chat_state()),e.Body().chat_group_id()})},e.prototype.LeaveChatRoomGroup=function(e,n){var o=this,t=p.b.Init(u.y);return t.Body().set_chat_group_id(n),u.V.LeaveChatRoomGroup(this.m_CMInterface.GetServiceTransport(),t).then(function(e){var t=e.GetEResult();if(1!=t)throw t;o.RemoveChatRoomGroup(n)})},e.prototype.FindNamelessChatGroupWithFriends=function(e){if(0==e.length)return null;for(var t=e.map(function(e){return new a.a(e).GetAccountID()}),n=0,o=Array.from(this.m_mapChatGroups.values());n<o.length;n++){var i=o[n];if(!i.IsNamedGroupChat()&&i.BRoomContainsJustTheseFriendsAndSelf(t))return i}return null},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_group_chat_count(w.b(Array.from(this.m_mapChatGroups.values()),function(e){return e.BIsCurrentUserAMember()})),this.m_ChatRoomGroupDisplayPrefs.FillInChatUsabilityMetrics(e)},e.prototype.GetChatsWithUnreadPriorityMessages=function(){for(var n=[],e=0,t=this.FriendChatStore.GetFriendsWithUnreadMessages(null);e<t.length;e++){var o=t[e];o.has_unread_priority_messages&&n.push(o)}var i=this;return this.m_mapActiveChatGroupsToRefCount.forEach(function(e,t){i.m_mapChatGroups.get(t).GetChatRoomsWithUnreadPriorityMessages(n)}),n},e.prototype.GetChatToActivateForOldestUnread=function(t){var r=this,a=null,s=function(e){return!(!e.has_unread_priority_messages&&0==e.GetVisibilityState(t))&&(!a||!(a.has_unread_priority_messages&&!e.has_unread_priority_messages)&&(!(a.has_unread_priority_messages||!e.has_unread_priority_messages)||(a.m_msTimeActivated<e.m_msTimeActivated||!(a.m_msTimeActivated>e.m_msTimeActivated)&&a.time_last_message<e.time_last_message)))};this.m_mapActiveChatGroupsToRefCount.forEach(function(e,t){for(var n=0,o=r.m_mapChatGroups.get(t).chatRoomList;n<o.length;n++){var i=o[n];s(i)&&(a=i)}});for(var e=0,n=this.m_FriendChatStore.GetAllChats();e<n.length;e++){var o=n[e];s(o)&&(a=o)}return a},Object(r.c)([i.x],e.prototype,"m_bReceivedChatGroupList",void 0),Object(r.c)([l.g],e.prototype,"JoinAndShowChatRoomGroup",null),Object(r.c)([i.g],e.prototype,"AddCreatedChatRoomGroup",null),Object(r.c)([i.g],e.prototype,"AddKnownChatRoomGroup",null),Object(r.c)([i.g],e.prototype,"AddJoinedChatRoomGroup",null),Object(r.c)([i.g],e.prototype,"RemoveChatRoomGroup",null),Object(r.c)([i.i],e.prototype,"currentChatRoomGroups",null),Object(r.c)([i.i],e.prototype,"ClanChatRooms",null),e}(),N=function(o){function e(e,t){var n=o.call(this)||this;return n.m_rgOnChatFrameChangedCallbacks=[],n.m_bScrolledToBottom=!0,n.m_scrollTop=-1,n.m_scrollHeight=-1,n.m_clientHeight=1,n.m_textEntryFocusCallbacks=new M.a,n.m_tabset=e,n.m_chat=t,n.m_tabset&&n.m_chat.AddChatView(n),n.m_strTextEntry="",n.m_fileUploadManager=new L.a(t),n}return Object(r.d)(e,o),e.prototype.GetTabName=function(){return this.m_chat.name},e.prototype.GetUniqueID=function(){return this.m_chat.unique_id},e.prototype.OnTabFocus=function(){this.OnFocus()},e.prototype.InternalOnTabActivate=function(){this.OnActivate()},e.prototype.OnTabDeactivate=function(){this.OnDeactivate()},e.prototype.OnTabClosed=function(){this.OnViewClosed()},e.prototype.IsChatRoom=function(){return this.m_chat instanceof S.a},e.prototype.IsFriendChat=function(){return this.m_chat instanceof E.a},e.prototype.IsVoiceActive=function(){return this.m_chat.BVoiceActive()},e.prototype.GetUnreadMessageCount=function(){return this.m_chat.unread_message_count},e.prototype.IsTabForChat=function(e){return this.m_chat==e},e.prototype.GetChatView=function(){return this},e.prototype.OnViewClosed=function(){this.m_chat.RemoveChatView(this)},Object.defineProperty(e.prototype,"chat",{get:function(){return this.m_chat},enumerable:!0,configurable:!0}),e.prototype.BIsInBrowserContext=function(e){var t=this.m_tabset.GetBrowserContext();return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},e.prototype.GetVisibilityState=function(){if(!this.m_tabset||!this.m_tabset.is_popup_active&&!m.a.IN_MOBILE)return 0;var e=void 0;return this.m_tabset.activeTab&&(e=this.m_tabset.activeTab.GetChatView()),e!=this||!this.m_tabset.is_popup_visible&&!m.a.IN_MOBILE?1:this.m_tabset.is_popup_focused||m.a.IN_MOBILE?this.m_bScrolledToBottom&&!l.f.IdleTracker.BIsUserIdle(60)?4:3:2},Object.defineProperty(e.prototype,"lastScrollHeight",{get:function(){return this.m_scrollHeight},set:function(e){this.m_scrollHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollTop",{get:function(){return this.m_scrollTop},set:function(e){this.m_scrollTop=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastClientHeight",{get:function(){return this.m_clientHeight},set:function(e){this.m_clientHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_scrolled_to_bottom",{get:function(){return this.m_bScrolledToBottom},set:function(e){!this.m_bScrolledToBottom&&e&&this.m_chat.OnActivate(),this.m_bScrolledToBottom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text_entry",{get:function(){return this.m_strTextEntry},set:function(e){this.m_strTextEntry=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file_upload_manager",{get:function(){return this.m_fileUploadManager},enumerable:!0,configurable:!0}),e.prototype.CheckActivationAndNotifyChat=function(){this.m_bScrolledToBottom&&this.m_chat.OnActivate()},e.prototype.OnActivate=function(){this.CheckActivationAndNotifyChat(),this.FocusTextInput(),this.m_chat.m_msTimeActivated=Date.now()},e.prototype.OnDeactivate=function(){this.m_chat.OnDeactivate()},e.prototype.OnFocus=function(){this.CheckActivationAndNotifyChat()},e.prototype.FocusTextInput=function(){this.m_textEntryFocusCallbacks.Dispatch()},e.prototype.AddOnChatFrameChangedCallback=function(e){this.m_rgOnChatFrameChangedCallbacks.push(e)},e.prototype.RemoveOnChatFrameChangedCallback=function(e){w.c(this.m_rgOnChatFrameChangedCallbacks,e)},e.prototype.OnChatFrameChanged=function(){for(var e=0,t=this.m_rgOnChatFrameChangedCallbacks;e<t.length;e++){(0,t[e])()}},e.prototype.SetFileToUpload=function(e,t){this.m_fileUploadManager.SetImageFileToUpload(e,t)},e.prototype.UploadFile=function(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.e)(this,function(e){switch(e.label){case 0:return[4,this.m_fileUploadManager.BeginFileUpload({bSpoiler:t})];case 1:return e.sent(),this.m_fileUploadManager.Reset(),[2]}})})},e.prototype.RegisterForTextEntryFocus=function(e){return this.m_textEntryFocusCallbacks.Register(e)},e.prototype.BVoiceActive=function(){return this.m_chat.BVoiceActive()},Object(r.c)([i.x],e.prototype,"m_bScrolledToBottom",void 0),e}(s.b)},"6b33":function(e,t,n){"use strict";var o;n.r(t);function v(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function S(){return new v(null)}o="Microsoft Internet Explorer"==navigator.appName?(v.prototype.am=function(e,t,n,o,i,r){for(var a=32767&t,s=t>>15;0<=--r;){var c=32767&this[e],l=this[e++]>>15,p=s*c+l*a;i=((c=a*c+((32767&p)<<15)+n[o]+(1073741823&i))>>>30)+(p>>>15)+s*l+(i>>>30),n[o++]=1073741823&c}return i},30):"Netscape"!=navigator.appName?(v.prototype.am=function(e,t,n,o,i,r){for(;0<=--r;){var a=t*this[e++]+n[o]+i;i=Math.floor(a/67108864),n[o++]=67108863&a}return i},26):(v.prototype.am=function(e,t,n,o,i,r){for(var a=16383&t,s=t>>14;0<=--r;){var c=16383&this[e],l=this[e++]>>14,p=s*c+l*a;i=((c=a*c+((16383&p)<<14)+n[o]+i)>>28)+(p>>14)+s*l,n[o++]=268435455&c}return i},28),v.prototype.DB=o,v.prototype.DM=(1<<o)-1,v.prototype.DV=1<<o;v.prototype.FV=Math.pow(2,52),v.prototype.F1=52-o,v.prototype.F2=2*o-52;var i,r,a="0123456789abcdefghijklmnopqrstuvwxyz",s=new Array;for(i="0".charCodeAt(0),r=0;r<=9;++r)s[i++]=r;for(i="a".charCodeAt(0),r=10;r<36;++r)s[i++]=r;for(i="A".charCodeAt(0),r=10;r<36;++r)s[i++]=r;function c(e){return a.charAt(e)}function l(e,t){var n=s[e.charCodeAt(t)];return null==n?-1:n}function _(e){var t=S();return t.fromInt(e),t}function y(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function g(e){this.m=e}function b(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function p(e,t){return e&t}function u(e,t){return e|t}function m(e,t){return e^t}function d(e,t){return e&~t}function h(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function f(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function C(){}function O(e){return e}function I(e){this.r2=S(),this.q3=S(),v.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}g.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},g.prototype.revert=function(e){return e},g.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},g.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=function(e){var t=S();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(v.ZERO)&&this.m.subTo(t,t),t},b.prototype.revert=function(e){var t=S();return e.copyTo(t),this.reduce(t),t},b.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},b.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},b.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},v.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},v.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+DV:this.t=0},v.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var o=e.length,i=!1,r=0;0<=--o;){var a=8==n?255&e[o]:l(e,o);a<0?"-"==e.charAt(o)&&(i=!0):(i=!1,0==r?this[this.t++]=a:r+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-r)-1)<<r,this[this.t++]=a>>this.DB-r):this[this.t-1]|=a<<r,(r+=n)>=this.DB&&(r-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,0<r&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),i&&v.ZERO.subTo(this,this)},v.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},v.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},v.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},v.prototype.lShiftTo=function(e,t){var n,o=e%this.DB,i=this.DB-o,r=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<o&this.DM;for(n=this.t-1;0<=n;--n)t[n+a+1]=this[n]>>i|s,s=(this[n]&r)<<o;for(n=a-1;0<=n;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},v.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var o=e%this.DB,i=this.DB-o,r=(1<<o)-1;t[0]=this[n]>>o;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&r)<<i,t[a-n]=this[a]>>o;0<o&&(t[this.t-n-1]|=(this.s&r)<<i),t.t=this.t-n,t.clamp()}},v.prototype.subTo=function(e,t){for(var n=0,o=0,i=Math.min(e.t,this.t);n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:0<o&&(t[n++]=o),t.t=n,t.clamp()},v.prototype.multiplyTo=function(e,t){var n=this.abs(),o=e.abs(),i=n.t;for(t.t=i+o.t;0<=--i;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&v.ZERO.subTo(t,t)},v.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},v.prototype.divRemTo=function(e,t,n){var o=e.abs();if(!(o.t<=0)){var i=this.abs();if(i.t<o.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=S());var r=S(),a=this.s,s=e.s,c=this.DB-y(o[o.t-1]);0<c?(o.lShiftTo(c,r),i.lShiftTo(c,n)):(o.copyTo(r),i.copyTo(n));var l=r.t,p=r[l-1];if(0!=p){var u=p*(1<<this.F1)+(1<l?r[l-2]>>this.F2:0),m=this.FV/u,d=(1<<this.F1)/u,h=1<<this.F2,f=n.t,_=f-l,g=null==t?S():t;for(r.dlShiftTo(_,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),v.ONE.dlShiftTo(l,g),g.subTo(r,r);r.t<l;)r[r.t++]=0;for(;0<=--_;){var b=n[--f]==p?this.DM:Math.floor(n[f]*m+(n[f-1]+h)*d);if((n[f]+=r.am(0,b,n,_,0,l))<b)for(r.dlShiftTo(_,g),n.subTo(g,n);n[f]<--b;)n.subTo(g,n)}null!=t&&(n.drShiftTo(l,t),a!=s&&v.ZERO.subTo(t,t)),n.t=l,n.clamp(),0<c&&n.rShiftTo(c,n),a<0&&v.ZERO.subTo(n,n)}}},v.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},v.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},v.prototype.exp=function(e,t){if(4294967295<e||e<1)return v.ONE;var n=S(),o=S(),i=t.convert(this),r=y(e)-1;for(i.copyTo(n);0<=--r;)if(t.sqrTo(n,o),0<(e&1<<r))t.mulTo(o,i,n);else{var a=n;n=o,o=a}return t.revert(n)},v.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,o=(1<<t)-1,i=!1,r="",a=this.t,s=this.DB-a*this.DB%t;if(0<a--)for(s<this.DB&&0<(n=this[a]>>s)&&(i=!0,r=c(n));0<=a;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&o,s<=0&&(s+=this.DB,--a)),0<n&&(i=!0),i&&(r+=c(n));return i?r:"0"},v.prototype.negate=function(){var e=S();return v.ZERO.subTo(this,e),e},v.prototype.abs=function(){return this.s<0?this.negate():this},v.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},v.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)},v.prototype.mod=function(e){var t=S();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(v.ZERO)&&e.subTo(t,t),t},v.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new g(t):new b(t),this.exp(e,n)},v.ZERO=_(0),v.ONE=_(1),C.prototype.convert=O,C.prototype.revert=O,C.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},C.prototype.sqrTo=function(e,t){e.squareTo(t)},I.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=S();return e.copyTo(t),this.reduce(t),t},I.prototype.revert=function(e){return e},I.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},I.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},I.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],w=(1<<26)/E[E.length-1];v.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},v.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),o=_(n),i=S(),r=S(),a="";for(this.divRemTo(o,i,r);0<i.signum();)a=(n+r.intValue()).toString(e).substr(1)+a,i.divRemTo(o,i,r);return r.intValue().toString(e)+a},v.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),o=Math.pow(t,n),i=!1,r=0,a=0,s=0;s<e.length;++s){var c=l(e,s);c<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(a=t*a+c,++r>=n&&(this.dMultiply(o),this.dAddOffset(a,0),a=r=0))}0<r&&(this.dMultiply(Math.pow(t,r)),this.dAddOffset(a,0)),i&&v.ZERO.subTo(this,this)},v.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(v.ONE.shiftLeft(e-1),u,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(v.ONE.shiftLeft(e-1),this);else{var o=new Array,i=7&e;o.length=1+(e>>3),t.nextBytes(o),0<i?o[0]&=(1<<i)-1:o[0]=0,this.fromString(o,256)}},v.prototype.bitwiseTo=function(e,t,n){var o,i,r=Math.min(e.t,this.t);for(o=0;o<r;++o)n[o]=t(this[o],e[o]);if(e.t<this.t){for(i=e.s&this.DM,o=r;o<this.t;++o)n[o]=t(this[o],i);n.t=this.t}else{for(i=this.s&this.DM,o=r;o<e.t;++o)n[o]=t(i,e[o]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},v.prototype.changeBit=function(e,t){var n=v.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},v.prototype.addTo=function(e,t){for(var n=0,o=0,i=Math.min(e.t,this.t);n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,0<o?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()},v.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},v.prototype.dAddOffset=function(e,t){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]},v.prototype.multiplyLowerTo=function(e,t,n){var o,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;0<i;)n[--i]=0;for(o=n.t-this.t;i<o;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(o=Math.min(e.t,t);i<o;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},v.prototype.multiplyUpperTo=function(e,t,n){--t;var o=n.t=this.t+e.t-t;for(n.s=0;0<=--o;)n[o]=0;for(o=Math.max(t-this.t,0);o<e.t;++o)n[this.t+o-t]=this.am(t-o,e[o],n,0,0,this.t+o-t);n.clamp(),n.drShiftTo(1,n)},v.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(0<this.t)if(0==t)n=this[0]%e;else for(var o=this.t-1;0<=o;--o)n=(t*n+this[o])%e;return n},v.prototype.millerRabin=function(e){var t=this.subtract(v.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var o=t.shiftRight(n);E.length<(e=e+1>>1)&&(e=E.length);for(var i=S(),r=0;r<e;++r){i.fromInt(E[r]);var a=i.modPow(o,this);if(0!=a.compareTo(v.ONE)&&0!=a.compareTo(t)){for(var s=1;s++<n&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(v.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},v.prototype.clone=function(){var e=S();return this.copyTo(e),e},v.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},v.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},v.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},v.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},v.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,o=this.DB-e*this.DB%8,i=0;if(0<e--)for(o<this.DB&&(n=this[e]>>o)!=(this.s&this.DM)>>o&&(t[i++]=n|this.s<<this.DB-o);0<=e;)o<8?(n=(this[e]&(1<<o)-1)<<8-o,n|=this[--e]>>(o+=this.DB-8)):(n=this[e]>>(o-=8)&255,o<=0&&(o+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(0<i||n!=this.s)&&(t[i++]=n);return t},v.prototype.equals=function(e){return 0==this.compareTo(e)},v.prototype.min=function(e){return this.compareTo(e)<0?this:e},v.prototype.max=function(e){return 0<this.compareTo(e)?this:e},v.prototype.and=function(e){var t=S();return this.bitwiseTo(e,p,t),t},v.prototype.or=function(e){var t=S();return this.bitwiseTo(e,u,t),t},v.prototype.xor=function(e){var t=S();return this.bitwiseTo(e,m,t),t},v.prototype.andNot=function(e){var t=S();return this.bitwiseTo(e,d,t),t},v.prototype.not=function(){for(var e=S(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},v.prototype.shiftLeft=function(e){var t=S();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},v.prototype.shiftRight=function(e){var t=S();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},v.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+h(this[e]);return this.s<0?this.t*this.DB:-1},v.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=f(this[n]^t);return e},v.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},v.prototype.setBit=function(e){return this.changeBit(e,u)},v.prototype.clearBit=function(e){return this.changeBit(e,d)},v.prototype.flipBit=function(e){return this.changeBit(e,m)},v.prototype.add=function(e){var t=S();return this.addTo(e,t),t},v.prototype.subtract=function(e){var t=S();return this.subTo(e,t),t},v.prototype.multiply=function(e){var t=S();return this.multiplyTo(e,t),t},v.prototype.divide=function(e){var t=S();return this.divRemTo(e,t,null),t},v.prototype.remainder=function(e){var t=S();return this.divRemTo(e,null,t),t},v.prototype.divideAndRemainder=function(e){var t=S(),n=S();return this.divRemTo(e,t,n),new Array(t,n)},v.prototype.modPow=function(e,t){var n,o,i=e.bitLength(),r=_(1);if(i<=0)return r;n=i<18?1:i<48?3:i<144?4:i<768?5:6,o=i<8?new g(t):t.isEven()?new I(t):new b(t);var a=new Array,s=3,c=n-1,l=(1<<n)-1;if(a[1]=o.convert(this),1<n){var p=S();for(o.sqrTo(a[1],p);s<=l;)a[s]=S(),o.mulTo(p,a[s-2],a[s]),s+=2}var u,m,d=e.t-1,h=!0,f=S();for(i=y(e[d])-1;0<=d;){for(c<=i?u=e[d]>>i-c&l:(u=(e[d]&(1<<i+1)-1)<<c-i,0<d&&(u|=e[d-1]>>this.DB+i-c)),s=n;0==(1&u);)u>>=1,--s;if((i-=s)<0&&(i+=this.DB,--d),h)a[u].copyTo(r),h=!1;else{for(;1<s;)o.sqrTo(r,f),o.sqrTo(f,r),s-=2;0<s?o.sqrTo(r,f):(m=r,r=f,f=m),o.mulTo(f,a[u],r)}for(;0<=d&&0==(e[d]&1<<i);)o.sqrTo(r,f),m=r,r=f,f=m,--i<0&&(i=this.DB-1,--d)}return o.revert(r)},v.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return v.ZERO;for(var n=e.clone(),o=this.clone(),i=_(1),r=_(0),a=_(0),s=_(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&r.isEven()||(i.addTo(this,i),r.subTo(e,r)),i.rShiftTo(1,i)):r.isEven()||r.subTo(e,r),r.rShiftTo(1,r);for(;o.isEven();)o.rShiftTo(1,o),t?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);0<=n.compareTo(o)?(n.subTo(o,n),t&&i.subTo(a,i),r.subTo(s,r)):(o.subTo(n,o),t&&a.subTo(i,a),s.subTo(r,s))}return 0!=o.compareTo(v.ONE)?v.ZERO:0<=s.compareTo(e)?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},v.prototype.pow=function(e){return this.exp(e,new C)},v.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var o=t;t=n,n=o}var i=t.getLowestSetBit(),r=n.getLowestSetBit();if(r<0)return t;for(i<r&&(r=i),0<r&&(t.rShiftTo(r,t),n.rShiftTo(r,n));0<t.signum();)0<(i=t.getLowestSetBit())&&t.rShiftTo(i,t),0<(i=n.getLowestSetBit())&&n.rShiftTo(i,n),0<=t.compareTo(n)?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return 0<r&&n.lShiftTo(r,n),n},v.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=E[E.length-1]){for(t=0;t<E.length;++t)if(n[0]==E[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<E.length;){for(var o=E[t],i=t+1;i<E.length&&o<w;)o*=E[i++];for(o=n.modInt(o);t<i;)if(o%E[t++]==0)return!1}return n.millerRabin(e)};var M=v,D=function(e,t){this.modulus=new M(e,16),this.encryptionExponent=new M(t,16)},T={base64:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){if(!e)return!1;for(var t,n,o,i,r,a,s,c="",l=0;i=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(n=e.charCodeAt(l++))>>4,a=(15&n)<<2|(o=e.charCodeAt(l++))>>6,s=63&o,isNaN(n)?a=s=64:isNaN(o)&&(s=64),c+=this.base64.charAt(i)+this.base64.charAt(r)+this.base64.charAt(a)+this.base64.charAt(s),l<e.length;);return c},decode:function(e){if(!e)return!1;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,o,i,r="",a=0;t=this.base64.indexOf(e.charAt(a++)),n=this.base64.indexOf(e.charAt(a++)),o=this.base64.indexOf(e.charAt(a++)),i=this.base64.indexOf(e.charAt(a++)),r+=String.fromCharCode(t<<2|n>>4),64!=o&&(r+=String.fromCharCode((15&n)<<4|o>>2)),64!=i&&(r+=String.fromCharCode((3&o)<<6|i)),a<e.length;);return r}},G={hex:"0123456789abcdef",encode:function(e){if(!e)return!1;for(var t,n="",o=0;t=e.charCodeAt(o++),n+=this.hex.charAt(t>>4&15)+this.hex.charAt(15&t),o<e.length;);return n},decode:function(e){if(!e)return!1;e=e.replace(/[^0-9abcdef]/g,"");for(var t="",n=0;t+=String.fromCharCode(this.hex.indexOf(e.charAt(n++))<<4&240|15&this.hex.indexOf(e.charAt(n++))),n<e.length;);return t}},R={getPublicKey:function(e,t){return new D(e,t)},encrypt:function(e,t){return!!t&&(!!(e=this.pkcs1pad2(e,t.modulus.bitLength()+7>>3))&&(!!(e=e.modPowInt(t.encryptionExponent,t.modulus))&&(1==(1&(e=e.toString(16)).length)&&(e="0"+e),T.encode(G.decode(e)))))},pkcs1pad2:function(e,t){if(t<e.length+11)return null;for(var n=[],o=e.length-1;0<=o&&0<t;)n[--t]=e.charCodeAt(o--);for(n[--t]=0;2<t;)n[--t]=Math.floor(254*Math.random())+1;return n[--t]=2,n[--t]=0,new M(n)}};t.default=R},"79VW":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENENEIzRkRDOEM2MTFFNzkzQkNCNkJENzEzMDIzQ0UiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENENEIzRkNDOEM2MTFFNzkzQkNCNkJENzEzMDIzQ0UiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUZCNDhBREI0Q0IzMTFFM0FCM0ZDMUU2OTVGNUEwRUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUZCNDhBREM0Q0IzMTFFM0FCM0ZDMUU2OTVGNUEwRUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5YkRRHAAABB0lEQVR42mL8//8/AzUB47AyUBCIxYFYAojloFgBiJmBOBGXgcJQDSAsD8QyQHwSiIuAWB+IhYCYFc2iZ0AsDeeBDITibUD8Coh//0cFFf/xg9tIZjCwINnkCMQcaLb/AeJfQPwdiDmJCRcmJPY3akQKsoGM2CINjxxZBjJBxRmJNAMlltOwhOE/ID4KxJZAzILDwA9AvAibgbegaQ09UpqAuBJPpNwHYjMYB9lWMSDmR1MMso0LmqDZcBj4GZf//2JR/Bdq6F88YfgXl4HM1E422NIhC9Qioi1DDkMbIJaE5l9Yxgfl0XdQy3CFIRuppQ0ztKAQh1ogD8VyUD4oW9oNnQIWIMAAJM2E2lF9QHUAAAAASUVORK5CYII="},"7Vyq":function(e,t,n){e.exports={ContextMenuMouseOverlay:"contextmenu_ContextMenuMouseOverlay_3H7og",ContextMenuFocusContainer:"contextmenu_ContextMenuFocusContainer_2thYU",contextMenu:"contextmenu_contextMenu_3_a2Z",ContextMenuPopup:"contextmenu_ContextMenuPopup_1exss",contextMenuContents:"contextmenu_contextMenuContents_1yyTu",contextMenuItem:"contextmenu_contextMenuItem_CBC-y",active:"contextmenu_active_3vYUp",MenuSectionHeader:"contextmenu_MenuSectionHeader_x3Kot",StrongerSeparation:"contextmenu_StrongerSeparation_31Tii",UpperCase:"contextmenu_UpperCase_2T9by",PopoutSubMenu:"contextmenu_PopoutSubMenu_29Zea",PopoutSubMenuItems:"contextmenu_PopoutSubMenuItems_1cXx5"}},"7oej":function(e,t,n){},"7sd/":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"g",function(){return r}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return _});var d=n("mrSG"),h=n("q1tI"),p=n("XaMz"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.GetArgument=function(e,t){return void 0===t&&(t=!1),!e||t&&void 0===this.props.args[e]?this.props.args[""]:this.props.args[e]},t}(h.Component),i=function(n){function e(e){var t=n.call(this,e)||this;return t.state={failedToRender:!1},t}return Object(d.d)(e,n),e.prototype.componentDidCatch=function(e,t){this.setState({failedToRender:!0})},e.prototype.render=function(){if(this.state.failedToRender)return this.props.bbcode;var e=this.props.bbcode;return!0!==this.props.bSkipTrimInput&&(e=e.trim()),this.props.parser.ParseBBCode(e,this.props.context)},e}(h.PureComponent);function s(e,t,n){if(void 0===n&&(n=0),2==t.type){var o=t.text.indexOf("="),i=t.text.indexOf(" ");if(-1!=i&&(-1==o||i<o)&&(o=i),0<o){t.tag=t.text.substr(0,o);var r=t.text.substr(o);t.args=function(e){if(!e||e.length<1)return{};var t={},n="",o="",i=0,r=0;"="==e[0]&&(i=2);var a=!1;for(r++;r<e.length;r++){var s=e[r],c=!0,l=!1;switch(i){case 0:if("="==s)return{};if(" "==s)continue;i=1;break;case 1:"="!=s&&" "!=s||a||(i=" "==s?0:2,c=!1);break;case 2:" "==s?(i=0,l=!(c=!1)):'"'==s?c=!(i=4):i=3;break;case 3:case 4:(" "==s&&4!=i&&!a||'"'==s&&4==i&&!a)&&(i=0,l=!(c=!1))}c&&("\\"!=s||a?(a=!1,1==i?n+=s:3==i||4==i?o+=s:Object(p.a)(!1,"Not expecting to accumulate buffer in state %u",i)):a=!0),l&&(t[n]=o,o=n="")}0!=i&&(t[n]=o);return t}(r)}else t.args={},t.tag=t.text}e.push(t);var a=new f;return a.type=n,a}function r(e){for(var t=[],n=new f,o=!1,i=!1,r=0;r<e.length;r++){var a=e[r];switch(n.type){case 0:"["==a?(n.type=2,i=!0):(n.type=1,"\\"==a?o=!o:n.text+=a);break;case 2:case 3:i="/"==a&&i?(n.type=3,n.text="",!1):"["!=a||o?"]"!=a||o?"\\"==a?(n.text+=a,o=!o,!1):(n.text+=a,o=!1):(i&&n.ConvertMalformedNodeToText(),n=s(t,n),!1):(n.ConvertMalformedNodeToText(),n=s(t,n,2),!0);break;case 1:"["!=a||o?o="\\"==a?(o&&(n.text+=a),!o):(n.text+=a,!1):(n=s(t,n,2),i=!0)}}return 0!=n.type&&(2!=n.type&&3!=n.type||n.ConvertMalformedNodeToText(),t.push(n)),t}var a=function(){function e(e){this.m_dictComponents=e}return e.prototype.dictComponents=function(){return this.m_dictComponents},e}(),c=function(t){function e(e){return t.call(this,e)||this}return Object(d.d)(e,t),e.prototype.ParseBBCode=function(e,t){var n=r(e);return this.Parse_NotificationHandlers(n,t)},e.prototype.Parse_NotificationHandlers=function(e,t){for(var n,o=void 0,i=this.dictComponents(),r="",a=0,s=e;a<s.length;a++){var c=s[a];if(2==c.type)o||(o=[]),o.push(c);else if(3==c.type){var l=o&&o.pop();0===o.length&&l&&l.tag==c.text&&i[l.tag]&&(n=l)}else 1==c.type&&(r+=c.text)}if(n)return i[n.tag]({context:t,tagname:n.tag,args:n.args,text:r})},e}(a),l=function(){function e(){this.m_rctElements=[]}return e.prototype.AppendText=function(e,t,n){e.length&&(t?this.m_rctElements.push(h.createElement("span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e},e)):this.m_rctElements.push(e))},e.prototype.AppendNode=function(e,t){this.m_rctElements.push(e)},e.prototype.GetElements=function(e){return this.m_rctElements},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.AppendText=function(e,t,n){for(var o=e,i=[],r=o.indexOf("\n");-1!==r;r=o.indexOf("\n"))i.push(o.substr(0,r)),i.push(h.createElement("br")),o=o.substr(r+1);o.length&&i.push(o),t?this.m_rctElements.push(h.createElement.apply(h,Object(d.g)(["span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e}],i))):this.m_rctElements.push(e)},t}(l),m=function(o){function e(e,t){void 0===t&&(t=l);var n=o.call(this,e)||this;return n.m_accumulatorType=t,n}return Object(d.d)(e,o),e.prototype.ParseBBCode=function(e,t){if(e.startsWith("[pre]"))return h.createElement(this.dictComponents().pre,null,g(e));if(e.startsWith("[code]"))return h.createElement(this.dictComponents().code,null,g(e));var n=r(e);return this.Parse_BuildReactComponents(n,t)},e.prototype.Parse_BuildReactComponents=function(e,c){var l=this,p=new this.m_accumulatorType,u=void 0,m=this.dictComponents();e.forEach(function(e,t){if(1==e.type)p.AppendText(e.text,!u||0==u.length,c);else if(2==e.type)u||(u=[]),u.push({accumulator:p,node:e}),p=new l.m_accumulatorType;else if(3==e.type){var n=u&&u.pop();if(n&&n.node.tag===e.text&&m[n.node.tag]){var o=m[n.node.tag],i=u.map(function(e){return e.node.tag}),r={context:c,parentTags:i,tagname:n.node.tag,args:n.node.args,key:e.tag+"_"+t},a=h.createElement.apply(h,Object(d.g)([o,r],p.GetElements(e)));(p=n.accumulator).AppendNode(a,e)}else if(n){var s=n.accumulator;s.AppendText("["+n.node.text+"]",!1,c),p.GetElements(e).forEach(function(e){return s.AppendNode(e)}),s.AppendText("[/"+e.text+"]",!1,c),p=s}}});for(var t=function(){var e=u.pop(),t=e.accumulator;t.AppendText("["+e.node.text+"]",!1,c),p.GetElements().forEach(function(e){return t.AppendNode(e)}),p=t};u&&u.length;)t();var n=p.GetElements();return 1<n.length?h.createElement.apply(h,Object(d.g)([h.Fragment,null],n)):1==n.length?n[0]:null},e}(a),f=function(){function e(){this.type=0,this.text=""}return e.prototype.ConvertMalformedNodeToText=function(){3==this.type?this.text="[/"+this.text:2==this.type&&(this.text="["+this.text),this.type=1},e}();function _(e){return e.replace(/[\[\\]/g,"\\$&")}function g(e){for(var t="",n=0,o=r(e.trim());n<o.length;n++){var i=o[n];1==i.type&&(t+=i.text)}return t}},"8AUz":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var l=n("mrSG"),p=n("q1tI"),o=n("1VtQ"),i=n("okNM"),r=n("E7zH"),u=n("QHER"),a=n("H+H8"),m=n.n(a),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_listeners=new r.c,e.m_bNoSpace=!1,e.state={x:void 0,y:void 0,hoverPositionReady:!1},e}return Object(l.d)(e,t),e.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},e.prototype.componentDidMount=function(){this.m_listeners.AddEventListener(window,"blur",this.OnWindowBlur)},e.prototype.componentDidUpdate=function(){this.positionHover()},e.prototype.componentWillUnmount=function(){this.m_listeners.Unregister()},e.prototype.OnWindowBlur=function(e){this.props.onWindowBlur&&this.props.onWindowBlur(e)},e.prototype.render=function(){var e=this.props,t=(e.target,e.visibilityObserver),n=e.className,o=e.style,i=e.bEnablePointerEvents,r=(e.direction,e.nBodyAlignment,e.nBodyDistance,e.nAllowOffscreenPx,e.nMaxLateralMoveOnScreen,e.children),a=(e.onNoSpace,e.onWindowBlur,Object(l.f)(e,["target","visibilityObserver","className","style","bEnablePointerEvents","direction","nBodyAlignment","nBodyDistance","nAllowOffscreenPx","nMaxLateralMoveOnScreen","children","onNoSpace","onWindowBlur"])),s=Object.assign({left:this.state.x,top:this.state.y},o),c=!t||t.visible;return p.createElement("div",Object(l.a)({},a,{className:Object(u.a)(n,m.a.HoverPosition,c&&this.state.hoverPositionReady&&m.a.Ready,this.m_bNoSpace&&m.a.NoSpace,i&&m.a.EnablePointerEvents),style:s,ref:this.bindHover}),r)},e.prototype.positionHover=function(){var e,t=this.m_elHover,n=this.props.target;if(t&&n&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var o=n.ownerDocument.defaultView;if(o&&!o.closed){var i=t.querySelector(".hover_arrow.left"),r=t.querySelector(".hover_arrow.right"),a=t.querySelector(".hover_arrow.top"),s=t.querySelector(".hover_arrow.bottom"),c=n.getBoundingClientRect(),l=t.getBoundingClientRect();i&&i.setAttribute("style","display: none;"),r&&r.setAttribute("style","display: none;"),a&&a.setAttribute("style","display: none;"),s&&s.setAttribute("style","display: none;");var p=this.props.direction,u=O(p,this.props.nBodyAlignment,this.props.nBodyDistance,c,l,o.innerWidth,o.innerHeight),m=u.nLeft,d=u.nTop,h=u.nOverflow,f=u.nLateralOverflow;if(h>this.props.nAllowOffscreenPx&&"overlay"!=this.props.direction){var _=function(e){switch(e){case"right":return"left";case"left":return"right";case"bottom":return"top";case"top":return"bottom";case"overlay":return"overlay"}}(this.props.direction),g=O(_,this.props.nBodyAlignment,this.props.nBodyDistance,c,l,o.innerWidth,o.innerHeight),b=g.nLeft,v=g.nTop,S=g.nOverflow,y=g.nLateralOverflow;if(S<h&&(p=_,m=b,d=v,h=S,f=y),h>this.props.nAllowOffscreenPx)return t.setAttribute("style","display: none;"),this.m_bNoSpace=!0,void(this.props.onNoSpace&&this.props.onNoSpace())}0!==this.props.nMaxLateralMoveOnScreen&&"overlay"!==p&&(d=(e=function(e,t,n,o,i){var r=Math.max(t[0],t[1]);void 0!==e&&(r=Math.min(e,r));r=Math.max(0,r);var a=t[0]>t[1]?r:-r;"left"===n||"right"===n?o+=a:i+=a;return[o,i]}(this.props.nMaxLateralMoveOnScreen,f,p,d,m))[0],m=e[1]);var C=null;switch(p){case"left":C=r;break;case"right":C=i;break;case"top":C=s;break;case"bottom":C=a}C&&C.setAttribute("style",""),m!=this.state.x&&this.setState({x:m}),d!=this.state.y&&this.setState({y:d}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},e.defaultProps={direction:"right",nBodyAlignment:.5,nAllowOffscreenPx:10,nBodyDistance:8,nMaxLateralMoveOnScreen:void 0},Object(l.c)([o.a],e.prototype,"bindHover",null),Object(l.c)([o.a],e.prototype,"OnWindowBlur",null),e=Object(l.c)([i.a],e)}(p.Component);function O(e,t,n,o,i,r,a){var s,c,l,p,u=r,m=a;switch(e){case"right":s=o.right+n,c=d(o.top,o.height,i.height,t),l=Math.max(0,s+i.width-u),p=[Math.max(0,0-c),Math.max(0,c+i.height-m)];break;case"left":s=o.left-n-i.width,c=d(o.top,o.height,i.height,t),l=Math.max(0,0-s),p=[Math.max(0,0-c),Math.max(0,c+i.height-m)];break;case"bottom":s=d(o.left,o.width,i.width,t),c=o.bottom+n,l=Math.max(0,c+i.height-m),p=[Math.max(0,0-s),Math.max(0,s+i.width-u)];break;case"top":s=d(o.left,o.width,i.width,t),c=o.top-n-i.height,l=Math.max(0,0-c),p=[Math.max(0,0-s),Math.max(0,s+i.width-u)];break;case"overlay":s=o.left,c=o.top,p=[l=0,0]}return{nLeft:s,nTop:c,nOverflow:l,nLateralOverflow:p}}function d(e,t,n,o){return Math.max(0,Math.min(1,o))*(t-n)+e}},"8JTq":function(e,t,n){"use strict";function o(e,t){return e.m_unPID==t.m_unPID&&e.m_nBrowserID==t.m_nBrowserID}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var i={m_unPID:0,m_nBrowserID:-1}},"8o0Y":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return u});var o=n("mrSG"),i=n("q1tI"),r=n("/IDK"),a=n("EGkk"),l=n("G+3Z"),s=n("2vnA"),c=function(){function e(){}return e.GetBrowserInfoForPopup=function(e){return null},e.prototype.SetTakeFocus=function(e){this.m_fnTakeFocus=e},e}();function p(e,t,n){var o,i=void 0,r=void 0,a=t;if(a.preventDefault&&a.stopPropagation){if(a.shiftKey)return null;a.preventDefault(),a.stopPropagation(),o=a.currentTarget,i=a.clientX,r=a.clientY}else o=t;var s=new d(e,o,i,r,n);return s.Show(),s}function u(e,t,n,o){var i=new d(e,t,n,o,{bForcePopup:!0,bScreenCoordinates:!0});return i.Show(),i}var m=function(n){function e(e){var t=n.call(this)||this;return t.m_bVisible=!1,t.m_elSubmenuItem=null,t.m_timerHideSubMenu=0,t.m_ownerWindow=e,t}return Object(o.d)(e,n),e.prototype.Init=function(e,t){(e.options.bForcePopup||this.m_ownerWindow.innerWidth)<400&&this.m_ownerWindow.SteamClient&&this.m_ownerWindow.SteamClient.Window?this.m_popupContextMenu=new a.a(e,t,c.GetBrowserInfoForPopup(this.m_ownerWindow)):(this.m_embeddedElementInstance=Object(l.b)(this.m_ownerWindow.document),this.m_rctElement=i.createElement(a.g,e,t))},e.prototype.SetOnHideCallback=function(e){this.m_fnOnHideCallback=e},e.prototype.Show=function(){this.m_rctElement?this.m_embeddedElementInstance.Show(this.m_rctElement):this.m_popupContextMenu.Show(),this.m_bVisible=!0},e.prototype.Hide=function(){this.InternalHide()},e.prototype.HideIfNotInFocus=function(){this.BHasFocus()||this.BIsFocusInChildHierarchy()||this.Hide()},e.prototype.InternalHide=function(){this.m_bVisible&&(this.m_bVisible=!1,this.InternalHideSubMenu(),this.m_fnOnHideCallback&&this.m_fnOnHideCallback(),this.m_embeddedElementInstance?this.m_embeddedElementInstance.Hide(300):this.m_popupContextMenu.Close())},Object.defineProperty(e.prototype,"visible",{get:function(){return this.m_bVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.m_options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner_window",{get:function(){return this.m_ownerWindow},enumerable:!0,configurable:!0}),e.prototype.ShowSubMenu=function(e,t){return this.m_elSubmenuItem==e?(this.CancelHideSubMenuTimer(),this.m_submenu.TakeFocus(),null):(this.InternalHideSubMenu(),this.m_elSubmenuItem=e,this.m_submenu=new h(this,t(),e),this.m_submenu.Show(),this.m_submenu)},e.prototype.CancelHideSubMenuTimer=function(){0<this.m_timerHideSubMenu&&(clearTimeout(this.m_timerHideSubMenu),this.m_timerHideSubMenu=0)},e.prototype.HideSubMenu=function(){var e=this;if(this.m_submenu){if(!(0<this.m_timerHideSubMenu)){this.m_timerHideSubMenu=window.setTimeout(function(){e.InternalHideSubMenu(),e.m_timerHideSubMenu=0},150)}}else this.CancelHideSubMenuTimer()},e.prototype.InternalHideSubMenu=function(){this.CancelHideSubMenuTimer(),this.m_submenu&&(this.BIsFocusInChildHierarchy()&&this.TakeFocus(),this.m_elSubmenuItem=null,this.m_submenu.InternalHide(),this.m_submenu=null)},e.prototype.TakeFocus=function(){this.m_popupContextMenu&&this.m_popupContextMenu.Focus(),this.m_fnTakeFocus&&this.m_fnTakeFocus()},e.prototype.BInternalElementInParentHierarchy=function(e){return this.m_parentInstance&&(this.m_parentInstance.BIsChildElement(e)||this.m_parentInstance.BInternalElementInParentHierarchy(e))},e.prototype.BInternalElementInChildHierarchy=function(e){return this.m_submenu&&(this.m_submenu.BIsChildElement(e)||this.m_submenu.BInternalElementInChildHierarchy(e))},e.prototype.BIsChildElement=function(e){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(e):r.e(this.m_popupContextMenu.root_element,e)},e.prototype.BHasFocus=function(){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(this.m_ownerWindow.document.activeElement):this.m_popupContextMenu.focused},e.prototype.BIsFocusInChildHierarchy=function(){return this.m_submenu&&(this.m_submenu.BHasFocus()||this.m_submenu.BIsFocusInChildHierarchy())},e.prototype.BIsElementInMenuHierarchy=function(e){return this.BInternalElementInParentHierarchy(e)||this.BInternalElementInChildHierarchy(e)},e.prototype.BIsSubMenuVisible=function(){return!!this.m_submenu},Object(o.c)([s.x],e.prototype,"m_bVisible",void 0),e}(c),d=function(s){function c(e,t,n,o,i){var r=s.call(this,t.ownerDocument.defaultView)||this;c.sm_iActiveContextMenuInstance&&c.sm_iActiveContextMenuInstance.Hide(),(c.sm_iActiveContextMenuInstance=r).m_options=i||{};var a={element:t,clientX:n,clientY:o,instance:r,options:r.m_options,fnOnMenuItemSelected:function(){r.Hide()}};return r.Init(a,e),r}return Object(o.d)(c,s),c.prototype.Show=function(){this.m_options.bDisableMouseOverlay||c.sm_mapEmbeddedMouseOverlays.ShowElement(this.m_ownerWindow.document,i.createElement(a.f),this),s.prototype.Show.call(this)},c.prototype.Hide=function(){this.m_options.bDisableMouseOverlay||c.sm_mapEmbeddedMouseOverlays.HideElement(this.m_ownerWindow.document,this),s.prototype.Hide.call(this)},c.sm_mapEmbeddedMouseOverlays=new l.a("ContextMenuMouseOverlay"),c}(m),h=function(r){function e(e,t,n){var o=r.call(this,n.ownerDocument.defaultView)||this;o.m_parentInstance=e,o.m_options={bOverlapVertical:!0,bUseWebStyles:e.options.bUseWebStyles,strClassName:e.options.strClassName,bFitToWindow:e.options.bFitToWindow,bShiftToFitWindow:e.options.bShiftToFitWindow};var i={element:n,clientX:null,clientY:null,instance:o,options:o.m_options,fnOnMenuItemSelected:function(){o.Hide()},bSubmenu:!0};return o.Init(i,t),o}return Object(o.d)(e,r),e.prototype.Hide=function(){var e=this;this.m_popupContextMenu?window.setTimeout(function(){e.m_parentInstance.HideIfNotInFocus()},10):this.m_parentInstance.Hide()},e}(m)},"9Cmb":function(e,t,n){"use strict";var p=n("oh5H"),i=(n("mrSG"),n("q1tI"),n("XaMz"),n("0N1H"),n("1n9R"),["h1","b","u","i","img","strike","spoiler","noparse","url","list","olist","quote","code","table","tr","td","th","previewyoutube","looping_media"]);function o(e,t,n,o){void 0===t&&(t=2),void 0===n&&(n=!0),void 0===o&&(o=!1);var i,r,a=n?1024:1e3,s=a*a,c=s*a,l=c*a;return r=l<e?(i=e/l,o?"Tbps":"TB"):c<e?(i=e/c,o?"Gbps":"GB"):s<e?(i=e/s,o?"Mbps":"MB"):a<e?(i=e/a,o?"Kbps":"KB"):(i=e,o?"bps":"bytes"),i.toLocaleString(p.b.GetPreferredLocales(),{minimumFractionDigits:0,maximumFractionDigits:t})+" "+r}function a(e){return 55356<=e&&e<=57343||8205<=e&&e<=11093||12953==e||12349==e||12336==e||65039==e||12951==e||169==e||48<=e&&e<=57||35==e||42==e||10==e||174==e}function r(e){for(var t=!1,n=!1,o=!0,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(o&&48<=r&&r<=57||35==r||42==r||10==r?n=!0:a(r)&&(o=!(n=!0)),n&&0==i)n=!(t=!0);else if(n&&t)n=!(t=!0);else if(!n)return t=!1;if(20<i)return!1}return!o&&t}function s(e){var t=e.charCodeAt(0);return 65<=t&&t<=90}function c(e){if(e.length<=2)return e;for(var t=e.charAt(1),n=s(t),o=2;o<e.length;o++){var i=e.charAt(o);if(n||!s(i)){if(" "==i){0<(i=e.charAt(o+1)).length&&(t=i);break}}else n=!0,t=i}return e.charAt(0)+t}function l(e){return e?DOMParser?(new DOMParser).parseFromString(e,"text/html").documentElement.textContent:e:""}function u(e,t,n){void 0===t&&(t=i),void 0===n&&(n=" ");var o="\\[\\/?(?:"+t.join("|")+")*?.*?\\]";return e.replace(new RegExp(o,"gi"),n)}function m(e){if(e.startsWith("[emoticon")){var t=e.match(/^(?:\[emoticon\][^\[]+\[\/emoticon\]\s*)+$/);if(t&&t.length){var n=e.match(/\[emoticon\][^\[]+\[\/emoticon\]/g);return n&&n.length<=6}}return!1}n.d(t,"e",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"a",function(){return m})},"9Eit":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r=n("mrSG");function a(n){return!(!n||"object"!=typeof n||Array.isArray(n))&&Object.keys(n).every(function(e){return!(!(t=n[e])||"object"!=typeof t||!Array.isArray(t))&&t.every(o);var t})}function o(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;var t=e;return"number"==typeof t.timestamp&&("string"==typeof t.message&&(void 0===t.eError||"number"==typeof t.eError))}var i=new(function(){function e(){this.m_bInitialized=!1}return e.prototype.Init=function(o,i){return Object(r.b)(this,void 0,void 0,function(){var t,n;return Object(r.e)(this,function(e){switch(e.label){case 0:if(this.m_bInitialized)return[2];this.m_storage=o,this.m_strStorageKey="InflightMessageQueue_"+i,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o.GetObject(this.m_strStorageKey)];case 2:return(t=e.sent())?a(t)?this.m_queues=t:(console.warn("Malformed "+this.m_strStorageKey+" found in storage. Resetting."),this.m_queues={},this.WriteToStorage()):this.m_queues={},[3,4];case 3:return n=e.sent(),console.warn("Error while parsing stored message queues. Resetting.",n),this.m_queues={},this.WriteToStorage(),[3,4];case 4:return this.m_bInitialized=!0,[2]}})})},e.prototype.Update=function(e,t){0===t.length?delete this.m_queues[e]:this.m_queues[e]=t,this.WriteToStorage()},e.prototype.WriteToStorage=function(){0<Object.keys(this.m_queues).length?this.m_storage.StoreObject(this.m_strStorageKey,this.m_queues):this.m_storage.RemoveObject(this.m_strStorageKey)},e.prototype.Get=function(e){return this.m_queues[e]||[]},e}()),s=function(){function e(e){this.m_id=e,this.InitFromStorage()}return e.prototype.InitFromStorage=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=this,[4,i.Get(this.m_id)];case 1:return t.m_queue=e.sent(),[2]}})})},e.prototype.Add=function(e){var t={message:e,timestamp:Date.now()};return this.m_queue.push(t),this.UpdateStoredQueue(),this.GetItemID(t)},Object.defineProperty(e.prototype,"queued_messages",{get:function(){var t=this;return this.m_queue.map(function(e){return Object(r.a)(Object(r.a)({},e),{id:t.GetItemID(e)})})},enumerable:!0,configurable:!0}),e.prototype.RemoveItem=function(e){var t=this.GetItemIndex(e);-1!==t?(this.m_queue.splice(t,1),this.UpdateStoredQueue()):console.warn("Could not find item to remove from send queue")},e.prototype.UpdateStoredQueue=function(){i.Update(this.m_id,this.m_queue)},e.prototype.GetItemID=function(e){return e.message.slice(0,10)+"_"+e.timestamp},e.prototype.GetItemIndex=function(t){var n=this;return this.m_queue.findIndex(function(e){return n.GetItemID(e)===t})},e.prototype.SetItemFailed=function(e,t){var n=this.GetItemIndex(e);-1!==n?(this.m_queue[n].eError=t,this.UpdateStoredQueue()):console.warn("Could not find item to update from send queue")},e}()},"9PRf":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var c=n("mrSG"),l=n("q1tI"),o=n("okNM"),p=n("QHER"),i=n("F2OU"),u=n.n(i),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),Object.defineProperty(t,"hoverClass",{get:function(){return u.a.hoverParent},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.persona,n=e.animating,o=e.className,i=e.size,r=e.dim,a=Object(c.f)(e,["persona","animating","className","size","dim"]),s="";return"medium"==i?s=u.a.Medium:"large"==i&&(s=u.a.Large),l.createElement("div",Object(c.a)({className:Object(p.a)(u.a.SnoozeContainer,t.online_state,o,n&&u.a.animating,s,r&&u.a.Dim)},a),l.createElement("div",{"data-text":"Z",className:Object(p.a)(u.a.SnoozeZ,u.a.Z1)},"Z"),l.createElement("div",{"data-text":"Z",className:Object(p.a)(u.a.SnoozeZ,u.a.Z2)},"Z"),l.createElement("div",{"data-text":"Z",className:Object(p.a)(u.a.SnoozeZ,u.a.Z3)},"Z"))},t=Object(c.c)([o.a],t)}(l.Component)},AAGn:function(e,t,n){e.exports={ChatRoomContextNoPermission:"chatroommenu_ChatRoomContextNoPermission_3HB3b",SVGIcon_Lock:"chatroommenu_SVGIcon_Lock_2mfz6"}},ABqK:function(e,t,n){e.exports={StoreSaleWidgetContainer:"broadcastwidgets_StoreSaleWidgetContainer_3-tam",Bundle:"broadcastwidgets_Bundle_1chCl",WishList:"broadcastwidgets_WishList_bSzoR",Action:"broadcastwidgets_Action_2Wm1-",StoreSaleWidgetContainer_mini:"broadcastwidgets_StoreSaleWidgetContainer_mini_1ROIM",StoreSaleWidgetContainer_column:"broadcastwidgets_StoreSaleWidgetContainer_column_24DMn",StoreSaleWidgetImage:"broadcastwidgets_StoreSaleWidgetImage_3o5D5",StoreSaleWidgetImage_mini:"broadcastwidgets_StoreSaleWidgetImage_mini_2q0vP",StoreSaleWidgetImage_column:"broadcastwidgets_StoreSaleWidgetImage_column_7Bq7X",StoreSaleImage:"broadcastwidgets_StoreSaleImage_1yJtE",StoreSaleImage_mini:"broadcastwidgets_StoreSaleImage_mini_4Y7Cy",StoreSaleImage_column:"broadcastwidgets_StoreSaleImage_column_Smdgs",StoreSaleWidgetTitle:"broadcastwidgets_StoreSaleWidgetTitle_LHGly",StoreSaleWidgetRelease:"broadcastwidgets_StoreSaleWidgetRelease_1oyXP",StoreSaleWidgetShortDesc:"broadcastwidgets_StoreSaleWidgetShortDesc_3yqwc",StoreSaleWidgetShortDesc_column:"broadcastwidgets_StoreSaleWidgetShortDesc_column_1NZeo",StoreSaleWidgetShortDesc_mini:"broadcastwidgets_StoreSaleWidgetShortDesc_mini_2Jm21",StoreSaleWidgetRight:"broadcastwidgets_StoreSaleWidgetRight_2Bwn2",StoreSalePriceActionWidgetContainer:"broadcastwidgets_StoreSalePriceActionWidgetContainer_1uPIp",StoreSaleDiscountBox:"broadcastwidgets_StoreSaleDiscountBox_1Hb4z",StoreSalePriceBox:"broadcastwidgets_StoreSalePriceBox_3fccA",StoreSalePriceButton:"broadcastwidgets_StoreSalePriceButton_2rtnv",CapsuleContainer:"broadcastwidgets_CapsuleContainer_18Ts-",Muted:"broadcastwidgets_Muted_1dCO9",CapsuleBottomBar:"broadcastwidgets_CapsuleBottomBar_1gdPZ",CapsuleImage:"broadcastwidgets_CapsuleImage_1Qyc8",CapsuleTitle:"broadcastwidgets_CapsuleTitle_2S9i1",Banner:"broadcastwidgets_Banner_3b8-q",Blue:"broadcastwidgets_Blue_2_0oj",BundleContent:"broadcastwidgets_BundleContent_2tK4u",ShowContentsButton:"broadcastwidgets_ShowContentsButton_1ZnPD"}},Au4U:function(e,t,n){e.exports={BodyNoScroll:"modals_BodyNoScroll_37Qxr",BodyNoScrollDialog:"modals_BodyNoScrollDialog_2E4Pq",OverlayModal:"modals_OverlayModal_2n8Ob"}},B7ut:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});var o=n("1n9R");function i(e){var t,n,o,i=(t=e,n=new RegExp("^(steam://openurl(_external)?/)?((f|ht)tps?://)?([^@/?#]*@)?([^/#?]+)","im"),(o=t.match(n))&&5<o.length?o[6].toString():t);return i.startsWith("www.")&&(i=i.slice(4)),i}function r(e){var t=document.createElement("a");return t.href=e,0<=t.hostname.indexOf("xn--")?t.href:e}function a(e){return o.b.SNR&&0<o.b.SNR.length?e+(0<=e.indexOf("?")?"&":"?")+"snr="+o.b.SNR:e}},Cebd:function(e,t,n){e.exports={PersonaStatusIcon:"personastatusicons_PersonaStatusIcon_2rP7f",MobilePhoneIcon:"personastatusicons_MobilePhoneIcon_2ZlAW"}},D3Kh:function(e,t,n){"use strict";var S=n("mrSG"),o=n("vDqi"),y=n.n(o),i=n("2vnA"),r=n("UqDm"),C=n("XaMz"),a=n("E7zH"),m=n("oh5H"),s=n("/7KC"),c=n("1VtQ"),d=n("1n9R"),l=n("MsQV"),p=n("OTLo"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(S.d)(t,e),t}(Error),h=function(n){function e(e){var t=n.call(this)||this;return t.m_appid=e||0,t}return Object(S.d)(e,n),e.prototype.GetAppID=function(){return this.m_appid},e.prototype.parseColor=function(e){if("string"!=typeof e||!e.match(/^#[0-9a-fA-F]{6}$/))throw new u("expected color string");return[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)]},e.prototype.parseString=function(e){if("string"==typeof e)return e;throw new u("expected string")},e.prototype.parseNumber=function(e){if("number"==typeof e)return e;throw new u("expected number")},e.prototype.parseDate=function(e){if("number"==typeof e)return new Date(e);throw new u("expected timestamp")},e.prototype.parseArray=function(e,t){var n=[];if("object"!=typeof e||!Array.isArray(e))throw new u("expected array");for(var o=e.length,i=0;i<o;++i)try{n.push(t(e[i]))}catch(e){throw e.message+="\n...while parsing array element "+i,e}return n},e.prototype.parseDict=function(e,t){var n=new Map;if("object"!=typeof e||Array.isArray(e))throw new u("expected object");for(var o in e)try{n.set(o,t(e[o]))}catch(e){throw e.message+="\n...while parsing dictionary element "+o,e}return n},e.prototype.parseBracket=function(e){var t={name:this.parseString(e.name),start:this.parseDate(e.start),color:[255,0,255]};return"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"end"in e&&(t.end=this.parseDate(e.end)),"color"in e&&(t.color=this.parseColor(e.color)),t},e.prototype.parseMarker=function(e){var t={time:this.parseDate(e.time),color:[0,255,255]};return"name"in e&&(t.name=this.parseString(e.name)),"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"color"in e&&(t.color=this.parseColor(e.color)),t},e.prototype.parseBroadcastGameData=function(e){var t={appid:0,brackets:[],markers:[]};return"appid"in e&&(t.appid=this.parseNumber(e.appid)),"brackets"in e&&(t.brackets=this.parseArray(e.brackets,this.parseBracket.bind(this))),"markers"in e&&(t.markers=this.parseArray(e.markers,this.parseMarker.bind(this))),t},e.prototype.convertTime=function(e,t){return e-t/1e3},e.prototype.LocalizeTokenIfPossible=function(e,t){return p.a.Localize(this.m_appid,e,t)},e.prototype.UpdateMarkers=function(e,t){for(var n=[],o=[],i=0,r=e;i<r.length;i++){var a=r[i];a.persistent?(0<o.length&&(o[o.length-1].nTimeEnd=this.convertTime(a.Timestamp,t)),0<a.name.length&&o.push({strTemplateName:a.name,nTimeStart:this.convertTime(a.Timestamp,t),nTimeEnd:-1,color:Object(c.b)(a.color_r,a.color_g,a.color_b)})):n.push({strTemplateName:a.name,nTime:this.convertTime(a.Timestamp,t),color:Object(c.b)(a.color_r,a.color_g,a.color_b)})}return{rgMarkers:n,rgSegments:o}},e.prototype.UpdateRegions=function(e){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n];t.push({strTemplateName:i.name,min:{x:i.min_x,y:i.min_y},max:{x:i.max_x,y:i.max_y},behavior:i.behavior})}return t},e}(l.b),B=n("Y3w+");function F(e,t){var n=e.getElementsByTagName("MPD");return n&&1==n.length?n[0]:null}function x(e,t){for(var n=0;n<e.children.length;n++){var o=e.children[n];if(o.tagName==t)return o}return null}function V(e,t){var n=e.getAttribute(t);if(!n)return null;var o=new Date(n);return"[object Date]"===Object.prototype.toString.call(o)?o:null}function U(e,t){var n=e.getAttribute(t);if(!n)return null;var o=0,i=n.match(/(\d*)H/);return i&&(o+=60*parseFloat(i[1])*60),(i=n.match(/(\d*)M/))&&(o+=60*parseFloat(i[1])),(i=n.match(/(\d*\.?\d*)S/))&&(o+=parseFloat(i[1])),o}function H(e,t){var n=e.getAttribute(t);return n?parseInt(n):null}function W(e,t){var n=e.getAttribute(t);return n||""}function z(e,t,n){return e=(e=e.replace("$RepresentationID$",t)).replace("$Number$",n.toString())}function f(e){return 0==e.rgRoles.length||0<=e.rgRoles.findIndex(function(e){return"main"==e})}function _(e){return e?1e3==e.segmentTemplate.nTimeScale?e.segmentTemplate.nDuration:e.segmentTemplate.nDuration/e.segmentTemplate.nTimeScale*1e3:0}function g(e,t){var n=_(e);return Math.floor(t/n)+1}var b,v,O=function(){function e(){this.m_nMinBufferTime=0,this.m_dtAvailabilityStartTime=null,this.m_dtPublishTime=null,this.m_nMinimumUpdatePeriod=0,this.m_nTimeShiftBufferDepth=0,this.m_dtMediaPresentationDuration=null,this.m_strBaseURL="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_rgPeriods=null,this.m_tsLiveContentStart=0}return e.prototype.GetType=function(){return this.m_strType},e.prototype.GetMinimumUpdatePeriod=function(){return this.m_nMinimumUpdatePeriod},e.prototype.GetAvailabilityStartTime=function(){return this.m_dtAvailabilityStartTime},e.prototype.GetPeriods=function(){return this.m_rgPeriods},e.prototype.GetBaseURL=function(){return this.m_strBaseURL},e.prototype.GetTimeShiftBufferDepth=function(){return this.m_nTimeShiftBufferDepth},e.prototype.GetMinBufferTime=function(){return this.m_nMinBufferTime},e.prototype.IsLiveContent=function(){return"dynamic"==this.GetType()},e.prototype.GetAdaptationByTrackID=function(e){if(!this.m_rgPeriods||0==this.m_rgPeriods.length)return null;for(var t=0,n=this.m_rgPeriods[0].rgAdaptationSets;t<n.length;t++){var o=n[t];if(e==o.strID)return o}return null},e.prototype.GetVideoAdaption=function(){for(var e=0,t=this.m_rgPeriods[0].rgAdaptationSets;e<t.length;e++){var n=t[e];if(n.bContainsVideo)return n}return null},e.prototype.GetStartTime=function(){return!this.IsLiveContent()&&0<this.m_rgPeriods.length?this.m_rgPeriods[0].nStart:0},e.prototype.GetEndTime=function(){return!this.IsLiveContent()&&0<this.m_rgPeriods.length?this.GetStartTime()+this.m_rgPeriods[0].nDuration:Number.MAX_VALUE},e.prototype.GetLowestRepresentation=function(e){var t=this.GetAdaptationByTrackID(e);if(!t)return null;for(var n=t.rgRepresentations[0],o=0,i=t.rgRepresentations;o<i.length;o++){var r=i[o];r.nBandwidth<n.nBandwidth&&(n=r)}return n},e.prototype.GetStatsLink=function(){return this.m_strStatsLink},e.prototype.GetStalledLink=function(){return this.m_strStalledLink},e.prototype.GetEventLink=function(){return this.m_strEventLogLink},e.prototype.StartLiveContentNow=function(e){this.m_tsLiveContentStart=performance.now()-e},e.prototype.GetDurationSinceStarted=function(){return performance.now()-this.m_tsLiveContentStart},e.prototype.ParseRepresentation=function(e,t){var n=t,o={strID:W(e,"id"),strMimeType:W(e,"mimeType"),strCodecs:W(e,"codecs"),nBandwidth:H(e,"bandwidth")};if(n.bContainsVideo){if(o.nWidth=H(e,"width"),o.nHeight=H(e,"height"),o.nFrameRate=H(e,"frameRate"),!(o.strID&&o.strMimeType&&o.strCodecs&&o.nBandwidth))return Object(B.c)("MPD - Representation Video Data Missing"),null}else if(n.bContainsAudio){o.nAudioSamplingRate=H(e,"audioSamplingRate");var i=x(e,"AudioChannelConfiguration");if(i&&(o.nAudioChannels=H(i,"value")),o.nAudioChannels||(o.nAudioChannels=2),!(o.strID&&o.strMimeType&&o.strCodecs&&o.nAudioSamplingRate&&o.nAudioChannels))return Object(B.c)("MPD - Representation Audio Data Missing"),null}return o},e.prototype.BParse=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=F(t);if(!n)return!1;var o=n.getAttribute("type");if(this.m_nMinBufferTime=U(n,"minBufferTime"),"dynamic"==o){if(this.m_strType="dynamic",this.m_dtAvailabilityStartTime=V(n,"availabilityStartTime"),this.m_dtPublishTime=V(n,"publishTime"),this.m_nMinimumUpdatePeriod=U(n,"minimumUpdatePeriod"),this.m_nTimeShiftBufferDepth=U(n,"timeShiftBufferDepth"),!(this.m_dtAvailabilityStartTime&&this.m_dtPublishTime&&this.m_nMinimumUpdatePeriod&&this.m_nMinBufferTime&&this.m_nTimeShiftBufferDepth))return!1}else{if("static"!=o)return Object(B.c)("MPD - Unknown type"),!1;if(this.m_strType="static",this.m_dtMediaPresentationDuration=V(n,"mediaPresentationDuration"),!this.m_nMinBufferTime||!this.m_dtMediaPresentationDuration)return Object(B.c)("MPD - Missing Buffer Time or Presentation Duration"),!1}var i=x(n,"BASEURL");i&&(this.m_strBaseURL=i.textContent);var r=x(n,"Analytics");r&&(this.m_strStatsLink=W(r,"statslink"),this.m_strStalledLink=W(r,"stalledlink"),this.m_strEventLogLink=W(r,"eventlink"));var a=t.getElementsByTagName("Period");if(0==a.length)return!1;var s=a[0],c={strID:W(s,"id"),nStart:U(s,"start"),nDuration:U(s,"duration"),rgAdaptationSets:[]};if(!c.strID||null===c.nStart)return Object(B.c)("MPD - Missing Period Information."),!1;this.m_rgPeriods=[],this.m_rgPeriods.push(c);for(var l,p,u,m=s.getElementsByTagName("AdaptationSet"),d=0;d<m.length;d++){var h=m[d],f=W(h,"description"),_=W(h,"lang"),g={bSegmentAlignment:(l=h,p="segmentAlignment",u=void 0,u=l.getAttribute(p),u?"true"==(u=u.toLowerCase())||"false"!=u&&null:null),bIsClosedCaption:"text/vtt"==W(h,"mimeType"),strLanguage:W(h,"lang"),bContainsVideo:!1,bContainsAudio:!1,bContainsGame:!1,strDescription:f||_,strForceSub:W(h,"forceSub"),strID:W(h,"id"),rgRoles:[],rgRepresentations:[],thumbnails:null,segmentTemplate:null};if(c.rgAdaptationSets.push(g),g.bIsClosedCaption){g.rgRoles.push("subtitle");for(var b=h.getElementsByTagName("Role"),v=0;v<b.length;v++){(j=W(b[v],"value"))&&g.rgRoles.push(j)}for(var S=h.getElementsByTagName("Representation"),y=0;y<S.length;y++){var C={strID:W(N=S[y],"id"),nBandwidth:H(N,"bandwidth"),strClosedCaptionFile:""},O=x(N,"BaseURL"),I=O?O.textContent:"";if(!I)return Object(B.c)("Closed Caption File has no BaseURL for (id): "+C.strID),!1;C.strClosedCaptionFile=this.m_strBaseURL+z(I,C.strID,0),g.rgRepresentations.push(C)}}else{if(!g.bSegmentAlignment)return Object(B.c)("MPD - Segment Alignment Missing"),!1;for(var E=h.getElementsByTagName("ContentComponent"),w=0;w<E.length;w++){var M=W(E[w],"contentType");"video"==M&&(g.bContainsVideo=!0),"audio"==M&&(g.bContainsAudio=!0),"game"==M&&(g.bContainsGame=!0)}if(g.bContainsVideo){var D=x(h,"Thumbnails");if(D){var T=H(D,"sheet"),G=H(D,"period");g.thumbnails={nPeriod:G,strTemplate:W(D,"template"),nSheet:T,nSheetSeconds:T*G}}}var R=h.getElementsByTagName("Role");for(w=0;w<R.length;w++){var j;(j=W(R[w],"value"))&&g.rgRoles.push(j)}var L=h.getElementsByTagName("SegmentTemplate");if(0==L.length)return Object(B.c)("MPD - Segment Template Missing"),!1;var A=L[0];g.segmentTemplate={nTimeScale:H(A,"timescale"),nDuration:H(A,"duration"),nStartNumber:H(A,"startNumber"),strMedia:W(A,"media"),strInitialization:""};var k=g.segmentTemplate;if(g.bContainsGame?k.strInitialization=k.strMedia:k.strInitialization=W(A,"initialization"),!(k.nTimeScale&&k.nDuration&&k.nStartNumber&&k.strMedia&&k.strInitialization))return Object(B.c)("MPD - Segment Template Data Missing"),!1;var P=h.getElementsByTagName("Representation");for(w=0;w<P.length;w++){var N=P[w];if(!(C=this.ParseRepresentation(N,g)))return!1;g.rgRepresentations.push(C)}}}return!0},e.prototype.BUpdate=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=F(t);if(!n)return!1;if(this.IsLiveContent()){var o=t.getElementsByTagName("Period");if(0==o.length)return!1;for(var i=o[0].getElementsByTagName("AdaptationSet"),r=0;r<i.length;r++){var a=i[r],s=W(a,"id"),c=this.GetAdaptationByTrackID(s);if(c){var l=a.getElementsByTagName("SegmentTemplate");if(0==l.length)return Object(B.c)("MPD - Segment Template Missing"),!1;var p=l[0];c.segmentTemplate.strMedia=W(p,"media");var u=a.getElementsByTagName("Representation");if(1<u.length)for(var m=0;m<u.length;m++){for(var d=u[m],h=this.ParseRepresentation(d,c),f=!0,_=0,g=c.rgRepresentations;_<g.length;_++){var b=g[_];if(h.strID==b.strID){f=!1;break}}f&&c.rgRepresentations.push(h)}break}}}var v=x(n,"Analytics");return v&&(this.m_strStatsLink=W(v,"statslink"),this.m_strStalledLink=W(v,"stalledlink"),this.m_strEventLogLink=W(v,"eventlink")),!0},e}();(v=b||(b={}))[v.None=0]="None",v[v.Append=1]="Append",v[v.Remove=2]="Remove";var I,E,w=function(){function e(e,t,n,o){this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_sourceBuffer=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_eBufferUpdate=b.None,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bRemoveBufferState=!1,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_schNextDownload=new a.b,this.m_xhrDownload=null,this.m_listeners=new a.c,this.m_rgDownloadLog=[],this.m_nCurDownloadProgress=0,this.m_nCurDownloadBitrate=0,this.m_nNumConsecutiveDownloadGones=0,this.m_statsGameData=null,this.m_callbacks=e,this.m_mpd=t,this.m_adaptation=n,this.m_stats=o}return e.prototype.SetMediaSource=function(e){this.m_mediaSource=e},e.prototype.SetBufferMS=function(e){this.m_nTrackBufferMS=e},e.prototype.GetRepresentationsCount=function(){return this.m_adaptation.rgRepresentations.length},e.prototype.GetRepresentationByID=function(e){for(var t=0,n=this.m_adaptation.rgRepresentations;t<n.length;t++){var o=n[t];if(o.strID==e)return o}return null},e.prototype.GetNumConsecutiveDownloadGones=function(){return this.m_nNumConsecutiveDownloadGones},e.prototype.ContainsVideo=function(){return this.m_adaptation.bContainsVideo},e.prototype.ContainsAudio=function(){return this.m_adaptation.bContainsAudio},e.prototype.ContainsGame=function(){return this.m_adaptation.bContainsGame},e.prototype.GetAdaptation=function(){return this.m_adaptation},e.prototype.GetBandwidthRequired=function(){return this.m_representation.nBandwidth},e.prototype.BIsCurrentRepresentation=function(e){return e&&e.strID==this.m_representation.strID},e.prototype.GetSourceBufferTimeRanges=function(){return this.m_sourceBuffer.buffered},e.prototype.GetEstimatedAudioRate=function(){return this.m_representation&&this.ContainsAudio()?this.m_representation.nBandwidth:0},e.prototype.GetDebugName=function(){var e=[];return this.ContainsVideo()?e.push("Video"):this.ContainsAudio()?e.push("Audio"):this.ContainsGame()&&e.push("Game"),e.join(" & ")},e.prototype.GetMaxSegment=function(){if(this.m_mpd.IsLiveContent())return Number.MAX_VALUE;var e=this.m_mpd.GetEndTime();return g(this.m_adaptation,1e3*e)-1},e.prototype.GetAmountBufferedInPlayerMS=function(e){if(!this.m_sourceBuffer)return 0;var t=this.m_sourceBuffer.buffered;if(0==t.length)return 0;e<t.start(0)&&(e=t.start(0)),e>t.end(0)&&(e=t.end(0));var n=t.end(0)-e;return Math.floor(1e3*n)},e.prototype.GetAmountBufferedMS=function(e){for(var t=this.GetAmountBufferedInPlayerMS(e),n=0,o=this.m_rgBufferedSegments;n<o.length;n++){t+=o[n].nDurationMS}return t},e.prototype.ChangeRepresentation=function(e){if(this.m_adaptation.rgRepresentations.indexOf(e)<0)return null;if(this.m_representation==e)return null;if(this.ContainsVideo()&&Object(B.c)(this.GetDebugName()+" changing representation to "+(e.nHeight||0)+"p at "+Math.ceil(e.nBandwidth/1e3)+"KB for segment "+this.m_nNextSegment),this.m_representation=e,this.m_bNeedInitSegment=!this.ContainsGame(),this.m_stats.SetRepresentation(e),this.ContainsGame())return e;if(!this.m_sourceBuffer){var t=e.strMimeType+";codecs="+e.strCodecs;this.m_sourceBuffer=this.m_mediaSource.addSourceBuffer(t),Object(B.c)(t),this.m_listeners.AddEventListener(this.m_sourceBuffer,"updateend",this.OnSourceBufferUpdateEnd),this.m_listeners.AddEventListener(this.m_sourceBuffer,"error",this.OnSourceBufferError),this.m_listeners.AddEventListener(this.m_sourceBuffer,"abort",this.OnSourceBufferAbort)}return e},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_sourceBuffer=null,this.ForceStopDownloads(),this.m_eBufferUpdate=b.None,this.m_bRemoveBufferState=!1,this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_rgDownloadLog=[],this.m_stats=null,this.m_rgGameDataFrames=[],this.m_statsGameData=null},e.prototype.GetActiveDownloads=function(){return this.m_xhrDownload?1:0},e.prototype.GetActiveDownloadProgress=function(){return this.GetActiveDownloads()?this.m_nCurDownloadProgress:0},e.prototype.OnSourceBufferUpdateEnd=function(e){var t=this.m_callbacks.GetCurrentPlayTime(),n=this.GetAmountBufferedInPlayerMS(t);Object(B.c)(this.GetDebugName()+" OnSourceBufferUpdateEnd: [playback="+t+"][buffered="+n+"][start="+this.GetBufferedStart()+"][end="+this.GetBufferedEnd()+"]");var o=this.m_eBufferUpdate;this.m_eBufferUpdate=b.None,o==b.Append&&this.m_callbacks.OnSegmentDownloaded(this),this.m_bSeekInProgress&&o==b.Remove&&!this.m_bRemoveBufferState&&this.ContinueSeek(),this.UpdateBuffer()},e.prototype.OnSourceBufferError=function(e){console.log("OnSourceBufferError")},e.prototype.OnSourceBufferAbort=function(e){console.log("OnSourceBufferAbort")},e.prototype.ScheduleNextDownload=function(){if(this.m_bNeedInitSegment)this.DownloadNextSegment();else if(this.m_schNextDownload.Cancel(),this.m_xhrDownload)Object(B.c)(this.GetDebugName()+" ScheduleNextDownload - download already going");else if(this.m_bSeekInProgress)Object(B.c)(this.GetDebugName()+" ScheduleNextDownload - seeking");else if(this.m_nNextSegment>this.GetMaxSegment())Object(B.c)(this.GetDebugName()+" ScheduleNextDownload - reached max segment");else{var e=this.m_callbacks.GetCurrentPlayTime(),t=this.m_callbacks.GetPlaybackRate(),n=function(e,t,n){if(!e.IsLiveContent())return 0;var o=_(t);return(n-t.segmentTemplate.nStartNumber)*o-e.GetDurationSinceStarted()}(this.m_mpd,this.m_adaptation,this.m_nNextSegment);if(0<n)return Object(B.c)(this.GetDebugName()+" ScheduleNextDownload - segment in future"),void this.m_schNextDownload.Schedule(n,this.ScheduleNextDownload);var o=this.GetAmountBufferedMS(e);if(1<t&&(o/=t),o<4e4)return Object(B.c)(this.GetDebugName()+" ScheduleNextDownload - download now"),void this.DownloadNextSegment();var i=1.1*_(this.m_adaptation),r=this.GetAmountBufferedInPlayerMS(this.m_callbacks.GetCurrentPlayTime());Object(B.c)(this.GetDebugName()+" ScheduleNextDownload - buffered, schedule later [sleep="+i+"ms][buffer="+r+"]"),this.m_schNextDownload.Schedule(i,this.ScheduleNextDownload)}},e.prototype.DownloadNextSegment=function(){this.m_schNextDownload.Cancel();var e,t,n,o,i,r,a,s="",c=0;if(this.m_bNeedInitSegment)this.m_bNeedInitSegment=!1,i=this.m_mpd.GetBaseURL(),r=this.m_adaptation,a=this.m_representation,s=z(i+r.segmentTemplate.strInitialization,a.strID,0),c=0;else{if(this.m_nNextSegment<0)return void console.error("Attempting to download negative segment:",this.m_nNextSegment);e=this.m_mpd.GetBaseURL(),t=this.m_adaptation,n=this.m_representation,o=this.m_nNextSegment,s=z(e+t.segmentTemplate.strMedia,n.strID,o),c=_(this.m_adaptation),this.m_nNextSegment++}this.DownloadSegment(this.m_representation.strID,s,c)},e.prototype.DownloadSegment=function(_,g,b,v){return void 0===v&&(v=performance.now()),Object(S.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c,l,p,u,m,d,h,f=this;return Object(S.e)(this,function(e){switch(e.label){case 0:Object(C.a)(null===this.m_xhrDownload,"Trying to download another segment while a download is already in flight"),this.m_schNextDownload.Cancel(),Object(B.c)("Downloading: "+g),t=null,n=performance.now(),o=y.a.CancelToken.source(),e.label=1;case 1:return e.trys.push([1,3,,4]),this.m_nCurDownloadProgress=0,this.m_xhrDownload=o,i={cancelToken:this.m_xhrDownload.token,timeout:15e3,responseType:"arraybuffer",onDownloadProgress:function(e){f.m_nCurDownloadProgress=e.loaded/e.total,f.m_nCurDownloadBitrate=8*e.loaded*1e3/Math.max(1,performance.now()-n)}},this.ContainsGame()&&(i.responseType="json"),[4,y.a.get(g,i)];case 2:return t=e.sent(),[3,4];case 3:return r=e.sent(),Object(B.c)("Failed to download segment: "+r),t=r.response,[3,4];case 4:return this.m_xhrDownload&&this.m_xhrDownload==o?(a=performance.now(),s=Math.floor(performance.now()-n),c=t?t.status:0,this.m_xhrDownload=null,this.m_bSeekInProgress?(this.ContinueSeek(),[2]):t&&200==t.status?(this.m_nNumConsecutiveDownloadGones=0,this.ContainsGame()?(u=t.data,this.m_rgGameDataFrames||(this.m_rgGameDataFrames=[]),m=Number.MIN_VALUE,d=Number.MIN_VALUE,0<this.m_rgGameDataFrames.length&&(m=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].pts,d=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].gdi),(h=u.frame)&&(h.pts&&h.gamedata&&h.gdi?h.pts<=m?Object(B.c)("Invalid game pts"):h.gdi!=d&&this.m_rgGameDataFrames.push(h):Object(B.c)("Invalid game data")),this.TrimGameDataIfNecessary(),this.m_statsGameData={nAppID:u.appid,ulBroadcastRelayID:u.broadcastrelayid,nSegmentID:u.segmentid}):(l=new Uint8Array(t.data),this.m_rgBufferedSegments.push({nDurationMS:b,data:l,representationStrID:_}),this.LogDownload(n,l.length),this.UpdateBuffer(),p=l.length/1e3,Object(B.c)("HTTP "+c+" ("+s+"ms, "+Math.floor(p)+"k): "+g)),this.ScheduleNextDownload(),[2]):this.ContainsGame()?(this.ScheduleNextDownload(),[2]):(this.m_stats.LogSegmentDownloadFailure(s,t?t.status:444),9e3<a-v?(Object(B.c)(this.GetDebugName()+" HTTP download failed.. stopping loader: "+(a-v)+"ms"),this.DownloadFailed()):410==c?(this.m_nNumConsecutiveDownloadGones+=1,Object(B.c)(this.GetDebugName()+" HTTP download gone.. informing the player: "+(a-v)+"ms"),this.DownloadGone()):this.m_schNextDownload.Schedule(500,function(){return f.DownloadSegment(_,g,b,v)}),[2])):[2]}})})},e.prototype.DownloadFailed=function(){this.m_callbacks.OnSegmentDownloadFailed(this)},e.prototype.DownloadGone=function(){this.m_callbacks.OnSegmentDownloadGone(this)},e.prototype.TrimGameDataIfNecessary=function(){},e.prototype.UpdateBuffer=function(){if(this.m_eBufferUpdate==b.None)if(this.m_bRemoveBufferState)this.RemoveAllBuffers();else if(this.m_sourceBuffer)if(0<this.m_rgBufferedSegments.length)try{this.m_eBufferUpdate=b.Append;var e=this.m_rgBufferedSegments[0];this.m_sourceBuffer.appendBuffer(e.data),this.m_rgBufferedSegments.splice(0,1)}catch(e){"QuotaExceededError"===e.name?(this.m_eBufferUpdate=b.None,Object(B.c)(this.GetDebugName()+" Buffer - QuotaExceededError")):Object(B.c)(this.GetDebugName()+" Buffer - Exception",e)}else{var t=performance.now();if(!this.m_bSeekInProgress&&1e4<t-this.m_tsLastBufferRemove){var n=this.GetBufferedStart(),o=this.m_callbacks.GetCurrentPlayTime()-40;if(n<o){var i=Math.min(this.GetBufferedEnd(),o);return void(i!=n&&(this.m_eBufferUpdate=b.Remove,this.m_sourceBuffer.remove(n,i),this.m_tsLastBufferRemove=t))}}}else Object(B.c)("No source buffer?")},e.prototype.RemoveAllBuffers=function(){this.m_rgBufferedSegments=[];var e=0;if(this.m_sourceBuffer)for(var t=this.m_sourceBuffer.buffered,n=0;n<t.length;n++)e<t.end(n)&&(e=t.end(n));this.m_bRemoveBufferState=!1,this.m_eBufferUpdate=b.Remove,0!=e?this.m_sourceBuffer.remove(0,e+1):this.OnSourceBufferUpdateEnd(null)},e.prototype.GetBufferedStart=function(){return this.m_sourceBuffer&&this.m_sourceBuffer.buffered&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.start(0):0},e.prototype.GetBufferedEnd=function(){return this.m_sourceBuffer&&this.m_sourceBuffer.buffered&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.end(0):0},e.prototype.ForceStopDownloads=function(){this.m_schNextDownload.Cancel(),this.m_xhrDownload&&(this.m_xhrDownload.cancel(),this.m_xhrDownload=null)},e.prototype.ForceRestartDownload=function(){this.ForceStopDownloads(),this.ScheduleNextDownload()},e.prototype.Seek=function(e){var t=this.GetBufferedStart(),n=this.GetBufferedEnd(),o=e<t||n<e;if(0==t&&0==n&&(o=!0),Object(B.c)(this.GetDebugName()+" making an "+(o?"unbuffered":"buffered")+" seek to "+e),this.m_bSeekInProgress||o||this.m_bNeedInitSegment){this.m_bSeekInProgress=!0,this.ForceStopDownloads();var i=g(this.m_adaptation,1e3*e);if(this.m_nNextSegment=Math.min(i,this.GetMaxSegment()),Object(B.c)("Seek To Next Segment: "+this.m_nNextSegment+" at approx. "+Object(B.d)((this.m_nNextSegment-1)*_(this.m_adaptation)/1e3)+" seconds."),this.ContainsGame())return this.m_bSeekInProgress=!1,this.m_rgGameDataFrames=[],void this.ScheduleNextDownload();this.m_bRemoveBufferState=!0,this.UpdateBuffer()}else this.ScheduleNextDownload()},e.prototype.ContinueSeek=function(){this.m_bSeekInProgress&&(this.m_eBufferUpdate==b.Remove||this.m_bRemoveBufferState||(this.m_bSeekInProgress=!1,this.ScheduleNextDownload()))},e.prototype.BHasEnoughBuffered=function(e){return!this.m_bSeekInProgress&&(!!this.ContainsGame()||(this.GetAmountBufferedInPlayerMS(e)>=this.m_nTrackBufferMS||this.m_nNextSegment>=this.GetMaxSegment()))},e.prototype.LogDownload=function(e,t){4<=this.m_rgDownloadLog.length&&this.m_rgDownloadLog.shift();var n=performance.now()-e;n<=0||(this.m_rgDownloadLog.push({cubData:t,nDownloadMS:n}),this.m_stats.LogDownload(t,n))},e.prototype.GetDownloadHistory=function(){return this.m_rgDownloadLog},e.prototype.GetAvgDownloadRate=function(){for(var e=0,t=0,n=0,o=this.m_rgDownloadLog;n<o.length;n++){var i=o[n];e+=i.nDownloadMS,t+=i.cubData}return e<=0?this.m_nCurDownloadBitrate&&0<this.GetActiveDownloads()?this.m_nCurDownloadBitrate:0:8*t*1e3/e},e.prototype.GetGameDataFrames=function(){return this.m_rgGameDataFrames},e.prototype.GetLatestGameDataFrameAppID=function(){return this.m_statsGameData&&this.m_statsGameData.nAppID?this.m_statsGameData.nAppID:0},Object(S.c)([c.a],e.prototype,"OnSourceBufferUpdateEnd",null),Object(S.c)([c.a],e.prototype,"OnSourceBufferError",null),Object(S.c)([c.a],e.prototype,"OnSourceBufferAbort",null),Object(S.c)([c.a],e.prototype,"ScheduleNextDownload",null),Object(S.c)([c.a],e.prototype,"DownloadNextSegment",null),Object(S.c)([c.a],e.prototype,"DownloadFailed",null),Object(S.c)([c.a],e.prototype,"DownloadGone",null),e}(),M=n("s+DT"),D=n("9Cmb"),T=1e6,G=function(){return function(){this.playback_speed=1}}(),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(S.d)(t,e),t}(G),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(S.d)(t,e),t}(G),L=function(){function e(){this.m_steamIDBroadcast="",this.m_steamIDViewer="",this.m_broadcastID="",this.m_ulViewerToken="",this.m_host="",this.m_strBroadcastOrigin="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_allTimeSnapshot=new A(0),this.m_rgSnapShots=new Array(new A(0)),this.m_videoResolution=0,this.m_audioRate=0,this.m_audioChannel=0,this.m_frameRate=0,this.m_strBufferingVideoResolution="0x0@0",this.m_nPlaybackVideoResolution=0,this.m_strPlaybackVideoResolution="0x0",this.m_htmlVideoResolution=0,this.m_strHtmlVideoDisplay="",this.m_nAudioBandwidth=0,this.m_nVideoBandwidth=0,this.m_nBandwidthRequired=0,this.m_nCurBandwidthVideo=0,this.m_nAudioBufferedMS=0,this.m_nVideoBufferedMS=0,this.m_nActiveDownloads=0,this.m_nVideoDownloadProgress=0,this.m_videoBufferedRanges=null,this.m_audioBufferedRanges=null,this.m_nSegmentDurationMS=0,this.m_nPlaybackRate=0,this.m_nTimeToFirstFrameMS=-1,this.m_fpsMonitor=new P}return e.prototype.GetBytesReceivedToDisplay=function(){return Object(D.e)(this.m_allTimeSnapshot.m_nBytesReceived,1)},e.prototype.GetBufferingResolutionToDisplay=function(){return this.m_strBufferingVideoResolution},e.prototype.GetPlaybackResolutionToDisplay=function(){return this.m_strPlaybackVideoResolution},e.prototype.GetHTMLVideoResolutionToDisplay=function(){return this.m_strHtmlVideoDisplay},e.prototype.GetDroppedFramesToDisplay=function(){return this.m_allTimeSnapshot.m_nFramesDropped+"/"+this.m_allTimeSnapshot.m_nFramesDecoded},e.prototype.GetStalledEventsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nStallEvents)},e.prototype.GetFailedDownloadsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nFailedSegments)},e.prototype.GetNumBufferedVideoRanges=function(){return this.m_videoBufferedRanges?this.m_videoBufferedRanges.length:0},e.prototype.GetNumBufferedAudioRanges=function(){return this.m_audioBufferedRanges?this.m_audioBufferedRanges.length:0},e.prototype.GetBufferedVideoSegmentForDisplay=function(e){return this.m_videoBufferedRanges&&e<this.m_videoBufferedRanges.length?Object(B.d)(this.m_videoBufferedRanges.start(e))+" - "+Object(B.d)(this.m_videoBufferedRanges.end(e)):Object(m.c)("#DASHPlayerStats_VideoNoRangeInformation")},e.prototype.GetBufferedAudioSegmentForDisplay=function(e){return this.m_audioBufferedRanges&&e<this.m_audioBufferedRanges.length?Object(B.d)(this.m_audioBufferedRanges.start(e))+" - "+Object(B.d)(this.m_audioBufferedRanges.end(e)):Object(m.c)("#DASHPlayerStats_AudioNoRangeInformation")},e.prototype.GetBandwidthStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nBandwidthMin/T).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nBandwidthMax/T).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageBandwidth()/T).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nBandwidthMin?e.m_nBandwidthMin:Math.min(e.m_nBandwidthMin,t.m_nBandwidthMin))/T).toFixed(3)+" / "+(Math.max(e.m_nBandwidthMax,t.m_nBandwidthMax)/T).toFixed(3)+" / "+(e.GetAverageBandwidthFromTwo(t)/T).toFixed(3)},e.prototype.GetDownloadTimeStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMinMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMaxMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageDownloadTime()/1e3).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nSegmentDownloadTimeMinMS?e.m_nSegmentDownloadTimeMinMS:Math.min(e.m_nSegmentDownloadTimeMinMS,t.m_nSegmentDownloadTimeMinMS))/1e3).toFixed(3)+" / "+(Math.max(e.m_nSegmentDownloadTimeMaxMS,t.m_nSegmentDownloadTimeMaxMS)/1e3).toFixed(3)+" / "+(e.GetAverageDownloadTimeFromTwo(t)/1e3).toFixed(3)},e.prototype.BHasFrameInformation=function(){return 0<this.m_allTimeSnapshot.m_nFramesDecoded},e.prototype.GetBandwidthRequiredToDisplay=function(){return(this.m_nBandwidthRequired/T).toFixed(3)},e.prototype.GetBandwithVideoToDisplay=function(){return(this.m_nCurBandwidthVideo/T).toFixed(3)},e.prototype.GetContentServerToDisplay=function(){return this.m_host},e.prototype.GetVideoBufferedToDisplay=function(){return(this.m_nVideoBufferedMS/1e3).toFixed(3)},e.prototype.GetAudioBufferedToDisplay=function(){return(this.m_nAudioBufferedMS/1e3).toFixed(3)},e.prototype.GetActiveDownloadsToDisplay=function(){return String(this.m_nActiveDownloads)},e.prototype.GetVideoDownloadProgressToDisplay=function(){return this.m_nVideoDownloadProgress?String(Math.round(100*this.m_nVideoDownloadProgress))+"%":"100%"},e.prototype.GetTimeToFirstFrameToDisplay=function(){return-1==this.m_nTimeToFirstFrameMS?"Unknown":String(this.m_nTimeToFirstFrameMS)},e.prototype.GetPersistentFrameDropsForDisplay=function(){return String(this.m_fpsMonitor.BIsDroppingFrames())},e.prototype.GetCurrentFPSForDisplay=function(){return this.m_fpsMonitor.BHasCurrentFPS()?this.m_fpsMonitor.GetCurrentFPS().toFixed(1):Object(m.c)("#DASHPlayerStats_Tracking")},e.prototype.GetPlaybackRateForDisplay=function(){return this.m_nPlaybackRate.toFixed(1)+"x"},e.prototype.GetFPSMonitor=function(){return this.m_fpsMonitor},e.prototype.SetHTMLVideoPlayerDisplay=function(e,t,n,o){this.m_htmlVideoResolution!=o&&(this.m_htmlVideoResolution=o,this.m_strHtmlVideoDisplay=n+"x"+o),this.m_nPlaybackVideoResolution!=t&&(this.m_nPlaybackVideoResolution=t,this.m_strPlaybackVideoResolution=e+"x"+t)},e.prototype.SetVideoPlaybackResolution=function(e,t,n){0==this.m_videoResolution&&(this.m_allTimeSnapshot.m_nInitialVideoResolution=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nInitialVideoResolution=t),this.m_strBufferingVideoResolution=e+"x"+t+"@"+n,this.m_videoResolution=t,this.m_frameRate=n},e.prototype.SetRepresentation=function(e){e&&(e.nAudioSamplingRate?(this.m_audioRate=Math.round(e.nBandwidth/1e3),this.m_audioChannel=e.nAudioChannels,this.m_nAudioBandwidth=e.nBandwidth):e.nFrameRate&&(this.SetVideoPlaybackResolution(e.nWidth,e.nHeight,e.nFrameRate),this.m_nVideoBandwidth=e.nBandwidth),this.m_nBandwidthRequired=this.m_nAudioBandwidth+this.m_nVideoBandwidth)},e.prototype.SetCurrentVideoBandwidth=function(e){this.m_nCurBandwidthVideo=e},e.prototype.SetSegmentDurationMS=function(e){this.m_nSegmentDurationMS=e},e.prototype.SetBroadcasterAndViewerInfo=function(e,t,n,o){this.m_steamIDBroadcast=e,this.m_steamIDViewer=t,this.m_broadcastID=n,this.m_ulViewerToken=o},e.prototype.SetAnalyticLinks=function(e,t,n){this.m_strStatsLink=e,this.m_strStalledLink=t,this.m_strEventLogLink=n},e.prototype.SetVideoInitializationURL=function(e){var t=new URL(e);this.m_host=t.hostname,this.m_strBroadcastOrigin=t.searchParams.get("broadcast_origin")||"";var n=this.m_strBroadcastOrigin.indexOf(":");-1!==n&&(this.m_strBroadcastOrigin=this.m_strBroadcastOrigin.substr(0,n))},e.prototype.SetAudioRate=function(e){this.m_audioRate=e},e.prototype.CaptureFrequentlyUpdatingInformation=function(e,t){var n=this.ExtractFrameInfo(e);this.LogFrameInfo(n),this.LogBufferDuration(t,e)},e.prototype.LogDownload=function(e,t){this.m_allTimeSnapshot.SegmentReceived(e,t),this.m_rgSnapShots[this.m_rgSnapShots.length-1].SegmentReceived(e,t)},e.prototype.LogSegmentDownloadFailure=function(e,t){this.m_allTimeSnapshot.m_nFailedSegments+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nFailedSegments+=1,this.m_allTimeSnapshot.m_nLastSegementDownloadStatus=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus=t,this.LogDownload(0,e)},e.prototype.LogVideoError=function(e){},e.prototype.LogVideoOnCanPlay=function(e){-1===this.m_nTimeToFirstFrameMS&&(this.m_nTimeToFirstFrameMS=Date.now()-this.m_allTimeSnapshot.m_timeMS)},e.prototype.LogErrorEvent=function(e,t){},e.prototype.ReportVideoStalled=function(e,t){if(0!=this.m_strStalledLink.length){var n=this.FindBehindSegmentLoader(e,t);if(n){this.m_allTimeSnapshot.m_nStallEvents+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nStallEvents+=1;var o=new j;this.GatherCommonStats(o,t,n.GetBandwidthRequired(),n.GetAvgDownloadRate()),o.last_segment_response=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus,o.audio_stalled=n.ContainsAudio(),this.CaptureActiveDownloads(e),o.active_downloads=this.m_nActiveDownloads,o.vid_down_progress=this.m_nVideoDownloadProgress;for(var i=n.GetDownloadHistory(),r=0,a=i.length-1;0<=a&&r<3;--a)o["segment"+ ++r+"_bytes"]=i[a].cubData,o["segment"+r+"_time"]=Math.round(i[a].nDownloadMS)/1e3;this.SendReportToServer(o,this.m_strStalledLink)}else Object(B.c)("DASHStats: Did not find any audio or video loaders")}},e.prototype.FindBehindSegmentLoader=function(e,t){for(var n=!1,o=!1,i=t.currentTime,r=null,a=null,s=0,c=e;s<c.length;s++){var l=c[s];a=l.ContainsAudio()?l:a,r=l.ContainsVideo()?l:a,l.BHasEnoughBuffered(i)&&(o=o||l.ContainsAudio(),n=n||l.ContainsVideo())}return o=o||null==a,!n||n&&o?r:a},e.prototype.ExtractFrameInfo=function(e){var t=0,n=0;if(e.getVideoPlaybackQuality)try{var o=e.getVideoPlaybackQuality();n=o.totalVideoFrames,t=o.droppedVideoFrames}catch(e){Object(B.c)("Browser does not support HTMLVideoElement.getVideoPlaybackQuality()",e.message)}else e.webkitDecodedFrames?(n=e.webkitDecodedFrames,t=e.webkitDroppedFrames):e.webkitDecodedFrameCount&&(n=e.webkitDecodedFrameCount,t=e.webkitDroppedFrameCount);return{framesDecoded:n,framesDropped:t}},e.prototype.LogFrameInfo=function(e){this.m_allTimeSnapshot.m_nFramesDecoded=e.framesDecoded,this.m_allTimeSnapshot.m_nFramesDropped=e.framesDropped;var t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];if(1==this.m_rgSnapShots.length)t.m_nFramesDecoded=e.framesDecoded,t.m_nFramesDropped=e.framesDropped;else{var n=this.m_rgSnapShots[this.m_rgSnapShots.length-2];t.m_nFramesDecoded=e.framesDecoded-n.m_nFramesDecoded,t.m_nFramesDropped=e.framesDropped-n.m_nFramesDropped}},e.prototype.LogBufferDuration=function(e,t){for(var n=this.m_nActiveDownloads=0,o=e;n<o.length;n++){var i=o[n];i.ContainsAudio()?(this.m_nAudioBufferedMS=i.GetAmountBufferedMS(t.currentTime),this.m_audioBufferedRanges=i.GetSourceBufferTimeRanges()):i.ContainsVideo()&&(this.m_nVideoBufferedMS=i.GetAmountBufferedMS(t.currentTime),this.m_videoBufferedRanges=i.GetSourceBufferTimeRanges()),this.m_nActiveDownloads+=i.GetActiveDownloads(),i.ContainsVideo()&&(this.m_nVideoDownloadProgress=i.GetActiveDownloadProgress())}this.m_nPlaybackRate=t.playbackRate},e.prototype.CaptureActiveDownloads=function(e){for(var t=this.m_nActiveDownloads=0,n=e;t<n.length;t++){var o=n[t];this.m_nActiveDownloads+=o.GetActiveDownloads(),o.ContainsVideo()&&(this.m_nVideoDownloadProgress=o.GetActiveDownloadProgress())}},e.prototype.ReportPlayerStats=function(e,t){if(0!=this.m_strStatsLink.length){var n=this.ExtractFrameInfo(t);if(n.framesDecoded!=this.m_allTimeSnapshot.m_nFramesDecoded||0!=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nBytesReceived){this.LogFrameInfo(n),this.LogBufferDuration(e,t);var o=new R,i=this.m_rgSnapShots[this.m_rgSnapShots.length-1];o.frames_decoded=i.m_nFramesDecoded,o.frames_dropped=i.m_nFramesDropped,o.bytes_received=i.m_nBytesReceived,o.seconds_delta=Math.round((Date.now()-i.m_timeMS)/1e3),o.failed_segments=i.m_nFailedSegments,o.bw_min=i.m_nBandwidthMin,o.bw_max=i.m_nBandwidthMax,o.audio_buffer=Math.round(this.m_nAudioBufferedMS/1e3),o.video_buffer=Math.round(this.m_nVideoBufferedMS/1e3),o.seg_time_avg=Math.round(i.GetAverageDownloadTime())/1e3,o.seg_time_min=Math.round(i.m_nSegmentDownloadTimeMinMS)/1e3,o.seg_time_max=Math.round(i.m_nSegmentDownloadTimeMaxMS)/1e3,o.initial_vid_res=i.m_nInitialVideoResolution,o.ttff=this.m_nTimeToFirstFrameMS,o.seg_duration=this.m_nSegmentDurationMS,this.GatherCommonStats(o,t,this.m_nBandwidthRequired,i.GetAverageBandwidth()),this.CreateNewEmptySnapshot(t.videoHeight),this.SendReportToServer(o,this.m_strStatsLink)}else this.CreateNewEmptySnapshot(t.videoHeight)}},e.prototype.SendReportToServer=function(a,s){return Object(S.b)(this,void 0,void 0,function(){var t,n,o,i,r;return Object(S.e)(this,function(e){for(t=new URL(s),n=new FormData,o=0,i=Object.keys(a);o<i.length;o++)r=i[o],n.append(r,a[r]);return n.append("l",t.searchParams.get("l")),n.append("e",t.searchParams.get("e")),n.append("h",t.searchParams.get("h")),Object(B.c)("CDASHStats Sending Report to Server",a),y.a.post(s,n).catch(function(e){Object(B.c)("Failed to upload stats: ",e)}),[2]})})},e.prototype.CreateNewEmptySnapshot=function(e){5<=this.m_rgSnapShots.length&&this.m_rgSnapShots.shift(),this.m_rgSnapShots.push(new A(e))},e.prototype.GatherCommonStats=function(e,t,n,o){e.steamid=this.m_steamIDViewer,e.host=this.m_host,e.playback_position=Math.round(t.currentTime),e.video_res=this.m_videoResolution,e.audio_rate=this.m_audioRate,e.audio_ch=this.m_audioChannel,e.bw_required=n,e.bw_avg=Math.round(o),e.broadcast_accountid=this.m_steamIDBroadcast?new M.a(this.m_steamIDBroadcast).GetAccountID():0,e.useragent=window.navigator.userAgent,e.sessionid=d.b.SESSIONID,e.broadcast_origin=this.m_strBroadcastOrigin},Object(S.c)([i.x],e.prototype,"m_allTimeSnapshot",void 0),Object(S.c)([i.x],e.prototype,"m_strBufferingVideoResolution",void 0),Object(S.c)([i.x],e.prototype,"m_strPlaybackVideoResolution",void 0),Object(S.c)([i.x],e.prototype,"m_strHtmlVideoDisplay",void 0),Object(S.c)([i.x],e.prototype,"m_nBandwidthRequired",void 0),Object(S.c)([i.x],e.prototype,"m_nCurBandwidthVideo",void 0),Object(S.c)([i.x],e.prototype,"m_nAudioBufferedMS",void 0),Object(S.c)([i.x],e.prototype,"m_nVideoBufferedMS",void 0),Object(S.c)([i.x],e.prototype,"m_nActiveDownloads",void 0),Object(S.c)([i.x],e.prototype,"m_nVideoDownloadProgress",void 0),Object(S.c)([i.x],e.prototype,"m_videoBufferedRanges",void 0),Object(S.c)([i.x],e.prototype,"m_audioBufferedRanges",void 0),Object(S.c)([i.x],e.prototype,"m_nPlaybackRate",void 0),Object(S.c)([i.g],e.prototype,"SetVideoPlaybackResolution",null),Object(S.c)([i.g],e.prototype,"SetRepresentation",null),Object(S.c)([i.g],e.prototype,"SetCurrentVideoBandwidth",null),Object(S.c)([i.g],e.prototype,"CaptureFrequentlyUpdatingInformation",null),Object(S.c)([i.g],e.prototype,"LogDownload",null),Object(S.c)([i.g],e.prototype,"LogSegmentDownloadFailure",null),Object(S.c)([i.g],e.prototype,"LogFrameInfo",null),Object(S.c)([i.g],e.prototype,"LogBufferDuration",null),e}(),A=function(){function e(e){this.m_timeMS=Date.now(),this.m_nBytesReceived=0,this.m_nInitialVideoResolution=0,this.m_nFailedSegments=0,this.m_nStallEvents=0,this.m_nEntries=0,this.m_nSegmentDownloadTimeTotalMS=0,this.m_nSegmentDownloadTimeMaxMS=0,this.m_nSegmentDownloadTimeMinMS=0,this.m_nBandwidthTotal=0,this.m_nBandwidthMin=0,this.m_nBandwidthMax=0,this.m_nLastSegementDownloadStatus=200,this.m_nFramesDecoded=0,this.m_nFramesDropped=0,this.m_nInitialVideoResolution=e}return e.prototype.GetAverageBandwidth=function(){return this.m_nBandwidthTotal/Math.max(1,this.m_nEntries)},e.prototype.GetAverageDownloadTime=function(){return this.m_nSegmentDownloadTimeTotalMS/Math.max(1,this.m_nEntries)},e.prototype.GetAverageBandwidthFromTwo=function(e){return(e.m_nBandwidthTotal+this.m_nBandwidthTotal)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.GetAverageDownloadTimeFromTwo=function(e){return(e.m_nSegmentDownloadTimeTotalMS+this.m_nSegmentDownloadTimeTotalMS)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.SegmentReceived=function(e,t){if(this.m_nBytesReceived+=e,!(e<1024)){var n=Math.round(8*e*1e3/Math.max(t,1));0==this.m_nEntries?(this.m_nSegmentDownloadTimeMinMS=t,this.m_nBandwidthMin=n):(this.m_nSegmentDownloadTimeMinMS=Math.min(t,this.m_nSegmentDownloadTimeMinMS),this.m_nBandwidthMin=Math.min(n,this.m_nBandwidthMin)),this.m_nBandwidthMax=Math.max(n,this.m_nBandwidthMax),this.m_nSegmentDownloadTimeMaxMS=Math.max(t,this.m_nSegmentDownloadTimeMaxMS),this.m_nBandwidthTotal+=n,this.m_nSegmentDownloadTimeTotalMS+=t,this.m_nEntries+=1}},Object(S.c)([i.x],e.prototype,"m_nBytesReceived",void 0),Object(S.c)([i.x],e.prototype,"m_nFailedSegments",void 0),Object(S.c)([i.x],e.prototype,"m_nStallEvents",void 0),Object(S.c)([i.x],e.prototype,"m_nSegmentDownloadTimeMaxMS",void 0),Object(S.c)([i.x],e.prototype,"m_nSegmentDownloadTimeMinMS",void 0),Object(S.c)([i.x],e.prototype,"m_nBandwidthMin",void 0),Object(S.c)([i.x],e.prototype,"m_nBandwidthMax",void 0),Object(S.c)([i.x],e.prototype,"m_nFramesDecoded",void 0),Object(S.c)([i.x],e.prototype,"m_nFramesDropped",void 0),Object(S.c)([i.g],e.prototype,"SegmentReceived",null),e}(),k=function(){function e(){}return e.prototype.reset=function(e,t){this.bDropReading=e,this.nTotalDecodedFrames=t},e}(),P=function(){function e(){this.k_nTestFrequencyMS=1e3,this.k_nSlidingWindow=6,this.k_nDroppedFramesThreshold=1,this.k_nFailThreshold=3,this.k_nIgnoreReadingAroundResizeMS=2e3,this.m_schTracker=new a.b,this.m_rgResultsWindow=[],this.m_nLastResizeMS=0,this.m_bDroppingFrameDetected=!1,this.m_nCurrentFPS=0}return e.prototype.StartTracking=function(e){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading),this.m_fnRequestDecoded=e,this.m_lastFrameInfo=this.m_fnRequestDecoded(),this.m_bDroppingFrameDetected=!1},e.prototype.BHasCurrentFPS=function(){return 0!=this.m_nCurrentFPS},e.prototype.GetCurrentFPS=function(){return this.m_nCurrentFPS},e.prototype.BIsDroppingFrames=function(){return this.m_bDroppingFrameDetected},e.prototype.SetWindowResized=function(){this.m_nLastResizeMS=Date.now()},e.prototype.BIsInResizeTimeWindow=function(){return this.m_nLastResizeMS&&Date.now()-this.m_nLastResizeMS<this.k_nIgnoreReadingAroundResizeMS},e.prototype.Close=function(){this.m_schTracker.Cancel(),this.m_rgResultsWindow=[],this.m_bDroppingFrameDetected=!1},e.prototype.LogResizeAction=function(){this.m_nLastResizeMS=Date.now()},e.prototype.TakeReading=function(){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading);var e=!1,t=this.m_fnRequestDecoded();this.BIsInResizeTimeWindow()||(e=0<this.m_lastFrameInfo.framesDropped&&t.framesDropped-this.m_lastFrameInfo.framesDropped>this.k_nDroppedFramesThreshold),this.AppendReading(e,t.framesDecoded),this.m_bDroppingFrameDetected=this.ComputeDroppingFrames(),this.m_nCurrentFPS=t.framesDecoded-this.m_lastFrameInfo.framesDecoded-(t.framesDropped-this.m_lastFrameInfo.framesDropped),this.m_lastFrameInfo=t},e.prototype.ComputeDroppingFrames=function(){return this.m_rgResultsWindow.length==this.k_nSlidingWindow&&this.m_rgResultsWindow.filter(function(e){return e.bDropReading}).length>=this.k_nFailThreshold},e.prototype.AppendReading=function(e,t){var n;(n=this.m_rgResultsWindow.length>=this.k_nSlidingWindow?this.m_rgResultsWindow.shift():new k).reset(e,t),this.m_rgResultsWindow.push(n)},Object(S.c)([i.x],e.prototype,"m_bDroppingFrameDetected",void 0),Object(S.c)([i.x],e.prototype,"m_nCurrentFPS",void 0),Object(S.c)([i.g.bound],e.prototype,"TakeReading",null),e}(),N=n("ujHl");(E=I||(I={}))[E.HAVE_NOTHING=0]="HAVE_NOTHING",E[E.HAVE_METADATA=1]="HAVE_METADATA",E[E.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",E[E.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",E[E.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA";var q=function(){function e(e,t){void 0===t&&(t=!1),this.m_elVideo=null,this.m_strMPD="",this.m_strHLS="",this.m_schUpdateMPD=new a.b,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_rgLoaders=[],this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_bIsBuffering=!0,this.m_nSeekingToTime=-1,this.m_listeners=new a.c,this.m_bFirstPlay=!0,this.m_schGameDataEventTrigger=new a.b,this.m_schReportPlayerTrigger=new a.b,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new a.b,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats=new L,this.m_bClosing=!1,this.m_hlsTimeOffset=0,this.m_bUserPlayChoice=!0,this.m_bUserLiveEdgeChoice=!0,this.m_schFirstFrameThrottler=new a.b,this.m_elVideo=e,this.m_schReportPlayerTrigger.Schedule(3e4,this.ReportPlayerStats),this.m_bUseHLSManifest=t}return e.prototype.CalcVideoStartRelativeToSystemClock=function(e){var t=(e?new Date(e).getTime():Date.now())-this.m_mpd.GetAvailabilityStartTime().getTime();this.m_mpd.StartLiveContentNow(t),Object(B.c)("server time: "+e)},e.prototype.PlayMPD=function(o,i){return Object(S.b)(this,void 0,void 0,function(){var t,n=this;return Object(S.e)(this,function(e){switch(e.label){case 0:return this.m_strMPD=o,this.m_strHLS=i,[4,this.DownloadMPD()];case 1:return(t=e.sent())?(this.m_mpd=new O,this.m_mpd.BParse(t.data)?(this.IsLiveContent()&&(0<this.m_mpd.GetMinimumUpdatePeriod()&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),this.CalcVideoStartRelativeToSystemClock(t.headers.date)),this.m_bUseHLSManifest?(this.m_elVideo.src=this.m_strHLS,this.m_elVideo.addEventListener("loadedmetadata",function(){n.m_bIsBuffering=!1,n.BeginPlayback()}),document.addEventListener("visibilitychange",this.OnVisibilityChange)):this.BCreateLoaders()?(this.m_stats.SetSegmentDurationMS(_(this.GetCurrentVideoAdaptation())),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_stats.SetVideoInitializationURL(this.GetCurrentVideoAdaptation().segmentTemplate.strInitialization),this.InitVideoControl()):this.CloseWithError("playbackerror","Failed to create segment loaders"),[2]):(this.CloseWithError("playbackerror","Failed to parse MPD file",this.m_strMPD),[2])):[2]}})})},e.prototype.PlayWebRTC=function(e,t,n,o,i){},e.prototype.OnVisibilityChange=function(){"visible"===document.visibilityState&&(this.m_elVideo.src=this.m_strHLS)},e.prototype.Close=function(){if(this.m_bClosing=!0,this.m_listeners.Unregister(),this.m_bUseHLSManifest&&document.removeEventListener("visibilitychange",this.OnVisibilityChange),this.StopDownloads(),this.m_elVideo&&this.m_elVideo.pause(),this.m_mediaSource){try{"closed"!=this.m_mediaSource.readyState&&this.m_mediaSource.endOfStream()}catch(e){}this.m_mediaSource=null}this.m_bIsBuffering=!0,this.m_elVideo=null,this.m_strMPD="",this.m_mpd=null,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_nSeekingToTime=-1,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats&&this.m_stats.GetFPSMonitor().Close(),this.m_stats=null,this.m_bFirstPlay=!0},e.prototype.StopDownloads=function(){this.m_xhrUpdateMPD&&(this.m_xhrUpdateMPD.cancel(),this.m_xhrUpdateMPD=null),this.m_schUpdateMPD.Cancel(),this.m_schGameDataEventTrigger.Cancel(),this.m_schReportPlayerTrigger.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_schFirstFrameThrottler.Cancel(),this.m_elVideo&&1!=this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1);for(var e=0,t=this.m_rgLoaders;e<t.length;e++){t[e].Close()}this.m_bIsBuffering=!0},e.prototype.IsBuffering=function(){return this.m_bIsBuffering},e.prototype.IsLiveContent=function(){return!!this.m_mpd&&this.m_mpd.IsLiveContent()},e.prototype.DownloadMPD=function(){return Object(S.b)(this,void 0,void 0,function(){var t,n;return Object(S.e)(this,function(e){switch(e.label){case 0:if(this.m_xhrUpdateMPD)return Object(C.a)(!1,"Multiple MPD download requests"),[2,null];t=performance.now(),e.label=1;case 1:if(!(performance.now()-t<3e4))return[3,7];n=null,e.label=2;case 2:return e.trys.push([2,4,,5]),this.m_xhrUpdateMPD=y.a.CancelToken.source(),[4,y.a.get(this.m_strMPD,{cancelToken:this.m_xhrUpdateMPD.token})];case 3:return n=e.sent(),[3,5];case 4:return e.sent(),[3,5];case 5:return this.m_xhrUpdateMPD=null,this.m_bClosing?[2,null]:n&&200==n.status?[2,n]:n&&410==n.status?(this.CloseWithError("playbackerror","Failed to download MPD: 410 Gone"),[2,null]):(Object(B.c)("Failed to download, will retry: "+this.m_strMPD),[4,Object(N.c)(200)]);case 6:return e.sent(),[3,1];case 7:return Object(B.c)("Failed to download: "+this.m_strMPD),[2,null]}})})},e.prototype.UpdateMPD=function(){return Object(S.b)(this,void 0,void 0,function(){var t;return Object(S.e)(this,function(e){switch(e.label){case 0:return[4,this.DownloadMPD()];case 1:return(t=e.sent())&&(this.m_mpd.BUpdate(t.data)?(this.CalcVideoStartRelativeToSystemClock(t.headers.date),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),0<this.m_mpd.GetMinimumUpdatePeriod()&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD)):this.CloseWithError("playbackerror","Failed to parse on Update the MPD file")),[2]}})})},e.prototype.CloseWithError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.Close(),B.c.apply(void 0,t)},e.prototype.BCreateLoaders=function(){var e=this.m_mpd.GetPeriods();if(0==e.length)return!1;var t=e[0];this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="";for(var n=0,o=t.rgAdaptationSets;n<o.length;n++){var i=o[n],r=null;if(!this.m_strVideoAdaptationID&&i.bContainsVideo&&f(i)&&(r=i,this.m_strVideoAdaptationID=i.strID),!this.m_strAudioAdaptationID&&i.bContainsAudio&&f(i)&&(r=i,this.m_strAudioAdaptationID=i.strID),!this.m_strGameAdaptationID&&i.bContainsGame&&(r=i,this.m_strGameAdaptationID=i.strID),r){var a=new w(this,this.m_mpd,r,this.m_stats);this.m_rgLoaders.push(a)}}return 0<this.m_strVideoAdaptationID.length},e.prototype.InitVideoControl=function(){var e=new MediaSource,t=URL.createObjectURL(e);this.m_elVideo.pause(),this.m_elVideo.srcObject=null,this.m_elVideo.src=t,this.m_mediaSource=e,this.m_listeners.AddEventListener(e,"sourceopen",this.OnMediaSourceOpen),this.m_listeners.AddEventListener(e,"sourceended",this.OnMediaSourceEnded),this.m_listeners.AddEventListener(e,"sourceclose",this.OnMediaSourceClose),this.m_listeners.AddEventListener(this.m_elVideo,"waiting",this.OnVideoWaiting),this.m_listeners.AddEventListener(this.m_elVideo,"error",this.OnVideoError),this.m_listeners.AddEventListener(this.m_elVideo,"canplay",this.OnVideoCanPlay),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate)},e.prototype.OnMediaSourceOpen=function(e){Object(B.c)("OnMediaSourceOpen");for(var t=0,n=this.m_rgLoaders;t<n.length;t++){n[t].SetMediaSource(this.m_mediaSource)}this.BeginPlayback()},e.prototype.OnMediaSourceEnded=function(e){Object(B.c)("OnMediaSourceEnded")},e.prototype.OnMediaSourceClose=function(e){Object(B.c)("OnMediaSourceClose")},e.prototype.OnVideoWaiting=function(e){if(!this.IsLiveContent()&&this.m_mpd&&this.m_mpd.GetEndTime()-this.GetCurrentPlayTime()<1)this.Pause();else if(!this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,this.m_elVideo.currentTime+.5)){if(this.m_elVideo&&1<this.m_elVideo.buffered.length)for(var t=this.m_elVideo.currentTime,n=this.m_elVideo.buffered,o=0;o<n.length;++o)if(Object(B.c)("OnVideoWaiting buffer "+o+" start:"+n.start(o)+" end: "+n.end(o)+" playerTime: "+t),n.start(o)<=t&&t<=n.end(o))return Object(B.c)("OnVideoWaiting - time splitting, jumping to buffer "+o),void this.Seek(n.start(o));if(this.m_stats.ReportVideoStalled(this.m_rgLoaders,this.m_elVideo),null===this.m_videoRepSelected){var i=!0,r=this.GetVideoLoader();if(r){var a=this.m_mpd.GetLowestRepresentation(this.GetCurrentVideoAdaptation().strID);a&&!r.BIsCurrentRepresentation(a)&&(r.ChangeRepresentation(a),Object(B.c)("OnVideoWaiting - Stalled, forced restart download at resolution: "+a.nWidth+"x"+a.nHeight+"@"+a.nFrameRate+" instead"),i=!1),this.Seek(this.m_elVideo.currentTime)}i&&Object(B.c)("OnVideoWaiting - Stalled, already at lowest resolution. No action taken. BHasLoader: "+(null!=r))}else Object(B.c)("OnVideoWaiting - Stalled, user explicitly chose a resolution: "+this.m_videoRepSelected.nWidth+"x"+this.m_videoRepSelected.nHeight+"@"+this.m_videoRepSelected.nFrameRate)}},e.prototype.OnVideoPause=function(e){this.OnVideoBufferProgress(),this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.OnDebugPrintEventInfoAndAvailableBuffer=function(e){var t=-1,n=this.GetVideoLoader();this.m_elVideo&&n&&(t=n.GetAmountBufferedInPlayerMS(this.m_elVideo.currentTime)),Object(B.c)("DebugMessage - Stats: "+e.type+" BufferedMS: "+t)},e.prototype.OnVideoError=function(e){Object(B.c)("OnVideoError")},e.prototype.OnVideoCanPlay=function(e){this.m_bIsBuffering||(this.m_bUserPlayChoice&&this.PlayOnElement(),this.m_stats.LogVideoOnCanPlay(e))},e.prototype.GetCurrentPlayTime=function(){return-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:this.m_bUseHLSManifest&&this.m_mpd?(0<this.m_elVideo.currentTime&&0===this.m_hlsTimeOffset&&(this.m_hlsTimeOffset=this.GetBufferedLiveEdgeTime()-this.m_elVideo.currentTime),this.m_elVideo.currentTime+this.m_hlsTimeOffset):this.m_elVideo.currentTime},e.prototype.OnVideoTimeUpdate=function(){if(this.m_bUserLiveEdgeChoice&&this.IsLiveContent()){var e=this.GetBufferedLiveEdgeTime();if(1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime<=e-4.5&&this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,e)){var t=e-this.m_elVideo.currentTime;this.m_elVideo.playbackRate=1.1,Object(B.c)("User is behind by "+t.toFixed(2)+" seconds, increasing playback speed to catch-up to live edge.")}else 1.1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime>=e-1&&(this.m_elVideo.playbackRate=1,Object(B.c)("User is caught up, returning to normal playrate"))}},e.prototype.BIsPlayerBufferedBetween=function(e,t){return 0<this.m_elVideo.buffered.length&&e>=this.m_elVideo.buffered.start(0)&&t<=this.m_elVideo.buffered.end(0)},e.prototype.GetLiveContentStartTime=function(){return this.m_mpd.GetAvailabilityStartTime()},e.prototype.GetAvailableVideoStartTime=function(){if(!this.m_mpd)return 0;var e=0;if(this.IsLiveContent()){var t=Math.floor(this.m_mpd.GetDurationSinceStarted()/1e3),n=this.GetBufferedLiveEdgeTime(),o=this.m_mpd.GetTimeShiftBufferDepth();e=s.a(t-o+10,0,n)}else e=this.m_mpd.GetStartTime();return e},e.prototype.GetBufferedLiveEdgeTime=function(){if(!this.m_mpd)return 0;return this.IsLiveContent()?Math.floor((this.m_mpd.GetDurationSinceStarted()-this.m_nTrackBufferMS)/1e3):this.m_mpd.GetEndTime()},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){this.m_bUserPlayChoice=!0,!this.IsLiveContent()&&this.m_mpd&&this.m_mpd.GetEndTime()-this.GetCurrentPlayTime()<1?this.Seek(this.m_mpd.GetStartTime()):this.Seek(this.GetCurrentPlayTime())},e.prototype.Pause=function(){this.m_bUserLiveEdgeChoice=!1,1.1==this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1),this.m_bUserPlayChoice=!1,this.m_elVideo.pause()},e.prototype.GetPlaybackRate=function(){return this.m_elVideo.paused?0:this.m_elVideo.playbackRate},e.prototype.OnSegmentDownloaded=function(e){Object(B.c)(e.GetDebugName()+" OnSegmentDownloaded"),this.UpdateVideoRepresentation(this.m_videoRepSelected),this.OnVideoBufferProgress(),e==this.GetVideoLoader()&&this.m_stats.SetCurrentVideoBandwidth(e.GetAvgDownloadRate())},e.prototype.PlayOnElement=function(){var t=this,n=this.m_bFirstPlay;this.m_bFirstPlay=!1;var e=this.m_elVideo.play();e?e.then(function(){t.m_stats.GetFPSMonitor().StartTracking(function(){return t.m_stats.ExtractFrameInfo(t.m_elVideo)})}).catch(function(e){n&&t.DispatchEvent("valve-userinputneeded")}):this.m_stats.GetFPSMonitor().StartTracking(function(){return t.m_stats.ExtractFrameInfo(t.m_elVideo)})},e.prototype.OnVideoBufferProgress=function(){if(this.IsBuffering()){for(var e=0<this.m_rgLoaders.length,t=-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:0,n=0,o=this.m_rgLoaders;n<o.length;n++){var i=o[n];if(!i.BHasEnoughBuffered(t)){e=!1;break}t=Math.max(t,i.GetBufferedStart())}e&&(this.m_bIsBuffering=!1,this.m_nSeekingToTime=-1,this.m_elVideo.currentTime!=t?this.m_elVideo.currentTime=t:this.m_elVideo.paused&&this.m_bUserPlayChoice&&this.PlayOnElement(),this.DispatchEvent("valve-bufferupdate"))}},e.prototype.OnSegmentDownloadFailed=function(e){this.StopDownloads(),this.DispatchEvent("valve-downloadfailed")},e.prototype.OnSegmentDownloadGone=function(e){this.m_bIsBuffering&&e.GetNumConsecutiveDownloadGones()<=3?this.Seek(this.GetCurrentPlayTime()+_(this.GetCurrentVideoAdaptation())/1e3):(Object(B.c)("OnSegmentDownloadGone: too many consecutive 'gone', erroring the download: "+e.GetNumConsecutiveDownloadGones()),this.OnSegmentDownloadFailed(e))},e.prototype.GetCurrentAudioAdaptationfunction=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strAudioAdaptationID):null},e.prototype.GetCurrentVideoAdaptation=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strVideoAdaptationID):null},e.prototype.GetVideoLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsVideo())return n}return null},e.prototype.GetAudioLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsAudio())return n}return null},e.prototype.GetGameLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsGame())return n}return null},e.prototype.SetTrackBufferMS=function(e){this.m_nTrackBufferMS=e;for(var t=0,n=this.m_rgLoaders;t<n.length;t++){n[t].SetBufferMS(e)}},e.prototype.BeginPlayback=function(){var e=0;if(this.IsLiveContent()){var t=_(this.GetCurrentVideoAdaptation()),n=1e3*this.m_mpd.GetMinBufferTime(),o=Math.max(t,n);this.SetTrackBufferMS(o),e=this.GetBufferedLiveEdgeTime(),Object(B.c)("Begin playback of live content [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]")}else this.SetTrackBufferMS(8e3),e=0,Object(B.c)("Begin playback of non-live content [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]");if(Object(B.c)("Starting playback at "+e),!this.m_bUseHLSManifest)for(var i=this.PickStartingVideoRepresentation(),r=0,a=this.m_rgLoaders;r<a.length;r++){var s=a[r];if(s.ContainsVideo()){s.ChangeRepresentation(i);t=_(s.GetAdaptation());this.m_schFirstFrameThrottler.Schedule(t/2,this.VerifyFirstSegementDownloadProgress)}else if(s.ContainsAudio()||s.ContainsGame()){var c=0<s.GetAdaptation().rgRepresentations.length?s.GetAdaptation().rgRepresentations[0]:null;s.ChangeRepresentation(c)}}this.Seek(e),this.GetGameLoader()&&this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)},e.prototype.VerifyFirstSegementDownloadProgress=function(){var e=this.GetVideoLoader();if(null===this.m_videoRepSelected&&e&&e.GetDownloadHistory().length<=1&&0<e.GetActiveDownloads()&&e.GetActiveDownloadProgress()<.55){var t=this.DetermineBestVideoRepresentation();t&&!e.BIsCurrentRepresentation(t)&&(e.ChangeRepresentation(t),e.ForceRestartDownload(),Object(B.c)("Video download progressing too slowly, choosing "+t.nWidth+"x"+t.nHeight+"@"+t.nFrameRate+" instead"))}},e.prototype.PickStartingVideoRepresentation=function(){var e=this.GetVideoLoader();if(!e)return null;for(var t=e.GetAdaptation(),n=null,o=e.GetRepresentationsCount()-1;0<=o;o--){var i=t.rgRepresentations[o],r=i.nFrameRate?i.nFrameRate:0;if(!(0<this.m_nLimitFPS&&r>this.m_nLimitFPS)&&(n=i,this.GetVideoPlayerHeight()<=i.nHeight))break}return n},e.prototype.DetermineBestVideoRepresentation=function(){for(var e=this.GetVideoLoader(),t=this.GetAudioLoader(),n=t&&t!=e?t.GetEstimatedAudioRate():0,o=this.GetAvgLoaderDownloadRate(),i=e.GetRepresentationsCount()-1,r=e.GetAdaptation().rgRepresentations[i],a=i-1;0<=a;a--){var s=e.GetAdaptation().rgRepresentations[a],c=(s.nBandwidth+n)*this.m_elVideo.playbackRate*1.15;if(o<c)Object(B.c)("Video select: Skipping "+a+" due to rate: [avg="+o+"][required="+c+"]");else{var l=s.nFrameRate||0;if(this.IsLiveContent()&&30<l){var p=this.m_stats.GetFPSMonitor();if(p.BIsDroppingFrames()||p.BHasCurrentFPS()&&Math.ceil(p.GetCurrentFPS())<29){Object(B.c)("Video select: Skipping "+a+" due to dropping frames and high FPS representation: [fps:"+l+"]");continue}}if(0<this.m_nLimitFPS&&l>this.m_nLimitFPS)Object(B.c)("Video select: Skipping "+a+" due to frame rate limit");else{var u=r.nHeight||0,m=s.nHeight||0,d=this.GetVideoPlayerHeight();if(0<d&&0<u)if(K(d)<m)break;r=s}}}return r},e.prototype.UpdateVideoRepresentation=function(e){if(e&&this.m_videoRepSelected==e)return null;var t=this.GetVideoLoader();if(!t)return null;if(this.IsBuffering())return null;var n=this.DetermineBestVideoRepresentation();return this.m_videoRepSelected=null,t.ChangeRepresentation(n)},e.prototype.CanSeek=function(){return!0},e.prototype.SeekAndPlay=function(e){return this.m_bUserPlayChoice=!0,this.Seek(e)},e.prototype.Seek=function(e){if(!this.m_mpd)return 0;var t=this.GetAvailableVideoStartTime(),n=this.GetBufferedLiveEdgeTime();e=s.a(e,t,n),this.m_bUserLiveEdgeChoice=n-5<=e;var o=this.m_elVideo.paused;if(o||this.m_elVideo.pause(),this.m_bUseHLSManifest)this.m_elVideo.currentTime=e-this.m_hlsTimeOffset,this.m_elVideo.play();else{this.m_bIsBuffering=!0,this.m_nSeekingToTime=e;for(var i=0,r=this.m_rgLoaders;i<r.length;i++){var a=r[i];a.ContainsGame()&&(e=this.GetBufferedLiveEdgeTime()),a.Seek(e)}this.DispatchEvent("valve-bufferupdate"),o&&this.OnVideoBufferProgress()}return e},e.prototype.JumpTime=function(e){return e+=this.GetCurrentPlayTime(),this.Seek(e)},e.prototype.GetVideoPlayerHeight=function(){return this.m_elVideo.clientHeight},e.prototype.GetAvgLoaderDownloadRate=function(){for(var e=0,t=0,n=0,o=[this.GetVideoLoader()];n<o.length;n++){var i=o[n];i&&(e+=i.GetAvgDownloadRate(),t++)}return 0==t?0:e/t},e.prototype.GameDataEventTrigger=function(){var e=this.GetGameLoader();if(e){var t=e.GetGameDataFrames(),n=-1;if(0<=(n=t.length-1)){var o=t[n];o.pts!=this.m_nGameDataLastFramePTS&&(this.m_nGameDataLastFramePTS=o.pts,o.gamedata.appid=e.GetLatestGameDataFrameAppID(),this.DispatchEvent("valve-gamedataupdate",o))}this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)}},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var n=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(n)},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=s.a(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.ReportPlayerStats=function(){this.m_stats.ReportPlayerStats(this.m_rgLoaders,this.m_elVideo),this.m_schReportPlayerTrigger.Schedule(3e5,this.ReportPlayerStats)},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_stats.CaptureFrequentlyUpdatingInformation(this.m_elVideo,this.m_rgLoaders),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.GetVideoRepresentations=function(){var e=[];if(e.push({id:"auto",displayName:"Auto",selected:null===this.m_videoRepSelected}),this.m_bUseHLSManifest)return e;var t=this.GetCurrentVideoAdaptation();if(t)for(var n=0,o=t.rgRepresentations;n<o.length;n++){var i=o[n],r=this.m_videoRepSelected&&this.m_videoRepSelected.strID==i.strID,a=i.nFrameRate;50<a&&i.nFrameRate<70?a=60:25<a&&a<35&&(a=30);var s=i.nWidth+"x"+i.nHeight+" @ "+a+"fps";e.push({id:i.strID,displayName:s,selected:r})}return e},e.prototype.SetVideoRepresentation=function(e){var t=!0,n=this.GetVideoLoader();if(e&&"auto"!=e.id){var o=n.GetRepresentationByID(e.id);o&&(t=!1,null!==this.m_videoRepSelected&&this.m_videoRepSelected.strID==o.strID||(this.m_videoRepSelected=o,n.ChangeRepresentation(o),this.Seek(this.GetCurrentPlayTime())))}t&&(this.m_videoRepSelected=null)},Object(S.c)([c.a],e.prototype,"OnVisibilityChange",null),Object(S.c)([c.a],e.prototype,"UpdateMPD",null),Object(S.c)([c.a],e.prototype,"OnMediaSourceOpen",null),Object(S.c)([c.a],e.prototype,"OnMediaSourceEnded",null),Object(S.c)([c.a],e.prototype,"OnMediaSourceClose",null),Object(S.c)([c.a],e.prototype,"OnVideoWaiting",null),Object(S.c)([c.a],e.prototype,"OnVideoPause",null),Object(S.c)([c.a],e.prototype,"OnVideoResize",null),Object(S.c)([c.a],e.prototype,"OnDebugPrintEventInfoAndAvailableBuffer",null),Object(S.c)([c.a],e.prototype,"OnVideoError",null),Object(S.c)([c.a],e.prototype,"OnVideoCanPlay",null),Object(S.c)([c.a],e.prototype,"GetCurrentPlayTime",null),Object(S.c)([c.a],e.prototype,"OnVideoTimeUpdate",null),Object(S.c)([c.a],e.prototype,"GetPlaybackRate",null),Object(S.c)([c.a],e.prototype,"OnSegmentDownloaded",null),Object(S.c)([c.a],e.prototype,"PlayOnElement",null),Object(S.c)([c.a],e.prototype,"OnSegmentDownloadFailed",null),Object(S.c)([c.a],e.prototype,"OnSegmentDownloadGone",null),Object(S.c)([c.a],e.prototype,"VerifyFirstSegementDownloadProgress",null),Object(S.c)([c.a],e.prototype,"GameDataEventTrigger",null),Object(S.c)([c.a],e.prototype,"ReportPlayerStats",null),Object(S.c)([i.g.bound],e.prototype,"CaptureStatsForDisplay",null),e}();function K(e){return e<360?480:e<480?720:4320}var Y=function(){function e(e){this.m_elVideo=null,this.m_peerConnection=null,this.m_schCandidateTimer=new a.b,this.m_listeners=new a.c,this.m_bFirstPlay=!0,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new a.b,this.m_stats=new L,this.m_elVideo=e}return e.prototype.PlayMPD=function(e){},e.prototype.PlayWebRTC=function(o,i,r,a,s){return Object(S.b)(this,void 0,void 0,function(){var t,n=this;return Object(S.e)(this,function(e){return this.m_strBroadcastSteamID=o,this.m_ulWebRTCSessionID=r,this.m_nHostCandidateGeneration=0,this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),t={iceServers:[{urls:["stun:"+a]},{urls:["turn:"+a],username:i,credential:r}],iceTransportPolicy:"relay"},this.m_peerConnection=new RTCPeerConnection(t),this.m_peerConnection.oniceconnectionstatechange=function(e){n.m_peerConnection&&(console.log("BroadcastWebRTC: ICE connection state changed to "+n.m_peerConnection.iceConnectionState),"failed"===n.m_peerConnection.iceConnectionState?n.OnWebRTCConnectionFailed():"disconnected"===n.m_peerConnection.iceConnectionState&&n.OnWebRTCConnectionRetry())}.bind(this),this.m_peerConnection.onicecandidate=function(e){if(e.candidate){var t=new FormData;t.append("broadcaststeamid",n.m_strBroadcastSteamID),t.append("webrtc_session_id",n.m_ulWebRTCSessionID),t.append("sdp_mid",e.candidate.sdpMid),t.append("sdp_mline_index",String(e.candidate.sdpMLineIndex)),t.append("candidate",e.candidate.candidate),y.a.post(d.b.CHAT_BASE_URL+"broadcast/addbroadcastwebrtccandidate",t).then(function(e){var t=e.data;t.success&&1==t.success||console.log("Failed to add a WebRTC session ICE candidate: "+String(t.success))}).catch(function(e){return console.log("Failed to add a WebRTC session ICE candidate"+e)})}}.bind(this),this.m_peerConnection.ontrack=function(e){"video"===e.track.kind&&(n.m_elVideo.src=null,n.m_elVideo.srcObject=e.streams[0],n.Play())}.bind(this),this.m_peerConnection.setRemoteDescription({type:"offer",sdp:s}).then(function(){return Object(S.b)(n,void 0,void 0,function(){var t,n,o,i,r=this;return Object(S.e)(this,function(e){switch(e.label){case 0:return n=(t=this.m_peerConnection).setLocalDescription,[4,this.m_peerConnection.createAnswer()];case 1:return[4,n.apply(t,[e.sent()])];case 2:e.sent(),(o=new FormData).append("broadcaststeamid",this.m_strBroadcastSteamID),o.append("webrtc_session_id",this.m_ulWebRTCSessionID),o.append("answer",this.m_peerConnection.localDescription.sdp),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,y.a.post(d.b.CHAT_BASE_URL+"broadcast/setbroadcastwebrtcanswer",o).then(function(e){var t=e.data;if(!t.success||1!=t.success)throw new Error(String(t.success))})];case 4:return e.sent(),[3,6];case 5:return i=e.sent(),console.log("Failed to set the WebRTC session answer: "+i),this.OnWebRTCConnectionRetry(),[2];case 6:return this.m_nCandidateUpdateIntervalMS=250,this.m_schCandidateTimer.Schedule(this.m_nCandidateUpdateIntervalMS,function(){return r.GetHostCandidates()}),[2]}})})}),[2]})})},e.prototype.GetHostCandidates=function(){return Object(S.b)(this,void 0,void 0,function(){var t,n,o=this;return Object(S.e)(this,function(e){switch(e.label){case 0:(t=new FormData).append("broadcaststeamid",this.m_strBroadcastSteamID),t.append("webrtc_session_id",this.m_ulWebRTCSessionID),t.append("candidate_generation",String(this.m_nHostCandidateGeneration)),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,y.a.post(d.b.CHAT_BASE_URL+"broadcast/getbroadcastwebrtccandidates",t).then(function(e){var t=e.data,n=t.data;if(!t.success||1!=t.success)throw new Error(String(t.success));n.candidate_generation>o.m_nHostCandidateGeneration?(n.candidates.forEach(function(e){var t=new RTCIceCandidate({sdpMid:e.sdp_mid,sdpMLineIndex:e.sdp_mline_index,candidate:e.candidate});o.m_peerConnection.addIceCandidate(t).catch(function(e){return console.error(e)})}),o.m_nHostCandidateGeneration=n.candidate_generation):0<o.m_nHostCandidateGeneration&&(o.m_nCandidateUpdateIntervalMS*=2)})];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),console.log("Failed to get WebRTC session ICE candidates"+n),this.OnWebRTCConnectionRetry(),[2];case 4:return this.m_schCandidateTimer.Schedule(this.m_nCandidateUpdateIntervalMS,function(){return o.GetHostCandidates()}),[2]}})})},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var n=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(n)},e.prototype.OnWebRTCConnectionRetry=function(){this.DispatchEvent("valve-webrtcretry")},e.prototype.OnWebRTCConnectionFailed=function(){this.DispatchEvent("valve-webrtcfailed")},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_schCandidateTimer.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_peerConnection&&(this.m_peerConnection.close(),this.m_peerConnection=null),this.m_elVideo.pause(),this.m_elVideo.srcObject=null,this.m_stats&&(this.m_stats.GetFPSMonitor().Close(),this.m_stats=null),this.m_bFirstPlay=!0},e.prototype.IsBuffering=function(){return!1},e.prototype.GetCurrentPlayTime=function(){return 0},e.prototype.GetLiveContentStartTime=function(){return null},e.prototype.GetAvailableVideoStartTime=function(){return 0},e.prototype.GetBufferedLiveEdgeTime=function(){return 0},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){var t=this,n=this.m_bFirstPlay;this.m_bFirstPlay=!1;var e=this.m_elVideo.play();e?e.then(function(){t.m_stats.GetFPSMonitor().StartTracking(function(){return t.m_stats.ExtractFrameInfo(t.m_elVideo)})}).catch(function(e){n&&t.DispatchEvent("valve-userinputneeded")}):this.m_stats.GetFPSMonitor().StartTracking(function(){return t.m_stats.ExtractFrameInfo(t.m_elVideo)})},e.prototype.Pause=function(){this.m_elVideo.pause()},e.prototype.CanSeek=function(){return!1},e.prototype.SeekAndPlay=function(e){return this.Play(),0},e.prototype.Seek=function(e){return 0},e.prototype.JumpTime=function(e){return 0},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=s.a(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.OnVideoPause=function(e){this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.GetVideoRepresentations=function(){var e=[];return e.push({id:"auto",displayName:"Auto",selected:!0}),e},e.prototype.SetVideoRepresentation=function(e){},e.prototype.IsLiveContent=function(){return!0},Object(S.c)([c.a],e.prototype,"PlayWebRTC",null),Object(S.c)([i.g.bound],e.prototype,"CaptureStatsForDisplay",null),Object(S.c)([c.a],e.prototype,"OnVideoPause",null),Object(S.c)([c.a],e.prototype,"OnVideoResize",null),e}(),J=n("XCHq");n.d(t,"b",function(){return Q}),n.d(t,"c",function(){return X}),n.d(t,"a",function(){return re});var Q,Z;(Z=Q||(Q={}))[Z.None=0]="None",Z[Z.Loading=1]="Loading",Z[Z.Ready=2]="Ready",Z[Z.Error=3]="Error";var X,$,ee=function(){function e(){this.m_steamIDBroadcast="",this.m_ulBroadcastID="",this.m_ulViewerToken="",this.m_bWebRTC=!1,this.m_eWatchState=Q.None,this.m_strStateDescription="",this.m_rgVideos=[],this.m_schManifestTimeout=new a.b,this.m_schHeartbeatTimeout=new a.b}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==Q.Error&&console.log(this.m_strStateDescription)},Object(S.c)([i.x],e.prototype,"m_ulBroadcastID",void 0),Object(S.c)([i.x],e.prototype,"m_eWatchState",void 0),Object(S.c)([i.x],e.prototype,"m_strStateDescription",void 0),Object(S.c)([i.g],e.prototype,"SetState",null),e}(),te=function(){function e(e){this.m_steamIDBroadcast="",this.m_strTitle="",this.m_strAppId="",this.m_strAppTitle="",this.m_strThumbnailUrl="",this.m_nViewerCount=0,this.m_bIsOnline=!1,this.m_schUpdateTimeout=new a.b,this.m_nRefCount=0,this.m_steamIDBroadcast=e}return Object(S.c)([i.x],e.prototype,"m_strTitle",void 0),Object(S.c)([i.x],e.prototype,"m_strAppId",void 0),Object(S.c)([i.x],e.prototype,"m_strAppTitle",void 0),Object(S.c)([i.x],e.prototype,"m_strThumbnailUrl",void 0),Object(S.c)([i.x],e.prototype,"m_nViewerCount",void 0),Object(S.c)([i.x],e.prototype,"m_bIsOnline",void 0),e}(),ne=function(){function e(){this.m_eWatchState=Q.None,this.m_strStateDescription="",this.m_rgVideos=[]}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==Q.Error&&console.log(this.m_strStateDescription)},Object(S.c)([i.x],e.prototype,"m_eWatchState",void 0),Object(S.c)([i.x],e.prototype,"m_strStateDescription",void 0),Object(S.c)([i.g],e.prototype,"SetState",null),e}(),oe=function(){function e(){this.m_mapBroadcasts=new Map,this.m_mapClips=new Map,this.m_activeVideo=null,this.m_broadcastSettings={nVolume:1,bMuted:!1,ulViewerToken:"0"},this.m_schSaveSettings=new a.b,this.m_broadcastInfos={},this.LoadBroadcastSettings()}return e.prototype.GetBroadcastState=function(e){if(e.IsBroadcastClip()){var t=this.m_mapClips.get(e.GetBroadcastClipID());return t?t.m_eWatchState:Q.None}var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return n?n.m_eWatchState:Q.None},e.prototype.GetBroadcastStateDescription=function(e){if(e.IsBroadcastClip()){var t=this.m_mapClips.get(e.GetBroadcastClipID());return t?t.m_strStateDescription:""}var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return n?n.m_strStateDescription:""},e.prototype.CreateBroadcastVideo=function(e,t,n,o){var i=this.GetOrCreateBroadcast(t),r=this.m_broadcastSettings,a=r.nVolume,s=r.bMuted,c=new ie(e,a,s,n);return c.SetBroadcastSteamID(t),i.m_rgVideos.push(c),i.m_bWebRTC=o,Object(B.a)()||Object(B.b)()||i.SetState(Q.Error,Object(m.c)("#BroadcastWatch_MinBrowser")),c},e.prototype.CreateClipVideo=function(e,t,n){var o=this.GetOrCreateClip(t),i=this.m_broadcastSettings,r=i.nVolume,a=i.bMuted,s=new ie(e,r,a,n);return s.SetBroadcastClipID(t),o.m_rgVideos.push(s),Object(B.a)()||Object(B.b)()||o.SetState(Q.Error,Object(m.c)("#BroadcastWatch_MinBrowser")),s},e.prototype.StartVideo=function(e){if(e.IsBroadcastClip()){console.log("Starting clip for "+e.GetBroadcastClipID());var t=this.m_mapClips.get(e.GetBroadcastClipID());if(!t)return;this.SetActiveVideo(e),t.m_eWatchState==Q.None?this.GetClipManifest(t,e.GetWatchLocation()):t.m_eWatchState==Q.Ready&&e.StartClip(t)}else{console.log("Starting broadcast for "+e.GetBroadcastSteamID());var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());if(!n)return;this.SetActiveVideo(e),n.m_eWatchState==Q.None?this.GetBroadcastManifest(n,e.GetWatchLocation()):n.m_eWatchState==Q.Ready&&e.StartBroadcast(n)}},e.prototype.SetActiveVideo=function(i){this.m_mapBroadcasts.forEach(function(e){for(var t=0,n=e.m_rgVideos;t<n.length;t++){var o=n[t];o!=i&&o.StopPlaybackTillUserInput()}}),this.m_mapClips.forEach(function(e){for(var t=0,n=e.m_rgVideos;t<n.length;t++){var o=n[t];o!=i&&o.StopPlaybackTillUserInput()}}),this.m_activeVideo=i},e.prototype.PauseAllVideo=function(){this.m_mapBroadcasts.forEach(function(e){for(var t=0,n=e.m_rgVideos;t<n.length;t++){n[t].StopPlaybackTillUserInput()}})},e.prototype.StopVideo=function(o){return Object(S.b)(this,void 0,void 0,function(){var t,n;return Object(S.e)(this,function(e){return t=o.GetBroadcastSteamID(),n=this.m_mapBroadcasts.get(t),o.Stop(),n&&(n.m_ulBroadcastID&&function(n,o,i){Object(S.b)(this,void 0,void 0,function(){var t;return Object(S.e)(this,function(e){switch(e.label){case 0:if(!o)return[2];(t=new FormData).append("steamid",n),t.append("broadcastid",o),t.append("viewertoken",i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,y.a.post(d.b.CHAT_BASE_URL+"broadcast/stopwatching",t)];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})})}(t,n.m_ulBroadcastID,this.m_broadcastSettings.ulViewerToken),r.d(n.m_rgVideos,function(e){return e==o}),this.RemoveBroadcastIfUnused(n)),[2]})})},e.prototype.StartInfo=function(e){var t=this.GetOrCreateBroadcastInfo(e);return t.m_nRefCount++,1===t.m_nRefCount&&this.LoadBroadcastInfo(t),t},e.prototype.StopInfo=function(e){e.m_nRefCount--,0===e.m_nRefCount&&(e.m_schUpdateTimeout.Cancel(),delete this.m_broadcastInfos[e.m_steamIDBroadcast])},e.prototype.GetOrCreateBroadcastInfo=function(e){if(!this.m_broadcastInfos[e]){var t=new te(e);this.m_broadcastInfos[e]=t}return this.m_broadcastInfos[e]},e.prototype.GetOrCreateBroadcast=function(e){var t=this.m_mapBroadcasts.get(e);return t||((t=new ee).m_steamIDBroadcast=e,t.m_eWatchState=Q.None,this.m_mapBroadcasts.set(e,t),t)},e.prototype.GetBroadcast=function(e){return this.m_mapBroadcasts.get(e)},e.prototype.GetBroadcastClip=function(e){return this.m_mapClips.get(e)},e.prototype.RemoveBroadcastIfUnused=function(e){e.m_rgVideos.length||(e.m_schHeartbeatTimeout.Cancel(),e.m_schManifestTimeout.Cancel(),this.m_mapBroadcasts.delete(e.m_steamIDBroadcast))},e.prototype.GetOrCreateClip=function(e){var t=this.m_mapClips.get(e);return t||((t=new ne).m_clipID=e,t.m_eWatchState=Q.None,this.m_mapClips.set(e,t),t)},e.prototype.LoadBroadcastInfo=function(l){return Object(S.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c=this;return Object(S.e)(this,function(e){switch(e.label){case 0:t="0",(n=this.m_mapBroadcasts.get(l.m_steamIDBroadcast))&&(t=n.m_ulBroadcastID),o={steamid:l.m_steamIDBroadcast,broadcastid:t,location:n&&n.m_rgVideos&&n.m_rgVideos[0]&&n.m_rgVideos[0].GetWatchLocation()},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,y.a.get(d.b.CHAT_BASE_URL+"broadcast/getbroadcastinfo/",{params:o})];case 2:return(i=e.sent())&&i.data?(r=i.data,l.m_strTitle=r.title,l.m_strAppId=r.appid,l.m_strAppTitle=r.app_title,l.m_strThumbnailUrl=r.thumbnail_url,l.m_nViewerCount=r.viewer_count,l.m_bIsOnline=r.is_online,!l.m_strTitle&&J.b&&(l.m_strTitle=J.b.name,l.m_strAppTitle=J.b.appName||J.b.name),(a=r.update_interval)&&"number"==typeof a&&l.m_schUpdateTimeout.Schedule(1e3*a,function(){return c.LoadBroadcastInfo(l)}),[3,4]):[2];case 3:return s=e.sent(),console.error(s),[3,4];case 4:return[2]}})})},e.prototype.GetBroadcastManifest=function(l,p,u){return void 0===u&&(u=Date.now()),Object(S.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c=this;return Object(S.e)(this,function(e){switch(e.label){case 0:l.SetState(Q.Loading,""),t={steamid:l.m_steamIDBroadcast,broadcastid:0,viewertoken:this.m_broadcastSettings.ulViewerToken,watchlocation:p,sessionid:d.b.SESSIONID,is_webrtc:l.m_bWebRTC},n=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,y.a.get(d.b.CHAT_BASE_URL+"broadcast/getbroadcastmpd/",{params:t,withCredentials:!0})];case 2:return n=e.sent(),[3,4];case 3:return o=e.sent(),console.error(o),console.log("Failed to get broadcast manifest!"),[3,4];case 4:if(!n||200!=n.status)return l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_RequestFailed")),[2];if((i=n.data).viewertoken&&this.SetViewerToken(i.viewertoken),"ready"==(r=i.success))l.SetState(Q.Ready),l.m_ulBroadcastID=i.broadcastid,l.m_ulViewerToken=this.m_broadcastSettings.ulViewerToken,l.m_bWebRTC=i.is_webrtc,l.m_data=i,this.LoadBroadcast(l),setTimeout(function(){l.m_schHeartbeatTimeout.Schedule(1e3*l.m_data.heartbeat_interval,function(){return c.HeartbeatBroadcast(l)})},3e4*Math.random());else if("waiting"==r){if(l.SetState(Q.Loading,Object(m.c)("#BroadcastWatch_WaitingForResponse")),6e4<(a=Date.now()-u))return l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_NotAvailable")),[2];s=3e4<a?i.retry:5e3,l.m_schManifestTimeout.Schedule(s,function(){return c.GetBroadcastManifest(l,p,u)})}else"waiting_for_start"==r?(l.SetState(Q.Loading,Object(m.c)("#BroadcastWatch_WaitingForStart")),l.m_schManifestTimeout.Schedule(i.retry,function(){return c.GetBroadcastManifest(l,p,u)})):"waiting_for_reconnect"==r?(l.SetState(Q.Loading,Object(m.c)("#BroadcastWatch_WaitingForReconnect")),l.m_schManifestTimeout.Schedule(i.retry,function(){return c.GetBroadcastManifest(l,p,u)})):"end"==r?l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_NotAvailable")):"noservers"==r?l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_ServerLoad")):"system_not_supported"==r?l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_SystemNotSupported")):"user_restricted"==r?l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_UserRestricted")):"poor_upload_quality"==r?l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_PoorUploadQuality")):"request_failed"==r?l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_RequestFailed")):l.SetState(Q.Error,Object(m.c)("#BroadcastWatch_NotAvailable"));return[2]}})})},e.prototype.GetClipManifest=function(r,a){return Object(S.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(S.e)(this,function(e){switch(e.label){case 0:r.SetState(Q.Loading,""),t={clipid:r.m_clipID,watchlocation:a,sessionid:d.b.SESSIONID},n=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,y.a.get(d.b.CHAT_BASE_URL+"broadcast/getclipdetails",{params:t,withCredentials:!0})];case 2:return n=e.sent(),[3,4];case 3:return o=e.sent(),console.error(o),console.log("Failed to get clip manifest!"),[3,4];case 4:return n&&200==n.status?1==(i=n.data).success?(r.SetState(Q.Ready),r.m_data=i,this.LoadClip(r)):r.SetState(Q.Error,Object(m.c)("#BroadcastWatch_RequestFailed")):r.SetState(Q.Error,Object(m.c)("#BroadcastWatch_RequestFailed")),[2]}})})},e.prototype.HeartbeatBroadcast=function(o){return Object(S.b)(this,void 0,void 0,function(){var t,n=this;return Object(S.e)(this,function(e){return(t=new FormData).append("steamid",o.m_steamIDBroadcast),t.append("broadcastid",o.m_ulBroadcastID),t.append("viewertoken",this.m_broadcastSettings.ulViewerToken),y.a.post(d.b.CHAT_BASE_URL+"broadcast/heartbeat/",t),o.m_schHeartbeatTimeout.Schedule(1e3*o.m_data.heartbeat_interval,function(){return n.HeartbeatBroadcast(o)}),[2]})})},e.prototype.LoadBroadcast=function(e){var t=this;0<=e.m_rgVideos.findIndex(function(e){return e==t.m_activeVideo})&&this.m_activeVideo.StartBroadcast(e)},e.prototype.LoadClip=function(e){var t=this;0<=e.m_rgVideos.findIndex(function(e){return e==t.m_activeVideo})&&this.m_activeVideo.StartClip(e)},e.prototype.BroadcastDownloadFailed=function(e,t){void 0===t&&(t=!0),e.Stop();var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());n&&n.m_eWatchState!=Q.Loading&&(n.m_bWebRTC&&t&&(n.m_bWebRTC=!1),this.GetBroadcastManifest(n,e.GetWatchLocation()))},e.prototype.UserInputClickVideo=function(e){if(this.m_activeVideo!=e){this.PauseAllVideo();var t=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return this.m_activeVideo=e,void this.GetBroadcastManifest(t,e.GetWatchLocation())}e.UserInputClick()},e.prototype.LoadBroadcastSettings=function(){if(window.localStorage){var e=window.localStorage.getItem("broadcastSettings");if(e){var t=JSON.parse(e);if(t){Object.assign(this.m_broadcastSettings,t);var n=this.m_broadcastSettings;n.bMuted=!!n.bMuted,n.nVolume=s.a(n.nVolume,0,1),"string"!=typeof n.ulViewerToken&&(n.ulViewerToken="0")}}}},e.prototype.SaveBroadcastSettings=function(){var e=this;window.localStorage&&this.m_schSaveSettings.Schedule(1e3,function(){try{window.localStorage.setItem("broadcastSettings",JSON.stringify(e.m_broadcastSettings))}catch(e){}})},e.prototype.SetViewerToken=function(e){this.m_broadcastSettings.ulViewerToken!=e&&(this.m_broadcastSettings.ulViewerToken=e,this.SaveBroadcastSettings())},e.prototype.SaveVolumeChange=function(e,t){this.m_broadcastSettings.nVolume==e&&this.m_broadcastSettings.bMuted==t||(this.m_broadcastSettings.nVolume=e,this.m_broadcastSettings.bMuted=t,this.SaveBroadcastSettings())},Object(S.c)([i.x],e.prototype,"m_mapBroadcasts",void 0),e}();($=X||(X={}))[$.Timeline=1]="Timeline",$[$.Minimap=2]="Minimap";var ie=function(){function e(e,t,n,o){this.m_elVideo=null,this.m_player=null,this.m_listeners=new a.c,this.m_gameDataParser=null,this.m_rgSubtitles=[],this.m_eWatchLocation=0,this.m_steamIDBroadcast=null,this.m_BroadcastInfo=null,this.m_broadcastClipID=null,this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_bOnLiveEdge=!1,this.m_nVolume=0,this.m_bMuted=!1,this.m_bUserInputNeeded=!1,this.m_bIsReplay=!1,this.m_nTimelineDuration=1800,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_editorStartTime=0,this.m_editorEndTime=0,this.m_rgMarkers=i.x.array(),this.m_rgSegments=i.x.array(),this.m_rgRegions=i.x.array(),this.m_elVideo=e,this.m_nVolume=t,this.m_bMuted=n,this.m_eWatchLocation=o}return e.prototype.SetBroadcastSteamID=function(e){this.m_steamIDBroadcast=e},e.prototype.GetBroadcastSteamID=function(){return this.m_steamIDBroadcast},e.prototype.GetWatchLocation=function(){return this.m_eWatchLocation},e.prototype.IsPaused=function(){return this.m_bPaused},e.prototype.GetPlaybackTime=function(){return this.m_nPlaybackTime},e.prototype.SetStatsViewIsVisible=function(e){this.m_player&&this.m_player.SetStatsViewIsVisible(e)},e.prototype.GetDASHPlayerStats=function(){return this.m_player.GetDASHPlayerStats()},e.prototype.BHasDASHStats=function(){return null!=this.m_player},e.prototype.IsTimelineMapActive=function(){return!1},e.prototype.CanSeek=function(){return this.m_player&&this.m_player.CanSeek()},e.prototype.IsBuffering=function(){return this.m_bBuffering},e.prototype.IsOnLiveEdge=function(){return this.m_bOnLiveEdge},e.prototype.GetVideoAvailableStartTime=function(){return this.m_nVideoStartPos},e.prototype.GetVolume=function(){return this.m_nVolume},e.prototype.GetUserInputNeeded=function(){return this.m_bUserInputNeeded},e.prototype.IsReplay=function(){return this.m_bIsReplay},e.prototype.IsBroadcastClip=function(){return null!=this.m_broadcastClipID},e.prototype.SetBroadcastClipID=function(e){this.m_broadcastClipID=e},e.prototype.GetBroadcastClipID=function(){return this.m_broadcastClipID},e.prototype.GetVideoRepresentations=function(){return this.m_player?this.m_player.GetVideoRepresentations():[]},e.prototype.SetVideoRepresentation=function(e){this.m_player.SetVideoRepresentation(e)},e.prototype.GetBroadcastInfo=function(){return this.m_BroadcastInfo},e.prototype.ListSubtitles=function(){return this.m_elVideo.textTracks},e.prototype.GetSubtitles=function(){for(var e=0;e<this.m_elVideo.textTracks.length;e++){var t=this.m_elVideo.textTracks[e];if("showing"===t.mode)return t}return null},e.prototype.SetSubtitles=function(e){for(var t=0;t<this.m_elVideo.textTracks.length;t++){var n=this.m_elVideo.textTracks[t];n.language===e?n.mode="showing":n.mode="disabled"}},e.prototype.GetBroadcastState=function(){return re.GetBroadcastState(this)},e.prototype.GetBroadcastStateDescription=function(){return re.GetBroadcastStateDescription(this)},e.prototype.InitPlayer=function(){Object(C.a)(!this.m_player,"Initialized twice?"),this.m_listeners.AddEventListener(this.m_elVideo,"playing",this.OnVideoPlaying),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-gamedataupdate",this.OnGameDataUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-downloadfailed",this.OnDownloadFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-webrtcretry",this.OnWebRTCRetry),this.m_listeners.AddEventListener(this.m_elVideo,"valve-webrtcfailed",this.OnWebRTCFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-userinputneeded",this.OnUserInputNeeded),this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_nTimelineDuration=1800,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_rgMarkers.clear(),this.m_rgSegments.clear(),this.m_bUserInputNeeded=!1,this.m_bIsReplay=!1},e.prototype.StartBroadcast=function(e){this.InitPlayer(),e.m_data.url?(this.m_player=new q(this.m_elVideo,!Object(B.a)()&&Object(B.b)()),this.m_player.PlayMPD(e.m_data.url,e.m_data.hls_url)):(this.m_player=new Y(this.m_elVideo),this.m_player.PlayWebRTC(this.m_steamIDBroadcast,e.m_ulViewerToken,e.m_data.webrtc_session_id,e.m_data.webrtc_turn_server,e.m_data.webrtc_offer_sdp)),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted);var t=this.m_player.GetDASHPlayerStats();t&&(t.SetBroadcasterAndViewerInfo(this.m_steamIDBroadcast,d.g.steamid,e.m_ulBroadcastID,e.m_ulViewerToken),Object(B.c)("DASH Stat Object",t)),this.m_BroadcastInfo=re.StartInfo(this.m_steamIDBroadcast)},e.prototype.StartClip=function(e){this.InitPlayer(),this.m_player=new q(this.m_elVideo),this.m_player.PlayMPD(e.m_data.clip_url),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted)},e.prototype.InitSubtitles=function(){var n=this;"76561198894692971"!==this.m_steamIDBroadcast&&"148618792083695635"!==this.m_steamIDBroadcast&&"148618792083694878"!==this.m_steamIDBroadcast||(this.m_rgSubtitles=d.b.SUPPORTED_LANGUAGES||[],setInterval(function(){return Object(S.b)(n,void 0,void 0,function(){var n,o;return Object(S.e)(this,function(e){switch(e.label){case 0:return[4,y.a.get("https://steamconfig.blob.core.windows.net/config/steamawards_offset.json")];case 1:return n=e.sent().data.offsetSeconds,(o=this.GetSubtitles())&&o.currentOffset!==n&&(Array.from(o.cues||[]).forEach(function(e){var t=n-(o.currentOffset||0);e.startTime+=t,e.endTime+=t}),o.currentOffset=n),[2]}})})},5e3)),this.m_rgSubtitles.forEach(function(e){var t=document.createElement("track");t.kind="subtitles",t.label=e.displayName,t.srclang=e.value,t.src="/public/steamawards_"+e.value+".vtt?t=1549644543",n.m_elVideo.appendChild(t),t.addEventListener("load",function(){n.ListSubtitles()[0].mode="disabled"})}),"english"!==d.b.LANGUAGE&&this.SetSubtitles(d.b.LANGUAGE)},e.prototype.Stop=function(){this.m_listeners.Unregister(),this.m_BroadcastInfo&&(re.StopInfo(this.m_BroadcastInfo),this.m_BroadcastInfo=null),this.m_gameDataParser=null,this.m_player&&(this.m_player.Close(),this.m_player=null)},e.prototype.TogglePlayPause=function(){!this.m_player||this.m_player.IsPaused()?this.Play():this.Pause()},e.prototype.Play=function(){console.log("Play ",this.m_steamIDBroadcast);var e=this.GetBroadcastState();e==Q.None||this.IsBroadcastClip()?re.StartVideo(this):e==Q.Ready&&(re.SetActiveVideo(this),this.m_player?this.m_player.Play():this.StartBroadcast(re.GetBroadcast(this.m_steamIDBroadcast)))},e.prototype.Pause=function(){console.log("Pause ",this.m_steamIDBroadcast),this.m_player&&this.m_player.Pause()},e.prototype.JumpTime=function(e){this.m_player.JumpTime(e)},e.prototype.Seek=function(e){this.m_player.Seek(e)},e.prototype.SeekAndPlay=function(e){this.m_player.SeekAndPlay(e)},e.prototype.JumpToLiveEdge=function(){this.m_player.IsLiveContent()?this.SeekAndPlay(this.m_player.GetBufferedLiveEdgeTime()):this.SeekAndPlay(this.m_player.GetAvailableVideoStartTime())},e.prototype.SetVolume=function(e){this.m_player&&this.m_player.SetVolume(e),this.m_nVolume=this.m_player.GetVolume(),re.SaveVolumeChange(e,this.m_bMuted)},e.prototype.SetMute=function(e){this.m_player&&this.m_player.SetMuted(e),this.m_bMuted=e,re.SaveVolumeChange(this.m_nVolume,e)},e.prototype.IsMuted=function(){return this.m_bMuted},e.prototype.OnVideoPlaying=function(){this.m_bPaused=!1,0===this.m_editorStartTime&&0===this.m_editorEndTime&&(this.m_editorStartTime=this.GetVideoAvailableStartTime(),this.m_editorEndTime=this.GetVideoAvailableStartTime()+this.GetTimelineDuration())},e.prototype.OnVideoPause=function(){this.m_bPaused=!0},e.prototype.OnVideoTimeUpdate=function(){this.IsBroadcastClip()?(this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=this.m_player.GetBufferedLiveEdgeTime(),this.m_nTimelineDuration=this.m_nVideoEndPos-this.m_nVideoStartPos,this.m_bOnLiveEdge=!1,this.m_bBuffering=this.m_player.IsBuffering()):(this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=Math.max(this.m_player.GetBufferedLiveEdgeTime(),this.m_nPlaybackTime),this.m_bBuffering=this.m_player.IsBuffering(),this.m_bOnLiveEdge=this.m_nVideoEndPos-this.m_nPlaybackTime<5,this.m_player.IsPaused()&&(this.m_bOnLiveEdge=!1))},e.prototype.OnGameDataUpdate=function(e){var t=e.detail;if(t&&"object"==typeof t.gamedata){this.m_gameDataParser&&this.m_gameDataParser.GetAppID()==t.gamedata.__appid||(this.m_gameDataParser=new h(t.gamedata.__appid));var n=this.m_player.GetLiveContentStartTime().getTime(),o=this.m_gameDataParser.UpdateMarkers(t.gamedata.__timelinemarkers,n);o&&(this.m_rgMarkers.replace(o.rgMarkers||[]),this.m_rgSegments.replace(o.rgSegments||[]));var i=this.m_gameDataParser.UpdateRegions(t.gamedata.__regions);i&&this.m_rgRegions.replace(i)}},e.prototype.OnDownloadFailed=function(){re.BroadcastDownloadFailed(this)},e.prototype.OnWebRTCRetry=function(){re.BroadcastDownloadFailed(this,!1)},e.prototype.OnWebRTCFailed=function(){re.BroadcastDownloadFailed(this,!0)},e.prototype.OnUserInputNeeded=function(){this.m_bUserInputNeeded=!0},e.prototype.UserInputClick=function(){this.m_bUserInputNeeded=!1,this.m_player?this.JumpToLiveEdge():this.Play()},e.prototype.StopPlaybackTillUserInput=function(){this.Stop(),this.OnUserInputNeeded()},e.prototype.GetTimelineStartPos=function(){return this.m_nVideoEndPos-this.m_nTimelineDuration},e.prototype.GetTimelineDuration=function(){return this.m_nTimelineDuration},e.prototype.GetTimeAtMousePosition=function(e,t,n,o){var i=s.c(e,t.left,t.right,n,o);return Math.floor(i+.5)},e.prototype.GetPercentOffsetFromTime=function(e,t){var n=0,o=0;return t==X.Timeline?n=(o=this.m_nVideoEndPos)-this.m_nTimelineDuration:o=n=0,s.c(e,n,o,0,100)},e.prototype.GetTimelineMarkers=function(){return this.m_rgMarkers},e.prototype.GetTimelineSegments=function(){return this.m_rgSegments},e.prototype.GetGameDataRegions=function(){return this.m_rgRegions},e.prototype.BHasMarkersOrSegments=function(){return this.has_segments||this.has_markers},Object.defineProperty(e.prototype,"has_markers",{get:function(){return 0<this.m_rgMarkers.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_segments",{get:function(){return 0<this.m_rgSegments.length},enumerable:!0,configurable:!0}),Object(S.c)([i.x],e.prototype,"m_bPaused",void 0),Object(S.c)([i.x],e.prototype,"m_nPlaybackTime",void 0),Object(S.c)([i.x],e.prototype,"m_bBuffering",void 0),Object(S.c)([i.x],e.prototype,"m_bOnLiveEdge",void 0),Object(S.c)([i.x],e.prototype,"m_nVolume",void 0),Object(S.c)([i.x],e.prototype,"m_bMuted",void 0),Object(S.c)([i.x],e.prototype,"m_bUserInputNeeded",void 0),Object(S.c)([i.x],e.prototype,"m_bIsReplay",void 0),Object(S.c)([i.x],e.prototype,"m_nTimelineDuration",void 0),Object(S.c)([i.x],e.prototype,"m_nVideoStartPos",void 0),Object(S.c)([i.x],e.prototype,"m_nVideoEndPos",void 0),Object(S.c)([i.x],e.prototype,"m_editorStartTime",void 0),Object(S.c)([i.x],e.prototype,"m_editorEndTime",void 0),Object(S.c)([i.g.bound],e.prototype,"StartBroadcast",null),Object(S.c)([i.g.bound],e.prototype,"StartClip",null),Object(S.c)([c.a],e.prototype,"OnVideoPlaying",null),Object(S.c)([c.a],e.prototype,"OnVideoPause",null),Object(S.c)([i.g.bound],e.prototype,"OnVideoTimeUpdate",null),Object(S.c)([i.g.bound],e.prototype,"OnGameDataUpdate",null),Object(S.c)([c.a],e.prototype,"OnDownloadFailed",null),Object(S.c)([c.a],e.prototype,"OnWebRTCRetry",null),Object(S.c)([c.a],e.prototype,"OnWebRTCFailed",null),Object(S.c)([c.a],e.prototype,"OnUserInputNeeded",null),e}(),re=new oe;window.uiBroadcastWatchStore=re},DMSt:function(e,t,n){e.exports={FriendsListInsetShadowCtn:"insetshadow_FriendsListInsetShadowCtn_1S167",FriendListInsetShadowTop:"insetshadow_FriendListInsetShadowTop_1mEmL",FriendListInsetShadowBottom:"insetshadow_FriendListInsetShadowBottom_3cl4u"}},E7zH:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c});var o=n("mrSG"),i=n("UqDm"),r=n("1VtQ"),a=function(){function e(){this.m_vecCallbacks=[]}return e.prototype.Register=function(e){var t=this;this.m_vecCallbacks.push(e);return{Unregister:function(){i.c(t.m_vecCallbacks,e)}}},e.prototype.Dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=this.m_vecCallbacks;n<o.length;n++){o[n].apply(void 0,e)}},e.prototype.ClearAllCallbacks=function(){this.m_vecCallbacks=[]},e}(),s=function(){function e(){}return e.prototype.Schedule=function(e,t){this.IsScheduled()&&this.Cancel(),this.m_fnCallback=t,this.m_schTimer=window.setTimeout(this.ScheduledInternal,e)},e.prototype.IsScheduled=function(){return void 0!==this.m_schTimer},e.prototype.Cancel=function(){this.m_schTimer&&(clearTimeout(this.m_schTimer),this.m_schTimer=void 0)},e.prototype.ScheduledInternal=function(){this.m_schTimer=void 0;var e=this.m_fnCallback;this.m_fnCallback=void 0,e()},Object(o.c)([r.a],e.prototype,"ScheduledInternal",null),e}(),c=function(){function e(){this.m_rgListeners=[]}return e.prototype.AddEventListener=function(e,t,n){e.addEventListener(t,n),this.m_rgListeners.push({element:e,type:t,listener:n})},e.prototype.Unregister=function(){for(var e=0,t=this.m_rgListeners;e<t.length;e++){var n=t[e];n.element.removeEventListener(n.type,n.listener)}this.m_rgListeners=[]},e}()},EGkk:function(e,t,n){"use strict";n.d(t,"c",function(){return g}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return v}),n.d(t,"e",function(){return S}),n.d(t,"g",function(){return y}),n.d(t,"a",function(){return C}),n.d(t,"f",function(){return O}),n.d(t,"i",function(){return I}),n.d(t,"h",function(){return w}),n.d(t,"j",function(){return M});var a=n("mrSG"),o=n("okNM"),s=n("q1tI"),c=n("i8i4"),l=n("8o0Y"),p=n("JtU4"),j=n("/IDK"),i=n("1VtQ"),r=n("e2SU"),u=n("WpBz"),m=n("oh5H"),d=n("1n9R"),h=n("7Vyq"),f=n.n(h),_=n("QHER"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,o=Object(a.f)(e,["children","className"]),i=this.context.contextMenuInstance&&this.context.contextMenuInstance.options.bUseWebStyles?"popup_menu popup_body":f.a.contextMenuContents;return n&&(i+=" "+n),s.createElement("div",Object(a.a)({},o,{className:i}),t)},t.contextTypes={contextMenuInstance:function(){return null}},t}(s.PureComponent),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.OnClick=function(e){this.props.disabled||(this.props.onClick&&this.props.onClick(e),this.props.bInteractableItem||(this.props.onSelected&&this.props.onSelected(e),this.context.contextMenuInstance&&this.context.contextMenuInstance.Hide()))},t.prototype.OnMouseEnter=function(e){this.context.contextMenuInstance&&this.context.contextMenuInstance.HideSubMenu()},t.prototype.render=function(){var e=this.props,t=(e.onSelected,e.bInteractableItem,Object(a.f)(e,["onSelected","bInteractableItem"])),n=[];return this.context.contextMenuInstance&&this.context.contextMenuInstance.options.bUseWebStyles?n.push("popup_menu_item"):n.push(f.a.contextMenuItem,"contextMenuItem"),this.props.className&&n.push(this.props.className),this.props.disabled&&n.push("disabled"),s.createElement("div",Object(a.a)({onMouseEnter:this.OnMouseEnter},t,{onClick:this.OnClick,unselectable:this.props.unselectable,className:_.a.apply(void 0,n)}),this.props.children)},t.contextTypes={contextMenuInstance:function(){return null}},Object(a.c)([i.a],t.prototype,"OnClick",null),Object(a.c)([i.a],t.prototype,"OnMouseEnter",null),t}(s.PureComponent),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.bChecked,n=e.children,o=e.className,i=Object(a.f)(e,["bChecked","children","className"]);return s.createElement(b,Object(a.a)({},i,{className:Object(_.a)(o,t&&"menuChecked")}),s.createElement("div",{className:"contextMenuCheckMark"}),n)},t}(s.PureComponent),S=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bActive:!1},t}return Object(a.d)(e,n),e.prototype.OnSubMenuMouseEnter=function(){this.context.contextMenuInstance.CancelHideSubMenuTimer()},e.prototype.RenderSubMenu=function(){return s.createElement(g,{onMouseEnter:this.OnSubMenuMouseEnter},this.props.children)},e.prototype.OnMouseEnter=function(e){var t=this;if(this.context.contextMenuInstance){var n=this.context.contextMenuInstance.ShowSubMenu(e.currentTarget,this.RenderSubMenu);n&&(this.setState({bActive:!0}),n.SetOnHideCallback(function(){t.setState({bActive:!1})}))}},e.prototype.OnClick=function(e){this.OnMouseEnter(e),this.props.onClick&&this.props.onClick(e)},e.prototype.render=function(){var e=this.props,t=e.label,n=(e.children,e.className),o=Object(a.f)(e,["label","children","className"]);return this.state.bActive&&(n=(n||"")+" "+f.a.active),s.createElement(b,Object(a.a)({},o,{onClick:this.OnClick,className:n,onMouseEnter:this.OnMouseEnter,onSelected:null,bInteractableItem:!0}),t," ",s.createElement(r.o,null))},e.contextTypes={contextMenuInstance:function(){return null}},Object(a.c)([i.a],e.prototype,"OnSubMenuMouseEnter",null),Object(a.c)([i.a],e.prototype,"RenderSubMenu",null),Object(a.c)([i.a],e.prototype,"OnMouseEnter",null),Object(a.c)([i.a],e.prototype,"OnClick",null),e}(s.PureComponent),y=function(n){function e(e){var t=n.call(this,e)||this;return t.m_elMenu=void 0,t.m_cReenteranceGuard=1,t.state={ready:!1,menuLeft:void 0,menuTop:void 0,menuRight:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},t.m_mutationObserver=new MutationObserver(t.OnMenuMutation),t}return Object(a.d)(e,n),e.prototype.BindMenuElement=function(e){var t=this;this.m_elMenu&&(this.m_mutationObserver.disconnect(),this.props.popup||this.m_elMenu.ownerDocument.defaultView.removeEventListener("resize",this.OnWindowResize)),e&&(this.m_mutationObserver.observe(e,{childList:!0,subtree:!0}),this.props.popup||e.ownerDocument.defaultView.addEventListener("resize",this.OnWindowResize)),this.m_elMenu=e||void 0,this.PositionMenu(),this.state.ready||(this.props.instance.SetTakeFocus(this.TakeFocus.bind(this)),this.setState({ready:!0},function(){t.TakeFocus()}))},e.prototype.OnMenuMutation=function(e,t){this.PositionMenu()},e.prototype.OnWindowResize=function(){this.PositionMenu()},e.prototype.OnBlur=function(e){e.relatedTarget&&j.e(e.currentTarget,e.relatedTarget)||e.relatedTarget&&this.props.instance.BIsElementInMenuHierarchy(e.relatedTarget)||this.props.instance.BIsSubMenuVisible()||this.state.ready&&this.props.instance.visible&&this.props.instance.Hide()},e.prototype.OnKeyDown=function(e){27==e.keyCode&&this.state.ready&&(this.props.instance.Hide(),e.preventDefault(),e.stopPropagation())},e.prototype.getChildContext=function(){return{contextMenuInstance:this.props.instance}},e.prototype.componentDidUpdate=function(){0<this.m_cReenteranceGuard--?this.PositionMenu():this.m_cReenteranceGuard=2},e.prototype.TakeFocus=function(){if(this.m_elMenu&&this.state.ready&&this.props.instance.visible&&(this.props.popup||!j.e(this.m_elMenu,this.m_elMenu.ownerDocument.activeElement))){var e=this.m_elMenu.querySelector(".ContextMenuAutoFocus");e&&e.focus?e.focus():this.m_elMenu.focus()}},e.prototype.PositionMenu=function(){var e=this.m_elMenu,t=this.props.element;if(e&&t){var n=t.ownerDocument.defaultView;e.ownerDocument.defaultView.CtxUpdate=this.PositionMenu.bind(this);var o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=null!=this.props.popup,a=this.props.options,s={menuLeft:void 0,menuRight:void 0,menuTop:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},c=this.props.clientX,l=this.props.clientY,p=n.innerWidth,u=n.innerHeight;if(r){this.props.options.bScreenCoordinates||(c+=n.screenLeft,l+=n.screenTop),o=j.h(n,o);var m=n.screen,d=0,h=0;m.availLeft&&(d=m.availLeft),m.availTop&&(h=m.availTop),p=d+m.availWidth,u=h+m.availHeight}(a.bOverlapHorizontal||a.bOverlapVertical)&&(c=l=void 0);var f=c||o.left,_=c||o.right,g=i.width;a.bMatchWidth&&(g=_-f,s.menuWidth=g);var b=(a.bOverlapHorizontal?_:f)-g,v=0<b,S=p-(a.bOverlapHorizontal?f:_)-g,y=0<S,C=(a.bPreferPopLeft||!y)&&v;v||y||(C=y<v,a.bFitToWindow&&(g+=(C?b:S)-8,s.menuWidth=g)),!a.bPreferPopLeft&&y||!v?s.menuLeft=a.bOverlapHorizontal?f:_:s.menuRight=p-(a.bOverlapHorizontal?_:f);var O=l||o.top,I=l||o.bottom,E=i.height;a.bMatchHeight&&(E=I-O,s.menuHeight=E);var w=(a.bOverlapVertical?I:O)-E,M=0<w,D=u-(a.bOverlapVertical?O:I)-E,T=0<D,G=(a.bPreferPopTop||!T)&&M&&!a.bDisablePopTop;if(!M&&!T){var R=void 0!==a.bShiftToFitWindow?a.bShiftToFitWindow:a.bFitToWindow&&!a.bOverlapHorizontal;G=D<w,R&&(G?s.menuTop=4:s.menuBottom=4),a.bFitToWindow&&(R?E=Math.min(E,u-8):E+=G?w:D,s.menuHeight=E-8)}void 0===s.menuBottom&&void 0===s.menuTop&&(G?s.menuBottom=u-(a.bOverlapVertical?I:O):s.menuTop=a.bOverlapVertical?O:I),r?(s.menuHeight||(s.menuHeight=i.height),s.menuWidth||(s.menuWidth=i.width),s.menuBottom&&!s.menuTop&&(s.menuTop=u-s.menuBottom-s.menuHeight,s.menuBottom=void 0),s.menuRight&&!s.menuLeft&&(s.menuLeft=p-s.menuRight-s.menuWidth,s.menuRight=void 0)):(s.menuLeft&&(s.menuLeft+=n.scrollX),s.menuTop&&(s.menuTop+=n.scrollY),s.menuBottom&&(s.menuBottom+=n.document.body.scrollHeight-n.scrollY-n.innerHeight),s.menuRight&&(s.menuRight+=n.document.body.scrollWidth-n.scrollX-n.innerWidth)),s.menuLeft===this.state.menuLeft&&s.menuRight===this.state.menuRight&&s.menuTop===this.state.menuTop&&s.menuBottom===this.state.menuBottom&&s.menuWidth===this.state.menuWidth&&s.menuHeight===this.state.menuHeight||this.setState(s)}},e.prototype.render=function(){var i=this,e={visibility:this.state.ready?"visible":"hidden"};if(this.props.popup){var r=this.props.element.ownerDocument.defaultView;void 0!==this.state.menuLeft&&void 0!==this.state.menuTop&&void 0!==this.state.menuWidth&&void 0!==this.state.menuHeight&&r.SteamClient.Window.GetWindowRestoreDetails(function(e){var t=i.props.popup.window,n=i.state.menuLeft-r.screenX,o=i.state.menuTop-r.screenY;try{t.SteamClient.Window.PositionWindowRelative(e,n,o,i.state.menuWidth,i.state.menuHeight)}catch(e){console.error(e)}})}else void 0!==this.state.menuTop?e.top=this.state.menuTop:void 0!==this.state.menuBottom&&(e.bottom=this.state.menuBottom),void 0!==this.state.menuLeft?e.left=this.state.menuLeft:void 0!==this.state.menuRight&&(e.right=this.state.menuRight),void 0!==this.state.menuHeight&&(e.height=this.state.menuHeight),void 0!==this.state.menuWidth&&(e.width=this.state.menuWidth);var t=this.props.options.strClassName||(this.props.options.bUseWebStyles?"popup_block_new popup_block_hidden_until_visible":f.a.contextMenu);return this.props.instance.visible&&this.state.ready&&(t+=" visible"),t+=" "+f.a.ContextMenuFocusContainer,s.createElement("div",{className:t,ref:this.BindMenuElement,style:e,onBlur:this.OnBlur,onKeyDown:this.OnKeyDown,tabIndex:0},this.props.children)},e.childContextTypes={contextMenuInstance:function(){return null},context:function(){return null}},Object(a.c)([i.a],e.prototype,"BindMenuElement",null),Object(a.c)([i.a,Object(u.a)(100)],e.prototype,"OnMenuMutation",null),Object(a.c)([i.a],e.prototype,"OnWindowResize",null),Object(a.c)([i.a],e.prototype,"OnBlur",null),Object(a.c)([i.a],e.prototype,"OnKeyDown",null),e=Object(a.c)([o.a],e)}(s.Component),C=function(i){function r(e,t,n){var o=i.call(this,"contextmenu_"+r.sm_iContextMenuInstance++,{title:"Menu",html_class:f.a.ContextMenuPopup+" client_chat_frame",body_class:"ContextMenuPopupBody",replace_existing_popup:!1,target_browser:n,eCreationFlags:p.c.ContextMenu})||this;return o.m_menuProps=e,o.m_children=t,o}return Object(a.d)(r,i),r.prototype.UpdateParamsBeforeShow=function(e){if(this.m_menuProps.options.bScreenCoordinates)e.dimensions={left:this.m_menuProps.clientX,top:this.m_menuProps.clientY,width:350,height:1};else{var t=j.h(this.m_menuProps.element.ownerDocument.defaultView,this.m_menuProps.element.getBoundingClientRect());e.dimensions={left:t.right,top:t.top,width:350,height:1}}return e.availscreenwidth=this.m_menuProps.element.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_menuProps.element.ownerDocument.defaultView.screen.availHeight,e},r.prototype.Render=function(e,t){c.render(s.createElement(y,Object(a.a)({},this.m_menuProps,{popup:this}),this.m_children),t)},r.prototype.OnBlur=function(){},r.prototype.OnFocus=function(){},r.prototype.OnLoad=function(){},r.prototype.OnResize=function(){},r.prototype.OnClose=function(){},r.sm_iContextMenuInstance=0,r}(p.a);function O(e){return s.createElement("div",{className:f.a.ContextMenuMouseOverlay})}function I(e){var t=[],n=j.n(e),o=n.getSelection(),i=o&&0<o.rangeCount&&0<o.toString().length,r=e.target,a=!1;if(r&&"tagName"in r&&("INPUT"!=r.tagName&&"TEXTAREA"!=r.tagName||(a=!0)),(n.document.queryCommandEnabled("cut")||i&&a)&&t.push(s.createElement(b,{key:"cut",onSelected:function(){n.document.execCommand("cut")}},Object(m.c)("#ContextMenu_Cut"))),(document.queryCommandEnabled("copy")||i)&&t.push(s.createElement(b,{key:"copy",onSelected:function(){n.document.execCommand("copy")}},Object(m.c)("#ContextMenu_Copy"))),d.b.IN_CLIENT&&a&&t.push(s.createElement(b,{key:"paste",onSelected:function(){r.focus(),n.SteamClient._internal.Paste()}},Object(m.c)("#ContextMenu_Paste"))),t.length)Object(l.a)(s.createElement(g,null,t),e);else{if(e.shiftKey)return;e.preventDefault(),e.stopPropagation()}}var E="DEBUG_StickyContextMenus";function w(){return window.sessionStorage&&"true"==window.sessionStorage.getItem(E)}function M(e){e?window.sessionStorage.setItem(E,"true"):window.sessionStorage.removeItem(E)}},F2OU:function(e,t,n){e.exports={SnoozeContainer:"friendsnooze_SnoozeContainer_1OfTa",SnoozeZ:"friendsnooze_SnoozeZ_29fyi",none:"friendsnooze_none_lZX-E",Medium:"friendsnooze_Medium_2NSIM",Large:"friendsnooze_Large_2QDqq",Dim:"friendsnooze_Dim_10sPU",Z1:"friendsnooze_Z1_GU6T2",Z2:"friendsnooze_Z2_277XL",Z3:"friendsnooze_Z3_1gXQi",animating:"friendsnooze_animating_1pImE",hoverParent:"friendsnooze_hoverParent_3SgRH",Snoring:"friendsnooze_Snoring_6q8Na"}},FNBO:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEFERTQyQ0E1Q0EyMTFFNTgwMzNBQUE0RTk3QjgyMDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEFERTQyQ0I1Q0EyMTFFNTgwMzNBQUE0RTk3QjgyMDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQURFNDJDODVDQTIxMUU1ODAzM0FBQTRFOTdCODIwOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQURFNDJDOTVDQTIxMUU1ODAzM0FBQTRFOTdCODIwOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prxq/1gAAAGJSURBVHjaYvz//z/DQAImhgEG9HTASiDeiiEKigI64Pj/CLAJiBlhcvSwXPc/JjgLxIIgeUYaJ0JBIL4NxMJY5B4BcTitHXAeiA3wyL+kZSJcQMByEEimVbxn/ScM8mmVCK2IsHwhTD2104AwNHFx4VFzAYgNaVUQ7SFg+Q8gdqZVSTifiEQHsvwdvpKQGYiDyIj3HCLiPRubXnSBBVDFE2iV6PA5IAlN0woiLJcG4h8ELD+PzwwYwxiH5sNALIzHgNsELH8DxEKEHCAGxB/xGPIEiNWwaF5PRNDrEQpFEHGZCIO+ArEjksZKIvTEE5OGQEQyEP/7TxwAJThDItRNIjYRwxgGQPz2P3XAEVKyMHJRLAvEu4FYnYLC6D3UnK/ktAkfA7EeEB+kwAEOpFiOr024mIygjyWn9sQn2UOC5VPJrb4JKcglwvLDlLQfiFHkDcR/cVj+CIjZaO0AfNlUidIWFCmKZYD4GpLlgdRowpHaJGMH4v1AfBGIM6nRiqF1v2Dw944BAgwAsWqnpJAiSOIAAAAASUVORK5CYII="},FkUk:function(e,t,n){"use strict";var c=n("mrSG"),E=n("LAqV"),w=n("hReu"),i=n("okNM"),M=n("Hi0u"),D=n("q1tI"),r=n("1VtQ"),T=n("oh5H"),s=n("ljid");function G(e,t,n){Object(M.b)(D.createElement(o,{player:t}),n,"NicknameDialog",{strTitle:Object(T.c)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400},Object(w.g)(n))}var o=function(n){function e(e){var t=n.call(this,e)||this;return t.state={strCurrentNameEntry:t.props.player.nickname||""},t}return Object(c.d)(e,n),e.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value})},e.prototype.HandleSubmit=function(e){var t=this;E.f.FriendStore.SetPlayerNickname(this.props.player,this.state.strCurrentNameEntry).then(function(e){1==e&&t.props.closeModal&&t.props.closeModal()})},e.prototype.componentWillReceiveProps=function(e){e.player!=this.props.player&&this.setState({strCurrentNameEntry:e.player.nickname})},e.prototype.render=function(){var e="friend editNickname",t=this.props.player.has_nickname;return this.props.player.persona.is_ingame?e+=" ingame":this.props.player.persona.is_online&&(e+=" online"),t&&(e+=" nickNamed"),D.createElement(M.a,{className:"Dialog_EditNickName",onEscKeypress:this.props.closeModal},D.createElement(s.h,{classNameContent:"NicknameDialog",onSubmit:this.HandleSubmit},D.createElement(s.m,null,t?Object(T.c)("#Friend_Menu_ChangeNickname"):Object(T.c)("#Friend_Menu_AddNickname")),D.createElement(s.b,null,D.createElement(s.c,null,t?Object(T.c)("#Nickname_EditNickname"):Object(T.c)("#Nickname_AddANickname")),D.createElement(s.c,null,D.createElement("div",{className:e},D.createElement("img",{className:"avatarMedium",src:this.props.player.persona.avatar_url_full}),D.createElement("div",{className:"labelHolder"},D.createElement("div",{className:"mediumName"},this.props.player.secondary_display_name),D.createElement("div",{className:"nickNamedAs"},Object(T.c)("#Nickname_NickNameAsDialog")),D.createElement("div",{className:"mediumName asNickName"},D.createElement(s.o,{placeholder:t?Object(T.c)("#Nickname_PlaceHolderNickName"):Object(T.c)("#Nickname_PlaceHolderNickNameFresh"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0,bShowClearAction:!0})))))),D.createElement(s.j,null,D.createElement(s.t,{onCancel:this.props.closeModal}))))},Object(c.c)([r.a],e.prototype,"HandleTextEntry",null),Object(c.c)([r.a],e.prototype,"HandleSubmit",null),e=Object(c.c)([i.a],e)}(D.Component),l=n("eQUm"),a=n("y4mg"),u=n("s+DT"),p=n("/IDK"),m=n("bbBM"),d=n("2vnA");function R(e,t,n){var o=n?[n.accountid]:[];Object(M.b)(D.createElement(h,{browserContext:e,rgPreSelectedFriends:o}),t,"CreateFriendCategoryDialog",{strTitle:Object(T.c)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:700},Object(w.g)(t))}var h=function(n){function e(e){var t=n.call(this,e)||this;return t.state={strNameEntry:e.group?e.group.name:"",strError:null},t}return Object(c.d)(e,n),e.prototype.HandleTextEntry=function(e){this.setState({strNameEntry:e.target.value,strError:null})},e.prototype.HandleSubmit=function(e){var t=this,n=this.m_friendPicker.state.rgFriendsChosen,o=this.state.strNameEntry;if(this.props.group){for(var i=new Set(this.props.group.GetCurrentMemberSet()),r=[],a=[],s=0,c=n;s<c.length;s++){var l=c[s];i.has(l.accountid)?i.delete(l.accountid):r.push(l.persona.m_steamid.ConvertTo64BitString())}i.forEach(function(e){a.push(u.a.InitFromAccountID(e).ConvertTo64BitString())}),E.f.FriendStore.FriendGroupStore.ManageGroup(this.props.group,o,r,a).then(function(e){e?t.props.closeModal&&t.props.closeModal():t.setState({strError:Object(T.c)("#FriendGroup_ManageGroup_ErrorFailed")})})}else{if(!o)return void this.setState({strError:Object(T.c)("#FriendGroup_CreateGroup_ErrorNeedName")});var p=n.map(function(e){return e.persona.m_steamid.ConvertTo64BitString()});E.f.FriendStore.FriendGroupStore.CreateGroup(o,p).then(function(e){e?t.props.closeModal&&t.props.closeModal():t.setState({strError:Object(T.c)("#FriendGroup_CreateGroup_ErrorFailed")})})}},e.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e},e.prototype.render=function(){return D.createElement(M.a,{onEscKeypress:this.props.closeModal},D.createElement(s.h,{classNameContent:"ManageGroupDialog",onSubmit:this.HandleSubmit},D.createElement(s.m,null,this.props.group?Object(T.c)("#FriendGroup_Menu_Manage"):Object(T.c)("#FriendGroup_Menu_CreateGroup")),D.createElement(s.b,null,this.state.strError&&D.createElement(s.c,{className:"nicknameError"},this.state.strError),D.createElement(s.o,{type:"text",label:Object(T.c)("#FriendGroup_CategoryName"),className:"nicknameInput",value:this.state.strNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),D.createElement(a.a,{ref:this.OnFriendPickerRef,label:Object(T.c)("#FriendGroup_CategoryMembers"),eSort:1,rgSelectedFriends:this.props.rgPreSelectedFriends})),D.createElement(s.j,null,D.createElement(s.t,{onCancel:this.props.closeModal}))))},Object(c.c)([r.a],e.prototype,"HandleTextEntry",null),Object(c.c)([r.a],e.prototype,"HandleSubmit",null),Object(c.c)([r.a],e.prototype,"OnFriendPickerRef",null),e}(D.Component),j=function(n){function e(e){var t=n.call(this,e)||this;return t.m_mapCategoryChecks=d.x.map(),t.state={strError:null},t}return Object(c.d)(e,n),e.prototype.componentWillReceiveProps=function(e){e.friend!=this.props.friend&&this.m_mapCategoryChecks.clear()},e.prototype.HandleSubmit=function(e){var a=this,o=[];E.f.FriendStore.FriendGroupStore.user_groups.forEach(function(e){if(a.m_mapCategoryChecks.has(e.unique_id)){var t=void 0,n=void 0;a.m_mapCategoryChecks.get(e.unique_id)?n=e:t=e,o.push(E.f.FriendStore.FriendGroupStore.TransferFriendFromToGroup(a.props.friend,t,n))}}),Promise.all(o).then(function(e){for(var t=!1,n=0,o=e;n<o.length;n++)for(var i=0,r=o[n];i<r.length;i++){r[i]||(t=!0)}t?a.setState({strError:Object(T.c)("#FriendGroup_ManageGroup_ErrorFailed")}):a.props.closeModal()})},e.prototype.CreateNew=function(e){R(Object(w.e)(this,e),Object(p.n)(e),this.props.friend)},e.prototype.render=function(){return D.createElement(M.a,{onEscKeypress:this.props.closeModal},D.createElement(s.h,{classNameContent:"AssignCategoriesDialog",onSubmit:this.HandleSubmit},D.createElement(s.m,null,Object(T.c)("#FriendGroup_Categorize_Title")),D.createElement(s.b,null,this.state.strError&&D.createElement(s.c,{className:"nicknameError"},this.state.strError),D.createElement(s.D,null,D.createElement(s.f,null,D.createElement(m.c,{friend:this.props.friend,className:"AssignCategoriesDialog_Friend",noActions:!0,context:null}))),D.createElement(f,{friend:this.props.friend,mapChecks:this.m_mapCategoryChecks}),D.createElement(s.D,{className:"AssignCategoriesDialog_AddNewButton"},D.createElement(s.d,{onClick:this.CreateNew},Object(T.c)("#FriendGroup_Categorize_AddNew")))),D.createElement(s.j,null,D.createElement(s.t,{onCancel:this.props.closeModal}))))},Object(c.c)([r.a],e.prototype,"HandleSubmit",null),Object(c.c)([r.a],e.prototype,"CreateNew",null),e}(D.Component),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var t=this,e=E.f.FriendStore.FriendGroupStore.user_groups.map(function(e){return D.createElement(_,{friend:t.props.friend,group:e,key:e.unique_id,mapChecks:t.props.mapChecks})});return D.createElement(D.Fragment,null,D.createElement(s.p,null,Object(T.c)("#FriendGroup_Categorize_Categories")),D.createElement("div",{className:"FriendCategoryCheckboxes_List"},e))},t=Object(c.c)([i.a],t)}(D.Component),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.OnToggle=function(e){e!=this.props.group.HasMember(this.props.friend.accountid)?this.props.mapChecks.set(this.props.group.unique_id,e):this.props.mapChecks.delete(this.props.group.unique_id)},t.prototype.OnContextMenu=function(e){ne(Object(w.e)(this,e),this.props.group,e)},t.prototype.render=function(){var e,t=this.props.group,n=this.props.friend;return e=this.props.mapChecks.has(t.unique_id)?this.props.mapChecks.get(t.unique_id):t.HasMember(n.accountid),D.createElement("div",{onContextMenu:this.OnContextMenu},D.createElement(s.e,{label:t.name,checked:e,onChange:this.OnToggle}))},Object(c.c)([r.a],t.prototype,"OnToggle",null),Object(c.c)([r.a],t.prototype,"OnContextMenu",null),t=Object(c.c)([i.a],t)}(D.Component),g=n("8o0Y"),L=n("EGkk"),A=n("geE1"),k=n("rsEv"),b=n("tkkQ"),v=n("uWOQ"),S=n("+mma"),P=n("e2SU"),y=n("VZeO"),C=n("fGPn"),O=n("vDqi"),I=n.n(O);var N=function(o){function e(e){var t=o.call(this,e)||this,n=E.f.FriendStore.self;return t.state={strCurrentNameEntry:n.primary_display_name,strError:""},t}return Object(c.d)(e,o),e.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value,strError:""})},e.prototype.HandleSubmit=function(e){this.SetPersonaName(this.state.strCurrentNameEntry)},e.prototype.DisplayError=function(e){this.setState({strError:e})},e.prototype.SetPersonaName=function(e){var o=this;if(this.setState({strError:""}),b.a.IN_CLIENT&&null!=SteamClient.WebChat.SetPersonaName)SteamClient.WebChat.SetPersonaName(this.state.strCurrentNameEntry).then(function(e){e?o.DisplayError(Object(T.c)(e)):o.props.closeModal&&o.props.closeModal()});else{var t=new FormData;t.append("sessionid",b.a.SESSIONID),t.append("persona",e);var n=E.f.FriendStore.self,i=b.a.CHAT_BASE_URL+"profiles/"+n.steamid64+"/ajaxsetpersonaname/";I.a.post(i,t).then(function(e){var t=e.data;if(t.success)o.props.closeModal&&o.props.closeModal();else{var n=t.message.replace("<br />","");o.DisplayError(n)}}).catch(function(e){o.DisplayError(Object(T.c)("#Friends_NameChangeFailed_Info"))})}},e.prototype.render=function(){var e=E.f.FriendStore.self,t="friend changePersonaName";e.persona.is_ingame?t+=" ingame":e.persona.is_online&&(t+=" online");var n=!1;return this.state.strError&&(n=!0),D.createElement(M.a,{className:"Dialog_ChangePersonaName",onEscKeypress:this.props.closeModal},D.createElement(s.h,{classNameContent:"ChangePersonaNameDialog",onSubmit:this.HandleSubmit},D.createElement(s.m,null,Object(T.c)("#ChangePersona_Title")),D.createElement(s.b,null,D.createElement(s.c,null,Object(T.c)("#ChangePersona_Description")),D.createElement(s.c,null,D.createElement("div",{className:t},D.createElement("img",{className:"avatarMedium",src:e.persona.avatar_url_full}),D.createElement("div",{className:"labelHolder"},n&&D.createElement("div",{className:"error"},this.state.strError),D.createElement("div",null,D.createElement("div",null,Object(T.c)("#ChangePersona_Change")),D.createElement("div",{className:"mediumName"},D.createElement(s.o,{placeholder:Object(T.c)("#ChangePersona_PlaceHolder"),className:"changePersonaInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}))))))),D.createElement(s.j,null,D.createElement(s.t,{onCancel:this.props.closeModal}))))},Object(c.c)([r.a],e.prototype,"HandleTextEntry",null),Object(c.c)([r.a],e.prototype,"HandleSubmit",null),e=Object(c.c)([i.a],e)}(D.Component),B=n("dpJ7"),F=n("hEDq"),x=n("+M9t"),V=n("lqmi"),U=n("uw3m");var H=function(n){function e(e){var t=n.call(this,e)||this;return t.state=t.ComputeStateFromNotificationSettings(t.props.player.notification_settings),t}return Object(c.d)(e,n),e.prototype.ConvertENotificationSettingToBoolean=function(e){return 1==e},e.prototype.ComputeStateFromNotificationSettings=function(e){var t,n=!1,o=!1;for(var i in e){if(0!=e[i]){o=!0;break}}return o?((t=F.d()).bNotifications_ShowIngame=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowInGame),t.bNotifications_ShowMessage=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowMessage),t.bNotifications_ShowOnline=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowOnline),t.bSounds_PlayIngame=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayInGame),t.bSounds_PlayMessage=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayMessage),t.bSounds_PlayOnline=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayOnline)):(n=!0,t=E.f.SettingsStore.FriendsSettings),{settings:t,bUseDefaults:n}},e.prototype.ConvertBooleanToENotificationSetting=function(e){return e?1:2},e.prototype.FriendSettingsToNotificationSettings=function(e){var t=new x.c;return t.Notifications_SendMobile=this.props.player.notification_settings.Notifications_SendMobile,this.state.bUseDefaults||(t.Notifications_ShowInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowIngame),t.Notifications_ShowMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowMessage),t.Notifications_ShowOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowOnline),t.Sounds_PlayInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayIngame),t.Sounds_PlayMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayMessage),t.Sounds_PlayOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayOnline)),t},e.prototype.HandleSubmit=function(e){var t=this;E.f.FriendStore.SetPlayerNotificationSettings(this.props.player,this.FriendSettingsToNotificationSettings(this.state.settings)).then(function(e){1==e&&t.props.closeModal&&t.props.closeModal()})},e.prototype.componentWillReceiveProps=function(e){e.player!=this.props.player&&this.setState(this.ComputeStateFromNotificationSettings(e.player.notification_settings))},e.prototype.OnSettingToggled=function(e,t){var n;this.setState({settings:Object(c.a)(Object(c.a)({},this.state.settings),(n={},n[e]=t,n))})},e.prototype.FriendsSettingsCheckbox=function(t){var n=this;return D.createElement(s.e,{key:t.strName,disabled:this.state.bUseDefaults,onChange:function(e){n.OnSettingToggled(t.strName,e)},checked:!!this.state.settings[t.strName]})},e.prototype.NotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return D.createElement("div",null,D.createElement("div",{className:"FriendsSettingsNotificationRow"},D.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),D.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},D.createElement(t,{strName:e.strNameShow})),D.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},D.createElement(t,{strName:e.strNameSound}))))},e.prototype.OnDefaultToggled=function(e){e?this.setState({settings:E.f.SettingsStore.FriendsSettings,bUseDefaults:!0}):this.setState({bUseDefaults:!1})},e.prototype.render=function(){var t=this,e=this.NotificationRow,n=this.state.bUseDefaults,o="friend editFriendNotifications";return o+=Object(V.d)(this.props.player.persona),D.createElement(M.a,{className:"Dialog_FriendNotifications",onEscKeypress:this.props.closeModal},D.createElement(s.h,{classNameContent:"FriendNotificationsDialog",onSubmit:this.HandleSubmit},D.createElement(s.m,null,Object(T.c)("#Friend_Menu_NotificationsTitle")),D.createElement(s.b,{className:n?"useDefaults":""},D.createElement(s.c,null,Object(T.c)("#FriendNotifications_Instructions",this.props.player.display_name)),D.createElement(s.c,null,D.createElement("div",{className:o},D.createElement(U.b,{persona:this.props.player.persona,size:"Large"}),D.createElement("div",{className:"labelHolder"},this.props.player.primary_display_name,!this.props.player.is_display_name_nickname&&this.props.player.has_secondary_display_name&&D.createElement("span",{className:"playerNickname"}," (",this.props.player.secondary_display_name,")"),this.props.player.is_display_name_nickname&&D.createElement("span",{className:"playerNicknameBracket",title:Object(T.c)("#isNickname")},"*")))),D.createElement(s.e,{classname:"useDefaultsCheckBox",label:Object(T.c)("#FriendNotifications_UseDefaults"),onChange:function(e){t.OnDefaultToggled(e)},checked:this.state.bUseDefaults}),D.createElement("div",{className:"SettingsGroup"},D.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},D.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(T.c)("#FriendSettings_Notification_Table_Label")),D.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(T.c)("#FriendSettings_Notification_Table_Show")),D.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(T.c)("#FriendSettings_Notification_Table_Play"))),D.createElement(e,{strLabel:Object(T.c)("#FriendSettings_FriendNotification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),D.createElement(e,{strLabel:Object(T.c)("#FriendSettings_FriendNotification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),D.createElement(e,{strLabel:Object(T.c)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}))),D.createElement(s.j,null,D.createElement(s.t,{onCancel:this.props.closeModal}))))},Object(c.c)([r.a],e.prototype,"HandleSubmit",null),Object(c.c)([r.a],e.prototype,"OnSettingToggled",null),Object(c.c)([r.a],e.prototype,"FriendsSettingsCheckbox",null),Object(c.c)([r.a],e.prototype,"NotificationRow",null),Object(c.c)([r.a],e.prototype,"OnDefaultToggled",null),e=Object(c.c)([i.a],e)}(D.Component);function W(e,t,n,o){return Object(g.a)(D.createElement(Y,{browserContext:e,context:t,friend:n,ownerWindow:o.currentTarget.ownerDocument.defaultView}),o)}function z(e,t,n,o){return D.createElement(Y,{browserContext:e,context:t,friend:n,ownerWindow:o})}n.d(t,"b",function(){return W}),n.d(t,"e",function(){return z}),n.d(t,"d",function(){return ee}),n.d(t,"c",function(){return ne}),n.d(t,"a",function(){return ie});var q=Object(i.a)(function(e){var t=e.friend,n=[],o=t.persona_name_history,i=t.persona_name_history_loaded;if(i&&0<o.length)for(var r=0,a=0,s=o;a<s.length;a++){var c=s[a];n.push(D.createElement("div",{className:"recentName",key:"name_history_"+r},c)),r++}else i?n.push(D.createElement("div",{className:"recentName",key:"name_history_none"},Object(T.c)("#Friend_Menu_RecentAliases_None"))):n.push(D.createElement("div",{className:"recentName",key:"name_history_loading"},Object(T.c)("#Friend_Menu_RecentAliases_Loading")));return D.createElement(D.Fragment,null,D.createElement(L.e,{label:Object(T.c)("#Friend_Menu_RecentAliases")},n))}),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.OnToggle=function(e){this.props.group.ToggleMemberRoleState(this.props.friend.accountid,e)},t.prototype.render=function(){var i=this,r=this.props.group.DefaultRoleID(),a=this.props.group.GetMemberRoleIDs(this.props.friend.accountid),e=this.props.group.BIsAccountIDOwner(this.props.friend.accountid),s=this.props.group.BCanEditRoles(),t=this.props.group.GetRoles().slice().sort(function(e,t){return e.role_id==r?1:t.role_id==r?-1:parseInt(e.role_id)-parseInt(t.role_id)}).map(function(t){var e=-1!=a.findIndex(function(e){return e==t.role_id});if(!e&&!s)return null;var n=t.name,o=i.props.group.BCanIAssignRole(t.role_id);return t.role_id==r?n=Object(T.c)("#ChatRoomRole_Member"):n.startsWith("#ChatRoomRole_")&&(n=Object(T.c)(n)),D.createElement(Q,{key:t.role_id,friend:i.props.friend,group:i.props.group,roleName:n,roleID:t.role_id,bHasRole:e,bEditable:o})}),n=s&&!e?Object(T.c)("#Friend_Menu_EditRoles"):Object(T.c)("#Friend_Menu_ViewRoles");return D.createElement(D.Fragment,null,D.createElement(L.e,{label:n},e?D.createElement(L.d,{className:"FriendMenuRoleCheckbox disabled",key:"role",onSelected:function(){},bInteractableItem:!0},D.createElement(P.k,null),Object(T.c)("#ChatRoomRole_Owner")):t))},Object(c.c)([r.a],t.prototype,"OnToggle",null),t=Object(c.c)([i.a],t)}(D.Component),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={bCanCreateRemotePlayInvite:!1},e}return Object(c.d)(e,t),e.prototype.componentDidMount=function(){return Object(c.b)(this,void 0,void 0,function(){var t;return Object(c.e)(this,function(e){switch(e.label){case 0:return[4,E.f.RemotePlayStore.BCanCreateInviteForGame(E.f.FriendStore.self.persona.m_gameid)];case 1:return t=e.sent(),this.setState({bCanCreateRemotePlayInvite:t}),[2]}})})},e.prototype.ShowFriendProfile=function(e){var t=this.props.friend.GetCommunityProfileURL();Object(v.e)(e,t),e.stopPropagation()},e.prototype.InviteFriend=function(){var t=this;E.f.FriendStore.SendFriendInvite(this.props.friend).then(function(e){4==e?Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_AddToFriendsList"),Object(T.c)("#Friend_InviteSent")):3==e?Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_AddToFriendsList"),Object(T.c)("#Friend_MutualInviteSent",t.props.friend.display_name)):Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_AddToFriendsList"),Object(T.c)("#Friend_InviteError",t.props.friend.display_name))})},e.prototype.AcceptIncomingInvite=function(){var t=this;E.f.FriendStore.SendFriendInvite(this.props.friend).then(function(e){3==e?Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_AddToFriendsList"),Object(T.c)("#Friend_MutualInviteSent",t.props.friend.display_name)):Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_AddToFriendsList"),Object(T.c)("#Friend_InviteError",t.props.friend.display_name))})},e.prototype.IgnoreIncomingInvite=function(){var t=this;E.f.FriendStore.RemoveFriend(this.props.friend).then(function(e){1==e?Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_IgnoreIncomingInvite"),Object(T.c)("#Friend_IgnoreIncomingInvite_Success",t.props.friend.display_name)):Object(S.c)(t.props.ownerWindow,Object(T.c)("#Friend_Menu_IgnoreIncomingInvite"),Object(T.c)("#Friend_IgnoreIncomingInvite_Error",t.props.friend.display_name))})},e.prototype.RemoveFriend=function(){var t=this,e=4==this.props.friend.efriendrelationship,n=Object(T.c)(e?"#Friend_Menu_CancelInvitation":"#Friend_Menu_RemoveFromFriendsList"),o=Object(T.c)(e?"#Friend_CancelInvitation_Confirm":"#Friend_RemoveFromFriendsList_Confirm",this.props.friend.display_name),i=Object(T.c)(e?"#Button_Confirm":"#Friend_Menu_RemoveFromFriendsList"),r=Object(T.c)(e?"#Friend_CancelInvitation_Error":"#Friend_RemoveFromFriendsList_Error");Object(S.d)(this.props.ownerWindow,n,o,i,Object(T.c)("#Button_Cancel"),!0).then(function(){E.f.FriendStore.RemoveFriend(t.props.friend).then(function(e){3!=e&&6!=e||Object(S.c)(t.props.ownerWindow,n,r)})}).catch(function(){})},e.prototype.BlockFriend=function(){var e=this;Object(S.d)(this.props.ownerWindow,Object(T.c)("#Friend_Menu_BlockAllCommunication"),Object(T.c)("#Friend_Block_Confirm",this.props.friend.display_name),Object(T.c)("#Friend_Menu_BlockAllCommunication")).then(function(){E.f.FriendStore.BlockPlayer(e.props.friend)}).catch(function(){})},e.prototype.UnblockFriend=function(){var e=this;Object(S.d)(this.props.ownerWindow,Object(T.c)("#Friend_Menu_UnblockAllCommunication"),Object(T.c)("#Friend_Unblock_Confirm",this.props.friend.display_name),Object(T.c)("#Friend_Menu_UnblockAllCommunication")).then(function(){E.f.FriendStore.BlockPlayer(e.props.friend,!0)}).catch(function(){})},e.prototype.InviteToGame=function(e){E.f.FriendStore.InviteToGame(this.props.friend,e)},e.prototype.InviteToLobby=function(e,t){E.f.FriendStore.InviteToLobby(this.props.friend,e,t)},e.prototype.InviteToWatch=function(){E.f.FriendStore.InviteToWatch(this.props.friend)},e.prototype.InviteToRemotePlay=function(){return Object(c.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s;return Object(c.e)(this,function(e){switch(e.label){case 0:return t=this.props.friend,E.f.FriendStore.self==t?[2]:[4,E.f.RemotePlayStore.CreateInviteAndSession(t.accountid,E.f.FriendStore.self.persona.m_gameid)];case 1:if(0===(n=e.sent()))return i=2==t.efriendrelationship,r=4==t.efriendrelationship,a=t.persona.is_online&&!i&&!r&&!t.is_blocked,[4,E.f.RemotePlayStore.BCanIsolateGameAudio()];switch(o="",n){case 2:o="#RemotePlay_ErrorInviteFailed_ScreenLocked";break;case 7:o="#RemotePlay_ErrorInviteFailed_DriversNotInstalled";break;case 8:o="#RemotePlay_ErrorInviteFailed_Disabled";break;case 9:o="#RemotePlay_ErrorInviteFailed_BroadcastingActive";break;case 10:o="#RemotePlay_ErrorInviteFailed_VRActive";break;case 12:o="#RemotePlay_ErrorInviteFailed_TransportUnavailable";break;case 13:o="#RemotePlay_ErrorInviteFailed_Invisible";break;default:o="#RemotePlay_ErrorInviteFailed_Failed"}return Object(S.c)(this.props.ownerWindow,Object(T.c)("#RemotePlay_Error"),Object(T.c)(o)),[2];case 2:return s=e.sent(),!E.f.VoiceStore.IsAnyVoiceActive()&&a&&s?E.f.UIStore.ShowFriendChatDialogAndStartVoice(E.f.GetDefaultBrowserContext(),t.accountid):E.f.UIStore.ShowFriendChatDialog(E.f.GetDefaultBrowserContext(),t.accountid,!0,!1),Object(l.a)(this.props.browserContext,E.f.FriendStore.self,this.props.ownerWindow,!0),[2]}})})},e.prototype.CancelRemotePlay=function(){var e=this.props.friend;E.f.RemotePlayStore.CancelInviteAndSession(e.accountid)},e.prototype.InviteToVoice=function(e,t){Object(B.k)({invitee:this.props.friend,invitedto:e},null,this.props.ownerWindow)},e.prototype.render=function(){var e,t=this,o=this.props,n=o.context||{},i=[],r=[],a=o.friend,s=E.f.FriendStore.FavoritesStore,c=E.f.FriendStore.self==a,l="favorites"==n.chatContext,p=n.group;!p&&n.chat instanceof k.a&&(p=n.chat.GetGroup());var u=!1,m=a.is_friend,d=2==a.efriendrelationship,h=4==a.efriendrelationship,f=d||4==a.efriendrelationship,_=E.f.FriendStore.self.persona.m_unGamePlayedAppID,g=a.persona.m_unGamePlayedAppID;n.chat&&(n.chat instanceof A.a?(e=n.chat).BVoiceActive()&&(u=!0):n.chat instanceof k.a&&n.chat.BVoiceActive()&&(u=!0)),m||d||c||i.push(D.createElement("div",{className:"contextMenuLabel contextMenuNotAFriend",key:"header"},Object(T.c)("#Friend_Menu_NotAFriendLabel"))),u&&!c&&i.push(D.createElement(J,{friend:this.props.friend})),n.tab&&i.push(D.createElement(L.d,{key:"closetab",onSelected:function(){E.f.UIStore.CloseTab(o.browserContext,n.tab)}},Object(T.c)("#Chat_CloseTabAction"))),e||n.tab||d||h||c||a.is_blocked||i.push(D.createElement(L.d,{key:"chat",className:m?"":"SendMessageContextNotFriends",onSelected:function(){o.friend.OpenChatDialog(o.browserContext)}},Object(T.c)("#Friend_Menu_SendMessage")));var b=a.persona.is_online&&!e&&!d&&!h&&!c&&!a.is_blocked,v=E.f.ChatStore.GetActiveVoiceChat();if(v&&v instanceof A.a&&v.accountid_partner==a.accountid?i.push(D.createElement(L.d,{key:"voicechat",onSelected:function(){v.ToggleVoiceChat()}},Object(T.c)("#Friend_Menu_StopVoiceChat"))):b&&(v instanceof k.a?i.push(D.createElement(L.d,{key:"voicechat",className:"contextVoiceInvite",onSelected:function(){t.InviteToVoice(v,n)}},D.createElement(P.mb,null),Object(T.c)("#Chat_Actions_InviteFriend_VoiceChat"))):i.push(D.createElement(L.d,{key:"voicechat",onSelected:function(){E.f.UIStore.ShowFriendChatDialogAndStartVoice(o.browserContext,a.accountid)}},Object(T.c)("#Friend_Menu_StartVoiceChat")))),i.push(D.createElement(L.d,{key:"viewprofile",onSelected:this.ShowFriendProfile},Object(T.c)("#Friend_Menu_ViewProfile"))),p&&i.push(D.createElement($,{key:"moderationoptions",friend:a,bIsSelf:c,group:p,ownerWindow:o.ownerWindow})),!c){if(m){if(r.push(D.createElement(L.d,{key:"setnickname",onSelected:function(){G(o.browserContext,o.friend,o.ownerWindow)}},Object(T.c)(o.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),s.BIsFavorited({friend:a}))(l?i:r).push(D.createElement(L.d,{key:"quickaccess",onSelected:function(e){E.f.FriendStore.FavoritesStore.RemoveFromFavorites({friend:e})}.bind(null,a)},Object(T.c)("#Friend_Menu_RemoveFromQuickAccess")));else r.push(D.createElement(L.d,{key:"quickaccess",onSelected:function(e){E.f.FriendStore.FavoritesStore.AddToFavorites({friend:e})}.bind(null,a)},Object(T.c)("#Friend_Menu_AddToQuickAccess")));r.push(D.createElement(L.d,{key:"managecategories",onSelected:function(){var e,t,n;e=o.browserContext,t=o.ownerWindow,n=o.friend,0==E.f.FriendStore.FriendGroupStore.user_groups.length?R(e,t,n):Object(M.b)(D.createElement(j,{browserContext:e,friend:n}),t,"AssignFriendCategoryDialog",{strTitle:Object(T.c)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:580},Object(w.g)(t))}},Object(T.c)("#FriendGroup_Menu_Categorize"))),r.push(D.createElement(L.d,{key:"notifications",onSelected:function(){return o.browserContext,e=o.friend,t=o.ownerWindow,void Object(M.b)(D.createElement(H,{player:e}),t,"FriendNotificationsDialog",{strTitle:Object(T.c)("#Friend_Menu_Notifications"),popupWidth:640,popupHeight:490},Object(w.g)(t));var e,t}},Object(T.c)("#Friend_Menu_Notifications"))),l||r.push(D.createElement(L.d,{key:"removefriend",onSelected:this.RemoveFriend},Object(T.c)("#Friend_Menu_RemoveFromFriendsList"))),r.push(D.createElement(q,{key:"aliases",friend:a}));var S=[],y=void 0;if(0==_)y=D.createElement("div",{className:"contextMenuGameItem"},D.createElement("div",{className:"contextMenuGameName"},E.f.FriendStore.self.current_game_name));else{var C=E.f.AppInfoStore.GetAppInfo(_);y=D.createElement("div",{className:"contextMenuGameItem"},D.createElement("div",{className:"contextMenuGameIcon"},D.createElement("img",{className:"GameIcon",src:C.icon_url})),D.createElement("div",{className:"contextMenuGameName"},C.name))}if(E.f.FriendStore.self.persona.is_ingame&&E.f.BroadcastStore.is_broadcast_capable&&S.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"invitetowatch",onSelected:function(){t.InviteToWatch()}},Object(T.c)("#Friend_Menu_InviteToWatch"))),0!=_&&"0"!=E.f.FriendStore.self.persona.m_game_lobby_id?S.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"lobbyinvite",onSelected:function(){t.InviteToLobby(_,E.f.FriendStore.self.persona.m_game_lobby_id)}},Object(T.c)("#Friend_Menu_InviteToLobby"))):0!=_&&_!=g&&S.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"lobbyinvite",onSelected:function(){t.InviteToLobby(_,E.f.FriendStore.self.persona.m_game_lobby_id)}},Object(T.c)("#Friend_Menu_InviteToLobby"))),E.f.RemotePlayStore.BEnabled()){var O=this.props.friend;E.f.RemotePlayStore.HasInviteAndSession(O.accountid)?S.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"cancelremoteplay",onSelected:function(){t.CancelRemotePlay()}},Object(T.c)("#Friend_Menu_CancelRemotePlay"))):this.state.bCanCreateRemotePlayInvite&&S.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"invitetoremoteplay",onSelected:function(){t.InviteToRemotePlay()}},Object(T.c)("#Friend_Menu_InviteToRemotePlay")))}0<S.length&&i.push(D.createElement(D.Fragment,null,D.createElement(L.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},y),D.createElement("div",{className:"contextMenuSectionContent"},S))),i.push(D.createElement(Z,{key:"trading",friend:a}))}else d?(i.push(D.createElement(L.d,{key:"acceptincominginvite",onSelected:this.AcceptIncomingInvite},Object(T.c)("#Friend_Menu_AcceptIncomingInvite"))),i.push(D.createElement(L.d,{key:"ignoreincominginvite",onSelected:this.IgnoreIncomingInvite},Object(T.c)("#Friend_Menu_IgnoreIncomingInvite"))),i.push(D.createElement(q,{key:"aliases",friend:a}))):h?i.push(D.createElement(L.d,{key:"remove",onSelected:this.RemoveFriend},Object(T.c)("#Friend_Menu_CancelInvitation"))):i.push(D.createElement(L.d,{key:"invite",onSelected:this.InviteFriend},Object(T.c)("#Friend_Menu_AddToFriendsList")));f&&i.push(D.createElement(L.d,{key:"setnickname",onSelected:function(){G(o.browserContext,o.friend,o.ownerWindow)}},Object(T.c)(o.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),l&&!a.is_blocked||r.push(D.createElement(L.d,{key:"block",onSelected:a.is_blocked?this.UnblockFriend:this.BlockFriend},Object(T.c)(a.is_blocked?"#Friend_Menu_UnblockAllCommunication":"#Friend_Menu_BlockAllCommunication")))}if(!i)return null;var I=void 0;return this.props.context&&this.props.context.group&&(I=this.props.context.group.GetMemberPartyBeacon(this.props.friend.accountid)),D.createElement(L.c,{className:"friendsContextMenu"},i,1==r.length&&r,1<r.length&&D.createElement(L.e,{label:Object(T.c)("#Friend_Menu_Manage")},r),!!a.persona.m_broadcastAccountId&&!c&&D.createElement(te,{friend:a,ownerWindow:o.ownerWindow,browserContext:o.browserContext}),!!a.persona.m_unGamePlayedAppID&&!c&&D.createElement(ee,{unAppID:a.persona.m_unGamePlayedAppID,strGameName:a.current_game_name,ulGameID:a.persona.m_gameid,friend:a,partyBeacon:I}))},Object(c.c)([r.a],e.prototype,"ShowFriendProfile",null),Object(c.c)([r.a],e.prototype,"InviteFriend",null),Object(c.c)([r.a],e.prototype,"AcceptIncomingInvite",null),Object(c.c)([r.a],e.prototype,"IgnoreIncomingInvite",null),Object(c.c)([r.a],e.prototype,"RemoveFriend",null),Object(c.c)([r.a],e.prototype,"BlockFriend",null),Object(c.c)([r.a],e.prototype,"UnblockFriend",null),Object(c.c)([r.a],e.prototype,"InviteToGame",null),Object(c.c)([r.a],e.prototype,"InviteToLobby",null),Object(c.c)([r.a],e.prototype,"InviteToWatch",null),Object(c.c)([r.a],e.prototype,"InviteToRemotePlay",null),Object(c.c)([r.a],e.prototype,"CancelRemotePlay",null),Object(c.c)([r.a],e.prototype,"InviteToVoice",null),e}(D.PureComponent),J=function(o){function e(e){var t=o.call(this,e)||this,n=E.f.VoiceStore.ConvertGainValueToSliderValue(E.f.VoiceStore.GetPerUserGainLevel(t.props.friend.accountid),y.a.k_MaxPerUserGainMultiplier);return t.state={volumeNumber:n},t}return Object(c.d)(e,o),e.prototype.OnFriendVolumeChanged=function(e){E.f.VoiceStore.SetPerUserGainLevel(this.props.friend.accountid,E.f.VoiceStore.ConvertSliderToGainValue(e,y.a.k_MaxPerUserGainMultiplier)),this.setState({volumeNumber:e})},e.prototype.OnMutingClick=function(e){var t=E.f.VoiceStore.GetPerUserMuting(this.props.friend.accountid);E.f.VoiceStore.SetPerUserMuting(this.props.friend.accountid,!t),this.forceUpdate()},e.prototype.OnInlineVolumeClick=function(e){this.forceUpdate()},e.prototype.render=function(){var e=this.state.volumeNumber,t="VolumeIcon",n=E.f.VoiceStore.GetPerUserMuting(this.props.friend.accountid);return 65<e?t+=" HighestVolume":45<e?t+=" HighVolume":e<46&&24<e?t+=" MedVolume":e<25&&(t+=" LowVolume"),D.createElement(L.d,{key:"volume",onSelected:function(){},bInteractableItem:!0},D.createElement("div",{className:"InlineVolume"+(n?" Muted":""),onClick:this.OnInlineVolumeClick},D.createElement("button",{className:t,onClick:this.OnMutingClick},D.createElement(P.nb,null)),D.createElement(s.A,{min:0,max:100,label:"",value:e,onChange:this.OnFriendVolumeChanged}),D.createElement("div",{className:"volumePercentage"},2*e,"%")))},Object(c.c)([r.a],e.prototype,"OnFriendVolumeChanged",null),Object(c.c)([r.a],e.prototype,"OnMutingClick",null),Object(c.c)([r.a],e.prototype,"OnInlineVolumeClick",null),e=Object(c.c)([i.a],e)}(D.Component),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.OnChange=function(e){this.props.group.SetMemberRoleState(this.props.friend.accountid,this.props.roleID,e)},t.prototype.render=function(){return D.createElement(L.d,{className:"FriendMenuRoleCheckbox"+(this.props.bEditable?"":" disabled"),key:"role",onSelected:function(){},bInteractableItem:!0},D.createElement(s.e,{label:this.props.roleName,checked:this.props.bHasRole,onChange:this.OnChange,disabled:!this.props.bEditable}))},Object(c.c)([r.a],t.prototype,"OnChange",null),t=Object(c.c)([i.a],t)}(D.Component),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.SendTradeOffer=function(e){var t="NewTradeOffer"+this.props.friend.accountid;Object(p.n)(e).open(E.f.EconomyStore.GetDefaultTradeOfferURLForFriend(this.props.friend.accountid),t,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.render=function(){var e=this.props.friend;return D.createElement(L.e,{label:Object(T.c)("#FriendMenu_Trading")},D.createElement(X,{friend:e}),D.createElement(L.d,{onSelected:this.SendTradeOffer},Object(T.c)("#FriendMenu_SendTradeOffer")))},Object(c.c)([r.a],t.prototype,"SendTradeOffer",null),t}(D.Component);function X(t){return D.createElement(L.d,{onSelected:function(e){Object(v.e)(e,t.friend.GetCommunityProfileURL()+"inventory/")}},Object(T.c)("#FriendMenu_ViewInventory"))}var $=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.BanFriend=function(){return Object(c.b)(this,void 0,void 0,function(){return Object(c.e)(this,function(e){switch(e.label){case 0:return[4,Object(S.a)(this.props.ownerWindow,Object(T.c)("#Friend_Ban"),Object(T.c)("#Friend_Ban_Confirm",this.props.friend.display_name),Object(T.c)("#Friend_Ban_Button"),Object(T.c)("#Button_Cancel"),!0)];case 1:return e.sent()&&this.props.group.SetUserBanState(this.props.friend.accountid,!0),[2]}})})},t.prototype.OnKickFriend=function(){var o=this,e=this.props.group,i=ae,r=this.props.ownerWindow;new Promise(function(e,t){var n=Object(S.b)(r,Object(T.c)("#Friend_Kick",o.props.friend.display_name));Object(M.b)(D.createElement(se,{OnOK:e,OnCancel:t,OnSet:function(e){i=e}}),r,"alertdialog",n,Object(w.g)(r))}).then(function(){return e.KickUser(o.props.friend.accountid,Math.floor(Date.now()/1e3+i))}).catch(function(){})},t.prototype.render=function(){var e=[],t=this.props.friend,n=this.props.group;return n.BHasMember(t.accountid)?(!this.props.bIsSelf&&n.BCanKick()&&e.push(D.createElement(L.d,{disabled:!n.BCanKickMember(t.accountid),key:"kick",onSelected:this.OnKickFriend},Object(T.c)("#Friend_Menu_KickFromChatRoom"))),!this.props.bIsSelf&&n.BCanBan()&&e.push(D.createElement(L.d,{disabled:!n.BCanBanMember(t.accountid),key:"ban",onSelected:this.BanFriend},Object(T.c)("#Friend_Menu_Ban"))),n&&e.push(D.createElement(K,{key:"editroles",friend:t,group:n,bEditable:n.BCanEditRoles()}))):e.push(D.createElement(L.d,{disabled:!0,key:"notmember",onSelected:null},Object(T.c)("#Friend_Menu_HasLeftChat"))),e},Object(c.c)([r.a],t.prototype,"BanFriend",null),Object(c.c)([r.a],t.prototype,"OnKickFriend",null),t}(D.Component),ee=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bShowViewGameInfo:void 0,bIsSubscribedToApp:void 0},C.b.BIsSubscribedApp(t.props.unAppID).then(function(e){t.setState({bShowViewGameInfo:C.b.BClientSupportsMessage("ViewGameInfoForSteamID"),bIsSubscribedToApp:e})}),t}return Object(c.d)(e,n),e.prototype.ShowStorePage=function(e){var t=b.a.STORE_BASE_URL+"app/"+this.props.unAppID;Object(v.e)(e,t),e.stopPropagation()},e.prototype.ShowCommunityHub=function(e){var t=b.a.COMMUNITY_BASE_URL+"app/"+this.props.unAppID;Object(v.e)(e,t),e.stopPropagation()},e.prototype.LaunchGame=function(e){var t="steam://rungameid/"+(this.props.ulGameID||this.props.unAppID);Object(v.e)(e,t),e.stopPropagation()},e.prototype.WatchGame=function(e){E.f.UIStore.SetFriendBroadcastVisible(this.props.friend.steamid64,!0),this.props.friend.OpenChatDialog(Object(w.e)(this,e))},e.prototype.JoinGame=function(t){var n=this,o=this.props.friend;o.persona.has_joinable_game_flag||o.persona.has_server_ip?C.b.OpenJoinGameDialog(o.steamid64).then(function(e){e.success||n.JoinLobby(o,t)}).catch(function(){n.JoinLobby(o,t)}):this.JoinLobby(o,t)},e.prototype.ViewGameInfo=function(e){var t=this.props.friend;C.b.ViewGameInfoForSteamID(t.steamid64)},e.prototype.JoinLobby=function(e,t){if(e.persona.is_in_valid_lobby){var n="steam://joinlobby/"+e.persona.m_gameid+"/"+e.persona.m_game_lobby_id+"/"+e.steamid64;Object(v.e)(t,n)}else this.LaunchGame(t)},e.prototype.ShowInSteam=function(e){var t="steam://store/"+this.props.unAppID;Object(v.e)(e,t),e.stopPropagation()},e.prototype.JoinPartyBeacon=function(e){var t="steam://joinparty/"+this.props.unAppID+"/"+this.props.partyBeacon.beacon_id;Object(v.e)(e,t),e.stopPropagation()},e.prototype.render=function(){if(!this.props.unAppID)return null;var e=[],t=void 0,n=this.props.friend,o=E.f.AppInfoStore.GetAppInfo(this.props.unAppID);if(!o.is_valid)return null;if(o.is_initialized)if(this.props.bShowLargeHeader)t=D.createElement("div",{className:"contextMenuGameHeader"},D.createElement("img",{className:"GameHeader",src:o.logo_url}));else{var i=D.createElement("span",{className:"contextMenuGameName"},Object(T.c)("#Friend_Menu_ViewGameStorePageGameName",this.props.strGameName||o.name));t=D.createElement("div",{className:"contextMenuGameItem"},D.createElement("div",{className:"contextMenuGameIcon"},D.createElement("img",{className:"GameIcon",src:o.icon_url})),i)}return void 0===this.state.bIsSubscribedToApp?e.push(D.createElement(L.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"showinsteam",onSelected:this.ShowInSteam},D.createElement(P.O,null),Object(T.c)("#Friend_Menu_ShowInSteam"))):this.state.bIsSubscribedToApp&&(this.props.partyBeacon?e.push(D.createElement(L.d,{className:"contextMenuGameOptions contextMenuPlayButton contextMenuPartyBeacon",key:"joinparty",onSelected:this.JoinPartyBeacon},D.createElement(P.O,null),Object(T.c)("#Friend_Menu_JoinFriendPartyBeacon"))):n&&(n.persona.is_in_joinable_game||n.persona.is_in_valid_lobby)&&e.push(D.createElement(L.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"joingame",onSelected:this.JoinGame},D.createElement(P.O,null),Object(T.c)("#Friend_Menu_JoinFriendGame"))),e.push(D.createElement(L.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"launchgame",onSelected:this.LaunchGame},D.createElement(P.O,null),Object(T.c)("#Friend_Menu_LaunchFriendGame")))),n&&e.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"watchgame",onSelected:this.WatchGame},Object(T.c)("#Friend_Menu_WatchFriendGame"))),n&&this.state.bShowViewGameInfo&&e.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"viewgameinfo",onSelected:this.ViewGameInfo},Object(T.c)("#Friend_Menu_ViewGameInfo"))),e.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"viewstorepage",onSelected:this.ShowStorePage},Object(T.c)("#Friend_Menu_ViewGameStorePage"))),e.push(D.createElement(L.d,{className:"contextMenuGameOptions",key:"viewcommunityhub",onSelected:this.ShowCommunityHub},Object(T.c)("#Friend_Menu_ViewCommunityHub"))),D.createElement(D.Fragment,null,D.createElement(L.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},t),D.createElement("div",{className:"contextMenuSectionContent"},e))},Object(c.c)([r.a],e.prototype,"ShowStorePage",null),Object(c.c)([r.a],e.prototype,"ShowCommunityHub",null),Object(c.c)([r.a],e.prototype,"LaunchGame",null),Object(c.c)([r.a],e.prototype,"WatchGame",null),Object(c.c)([r.a],e.prototype,"JoinGame",null),Object(c.c)([r.a],e.prototype,"ViewGameInfo",null),Object(c.c)([r.a],e.prototype,"ShowInSteam",null),Object(c.c)([r.a],e.prototype,"JoinPartyBeacon",null),e=Object(c.c)([i.a],e)}(D.Component),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.WatchStream=function(){var e=this.props.browserContext,t=this.props.friend,n=t.persona.m_broadcastAccountId;E.f.UIStore.ShowOrActivateBroadcast(e,n,!0).ShowWatchPromptDialog(t)},t.prototype.render=function(){var e=this.props.friend;return D.createElement(D.Fragment,null,D.createElement(L.d,{className:"contextMenuBroadcast contextMenuUnselectable",onSelected:null},D.createElement("div",{className:"contextMenuBroadcastTitle"},Object(T.c)("#Broadcast_Watching")),D.createElement("div",{className:"contextMenuBroadcastSubtitle"},e.GetBroadcastDescription())),D.createElement("div",{className:"contextMenuSectionContent"},D.createElement(L.d,{className:"contextMenuGameOptions",onSelected:this.WatchStream},Object(T.c)("#Broadcast_WatchStream"))))},Object(c.c)([r.a],t.prototype,"WatchStream",null),t=Object(c.c)([i.a],t)}(D.Component);function ne(e,t,n){return Object(g.a)(D.createElement(oe,{browserContext:e,group:t,ownerWindow:n.currentTarget.ownerDocument.defaultView}),n)}function oe(o){var e=[];return o.group&&o.group.modifiable&&(e.push(D.createElement(L.d,{key:"managegroup",onSelected:function(){var e,t,n;e=o.browserContext,t=o.group,n=o.ownerWindow,Object(M.b)(D.createElement(h,{browserContext:e,group:t,rgPreSelectedFriends:t.member_accountid_list}),n,"CreateFriendCategoryDialog",{strTitle:Object(T.c)("#FriendGroup_Menu_Manage"),popupWidth:664,popupHeight:700},Object(w.g)(n))}},Object(T.c)("#FriendGroup_Menu_Manage"))),e.push(D.createElement(L.d,{key:"removegroup",onSelected:function(){E.f.FriendStore.FriendGroupStore.RemoveGroup(o.group)}},Object(T.c)("#FriendGroup_Menu_Remove")))),D.createElement(L.c,{className:"friendsContextMenu"},e,D.createElement(L.d,{key:"creategroup",onSelected:function(){R(o.browserContext,o.ownerWindow)}},Object(T.c)("#FriendGroup_Menu_CreateGroup")))}function ie(e,t){return Object(g.a)(D.createElement(re,{browserContext:e,ownerWindow:t.currentTarget.ownerDocument.defaultView}),t)}var re=function(t){function e(e){return t.call(this,e)||this}return Object(c.d)(e,t),e.prototype.SetUserOnline=function(){E.f.FriendStore.SetUserPersonaState(1)},e.prototype.SetUserInvisible=function(){E.f.FriendStore.SetUserPersonaState(7)},e.prototype.SetUserAway=function(){E.f.FriendStore.SetUserPersonaState(3)},e.prototype.SetUserOffline=function(){E.f.SignOutOfFriends(this.props.browserContext)},e.prototype.ToggleUserDND=function(){E.f.FriendStore.SetUserDoNotDisturb(!E.f.FriendStore.GetUserDoNotDisturb())},e.prototype.ShowUserProfile=function(e){var t=E.f.FriendStore.self.GetCommunityProfileURL();Object(v.e)(e,t),e.stopPropagation()},e.prototype.EditProfile=function(e){var t=E.f.FriendStore.self.GetCommunityProfileURL()+"edit";Object(v.e)(e,t),e.stopPropagation()},e.prototype.EditName=function(e){var t;this.props.browserContext,t=this.props.ownerWindow,Object(M.b)(D.createElement(N,null),t,"ChangePersonaDialog",{strTitle:Object(T.c)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400},Object(w.g)(t))},e.prototype.render=function(){var e=[],t=[],n=1==E.f.FriendStore.self.persona.m_ePersonaState;e.push(D.createElement(L.b,{key:"state_online",bChecked:n,onSelected:this.SetUserOnline},Object(T.c)("#PersonaStateOnline")));var o=3==E.f.FriendStore.self.persona.m_ePersonaState;e.push(D.createElement(L.b,{key:"state_away",bChecked:o,onSelected:this.SetUserAway},Object(T.c)("#PersonaStateAway")));var i=7==E.f.FriendStore.self.persona.m_ePersonaState;if(e.push(D.createElement(L.b,{key:"state_invisible",className:"personaContextMenuItem",bChecked:i,onSelected:this.SetUserInvisible},Object(T.c)("#PersonaStateInvisible"),D.createElement("div",{className:"persona_menu_descriptor"},Object(T.c)("#PersonaStateInvisibleDescriptor")))),b.a.IN_CLIENT&&E.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var r=0==E.f.FriendStore.self.persona.m_ePersonaState;e.push(D.createElement(L.b,{key:"state_offline",className:"personaContextMenuItem",bChecked:r,onSelected:this.SetUserOffline},Object(T.c)("#PersonaStateOffline"),D.createElement("div",{className:"persona_menu_descriptor"},Object(T.c)("#PersonaStateOfflineDescriptor"))))}if(E.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var a=E.f.FriendStore.GetUserDoNotDisturb();t.push(D.createElement(L.b,{key:"do_not_disturb",className:"personaContextMenuItem",bChecked:!1,onSelected:this.ToggleUserDND},D.createElement(s.e,{key:"dnd_checkbox",classname:"DNDCheckBox",checked:a,label:Object(T.c)("#User_ToggleDoNotDisturb")}),D.createElement("div",{className:"persona_menu_dnd_descriptor"},Object(T.c)("#PersonaStateDoNotDisturbDescriptor"))))}return t.push(D.createElement(L.d,{key:"editname",onSelected:this.EditName},Object(T.c)("#Friend_Menu_ChangeMyName"))),t?D.createElement(L.c,{className:"friendsContextMenu currentUserContextMenu"},D.createElement("div",{className:"contextMenuSectionContent"},e),t):null},Object(c.c)([r.a],e.prototype,"SetUserOnline",null),Object(c.c)([r.a],e.prototype,"SetUserInvisible",null),Object(c.c)([r.a],e.prototype,"SetUserAway",null),Object(c.c)([r.a],e.prototype,"SetUserOffline",null),Object(c.c)([r.a],e.prototype,"ToggleUserDND",null),Object(c.c)([r.a],e.prototype,"ShowUserProfile",null),Object(c.c)([r.a],e.prototype,"EditProfile",null),Object(c.c)([r.a],e.prototype,"EditName",null),e}(D.PureComponent),ae=3600,se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.OnCancel=function(){this.props.OnCancel(),this.props.closeModal()},t.prototype.OnOK=function(){this.props.OnOK(),this.props.closeModal()},t.prototype.OnDropDownChange=function(e,t){this.props.OnSet(e.data)},t.prototype.render=function(){var e=[{label:Object(T.c)("#Friend_Kick_Hour"),data:ae},{label:Object(T.c)("#Friend_Kick_Day"),data:86400},{label:Object(T.c)("#Friend_Kick_Week"),data:604800}];return D.createElement(M.a,{onEscKeypress:this.OnCancel},D.createElement(s.h,{classNameContent:"KickUserDialog",onSubmit:this.OnOK,bCenterVertically:!0},D.createElement(s.m,null," ",Object(T.c)("#Friend_Kick")," "),D.createElement(s.b,null,D.createElement(s.c,null,Object(T.c)("#Friend_Kick_How_Long")),D.createElement(s.i,{strDefaultLabel:Object(T.c)("#Friend_Kick_Hour"),rgOptions:e,onChange:this.OnDropDownChange,selectedOption:void 0})),D.createElement(s.j,null,D.createElement(s.t,{onCancel:this.OnCancel,strOKText:Object(T.c)("#Friend_Kick_Button"),strCancelText:Object(T.c)("#Button_Cancel")}))))},Object(c.c)([r.a],t.prototype,"OnCancel",null),Object(c.c)([r.a],t.prototype,"OnOK",null),Object(c.c)([r.a],t.prototype,"OnDropDownChange",null),t}(D.Component)},FuJV:function(e,t,n){},"G+3Z":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var o=n("i8i4"),i=n("/IDK"),r=function(){return function(e){this.instance=new s(e,!1)}}();function a(e){return new s(e.body,!0)}var s=function(){function e(e,t){void 0===t&&(t=!0),this.m_parent=e,this.m_window=e.ownerDocument.defaultView,this.m_bRemoveOnHide=t}return e.prototype.Show=function(n,o){var i=this;return this.CancelShowInterval(),o?new Promise(function(t,e){i.iIntervalShow=i.m_window.setTimeout(function(){var e=i.m_parent.ownerDocument;e.defaultView&&!e.defaultView.closed&&(i.InternalShow(n),t())},o)}):(this.InternalShow(n),Promise.resolve())},e.prototype.InternalShow=function(e){this.m_container||(this.m_container=this.m_parent.ownerDocument.createElement("div"),this.m_parent.appendChild(this.m_container)),o.render(e,this.m_container)},e.prototype.Hide=function(e){var t=this;this.CancelShowInterval(),e?this.iIntervalShow=this.m_window.setTimeout(function(){t.InternalHide()},e):this.InternalHide()},e.prototype.InternalHide=function(){this.m_container&&(o.unmountComponentAtNode(this.m_container),this.m_bRemoveOnHide&&(this.m_parent.removeChild(this.m_container),this.m_container=null))},e.prototype.CancelShowInterval=function(){void 0!==this.iIntervalShow&&(this.m_window.clearInterval(this.iIntervalShow),this.iIntervalShow=void 0)},e.prototype.BIsChildElement=function(e){return this.m_container&&i.e(this.m_container,e)},e}(),c=function(){function e(e){this.m_mapEmbeddedHovers=new WeakMap,this.m_strUniqueID=e}return e.prototype.ShowElementDelayed=function(e,t,n,o){var i=this.GetEmbeddedElement(e);return i.activeObject=o,i.instance.Show(n,t)},e.prototype.ShowElement=function(e,t,n){var o=this.GetEmbeddedElement(e);o.activeObject=n,o.instance.Show(t)},e.prototype.HideElement=function(e,t,n){var o=this.GetEmbeddedElement(e);o.activeObject==t&&(o.activeObject=void 0,o.instance.Hide(n))},e.prototype.GetEmbeddedElement=function(e){var t=this.m_mapEmbeddedHovers.get(e);return t||(t=new r(e.body),this.m_mapEmbeddedHovers.set(e,t)),t},e}()},GxRc:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n("mrSG"),i=n("q1tI"),r=n.n(i),a=n("e2SU"),s=n("twdX"),c=n.n(s),l=function(t){function e(e){return t.call(this,e)||this}return Object(o.d)(e,t),e.prototype.AddSizeClass=function(e){"small"==this.props.size?e.push(c.a.throbber_small):"medium"==this.props.size?e.push(c.a.throbber_medium):"xlarge"==this.props.size?e.push(c.a.throbber_xlarge):"xxlarge"==this.props.size?e.push(c.a.throbber_xxlarge):e.push(c.a.throbber_large)},e.prototype.render=function(){var e=[c.a.LoadingWrapper,"SteamLogoThrobber"];this.AddSizeClass(e),void 0===this.props.string&&e.push(c.a.noString),this.props.className&&e.push(this.props.className),this.props.static&&e.push(c.a.Static);var t=r.a.createElement("div",{className:e.join(" ")},r.a.createElement("div",{className:c.a.Throbber},r.a.createElement(a.gb,{className:c.a.base}),r.a.createElement(a.gb,{className:c.a.blur})));return r.a.createElement("div",{className:"center"==this.props.position?c.a.throbber_center_wrapper:""},t,Boolean(this.props.string)&&r.a.createElement("div",{className:c.a.ThrobberText},this.props.string))},e}(r.a.PureComponent)},"H+H8":function(e,t,n){e.exports={HoverPosition:"hoverposition_HoverPosition_3gYNB",Ready:"hoverposition_Ready_3wImS",NoSpace:"hoverposition_NoSpace_2g_Ag",EnablePointerEvents:"hoverposition_EnablePointerEvents_JX-6A"}},HAz9:function(e,t,n){"use strict";var o=n("mrSG"),_=n("tkkQ"),i=n("8o0Y"),r=n("rsEv"),g=n("V7Fl"),a=n("geE1"),b=n("hReu"),v=n("LAqV"),s=n("Oefq"),c=n("YZlK"),l=n("gtB6"),p=n("EGkk"),u=n("FkUk"),m=n("okNM"),S=n("q1tI"),y=n("1w3K"),d=n("1VtQ"),h=n("adxy"),C=n("e2SU"),O=function(n){function e(e){var t=n.call(this,e)||this;return t.state={nCalculatedHeightPx:void 0,bLeftSliderVisible:!1,bRightSliderVisible:!1},t}return Object(o.d)(e,n),e.prototype.OnRef=function(e){this.UnbindWindowHandlers(),e&&((this.m_elScroll=e).ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.addEventListener("resize",this.CheckScrollPosition),this.CheckScrollPosition())},e.prototype.CheckScrollPosition=function(){if(!(!this.m_elScroll||this.m_animation&&this.m_animation.BIsActive())){for(var e=0,t=this.m_elScroll.firstElementChild;t;t=t.nextElementSibling)e=Math.max(e,t.getBoundingClientRect().height);e!=this.state.nCalculatedHeightPx&&this.setState({nCalculatedHeightPx:e}),this.UpdateSliderControlsForScrollOffset(this.m_elScroll.scrollLeft)}},e.prototype.UpdateSliderControlsForScrollOffset=function(e){var t=1<e,n=e+this.m_elScroll.getBoundingClientRect().width<this.m_elScroll.scrollWidth-1;t!=this.state.bLeftSliderVisible&&this.setState({bLeftSliderVisible:t}),n!=this.state.bRightSliderVisible&&this.setState({bRightSliderVisible:n})},e.prototype.AnimateScrollLeftTo=function(e){this.m_animation&&this.m_animation.Cancel(),this.m_animation=new h.a(this.m_elScroll,{scrollLeft:e},{msDuration:500,onComplete:this.CheckScrollPosition,timing:"cubic-in-out"}),this.m_animation.Start(),this.UpdateSliderControlsForScrollOffset(e)},e.prototype.OnSlideLeftClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.max(0,this.m_elScroll.scrollLeft-this.m_elScroll.getBoundingClientRect().width))},e.prototype.OnSlideRightClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.min(this.m_elScroll.scrollWidth-this.m_elScroll.getBoundingClientRect().width,this.m_elScroll.scrollLeft+this.m_elScroll.getBoundingClientRect().width))},e.prototype.OnWheel=function(e){e&&e.nativeEvent&&(e.nativeEvent.deltaY<0?this.OnSlideLeftClick():this.OnSlideRightClick())},e.prototype.GetScrollRef=function(){return this.m_elScroll},e.prototype.componentWillUnmount=function(){this.UnbindWindowHandlers(),this.m_animation&&this.m_animation.Cancel()},e.prototype.componentDidUpdate=function(){this.CheckScrollPosition()},e.prototype.UnbindWindowHandlers=function(){this.m_elScroll&&(this.m_elScroll.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.removeEventListener("resize",this.CheckScrollPosition),this.m_elScroll=void 0)},e.prototype.render=function(){var e="auto";return this.state.nCalculatedHeightPx&&(e=this.state.nCalculatedHeightPx+"px"),S.createElement("div",{onWheel:this.OnWheel,className:"HorizontalMiniSlider",style:{height:e}},S.createElement("div",{onClick:this.OnSlideLeftClick,className:"HorizontalMiniSliderArrow Left"+(this.state.bLeftSliderVisible?" Visible":"")},S.createElement(C.n,null)),S.createElement("div",{onClick:this.OnSlideRightClick,className:"HorizontalMiniSliderArrow Right"+(this.state.bRightSliderVisible?" Visible":"")},S.createElement(C.n,null)),S.createElement("div",{className:"HorizontalMiniSliderScroll "+this.props.className,onScroll:this.CheckScrollPosition,ref:this.OnRef},this.props.children))},Object(o.c)([d.a],e.prototype,"OnRef",null),Object(o.c)([d.a],e.prototype,"CheckScrollPosition",null),Object(o.c)([d.a],e.prototype,"OnSlideLeftClick",null),Object(o.c)([d.a],e.prototype,"OnSlideRightClick",null),Object(o.c)([d.a],e.prototype,"OnWheel",null),e}(S.Component),I=n("UqDm"),E=n("oh5H"),f=n("bbBM"),w=n("0wLp"),M=n("Hi0u"),D=n("ljid"),T=n("vJVb"),G=n("cLtS"),R=n("2vnA"),j=n("ieu3"),L=n("XCHq");n.d(t,"a",function(){return A}),n.d(t,"b",function(){return B});var A=function(n){function e(e){var t=n.call(this,e)||this;return t.m_mapTabs=new Map,t.m_rgOrderedRenderedTabs=[],t.m_bUsePopups=!1,t.m_nInitialTabDragOffset=-1,t.m_nTheaterTopHoverHeight=12,t.m_fnUnregisterDropComplete=void 0,t.state={tabDrag:void 0,iDragIndex:0,windowWidth:0,bTheaterModeTopHovered:!1},t}return Object(o.d)(e,n),e.prototype.componentDidUpdate=function(){this.FixScrollLocation()},e.prototype.componentDidMount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.addEventListener("resize",this.OnWindowResizeEvent),this.m_elchatTabDiv&&(this.setState({windowWidth:this.m_elchatTabDiv.clientWidth}),this.UpdateWindowIcon())},e.prototype.componentWillUnmount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.removeEventListener("resize",this.OnWindowResizeEvent)},e.prototype.OnWindowResizeEvent=function(){this.m_elchatTabDiv&&this.setState({windowWidth:this.m_elchatTabDiv.clientWidth})},e.prototype.SetDragTab=function(e){void 0!==e?this.m_fnUnregisterDropComplete=b.h.DragDropManager.RegisterForDropComplete(this.HandleDropComplete):this.m_fnUnregisterDropComplete&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0),this.setState({tabDrag:e}),this.m_nInitialTabDragOffset=-1},e.prototype.GetDragTab=function(){return this.state.tabDrag},e.prototype.HandleDropComplete=function(e){this.m_fnUnregisterDropComplete=void 0,this.setState({tabDrag:void 0})},e.prototype.FixScrollLocation=function(){if(this.m_elScroll&&this.props.activeTab){var e=this.m_mapTabs.get(this.props.activeTab.GetUniqueID());if(e){var t=e.GetChatTabRef();if(t){var n=t.offsetLeft,o=t.offsetLeft+t.scrollWidth,i=this.m_elScroll.scrollLeft+this.m_elScroll.clientWidth;if(n<i&&i<o){var r=n-this.m_elScroll.clientWidth+t.scrollWidth+40;this.SetScrollLeft(r)}else if(n<this.m_elScroll.scrollLeft+40||o>this.m_elScroll.scrollLeft+this.m_elScroll.clientWidth){0!=(r=n)&&(r-=40),this.SetScrollLeft(r)}}}}},e.prototype.SetScrollLeft=function(e){this.m_elScroll.scrollLeft!=e&&(this.m_animation&&this.m_animation.Cancel(),this.m_animation=new h.a(this.m_elScroll,{scrollLeft:e},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start())},e.prototype.UpdateDragOffset=function(e){var t,n=e.clientX;for(t=0;t<this.m_rgOrderedRenderedTabs.length;t++){var o=this.m_rgOrderedRenderedTabs[t],i=this.m_mapTabs.get(o.GetUniqueID()),r=i&&i.GetBoundingClientRect();if(i&&r&&(n-r.left<r.width&&(this.m_nInitialTabDragOffset<0&&(this.m_nInitialTabDragOffset=n-r.left),n-this.m_nInitialTabDragOffset<r.left+r.width/2)))break}this.state.iDragIndex!=t&&this.setState({iDragIndex:t})},e.prototype.OnTabRef=function(e,t){t?this.m_mapTabs.set(e,t):this.m_mapTabs.delete(e),this.UpdateWindowIcon()},e.prototype.OnScrollRef=function(e){this.m_elScroll=e?e.GetScrollRef():null},e.prototype.SelectTab=function(e){this.props.tabSet.ActivateTab(e)},e.prototype.OnDragStart=function(e){var t=b.h.DragDropManager.GetDragData();t&&"chattab"==t.type&&(t.tabSet=this.props.tabSet)},e.prototype.OnChatTabContianerRef=function(e){this.m_elchatTabDiv=e},e.prototype.OnDragEnd=function(){this.setState({tabDrag:void 0})},e.prototype.OnBackClick=function(e){this.props.ResponsiveWindowState.SetActiveView(s.c.FriendsList)},e.prototype.ToggleSingleWindowToggle=function(){b.h.ToggleSingleWindowToggle(this.props.popup)},e.prototype.ShowFriendsList=function(e){v.f.UIStore.SetTheaterMode(!1),v.f.UIStore.SetFriendsListCollapsed(Object(b.e)(this,e),!1)},e.prototype.StartTopbarEventListener=function(){this.m_elchatTabDiv.ownerDocument.defaultView.addEventListener("mousemove",this.OnTopbarHovered)},e.prototype.OnTopbarHovered=function(e){var t=e.clientY;v.f.UIStore.GetTheaterMode()||this.m_elchatTabDiv.ownerDocument.defaultView.removeEventListener("mousemove",this.OnTopbarHovered),t>this.m_nTheaterTopHoverHeight?this.state.bTheaterModeTopHovered&&(this.setState({bTheaterModeTopHovered:!1}),this.m_nTheaterTopHoverHeight=12):this.state.bTheaterModeTopHovered||(this.m_nTheaterTopHoverHeight=50,this.setState({bTheaterModeTopHovered:!0}))},e.prototype.OnTabSelectorClick=function(e){var t=33*this.m_mapTabs.size+(e.currentTarget.offsetTop+e.currentTarget.clientHeight)+16>e.currentTarget.ownerDocument.defaultView.innerHeight;Object(i.a)(S.createElement(this.ChatTabSelectorContextMenu,null),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!1,bPreferPopTop:!1,bForcePopup:t})},e.prototype.ChatTabSelectorContextMenu=function(){for(var e=[],t=0,n=this.props.tabSet.tabs;t<n.length;t++){var o=n[t],i=S.createElement(k,{tab:o,active:!0,selectTab:this.SelectTab,fnOnDragEnd:null,bDisableContextMenu:!0});e.push(S.createElement(p.d,{key:o.GetUniqueID(),className:"ChatTabContextMenuItem",onSelected:null},i))}return S.createElement(p.c,{className:"ChatTabs ChatTabsContextMenu compactView CompactFriendsList"},e)},e.prototype.UpdateWindowIcon=function(){try{if(this.props.popup&&this.props.popup.window&&void 0!==this.props.popup.window.SteamClient){for(var e=!1,t=!1,n=this.props.tabSet.tabs,o=0,i=n;o<i.length;o++){var r=i[o];0<r.GetUnreadMessageCount()&&(e=!0),r.IsVoiceActive()&&(t=!0)}t?this.props.popup.window.SteamClient.Window.SetWindowIcon("voice"):e?this.props.popup.window.SteamClient.Window.SetWindowIcon("messages"):this.props.popup.window.SteamClient.Window.SetWindowIcon("steam")}}catch(e){}},e.prototype.render=function(){var o=this,e=v.f.UIStore.GetTheaterMode();if(this.UpdateWindowIcon(),this.props.tabSet.tabCount<=0&&!this.props.popup)return null;var t,n=this.props.tabSet.tabs,i=this.props.activeTab,r=!1,a=!1;i instanceof g.d?r=i.isBroadcastShown:i instanceof G.b&&(r=!0);for(var s=0,c=n;s<c.length;s++){if(0<c[s].GetUnreadMessageCount()){a=!0;break}}if(this.state.tabDrag){var l=n.indexOf(this.state.tabDrag);-1!=l?l!=this.state.iDragIndex&&(t=n.slice(),Object(I.e)(t,l,Math.min(this.state.iDragIndex,n.length-1))):this.state.iDragIndex<n.length?(t=n.slice()).splice(this.state.iDragIndex,0,this.state.tabDrag):t=n.concat(this.state.tabDrag)}n=t||n,this.m_rgOrderedRenderedTabs=n;var p,u="ChatTabs titleBarContainer";this.props.popup&&(u+=" HasWindowControls"),1==n.length?u+=" OneTab":this.state.windowWidth<180*n.length+180&&(u+=" HasTabs"),v.f.SettingsStore.FriendsSettings.bCompactFriendsList&&(u+=" compactView"),this.state.bTheaterModeTopHovered&&(u+=" TheaterTopHovered"),this.props.ResponsiveWindowState&&(p=S.createElement("div",{className:"ChatTabsBackButton",onClick:this.OnBackClick},"<<")),r&&(u+=" activeTabHasBroadcast");var m,d=!1,h=!0;this.props.popup&&(m=Object(b.f)(this.props.popup),h=v.f.UIStore.BIsFriendsListSingleWindow(m),d=m!=v.a),e&&this.m_elchatTabDiv&&this.StartTopbarEventListener();var f=this.m_elchatTabDiv&&180*this.props.tabSet.tabCount+(_.a.IN_CLIENT?168:48)>this.m_elchatTabDiv.clientWidth||!1;return S.createElement("div",{className:u,onDragStart:this.OnDragStart,ref:this.OnChatTabContianerRef},this.props.popup&&S.createElement(w.a,{hideMinMax:d,popup:this.props.popup}," "),p,(e&&h||this.props.showOpenFriendsList)&&S.createElement("div",{className:"chatTabOpenFriendsList",onClick:this.ShowFriendsList},S.createElement(C.v,null),Object(E.c)("#FriendsList_ExpandButton")),0<this.props.tabSet.tabCount&&S.createElement("div",{className:"chatTabSetContainer"+(f?" showTabSelector":"")},S.createElement(O,{className:"chatTabList",ref:this.OnScrollRef},S.createElement(y.TransitionGroup,{className:"chatTabTransitionGroup"},n.map(function(t,e){var n=o.props.activeTab==t;return S.createElement(y.CSSTransition,{className:"ChatTabTranstionContainer",classNames:"ChatTabTransiton",key:t.GetUniqueID(),timeout:350},S.createElement(k,{tab:t,active:n,selectTab:o.SelectTab,ref:function(e){return o.OnTabRef(t.GetUniqueID(),e)},fnOnDragEnd:o.OnDragEnd}))}))),f&&S.createElement("div",{className:"chatTabSelector"+(a?" UnreadMessages":""),onClick:this.OnTabSelectorClick},S.createElement(C.o,null),a&&S.createElement("div",{className:"ChatUnreadMessageIndicator"})),_.a.IN_CLIENT&&S.createElement(S.Fragment,null,S.createElement("div",{className:"chatTabDraggableSpace"}),S.createElement("div",{className:"chatTabDraggableSpace ChromeClearance"}))),this.props.popup&&_.a.IN_CLIENT&&S.createElement("div",{className:"title-area-icon singleWindowToggle"+(d?" inOverlay":""),title:Object(E.c)("#FriendsList_TitleArea_SingleWindowButton"),onClick:this.ToggleSingleWindowToggle},S.createElement(C.Z,null)),S.createElement("div",{className:"dropTargetBox"}),e&&S.createElement("div",{className:"theaterModeHoverSpace"+(a?" hasUnreadMessages":"")},a&&S.createElement("div",{className:"ChatUnreadMessageIndicator"},S.createElement("div",{className:"chatUnreadCircle"}))))},Object(o.c)([R.x],e.prototype,"m_nTheaterTopHoverHeight",void 0),Object(o.c)([d.a],e.prototype,"OnWindowResizeEvent",null),Object(o.c)([d.a],e.prototype,"HandleDropComplete",null),Object(o.c)([d.a],e.prototype,"OnTabRef",null),Object(o.c)([d.a],e.prototype,"OnScrollRef",null),Object(o.c)([d.a],e.prototype,"SelectTab",null),Object(o.c)([d.a],e.prototype,"OnDragStart",null),Object(o.c)([d.a],e.prototype,"OnChatTabContianerRef",null),Object(o.c)([d.a],e.prototype,"OnDragEnd",null),Object(o.c)([d.a],e.prototype,"OnBackClick",null),Object(o.c)([d.a],e.prototype,"ToggleSingleWindowToggle",null),Object(o.c)([d.a],e.prototype,"ShowFriendsList",null),Object(o.c)([d.a],e.prototype,"StartTopbarEventListener",null),Object(o.c)([d.a],e.prototype,"OnTopbarHovered",null),Object(o.c)([d.a],e.prototype,"OnTabSelectorClick",null),Object(o.c)([d.a],e.prototype,"ChatTabSelectorContextMenu",null),e=Object(o.c)([m.a],e)}(S.Component),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_bMiddleMouseDown=!1,e}return Object(o.d)(e,t),e.prototype.BindChatTab=function(e){this.m_elChatTab=e},e.prototype.GetBoundingClientRect=function(){return this.m_elChatTab?this.m_elChatTab.getBoundingClientRect():void 0},e.prototype.GetChatTabRef=function(){return this.m_elChatTab},e.prototype.OnDragStart=function(e){var t=e.clientX-e.currentTarget.getBoundingClientRect().left,n=e.clientY-e.currentTarget.getBoundingClientRect().top;b.h.DragDropManager.StartDrag({type:"chattab",tab:this.props.tab,offsetX:t,offsetY:n})},e.prototype.OnDragEnd=function(e){var t=b.h.DragDropManager.GetDragData();if(t&&"chattab"==t.type){var n=t,o=!1;if(n.tabSet)o=v.f.UIStore.GetPerContextChatData(n.tabSet.GetBrowserContext()).BUsePopups();if(!b.h.DragDropManager.BWasDropConsumed()&&n.tabSet&&1<n.tabSet.tabCount&&o){var i=e.currentTarget.getBoundingClientRect(),r=i.left-e.clientX,a=i.top-e.clientY;if(1e4<r*r+a*a){var s=e.currentTarget.ownerDocument.defaultView,c={left:Math.max(0,e.screenX-n.offsetX),top:Math.max(0,e.screenY-n.offsetY),width:s.innerWidth,height:s.innerHeight};if(this.props.fnOnDragEnd(),o){var l=Object(b.e)(this,e);e.currentTarget.ownerDocument.defaultView.SteamClient.Window.GetMousePositionDetails(function(e){e&&(c.left=-n.offsetX,c.top=-n.offsetY),v.f.UIStore.MoveTabToNewPopup(l,n.tab,c,e)})}else v.f.UIStore.MoveTabToNewPopup(Object(b.e)(this,e),n.tab,c)}}}b.h.DragDropManager.EndDrag()},e.prototype.OnMouseDown=function(e){0==e.button?this.props.selectTab(this.props.tab):1==e.button&&(e.preventDefault(),this.m_bMiddleMouseDown=!0)},e.prototype.OnMouseUp=function(e){1==e.button&&this.m_bMiddleMouseDown&&(v.f.UIStore.CloseTab(Object(b.e)(this,e),this.props.tab),e.preventDefault(),this.m_bMiddleMouseDown=!1)},e.prototype.OnMouseLeave=function(e){this.m_bMiddleMouseDown=!1},e.prototype.OnCloseClick=function(e){v.f.UIStore.CloseTab(Object(b.e)(this,e),this.props.tab),e.stopPropagation()},e.prototype.OnContextMenu=function(e){if(!this.props.bDisableContextMenu){var t=this.props.tab;if(t.IsChatRoom()){if(t instanceof g.d){n=t;Object(l.b)(e,n.GetGroup(),{tab:t})}}else{var n=this.props.tab.GetChatView();Object(u.b)(Object(b.e)(this,e),{tab:this.props.tab},n.chat.chat_partner,e)}}},e.prototype.render=function(){var e=this.props.tab,t="chatTab no-drag";return this.props.active&&(t+=" active"),e.IsChatRoom()&&(t+=" chatRoom"),e.IsVoiceActive()&&(t+=" VoiceActive",v.f.ChatStore.VoiceChat.IsMicMuted()&&(t+=" MicMuted")),S.createElement("div",{className:t,ref:this.BindChatTab,draggable:!0,onMouseDown:this.OnMouseDown,onMouseUp:this.OnMouseUp,onMouseLeave:this.OnMouseLeave,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd,onContextMenu:this.OnContextMenu},S.createElement("div",{className:"chatTabHighlight"}),e.IsVoiceActive()&&S.createElement("div",{className:"MicStatus",title:v.f.ChatStore.VoiceChat.IsMicMuted()?Object(E.c)("#Tooltip_MicStatus_Muted"):Object(E.c)("#Tooltip_MicStatus_Active")},S.createElement(C.H,null)),S.createElement(T.a,null,S.createElement(N,{tab:this.props.tab})),S.createElement("div",{className:"TabRightContainer"},S.createElement("div",{title:Object(E.c)("#Chat_CloseTooltip"),className:"chatTabClose closeButton",onClick:this.OnCloseClick},S.createElement(C.pb,null)),S.createElement(P,{tab:this.props.tab})))},Object(o.c)([d.a],e.prototype,"BindChatTab",null),Object(o.c)([d.a],e.prototype,"OnDragStart",null),Object(o.c)([d.a],e.prototype,"OnDragEnd",null),Object(o.c)([d.a],e.prototype,"OnMouseDown",null),Object(o.c)([d.a],e.prototype,"OnMouseUp",null),Object(o.c)([d.a],e.prototype,"OnMouseLeave",null),Object(o.c)([d.a],e.prototype,"OnCloseClick",null),Object(o.c)([d.a],e.prototype,"OnContextMenu",null),e=Object(o.c)([m.a],e)}(S.Component),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.tab;if(e.IsChatRoom()&&e instanceof g.d){var t=e;return t.GetGroup().hasUnreadChatMessage?S.createElement(S.Fragment,null,S.createElement(j.b,{group:t.GetGroup(),className:"ChatTabUnread"}),S.createElement("div",{className:"UnreadGlow"})):null}return e.GetUnreadMessageCount()?S.createElement(S.Fragment,null,S.createElement("div",{className:"chatTabUnreadBadge"},e.GetUnreadMessageCount()),S.createElement("div",{className:"UnreadGlow"})):null},t=Object(o.c)([m.a],t)}(S.Component),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.tab.GetChatView();if(e&&e.chat instanceof a.a)return S.createElement("div",{className:"ChatTabContent"},S.createElement(f.c,{friend:e.chat.chat_partner,noActions:!0,context:{chat:e.chat}}));if(e&&e.chat instanceof r.a){var t=this.props.tab.GetGroup();return S.createElement("div",{className:"ChatTabContent ChatRoom"},S.createElement(c.a,{group:t,small:!0}),S.createElement("div",{className:"chatTabGroupName"},this.props.tab.GetTabName()))}if(this.props.tab instanceof G.b){var n=this.props.tab.GetTabName();return S.createElement("div",{className:"ChatTabContent ChatRoom"},S.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar Small"},S.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:L.b.tabIcon})),S.createElement("div",{className:"chatTabGroupName"},n))}return null},t=Object(o.c)([m.a],t)}(S.Component);function B(e){b.h.UIDisplayPrefs.bDontShowVoiceAlert||e&&Object(M.b)(S.createElement(F,null),e,"ActiveVoiceAlert",{strTitle:Object(E.c)("#Chat_StillInVoiceDialog_Title"),popupWidth:650,popupHeight:340},Object(b.g)(e))}var F=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bDontShowChecked:!1,strChatName:""},t.m_strChannelName="",t}return Object(o.d)(e,n),e.prototype.DismissDialog=function(){this.props.closeModal()},e.prototype.OnSubmit=function(){b.h.SetUIDisplayPref("bDontShowVoiceAlert",this.state.bDontShowChecked),this.props.closeModal()},e.prototype.OnDialogChecked=function(){this.setState({bDontShowChecked:!this.state.bDontShowChecked})},e.prototype.OnManualVoiceChatExit=function(){v.f.VoiceStore.OnUserEndVoiceChat(),this.OnSubmit()},e.prototype.componentDidMount=function(){this.setState({strChatName:v.f.ChatStore.GetActiveVoiceChat().name})},e.prototype.render=function(){return S.createElement(M.a,{onEscKeypress:this.DismissDialog},S.createElement(D.h,{classNameContent:"CloseActiveVoiceWindowConfirmation",onSubmit:this.OnSubmit},S.createElement(D.m,null,S.createElement("div",null,Object(E.c)("#Chat_StillInVoiceDialog_Title"))),S.createElement(D.b,null,S.createElement("div",{className:"activeVoiceDetails"},Object(E.c)("#Chat_StillInVoiceDialog_Desc1")),S.createElement("div",{className:"activeVoiceDetails"},Object(E.c)("#Chat_StillInVoiceDialog_Desc2")),S.createElement("div",{className:"voiceControlsExample"},S.createElement(f.a,{name:this.state.strChatName,chat:v.f.ChatStore.GetActiveVoiceChat(),nostatus:!0}),S.createElement("div",{className:"circleHighlight voiceExit"})),!1),S.createElement(D.j,null,S.createElement("div",{className:"_DialogColLayout"},S.createElement(D.x,{onClick:this.OnSubmit},Object(E.c)("#Chat_StillInVoiceDialog_KeepChatting"))),S.createElement("div",{className:"dontShowConfirmation",onClick:this.OnDialogChecked},S.createElement(D.e,{checked:this.state.bDontShowChecked,onChange:this.OnDialogChecked}),Object(E.c)("#Dialog_DontShowMeAgain")))))},Object(o.c)([d.a],e.prototype,"DismissDialog",null),Object(o.c)([d.a],e.prototype,"OnSubmit",null),Object(o.c)([d.a],e.prototype,"OnDialogChecked",null),Object(o.c)([d.a],e.prototype,"OnManualVoiceChatExit",null),e=Object(o.c)([m.a],e)}(S.Component)},HVDT:function(e,t,n){e.exports={NewEmoticonIndicator:"emoticon_NewEmoticonIndicator_3NVON",NewEmoticonCircle:"emoticon_NewEmoticonCircle_3mNrG",EmoticonSelector:"emoticon_EmoticonSelector_177nw",emoticon:"emoticon_emoticon_9hYGN",large:"emoticon_large_p8Q42",EmoticonSelector_Emoticons:"emoticon_EmoticonSelector_Emoticons_1OTXW",EmoticonSelector_Separator:"emoticon_EmoticonSelector_Separator_1_yzI",EmoticonSelector_SeparatorBackground:"emoticon_EmoticonSelector_SeparatorBackground_13bYy",EmoticonSelector_Controls:"emoticon_EmoticonSelector_Controls_1hOWv",EmoticonSelector_Item:"emoticon_EmoticonSelector_Item_3muLb",EmoticonSelector_Item_New:"emoticon_EmoticonSelector_Item_New_spFg_"}},Hi0u:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return _});var u=n("mrSG"),d=n("q1tI"),m=n("i8i4"),o=n("JtU4"),i=n("EGkk"),h=n("kQil"),r=n("0wLp"),s=n("1VtQ"),f=n("1n9R");function a(o,i,r,a,s,c,l,p){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.e)(this,function(e){switch(e.label){case 0:return[4,function(r,a,s){return Object(u.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(u.e)(this,function(e){switch(e.label){case 0:return(t=a.document.createElement("div")).style.position="absolute",t.style.visibility="hidden",a.document.body.appendChild(t),m.render(r,t),[4,Promise.all([s,document.fonts&&document.fonts.ready])];case 1:return e.sent(),n=t.getBoundingClientRect(),o=Math.ceil(n.height),i=Math.ceil(n.width),m.unmountComponentAtNode(t),a.document.body.removeChild(t),[2,{height:o,width:i}]}})})}(o,i,a)];case 1:return(t=e.sent()).height/i.innerHeight<.9&&t.width/i.innerWidth<.8?[2,_(o,i)]:(n={strTitle:r||"Steam Dialog",popupWidth:Math.max(t.width,l||0),popupHeight:Math.max(t.height,c||0),bDispatchFakeUnloadEvent:!0,bHideMainWindowForPopups:!1!==p},[2,_(o,i,r,n,s)])}})})}function _(e,t,n,o,i){var r,a,s=e.props.closeModal,c=function(){r&&r.Close(),a&&a.Close(),s&&s()},l=d.cloneElement(e,{closeModal:c}),p=Object(h.c)(t);if(p.BUsePopups()&&f.b.USE_POPUPS&&o&&n){if(o.bHideMainWindowForPopups){var u=d.createElement(h.d,{className:"Hidden",onEscKeypress:!l.props.bDisableBackgroundDismiss&&c},d.createElement("div",null));a=p.ShowModal(u)}var m=new g(t,n,o,l,i);m.Show(),r=m}else r=p.ShowModal(l);return r}n.d(t,"a",function(){return h.d});var g=function(a){function e(e,t,n,o,i){var r=a.call(this,t,{title:n.strTitle,html_class:"client_chat_frame fullheight ModalDialogPopup",body_class:"fullheight ModalDialogBody",owner_window:void 0,replace_existing_popup:!0,target_browser:i,availscreenwidth:e.screen.availWidth,availscreenheight:e.screen.availHeight})||this;return r.m_bModalInitiatedClose=!1,r.m_elContentRefForUnloadHack=d.createRef(),r.m_windowOpener=e,r.m_modalProps=n,r.m_modalElement=o,r}return Object(u.d)(e,a),e.prototype.Close=function(){this.m_bModalInitiatedClose=!0,a.prototype.Close.call(this),this.SendFakeUnloadEvent()},e.prototype.SendFakeUnloadEvent=function(){this.m_elContentRefForUnloadHack.current&&this.m_elContentRefForUnloadHack.current.dispatchEvent(new Event("unload",{bubbles:!0}))},e.prototype.UpdateParamsBeforeShow=function(e){var t=this.m_modalProps.popupWidth||500,n=this.m_modalProps.popupHeight||400,o=this.m_windowOpener.screen,i=(o.availWidth-t)/2,r=(o.availHeight-n)/2,a=o;return void 0!==a.availLeft&&void 0!==a.availTop&&(i+=a.availLeft,r+=a.availTop),Object(u.a)(Object(u.a)({},e),{dimensions:{width:t,height:n,left:i,top:r}})},e.prototype.OnLoad=function(){},e.prototype.OnResize=function(){},e.prototype.OnClose=function(){this.m_bModalInitiatedClose||this.m_modalProps.closeModal&&this.m_modalProps.closeModal()},e.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame"),this.m_modalElement&&m.render(d.createElement("div",{className:"PopupFullWindow",onContextMenu:i.i},d.createElement(r.a,{hideMinMax:!0,popup:e,OnClose:this.SendFakeUnloadEvent}),d.createElement(h.a,{ModalManager:Object(h.c)(e)}),this.m_modalElement,this.m_modalProps.bDispatchFakeUnloadEvent&&d.createElement("div",{ref:this.m_elContentRefForUnloadHack})),t)},Object(u.c)([s.a],e.prototype,"SendFakeUnloadEvent",null),e}(o.a)},J0bI:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var o=n("mrSG"),i=n("2vnA"),r=n("0N1H"),a=n("tkkQ"),s=function(){function e(e){this.m_bReady=!1,this.m_bValid=!1,this.m_strInviteCode=e}return e.prototype.BIsReady=function(){return this.m_bReady},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.BIsInviteLink=function(){return!!this.m_strInviteCode},e.prototype.GetInviteCode=function(){return this.m_strInviteCode},e.prototype.BNeverExpires=function(){return this.m_rtTimeExpires==r.f},e.prototype.GetChatRoomGroupID=function(){return this.m_ulChatRoomGroupID},e.prototype.BIsVoiceChatInvite=function(){return!!this.m_ulChatID},e.prototype.GetChatID=function(){return this.m_ulChatID},e.prototype.GetURL=function(){return this.m_strInviteCode?c(this.m_strInviteCode):null},e.prototype.BIsUserBanned=function(){return this.m_bIsBanned},e.prototype.GetTimeKickExpires=function(){return this.m_rtKickExpires},Object.defineProperty(e.prototype,"time_expires",{get:function(){return this.m_rtTimeExpires},enumerable:!0,configurable:!0}),e.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},e.prototype.InitDirectInvite=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=n,this.m_rtKickExpires=o,this.m_rtTimeExpires=r.f,this.m_bValid=!0,this.m_bReady=!0},Object(o.c)([i.x],e.prototype,"m_bReady",void 0),Object(o.c)([i.g],e.prototype,"InitInvalid",null),Object(o.c)([i.g],e.prototype,"InitDirectInvite",null),e}();function c(e){return"public"==a.a.WEB_UNIVERSE?"https://s.team/chat/"+e:a.a.COMMUNITY_BASE_URL+"chat/invite/"+e}},Jdiq:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return p});var o=n("mrSG"),a=n("1n9R"),i=n("2vnA"),s=n("q1tI"),c=n("G+3Z"),r=function(){function e(){this.m_mapEmoticonHovers=new Map}return e.prototype.GetEmoticonHover=function(e){var t=this.m_mapEmoticonHovers.get(e);return t||(t=new l(e),this.m_mapEmoticonHovers.set(e,t)),t},e}(),l=function(){function r(e){this.m_bVisible=!1,this.m_strEmoticonHoverHTML=void 0,this.m_bLoadingData=!1,this.m_strEmoticonName=e}return Object.defineProperty(r.prototype,"visible",{get:function(){return this.m_bVisible&&!!this.m_strEmoticonHoverHTML},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"emoticon_html",{get:function(){return this.m_strEmoticonHoverHTML},enumerable:!0,configurable:!0}),r.prototype.Show=function(e,t){var n=this;this.EnsureEmoticonLoaded();var o=e.currentTarget,i=s.createElement(t,{hover:this,target:o});r.sm_embeddedElements.ShowElementDelayed(o.ownerDocument,50,i,this).then(function(){n.m_bVisible=!0})},r.prototype.Hide=function(e){this.m_bVisible=!1,r.sm_embeddedElements.HideElement(e.currentTarget.ownerDocument,this,500)},r.prototype.EnsureEmoticonLoaded=function(){var t=this;if(void 0===this.m_strEmoticonHoverHTML&&!this.m_bLoadingData){this.m_bLoadingData=!0;var e="OnLoadEmoticon_"+this.m_strEmoticonName,n=a.b.COMMUNITY_CDN_URL+"economy/emoticonhover/"+encodeURIComponent(this.m_strEmoticonName)+"/jsonp.js?callback="+encodeURIComponent(e)+"&l="+encodeURIComponent(a.b.LANGUAGE),o=void 0,i=void 0,r=function(){t.m_bLoadingData=!1,delete window[e],o&&window.clearTimeout(o),i&&i.remove()};window[e]=function(e){t.m_strEmoticonHoverHTML=e,t.m_bVisible=!0,r()},o=window.setTimeout(r,5e3),(i=window.document.createElement("script")).type="text/javascript",i.async=!0,i.src=n,i.onerror=r,window.document.head.appendChild(i)}},r.sm_embeddedElements=new c.a("CEmoticonHoverContainer"),Object(o.c)([i.x],r.prototype,"m_bVisible",void 0),Object(o.c)([i.x],r.prototype,"m_strEmoticonHoverHTML",void 0),r}(),p=new r},JtU4:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return b});var c,o,i=n("mrSG"),r=n("2vnA"),a=n("i8i4"),s=n("UqDm"),l=n("WpBz"),p=n("1VtQ"),u=n("hEDq"),m=n("oh5H"),d=n("1n9R");(o=c||(c={}))[o.Minimized=1]="Minimized",o[o.Hidden=2]="Hidden",o[o.Tooltip=4]="Tooltip",o[o.ContextMenu=8]="ContextMenu",o[o.Resizable=16]="Resizable";var h=function(){function e(e,t){this.m_rgLoadingLinks=[],this.m_rgLoadingLinks=[];for(var n=e.document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=n[o];i.addEventListener("load",this.OnLinkLoad),this.m_rgLoadingLinks.push(i)}}return e.prototype.SetTarget=function(e){this.m_fnRender=e,0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},e.prototype.OnLinkLoad=function(e){e.currentTarget.removeEventListener("load",this.OnLinkLoad),s.c(this.m_rgLoadingLinks,e.currentTarget),0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},Object(i.c)([p.a],e.prototype,"OnLinkLoad",null),e}(),f=function(){function e(e,t){this.m_bFocused=!1,this.m_strName=e,this.m_rgParams=t,this.m_rgParams.target_browser&&(this.m_strName+="_pid"+this.m_rgParams.target_browser.m_unPID),this.m_strTitle=t.title,delete this.m_rgParams.title}return e.prototype.UpdateParamsBeforeShow=function(e){return e},e.prototype.OnDrop=function(e){console.log("Ignoring drop onto toplevel window",e),e.preventDefault(),e.stopPropagation()},e.prototype.OnDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="none",e.stopPropagation()},e.prototype.OnMessage=function(e){"window_moved"==e.data&&this.OnResize()},e.prototype.Show=function(e,t){var n,o=this;void 0===e&&(e=!0),void 0===t&&(t=!1),window.SteamClient&&(this.m_rgParams.eCreationFlags|=c.Hidden),this.m_rgParams.eCreationFlags&c.Tooltip&&(e=!1),this.BIsValid()&&(this.BIsClosed()?(this.m_popup=void 0,this.m_element=void 0):e&&this.Focus(t));var i,r,a,s=b.GetExistingPopup(this.m_strName);s&&!this.m_rgParams.replace_existing_popup||(this.m_rgParams=this.UpdateParamsBeforeShow(this.m_rgParams),s?(r=s.m_element,i=s.m_popup,s.ReleasePopup(),a=s.m_renderWhenReady,b.RemoveTrackedPopup(s),i.removeEventListener("beforeunload",s.OnBeforeUnloadEvent),i.removeEventListener("unload",s.OnUnload),i.removeEventListener("resize",s.OnResizeEvent),i.removeEventListener("focus",this.OnFocusInternal),i.removeEventListener("blur",this.OnBlurInternal),i.removeEventListener("drop",s.OnDrop),i.removeEventListener("dragover",s.OnDragOver),i.removeEventListener("message",this.OnMessage)):(i=(n=g.CreatePopup(this.m_strName,this.m_rgParams)).popup,r=n.element,a=new h(i,r)),i&&r&&(i.document.title=this.m_strTitle,i.addEventListener("beforeunload",this.OnBeforeUnloadEvent),i.addEventListener("unload",this.OnUnload),i.addEventListener("resize",this.OnResizeEvent),i.addEventListener("focus",this.OnFocusInternal),i.addEventListener("blur",this.OnBlurInternal),i.addEventListener("drop",this.OnDrop),i.addEventListener("dragover",this.OnDragOver),i.addEventListener("message",this.OnMessage),d.b.LANGUAGE&&i.document.documentElement.setAttribute("lang",m.a[d.b.LANGUAGE]),this.m_popup=i,this.m_element=r,this.m_renderWhenReady=a,this.m_renderWhenReady.SetTarget(function(){return o.RenderInternal(o.m_popup,o.m_element,e)})),b.AddTrackedPopup(this),s&&e&&this.Focus())},e.prototype.RemoveEventListeners=function(){this.window.removeEventListener("beforeunload",this.OnBeforeUnloadEvent),this.window.removeEventListener("unload",this.OnUnload),this.window.removeEventListener("resize",this.OnResizeEvent),this.window.removeEventListener("focus",this.OnFocusInternal),this.window.removeEventListener("blur",this.OnBlurInternal),this.window.removeEventListener("drop",this.OnDrop),this.window.removeEventListener("dragover",this.OnDragOver),this.window.removeEventListener("message",this.OnMessage)},e.prototype.RenderInternal=function(e,t,n){var o;this.browser_info&&((o=this.browser_info).m_eBrowserType==u.f.EBrowserType_OpenVROverlay||o.m_eBrowserType==u.f.EBrowserType_OpenVROverlay_Dashboard)&&(t.ownerDocument.body.className+=" VR"),this.Render(e,t),this.OnLoad(),e.SteamClient&&(n?e.SteamClient.Window.BringToFront():e.SteamClient.Window.ShowWindow())},e.prototype.OnResizeEvent=function(){this.OnResize()},e.prototype.OnBeforeUnloadEvent=function(){this.OnBeforeUnload()},e.prototype.OnUnload=function(){this.RemoveEventListeners(),b.RemoveTrackedPopup(this),this.OnClose(),a.unmountComponentAtNode(this.m_element)},Object.defineProperty(e.prototype,"browser_info",{get:function(){return this.m_rgParams.target_browser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.m_popup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root_element",{get:function(){return this.m_element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.m_strTitle},set:function(e){this.m_strTitle=e,this.m_popup&&(this.m_popup.document.title=this.m_strTitle)},enumerable:!0,configurable:!0}),e.prototype.Focus=function(e){void 0===e&&(e=!1),this.m_popup&&void 0!==this.m_popup.SteamClient&&void 0!==this.m_popup.SteamClient.Window?e?this.m_popup.SteamClient.Window.SetForegroundWindow():this.m_popup.SteamClient.Window.BringToFront():this.m_popup&&this.m_popup.focus()},e.prototype.Close=function(){this.m_popup&&this.m_popup.close()},e.prototype.GetName=function(){return this.m_strName},e.prototype.BIsValid=function(){return!!this.m_popup},e.prototype.BIsClosed=function(){return!this.m_popup||this.m_popup.closed},e.prototype.BIsVisible=function(){return this.m_popup&&!this.m_popup.closed&&"visible"==this.m_popup.document.visibilityState},e.prototype.BIsFocused=function(){return this.BIsVisible()&&this.m_popup.document.hasFocus()},e.prototype.OnFocusInternal=function(){this.m_bFocused=!0,this.OnFocus()},e.prototype.OnBlurInternal=function(){this.m_bFocused=!1,this.OnBlur()},Object.defineProperty(e.prototype,"focused",{get:function(){return this.m_bFocused},enumerable:!0,configurable:!0}),e.prototype.GetWindowRestoreDetails=function(){var n=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient?new Promise(function(t,e){n.m_popup.SteamClient.Window.GetWindowRestoreDetails(function(e){t(e)})}):Promise.resolve("")},e.prototype.IsMinimized=function(){var n=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient&&this.m_popup.SteamClient.Window&&this.m_popup.SteamClient.Window.IsWindowMinimized?new Promise(function(t,e){n.m_popup.SteamClient.Window.IsWindowMinimized(function(e){t(e)})}):Promise.resolve(!1)},e.prototype.ReleasePopup=function(){this.OnClose(),this.m_popup=null},e.prototype.OnBeforeUnload=function(){},e.prototype.OnFocus=function(){},e.prototype.OnBlur=function(){},Object(i.c)([r.x],e.prototype,"m_bFocused",void 0),Object(i.c)([p.a],e.prototype,"OnMessage",null),Object(i.c)([p.a],e.prototype,"OnResizeEvent",null),Object(i.c)([p.a],e.prototype,"OnBeforeUnloadEvent",null),Object(i.c)([p.a],e.prototype,"OnUnload",null),Object(i.c)([p.a],e.prototype,"OnFocusInternal",null),Object(i.c)([p.a],e.prototype,"OnBlurInternal",null),e}(),_=function(r){function e(e,t,n,o){var i=r.call(this,e,n)||this;return i.SetSavedDimensionsKey(t),i.m_bExpires=o,i}return Object(i.d)(e,r),e.prototype.BIsInOverlay=function(){return this.browser_info&&this.browser_info!={m_unPID:0,m_nBrowserID:-1}},e.prototype.SetSavedDimensionsKey=function(e){this.m_strSavedDimensionsKey=e},e.prototype.UpdateParamsBeforeShow=function(e){return!this.m_strSavedDimensionsKey||e.bIgnoreSavedDimensions||e.strRestoreDetails?e.strRestoreDetails&&(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),b.SetRestoreDetails(this.m_strInitialSavedDimensionsKey,e.strRestoreDetails,this.m_bExpires)):(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),e.strRestoreDetails=b.GetRestoreDetails(this.m_strInitialSavedDimensionsKey)),e},e.prototype.OnLoad=function(){var t=this;this.GetWindowRestoreDetails().then(function(e){t.m_strInitialRestoreDetails=e,t.OnResizeComplete(e)})},e.prototype.OnResize=function(){this.QueryAndStoreWindowPosition()},e.prototype.OnResizeComplete=function(e){},e.prototype.QueryAndStoreWindowPosition=function(){var n=this;if(this.m_strInitialRestoreDetails){var o=this.GetSavedDimensionsKey();this.m_popup.setTimeout(function(){n.GetWindowRestoreDetails().then(function(e){var t=n.m_strInitialRestoreDetails==e&&o==n.m_strInitialSavedDimensionsKey;n.m_popup&&n.m_strSavedDimensionsKey&&e&&!t&&(b.SetRestoreDetails(o,e,n.m_bExpires),n.m_rgParams.strRestoreDetails=e,n.m_strInitialSavedDimensionsKey=o,n.OnResizeComplete(e))})},30)}},e.prototype.OnBeforeUnload=function(){this.QueryAndStoreWindowPosition(),r.prototype.OnBeforeUnload.call(this)},e.prototype.OnClose=function(){},e.prototype.SaveWindowPosition=function(e){b.SetRestoreDetails(this.GetSavedDimensionsKey(),e,!1),this.m_rgParams.strRestoreDetails=e},Object(i.c)([p.a],e.prototype,"QueryAndStoreWindowPosition",null),e}(f),g=function(){function e(){var a=this;this.m_bShuttingDown=!1,this.m_mapPopups=new Map,this.m_rgShutdownCallbacks=[],this.m_rgPopupCreatedCallbacks=[],this.m_unCurrentAccountID=0,this.m_mapRestoreDetails=new Map,this.m_bSaveRequired=!1,Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||window.addEventListener("beforeunload",function(e){a.m_bShuttingDown=!0;for(var t=0,n=a.m_rgShutdownCallbacks;t<n.length;t++){(0,n[t])()}var o=[];a.m_mapPopups.forEach(function(e){e.BIsValid()&&!e.BIsClosed()&&o.push(e)});for(var i=0,r=o;i<r.length;i++){r[i].Close()}a.m_bSaveRequired&&a.SaveSavedDimensionStore(),a.m_mapPopups.clear()})}return e.prototype.SetCurrentLoggedInAccountID=function(e){(this.m_unCurrentAccountID=e)?this.LoadSavedDimensionStore():this.ClearSavedDimensionStore()},e.prototype.AddShutdownCallback=function(e){this.m_rgShutdownCallbacks.push(e)},e.prototype.AddPopupCreatedCallback=function(e){this.m_rgPopupCreatedCallbacks.push(e)},e.prototype.AddTrackedPopup=function(e){this.m_mapPopups.set(e.GetName(),e);for(var t=0,n=this.m_rgPopupCreatedCallbacks;t<n.length;t++){(0,n[t])(e)}},e.prototype.RemoveTrackedPopup=function(e){this.m_mapPopups.delete(e.GetName())},e.prototype.GetExistingPopup=function(e){return this.m_mapPopups.get(e)},e.prototype.GetPopups=function(){return this.m_mapPopups.values()},e.prototype.ClosePopupsOwnedByBrowser=function(t){this.m_mapPopups.forEach(function(e){e.browser_info&&e.browser_info.m_nBrowserID==t.m_nBrowserID&&e.browser_info.m_unPID==t.m_unPID&&e.Close()})},e.CreatePopup=function(e,t){var n=t.dimensions||{},o=n.width||300,i=n.height||300,r=t.title,a="width="+o+",height="+i;void 0!==n.left&&(a+=",left="+n.left),void 0!==n.top&&(a+=",top="+n.top),a+=",resizeable,status=0,toolbar=0,menubar=0,location=0";var s="about:blank",c=[];c.push("createflags="+t.eCreationFlags),t.minWidth&&c.push("minwidth="+t.minWidth),t.minHeight&&c.push("minheight="+t.minHeight),t.target_browser&&(c.push("pid="+t.target_browser.m_unPID),c.push("browser="+t.target_browser.m_nBrowserID),c.push("browserType="+t.target_browser.m_eBrowserType),t.availscreenwidth&&t.availscreenheight&&(c.push("screenavailwidth="+t.availscreenwidth),c.push("screenavailheight="+t.availscreenheight))),t.strVROverlayKey&&c.push("vrOverlayKey="+t.strVROverlayKey),t.strRestoreDetails&&c.push("restoredetails="+t.strRestoreDetails),c&&(s+="?"+c.join("&"));var l=(t.owner_window||window).open(s,e,a,!0);if(!l)return console.log("Failed to create popup.. browser popup blocker enabled?"),{};var p="";t.html_class&&(p='class="'+t.html_class+'"');var u="";t.body_class&&(u='class="'+t.body_class+'"');var m="<!DOCTYPE html><html "+p+"><head><title></title></head><body "+u+'><div id="popup_target"></div></body></html>';l.document.write(m),l.document.title=r;for(var d=l.document.getElementsByTagName("head")[0],h=document.getElementsByTagName("link"),f=0;f<h.length;f++){var _=h[f];if("stylesheet"==_.rel){for(var g=l.document.createElement("link"),b=0;b<_.attributes.length;b++){var v=_.attributes.item(b);g.setAttribute(v.name,v.value)}d.appendChild(g)}}return{popup:l,element:l.document.getElementById("popup_target")}},e.prototype.BShuttingDown=function(){return this.m_bShuttingDown},e.prototype.GetLocalStorageKey=function(){return"PopupSavedDimensions_"+this.m_unCurrentAccountID},e.prototype.LoadSavedDimensionStore=function(){if(this.m_unCurrentAccountID){var e=this.GetLocalStorageKey();this.m_mapRestoreDetails=void 0;var t=window.localStorage.getItem(e);if(t)try{var n=JSON.parse(t);this.m_mapRestoreDetails=new Map(n)}catch(e){}this.m_mapRestoreDetails||(this.m_mapRestoreDetails=new Map)}},e.prototype.SaveSavedDimensionStore=function(){if(this.m_unCurrentAccountID&&this.m_bSaveRequired){var e=this.GetLocalStorageKey(),t=JSON.stringify(Array.from(this.m_mapRestoreDetails));window.localStorage.setItem(e,t),this.m_bSaveRequired=!1}},e.prototype.DebouncedSaveSavedDimensionStore=function(){this.SaveSavedDimensionStore()},e.prototype.ClearSavedDimensionStore=function(){this.m_mapRestoreDetails.clear(),this.m_bSaveRequired=!1},e.prototype.GetRestoreDetails=function(e){if(!this.m_mapRestoreDetails.has(e))return"";var t=this.m_mapRestoreDetails.get(e);return t.last_used=Date.now(),this.m_bSaveRequired=!0,t.strRestoreDetails},e.prototype.SetRestoreDetails=function(e,t,n){if(e){if(t){if(50<this.m_mapRestoreDetails.size){for(var o=null,i=Date.now(),r=0,a=Array.from(this.m_mapRestoreDetails.keys());r<a.length;r++){var s=a[r],c=this.m_mapRestoreDetails.get(s);c.last_used<i&&c.bExpires&&(i=c.last_used,o=s)}o&&this.m_mapRestoreDetails.delete(o)}var l={strRestoreDetails:t,last_used:Date.now(),bExpires:n};this.m_mapRestoreDetails.set(e,l)}else this.m_mapRestoreDetails.delete(e);this.m_bSaveRequired=!0,this.m_bShuttingDown?this.SaveSavedDimensionStore():this.DebouncedSaveSavedDimensionStore()}},Object(i.c)([p.a,Object(l.a)(100)],e.prototype,"DebouncedSaveSavedDimensionStore",null),e}(),b=new g},KbL7:function(e,t,n){e.exports={LinkRegionDragBox:"linkregionbox_LinkRegionDragBox_30gow",EdgeDown:"linkregionbox_EdgeDown_2KJWP",LinkRegionGridBox:"linkregionbox_LinkRegionGridBox_3kwxE",LinkRegionEdge:"linkregionbox_LinkRegionEdge_16X85",TopLeft:"linkregionbox_TopLeft_3J4m2",Top:"linkregionbox_Top_3RaBH",TopRight:"linkregionbox_TopRight_2e7aK",Left:"linkregionbox_Left_1iu6o",Middle:"linkregionbox_Middle_2MnJB",LinkRegionDelete:"linkregionbox_LinkRegionDelete_1XFNl",LinkRegionSettings:"linkregionbox_LinkRegionSettings_3C4OG",Right:"linkregionbox_Right_Ac7Xw",BottomLeft:"linkregionbox_BottomLeft_17zCN",Bottom:"linkregionbox_Bottom_3UG2b",BottomRight:"linkregionbox_BottomRight_2LtxP",topleft:"linkregionbox_topleft_3uA3d",top:"linkregionbox_top_3n36t",topright:"linkregionbox_topright_QhQBC",left:"linkregionbox_left_3bGAT",right:"linkregionbox_right_34G3G",bottomleft:"linkregionbox_bottomleft_33Spq",bottom:"linkregionbox_bottom_2-wfY",bottomright:"linkregionbox_bottomright_3OGuI",middle:"linkregionbox_middle_2mmT4",LinkRegionButtonContainer:"linkregionbox_LinkRegionButtonContainer_sVjOG",DialogButton:"linkregionbox_DialogButton_22RKk",LinkRegionInfo:"linkregionbox_LinkRegionInfo_kIMQQ",LinkText:"linkregionbox_LinkText_1bynV"}},Kqva:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});var o=function(){function e(e,t,n){void 0===t&&(t=0),this.m_nOffset=t||0,e instanceof Uint8Array||e instanceof DataView?(this.m_nLength=n||e.byteLength-this.m_nOffset,this.m_nOffset+=e.byteOffset,this.m_viewPacket=new DataView(e.buffer,this.m_nOffset,this.m_nLength)):(this.m_nLength=n||e.byteLength-this.m_nOffset,this.m_viewPacket=new DataView(e,this.m_nOffset,this.m_nLength)),this.m_rgubPacket=new Uint8Array(this.m_viewPacket.buffer,this.m_viewPacket.byteOffset,this.m_viewPacket.byteLength),this.m_iGet=0,this.m_iPut=0}return e.prototype.TellGet=function(){return this.m_iGet+this.m_viewPacket.byteOffset},e.prototype.GetPacket=function(){return this.m_viewPacket.buffer},e.prototype.GetUint8=function(){return this.m_viewPacket.getUint8(this.m_iGet++)},e.prototype.GetUint32=function(e){void 0===e&&(e=!0);var t=this.m_viewPacket.getUint32(this.m_iGet,e);return this.m_iGet+=4,t},e.prototype.SeekGetHead=function(e){void 0===e&&(e=0),this.m_iGet=e||0},e.prototype.SeekGetCurrent=function(e){this.m_iGet+=e},e.prototype.TellPut=function(){return this.m_iPut+this.m_viewPacket.byteOffset},e.prototype.TellMaxPut=function(){return this.m_viewPacket.byteLength},e.prototype.PutUint8=function(e){this.m_viewPacket.setUint8(this.m_iPut++,e)},e.prototype.PutUint32=function(e,t){void 0===t&&(t=!0),this.m_viewPacket.setUint32(this.m_iPut,e,t),this.m_iPut+=4},e.prototype.PutBytes=function(e){this.m_rgubPacket.set(e,this.m_iPut),this.m_iPut+=e.length},e.prototype.SeekPut=function(e){this.m_iPut+=e},e.prototype.GetCountBytesRemaining=function(){return this.m_viewPacket.byteLength-this.m_iGet},e}(),i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e){for(var t="",n=0;n<e.length;n++){var o=e[n];t+=i[o>>>4]+i[15&o]}return t}function a(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length-1;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}},Kwyy:function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),u=n.n(o),r=n("i8i4"),a=n("1VtQ"),p=n("1n9R"),s=n("2vnA"),c=n("okNM"),m=n("D3Kh"),l=n("ljid"),d=n("e2SU"),h=n("NB6M"),f=n("hx5d"),_=n("Hi0u"),g=n("oh5H"),b=n("LAqV"),v=n("hReu"),S=n("Z578"),y=n("YZlK"),C=n("bbBM"),O=(n("cTkQ"),function(e){var t=e.group,n=e.onClick,o=t.watching_broadcast_steamid;return u.a.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:n},u.a.createElement("div",{className:"ChatRoomListGroupItem_header"},u.a.createElement(y.a,{group:t,small:!0}),u.a.createElement("div",{className:"groupNameStatusContainer"},u.a.createElement("div",{className:"chatRoomName"},t.name),o&&u.a.createElement("div",{className:"chatRoomDetails"},Object(g.c)("#Broadcast_WatchParty_Viewers_NoneActive")))))}),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t.prototype.CreateWatchParty=function(e){void 0===e&&(e=!1);var t=this.props,n=t.browserContext,o=t.ownerWindow,i=t.broadcastAccountId,r=t.initialFriend;this.Close();var a,s,c,l,p=e&&r?[r.accountid]:[];a=n,s=o||window,c=i,l=p,Object(_.b)(u.a.createElement(S.a,{browserContext:a,bHideChatNameEntry:!1,vecInvitePlayers:l,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:c},strTitle:Object(g.c)("#Broadcast_CreateWatchParty")}),s,"CreateChatDialog",{strTitle:Object(g.c)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600},Object(v.g)(s))},t.prototype.WatchAlone=function(){this.Close()},t.prototype.UpgradeExisting=function(e){var t=this.props,n=t.broadcastAccountId,o=t.browserContext,i=t.broadcastChannelID,r=t.broadcastTabId;this.Close(),i?e.SetChatRoomGroupWatchingBroadcast(void 0,i):e.SetChatRoomGroupWatchingBroadcast(n);var a=b.f.UIStore.ShowAndOrActivateChatRoomGroup(o,e,!0);r&&b.f.UIStore.CloseTabByID(r),this.props.bIsNewSteamTVDialog||a.ShowBroadcast()},t.prototype.Close=function(){var e=this.props.closeModal;e&&e()},t.prototype.render=function(){var t=this,e=this.props,n=e.closeModal,o=e.initialFriend,i=b.f.ChatStore.currentChatRoomGroups.filter(function(e){return e.BCanIAssociateBroadcast()}),r=o;return u.a.createElement("div",{className:"chatModalCover"},u.a.createElement(_.a,{onEscKeypress:n},u.a.createElement(l.g,{className:"watchPartyDialog"},u.a.createElement(l.b,null,u.a.createElement("div",{className:"watchPartyPrompt"},Object(g.c)("#Broadcast_WatchPrompt")),u.a.createElement(l.n,null,!this.props.bIsNewSteamTVDialog&&u.a.createElement(l.d,{svgicon:d.t,className:"watchHowButton",onClick:this.WatchAlone},Object(g.c)("#Broadcast_WatchAlone")),r&&u.a.createElement(l.d,{className:"watchHowButton",onClick:function(){return t.CreateWatchParty(!0)}},u.a.createElement(C.d,{friend:r,context:null,bLarge:!1}),Object(g.e)("#Broadcast_WatchWith",u.a.createElement("span",{className:"highlight"}," ",r.display_name))),0!==i.length&&u.a.createElement(u.a.Fragment,null,u.a.createElement(l.p,null,Object(g.c)("#Broadcast_WatchWithExistingWatchParty")),i.map(function(e){return u.a.createElement(O,{key:e.unique_id,group:e,onClick:function(){return t.UpgradeExisting(e)}})})),u.a.createElement(l.d,{className:"watchHowButton newWatchGroup",svgicon:d.K,onClick:function(){return t.CreateWatchParty(!1)}},Object(g.c)("#Broadcast_LinkBroadcastToGroup_New")))),u.a.createElement(l.j,null))))},Object(i.c)([a.a],t.prototype,"WatchAlone",null),Object(i.c)([a.a],t.prototype,"Close",null),t}(u.a.Component);var E=n("xdma"),w=n("XCHq"),M=n("/7KC"),D=n("dcQ8"),T=n.n(D),G=n("kQil");function R(){window.sessionStorage.setItem("oFriendsUIStartupParam",JSON.stringify({command:{command:"ShowWatchBroadcast",steamid:p.a.steamid}}))}n.d(t,"c",function(){return R}),n.d(t,"b",function(){return j}),n.d(t,"a",function(){return B});var j=function(){function e(){this.m_iTimeoutLogin=void 0,this.m_eLogonState=0,this.m_bLogonDialogVisisible=!1}return e.prototype.Init=function(e){var t=this;this.m_fnLaunchChat=e,this.m_steamID=p.a.steamid,window.addEventListener("message",this.HandlePostMessage),r.render(u.a.createElement(L,{app:this}),document.getElementById("friendslist-container")),this.m_iTimeoutLogin=window.setTimeout(function(){0==t.m_eLogonState&&(t.m_eLogonState=1)},2500)},e.prototype.LaunchChat=function(){r.unmountComponentAtNode(document.getElementById("friendslist-container")),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),R(),this.m_fnLaunchChat()},e.prototype.GetLoginURL=function(){return p.b.STORE_BASE_URL+"login/?steamtv"},e.prototype.BIsPerformingLogonCheck=function(){return 0==this.m_eLogonState||1==this.m_eLogonState},e.prototype.BIsLogonDialogVisible=function(){return this.m_bLogonDialogVisisible},e.prototype.ShowLogonDialog=function(){this.m_bLogonDialogVisisible=!0},e.prototype.BReadyToRender=function(){return 0!=this.m_eLogonState},e.prototype.DismissLogonDialog=function(){this.m_bLogonDialogVisisible=!1},e.prototype.GetSteamIDWatched=function(){return this.m_steamID},e.prototype.ExtractOrigin=function(e){return e.replace(/^(https?:\/\/[^/]*).*$/,"$1")},e.prototype.HandlePostMessage=function(e){if(e.origin==this.ExtractOrigin(p.b.STORE_BASE_URL)||e.origin==this.ExtractOrigin(p.b.CHAT_BASE_URL)){var t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()}else console.warn('Ignoring message from untrusted domain "'+e.origin+'"')},Object(i.c)([s.x],e.prototype,"m_eLogonState",void 0),Object(i.c)([s.x],e.prototype,"m_bLogonDialogVisisible",void 0),Object(i.c)([s.x],e.prototype,"m_steamID",void 0),Object(i.c)([s.g],e.prototype,"LaunchChat",null),Object(i.c)([s.g.bound],e.prototype,"HandlePostMessage",null),e}(),L=function(n){function e(e){var t=n.call(this,e)||this;return t.m_broadcastInfo=null,t.m_broadcastInfo=m.a.StartInfo(t.props.app.GetSteamIDWatched()),t.state={bChatCollapsed:!1,bTheaterMode:!1},t}return Object(i.d)(e,n),e.prototype.componentWillUnmount=function(){this.m_broadcastInfo&&(m.a.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)},e.prototype.OnShowLogin=function(){this.props.app.ShowLogonDialog()},e.prototype.ToggleChat=function(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})},e.prototype.ToggleTheaterMode=function(){this.setState({bTheaterMode:!this.state.bTheaterMode})},e.prototype.render=function(){var e=this.props.app,t=this.m_broadcastInfo,n=N();return u.a.createElement(u.a.Fragment,null,e.BReadyToRender()&&u.a.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},u.a.createElement(E.a,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),u.a.createElement("div",{className:"BroadcastTab"},u.a.createElement("div",{className:"StandalonePlayerHeader"},u.a.createElement("div",{className:"STV_Logo"},u.a.createElement(d.cb,null)),u.a.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},u.a.createElement(k,{onClick:this.OnShowLogin}),u.a.createElement(P,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),u.a.createElement(F,{steamID:e.GetSteamIDWatched(),watchLocation:n,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},u.a.createElement(U,{app:e})))),u.a.createElement(A,{app:e}))},Object(i.c)([a.a],e.prototype,"OnShowLogin",null),Object(i.c)([a.a],e.prototype,"ToggleChat",null),Object(i.c)([a.a],e.prototype,"ToggleTheaterMode",null),e=Object(i.c)([c.a],e)}(u.a.Component),A=Object(c.a)(function(e){var t=e.app;return t.BIsPerformingLogonCheck()?u.a.createElement("div",null,u.a.createElement("iframe",{style:{display:"none"},src:t.GetLoginURL()})):null});function k(e){return u.a.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},u.a.createElement(d.lb,null),Object(g.c)("#Broadcast_WatchWithFriends"))}function P(e){return u.a.createElement("div",{className:"ToggleBroadcastChat",title:Object(g.c)("#Broadcast_ToggleChat"),onClick:e.onClick},u.a.createElement(d.y,{showChat:e.hideIcon}))}function N(){return p.b.STEAM_TV?1:3}var B=function(o){function e(e){var t=o.call(this,e)||this;t.m_broadcastInfo=null;var n=t.props.broadcastView.GetSteamID().ConvertTo64BitString();return t.m_broadcastInfo=m.a.StartInfo(n),t.state={bChatCollapsed:!1},t}return Object(i.d)(e,o),e.prototype.componentWillUnmount=function(){this.m_broadcastInfo&&(m.a.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)},e.prototype.OnWatchWithFriends=function(){this.props.broadcastView.ShowWatchPromptDialog()},e.prototype.ToggleChat=function(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})},e.prototype.ToggleTheaterMode=function(){b.f.UIStore.SetTheaterMode(!b.f.UIStore.GetTheaterMode())},e.prototype.render=function(){var e=this.props,t=e.broadcastView,n=e.popup,o=e.style,i=t.GetSteamID().ConvertTo64BitString(),r=N(),a=t.m_bShowWatchPromptDialog?u.a.createElement(I,{closeModal:function(){return t.HideWatchPromptDialog()},broadcastAccountId:t.GetSteamID().GetAccountID(),broadcastTabId:t.GetUniqueID(),initialFriend:t.m_watchPromptInitialFriend,browserContext:b.a,ownerWindow:n}):null;return u.a.createElement("div",{className:"BroadcastTab",style:o},u.a.createElement(E.a,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),u.a.createElement("div",{className:"BroadcastTab_OverBackground"},u.a.createElement("div",{className:"BroadcastTabHeaderContainer"},u.a.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},u.a.createElement(k,{onClick:this.OnWatchWithFriends}),u.a.createElement(P,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),u.a.createElement(F,{steamID:i,watchLocation:r,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},a)))},Object(i.c)([a.a],e.prototype,"OnWatchWithFriends",null),Object(i.c)([a.a],e.prototype,"ToggleChat",null),Object(i.c)([a.a],e.prototype,"ToggleTheaterMode",null),e=Object(i.c)([c.a],e)}(u.a.Component),F=function(n){function e(e){var t=n.call(this,e)||this;return t.m_strLocalSteamID="",t.m_refBroadcastContainer=u.a.createRef(),t.state={info:null},t}return Object(i.d)(e,n),e.prototype.componentDidMount=function(){w.b.stream["76561198208088121"]&&"chinese"===p.b.LANGUAGE?this.OnLocalStreamChange("76561198208088121"):w.b.stream["76561198207552741"]&&"russian"===p.b.LANGUAGE&&this.OnLocalStreamChange("76561198207552741")},e.getDerivedStateFromProps=function(e,t){return t.info&&t.info.m_steamIDBroadcast===e.steamID?null:(t.info&&m.a.StopInfo(t.info),{info:m.a.StartInfo(e.steamID)})},e.prototype.componentWillUnmount=function(){this.state.info&&m.a.StopInfo(this.state.info)},e.prototype.OnLocalStreamChange=function(e){this.m_strLocalSteamID=e},e.prototype.SetMainContentRef=function(e){this.m_elMainContent=e},e.prototype.CalculateBroadcastSectionStyles=function(e){if(this.props.bHideChat)return{width:"100%",height:"100%"};var t,n;v.h&&(t=v.h.UIDisplayPrefs.nWatchPartyBroadcastHeightPercentage,n=v.h.UIDisplayPrefs.nWatchPartyBroadcastWidthPercentage);var o={};if(e){var i=t||66;if(o.height=i+"%",this.m_elMainContent){var r=this.m_elMainContent,a=r.clientWidth,s=r.clientHeight,c=9/16*a+50,l=Object(M.a)(i,1,c/s*100);o.height=l+"%"}}else o.width=n?n+"%":"66%",o.minWidth=n?n+"%":"66%",o.maxWidth="calc( 100% - 316px )",o.overflowY="auto";return o},e.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})},e.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),n=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),o=t.left,i=e.clientX,r=n.width,a=Object(M.a)((i-o)/r*100,1,100);v.h.SetUIDisplayPref("nWatchPartyBroadcastWidthPercentage",a)},e.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})},e.prototype.render=function(){var e=this.props,t=e.steamID,n=e.children,o=this.m_strLocalSteamID||t,i=this.state.info.m_bIsOnline,r=null,a=this.CalculateBroadcastSectionStyles(!1);a.flexGrow=this.props.bHideChat?1:null,w.b.bValid&&(r=u.a.createElement(x,{info:w.b}));var s=new j,c=u.a.createElement("div",{className:"LoginDiv"},u.a.createElement("a",{onClick:function(){return s.ShowLogonDialog()},className:T.a.ChatLoginButton,href:"javascript:void(0);"},Object(g.c)("#BroadcastChat_Login")),u.a.createElement(U,{app:s})),l=m.a.GetBroadcast(o)?m.a.GetBroadcast(o).m_ulBroadcastID:"0";return u.a.createElement("div",{className:"BroadcastContainer"},u.a.createElement("div",{className:"BroadcastContainerSection",ref:this.m_refBroadcastContainer,style:a},u.a.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},i&&u.a.createElement(h.b,{key:o,steamIDBroadcast:o,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!i&&r,u.a.createElement("div",{className:"videoContainerSizer"})),n,u.a.createElement("div",{className:"BroadcastDetailsSection"},u.a.createElement(h.a,{steamID:o,onLocalStreamChange:this.OnLocalStreamChange,bVerticalBroadcastChat:!0}))),!this.props.bHideChat&&u.a.createElement("div",{className:"BroadcastChatDivider horizontal",onMouseDown:this.OnGrabberMouseDown}),u.a.createElement("div",{className:"BroadcastChatDiv",style:{display:this.props.bHideChat?"none":"flex",flexDirection:"column",width:"100%",minWidth:"300px"}},u.a.createElement(f.a,{emoticonStore:b.f?b.f.ChatStore.EmoticonStore:null,broadcastID:l,steamID:o,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}),p.g&&p.g.logged_in?null:c))},Object(i.c)([s.x],e.prototype,"m_strLocalSteamID",void 0),Object(i.c)([a.a],e.prototype,"OnLocalStreamChange",null),Object(i.c)([a.a],e.prototype,"SetMainContentRef",null),Object(i.c)([a.a],e.prototype,"OnGrabberMouseDown",null),Object(i.c)([a.a],e.prototype,"HandleMouseMove",null),Object(i.c)([a.a],e.prototype,"UnregisterDragEvents",null),e=Object(i.c)([c.a],e)}(u.a.Component);function x(e){var t='url( "'+(p.b.CHAT_BASE_URL+e.info.offlineImage)+'" )';return u.a.createElement("div",{style:{backgroundImage:t},className:"BroadcastOffline"})}var V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t.prototype.Dismiss=function(){this.props.app.DismissLogonDialog()},t.prototype.render=function(){return u.a.createElement(G.d,{onEscKeypress:this.Dismiss},u.a.createElement(l.g,{className:"SteamTVLoginDialog"},u.a.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))},Object(i.c)([a.a],t.prototype,"Dismiss",null),t}(u.a.Component),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t.prototype.render=function(){if(!this.props.app.BIsLogonDialogVisible())return null;var e=u.a.createElement(V,{app:this.props.app});return u.a.createElement("div",{className:"FullModalOverlay"},u.a.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),u.a.createElement("div",{className:"ModalOverlayContent active"},e))},t=Object(i.c)([c.a],t)}(u.a.Component)},LAqV:function(e,t,n){"use strict";var s=n("mrSG"),i=n("OTLo"),r=n("5Nu3"),a=n("Oefq"),c=n("tkkQ"),l=n("4HGb"),o=n("rrR9"),p=function(){function e(){}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.GetTradeOfferURL=function(){var t=this;if(this.m_strTradeOfferToken)return Promise.resolve(this.GetConstructedTradeOfferURL());var e=l.b.Init(o.b);return o.c.GetTradeOfferAccessToken(this.m_CMInterface.GetServiceTransport(),e).then(function(e){if(1==e.GetEResult())return t.m_strTradeOfferToken=e.Body().trade_offer_access_token(),t.GetConstructedTradeOfferURL();throw new Error("Error getting Trade Offer token")})},e.prototype.GetDefaultTradeOfferURLForFriend=function(e){return c.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e},e.prototype.GetConstructedTradeOfferURL=function(){var e=this.m_CMInterface.steamid.GetAccountID();return c.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e+"&token="+encodeURIComponent(this.m_strTradeOfferToken)},e}(),u=n("+M9t"),m=n("2vnA"),d=n("hEDq"),h=n("3Liw"),f=n("jELD"),_=n("OJz+"),g=n("XaMz"),b=n("ha6C"),v=function(){function e(e){var t=this;this.m_bReady=!1,this.m_unTimerUploadCommunityPreferences=void 0,this.m_rgOnReadyCallbacks=[],this.m_bFriendSettingsReady=!1,this.m_CommunityPreferencesChangedHandler=Object(_.d)(h.k.NotifyCommunityPreferencesChangedHandler,function(e){return t.UpdateCommunityPreferences(e.Body().preferences()),1}),this.m_Storage=e,c.a.IN_CLIENT?this.m_iFriendSettingsStore=new y(this,this.OnFriendSettingsChanged.bind(this)):this.m_iFriendSettingsStore=new C(this,this.OnFriendSettingsChanged.bind(this)),this.m_CommunityPreferences=new d.c;var n=new h.b;this.m_CommunityPreferences.bBlurAdultContentViolence=n.hide_adult_content_violence(),this.m_CommunityPreferences.bBlurAdultContentSex=n.hide_adult_content_sex(),this.m_CommunityPreferences.bParenthesizeNicknames=n.parenthesize_nicknames(),this.m_ServerCommunityPreferences=void 0}return e.prototype.Init=function(e){var n=this;this.m_CM=e,this.m_CM.AddOnLogonCallback(function(){n.m_bReady||(n.m_iFriendSettingsStore.InternalInit(),n.SetReady());var e=l.b.Init(f.a);f.b.GetStorePreferences(n.m_CM.GetServiceTransport(),e).then(function(e){n.m_StorePreferences=e.Body()});var t=l.b.Init(h.c);return h.l.GetCommunityPreferences(n.m_CM.GetServiceTransport(),t).then(function(e){return n.UpdateCommunityPreferences(e.Body().preferences())})})},e.prototype.BReady=function(){return this.m_bReady},Object.defineProperty(e.prototype,"FriendsSettings",{get:function(){return this.m_FriendsSettings},enumerable:!0,configurable:!0}),e.prototype.BUpdateFriendsSettings=function(e){return!!this.m_iFriendSettingsStore.BUpdateSettings(e)&&(this.m_FriendsSettings=e,!0)},e.prototype.BClientHasFeatureOrOnWeb=function(e){return!c.a.IN_CLIENT||!!this.BReady()&&("object"==typeof this.m_FriendsSettings.featuresEnabled&&(!!this.m_FriendsSettings.featuresEnabled.hasOwnProperty(e)&&this.m_FriendsSettings.featuresEnabled[e]))},e.prototype.BAlwaysShowChatsInNewWindow=function(){return this.m_FriendsSettings.bAlwaysNewChatWindow},e.prototype.BForceAlphabeticFriendSorting=function(){return this.m_FriendsSettings.bForceAlphabeticFriendSorting},e.prototype.RunOnReady=function(e){this.m_bReady?e():this.m_rgOnReadyCallbacks.push(e)},e.prototype.GetAccountSpecificLocalStorageKey=function(e){return this.m_CM&&this.m_CM.steamid&&this.m_CM.steamid.BIsValid()?e+"_"+this.m_CM.steamid.GetAccountID():null},e.prototype.GetObjectFromLocalStorageWhenReady=function(t,n){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){switch(e.label){case 0:return[4,this.WhenReady()];case 1:return e.sent(),[2,this.GetObjectFromLocalStorage(t,n)]}})})},e.prototype.GetObjectFromLocalStorage=function(e,o){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetObject(t).then(function(e){var t=Object.assign({},o,e);if(o&&"object"==typeof o)for(var n in o)"object"==typeof o[n]&&e&&(t[n]=Object.assign({},o[n],e[n]));return t}):Promise.reject("Storage not ready")},e.prototype.StoreObjectInLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return!!n&&(this.m_Storage.StoreObject(n,t),!0)},e.prototype.GetFlagFromLocalStorageWhenReady=function(t){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){switch(e.label){case 0:return[4,this.WhenReady()];case 1:return e.sent(),[2,this.GetFlagFromLocalStorage(t)]}})})},e.prototype.GetFlagFromLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then(function(e){return"true"===e}):Promise.reject("Storage not ready")},e.prototype.SetFlagInLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return!!n&&(t?this.m_Storage.StoreString(n,"true"):this.m_Storage.RemoveObject(n),!0)},e.prototype.BFlagExistsInLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then(function(e){return null!==e}):Promise.reject("Storage not ready")},e.prototype.WhenReady=function(){var t=this;return this.m_bReady?Promise.resolve():new Promise(function(e){return t.RunOnReady(e)})},e.prototype.SetReady=function(){if(this.m_bFriendSettingsReady&&this.m_CM.steamid.BIsValid()){this.m_bReady=!0;for(var e=0,t=this.m_rgOnReadyCallbacks;e<t.length;e++){(0,t[e])()}this.m_rgOnReadyCallbacks=[]}},e.prototype.OnFriendSettingsChanged=function(e){this.m_FriendsSettings=e,this.m_bFriendSettingsReady=!0,this.SetReady()},Object.defineProperty(e.prototype,"CommunityPreferences",{get:function(){return this.m_CommunityPreferences},enumerable:!0,configurable:!0}),e.prototype.UpdateCommunityPreferences=function(e){var t=Object(s.a)({},this.m_CommunityPreferences);void 0!==e.hide_adult_content_violence()&&(t.bBlurAdultContentViolence=e.hide_adult_content_violence()),void 0!==e.hide_adult_content_sex()&&(t.bBlurAdultContentSex=e.hide_adult_content_sex()),void 0!==e.parenthesize_nicknames()&&(t.bParenthesizeNicknames=e.parenthesize_nicknames()),this.m_ServerCommunityPreferences=Object(s.a)({},t),this.m_CommunityPreferences=t},e.prototype.CommunityPreferencesToMessage=function(e){var t=new h.b;return t.set_hide_adult_content_violence(e.bBlurAdultContentViolence),t.set_hide_adult_content_sex(e.bBlurAdultContentSex),t.set_parenthesize_nicknames(e.bParenthesizeNicknames),t},e.prototype.SetCommunityPreferences=function(e){var t=this;this.m_CommunityPreferences=e,Object(b.a)("Messaging.PostMessage")&&SteamClient.Messaging.PostMessage("Settings","CommunityPreferences",JSON.stringify(e)),this.m_unTimerUploadCommunityPreferences&&clearTimeout(this.m_unTimerUploadCommunityPreferences),this.m_unTimerUploadCommunityPreferences=SetBackgroundTimeout(function(){t.m_unTimerUploadCommunityPreferences=void 0,t.UploadCommunityPreferences()},5e3)},e.prototype.UploadCommunityPreferences=function(){var e=!1;if(void 0===this.m_ServerCommunityPreferences)e=!0;else for(var t=0,n=Object.keys(this.m_ServerCommunityPreferences);t<n.length;t++){var o=n[t];if(this.m_ServerCommunityPreferences[o]!==this.CommunityPreferences[o]){e=!0;break}}if(e){var i=l.b.Init(h.i);i.Body().set_preferences(this.CommunityPreferencesToMessage(this.CommunityPreferences)),h.l.SetCommunityPreferences(this.m_CM.GetServiceTransport(),i).then(function(e){})}},Object.defineProperty(e.prototype,"StorePreferences",{get:function(){return this.m_StorePreferences},enumerable:!0,configurable:!0}),e.prototype.FillInChatUsabilityMetrics=function(e){var t=e.settings(),n=this.FriendsSettings;t.set_notifications_show_ingame(n.bNotifications_ShowIngame),t.set_notifications_show_online(n.bNotifications_ShowOnline),t.set_notifications_show_message(n.bNotifications_ShowMessage),t.set_notifications_events_and_announcements(n.bNotifications_EventsAndAnnouncements),t.set_sounds_play_ingame(n.bSounds_PlayIngame),t.set_sounds_play_online(n.bSounds_PlayOnline),t.set_sounds_play_message(n.bSounds_PlayMessage),t.set_sounds_events_and_announcements(n.bSounds_EventsAndAnnouncements),t.set_always_new_chat_window(n.bAlwaysNewChatWindow),t.set_force_alphabetic_friend_sorting(n.bForceAlphabeticFriendSorting),t.set_chat_flash_mode(n.nChatFlashMode),t.set_remember_open_chats(n.bRememberOpenChats),t.set_compact_quick_access(n.bCompactQuickAccess),t.set_compact_friends_list(n.bCompactFriendsList),t.set_notifications_show_chat_room_notification(n.bNotifications_ShowChatRoomNotification),t.set_sounds_play_chat_room_notification(n.bSounds_PlayChatRoomNotification),t.set_hide_offline_friends_in_tag_groups(n.bHideOfflineFriendsInTagGroups),t.set_hide_categorized_friends(n.bHideCategorizedFriends),t.set_categorize_in_game_friends_by_game(n.bCategorizeInGameFriendsByGame),t.set_chat_font_size(n.nChatFontSize),t.set_use24hour_clock(n.b24HourClock),t.set_do_not_disturb_mode(n.bDoNotDisturbMode),t.set_disable_embed_inlining(n.bDisableEmbedInlining),t.set_sign_into_friends(n.bSignIntoFriends)},Object(s.c)([m.x],e.prototype,"m_bReady",void 0),Object(s.c)([m.x],e.prototype,"m_FriendsSettings",void 0),Object(s.c)([m.x],e.prototype,"m_CommunityPreferences",void 0),Object(s.c)([m.x],e.prototype,"m_StorePreferences",void 0),Object(s.c)([m.g],e.prototype,"BUpdateFriendsSettings",null),Object(s.c)([m.g],e.prototype,"UpdateCommunityPreferences",null),Object(s.c)([m.g],e.prototype,"SetCommunityPreferences",null),e}(),S=function(){return function(e,t){this.m_SettingsStore=e,this.m_fnFriendSettingsChanged=t}}(),y=function(o){function e(e,t){var n=o.call(this,e,t)||this;return n.m_bClientInitComplete=!1,n.InternalInit(),n}return Object(s.d)(e,o),e.prototype.InternalInit=function(){this.m_bClientInitComplete||(SteamClient&&SteamClient.FriendSettings&&SteamClient.FriendSettings.RegisterForSettingsChanges?(SteamClient.FriendSettings.RegisterForSettingsChanges(this.OnClientSettingsChange.bind(this)),this.m_bClientInitComplete=!0):Object(g.a)(!1,"Can't initialize settings from client"))},e.prototype.OnClientSettingsChange=function(e){var t,n=d.d();if("string"!=typeof e){if(t=e.FriendsSettings,SteamClient.FriendSettings&&SteamClient.FriendSettings.SetFriendSettings)return void this.BUpdateSettings(t)}else t=JSON.parse(e,function(e,t){return"b"==e.substring(0,1)&&"number"==typeof t?0!=t:t});Object.assign(n,t),this.m_fnFriendSettingsChanged(n)},e.prototype.BUpdateSettings=function(e){var t=JSON.stringify(e);return SteamClient.FriendSettings.SetFriendSettings(t),!0},e}(S),C=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(s.d)(n,e),n.prototype.InternalInit=function(){var t=this;this.m_SettingsStore.GetObjectFromLocalStorage(n.k_strLocalStorageKeyPrefix,this.GetDefaultSettings()).then(function(e){t.m_fnFriendSettingsChanged(e.friendsSettings)})},n.prototype.GetDefaultSettings=function(){return{friendsSettings:d.d()}},n.prototype.BUpdateSettings=function(e){var t={friendsSettings:e};return this.m_SettingsStore.StoreObjectInLocalStorage(n.k_strLocalStorageKeyPrefix,t)},n.k_strLocalStorageKeyPrefix="LocalStorageFriendsSettings",n}(S),O=function(){function e(){var t=this;this.m_PrivacySettings={privacy_state:0,privacy_state_inventory:0,privacy_state_gifts:0,privacy_state_ownedgames:0,privacy_state_playtime:0,privacy_state_friendslist:0},this.m_IncomingPrivacySettingsHandler=Object(_.d)(h.k.NotifyPrivacyPrivacySettingsChangedHandler,function(e){return t.ReadPrivacySettings(e.Body().privacy_settings()),1})}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn(function(){return Object(s.b)(t,void 0,void 0,function(){var t,n;return Object(s.e)(this,function(e){switch(e.label){case 0:return t=l.b.Init(h.f),[4,h.l.GetPrivacySettings(this.m_CMInterface.GetServiceTransport(),t)];case 1:return 1==(n=e.sent()).GetEResult()&&this.ReadPrivacySettings(n.Body().privacy_settings()),[2]}})})})},Object.defineProperty(e.prototype,"PrivacySettings",{get:function(){return this.m_PrivacySettings},enumerable:!0,configurable:!0}),e.prototype.ReadPrivacySettings=function(e){Object.assign(this.m_PrivacySettings,e.toObject())},Object(s.c)([m.x],e.prototype,"m_PrivacySettings",void 0),e}(),I=n("VZeO"),E=n("a6nX"),w=n("0N1H"),M=function(){function e(){var t=this;this.m_ParentalState=new d.j,this.m_ParentalLockHandler=Object(_.d)(E.d.NotifyLockHandler,function(e){return c.a.SESSIONID==e.Body().sessionid()&&t.SetLockState(!0),1}),this.m_ParentalUnlockHandler=Object(_.d)(E.d.NotifyUnlockHandler,function(e){return c.a.SESSIONID==e.Body().sessionid()&&t.SetLockState(!1),1}),this.m_ParentalSettingsChangeHandler=Object(_.d)(E.d.NotifySettingsChangeHandler,function(e){return 1})}return e.prototype.SetParentalState=function(e){this.m_ParentalState=e},e.prototype.SetLockState=function(e){this.m_ParentalState.locked=e},e.prototype.Init=function(e){var o=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn(function(){var e=l.b.Init(E.a);e.Body().set_steamid(o.m_CMInterface.steamid.ConvertTo64BitString()),c.a.IN_CLIENT?SteamClient.Parental.RegisterForParentalSettingsChanges(function(e){return o.UpdateParentalState(e)}):E.e.GetParentalSettings(o.m_CMInterface.GetServiceTransport(),e).then(function(e){e.Body().settings().enabled_features();var t=e.Body().settings(),n=o.MsgParentalSettingsToParentalState(t);n.enabled?o.ValidateWebToken().then(function(e){n.locked=e,o.SetParentalState(n)}):(n.locked=!1,o.SetParentalState(n))})})},e.prototype.MsgParentalSettingsToParentalState=function(e){var t=new d.j;t.enabled=e.is_enabled(),t.features=e.enabled_features(),t.baselist={};for(var n=0,o=e.applist_base();n<o.length;n++){var i=o[n];t.baselist["App_"+i.appid()]=i.is_allowed()}t.customlist={};for(var r=0,a=e.applist_custom();r<a.length;r++){i=a[r];t.customlist["App_"+i.appid()]=i.is_allowed()}return t.locked=!0,t},e.prototype.UpdateParentalState=function(e){this.SetParentalState(e)},e.prototype.BIsFeatureBlocked=function(e){return this.m_ParentalState.locked&&0!=e&&0==(this.m_ParentalState.features&1<<e)},e.prototype.BIsAppBlocked=function(e){return!!this.isLocked&&(!this.m_ParentalState.allowallapps&&(0!=e&&(!(e>=w.h&&e<=w.i)&&(-1===[w.n,w.j,w.k,w.m,w.l].indexOf(e)&&(null!=this.m_ParentalState.customlist&&null!=this.m_ParentalState.customlist["App_"+e]?!this.m_ParentalState.customlist["App_"+e]:null==this.m_ParentalState.baselist||null==this.m_ParentalState.baselist["App_"+e]||!this.m_ParentalState.baselist["App_"+e])))))},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.m_ParentalState.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.m_ParentalState.locked},enumerable:!0,configurable:!0}),e.prototype.ValidateWebToken=function(){var n=this,e=c.a.SESSIONID,t=document.cookie.match("(^|; )steamparental=([^;]*)");if(!t||!t[2])return Promise.resolve(!1);var o=t[2],i=o.split("||");o=2==i.length?i[1]:i[0];var r=l.b.Init(E.c);return r.Body().set_unlock_token(e+"||"+o),new Promise(function(t,e){E.e.ValidateToken(n.m_CMInterface.GetServiceTransport(),r).then(function(e){1==e.GetEResult()?t(!0):t(!1)})})},Object.defineProperty(e.prototype,"locked",{get:function(){return console.log("ParentalState.locked",this.m_ParentalState.locked),this.m_ParentalState.locked},enumerable:!0,configurable:!0}),e.prototype.BIsFriendsBlocked=function(){return this.BIsFeatureBlocked(4)},e.prototype.Unlock=function(n){var t=this;if(c.a.IN_CLIENT)return new Promise(function(t,e){SteamClient.Parental.UnlockParentalLock(n,!1).then(function(e){t(e)})});var o=l.b.Init(E.b);return o.Body().set_password(n),o.Body().set_session(c.a.SESSIONID),o.Body().set_send_unlock_on_success(!0),new Promise(function(n,e){E.e.ValidatePassword(t.m_CMInterface.GetServiceTransport(),o).then(function(e){if(1==e.GetEResult()){var t=Date.now().toString()+"||"+e.Body().token();document.cookie="steamparental="+encodeURIComponent(t)+"; path=/"}n(e.GetEResult())})})},Object(s.c)([m.x],e.prototype,"m_ParentalState",void 0),Object(s.c)([m.g],e.prototype,"UpdateParentalState",null),Object(s.c)([m.i],e.prototype,"isEnabled",null),Object(s.c)([m.i],e.prototype,"isLocked",null),Object(s.c)([m.i],e.prototype,"locked",null),e}(),D=n("cLtS"),T=n("oh5H"),G=n("s+DT"),R=function(){function e(){this.m_bEnabled=!1,this.m_sessions=m.x.map(),this.m_bIsShowingPlaceholder=!1}return e.prototype.Init=function(e){var n=this;this.m_CMInterface=e,Object(b.a)("RemotePlay.RegisterForSessionStarted")&&SteamClient.RemotePlay.RegisterForSessionStarted(function(e){return n.SessionStarted(e)}),Object(b.a)("RemotePlay.RegisterForSessionStopped")&&SteamClient.RemotePlay.RegisterForSessionStopped(function(e){return n.SessionStopped(e)}),Object(b.a)("RemotePlay.RegisterForSessionJoined")&&SteamClient.RemotePlay.RegisterForSessionJoined(function(e){return n.SessionJoined(e)}),Object(b.a)("RemotePlay.RegisterForInputUsed")&&SteamClient.RemotePlay.RegisterForInputUsed(function(e,t){n.PlayerUsedInput(e,t)}),Object(b.a)("RemotePlay.RegisterForPlayerInputSettingsChanged")&&SteamClient.RemotePlay.RegisterForPlayerInputSettingsChanged(function(e,t){n.PlayerInputSettingsChanged(e,t)}),Object(b.a)("RemotePlay.RegisterForPlaceholderStateChanged")&&SteamClient.RemotePlay.RegisterForPlaceholderStateChanged(function(e){n.m_bIsShowingPlaceholder=e}),Object(b.a)("RemotePlay.BEnabled")&&SteamClient.RemotePlay.BEnabled().then(function(e){n.m_bEnabled=e}).catch()},e.prototype.BEnabled=function(){return this.m_bEnabled},e.prototype.BCanCreateInviteForGame=function(t){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){return Object(b.a)("RemotePlay.BCanCreateInviteForGame")?[2,SteamClient.RemotePlay.BCanCreateInviteForGame(t)]:[2,!1]})})},e.prototype.BCanAcceptInviteForGame=function(t,n){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){return Object(b.a)("RemotePlay.BCanAcceptInviteForGame")?[2,SteamClient.RemotePlay.BCanAcceptInviteForGame(t,n)]:c.a.COUNTRY&&-1!==n.indexOf(c.a.COUNTRY)?[2,!1]:[2,!0]})})},e.prototype.BCanIsolateGameAudio=function(){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){return Object(b.a)("RemotePlay.BCanHostIsolatedGameAudio")?[2,SteamClient.RemotePlay.BCanIsolateGameAudio()]:[2,!1]})})},e.prototype.HasInviteAndSession=function(e){var t=G.a.InitFromAccountID(e).ConvertTo64BitString();return this.m_sessions.has(t)&&this.m_sessions.get(t).bSession},e.prototype.GetPlayerProps=function(e){var t=G.a.InitFromAccountID(e).ConvertTo64BitString();return this.m_sessions.get(t)},e.prototype.GetPlayerPropsByIndex=function(e){return Array.from(this.m_sessions.values())[e]},Object.defineProperty(e.prototype,"player_props_count",{get:function(){return this.m_sessions.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bIsShowingPlaceholder",{get:function(){return this.m_bIsShowingPlaceholder},enumerable:!0,configurable:!0}),e.prototype.CreateInviteAndSession=function(e,t){var n=G.a.InitFromAccountID(e);return SteamClient.RemotePlay.CreateInviteAndSession(n.ConvertTo64BitString(),t)},e.prototype.CancelInviteAndSession=function(e){var t=G.a.InitFromAccountID(e);return SteamClient.RemotePlay.CancelInviteAndSession(t.ConvertTo64BitString())},e.prototype.CancelAllInvitesAndSessions=function(){var t=this;this.m_sessions.forEach(function(e){t.CancelInviteAndSession(e.friend.accountid)}),this.m_sessions.clear()},e.prototype.StopStreamingClient=function(){Object(b.a)("RemotePlay.StopStreamingClient")&&SteamClient.RemotePlay.StopStreamingClient()},e.prototype.SetStreamingDesktopToRemotePlayTogetherEnabled=function(e){return SteamClient.RemotePlay.SetStreamingDesktopToRemotePlayTogetherEnabled(e)},e.prototype.SetPerUserKeyboardInputEnabled=function(e,t){var n=G.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserKeyboardInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.SetPerUserMouseInputEnabled=function(e,t){var n=G.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserMouseInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.SetPerUserControllerInputEnabled=function(e,t){var n=G.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserControllerInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.GetPerUserInputSettings=function(n){return Object(s.b)(this,void 0,void 0,function(){var t;return Object(s.e)(this,function(e){switch(e.label){case 0:return t=G.a.InitFromAccountID(n),[4,SteamClient.RemotePlay.GetPerUserInputSettings(t.ConvertTo64BitString())];case 1:return[2,e.sent()]}})})},e.prototype.SessionStarted=function(t){var n=this,e=this.m_sessions.get(t);if(void 0===e){var o=new G.a(t).GetAccountID();e={friend:x.FriendStore.GetPlayer(o),bSession:!0,bJoined:!1,bKeyboardEnabled:!0,bMouseEnabled:!0,bControllerEnabled:!0,nKeyboardUsedTime:0,nMouseUsedTime:0,nControllerUsedTime:0},this.GetPerUserInputSettings(o).then(function(e){n.PlayerInputSettingsChanged(t,e)}).catch(),e.friend.LoadIfNecessary(),this.m_sessions.set(t,e)}else e.bSession=!0},e.prototype.SessionStopped=function(e){var t=this.m_sessions.get(e);void 0!==t&&t.bSession&&(t.bSession=!1,x.AudioPlaybackManager.PlayAudioURL(c.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_rpt_leave.m4a"))},e.prototype.SessionJoined=function(e){var t=this.m_sessions.get(e);if(void 0!==t&&!0!==t.bJoined){t.bJoined=!0;var n=new G.a(e).GetAccountID();if(0!=n&&n!==x.FriendStore.self.accountid&&(x.AudioPlaybackManager.PlayAudioURL(c.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_rpt_join.m4a"),x.NotificationManager.BNotificationsPermitted())){var o=x.FriendStore.GetPlayer(n);x.NotificationManager.DisplayNotificationFromFriend(o,{title:o.display_name,body:Object(T.c)("#RemotePlay_FriendJoinedSession"),tag:"message_"+n,steamid:e})}}},e.prototype.PlayerUsedInput=function(e,t){var n=this.m_sessions.get(e);if(void 0!==n)switch(t){case d.h.k_EClientUsedInputTypeKeyboard:n.nKeyboardUsedTime=performance.now();break;case d.h.k_EClientUsedInputTypeMouse:n.nMouseUsedTime=performance.now();break;case d.h.k_EClientUsedInputTypeController:n.nControllerUsedTime=performance.now()}},e.prototype.PlayerInputSettingsChanged=function(e,t){var n=this.m_sessions.get(e);void 0!==n&&(n.bKeyboardEnabled=t.bKeyboardEnabled,n.bMouseEnabled=t.bMouseEnabled,n.bControllerEnabled=t.bControllerEnabled)},Object(s.c)([m.x],e.prototype,"m_bIsShowingPlaceholder",void 0),Object(s.c)([m.g],e.prototype,"Init",null),Object(s.c)([m.i],e.prototype,"player_props_count",null),Object(s.c)([m.i],e.prototype,"bIsShowingPlaceholder",null),e}(),j=n("SEab"),L=n("8JTq");function A(o,e){return function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];x.ready_to_render?o.apply(this,t):Object(m.E)(function(){return x.ready_to_render},function(){o.apply(e,t)})}}function k(e,t,n){return{value:A(n.value)}}function P(e){return A(e,e.name)}n.d(t,"g",function(){return k}),n.d(t,"h",function(){return P}),n.d(t,"c",function(){return N}),n.d(t,"e",function(){return B}),n.d(t,"d",function(){return F}),n.d(t,"f",function(){return x}),n.d(t,"a",function(){return L.a}),n.d(t,"b",function(){return L.b});var N=function(){return function(){}}(),B=function(){return function(){}}(),F=function(){function o(e,t){void 0===t&&(t={}),this.m_BrowserContextDefaultTarget=L.a,this.m_AppInfoStore=i.a,this.m_EconomyStore=new p,this.m_UserStore=new O,this.m_ParentalStore=new M,this.m_BroadcastStore=new D.a,this.m_GroupMemberStore=new j.b,this.m_RemotePlayStore=new R,this.m_bReadyToRender=!1,this.m_bShuttingDown=!1,Object(g.a)(!x,"FriendsUIApp already initialized"),x=this,(window.g_FriendsUIApp=this).m_Storage=e,this.m_SettingsStore=t.SettingsStore||new v(e),this.m_FriendStore=t.FriendStore||new u.a,this.m_ChatStore=t.ChatStore||new r.a(this.m_FriendStore),this.m_UIStore=t.UIStore||new a.b(this.m_ChatStore),this.m_VoiceChatStore=new I.a(this.m_SettingsStore)}return o.prototype.InitInternal=function(e,t,n){var o=this;void 0===n&&(n=[]),this.m_CMInterface=e,this.m_NotificationManager=t;var i=this.m_FriendStore.Init(e),r=this.m_ChatStore.Init(e,this.m_VoiceChatStore),a=this.InitAdjustClockDriftFromServer();this.m_VoiceChatStore.Init(e),this.m_SettingsStore.Init(e),this.m_AppInfoStore.Init(e),this.m_UIStore.Init(),this.m_EconomyStore.Init(e),this.m_ParentalStore.Init(e),this.m_BroadcastStore.Init(e),this.m_RemotePlayStore.Init(e),this.m_GroupMemberStore.Init(),this.m_UserStore.Init(e);Promise.all(Object(s.g)([i,r,a],n)).then(function(){console.log("Ready To Render promises succeeded"),o.SetReadyToRender()},function(e){console.error("Ready To Render promise failed: ",e),o.SetReadyToRender()})},o.prototype.GetChatRoomBBCodeParser=function(){return this.m_ChatRoomBBCodeParser},o.prototype.GetFriendChatBBCodeParser=function(){return this.m_FriendChatBBCodeParser},o.prototype.GetNotificationBBCodeParser=function(){return this.m_NotificationBBCodeParser},Object.defineProperty(o.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"VoiceStore",{get:function(){return this.m_VoiceChatStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"UIStore",{get:function(){return this.m_UIStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"SettingsStore",{get:function(){return this.m_SettingsStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"AppInfoStore",{get:function(){return this.m_AppInfoStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Storage",{get:function(){return this.m_Storage},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"NotificationManager",{get:function(){return this.m_NotificationManager},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"EconomyStore",{get:function(){return this.m_EconomyStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"UserStore",{get:function(){return this.m_UserStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ParentalStore",{get:function(){return this.m_ParentalStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"BroadcastStore",{get:function(){return this.m_BroadcastStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"RemotePlayStore",{get:function(){return this.m_RemotePlayStore},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"GroupMemberStore",{get:function(){return this.m_GroupMemberStore},enumerable:!0,configurable:!0}),o.prototype.SetReadyToRender=function(){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){switch(e.label){case 0:return this.m_bReadyToRender?[3,2]:(console.log("FriendsUI ready to render after "+(performance.now()-o.sm_msStartup)+"ms"),this.m_bReadyToRender=!0,[4,this.OnReadyToRender()]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},Object.defineProperty(o.prototype,"ready_to_render",{get:function(){return this.m_bReadyToRender},enumerable:!0,configurable:!0}),o.prototype.GetStartupTime=function(){return o.sm_msStartup},o.prototype.ShowFriendChatDialog=function(e,t,n){return void 0===n&&(n=!0),this.UIStore.ShowFriendChatDialog(e,t,n,n)},o.prototype.GetDefaultBrowserContext=function(){return this.m_BrowserContextDefaultTarget},o.prototype.SetDefaultPopupContext=function(e){console.log("Set default popup context: "+e.m_unPID),this.m_BrowserContextDefaultTarget=e},o.prototype.InitAdjustClockDriftFromServer=function(){return Object(s.b)(this,void 0,void 0,function(){var t=this;return Object(s.e)(this,function(e){return[2,new Promise(function(n,o){t.m_CMInterface.RunWhenLoggedOn(function(){return Object(s.b)(t,void 0,void 0,function(){var t=this;return Object(s.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Object(m.E)(function(){return t.m_CMInterface.BPerformedInitialClockAdjustment()},{timeout:1e3})];case 1:return e.sent(),n(),[3,3];case 2:return e.sent(),console.warn("Timed out waiting for initial server clock drift adjustment"),o(),[3,3];case 3:return[2]}})})})})]})})},o.prototype.GetServerTimeMS=function(){return this.m_CMInterface.GetServerTimeMS()},o.prototype.GetServerRTime32=function(){return this.m_CMInterface.GetServerRTime32()},o.prototype.RTime32ToDate=function(e){return this.m_CMInterface.RTime32ToDate(e)},o.prototype.GetLocalMidnightInRTime32=function(e){void 0===o.sm_tzOffset&&(o.sm_tzOffset=60*(new Date).getTimezoneOffset(),Object(g.a)(o.sm_tzOffset||0===o.sm_tzOffset,"Computed invalid timezone offset "+o.sm_tzOffset));var t=o.sm_tzOffset||0,n=(e||this.m_CMInterface.GetServerRTime32())-t;return 86400*Math.floor(n/86400)+t},o.prototype.IsInBeta=function(){return c.a.FRIENDSUI_BETA},o.prototype.BIsValidBrowserContext=function(e){return Object(L.b)(e,L.a)},o.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){},o.prototype.UpdatePersonaState=function(e){},o.prototype.BShowChatRoomNotification=function(){return this.SettingsStore.FriendsSettings.bNotifications_ShowChatRoomNotification},o.prototype.BShowDirectChatNotification=function(){return this.SettingsStore.FriendsSettings.bNotifications_ShowMessage},o.sm_msStartup=performance.now(),Object(s.c)([m.x],o.prototype,"m_bReadyToRender",void 0),Object(s.c)([m.i],o.prototype,"ready_to_render",null),o}(),x=void 0},MB4Y:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"b",function(){return _}),n.d(t,"a",function(){return g});var o=n("mrSG"),u=n("rWGG"),m=n("q1tI"),i=n("2vnA"),d=n("tkkQ"),r=n("G+3Z"),a=n("1VtQ"),s=n("FkUk"),c=n("UqDm"),h=n("hReu"),f=n("LAqV"),l=n("eMko"),p=function(){function e(){this.m_mapHovers=new WeakMap}return e.prototype.GetHover=function(e){var t=this.m_mapHovers.get(e);return t||(t=new g(e),this.m_mapHovers.set(e,t)),t},e}(),_=function(){function e(){}return Object(o.c)([i.x],e.prototype,"visible",void 0),e}(),g=function(n){function p(e){var t=n.call(this,e.accountid)||this;return t.m_friend=e,t}return Object(o.d)(p,n),Object.defineProperty(p.prototype,"friend",{get:function(){return this.m_friend},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"persona",{get:function(){return this.m_friend.persona},enumerable:!0,configurable:!0}),p.prototype.GetInstance=function(e,t){if(void 0===t&&(t=!1),this.m_rgInstances)for(var n=0,o=this.m_rgInstances;n<o.length;n++){if((i=o[n]).m_OwningElement==e)return i}var i;return t?((i=new _).m_OwningElement=e,i.visible=!1,(i.hover=this).m_rgInstances?this.m_rgInstances.push(i):this.m_rgInstances=[i],i):null},p.prototype.ShowPopup=function(e,t,n){var o=this;t.visible=!0,t.m_OwningElement.ownerDocument.defaultView.setTimeout(function(){t.visible&&(t.popupWindow||(t.popupWindow=new u.a(e,t,n)),t.popupWindow.Show())},250),t.m_BlurHandler=function(){o.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.defaultView.addEventListener("blur",t.m_BlurHandler),t.m_VisibilityHandler=function(e){"hidden"===e.target.visibilityState&&o.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.addEventListener("visibilitychange",t.m_VisibilityHandler)},p.prototype.Show=function(e,t){var n=this,o=e.currentTarget.ownerDocument.defaultView.innerWidth<500;if((!o||d.a.IN_CLIENT)&&!h.h.DragDropManager.BInDrag()){this.EnsureCommunityDataLoaded();var i=e.currentTarget,r=Object(h.e)(null,e),a=this.GetInstance(i,!0);a.context=t;var s=!1;if(d.a.IN_CLIENT){var c=f.f.UIStore.GetPerContextChatData(r);s=c.BUsePopups()}if(o&&s)this.ShowPopup(i,a,r);else{var l=m.createElement(u.b,{hoverInstance:a,target:i,onNoSpace:function(){s&&n.ShowPopup(i,a,r)}});p.m_embeddedElements.ShowElementDelayed(i.ownerDocument,250,l,a).then(function(){a.visible=!0})}}},p.prototype.Hide=function(e){this.HideByElement(e.currentTarget)},p.prototype.HideByElement=function(e){var t=this.GetInstance(e);if(t){if(t.visible=!1,t.m_BlurHandler&&(e.ownerDocument.defaultView.removeEventListener("blur",t.m_BlurHandler),t.m_BlurHandler=null),t.m_VisibilityHandler&&(e.ownerDocument.removeEventListener("visibilitychange",t.m_VisibilityHandler),t.m_VisibilityHandler=null),t.popupWindow&&!t.popupWindow.BIsClosed()){var n=t.popupWindow,o=function(){n.BIsClosed()||n.Close()};e.ownerDocument.defaultView.addEventListener("unload",o),e.ownerDocument.defaultView.setTimeout(function(){e.ownerDocument.defaultView.removeEventListener("unload",o),o()},100)}else p.m_embeddedElements.HideElement(t.m_OwningElement.ownerDocument,t,500);c.c(this.m_rgInstances,t)}},p.prototype.OnContextMenu=function(e,t){var n=Object(s.b)(Object(h.e)(null,t),e,this.m_friend,t);return this.Hide(t),n},p.prototype.HideAllInstances=function(){if(this.m_rgInstances)for(var e=0,t=this.m_rgInstances.slice();e<t.length;e++){var n=t[e];this.HideByElement(n.m_OwningElement)}},p.m_embeddedElements=new r.a("CFriendHoverContainer"),Object(o.c)([a.a],p.prototype,"Show",null),Object(o.c)([a.a],p.prototype,"Hide",null),Object(o.c)([a.a],p.prototype,"OnContextMenu",null),p}(l.a)},MfD9:function(e,t,n){e.exports={ChatMessageSteamStore_Failed:"bbcode_ChatMessageSteamStore_Failed_2wa0X",ChatMessageSteamStore:"bbcode_ChatMessageSteamStore_gwzSZ",ChatMessagesSteamStore_FilteredContent:"bbcode_ChatMessagesSteamStore_FilteredContent_34k3I",senderName:"bbcode_senderName_1_tWd",URLSent:"bbcode_URLSent_2yalT",SteamURL:"bbcode_SteamURL_2VXfO",ChatMessageSteamStore_Name:"bbcode_ChatMessageSteamStore_Name_2-b92",ChatMessageSteamStore_GameNameAndIcon:"bbcode_ChatMessageSteamStore_GameNameAndIcon_qa-O1",ChatMessageSteamStore_Header:"bbcode_ChatMessageSteamStore_Header_3X7hC",ChatMessageSteamStore_HeaderImage:"bbcode_ChatMessageSteamStore_HeaderImage_2s811",Blurred:"bbcode_Blurred_3BKMl",ChatMessageSteamStore_HeaderImageFiltered:"bbcode_ChatMessageSteamStore_HeaderImageFiltered_2GO7-",ChatMessageSteamStore_GameDetails:"bbcode_ChatMessageSteamStore_GameDetails_99hwV",ChatMessageSteamStore_Description:"bbcode_ChatMessageSteamStore_Description_17PwS",ChatMessageSteamStore_FilteredDescription:"bbcode_ChatMessageSteamStore_FilteredDescription_3Iqni",ChatMessageSteamStore_GameIcon:"bbcode_ChatMessageSteamStore_GameIcon_1EeOf",ChatMessageSteamStore_Body:"bbcode_ChatMessageSteamStore_Body_1L1hB",ChatMessageSteamStore_DetailsContainer:"bbcode_ChatMessageSteamStore_DetailsContainer_2d12m",ChatMessageSteamStore_MediaContainer:"bbcode_ChatMessageSteamStore_MediaContainer_2i_00",ChatMessageSteamStore_MainMedia:"bbcode_ChatMessageSteamStore_MainMedia_28eQq",ChatMessageSteamStore_VideoThumbnail:"bbcode_ChatMessageSteamStore_VideoThumbnail_2c-FU",ChatMessageSteamStore_ThumbnailsContainer:"bbcode_ChatMessageSteamStore_ThumbnailsContainer_246HV",ChatMessageSteamStore_Screenshot:"bbcode_ChatMessageSteamStore_Screenshot_3XVGb",ChatMessageSteamStore_ScreenshotThumbnail:"bbcode_ChatMessageSteamStore_ScreenshotThumbnail_3R0VG",videoPlaying:"bbcode_videoPlaying_1UpDR",ChatMessageSteamStore_VideoPlayButton:"bbcode_ChatMessageSteamStore_VideoPlayButton_2oeMy",ChatMessageSteamStore_VideoLargeContainer:"bbcode_ChatMessageSteamStore_VideoLargeContainer_2pzdG",ChatMessageSteamStore_VideoLarge:"bbcode_ChatMessageSteamStore_VideoLarge_2Dj_u",ChatMessageSteamStore_Footer:"bbcode_ChatMessageSteamStore_Footer_1mXJd",ChatMessageSteamStore_PricingContainer:"bbcode_ChatMessageSteamStore_PricingContainer_fYTQK",ChatMessageSteamStore_Pricing:"bbcode_ChatMessageSteamStore_Pricing_bKeQr",ChatMessageSteamStore_Pricing_Discount:"bbcode_ChatMessageSteamStore_Pricing_Discount_1BAfb",ChatMessageSteamStore_Pricing_FinalContainer:"bbcode_ChatMessageSteamStore_Pricing_FinalContainer_3piGx",ChatMessageSteamStore_Pricing_Final:"bbcode_ChatMessageSteamStore_Pricing_Final_2TCu5",hasDiscount:"bbcode_hasDiscount_2DoYC",ChatMessageSteamStore_Pricing_Initial:"bbcode_ChatMessageSteamStore_Pricing_Initial_1Jm7h",ChatMessageSteamStore_ViewStore:"bbcode_ChatMessageSteamStore_ViewStore_1_czf",ChatMessageSteamStore_Free:"bbcode_ChatMessageSteamStore_Free_3Zq0f",ChatMessageSteamStore_CopyURL:"bbcode_ChatMessageSteamStore_CopyURL_23S5M",ChatMessageTweet:"bbcode_ChatMessageTweet_1R69m",ChatMessageTweet_Header:"bbcode_ChatMessageTweet_Header_gpcGy",ChatMessageTweet_ProfileImage:"bbcode_ChatMessageTweet_ProfileImage_wRcpO",ChatMessageTweet_NameSection:"bbcode_ChatMessageTweet_NameSection_3c-Qw",ChatMessageTweet_NameGroup:"bbcode_ChatMessageTweet_NameGroup_3VNx1",ChatMessageTweet_Name:"bbcode_ChatMessageTweet_Name_1_swN",ChatMessageTweet_Logo:"bbcode_ChatMessageTweet_Logo_1ex2E",ChatMessageTweet_Verified:"bbcode_ChatMessageTweet_Verified_2roaO",ChatMessageTweet_ScreenName:"bbcode_ChatMessageTweet_ScreenName_3pM50",ChatMessageTweet_Body:"bbcode_ChatMessageTweet_Body_2mh_n",ChatMessageTweet_Footer:"bbcode_ChatMessageTweet_Footer_11DrN",ChatMessageTweet_Created:"bbcode_ChatMessageTweet_Created_1qrLY",numberCounterContainer:"bbcode_numberCounterContainer_mswnK",numberColumn:"bbcode_numberColumn_2SFVv",randomNumberLabel:"bbcode_randomNumberLabel_6Nz3l",randomActual:"bbcode_randomActual_1KvCn",randomNumberShadow:"bbcode_randomNumberShadow_3OoiC",startingZero:"bbcode_startingZero_20MSk",randomMsg:"bbcode_randomMsg_2x8Cn",MsgAnimating:"bbcode_MsgAnimating_3a9nR",none:"bbcode_none_3qH01",randomValues:"bbcode_randomValues_Vpi5G",coinLabel:"bbcode_coinLabel_1GhxZ",CoinModel:"bbcode_CoinModel_JExHJ",flipCoinContainer:"bbcode_flipCoinContainer_2PyUD",coinFade:"bbcode_coinFade_3vycN",flipCoinAndResult:"bbcode_flipCoinAndResult_1FjLD",coin:"bbcode_coin_AlQa_",front:"bbcode_front_h-0pm",back:"bbcode_back_22p29",coinFlipBottom:"bbcode_coinFlipBottom_38MhH",coinFlipTop:"bbcode_coinFlipTop_BnEA6",front_b:"bbcode_front_b_2ugtx",back_b:"bbcode_back_b_3YNs8",mid:"bbcode_mid_10JhA",coinFace:"bbcode_coinFace_3OmQy",flipCoinWinningSide:"bbcode_flipCoinWinningSide_17gzn",flipCoinLosingSide:"bbcode_flipCoinLosingSide_g63r6",coinFlip:"bbcode_coinFlip_3klbs",resultLabel:"bbcode_resultLabel_3Lefr",coinFlipResult:"bbcode_coinFlipResult_2a-5i",plusOne:"bbcode_plusOne_3mCUi",ImageModalBackground:"bbcode_ImageModalBackground_XfE_W",ImageModalContent:"bbcode_ImageModalContent_1jjqt",randomNumbers:"bbcode_randomNumbers_2IGPW",randomNumbers0:"bbcode_randomNumbers0_1UWWl",randomNumbers1:"bbcode_randomNumbers1_2b7O2",randomNumbers2:"bbcode_randomNumbers2_TxzW6",randomNumbers3:"bbcode_randomNumbers3_1v-a7",randomNumbers4:"bbcode_randomNumbers4_2J19q",randomNumbers5:"bbcode_randomNumbers5_2tjCM",randomNumbers6:"bbcode_randomNumbers6_behC6",randomNumbers7:"bbcode_randomNumbers7_CGn78",randomNumbers8:"bbcode_randomNumbers8_261Uj",randomNumbers9:"bbcode_randomNumbers9_1orHm",randomNumbers10:"bbcode_randomNumbers10_2bRjg",randomNumbersZero:"bbcode_randomNumbersZero_OKABV",coinSpin:"bbcode_coinSpin_3_X1R"}},MsQV:function(e,t,n){"use strict";var o,i,r,a;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),(i=o||(o={}))[i.Hover=0]="Hover",i[i.ClickPopup=1]="ClickPopup",i[i.ClickSurroundingRegion=2]="ClickSurroundingRegion",(a=r||(r={}))[a.Chat=0]="Chat",a[a.Notification=1]="Notification",a[a.Error=2]="Error";var s=function(){return function(){}}()},"N/w2":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n("LAqV"),c=n("oh5H"),l={TimeOfDay:new Intl.DateTimeFormat(c.b.GetPreferredLocales(),{hour:"numeric",minute:"numeric"}),TimeOfDayWithSecs:new Intl.DateTimeFormat(c.b.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric"}),TimeInWeek:Intl.DateTimeFormat(c.b.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric"}),FullTimestamp:Intl.DateTimeFormat(c.b.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),FullTimestampNoWeekday:Intl.DateTimeFormat(c.b.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},p={TimeOfDay:new Intl.DateTimeFormat(c.b.GetPreferredLocales(),{hour:"numeric",minute:"numeric",hour12:!1}),TimeOfDayWithSecs:new Intl.DateTimeFormat(c.b.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),TimeInWeek:Intl.DateTimeFormat(c.b.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestamp:Intl.DateTimeFormat(c.b.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestampNoWeekday:Intl.DateTimeFormat(c.b.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})};function o(e,t){null==t.bIncludeWeekday&&(t.bIncludeWeekday=!0),null==t.bRelativeDate&&(t.bRelativeDate=!0);var n,o=s.f.RTime32ToDate(e),i=s.f.GetLocalMidnightInRTime32(),r=s.f.SettingsStore.FriendsSettings.b24HourClock?p:l,a=t.Format;null==a&&(a=t.bTimeOnly||i-86400<=e?t.bIncludeSeconds?r.TimeOfDayWithSecs:r.TimeOfDay:t.bRelativeDate&&i-432e3<=e?r.TimeInWeek:t.bIncludeWeekday?r.FullTimestamp:r.FullTimestampNoWeekday);try{n=a.format(o)}catch(e){n=Object(c.c)("#ChatRoom_Timestamp_InvalidDate")}return!t.bTimeOnly&&t.bRelativeDate&&i-86400<=e&&e<i&&(n=Object(c.c)("#ChatRoom_Timestamp_Yesterday",n)),n}},NB6M:function(e,t,n){"use strict";var d=n("mrSG"),I=n("q1tI"),a=n.n(I),E=n("e2SU"),w=n("/7KC"),l=(n("FuJV"),n("2vnA")),o=n("okNM"),i=n("1VtQ"),p=n("1n9R"),M=n("D3Kh"),r=n("E7zH"),D=n("Y3w+"),T=n("oh5H"),u=function(t){function e(e){return t.call(this,e)||this}return Object(d.d)(e,t),e.prototype.HideStats=function(){this.props.closeStats&&this.props.closeStats()},e.prototype.render=function(){var e=this.props.stats;return I.createElement("div",{className:"dash_video_stats"},I.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},I.createElement(E.pb,null)),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_BufferingResolution")," ",I.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_PlaybackResolution")," ",I.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_HtmlResolution")," ",I.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_ContentServer")," ",I.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_StallEvents")," ",I.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_FailedDownloads")," ",I.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_TimeToFirstFrame")," ",I.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_PlaybackRate")," ",I.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),I.createElement(s,{stats:e}))},Object(d.c)([i.a],e.prototype,"HideStats",null),e=Object(d.c)([o.a],e)}(I.Component),s=function(t){function e(e){return t.call(this,e)||this}return Object(d.d)(e,t),e.prototype.createBufferedRange=function(e){var t=this.props.stats,n=[],o=e?"vidbuf":"audbuf",i=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(0<i)for(var r=0;r<i;++r){var a=Object(T.c)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",r),s=e?t.GetBufferedVideoSegmentForDisplay(r):t.GetBufferedAudioSegmentForDisplay(r);n.push(I.createElement("div",{key:o+r},a," ",I.createElement("span",{className:"videoStatsValue"},s)))}else{a=Object(T.c)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");n.push(I.createElement("div",{key:o+"none"},a))}return n},e.prototype.render=function(){var e=this.props.stats;return I.createElement("div",{className:"dash_video_quick_stats"},I.createElement("div",null,Object(T.c)("#DASHPlayerStats_BytesReceived")," ",I.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&I.createElement("div",null,Object(T.c)("#DASHPlayerStats_DroppedFrames")," ",I.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_VideoBuffered")," ",I.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_AudioBuffered")," ",I.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_BandwidthRequired")," ",I.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_BandwidthVideo")," ",I.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_BandwidthNums")," ",I.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_DownloadNums")," ",I.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_ActiveDownloads")," ",I.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_VideoDownloadProgress")," ",I.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_DroppingFrames")," ",I.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),I.createElement("div",null,Object(T.c)("#DASHPlayerStats_CurrentFPS")," ",I.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))},e=Object(d.c)([o.a],e)}(I.Component),c=n("/IDK"),h=n("EGkk"),m=n("8o0Y"),f=n("XCHq"),_=n("xdma"),g=n("vDqi"),b=n.n(g),v=new(function(){function e(){this.m_mapPackageInfo=new Map}return e.prototype.GetPackageInfo=function(e){return this.m_mapPackageInfo.get(e)},e.prototype.LoadPackageInfo=function(c){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=[],c.forEach(function(e){s.m_mapPackageInfo.has(e)||t.push(e)}),t.length?[4,b.a.get(p.b.STORE_BASE_URL+"actions/ajaxresolvepackages",{params:{packageids:t.join(","),cc:p.b.COUNTRY||"US",l:p.b.LANGUAGE}})]:[3,2];case 1:if(n=e.sent(),o=n&&n.data)for(i={},r=0;r<o.length;r++)a=o[r],i[a.appids.join(",")]||(i[a.appids.join(",")]=1,this.m_mapPackageInfo.set(a.packageid,a));e.label=2;case 2:return[2]}})})},Object(d.c)([l.x],e.prototype,"m_mapPackageInfo",void 0),e}()),S=new(function(){function e(){this.m_mapBundleInfo=new Map}return e.prototype.GetBundleInfo=function(e){return this.m_mapBundleInfo.get(e)},e.prototype.LoadBundleInfo=function(s){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r,a=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=[],s.forEach(function(e){a.m_mapBundleInfo.has(e)||t.push(e)}),t.length?[4,b.a.get(p.b.STORE_BASE_URL+"actions/ajaxresolvebundles",{params:{bundleids:t.join(","),cc:p.b.COUNTRY||"US",l:p.b.LANGUAGE}})]:[3,2];case 1:if(n=e.sent(),o=n&&n.data)for(i=0;i<o.length;i++)r=o[i],v.LoadPackageInfo(r.packageids),this.m_mapBundleInfo.set(r.bundleid,r);e.label=2;case 2:return[2]}})})},Object(d.c)([l.x],e.prototype,"m_mapBundleInfo",void 0),e}()),y=n("/SYB"),C=function(){function e(e){this.m_bLoaded=!1,this.m_appid=e,this.m_bLoaded=!1,this.m_appStoreData={appid:e,success:2,title:"",screenshot:"",age_safe_screenshot:!1,capsule_link:p.b.STORE_BASE_URL+"app/"+e,creator_list:new Array,is_free:!1,required_age:!1,coming_soon:!1,library_asset_setup_complete:!0}}return e.prototype.BIsLoaded=function(){return this.m_bLoaded},e.prototype.GetAppStoreData=function(){return this.m_appStoreData},e.prototype.HintLoadBroadcastAppData=function(t){return void 0===t&&(t="steamtv"),Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return this.m_loadingPromise?[3,2]:(this.m_loadingPromise=this.InternalLoadBroadcastAppData(t),[4,this.m_loadingPromise]);case 1:e.sent(),e.label=2;case 2:return[2,this.m_loadingPromise]}})})},e.prototype.InternalLoadBroadcastAppData=function(r){return void 0===r&&(r="steamtv"),Object(d.b)(this,void 0,void 0,function(){var t,n,s,o,i,c=this;return Object(d.e)(this,function(e){switch(e.label){case 0:if(this.m_bLoaded)return[3,4];t={appid:this.m_appid,feature:r,cc:p.b.COUNTRY||"US",l:p.b.LANGUAGE},n=p.b.STORE_BASE_URL+"broadcast/ajaxgetappinfoforcap",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b.a.get(n,{params:t})];case 2:return s=e.sent(),Object(l.A)(function(){if(!s.data||1!=s.data.success)return console.log("AMS - failed to load store info about appid: "+c.m_appid),void(c.m_appStoreData.success=s.data?s.data.success:2);c.m_appStoreData.success=1,c.m_appStoreData.capsule_link=s.data.capsule_link,c.m_appStoreData.price=s.data.price,c.m_appStoreData.discount_percent=s.data.discount_percent,c.m_appStoreData.subid=s.data.subid,c.m_appStoreData.button_action=s.data.button_action,c.m_appStoreData.cart_url=s.data.cart_url,c.m_appStoreData.add_to_cart_url=s.data.add_to_cart_url,c.m_appStoreData.app_to_run=s.data.app_to_run,c.m_appStoreData.is_free=s.data.is_free,c.m_appStoreData.required_age=s.data.required_age,c.m_appStoreData.coming_soon=s.data.coming_soon,c.m_appStoreData.title=s.data.title,c.m_appStoreData.release=s.data.release,c.m_appStoreData.short_desc=s.data.short_desc,c.m_appStoreData.capsule=s.data.capsule,c.m_appStoreData.tiny_capsule=s.data.tiny_capsule,c.m_appStoreData.screenshot=s.data.screenshot,c.m_appStoreData.screenshot_list=s.data.screenshot_list,c.m_appStoreData.age_safe_screenshot=s.data.age_safe_screenshot,c.m_appStoreData.library_asset_setup_complete=s.data.library_asset_setup_complete,c.m_appStoreData.item_id=s.data.item_id,c.m_appStoreData.icon_url=s.data.icon_url,c.m_appStoreData.tags=s.data.tags,c.m_appStoreData.content_descriptors=s.data.content_descriptors,c.m_appStoreData.available_windows=s.data.available_windows,c.m_appStoreData.available_mac=s.data.available_mac,c.m_appStoreData.available_linux=s.data.available_linux,c.m_appStoreData.creator_list=new Array;var e=s.data.creator_list;if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];c.m_appStoreData.creator_list.push(o)}c.m_appStoreData.social=new Array;for(var i=0,r=s.data.social;i<r.length;i++){var a=r[i];c.m_appStoreData.social.push(a)}c.m_bLoaded=!0}),[3,4];case 3:return o=e.sent(),i=Object(y.a)(o),console.log("InternalLoadBroadcastAppData: calling ajaxgetappinfoforcap for appid "+this.m_appid+" failed with "+i.strErrorMsg,i),[3,4];case 4:return[2,this]}})})},Object(d.c)([l.x],e.prototype,"m_appStoreData",void 0),Object(d.c)([l.g],e.prototype,"HintLoadBroadcastAppData",null),e}(),O=new(function(){function e(){this.m_mapAppIDToInfo=new Map,this.m_mapAppIDToDLCs=new Map}return e.prototype.EnsureStoreCapsuleInfoLoaded=function(n){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.m_mapAppIDToInfo.has(n)?[3,2]:(t=new C(n),this.m_mapAppIDToInfo.set(n,t),n&&0<n?[4,t.HintLoadBroadcastAppData((p.b.IN_CLIENT?"library-":Object(p.c)()+"-")+"partner-events")]:[3,2]);case 1:e.sent(),e.label=2;case 2:return[2,this.m_mapAppIDToInfo.get(n)]}})})},e.prototype.GetStoreCapsuleInfo=function(e){return this.m_mapAppIDToInfo.has(e)?this.m_mapAppIDToInfo.get(e):new C(e)},e.prototype.BIsAppidLoaded=function(e){return!!this.m_mapAppIDToInfo.has(e)&&this.m_mapAppIDToInfo.get(e).BIsLoaded()},e.prototype.LoadDLCForAppID=function(r,a){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(d.e)(this,function(e){switch(e.label){case 0:if(this.m_mapAppIDToDLCs.has(r))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),t=p.b.STORE_BASE_URL+"dlc/"+r+"/ajaxgetdlclist",[4,b.a.get(t,{cancelToken:a.token})];case 2:return n=e.sent(),o=Array(),n.data.dlcs&&n.data.dlcs.forEach(function(e){o.push({appid:e.appid,name:e.name})}),this.m_mapAppIDToDLCs.set(r,o),[3,4];case 3:return i=e.sent(),console.log(Object(y.a)(i)),console.error(i),[3,4];case 4:return[2,this.m_mapAppIDToDLCs.has(r)?this.m_mapAppIDToDLCs.get(r):[]]}})})},Object(d.c)([l.x],e.prototype,"m_mapAppIDToInfo",void 0),Object(d.c)([l.x],e.prototype,"m_mapAppIDToDLCs",void 0),Object(d.c)([l.g],e.prototype,"EnsureStoreCapsuleInfoLoaded",null),e}()),G=n("z9WT"),R="unUserdataVersion",j=new(function(){function e(){this.m_rgWishList=new Array,this.m_rgOwnedPackages=[],this.m_rgOwnedApps=[],this.m_excludedTags=[],this.m_excludedContentDescriptors=[],this.m_rgCreatorsFollowed=new Array,this.m_rgCreatorsIgnored=new Array,this.m_bIsLoaded=!1}return e.prototype.BIsLoaded=function(){return this.m_bIsLoaded},e.prototype.GetCreatorsFollowed=function(){return this.m_rgCreatorsFollowed},e.prototype.GetCreatorsIgnored=function(){return this.m_rgCreatorsIgnored},e.prototype.BIsFollowingCreator=function(t){return 0<=this.m_rgCreatorsFollowed.findIndex(function(e){return e==t.GetAccountID()})},e.prototype.BIsIgnoringCreator=function(t){return 0<=this.m_rgCreatorsIgnored.findIndex(function(e){return e==t.GetAccountID()})},e.prototype.BExcludesTag=function(t){return!!t&&Boolean(this.m_excludedTags.filter(function(e){return-1!==t.map(function(e){return e.tagid}).indexOf(e)}).length)},e.prototype.BExcludesContentDescriptor=function(t){return!!t&&Boolean(this.m_excludedContentDescriptors.filter(function(e){return-1!==t.indexOf(e)}).length)},e.prototype.BIsGameWishlisted=function(t){return this.m_rgWishList.some(function(e){return e==t})},e.prototype.BOwnsApp=function(t){return this.m_rgOwnedApps.some(function(e){return e===t})},e.prototype.BOwnsPackage=function(t){return this.m_rgOwnedPackages.some(function(e){return e===t})},e.prototype.HintLoad=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){return this.m_promise||(this.m_promise=this.InternalLoad()),[2,this.m_promise]})})},e.prototype.InternalLoad=function(){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=sessionStorage.getItem(R)||"0",n={v:t,id:""+p.g.accountid},o=p.b.STORE_BASE_URL+"dynamicstore/userdata/",[4,b.a.get(o,{params:n,withCredentials:!0})];case 1:return(i=e.sent())&&200==i.status&&Object(l.A)(function(){r.m_bIsLoaded=!0,r.m_rgCreatorsFollowed.length=0,r.m_rgCreatorsIgnored.length=0,r.m_rgWishList.length=0,i.data.rgCreatorsFollowed&&i.data.rgCreatorsFollowed.forEach(function(e){return r.m_rgCreatorsFollowed.push(e)}),i.data.rgCreatorsIgnored&&i.data.rgCreatorsIgnored.forEach(function(e){return r.m_rgCreatorsIgnored.push(e)}),i.data.rgWishlist&&i.data.rgWishlist.forEach(function(e){return r.m_rgWishList.push(e)}),i.data.rgOwnedApps&&(r.m_rgOwnedApps=i.data.rgOwnedApps),i.data.rgOwnedPackages&&(r.m_rgOwnedPackages=i.data.rgOwnedPackages),i.data.rgExcludedTags&&(r.m_excludedTags=i.data.rgExcludedTags.map(function(e){return e.tagid})),i.data.rgExcludedContentDescriptorIDs&&(r.m_excludedContentDescriptors=i.data.rgExcludedContentDescriptorIDs)}),[2,this]}})})},e.prototype.UpdateFollowOrIgnoreCurator=function(a,s,c){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=p.b.STORE_BASE_URL+"curators/"+(s?"ajaxfollow/":"ajaxignore/"),(n=new FormData).append("authwgtoken",p.g.authwgtoken),n.append("clanid",""+a.GetAccountID()),n.append(s?"follow":"ignore",c?"1":"0"),[4,b.a.post(t,n,{withCredentials:!0})];case 1:return(o=e.sent())&&200==o.status&&(this.InvalidateCache(),i=s?this.m_rgCreatorsFollowed:this.m_rgCreatorsIgnored,c?i.push(a.GetAccountID()):0<=(r=i.findIndex(function(e){return e==a.GetAccountID()}))&&i.splice(r,1)),[2,o.data]}})})},e.prototype.UpdateGameWishlist=function(r,a){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=p.b.COMMUNITY_BASE_URL+"/actions/"+(a?"AddToWishlist":"RemoveFromWishlist"),(n=new FormData).append("appid",""+r),n.append("sessionid",p.b.SESSIONID),[4,b.a.post(t,n,{withCredentials:!0})];case 1:return(o=e.sent()).data.success=1==o.data.success?1:2,1==o.data.success&&(this.InvalidateCache(),a?this.m_rgWishList.push(r):0<=(i=this.m_rgWishList.findIndex(function(e){return e==r}))&&this.m_rgWishList.splice(i,1)),[2,o.data]}})})},e.prototype.AddToCart=function(r,a,s,c,l){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(d.e)(this,function(e){switch(e.label){case 0:(t=new FormData).append("action","add_to_cart"),l?t.append("bundleid",l.toString()):t.append("subid",""+a),(n=p.g.authwgtoken)?t.append("authwgtoken",n):t.append("sessionid",p.b.SESSIONID),t.append("quantity","1"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b.a.post(s,t,{withCredentials:!0})];case 2:return e.sent(),o=p.b.IN_CLIENT?"steam://url/StoreCart":c,r.preventDefault(),this.InvalidateCache(),Object(G.f)(window,o),[3,4];case 3:return i=e.sent(),console.log("HandleOnAddToCart"),console.log(i),[3,4];case 4:return[2]}})})},e.prototype.InvalidateCache=function(){sessionStorage.setItem(R,(Number.parseInt(sessionStorage.getItem(R)||"0")+1).toString())},Object(d.c)([l.x],e.prototype,"m_rgWishList",void 0),Object(d.c)([l.x],e.prototype,"m_rgOwnedPackages",void 0),Object(d.c)([l.x],e.prototype,"m_rgOwnedApps",void 0),Object(d.c)([l.x],e.prototype,"m_excludedTags",void 0),Object(d.c)([l.x],e.prototype,"m_excludedContentDescriptors",void 0),Object(d.c)([l.x],e.prototype,"m_rgCreatorsFollowed",void 0),Object(d.c)([l.x],e.prototype,"m_rgCreatorsIgnored",void 0),e}()),L=n("2wX0"),A=n.n(L),k=n("ljid"),P=n("QHER"),N=n("TY1L"),B=n.n(N),F=n("6b33").default;function x(e,t){return e.endsWith("/")||(e+="/"),e+"login/"+t+"/"}function V(){var e=new FormData;return e.append("donotcache",(new Date).getTime().toString()),e}function U(n,o,i){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return(i=Object.assign({},i)).strUserName&&(i.strUserName=i.strUserName.replace(/[^\x00-\x7F]/g,"")),!i.strPassword||i.strPassword.match(/[^\x00-\x7F]/)?[2,null]:i.strUserName?[4,function(a,s){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r;return Object(d.e)(this,function(e){switch(e.label){case 0:(t=V()).append("username",s),n=x(a,"getrsakey"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b.a.post(n,t)];case 2:return 200!=(i=e.sent()).status?[2,null]:(r=i.data)&&r.success&&r.publickey_mod&&r.publickey_exp&&r.timestamp?(o=r,[3,4]):[2,null];case 3:return e.sent(),[2,null];case 4:return[2,o]}})})}(n,i.strUserName)]:[2,null];case 1:return(t=e.sent())?[4,function(l,p,u,m){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c;return Object(d.e)(this,function(e){switch(e.label){case 0:if(t=F.getPublicKey(m.publickey_mod,m.publickey_exp),!1===(n=F.encrypt(u.strPassword,t)))return[2,null];(o=V()).append("password",n),o.append("username",u.strUserName),o.append("twofactorcode",u.strTwoFactorCode||""),o.append("emailauth",u.strEmailAuthCode||""),o.append("loginfriendlyname",""),o.append("captchagid",u.gidCaptcha||""),o.append("captcha_text",u.strCaptchaText||""),o.append("emailsteamid",u.emailSteamID||""),o.append("rsatimestamp",m.timestamp),o.append("remember_login",u.bRememberLogin?"true":"false"),i={},p&&(o.append("oauth_client_id",p),o.append("mobile_chat_client","true")),r=x(l,"dologin"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b.a.post(r,o,i)];case 2:return 200!=(s=e.sent()).status?[2,null]:(c=s.data)?(c.oauth&&(c.oauth=JSON.parse(c.oauth)),a=c,[3,4]):[2,null];case 3:return e.sent(),[2,null];case 4:return[2,a]}})})}(n,o,i,t)]:(console.log("Failed to get RSA key"),[2,null]);case 2:return[2,e.sent()]}})})}var H,W,z,q;(W=H||(H={}))[W.Invalid=0]="Invalid",W[W.AccountName=1]="AccountName",W[W.EmailCode=2]="EmailCode",W[W.TwoFactorCode=3]="TwoFactorCode",W[W.Complete=4]="Complete",(q=z||(z={}))[q.None=0]="None",q[q.InvalidCode=1]="InvalidCode";var K=function(){function e(e,t){this.m_strBaseURL="",this.m_strOAuthClientID="",this.m_fnLoginComplete=null,this.m_bRequestInFlight=!1,this.m_eCurrentStep=H.AccountName,this.m_strErrorMessage="",this.m_strEmailDomain="",this.m_strCaptchaURL="",this.m_eSteamGuardCodeError=z.None,this.m_strBaseURL=e,this.m_strOAuthClientID=t,this.m_userFields={strUserName:"",strPassword:"",strTwoFactorCode:"",strEmailAuthCode:"",emailSteamID:"",gidCaptcha:"",strCaptchaText:"",bRememberLogin:!1}}return e.prototype.Shutdown=function(){this.m_fnLoginComplete=null},e.prototype.SetLoginCompleteCallback=function(e){this.m_fnLoginComplete=e},e.prototype.SetUserName=function(e){this.m_userFields.strUserName=e},e.prototype.GetUserName=function(){return this.m_userFields.strUserName},e.prototype.SetPassword=function(e){this.m_userFields.strPassword=e},e.prototype.GetPassword=function(){return this.m_userFields.strPassword},e.prototype.SetRememberPassword=function(e){this.m_userFields.bRememberLogin=e},e.prototype.GetRememberPassword=function(){return this.m_userFields.bRememberLogin},e.prototype.SetEmailAuthCode=function(e){this.m_userFields.strEmailAuthCode=e},e.prototype.GetEmailAuthCode=function(){return this.m_userFields.strEmailAuthCode},e.prototype.GetEmailDomain=function(){return this.m_strEmailDomain},e.prototype.SetTwoFactorCode=function(e){this.m_userFields.strTwoFactorCode=e},e.prototype.GetTwoFactorCode=function(){return this.m_userFields.strTwoFactorCode},e.prototype.SetCaptchaText=function(e){this.m_userFields.strCaptchaText=e},e.prototype.GetCaptchaText=function(){return this.m_userFields.strCaptchaText},e.prototype.IsRequestInFlight=function(){return this.m_bRequestInFlight},e.prototype.GetCurrentStep=function(){return this.m_eCurrentStep},e.prototype.GetErrorMessage=function(){return this.m_strErrorMessage},e.prototype.SetInitialErrorMessage=function(e){this.m_strErrorMessage=e},e.prototype.GetSteamGuardCodeError=function(){return this.m_eSteamGuardCodeError},e.prototype.GetCaptchaURL=function(){return this.m_strCaptchaURL},e.prototype.DoLogin=function(){return Object(d.b)(this,void 0,void 0,function(){var t,n=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.m_bRequestInFlight?[2]:(Object(l.A)(function(){n.m_bRequestInFlight=!0,n.m_strErrorMessage=""}),[4,U(this.m_strBaseURL,this.m_strOAuthClientID,this.m_userFields)]);case 1:return t=e.sent(),Object(l.A)(function(){n.m_bRequestInFlight=!1,n.UpdateLoginResult(t)}),[2]}})})},e.prototype.UpdateLoginResult=function(e){if(!e)return console.log("Login timeout"),void(this.m_strErrorMessage=Object(T.c)("#ConnectionTrouble_FailedToConnect"));if(e.login_complete){if(this.m_eCurrentStep=H.Complete,this.m_fnLoginComplete){var t={steamID:e.oauth?e.oauth.steamid:"",strAccountName:e.oauth?e.oauth.account_name:"",strOAuthToken:e.oauth?e.oauth.oauth_token:""};this.m_fnLoginComplete(t)}}else this.m_strErrorMessage=e.message||"",this.m_eSteamGuardCodeError=z.None,e.requires_twofactor?(this.UpdateCaptchaURL("-1"),this.m_eCurrentStep!=H.TwoFactorCode||this.m_strErrorMessage||(this.m_strErrorMessage=Object(T.c)("#MobileLogin_IncorrectSteamGuard"),this.m_eSteamGuardCodeError=z.InvalidCode,this.m_userFields.strTwoFactorCode=""),this.m_eCurrentStep=H.TwoFactorCode):e.captcha_needed&&e.captcha_gid?(this.m_eCurrentStep=H.AccountName,this.UpdateCaptchaURL(e.captcha_gid)):e.emailauth_needed?(e.emaildomain&&(this.m_strEmailDomain=e.emaildomain),e.emailsteamid&&(this.m_userFields.emailSteamID=e.emailsteamid),this.m_eCurrentStep!=H.EmailCode||this.m_strErrorMessage||(this.m_strErrorMessage=Object(T.c)("#MobileLogin_IncorrectSteamGuard"),this.m_eSteamGuardCodeError=z.InvalidCode,this.m_userFields.strEmailAuthCode=""),this.m_eCurrentStep=H.EmailCode):console.log("Unhandled login error")},e.prototype.RefreshCaptcha=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,function(r){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(d.e)(this,function(e){switch(e.label){case 0:t=V(),n=x(r,"refreshcaptcha"),o="",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b.a.post(n,t)];case 2:return 200!=(i=e.sent()).status?[2,!1]:(o=i.data.gid,[3,4]);case 3:return e.sent(),[2,!1];case 4:return[2,o]}})})}(this.m_strBaseURL)];case 1:return(t=e.sent())?this.UpdateCaptchaURL(t):console.log("Failed to get captcha"),[2]}})})},e.prototype.UpdateCaptchaURL=function(e){var t,n;(this.m_userFields.gidCaptcha=e,this.m_userFields.strCaptchaText="","-1"!=e)?this.m_strCaptchaURL=(t=this.m_strBaseURL,n=e,x(t,"rendercaptcha")+"?gid="+n):this.m_strCaptchaURL=""},Object(d.c)([l.x],e.prototype,"m_bRequestInFlight",void 0),Object(d.c)([l.x],e.prototype,"m_userFields",void 0),Object(d.c)([l.x],e.prototype,"m_eCurrentStep",void 0),Object(d.c)([l.x],e.prototype,"m_strErrorMessage",void 0),Object(d.c)([l.x],e.prototype,"m_strEmailDomain",void 0),Object(d.c)([l.x],e.prototype,"m_strCaptchaURL",void 0),Object(d.c)([l.x],e.prototype,"m_eSteamGuardCodeError",void 0),Object(d.c)([i.a],e.prototype,"DoLogin",null),Object(d.c)([l.g.bound],e.prototype,"UpdateCaptchaURL",null),e}(),Y=n("GxRc"),J=function(n){function e(e){var t=n.call(this,e)||this;return t.m_manager=new K(t.props.baseURL),t.props.onLoginComplete&&t.m_manager.SetLoginCompleteCallback(t.props.onLoginComplete),t}return Object(d.d)(e,n),e.prototype.componentWillUnmount=function(){this.m_manager.Shutdown()},e.prototype.render=function(){var e=this.props,t=(e.baseURL,e.className),n=Object(d.f)(e,["baseURL","className"]),o=Object(P.a)(B.a.LoginDialog,t),i=this.m_manager.GetCurrentStep(),r=this.m_manager.GetErrorMessage();return a.a.createElement("div",Object(d.a)({className:o},n),a.a.createElement("div",{className:B.a.LoginPanelBackground},a.a.createElement(E.bb,null)),a.a.createElement("div",{className:B.a.LoginPanelContent},r&&a.a.createElement(Q,{text:r}),i==H.AccountName&&a.a.createElement(Z,{manager:this.m_manager}),i==H.TwoFactorCode&&a.a.createElement($,{manager:this.m_manager,authtype:H.TwoFactorCode}),i==H.EmailCode&&a.a.createElement($,{manager:this.m_manager,authtype:H.EmailCode}),i==H.Complete&&a.a.createElement("div",{className:B.a.LoginComplete},a.a.createElement(Y.a,null))))},e=Object(d.c)([o.a],e)}(a.a.Component);function Q(e){return a.a.createElement("div",{className:B.a.ErrorMessage},e.text)}var Z=function(n){function e(e){var t=n.call(this,e)||this;return t.state={nNameSize:0,nPassSize:0},t}return Object(d.d)(e,n),e.prototype.OnSubmit=function(e){e.preventDefault(),this.props.manager.DoLogin()},e.prototype.OnChangeName=function(e){var t=e.target.value||"";this.props.manager.SetUserName(e.target.value),24<t.length&&t.length<39?this.setState({nNameSize:1}):38<t.length?this.setState({nNameSize:2}):this.setState({nNameSize:0})},e.prototype.OnChangePassword=function(e){var t=e.target.value||"";t=t.replace(/[^\x00-\x7F]/g,""),this.props.manager.SetPassword(t),19<t.length&&t.length<39?this.setState({nPassSize:1}):38<t.length?this.setState({nPassSize:2}):this.setState({nPassSize:0})},e.prototype.OnChangeRememberPass=function(e){this.props.manager.SetRememberPassword(e.target.checked)},e.prototype.render=function(){var e,t,n=this,o=this.props.manager;return t=1==this.state.nPassSize?B.a.MedPass:2==this.state.nPassSize?B.a.LargePass:B.a.DefaultPass,e=1==this.state.nNameSize?B.a.MedName:2==this.state.nNameSize?B.a.LargeName:B.a.DefaultNAme,a.a.createElement("div",{className:B.a.AccountPasswordPanel},a.a.createElement("div",{className:B.a.SigninTitle},Object(T.c)("#Login_SignIn")),a.a.createElement("form",{className:B.a.AccountPasswordForm,onSubmit:this.OnSubmit},a.a.createElement(k.o,{className:Object(P.a)(B.a.AccountNameLabel,e),label:Object(T.c)("#Login_AccountName"),type:"text",value:o.GetUserName(),focusOnMount:!0,maxLength:64,onChange:this.OnChangeName}),a.a.createElement(k.o,{bIsPassword:!0,className:Object(P.a)(B.a.PasswordDots,t),label:Object(T.c)("#Login_Password"),type:"password",autoComplete:"off",maxLength:64,value:o.GetPassword(),onChange:this.OnChangePassword}),a.a.createElement(k.e,{classname:B.a.RememberMeCheck,label:Object(T.c)("#Login_RememberMe"),disabled:!1,onChange:function(){return n.OnChangeRememberPass},checked:o.GetRememberPassword()}),o.GetCaptchaURL()&&a.a.createElement(X,{manager:o}),a.a.createElement(k.x,{disabled:this.props.manager.IsRequestInFlight()},Object(T.c)("#Login_SignIn").toLocaleUpperCase())),a.a.createElement("a",{className:B.a.NeedHelpLink,href:"http://help.steampowered.com/"},Object(T.c)("#Login_ForgotPassword")),a.a.createElement("div",{className:B.a.LoginCreateSeperator}),a.a.createElement("div",{className:B.a.SteamUpsellContainer},a.a.createElement("div",{className:B.a.SteamUpsell},Object(T.c)("#Login_NoSteamAccount")),a.a.createElement("div",{className:B.a.CreateAccountLink},a.a.createElement("a",{href:"https://store.steampowered.com/join/"},Object(T.c)("#Login_CreateAccount")))))},Object(d.c)([i.a],e.prototype,"OnSubmit",null),Object(d.c)([i.a],e.prototype,"OnChangeName",null),Object(d.c)([i.a],e.prototype,"OnChangePassword",null),Object(d.c)([i.a],e.prototype,"OnChangeRememberPass",null),e=Object(d.c)([o.a],e)}(a.a.Component),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnCaptchaText=function(e){this.props.manager.SetCaptchaText(e.target.value)},t.prototype.RefreshCaptcha=function(e){this.props.manager.RefreshCaptcha()},t.prototype.render=function(){var e=this.props.manager;return a.a.createElement("div",{className:B.a.CaptchaContainer},a.a.createElement("div",{className:B.a.CaptchaBlock},a.a.createElement("div",{className:B.a.CaptchaImageAndInput},a.a.createElement("div",{className:B.a.CaptchaImageBox},a.a.createElement("img",{className:B.a.CaptchaImage,src:e.GetCaptchaURL()})),a.a.createElement(k.o,{className:B.a.CaptchaInput,type:"text",autoComplete:"off",maxLength:6,value:e.GetCaptchaText(),onChange:this.OnCaptchaText})),a.a.createElement("div",{className:B.a.ErrorMessage},Object(T.c)("#Login_CaptchaVerification"))),a.a.createElement("div",null,a.a.createElement("span",{className:B.a.RefreshCaptchaText,onClick:this.RefreshCaptcha},Object(T.c)("#Login_RefreshCaptcha"))))},Object(d.c)([i.a],t.prototype,"OnCaptchaText",null),Object(d.c)([i.a],t.prototype,"RefreshCaptcha",null),t=Object(d.c)([o.a],t)}(a.a.Component),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnSubmit=function(e){e.preventDefault(),this.props.manager.DoLogin()},t.prototype.OnChangeAuthCode=function(e){this.props.authtype==H.TwoFactorCode?this.props.manager.SetTwoFactorCode(e.target.value):this.props.manager.SetEmailAuthCode(e.target.value)},t.prototype.render=function(){var e,t=this.props.manager,n="",o=null,i="",r=t.GetSteamGuardCodeError()==z.InvalidCode;switch(this.props.authtype){case H.TwoFactorCode:n=t.GetTwoFactorCode(),o=Object(T.c)("#Login_Enter2FA"),e=a.a.createElement(E.C,null),i=Object(T.c)("#Login_Enter2FAHelp");break;case H.EmailCode:n=t.GetEmailAuthCode(),o=Object(T.e)("#Login_SentSteamguard",a.a.createElement("span",{className:B.a.Highlight},"@",t.GetEmailDomain())),i=Object(T.c)("#Login_EnterSteamguard"),e=a.a.createElement(E.q,null)}return a.a.createElement("div",{className:B.a.AuthenticationPanel},a.a.createElement(k.p,null,Object(T.c)("#Login_SigningIn")),a.a.createElement("div",{className:B.a.SigningInAccountName},t.GetUserName()),a.a.createElement(k.c,null,o),a.a.createElement("div",{className:B.a.AuthenticatorInputcontainer},e,a.a.createElement("form",{className:B.a.AccountPasswordForm,onSubmit:this.OnSubmit},a.a.createElement(k.o,{className:Object(P.a)(B.a.AccountName),label:"Steam Guard Code",type:"text",autoComplete:"off",focusOnMount:!0,maxLength:64,value:n,onChange:this.OnChangeAuthCode}),a.a.createElement(k.x,{disabled:this.props.manager.IsRequestInFlight()},Object(T.c)("#Login_SteamguardSubmit").toLocaleUpperCase()))),a.a.createElement("a",{className:Object(P.a)(B.a.NeedHelpLink,r?B.a.NeedHelpHighlight:null),href:"http://help.steampowered.com/"},i))},Object(d.c)([i.a],t.prototype,"OnSubmit",null),Object(d.c)([i.a],t.prototype,"OnChangeAuthCode",null),t=Object(d.c)([o.a],t)}(a.a.Component),ee=n("Hi0u"),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnLoginComplete=function(e){window.location.href=this.props.redirectURL&&this.props.redirectURL!==p.b.COMMUNITY_BASE_URL+"login"?this.props.redirectURL:p.b.COMMUNITY_BASE_URL},t.prototype.render=function(){return p.g&&p.g.logged_in?(this.OnLoginComplete(),null):a.a.createElement("div",null,a.a.createElement(J,{baseURL:p.b.COMMUNITY_BASE_URL,onLoginComplete:this.OnLoginComplete}))},Object(d.c)([i.a],t.prototype,"OnLoginComplete",null),t}(a.a.Component),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){return a.a.createElement(ee.a,{onEscKeypress:this.props.closeModal,bDisableBackgroundDismiss:!0},a.a.createElement(te,{redirectURL:this.props.redirectURL}))},t}(a.a.Component);var oe=n("9Cmb"),ie=n("FNBO"),re=n.n(ie),ae=n("kQil"),se=n("ABqK"),ce=n.n(se),le=n("vZ27"),pe=n.n(le),ue=n("S+nL"),me=n.n(ue),de=n("79VW"),he=n.n(de),fe=n("iIMO"),_e=n.n(fe),ge=n("q8zB"),be=n.n(ge),ve=n("0N1H"),Se=n("B7ut"),ye=function(n){function e(e){var t=n.call(this,e)||this;return t.state={appInfo:new C(e.appid)},t}return Object(d.d)(e,n),e.prototype.componentDidMount=function(){O.EnsureStoreCapsuleInfoLoaded(this.props.appid)},e.prototype.render=function(){var t=O.GetStoreCapsuleInfo(this.props.appid).GetAppStoreData(),e=this.props.bColumn,n=this.props.bMiniColumn,o=ce.a.StoreSaleWidgetContainer,i=ce.a.StoreSaleWidgetImage,r=ce.a.StoreSaleImage,a=ce.a.StoreSaleWidgetShortDesc;return n?(o=ce.a.StoreSaleWidgetContainer_mini,i=ce.a.StoreSaleWidgetImage_mini,r=ce.a.StoreSaleImage_mini,a=ce.a.StoreSaleWidgetShortDesc_mini):e&&(o=ce.a.StoreSaleWidgetContainer_column,i=ce.a.StoreSaleWidgetImage_column,r=ce.a.StoreSaleImage_column,a=ce.a.StoreSaleWidgetShortDesc_column),t&&t.title?I.createElement("div",{className:o},I.createElement("div",{className:ce.a.Actions},I.createElement("div",{className:i,onClick:function(e){return Object(G.g)(e,t.capsule_link)}},I.createElement("img",{className:r,src:t.capsule}))),I.createElement("div",{className:ce.a.StoreSaleWidgetRight},I.createElement("div",{className:ce.a.Actions},I.createElement("div",{className:ce.a.StoreSaleWidgetTitle,onClick:function(e){return Object(G.g)(e,t.capsule_link)}},t.title)),I.createElement("div",{className:ce.a.StoreSaleWidgetRelease},t.release),!this.props.bHideDescription&&I.createElement("div",{className:a},Object(oe.f)(Object(oe.c)(t.short_desc))),I.createElement(Ce,{appid:t.appid,price:t.price,discount_percent:t.discount_percent,subid:t.subid,is_free:t.is_free,button_action:t.button_action,cart_url:this.props.cart_url||t.cart_url,add_to_cart_url:t.add_to_cart_url,capsule_link:t.capsule_link}),Boolean(this.props.extraLink)&&I.createElement("a",{className:ce.a.StoreSaleWidgetExtraLink,href:Object(Se.c)((p.b.IN_CLIENT?"steam://openurl/":"")+this.props.extraLink.url),target:p.b.IN_CLIENT?void 0:"_blank"},this.props.extraLink.name))):I.createElement("div",{className:ce.a.StoreSaleWidgetEmptyContainer})},e=Object(d.c)([o.a],e)}(I.Component),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.price,n=e.is_free,o=(e.button_action,e.discount_percent),i=e.subid;return I.createElement("div",{style:{display:"flex",flexWrap:"wrap"},className:ce.a.StoreActionWidgetContainer},I.createElement("div",{className:ce.a.StoreSalePriceActionWidgetContainer},o?I.createElement("div",{className:ce.a.StoreSaleDiscountBox},"-"+o+"%"):null,!n&&t?I.createElement("div",{className:ce.a.StoreSalePriceBox},t):null,n&&"0"==t?I.createElement("div",{className:ce.a.StoreSalePriceBox},Object(T.c)("#Broadcast_Store_FreeToPlay")):null),Boolean(i)&&I.createElement(Ee,{appid:this.props.appid}),I.createElement(Ie,{appid:this.props.appid}))},t=Object(d.c)([o.a],t)}(I.Component),Oe=(I.Component,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={bShowContents:!1,containerStyle:{maxHeight:"0vh",overflow:"hidden",transition:"max-height 1s ease-in-out"}},e}return Object(d.d)(e,t),e.prototype.ShowContents=function(){var e=this;this.setState({bShowContents:!0}),window.setTimeout(function(){return e.setState({containerStyle:Object(d.a)(Object(d.a)({},e.state.containerStyle),{maxHeight:"100vh"})})},100)},e.prototype.componentDidMount=function(){v.LoadPackageInfo([this.props.packageid])},e.prototype.render=function(){var t=this,e=v.GetPackageInfo(this.props.packageid);if(!e)return null;var n=ce.a.StoreSaleWidgetContainer+" "+ce.a.Bundle,o=ce.a.StoreSaleWidgetImage,i=ce.a.StoreSaleImage;ce.a.StoreSaleWidgetShortDesc;return I.createElement(I.Fragment,null,I.createElement("div",{className:n},I.createElement("div",{className:ce.a.Actions},I.createElement("div",{className:o,onClick:function(e){return Object(G.g)(e,p.b.STORE_BASE_URL+"sub/"+t.props.packageid)}},I.createElement("img",{className:i,src:e.header_image_url}))),I.createElement("div",{className:ce.a.StoreSaleWidgetRight},I.createElement("div",{className:ce.a.Actions},I.createElement("div",{className:ce.a.StoreSaleWidgetTitle,onClick:function(e){return Object(G.g)(e,p.b.STORE_BASE_URL+"sub/"+t.props.packageid)}},e.name)),I.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},I.createElement("div",{className:ce.a.StoreSalePriceActionWidgetContainer},e.discount_percent?I.createElement("div",{className:ce.a.StoreSaleDiscountBox},"-"+e.discount_percent+"%"):null,e.formatted_final_price?I.createElement("div",{className:ce.a.StoreSalePriceBox},e.formatted_final_price):null),I.createElement("div",{style:{width:"150px"}},I.createElement(Ee,{packageid:this.props.packageid}))))),!this.state.bShowContents&&I.createElement("div",{onClick:this.ShowContents,style:{display:"flex",justifyContent:"center"}},I.createElement("button",{className:ce.a.ShowContentsButton},Object(T.c)("#Sale_ShowContents"))),I.createElement("div",{style:this.state.containerStyle},e.appids.map(function(e){return I.createElement("div",{key:e,className:ce.a.BundleContent},I.createElement(ye,{appid:e,bHideDescription:!0}))})))},Object(d.c)([i.a],e.prototype,"ShowContents",null),e=Object(d.c)([o.a],e)}(I.Component)),Ie=(I.Component,I.Component,I.Component,I.Component,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={bUpdatingWishList:!1,bLoadingUserData:!j.BIsLoaded()},e}return Object(d.d)(e,t),e.prototype.componentDidMount=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return O.EnsureStoreCapsuleInfoLoaded(this.props.appid),[4,j.HintLoad()];case 1:return e.sent(),this.setState({bLoadingUserData:!1}),[2]}})})},e.prototype.DisplayWishlistUpdateErrors=function(e){Object(ee.c)(I.createElement(ae.b,{strTitle:Object(T.c)("#Wishlist_Error"),strDescription:Object(T.c)("#Wishlist_Error_Desc")},I.createElement("br",null),I.createElement("br",null),e),window)},e.prototype.OnWishListClick=function(){return Object(d.b)(this,void 0,void 0,function(){var t,n,o,i,r=this;return Object(d.e)(this,function(e){switch(e.label){case 0:if(!p.g.logged_in)return Object(ee.b)(a.a.createElement(ne,{ownerWin:window,redirectURL:window.location.href}),window,"LoginModal",{strTitle:Object(T.c)("#Login_SignIn")}),[2];if(this.state.bUpdatingWishList)return[3,4];this.setState({bUpdatingWishList:!0}),t=this.props.appid,n=!j.BIsGameWishlisted(t),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,j.UpdateGameWishlist(t,n)];case 2:return o=e.sent(),this.setState({bUpdatingWishList:!1},function(){1!=o.success&&r.DisplayWishlistUpdateErrors(Object(y.a)(o).strErrorMsg)}),[3,4];case 3:return i=e.sent(),this.setState({bUpdatingWishList:!1}),this.DisplayWishlistUpdateErrors(Object(y.a)(i).strErrorMsg),[3,4];case 4:return[2]}})})},e.prototype.render=function(){var e=O.GetStoreCapsuleInfo(this.props.appid).GetAppStoreData();if(j.BOwnsApp(this.props.appid)||!e.coming_soon&&e.is_free)return null;var t=j.BIsGameWishlisted(this.props.appid);return I.createElement("div",{className:Object(P.a)(ce.a.WishList,A.a.FlexRowContainer),onClick:this.OnWishListClick,"data-tooltip-text":Object(T.c)("#AddToWishlist_ttip")},I.createElement("span",null,(this.state.bLoadingUserData||this.state.bUpdatingWishList)&&I.createElement(Y.a,{size:"small"})),!this.state.bUpdatingWishList&&t&&I.createElement("img",{className:A.a.IconImage,src:re.a}),I.createElement("span",null,Object(T.c)(this.state.bUpdatingWishList?"#Updating":this.state.bLoadingUserData?"#Loading":t?"#Wishlisted":"#AddToWishlist")))},Object(d.c)([i.a],e.prototype,"OnWishListClick",null),e=Object(d.c)([o.a],e)}(I.Component)),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.componentDidMount=function(){j.HintLoad(),O.EnsureStoreCapsuleInfoLoaded(this.props.appid)},t.prototype.BOwnsApp=function(){return j.BOwnsApp(this.props.appid)},t.prototype.BIsFreeApp=function(){var e=O.GetStoreCapsuleInfo(this.props.appid).GetAppStoreData();return e.is_free&&"0"==e.price},t.prototype.OnAddToCart=function(e){if(this.props.packageid)j.AddToCart(e,this.props.packageid,p.b.STORE_BASE_URL+"cart/addtocart",p.b.STORE_BASE_URL+"cart");else if(this.props.bundleid)j.AddToCart(e,null,p.b.STORE_BASE_URL+"cart/addtocart",p.b.STORE_BASE_URL+"cart",this.props.bundleid);else{var t=O.GetStoreCapsuleInfo(this.props.appid).GetAppStoreData();this.BOwnsApp()||this.BIsFreeApp()?Object(G.g)(window,"steam://run/"+t.app_to_run):j.AddToCart(e,t.subid,t.add_to_cart_url,t.cart_url)}},t.prototype.render=function(){var e="";if(this.props.bundleid||this.props.packageid)e=Object(T.c)("#Store_AddToCart");else{var t=O.GetStoreCapsuleInfo(this.props.appid),n=t.GetAppStoreData();if(t.GetAppStoreData().coming_soon)return null;e=this.BOwnsApp()?Object(T.c)("#EventDisplay_CallToAction_PlayNow"):n.button_action}return I.createElement("div",{className:ce.a.Action,onClick:this.OnAddToCart},e)},Object(d.c)([i.a],t.prototype,"OnAddToCart",null),t=Object(d.c)([o.a],t)}(I.Component),we=function(e){var t=e.item;return I.createElement("span",{className:ce.a.CapsuleTitle},t.available_windows&&I.createElement("img",{src:he.a}),t.available_mac&&I.createElement("img",{src:_e.a}),t.available_linux&&I.createElement("img",{src:be.a}))},Me=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_schUpdate=new r.b,e.m_bSetupComplete=!1,e}return Object(d.d)(e,t),e.prototype.componentDidMount=function(){0==this.props.updateRate&&this.updateCanvas()},e.prototype.componentWillUnmount=function(){this.m_schUpdate.Cancel()},e.prototype.componentDidUpdate=function(){this.updateCanvas()},e.prototype.BindCanvasRef=function(e){this.m_elCanvas=e},e.prototype.updateCanvas=function(){var e=this;if(null!=this.props.elementRef&&null!=this.m_elCanvas&&!this.m_bSetupComplete){var t=this.props.scaleFactor||[1,1],n=this.props.elementRef,o=this.props.updateRate;this.m_Context=this.m_elCanvas.getContext("2d");var i=Math.floor(this.m_elCanvas.clientWidth/this.props.reductionFactor),r=Math.floor(this.m_elCanvas.clientHeight/this.props.reductionFactor);this.m_elCanvas.width=i,this.m_elCanvas.height=r,0<this.props.blurAmount&&(this.m_Context.filter="blur("+this.props.blurAmount+"px)");var a=function(){e.m_Context.drawImage(n,0,0,i*t[0],r*t[1]),0<o&&e.m_schUpdate.Schedule(o,a)};a(),this.m_bSetupComplete=!0}},e.prototype.render=function(){return I.createElement("canvas",{id:this.props.id,className:this.props.className,ref:this.BindCanvasRef,width:this.props.width,height:this.props.height})},Object(d.c)([i.a],e.prototype,"BindCanvasRef",null),Object(d.c)([i.a],e.prototype,"updateCanvas",null),e}(I.Component);function De(){return I.createElement("div",{className:"STV_ReplayBanner"},Object(T.c)("#DASHPlayerControls_IsReplay"))}var Te,Ge,Re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){var e=this.props.video,t=M.b.Loading,n="";if(e){t=e.GetBroadcastState(),n=e.GetBroadcastStateDescription();var o=e.IsBuffering();t==M.b.Ready&&o&&(t=M.b.Loading,n="")}if(e&&t!=M.b.Error&&e.GetUserInputNeeded())return null;if(t==M.b.Ready)return null;var i=t==M.b.Loading;return I.createElement("div",{className:"BroadcastVideoWatchState",style:{filter:"hue-rotate(40deg)"}},i&&I.createElement(Y.a,null),!i&&I.createElement("div",{className:"BroadcastVideoWatchState_Text"},n))},t=Object(d.c)([o.a],t)}(I.Component),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnClick=function(){M.a.UserInputClickVideo(this.props.video)},t.prototype.render=function(){return I.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},I.createElement(E.O,null),I.createElement("span",null,Object(T.c)("#DASHPlayerControls_ClickToPlay")))},Object(d.c)([i.a],t.prototype,"OnClick",null),t}(I.Component),Le=n("KbL7"),Ae=n.n(Le);(Ge=Te||(Te={})).topleft="topleft",Ge.top="top",Ge.topright="topright",Ge.left="left",Ge.middle="middle",Ge.right="right",Ge.bottomleft="bottomleft",Ge.bottom="bottom",Ge.bottomright="bottomright";var ke=function(n){function e(e){var t=n.call(this,e)||this;return t.m_fnMouseUp=null,t.m_fnMouseMove=null,t.m_listeners=new r.c,t.m_strDescription="",t.state={curLeftPosPct:t.props.xPosPct,curTopPosPct:t.props.yPosPct,curRightPosPct:100-(t.props.widthPct+t.props.xPosPct),curBottomPosPct:100-(t.props.yPosPct+t.props.heightPct),curWidthPct:t.props.widthPct,curHeightPct:t.props.heightPct,EdgeDown:null,text_link_url:t.props.link_url,text_link_description:t.props.link_description,bEditingLink:!1,valid_link:t.validateUrl(t.props.link_url)},t.m_strDescription=t.props.link_description,t}return Object(d.d)(e,n),e.prototype.componentWillUnmount=function(){this.m_listeners.Unregister()},e.prototype.LinkRegionBoxRef=function(e){this.m_elLinkRegionBox=e},e.prototype.OnMouseDown=function(e,t){var n=this;this.m_fnMouseUp=function(e){n.OnMouseUp(e,t)},this.m_fnMouseMove=function(e){n.OnMouseMove(e,t)},this.setState({EdgeDown:t}),this.m_rectLinkRegion=this.m_elLinkRegionBox.parentElement.getBoundingClientRect(),this.m_nLocalOffsetXPct=(e.clientX-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.state.curLeftPosPct,this.m_nLocalOffsetYPct=(e.clientY-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.state.curTopPosPct,this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mousemove",this.m_fnMouseMove),this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mouseup",this.m_fnMouseUp),e.preventDefault(),e.stopPropagation()},e.prototype.OnMouseMove=function(e,t){if(void 0!==this.state.EdgeDown){switch(e.shiftKey&&this.m_fnMouseUp(),t){case Te.left:var n={curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.state.curBottomPosPct};if(this.props.bLockAspectRatio){var o=(r=100-this.state.curRightPosPct-n.curLeftPosPct)/this.state.curWidthPct,i=this.state.curHeightPct*o;n.curBottomPosPct=100-(this.state.curTopPosPct+i)}0<n.curLeftPosPct&&0<n.curBottomPosPct&&this.setState(n);break;case Te.right:n={curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.state.curBottomPosPct};if(this.props.bLockAspectRatio){o=(r=100-n.curRightPosPct-this.state.curLeftPosPct)/this.state.curWidthPct,i=this.state.curHeightPct*o;n.curBottomPosPct=100-(this.state.curTopPosPct+i)}0<n.curRightPosPct&&0<n.curBottomPosPct&&this.setState(n);break;case Te.top:n={curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.state.curRightPosPct};if(this.props.bLockAspectRatio){o=(i=100-this.state.curBottomPosPct-n.curTopPosPct)/this.state.curHeightPct;var r=this.state.curWidthPct*o;n.curRightPosPct=100-(this.state.curLeftPosPct+r)}0<n.curTopPosPct&&0<n.curRightPosPct&&this.setState(n);break;case Te.bottom:n={curBottomPosPct:this.CalcBottomEdge(e.clientY),curRightPosPct:this.state.curRightPosPct};if(this.props.bLockAspectRatio){o=(i=100-n.curBottomPosPct-this.state.curTopPosPct)/this.state.curHeightPct,r=this.state.curWidthPct*o;n.curRightPosPct=100-(this.state.curLeftPosPct+r)}0<n.curBottomPosPct&&0<n.curRightPosPct&&this.setState(n);break;case Te.topleft:n={curTopPosPct:this.CalcBottomEdge(e.clientY),curLeftPosPct:this.CalcLeftEdge(e.clientX)};if(this.props.bLockAspectRatio){o=(r=100-this.state.curRightPosPct-n.curLeftPosPct)/this.state.curWidthPct,i=this.state.curHeightPct*o;n.curTopPosPct=100-this.state.curBottomPosPct-i}0<n.curTopPosPct&&0<n.curLeftPosPct&&this.setState(n);break;case Te.topright:n={curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.CalcRightEdge(e.clientX)};if(this.props.bLockAspectRatio){o=(r=100-n.curRightPosPct-this.state.curLeftPosPct)/this.state.curWidthPct,i=this.state.curHeightPct*o;n.curTopPosPct=100-this.state.curBottomPosPct-i}0<n.curTopPosPct&&0<n.curRightPosPct&&this.setState(n);break;case Te.bottomleft:n={curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)};if(this.props.bLockAspectRatio){o=(r=100-this.state.curRightPosPct-n.curLeftPosPct)/this.state.curWidthPct,i=this.state.curHeightPct*o;n.curBottomPosPct=100-(this.state.curTopPosPct+i)}0<n.curLeftPosPct&&0<n.curBottomPosPct&&this.setState(n);break;case Te.bottomright:n={curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)};if(this.props.bLockAspectRatio){o=(r=100-n.curRightPosPct-this.state.curLeftPosPct)/this.state.curWidthPct,i=this.state.curHeightPct*o;n.curBottomPosPct=100-(this.state.curTopPosPct+i)}0<n.curRightPosPct&&0<n.curBottomPosPct&&this.setState(n);break;case Te.middle:var a=Object(w.a)(this.CalcLeftEdge(e.clientX),0,100-this.state.curWidthPct),s=100-(a+this.state.curWidthPct),c=Object(w.a)(this.CalcTopEdge(e.clientY),0,100-this.state.curHeightPct);n={curLeftPosPct:a,curRightPosPct:s,curTopPosPct:c,curBottomPosPct:100-(c+this.state.curHeightPct)};this.setState(n)}e.preventDefault(),e.stopPropagation()}},e.prototype.CalcLeftEdge=function(e){return(e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.m_nLocalOffsetXPct},e.prototype.CalcRightEdge=function(e){return 100-((e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100+(this.state.curWidthPct-this.m_nLocalOffsetXPct))},e.prototype.CalcTopEdge=function(e){return(e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.m_nLocalOffsetYPct},e.prototype.CalcBottomEdge=function(e){return 100-((e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100+(this.state.curHeightPct-this.m_nLocalOffsetYPct))},e.prototype.OnMouseUp=function(e,t){this.setState({curWidthPct:100-this.state.curRightPosPct-this.state.curLeftPosPct}),this.setState({curHeightPct:100-this.state.curBottomPosPct-this.state.curTopPosPct}),this.setState({EdgeDown:void 0}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description}),this.m_listeners.Unregister()},e.prototype.HandleDelete=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){return this.props.deleteFn&&this.props.deleteFn(this.props.index),[2]})})},e.prototype.OnSetLinkURLChange=function(e){this.setState({text_link_url:e.target.value,valid_link:this.validateUrl(e.target.value)})},e.prototype.OnSetLinkDescriptionChange=function(e){this.setState({text_link_description:e.target.value})},e.prototype.validateUrl=function(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},e.prototype.OnSaveLink=function(){this.m_strDescription=this.state.text_link_description,this.setState({bEditingLink:!this.state.bEditingLink}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description})},e.prototype.OnEditLink=function(){this.setState({bEditingLink:!this.state.bEditingLink})},e.prototype.render=function(){var t=this,e={left:this.state.curLeftPosPct+"%",top:this.state.curTopPosPct+"%",right:this.state.curRightPosPct+"%",bottom:this.state.curBottomPosPct+"%"},n=Ae.a.LinkRegionDragBox;return null!==this.state.EdgeDown&&(n+=" "+Ae.a.EdgeDown+" "+Ae.a[this.state.EdgeDown]),I.createElement("div",{className:n,style:e,ref:this.LinkRegionBoxRef,draggable:!1},I.createElement("div",{className:Ae.a.LinkRegionGridBox},I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.TopLeft,onMouseDown:function(e){t.OnMouseDown(e,Te.topleft)},draggable:!1}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.Top,onMouseDown:function(e){t.OnMouseDown(e,Te.top)}}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.TopRight,onMouseDown:function(e){t.OnMouseDown(e,Te.topright)},draggable:!1}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.Left,onMouseDown:function(e){t.OnMouseDown(e,Te.left)},draggable:!1}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.Middle,onMouseDown:function(e){t.OnMouseDown(e,Te.middle)},draggable:!1},this.props.deleteFn&&I.createElement("div",{className:Ae.a.LinkRegionDelete,onClick:this.HandleDelete},I.createElement(E.pb,null)),!this.props.bDisableLink&&I.createElement("div",{className:Ae.a.LinkRegionSettings,onClick:this.OnEditLink},I.createElement(E.L,null)),I.createElement("div",{className:Ae.a.LinkText}," ",this.m_strDescription," ")),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.Right,onMouseDown:function(e){t.OnMouseDown(e,Te.right)},draggable:!1}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.BottomLeft,onMouseDown:function(e){t.OnMouseDown(e,Te.bottomleft)},draggable:!1}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.Bottom,onMouseDown:function(e){t.OnMouseDown(e,Te.bottom)},draggable:!1}),I.createElement("div",{className:Ae.a.LinkRegionEdge+" "+Ae.a.BottomRight,onMouseDown:function(e){t.OnMouseDown(e,Te.bottomright)},draggable:!1})),this.state.bEditingLink&&I.createElement("div",{className:Ae.a.LinkRegionInfo},I.createElement(k.o,{className:Ae.a.LinkRegionInput,type:"text",name:"link_url",value:this.state.text_link_url,label:Object(T.c)("#SteamTV_LinkURL"),placeholder:"https://www.example.com",onChange:this.OnSetLinkURLChange,mustBeURL:!0}),I.createElement(k.o,{className:Ae.a.LinkRegionInput,type:"text",name:"link_description",value:this.state.text_link_description,label:Object(T.c)("#SteamTV_LinkDescription"),placeholder:Object(T.c)("#SteamTV_LinkDescription_Placeholder"),onChange:this.OnSetLinkDescriptionChange}),I.createElement("div",{className:Ae.a.LinkRegionButtonContainer},I.createElement(k.d,{disabled:!this.state.valid_link,onClick:this.OnSaveLink}," ",Object(T.c)("#Button_OK")," "),I.createElement(k.d,{onClick:this.OnEditLink}," ",Object(T.c)("#Button_Cancel")))))},Object(d.c)([i.a],e.prototype,"LinkRegionBoxRef",null),Object(d.c)([i.a],e.prototype,"OnMouseDown",null),Object(d.c)([i.a],e.prototype,"OnMouseMove",null),Object(d.c)([i.a],e.prototype,"CalcLeftEdge",null),Object(d.c)([i.a],e.prototype,"CalcRightEdge",null),Object(d.c)([i.a],e.prototype,"CalcTopEdge",null),Object(d.c)([i.a],e.prototype,"CalcBottomEdge",null),Object(d.c)([i.a],e.prototype,"OnMouseUp",null),Object(d.c)([i.a],e.prototype,"HandleDelete",null),Object(d.c)([i.a],e.prototype,"OnSetLinkURLChange",null),Object(d.c)([i.a],e.prototype,"OnSetLinkDescriptionChange",null),Object(d.c)([i.a],e.prototype,"OnSaveLink",null),Object(d.c)([i.a],e.prototype,"OnEditLink",null),e=Object(d.c)([o.a],e)}(I.Component);n.d(t,"b",function(){return Pe}),n.d(t,"a",function(){return Qe});var Pe=function(n){function e(e){var t=n.call(this,e)||this;return t.m_schHideControls=new r.b,t.m_schUnmountControls=new r.b,t.m_elBroadcastPlayer=null,t.m_bMouseDown=!1,t.m_elMouseDown=null,t.m_listeners=new r.c,t.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1},t}return Object(d.d)(e,n),e.prototype.StopVideo=function(){var e=this.state.video;e&&(M.a.StopVideo(e),this.setState({video:null}))},e.prototype.IsMuted=function(){var e=this.state.video;return!e||e.IsMuted()},e.prototype.StopPlaybackTillUserInput=function(){var e=this.state.video;e&&e.StopPlaybackTillUserInput()},e.prototype.componentDidUpdate=function(e,t){var n=this;!t.bMountControls&&this.state.bMountControls?setTimeout(function(){n.setState(function(e){return{bControlsVisible:e.bMountControls}})},15):t.bControlsVisible&&!this.state.bControlsVisible&&this.state.video&&!this.state.video.IsPaused()&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls),this.props.steamIDBroadcast!==e.steamIDBroadcast&&this.BindVideoRef(this.m_elVideo)},e.prototype.componentWillUnmount=function(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()},e.prototype.BindBroadcastPlayerRef=function(e){this.m_listeners.Unregister(),(this.m_elBroadcastPlayer=e)&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))},e.prototype.BindVideoRef=function(e){var t=void 0;this.StopVideo(),this.props.steamIDBroadcast?e&&(t=M.a.CreateBroadcastVideo(e,this.props.steamIDBroadcast,this.props.watchLocation,this.props.bWebRTC)):this.props.broadcastClipID&&e&&(t=M.a.CreateClipVideo(e,this.props.broadcastClipID,this.props.watchLocation)),t&&(this.props.bStartMuted&&t.SetMute(!0),this.props.bStartPaused?t.StopPlaybackTillUserInput():t.Play()),this.setState({video:t}),this.m_elVideo=e},e.prototype.OnMouseDown=function(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},e.prototype.OnMouseUp=function(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls)},e.prototype.OnMouseMove=function(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)},e.prototype.OnMouseLeave=function(e){this.HideControls()},e.prototype.HideControls=function(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1})},e.prototype.UmountControls=function(){this.setState(function(e){if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}})},e.prototype.ShowStatsView=function(){var e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))},e.prototype.OnContextMenu=function(e){Object(m.a)(I.createElement(h.c,null,this.GetContextMenuItems()),e),e.preventDefault()},e.prototype.ToggleStatsView=function(e){var t=!this.state.bShowStats;this.setState({bShowStats:t});var n=this.state.video;n&&n.SetStatsViewIsVisible(t)},e.prototype.ShowStorePage=function(e){var t=this.state.video;if(t&&this.props.onOpenLinkInNewWindow){var n=t.GetBroadcastInfo();if(n){var o=p.b.STORE_BASE_URL+"app/"+n.m_strAppId;this.props.onOpenLinkInNewWindow(e,o),e.stopPropagation()}}},e.prototype.GetContextMenuItems=function(){var t=this,e=[],n=this.state.video;if(!n)return e;var o=n.GetBroadcastInfo();return e.push(I.createElement(h.b,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:function(e){t.ToggleStatsView(e)}},Object(T.c)("#Broadcast_VideoContext_ToggleStats"))),o&&"0"!=o.m_strAppId&&"7"!=o.m_strAppId&&e.push(I.createElement(h.d,{key:"visitstore",onSelected:function(e){t.ShowStorePage(e)}},Object(T.c)("#Broadcast_VideoContext_OpenStore"))),e},e.prototype.CloseStats=function(){var e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))},e.prototype.OnToggleFullscreen=function(){this.m_elBroadcastPlayer&&(Object(c.b)(this.m_elBroadcastPlayer)?Object(c.g)(this.m_elBroadcastPlayer):Object(c.o)(this.m_elBroadcastPlayer,this.m_elVideo))},e.prototype.OnFullscreenChange=function(e){if(this.m_elBroadcastPlayer){var t=Object(c.b)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}},e.prototype.BHideVideoControls=function(){var e=this.state.video;return!e||(!!e.GetUserInputNeeded()||M.a.GetBroadcastState(e)==M.b.Error)},e.prototype.render=function(){var e=this.state.video,t=e&&e.IsPaused(),n=e&&e.BHasDASHStats()&&this.state.bShowStats,o=Boolean(e&&e.IsReplay()),i=this.state.bMountControls,r=this.state.bControlsVisible||t,a=e&&e.GetUserInputNeeded(),s="videoContainer";r||(s+=" HidePlayerControls"),t&&(s+=" VideoPaused"),this.state.bFullscreen&&(s+=" fullscreenVideo"),this.props.classes&&(s+=" "+this.props.classes);var c=[];!this.state.bFullscreen&&this.props.actions&&(c=c.concat(this.props.actions)),!this.state.bFullscreen&&this.props.onTheaterMode&&c.push(I.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:Object(T.c)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),c.push(I.createElement("div",{key:"FullscreenToggle",title:Object(T.c)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));var l=i&&!this.BHideVideoControls(),p=i&&!this.state.bFullscreen;return I.createElement("div",{ref:this.BindBroadcastPlayerRef,className:s,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},o&&I.createElement(De,null),this.props.showVideoBackgroundBlur&&I.createElement(Me,{className:"videoBlur",elementRef:this.m_elVideo,updateRate:33,width:320,height:180,reductionFactor:10,blurAmount:5}),I.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:!0,autoPlay:!0,playsInline:!0,controls:!1}),this.props.linkRegions?I.createElement(Xe,{linkRegions:this.props.linkRegions,editMode:this.props.editMode,onSaveLinkRegions:this.props.onSaveLinkRegions}):null,this.props.linkElement,l&&I.createElement(Ne,{video:e,actions:c,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow,onShowStats:this.ToggleStatsView,bIncludeClipEditor:this.props.bIncludeClipEditor}),p&&I.createElement(Be,{onClick:this.props.onRequestClose}),n&&I.createElement(u,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),I.createElement(Re,{video:e}),a&&I.createElement(je,{video:e}))},Object(d.c)([i.a],e.prototype,"BindBroadcastPlayerRef",null),Object(d.c)([i.a],e.prototype,"BindVideoRef",null),Object(d.c)([i.a],e.prototype,"OnMouseDown",null),Object(d.c)([i.a],e.prototype,"OnMouseUp",null),Object(d.c)([i.a],e.prototype,"OnMouseMove",null),Object(d.c)([i.a],e.prototype,"OnMouseLeave",null),Object(d.c)([i.a],e.prototype,"HideControls",null),Object(d.c)([i.a],e.prototype,"UmountControls",null),Object(d.c)([i.a],e.prototype,"ShowStatsView",null),Object(d.c)([i.a],e.prototype,"OnContextMenu",null),Object(d.c)([i.a],e.prototype,"ToggleStatsView",null),Object(d.c)([i.a],e.prototype,"ShowStorePage",null),Object(d.c)([i.a],e.prototype,"CloseStats",null),Object(d.c)([i.a],e.prototype,"OnToggleFullscreen",null),Object(d.c)([i.a],e.prototype,"OnFullscreenChange",null),e=Object(d.c)([o.a],e)}(I.Component),Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){var e=this.props.video;if(!e)return null;var t=e.has_segments;return I.createElement("div",{className:"videoControls"},I.createElement(Qe,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0,bVerticalBroadcastChat:!0,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow}),I.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},I.createElement(Je,{video:e,bIncludeClipEditor:this.props.bIncludeClipEditor}),I.createElement("div",{className:"STV_BroadcastController"},I.createElement("div",{className:"videoControlsButtons LeftSpacer"}),I.createElement(Fe,{video:e}),I.createElement(xe,{video:e}),I.createElement(We,{video:e,actions:this.props.actions,onShowStats:this.props.onShowStats}))))},t=Object(d.c)([o.a],t)}(I.Component),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){return this.props.onClick?I.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},I.createElement(E.pb,null)):null},t}(I.PureComponent),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnJumpBackward=function(){this.props.video.JumpTime(-15)},t.prototype.OnJumpForward=function(){this.props.video.JumpTime(15)},t.prototype.render=function(){var e=this.props.video,t=e.CanSeek();return I.createElement("div",{className:"videoControlsButtons PlayControls"},I.createElement(Ue,{video:e}),t&&I.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},I.createElement(E.G,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),I.createElement("div",{className:"jumpAheadValue"},15)),I.createElement(Ve,{video:e}),t&&I.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},I.createElement(E.G,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),I.createElement("div",{className:"jumpAheadValue"},15)),t&&I.createElement(He,{video:e}))},Object(d.c)([i.a],t.prototype,"OnJumpBackward",null),Object(d.c)([i.a],t.prototype,"OnJumpForward",null),t}(I.Component),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnGoLiveClicked=function(e){this.props.video.JumpToLiveEdge()},t.prototype.render=function(){var e=this.props.video.IsOnLiveEdge();return I.createElement("div",{className:"videoControlsButtons GoLive"},I.createElement("div",{className:"videoControlButton videoControlGoLive"+(e?" isLiveEdge":""),onClick:e?null:this.OnGoLiveClicked},I.createElement(E.G,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),I.createElement("div",{className:"jumpGoLive"},e?Object(T.c)("#DASHPlayerControls_IsLive"):Object(T.c)("#DASHPlayerControls_GoLive"))))},Object(d.c)([i.a],t.prototype,"OnGoLiveClicked",null),t=Object(d.c)([o.a],t)}(I.Component),Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnTogglePlayPause=function(){this.props.video.TogglePlayPause()},t.prototype.render=function(){var e=this.props.video.IsPaused();return I.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},e?I.createElement(E.O,null):I.createElement(E.M,null))},Object(d.c)([i.a],t.prototype,"OnTogglePlayPause",null),t=Object(d.c)([o.a],t)}(I.Component),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),Object.defineProperty(t.prototype,"has_previous_marker",{get:function(){return void 0!==this.GetPreviousMarkerTime()},enumerable:!0,configurable:!0}),t.prototype.GetPreviousMarkerTime=function(){if(this.props.video.has_markers)for(var e=this.props.video.GetTimelineMarkers(),t=this.props.video.GetPlaybackTime(),n=e.length-1;0<=n;n--)if(!(e[n].nTime>=t))return e[n].nTime},t.prototype.OnJumpToPreviousMarkerClicked=function(e){var t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)},t.prototype.render=function(){var e=this.props.video.BHasMarkersOrSegments();return I.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},I.createElement(E.G,{bHidePostArrow:!0,bFlipHorizontal:!0}))},Object(d.c)([l.i],t.prototype,"has_previous_marker",null),Object(d.c)([i.a],t.prototype,"OnJumpToPreviousMarkerClicked",null),t=Object(d.c)([o.a],t)}(I.Component),He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),Object.defineProperty(t.prototype,"has_next_marker",{get:function(){return void 0!==this.GetNextMarkerTime()},enumerable:!0,configurable:!0}),t.prototype.GetNextMarkerTime=function(){if(this.props.video.has_markers)for(var e=this.props.video.GetTimelineMarkers(),t=this.props.video.GetPlaybackTime(),n=0;n<e.length;n++)if(!(e[n].nTime<=t))return e[n].nTime},t.prototype.OnJumpToNextMarkerClicked=function(e){var t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)},t.prototype.render=function(){var e=this.props.video.BHasMarkersOrSegments();return I.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},I.createElement(E.G,{bHidePostArrow:!0,bFlipHorizontal:!1}))},Object(d.c)([l.i],t.prototype,"has_next_marker",null),Object(d.c)([i.a],t.prototype,"OnJumpToNextMarkerClicked",null),t=Object(d.c)([o.a],t)}(I.Component),We=function(n){function e(e){var t=n.call(this,e)||this;return t.m_elSubtitlesButton=I.createRef(),t.m_elSubtitlesPanel=I.createRef(),t.state={bSettingsOpen:!1,bSubtitlesOpen:!1},t}return Object(d.d)(e,n),e.prototype.OnVideoControlClick=function(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)},e.prototype.OnSubtitlesClick=function(e){this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen}),this.m_SubtitlesButtonPos=[this.m_elSubtitlesButton.current.offsetLeft,this.m_elSubtitlesButton.current.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)},e.prototype.OnMouseUp=function(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),Object(c.e)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1}),Object(c.e)(this.m_elSubtitlesPanel.current,e.target)||this.setState({bSubtitlesOpen:!1})},e.prototype.bindSettingsButton=function(e){this.m_elSettingsButton=e},e.prototype.BindSettingsPanel=function(e){this.m_elSettingsPanel=e},e.prototype.OnShowStats=function(e){this.props.onShowStats(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})},e.prototype.render=function(){var e,n,o=this,t=!1,i=!1,r=this.props,a=r.video,s=r.actions,c=0,l=I.createElement("div",{key:"separator",className:"settingsMenuSeparator"});if(this.state.bSettingsOpen&&(t=!0,e=this.props.video.GetVideoRepresentations(),(n=e.map(function(e){return I.createElement(h.b,{key:e.id,onSelected:function(){o.props.video.SetVideoRepresentation(e),o.setState({bSettingsOpen:!o.state.bSettingsOpen})},bChecked:e.selected},e.displayName)})).push(l),n.push(I.createElement(h.d,{key:"statsToggle",onSelected:this.OnShowStats},Object(T.c)("#Broadcast_VideoContext_ToggleStats"),"\t")),c=0-(21*n.length+32)),this.state.bSubtitlesOpen){i=!0,(n=[]).push(I.createElement(h.b,{key:"none",onSelected:function(){o.props.video.SetSubtitles(null),o.setState({bSubtitlesOpen:!o.state.bSubtitlesOpen})},className:"NoSubtitles",bChecked:!1},Object(T.c)("#Broadcast_None")));for(var p=function(e){var t=u.props.video.ListSubtitles()[e];n.push(I.createElement(h.b,{key:t.language,onSelected:function(){o.props.video.SetSubtitles(t.language),o.setState({bSubtitlesOpen:!o.state.bSubtitlesOpen})},bChecked:"showing"===t.mode},t.label))},u=this,m=0;m<this.props.video.ListSubtitles().length;m++)p(m);c=-352}var d=this.props.video.GetSubtitles()||!1;return I.createElement("div",{className:"STV_BroadcastSettings"},this.props.video.ListSubtitles().length?I.createElement("div",{className:"videoControlButton"+(d?" ClosedCaptionsActive":""),onClick:this.OnSubtitlesClick,ref:this.m_elSubtitlesButton},I.createElement(E.i,null)):null,I.createElement("div",{className:"videoControlButton VideoSettings "+(t?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},I.createElement(E.X,null)),I.createElement(ze,{video:a}),s&&s.map(function(e){return I.createElement("div",{key:e.key,className:"videoControlButton videoControlFitWidth"},e)}),t&&I.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:c}},I.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},n)),i&&I.createElement("div",{ref:this.m_elSubtitlesPanel,className:"STV_BroadcastSettingsPanel SubtitlesMenu",style:{maxHeight:"320px",left:this.m_SubtitlesButtonPos[0],top:this.m_SubtitlesButtonPos[1],marginTop:c}},I.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},n)))},Object(d.c)([i.a],e.prototype,"OnVideoControlClick",null),Object(d.c)([i.a],e.prototype,"OnSubtitlesClick",null),Object(d.c)([i.a],e.prototype,"OnMouseUp",null),Object(d.c)([i.a],e.prototype,"bindSettingsButton",null),Object(d.c)([i.a],e.prototype,"BindSettingsPanel",null),Object(d.c)([i.a],e.prototype,"OnShowStats",null),e}(I.Component),ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.k_nHideSliderTimeout=1500,e.m_bShowSlider=!0,e.m_schHideSlider=new r.b,e.m_bChildDragging=!1,e.m_bMouseOver=!1,e}return Object(d.d)(e,t),e.prototype.componentWillUnmount=function(){this.m_schHideSlider.Cancel()},e.prototype.ToggleMute=function(){var e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)},e.prototype.OnMouseEnter=function(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()},e.prototype.OnMouseLeave=function(e){this.m_bMouseOver=!1,this.ScheduleHide()},e.prototype.OnChildDrag=function(e){this.m_bChildDragging=e,this.ScheduleHide()},e.prototype.ScheduleHide=function(){var e=this;this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,function(){return e.m_bShowSlider=!0})},e.prototype.render=function(){var e=this.props.video,t=e.IsMuted(),n=100*e.GetVolume(),o="videoControlButton";65<n?o+=" HighestVolume":45<n?o+=" HighVolume":n<46&&24<n?o+=" MedVolume":n<25&&(o+=" LowVolume");var i="BroadcastVolumeControl";return this.m_bShowSlider&&(i+=" ShowVolumeSlider"),t&&(i+=" muted"),I.createElement("div",{className:i,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},I.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},I.createElement("div",{className:o,onClick:this.ToggleMute},I.createElement(E.nb,null)),I.createElement(qe,{video:e,onDrag:this.OnChildDrag})))},Object(d.c)([l.x],e.prototype,"m_bShowSlider",void 0),Object(d.c)([i.a],e.prototype,"ToggleMute",null),Object(d.c)([i.a],e.prototype,"OnMouseEnter",null),Object(d.c)([i.a],e.prototype,"OnMouseLeave",null),Object(d.c)([i.a],e.prototype,"OnChildDrag",null),e=Object(d.c)([o.a],e)}(I.Component),qe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_elSlider=null,e.m_nVolumeStartOfDrag=0,e}return Object(d.d)(e,t),e.prototype.OnMouseDown=function(e){var t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)},e.prototype.OnMouseMove=function(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)},e.prototype.OnMouseUp=function(e){if(this.m_elSlider){this.SetVolumeWithCoord(this.m_elSlider,e.clientX);var t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}},e.prototype.SetVolumeWithCoord=function(e,t){var n=e.getBoundingClientRect(),o=w.c(t,n.left,n.right,0,1),i=w.a(o,0,1),r=this.props.video;r.SetMute(o<.01),r.SetVolume(i)},e.prototype.render=function(){var e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);var n={left:t+"%"},o={width:t+"%"};return I.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},I.createElement("div",{className:"BroadcastVolumeSlider_Track"}),I.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:o}),I.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:n}))},Object(d.c)([i.a],e.prototype,"OnMouseDown",null),Object(d.c)([i.a],e.prototype,"OnMouseMove",null),Object(d.c)([i.a],e.prototype,"OnMouseUp",null),Object(d.c)([l.g],e.prototype,"SetVolumeWithCoord",null),e=Object(d.c)([o.a],e)}(I.Component),Ke=function(e){return I.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:function(){return e.onMouseEnter(e.pos)},onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown?e.onMouseDown:void 0},I.createElement("div",{className:"timelineMarkerIcon"},I.createElement(E.V,null)))};function Ye(e){var t=e.startPos,n=e.endPos,o="",i=1;return t<0&&(i=(n-t)/10,t=0,o=" hideFront"),I.createElement("div",{className:"STV_timelineSegment"+o,style:{left:t+"%",width:n-t+"%",opacity:i},onClick:e.onClick},I.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),I.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),I.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}var Je=function(n){function e(e){var t=n.call(this,e)||this;return t.m_elSlider=I.createRef(),t.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0,hoverX:0,bStartMouseDown:!1,bEndMouseDown:!1},t}return Object(d.d)(e,n),e.prototype.OnMouseDown=function(e,t){var n=this;if(this.m_elSlider){e.persist(),this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();var o={};"start"===t?(o={bStartMouseDown:!0},e.stopPropagation()):"end"===t?(o={bEndMouseDown:!0},e.stopPropagation()):o={bGrabberMouseDown:!0},this.setState(o,function(){return n.AdjustSliderForClientX(e.clientX)}),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}},e.prototype.OnMouseMove=function(e){this.AdjustSliderForClientX(e.clientX)},e.prototype.OnMouseUp=function(e){this.state.bStartMouseDown?this.setState({bStartMouseDown:!1}):this.state.bEndMouseDown?this.setState({bEndMouseDown:!1}):(this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nGrabberMouseDownTime:0})),this.m_elSlider.current&&(this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp))},e.prototype.OnKeyDown=function(e){37==e.keyCode?(this.props.video.JumpTime(-15),e.preventDefault()):39==e.keyCode&&(this.props.video.JumpTime(15),e.preventDefault())},e.prototype.AdjustSliderForClientX=function(e){var t=this.props.video,n=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration(),i=t.GetTimeAtMousePosition(e,this.m_rectSlider,n,o);if(this.state.bStartMouseDown){var r=w.a(i,n,t.m_editorEndTime-5);t.m_editorStartTime=r}else if(this.state.bEndMouseDown){var a=w.a(i,t.m_editorStartTime+5,o);t.m_editorEndTime=a}else i!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:i})},e.prototype.OnMouseHoverMove=function(e){this.AdjustHoverForClientX(e.clientX)},e.prototype.OnMouseHoverLeave=function(e){this.setState({hoverX:0})},e.prototype.AdjustHoverForClientX=function(e){var t=this.props.video,n=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration();this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();var i=t.GetTimeAtMousePosition(e,this.m_rectSlider,n,o);i>=t.GetVideoAvailableStartTime()&&this.setState({nHoverValue:i,hoverX:e-this.m_rectSlider.left})},e.prototype.OnSegmentClick=function(e){this.props.video.Seek(e)},e.prototype.OnMarkerMouseEnter=function(e){this.setState({nHoverValue:e})},e.prototype.OnMarkerMouseLeave=function(){this.setState({nHoverValue:void 0})},e.prototype.render=function(){var i=this,r=this.props.video,e=this.state.bGrabberMouseDown,t=void 0!==this.state.nHoverValue,n=r.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,M.c.Timeline),o=r.GetPercentOffsetFromTime(r.GetPlaybackTime(),M.c.Timeline),a=r.GetPercentOffsetFromTime(r.GetVideoAvailableStartTime(),M.c.Timeline);a<.05&&(a=0);var s=w.a(n,0,100).toFixed(1)+"%",c=w.a(o,0,100).toFixed(1)+"%",l=w.a(a,0,100).toFixed(1)+"%",p={},u={},m={},d={},h={};e?(d.left=s,p.width=s,u.width=c,m.width=l,h.left=s):(d.left=c,u.width=c,m.width=l,t&&(h.left=this.state.nHoverValue+"%"));var f=Object(D.d)(r.GetPlaybackTime()),_=Object(D.d)(this.state.nHoverValue),g="STV_timelineContainer";this.state.bGrabberMouseDown&&(g+=" grabberDown"),r.IsTimelineMapActive()&&(g+=" minimapActive");var b="";100<(n=e?n:o)?b=" grabberOffScreenRight grabberOffscreen":n<0&&(b=" grabberOffScreenLeft grabberOffscreen");var v=[];r.GetTimelineMarkers().forEach(function(e,t){var n=r.GetPercentOffsetFromTime(e.nTime,M.c.Timeline);n<0||100<n||v.push(I.createElement(Ke,{key:t,pos:n,label:e.strTemplateName,onMouseEnter:i.OnMarkerMouseEnter,onMouseLeave:i.OnMarkerMouseLeave}))});var S=[];r.GetTimelineSegments().forEach(function(t,e){var n=r.GetPercentOffsetFromTime(t.nTimeStart,M.c.Timeline);if(!(100<n)){var o=r.GetPercentOffsetFromTime(t.nTimeEnd,M.c.Timeline);o<0||S.push(I.createElement(Ye,{key:e,startPos:n,endPos:o,label:t.strTemplateName,color:t.color,onClick:function(e){return i.OnSegmentClick(t.nTimeStart)}}))}});var y=r.GetPercentOffsetFromTime(r.m_editorStartTime,M.c.Timeline),C=r.GetPercentOffsetFromTime(r.m_editorEndTime,M.c.Timeline),O=this.props.bIncludeClipEditor?[I.createElement(Ke,{key:"start",pos:y,label:Object(T.c)("#DASHPlayerControls_Start"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:function(e){return i.OnMouseDown(e,"start")}}),I.createElement(Ke,{key:"end",pos:C,label:Object(T.c)("#DASHPlayerControls_End"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:function(e){return i.OnMouseDown(e,"end")}})]:[];return I.createElement("div",{className:"videoTimelineMain",tabIndex:0,onKeyDown:this.OnKeyDown},I.createElement("div",{className:g},I.createElement("div",{className:"DialogLabel"},f),I.createElement("div",{className:"STV_timelineSegmentsContainer"},S),I.createElement("div",{onMouseDown:this.OnMouseDown,onMouseMove:this.OnMouseHoverMove,onMouseLeave:this.OnMouseHoverLeave,ref:this.m_elSlider},I.createElement("div",{className:"VideoTimelineSlider"},I.createElement("div",{className:"STV_timelineValue",style:p}),I.createElement("div",{className:"STV_timelineGhostValue",style:u}),I.createElement("div",{className:"STV_timelineNoVideo",style:m}),v,O,Boolean(this.state.hoverX)&&I.createElement("div",{key:"grabbertime",className:"STV_timelineGrabberValue",style:{position:"absolute",left:this.state.hoverX,bottom:"30px"}},_),I.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:d},I.createElement("div",{className:"STV_timelineGrabber"+b},I.createElement("div",{className:"STV_timelineGrabberArrow"},I.createElement(E.U,null))))))))},Object(d.c)([i.a],e.prototype,"OnMouseDown",null),Object(d.c)([i.a],e.prototype,"OnMouseMove",null),Object(d.c)([i.a],e.prototype,"OnMouseUp",null),Object(d.c)([i.a],e.prototype,"OnKeyDown",null),Object(d.c)([i.a],e.prototype,"OnMouseHoverMove",null),Object(d.c)([i.a],e.prototype,"OnMouseHoverLeave",null),Object(d.c)([i.a],e.prototype,"AdjustHoverForClientX",null),Object(d.c)([i.a],e.prototype,"OnSegmentClick",null),Object(d.c)([i.a],e.prototype,"OnMarkerMouseEnter",null),Object(d.c)([i.a],e.prototype,"OnMarkerMouseLeave",null),e=Object(d.c)([o.a],e)}(I.Component),Qe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={info:null},e}return Object(d.d)(e,t),e.getDerivedStateFromProps=function(e,t){if((!t.info||t.info.m_steamIDBroadcast!==e.steamID)&&(t.info&&(M.a.StopInfo(t.info),t.info=null),e.steamID))return{info:M.a.StartInfo(e.steamID)};return null},e.prototype.componentWillUnmount=function(){this.state.info&&M.a.StopInfo(this.state.info)},e.prototype.RenderStreamSwitcher=function(){var e=this.props.steamID;return"public"!=p.b.WEB_UNIVERSE||f.b.stream[e]?I.createElement(Ze,{value:e,options:f.b.stream,onChange:this.props.onLocalStreamChange}):null},e.prototype.render=function(){var t=this,e=this.state.info;if(!e)return null;var n="";e.m_nViewerCount&&(n=e.m_nViewerCount.toLocaleString(T.b.GetPreferredLocales()));var o=f.b.bValid&&f.b.stream&&f.b.stream[e.m_steamIDBroadcast],i=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&(0<parseInt(e.m_strAppId)||o);return I.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&I.createElement(_.a,{className:"broadcastDetailsThumbBlur",src:e.m_strThumbnailUrl,draggable:!1,duration:2500}),I.createElement("div",{className:"BroadcastDetailsHeader"},e&&e.m_strAppTitle&&I.createElement("div",{className:"displayColumn"},I.createElement("div",{className:"Info"},I.createElement("span",{className:"AppTitle"},e.m_strAppTitle),e.m_strTitle&&I.createElement("span",{className:"BroadcastTitle"}," - ",e.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),n&&I.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},I.createElement(E.lb,null),Object(T.c)("#Broadcast_ViewerCount",n))),o&&this.props.onOpenLinkInNewWindow&&I.createElement("div",{className:"Actions"},I.createElement("div",{onClick:function(e){return t.props.onOpenLinkInNewWindow(e,f.b.link)},className:"BroadcastLink"},f.b.linkName))),i&&I.createElement(ye,{appid:f.b.bValid&&f.b.stream&&f.b.stream[e.m_steamIDBroadcast]?f.b.appID:parseInt(e.m_strAppId)}))},e=Object(d.c)([o.a],e)}(I.Component),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.showContextMenu=function(e){var t=this.props,n=t.options,o=t.value,i=t.onChange,r=Object.keys(n).map(function(e){return I.createElement(h.b,{key:e,onSelected:function(){return i(e)},bChecked:e===o},Object(T.c)(n[e]))});Object(m.a)(I.createElement(h.c,null,r),e)},t.prototype.render=function(){var e=this.props,t=e.value,n=e.options[t];return I.createElement("div",{className:"BroadcastLanguage",onClick:this.showContextMenu},I.createElement("span",null," - ",Object(T.c)(n)),I.createElement("div",{className:"ContextMenuButton"},I.createElement(E.o,null)))},Object(d.c)([i.a],t.prototype,"showContextMenu",null),t}(I.Component),Xe=function(n){function e(e){var t=n.call(this,e)||this;return t.state={sizableRegion:[]},t}return Object(d.d)(e,n),e.prototype.AddLinkRegion=function(){return Object(d.b)(this,void 0,void 0,function(){var t,n=this;return Object(d.e)(this,function(e){return t=this.state.sizableRegion.length,this.state.sizableRegion.push({xPosPct:2.5+t,yPosPct:2.5+t,widthPct:20,heightPct:15}),this.setState({sizableRegion:this.state.sizableRegion},function(){return n.OnSaveRegions()}),[2]})})},e.prototype.componentDidUpdate=function(e){var n=this;0==e.linkRegions.length&&this.props.linkRegions.forEach(function(e,t){n.LoadLinkRegion(e,t)})},e.prototype.LoadLinkRegion=function(t,e){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return this.state.sizableRegion.length,this.state.sizableRegion.push({xPosPct:t.left,yPosPct:t.top,widthPct:t.width,heightPct:t.height,link_url:t.url,link_description:t.link_description,link_index:t.link_index}),[4,this.setState({sizableRegion:this.state.sizableRegion})];case 1:return e.sent(),[2]}})})},e.prototype.OnSaveRegions=function(){var e;e={links:[]};for(var t=0;t<this.state.sizableRegion.length;t++){var n;n={left:Math.floor(100*this.state.sizableRegion[t].xPosPct),top:Math.floor(100*this.state.sizableRegion[t].yPosPct),width:Math.floor(100*this.state.sizableRegion[t].widthPct),height:Math.floor(100*this.state.sizableRegion[t].heightPct),url:this.state.sizableRegion[t].link_url,link_description:this.state.sizableRegion[t].link_description,link_index:t},e.links.push(n)}this.props.onSaveLinkRegions(e)},e.prototype.DeleteRegion=function(n){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){return this.state.sizableRegion.splice(n,1),console.log("keys: ",this.state.sizableRegion.keys),this.setState({sizableRegion:this.state.sizableRegion},function(){return t.OnSaveRegions()}),[2]})})},e.prototype.UpdatePanel=function(n,o){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){return this.state.sizableRegion[n]=o,this.setState({sizableRegion:this.state.sizableRegion},function(){return t.OnSaveRegions()}),[2]})})},e.prototype.render=function(){var n=this;return I.createElement("div",{className:"LinkOverlayContainer"},I.createElement("div",{className:"LinkOverlayValidRegion"},!this.props.editMode&&this.props.linkRegions?this.props.linkRegions.map(function(e){return I.createElement("a",{key:e.link_index,href:p.b.STEAMTV_BASE_URL+"linkfilter/"+e.url,target:"_blank",rel:"noopener noreferrer"},I.createElement("div",{className:"LinkRegion",style:{left:e.left+"%",top:e.top+"%",width:e.width+"%",height:e.height+"%"}},I.createElement("div",{className:"LinkRegionText"},e.link_description," ")))}):null,this.props.editMode&&this.state.sizableRegion.map(function(e,t){return I.createElement(ke,{key:100*t+e.xPosPct,index:t,deleteFn:n.DeleteRegion,updateFn:n.UpdatePanel,xPosPct:e.xPosPct,yPosPct:e.yPosPct,widthPct:e.widthPct,heightPct:e.heightPct,link_url:e.link_url,link_description:e.link_description})}),this.props.editMode&&I.createElement("div",{className:"AddLinkRegion",onClick:this.AddLinkRegion},Object(T.c)("#SteamTV_AddLinkRegion"))),I.createElement("div",{className:"LinkOverlayInvalidRegion"},I.createElement("div",null,Object(T.c)("#SteamTV_LinkRegionReserved"))))},Object(d.c)([i.a],e.prototype,"AddLinkRegion",null),Object(d.c)([i.a],e.prototype,"LoadLinkRegion",null),Object(d.c)([i.a],e.prototype,"OnSaveRegions",null),Object(d.c)([i.a],e.prototype,"DeleteRegion",null),Object(d.c)([i.a],e.prototype,"UpdatePanel",null),e=Object(d.c)([o.a],e)}(I.Component)},"OJz+":function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return p});var o=n("mrSG"),c=n("4HGb"),i=(n("qeMu"),n("2vnA")),r=(n("ywG3"),new(function(){function e(){this.m_mapCallbacks=new Map,this.m_rgRegisteredEMsgs=[],this.m_mapServiceMethodHandlers=new Map,this.m_rgRegisteredServiceMethodHandlers=[]}return e.prototype.DispatchMsgToHandlers=function(e,t){var n=e.GetEMsg();if(146==n){var o=e.Hdr().target_job_name();if(o)if(a=this.m_mapServiceMethodHandlers.get(o)){this.DEBUG_LogMessageDispatch(e,a[0]);for(var i=0,r=a;i<r.length;i++){r[i].invoke(e,t)}return!0}}else{var a;if(a=this.m_mapCallbacks.get(n)){this.DEBUG_LogMessageDispatch(e,a[0]);for(var s=0,c=a;s<c.length;s++){c[s].invoke(e)}return!0}}return!1},e.prototype.DEBUG_LogMessageDispatch=function(e,t){},Object.defineProperty(e.prototype,"emsg_list",{get:function(){return this.m_rgRegisteredEMsgs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicemethod_list",{get:function(){return this.m_rgRegisteredServiceMethodHandlers},enumerable:!0,configurable:!0}),e.prototype.AddCallback=function(n,e,o){var i=this,t=this.m_mapCallbacks.get(n);return t||(t=[],this.m_mapCallbacks.set(n,t),this.m_rgRegisteredEMsgs.push(n)),t.push({invoke:o,msgClass:e}),{invoke:o,unregister:function(){var e=i.m_mapCallbacks.get(n);if(e)for(var t=0;t<e.length;t++)e[t].invoke==o&&(e.splice(t,1),t--)}}},e.prototype.AddServiceMethodHandler=function(a,s){var n=this,o=function(e,t){var n=c.b.InitFromMsg(a.request,e),o=c.b.Init(a.response,147),i=s(n,o),r=function(e){o.Hdr().set_eresult(e),t(o)};i instanceof Promise?i.then(r).catch(function(){r(2)}):r(i)};return this.m_mapServiceMethodHandlers.has(a.name)?console.error("Duplicate registration for method "+a.name):(this.m_mapServiceMethodHandlers.set(a.name,[{invoke:o,msgClass:a.request}]),this.m_rgRegisteredServiceMethodHandlers.push(a.name)),{invoke:o,unregister:function(){var e=n.m_mapServiceMethodHandlers.get(a.name);if(e)for(var t=0;t<e.length;t++)e[t].invoke==o&&(e.splice(t,1),t--)}}},e.prototype.AddServiceNotificationHandler=function(o,i){var n=this,r=function(e,t){var n=c.b.InitFromMsg(o.request,e);i(n)},e=this.m_mapServiceMethodHandlers.get(o.name);return e||(e=[],this.m_mapServiceMethodHandlers.set(o.name,e),this.m_rgRegisteredServiceMethodHandlers.push(o.name)),e.push({invoke:r,msgClass:o.request}),{invoke:r,unregister:function(){var e=n.m_mapServiceMethodHandlers.get(o.name);if(e)for(var t=0;t<e.length;t++)e[t].invoke==r&&(e.splice(t,1),t--)}}},Object(o.c)([i.x],e.prototype,"m_rgRegisteredEMsgs",void 0),Object(o.c)([i.x],e.prototype,"m_rgRegisteredServiceMethodHandlers",void 0),e}()));function a(e,t,n){return r.AddCallback(e,t,function(e){n(c.b.InitFromMsg(t,e))})}function s(e,t,n){return r.AddCallback(e,t,function(e){Object(i.A)(function(){n(c.b.InitFromMsg(t,e))})})}function l(e,t){return r.AddServiceNotificationHandler(e,t)}function p(e,n){return r.AddServiceNotificationHandler(e,function(e){var t;return Object(i.A)(function(){t=n(e)}),t})}},OTLo:function(e,t,n){"use strict";var s=n("mrSG"),o=n("2vnA"),r=n("hEDq"),a=n("4HGb"),c=n("1n9R"),i=n("lqmi"),l=n("XaMz"),p=function(){function e(e){this.m_bInitialized=!1,this.m_unAppID=e}return Object.defineProperty(e.prototype,"appid",{get:function(){return this.m_unAppID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_valid",{get:function(){return this.m_bInitialized&&!!this.m_strName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header_image_url",{get:function(){return c.b.MEDIA_CDN_URL+"steam/apps/"+this.m_unAppID+"/header.jpg"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return this.BuildAppURL(this.m_strIconURL,"061818254b2c99ac49e6626adb128ed1282a392f")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logo_url",{get:function(){return this.BuildAppURL(this.m_strLogoURL,"338200c5d6c4d9bdcf6632642a2aeb591fb8a5c2.gif")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_updated_from_server",{get:function(){return this.m_dtUpdatedFromServer},enumerable:!0,configurable:!0}),e.prototype.BuildAppURL=function(e,t){return e?c.b.MEDIA_CDN_COMMUNITY_URL+"images/apps/"+this.appid+"/"+e+".jpg":Object(i.a)(t)},e.prototype.DeserializeFromMessage=function(e){this.m_bInitialized=!0,this.m_strName=e.name(),this.m_strIconURL=e.icon(),this.m_strLogoURL=e.logo(),this.m_dtUpdatedFromServer=new Date},e.prototype.DeserializeFromAppOverview=function(e){e.logo_hash()&&1073741824!=e.app_type()?(this.m_bInitialized=!0,this.m_strName=e.display_name(),this.m_strIconURL=e.icon_hash(),this.m_strLogoURL=e.logo_hash(),this.m_dtUpdatedFromServer=new Date):this.m_bInitialized=!1},e.prototype.DeserializeFromCacheObject=function(e){try{this.m_strName=e.strName,this.m_strIconURL=e.strIconURL,this.m_strLogoURL=e.strLogoURL,this.m_dtUpdatedFromServer=new Date(e.strUpdatedFromServer),this.m_bInitialized=!0}catch(e){}},e.prototype.SerializeToCacheObject=function(){return Object(l.a)(this.m_bInitialized,"Attempting to serialize an uninitialized AppInfo object for caching!"),this.m_bInitialized?{strName:this.m_strName,strIconURL:this.m_strIconURL,strLogoURL:this.m_strLogoURL,strUpdatedFromServer:this.m_dtUpdatedFromServer.toJSON()}:null},e}(),u=function(){function e(e){this.m_nLastUpdated=0,this.m_mapLanguages=o.x.map(),this.m_fetching=null,this.m_appid=e}return e.prototype.GetAppID=function(){return this.m_appid},e.prototype.GetTokenList=function(e){return this.m_mapLanguages.has(e)?this.m_mapLanguages.get(e):null},e.prototype.Localize=function(e,t){var n=c.b.LANGUAGE;return m(e,this.GetTokenList(n),"english"!=n?this.GetTokenList("english"):null,this.m_appid,t)},e.prototype.SubstituteParams=function(e,t){var n=c.b.LANGUAGE;return d(e,this.GetTokenList(n),"english"!=n?this.GetTokenList("english"):null,this.m_appid,t)},e}();function m(e,t,n,o,i){if(!e.startsWith("#"))return console.log("Token doesn't start with #:",e),"";var r=e;e=e.toLowerCase();var a="";if(t&&t.has(e)&&(a=t.get(e)),!a&&n&&n.has(e)&&(a=n.get(e)),a)a=d(a,t,n,o,i);else if((t||n)&&console.log("No loc found for appid",o,r,"Tokens:",t,"Fallback:",n),t&&1!=c.b.EUNIVERSE)return e;return a}function d(e,t,n,o,i){var r=e.match(/{[A-za-z0-9_%#:]+}/g);if(r)for(var a=0,s=r;a<s.length;a++){var c=s[a],l=m(h(c.slice(1,-1),i),t,n,o,i);if(!l)return"";e=e.replace(c,l)}return e=h(e,i)}function h(e,t){var n=e.match(/%[A-Za-z0-9_:]+%/g);if(n)for(var o=0,i=n;o<i.length;o++){var r=i[o],a=r.slice(1,-1).toLowerCase(),s=t.get(a);null==s?console.log("No rich presence found for",a):e=e.replace(r,s)}return e}var f=n("+9/f"),_=n("E7zH");n.d(t,"a",function(){return g});var g=new(function(){function e(){this.m_mapAppInfo=o.x.map(),this.m_mapRichPresenceLoc=o.x.map(),this.m_cAppInfoRequestsInFlight=0,this.m_setPendingAppInfo=new Set,this.m_CacheStorage=null,this.m_fnCallbackOnAppInfoLoaded=new _.a}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.BHavePendingAppInfoRequests=function(){return 0<this.m_setPendingAppInfo.size||0<this.m_cAppInfoRequestsInFlight},Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!0,configurable:!0}),e.prototype.RegisterCallbackOnLoad=function(e){if(!this.BHavePendingAppInfoRequests())return Object(l.a)(!1,"Registering for callback on appinfo load, but nothing queued"),void e();this.m_fnCallbackOnAppInfoLoaded.Register(e)},e.prototype.GetAppInfo=function(e){if(Object(l.a)(this.m_CMInterface,"CAppInfoStore.GetAppInfo called before Init"),Object(l.a)(e,"Requesting App ID 0, which won't ever exist"),!this.m_mapAppInfo.has(e)){var t=new p(e);this.m_mapAppInfo.set(e,t),this.QueueAppInfoRequest(e)}return this.m_mapAppInfo.get(e)},e.prototype.QueueAppInfoRequest=function(e){var t=this;return e?(this.m_setPendingAppInfo.size||(this.m_PendingAppInfoPromise=new Promise(function(e){return t.m_PendingAppInfoResolve=e}),window.setTimeout(function(){return t.FlushPendingAppInfo()},25)),this.m_setPendingAppInfo.add(e),this.m_PendingAppInfoPromise):Promise.resolve()},e.prototype.FlushPendingAppInfo=function(){return Object(s.b)(this,void 0,void 0,function(){var t,n;return Object(s.e)(this,function(e){switch(e.label){case 0:return t=this.m_PendingAppInfoResolve,n=Array.from(this.m_setPendingAppInfo),this.m_PendingAppInfoPromise=void 0,this.m_PendingAppInfoResolve=void 0,this.m_setPendingAppInfo.clear(),[4,this.LoadAppInfoBatch(n)];case 1:return e.sent(),t(),[2]}})})},e.prototype.LoadAppInfoBatch=function(i){return Object(s.b)(this,void 0,void 0,function(){var t,n,o;return Object(s.e)(this,function(e){switch(e.label){case 0:return this.m_cAppInfoRequestsInFlight++,[4,this.LoadAppInfoBatchFromLocalCache(i)];case 1:return(t=e.sent()).length?(console.log("Loading batch of App Info from Steam: ",t),[4,this.m_CMInterface.WaitUntilLoggedOn()]):[3,4];case 2:return e.sent(),(n=a.b.Init(f.b)).Body().set_appids(t),n.Body().set_language(Object(r.k)(c.b.LANGUAGE)),[4,f.c.GetApps(this.m_CMInterface.GetServiceTransport(),n)];case 3:1==(o=e.sent()).GetEResult()?this.OnGetAppsResponse(o):console.error("Error when calling CommunityService.GetApps: EResult="+o.GetEResult()+", rgUncachedAppIDs:",t),e.label=4;case 4:return 0==--this.m_cAppInfoRequestsInFlight&&0==this.m_setPendingAppInfo.size&&(this.m_fnCallbackOnAppInfoLoaded.Dispatch(),this.m_fnCallbackOnAppInfoLoaded.ClearAllCallbacks()),[2]}})})},e.prototype.OnGetAppsResponse=function(e){for(var t=[],n=0,o=e.Body().apps();n<o.length;n++){var i=o[n],r=this.m_mapAppInfo.get(i.appid());Object(l.a)(r,"Got AppInfo response for unrequested AppID: "+i.appid()),r&&((r=new p(i.appid())).DeserializeFromMessage(i),this.m_mapAppInfo.set(i.appid(),r),t.push(r))}this.SaveAppInfoBatchToLocalCache(t)},e.prototype.OnAppOverviewChange=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t],i=new p(o.appid());i.DeserializeFromAppOverview(o),this.m_mapAppInfo.set(o.appid(),i)}},e.prototype.EnsureAppInfoForAppIDs=function(t){return Object(s.b)(this,void 0,void 0,function(){var n=this;return Object(s.e)(this,function(e){return t.forEach(function(e){var t=n.m_mapAppInfo.get(e);t||(t=new p(e),n.m_mapAppInfo.set(e,t),n.QueueAppInfoRequest(e))}),void 0!==this.m_PendingAppInfoPromise?[2,this.m_PendingAppInfoPromise]:[2,Promise.resolve()]})})},e.prototype.SetCacheStorage=function(e){this.m_CacheStorage=e},e.prototype.GetCacheKeyForAppID=function(e){return"APPINFO_"+e},e.prototype.LoadAppInfoBatchFromLocalCache=function(a){return Object(s.b)(this,void 0,void 0,function(){var i,t,n,o,r=this;return Object(s.e)(this,function(e){switch(e.label){case 0:return this.m_CacheStorage?(console.log("Loading batch of App Info from Local Cache: ",a),i=new Date((new Date).getTime()-12096e5),t=function(o){return Object(s.b)(r,void 0,void 0,function(){var t,n;return Object(s.e)(this,function(e){switch(e.label){case 0:return[4,this.m_CacheStorage.GetObject(this.GetCacheKeyForAppID(o))];case 1:return(t=e.sent())?(n=this.m_mapAppInfo.get(o),Object(l.a)(n,"Didn't find AppInfo in our map when loading from cache but it should've been there?"),n?((n=new p(o)).DeserializeFromCacheObject(t),n.is_initialized?(this.m_mapAppInfo.set(o,n),n.time_updated_from_server<i?[2,o]:[2,null]):(console.warn("Failed to deserialize cached App Info: ",o,t),[2,o])):[2,o]):[2,o]}})})},n=a.map(function(e){return t(e)}),[4,Promise.all(n)]):[2,a];case 1:return o=e.sent(),[2,o.filter(function(e){return null!==e})]}})})},e.prototype.SaveAppInfoBatchToLocalCache=function(r){return Object(s.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(s.e)(this,function(e){if(!this.m_CacheStorage)return[2];for(console.log("Saving batch of App Info to Local Cache: ",r.map(function(e){return e.appid})),t=0,n=r;t<n.length;t++)o=n[t],(i=o.SerializeToCacheObject())&&this.m_CacheStorage.StoreObject(this.GetCacheKeyForAppID(o.appid),i);return[2]})})},e.prototype.Localize=function(e,t,n){var o=this.GetRichPresenceLoc(e);return o?o.Localize(t,n):1!=c.b.EUNIVERSE?(console.log("Unable to find app localization information for app "+e+" token "+t+", this may not have had a chance to load yet"),t):""},e.prototype.GetRichPresenceLoc=function(e){if(this.m_mapRichPresenceLoc.has(e.toString())){var t=this.m_mapRichPresenceLoc.get(e.toString());return t.m_nLastUpdated+72e5<Date.now()&&this.QueueRichPresenceLocRequest(t),t}var n=new u(e);return this.m_mapRichPresenceLoc.set(e.toString(),n),this.QueueRichPresenceLocRequest(n),n},e.prototype.GetRichPresenceLocAsync=function(e){var t=this.GetRichPresenceLoc(e);return t.m_nLastUpdated?Promise.resolve(t):t.m_fetching},e.prototype.OnRichPresenceLocUpdate=function(e,t){e.m_nLastUpdated=Date.now();for(var n=0,o=t;n<o.length;n++){var i=o[n],r=i.language(),a=e.m_mapLanguages.get(r);a?a.clear():(e.m_mapLanguages.set(r,new Map),a=e.m_mapLanguages.get(r));for(var s=0,c=i.tokens();s<c.length;s++){var l=c[s];a.set(l.name().toLowerCase(),l.value())}}},e.prototype.QueueRichPresenceLocRequest=function(t){var n=this;return t.m_fetching||(t.m_fetching=this.m_CMInterface.WaitUntilLoggedOn().then(function(){var e=a.b.Init(f.a);return e.Body().set_appid(t.GetAppID()),e.Body().set_language(c.b.LANGUAGE),f.c.GetAppRichPresenceLocalization(n.m_CMInterface.GetServiceTransport(),e)}).then(function(e){return t.m_fetching=null,1!=e.GetEResult()?Promise.reject():(n.OnRichPresenceLocUpdate(t,e.Body().token_lists()),Promise.resolve(t))}),t.m_fetching.catch(function(){t.m_fetching=null})),t.m_fetching},Object(s.c)([o.g],e.prototype,"OnGetAppsResponse",null),Object(s.c)([o.g],e.prototype,"OnRichPresenceLocUpdate",null),e}())},Oefq:function(e,t,n){"use strict";n.d(t,"b",function(){return S}),n.d(t,"a",function(){return y}),n.d(t,"c",function(){return p});var p,o,i=n("mrSG"),s=n("UqDm"),r=n("tkkQ"),m=n("3zHc"),a=n("rsEv"),d=n("V7Fl"),h=n("LAqV"),c=n("2vnA"),l=n("oh5H"),u=n("1VtQ"),f=n("5Nu3"),_=n("cLtS"),g=n("XaMz"),b=n("hEDq"),v="ChatStorePopupState",S=function(){function e(e){this.m_bRestoredPopupState=!1,this.m_vecShowGroupsAfterRestorePopup=[],this.m_iLastChatPopupID=0,this.m_mapChatBrowserContexts=new Map,this.m_bSuppressBrowserContextBroadcasting=!1,this.m_bParentalLocked=void 0,this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,this.m_bShuttingDown=!1,this.m_bTheaterMode=!1,this.m_mapFriendChatBroadcastVisible=new Map,this.m_nTabActivationCount=0,this.m_chatStore=e}return e.prototype.GetRootChatPerContextData=function(){return this.GetPerContextChatData(h.a)},e.prototype.Init=function(){var t=this;h.f.AddPopupManagerShutdownCallback(function(){t.SerializePopupState(),t.m_bShuttingDown=!0}),Object(c.h)(function(){var e=h.f.ParentalStore.BIsFriendsBlocked();t.OnFriendsParentalLockChanged(e)})},e.prototype.OnFriendsParentalLockChanged=function(e){!1===this.m_bParentalLocked&&e?(this.SerializePopupState(!0),this.m_mapChatBrowserContexts.forEach(function(e){e.CloseAllPopups()}),this.m_bRestoredPopupState=!1):!0!==this.m_bParentalLocked||e||this.RestorePopupState(),this.m_bParentalLocked=e},e.prototype.ShowFriendChatDialog=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var i=this.m_chatStore.GetFriendChat(t);return n&&i&&this.ShowAndOrActivateChat(e,i,o),i},e.prototype.ShowFriendChatDialogWhenReady=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.ShowFriendChatDialog(e,t,n,o)},e.prototype.ShowFriendChatDialogAndStartVoice=function(e,t){var n=this.ShowFriendChatDialog(e,t,!0,!0);return n.BVoiceActive()||n.ToggleVoiceChat(),n},e.prototype.ShowAndOrActivateChat=function(e,t,n){if(t instanceof a.a){var o=this.m_chatStore.GetChatRoomGroup(t.GetParentGroupID());if(!o)return void Object(g.a)(!1,"Can't find group for chat room ");var i=this.ShowAndOrActivateChatRoomGroup(e,o,n);i&&i.SelectChat(t.GetRoomID())}else this.ShowAndOrActivateTabByID(e,t.unique_id,n)},e.prototype.ShowAndOrActivateChatForTabset=function(e,t,n){var o=e.GetTabForChat(t);o||this.CreateNewTabFromUniqueID(e,t.unique_id,!1),n&&e.ActivateTab(o)},e.prototype.IsChatRoomGroupActive=function(e,t){var n=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(n,t.unique_id);return!!o&&o.tabSet.activeTab==o.tab},e.prototype.SetTheaterMode=function(e){this.m_bTheaterMode=e},e.prototype.GetTheaterMode=function(){return this.m_bTheaterMode},e.prototype.SetFriendBroadcastVisible=function(e,t){this.m_mapFriendChatBroadcastVisible.set(e,t)},e.prototype.IsFriendBroadcastVisible=function(e){return this.m_mapFriendChatBroadcastVisible.get(e)},e.prototype.ShowAndOrActivateChatRoomGroup=function(e,t,n){return t.BIsCurrentUserAMember()?this.ShowAndOrActivateTabByID(e,t.unique_id,n):(console.log("Failed to activate",t,"- user is not a member."),null)},e.prototype.ShowAndOrActivateChatRoomGroupWhenReady=function(e,t,n){this.ShowAndOrActivateChatRoomGroup(e,t,n)},e.prototype.ShowUnackedGroup=function(e){this.m_bRestoredPopupState?this.ShowAndOrActivateChatRoomGroup(h.a,e,!1):this.m_vecShowGroupsAfterRestorePopup.push(e)},e.prototype.ShowOrActivateBroadcast=function(e,t,n){var o="br"+t;return this.ShowAndOrActivateTabByID(e,o,n)},e.prototype.CloseTabByID=function(t,e){var n=this;e?this.CloseTabByIDInContext(e,t):this.m_mapChatBrowserContexts.forEach(function(e){n.CloseTabByIDInContext(e.browser_context,t)})},e.prototype.ReplaceFriendChatWithGroup=function(e,t,n){var o=this.GetPerContextChatData(e),i=this.GetTabSetByUniqueID(o,n.unique_id);i||(this.ShowAndOrActivateChatRoomGroup(e,n,!0),i=this.GetTabSetByUniqueID(o,n.unique_id)),Object(g.a)(i,"Failed to find group tab");var r=this.GetTabSetByUniqueID(o,t.chat.unique_id);if(r){var a=i.tab,s=r.tabSet;i.tabSet!=s&&(i.tabSet.RemoveTab(a),s.AddTab(a)),s.MoveTabAfter(a,t),this.CloseTab(e,t),this.ShowAndOrActivateChatRoomGroup(e,n,!0)}},e.prototype.ForEachTabSet=function(e,t){e.IsFriendsListSingleWindow()&&0<e.default_tabset.tabCount&&t(e.default_tabset);for(var n=0,o=Array.from(e.popup_list);n<o.length;n++){t(o[n].tab_set)}},e.prototype.CloseTab=function(t,n,o){void 0===o&&(o=!1);var i=this.GetPerContextChatData(t);this.ForEachTabSet(i,function(e){e.BHasTab(n)&&(o||e.RemoveTab(n),n.IsVoiceActive()&&h.f.ShowCloseActiveVoiceConfirmation(t,i.GetPopupForTabSet(e)))}),this.BroadcastCloseTabToAllBrowserContexts(t,n.GetUniqueID()),n.OnTabClosed(),i.IsFriendsListSingleWindow()&&0==i.default_tabset.tabCount&&(i.responsive_window_state.SetActiveView(p.FriendsList),this.SetTheaterMode(!1),i.SetFriendsListCollapsed(!1)),h.f.UIStore.SerializePopupState()},e.prototype.GetResponsiveWindowState=function(e){return this.GetPerContextChatData(e).responsive_window_state},e.prototype.CloseTabByIDInContext=function(e,t){var n=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(n,t);o&&(o.tabSet.RemoveTab(o.tab),o.tab.OnTabClosed(),this.BroadcastCloseTabToAllBrowserContexts(e,t))},e.prototype.ShowAndOrActivateTabByID=function(e,t,n){void 0===n&&(n=!0);var o,i=this.GetPerContextChatData(e),r=this.GetTabSetByUniqueID(i,t);if(r)n&&r.tabSet.ActivateTab(r.tab),o=r.tab;else{var a=h.f.SettingsStore.BAlwaysShowChatsInNewWindow();if(!i.BUsePopups()||!a&&i.default_tabset.is_popup_active)o=this.CreateNewTabFromUniqueID(i.default_tabset,t,n);else{var s=void 0;if(s=a&&0!=i.default_tabset.tabCount?new m.a(e):i.default_tabset,!(o=this.CreateNewTabFromUniqueID(s,t,n)))return null;var c=s==i.default_tabset;if(c&&i.IsFriendsListSingleWindow())h.f.ShowPopupFriendsList(e,!n,n);else if(!c||!i.IsFriendsListSingleWindow()&&!s.is_popup_active){var l=h.f.CreateChatPopup(e,this.GetNextChatPopupID(),s,void 0,void 0,!n);l.Show(n),i.AddPopup(s,l),this.SerializePopupState()}}}return o&&n&&i.responsive_window_state.SetActiveView(p.Chat),h.f.UIStore.SerializePopupState(),n&&this.m_nTabActivationCount++,o},e.prototype.GetTabSetByUniqueID=function(e,t){if(!e)return null;var n=e.GetTabSetForId(t);return n?{tabSet:n,tab:n.GetTabByUniqueID(t)}:null},e.prototype.BIsTabSetActive=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetActive(e)},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetVisible(e)},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetFocused(e)},e.prototype.GetAppContainerForChat=function(e){var t=this.GetRootChatPerContextData(),n=null;if(e instanceof a.a){var o=this.m_chatStore.GetChatRoomGroup(e.GetParentGroupID());o&&(n=this.GetTabSetByUniqueID(t,o.unique_id))}else n=this.GetTabSetByUniqueID(t,e.unique_id);if(!n||!n.tabSet)return null;var i=t.GetPopupForTabSet(n.tabSet);return i?i.popup?i.popup.container:null:t.IsTabSetInFriendListWindow(n.tabSet)?t.friends_list_window:null},e.prototype.FlashChatWindow=function(e,t){var n=this.GetAppContainerForChat(e);n&&!n.BIsClosed()&&n.FlashWindow(t)},e.prototype.GetPerContextChatData=function(e){Object(g.a)(h.f.ready_to_render||this.m_bRestoringPopups,"GetPerContextChatData called before ready",e);var t=this.m_mapChatBrowserContexts.get(e.m_unPID);if(!t){var n=h.f.BIsValidBrowserContext(e);t=new O(e),n?this.m_mapChatBrowserContexts.set(e.m_unPID,t):Object(g.a)(!1,"Had to prevent instance being added back"+e.m_unPID)}return t},e.prototype.GetDefaultTabSetForContext=function(e){return this.GetPerContextChatData(e).default_tabset},e.prototype.OnOverlayBrowserCreated=function(e,t,n){var i=this,r=this.GetPerContextChatData(e);if(r){r.SetScreenInfo(t,n);var o=this.GetRootChatPerContextData();o&&(r.IsFriendsListSingleWindow()||this.ForEachTabSet(o,function(n){var o=new m.a(r.browser_context);n.tabs.forEach(function(e){var t=n.activeTab==e;i.CreateNewTabFromUniqueID(o,e.GetUniqueID(),t)});var e=h.f.CreateChatPopup(r.browser_context,i.GetNextChatPopupID(),o,void 0,void 0,!1);e.Show(!1),r.AddPopup(o,e)}))}},e.prototype.OnOverlayBrowserChanged=function(e,t,n){var o=this.GetPerContextChatData(e);o&&o.SetScreenInfo(t,n)},e.prototype.OnOverlayBrowserClosed=function(e){var t=this.m_mapChatBrowserContexts.get(e.m_unPID);t&&(Object(g.a)(e.m_nBrowserID==t.browser_context.m_nBrowserID,"Mismatch found in OnOverlayBrowserClosed"),this.m_mapChatBrowserContexts.delete(e.m_unPID))},e.prototype.SetSuppressBrowserContextBroadcasting=function(e){this.m_bSuppressBrowserContextBroadcasting=e},e.prototype.BroadcastNewTabToAllBrowserContexts=function(n,o){var i=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach(function(e){if(!Object(h.b)(e.browser_context,n)){var t=e.browser_context!=h.a;i.ShowAndOrActivateTabByID(e.browser_context,o,t)}}),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.BroadcastCloseTabToAllBrowserContexts=function(e,t){if(!this.m_bSuppressBrowserContextBroadcasting)if(Object(h.b)(e,h.a))this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t);else{var n=this.m_mapChatBrowserContexts.get(e.m_unPID);n&&Object(h.b)(e,n.browser_context)&&this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t)}},e.prototype.BroadcastCloseTabToAllBrowserContexts_Internal=function(t,n){var o=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach(function(e){Object(h.b)(e.browser_context,t)||o.CloseTabByIDInContext(e.browser_context,n)}),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.CreateNewTabFromUniqueID=function(e,t,n,o){void 0===o&&(o=!1);var i=null,r=t.match(/^f(\d+)$/);if(r&&r[1]){var a=parseInt(r[1]),s=h.f.FriendStore.GetPlayer(a);if(s&&!s.is_blocked){var c=this.m_chatStore.GetFriendChat(a);c&&(i=new f.b(e,c),!o||s.is_friend||h.f.FriendStore.BApprovedNonFriendMessages(a)||c.SetShowNonFriendWarning(!0))}}if(!i){var l=t.match(/^cg(\d+)$/);if(l&&l[1]){var p=this.m_chatStore.GetChatRoomGroup(l[1]);p&&(this.m_chatStore.IncRefActiveChatRoomGroup(p.GetGroupID(),!this.m_bRestoringPopups),i=new d.d(e,p))}}if(!i){var u=t.match(/^br(\d+)$/);if(u&&u[1]){var m=parseInt(u[1]);i=new _.b(e,m)}}return i?(e.AddTab(i),this.BroadcastNewTabToAllBrowserContexts(e.GetBrowserContext(),t),n&&e.ActivateTab(i),i):null},e.prototype.GetNextChatPopupID=function(){return"ChatWindow_"+this.m_iLastChatPopupID++},e.prototype.BIsFriendsListSingleWindow=function(e){var t=this.GetPerContextChatData(e);return!t.BUsePopups()||t.IsFriendsListSingleWindow()},e.prototype.SetFriendsListSingleWindowMode=function(e,t){var n=this.GetPerContextChatData(e);n.BUsePopups()&&n.IsFriendsListSingleWindow()!=t&&(t?h.f.UIStore.ConvertDefaultTabSetToEmbedded(n.browser_context):h.f.UIStore.ConvertDefaultTabSetToPopup(n.browser_context),n.SetFriendsListSingleWindowMode(t))},e.prototype.BIsFriendsListCollapsed=function(e){var t=this.GetPerContextChatData(e);return t.IsFriendsListSingleWindow()&&t.IsFriendsListCollapsed()},e.prototype.SetFriendsListCollapsed=function(e,t){this.GetPerContextChatData(e).SetFriendsListCollapsed(t)},e.prototype.ConvertDefaultTabSetToPopup=function(e){var t=this.GetPerContextChatData(e);if(t.default_tabset.tabCount){var n=t.GetPopupForTabSet(t.default_tabset);return n||((n=h.f.CreateChatPopup(e,this.GetNextChatPopupID(),t.default_tabset,t.cached_popup_window_restore_details,void 0,!1)).Show(!0),t.AddPopup(t.default_tabset,n),this.SerializePopupState(),t.friends_list_window&&(t.friends_list_window.BringToFront(),t.friends_list_window.title=Object(l.c)("#WindowTitle_FriendsList")),n)}return null},e.prototype.ConvertDefaultTabSetToEmbedded=function(e){var t=this.GetPerContextChatData(e),n=t.GetPopupForTabSet(t.default_tabset);n&&(n.popup.GetWindowRestoreDetails().then(function(e){t.SetCachedDefaultPopupDimensions(e)}),t.RemovePopupForTabSet(t.default_tabset),this.SerializePopupState(),n.ClearTabSet(),n.popup.Close())},e.prototype.OnTabSetResized=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(e==t.default_tabset&&!t.IsFriendsListSingleWindow()){var n=t.GetPopupForTabSet(e);n&&n.popup.GetWindowRestoreDetails().then(function(e){t.SetCachedDefaultPopupDimensions(e)})}},e.prototype.CloseTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),n=t.GetPopupForTabSet(e);n&&n.popup.Close(),t.RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.OnTabSetClosed=function(e){this.GetPerContextChatData(e.GetBrowserContext()).RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.FocusTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),n=t.GetPopupForTabSet(e);n&&n.popup&&!n.popup.container.BIsClosed()?n.popup.container.BringToFront():t.IsTabSetInFriendListWindow(e)&&t.IsFriendsListSingleWindow()&&(t.BUsePopups()?h.f.ShowPopupFriendsList(t.browser_context,!1,!0):t.friends_list_window&&t.friends_list_window.BringToFront())},e.prototype.MoveTabToNewPopup=function(e,t,n,o){Object(g.a)(e,"browserContext");var i=this.GetPerContextChatData(e);this.ForEachTabSet(i,function(e){return e.RemoveTab(t)});var r=new m.a(e);r.AddTab(t);var a=h.f.CreateChatPopup(e,this.GetNextChatPopupID(),r,o,n,!1);if(a.Show(!0),o){var s=a.popup.GetWindow();try{s.SteamClient.Window.PositionWindowRelative(o,n.left,n.top,n.width,n.height)}catch(e){console.error(e)}}i.AddPopup(r,a),this.SerializePopupState()},e.prototype.SerializePopupState=function(e){if(void 0===e&&(e=!1),this.m_bRestoredPopupState&&h.f.SettingsStore.BReady()&&!this.m_bShuttingDown){var t=this.SerializePopupStateToObject(e);h.f.SettingsStore.StoreObjectInLocalStorage(v,t)}},e.prototype.SerializePopupStateToObject=function(e){var t=this.GetPerContextChatData(h.a),n={window_restore_details:t.cached_popup_window_restore_details,defaultTabs:void 0,popupTabs:void 0,bFriendsListVisible:!1,always_restore:e,bFriendsListSingleWindow:t.IsFriendsListSingleWindow(),bFriendsListCollapsed:t.IsFriendsListCollapsed()};t.default_tabset&&0<t.default_tabset.tabCount&&(n.defaultTabs=t.default_tabset.Serialize());for(var o=[],i=0,r=Array.from(t.popup_list);i<r.length;i++){var a=r[i];a.tab_set!=t.default_tabset&&o.push(a.tab_set.Serialize())}return 0<o.length&&(n.popupTabs=o),n.bFriendsListVisible=!!t.friends_list_window,n},e.prototype.BRestorePopups=function(){return h.f.SettingsStore.BAlwaysShowChatsInNewWindow()},e.prototype.BRestoreOpenChats=function(){return h.f.SettingsStore.FriendsSettings.bRememberOpenChats},e.prototype.DeserializeIntoTabSet=function(e,t){if(t.tabs&&Array.isArray(t.tabs))for(var n=0,o=t.tabs;n<o.length;n++){var i=o[n];i.startsWith("br")||this.CreateNewTabFromUniqueID(e,i,i==t.active_tab,!0)}},e.prototype.SetStateToRestoreFrom=function(e){this.m_stateToRestoreFrom=e},e.prototype.RestorePopupState=function(){return Object(i.b)(this,void 0,void 0,function(){var t,n;return Object(i.e)(this,function(e){switch(e.label){case 0:return Object(g.a)(!this.m_bRestoredPopupState,"Second restore popup state"),Object(g.a)(!this.m_bRestoringPopups,"RestorePopupState called while already restoring"),h.f.ParentalStore.BIsFriendsBlocked()?[2]:(this.m_bRestoringPopups=!0,this.m_stateToRestoreFrom?(this.RestoreFromStateObject(this.m_stateToRestoreFrom,!1),this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,[2]):[4,h.f.SettingsStore.GetObjectFromLocalStorageWhenReady(v)]);case 1:return t=e.sent(),n=!1,"undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.BSuppressPopupsInRestore?[4,SteamClient.WebChat.BSuppressPopupsInRestore()]:[3,3];case 2:n=e.sent(),e.label=3;case 3:return this.RestoreFromStateObject(t,n),this.m_bRestoringPopups=!1,[2]}})})},e.prototype.RestoreFromStateObject=function(e,t){var n=this.GetPerContextChatData(h.a);if(Object(g.a)(n.BIsEmpty(),"Restoring to non-empty context",n),n.BIsEmpty()){if(e.window_restore_details&&n.SetCachedDefaultPopupDimensions(e.window_restore_details),n.SetFriendsListSingleWindowMode(!!e.bFriendsListSingleWindow),n.SetFriendsListCollapsed(!!e.bFriendsListCollapsed),!t&&(e.always_restore||this.BRestoreOpenChats())){if(e.defaultTabs){var o=n.default_tabset;if(this.DeserializeIntoTabSet(o,e.defaultTabs),0<o.tabCount&&!n.IsFriendsListSingleWindow()){var i=h.f.CreateChatPopup(h.f.GetDefaultBrowserContext(),this.GetNextChatPopupID(),o,void 0,void 0,!1);n.AddPopup(o,i),i.Show(!1)}}if(e.popupTabs)for(var r=0,a=e.popupTabs;r<a.length;r++){var s=a[r];o=new m.a(h.a);if(this.DeserializeIntoTabSet(o,s),0<o.tabCount){i=h.f.CreateChatPopup(h.f.GetDefaultBrowserContext(),this.GetNextChatPopupID(),o,void 0,void 0,!1);n.AddPopup(o,i),i.Show(!1)}}}if(!t){var c=!e||void 0===e.bFriendsListVisible||e.bFriendsListVisible;n.BUsePopups()&&h.f.ShowPopupFriendsListAtStartup(c);for(var l=0,p=this.m_vecShowGroupsAfterRestorePopup;l<p.length;l++){var u=p[l];this.ShowAndOrActivateChatRoomGroup(h.a,u,!1)}}this.m_vecShowGroupsAfterRestorePopup=[],this.m_bRestoredPopupState=!0,this.m_chatStore.OnRestorePopupsComplete()}},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this.GetPerContextChatData(h.a);e.ui_state().set_friends_list_docked(t.IsFriendsListSingleWindow()),e.ui_state().set_friends_list_visible(t.friends_list_window&&!t.friends_list_window.BIsClosed()),e.ui_state().set_chat_popups_opened(Array.from(t.popup_list).length),e.ui_state().set_friends_list_collapsed(t.IsFriendsListCollapsed());var n=0,o=0;n+=s.b(t.default_tabset.tabs,function(e){return e.IsChatRoom()}),o+=s.b(t.default_tabset.tabs,function(e){return e.IsFriendChat()});for(var i=0,r=Array.from(t.popup_list);i<r.length;i++){var a=r[i];a.tab_set!=t.default_tabset&&(n+=s.b(a.tab_set.tabs,function(e){return e.IsChatRoom()}),o+=s.b(a.tab_set.tabs,function(e){return e.IsFriendChat()}))}e.ui_state().set_group_chat_tabs_opened(n),e.ui_state().set_friend_chat_tabs_opened(o)},Object(i.c)([c.x],e.prototype,"m_bTheaterMode",void 0),Object(i.c)([c.x],e.prototype,"m_mapFriendChatBroadcastVisible",void 0),Object(i.c)([c.x],e.prototype,"m_nTabActivationCount",void 0),Object(i.c)([c.g],e.prototype,"OnFriendsParentalLockChanged",null),Object(i.c)([h.g],e.prototype,"ShowFriendChatDialogWhenReady",null),Object(i.c)([h.g],e.prototype,"ShowAndOrActivateChatRoomGroupWhenReady",null),Object(i.c)([u.a],e.prototype,"SerializePopupState",null),e}(),y=function(){function e(e,t){this.m_bShown=!1,this.m_popup=e,this.m_chatPopup=t}return e.prototype.Show=function(e){this.m_popup.Show(e),this.m_bShown||(this.m_bShown=!0)},Object.defineProperty(e.prototype,"popup",{get:function(){return this.m_popup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tab_set",{get:function(){return this.m_chatPopup.tab_set},enumerable:!0,configurable:!0}),e.prototype.ClearTabSet=function(){this.m_chatPopup.ClearTabSet()},e.prototype.IsSameBrowserContext=function(e){var t=this.m_popup.GetBrowserContext()||h.a;return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},e}();(o=p||(p={}))[o.FriendsList=0]="FriendsList",o[o.Chat=1]="Chat";var C=function(){function e(){this.m_eActiveView=p.FriendsList}return e.prototype.GetActiveView=function(){return this.m_eActiveView},e.prototype.SetActiveView=function(e){this.m_eActiveView=e},Object(i.c)([c.x],e.prototype,"m_eActiveView",void 0),e}(),O=function(){function e(e){this.m_browserContext=e,this.m_DefaultTabSet=new m.a(e),this.m_FriendsListWindow=void 0,this.m_PopupWindowRestoreDetails=void 0,this.m_mapTabSetToPopup=new Map,this.m_ResponsiveWindowState=new C,this.SetFriendsListSingleWindowMode(!1),this.m_bFriendsListCollapsed=r.a.STEAM_TV}return e.prototype.BIsEmpty=function(){return 0==this.m_DefaultTabSet.tabCount&&(!r.a.IN_CLIENT||null==this.m_FriendsListWindow)&&0==this.m_mapTabSetToPopup.size},e.prototype.BUsePopups=function(){return r.a.USE_POPUPS&&!Object(b.a)(this.m_browserContext.m_eBrowserType)},e.prototype.IsFriendsListSingleWindow=function(){return this.m_bFriendsListSingleWindow},e.prototype.SetFriendsListSingleWindowMode=function(e){this.BUsePopups()?this.m_bFriendsListSingleWindow=e:this.m_bFriendsListSingleWindow=!0},e.prototype.IsFriendsListCollapsed=function(){return this.m_bFriendsListCollapsed},e.prototype.SetFriendsListCollapsed=function(e){this.m_bFriendsListCollapsed=e},Object.defineProperty(e.prototype,"browser_context",{get:function(){return this.m_browserContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"default_tabset",{get:function(){return Object(g.a)(this.m_DefaultTabSet,"Context has no default chat target"),this.m_DefaultTabSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_window",{get:function(){return this.m_FriendsListWindow},enumerable:!0,configurable:!0}),e.prototype.SetFriendsListWindow=function(e){this.m_FriendsListWindow=e||void 0,!e&&this.IsFriendsListSingleWindow()&&this.m_DefaultTabSet.CloseAllTabs()},Object.defineProperty(e.prototype,"popup_list",{get:function(){return this.m_mapTabSetToPopup.values()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responsive_window_state",{get:function(){return this.m_ResponsiveWindowState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cached_popup_window_restore_details",{get:function(){return this.m_PopupWindowRestoreDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screen_info",{get:function(){return this.m_ScreenInfo},enumerable:!0,configurable:!0}),e.prototype.SetScreenInfo=function(e,t){this.m_ScreenInfo={width:e,height:t}},e.prototype.SetCachedDefaultPopupDimensions=function(e){this.m_PopupWindowRestoreDetails=e},e.prototype.GetTabSetForId=function(e){if(this.m_DefaultTabSet.GetTabByUniqueID(e))return this.m_DefaultTabSet;for(var t=0,n=Array.from(this.m_mapTabSetToPopup.keys());t<n.length;t++){var o=n[t];if(o.GetTabByUniqueID(e))return o}return null},e.prototype.RemovePopupForTabSet=function(e){this.m_mapTabSetToPopup.delete(e)},e.prototype.AddPopup=function(e,t){Object(g.a)(!this.m_mapTabSetToPopup.has(e),"Added popup for tabset twice"),this.m_mapTabSetToPopup.set(e,t)},e.prototype.GetPopupForTabSet=function(e){return this.m_mapTabSetToPopup.get(e)},e.prototype.IsTabSetInFriendListWindow=function(e){return e==this.default_tabset&&this.IsFriendsListSingleWindow()},e.prototype.BIsTabSetActive=function(e){var t=this.GetPopupForTabSet(e);return t?!t.popup.container.BIsClosed():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&!this.friends_list_window.BIsClosed()},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsVisible():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsVisible()},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsFocused():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsFocused()},e.prototype.CloseAllPopups=function(){for(var e=0,t=Array.from(this.popup_list);e<t.length;e++){t[e].popup.Close()}this.m_mapTabSetToPopup.clear(),this.friends_list_window&&this.m_FriendsListWindow.Close(),this.m_DefaultTabSet=new m.a(this.m_browserContext)},Object(i.c)([c.x],e.prototype,"m_DefaultTabSet",void 0),Object(i.c)([c.x],e.prototype,"m_bFriendsListSingleWindow",void 0),Object(i.c)([c.x],e.prototype,"m_bFriendsListCollapsed",void 0),e}()},QHER:function(e,t,n){"use strict";function o(n){return Object.keys(n).reduce(function(e,t){return n[t]?e?e+" "+t:t:e},"")}t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return t?"string"==typeof t?e?e+" "+t:t:"object"==typeof t?e?e+" "+o(t):o(t):e:e},"")}},QxgC:function(e,t,n){"use strict";var o=n("mrSG"),i=n("q1tI"),s=n.n(i),r=n("okNM"),a=n("1VtQ"),c=n("8o0Y"),l=n("tY0L"),p=n("e2SU"),u=n("oh5H"),m=n("QHER"),d=n("UDpV"),h=n.n(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnEmoticonClick=function(e){var t=this.props,n=t.emoticonStore,o=t.SetUIDisplayPref,i=t.contextOptions;Object(c.a)(s.a.createElement(l.b,{emoticonStore:this.props.emoticonStore,emoticonHoverStore:this.props.emoticonHoverStore,strFlairGroupID:this.props.strFlairGroupID,OnSelected:this.props.OnEmoticonSelected}),e,i||{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0}),this.BHaveUnseenEmoticons()&&o&&o("rtLastAckedNewEmoticons",n.GetTimeReceivedNewestEmoticon())},t.prototype.BHaveUnseenEmoticons=function(){var e=this.props,t=e.emoticonStore,n=e.rtLastAckedNewEmoticons,o=t.GetTimeReceivedNewestEmoticon();return o&&(!n||n<o)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.className,o=e.ttip,i=e.useImg,r=[n],a=!1;return t?r.push("disabled"):this.BHaveUnseenEmoticons()&&(a=!0),o&&r.push("ttip"),i?s.a.createElement("span",{onClick:this.OnEmoticonClick},s.a.createElement("img",{src:this.props.useImg,className:m.a.apply(void 0,r),title:this.props.title||Object(u.c)("#ChatEntryButton_Emoticon"),"data-tooltip-text":o})):(r.push(h.a.chatSubmitButton,h.a.EmoticonPickerButton),s.a.createElement("button",{className:m.a.apply(void 0,r),type:"button",onClick:this.OnEmoticonClick,title:this.props.title||Object(u.c)("#ChatEntryButton_Emoticon"),disabled:t,"data-tooltip-text":o},this.props.buttonIcon||s.a.createElement(p.p,null),a&&s.a.createElement(l.c,null)))},Object(o.c)([a.a],t.prototype,"OnEmoticonClick",null),t=Object(o.c)([r.a],t)}(s.a.Component);t.a=f},"S+nL":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUNDNzBFNTUyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUNDNzBFNTYyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Q0M3MEU1MzIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0M3MEU1NDIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv3vUKAAAAAlSURBVHjaYvz//z8DsYARpFhISAivjnfv3jGSp3jUGeQ4AyDAADZHNe2nyOBrAAAAAElFTkSuQmCC"},SEab:function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return _});var o=n("mrSG"),i=n("UqDm"),r=n("1VtQ"),a=n("+M9t"),h=n("LAqV"),s=n("oh5H"),c=n("/SYB"),l=n("5FJe"),p=n("2vnA"),u=n("XaMz"),f=-1,m=function(){function e(e,t,n){this.m_id=e,this.m_rgMembers=[],this.m_fnSort=t,this.m_fnOnUpdate=n}return Object.defineProperty(e.prototype,"id",{get:function(){return this.m_id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return-2==this.m_id?1==this.m_rgMembers.length?Object(s.c)("#FriendGroup_InGame"):Object(s.c)("#FriendGroup_InGame_Others"):0==this.m_id?Object(s.c)("#Chat_MemberGroup_Online"):this.m_id==f?Object(s.c)("#Chat_MemberGroup_PartyBeacon"):this.m_strName?this.m_strName:h.f.AppInfoStore.GetAppInfo(this.m_id).is_initialized?(this.m_strName=h.f.AppInfoStore.GetAppInfo(this.m_id).name,this.m_strName):(h.f.AppInfoStore.RegisterCallbackOnLoad(this.OnAppInfoLoaded),"")},enumerable:!0,configurable:!0}),e.prototype.OnAppInfoLoaded=function(){this.m_strName=h.f.AppInfoStore.GetAppInfo(this.m_id).name,this.m_fnOnUpdate()},Object.defineProperty(e.prototype,"member_list",{get:function(){return this.m_rgMembers},enumerable:!0,configurable:!0}),e.prototype.BReadyToDisplay=function(){return!this.BIsGameGroup()||!!this.name},e.prototype.BIsGameGroup=function(){return 0<this.m_id},e.prototype.ClearMemberList=function(){this.m_rgMembers=[]},e.prototype.BHasMember=function(t){return 0<=this.m_rgMembers.findIndex(function(e){return e.accountid===t})},e.prototype.SetMembers=function(e){this.m_rgMembers=e,this.Sort()},e.prototype.SortedInsert=function(e){Object(u.a)(!this.BHasMember(e.accountid),"Double insert into bucket for accountid",e.accountid),i.h(this.m_rgMembers,e,this.m_fnSort)},e.prototype.Remove=function(t){return i.d(this.m_rgMembers,function(e){return e.accountid===t})},e.prototype.Sort=function(){this.m_rgMembers.sort(this.m_fnSort)},Object(o.c)([r.a],e.prototype,"OnAppInfoLoaded",null),e}(),d=function(){return function(e,t){this.rgRegistered=[],this.bFlatList=void 0,this.mapBuckets=new Map,this.nLastUpdate=0,this.msSpentSorting=0,this.groupSingletons=new m(-2,e,t)}}(),_=function(){function e(){this.m_mapGroupBuckets=new Map,this.m_mapGroupBeacons=new Map,this.m_bShowMembersInGameGroups=void 0,this.LOG=c.b.create(function(){return"CGroupMemberStore"},!1)}return e.prototype.Init=function(){this.m_disposePersonaStateChanged=h.f.FriendStore.AddPersonaStateChangedCallback(this.OnPersonaStateChanged),this.m_disposePlayerGameChanged=h.f.FriendStore.AddPlayerGameChangedCallback(this.OnPlayerGameChanged),h.f.SettingsStore.RunOnReady(this.ListenForSettingsChanges)},e.prototype.ListenForSettingsChanges=function(){var n=this;this.m_bShowMembersInGameGroups=h.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame,Object(p.E)(function(){return h.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame!==n.m_bShowMembersInGameGroups},function(){n.m_mapGroupBuckets.forEach(function(e,t){e.bFlatList=void 0,n.PerformInitialPopulate(t),n.FireMemberListChanged(e)}),n.ListenForSettingsChanges()})},e.prototype.RegisterForGroupMemberList=function(e,t){var n=this;return this.m_mapGroupBuckets.has(t)||(this.m_mapGroupBuckets.set(t,new d(this.FriendSortFunc,function(){n.OnGroupUpdate(t)})),this.PerformInitialPopulate(t)),this.m_mapGroupBuckets.get(t).rgRegistered.push(e),{unregister:function(){return n.UnregisterForGroupMemberList(e,t)}}},e.prototype.OnGroupUpdate=function(e){var t=this.m_mapGroupBuckets.get(e);t&&this.FireMemberListChanged(t)},e.prototype.UnregisterForGroupMemberList=function(e,t){var n=this.m_mapGroupBuckets.get(t);n&&(i.c(n.rgRegistered,e),0==n.rgRegistered.length&&this.m_mapGroupBuckets.delete(t))},e.prototype.GroupSortFunc=function(e,t){return t.id==f&&e.id!=f?1:e.id==f&&t.id!=f?-1:e.id<=0&&t.id<=0?e.id-t.id:e.id<=0&&0<t.id?1:t.id<=0&&0<e.id?-1:t.member_list.length==e.member_list.length&&t.name&&e.name?t.name.localeCompare(e.name):t.member_list.length-e.member_list.length},e.prototype.GetGroupMemberList=function(e){var t=this,n=this.m_mapGroupBuckets.get(e);if(n.bFlatList)return Object(u.a)(1==n.mapBuckets.size,"Flat list has too many buckets"),[n.mapBuckets.get(0)];var o=[];return n.mapBuckets.forEach(function(e){e.BReadyToDisplay()&&(1<e.member_list.length||!t.BucketCanBeSingleton(e))&&o.push(e)}),0<n.groupSingletons.member_list.length&&(n.groupSingletons.Sort(),o.push(n.groupSingletons)),o.sort(this.GroupSortFunc)},e.prototype.SetGroupListFlat=function(e,t){var n=this.m_mapGroupBuckets.get(e);n&&n.bFlatList!=t&&(n.bFlatList=t,this.PerformInitialPopulate(e),this.FireMemberListChanged(n))},e.prototype.ScheduledFireMemberListChanged=function(e){e.hDelayUpdate=void 0,this.FireMemberListChanged(e)},e.prototype.FireMemberListChanged=function(e){var t=this;if(!e.hDelayUpdate){var n=performance.now();if(n-e.nLastUpdate<1e3)return e.hDelayUpdate=SetBackgroundTimeout(function(){return t.ScheduledFireMemberListChanged(e)},1e3),void this.LOG("DELAY UPDATE");e.nLastUpdate=n;for(var o=0,i=e.rgRegistered;o<i.length;o++){(0,i[o])()}}},e.prototype.OnPlayerGameChanged=function(r,a,s){var c=this;this.m_mapGroupBuckets.forEach(function(e,t){var n=h.f.ChatStore.GetChatRoomGroup(t);if(!n.GetMemberPartyBeacon(r)&&n.BHasMember(r)){var o=h.f.FriendStore.GetPlayer(r);if(o.is_appinfo_ready(),c.LOG("OnPlayerGameChanged",o.display_name,a,s),e.bFlatList)return e.mapBuckets.get(0).Remove(r),e.mapBuckets.get(0).SortedInsert(h.f.FriendStore.GetPlayer(r)),void c.FireMemberListChanged(e);if(a==s){var i=s==l.d?e.groupSingletons:e.mapBuckets.get(s);if(i&&i.BHasMember(r))return void c.UpdatePersonaForGroup(t,o)}c.RemoveMemberFromBucket(e,a,r),c.AddMemberToBucketID(e,s,h.f.FriendStore.GetPlayer(r)),c.FireMemberListChanged(e)}})},e.prototype.OnPersonaStateChanged=function(o){var i=this;this.m_mapGroupBuckets.forEach(function(e,t){var n=h.f.ChatStore.GetChatRoomGroup(t);if(n.BHasMember(o.accountid)){if(i.LOG("CGroupMemberStore - persona state",t,o.display_name),e.bReSortPending)return i.LOG(o.display_name,"not ready"),void o.is_appinfo_ready();o.is_appinfo_ready()?i.UpdatePersonaForGroup(n.GetGroupID(),o):(i.LOG("Delay sorting player "+o.accountid),h.f.AppInfoStore.RegisterCallbackOnLoad(i.UpdatePersonaForGroup.bind(i,t,o)))}})},e.prototype.UpdatePersonaForGroup=function(e,t){var n=this.m_mapGroupBuckets.get(e);if(n){var o=performance.now(),i=!1;if(n.bFlatList)Object(u.a)(1==n.mapBuckets.size,"Flat map is too large"),n.mapBuckets.get(0).Remove(t.accountid),n.mapBuckets.get(0).SortedInsert(t),i=!0;else{var r=this.FindCurrentBucketForMember(n,t.accountid);if(void 0!==r){var a=void 0;-2==r?a=n.groupSingletons:1==(a=n.mapBuckets.get(r)).member_list.length&&this.BucketCanBeSingleton(a)&&(a=n.groupSingletons),(1<a.member_list.length||!this.BucketCanBeSingleton(a))&&(this.LOG("Resorting user",t.display_name,"in bucket",r),a.Remove(t.accountid),a.SortedInsert(t),i=!0)}}var s=performance.now();n.msSpentSorting+=s-o,this.LOG(e+": Resort user "+t.display_name+" took "+(s-o)+"ms (total "+n.msSpentSorting+"ms)"),i&&this.FireMemberListChanged(n)}},e.prototype.OnPartyBeaconsUpdated=function(e,t){this.m_mapGroupBeacons.set(e,t);var n=this.m_mapGroupBuckets.get(e),o=[],i=!1;if(n){for(var r=0,a=t;r<a.length;r++){var s=a[r];o.push(s.account_id);var c=this.FindCurrentBucketForMember(n,s.account_id);if(c!=f)(m=h.f.FriendStore.GetPlayer(s.account_id)).is_appinfo_ready(),i=!0,this.RemoveMemberFromBucket(n,c,s.account_id),this.AddMemberToBucketID(n,f,m)}var l=n.mapBuckets.get(f);if(l)for(var p=0,u=l.member_list;p<u.length;p++){var m=u[p];if(-1==o.indexOf(m.accountid)){i=!0;var d=this.GetBucketIdForPlayer(n,m,e);this.RemoveMemberFromBucket(n,f,m.accountid),this.AddMemberToBucketID(n,d,m)}}i&&this.ReSortGroup(e)}},e.prototype.ReSortGroup=function(e){var t=this.m_mapGroupBuckets.get(e);if(t){if(t.bFlatList){Object(u.a)(1==t.mapBuckets.size,"Flat list has too many buckets");var n=performance.now(),o=t.mapBuckets.get(0);o.Sort();var i=performance.now();t.msSpentSorting+=i-n,this.LOG(e+": List ReSort took "+(i-n)+"ms (total "+t.msSpentSorting+"ms) for "+o.member_list.length+" members")}else t.mapBuckets.get(0).Sort(),t.groupSingletons.Sort();t.bReSortPending=!1,this.FireMemberListChanged(t)}},e.prototype.FriendSortFunc=function(e,t){var n=a.b.FriendSortStatusComparator(e,t);if(0!=n)return n;if(e.persona.is_ingame&&t.persona.is_ingame){if(e.persona.is_in_nonsteam_game){if(!t.persona.is_in_nonsteam_game)return 1}else if(t.persona.is_in_nonsteam_game)return-1;var o=e.current_game_name,i=t.current_game_name;if(o){if(!i)return-1;if(o!=i)return o<i?-1:1}else if(i)return 1}return e.display_name.localeCompare(t.display_name)},e.prototype.PerformInitialPopulate=function(e){var t=this,n=this.m_mapGroupBuckets.get(e);n.mapBuckets.clear(),n.groupSingletons.ClearMemberList(),Object(u.a)(n,"PerformInitialPopulate didn't find group");var o=performance.now(),i=h.f.ChatStore.GetChatRoomGroup(e).memberList.member_list_unsorted.slice();if(void 0===n.bFlatList&&(n.bFlatList=100<i.length||!h.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame),n.bFlatList){i.forEach(function(e){e.is_appinfo_ready()});var r=new m(0,this.FriendSortFunc,function(){t.FireMemberListChanged(n)});r.SetMembers(i),n.mapBuckets.set(0,r)}else for(var a=0,s=i;a<s.length;a++){var c=s[a],l=this.GetBucketIdForPlayer(n,c,e);this.AddMemberToBucketID(n,l,c)}h.f.AppInfoStore.BHavePendingAppInfoRequests()&&(n.bReSortPending=!0,h.f.AppInfoStore.RegisterCallbackOnLoad(this.ReSortGroup.bind(this,e)));var p=performance.now();n.msSpentSorting+=p-o,this.LOG("List sort took "+(p-o)+" ms for "+i.length+" members of group "+e)},e.prototype.FindCurrentBucketForMember=function(e,t){var n=void 0;return e.mapBuckets.forEach(function(e){e.BHasMember(t)&&(n=e.id)}),void 0!==n?n:e.groupSingletons.BHasMember(t)?-2:void 0},e.prototype.BIsMemberInAnyBucket=function(e,t){return void 0!==this.FindCurrentBucketForMember(e,t)},e.prototype.AddMemberToBucketID=function(e,t,n){var o=this;if(Object(u.a)(!this.BIsMemberInAnyBucket(e,n.accountid),"Trying to double add accountid",n.accountid,"which is already in bucket",this.FindCurrentBucketForMember(e,n.accountid)),Object(u.a)(!e.bFlatList||0==t,"Trying to add to non-default bucket in flat list"),-2!=t)if(e.mapBuckets.has(t)){if(!e.bFlatList)1==(i=e.mapBuckets.get(t)).member_list.length&&this.BucketCanBeSingleton(i)&&this.RemoveFromSingletons(e,i.member_list[0].accountid);e.mapBuckets.get(t).SortedInsert(n)}else{var i;(i=new m(t,this.FriendSortFunc,function(){o.FireMemberListChanged(e)})).SortedInsert(n),e.mapBuckets.set(t,i),!e.bFlatList&&this.BucketCanBeSingleton(i)&&this.AddToSingletons(e,n)}else this.AddToSingletons(e,n)},e.prototype.BucketCanBeSingleton=function(e){return e.id!=f&&0!=e.id},e.prototype.AddToSingletons=function(e,t){Object(u.a)(!e.bFlatList,"Adding to singletons in flat list"),e.groupSingletons.SortedInsert(t)},e.prototype.RemoveFromSingletons=function(e,t){return Object(u.a)(!e.bFlatList,"Removing from singletons in flat list"),e.groupSingletons.Remove(t)},e.prototype.GetBucketIdForPlayer=function(e,t,n){if(e.bFlatList)return 0;var o=this.m_mapGroupBeacons.get(n);if(o&&o.find(function(e){return e.account_id==t.accountid}))return f;return t.persona.is_ingame?t.persona.is_in_nonsteam_game?-2:t.persona.m_unGamePlayedAppID:t.persona.m_broadcastAppId?t.persona.m_broadcastAppId:0},e.prototype.RemoveMemberFromBucket=function(e,t,n){if(-2==t)return this.RemoveFromSingletons(e,n),!0;var o=e.mapBuckets.get(t);return!(!o||!o.Remove(n))&&(0==o.member_list.length?(this.RemoveFromSingletons(e,n),this.LOG("Deleting bucket",t),e.mapBuckets.delete(t)):1==o.member_list.length&&!e.bFlatList&&this.BucketCanBeSingleton(o)&&(this.LOG("Removing member, adding",o.member_list[0].accountid,"to singletons"),this.AddToSingletons(e,o.member_list[0])),!0)},e.prototype.AddUserAndFireCallback=function(e,t,n){var o=h.f.FriendStore.GetPlayer(t),i=this.GetBucketIdForPlayer(e,o,n);this.AddMemberToBucketID(e,i,o),this.FireMemberListChanged(e)},e.prototype.OnMemberAdded=function(e,t){var n=this.m_mapGroupBuckets.get(e);n&&this.AddUserAndFireCallback(n,t,e)},e.prototype.OnMemberRemoved=function(e,t){var n=this.m_mapGroupBuckets.get(e);if(n){for(var o=0,i=Array.from(n.mapBuckets.keys());o<i.length;o++){var r=i[o];if(this.RemoveMemberFromBucket(n,r,t))return void this.FireMemberListChanged(n)}this.RemoveMemberFromBucket(n,-2,t)&&this.FireMemberListChanged(n)}},Object(o.c)([r.a],e.prototype,"ListenForSettingsChanges",null),Object(o.c)([r.a],e.prototype,"OnPlayerGameChanged",null),Object(o.c)([r.a],e.prototype,"OnPersonaStateChanged",null),Object(o.c)([r.a],e.prototype,"OnPartyBeaconsUpdated",null),e}()},SOfK:function(e,t,n){e.exports={PreMessage:"messages_PreMessage_1jeo-",CodeMessage:"messages_CodeMessage_1Fe4I",QuoteMessage:"messages_QuoteMessage_33jrq"}},TA9H:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return m});var o=n("mrSG"),r=n("4HGb"),i=n("OJz+"),a=n("HxRt"),s=n("LAqV"),c=n("2vnA"),l=n("UqDm"),p=n("XaMz");function u(e,t){return e==t||e&&t&&e.friend==t.friend&&e.clan==t.clan&&e.chat==t.chat}var m=function(){function e(e){var t=this;this.m_rgFavorites=c.x.array(),this.m_IncomingFavoritesHandler=Object(i.d)(a.e.FavoritesChangedHandler,function(e){return t.RecvFavoritesList(e.Body().favorites()),1}),this.m_FriendStore=e,this.m_ClanStore=e.ClanStore}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_ChatStore=s.f.ChatStore,this.m_CMInterface.AddOnLogonCallback(function(){var e=r.b.Init(a.b);a.f.GetFavorites(t.m_CMInterface.GetServiceTransport(),e).then(function(e){1==e.GetEResult()&&t.RecvFavoritesList(e.Body().favorites())})},47)},e.prototype.BIsFavorited=function(e){for(var t=0,n=this.m_rgFavorites;t<n.length;t++){if(u(n[t],e))return!0}return!1},Object.defineProperty(e.prototype,"favorites",{get:function(){return this.m_rgFavorites},enumerable:!0,configurable:!0}),e.prototype.AddToFavorites=function(t,e){var n=this.m_rgFavorites.findIndex(function(e){return u(e,t)});return-1===n||void 0!==e&&n!==e?(-1!==n?l.e(this.m_rgFavorites,n,n<e?e-1:e):void 0!==e?this.m_rgFavorites.splice(e,0,t):this.m_rgFavorites.push(t),this.SaveFavorites()):Promise.resolve(!0)},e.prototype.RemoveFromFavorites=function(t){return l.d(this.m_rgFavorites,function(e){return u(e,t)})?this.SaveFavorites():Promise.resolve(!0)},e.prototype.OnFriendRemoved=function(e){var t=this.m_FriendStore.GetPlayer(e);this.RemoveFromFavorites({friend:t})},e.prototype.SaveFavorites=function(){for(var e=r.b.Init(a.d),t=0,n=this.m_rgFavorites;t<n.length;t++){var o=n[t],i=e.Body().add_favorites();o.friend?i.set_accountid(o.friend.accountid):o.clan?i.set_clanid(o.clan.clanid):o.chat?i.set_chat_group_id(o.chat.GetGroupID()):Object(p.a)(!1,"empty favorite struct")}return a.f.SetFavorites(this.m_CMInterface.GetServiceTransport(),e).then(function(e){return 1==e.GetEResult()})},e.prototype.ReadFavorites=function(e){this.m_rgFavorites.clear();for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o.accountid()){var i=this.m_FriendStore.GetFriend(o.accountid());i&&this.m_rgFavorites.push({friend:i})}else if(o.clanid()){var r=this.m_ClanStore.GetClan(o.clanid());r&&this.m_rgFavorites.push({clan:r})}else if(o.chat_group_id()){var a=this.m_ChatStore.GetChatRoomGroup(o.chat_group_id());a&&this.m_rgFavorites.push({chat:a})}}},e.prototype.RecvFavoritesList=function(e){var t=this;Object(c.E)(function(){return t.m_FriendStore.friends_list_ready&&t.m_ChatStore.chat_group_list_ready},this.ReadFavorites.bind(this,e))},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_friends_favorite_count(l.b(this.m_rgFavorites,function(e){return!!e.friend})),e.metrics().set_group_chat_favorite_count(l.b(this.m_rgFavorites,function(e){return!!e.chat||!!e.clan}))},Object(o.c)([c.g],e.prototype,"AddToFavorites",null),Object(o.c)([c.g],e.prototype,"RemoveFromFavorites",null),Object(o.c)([c.g],e.prototype,"OnFriendRemoved",null),Object(o.c)([c.g],e.prototype,"ReadFavorites",null),e}()},TY1L:function(e,t,n){e.exports={LoginDialog:"login_LoginDialog_1AiEN",AccountPasswordPanel:"login_AccountPasswordPanel_qEDoX",LoginPanelBackground:"login_LoginPanelBackground_1OIQT",LoginPanelContent:"login_LoginPanelContent_2f9PO",ErrorMessage:"login_ErrorMessage_1iM0s",AccountPasswordForm:"login_AccountPasswordForm_1Qq0T",AuthenticationPanel:"login_AuthenticationPanel_1-8sv",AccountNameLabel:"login_AccountNameLabel_2bgVa",MedName:"login_MedName_13-91",LargeName:"login_LargeName_tfWYS",PasswordDots:"login_PasswordDots_at615",MedPass:"login_MedPass_3k9SP",LargePass:"login_LargePass_1xBFu",AccountFieldHeader:"login_AccountFieldHeader_iW_Im",PasswordFieldHeader:"login_PasswordFieldHeader_2XPUQ",NeedHelpLink:"login_NeedHelpLink_TXivN",NeedHelpHighlight:"login_NeedHelpHighlight_w-u5P",CreateAccountLink:"login_CreateAccountLink_210gd",LoginCreateSeperator:"login_LoginCreateSeperator_1jJwP",RefreshCaptchaText:"login_RefreshCaptchaText_uH2zO",SigningInAccountName:"login_SigningInAccountName_3PzFM",SigninTitle:"login_SigninTitle_wNkza",RememberMeCheck:"login_RememberMeCheck_1GhRU",SteamUpsellContainer:"login_SteamUpsellContainer_ACnPK",SteamUpsell:"login_SteamUpsell_3bePc",CaptchaContainer:"login_CaptchaContainer_1W85e",CaptchaBlock:"login_CaptchaBlock_2NMvn",CaptchaImageAndInput:"login_CaptchaImageAndInput_3u7iL",CaptchaImageBox:"login_CaptchaImageBox_we1G3",CaptchaImage:"login_CaptchaImage_16f5d",CaptchaInput:"login_CaptchaInput_1y9KG",AuthenticatorInputcontainer:"login_AuthenticatorInputcontainer_1emeo",Highlight:"login_Highlight_2FzBS",LoginComplete:"login_LoginComplete_CDuZt"}},UDpV:function(e,t,n){e.exports={chatEntryControls:"chatentry_chatEntryControls_2O_X7",chatTextarea:"chatentry_chatTextarea_3e__5",chatEntryActionsGroup:"chatentry_chatEntryActionsGroup_15mWd",chatEntryActionsContainer:"chatentry_chatEntryActionsContainer_WZNUD",minHeightZero:"chatentry_minHeightZero_NcZQ_",chatSubmitButton:"chatentry_chatSubmitButton_3VRfL",EmbedButton:"chatentry_EmbedButton_1vvRh",EmoticonPickerButton:"chatentry_EmoticonPickerButton_3fgX0",disabled:"chatentry_disabled_2p2vW",Inactive:"chatentry_Inactive_gFWg4",AudioLines:"chatentry_AudioLines_3fUht",Active:"chatentry_Active_224Fj"}},UMCL:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var o=n("mrSG"),i=n("q1tI"),R=n("/IDK"),r=function(t){function e(e){return t.call(this,e)||this}return Object(o.d)(e,t),e.prototype.render=function(){if(null==this.props.text)return i.createElement(i.Fragment,null,this.props.children);var e;if(e=this.props.text instanceof Array?this.props.text.map(function(e){return e?e.toString():""}).filter(function(e){return 0<e.length}).join("\n"):this.props.text.toString(),1!=i.Children.count(this.props.children))return console.log("Error: CopyableText must be the parent of exactly one child:\n\tcopystyle="+this.props.style+" copytext="+e),i.createElement(i.Fragment,null,this.props.children);var t=i.Children.only(this.props.children);return i.cloneElement(t,{"data-copystyle":this.props.style,"data-copytext":e})},e.defaultProps={text:""},e}(i.Component);function a(e){for(var t=e.cloneContents(),n="",o="",i=!1,r=(t.querySelector("[data-activechat=true]")||t).querySelectorAll("[data-copytext]"),a=Array.from(r).map(function(e){return e.getAttribute("data-copystyle")||"msg"}),s=0;s<r.length;++s){var c=r[s],l=a[s];if(!(s+1<r.length&&R.d(c,r[s+1]))){var p=c.tagName.toLowerCase(),u=l.includes("block"),m=l.includes("timestamp"),d=l.includes("server"),h=l.includes("invite"),f=l.includes("emote"),_=l.includes("no-prefix"),g=l.includes("no-suffix"),b=l.includes("allow-embedded-newlines"),v=l.includes("block-continue"),S=l.includes("merge-adjacent"),y=l.includes("force-display"),C=l.includes("prepend-innertext"),O=l.includes("append-innertext"),I=l.includes("prepend-newline"),E=l.includes("append-newline"),w=l.includes("speaker");if(!y){var M=null!=p.match(/img|iframe/),D=null!=c.querySelector("img,iframe");if(!c.innerText&&!M&&!D)continue}S&&(0<s&&a[s-1].includes("merge-adjacent")&&(_=!0),s+1<a.length&&a[s+1].includes("merge-adjacent")&&(g=!0)),w&&(i=!0);var T="";m||w||d||h||f?(0!=n.length&&(T+="\n"),(d||h)&&(T+="\t\t")):(i&&(T+="\t"),o.includes("msg")&&u&&(I=!0),o.includes("block")&&!v&&(I=!0));var G=c.getAttribute("data-copytext");0==G.length?G=c.innerText:C&&0<c.innerText.length?G=c.innerText+(l.includes("-with-newline")?"\n":" ")+G:O&&0<c.innerText.length&&(G+=(l.includes("-with-newline")?"\n":" ")+c.innerText),0!=G.length&&(I&&(n+="\n"),_||(n+=T),n+=b?G:G.replace(/\n/g,"\n"+T),g||(n+="\n"),E&&(n+="\n")),o=l}}if(0!=n.length)return n}function s(e){var t,n=document.createRange();n.selectNode(e),t=a(n),R.i(t)}},UqDm:function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return p});n("XaMz");function o(e,t,n){t<0||n<0||(n>=e.length&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]))}function i(e,t){return r(e,function(e){return t==e})}function r(e,t){var n=e.findIndex(t);return 0<=n&&(e.splice(n,1),!0)}function a(e,i){return e.reduce(function(e,t,n,o){return e+(i(t,n,o)?1:0)},0)}function s(e,t){return e.filter(function(e){return t!==e})}function c(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function l(e,t,n){for(var o=0,i=e.length-1;o<=i;){var r=Math.floor((o+i)/2),a=n(e[r],t);if(a<0)o=r+1;else if(0<a)i=r-1;else{if(i==r)return r;if(r==o)return r<i&&n(t,e[r+1])<0?r:r+1;o=r}}return i}function p(e,t,n){var o=l(e,t,n);e.splice(o+1,0,t)}},V7Fl:function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"d",function(){return I}),n.d(t,"a",function(){return E}),n.d(t,"c",function(){return D});var a=n("mrSG"),o=n("UqDm"),i=n("2lpH"),r=n.n(i),s=n("/SYB"),c=n("5Nu3"),l=n("rsEv"),p=n("s+DT"),u=n("3zHc"),m=n("2vnA"),d=n("oh5H"),h=n("4HGb"),f=n("RBVV"),_=n("+M9t"),g=n("LAqV"),b=n("Kqva"),v=n("tkkQ"),S=n("XaMz");var y=function(){function e(e,t){void 0===e&&(e=20),this.m_rank=e,this.m_role_ids=t}return e.prototype.BHasRole=function(t){return-1!=this.m_role_ids.findIndex(function(e){return e==t})},Object(a.c)([m.x],e.prototype,"m_rank",void 0),Object(a.c)([m.x],e.prototype,"m_role_ids",void 0),e}(),C=function(){function e(e){this.m_roleActions=new f.a,this.m_roleActions=e}return e.prototype.BCanPerformAction=function(e){switch(e){case 1:return this.m_roleActions.can_create_rename_delete_channel();case 2:return this.m_roleActions.can_kick();case 3:return this.m_roleActions.can_ban();case 4:return this.m_roleActions.can_invite();case 5:return this.m_roleActions.can_change_tagline_avatar_name();case 6:return this.m_roleActions.can_chat();case 8:return this.m_roleActions.can_change_group_roles();case 9:return this.m_roleActions.can_change_user_roles();case 10:return this.m_roleActions.can_mention_all();case 11:return this.m_roleActions.can_set_watching_broadcast();default:return!1}},e.prototype.SetCanPerformAction=function(e,t){switch(e){case 1:this.m_roleActions.set_can_create_rename_delete_channel(t);break;case 2:this.m_roleActions.set_can_kick(t);break;case 3:this.m_roleActions.set_can_ban(t);break;case 4:this.m_roleActions.set_can_invite(t);break;case 5:this.m_roleActions.set_can_change_tagline_avatar_name(t);break;case 6:this.m_roleActions.set_can_chat(t);break;case 8:this.m_roleActions.set_can_change_group_roles(t);break;case 9:this.m_roleActions.set_can_change_user_roles(t);break;case 10:this.m_roleActions.set_can_mention_all(t);break;case 11:this.m_roleActions.set_can_set_watching_broadcast(t)}},e.prototype.toString=function(){var e=this.role_id;return this.m_roleActions.can_create_rename_delete_channel()&&(e+=" CreateRenameDeleteChannel"),this.m_roleActions.can_kick()&&(e+=" Kick"),this.m_roleActions.can_ban()&&(e+=" Ban"),this.m_roleActions.can_invite()&&(e+=" Invite"),this.m_roleActions.can_change_tagline_avatar_name()&&(e+=" ChangeTaglineAvatarName"),this.m_roleActions.can_chat()&&(e+=" Chat"),this.m_roleActions.can_change_group_roles()&&(e+=" ChangeGroupRoles"),this.m_roleActions.can_change_user_roles()&&(e+=" ChangeUserRoles"),e},Object.defineProperty(e.prototype,"role_id",{get:function(){return this.m_roleActions.role_id()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roleActions",{get:function(){return this.m_roleActions},enumerable:!0,configurable:!0}),e}(),O=function(){function e(e,t){var n=this;this.LOG=s.b.create(function(){return n.unique_id},!1),this.m_chatStore=null,this.m_ulGroupID="",this.m_ulDefaultChatID="",this.m_rtTimeJoined=0,this.m_rtLastAck=0,this.m_bFullStateLoaded=!1,this.m_strName="",this.m_strTagLine="",this.m_strAvatarSHA="",this.m_strWatchingBroadcastChannelID="",this.m_mapRooms=m.x.map(null,{deep:!1}),this.m_rgPartyBeacons=[],this.m_eUserDesktopNotificationLevel=4,this.m_eUserMobileNotificationLevel=4,this.m_bUnreadIndicatorMuted=!1,this.m_roles=[],this.m_roleActions=[],this.m_groupMembers=new T,this.m_cMemberSummaryCount=0,this.m_chatStore=e,this.m_ulGroupID=t}return e.prototype.BIsValid=function(){return 0<this.m_mapRooms.size},e.prototype.IsNamedGroupChat=function(){return!!this.m_strName||this.BIsClanChatRoom()},e.prototype.GetOwnerAccountID=function(){return this.m_unOwnerAccountID},e.prototype.BIsAccountIDOwner=function(e){return this.BIsClanChatRoom()?50==this.GetMemberRankIfPresent(e):this.GetOwnerAccountID()==e},e.prototype.SetOwnerAppID=function(e){e||(e=0),this.m_unAppID!=e&&(this.m_unAppID=e,this.m_unAppID&&(g.f.AppInfoStore.GetAppInfo(this.m_unAppID),g.f.AppInfoStore.GetRichPresenceLoc(this.m_unAppID)))},e.prototype.GetOwnerAppID=function(){return this.m_unAppID},Object.defineProperty(e.prototype,"name",{get:function(){if(this.m_strName||this.BIsClanChatRoom())return this.m_strName;var e=this.members_to_highlight_name,t=e.members;if(!t.length)return e.remaining_count?Object(d.c)("#ChatRoom_GenericWithOthers",e.remaining_count):Object(d.c)("#ChatRoom_GenericEmpty");switch(t.length){case 1:return 0<e.remaining_count?Object(d.c)("#ChatRoom_OneFriendPlusMore",t[0].display_name,e.remaining_count):Object(d.c)("#ChatRoom_OneFriend",t[0].display_name);case 2:return 0<e.remaining_count?Object(d.c)("#ChatRoom_TwoPlusMore",t[0].display_name,t[1].display_name,e.remaining_count):Object(d.c)("#ChatRoom_TwoFriends",t[0].display_name,t[1].display_name);case 3:return Object(d.c)("#ChatRoom_ThreeFriends",t[0].display_name,t[1].display_name,t[2].display_name);default:return Object(S.a)(!1,"unexpected number of friends: "+t.length),""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagline",{get:function(){return this.m_strTagLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatarSHA",{get:function(){return this.m_strAvatarSHA},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_steamid",{get:function(){return this.m_unWatchingBroadcastAccountID?p.a.InitFromAccountID(this.m_unWatchingBroadcastAccountID):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_channel_id",{get:function(){return this.m_strWatchingBroadcastChannelID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAvatar",{get:function(){return 0<this.m_strAvatarSHA.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasIcon",{get:function(){return this.hasAvatar||0!=this.m_unAppID},enumerable:!0,configurable:!0}),e.prototype.GetAvatarOrAppIconURL=function(e){if(!this.m_strAvatarSHA&&this.m_unAppID){var t=g.f.AppInfoStore.GetAppInfo(this.m_unAppID);if(t.is_valid&&t.icon_url)return t.icon_url}return n=this.m_strAvatarSHA,o=(o=e)<=32?32:o<=64?64:256,v.a.MEDIA_CDN_COMMUNITY_URL+"images/chaticons/"+n.substr(0,2)+"/"+n.substr(2,2)+"/"+n.substr(4,2)+"/"+n+"_"+o+".jpg";var n,o},Object.defineProperty(e.prototype,"avatar_url_small",{get:function(){return this.GetAvatarOrAppIconURL(32)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.GetAvatarOrAppIconURL(64)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.GetAvatarOrAppIconURL(256)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCountTotal",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyToRender",{get:function(){return this.m_bFullStateLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCountOnline",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.member_counts.online:this.memberCountTotal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCountInGame",{get:function(){return this.m_groupMembers.member_counts.ingame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberList",{get:function(){return this.m_groupMembers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"cg"+this.m_ulGroupID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeJoined",{get:function(){return this.m_rtTimeJoined},enumerable:!0,configurable:!0}),e.prototype.GetGroupID=function(){return this.m_ulGroupID},e.prototype.GetDefaultChatID=function(){return this.m_ulDefaultChatID},e.prototype.BIsClanChatRoom=function(){return!!this.m_unClanID},e.prototype.BIsVoiceChannel=function(e){var t=this.GetChatRoom(e);return null!=t&&(t.GetVoiceAllowed()&&t.GetRoomID()!=this.GetDefaultChatID())},e.prototype.BIsTempVoiceChannel=function(e){var t=this.GetChatRoom(e);return t&&t.IsTempVoiceRoom()},e.prototype.GetClanID=function(){return this.m_unClanID},Object.defineProperty(e.prototype,"chatRoomList",{get:function(){var e=Array.from(this.m_mapRooms.values());return e.sort(function(e,t){if(e.GetSortOrder()<t.GetSortOrder())return-1;if(e.GetSortOrder()>t.GetSortOrder())return 1;var n=r.a.fromString(e.GetRoomID()),o=r.a.fromString(t.GetRoomID());return n.lessThan(o)?-1:n.greaterThan(o)?1:0}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textRoomList",{get:function(){var t=this;return this.chatRoomList.filter(function(e){return!e.GetVoiceAllowed()||e.GetRoomID()==t.GetDefaultChatID()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceRoomList",{get:function(){return this.chatRoomList.filter(function(e){return e.GetVoiceAllowed()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasVoiceRoom",{get:function(){for(var e,t=this.m_mapRooms.values();(e=t.next())&&!e.done;)if(e.value.GetVoiceAllowed())return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.GetDesktopNotificationLevel=function(e){return void 0===e&&(e=!1),0==this.m_eUserDesktopNotificationLevel?this.BIsClanChatRoom()?3:4:this.m_eUserDesktopNotificationLevel},e.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eUserMobileNotificationLevel?3:this.m_eUserMobileNotificationLevel},e.prototype.BIsUnreadIndicatorMuted=function(){return this.m_bUnreadIndicatorMuted},Object.defineProperty(e.prototype,"hasUnreadChatMessage",{get:function(){for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){var n=t[e];if((this.m_bUnreadIndicatorMuted?n.has_unread_messages:n.has_any_unread_messages)&&(n.BIsDefaultRoom()||n.time_last_ack>=this.m_rtLastAck||n.time_last_mention>this.m_rtLastAck))return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HasUnreadMention",{get:function(){for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){if(t[e].has_unread_mention)return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.GetChatRoomsWithUnreadPriorityMessages=function(t){this.m_mapRooms.forEach(function(e){e.has_unread_priority_messages&&t.push(e)})},Object.defineProperty(e.prototype,"time_last_activity",{get:function(){var n=this,o=0,i=0;this.m_mapRooms.forEach(function(e){if(e.BShouldTrackUnreadMessages()){var t=e.time_last_activity;t>n.m_rtLastAck?i=0==i?t:Math.min(t,i):o=Math.max(t,o)}});var e=i;return e||(e=o),this.m_rtTimeJoined>e&&(e=this.m_rtTimeJoined),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"room_with_last_message",{get:function(){var t,n=0;return this.m_mapRooms.forEach(function(e){n<e.time_last_message&&(n=(t=e).time_last_message)}),t},enumerable:!0,configurable:!0}),e.prototype.BHasEverBeenAcked=function(){if(this.m_rtLastAck)return!0;for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){if(t[e].time_last_ack)return!0}return!1},e.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastAck<e&&(this.m_rtLastAck=e)},e.prototype.IsInRoom=function(e){return Object(S.a)(this.m_bFullStateLoaded,"Group state not fully loaded"),this.m_groupMembers.HasMember(e)},e.prototype.BRoomContainsJustTheseFriendsAndSelf=function(e){if(!this.BIsCurrentUserAMember())return!1;if(this.memberCountTotal!=e.length+1)return!1;for(var t=!0,n=0,o=e;n<o.length;n++){var i=o[n];if(this.m_rgGroupMembersSummary.indexOf(i)<0){t=!1;break}}return t},e.prototype.GetMyRank=function(){return this.GetMemberRank(this.m_chatStore.CMInterface.steamid.GetAccountID())},e.prototype.ChangeMemberRank=function(e,t){Object(S.a)(this.m_groupMembers.HasMember(e),"ChangeMemberRank: missing member"),this.m_groupMembers.GetExtra(e).m_rank=t},e.prototype.GetMemberRank=function(e){Object(S.a)(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var t=this.m_groupMembers.GetExtra(e);return t&&0!=t.m_rank?t.m_rank:this.BIsClanChatRoom()?0:20},e.prototype.GetMemberRankIfPresent=function(e){var t=this.m_groupMembers.GetExtra(e);return t?t.m_rank:0},e.prototype.GetMemberPartyBeacon=function(t){return this.m_rgPartyBeacons.find(function(e){return e.account_id==t})},e.prototype.ChangeMemberRoles=function(e,t){Object(S.a)(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var n=this.m_groupMembers.GetExtra(e);n&&(n.m_role_ids=t)},e.prototype.GetMemberRankString=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return Object(d.c)("#Chat_rank_owner");case 40:return Object(d.c)("#Chat_rank_officer");case 30:return Object(d.c)("#Chat_rank_moderator");case 20:return Object(d.c)("#Chat_rank_member");case 15:return Object(d.c)("#Chat_rank_guest");case 10:return Object(d.c)("#Chat_rank_viewer");case 0:return"";default:return Object(d.c)("#Chat_rank_unknown")}},e.prototype.GetMemberRankStringUnlocalized=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return"Owner";case 40:return"Officer";case 30:return"Moderator";case 20:return"Member";case 15:return"Guest";case 10:return"Viewer";case 0:return"DefaultRank";default:return Object(d.c)("UnknownRank")}},e.prototype.GetMember=function(e){if(this.IsInRoom(e))return this.m_chatStore.FriendStore.GetPlayer(e);this.m_bFullStateLoaded},e.prototype.SetInitialGroupState=function(e){Object(S.a)(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateGroupStateFromSummary(e),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.UpdateGroupStateFromSummary=function(e){this.m_strTagLine=e.chat_group_tagline(),null!=e.chat_group_avatar_sha()&&(this.m_strAvatarSHA=Object(b.a)(e.chat_group_avatar_sha())),this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_strWatchingBroadcastChannelID=e.watching_broadcast_channel_id(),this.m_cMemberSummaryCount=e.active_member_count(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_rgGroupMembersSummary=e.top_members(),this.m_defaultRoleID=e.default_role_id(),this.m_roleActions=e.role_actions().map(function(e){return new C(e)}),this.m_groupMembers.AddMember(g.f.CMInterface.steamid.GetAccountID(),new y(e.rank(),e.role_ids())),this.SetOwnerAppID(e.appid()),this.SetNameCheckingForAppLocalization(e.chat_group_name()),this.m_rgPartyBeacons=e.party_beacons().map(function(e){return{account_id:new p.a(e.steamid_owner()).GetAccountID(),app_id:e.app_id(),beacon_id:e.beacon_id(),game_metadata:e.game_metadata()}}),g.f.GroupMemberStore.OnPartyBeaconsUpdated(this.m_ulGroupID,this.m_rgPartyBeacons)},e.prototype.SetNameCheckingForAppLocalization=function(e){var o=this,i=null;!this.m_unOwnerAccountID&&this.GetOwnerAppID()&&("#"==e[0]?i={tok:e}:"{"==e[0]&&(i=JSON.parse(e))),i&&i.tok?(this.m_strName="...",g.f.AppInfoStore.GetRichPresenceLocAsync(this.GetOwnerAppID()).then(function(e){var t=new Map;if(i.params)for(var n in i.params)t.set(n.toString(),i.params[n].toString());o.m_strName=e.Localize(i.tok,t)})):this.m_strName=e},e.prototype.UpdateGroupState=function(e){Object(S.a)(e.header_state().chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateChatRoomHeaderState(e.header_state()),this.m_groupMembers.Clear();for(var t=[],n=0,o=e.members();n<o.length;n++){var i=o[n],r=i.accountid();this.m_groupMembers.AddMember(r,new y(i.rank(),i.role_ids())),t.length<10&&t.push(r)}(!this.m_rgGroupMembersSummary||this.m_rgGroupMembersSummary.length<t.length)&&(this.m_rgGroupMembersSummary=t),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms()),this.m_bFullStateLoaded=!0},e.prototype.UnloadActiveGroupState=function(){this.UnloadGroupState(),this.m_mapRooms.forEach(function(e){e.UnloadActiveChatState()})},e.prototype.UnloadGroupState=function(){this.m_bFullStateLoaded=!1,this.m_groupMembers.Clear()},e.prototype.UnloadAndResetGroupState=function(){this.UnloadGroupState(),this.UpdateUserState(new f.T),this.m_mapRooms.forEach(function(e){e.UnloadChatState()})},e.prototype.OnUserStateChange=function(e,t){var n=e.accountid();1==t?(this.LOG("new member "+n+" roles ["+e.role_ids().toString()+"]"),this.m_groupMembers.AddMember(n,new y(e.rank(),e.role_ids())),g.f.GroupMemberStore.OnMemberAdded(this.m_ulGroupID,n),this.m_rgGroupMembersSummary.length<10&&-1==this.m_rgGroupMembersSummary.indexOf(n)&&(this.m_rgGroupMembersSummary=Object(a.g)(this.m_rgGroupMembersSummary,[n]))):2==t||3==t||10==t?(this.m_groupMembers.RemoveMember(n),g.f.GroupMemberStore.OnMemberRemoved(this.m_ulGroupID,n),-1!==this.m_rgGroupMembersSummary.indexOf(n)&&(this.m_rgGroupMembersSummary=o.a(this.m_rgGroupMembersSummary,n))):7==t?this.ChangeMemberRank(n,e.rank()):12==t&&this.ChangeMemberRoles(n,e.role_ids())},e.prototype.UpdateChatRoomState=function(e,t){var n=this;this.m_ulDefaultChatID=e;var o=new Set;this.m_mapRooms.forEach(function(e,t){return o.add(t)});for(var i=0,r=t;i<r.length;i++){var a=r[i],s=a.chat_id();o.delete(s);var c=this.m_mapRooms.get(s);c||(c=new l.a(this.m_chatStore,this,s,s==e),this.m_mapRooms.set(s,c)),c.UpdateChatState(a)}o.forEach(function(e){return n.m_mapRooms.delete(e)})},e.prototype.UpdateUserState=function(e){for(var t=0,n=e.user_chat_room_state();t<n.length;t++){var o=n[t],i=o.chat_id(),r=this.m_mapRooms.get(i);r&&r.UpdateUserState(o)}this.m_rtTimeJoined=e.time_joined(),this.m_rtLastAck=e.time_last_group_ack(),this.m_eUserDesktopNotificationLevel=e.desktop_notification_level(),this.m_eUserMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted()},e.prototype.UpdateChatRoomHeaderState=function(e){Object(S.a)(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.m_strTagLine=e.tagline(),null!=e.avatar_sha()&&(this.m_strAvatarSHA=Object(b.a)(e.avatar_sha())),this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_defaultRoleID=e.default_role_id(),this.m_roles=e.roles().map(function(e){return{role_id:e.role_id(),name:e.name(),ordinal:e.ordinal()}});for(var t=0,n=this.m_roles;t<n.length;t++){var o=n[t];this.LOG("role "+o.role_id+" "+o.name)}this.m_roleActions=e.role_actions().map(function(e){return new C(e)});for(var i=0,r=this.m_roleActions;i<r.length;i++){var a=r[i];this.LOG("role/action "+a.toString())}this.SetOwnerAppID(e.appid()),this.SetNameCheckingForAppLocalization(e.chat_name()),this.m_rgPartyBeacons=e.party_beacons().map(function(e){return{account_id:new p.a(e.steamid_owner()).GetAccountID(),app_id:e.app_id(),beacon_id:e.beacon_id(),game_metadata:e.game_metadata()}}),g.f.GroupMemberStore.OnPartyBeaconsUpdated(this.m_ulGroupID,this.m_rgPartyBeacons)},e.prototype.BIsCurrentUserAMember=function(){return!!this.m_rtTimeJoined},e.prototype.DefaultRoleID=function(){return this.m_defaultRoleID},e.prototype.GetRoleActions=function(e){for(var t=0,n=this.m_roleActions;t<n.length;t++){var o=n[t];if(o.role_id==e)return o}},e.prototype.GetRoles=function(){return this.m_roles},e.prototype.GetRoleOrdinal=function(e){for(var t=0,n=this.m_roles;t<n.length;t++){var o=n[t];if(o.role_id==e)return o.ordinal}},e.prototype.BIsUserGroupMember=function(e){for(var t=0,n=this.m_rgGroupMembersSummary;t<n.length;t++){if(n[t]==e.accountid)return!0}return!1},e.prototype.GetMemberRoleIDs=function(e){return null==this.m_groupMembers.GetExtra(e)?[]:this.m_groupMembers.GetExtra(e).m_role_ids},e.prototype.ToggleMemberRoleState=function(e,t){var n=this.BMemberHasRole(e,t);return this.SetMemberRoleState(e,t,!n)},e.prototype.SetMemberRoleState=function(e,t,n){if(n==this.BMemberHasRole(e,t))return Promise.resolve(!0);if(!this.BCanIAssignRole(t))return Promise.resolve(!1);var o,i=p.a.InitFromAccountID(e);return n?((o=h.b.Init(f.d)).Body().set_chat_group_id(this.GetGroupID()),o.Body().set_steamid(i.ConvertTo64BitString()),o.Body().set_role_id(t),f.V.AddRoleToUser(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then(function(e){return e.GetEResult(),1==e.GetEResult()})):((o=h.b.Init(f.l)).Body().set_chat_group_id(this.GetGroupID()),o.Body().set_steamid(i.ConvertTo64BitString()),o.Body().set_role_id(t),f.V.DeleteRoleFromUser(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then(function(e){return e.GetEResult(),1==e.GetEResult()}))},e.prototype.BDoesRoleAllowAction=function(e,t){for(var n=0,o=this.m_roleActions;n<o.length;n++){var i=o[n];if(i.role_id==e&&i.BCanPerformAction(t))return!0}return!1},e.prototype.BCanIPerformActionOnUser=function(e,t,n){return void 0===n&&(n=!1),!(!n&&!this.BHasMember(e))&&(!this.BIsAccountIDOwner(e)&&this.BCanIPerformAction(t))},e.prototype.BHasMember=function(e){return void 0!==this.m_groupMembers.GetExtra(e)},e.prototype.BMemberHasRole=function(e,t){var n=this.m_groupMembers.GetExtra(e);return!!n&&n.BHasRole(t)},e.prototype.BCanIPerformAction=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;var t=this.m_chatStore.CMInterface.steamid.GetAccountID(),n=this.m_groupMembers.GetExtra(t);if(n)for(var o=0,i=n.m_role_ids;o<i.length;o++){var r=i[o];if(this.BDoesRoleAllowAction(r,e))return!0}return!1},e.prototype.BCanKickMember=function(e){return this.BCanIPerformActionOnUser(e,2)},e.prototype.BCanBanMember=function(e){return this.BCanIPerformActionOnUser(e,3)},e.prototype.BCanDeleteMemberMessages=function(e){if(g.f.FriendStore.self.accountid==e&&this.BIsAccountIDOwner(e))return!0;return this.BCanIPerformActionOnUser(e,2,!0)||this.BCanIPerformActionOnUser(e,3,!0)},e.prototype.BCanICreateRoles=function(){return this.BCanIPerformAction(8)},e.prototype.BCanIModifyRole=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(8))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(null==t)return!1;var n=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),8),o=this.GetRoleOrdinal(n);return null!=o&&o<t},e.prototype.BCanIAssignRoles=function(){return this.BCanIPerformAction(9)},e.prototype.BCanIAssignRole=function(e){if(this.BIsClanChatRoom())return!1;if(e==this.DefaultRoleID())return!1;if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(9))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(null==t)return!1;var n=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),9),o=this.GetRoleOrdinal(n);return null!=o&&o<t},e.prototype.BCanIMentionAll=function(){return this.BCanIPerformAction(10)},e.prototype.BCanIAssociateBroadcast=function(){return this.BCanIPerformAction(11)},e.prototype.GetHighestRankRoleIDForPermission=function(e,t){var n=void 0,o=Number.MAX_VALUE,i=this.m_groupMembers.GetExtra(e);if(i){for(var r=0,a=i.m_role_ids;r<a.length;r++){var s=a[r];if(this.BDoesRoleAllowAction(s,t)){var c=this.GetRoleOrdinal(s);c<o&&(n=s,o=c)}}return n}},e.prototype.GetDefaultChatRoom=function(){return this.m_mapRooms.get(this.m_ulDefaultChatID)},e.prototype.GetChatRoom=function(e){return this.m_mapRooms.get(e)},e.prototype.OnConnectionRestored=function(e){e&&this.UnloadGroupState(),this.m_mapRooms.forEach(function(e){return e.OnConnectionRestored()})},e.prototype.OnRoomStateChange=function(e){this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.OnActivate=function(){if(!this.m_rtLastAck||this.hasUnreadChatMessage){var t=0;this.m_mapRooms.forEach(function(e){e.time_last_message&&(t=Math.max(t,e.time_last_message))}),this.m_rtLastAck=t||g.f.GetServerRTime32();var e=h.b.Init(f.c);e.Body().set_chat_group_id(this.m_ulGroupID),e.Body().set_timestamp(this.m_rtLastAck),f.V.AckChatMessage(g.f.CMInterface.GetServiceTransport(),e)}},e.prototype.InviteFriend=function(e,t){var n=p.a.InitFromAccountID(e),o=h.b.Init(f.u);o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n.ConvertTo64BitString()),t&&o.Body().set_chat_id(t.GetRoomID()),f.V.InviteFriendToChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){e.GetEResult()})},e.prototype.SaveChatRoomGroup=function(e){var t=h.b.Init(f.I);return t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_name(e),f.V.SaveChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),t).then(function(e){var t=e.GetEResult();if(1!=t)throw t})},e.prototype.RenameChatRoomGroup=function(e){var t=this,n=this.m_strName;this.m_strName=e;var o=h.b.Init(f.B);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_name(e),f.V.RenameChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){return 1!=e.GetEResult()&&(t.m_strName=n),e.GetEResult()})},e.prototype.SetChatRoomGroupTagline=function(e){var t=this,n=this.m_strTagLine;if(255<e.length&&(e=e.substring(0,255)),e==this.m_strTagLine)return Promise.resolve();this.m_strTagLine=e;var o=h.b.Init(f.L);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_tagline(e),f.V.SetChatRoomGroupTagline(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){1!=e.GetEResult()&&(t.m_strTagLine=n)})},e.prototype.SetChatRoomGroupWatchingBroadcast=function(i,r){return Object(a.b)(this,void 0,void 0,function(){var t,n,o;return Object(a.e)(this,function(e){switch(e.label){case 0:return i!=this.m_unWatchingBroadcastAccountID||r?((t=h.b.Init(f.M)).Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_watching_broadcast_accountid(i),r&&t.Body().set_watching_broadcast_channel_id(r),[4,f.V.SetChatRoomGroupWatchingBroadcast(this.m_chatStore.CMInterface.GetServiceTransport(),t)]):[2,Promise.resolve()];case 1:if(n=e.sent(),1!==(o=n.GetEResult()))throw o;return this.m_unWatchingBroadcastAccountID=i,this.m_strWatchingBroadcastChannelID=r,[2]}})})},e.prototype.SetChatRoomGroupAvatar=function(n){var o=this;if(n==this.m_strAvatarSHA)return Promise.resolve();var e=h.b.Init(f.K);return e.Body().set_chat_group_id(this.m_ulGroupID),e.Body().set_avatar_sha(Object(b.c)(n)),f.V.SetChatRoomGroupAvatar(this.m_chatStore.CMInterface.GetServiceTransport(),e).then(function(e){var t=e.GetEResult();if(1!=t)throw t;o.m_strAvatarSHA=n})},e.prototype.BCanInvite=function(){return this.BCanIPerformAction(4)},e.prototype.BCanBan=function(){return this.BCanIPerformAction(3)},e.prototype.BCanKick=function(){return this.BCanIPerformAction(2)},e.prototype.BCanAdminChannel=function(){return this.BCanIPerformAction(1)},e.prototype.BCanAdminGroup=function(){return this.BCanIPerformAction(5)},e.prototype.BCanChat=function(){return this.BCanIPerformAction(6)},e.prototype.BCanEditRoles=function(){return!this.BIsClanChatRoom()&&this.BCanIPerformAction(9)},Object.defineProperty(e.prototype,"members_to_highlight_name",{get:function(){return this.InternalGetMembersToHighlight(3,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"members_to_highlight",{get:function(){return this.InternalGetMembersToHighlight(4,!1)},enumerable:!0,configurable:!0}),e.prototype.InternalGetMembersToHighlight=function(e,t){var n=!t,o=!!this.m_rtTimeJoined,i=this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount;var r=e<i?e-1:e,a=g.f.FriendStore,s=a.self,c=[],l=a.GetPlayer(this.GetOwnerAccountID());if(l&&l.accountid!=s.accountid&&c.push(l),this.m_rgGroupMembersSummary){for(var p=0,u=this.m_rgGroupMembersSummary;p<u.length;p++){if((f=u[p])!=s.accountid&&!this.BIsAccountIDOwner(f)){var m=a.GetFriendIfCached(f);if(m&&(t||m.persona.BHasAvatarSet())&&(c.push(m),c.length>=r))break}}if(n&&c.length<r)for(var d=0,h=this.m_rgGroupMembersSummary;d<h.length;d++){var f;if((f=h[d])!=s.accountid&&!this.BIsAccountIDOwner(f)){var _=a.GetPlayer(f);if(_&&!_.is_friend&&(t||_.persona.BHasAvatarSet())&&(c.push(_),c.length>=r))break}}}return o&&c.length<r&&c.push(s),{members:c,remaining_count:i-c.length}},e.prototype.SetUserBanState=function(e,t){var n=p.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.O);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),o.Body().set_ban_state(t),f.V.SetUserBanState(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){var t=e.GetEResult();if(1!=t&&29!=t)throw Object(S.a)(!1,"Failed to change ban state "+t),t})},e.prototype.MuteUser=function(e,t){var n=p.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.A);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),o.Body().set_expiration(t),f.V.MuteUserInGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){var t=e.GetEResult();if(1!=t)throw Object(S.a)(!1,"Failed to change muteexpiration "+t),t})},e.prototype.KickUser=function(e,t){var n=this,o=p.a.InitFromAccountID(e).ConvertTo64BitString(),i=h.b.Init(f.x);return i.Body().set_chat_group_id(this.m_ulGroupID),i.Body().set_steamid(o),i.Body().set_expiration(t),f.V.KickUserFromGroup(this.m_chatStore.CMInterface.GetServiceTransport(),i).then(function(e){var t=e.GetEResult();if(1!=t)throw n.LOG("Kick returned "+t),t})},e.prototype.RevokeInvite=function(e){var n=this,t=p.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.H);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(t),f.V.RevokeInviteToGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){var t=e.GetEResult();if(1!=t)throw n.LOG("RevokeInvite returned "+t),t})},e.prototype.CreateChatRoom=function(e,t){var n=this,o=h.b.Init(f.f);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_name(e),o.Body().set_allow_voice(t),f.V.CreateChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),o).then(function(e){var t=e.Body().chat_room().chat_id();if(1!=e.GetEResult()||""==t||"0"==t)throw Object(S.a)(!1,"Failed to create chat room"),new Error("Failed to create chat room");return n.AddCreatedRoom(t,e.Body().chat_room())})},e.prototype.CreateAndJoinTempVoiceRoom=function(){this.CreateChatRoom("",!0).then(function(e){e.StartVoiceChat()}).catch(function(){})},e.prototype.AddCreatedRoom=function(e,t){var n=this.m_mapRooms.get(e);return n||(n=new l.a(this.m_chatStore,this,e,!1),this.m_mapRooms.set(e,n)),n.UpdateChatState(t),n},e.prototype.RenameRoom=function(e,t){if(e!=this.m_ulDefaultChatID&&t){var n=this.GetChatRoom(e);if(n){var o=n.name;n.ChangeNameWhileWaitingForRenameRequest(t);var i=h.b.Init(f.C);i.Body().set_chat_group_id(this.m_ulGroupID),i.Body().set_chat_id(e),i.Body().set_name(t),f.V.RenameChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),i).then(function(e){1==e.GetEResult()||(Object(S.a)(!1,"Failed to change room name"),n.ChangeNameWhileWaitingForRenameRequest(o))})}}},e.prototype.ReorderRoom=function(e,t){var n=h.b.Init(f.E);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(e),n.Body().set_move_after_chat_id(t),f.V.ReorderChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){1==e.GetEResult()||Object(S.a)(!1,"Failed to reorder room")})},e.prototype.DeleteChatRoom=function(t){var n=this,e=h.b.Init(f.j);e.Body().set_chat_group_id(this.m_ulGroupID),e.Body().set_chat_id(t),f.V.DeleteChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),e).then(function(e){1==e.GetEResult()?n.RemoveRoom(t):Object(S.a)(!1,"Failed to delete chat room")})},e.prototype.RemoveRoom=function(e){this.m_mapRooms.delete(e)},e.prototype.LeaveChatRoomGroup=function(e){this.m_chatStore.LeaveChatRoomGroup(e,this.m_ulGroupID).catch(function(){})},e.prototype.GetInviteLinksForGroup=function(){var e=h.b.Init(f.q);return e.Body().set_chat_group_id(this.GetGroupID()),f.V.GetInviteLinksForGroup(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInviteLinks:null}:{loadingState:"loaded",rgInviteLinks:e.Body().invite_links()}})},e.prototype.GetInvitedUsersForGroup=function(){var e=h.b.Init(f.r);return e.Body().set_chat_group_id(this.GetGroupID()),f.V.GetInviteList(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInvitedUsers:null}:{loadingState:"loaded",rgInvitedUsers:e.Body().invites()}})},e.prototype.GetBanList=function(){var e=h.b.Init(f.n);return e.Body().set_chat_group_id(this.GetGroupID()),f.V.GetBanList(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){var t=new E;return 15==e.GetEResult()?t.loadingState="denied":1==e.GetEResult()?(t.rgBans=e.Body().bans(),t.loadingState="loaded"):t.loadingState="failed",t})},e.prototype.GetRoleName=function(t){var e=this.m_roles.findIndex(function(e){return e.role_id==t});if(0<=e)return this.m_roles[e].name},e.prototype.CreateRole=function(o){var i=this;if(0==(o=o.trim()).length)return Promise.resolve();var e=h.b.Init(f.h);return e.Body().set_chat_group_id(this.GetGroupID()),e.Body().set_name(o),this.m_roles.push({role_id:"-1",name:o,ordinal:Number.MAX_VALUE}),f.V.CreateRole(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){var t=e.GetEResult();if(1!=t){var n=i.m_roles.findIndex(function(e){return"-1"==e.role_id});throw 0<=n&&i.m_roles.splice(n,1),new Error("unable to create role, error "+t)}i.LOG("created role "+o)})},e.prototype.DeleteRole=function(n){var o=this,e=h.b.Init(f.m);return e.Body().set_chat_group_id(this.GetGroupID()),e.Body().set_role_id(n),f.V.DeleteRole(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){if(1!=e.GetEResult())throw new Error("unable to delete role "+n);var t=o.m_roles.findIndex(function(e){return e.role_id==n});0<=t&&o.m_roles.splice(t,1)})},e.prototype.RenameRole=function(o,i){var r=this;if(0==(i=i.trim()).length)return Promise.resolve();var e=h.b.Init(f.D);return e.Body().set_chat_group_id(this.GetGroupID()),e.Body().set_role_id(o),e.Body().set_name(i),f.V.RenameRole(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){var t=e.GetEResult();if(1!=t)throw new Error("unable to rename role "+o+" "+t);var n=r.m_roles.findIndex(function(e){return e.role_id==o});0<=n&&(r.m_roles[n].name=i)})},e.prototype.ReorderRole=function(e,t){var n=h.b.Init(f.F);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_role_id(e),n.Body().set_ordinal(t),f.V.ReorderRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then(function(e){return 1==e.GetEResult()})},e.prototype.SetRoleAction=function(e,t,n){var o=this,i=this.GetRoleActions(e);if(i){if(n==i.BCanPerformAction(t))return;var r=i.BCanPerformAction(t);i.SetCanPerformAction(t,n);var a=h.b.Init(f.G);return a.Body().set_chat_group_id(this.GetGroupID()),a.Body().set_role_id(e),a.Body().set_actions(i.roleActions),f.V.ReplaceRoleActions(g.f.ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){1!=e.GetEResult()&&(i.SetCanPerformAction(t,r),o.LOG("SetRoleAction error, restoring "+t+" to "+r))})}},e.prototype.DeleteInviteLink=function(t,e){var n=h.b.Init(f.k);if(n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_invite_code(t),e&&"loaded"==e.loadingState){var o=e.rgInviteLinks.findIndex(function(e){return e.invite_code()==t});0<=o&&(e.rgInviteLinks.splice(o,1),this.LOG("removed link "+e.rgInviteLinks))}return f.V.DeleteInviteLink(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then(function(e){return 1==e.GetEResult()})},e.prototype.SetNotificationPreferences=function(e,t,n){var o=h.b.Init(f.P);return o.Body().set_chat_group_id(this.m_ulGroupID),void 0!==e&&(this.m_eUserDesktopNotificationLevel=e,o.Body().chat_group_preferences().set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(n=!1)),void 0!==t&&(this.m_eUserMobileNotificationLevel=t,o.Body().chat_group_preferences().set_mobile_notification_level(t)),void 0!==n&&(this.m_bUnreadIndicatorMuted=n,o.Body().chat_group_preferences().set_unread_indicator_muted(n)),f.V.SetUserChatGroupPreferences(g.f.CMInterface.GetServiceTransport(),o).then(function(e){return 1==e.GetEResult()})},Object(a.c)([m.x],e.prototype,"m_rtTimeJoined",void 0),Object(a.c)([m.x],e.prototype,"m_rtLastAck",void 0),Object(a.c)([m.x],e.prototype,"m_unOwnerAccountID",void 0),Object(a.c)([m.x],e.prototype,"m_bFullStateLoaded",void 0),Object(a.c)([m.x],e.prototype,"m_strName",void 0),Object(a.c)([m.x],e.prototype,"m_strTagLine",void 0),Object(a.c)([m.x],e.prototype,"m_strAvatarSHA",void 0),Object(a.c)([m.x],e.prototype,"m_unWatchingBroadcastAccountID",void 0),Object(a.c)([m.x],e.prototype,"m_strWatchingBroadcastChannelID",void 0),Object(a.c)([m.x],e.prototype,"m_rgPartyBeacons",void 0),Object(a.c)([m.x],e.prototype,"m_eUserDesktopNotificationLevel",void 0),Object(a.c)([m.x],e.prototype,"m_eUserMobileNotificationLevel",void 0),Object(a.c)([m.x],e.prototype,"m_bUnreadIndicatorMuted",void 0),Object(a.c)([m.x],e.prototype,"m_roles",void 0),Object(a.c)([m.x],e.prototype,"m_rgGroupMembersSummary",void 0),Object(a.c)([m.x],e.prototype,"m_cMemberSummaryCount",void 0),Object(a.c)([m.i],e.prototype,"name",null),Object(a.c)([m.i],e.prototype,"hasAvatar",null),Object(a.c)([m.i],e.prototype,"hasIcon",null),Object(a.c)([m.i],e.prototype,"avatar_url_small",null),Object(a.c)([m.i],e.prototype,"avatar_url_medium",null),Object(a.c)([m.i],e.prototype,"avatar_url_full",null),Object(a.c)([m.i],e.prototype,"chatRoomList",null),Object(a.c)([m.i],e.prototype,"textRoomList",null),Object(a.c)([m.i],e.prototype,"voiceRoomList",null),Object(a.c)([m.i],e.prototype,"hasVoiceRoom",null),Object(a.c)([m.i],e.prototype,"hasUnreadChatMessage",null),Object(a.c)([m.i],e.prototype,"HasUnreadMention",null),Object(a.c)([m.i],e.prototype,"time_last_activity",null),Object(a.c)([m.i],e.prototype,"room_with_last_message",null),Object(a.c)([m.g],e.prototype,"ChangeMemberRank",null),Object(a.c)([m.g],e.prototype,"ChangeMemberRoles",null),Object(a.c)([m.g],e.prototype,"SetInitialGroupState",null),Object(a.c)([m.g],e.prototype,"UpdateGroupStateFromSummary",null),Object(a.c)([m.g],e.prototype,"SetNameCheckingForAppLocalization",null),Object(a.c)([m.g],e.prototype,"UpdateGroupState",null),Object(a.c)([m.g],e.prototype,"UnloadActiveGroupState",null),Object(a.c)([m.g],e.prototype,"UnloadGroupState",null),Object(a.c)([m.g],e.prototype,"UnloadAndResetGroupState",null),Object(a.c)([m.g],e.prototype,"UpdateChatRoomState",null),Object(a.c)([m.g],e.prototype,"UpdateUserState",null),Object(a.c)([m.g],e.prototype,"UpdateChatRoomHeaderState",null),Object(a.c)([m.g],e.prototype,"OnActivate",null),Object(a.c)([m.i],e.prototype,"members_to_highlight_name",null),Object(a.c)([m.i],e.prototype,"members_to_highlight",null),Object(a.c)([m.g],e.prototype,"AddCreatedRoom",null),Object(a.c)([m.g],e.prototype,"RemoveRoom",null),e}(),I=function(o){function e(e,t){var n=o.call(this)||this;return n.LOG=s.b.create(function(){return n.GetUniqueID()},!1),n.m_mapChatViews=new Map,n.m_bShowSettingsDialog=!1,n.m_bShowBroadcast=!1,n.m_bChatHidden=!1,n.m_bShowGlobalChat=!1,n.m_bMemberSearchActive=!1,n.m_strMemberSearchString="",n.m_tabset=e,n.m_group=t,n.m_group.BIsValid()&&n.SelectChat(n.m_group.GetDefaultChatID()),n.m_disposeChatRooms=Object(m.h)(function(){var e=n.m_group.chatRoomList;n.m_selectedChatView&&e.length&&e.indexOf(n.m_selectedChatView.chat)<0&&n.SelectChat(n.m_group.GetDefaultChatID())}),n}return Object(a.d)(e,o),e.prototype.GetGroup=function(){return this.m_group},e.prototype.GetSelectedChatView=function(){return this.m_selectedChatView},e.prototype.GetActiveChatView=function(){return this.GetPopoverChatView()||this.GetSelectedChatView()},e.prototype.GetPopoverChatView=function(){return this.m_popoverChatView},Object.defineProperty(e.prototype,"isBroadcastShown",{get:function(){return this.m_bShowBroadcast},enumerable:!0,configurable:!0}),e.prototype.ShowBroadcast=function(){var e=this;this.SetChannelListCollapsed(!0,!1),this.SetMemberListCollapsed(!0,!1),this.m_bShowBroadcast=!0,SetBackgroundTimeout(function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()},30)},e.prototype.HideBroadcast=function(){var e=this;this.m_bShowBroadcast=!1,g.f.UIStore.SetTheaterMode(!1),SetBackgroundTimeout(function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()},30)},e.prototype.SetVerticalBroadcastChat=function(e){this.m_bShowVerticalBroadcastChat=e},e.prototype.ToggleTheaterModeBroadcastChat=function(){g.f.UIStore.SetTheaterMode(!g.f.UIStore.GetTheaterMode())},e.prototype.SetChatHidden=function(e){this.m_bChatHidden=e},e.prototype.SetGlobalBroadcastChatShown=function(e){this.m_bShowGlobalChat=e,this.GetActiveChatView()&&this.GetActiveChatView().OnChatFrameChanged()},e.prototype.SetLocalBroadcastId=function(e){this.m_strLocalBroadcastId=e},e.prototype.SetMemberListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bMemberListCollapsedOverride=void 0;var n=this.GetGroup();g.f.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(n.GetGroupID(),"bMemberListCollapsed",e)}else this.m_bMemberListCollapsedOverride=e},e.prototype.SetChannelListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bChannelListCollapsedOverride=void 0;var n=this.GetGroup();g.f.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(n.GetGroupID(),"bChannelListCollapsed",e)}else this.m_bChannelListCollapsedOverride=e},e.prototype.ClosePopoverChat=function(){this.m_popoverChatView&&(this.m_popoverChatView.OnViewClosed(),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_popoverChatView=null)},e.prototype.SelectChat=function(e){var t=this,n=this.m_group.GetChatRoom(e);if(n){if(n.GetVoiceAllowed()&&n!=this.m_group.GetDefaultChatRoom()){if(this.m_popoverChatView&&this.m_popoverChatView.chat==n)return}else if(this.ClosePopoverChat(),this.m_selectedChatView&&this.m_selectedChatView.chat==n)return;n.GetVoiceAllowed()&&this.m_group.GetDefaultChatRoom()!=n?(this.ClosePopoverChat(),this.m_popoverChatView=this.GetChatViewForRoom(n),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeActiveVoice=Object(m.E)(function(){return!n.BVoiceActive()},function(){t.m_popoverChatView&&t.m_popoverChatView.chat==n&&t.ClosePopoverChat()})):(this.m_selectedChatView&&this.m_selectedChatView.OnViewClosed(),this.m_selectedChatView=this.GetChatViewForRoom(n)),this.m_tabset.activeTab==this&&this.m_tabset.is_popup_focused&&this.OnTabActivate()}},e.prototype.SelectNextChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,n=e>=t.length-1?0:e+1;this.SelectChat(t[n].GetRoomID())},e.prototype.SelectPreviousChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,n=e<=0?t.length-1:e-1;this.SelectChat(t[n].GetRoomID())},e.prototype.GetSelectedChannelIndex=function(){var t=this.GetSelectedChatView().chat.GetRoomID();return this.GetGroup().textRoomList.findIndex(function(e){return e.GetRoomID()===t})},e.prototype.GetChatViewForRoom=function(e){var t=e.GetRoomID(),n=this.m_mapChatViews.get(t);return n?this.LOG("reusing chat for "+t):n=new c.b(this.m_tabset,e),n},e.prototype.StartRoomRename=function(e){this.m_ulRenameChatRoomID=e},e.prototype.EndRoomRename=function(){this.m_ulRenameChatRoomID=""},e.prototype.IsRoomRenameActive=function(e){return""!=this.m_ulRenameChatRoomID&&this.m_ulRenameChatRoomID==e},e.prototype.GetRenameRoomID=function(){return this.m_ulRenameChatRoomID},e.prototype.OnTabClosed=function(){this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeChatRooms&&this.m_disposeChatRooms(),this.ClosePopoverChat(),this.GetSelectedChatView().OnViewClosed(),g.f.ChatStore.DecRefActiveChatRoomGroup(this.GetGroup().GetGroupID())},e.prototype.IsVoiceActive=function(){return g.f.ChatStore.VoiceChat.GetActiveChatRoomGroupID()==this.m_group.GetGroupID()},e.prototype.IsTabForChat=function(e){if(!(e instanceof l.a))return!1;var t=e;return!!this.m_group.GetChatRoom(t.GetRoomID())},e.prototype.GetUnreadMessageCount=function(){return this.m_group.hasUnreadChatMessage?1:0},e.prototype.SetMemberSearchEnabled=function(e){this.m_bMemberSearchActive&&this.m_strMemberSearchString==e||(this.m_bMemberSearchActive=!0,this.m_strMemberSearchString=e||"")},e.prototype.ClearMemberSearch=function(){this.m_bMemberSearchActive=!1,this.m_strMemberSearchString=""},e.prototype.IsMemberSearchActive=function(){return this.m_bMemberSearchActive},e.prototype.GetMemberSearch=function(){return this.m_strMemberSearchString},Object.defineProperty(e.prototype,"normalizedMemberSearch",{get:function(){return this.m_strMemberSearchString.trim().toLocaleLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMemberListExpanded",{get:function(){if(this.m_bMemberSearchActive)return!0;if(void 0!==this.m_bMemberListCollapsedOverride)return!this.m_bMemberListCollapsedOverride;var e=this.GetGroup();return!g.f.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bMemberListCollapsed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChannelListCollapsed",{get:function(){if(void 0!==this.m_bChannelListCollapsedOverride)return this.m_bChannelListCollapsedOverride;var e=this.GetGroup();return g.f.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bChannelListCollapsed")},enumerable:!0,configurable:!0}),e.prototype.GetTabName=function(){return this.m_group.name},e.prototype.GetUniqueID=function(){return this.m_group.unique_id},e.prototype.OnTabFocus=function(){var e=this.GetActiveChatView();e&&e.OnFocus()},e.prototype.InternalOnTabActivate=function(){var e=this.GetActiveChatView();e&&e.OnActivate()},e.prototype.OnTabDeactivate=function(){var e=this.GetActiveChatView();e&&e.OnDeactivate()},e.prototype.IsChatRoom=function(){return!0},e.prototype.GetChatView=function(){return this.GetActiveChatView()},Object(a.c)([m.x],e.prototype,"m_selectedChatView",void 0),Object(a.c)([m.x],e.prototype,"m_popoverChatView",void 0),Object(a.c)([m.x],e.prototype,"m_bShowSettingsDialog",void 0),Object(a.c)([m.x],e.prototype,"m_ulRenameChatRoomID",void 0),Object(a.c)([m.x],e.prototype,"m_bShowBroadcast",void 0),Object(a.c)([m.x],e.prototype,"m_bShowVerticalBroadcastChat",void 0),Object(a.c)([m.x],e.prototype,"m_strLocalBroadcastId",void 0),Object(a.c)([m.x],e.prototype,"m_bChatHidden",void 0),Object(a.c)([m.x],e.prototype,"m_bShowGlobalChat",void 0),Object(a.c)([m.x],e.prototype,"m_bMemberSearchActive",void 0),Object(a.c)([m.x],e.prototype,"m_strMemberSearchString",void 0),Object(a.c)([m.x],e.prototype,"m_bMemberListCollapsedOverride",void 0),Object(a.c)([m.x],e.prototype,"m_bChannelListCollapsedOverride",void 0),Object(a.c)([m.g],e.prototype,"ShowBroadcast",null),Object(a.c)([m.g.bound],e.prototype,"HideBroadcast",null),Object(a.c)([m.g.bound],e.prototype,"SetVerticalBroadcastChat",null),Object(a.c)([m.g],e.prototype,"ToggleTheaterModeBroadcastChat",null),Object(a.c)([m.g],e.prototype,"SetChatHidden",null),Object(a.c)([m.g],e.prototype,"SetGlobalBroadcastChatShown",null),Object(a.c)([m.g],e.prototype,"SetLocalBroadcastId",null),Object(a.c)([m.g],e.prototype,"SetMemberListCollapsed",null),Object(a.c)([m.g],e.prototype,"SetChannelListCollapsed",null),Object(a.c)([m.g],e.prototype,"ClosePopoverChat",null),Object(a.c)([m.g],e.prototype,"SelectChat",null),Object(a.c)([m.g],e.prototype,"SelectNextChannel",null),Object(a.c)([m.g],e.prototype,"SelectPreviousChannel",null),Object(a.c)([m.g],e.prototype,"StartRoomRename",null),Object(a.c)([m.g],e.prototype,"EndRoomRename",null),Object(a.c)([m.g],e.prototype,"OnTabClosed",null),Object(a.c)([m.g],e.prototype,"SetMemberSearchEnabled",null),Object(a.c)([m.g],e.prototype,"ClearMemberSearch",null),Object(a.c)([m.i],e.prototype,"normalizedMemberSearch",null),Object(a.c)([m.i],e.prototype,"isMemberListExpanded",null),Object(a.c)([m.i],e.prototype,"isChannelListCollapsed",null),e}(u.b),E=function(){function e(){this.loadingState="pending"}return Object(a.c)([m.x],e.prototype,"loadingState",void 0),Object(a.c)([m.x],e.prototype,"rgBans",void 0),e}(),w={bMemberListCollapsed:void 0,bChannelListCollapsed:void 0},M="ChatRoomGroupDisplayPrefs",D=function(){function e(){this.m_mapDisplayPrefs=m.x.map()}return e.prototype.Init=function(e){var n=this;this.m_SettingsStore=e,this.m_SettingsStore.GetObjectFromLocalStorageWhenReady(M).then(function(e){for(var t in n.m_mapDisplayPrefs.clear(),e.chatRoomGroups)n.m_mapDisplayPrefs.set(t,e.chatRoomGroups[t])})},e.prototype.GetChatRoomDisplayPref=function(e,t){return(this.m_mapDisplayPrefs.get(e)||w)[t]},e.prototype.ToggleChatRoomDisplayPref=function(e,t){var n=this.GetChatRoomDisplayPref(e,t);this.SetChatRoomDisplayPref(e,t,!n)},e.prototype.SetChatRoomDisplayPref=function(e,t,n){var o=this.m_mapDisplayPrefs.get(e);o&&o[t]===n||(o||(this.m_mapDisplayPrefs.set(e,Object.assign({},w)),o=this.m_mapDisplayPrefs.get(e)),o[t]=n,this.WritePrefs())},e.prototype.WritePrefs=function(){this.m_SettingsStore.StoreObjectInLocalStorage(M,{chatRoomGroups:this.m_mapDisplayPrefs.toJSON()})},e.prototype.FillInChatUsabilityMetrics=function(e){var t=Array.from(this.m_mapDisplayPrefs.values());e.ui_state().set_group_chat_left_col_collapsed(o.b(t,function(e){return e.bChannelListCollapsed})),e.ui_state().set_group_chat_right_col_collapsed(o.b(t,function(e){return e.bMemberListCollapsed}))},Object(a.c)([m.g],e.prototype,"SetChatRoomDisplayPref",null),e}(),T=function(){function e(){this.m_mapAccountToExtra=m.x.map()}return e.prototype.GetCurrentMemberSet=function(){var n=new Set;return this.m_mapAccountToExtra.forEach(function(e,t){n.add(t)}),n},Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.m_mapAccountToExtra.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,n=0,o=this.member_list_unsorted;n<o.length;n++){var i=o[n];i.persona.is_online&&(e++,i.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!0,configurable:!0}),e.prototype.Clear=function(){this.m_mapAccountToExtra.clear()},e.prototype.AddMember=function(e,t){void 0===t&&(t=void 0),this.HasMember(e)||this.m_mapAccountToExtra.set(e,t)},e.prototype.RemoveMember=function(e){this.HasMember(e)&&this.m_mapAccountToExtra.delete(e)},e.prototype.GetExtra=function(e){return this.m_mapAccountToExtra.get(e)},e.prototype.HasMember=function(e){return this.m_mapAccountToExtra.has(e)},Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(_.b.DefaultFriendSortComparator),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){var n=[];return this.m_mapAccountToExtra.forEach(function(e,t){n.push(g.f.FriendStore.GetPlayer(t))}),n},enumerable:!0,configurable:!0}),Object(a.c)([m.i],e.prototype,"unfiltered_count",null),Object(a.c)([m.i],e.prototype,"member_counts",null),Object(a.c)([m.g],e.prototype,"Clear",null),Object(a.c)([m.g],e.prototype,"AddMember",null),Object(a.c)([m.g],e.prototype,"RemoveMember",null),Object(a.c)([m.i],e.prototype,"member_list",null),Object(a.c)([m.i],e.prototype,"member_list_unsorted",null),e}()},VZeO:function(e,t,n){"use strict";var d,o,i=n("mrSG"),p=n("tkkQ"),h=n("4HGb"),l=n("fGPn"),f=n("RBVV"),_=n("7t13"),r=n("48Gm"),g=n("LAqV"),a=function(){function r(e,t){if(!(e instanceof BaseAudioContext))throw"Not a valid audio context.";t||(t={});var n=t.numberOfChannels||1;if(2<n)throw"The maximum supported number of channels is two.";this.context_=e;var o=t.bufferSize||0;this.attack=t.attack||0,this.release=t.release||0;var i=void 0===t.timeConstant?.0025:t.timeConstant;this.threshold=void 0===t.threshold?-100:t.threshold,this.alpha_=this.getAlphaFromTimeConstant_(i,this.context_.sampleRate),this.noiseGateKernel_=this.context_.createScriptProcessor(o,n,n),this.noiseGateKernel_.onaudioprocess=this.onaudioprocess_.bind(this),this.input=new GainNode(this.context_),this.output=new GainNode(this.context_),this.input.connect(this.noiseGateKernel_).connect(this.output),this.previousLevel_=0,this.previousWeight_=1,this.channel_=new Float32Array(this.noiseGateKernel_.bufferSize),this.envelope_=new Float32Array(this.noiseGateKernel_.bufferSize),this.weights_=new Float32Array(this.noiseGateKernel_.bufferSize)}return r.prototype.onaudioprocess_=function(e){var t=e.inputBuffer,n=t.getChannelData(0);if(2===t.numberOfChannels)for(var o=t.getChannelData(1),i=0;i<o.length;i++)this.channel_[i]=(n[i]+o[i])/2;else this.channel_=n;var r=this.detectLevel_(this.channel_),a=this.computeWeights_(r);for(i=0;i<t.numberOfChannels;i++)for(var s=t.getChannelData(i),c=e.outputBuffer.getChannelData(i),l=0;l<s.length;l++)c[l]=a[l]*s[l]},r.prototype.detectLevel_=function(e){this.envelope_[0]=this.alpha_*this.previousLevel_+(1-this.alpha_)*Math.pow(e[0],2);for(var t=1;t<e.length;t++)this.envelope_[t]=this.alpha_*this.envelope_[t-1]+(1-this.alpha_)*Math.pow(e[t],2);return this.previousLevel_=this.envelope_[this.envelope_.length-1],this.envelope_},r.prototype.computeWeights_=function(e){var t=1,n=1;0<this.attack&&(t=1/Math.ceil(this.context_.sampleRate*this.attack)),0<this.release&&(n=1/Math.ceil(this.context_.sampleRate*this.release));for(var o=0;o<e.length;o++){if(r.toDecibel(2*e[o])<this.threshold){var i=this.previousWeight_-t;this.weights_[o]=Math.max(i,0)}else{i=this.previousWeight_+n;this.weights_[o]=Math.min(i,1)}this.previousWeight_=this.weights_[o]}return this.weights_},r.prototype.getAlphaFromTimeConstant_=function(e,t){return Math.exp(-1/(t*e))},r.toDecibel=function(e){return 10*Math.log10(e)},r}(),s=n("2vnA"),u=function(){function e(e,t){this.m_Analyser=void 0,this.m_rgInputNode=[],this.m_hUpdateInterval=0,this.m_buffer=void 0,this.m_lastTimeNonZero=0,this.m_flVolume=0,this.m_flRoundedVolume=0,this.m_flAveraging=.6,this.m_Analyser=t.createAnalyser(),this.m_Analyser.fftSize=128,this.m_buffer=new Float32Array(this.m_Analyser.fftSize),this.m_rgInputNode.push(e),e.connect(this.m_Analyser),this.StartUpdating()}return e.prototype.GetLastTimeNonZero=function(){return this.m_lastTimeNonZero},e.prototype.StartUpdating=function(){this.StopUpdating(),this.m_hUpdateInterval=SetBackgroundInterval(this.UpdateVolume,60)},e.prototype.StopUpdating=function(){0!=this.m_hUpdateInterval&&ClearBackgroundInterval(this.m_hUpdateInterval),this.m_hUpdateInterval=0},e.prototype.UpdateVolume=function(){this.m_Analyser.getFloatTimeDomainData(this.m_buffer);for(var e=0,t=0;t<this.m_buffer.length;++t){var n=this.m_buffer[t];e+=n*n}var o=Math.sqrt(e/this.m_buffer.length);this.m_flVolume=1.2*Math.max(o,this.m_flVolume*this.m_flAveraging);var i=Math.round(100*this.m_flVolume)/100;i!=this.m_flRoundedVolume&&(this.m_flRoundedVolume=i),0<this.m_flRoundedVolume&&(this.m_lastTimeNonZero=performance.now())},e.prototype.stop=function(){this.StopUpdating(),this.DisconnectAll()},e.prototype.Connect=function(e){this.m_rgInputNode.push(e),null!=this.m_Analyser&&e.connect(this.m_Analyser)},e.prototype.DisconnectAll=function(){for(var e=0;e<this.m_rgInputNode.length;++e){if(this.m_Analyser)try{this.m_rgInputNode[e].disconnect(this.m_Analyser)}catch(e){}this.m_rgInputNode[e]=void 0}this.m_rgInputNode=[]},Object.defineProperty(e.prototype,"rounded_volume",{get:function(){return this.m_flRoundedVolume},enumerable:!0,configurable:!0}),Object(i.c)([s.x],e.prototype,"m_lastTimeNonZero",void 0),Object(i.c)([s.x],e.prototype,"m_flVolume",void 0),Object(i.c)([s.x],e.prototype,"m_flRoundedVolume",void 0),Object(i.c)([s.g.bound],e.prototype,"UpdateVolume",null),Object(i.c)([s.g.bound],e.prototype,"stop",null),e}(),b=n("s+DT"),c=n("WpBz"),v=n("oh5H"),m=n("K4CH"),S=n("OJz+"),y=n("XaMz");n.d(t,"b",function(){return C}),n.d(t,"a",function(){return k}),(o=d||(d={}))[o.k_EAudioStreamType_Microphone=1]="k_EAudioStreamType_Microphone",o[o.k_EAudioStreamType_IncomingStream=2]="k_EAudioStreamType_IncomingStream";var C,O,I,E,w=function(){function e(){this.destination_node=void 0,this.source_node=void 0,this.elem=void 0,this.output_gain_node=void 0,this.muted=!1,this.volume_meter=void 0}return Object(i.c)([s.x],e.prototype,"muted",void 0),Object(i.c)([s.x],e.prototype,"volume_meter",void 0),e}();function M(e){switch(e){case I.k_EVoiceCallState_None:return"None";case I.k_EVoiceCallState_ScheduledInitiate:return"ScheduledInitiate";case I.k_EVoiceCallState_RequestedMicAccess:return"RequestedMicAccess";case I.k_EVoiceCallState_LocalMicOnly:return"LocalMicOnly";case I.k_EVoiceCallState_CreatePeerConnection:return"CreatePeerConnection";case I.k_EVoiceCallState_InitatedWebRTCSession:return"InitiatedWebRTCSession";case I.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected:return"WaitingOnICEConnected";case I.k_EVoiceCallState_RequestedPermission:return"RequestedPermission";case I.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession:return"NotifyingVoiceChatOfWebRTCSession";case I.k_EVoiceCallState_Connected:return"Connected"}}(O=C||(C={}))[O.k_ENoiseGateLevel_Off=0]="k_ENoiseGateLevel_Off",O[O.k_ENoiseGateLevel_Low=1]="k_ENoiseGateLevel_Low",O[O.k_ENoiseGateLevel_Medium=2]="k_ENoiseGateLevel_Medium",O[O.k_ENoiseGateLevel_High=3]="k_ENoiseGateLevel_High",(E=I||(I={}))[E.k_EVoiceCallState_None=0]="k_EVoiceCallState_None",E[E.k_EVoiceCallState_ScheduledInitiate=1]="k_EVoiceCallState_ScheduledInitiate",E[E.k_EVoiceCallState_RequestedMicAccess=2]="k_EVoiceCallState_RequestedMicAccess",E[E.k_EVoiceCallState_LocalMicOnly=3]="k_EVoiceCallState_LocalMicOnly",E[E.k_EVoiceCallState_CreatePeerConnection=4]="k_EVoiceCallState_CreatePeerConnection",E[E.k_EVoiceCallState_InitatedWebRTCSession=5]="k_EVoiceCallState_InitatedWebRTCSession",E[E.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected=6]="k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected",E[E.k_EVoiceCallState_RequestedPermission=7]="k_EVoiceCallState_RequestedPermission",E[E.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession=8]="k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession",E[E.k_EVoiceCallState_Connected=9]="k_EVoiceCallState_Connected";var D=function(){function e(){this.m_eState=I.k_EVoiceCallState_None,this.m_targetAccountID=0,this.m_bInitiatedOneOnOneCall=!1,this.m_bWaitingOnOneOnOneRejoin=!1,this.m_bPostedOneOnOneEndedMsg=!1,this.m_voiceChatID="",this.m_webRTCConnectedNotification=void 0,this.m_webRTCServerIP=0,this.m_webRTCServerPort=0,this.m_webRTCClientIP=0,this.m_webRTCClientPort=0,this.m_nFailuresThisInitiate=0,this.m_bOfferUpdateInProgress=!1,this.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_nMostRecentRemoteDescriptionVersion="0"}return e.prototype.BMatchingCall=function(e,t){return 0!=e&&this.m_targetAccountID==e||!(!this.m_chatRoom||!t||this.m_chatRoom.chatID!=t.chatID||this.m_chatRoom.groupID!=t.groupID)},e.prototype.BCallActiveForGroup=function(e){return this.m_chatRoom&&this.m_chatRoom.groupID==e},Object(i.c)([s.x],e.prototype,"m_eState",void 0),Object(i.c)([s.x],e.prototype,"m_targetAccountID",void 0),Object(i.c)([s.x],e.prototype,"m_bInitiatedOneOnOneCall",void 0),Object(i.c)([s.x],e.prototype,"m_bWaitingOnOneOnOneRejoin",void 0),Object(i.c)([s.x],e.prototype,"m_bPostedOneOnOneEndedMsg",void 0),Object(i.c)([s.x],e.prototype,"m_chatRoom",void 0),Object(i.c)([s.x],e.prototype,"m_voiceChatID",void 0),Object(i.c)([s.x],e.prototype,"m_nFailuresThisInitiate",void 0),Object(i.c)([s.x],e.prototype,"m_bIsConnectionAttemptOverTwoSeconds",void 0),e}(),T=function(){return function(){this.m_SSRC=0,this.m_MostRecentDelayEstimateMs=0,this.m_MostRecentJitterReceivedMs=0,this.m_CurrentJitterBufferMs=0,this.m_PacketsReceived=0,this.m_PacketsLost=0,this.m_PacketsSent=0,this.m_BytesSent=0,this.m_googRTT=0,this.m_BytesReceived=0,this.m_DecodingThroughNetEQ=0,this.m_DecodingPacketLossCorrection=0,this.m_DecodingPacketLossFadeNoiseGeneration=0,this.m_DecodingComfortNoiseGeneration=0,this.m_DecodingNormal=0,this.m_DecodingSilenceGenerator=0,this.m_DecodingMuted=0}}(),G="SteamVoiceSettings",R=function(){function e(e){this.m_VoiceInputGain=1,this.m_VoiceOutputGain=1,this.m_NoiseGateLevel=C.k_ENoiseGateLevel_Medium,this.m_VoiceUseEchoCancellation=!0,this.m_VoiceUseNoiseCancellation=!0,this.m_VoiceUseAutoGainControl=!0,this.m_SelectedMicID="default",this.m_SelectedOutputID="default",this.m_bPlayPTTSounds=!0,this.m_bSettingsLoaded=!1,this.m_bHasResetOpenMicHotkey=!1,this.m_SettingsStore=e}return e.prototype.SaveToLocalStorage=function(){this.m_SettingsStore.StoreObjectInLocalStorage(G,{inputGain:this.m_VoiceInputGain,outputGain:this.m_VoiceOutputGain,noiseGateLevel:this.m_NoiseGateLevel,noiseCancellation:this.m_VoiceUseNoiseCancellation,echoCancellation:this.m_VoiceUseEchoCancellation,autoGainControl:this.m_VoiceUseAutoGainControl,selectedMic:this.m_SelectedMicID,selectedOutput:this.m_SelectedOutputID,pttSoundsEnabled:this.m_bPlayPTTSounds,hasResetOpenMicHotKey:this.m_bHasResetOpenMicHotkey})},e.prototype.LoadFromLocalStorage=function(t){var n=this;this.m_SettingsStore.GetObjectFromLocalStorageWhenReady(G,void 0).then(function(e){null!=e&&(null!=e.inputGain&&(n.m_VoiceInputGain=e.inputGain),null!=e.outputGain&&(n.m_VoiceOutputGain=e.outputGain),null!=e.noiseGateLevel&&(n.m_NoiseGateLevel=e.noiseGateLevel),null!=e.noiseCancellation&&(n.m_VoiceUseNoiseCancellation=e.noiseCancellation),null!=e.autoGainControl&&(n.m_VoiceUseAutoGainControl=e.autoGainControl),null!=e.echoCancellation&&(n.m_VoiceUseEchoCancellation=e.echoCancellation),null!=e.selectedMic&&(n.m_SelectedMicID=e.selectedMic),null!=e.selectedOutput&&(n.m_SelectedOutputID=e.selectedOutput),null!=e.pttSoundsEnabled&&(n.m_bPlayPTTSounds=e.pttSoundsEnabled),null!=e.hasResetOpenMicHotKey&&(n.m_bHasResetOpenMicHotkey=e.hasResetOpenMicHotKey)),n.m_bSettingsLoaded=!0,t.LogMsg("(VoiceChat) Settings loaded from local storage"),t.RefreshPushToTalkKeySettings()})},Object(i.c)([s.x],e.prototype,"m_VoiceInputGain",void 0),Object(i.c)([s.x],e.prototype,"m_VoiceOutputGain",void 0),Object(i.c)([s.x],e.prototype,"m_NoiseGateLevel",void 0),Object(i.c)([s.x],e.prototype,"m_VoiceUseEchoCancellation",void 0),Object(i.c)([s.x],e.prototype,"m_VoiceUseNoiseCancellation",void 0),Object(i.c)([s.x],e.prototype,"m_VoiceUseAutoGainControl",void 0),Object(i.c)([s.x],e.prototype,"m_SelectedMicID",void 0),Object(i.c)([s.x],e.prototype,"m_SelectedOutputID",void 0),Object(i.c)([s.x],e.prototype,"m_bPlayPTTSounds",void 0),Object(i.c)([s.x],e.prototype,"m_bSettingsLoaded",void 0),Object(i.c)([s.x],e.prototype,"m_bHasResetOpenMicHotkey",void 0),e}(),j=function(){function e(){this.muted=!1,this.gain=1}return Object(i.c)([s.x],e.prototype,"muted",void 0),Object(i.c)([s.x],e.prototype,"gain",void 0),e}(),L=function(){function e(){this.mic_muted_locally=!1,this.output_muted_locally=!1,this.has_no_mic_for_session=!1}return Object(i.c)([s.x],e.prototype,"mic_muted_locally",void 0),Object(i.c)([s.x],e.prototype,"output_muted_locally",void 0),Object(i.c)([s.x],e.prototype,"has_no_mic_for_session",void 0),e}(),A=function(){function e(){this.partner_accountid=0,this.voice_chatid="",this.previously_joined=!1,this.audio_repeat=0,this.audio_buffer=void 0}return e.prototype.ClearAudioRepeats=function(){0!=this.audio_repeat&&(ClearBackgroundTimeout(this.audio_repeat),this.audio_repeat=0),null!=this.audio_buffer&&(this.audio_buffer.StopPlayback(),this.audio_buffer=void 0)},Object(i.c)([s.x],e.prototype,"partner_accountid",void 0),Object(i.c)([s.x],e.prototype,"voice_chatid",void 0),Object(i.c)([s.x],e.prototype,"previously_joined",void 0),e}(),k=function(){function o(e){var l=this;if(this.m_VoiceCallState=new D,this.m_mapOneOnOneCallsWaitingJoinOrAccept=s.x.map(),this.m_hRegisterForPushToTalkStateChange=null,this.m_bPushToTalkEnabled=!1,this.m_bPushToMuteEnabled=!1,this.m_bVoicePTTStateEnabled=!1,this.m_VKPushToTalkHotKey=0,this.m_strPushToTalkDisplayString="",this.m_hPushToTalkReleaseTimeout=0,this.m_ConnectionCheck=0,this.m_ScheduledInitiate=0,this.m_ScheduledVoiceLogsUpload=0,this.m_bClientSideLogsUploadInProgress=!1,this.m_nLastLogLineUploaded=0,this.m_StatsTimeout=0,this.m_bUserHasDeniedMicPermissions=!1,this.m_bOutputMuted=!1,this.m_AudioContext=void 0,this.m_rgAudioStreams=Object(s.x)([]),this.m_MicVolumeMeter=void 0,this.m_MicNoiseGate=void 0,this.m_MicInputGainNode=void 0,this.m_rgLogLines=[],this.m_mapSSRCToAccountID=new Map,this.m_mapAccountIDToStats=new Map,this.m_mapPerUserOutputGain=s.x.map(),this.m_mapUserVoiceStatus=s.x.map(),this.m_LogVoiceChatDetails=!1,this.m_VoiceEchoLocalMic=!1,this.m_bLocalMicEchoStateBeforeMicTest=!1,this.m_bLocalMicTestActive=!1,this.m_bForceConnectingStatus=!1,this.m_bForceReconnectingStatus=!1,this.m_OnWebRTCUpdateRemoteDescriptionHandler=Object(S.c)(r.c.NotifyWebRTCUpdateRemoteDescriptionHandler,function(e){return l.m_VoiceCallState.m_eState<I.k_EVoiceCallState_InitatedWebRTCSession?(l.LogMsg("(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler in wrong state "+l.m_VoiceCallState.m_eState),2):(l.m_VoiceCallState.m_bOfferUpdateInProgress?(l.LogMsg("(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler while already updating, queing work"),l.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=e.Body()):l.ProcessUpdatedRemoteDescription(e.Body()),1)}),this.m_OnWebRTCConnectionHandler=Object(S.c)(r.c.NotifyWebRTCSessionConnectedHandler,function(e){return l.m_VoiceCallState.m_eState<I.k_EVoiceCallState_InitatedWebRTCSession?(l.LogMsg("(WebRTC) Hit NotifyWebRTCSessionConnectedHandler in wrong state "+l.m_VoiceCallState.m_eState),2):(l.m_VoiceCallState.m_webRTCConnectedNotification=e.Body(),l.m_VoiceCallState.m_webRTCServerIP=l.m_VoiceCallState.m_webRTCConnectedNotification.server_ip(),l.m_VoiceCallState.m_webRTCServerPort=l.m_VoiceCallState.m_webRTCConnectedNotification.server_port(),l.m_VoiceCallState.m_webRTCClientIP=l.m_VoiceCallState.m_webRTCConnectedNotification.client_ip(),l.m_VoiceCallState.m_webRTCClientPort=l.m_VoiceCallState.m_webRTCConnectedNotification.client_port(),"completed"==l.m_PeerConnection.iceConnectionState||"connected"==l.m_PeerConnection.iceConnectionState?(l.LogMsg("(VoiceChat) ICE state is already connected after successful SetRemoteDescription, joining voice chat immediately"),l.JoinVoiceChatOrAskForOneOnOneChatNow()):(l.LogMsg("(VoiceChat) ICE state is not connected after successful SetRemoteDescription, waiting for UDP connetivity"),l.m_VoiceCallState.m_eState=I.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected),1)}),this.m_OnVoiceAllUsersStatusUpdate=Object(S.c)(_.h.NotifyAllUsersVoiceStatusHandler,function(e){if(l.m_VoiceCallState.m_voiceChatID!=e.Body().voice_chatid())return 1;for(var t=0;t<e.Body().users().length;++t){var n=e.Body().users()[t];l.UpdateUserVoiceStatus(n)}return 1}),this.m_OnVoiceStatusUpdate=Object(S.c)(_.h.NotifyUserVoiceStatusHandler,function(e){return l.UpdateUserVoiceStatus(e.Body()),1}),this.m_VoiceChatResponseHandler=Object(S.c)(_.h.NotifyOneOnOneChatResponseHandler,function(e){if(l.m_VoiceCallState.m_eState>=I.k_EVoiceCallState_RequestedPermission){var t=new b.a(e.Body().steamid_partner());if(e.Body().voicechat_id()!=l.m_VoiceCallState.m_voiceChatID)l.LogMsg("(VoiceChat) Got response from "+t.GetAccountID()+" but for different voice chat than we are in, ignoring. ");else if(t.GetAccountID()==l.m_VoiceCallState.m_targetAccountID&&1==e.Body().accepted_request())l.LogMsg("(VoiceChat) Got acceptance from "+t.GetAccountID()+" "+e.Hdr().steamid()),g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_enter.m4a?v=1"),l.OnVoiceChatAccepted(!0);else{l.LogMsg("(VoiceChat) Rejected by "+t.GetAccountID());var n=g.f.ChatStore.GetFriendChat(t.GetAccountID(),!1),o=g.f.FriendStore.GetFriend(t.GetAccountID());null!=n&&null!=o&&(l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,n.AddVoiceChannelInviteMsg(t.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEndedExplicit",o.display_name))),l.DeleteOneOnOneCallWaitingJoinOrAccept(t.GetAccountID()),g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1"),l.OnVoiceChatAccepted(!1)}}return 1}),this.m_IncomingVoiceChatRequestHandler=Object(S.c)(_.h.NotifyOneOnOneChatRequestedHandler,function(e){var t=new b.a(e.Body().steamid_partner()),n=e.Body().voice_chatid(),o=g.f.FriendStore.GetFriend(t.GetAccountID());if(null==o||o.is_blocked||g.f.FriendStore.BIsInvisibleMode()||g.f.FriendStore.GetUserDoNotDisturb())return l.LogMsg("(VoiceChat) Rejecting one-on-one voice chat request because partner is not a friend, is blocked, we are invisible, or we are DND"),l.OnRejectOneOnOneVoiceChat(t,e.Body().voice_chatid()),1;var i=new A;i.partner_accountid=l.m_CMInterface.steamid.GetAccountID(),i.voice_chatid=n,i.previously_joined=!1;var r=l;if(i.audio_repeat=SetBackgroundTimeout(function(){i.audio_repeat=0,r.PlayRingSound(t.GetAccountID())},2e4),l.m_mapOneOnOneCallsWaitingJoinOrAccept.set(t.GetAccountID(),i),l.LogMsg("(VoiceChat) voice chat request from "+t.GetAccountID()),l.LogMsg("(VoiceChat) current state "+l.m_VoiceCallState.m_eState),l.m_VoiceCallState.m_targetAccountID==t.GetAccountID())return l.LogMsg("(VoiceChat) We are already trying to one on one chat this user, just auto-acceptting to re-sync."),l.OnAcceptOneOnOneVoiceChat(t,n),1;g.f.NotificationManager.DisplayNotificationFromFriend(o,{title:o.display_name,body:Object(v.c)("#Friend_RequestingOneOnOneChat",o.display_name),tag:"state_"+o.accountid,steamid:o.persona.m_steamid.ConvertTo64BitString()});var a=g.f.ChatStore.GetFriendChat(t.GetAccountID(),!0);return null!=a&&(a.AddVoiceChannelInviteMsg(t.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelInvite",o.display_name,a.self.display_name)),g.f.UIStore.ShowAndOrActivateChat(g.f.GetDefaultBrowserContext(),a,!1)),l.PlayRingSound(o.accountid),1}),this.m_VoiceChatEndedHandler=Object(S.c)(_.h.NotifyVoiceChatEndedHandler,function(e){for(var t=e.Body().voice_chatid(),n=0,o=Array.from(l.m_mapOneOnOneCallsWaitingJoinOrAccept.keys());n<o.length;n++){var i=o[n],r=l.m_mapOneOnOneCallsWaitingJoinOrAccept.get(i);if(null!=r&&r.voice_chatid==t){l.LogMsg("(VoiceChat) OneOnOne VoiceChat we were invited too with "+i+" has ended and is no longer joinable."),g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1");var a=Number(i);l.DeleteOneOnOneCallWaitingJoinOrAccept(a);var s=g.f.ChatStore.GetFriendChat(a,!1),c=g.f.FriendStore.GetFriend(a);null!=s&&(c?s.AddVoiceChannelInviteMsg(c.accountid,g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEndedExplicit",c.display_name)):s.AddVoiceChannelInviteMsg(l.m_CMInterface.steamid.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEnded")),l.m_VoiceCallState.m_targetAccountID==Number(i)&&(l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0))}}if(t==l.m_VoiceCallState.m_voiceChatID){if(0!=l.m_VoiceCallState.m_targetAccountID)null==(s=g.f.ChatStore.GetFriendChat(l.m_VoiceCallState.m_targetAccountID,!1))||l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg||(l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,s.AddVoiceChannelInviteMsg(l.m_CMInterface.steamid.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEnded")));0!=l.m_VoiceCallState.m_targetAccountID&&l.m_VoiceCallState.m_eState>I.k_EVoiceCallState_RequestedPermission&&g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1"),l.LogMsg("(VoiceChat) Got voice chat end notification from server for active chatid"),l.EndVoiceChatInternal(!1)}return 1}),this.m_VoiceChatEnteredNotification=Object(S.c)(_.h.NotifyUserJoinedVoiceChatHandler,function(e){if(e.Body().voice_chatid()==l.m_VoiceCallState.m_voiceChatID){var t=new b.a(e.Body().user_steamid());l.LogMsg("(VoiceChat) User "+t.Render()+" has just JOINED our active voice chat"),0!=l.m_VoiceCallState.m_targetAccountID&&l.m_VoiceCallState.m_targetAccountID==t.GetAccountID()&&(l.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1)}return 1}),this.m_VoiceChatLeftNotification=Object(S.c)(_.h.NotifyUserLeftVoiceChatHandler,function(e){if(e.Body().voice_chatid()==l.m_VoiceCallState.m_voiceChatID){var t=new b.a(e.Body().user_steamid());l.LogMsg("(VoiceChat) User "+t.Render()+" has just LEFT our active voice chat"),0!=l.m_VoiceCallState.m_targetAccountID&&l.m_VoiceCallState.m_targetAccountID==t.GetAccountID()&&(l.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!0)}return 1}),this.m_ShouldRejoinChatRoomVoiceChatHandler=Object(S.c)(f.U.NotifyShouldRejoinChatRoomVoiceChatHandler,function(e){var t={groupID:e.Body().chat_group_id(),chatID:e.Body().chat_id()};return l.m_VoiceCallState.m_eState>I.k_EVoiceCallState_ScheduledInitiate&&l.m_VoiceCallState.BMatchingCall(0,t)&&(l.LogMsg("(ChatRoom) Notified that we need to rejoin new voicechat session for chat room... doing so now..."),l.EndVoiceChatInternal(!0),l.InitiateVoiceChat(0,t)),1}),this.m_Settings=new R(e),this.m_Settings.LoadFromLocalStorage(this),"undefined"!=typeof SteamClient&&null!=SteamClient&&null!=SteamClient.WebChat&&(null!=SteamClient.WebChat.RegisterForPushToTalkStateChange&&(this.m_hRegisterForPushToTalkStateChange=SteamClient.WebChat.RegisterForPushToTalkStateChange(this.OnPushToTalkStateChange)),null!=SteamClient.WebChat.SetVoiceChatActive))try{SteamClient.WebChat.SetVoiceChatActive(!1)}catch(e){}}return o.prototype.Init=function(e){this.m_CMInterface=e,window.SetVoiceEchoLocalMic=this.SetVoiceEchoLocalMic,window.SetVoiceLogDetails=this.SetVoiceLogDetails,window.SetVoiceForceReconnectingStatus=this.ForceReconnectingStatus,window.SetVoiceForceConnectingStatus=this.ForceConnectingStatus},o.prototype.RefreshPushToTalkKeySettings=function(){var t=this;"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.GetPushToTalkEnabled&&SteamClient.WebChat.GetPushToTalkEnabled().then(function(e){t.m_bPushToTalkEnabled=e.bEnabled,t.m_VKPushToTalkHotKey=e.vkHotKey,e.bPushToMute&&(t.m_bPushToMuteEnabled=e.bEnabled,t.m_bPushToTalkEnabled=!1),t.m_strPushToTalkDisplayString=e.strKeyName,t.m_bPushToTalkEnabled||t.m_bPushToMuteEnabled||null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkHotKey&&(Object(y.a)(t.m_Settings.m_bSettingsLoaded,"Settings not loaded but RefreshPushToTalkKeySettings hit"),t.m_Settings.m_bHasResetOpenMicHotkey||(t.m_Settings.m_bHasResetOpenMicHotkey=!0,t.m_Settings.SaveToLocalStorage(),console.log("Reset Open Mic hotkey to None on first run of new client in open mic mode"),SteamClient.WebChat.SetPushToTalkHotKey(0),t.RefreshPushToTalkKeySettings()))})},o.prototype.InitiateFriendChat=function(e){this.BPartnerHasRequestedAndIsInOneOnOneChat(e)?this.AcceptPartnersOneOnOneChatRequest(e):(this.InitiateVoiceChat(e,null),g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_phonecall.m4a?v=1"))},o.prototype.InitiateRoomChat=function(e,t){this.InitiateVoiceChat(0,{groupID:e,chatID:t})},o.prototype.EndLocalMicTest=function(){this.m_bLocalMicTestActive=!1,this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_LocalMicOnly&&this.EndVoiceChatInternal(!1),this.SetVoiceEchoLocalMic(this.m_bLocalMicEchoStateBeforeMicTest)},o.prototype.IsLocalMicTestActive=function(){return this.m_bLocalMicTestActive},o.prototype.InitiateLocalMicTest=function(){this.m_bLocalMicTestActive=!0,this.m_bLocalMicEchoStateBeforeMicTest=this.m_VoiceEchoLocalMic,this.SetVoiceEchoLocalMic(!0),this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_None&&this.InitiateVoiceChat(0,null)},o.prototype.AcceptPartnersOneOnOneChatRequest=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t)return!1;t.ClearAudioRepeats();var n=b.a.InitFromAccountID(e);return this.OnAcceptOneOnOneVoiceChat(n,t.voice_chatid),!0},o.prototype.OnRejectOneOnOneVoiceChatForPartner=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t)return!1;t.ClearAudioRepeats();var n=b.a.InitFromAccountID(e);this.OnRejectOneOnOneVoiceChat(n,t.voice_chatid),this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e);var o=g.f.ChatStore.GetFriendChat(e,!1),i=g.f.FriendStore.self;return null!=o&&null!=i&&(this.m_VoiceCallState.m_targetAccountID==e&&this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg||o.AddVoiceChannelInviteMsg(i.accountid,g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEndedExplicit",i.display_name)),this.m_VoiceCallState.m_targetAccountID==e&&(this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0)),!0},o.prototype.OnUserLeaveOneOnOneVoiceChat=function(){0!=this.m_VoiceCallState.m_targetAccountID||this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_None?(this.LogMsg("(VoiceChat) User asking to leave but not end one-on-one chat with: "+this.m_VoiceCallState.m_targetAccountID),this.EndVoiceChatInternal(!1)):this.LogMsg("(VoiceChat) OnUserLeaveOneOnOneVoiceChat called when in a group not one-on-one chat!")},o.prototype.OnUserEndVoiceChat=function(){var t=this;if(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None&&0!=this.m_VoiceCallState.m_targetAccountID){if(!this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg){var e=g.f.ChatStore.GetFriendChat(this.m_VoiceCallState.m_targetAccountID,!1),n=g.f.FriendStore.self;null!=e&&null!=n&&(this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,e.AddVoiceChannelInviteMsg(g.f.CMInterface.steamid.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEndedExplicit",n.display_name)))}var o=this.m_VoiceCallState.m_targetAccountID;this.m_VoiceCallState.m_targetAccountID=0;var i=h.b.Init(_.b);i.Body().set_steamid_partner(b.a.InitFromAccountID(o).ConvertTo64BitString()),this.DeleteOneOnOneCallWaitingJoinOrAccept(o),_.i.EndOneOnOneChat(this.m_CMInterface.GetServiceTransport(),i).then(function(e){1==e.GetEResult()?t.LogMsg("(VoiceChat) Ended voice chat with "+o):t.LogMsg("(VoiceChat) Failed ending voice chat with "+o)})}0!=this.m_VoiceCallState.m_targetAccountID&&this.DeleteOneOnOneCallWaitingJoinOrAccept(this.m_VoiceCallState.m_targetAccountID),this.EndVoiceChatInternal(!1)},o.prototype.SetSelectedMic=function(e){e!=this.m_Settings.m_SelectedMicID&&(this.LogMsg("(VoiceChat) Set selected mic "+e),this.m_Settings.m_SelectedMicID=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},o.prototype.SetSelectedOutput=function(e){e!=this.m_Settings.m_SelectedOutputID&&(this.LogMsg("(VoiceChat) Set selected output "+e),this.m_Settings.m_SelectedOutputID=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},o.prototype.GetAudioWorkletSupport=function(){return g.f.AudioPlaybackManager.supports_audio_worklets},o.prototype.GetUserDeniedMicAccess=function(){return this.m_bUserHasDeniedMicPermissions},o.prototype.GetSelectedMic=function(){return this.m_Settings.m_SelectedMicID},o.prototype.GetSelectedOutputDevice=function(){return this.m_Settings.m_SelectedOutputID},o.prototype.SetUseEchoCancellation=function(e){e!=this.m_Settings.m_VoiceUseEchoCancellation&&(this.m_Settings.m_VoiceUseEchoCancellation=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},o.prototype.GetUseEchoCancellation=function(){return this.m_Settings.m_VoiceUseEchoCancellation},o.prototype.SetUseNoiseCancellation=function(e){e!=this.m_Settings.m_VoiceUseNoiseCancellation&&(this.m_Settings.m_VoiceUseNoiseCancellation=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},o.prototype.GetUseNoiseCancellation=function(){return this.m_Settings.m_VoiceUseNoiseCancellation},o.prototype.SetUseAutoGainControl=function(e){e!=this.m_Settings.m_VoiceUseAutoGainControl&&(this.m_Settings.m_VoiceUseAutoGainControl=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},o.prototype.GetUseAutoGainControl=function(){return this.m_Settings.m_VoiceUseAutoGainControl},o.prototype.SetVoiceEchoLocalMic=function(e){this.m_VoiceEchoLocalMic=e,this.UpdateNoiseGateOnActiveMic()},o.prototype.GetVoiceEchoLocalMic=function(){return this.m_VoiceEchoLocalMic},o.prototype.GetPushToTalkOrMuteSoundsEnabled=function(){return this.m_Settings.m_bPlayPTTSounds},o.prototype.SetPushToTalkOrMuteSoundsEnabled=function(e){this.m_Settings.m_bPlayPTTSounds!=e&&(this.m_Settings.m_bPlayPTTSounds=e,this.m_Settings.SaveToLocalStorage())},o.prototype.SetPushToTalkEnabled=function(e){this.m_bPushToTalkEnabled=e,this.m_bPushToMuteEnabled=!1},o.prototype.GetPushToTalkEnabled=function(){return this.m_bPushToTalkEnabled},o.prototype.SetPushToMuteEnabled=function(e){this.m_bPushToMuteEnabled=e,this.m_bPushToTalkEnabled=!1},o.prototype.GetPushToMuteEnabled=function(){return this.m_bPushToMuteEnabled},o.prototype.GetPushToTalkVoiceStateEnabled=function(){return this.m_bVoicePTTStateEnabled},o.prototype.GetPushToTalkHotKeyVK=function(){return this.m_VKPushToTalkHotKey},o.prototype.GetPushToTalkHotKeyDisplayString=function(){return this.m_strPushToTalkDisplayString},o.prototype.SetVoiceLogDetails=function(e){this.m_LogVoiceChatDetails=e},o.prototype.GetVoiceLogDetails=function(){return this.m_LogVoiceChatDetails},o.prototype.SetUseNoiseGateLevel=function(e){e!=this.m_Settings.m_NoiseGateLevel&&(this.LogMsg("(VoiceChat) Nose Gate Level: "+e),this.m_Settings.m_NoiseGateLevel=e,this.m_Settings.SaveToLocalStorage(),this.UpdateNoiseGateOnActiveMic())},o.prototype.GetUseNoiseGateLevel=function(){return this.m_Settings.m_NoiseGateLevel},o.prototype.SetVoiceInputGain=function(e){this.m_Settings.m_VoiceInputGain!=e&&(this.m_Settings.m_VoiceInputGain=Math.max(0,Math.min(e,o.k_MaxInputOutputGainValue)),this.LogMsg("(VoiceChat) New mic Input Gain value is "+this.m_Settings.m_VoiceInputGain),null!=this.m_MicInputGainNode&&this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),this.m_Settings.SaveToLocalStorage())},o.prototype.GetVoiceInputGain=function(){return this.m_Settings.m_VoiceInputGain},o.prototype.SetVoiceOutputGain=function(e){if(this.m_Settings.m_VoiceOutputGain!=e){this.m_Settings.m_VoiceOutputGain=Math.max(0,Math.min(e,o.k_MaxInputOutputGainValue)),this.LogMsg("(VoiceChat) New global OutputGain value is "+this.m_Settings.m_VoiceOutputGain),this.m_Settings.SaveToLocalStorage();for(var t=0;t<this.m_rgAudioStreams.length;++t){var n=this.m_rgAudioStreams[t];n.output_gain_node&&(n.type==d.k_EAudioStreamType_Microphone?n.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain,this.m_AudioContext.currentTime):n.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*this.GetPerUserGainLevel(n.accountid),this.m_AudioContext.currentTime))}}},o.prototype.GetVoiceOutputGain=function(){return this.m_Settings.m_VoiceOutputGain},o.prototype.GetUserMutedRemotely=function(e){var t=this.m_mapUserVoiceStatus.get(e);return null==t&&(t=new L,this.m_mapUserVoiceStatus.set(e,t)),t.mic_muted_locally},o.prototype.GetOutputMutedRemotely=function(e){var t=this.m_mapUserVoiceStatus.get(e);return null==t&&(t=new L,this.m_mapUserVoiceStatus.set(e,t)),t.output_muted_locally},o.prototype.GetUserHasNoMicForSession=function(e){var t=this.m_mapUserVoiceStatus.get(e);return null==t&&(t=new L,this.m_mapUserVoiceStatus.set(e,t)),t.has_no_mic_for_session},o.prototype.ConvertSliderToGainValue=function(e,t){return e=e<=50?e/50*1:1+t*((e-50)/50)},o.prototype.ConvertGainValueToSliderValue=function(e,t){return e<=1?50*e:50+(e-1)/t*50},o.prototype.ForceReconnectingStatus=function(e){this.m_bForceReconnectingStatus=!0},o.prototype.ForceConnectingStatus=function(e){this.m_bForceConnectingStatus=!0},o.prototype.GetActiveChatRoomGroupID=function(){return this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_None?"":this.m_VoiceCallState.m_chatRoom?this.m_VoiceCallState.m_chatRoom.groupID:""},o.prototype.GetActiveVoiceChatID=function(){return this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_None?"":this.m_VoiceCallState.m_chatRoom?this.m_VoiceCallState.m_chatRoom.chatID:""},o.prototype.BInitiatedOneOnOneChat=function(e){return this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None&&(this.m_VoiceCallState.m_targetAccountID==e&&this.m_VoiceCallState.m_bInitiatedOneOnOneCall)},o.prototype.ToggleMicMuting=function(){for(var e=0;e<this.m_rgAudioStreams.length;++e){var t=this.m_rgAudioStreams[e];if(t.type==d.k_EAudioStreamType_Microphone){t.muted=!t.muted;for(var n=t.stream.getTracks(),o=0;o<n.length;o++)n[o].enabled=!t.muted;t.muted?this.m_MicInputGainNode.gain.setValueAtTime(0,this.m_AudioContext.currentTime+.2):this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime)}}this.SendVoiceStatusUpdate()},o.prototype.BHasSampleRateTooHighInBrowser=function(){return!p.a.IN_CLIENT&&48e3<g.f.AudioPlaybackManager.GetLastObservedSampleRate()},o.prototype.BNoMicAvailableForSession=function(){if(this.m_VoiceCallState.m_eState<=I.k_EVoiceCallState_RequestedMicAccess)return!1;if(this.BHasSampleRateTooHighInBrowser())return!0;for(var e=0;e<this.m_rgAudioStreams.length;++e)if(this.m_rgAudioStreams[e].type==d.k_EAudioStreamType_Microphone)return!1;return!0},o.prototype.IsMicMuted=function(){for(var e=0;e<this.m_rgAudioStreams.length;++e)if(this.m_rgAudioStreams[e].type==d.k_EAudioStreamType_Microphone)return this.m_rgAudioStreams[e].muted;return!1},o.prototype.ToggleOutputMuting=function(){this.m_bOutputMuted=!this.m_bOutputMuted;for(var e=0;e<this.m_rgAudioStreams.length;++e){var t=this.m_rgAudioStreams[e];if(t.type==d.k_EAudioStreamType_IncomingStream){t.muted=this.m_bOutputMuted||this.GetPerUserMuting(t.accountid);for(var n=t.stream.getTracks(),o=0;o<n.length;o++)n[o].enabled=!this.m_bOutputMuted}}this.SendVoiceStatusUpdate()},o.prototype.IsOutputMuted=function(){return this.m_bOutputMuted},o.prototype.GetActiveOneOnOneVoiceChatAccountID=function(){return this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_None?0:this.m_VoiceCallState.m_targetAccountID},Object.defineProperty(o.prototype,"audio_streams",{get:function(){return this.m_rgAudioStreams},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mic_volume",{get:function(){return this.m_MicVolumeMeter},enumerable:!0,configurable:!0}),o.prototype.get_volume=function(e){if(e==this.m_CMInterface.steamid.GetAccountID()){if(this.IsMicMuted()||this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_Connected&&this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_LocalMicOnly)return 0}else if(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_Connected)return 0;for(var t=0,n=0;n<this.m_rgAudioStreams.length;++n){var o=this.m_rgAudioStreams[n];o.accountid==e&&null!=o.volume_meter&&(t=Math.max(t,o.volume_meter.rounded_volume))}return t},o.prototype.GetPerUserGainLevel=function(e){var t=this.m_mapPerUserOutputGain.get(e);return null==t?1:t.gain},o.prototype.GetPerUserMuting=function(e){var t=this.m_mapPerUserOutputGain.get(e);return null!=t&&t.muted},o.prototype.SetPerUserMuting=function(e,t){var n=this.m_mapPerUserOutputGain.get(e);null==n&&(n=new j),n.muted=t||this.m_bOutputMuted,this.m_mapPerUserOutputGain.set(e,n),this.UpdateStreamsForPerUseGainChange(e)},o.prototype.SetPerUserGainLevel=function(e,t){var n=Math.max(0,Math.min(4,t)),o=this.m_mapPerUserOutputGain.get(e);null==o&&(o=new j),o.gain=n,o.gain<.001?o.muted=!0:o.muted=!1,this.m_mapPerUserOutputGain.set(e,o),this.UpdateStreamsForPerUseGainChange(e)},o.prototype.UpdateStreamsForPerUseGainChange=function(e){var t=this.m_mapPerUserOutputGain.get(e);null==t&&(t=new j);for(var n=0;n<this.m_rgAudioStreams.length;++n){var o=this.m_rgAudioStreams[n];if(o.accountid==e&&null!=o.output_gain_node){o.muted=t.muted,o.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*t.gain,this.m_AudioContext.currentTime);for(var i=o.stream.getTracks(),r=0;r<i.length;r++)i[r].enabled=!o.muted}}},o.prototype.OnUserLeftChatRoomVoiceChat=function(e,t,n,o){var i={groupID:e,chatID:t};this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_RequestedPermission&&this.m_VoiceCallState.BMatchingCall(0,i)&&(n!=this.m_CMInterface.steamid.GetAccountID()||o||(this.LogMsg("(ChatRoom) We were told that we left chat "+t+" but we hadn't initiated that, trying to reconnect..."),this.RestartVoiceChatIfConnected()))},o.prototype.IsMicTestActive=function(){return this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_LocalMicOnly},o.prototype.IsAnyVoiceActive=function(){return!(this.m_VoiceCallState.m_eState<=I.k_EVoiceCallState_LocalMicOnly&&0==this.m_VoiceCallState.m_targetAccountID&&null==this.m_VoiceCallState.m_chatRoom)&&(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None||0!=this.m_ScheduledInitiate)},o.prototype.BSelfHasAcceptedOrInitiatedOneOnOneChat=function(e){return this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None&&this.m_VoiceCallState.m_targetAccountID==e&&(!!this.m_VoiceCallState.m_bInitiatedOneOnOneCall||this.m_VoiceCallState.m_eState>=I.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession)},o.prototype.BSelfHadPreviouslyJoinedOneOnOneChat=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null==t){var n=new A;return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e,n),!1}if(t.partner_accountid!=this.m_CMInterface.steamid.GetAccountID())return!1;var o=t.voice_chatid;return t.previously_joined&&""!=o},o.prototype.BPartnerHasAcceptedOrInitiatedOneOnOneChat=function(e){return!(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None||this.m_VoiceCallState.m_bInitiatedOneOnOneCall||!this.BPartnerHasRequestedAndIsInOneOnOneChat(e))||this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_RequestedPermission&&!this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin},o.prototype.BPartnerHasRequestedAndIsInOneOnOneChat=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(null!=t)return t.partner_accountid==this.m_CMInterface.steamid.GetAccountID()&&""!=t.voice_chatid;var n=new A;return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e,n),!1},o.prototype.IsAttemptingInitialConnection=function(){return(0==this.m_VoiceCallState.m_targetAccountID||this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_RequestedPermission)&&(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_LocalMicOnly&&(this.IsAnyVoiceActive()&&0==this.m_VoiceCallState.m_nFailuresThisInitiate&&this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_Connected))},o.prototype.HasBeenAttemptingOverTwoSeconds=function(){var e=this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds,t=this.IsAttemptingInitialConnection();return!!this.m_bForceConnectingStatus||e&&t},o.prototype.IsAttemptingReconnect=function(){var e=this.IsAnyVoiceActive(),t=this.m_VoiceCallState.m_nFailuresThisInitiate,n=this.m_VoiceCallState.m_eState;return!!this.m_bForceReconnectingStatus||e&&0<t&&n!=I.k_EVoiceCallState_Connected},o.prototype.IsVoiceActiveForFriend=function(e){return this.IsVoiceActive(e,null)},o.prototype.IsVoiceActiveForRoom=function(e,t){return this.IsVoiceActive(0,{groupID:e,chatID:t})},o.prototype.IsVoiceActiveForGroup=function(e){return!!this.m_VoiceCallState.BCallActiveForGroup(e)&&this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None},o.prototype.LogMsg=function(e){this.m_rgLogLines.push(e),this.m_LogVoiceChatDetails&&console.log(e)},o.prototype.GetVoiceLogs=function(){return this.m_rgLogLines.join("\r\n")},o.prototype.OnPushToTalkReleased=function(){this.m_bPushToTalkEnabled&&null!=this.m_MicInputGainNode&&!this.m_bVoicePTTStateEnabled?this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime+.2):this.m_bPushToMuteEnabled&&null!=this.m_MicInputGainNode&&this.m_bVoicePTTStateEnabled&&this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime+.2)},o.prototype.DebouncedToggleMicMuting=function(){this.ToggleMicMuting(),this.GetPushToTalkOrMuteSoundsEnabled()&&(this.IsMicMuted()?g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"):g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"))},o.prototype.OnPushToTalkStateChange=function(e){var t=e,n=!1;g.f.SettingsStore.BClientHasFeatureOrOnWeb("NewVoiceHotKeyState")&&(n=!0,this.m_bPushToMuteEnabled&&(t=!e)),!n||this.m_bPushToTalkEnabled||this.m_bPushToMuteEnabled?t!=this.m_bVoicePTTStateEnabled&&(this.m_bVoicePTTStateEnabled=t,(this.m_bPushToTalkEnabled||this.m_bPushToMuteEnabled)&&null!=this.m_MicInputGainNode&&(this.m_bVoicePTTStateEnabled?(this.GetPushToTalkOrMuteSoundsEnabled()&&g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"),this.m_bPushToMuteEnabled?this.m_hPushToTalkReleaseTimeout=SetBackgroundTimeout(this.OnPushToTalkReleased,100):(this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),0!=this.m_hPushToTalkReleaseTimeout&&ClearBackgroundTimeout(this.m_hPushToTalkReleaseTimeout))):(this.GetPushToTalkOrMuteSoundsEnabled()&&g.f.AudioPlaybackManager.PlayAudioURL(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"),this.m_bPushToMuteEnabled?(this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),0!=this.m_hPushToTalkReleaseTimeout&&ClearBackgroundTimeout(this.m_hPushToTalkReleaseTimeout)):this.m_hPushToTalkReleaseTimeout=SetBackgroundTimeout(this.OnPushToTalkReleased,100)))):e&&null!=this.m_MicInputGainNode&&this.DebouncedToggleMicMuting()},o.prototype.GetCurrentVoiceInputGainTarget=function(){return this.m_bPushToTalkEnabled&&!this.m_bVoicePTTStateEnabled?0:this.m_bPushToMuteEnabled&&!this.m_bVoicePTTStateEnabled?0:this.m_Settings.m_VoiceInputGain},o.prototype.RestartVoiceChatIfConnected=function(){if(this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_ScheduledInitiate){var e=this.m_VoiceCallState.m_targetAccountID,t=this.m_VoiceCallState.m_chatRoom;this.LogMsg("(WebRTC) Ending then auto-re-initiating voice chat - without leave of chatroom if joined as attempt is quick rejoin"),this.EndVoiceChatInternal(!0),this.InitiateVoiceChat(e,t)}},o.prototype.GetNoiseGateOptions=function(){var e={attack:2,release:.01,threshold:-80,bufferSize:1024};switch(this.m_Settings.m_NoiseGateLevel){case C.k_ENoiseGateLevel_Off:break;case C.k_ENoiseGateLevel_Low:e={attack:.8,release:.06,threshold:-48,bufferSize:1024};break;case C.k_ENoiseGateLevel_Medium:e={attack:.8,release:.06,threshold:-36,bufferSize:1024};break;case C.k_ENoiseGateLevel_High:e={attack:.8,release:.09,threshold:-22,bufferSize:1024}}return e},o.prototype.DeleteOneOnOneCallWaitingJoinOrAccept=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);null!=t&&(t.ClearAudioRepeats(),this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e))},o.prototype.UpdateNoiseGateOnActiveMic=function(){if(null!=this.m_MicInputGainNode){for(var e=void 0,t=0;t<this.m_rgAudioStreams.length;++t){var n=this.m_rgAudioStreams[t];if(n.type==d.k_EAudioStreamType_Microphone){e=n;break}}if(null!=e){if(null!=this.m_MicNoiseGate)this.m_MicInputGainNode.disconnect(this.m_MicNoiseGate.input),this.m_MicNoiseGate.input?(this.m_MicNoiseGate.input.disconnect(),this.m_MicNoiseGate.output.disconnect(),this.m_MicNoiseGate.noiseGateKernel_.disconnect()):this.m_MicNoiseGate.disconnect(),this.m_MicNoiseGate=void 0;else{this.m_MicInputGainNode.disconnect(e.destination_node);try{this.m_MicInputGainNode.disconnect(e.output_gain_node)}catch(e){}}this.m_MicVolumeMeter.stop(),this.m_MicVolumeMeter=void 0,null!=e.volume_meter&&(e.volume_meter.stop(),e.volume_meter=void 0),this.m_Settings.m_NoiseGateLevel!=C.k_ENoiseGateLevel_Off?this.SetupNoiseGateOnMic(e.destination_node):this.m_MicInputGainNode.connect(e.destination_node);var o=e.source_node;this.m_MicNoiseGate&&(o=this.m_MicNoiseGate.output?this.m_MicNoiseGate.output:this.m_MicNoiseGate),this.m_MicVolumeMeter=new u(o,this.m_AudioContext),e.volume_meter=this.m_MicVolumeMeter,this.m_VoiceEchoLocalMic&&null==this.m_MicNoiseGate?this.m_MicInputGainNode.connect(e.output_gain_node):this.m_VoiceEchoLocalMic&&(this.m_MicNoiseGate.output?this.m_MicNoiseGate.output.connect(e.output_gain_node):this.m_MicNoiseGate.connect(e.output_gain_node))}}},o.prototype.OnAudioContextStateChange=function(){null!=this.m_AudioContext&&this.LogMsg("(WebAudio) Audio context state changed: "+this.m_AudioContext.state)},o.prototype.OnIceCandidate=function(e){this.LogMsg("(ICE) Local candidate: "+JSON.stringify(e.candidate))},o.prototype.AddRemoteIceCandidate=function(e,t){var n=this.LogMsg;n("(ICE) Candidate from remote peer: "+JSON.stringify(t)),e.addIceCandidate(t).then(function(){}).catch(function(e){n("addIceCandidate error: "+e+" "+e.name)})},o.prototype.OnSignalingStateChange=function(e,t){this.LogMsg("(WebRTC) OnSignalingStateChange: "+e.signalingState)},o.prototype.OnIceConnectionStateChange=function(e,t){this.LogMsg("(ICE) OnIceConnectionStateChange: "+e.iceConnectionState),"failed"==e.iceConnectionState&&this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_CreatePeerConnection?this.BackOffAndRetryInitiateVoiceChat():"completed"!=e.iceConnectionState&&"connected"!=e.iceConnectionState||this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected||(this.LogMsg("(VoiceChat) ICE connection state now 'completed' or 'connected', proceeding to join voice chat"),this.JoinVoiceChatOrAskForOneOnOneChatNow())},o.prototype.OnIceGatheringStateChange=function(e,t){this.LogMsg("(ICE) OnIceGatheringStateChange: "+e.iceGatheringState)},o.prototype.RemoveStreamToOutput=function(e){this.LogMsg("(WebRTC) RemoveStreamToOutput - "+e.id+" - "+e.getTracks().length);for(var t=0;t<this.m_rgAudioStreams.length;++t){var n=this.m_rgAudioStreams[t];if(n.unique_id==e.id){if(n.elem.pause(),n.elem.srcObject=void 0,n.elem.src=void 0,n.elem=void 0,null!=n.volume_meter&&(n.volume_meter.stop(),n.volume_meter=void 0),null!=n.output_gain_node&&(n.output_gain_node.disconnect(),n.output_gain_node=void 0),null!=n.source_node){try{n.source_node.disconnect()}catch(e){}n.source_node=void 0}return void this.m_rgAudioStreams.splice(t,1)}}},o.prototype.OnRemoveRemoteStream=function(e){this.RemoveStreamToOutput(e.stream)},o.prototype.SetupAudioStreamElementAndCreateSourceNode=function(e,t){var n=-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...");null!=e.source_node&&(e.source_node.disconnect(),e.source_node=void 0),null==e.elem?e.elem=document.createElement("audio"):e.elem.srcObject=void 0,e.elem.srcObject=t,e.source_node=n?(e.elem.play(),this.m_AudioContext.createMediaElementSource(e.elem)):this.m_AudioContext.createMediaStreamSource(t)},o.prototype.AddStreamToOutput=function(e){var t=new w;this.SetupAudioStreamElementAndCreateSourceNode(t,e),t.unique_id=e.id,t.stream=e,t.type=d.k_EAudioStreamType_IncomingStream;var n=e.id.match(/Peer-(\d+)-(\d+)-/);if(n&&3==n.length?t.accountid=Number(n[2]):t.accountid=0,this.LogMsg("(VoiceChat) AddStreamToOutput "+t.accountid+" "+t.unique_id),t.muted=this.m_bOutputMuted||this.GetPerUserMuting(t.accountid),t.muted)for(var o=t.stream.getTracks(),i=0;i<o.length;i++)o[i].enabled=!t.muted;this.m_rgAudioStreams.push(t),t.output_gain_node=this.m_AudioContext.createGain(),t.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*this.GetPerUserGainLevel(t.accountid),this.m_AudioContext.currentTime),t.output_gain_node.connect(g.f.AudioPlaybackManager.GetActiveDestination()),t.source_node.connect(t.output_gain_node),t.volume_meter=new u(t.source_node,this.m_AudioContext),t.volume_meter.Connect(t.source_node)},o.prototype.OnAddTrack=function(e,t){for(var n=0;n<this.m_rgAudioStreams.length;++n){var o=this.m_rgAudioStreams[n];if(o.unique_id==e.id&&(this.LogMsg("(VoiceChat) OnAddTrack to existing stream "+o.accountid+" "+o.unique_id),o.volume_meter.DisconnectAll(),this.SetupAudioStreamElementAndCreateSourceNode(o,e),o.volume_meter.Connect(o.source_node),o.source_node.connect(o.output_gain_node),o.muted))for(var i=o.stream.getTracks(),r=0;r<i.length;r++)i[r].enabled=!o.muted}},o.prototype.OnAddRemoteStream=function(e){if(this.LogMsg("(WebRTC) OnAddRemoteStream - "+e.stream.id+" - "+e.stream.getTracks().length),null!=this.m_AudioContext){if(null!=e.stream&&null!=this.m_AudioContext){this.AddStreamToOutput(e.stream);var t=this;e.stream.onaddtrack=function(e){t.OnAddTrack(this,e)}}}else this.LogMsg("(WebRTC)Got OnAddRemoteStream when we don't have audio context... stopped chat?")},o.prototype.ModifyLocalSDPBeforeSetting=function(e){for(var t=/a=rtpmap:(\d+)\sopus(.*)/,n=/a=fmtp:(\d+)\s(.*)/,o=e.sdp.split("\r\n"),i=-1!=e.sdp.indexOf("mozilla..."),r=!1,a=0;a<o.length;++a){var s=o[a];if("m="==s.substr(0,2)&&a+1<o.length){for(var c="0",l=a+1;l<o.length;++l){if("m="==(s=o[l]).substr(0,2)){a=l-1;break}if(p=s.match(t)){c=p[1];break}}if("0"!=c)for(l=a+1;l<o.length;++l){if("m="==(s=o[l]).substr(0,2)){a=l-1;break}var p;if((p=s.match(n))&&p[1]==c){i||(o[l]="a=fmtp:"+p[1]+" minptime=10;useinbandfec=1;usedtx=1"),r=!0;break}}}}return r&&(e.sdp=o.join("\r\n")),e},o.prototype.OnCreateOfferSuccess=function(e,t){if(this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_CreatePeerConnection){this.LogMsg("(WebRTC) OnCreateOfferSuccess");var n=this;t=this.ModifyLocalSDPBeforeSetting(t),e.setLocalDescription(t).then(function(){var e=h.b.Init(r.b);e.Body().set_sdp(JSON.stringify(t)),n.LogMsg("(WebRTC) Offer (Local Description): "+e.Body().sdp()),n.m_VoiceCallState.m_eState=I.k_EVoiceCallState_InitatedWebRTCSession,r.d.InitiateWebRTCConnection(n.m_CMInterface.GetServiceTransport(),e).then(function(e){if(null==n.m_PeerConnection)n.LogMsg("(WebRTC) Got response to InitiateWebRTCConnection with no local peer connection"),n.EndVoiceChatInternal(!1);else if(1==e.GetEResult()){var t=JSON.parse(e.Body().remote_description());n.m_PeerConnection.setRemoteDescription(new RTCSessionDescription(t)).then(function(){n.LogMsg("(WebRTC) Remote Description: "+t.sdp),"offer"==t.type?(n.LogMsg("(WebRTC) !! received 'offer' rather than 'answer' from InitiateWebRTCConnection, unexpected."),n.EndVoiceChatInternal(!1)):"answer"==t.type&&n.LogMsg("(WebRTC) setRemoteDescription success")}).catch(function(e){n.LogMsg("(WebRTC) setRemoteDescription error: "+e),n.LogMsg("(VoiceChat) Fatal error, ending chat"),n.EndVoiceChatInternal(!1)})}else n.LogMsg("(WebRTC) Got failure ("+e.GetEResult()+") response from InitiateWebRTCConnection"),n.BackOffAndRetryInitiateVoiceChat()}).catch(function(e){n.LogMsg("(WebRTC) Failure in WebRTCClientService.InitiateWebRTCConnection"),n.BackOffAndRetryInitiateVoiceChat()})}).catch(function(e){n.LogMsg("(WebRTC) setLocalDescription error: "+e),n.LogMsg("(VoiceChat) Fatal error, ending voice chat"),n.EndVoiceChatInternal(!1)})}else this.LogMsg("(WebRTC) Hit OnCreateOfferSuccess in wrong state "+this.m_VoiceCallState.m_eState)},o.prototype.OnCreateOfferError=function(e){this.LogMsg("(WebRTC) OnCreateOfferError: "+e),this.LogMsg("(VoiceChat) Fatal Error, ending chat attempt"),this.EndVoiceChatInternal(!1)},o.prototype.CreatePeerConnection=function(e){var t=this,n=new RTCPeerConnection({sdpSemantics:"plan-b"});return n.onicecandidate=function(e){t.OnIceCandidate(e)},n.onaddstream=this.OnAddRemoteStream,n.onremovestream=this.OnRemoveRemoteStream,n.oniceconnectionstatechange=function(e){t.OnIceConnectionStateChange(n,e)},n.onicegatheringstatechange=function(e){t.OnIceGatheringStateChange(n,e)},n.onsignalingstatechange=function(e){t.OnSignalingStateChange(n,e)},null!=e&&n.addStream(e),this.m_PeerConnection=n,this.m_PeerConnection},o.prototype.OnMicStreamInactive=function(e,t){this.LogMsg("(WebRTC) Mic Stream went inactive: "+t.type),this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_RequestedMicAccess&&(this.LogMsg("(WebRTC) Ending then auto-re-initiating voice chat without mic"),this.RestartVoiceChatIfConnected())},o.prototype.OnNoiseGateMessage=function(e){this.LogMsg("(VoiceChat) "+e.data)},o.prototype.SetupNoiseGateOnMic=function(e){var t=this.GetNoiseGateOptions();if(g.f.AudioPlaybackManager.supports_audio_worklets){this.LogMsg("(VoiceChat) Audio Worklets supported - high performance mic noisegate in use!");var n=window;this.m_MicNoiseGate=new n.AudioWorkletNode(this.m_AudioContext,"noisegate-processor"),this.m_MicNoiseGate.port.onmessage=this.OnNoiseGateMessage,this.m_MicInputGainNode.connect(this.m_MicNoiseGate).connect(e),this.m_MicNoiseGate.parameters.get("threshold").setValueAtTime(t.threshold,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("attack").setValueAtTime(t.attack,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("release").setValueAtTime(t.release,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("sampleRate").setValueAtTime(this.m_AudioContext.sampleRate,this.m_AudioContext.currentTime)}else this.LogMsg("(VoiceChat) Browser doesn't support audio worklets, mic perf will suffer and may stutter/echo during repaint/high CPU usage"),this.m_MicNoiseGate=new a(this.m_AudioContext,t),this.m_MicInputGainNode.connect(this.m_MicNoiseGate.input),this.m_MicNoiseGate.output.connect(e)},o.prototype.OnGetUserMediaSuccess=function(e){if(this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_RequestedMicAccess){if(this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_CreatePeerConnection,null!=e){e.id;var t=this.m_AudioContext.createMediaStreamSource(e),n=this;e.oninactive=function(e){n.OnMicStreamInactive(this,e)},this.m_MicInputGainNode=this.m_AudioContext.createGain(),this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),t.connect(this.m_MicInputGainNode);var o=void 0;if(this.m_Settings.m_NoiseGateLevel!=C.k_ENoiseGateLevel_Off)o=this.m_AudioContext.createMediaStreamDestination(),this.SetupNoiseGateOnMic(o),e=o.stream;else o=this.m_AudioContext.createMediaStreamDestination(),this.m_MicInputGainNode.connect(o),e=o.stream;var i=new w;i.unique_id=e.id,i.destination_node=o,i.stream=e,i.source_node=t,i.type=d.k_EAudioStreamType_Microphone,i.accountid=this.m_CMInterface.steamid.GetAccountID(),i.muted=!1,i.elem=void 0,i.output_gain_node=this.m_AudioContext.createGain(),i.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain,this.m_AudioContext.currentTime),i.output_gain_node.connect(g.f.AudioPlaybackManager.GetActiveDestination()),this.m_rgAudioStreams.push(i);var r=t;this.m_MicNoiseGate&&(r=null!=this.m_MicNoiseGate.output?this.m_MicNoiseGate.output:this.m_MicNoiseGate),this.m_MicVolumeMeter=void 0,this.m_MicVolumeMeter=new u(r,this.m_AudioContext),i.volume_meter=this.m_MicVolumeMeter,this.m_VoiceEchoLocalMic&&null==this.m_MicNoiseGate?this.m_MicInputGainNode.connect(i.output_gain_node):this.m_VoiceEchoLocalMic&&(this.m_MicNoiseGate.output?this.m_MicNoiseGate.output.connect(i.output_gain_node):this.m_MicNoiseGate.connect(i.output_gain_node))}if(0!=this.m_VoiceCallState.m_targetAccountID||null!=this.m_VoiceCallState.m_chatRoom){var a=this.CreatePeerConnection(e),s=this;a.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:0,voiceActivityDetection:!0}).then(function(e){s.OnCreateOfferSuccess(a,e)}).catch(function(e){s.OnCreateOfferError(e)})}else this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_LocalMicOnly,this.m_VoiceCallState.m_timeFinishedConnecting=performance.now()}else{for(var c=0,l=e.getTracks();c<l.length;c++){l[c].stop()}this.LogMsg("(VoiceChat) Hit OnGetUserMediaSuccess in wrong state "+this.m_VoiceCallState.m_eState)}},o.prototype.OnGetUserMediaFailure=function(e){if(!(this.m_VoiceCallState.m_eState<=I.k_EVoiceCallState_ScheduledInitiate)){var t=this,n=navigator;n.permissions&&n.permissions.query({name:"microphone"}).then(function(e){"granted"==e.stat||("denied"==e.state?t.m_bUserHasDeniedMicPermissions=!0:e.state)}),this.LogMsg("(WebAudio) The following error occured getting audio stream: "+e.name),this.OnGetUserMediaSuccess(void 0)}},o.prototype.InitiateChatRoomVoice=function(){this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_ScheduledInitiate?this.LogMsg("(VoiceChat) Hit InitiateChatRoomVoice in wrong state "+this.m_VoiceCallState.m_eState):g.f.AudioPlaybackManager.SetVoiceActive(this.OnRequestMicrophoneAccess)},o.prototype.JoinVoiceChatOrAskForOneOnOneChatNow=function(){var e,o=this;0==this.m_VoiceCallState.m_targetAccountID?(this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_RequestedPermission,(e=h.b.Init(f.w)).Body().set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),e.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID),this.LogMsg("(VoiceChat) InitiateChatRoomVoice request to group: "+this.m_VoiceCallState.m_chatRoom.groupID+", room: "+this.m_VoiceCallState.m_chatRoom.chatID),f.V.JoinVoiceChat(this.m_CMInterface.GetServiceTransport(),e).then(function(e){1==e.GetEResult()?(o.m_VoiceCallState.m_voiceChatID=e.Body().voice_chatid(),o.OnVoiceChatAccepted(!0)):2==e.GetEResult()?o.BackOffAndRetryInitiateVoiceChat():o.OnVoiceChatAccepted(!1)}).catch(function(e){o.BackOffAndRetryInitiateVoiceChat()})):(this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_RequestedPermission,""==this.m_VoiceCallState.m_voiceChatID?((e=h.b.Init(_.d)).Body().set_steamid_partner(b.a.InitFromAccountID(this.m_VoiceCallState.m_targetAccountID).ConvertTo64BitString()),this.LogMsg("(VoiceChat) InitiateOneOnOneVoiceChat request to "+this.m_VoiceCallState.m_targetAccountID),_.i.RequestOneOnOneChat(this.m_CMInterface.GetServiceTransport(),e).then(function(e){if(1==e.GetEResult()){o.LogMsg("(VoiceChat) Waiting on acceptance from "+o.m_VoiceCallState.m_targetAccountID),o.m_VoiceCallState.m_voiceChatID=e.Body().voice_chatid();var t=g.f.FriendStore.self,n=g.f.ChatStore.GetFriendChat(o.m_VoiceCallState.m_targetAccountID,!1);null!=t&&null!=n&&n.AddVoiceChannelInviteMsg(o.m_CMInterface.steamid.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelInvite",t.display_name,n.chat_partner.display_name))}else o.LogMsg("(VoiceChat) Initiating voice chat to "+o.m_VoiceCallState.m_targetAccountID+" has failed."),o.EndVoiceChatInternal(!1)})):this.OnVoiceChatAccepted(!0))},o.prototype.OnVoiceChatAccepted=function(e){this.m_VoiceCallState.m_eState<I.k_EVoiceCallState_RequestedPermission?this.LogMsg("(VoiceChat) Hit OnVoiceChatAccepted in wrong state "+this.m_VoiceCallState.m_eState):null!=this.m_VoiceCallState.m_webRTCConnectedNotification?e?(this.m_VoiceCallState.m_targetAccountID?(this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_VoiceCallState.m_timeStartedConnecting=performance.now(),this.LogMsg("(VoiceChat) Call accepted to individual "+this.m_VoiceCallState.m_targetAccountID)):this.m_VoiceCallState.m_chatRoom&&this.LogMsg("(VoiceChat) Call accepted to room "+this.m_VoiceCallState.m_chatRoom.chatID),this.OnWebRTCConnectedAndVoiceChatConnected()):this.m_VoiceCallState.m_targetAccountID?(this.LogMsg("(VoiceChat) Call rejected to individual "+this.m_VoiceCallState.m_targetAccountID),this.OnUserEndVoiceChat()):this.m_VoiceCallState.m_chatRoom&&(this.LogMsg("(VoiceChat) Call rejected to room "+this.m_VoiceCallState.m_chatRoom.chatID),this.EndVoiceChatInternal(!1)):this.LogMsg("(VoiceChat) Hit OnVoiceChatAccepted without WebRTC connected")},o.prototype.InitiateOneOnOneVoiceChat=function(e){this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_ScheduledInitiate?this.LogMsg("(VoiceChat) Hit InitiateOneOnOneVoiceChat in wrong state "+this.m_VoiceCallState.m_eState):g.f.AudioPlaybackManager.SetVoiceActive(this.OnRequestMicrophoneAccess)},o.prototype.IPIntToString=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)},o.prototype.OnSetUpdatedLocalDescriptionSuccess=function(){this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionSuccess");var e=h.b.Init(r.a);e.Body().set_ip_webrtc_server(this.m_VoiceCallState.m_webRTCServerIP),e.Body().set_port_webrtc_server(this.m_VoiceCallState.m_webRTCServerPort),e.Body().set_ip_webrtc_session_client(this.m_VoiceCallState.m_webRTCClientIP),e.Body().set_port_webrtc_session_client(this.m_VoiceCallState.m_webRTCClientPort),e.Body().set_remote_description_version(this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion),r.d.AcknowledgeUpdatedRemoteDescription(this.m_CMInterface.GetServiceTransport(),e).then(function(e){})},o.prototype.OnSetUpdatedLocalDescriptionFailure=function(e){this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionFailure: "+e),this.EndVoiceChatInternal(!1)},o.prototype.OnCreateAnswerSuccess=function(e){this.LogMsg("(WebRTC) OnCreateAnswerSuccess: "+JSON.stringify(e));var t=this;if(this.m_PeerConnection.setLocalDescription(e).then(function(){t.OnSetUpdatedLocalDescriptionSuccess()}).catch(function(e){t.OnSetUpdatedLocalDescriptionFailure(e)}),this.m_VoiceCallState.m_bOfferUpdateInProgress=!1,null!=this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate){var n=this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate;this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=void 0,this.ProcessUpdatedRemoteDescription(n)}},o.prototype.OnCreateAnswerError=function(e){this.LogMsg("(WebRTC) OnCreateAnswerError: "+e),this.EndVoiceChatInternal(!1)},o.prototype.ProcessUpdatedRemoteDescription=function(e){this.m_VoiceCallState.m_bOfferUpdateInProgress=!0,this.m_mapSSRCToAccountID.clear();for(var t=e.ssrcs_to_accountids(),n=0;n<t.length;++n){var o=t[n];this.m_mapSSRCToAccountID.set(o.ssrc(),o.accountid())}var i=this,r=JSON.parse(e.remote_description());return this.m_PeerConnection.setRemoteDescription(new RTCSessionDescription(r)).then(function(){i.LogMsg("(WebRTC) Updated Remote Description: "+r.sdp),"offer"==r.type?(i.LogMsg("(WebRTC) setRemoteDescription success with new offer"),i.m_PeerConnection.createAnswer().then(function(e){i.OnCreateAnswerSuccess(e)}).catch(function(e){i.OnCreateAnswerError(e)}),i.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion=e.remote_description_version()):"answer"==r.type&&(i.LogMsg("(WebRTC) setRemoteDescription success"),i.m_VoiceCallState.m_bOfferUpdateInProgress=!1)}).catch(function(e){i.LogMsg("(WebRTC) setRemoteDescription error: "+e),i.LogMsg("(VoiceChat) Fatal error, ending chat"),i.EndVoiceChatInternal(!1)}),1},o.prototype.SendVoiceStatusUpdate=function(){var e=h.b.Init(_.g);e.Body().set_user_steamid(this.m_CMInterface.steamid.ConvertTo64BitString()),e.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),e.Body().set_user_muted_mic_locally(this.IsMicMuted()),e.Body().set_user_muted_output_locally(this.IsOutputMuted()),e.Body().set_user_has_no_mic_for_session(this.BNoMicAvailableForSession()),e.Body().set_user_webaudio_sample_rate(g.f.AudioPlaybackManager.GetLastObservedSampleRate()),_.i.NotifyUserVoiceStatus(this.m_CMInterface.GetServiceTransport(),e)},o.prototype.UpdateUserVoiceStatus=function(e){if(this.m_VoiceCallState.m_voiceChatID==e.voice_chatid()){var t=new b.a(e.user_steamid()),n=this.m_mapUserVoiceStatus.get(t.GetAccountID());null==n&&(n=new L),n.mic_muted_locally=e.user_muted_mic_locally(),n.output_muted_locally=e.user_muted_output_locally(),n.has_no_mic_for_session=e.user_has_no_mic_for_session();var o=g.f.FriendStore.GetPlayerIfCached(t.GetAccountID()),i="[U:1:"+t.GetAccountID()+"]",r="";null!=o&&(r=o.display_name+" ");var a="";a=n.has_no_mic_for_session?"nomic":n.mic_muted_locally?"muted":"on",this.LogMsg("(VoiceChat) User "+r+i+" status now: mic("+a+") output("+(n.output_muted_locally?"muted":"on")+")"),this.m_mapUserVoiceStatus.set(t.GetAccountID(),n)}},o.prototype.OnWebRTCConnectedAndVoiceChatConnected=function(){var t=this,e=this.m_VoiceCallState.m_webRTCConnectedNotification;this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession,this.LogMsg("(WebRTC) WebRTC session connected "+this.IPIntToString(e.client_ip())+":"+e.client_port()+" => "+this.IPIntToString(e.server_ip())+":"+e.server_port()),""==this.m_VoiceCallState.m_voiceChatID&&(this.LogMsg("(VoiceChat) Reached OnWebRTCConnectedAndVoiceChatConnected without voice chat id? Failing."),this.EndVoiceChatInternal(!1));var n=h.b.Init(_.e);n.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),n.Body().set_ssrc_my_sending_stream(e.ssrc()),n.Body().set_ip_webrtc_client(e.client_ip()),n.Body().set_port_webrtc_client(e.client_port()),n.Body().set_ip_webrtc_server(e.server_ip()),n.Body().set_port_webrtc_server(e.server_port()),n.Body().set_has_audio_worklets_support(g.f.AudioPlaybackManager.supports_audio_worklets),n.Body().set_user_agent(navigator.userAgent),_.i.UpdateVoiceChatWebRTCData(this.m_CMInterface.GetServiceTransport(),n).then(function(e){1==e.GetEResult()?(t.m_VoiceCallState.m_eState=I.k_EVoiceCallState_Connected,t.m_VoiceCallState.m_timeFinishedConnecting=performance.now(),t.SendVoiceStatusUpdate(),t.LogMsg("(WebRTC) Updated voice session with WebRTC session data "+t.m_VoiceCallState.m_voiceChatID),e.Body().send_client_voice_logs()&&t.ScheduleClientVoiceLogsUpload(2),t.CheckConnection()):(t.LogMsg("(WebRTC) Error updating voice session with WebRTC session data "+t.m_VoiceCallState.m_voiceChatID),t.BackOffAndRetryInitiateVoiceChat())}).catch(function(e){t.LogMsg("(WebRTC) Error updating voice session with WebRTC session data "+t.m_VoiceCallState.m_voiceChatID),t.BackOffAndRetryInitiateVoiceChat()})},o.prototype.OnAcceptOneOnOneVoiceChat=function(t,e){var n=this;this.m_VoiceCallState.m_targetAccountID!=t.GetAccountID()&&this.EndVoiceChatInternal(!1),this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_None,this.m_VoiceCallState.m_targetAccountID=t.GetAccountID(),this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!1,this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1,this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!1,this.m_VoiceCallState.m_chatRoom=null,this.m_VoiceCallState.m_voiceChatID=e;var o=h.b.Init(_.a);o.Body().set_steamid_partner(t.ConvertTo64BitString()),o.Body().set_accepted_request(!0),o.Body().set_voice_chatid(e),_.i.AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(),o).then(function(e){1==e.GetEResult()?n.InitiateOneOnOneVoiceChat(t.GetAccountID()):(n.LogMsg("(VoiceChat) Failed responding to voice chat from "+t.GetAccountID()),n.EndVoiceChatInternal(!1))})},o.prototype.OnRejectOneOnOneVoiceChat=function(t,e){var n=this,o=h.b.Init(_.a);o.Body().set_steamid_partner(t.ConvertTo64BitString()),o.Body().set_accepted_request(!1),o.Body().set_voice_chatid(e),_.i.AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(),o).then(function(e){1==e.GetEResult()||n.LogMsg("(VoiceChat) Failed responding to voice chat from "+t.GetAccountID())})},o.prototype.PlayRingSound=function(e){this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e).audio_buffer=g.f.AudioPlaybackManager.PlayAudioURLWithRepeats(p.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_phonecall.m4a?v=1",1)},o.prototype.IsVoiceActive=function(e,t){return!!this.m_VoiceCallState.BMatchingCall(e,t)&&this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None},o.prototype.CheckVoiceSnoozeTiemout=function(){if(3600<g.f.IdleTracker.GetUserIdleTime()){var e=this.m_MicVolumeMeter.GetLastTimeNonZero();36e5<performance.now()-e&&(this.OnUserEndVoiceChat(),g.f.ShowAlert(Object(v.c)("#Voice_LeftIdleVoiceChat_Title"),Object(v.c)("#Voice_LeftIdleVoiceChat_Body"),Object(v.c)("#Voice_LeftIdleVoiceChat_OK")).then(function(){}).catch(function(){return!0}))}},o.prototype.ProcessStatsReport=function(){if((this.CheckVoiceSnoozeTiemout(),null!=this.m_PeerConnection)&&(this.m_StatsTimeout=SetBackgroundTimeout(this.ProcessStatsReport,1e4),p.a.IN_CLIENT&&l.b.BClientConnected().then(function(){}),!(-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...")))){var e=new Date,d=this,t=this.m_PeerConnection;d.LogMsg("-----------------------------------------------------------"),d.LogMsg(" Voice Report: "+e.toUTCString()),d.LogMsg("-----------------------------------------------------------");var n=t.getSenders();if(0<n.length){this.LogMsg("(WebRTC) "+this.PadOutput("(Sender SSRC)",40)+" "+this.PadOutput("Audio Packets Sent",20)+" "+this.PadOutput("Connection State",20)+" "+this.PadOutput("Writable",20)+" "+this.PadOutput("Track State",20)+" "+this.PadOutput("Round Trip MS",20)+" "+this.PadOutput("Transport Bytes Sent",24)+" "+this.PadOutput("Transport Bytes Received",24)+" ");try{for(var o=0;o<n.length;++o)n[o].getStats().then(function(m){m.forEach(function(e){if("outbound-rtp"==e.type&&"audio"==e.mediaType){var t=e.ssrc,n=e.packetsSent,o="",i="",r=0,a=0,s=0,c="",l=m.get(e.trackId);null!=l&&"track"==l.type&&"audio"==l.kind&&(c=l.ended&&l.detached?"ended+detached":l.ended?"ended":l.detached?"detached":"active");var p=m.get(e.transportId);if(null!=p&&"transport"==p.type){var u=m.get(p.selectedCandidatePairId);null!=u&&"candidate-pair"==u.type&&(o=u.state,i=u.writable?"writable":"not-writable",r=1e3*u.currentRoundTripTime),a=p.bytesSent,s=p.bytesReceived}d.LogMsg("(WebRTC) "+d.PadOutput(String(t),40)+" "+d.PadOutput(String(n),20)+" "+d.PadOutput(o,20)+" "+d.PadOutput(i,20)+" "+d.PadOutput(c,20)+" "+d.PadOutput(String(r),20)+" "+d.PadOutput(String(a),24)+" "+d.PadOutput(String(s),24))}})})}catch(e){d.LogMsg("(WebRTC) Can't log sender stats on this browser")}}SetBackgroundTimeout(this.ProcessReceiverStatsReport,100)}},o.prototype.ProcessReceiverStatsReport=function(){if(!(-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla..."))){var r=this,e=this.m_PeerConnection;try{e.getStats(function(e){e.result().forEach(function(t){if("ssrc"==t.type){var n=new T,e=t.names(),o=e.indexOf("mediaType");if(-1!=o&&"audio"==t.stat(e[o])){t.names().forEach(function(e){"ssrc"==e?n.m_SSRC=Number(t.stat(e)):"googCurrentDelayMs"==e?n.m_MostRecentDelayEstimateMs=Number(t.stat(e)):"packetsLost"==e?n.m_PacketsLost=Number(t.stat(e)):"packetsReceived"==e?n.m_PacketsReceived=Number(t.stat(e)):"googJitterReceived"==e?n.m_MostRecentJitterReceivedMs=Number(t.stat(e)):"googJitterBufferMs"==e?n.m_CurrentJitterBufferMs=Number(t.stat(e)):"bytesReceived"==e?n.m_BytesReceived=Number(t.stat(e)):"googDecodingCTN"==e?n.m_DecodingThroughNetEQ=Number(t.stat(e)):"googDecodingPLC"==e?n.m_DecodingPacketLossCorrection=Number(t.stat(e)):"googDecodingCNG"==e?n.m_DecodingComfortNoiseGeneration=Number(t.stat(e)):"googDecodingPLCCNG"==e?n.m_DecodingPacketLossFadeNoiseGeneration=Number(t.stat(e)):"googDecodingNormal"==e?n.m_DecodingNormal=Number(t.stat(e)):"googDecodingCTSG"==e?n.m_DecodingSilenceGenerator=Number(t.stat(e)):"googDecodingMuted"==e&&(n.m_DecodingMuted=Number(t.stat(e)))});var i=r.m_mapSSRCToAccountID.get(n.m_SSRC);null!=i&&r.m_mapAccountIDToStats.set(i,n)}}})}),r.LogMsg("-----------------------------------------------------------"),r.LogMsg("(WebRTC) "+r.PadOutput("(Receiving)",40)+" "+r.PadOutput("Packets Received",20)+" "+r.PadOutput("Est. Delay MS",20)+" "+r.PadOutput("Packets Lost",20)+" "+r.PadOutput("Last Jitter MS",20)+" "+r.PadOutput("Jitter Buffer MS",20)+" "+r.PadOutput("Decoding Successes",20)+" "+r.PadOutput("Decoding Errors",20)),r.m_mapAccountIDToStats.forEach(function(e,t){var n=g.f.FriendStore.GetPlayerIfCached(t),o="[unknown]";null!=n&&(o=n.display_name),r.LogMsg("(WebRTC) "+r.PadOutput(o.substr(0,40),40)+" "+r.PadOutput(String(e.m_PacketsReceived),20)+" "+r.PadOutput(String(e.m_MostRecentDelayEstimateMs),20)+" "+r.PadOutput(String(e.m_PacketsLost),20)+" "+r.PadOutput(String(e.m_MostRecentJitterReceivedMs),20)+" "+r.PadOutput(String(e.m_CurrentJitterBufferMs),20)+" "+r.PadOutput(String(e.m_DecodingNormal+e.m_DecodingComfortNoiseGeneration),20)+" "+r.PadOutput(String(e.m_DecodingPacketLossCorrection+e.m_DecodingPacketLossFadeNoiseGeneration+e.m_DecodingSilenceGenerator),20))}),r.LogMsg("-----------------------------------------------------------")}catch(e){}}},o.prototype.PadOutput=function(e,t,n){if(void 0===n&&(n=void 0),Math.abs(t)<=e.length)return e;var o=Math.max(Math.abs(t)-e.length||0,0),i=Array(o+1).join(String(n||" ").charAt(0));return t<0?i+e:e+i},o.prototype.CheckConnection=function(){if(this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_Connected||this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_LocalMicOnly)this.LogMsg("(VoiceChat) Succcess! Voice is fully connected took "+(this.m_VoiceCallState.m_timeFinishedConnecting-this.m_VoiceCallState.m_timeStartedConnecting).toFixed(0)+"ms to complete, "+(this.m_VoiceCallState.m_nFailuresThisInitiate+1)+" attempts made before success."),ClearBackgroundInterval(this.m_ConnectionCheck),this.m_ConnectionCheck=0,this.m_VoiceCallState.m_nFailuresThisInitiate=0,this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_StatsTimeout=SetBackgroundTimeout(this.ProcessStatsReport,1e4);else{var e=performance.now()-this.m_VoiceCallState.m_timeStartedConnecting;this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=2e3<e;var t=6e4;0!=this.m_VoiceCallState.m_targetAccountID&&this.m_VoiceCallState.m_eState==I.k_EVoiceCallState_RequestedPermission&&(t=3e5),t<e&&(this.LogMsg("(VoiceChat) Failure! Gave up after more than one minute trying to connect, last state was "+M(this.m_VoiceCallState.m_eState)+"("+this.m_VoiceCallState.m_eState+")"),this.EndVoiceChatInternal(!1)),this.LogMsg("(VoiceChat) Still trying to connect to voice chat/webrtc "+M(this.m_VoiceCallState.m_eState)+"("+this.m_VoiceCallState.m_eState+") "+(performance.now()-this.m_VoiceCallState.m_timeStartedConnecting).toFixed(0)+"ms elapsed...")}},o.prototype.BackOffAndRetryInitiateVoiceChat=function(){var e=this;if(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None){var t=this.m_VoiceCallState.m_nFailuresThisInitiate,n=this.m_VoiceCallState.m_targetAccountID,o=this.m_VoiceCallState.m_chatRoom;this.EndVoiceChatInternal(!0),this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_ScheduledInitiate,this.m_VoiceCallState.m_targetAccountID=n,this.m_VoiceCallState.m_chatRoom=o,this.m_VoiceCallState.m_nFailuresThisInitiate=t+1;var i=250;i=t<1?250:t<3?1e3:t<5?5e3:t<10?1e4:t<15?3e4:6e4,this.LogMsg("(VoiceChat) Retrying InitiateVoiceChat in "+i.toFixed(0)+" milliseconds..."),this.m_ScheduledInitiate=SetBackgroundTimeout(function(){e.ScheduledInitiate(n,o)},i)}},o.prototype.ScheduledInitiate=function(e,t){this.m_ScheduledInitiate=0,this.InitiateVoiceChat(e,t)},o.prototype.InitiateVoiceChat=function(e,t){var n=this;l.b.BClientConnected().then(function(){});var o=new m.UAParser(navigator.userAgent).getResult();if("Chrome"==o.browser.name)if(0!=e&&t)this.LogMsg("Cant initiate voice chat for both friend & group");else{var i=this.m_VoiceCallState.BMatchingCall(e,t);!this.m_VoiceCallState.BMatchingCall(e,t)&&this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_ScheduledInitiate&&(this.LogMsg("(VoiceChat) InitiateVoiceChat called for new target account/room while already connected, ending prior session first"),this.EndVoiceChatInternal(!1)),this.m_ScheduledInitiate&&(ClearBackgroundTimeout(this.m_ScheduledInitiate),this.m_ScheduledInitiate=0);var r=performance.now();if(this.m_VoiceCallState.m_eState<=I.k_EVoiceCallState_ScheduledInitiate&&0!=this.m_VoiceCallState.m_timeEndedVoiceChat&&r-this.m_VoiceCallState.m_timeEndedVoiceChat<100){this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_ScheduledInitiate,this.m_VoiceCallState.m_targetAccountID=e,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!0,this.m_VoiceCallState.m_chatRoom=t;var a=100-(r-this.m_VoiceCallState.m_timeEndedVoiceChat);return this.LogMsg("(VoiceChat) Delaying requested InitiateChat for "+a.toFixed(0)+" milliseconds to let prior EndVoiceChat finish..."),void(this.m_ScheduledInitiate=SetBackgroundTimeout(function(){n.ScheduledInitiate(e,t)},a))}if((!i||this.m_VoiceCallState.m_eState<=I.k_EVoiceCallState_ScheduledInitiate)&&(e?this.LogMsg("Resetting voice chat state and initiating to individual "+e):t?this.LogMsg("Resetting voice chat state and initiating to room "+t.chatID):(Object(y.a)(this.m_VoiceEchoLocalMic,"Shouldn't hit local mic access only without echo local mic on"),this.LogMsg("Resetting voice chat state and initiating local mic access only")),this.m_VoiceCallState.m_eState<=I.k_EVoiceCallState_ScheduledInitiate)){if(0!=e||null!=t&&"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetVoiceChatActive)try{SteamClient.WebChat.SetVoiceChatActive(!0)}catch(e){}this.m_VoiceCallState.m_targetAccountID=e,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!0,this.m_VoiceCallState.m_chatRoom=t,this.m_VoiceCallState.m_timeStartedConnecting=performance.now(),this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion="0",this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_ConnectionCheck=SetBackgroundInterval(this.CheckConnection,2e3),0!=e?this.InitiateOneOnOneVoiceChat(e):this.InitiateChatRoomVoice()}}else{this.LogMsg("(VoiceChat) Voice chat not supported in browser: "+o.browser.name);var s=Object(v.c)(p.a.IN_MOBILE?"#VoiceChat_Unavailable_NotSupported":"#Voice_VoiceUnavailableInBrowser_Title"),c=p.a.IN_MOBILE?Object(v.c)("#VoiceChat_Unavailable_MobileChat"):Object(v.c)("#Voice_VoiceUnavailableInBrowser_Body",o.browser.name);g.f.ShowAlert(s,c,Object(v.c)("#Voice_VoiceUnavailableInBrowser_OK")).then(function(){}).catch(function(){return!0})}},o.prototype.OnRequestMicrophoneAccess=function(){var t=this;if(this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_ScheduledInitiate)return this.LogMsg("(VoiceChat) Hit OnRequestMicrophoneAccess in wrong state "+this.m_VoiceCallState.m_eState),void this.EndVoiceChatInternal(!1);null==this.m_AudioContext&&(this.m_AudioContext=g.f.AudioPlaybackManager.context);var e={optional:[{echoCancellation:this.m_Settings.m_VoiceUseEchoCancellation},{googEchoCancellation:this.m_Settings.m_VoiceUseEchoCancellation},{googEchoCancellation2:this.m_Settings.m_VoiceUseEchoCancellation},{googNoiseSupression:this.m_Settings.m_VoiceUseNoiseCancellation},{googNoiseSupression2:this.m_Settings.m_VoiceUseNoiseCancellation},{mozNoiseSuppression:this.m_Settings.m_VoiceUseNoiseCancellation},{googTypingNoiseDetection:this.m_Settings.m_VoiceUseNoiseCancellation},{googAutoGainControl:this.m_Settings.m_VoiceUseAutoGainControl},{googAutoGainControl2:this.m_Settings.m_VoiceUseAutoGainControl},{mozAutoGainControl:this.m_Settings.m_VoiceUseAutoGainControl},{googHighpassFilter:!0},{googAudioMirroring:!1}]};"default"!=this.m_Settings.m_SelectedMicID&&e.optional.push({sourceId:this.m_Settings.m_SelectedMicID}),this.m_VoiceCallState.m_targetAccountID?this.LogMsg("(VoiceChat) Call to individual "+this.m_VoiceCallState.m_targetAccountID+" now initating getUserMedia/WebRTC"):this.m_VoiceCallState.m_chatRoom&&this.LogMsg("(VoiceChat) Call to room "+this.m_VoiceCallState.m_chatRoom.chatID+" now initating getUserMedia/WebRTC"),this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_RequestedMicAccess;var n=navigator;this.m_bUserHasDeniedMicPermissions=!1,n.getUserMedia=n.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia,n.getUserMedia({audio:e,video:!1},function(e){t.OnGetUserMediaSuccess(e)},this.OnGetUserMediaFailure)},o.prototype.ScheduleClientVoiceLogsUpload=function(e){if(""!=this.m_VoiceCallState.m_voiceChatID){this.m_ScheduledVoiceLogsUpload&&(ClearBackgroundTimeout(this.m_ScheduledVoiceLogsUpload),this.m_ScheduledVoiceLogsUpload=0);this.m_ScheduledVoiceLogsUpload=SetBackgroundTimeout(this.UploadClientSideVoiceLogs,1e3*e)}},o.prototype.UploadClientSideVoiceLogs=function(){var t=this;if(""!=this.m_VoiceCallState.m_voiceChatID)if(this.m_bClientSideLogsUploadInProgress)this.ScheduleClientVoiceLogsUpload(2);else{this.m_bClientSideLogsUploadInProgress=!0;var e=h.b.Init(_.f);e.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);var n=this.m_rgLogLines.slice(this.m_nLastLogLineUploaded);e.Body().set_client_voice_logs_new_lines(n.join("\r\n"));var o=n.length;_.i.UploadClientVoiceChatLogs(this.m_CMInterface.GetServiceTransport(),e).then(function(e){1==e.GetEResult()?(t.m_nLastLogLineUploaded+=o,t.LogMsg("(VoiceChat) Uploaded "+o+" new lines of voice chat log info to server"),t.ScheduleClientVoiceLogsUpload(20)):(t.LogMsg("(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"),t.ScheduleClientVoiceLogsUpload(10+10*Math.random())),t.m_bClientSideLogsUploadInProgress=!1}).catch(function(e){t.LogMsg("(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"),t.ScheduleClientVoiceLogsUpload(10+10*Math.random()),t.m_bClientSideLogsUploadInProgress=!1})}},o.prototype.EndVoiceChatInternal=function(e){var i=this;if(this.m_ScheduledVoiceLogsUpload&&this.UploadClientSideVoiceLogs(),this.m_ScheduledInitiate&&(ClearBackgroundTimeout(this.m_ScheduledInitiate),this.m_ScheduledInitiate=0),this.m_StatsTimeout&&(ClearBackgroundTimeout(this.m_StatsTimeout),this.m_StatsTimeout=0),"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetVoiceChatActive)try{SteamClient.WebChat.SetVoiceChatActive(!1)}catch(e){}if(this.m_VoiceCallState.m_eState!=I.k_EVoiceCallState_None){if(!e){if(this.m_VoiceCallState.m_targetAccountID){var r=this.m_VoiceCallState.m_targetAccountID;this.m_VoiceCallState.m_targetAccountID=0;var a=this.m_VoiceCallState.m_voiceChatID;(t=h.b.Init(_.c)).Body().set_steamid_partner(b.a.InitFromAccountID(r).ConvertTo64BitString()),t.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);var s=this.m_VoiceCallState.m_eState;_.i.LeaveOneOnOneChat(this.m_CMInterface.GetServiceTransport(),t).then(function(e){if(1==e.GetEResult())if(i.LogMsg("(VoiceChat) Left voice chat with "+r),s==I.k_EVoiceCallState_Connected){var t=new A;t.partner_accountid=i.m_CMInterface.steamid.GetAccountID(),t.voice_chatid=a,t.previously_joined=!0,i.m_mapOneOnOneCallsWaitingJoinOrAccept.set(r,t)}else{var n=g.f.FriendStore.self,o=g.f.ChatStore.GetFriendChat(r,!1);o&&n&&o.AddVoiceChannelInviteMsg(g.f.CMInterface.steamid.GetAccountID(),g.f.GetServerRTime32(),Object(v.c)("#FriendMsg_VoiceChannelEndedExplicit",n.display_name))}else i.LogMsg("(VoiceChat) Failed leaving voice chat with "+r)})}else if(this.m_VoiceCallState.m_chatRoom){var t;(t=h.b.Init(f.z)).Body().set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),t.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID);var n=this.m_VoiceCallState.m_chatRoom.chatID;f.V.LeaveVoiceChat(this.m_CMInterface.GetServiceTransport(),t).then(function(e){1==e.GetEResult()?i.LogMsg("(VoiceChat) Left chat room ("+n+") voice chat"):i.LogMsg("(VoiceChat) Failed leaving chat room ("+n+") voice chat")})}this.m_mapUserVoiceStatus.clear()}this.m_mapSSRCToAccountID.clear(),this.m_mapAccountIDToStats.clear();var o=this.m_VoiceCallState.m_eState>I.k_EVoiceCallState_RequestedPermission;this.m_VoiceCallState.m_eState=I.k_EVoiceCallState_None,this.m_VoiceCallState.m_targetAccountID=0,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!1,this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!1,this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1,this.m_VoiceCallState.m_chatRoom=null,e&&o||(this.m_VoiceCallState.m_voiceChatID=""),this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion="0",this.m_VoiceCallState.m_nFailuresThisInitiate=0,this.m_VoiceCallState.m_timeEndedVoiceChat=performance.now(),this.m_VoiceCallState.m_webRTCConnectedNotification=void 0,this.m_VoiceCallState.m_bOfferUpdateInProgress=!1,this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_ConnectionCheck&&(ClearBackgroundInterval(this.m_ConnectionCheck),this.m_ConnectionCheck=0);for(var c=this.m_rgAudioStreams.pop();null!=c;){null!=c.elem&&(c.elem.pause(),c.elem.src=void 0,c.elem.srcObject=void 0,c.elem=void 0),null!=c.volume_meter&&(c.volume_meter.stop(),c.volume_meter=void 0),c.stream.oninactive=void 0;for(var l=0,p=c.stream.getTracks();l<p.length;l++){p[l].stop()}if(null!=this.m_AudioContext&&c.source_node)try{if(c.source_node.disconnect(),c.type==d.k_EAudioStreamType_Microphone&&c.source_node instanceof MediaStreamAudioSourceNode)for(var u=0,m=c.source_node.mediaStream.getTracks();u<m.length;u++){m[u].stop()}}catch(e){}c.output_gain_node&&(c.output_gain_node.disconnect(),c.output_gain_node=void 0),c=this.m_rgAudioStreams.pop()}null!=this.m_MicVolumeMeter&&(this.m_MicVolumeMeter.stop(),this.m_MicVolumeMeter=void 0),null!=this.m_MicNoiseGate&&(this.m_MicNoiseGate.input?(this.m_MicNoiseGate.input.disconnect(),this.m_MicNoiseGate.output.disconnect(),this.m_MicNoiseGate.noiseGateKernel_.disconnect()):this.m_MicNoiseGate.disconnect(),this.m_MicNoiseGate=void 0),null!=this.m_MicInputGainNode&&(this.m_MicInputGainNode.disconnect(),this.m_MicInputGainNode=void 0),null!=this.m_AudioContext&&(g.f.AudioPlaybackManager.SetVoiceNotActive(),this.m_AudioContext=void 0),this.m_PeerConnection&&(this.m_PeerConnection.oniceconnectionstatechange=void 0,this.m_PeerConnection.onicegatheringstatechange=void 0,this.m_PeerConnection.onsignalingstatechange=void 0,this.m_PeerConnection.close(),this.m_PeerConnection=void 0)}},o.prototype.FillInChatUsabilityMetrics=function(e){var t=e.voice_settings();t.set_voice_input_gain(this.m_Settings.m_VoiceInputGain),t.set_voice_output_gain(this.m_Settings.m_VoiceOutputGain),t.set_noise_gate_level(Math.round(this.m_Settings.m_NoiseGateLevel)),t.set_voice_use_echo_cancellation(this.m_Settings.m_VoiceUseEchoCancellation),t.set_voice_use_noise_cancellation(this.m_Settings.m_VoiceUseNoiseCancellation),t.set_voice_use_auto_gain_control(this.m_Settings.m_VoiceUseAutoGainControl),t.set_selected_non_default_mic("default"!==this.m_Settings.m_SelectedMicID),t.set_selected_non_default_output("default"!==this.m_Settings.m_SelectedOutputID),t.set_push_to_talk_enabled(this.GetPushToTalkEnabled()),t.set_push_to_mute_enabled(this.GetPushToMuteEnabled()),t.set_play_ptt_sounds(this.m_Settings.m_bPlayPTTSounds),this.IsAnyVoiceActive()&&(this.m_VoiceCallState.m_targetAccountID?e.ui_state().set_in_one_on_one_voice_chat(!0):this.m_VoiceCallState.m_chatRoom&&e.ui_state().set_in_group_voice_chat(!0))},o.k_MaxPerUserGainMultiplier=2,o.k_MaxInputOutputGainValue=4,Object(i.c)([s.x],o.prototype,"m_VoiceCallState",void 0),Object(i.c)([s.x],o.prototype,"m_bPushToTalkEnabled",void 0),Object(i.c)([s.x],o.prototype,"m_bPushToMuteEnabled",void 0),Object(i.c)([s.x],o.prototype,"m_bVoicePTTStateEnabled",void 0),Object(i.c)([s.x],o.prototype,"m_VKPushToTalkHotKey",void 0),Object(i.c)([s.x],o.prototype,"m_strPushToTalkDisplayString",void 0),Object(i.c)([s.x],o.prototype,"m_bUserHasDeniedMicPermissions",void 0),Object(i.c)([s.x],o.prototype,"m_bOutputMuted",void 0),Object(i.c)([s.x],o.prototype,"m_AudioContext",void 0),Object(i.c)([s.x],o.prototype,"m_rgAudioStreams",void 0),Object(i.c)([s.x],o.prototype,"m_MicVolumeMeter",void 0),Object(i.c)([s.x],o.prototype,"m_MicNoiseGate",void 0),Object(i.c)([s.x],o.prototype,"m_MicInputGainNode",void 0),Object(i.c)([s.x],o.prototype,"m_PeerConnection",void 0),Object(i.c)([s.x],o.prototype,"m_Settings",void 0),Object(i.c)([s.x],o.prototype,"m_bLocalMicTestActive",void 0),Object(i.c)([s.x],o.prototype,"m_bForceConnectingStatus",void 0),Object(i.c)([s.x],o.prototype,"m_bForceReconnectingStatus",void 0),Object(i.c)([s.g.bound],o.prototype,"SetSelectedMic",null),Object(i.c)([s.g.bound],o.prototype,"SetSelectedOutput",null),Object(i.c)([s.g.bound],o.prototype,"SetUseEchoCancellation",null),Object(i.c)([s.g.bound],o.prototype,"SetUseNoiseCancellation",null),Object(i.c)([s.g.bound],o.prototype,"SetUseAutoGainControl",null),Object(i.c)([s.g.bound],o.prototype,"SetVoiceEchoLocalMic",null),Object(i.c)([s.g.bound],o.prototype,"SetVoiceLogDetails",null),Object(i.c)([s.g.bound],o.prototype,"GetVoiceLogDetails",null),Object(i.c)([s.g.bound],o.prototype,"SetUseNoiseGateLevel",null),Object(i.c)([s.g.bound],o.prototype,"SetVoiceInputGain",null),Object(i.c)([s.g.bound],o.prototype,"SetVoiceOutputGain",null),Object(i.c)([s.g.bound],o.prototype,"ForceReconnectingStatus",null),Object(i.c)([s.g.bound],o.prototype,"ForceConnectingStatus",null),Object(i.c)([s.g.bound],o.prototype,"LogMsg",null),Object(i.c)([s.g.bound],o.prototype,"GetVoiceLogs",null),Object(i.c)([s.g.bound],o.prototype,"OnPushToTalkReleased",null),Object(i.c)([s.g.bound,Object(c.a)(150)],o.prototype,"DebouncedToggleMicMuting",null),Object(i.c)([s.g.bound],o.prototype,"OnPushToTalkStateChange",null),Object(i.c)([s.g.bound],o.prototype,"UpdateNoiseGateOnActiveMic",null),Object(i.c)([s.g.bound],o.prototype,"OnAudioContextStateChange",null),Object(i.c)([s.g.bound],o.prototype,"OnIceCandidate",null),Object(i.c)([s.g.bound],o.prototype,"AddRemoteIceCandidate",null),Object(i.c)([s.g.bound],o.prototype,"OnSignalingStateChange",null),Object(i.c)([s.g.bound],o.prototype,"OnIceConnectionStateChange",null),Object(i.c)([s.g.bound],o.prototype,"OnIceGatheringStateChange",null),Object(i.c)([s.g.bound],o.prototype,"OnRemoveRemoteStream",null),Object(i.c)([s.g.bound],o.prototype,"OnAddRemoteStream",null),Object(i.c)([s.g.bound],o.prototype,"ModifyLocalSDPBeforeSetting",null),Object(i.c)([s.g.bound],o.prototype,"OnCreateOfferSuccess",null),Object(i.c)([s.g.bound],o.prototype,"OnCreateOfferError",null),Object(i.c)([s.g.bound],o.prototype,"OnNoiseGateMessage",null),Object(i.c)([s.g.bound],o.prototype,"SetupNoiseGateOnMic",null),Object(i.c)([s.g.bound],o.prototype,"OnGetUserMediaSuccess",null),Object(i.c)([s.g.bound],o.prototype,"OnGetUserMediaFailure",null),Object(i.c)([s.g.bound],o.prototype,"OnSetUpdatedLocalDescriptionSuccess",null),Object(i.c)([s.g.bound],o.prototype,"OnSetUpdatedLocalDescriptionFailure",null),Object(i.c)([s.g.bound],o.prototype,"OnCreateAnswerSuccess",null),Object(i.c)([s.g.bound],o.prototype,"OnCreateAnswerError",null),Object(i.c)([s.g.bound],o.prototype,"OnAcceptOneOnOneVoiceChat",null),Object(i.c)([s.g.bound],o.prototype,"OnRejectOneOnOneVoiceChat",null),Object(i.c)([s.g.bound],o.prototype,"PlayRingSound",null),Object(i.c)([s.g.bound],o.prototype,"ProcessStatsReport",null),Object(i.c)([s.g.bound],o.prototype,"ProcessReceiverStatsReport",null),Object(i.c)([s.g.bound],o.prototype,"CheckConnection",null),Object(i.c)([s.g.bound],o.prototype,"ScheduledInitiate",null),Object(i.c)([s.g.bound],o.prototype,"OnRequestMicrophoneAccess",null),Object(i.c)([s.g.bound],o.prototype,"UploadClientSideVoiceLogs",null),o}()},VtNY:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var o=n("mrSG"),i=n("2vnA"),s=n("RBVV"),c=n("4HGb"),l=n("s+DT"),r=n("0N1H"),p=n("LAqV"),a=n("J0bI"),u=n("oh5H"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.BIsExpired=function(){return p.f.GetServerRTime32()>=this.m_rtTimeExpires},t.prototype.InitFromInviteLinkInfo=function(e){this.m_ulChatRoomGroupID=e.group_summary().chat_group_id(),this.m_ulChatID=e.chat_id();var t=new l.a(e.steamid_sender());t.BIsIndividualAccount()&&(this.m_unAccountIDInviter=t.GetAccountID()),this.m_rtTimeExpires=e.time_expires(),this.m_bIsBanned=e.banned(),this.m_rtKickExpires=e.time_kick_expire(),this.m_bValid=!0,this.m_bReady=!0},t.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},t.prototype.InitDirectInvite=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=n,this.m_rtKickExpires=o,this.m_rtTimeExpires=r.f,this.m_bValid=!0,this.m_bReady=!0},Object(o.c)([i.g],t.prototype,"InitFromInviteLinkInfo",null),Object(o.c)([i.g],t.prototype,"InitInvalid",null),Object(o.c)([i.g],t.prototype,"InitDirectInvite",null),t}(a.b),d=function(){function e(e){this.m_mapInviteByCode=new Map,this.m_ChatStore=e}return e.prototype.JoinChatGroup=function(e,t,n){var o=new m;return o.InitDirectInvite(e,t),this.AcceptInvite(o,n)},e.prototype.AcceptInvite=function(e,r){var a=this;null==r&&(r=p.f.GetDefaultBrowserContext());var t=c.b.Init(s.v);return t.Body().set_chat_group_id(e.GetChatRoomGroupID()),e.BIsInviteLink()&&t.Body().set_invite_code(e.GetInviteCode()),e.GetChatID()&&t.Body().set_chat_id(e.GetChatID()),s.V.JoinChatRoomGroup(this.m_ChatStore.CMInterface.GetServiceTransport(),t).then(function(e){var t={result:e.GetEResult()};if(1==t.result){var n=a.m_ChatStore.AddJoinedChatRoomGroup(e.Body().state(),e.Body().user_chat_state());p.f.UIStore.ShowAndOrActivateChatRoomGroup(r,n,!0);var o=e.Body().join_chat_id();if(n){var i=n.GetChatRoom(o);i&&i.StartVoiceChat()}}else 15==t.result&&(t.time=e.Body().time_expire());return t})},e.prototype.GetInviteFromCode=function(e){var t=this,n=this.m_mapInviteByCode.get(e);if(n||(n=new m(e),this.m_mapInviteByCode.set(e,n)),!n.BIsReady()||!this.m_ChatStore.GetChatRoomGroup(n.GetChatRoomGroupID())){var o=c.b.Init(s.p);o.Body().set_invite_code(e),s.V.GetInviteLinkInfo(this.m_ChatStore.CMInterface.GetServiceTransport(),o).then(function(e){1==e.GetEResult()?(t.m_ChatStore.AddKnownChatRoomGroup(e.Body().group_summary(),e.Body().user_chat_group_state()),n.InitFromInviteLinkInfo(e.Body())):n.InitInvalid()})}return n},e.prototype.GetDirectInviteInfo=function(t,n,e){var o=this,i=new m,r=this.m_ChatStore.GetChatRoomGroup(t);if(r&&r.GetChatRoom(n))i.InitDirectInvite(t,n);else{var a=c.b.Init(s.o);a.Body().set_steamid_invitee(l.a.InitFromAccountID(e).ConvertTo64BitString()),a.Body().set_chat_group_id(t),a.Body().set_chat_id(n),s.V.GetInviteInfo(this.m_ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){if(1!=e.GetEResult()||!e.Body().group_summary().chat_group_id())return console.log("GetDirectInviteInfo: respose EResult "+e.GetEResult()),void i.InitInvalid();o.m_ChatStore.AddKnownChatRoomGroup(e.Body().group_summary(),null),i.InitDirectInvite(t,n,e.Body().banned(),e.Body().time_kick_expire())})}return i},e}();function h(e){if(15!=e.result)return 17==e.result?Object(u.c)("#ChatRoom_InviteMessage_Failed_Banned"):42==e.result?Object(u.c)("#ChatRoom_InviteMessage_Not_Found"):null;0==e.time&&console.log("no longer valid");var t=p.f.RTime32ToDate(e.time).toLocaleString([],{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});return Object(u.c)("#ChatRoom_InviteMessage_Failed_Kicked",t)}},WpBz:function(e,t,n){"use strict";function o(a){return function(e,i,t){var r=t.value;t.value=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this[i+"_DebounceProperties"];void 0===o&&(o=this[i+"_DebounceProperties"]={hTimer:void 0,nPending:0}),void 0===o.hTimer?(r.apply(this,t),o.hTimer=window.setInterval(function(){0<o.nPending?(r.apply(e,t),o.nPending=0):(window.clearInterval(o.hTimer),o.hTimer=void 0)},a)):o.nPending+=1}}}n.d(t,"a",function(){return o})},XCHq:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var o=n("mrSG"),i=n("2vnA"),r=n("1n9R"),a=r.b.CHAT_BASE_URL+"public/images/broadcast/csgo_esl_2019_icon.png",s=(r.b.CHAT_BASE_URL,new(function(){function e(e){this.init(e)}return e.prototype.init=function(e){this.bValid=e.bValid,this.stream=e.stream,this.name=e.name,this.appName=e.appName,this.appID=e.appID,this.link=e.link,this.linkName=e.linkName,this.tabIcon=e.tabIcon,this.offlineImage=e.offlineImage},Object(o.c)([i.x],e.prototype,"bValid",void 0),Object(o.c)([i.x],e.prototype,"stream",void 0),Object(o.c)([i.x],e.prototype,"name",void 0),Object(o.c)([i.x],e.prototype,"appName",void 0),Object(o.c)([i.x],e.prototype,"appID",void 0),Object(o.c)([i.x],e.prototype,"link",void 0),Object(o.c)([i.x],e.prototype,"linkName",void 0),Object(o.c)([i.x],e.prototype,"tabIcon",void 0),Object(o.c)([i.x],e.prototype,"offlineImage",void 0),e}())({bValid:!1,stream:{0:"#Broadcast_EnglishMain"},name:"",appName:"",appID:0,link:"",linkName:"",tabIcon:"",offlineImage:""}));function c(e){"76561198871875463"==e&&s.init({bValid:!0,stream:{"76561198871875463":"#Broadcast_Stream1",76561198871884930:"#Broadcast_Stream2"},name:"CSGO: StarLadder",appID:730,link:"https://store.steampowered.com/app/730",linkName:"CSGO on Steam",tabIcon:a,offlineImage:"public/images/broadcast/csgo_major_berlin2019.png"})}},XaMz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG");function o(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];console.assert?0==n.length?console.assert(!!e,t):console.assert.apply(console,Object(i.g)([!!e,t],n)):e||console.warn.apply(console,Object(i.g)([t],n))}},Y3TG:function(e,t,n){"use strict";n("vDqi"),n("JtU4")},"Y3w+":function(e,t,n){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function i(e){var t=Math.floor(e/3600),n=Math.floor(e/60)%60,o=Math.floor(e)%60,i=o.toString();o<10&&(i="0"+i);var r=n.toString();return n<10&&0<t&&(r="0"+r),(0<t?t+":":"")+r+":"+i}function r(){var e=!1;try{e=MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d4032,mp4a.40.2"')}catch(e){}return e}function a(){var e=document.createElement("video").canPlayType('application/vnd.apple.mpegurl;codecs="avc1.64001f,mp4a.40.02"');return"probably"===e||"maybe"===e}n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},YZlK:function(e,t,n){"use strict";var r=n("mrSG"),a=n("hReu"),o=n("/IDK"),g=n("LAqV"),i=n("gtB6"),s=n("vDqi"),c=n.n(s),b=n("tkkQ"),l=n("V7Fl"),p=n("/ZM5"),u=n("20CD"),m=n("+mma"),d=n("bbBM"),h=n("Hi0u"),f=n("2vnA"),_=n("okNM"),v=n("q1tI"),S=n("ljid"),y=n("e2SU"),C=n("GxRc"),O=n("UqDm"),I=n("oh5H"),E=n("1VtQ"),w=n("J0bI"),M=n("uWOQ"),D=n("s+DT"),T=n("XaMz");var G=function(n){function e(e){var t=n.call(this,e)||this;return t.m_inviteLinks={loadingState:"pending",rgInviteLinks:null},t.m_bans=new l.a,t.m_invitedUsers={loadingState:"pending",rgInvitedUsers:null},t.state={strRoomName:t.props.groupView.GetGroup().name},t}return Object(r.d)(e,n),e.prototype.DismissDialog=function(){this.props.closeModal()},e.prototype.CloseDialog=function(){this.props.closeModal()},e.prototype.OnLeave=function(e){var t=this,n=e.currentTarget.ownerDocument.defaultView,o=Object(a.e)(null,e),i=this.props.groupView.GetGroup(),r=i.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":i.BIsAccountIDOwner(g.f.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm";Object(m.d)(n,Object(I.c)("#GroupSettings_Leave_Section"),Object(I.c)(r,i.name),Object(I.c)("#GroupSettings_Leave_Button")).then(function(){i.LeaveChatRoomGroup(o)}).then(function(){t.props.closeModal()}).catch(function(){})},e.prototype.GetPageList=function(){var e=this.props.groupView.GetGroup(),t=[],n=(e.GetMyRank(),e.BCanAdminGroup()),o=e.BIsAccountIDOwner(g.f.CMInterface.steamid.GetAccountID()),i=e.BCanInvite(),r=e.BCanAdminChannel(),a=e.BCanBan();return e.IsNamedGroupChat()?(t.push({title:Object(I.c)("#GroupSettings_General_Section"),uniqueName:"GroupSettings_General",content:v.createElement(j,{group:e,enabled:n}),enabled:n}),t.push({title:Object(I.c)("#GroupSettings_Channels_Section"),uniqueName:"GroupSettings_Channels",content:v.createElement(k,{groupView:this.props.groupView,enabled:r}),enabled:r}),t.push({title:Object(I.c)("#GroupSettings_Permissions_Section"),uniqueName:"GroupSettings_Permissions",content:v.createElement(N,{group:e,enabled:o}),enabled:o,hideTitle:!0}),t.push({title:Object(I.c)("#GroupSettings_Invite_Section"),uniqueName:"GroupSettings_Invite",content:v.createElement(B,{group:e,inviteLinks:this.m_inviteLinks,enabled:i}),enabled:i}),t.push({title:Object(I.c)("#GroupSettings_InvitedUsers_Section"),uniqueName:"GroupSettings_InvitedUsers",content:v.createElement(F,{group:e,invitedUsers:this.m_invitedUsers,enabled:i}),enabled:i}),t.push({title:Object(I.c)("#GroupSettings_Bans_Section"),uniqueName:"GroupSettings_Bans",content:v.createElement(x,{group:e,bans:this.m_bans,enabled:a}),enabled:a})):(t.push({title:Object(I.c)("#GroupSettings_Save_Section"),uniqueName:"GroupSettings_Save",content:v.createElement(R,{group:e}),enabled:!0}),t.push({title:Object(I.c)("#GroupSettings_Invite_Section"),uniqueName:"GroupSettings_Invite",content:v.createElement(B,{group:e,inviteLinks:this.m_inviteLinks,enabled:i}),enabled:i})),t.push({title:Object(I.c)("#GroupSettings_Leave_Section"),content:v.createElement(L,{group:e}),className:"ChatRoomLeave",click:this.OnLeave}),t},e.prototype.render=function(){var e=this.GetPageList();return v.createElement(h.a,{onEscKeypress:this.DismissDialog},v.createElement(S.v,{title:Object(I.c)("#GroupSettings"),className:"ChatRoomSettingsDialog",pages:e}))},Object(r.c)([f.x],e.prototype,"m_inviteLinks",void 0),Object(r.c)([f.x],e.prototype,"m_invitedUsers",void 0),Object(r.c)([E.a],e.prototype,"DismissDialog",null),Object(r.c)([E.a],e.prototype,"CloseDialog",null),Object(r.c)([E.a],e.prototype,"OnLeave",null),e=Object(r.c)([_.a],e)}(v.Component),R=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bSaving=!1,t.m_strError="",t}return Object(r.d)(e,n),e.prototype.BindInputRef=function(e){this.m_refInput=e},e.prototype.OKToSwitchAway=function(){return!0},e.prototype.AnimateUpgrade_In=function(){document.getElementById("animUp")},e.prototype.AnimateUpgrade_Out=function(){document.getElementById("animDown")},e.prototype.SaveGroup=function(){var t=this,e=this.props.group;this.m_bSaving=!1,this.m_strError="",e.SaveChatRoomGroup(this.m_refInput.value).catch(function(e){t.m_bSaving=!1,t.m_strError=12==e?Object(I.c)("#GroupSettings_Save_NameError"):Object(I.c)("#GroupSettings_Save_GenericError")})},e.prototype.render=function(){var e=this.m_bSaving,t=this.m_strError;return v.createElement(S.k,{className:"DialogBody",onSubmit:this.SaveGroup},v.createElement(S.c,null,Object(I.c)("#GroupSettings_Save_Desc"),v.createElement("div",null,v.createElement("ul",null,v.createElement("li",null,Object(I.c)("#GroupSettings_Save_Feature_1")),v.createElement("li",null,Object(I.c)("#GroupSettings_Save_Feature_2")),v.createElement("li",null,Object(I.c)("#GroupSettings_Save_Feature_3")),v.createElement("li",null,Object(I.c)("#GroupSettings_Save_Feature_4"))))),v.createElement(S.o,{ref:this.BindInputRef,autoFocus:!0,label:Object(I.c)("#GroupSettings_Save_NameGroup"),disabled:e}),!e&&v.createElement(v.Fragment,null,0<t.length&&v.createElement("div",{className:"ErrorWhileSaving"},t),v.createElement(S.x,{className:"_FixedHeight"},Object(I.c)("#GroupSettings_Save_Section"))),e&&v.createElement(C.a,null))},Object(r.c)([f.x],e.prototype,"m_bSaving",void 0),Object(r.c)([f.x],e.prototype,"m_strError",void 0),Object(r.c)([E.a],e.prototype,"BindInputRef",null),Object(r.c)([E.a],e.prototype,"AnimateUpgrade_In",null),Object(r.c)([E.a],e.prototype,"AnimateUpgrade_Out",null),Object(r.c)([E.a],e.prototype,"SaveGroup",null),e=Object(r.c)([_.a],e)}(S.w),j=function(n){function e(e){var t=n.call(this,e)||this;return t.m_strRoomName=t.props.group.IsNamedGroupChat()?t.props.group.name:"",t.m_strTagLine=t.props.group.tagline,t.state={bNameSubmitted:!1,bTaglineSubmitted:!1},t}return Object(r.d)(e,n),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.AvatarUploadEResultToString=function(e){var t="#Chat_Settings_Error_Unknown";switch(e){case 21:t="#Chat_Settings_Error_NotLoggedOn";break;case 112:t="#Chat_Settings_Error_LimitedUser";break;case 15:t="#Chat_Settings_Error_AccessDenied";break;case 2:t="#Chat_Settings_Error_FailedToUpload";break;case 25:t="#Chat_Settings_Error_FileTooLarge";break;case 8:t="#Chat_Settings_Error_InvalidImage";break;case 37:t="#Chat_Settings_Error_ServerError"}return Object(I.c)(t)},e.prototype.SetChatRoomGroupAvatarEResultToString=function(e){var t="#Chat_Settings_Error_Unknown";switch(e){case 10:case 8:case 32:t="#Chat_Settings_Error_ServerError";break;case 15:t="#Chat_Settings_Error_NotAdmin"}return Object(I.c)(t)},e.prototype.OnFileChange=function(e){var n=this,t=e.target.files[0],o=this.props.group;e.preventDefault();var i=new FormData;i.set("sessionid",b.a.SESSIONID),i.set("avatar",t);c.a.post(b.a.CHAT_BASE_URL+"chat/avatarfileupload/",i,{headers:{"content-type":"multipart/form-data"}}).then(function(e){1==e.data.success&&o.SetChatRoomGroupAvatar(e.data.sha).catch(function(e){var t=n.SetChatRoomGroupAvatarEResultToString(e);Object(m.c)(window,Object(I.c)("#Generic_Error"),t)})}).catch(function(e){var t=n.AvatarUploadEResultToString(e.response.data.success);Object(m.c)(window,Object(I.c)("#Generic_Error"),t),console.log(e.response)})},e.prototype.bindFileUploadControl=function(e){this.m_fileInput=e},e.prototype.OnNameChange=function(e){this.m_strRoomName=e.target.value,this.setState({bNameSubmitted:!1})},e.prototype.OnAvatarChange=function(){this.m_fileInput.click()},e.prototype.OnTagLineChange=function(e){this.m_strTagLine=e.target.value,this.setState({bTaglineSubmitted:!1})},e.prototype.OnNameBlur=function(){var e=this.props.group;(e.IsNamedGroupChat()||this.m_strRoomName)&&(e.IsNamedGroupChat()&&e.name==this.m_strRoomName||(e.RenameChatRoomGroup(this.m_strRoomName),document.getElementById("b1").blur(),this.setState({bNameSubmitted:!0})))},e.prototype.OnTagLineBlur=function(){var e=this.props.group;e.tagline!=this.m_strTagLine&&(e.SetChatRoomGroupTagline(this.m_strTagLine),this.setState({bTaglineSubmitted:!0}),document.getElementById("b2").blur())},e.prototype.OnSubmitSent=function(){this.OnTagLineBlur(),this.OnNameBlur()},e.prototype.render=function(){var e;if(this.props.group.BIsClanChatRoom())e=v.createElement("div",null);else if(null==this.props.group.GetOwnerAccountID())e=v.createElement("div",null," ",Object(I.c)("#Chat_Settings_No_Owner")," ");else{var t=g.f.FriendStore.GetPlayer(this.props.group.GetOwnerAccountID());e=v.createElement("div",null,v.createElement(S.p,null," ",Object(I.c)("#Chat_Settings_General_Owner")),v.createElement(d.c,{className:"groupOwnerFriend",friend:t,context:null}))}return v.createElement(S.k,{onSubmit:this.OnSubmitSent,className:"DialogBody"},v.createElement(S.D,null,v.createElement("div",{className:"AvatarAndUser"},v.createElement(S.p,null,Object(I.c)("#Chat_Settings_General_Icon")),v.createElement("img",{className:"currentUserAvatar largeAvatar no-drag",src:this.props.group.hasAvatar?this.props.group.avatar_url_full:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}),!this.props.group.hasAvatar&&v.createElement("div",{className:"noIconLabel"},Object(I.c)("#Chat_Settings_General_NoIcon")),v.createElement("input",{type:"file",style:{display:"none"},name:"fileupload",accept:".png, .jpg, .jpeg, .gif",ref:this.bindFileUploadControl,onChange:this.OnFileChange}),v.createElement(S.d,{onClick:this.OnAvatarChange,disabled:!this.props.enabled},Object(I.c)(this.props.group.hasAvatar?"#Chat_Settings_General_ChangeIcon":"#Chat_Settings_General_AddIcon"))),v.createElement("div",{className:"GeneralChatSettings"},v.createElement(S.o,{autoComplete:"off",id:"b1",className:"groupChatName",label:Object(I.c)("#Chat_Settings_General_Chat_Name"),type:"text",value:this.m_strRoomName,onChange:this.OnNameChange,onBlur:this.OnNameBlur,autoFocus:!0,disabled:!this.props.enabled}),v.createElement("input",{type:"submit",style:{display:"none"}}),v.createElement(S.o,{autoComplete:"off",id:"b2",className:"groupChatTag",label:Object(I.c)("#Chat_Settings_General_Tagline"),type:"text",value:this.m_strTagLine,onChange:this.OnTagLineChange,onBlur:this.OnTagLineBlur,disabled:!this.props.enabled}),e)))},Object(r.c)([f.x],e.prototype,"m_strRoomName",void 0),Object(r.c)([f.x],e.prototype,"m_strTagLine",void 0),Object(r.c)([E.a],e.prototype,"OnFileChange",null),Object(r.c)([E.a],e.prototype,"bindFileUploadControl",null),Object(r.c)([E.a],e.prototype,"OnNameChange",null),Object(r.c)([E.a],e.prototype,"OnAvatarChange",null),Object(r.c)([E.a],e.prototype,"OnTagLineChange",null),Object(r.c)([E.a],e.prototype,"OnNameBlur",null),Object(r.c)([E.a],e.prototype,"OnTagLineBlur",null),Object(r.c)([E.a],e.prototype,"OnSubmitSent",null),e=Object(r.c)([_.a],e)}(S.w),L=function(t){function e(e){return t.call(this,e)||this}return Object(r.d)(e,t),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnLeave=function(e){var t=this,n=e.currentTarget.ownerDocument.defaultView,o=Object(a.e)(null,e),i=this.props.group.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":this.props.group.BIsAccountIDOwner(g.f.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm";Object(m.d)(n,Object(I.c)("#GroupSettings_Leave_Section"),Object(I.c)(i,this.props.group.name),Object(I.c)("#GroupSettings_Leave_Button")).then(function(){t.props.group.LeaveChatRoomGroup(o)}).catch(function(){})},e.prototype.render=function(){return v.createElement("div",null,Object(I.c)("#GroupSettings_Leave_Confirm"),v.createElement(S.d,{onClick:this.OnLeave},Object(I.c)("#GroupSettings_Leave_Button")))},Object(r.c)([E.a],e.prototype,"OnLeave",null),e=Object(r.c)([_.a],e)}(S.w),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this,t=this.props.roomList.indexOf(this.props.room);Object(T.a)(-1!==t,"Couldn't find CChatRoom inside of its list?");var n=t-1,o=function(){e.props.room.GetGroup().ReorderRoom(e.props.roomList[n].GetRoomID(),e.props.room.GetRoomID())},i=t+1,r=function(){e.props.room.GetGroup().ReorderRoom(e.props.room.GetRoomID(),e.props.roomList[i].GetRoomID())};return(n<0||this.props.roomList[n].BIsDefaultRoom())&&(o=void 0),i>=this.props.roomList.length&&(r=void 0),this.props.room.BIsDefaultRoom()&&(r=o=void 0),this.props.enabled||(r=o=void 0),void 0===o&&void 0===r?null:v.createElement("div",{className:"rolePriorityContainer"},v.createElement("div",{className:"rolePriorityButton roleUp"+(void 0===o?" Disabled":""),onClick:o},v.createElement(y.r,{angle:0})),v.createElement("div",{className:"rolePriorityButton roleDown"+(void 0===r?" Disabled":""),onClick:r},v.createElement(y.r,{angle:180})))},t=Object(r.c)([_.a],t)}(v.Component),k=function(t){function e(e){return t.call(this,e)||this}return Object(r.d)(e,t),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnCreateNewTextChannel=function(e){var t=e.currentTarget.ownerDocument.defaultView;Object(h.b)(v.createElement(p.c,{ownerWin:t,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!1}),t)},e.prototype.OnCreateNewVoiceChannel=function(e){var t=e.currentTarget.ownerDocument.defaultView;Object(h.b)(v.createElement(p.c,{ownerWin:t,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!1}),t)},e.prototype.OnDeleteChannel=function(e,n){var t=e.currentTarget.ownerDocument.defaultView;Object(m.d)(t,Object(I.c)("#GroupSettings_Channels_DeleteChannel"),Object(I.c)("#GroupSettings_Channels_DeleteConfirm"),Object(I.c)("#GroupSettings_Channels_DeleteButtonLabel"),Object(I.c)("#Button_Cancel"),!0).then(function(){var e=n.GetGroup(),t=n.GetRoomID();e.DeleteChatRoom(t)}).catch(function(){})},e.prototype.render=function(){var o=this,i=this.props.groupView.GetGroup().textRoomList,r=this.props.groupView.GetGroup().voiceRoomList,t=function(t,e,n){return v.createElement("div",{key:t.GetRoomID(),className:"ChatGroupSettingsChannels_Row"},v.createElement("div",{className:"_DialogRow _DialogRowBackground"},v.createElement("div",{className:"_DialogRowLabel"},n?v.createElement(y.mb,null):v.createElement(y.fb,null),v.createElement("div",{className:t.IsDefaultRoomForGroup()?"HomeChannel":"",style:{alignSelf:"center"}},t.BIsDefaultRoom()?Object(I.c)("#Chat_DefaultChannelName"):t.name)),t.IsDefaultRoomForGroup()&&v.createElement("div",{className:"_DialogRowSecondaryLabel"},Object(I.c)("#GroupSettings_Channels_HomeChannelDeleteLabel")),!t.IsDefaultRoomForGroup()&&o.props.enabled&&v.createElement("div",{className:"ChannelDeleteButton",onClick:function(e){return o.OnDeleteChannel(e,t)}},Object(I.c)("#GroupSettings_Channels_Delete"))),v.createElement(A,{room:t,roomList:n?r:i,enabled:o.props.enabled}))},e=i.map(function(e){return t(e,0,!1)}),n=r.map(function(e){return t(e,0,!0)});return v.createElement(S.k,{className:"DialogBody"},v.createElement(S.m,null,v.createElement(S.D,null,v.createElement(S.d,{className:"DialogButtonTall",svgicon:y.fb,onClick:this.OnCreateNewTextChannel,disabled:!this.props.enabled}," ",Object(I.c)("#GroupSettings_Channels_CreateText")," "),v.createElement(S.d,{className:"DialogButtonTall",svgicon:function(){return y.mb({})},onClick:this.OnCreateNewVoiceChannel,disabled:!this.props.enabled}," ",Object(I.c)("#GroupSettings_Channels_CreateVoice")," "))),v.createElement(S.n,null,0!=e.length&&v.createElement("div",{className:"displayColumn flexShrinkNone",style:{marginBottom:"32px"}},v.createElement(S.p,null,Object(I.c)("#GroupSettings_Channels_TextChannels")),v.createElement(S.l,null),e),0!=n.length&&v.createElement("div",{className:"displayColumn flexShrinkNone"},v.createElement(S.p,null,Object(I.c)("#GroupSettings_Channels_VoiceChannels")),v.createElement(S.l,null),n)))},Object(r.c)([E.a],e.prototype,"OnCreateNewTextChannel",null),Object(r.c)([E.a],e.prototype,"OnCreateNewVoiceChannel",null),Object(r.c)([E.a],e.prototype,"OnDeleteChannel",null),e=Object(r.c)([_.a],e)}(S.w),P=function(n){function e(e){var t=n.call(this,e)||this;g.f.FriendStore.self;return t.state={strRoleName:""},t}return Object(r.d)(e,n),e.prototype.OnSubmit=function(){var t=this,e=this.m_refInput&&this.m_refInput.value.trim();e&&0!=e.length&&(this.props.closeModal(),this.props.group.CreateRole(e).catch(function(e){Object(m.c)(t.props.ownerWin,Object(I.c)("#Generic_Error"),Object(I.c)("#GroupSettings_CreateRole_GenericError")),t.props.closeModal()}))},e.prototype.HandleTextEntry=function(e){this.setState({strRoleName:e.target.value})},e.prototype.render=function(){var t=this,e=0<this.state.strRoleName.length;return v.createElement(h.a,{onEscKeypress:this.props.closeModal},v.createElement(S.h,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},v.createElement(S.m,null,Object(I.c)("#GroupSettings_CreateRole_Title")),v.createElement(S.b,null,v.createElement(S.o,{ref:function(e){t.m_refInput=e},autoFocus:!0,label:Object(I.c)("#GroupSettings_CreateRole_Description"),value:this.state.strRoleName,onChange:this.HandleTextEntry})),v.createElement(S.j,null,v.createElement(S.t,{onCancel:this.props.closeModal,bOKDisabled:!e}))))},Object(r.c)([E.a],e.prototype,"OnSubmit",null),Object(r.c)([E.a],e.prototype,"HandleTextEntry",null),e}(v.Component),N=function(n){function e(e){var t=n.call(this,e)||this;return t.state={editRoleID:void 0,editRoleName:void 0,editRoleActions:void 0},t}return Object(r.d)(e,n),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnCreateRole=function(e){var t=e.currentTarget.ownerDocument.defaultView;Object(h.b)(v.createElement(P,{ownerWin:t,group:this.props.group}),t)},e.prototype.BCanLocalUserEditRole=function(e){return this.props.group.BCanIModifyRole(e)},e.prototype.BCanLocalUserAssignRole=function(){return this.props.group.BCanIAssignRoles()},e.prototype.EditRole=function(e){var t=this.props.group.GetRoleName(e),n=this.props.group.GetRoleActions(e);t&&n&&this.setState({editRoleID:e,editRoleName:t,editRoleActions:n})},e.prototype.RenameRole=function(e,t){var n=this;this.props.group.RenameRole(e,t).catch(function(e){n.setState({editRoleName:n.props.group.GetRoleName(n.state.editRoleID)})})},e.prototype.DeleteRole=function(e,t){var n=this,o=e.currentTarget.ownerDocument.defaultView;if(t!=this.props.group.DefaultRoleID()){var i=this.props.group.GetRoleName(t),r=v.createElement("div",{style:{marginTop:"8px",color:"white"}},i);Object(m.d)(window,Object(I.c)("#GroupSettings_Permissions_ConfirmDeleteTitle"),Object(I.c)("#GroupSettings_Permissions_ConfirmDelete"),Object(I.c)("#GroupSettings_Permissions_ConfirmDeleteButton"),Object(I.c)("#Button_Cancel"),!0,r).then(function(){return n.props.group.DeleteRole(t)}).then(function(){n.setState({editRoleID:void 0})}).catch(function(e){null!=e&&Object(m.c)(o,Object(I.c)("#Generic_Error"),Object(I.c)("#GroupSettings_DeleteRole_GenericError"))})}},e.prototype.OnEditRoleNameChange=function(e){this.setState({editRoleName:e.target.value})},e.prototype.OnEditRoleNameBlur=function(){this.RenameRole(this.state.editRoleID,this.state.editRoleName),document.getElementById("b1").blur()},e.prototype.DoesRoleGrantPermission=function(e,t){return!0},e.prototype.OnSettingToggled=function(e,t){this.props.group.SetRoleAction(this.state.editRoleID,e,t)},e.prototype.PermissionToggleRow=function(t){var n=this,e=!1,o=this.props.group.GetRoleActions(this.state.editRoleID);return o&&(e=o.BCanPerformAction(t.eAction)),v.createElement(S.u,{key:t.eAction,onChange:function(e){n.OnSettingToggled(t.eAction,e)},label:t.strLabel,checked:e,disabled:t.disabled})},e.prototype.MoveRoleUp=function(e){var t=this,n=this.props.group.GetRoleOrdinal(e),o=Math.max(0,n-1);this.props.group.ReorderRole(e,o).then(function(e){t.forceUpdate()})},e.prototype.MoveRoleDown=function(e){var t=this,n=this.props.group.GetRoleOrdinal(e)+1;this.props.group.ReorderRole(e,n).then(function(e){t.forceUpdate()})},e.prototype.render=function(){var a=this,s=this.props.group.BIsClanChatRoom();if(null!=this.state.editRoleID&&this.props.group.GetRoleActions(this.state.editRoleID)){var e=this.PermissionToggleRow,t=this.state.editRoleID==this.props.group.DefaultRoleID(),n=t&&!s?Object(I.c)("#ChatRoomRole_Member"):this.state.editRoleName,o=this.BCanLocalUserEditRole(this.state.editRoleID);return v.createElement(S.k,{onSubmit:this.OnEditRoleNameBlur},v.createElement("div",null,v.createElement(S.m,{style:{opacity:.25,marginBottom:0}},Object(I.c)("#GroupSettings_Permissions_Section")),v.createElement(S.B,{className:"backToPermissionsButton allCaps",onClick:function(){a.setState({editRoleID:void 0})},svgicon:y.eb},Object(I.c)("#GroupSettings_Permissions_BackButton"))),v.createElement(S.m,{className:"permissionDetailsPage"},!o&&v.createElement(S.s,null,v.createElement(y.D,null),Object(I.c)("#Chat_Settings_Permission_Denied")),v.createElement("div",{className:"roleEditHeader"},!s&&v.createElement(S.o,{autoComplete:"off",id:"b1",className:"editRoleName",label:Object(I.c)("#GroupSettings_Permissions_RoleName"),type:"text",value:n,disabled:t||!o,onChange:this.OnEditRoleNameChange,onBlur:this.OnEditRoleNameBlur}),s&&Object(I.c)(n))),v.createElement(S.b,null,v.createElement("div",{className:"SettingsGroup PermissionsGroup"},v.createElement(S.p,{className:"PermissionsSectionHeader"},Object(I.c)("#GroupSettings_Permissions_Heading_General")),v.createElement(e,{eAction:6,strLabel:Object(I.c)("#GroupSettings_Permissions_Chat"),disabled:!o}),v.createElement(e,{eAction:10,strLabel:Object(I.c)("#GroupSettings_Permissions_MentionAll"),disabled:!o}),v.createElement(e,{eAction:11,strLabel:Object(I.c)("#GroupSettings_Permissions_SetWatchingBroadcast"),disabled:!o})),v.createElement("div",{className:"SettingsGroup PermissionsGroup"},v.createElement(S.p,{className:"PermissionsSectionHeader"},Object(I.c)("#GroupSettings_Permissions_Heading_MembersAndRoles")),v.createElement(e,{eAction:2,strLabel:Object(I.c)("#GroupSettings_Permissions_Kick"),disabled:!o}),v.createElement(e,{eAction:3,strLabel:Object(I.c)("#GroupSettings_Permissions_Ban"),disabled:!o}),v.createElement(e,{eAction:4,strLabel:Object(I.c)("#GroupSettings_Permissions_Invite"),disabled:!o}),v.createElement(e,{eAction:8,strLabel:Object(I.c)("#GroupSettings_Permissions_ChangeGroupRoles"),disabled:!o||t}),!s&&v.createElement(e,{eAction:9,strLabel:Object(I.c)("#GroupSettings_Permissions_ChangeUserRoles"),disabled:!o||t})),v.createElement("div",{className:"SettingsGroup PermissionsGroup"},v.createElement(S.p,{className:"PermissionsSectionHeader"},Object(I.c)("#GroupSettings_Permissions_Heading_RoomManagement")),v.createElement(e,{eAction:5,strLabel:Object(I.c)("#GroupSettings_Permissions_ChangeTaglineAvatarName"),disabled:!o}),v.createElement(e,{eAction:1,strLabel:Object(I.c)("#GroupSettings_Permissions_CreateRenameDeleteChannel"),disabled:!o}))),v.createElement(S.j,null,!s&&!t&&o&&v.createElement(S.d,{className:"deleteButton",onClick:function(e){a.DeleteRole(e,a.state.editRoleID)}},Object(I.c)("#GroupSettings_Permissions_DeleteRoleButton"))))}var c=this.props.group.DefaultRoleID(),l=this.props.group.GetRoles().slice().sort(function(e,t){return e.role_id==c?1:t.role_id==c?-1:e.ordinal-t.ordinal}),i=this.props.group.GetHighestRankRoleIDForPermission(g.f.FriendStore.self.accountid,8),p=i?this.props.group.GetRoleOrdinal(i):Number.MAX_VALUE-1,u=this.props.group.BIsAccountIDOwner(g.f.FriendStore.self.accountid),m=!1,r=this.BCanLocalUserAssignRole(),d=l.map(function(t,e){var n=!1,o=a.BCanLocalUserEditRole(t.role_id),i=o&&(u||t.ordinal>p+1)&&0<t.ordinal,r=o&&e<l.length-2;return o&&(m=!0),t.role_id==c?r=i=!(n=!0):a.props.group.BMemberHasRole(g.f.FriendStore.self.accountid,t.role_id)&&(n=!0),v.createElement("div",{className:"roleRow",key:t.role_id},v.createElement(S.d,{className:"roleButton"+(n&&!u?" currentUserRole":""),onClick:function(e){a.EditRole(t.role_id)}},v.createElement(y.l,null),Object(I.c)(t.name),v.createElement("span",{className:"roleSubtitle"},o?Object(I.c)("#Generic_Edit"):Object(I.c)("#Generic_View"))),!s&&m&&2<l.length&&(i||r)&&v.createElement("div",{className:"rolePriorityContainer"},v.createElement("div",{className:"rolePriorityButton roleUp"+(i?"":" Disabled"),onClick:function(e){a.MoveRoleUp(t.role_id),e.stopPropagation()}},v.createElement(y.r,{angle:0})),v.createElement("div",{className:"rolePriorityButton roleDown"+(r?"":" Disabled"),onClick:function(e){a.MoveRoleDown(t.role_id),e.stopPropagation()}},v.createElement(y.r,{angle:180}))))}),h=Object(I.c)("#ChatRoomRole_Description_NoEdit");if(s){var f=D.a.InitFromClanID(this.props.group.GetClanID()),_=b.a.COMMUNITY_BASE_URL+"gid/"+f.ConvertTo64BitString()+"/membersManage";h=Object(I.e)("#ChatRoomRole_Description_Clan",v.createElement(M.b,{href:_},Object(I.c)("#ChatRoomRole_Description_ClanLink")))}else m&&!u?h=Object(I.c)("#ChatRoomRole_Description"):(r||u)&&(h=Object(I.c)("#ChatRoomRole_Description_NoEditCanAssign"));return v.createElement("div",{className:"roleList"},v.createElement(S.m,null,Object(I.c)("#GroupSettings_Permissions_Section"),!this.props.enabled&&!m&&v.createElement(S.s,null,v.createElement(y.D,null),Object(I.c)("#Chat_Settings_Permission_Denied_Permissions"))),v.createElement(S.c,null,h),v.createElement("div",{className:"roleEditHeader"},v.createElement(S.p,null,Object(I.c)("#GroupSettings_Permissions_RolesTitle")," "),!u&&v.createElement(S.p,{className:"meKey"},v.createElement(y.l,null),Object(I.c)("#GroupSettings_meKey_Desc")),u&&v.createElement(S.p,{className:"meKey"},v.createElement(y.k,null),Object(I.c)("#GroupSettings_meKey_Desc_Owner"))),v.createElement(S.k,{className:"DialogBody"},v.createElement(S.d,{disabled:!0,className:"roleButton owner",svgicon:y.k,onClick:function(){}},Object(I.c)("#ChatRoomRole_Owner"),v.createElement("span",{className:"roleSubtitle"},Object(I.c)("#ChatRoomRole_OwnerSubtitle"))),d),!s&&v.createElement(S.x,{className:"createNewRoleButton",svgicon:function(){return y.P({minus:!1,nocircle:!1})},onClick:this.OnCreateRole,disabled:!this.props.group.BCanICreateRoles()},Object(I.c)("#GroupSettings_Permissions_CreateNew")))},Object(r.c)([E.a],e.prototype,"OnCreateRole",null),Object(r.c)([E.a],e.prototype,"EditRole",null),Object(r.c)([E.a],e.prototype,"RenameRole",null),Object(r.c)([E.a],e.prototype,"DeleteRole",null),Object(r.c)([E.a],e.prototype,"OnEditRoleNameChange",null),Object(r.c)([E.a],e.prototype,"OnEditRoleNameBlur",null),Object(r.c)([E.a],e.prototype,"OnSettingToggled",null),Object(r.c)([E.a],e.prototype,"PermissionToggleRow",null),Object(r.c)([E.a],e.prototype,"MoveRoleUp",null),Object(r.c)([E.a],e.prototype,"MoveRoleDown",null),e=Object(r.c)([_.a],e)}(S.w),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.componentWillMount=function(){var t=this.props.inviteLinks;if("loaded"!=t.loadingState){var e=this.props.group;this.props.enabled&&"pending"==t.loadingState?e.GetInviteLinksForGroup().then(function(e){setTimeout(function(){"loaded"==e.loadingState&&(t.rgInviteLinks=e.rgInviteLinks.sort(function(e,t){return e.time_expires()-t.time_expires()})),t.loadingState=e.loadingState},500)}):this.props.inviteLinks.loadingState="denied"}},t.prototype.OnDeleteLink=function(n){var e=this,o=this.props.inviteLinks,t=v.createElement("div",{style:{marginTop:"5px",color:"#dee2e5"}},Object(w.a)(n.invite_code()));Object(m.d)(window,Object(I.c)("#GroupSettings_Invite_ConfirmDeleteTitle"),Object(I.c)("#GroupSettings_Invite_ConfirmDelete"),Object(I.c)("#GroupSettings_Invite_ConfirmDeleteButton"),Object(I.c)("#Button_Cancel"),!0,t).then(function(){e.props.group.DeleteInviteLink(n.invite_code()).then(function(e){Object(T.a)("loaded"==o.loadingState,"somehow got a valid link to delete without links being loaded");var t=o.rgInviteLinks.findIndex(function(e){return e.invite_code()==n.invite_code()});0<=t&&(o.rgInviteLinks.splice(t,1),console.log("removed link",o.rgInviteLinks))})}).then(function(){}).catch(function(){})},t.prototype.FormatExpires=function(e){return 2145916800<e?Object(I.c)("#GroupSettings_Invite_NeverExpires"):g.f.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.HandleFocus=function(e){e.target.select()},t.prototype.render=function(){var n=this,e=this.props.inviteLinks,t=void 0;if("pending"==e.loadingState)t=v.createElement("div",null,v.createElement(C.a,null));else if("denied"==e.loadingState)t=v.createElement("div",null,Object(I.c)("#GroupSettings_Invite_Denied"));else if("failed"==e.loadingState)t=v.createElement("div",null,Object(I.c)("#GroupSettings_Invite_Failed"));else if("loaded"==e.loadingState){var o;t=0==(o=e.rgInviteLinks.map(function(t){return v.createElement("tr",{key:t.invite_code()},v.createElement("td",null," ",v.createElement(S.o,{className:"inviteURLLink",value:Object(w.a)(t.invite_code()),readOnly:!0,onClick:n.HandleFocus,onFocus:n.HandleFocus})," "),v.createElement("td",{className:"dateCell allCaps"}," ",n.FormatExpires(t.time_expires())," "),v.createElement("td",{className:"buttonCell"},v.createElement(S.d,{onClick:function(e){return n.OnDeleteLink(t)},disabled:!n.props.enabled},Object(I.c)("#GroupSettings_Invite_Delete"))))})).length?v.createElement("div",null,Object(I.c)("#GroupSettings_Invite_NoInvites")):v.createElement("table",{className:"DialogSpanningTable InviteLinksTable"},v.createElement("thead",null,v.createElement("tr",null,v.createElement("th",{className:"inviteCodeColumn"}," ",Object(I.c)("#GroupSettings_Invite_Code")," "),v.createElement("th",{className:"dateColumn"}," ",Object(I.c)("#GroupSettings_Invite_Expiration")," "),v.createElement("th",{className:"buttonColumn"}," "))),v.createElement("tbody",null,o))}return v.createElement(S.k,{className:"DialogBody"},this.props.enabled&&v.createElement("div",{className:"inviteLinkContainer"},v.createElement(u.a,{chat:this.props.group.GetDefaultChatRoom(),disabled:!this.props.enabled})),this.props.enabled&&v.createElement("div",{className:"OrSeparator"},v.createElement(S.l,null)),t)},Object(r.c)([E.a],t.prototype,"OnDeleteLink",null),Object(r.c)([E.a],t.prototype,"HandleFocus",null),t=Object(r.c)([_.a],t)}(S.w),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.componentWillMount=function(){var t=this.props.invitedUsers;if("loaded"!=t.loadingState){var e=this.props.group;"pending"==t.loadingState&&e.GetInvitedUsersForGroup().then(function(e){setTimeout(function(){"loaded"==e.loadingState&&(t.rgInvitedUsers=e.rgInvitedUsers.sort(function(e,t){return e.time_invited()-t.time_invited()})),t.loadingState=e.loadingState},500)})}},t.prototype.RevokeInvite=function(e,t){var n=this,o=g.f.FriendStore.GetPlayer(t),i=e.currentTarget.ownerDocument.defaultView,r=v.createElement(d.c,{className:"friend",friend:o,context:null,disableContextMenu:!0});Object(m.d)(window,Object(I.c)("#GroupSettings_InvitedUsers_RevokeTitle"),Object(I.c)("#GroupSettings_InvitedUsers_RevokeBody"),Object(I.c)("#GroupSettings_InvitedUsers_RevokeConfirm"),Object(I.c)("#Button_Cancel"),!0,r).then(function(){n.props.group.RevokeInvite(t).then(function(){O.d(n.props.invitedUsers.rgInvitedUsers,function(e){return e.accountid()===t})}).catch(function(e){Object(m.c)(i,Object(I.c)("#Generic_Error"),Object(I.c)("#GroupSettings_InvitedUsers_RevokeGenericError"))})}).catch(function(){})},t.prototype.FormatDate=function(e){return g.f.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.render=function(){var n=this;if("loaded"!=this.props.invitedUsers.loadingState)return v.createElement(S.k,null,"pending"==this.props.invitedUsers.loadingState?v.createElement(C.a,{size:"medium"}):Object(I.c)("#GroupSettings_InvitedUsers_Failed"));if(!this.props.invitedUsers.rgInvitedUsers||0==this.props.invitedUsers.rgInvitedUsers.length)return v.createElement(S.k,null,Object(I.c)("#GroupSettings_InvitedUsers_Noone"));var e=this.props.invitedUsers.rgInvitedUsers.map(function(t){var e=g.f.FriendStore.GetPlayer(t.accountid());return v.createElement("tr",{className:"hoverRow",key:t.accountid()},v.createElement("td",{className:"friendCell"}," ",v.createElement(d.c,{friend:e,context:null,bHideGameName:!0,bHidePersona:!0})," "),v.createElement("td",{className:"dateCell"}," ",n.FormatDate(t.time_invited())," "),v.createElement("td",{className:"buttonCell"},v.createElement(S.d,{onClick:function(e){return n.RevokeInvite(e,t.accountid())},disabled:!n.props.enabled},Object(I.c)("#GroupSettings_InvitedUsers_RevokeInvite"))))});return v.createElement(S.k,{className:"DialogBody"},v.createElement("table",{className:"DialogSpanningTable InvitedUsersTable"},v.createElement("thead",null,v.createElement("tr",{className:"headerRow"},v.createElement("th",{className:"friendColumn"},Object(I.c)("#GroupSettings_InvitedUsers_InvitedHeader")," "),v.createElement("th",{className:"dateColumn"}," ",Object(I.c)("#GroupSettings_InvitedUsers_InvitedDate")," "),v.createElement("th",{className:"buttonColumn"}," "))),v.createElement("tbody",null,e)))},Object(r.c)([E.a],t.prototype,"RevokeInvite",null),t=Object(r.c)([_.a],t)}(S.w),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.componentWillMount=function(){var e=this.props.group,t=this.props.bans;"pending"==t.loadingState&&e.GetBanList().then(function(e){setTimeout(function(){t.rgBans=e.rgBans,t.loadingState=e.loadingState},500)})},t.prototype.componentWillUnmount=function(){},t.prototype.OnClickUnban=function(e,t){var n=this,o=g.f.FriendStore.GetPlayer(t),i=e.currentTarget.ownerDocument.defaultView,r=v.createElement(d.c,{className:"friend",friend:o,context:null,disableContextMenu:!0});Object(m.d)(window,Object(I.c)("#GroupSettings_Bans_UnbanTitle"),Object(I.c)("#GroupSettings_Bans_UnbanBody",o.display_name),Object(I.c)("#GroupSettings_Bans_UnbanConfirm"),Object(I.c)("#Button_Cancel"),!0,r).then(function(){n.props.group.SetUserBanState(t,!1).then(function(){O.d(n.props.bans.rgBans,function(e){return e.accountid()===t})}).catch(function(e){Object(m.c)(i,Object(I.c)("#Generic_Error"),Object(I.c)("#GroupSettings_Bans_UnbanGenericError"))})}).catch(function(){})},t.prototype.FormatDate=function(e){return g.f.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.render=function(){var e,n=this;if("loaded"==this.props.bans.loadingState)return 0==this.props.bans.rgBans.length?v.createElement(S.k,null,Object(I.c)("#GroupSettings_Bans_NoOneBanned")):(e=this.props.bans.rgBans.map(function(t){var e=g.f.FriendStore.GetPlayer(t.accountid());return v.createElement("tr",{className:"hoverRow",key:t.accountid()},v.createElement("td",{className:"friendCell"}," ",v.createElement(d.c,{friend:e,context:null})," "),v.createElement("td",{className:"dateCell"}," ",n.FormatDate(t.time_banned())," "),v.createElement("td",{className:"buttonCell"}," ",v.createElement(S.d,{onClick:function(e){return n.OnClickUnban(e,t.accountid())}},Object(I.c)("#GroupSettings_Bans_RevokeBan"))))}),v.createElement(S.k,{className:"DialogBody"},v.createElement("table",{className:"DialogSpanningTable BannedUsersTable"},v.createElement("thead",null,v.createElement("tr",{className:"headerRow"},v.createElement("th",{className:"friendColumn"},Object(I.c)("#GroupSettings_Bans_InvitedHeader")," "),v.createElement("th",{className:"dateColumn"}," ",Object(I.c)("#GroupSettings_Bans_BannedDate")," "),v.createElement("th",{className:"buttonColumn"}," "))),v.createElement("tbody",null,e))));var t=void 0;return t="pending"==this.props.bans.loadingState?v.createElement(C.a,{size:"medium"}):"denied"==this.props.bans.loadingState?Object(I.c)("#GroupSettings_Bans_AccessDenied"):Object(I.c)("#GroupSettings_Bans_Failed"),v.createElement(S.k,{className:"DialogBody"},t)},Object(r.c)([E.a],t.prototype,"OnClickUnban",null),t=Object(r.c)([_.a],t)}(S.w),V=n("/Byk"),U=n("9Cmb"),H=n("D3Kh"),W=n("xdma");n.d(t,"b",function(){return z}),n.d(t,"c",function(){return Q}),n.d(t,"a",function(){return Z}),n.d(t,"d",function(){return X});var z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.InviteFriend=function(e){Object(u.b)(Object(a.e)(this,e),e.currentTarget.ownerDocument.defaultView,this.props.groupView.GetGroup())},t.prototype.OpenSettings=function(e){var t,n;t=Object(o.n)(e),n=this.props.groupView,Object(h.b)(v.createElement(G,{groupView:n}),t,"ChatRoomGroupSettings",{strTitle:Object(I.c)("#GroupSettings"),popupWidth:842,popupHeight:600},Object(a.g)(t))},t.prototype.OpenNotificationPreferences=function(e){Object(V.b)(Object(o.n)(e),this.props.groupView)},t.prototype.OnContextMenu=function(e){Object(i.b)(e,this.props.groupView.GetGroup(),{is_chat_window:!0})},t.prototype.render=function(){var e=this.props.groupView,t=e.GetGroup(),n=t.name,o=t.tagline,i=!1;t.readyToRender&&(i=t.BCanInvite());var r=e.GetGroup().watching_broadcast_steamid&&!e.isBroadcastShown;return v.createElement("div",{className:"chatRoomHeader"},v.createElement("div",{className:"chatRoomGroupHeader"+(r?" notifyBroadcast":""),onContextMenu:this.OnContextMenu},v.createElement(Z,{group:t}),v.createElement("div",{className:"chatRoomGroupHeaderNameandTag"},v.createElement("div",{className:"chatRoomGroupHeaderName"},n),v.createElement("div",{className:"chatRoomGroupHeaderTagline"},o)),v.createElement("div",{className:"chatRoomGroupSpacer"}),t.readyToRender&&v.createElement(v.Fragment,null,r&&this.RenderBroadcastPeek(),v.createElement("div",{className:"chatRoomGroupControls"},v.createElement("div",{className:"chatRoomOptions"},v.createElement("div",{className:"chatRoomButton ManageNotifications",onClick:this.OpenNotificationPreferences,title:Object(I.c)("#Tooltip_NotificationSettings")},v.createElement(y.c,null)),i&&v.createElement("div",{className:"chatRoomButton InviteToGroupChat",onClick:this.InviteFriend,title:Object(I.c)("#Tooltip_InviteToGroup")},v.createElement(y.B,null)),!i&&v.createElement("div",{className:"chatRoomButton InviteToGroupChat Disabled",onClick:function(e){},title:Object(I.c)("#Tooltip_InviteToGroup_Denied")},v.createElement(y.B,null)),v.createElement("div",{className:"chatRoomButton GroupChatSettings",onClick:this.OpenSettings,title:Object(I.c)("#Tooltip_GroupChatSettings")},v.createElement(y.g,null))),v.createElement("div",{className:"chatRoomGroupStats"},v.createElement(K,{group:t}),v.createElement(J,{group:t}),v.createElement(Y,{group:t}))))))},t.prototype.RenderBroadcastPeek=function(){var e=this.props,t=e.groupView,n=e.onBroadcastPreviewClick,o=t.GetGroup(),i=o.watching_broadcast_steamid.ConvertTo64BitString(),r=o.BCanIAssociateBroadcast()?function(){return Object(m.d)(window,Object(I.c)("#Broadcast_EndWatchParty"),Object(I.c)("#Broadcast_EndWatchPartyPrompt"),Object(I.c)("#Broadcast_EndWatchParty")).then(function(){return o.SetChatRoomGroupWatchingBroadcast(void 0)})}:void 0;return v.createElement(q,{broadcastId:i,key:i,onClick:n,onRequestClose:r})},Object(r.c)([E.a],t.prototype,"InviteFriend",null),Object(r.c)([E.a],t.prototype,"OpenSettings",null),Object(r.c)([E.a],t.prototype,"OpenNotificationPreferences",null),Object(r.c)([E.a],t.prototype,"OnContextMenu",null),t=Object(r.c)([_.a],t)}(v.Component),q=function(n){function e(e){var t=n.call(this,e)||this;return t.state={info:H.a.StartInfo(e.broadcastId)},t}return Object(r.d)(e,n),e.prototype.componentWillUnmount=function(){H.a.StopInfo(this.state.info)},e.prototype.OnCloseClick=function(e){this.props.onRequestClose&&(e.stopPropagation(),this.props.onRequestClose())},e.prototype.render=function(){var e=this.props,t=e.onClick,n=e.onRequestClose,o=this.state.info,i=o.m_strAppTitle,r=o.m_strThumbnailUrl,a=o.m_strTitle,s=new D.a(this.props.broadcastId),c=a;return a||(c=Object(I.c)("#PersonaStateWatchingBroadcast_Player",g.f.FriendStore.GetPlayer(s.GetAccountID()).display_name)),v.createElement("div",{className:"broadcastInfoContainer",onClick:t},v.createElement("div",{className:"broadcastDetails"},v.createElement("div",{className:"nowWatching"},Object(I.c)("#Broadcast_NowWatching")),v.createElement("div",{className:"gameTitle"},i),v.createElement("div",{className:"broadcastTitle"},c)),v.createElement("div",{className:"thumbnail"},r&&v.createElement(W.a,{className:"thumbnailImg",src:r,duration:2500})),n&&v.createElement("div",{className:"actions",onClick:this.OnCloseClick},v.createElement(y.ob,null)))},Object(r.c)([E.a],e.prototype,"OnCloseClick",null),e=Object(r.c)([_.a],e)}(v.Component),K=Object(_.a)(function(e){var t=e.group;return v.createElement("div",{className:"statMemberStat statMembersTotal"},v.createElement("div",{className:"statCircle"}),Object(I.d)("#Chat_Members",t.memberCountTotal))}),Y=Object(_.a)(function(e){var t=e.group;return 0==t.memberCountInGame?null:v.createElement("div",{className:"statMemberStat statMembersInGame",title:Object(I.d)("#Chat_Members_InGame_Tooltip",t.memberCountInGame)},v.createElement("div",{className:"statCircle"}),t.memberCountInGame)}),J=Object(_.a)(function(e){var t=e.group;return 0==t.memberCountOnline?null:v.createElement("div",{className:"statMemberStat statMembersOnline",title:Object(I.d)("#Chat_Members_Online_Tooltip",t.memberCountOnline)},v.createElement("div",{className:"statCircle"}),t.memberCountOnline)}),Q=Object(_.a)(function(e){if(!e.small&&!e.micro&&e.clan.BIsOGG()&&e.clan.GetOGGAppID()){var t=g.f.AppInfoStore.GetAppInfo(e.clan.GetOGGAppID());return v.createElement("div",{className:"ChatRoomGroupOGGAvatar "+(e.large?"Large":"")},v.createElement("img",{className:"OGGAvatar",src:t.header_image_url}))}var n="";return e.micro?n="Micro":e.small?n="Small":e.large&&(n="Large"),v.createElement("div",{className:"ChatRoomGroupAvatar "+n},v.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:e.large?e.clan.avatar_url_full:e.clan.avatar_url_medium}))}),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var n=this,e=this.props.group;if(e&&e.BIsClanChatRoom()){var t=g.f.FriendStore.ClanStore.GetClan(e.GetClanID());return v.createElement(Q,{clan:t,micro:this.props.micro,small:this.props.small,large:this.props.large})}var o="";if(this.props.micro?o="Micro":this.props.small?o="Small":this.props.large&&(o="Large"),e&&!e.IsNamedGroupChat()){var i=e.members_to_highlight,r=i.members,a=i.remaining_count;if(r.length){var s=r.length+(a?1:0);return v.createElement("div",{className:"ChatRoomMultiFriendAvatar With"+s+"Items "+o},r.map(function(e,t){return v.createElement("img",{src:n.props.large?e.persona.avatar_url_medium:e.persona.avatar_url,key:t,className:"MultiAvatar Index"+t})}),0<a&&v.createElement("div",{className:"ChatRoomMultiFriendMore MultiAvatar Index3"},"+",a))}}if(e&&e.hasIcon)return v.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar "+o},v.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:e.avatar_url_full}));var c="";e?c=e.name:this.props.name&&(c=this.props.name);var l=Object(U.b)(c),p="ChatRoomGroupAvatar "+o;return U.d(l)&&(p+=" EmojiInitials"),v.createElement("div",{className:p},v.createElement("div",{className:"ChatRoomGroupAvatar_initials"},l))},t=Object(r.c)([_.a],t)}(v.Component);function X(o,i){return Object(r.b)(this,void 0,void 0,function(){var t,n;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=Object(a.f)(o),n=i.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":i.BIsAccountIDOwner(g.f.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm",[4,Object(m.a)(o,Object(I.c)("#Chat_Actions_LeaveChatRoomGroup"),Object(I.c)(n,i.name),Object(I.c)("#Chat_Actions_LeaveChatRoomGroup"))];case 1:return e.sent()&&i.LeaveChatRoomGroup(t),[2]}})})}},Z578:function(e,t,n){"use strict";n.d(t,"c",function(){return v}),n.d(t,"b",function(){return S}),n.d(t,"a",function(){return y});var o=n("mrSG"),a=n("LAqV"),i=n("okNM"),r=n("Hi0u"),s=n("q1tI"),c=n("+M9t"),l=n("1VtQ"),p=n("oh5H"),u=n("ljid"),m=n("y4mg"),d=n("hReu"),h=n("/IDK"),f=n("bbBM"),_=n("e2SU"),g=n("2vnA"),b=n("+mma");function v(e,t,n,o,i){void 0===o&&(o=!1),Object(r.b)(s.createElement(y,{browserContext:e,chatViewToReplace:n,bHideChatNameEntry:o,vecInvitePlayers:i}),t,"CreateChatDialog",{strTitle:Object(p.c)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:580},Object(d.g)(t))}function S(e,n,t,o){var i=Object(d.f)(e),r=a.f.ChatStore.FindNamelessChatGroupWithFriends(t);r?a.f.UIStore.ReplaceFriendChatWithGroup(i,n,r):a.f.ChatStore.CreateChatRoomGroup(i,"",t,o).then(function(e){a.f.UIStore.GetPerContextChatData(i);var t=a.f.ChatStore.GetChatRoomGroup(e);t&&a.f.UIStore.ReplaceFriendChatWithGroup(i,n,t)}).catch(function(){Object(b.c)(e,Object(p.c)("#Generic_Error"),Object(p.c)("#Chat_CreateChatRoom_GenericError"))})}var y=function(n){function e(e){var t=n.call(this,e)||this;a.f.FriendStore.self;return t.state={strCurrentNameEntry:"",strError:void 0,bHaveAnyFriendsSelected:e.vecInvitePlayers&&0<e.vecInvitePlayers.length,bHaveNonBetaFriendsSelected:!1,bCreateInFlight:!1},t}return Object(o.d)(e,n),e.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.target.value})},e.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e},e.prototype.OnFriendListSelectionChanged=function(){var e=!1,t=!1;if(this.m_friendPicker){e=0<this.m_friendPicker.selectedFriendCount;for(var n=function(e){if(!1===e.is_in_beta)return t=!0,"break";void 0===e.is_in_beta&&Object(g.E)(function(){return void 0!==e.is_in_beta},o.OnFriendListSelectionChanged)},o=this,i=0,r=this.m_friendPicker.state.rgFriendsChosen;i<r.length;i++){if("break"===n(r[i]))break}}e==this.state.bHaveAnyFriendsSelected&&t==this.state.bHaveNonBetaFriendsSelected||this.setState({bHaveAnyFriendsSelected:e,bHaveNonBetaFriendsSelected:t})},e.prototype.HandleSubmit=function(e){var t=this;if(e&&e.preventDefault(),!this.state.bCreateInFlight){var n=Object(h.n)(e);this.setState(function(e){return e.bCreateInFlight||t.InternalDoSubmit(n),{bCreateInFlight:!0}})}},e.prototype.InternalDoSubmit=function(e){var t=this,n=[];this.m_friendPicker&&(n=this.m_friendPicker.state.rgFriendsChosen.map(function(e){return e.persona.m_steamid.ConvertTo64BitString()}));var o=this.props.chatViewToReplace;if(o){var i=new c.b(this.props.chatViewToReplace.chat.accountid_partner);return n.push(i.persona.m_steamid.ConvertTo64BitString()),S(e,o,n),void this.props.closeModal()}var r=this.props.bHideChatNameEntry?"":this.state.strCurrentNameEntry;a.f.ChatStore.CreateChatRoomGroup(this.props.browserContext,r,n,this.props.creationOptions).then(function(e){t.props.closeModal()}).catch(function(){t.setState({strError:Object(p.c)("#Chat_CreateChatRoom_GenericError"),bCreateInFlight:!1})})},e.prototype.IsChatRoomNameValid=function(){return 0<this.state.strCurrentNameEntry.length},e.prototype.render=function(){var e=this.props.chatViewToReplace?this.props.chatViewToReplace.chat.chat_partner:null,t=Object(p.c)("#Chat_CreateChatRoom_Button"),n=new Set;this.props.chatViewToReplace&&n.add(this.props.chatViewToReplace.chat.accountid_partner);var o=!1;this.state.bCreateInFlight?(o=!1,t=Object(p.c)("#GroupSettings_Permissions_Saving")):e?o=this.state.bHaveAnyFriendsSelected:(o=this.IsChatRoomNameValid()||this.state.bHaveAnyFriendsSelected,this.IsChatRoomNameValid()&&!this.state.bHaveAnyFriendsSelected?t=Object(p.c)("#Chat_CreateChatRoom_Button"):this.state.bHaveAnyFriendsSelected&&!this.IsChatRoomNameValid()?t=Object(p.c)("#Chat_CreateChatRoom_InviteFriends"):this.state.bHaveAnyFriendsSelected&&this.IsChatRoomNameValid()&&(t=Object(p.c)("#Chat_CreateChatRoom_Button_wFriends")));var i=this.props.strTitle||(e?Object(p.c)("#Chat_CreateChatRoom_InviteFriends"):Object(p.c)("#Chat_CreateChatRoom"));return s.createElement(r.a,{onEscKeypress:this.props.closeModal},s.createElement(u.h,{classNameContent:"CreateChatDialog",onSubmit:this.HandleSubmit},s.createElement(u.m,null,i),s.createElement(u.b,null,e&&s.createElement(u.c,null,s.createElement("span",null,Object(p.c)("#Chat_CreateChatRoom_With"),s.createElement("span",{className:"DialogHighlight"},Object(p.c)("#Chat_CreateChatRoom_You")),Object(p.c)("#Chat_CreateChatRoom_And"),s.createElement("span",{className:"DialogHighlight"},e.display_name))),this.state.strError&&s.createElement(u.c,{className:"nicknameError"},this.state.strError),!this.props.bHideChatNameEntry&&s.createElement(u.o,{type:"text",label:Object(p.c)("#Chat_Settings_Room_Name"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),s.createElement(u.c,{className:"CreateChat_NonBetaFriendsWarning "+(a.f.IsInBeta()?"":" Released")+(this.state.bHaveNonBetaFriendsSelected?" Active":"")},s.createElement(C,null),Object(p.c)(a.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),s.createElement(m.a,{ref:this.OnFriendPickerRef,label:Object(p.c)("#Chat_DropToInviteGroup"),eSort:1,setExcludedFriends:n,autoFocus:this.props.bHideChatNameEntry,onFriendSelected:this.OnFriendListSelectionChanged,onFriendRemoved:this.OnFriendListSelectionChanged,rgSelectedFriends:this.props.vecInvitePlayers,chosenFriendComponent:O})),s.createElement(u.j,null,s.createElement(u.t,{strOKText:t,onCancel:this.props.closeModal,bOKDisabled:!o}))))},Object(o.c)([l.a],e.prototype,"HandleTextEntry",null),Object(o.c)([l.a],e.prototype,"OnFriendPickerRef",null),Object(o.c)([l.a],e.prototype,"OnFriendListSelectionChanged",null),Object(o.c)([l.a],e.prototype,"HandleSubmit",null),e=Object(o.c)([i.a],e)}(s.Component);function C(){return s.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(p.c)(a.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}var O=Object(i.a)(function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return s.createElement(s.Fragment,null,s.createElement(f.f,{friend:e.friend,context:null},s.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&s.createElement(C,null),s.createElement("span",null,e.friend.display_name),s.createElement(_.pb,null))))})},ZsEe:function(e,t,n){e.exports={throbberContainer:"main_throbberContainer_29hiv","throbberContainer-exit-active":"main_throbberContainer-exit-active_24VO6",SteamPageHeader:"main_SteamPageHeader_3EaXO",SteamPageHeaderShortLogo:"main_SteamPageHeaderShortLogo_2KbGi",SteamPageHeaderTopLink:"main_SteamPageHeaderTopLink_17wXz"}},adxy:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var o=n("mrSG"),r=n("i8i4"),a=n("/IDK"),i=function(){function e(e,t){this.m_bActive=!1,this.m_fnBoundAnimationFunc=void 0,this.m_window=e,this.m_options=Object.assign({timing:"sine"},t)}return e.prototype.Start=function(){var e;switch(this.m_msStart=performance.now(),this.m_msEnd=this.m_msStart+this.m_options.msDuration,this.m_options.timing){case"linear":e=function(e){return e};break;case"cubic-in-out":e=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1};break;case"sine":default:e=function(e){return.5-Math.cos(e*Math.PI)/2}}this.m_bActive=!0,this.m_fnBoundAnimationFunc=this.OnInterval.bind(this,e),this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc)},e.prototype.BIsActive=function(){return this.m_bActive},e.prototype.End=function(){this.m_bActive&&(this.Update(1),this.ClearInterval(),this.FireOnComplete())},e.prototype.FireOnComplete=function(){this.m_options.onComplete&&this.m_options.onComplete()},e.prototype.Cancel=function(){this.m_bActive=!1},e.prototype.OnInterval=function(e){if(this.m_bActive){var t=performance.now()-this.m_msStart;if(t>=this.m_options.msDuration)this.End();else{var n=t/this.m_options.msDuration;this.Update(e(n)),this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc)}}},e.prototype.ClearInterval=function(){this.m_bActive=!1},e}(),s=function(i){function e(e,t,n){var o=i.call(this,a.m(e),n)||this;return o.m_props={},o.m_object=e,o.m_propTargets=t,o}return Object(o.d)(e,i),e.prototype.Start=function(){for(var e in this.m_props={},this.m_propTargets){var t=parseFloat(this.m_object[e])||0,n=this.m_propTargets[e];t!=n&&(this.m_props[e]={start:t,end:n})}i.prototype.Start.call(this)},e.prototype.Update=function(e){for(var t in this.m_props){var n=this.m_props[t],o=n.start+(n.end-n.start)*e;this.m_object[t]=o}},e}(i),c=function(i){function e(e,t,n){var o=i.call(this,a.m(r.findDOMNode(e)),n)||this;return o.m_props={},o.m_component=e,o.m_propTargets=t,o.m_setStateOnComplete=n.setStateOnComplete,o}return Object(o.d)(e,i),e.prototype.Start=function(){for(var e in this.m_props={},this.m_propTargets){var t=parseFloat(this.m_component.state[e])||0,n=this.m_propTargets[e];t!=n&&(this.m_props[e]={start:t,end:n})}i.prototype.Start.call(this)},e.prototype.Update=function(e){var t={};for(var n in this.m_props){var o=this.m_props[n],i=o.start+(o.end-o.start)*e;t[n]=i}this.m_component.setState(t)},e.prototype.FireOnComplete=function(){i.prototype.FireOnComplete.call(this),this.m_setStateOnComplete&&this.m_component.setState(this.m_setStateOnComplete)},e}(i)},az2Z:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var M=n("mrSG"),D=n("q1tI"),o=n("okNM"),T=n("oh5H"),G=n("0N1H"),R=n("lqmi"),j=n("9PRf"),L=n("da/R"),A=n("e2SU"),k=n("QHER"),i=n("s13G"),P=n.n(i);function N(e){return D.createElement(D.Fragment,null,D.createElement("span",{className:P.a.partyBeaconJoin},Object(T.c)("#User_WantsToPlay"))," – ",e.persona.GetCurrentGameName())}var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(M.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.onContextMenu,o=e.persona,i=e.eFriendRelationship,r=e.bIsSelf,a=e.bParenthesizeNicknames,s=e.strNickname,c=e.bCompactView,l=e.bHideGameName,p=e.bHideEnhancedRichPresenceLabel,u=e.bHideSnooze,m=e.renderStatus,d=e.renderRichPresence,h=e.bHidePersona,f=e.bDNDSet,_=e.bHasPartyBeacon,g=e.bHasGamePrivacy,b=e.bNoMask,v=Object(M.f)(e,["className","onContextMenu","persona","eFriendRelationship","bIsSelf","bParenthesizeNicknames","strNickname","bCompactView","bHideGameName","bHideEnhancedRichPresenceLabel","bHideSnooze","renderStatus","renderRichPresence","bHidePersona","bDNDSet","bHasPartyBeacon","bHasGamePrivacy","bNoMask"]),S=null,y=null,C=null,O=[t,P.a.personaNameAndStatusLabel,Object(R.d)(o),c&&P.a.compactView,b&&P.a.NoMask];m?y=m():_||o.has_public_party_beacon?y=D.createElement(N,{persona:o}):Object(G.a)(i)?(y=Object(T.c)("#PersonaStateBlocked"),O.push(P.a.blocked)):o.is_ingame?(y=!o.is_in_nonsteam_game||r||Object(G.b)(i)?o.GetCurrentGameName():Object(T.c)("#PersonaStateInNonSteamGame"),r||h?r&&o.is_awayOrSnooze&&(C=Object(T.c)("#PersonaStateAway")):C=o.GetCurrentGameRichPresence()):o.m_broadcastAccountId&&(y=Object(T.c)("#PersonaStateWatchingBroadcast")),y||(y=o.GetLocalizedOnlineStatus()),!o.is_awayOrSnooze||h||u||(S=D.createElement(j.a,{persona:o}));var I=null;n?I=D.createElement("div",{className:"ContextMenuButton",onClick:n},D.createElement(A.o,null)):O.push(P.a.noContextMenu),h&&O.push(P.a.hidePersona),d&&(C=d()),!l&&C||O.push(P.a.twoLine);var E=s&&!a,w=E?s:o.m_strPlayerName;return D.createElement("div",Object(M.a)({},v,{className:k.a.apply(void 0,O),onContextMenu:n}),D.createElement("div",{className:P.a.statusAndName},D.createElement("div",{className:P.a.playerName},w||" ",a&&s&&D.createElement("span",{className:P.a.playerNickname},"(",s,")")),f&&D.createElement("div",{className:P.a.DNDContainer,title:Object(T.c)("#User_ToggleDoNotDisturb")},D.createElement(A.m,null)),E&&D.createElement("span",{className:P.a.playerNicknameBracket,title:Object(T.c)("#isNickname")}," *"),D.createElement(L.a,{persona:o}),S,I),!h&&D.createElement("div",{className:P.a.richPresenceContainer},(!l||!C)&&D.createElement("div",{className:Object(k.a)(P.a.gameName,P.a.richPresenceLabel,"no-drag")},g&&D.createElement("div",{className:P.a.gameIsPrivateIcon,title:Object(T.c)("#User_GameInfoHidden")},D.createElement(A.x,null)),y),!p&&C&&D.createElement("div",{className:Object(k.a)(P.a.richPresenceLabel,"no-drag")},C," ")))},t=Object(M.c)([o.a],t)}(D.Component);Object(o.a)(function(e){var t=e.persona,n=e.bParenthesizeNicknames,o=e.strNickname,i=e.className,r=Object(M.f)(e,["persona","bParenthesizeNicknames","strNickname","className"]),a=o&&!n?o:t.m_strPlayerName;return D.createElement("span",Object(M.a)({},r,{className:Object(k.a)(i,Object(R.d)(t))}),D.createElement("span",{className:P.a.playerName},a||" ",n&&o&&D.createElement("span",{className:P.a.playerNickname},"(",o,")")))})},bbBM:function(e,t,n){"use strict";var D=n("mrSG"),y=n("tkkQ"),o=n("rsEv"),C=n("+M9t"),T=n("5FJe"),S=n("hReu"),G=n("LAqV"),R=n("29iz"),r=n("+mma"),i=n("FkUk"),s=n("V7Fl"),c=n("TA9H"),a=n("YZlK"),l=n("gtB6"),p=n("2vnA"),u=n("okNM"),j=n("q1tI"),m=n("i8i4"),d=n("/IDK"),L=n("oh5H"),h=n("1VtQ"),f=n("ieu3"),I=n("uw3m"),A=n("9PRf"),O=function(n){function e(e){var t=n.call(this,e)||this;return t.m_iActiveDragIndex=void 0,t.m_ActiveDrag=void 0,t.m_ActiveDragOut=void 0,t.m_bGhostIsDupe=!1,t.m_rgFavoriteElementRefs=[],t.m_bAcceptDrag=!1,t.state={bHintDismissed:S.h.UIDisplayPrefs.bFavoritesHintDismissed},t}return Object(D.d)(e,n),e.prototype.DismissFavoritesHint=function(){this.setState({bHintDismissed:!0}),S.h.SetUIDisplayPref("bFavoritesHintDismissed",!0)},e.prototype.render=function(){var r=this,e=this.props.FavoritesStore.favorites,a=this.m_ActiveDrag,t="quickAccessFriends emptyQuickAccess";if(this.state.bHintDismissed&&(t+=" hintDismissed"),e.length||a){var n=e,o=G.f.SettingsStore.FriendsSettings.bCompactQuickAccess;if(a){if(this.m_bGhostIsDupe&&n.findIndex(function(e){return Object(c.b)(e,a)}),void 0===this.m_iActiveDragIndex||this.m_iActiveDragIndex>=n.length)n=Object(D.g)(n,[Object(D.a)({isActiveDrag:!0},a)]);else{this.m_iActiveDragIndex;n=Object(D.g)(n.slice(0,this.m_iActiveDragIndex),[Object(D.a)({isActiveDrag:!0},a)],n.slice(this.m_iActiveDragIndex))}}var i=n.map(function(e,t){var n;if(e.friend)n="f"+e.friend.accountid;else if(e.clan)n="cl"+e.clan.clanid;else{if(!e.chat)return null;n="cg"+e.chat.GetGroupID()}var o=r.m_bGhostIsDupe&&!e.isActiveDrag&&Object(c.b)(a,e),i=e.isActiveDrag;return i&&(n+="dragGhost"),j.createElement(_,{favorite:e,index:t,friendRenderContext:r.GetFriendRenderContext(),key:n,bIsDragGhost:i,bIsDragOutGhost:o,ref:r.OnFavoriteElementRef.bind(r,t)})}),s="quickAccessFriends";return o&&(s+=" compactQuickAccess"),j.createElement(R.a,Object(D.a)({className:s},this.GetDragDropProps()),i,j.createElement("div",{className:"dropTargetBox"}))}return j.createElement(R.a,Object(D.a)({className:t},this.GetDragDropProps()),j.createElement("div",{className:"quickAccessFriendsMessage"},Object(L.c)("#FriendsList_Favorites_Hint")),!this.state.bHintDismissed&&j.createElement("div",{className:"quickAccessFriendsMessageDismiss",onClick:this.DismissFavoritesHint},Object(L.c)("#Generic_Got_It")),j.createElement("div",{className:"dropTargetBox"}))},e.prototype.OnFavoriteElementRef=function(e,t){this.m_rgFavoriteElementRefs[e]=t},e.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext||(this.m_FriendRenderContext={chatContext:"friendslist"}),this.m_FriendRenderContext},e.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend","chattab","chatroomgroup","clan"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e.onDragStart=this.OnDragStart,e.onDragEndCapture=this.OnDragEnd,e},e.prototype.OnDragStart=function(e){var t=S.h.DragDropManager.GetDragData();!t||"friend"!=t.type&&"chatroomgroup"!=t.type&&"clan"!=t.type||(t.is_favorite=!0,this.m_ActiveDragOut=this.FindItemFromDrag(t))},e.prototype.OnDragEnd=function(e){var t=S.h.DragDropManager.GetDragData(),n=this.FindItemFromDrag(t);if(n&&"is_favorite"in t&&t.is_favorite&&!S.h.DragDropManager.BWasDropConsumed()){var o=e.currentTarget.getBoundingClientRect();100<Object(d.k)(o,e.clientX,e.clientY)&&(this.props.FavoritesStore.RemoveFromFavorites(n),S.h.DragDropManager.EndDrag())}this.m_ActiveDragOut=void 0},e.prototype.FindItemFromDrag=function(e){var t,n,o,i;if("friend"==e.type)n=e.friend;else if("chattab"==e.type){var r=e.tab;if(r instanceof s.d){var a=r.GetGroup();a.BIsClanChatRoom()&&(o=G.f.FriendStore.ClanStore.GetClan(a.GetClanID())),i=a}else{n=r.GetChatView().chat.chat_partner}}else"chatroomgroup"==e.type?i=e.group:"clan"==e.type&&(o=e.clan);return n?n.is_friend&&(t={friend:n}):o?t={clan:o}:i&&(t={chat:i}),t},e.prototype.OnDragEnter=function(e,t){var n=this.FindItemFromDrag(e);return n&&!Object(c.b)(this.m_ActiveDrag,n)&&(this.m_ActiveDrag=n,this.m_bGhostIsDupe=this.props.FavoritesStore.BIsFavorited(n)),!0},e.prototype.OnDragOver=function(e){for(var t,n,o=0,i=this.m_rgFavoriteElementRefs;o<i.length;o++){var r=i[o],a=r&&r.GetBoundingClientRect();if(a){var s=Object(d.k)(a,e.clientX,e.clientY);(void 0===n||s<n)&&(n=s,t=r)}}t&&(this.m_iActiveDragIndex=t.props.index),e.dataTransfer.dropEffect="copy"},e.prototype.ResetDragState=function(){this.m_ActiveDrag=void 0,this.m_ActiveDragOut=void 0,this.m_iActiveDragIndex=void 0},e.prototype.OnDragLeave=function(){this.m_ActiveDrag&&this.ResetDragState()},e.prototype.OnDrop=function(e,t){var n=this.FindItemFromDrag(e);this.m_ActiveDrag;n?(S.h.DragDropManager.SetDropConsumed(),this.props.FavoritesStore.AddToFavorites(n,this.m_iActiveDragIndex),this.ResetDragState()):this.m_ActiveDrag&&this.ResetDragState()},Object(D.c)([p.x],e.prototype,"m_iActiveDragIndex",void 0),Object(D.c)([p.x],e.prototype,"m_ActiveDrag",void 0),Object(D.c)([p.x],e.prototype,"m_ActiveDragOut",void 0),Object(D.c)([h.a],e.prototype,"DismissFavoritesHint",null),Object(D.c)([h.a],e.prototype,"OnDragStart",null),Object(D.c)([h.a],e.prototype,"OnDragEnd",null),Object(D.c)([h.a],e.prototype,"OnDragEnter",null),Object(D.c)([h.a],e.prototype,"OnDragOver",null),Object(D.c)([h.a],e.prototype,"OnDragLeave",null),Object(D.c)([h.a],e.prototype,"OnDrop",null),e=Object(D.c)([u.a],e)}(j.Component),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.GetBoundingClientRect=function(){var e=m.findDOMNode(this);return e?e.getBoundingClientRect():null},t.prototype.onFavoriteElementClick=function(e){var t=this.props.favorite;if(t.friend)this.props.favorite.friend.OpenChatDialog(Object(S.e)(null,e));else if(t.clan)t.clan.OpenChatDialog(Object(S.e)(this,e));else{if(!t.chat)return;G.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(S.e)(this,e),t.chat,!0)}e.stopPropagation()},t.prototype.OnFavoriteElementContextMenu=function(e){var t=this.props.favorite;if(t.friend)Object(i.b)(Object(S.e)(this,e),this.props.friendRenderContext,t.friend,e);else if(t.clan)Object(l.c)(e,t.clan,{is_favorites:!0});else{if(!t.chat)return;Object(l.b)(e,t.chat,{is_favorites:!0})}e.stopPropagation()},t.prototype.render=function(){var e,t,n="quickAccessFriend",o=this.props.favorite;this.props.bIsDragGhost?n+=" dropGhost":this.props.bIsDragOutGhost&&(n+=" dragOriginGhost"),this.props.bIsDragOutGhost&&(e={display:"none"}),t=o.friend?j.createElement(g,{key:o.friend.accountid,friend:o.friend,friendRenderContext:this.props.friendRenderContext,className:n}):o.clan?j.createElement(b,{key:o.clan.clanid,clan:o.clan,className:n}):o.chat?j.createElement(v,{key:o.chat.GetGroupID(),chat:o.chat,className:n}):null;var i=j.createElement("div",{style:e,className:"favoriteElement",onClick:this.onFavoriteElementClick,onContextMenu:this.OnFavoriteElementContextMenu},t);return o.friend?j.createElement(Te,{friend:o.friend,context:this.props.friendRenderContext},i):i},Object(D.c)([h.a],t.prototype,"onFavoriteElementClick",null),Object(D.c)([h.a],t.prototype,"OnFavoriteElementContextMenu",null),t}(j.Component),g=Object(u.a)(function(e){var t=e.friend,n=G.f.SettingsStore.FriendsSettings.bCompactQuickAccess,o=null;t.persona.is_awayOrSnooze&&(o=j.createElement(A.a,{persona:t.persona,className:"SnoozeContainer",size:"medium",dim:!0}));var i=void 0;if(t.persona.is_ingame){var r=G.f.AppInfoStore.GetAppInfo(t.persona.m_unGamePlayedAppID);r.is_valid&&(i=j.createElement("div",{className:"FavoriteFriend_GameIcon"},j.createElement("img",{className:"gameIcon",src:r.icon_url,draggable:!1})))}for(var a=!1,s=0,c=G.f.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();s<c.length;s++){if(c[s].accountid_partner==t.accountid){a=!0;break}}var l=null;return a&&(l=j.createElement("div",{className:"ChatUnreadMessageIndicator"},j.createElement("div",{className:"chatUnreadCircle"}))),j.createElement(Ge,{friend:t,key:t.accountid,className:e.className,context:e.friendRenderContext,bFriendsListEntry:!0,bSingleClickActivate:!0},j.createElement("div",null,j.createElement(I.b,{persona:t.persona,size:"Medium"},i,o),!n&&j.createElement("div",{className:"playerNameQuickAccessContainer"},j.createElement("div",{className:"playerName"},t.display_name),t.is_display_name_nickname&&j.createElement("span",{className:"playerNicknameBracket",title:Object(L.c)("#isNickname")},"*")),l))}),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.OnDragStart=function(e){S.h.DragDropManager.StartDrag({type:"clan",clan:this.props.clan})},t.prototype.OnDragEnd=function(e){S.h.DragDropManager.EndDrag()},t.prototype.render=function(){var e="QuickAccessFriend QuickAccessClan",t=G.f.SettingsStore.FriendsSettings.bCompactQuickAccess;this.props.className&&(e+=" "+this.props.className);var n=null,o=this.props.clan.GetChatGroupIDIfLoaded();if(o){var i=G.f.ChatStore.GetChatRoomGroup(o);i&&(n=j.createElement(f.b,{group:i}))}return j.createElement("div",{className:e,draggable:!0,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd},j.createElement(a.c,{clan:this.props.clan,small:!0}),!t&&j.createElement("div",{className:"clanName"},this.props.clan.name),n)},Object(D.c)([h.a],t.prototype,"OnDragStart",null),Object(D.c)([h.a],t.prototype,"OnDragEnd",null),t=Object(D.c)([u.a],t)}(j.Component),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.OnDragStart=function(e){S.h.DragDropManager.StartDrag({type:"chatroomgroup",group:this.props.chat})},t.prototype.OnDragEnd=function(e){S.h.DragDropManager.EndDrag()},t.prototype.render=function(){var e="QuickAccessChat",t=null,n=G.f.SettingsStore.FriendsSettings.bCompactQuickAccess;return this.props.chat.hasUnreadChatMessage&&(t=j.createElement(f.b,{group:this.props.chat})),this.props.className&&(e+=" "+this.props.className),j.createElement("div",{className:e,draggable:!0,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd},j.createElement(a.a,{group:this.props.chat}),!n&&j.createElement("div",{className:"clanName"},this.props.chat.name),t)},Object(D.c)([h.a],t.prototype,"OnDragStart",null),Object(D.c)([h.a],t.prototype,"OnDragEnd",null),t=Object(D.c)([u.a],t)}(j.Component),E=n("uWOQ"),k=n("1w3K"),w=n("8o0Y"),M=n("EGkk"),P=n("e2SU"),N=n("adxy"),B=n("/7KC"),F=n("Z578"),x=n("yolM"),V=n("Hi0u"),U=n("ljid"),H=n("UqDm"),W=n("ywG3"),z=n("yoQ3"),q=n("GxRc"),K=n("rWGG"),Y=n("MB4Y");j.Component;var J=function(n){function e(e){var t=n.call(this,e)||this;return t.m_rgSelectOptions=[{label:"Option #1",data:1},{label:"Option #2",data:2},{label:j.createElement("span",null,"Option ",j.createElement("u",null,"#3")),data:3}],t.state={inputText:"Input text",checkboxChecked:!0,selectedOption:void 0},t}return Object(D.d)(e,n),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnInputChanged=function(e){this.setState({inputText:e.currentTarget.value})},e.prototype.OnToggled=function(e){this.setState({checkboxChecked:e})},e.prototype.OnSelectDropDownChanged=function(e){this.setState({selectedOption:e.data})},e.prototype.OnSubmit=function(){alert(JSON.stringify(this.state))},e.prototype.render=function(){return j.createElement(j.Fragment,null,j.createElement(U.k,{className:"DialogBody",onSubmit:this.OnSubmit},j.createElement("div",{className:"_FixedHeight"},j.createElement(U.c,null,"Text input"),j.createElement(U.o,{label:"INPUT TITLE",value:this.state.inputText,onChange:this.OnInputChanged}),j.createElement(U.o,{label:"READ ONLY",value:"You can't change this",disabled:!0}),j.createElement(U.i,{label:"Drop down",rgOptions:this.m_rgSelectOptions,strDefaultLabel:"Select one...",selectedOption:this.state.selectedOption,onChange:this.OnSelectDropDownChanged}),j.createElement(U.u,{label:"On Off Toggle",checked:this.state.checkboxChecked,onChange:this.OnToggled}),j.createElement("div",{style:{marginBottom:"20px"}},j.createElement("span",null,"Checkbox:"),j.createElement("div",{style:{display:"inline-block",marginLeft:"20px",verticalAlign:"middle"}},j.createElement(U.e,null))),j.createElement("div",{style:{marginBottom:"20px"}},j.createElement("span",null,"Round checkbox:"),j.createElement("div",{style:{display:"inline-block",marginLeft:"20px",verticalAlign:"middle"}},j.createElement(U.z,null))),j.createElement(U.A,{min:0,max:100,value:25}),j.createElement("div",{style:{marginBottom:"20px"}},j.createElement(U.C,null,j.createElement(U.x,null,"PrimaryButton"),j.createElement(U.B,null,"TextButton"),j.createElement(U.d,{svgicon:P.k},"Button w/ Icon"))),j.createElement(U.D,null,j.createElement(U.o,{label:"Left input",placeholder:"Placeholder"}),j.createElement(U.o,{label:"Right input",placeholder:"Placeholder"})),j.createElement(U.u,{label:"Another toggle",description:"This one has a longer description with more details."}))),j.createElement(U.j,null,j.createElement(U.t,{onCancel:this.props.onCancel})))},Object(D.c)([h.a],e.prototype,"OnInputChanged",null),Object(D.c)([h.a],e.prototype,"OnToggled",null),Object(D.c)([h.a],e.prototype,"OnSelectDropDownChanged",null),Object(D.c)([h.a],e.prototype,"OnSubmit",null),e}(U.w),Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rgDragDropOptions=[j.createElement(U.r,{key:"key1",id:"key1"},j.createElement(U.u,{label:"Draggable toggle #1"})),j.createElement(U.r,{key:"key2",id:"key2"},j.createElement(U.u,{ref:e.RefTest,label:"Draggable toggle #2"})),j.createElement(U.r,{key:"key3",id:"key3"},j.createElement(U.u,{label:"Draggable toggle #3"})),j.createElement(U.r,{key:"keyz",id:"keyz"},j.createElement(Z,null)),j.createElement(U.r,{key:"key4",id:"key4"},j.createElement(U.u,{label:"Draggable toggle #4"}))],e}return Object(D.d)(e,t),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnSubmit=function(){alert(JSON.stringify(this.state))},e.prototype.RefTest=function(e){console.log("Got ref",e)},e.prototype.OnListReordered=function(e,t){H.e(this.rgDragDropOptions,e,t),this.forceUpdate()},e.prototype.render=function(){return j.createElement(U.k,{className:"DialogBody",onSubmit:this.OnSubmit},j.createElement(U.y,{onReorder:this.OnListReordered},this.rgDragDropOptions))},Object(D.c)([h.a],e.prototype,"OnSubmit",null),Object(D.c)([h.a],e.prototype,"RefTest",null),Object(D.c)([h.a],e.prototype,"OnListReordered",null),e}(U.w),Z=function(n){function e(e){var t=n.call(this,e)||this;return t.state={cSeconds:0},t}return Object(D.d)(e,n),e.prototype.componentDidMount=function(){var e=this;this.m_iInterval=window.setInterval(function(){e.setState(function(e){return{cSeconds:e.cSeconds+1}})},1e3)},e.prototype.componentWillUnmount=function(){window.clearInterval(this.m_iInterval)},e.prototype.render=function(){return j.createElement(U.o,{value:this.state.cSeconds,disabled:!0,label:"COUNTER"})},e}(j.Component),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.OnCMToggled=function(e){Object(W.d)(e),this.forceUpdate()},t.prototype.OnStickyContextMenuToggle=function(e){Object(M.j)(e),this.forceUpdate()},t.prototype.OnMobxDevToolsToggle=function(e){Object(z.e)(e),this.forceUpdate()},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.render=function(){return j.createElement(j.Fragment,null,j.createElement(U.b,null,j.createElement(U.u,{label:'"Sticky" Context Menus',description:"Context menus will stay open to allow inspecting CSS",checked:Object(M.h)(),onChange:this.OnStickyContextMenuToggle}),j.createElement(U.u,{label:"Enable Mobx Dev Tools",description:"Display mobx devtools in the top right of each window",checked:Object(z.c)(),onChange:this.OnMobxDevToolsToggle}),j.createElement(U.u,{label:"Log all CM Traffic",description:"All messages to and from the steam servers will be logged to the browser console (F12)",checked:Object(W.c)(),onChange:this.OnCMToggled})))},Object(D.c)([h.a],t.prototype,"OnCMToggled",null),Object(D.c)([h.a],t.prototype,"OnStickyContextMenuToggle",null),Object(D.c)([h.a],t.prototype,"OnMobxDevToolsToggle",null),t}(U.w),$=function(n){function e(e){var t=n.call(this,e)||this;return t.state={searchString:""},t}return Object(D.d)(e,n),e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnSearchInput=function(e){e.currentTarget.value!=this.state.searchString&&this.setState({searchString:e.currentTarget.value})},e.prototype.render=function(){var e,t=new Y.b;e=""==this.state.searchString?G.f.FriendStore.self.steamid.GetAccountID():this.state.searchString;var n=new Y.a(G.f.FriendStore.GetPlayer(+e));return t.hover=n,t.visible=!0,n.EnsureCommunityDataLoaded(),j.createElement(U.k,{className:"DialogBody"},j.createElement(U.D,null,j.createElement("div",{style:{flex:1}},j.createElement(U.p,null,"Old Throbber"),j.createElement("div",{className:"LoadingWrapper"},j.createElement("div",{className:"LoadingThrobber"},j.createElement("div",{className:"Bar Bar1"}),j.createElement("div",{className:"Bar Bar2"}),j.createElement("div",{className:"Bar Bar3"})),j.createElement("div",{className:"LoadingText"}))),j.createElement("div",{style:{flex:2}},j.createElement(U.p,null,"New Throbber (W.I.P.)"),j.createElement("div",{className:"displayRow"},j.createElement(q.a,{size:"xlarge",string:"X-Large"}),j.createElement(q.a,{size:"large",string:"Large"}),j.createElement(q.a,{size:"medium",string:"Medium"}),j.createElement(q.a,{size:"small",string:"Small"})))),j.createElement(U.b,null,j.createElement(U.p,null,"Miniprofile Tester:"),j.createElement("form",null,j.createElement("input",{className:"friendSearchInput",type:"text",name:"memberlistSearch",placeholder:"Enter SteamID",value:this.state.searchString,onInput:this.OnSearchInput,autoComplete:"off"})),j.createElement("div",{className:"fakeMiniProfile"},j.createElement(K.c,{hoverInstance:t})),j.createElement(Ge,{friend:G.f.FriendStore.GetPlayer(+e),context:null})))},Object(D.c)([h.a],e.prototype,"OnSearchInput",null),e}(U.w),ee=n("lqmi"),te=n("0wLp"),ne=n("s+DT");var oe=function(t){function e(e){return t.call(this,e)||this}return Object(D.d)(e,t),e.Posts=function(){return[{date:"2019-05-17",content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.e)("#changeLog_UpdateItem77",j.createElement("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=com.valvesoftware.android.steam.friendsui"},"Android"),j.createElement("a",{target:"_blank",href:"https://itunes.apple.com/app/steam-chat/id1434890245"},"iOS"))))},{date:"2019-05-01",content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem76")))},{date:"2019-04-24",content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem75")))},{date:"2019-04-17",content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem72")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem73")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem74")))},{date:1532044800,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.e)("#changeLog_UpdateItem71",j.createElement("b",null,Object(L.c)("#changeLog_Note")))))},{date:1531443600,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem68")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem69")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem70")))},{date:1531263600,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem47")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem58")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem59")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem60")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem48")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem49")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem63")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem50")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem51")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem53")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem52")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem61")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem62")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem64")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem65")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem66")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem67")))},{date:1531162800,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem54")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem55")))},{date:1530298800,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem56")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem57")))},{date:1530126e3,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItemSubHeader"},Object(L.c)("#changeLog_UpdateItem_Permissions")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem39")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem40")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem41")),j.createElement("div",{className:"changeLogItemSubHeader"},Object(L.c)("#changeLog_UpdateSubHeader_General")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem45")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem30"),j.createElement("div",{style:{marginTop:"4px"}},j.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},Object(L.c)("#changeLog_Note")),j.createElement("span",{style:{fontStyle:"italic"}},Object(L.c)("#changeLog_UpdateItem30_Note")))),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem29")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem25")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem26")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem38")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem31")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem42")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem28")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem27")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem33")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem32")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem34"),j.createElement("div",{style:{marginTop:"4px"}},j.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},Object(L.c)("#changeLog_Note")),j.createElement("span",{style:{fontStyle:"italic"}},Object(L.c)("#changeLog_UpdateItem34_Note")))),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem35")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem36")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem37")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem43")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem44")))},{date:1529528400,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem20")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem21")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem22")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem23")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem24")))},{date:1529456400,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem17")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem18")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem15")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem16")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem12")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem13")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem14")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem19")))},{date:1529017200,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItemSubHeader"},Object(L.c)("#changeLog_UpdateSubHeader_General")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem11")),j.createElement("div",{className:"changeLogItemSubHeader"},Object(L.c)("#changeLog_UpdateSubHeader_Linux")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem10")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem09")))},{date:1528938e3,content:j.createElement("div",null,j.createElement("div",{className:"changeLogExtra"},Object(L.c)("#changeLog_UpdateExtraInfo01")),j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem02")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem03")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem04")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem05")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem06")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem07")),j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem08"))))},{date:1528923600,content:j.createElement("div",{className:"changeLogDescription"},j.createElement("div",{className:"changeLogItem"},Object(L.c)("#changeLog_UpdateItem01")))}]},e.prototype.PostDate=function(e){return("string"==typeof e?new Date(e):G.f.RTime32ToDate(e)).toLocaleDateString(L.b.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},e.prototype.render=function(){var t=this;return j.createElement(j.Fragment,null,e.Posts().map(function(e){return j.createElement("div",{key:e.date},j.createElement("div",{className:"changeLogTitle"},Object(L.c)("#changeLog_GenericUpdateTitle")),j.createElement("div",{className:"changeLogDate"},t.PostDate(e.date)),e.content)}))},Object(D.c)([h.a],e.prototype,"PostDate",null),e}(j.Component),ie=function(t){function e(e){return t.call(this,e)||this}return Object(D.d)(e,t),e.prototype.render=function(){return j.createElement(V.a,{onEscKeypress:this.props.closeModal},j.createElement(U.g,{className:"changeLogPage"},j.createElement(U.m,null,Object(L.c)("#changeLog_Title")),j.createElement(U.b,null,j.createElement(U.c,null,Object(L.c)("#changeLog_SubTitle")),j.createElement(U.n,{className:"changeLogDetails"},j.createElement(oe,null))),j.createElement(U.j,null,j.createElement(U.x,{onClick:this.props.closeModal},Object(L.c)("#Button_Close")))))},e}(j.Component),re=n("XaMz"),ae=n("az2Z"),se=n("QHER"),ce=n("syWt");n("dBNU");n.d(t,"a",function(){return ue}),n.d(t,"h",function(){return me}),n.d(t,"i",function(){return de}),n.d(t,"g",function(){return fe}),n.d(t,"e",function(){return Ie}),n.d(t,"b",function(){return Ee}),n.d(t,"f",function(){return Te}),n.d(t,"c",function(){return Ge}),n.d(t,"d",function(){return je});var le=function(t){function e(e){return t.call(this,e)||this}return Object(D.d)(e,t),e.prototype.render=function(){var e=this.props.chat.VoiceChatStore.HasBeenAttemptingOverTwoSeconds(),t=this.props.chat.VoiceChatStore.IsAttemptingReconnect();return j.createElement("div",{className:"connectionStatusLabels"},e&&j.createElement("div",{className:"connectionStatus"},j.createElement("a",{title:Object(L.c)("#VoiceChatConnectingHelp"),className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(L.c)("#VoiceChatConnecting"))),t&&j.createElement("div",{className:"connectionStatus"},j.createElement("a",{className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(L.c)("#VoiceChatReconnecting"))))},e=Object(D.c)([u.a],e)}(j.Component),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.render=function(){var e=this.props.chats.GetActiveVoiceChat();return this.props.chats.VoiceChat.IsAnyVoiceActive()&&e?j.createElement(ue,{chat:e,name:this.props.chats.GetActiveVoiceChannelName(),nostatus:!1}):j.createElement("div",{className:"activeVoiceControls"},j.createElement("div",{className:"buttonsContainer"},j.createElement("div",{className:"activeVoiceFlexBox"},j.createElement("div",{className:"activeVoiceLabels"},j.createElement("div",{className:"activeVoiceHeader"},Object(L.c)("#ActiveVoiceChat")),j.createElement("div",{className:"activeVoiceName"})),j.createElement("div",{className:"activeVoiceButtons"},j.createElement(me,null),j.createElement(de,null),j.createElement("div",{className:"activeVoiceButtonsSpacer"}),j.createElement(he,null),j.createElement("div",{className:"activeVoiceButtonsSpacerAfter"})))))},t=Object(D.c)([u.a],t)}(j.Component),ue=function(t){function e(e){return t.call(this,e)||this}return Object(D.d)(e,t),e.prototype.ActivateActiveVoiceChat=function(e){if(this.props.chat instanceof o.a){var t=G.f.ChatStore.GetChatRoomGroup(this.props.chat.GetParentGroupID());if(t)return void G.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(S.e)(this,e),t,!0)}G.f.UIStore.ShowAndOrActivateChat(Object(S.e)(this,e),this.props.chat,!0)},e.prototype.render=function(){var e=G.f.VoiceStore.GetPushToTalkEnabled(),t=G.f.VoiceStore.GetPushToMuteEnabled(),n=G.f.VoiceStore.GetPushToTalkVoiceStateEnabled(),o=G.f.VoiceStore.GetPushToTalkHotKeyDisplayString(),i="";return(e||t)&&(i+=" pushToTalkEnabled"),n&&(i+=" pushToTalkKeyDown"),j.createElement("div",{className:"activeVoiceControls"+i},j.createElement("div",{className:"buttonsContainer"},j.createElement("div",{className:"activeVoiceFlexBox"},j.createElement("div",{className:"activeVoiceLabels"},j.createElement("div",{className:"activeVoiceHeader"},Object(L.c)("#ActiveVoiceChat")),j.createElement("div",{className:"activeVoiceName",onClick:this.ActivateActiveVoiceChat},this.props.name)),j.createElement("div",{className:"activeVoiceButtons"},j.createElement(me,null),j.createElement(de,null),j.createElement("div",{className:"activeVoiceButtonsSpacer"}),j.createElement(he,null),j.createElement("div",{className:"activeVoiceButtonsSpacerAfter"}))),!this.props.nostatus&&j.createElement(le,{chat:this.props.chat})),(e||t)&&j.createElement("div",{className:"activeVoicePushToTalk"+i},Object(L.c)(t?"#ActiveVoicePushToMute":"#ActiveVoicePushToTalk",o)))},Object(D.c)([h.a],e.prototype,"ActivateActiveVoiceChat",null),e=Object(D.c)([u.a],e)}(j.Component),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.ToggleMicrophone=function(e){G.f.VoiceStore.IsMicMuted()&&G.f.VoiceStore.IsOutputMuted()&&G.f.VoiceStore.ToggleOutputMuting(),G.f.VoiceStore.ToggleMicMuting(),e.stopPropagation()},t.prototype.render=function(){var e=G.f.VoiceStore.BNoMicAvailableForSession(),t=G.f.VoiceStore.BHasSampleRateTooHighInBrowser(),n=G.f.VoiceStore.IsMicMuted(),o="VoiceControlPanelButton ToggleMicrophoneButton",i="";return i=n?Object(L.c)("#VoiceChat_UnmuteMic"):Object(L.c)("#VoiceChat_MuteMic"),e&&(o+=" NoMicrophone",i=t?Object(L.c)("#VoiceChat_ChromeSampleRateTooHighMicExplainer"):Object(L.c)("#VoiceChat_DeniedMicrophoneAccess")),n&&(o+=" disabled"),j.createElement("button",{className:o,onClick:this.ToggleMicrophone,title:i},j.createElement(P.H,null),j.createElement(P.H,{className:"SVGIcon_Shadow"}))},Object(D.c)([h.a],t.prototype,"ToggleMicrophone",null),t=Object(D.c)([u.a],t)}(j.Component),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.ToggleVoiceOutput=function(e){G.f.VoiceStore.IsOutputMuted()==G.f.VoiceStore.IsMicMuted()&&G.f.VoiceStore.ToggleMicMuting(),G.f.VoiceStore.ToggleOutputMuting(),e.stopPropagation()},t.prototype.render=function(){var e=G.f.VoiceStore.IsOutputMuted(),t="VoiceControlPanelButton ToggleVoiceOutputButton";e&&(t+=" disabled");var n="";return n=e?Object(L.c)("#VoiceChat_UnmuteSpeaker"):Object(L.c)("#VoiceChat_MuteSpeaker"),j.createElement("button",{className:t,onClick:this.ToggleVoiceOutput,title:n},j.createElement(P.w,null),j.createElement(P.w,{className:"SVGIcon_Shadow"}))},Object(D.c)([h.a],t.prototype,"ToggleVoiceOutput",null),t=Object(D.c)([u.a],t)}(j.Component),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.EndVoiceChat=function(e){G.f.VoiceStore.OnUserEndVoiceChat(),e.stopPropagation()},t.prototype.render=function(){return j.createElement("button",{className:"VoiceControlPanelButton chatEndVoiceChat",onClick:this.EndVoiceChat,title:Object(L.c)("#VoiceChat_Leave")},j.createElement(P.mb,null))},Object(D.c)([h.a],t.prototype,"EndVoiceChat",null),t=Object(D.c)([u.a],t)}(j.Component),fe=function(n){function e(e){var t=n.call(this,e)||this;return t.state={searchString:"",bFriendTabSearch:!1,bViewingIncomingInvites:!1,tabLabelWidth:0},t.m_tabLabelWidth=-1,t}return Object(D.d)(e,n),e.prototype.OnSearchInputRef=function(e){this.m_refSearchInput=e},e.prototype.StartSearchOnKeyPress=function(e){var t=this.state.bFriendTabSearch;this.setState({bFriendTabSearch:!0}),t&&this.m_refSearchInput&&this.m_refSearchInput.focus()},e.prototype.OnSearchInput=function(e){e.currentTarget.value!=this.state.searchString&&this.setState({searchString:e.currentTarget.value})},e.prototype.OnSearchSubmit=function(e){e.preventDefault();var t=this.GetNormalizedSearchString();if(t&&t.length){var n=this.props.friends.FriendGroupStore.all_friends.GetMembersMatchingSearch(t);n.length&&n[0].OpenChatDialog(Object(S.e)(this,e))}this.setState({searchString:""})},e.prototype.OnSearchSelection=function(){this.setState({searchString:""})},e.prototype.OnSearchKeyDown=function(e){27==e.keyCode&&(this.setState({searchString:""}),e.preventDefault(),e.currentTarget.blur(),this.setState({bFriendTabSearch:!1}),this.CollapseTabLabel())},e.prototype.OnClearSearch=function(){this.setState({searchString:""}),this.OnTabSearchClick()},e.prototype.OnSettingsClick=function(e){Object(x.a)(Object(S.e)(this,e),e.currentTarget.ownerDocument.defaultView)},e.prototype.ToggleCollapseExpand=function(e){G.f.UIStore.SetFriendsListCollapsed(Object(S.e)(this,e),!this.props.collapsed)},e.prototype.OnDoFriendsListUpdate=function(e){var t=e.currentTarget.ownerDocument.defaultView,n=S.h.GetSecondsOutOfDate(),o=Object(L.f)(n,!0);Object(r.d)(t,Object(L.c)("#Friends_ConfirmUpdate_Title"),Object(L.c)("#Friends_ConfirmUpdate_Body",o),Object(L.c)("#Friends_ConfirmUpdate_Ok")).then(function(){S.h.PerformFriendsUIUpdate()}).catch(function(){})},e.prototype.BindTabLabel=function(e){this.m_elTabLabel=e,this.UpdateWindowIcon()},e.prototype.UpdateWindowIcon=function(){if(this.m_elTabLabel&&void 0!==this.m_elTabLabel.ownerDocument.defaultView.SteamClient){var e=!1;this.props.chats.VoiceChat.IsAnyVoiceActive()&&(e=!0);var t=0<this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext).length;try{this.m_elTabLabel&&null!=this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon&&(e?this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon("voice"):t?this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon("messages"):this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon("steam"))}catch(e){}}},e.prototype.CollapseTabLabel=function(){var e=this;if(this.m_animationTabLabelCollapse&&this.m_animationTabLabelCollapse.Cancel(),this.state.bFriendTabSearch){n=1;var t=this.m_tabLabelWidth;this.setState({tabLabelWidth:n},function(){e.m_animationTabLabelCollapse=new N.b(e,{tabLabelWidth:t},{msDuration:300,timing:"sine"}),e.m_animationTabLabelCollapse.Start()})}else{var n=this.m_tabLabelWidth;this.setState({tabLabelWidth:n},function(){e.m_animationTabLabelCollapse=new N.b(e,{tabLabelWidth:1},{msDuration:300,timing:"sine"}),e.m_animationTabLabelCollapse.Start()})}},e.prototype.OnTabSearchClick=function(){this.m_tabLabelWidth<0&&(this.m_tabLabelWidth=this.m_elTabLabel.clientWidth),this.setState({bFriendTabSearch:!this.state.bFriendTabSearch}),this.CollapseTabLabel()},e.prototype.GetNormalizedSearchString=function(){return this.state.searchString&&this.state.searchString.trim().toLocaleLowerCase()},e.prototype.ToggleViewingIncomingInvites=function(){var e=this;this.setState({bViewingIncomingInvites:!this.state.bViewingIncomingInvites},function(){e.state.bViewingIncomingInvites&&(G.f.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),G.f.FriendStore.ClanStore.EnsureInitialStateForClanInvites())})},e.prototype.componentWillUpdate=function(){var e=0<G.f.FriendStore.FriendGroupStore.incoming_invites_group.member_count,t=0<G.f.FriendStore.ClanStore.clan_invites.length,n=0<G.f.FriendStore.FriendGroupStore.outgoing_invites_group.member_count;e||t||n||!this.state.bViewingIncomingInvites||this.setState({bViewingIncomingInvites:!1})},e.prototype.render=function(){var e=this.props.friends.self,t=this.GetNormalizedSearchString(),n=0<G.f.FriendStore.FriendGroupStore.incoming_invites_group.member_count,o=0<G.f.FriendStore.ClanStore.clan_invites.length,i=0<G.f.FriendStore.FriendGroupStore.outgoing_invites_group.member_count,r=G.f.FriendStore.FriendGroupStore.incoming_invites_group.member_count+G.f.FriendStore.ClanStore.clan_invites.length,a="friendRequestButton";this.state.bViewingIncomingInvites&&(a+=" friendRequestViewActive"),i&&0==r&&(a+=" friendRequestOutgoingOnly");var s=this.state.bFriendTabSearch,c="friendTab socialListTab activeTab";s&&(c+=" TabSearchActive");var l={};0<this.state.tabLabelWidth&&(l.width=this.state.tabLabelWidth+"px");var p=!1;this.props.popup&&(p=Object(S.f)(this.props.popup)!=G.a);var u=!1,m=0,d=!1,h="friendListButton friendSettingsButton friendsListNeedsUpdate no-drag";null!=S.h&&(u=S.h.BNeedsUpdate(),(m=S.h.GetSecondsOutOfDate())<432e3?u=!1:604800<m&&(h+=" friendsListVeryOutOfDate",d=!0));var f=this.props.chats.GetActiveVoiceChat(),_=!1;(this.props.chats.VoiceChat.IsAnyVoiceActive()||f)&&(_=!0),this.UpdateWindowIcon();var g=G.f.SettingsStore.FriendsSettings.bCompactFriendsList,b=this.props.collapsed,v="friendlist";return g&&(v+=" compactView"),u&&(v+=" needsUpdate"),b&&this.props.collapsible&&(v+=" collapsed"),j.createElement("div",{className:v},j.createElement("div",{className:"friendListHeaderContainer titleBarContainer"},this.props.popup&&y.a.IN_CLIENT&&j.createElement(te.a,{hideMinMax:p,popup:this.props.popup}),this.props.collapsible&&j.createElement("div",{className:"friendListCollapse no-drag"},j.createElement("div",{className:"friendListButton friendCollapseButton no-drag "+(b?"Collapsed":""),onClick:this.ToggleCollapseExpand},j.createElement(P.n,null))),j.createElement(ve,{popup:this.props.popup&&this.props.popup,currentUser:e}),j.createElement("div",{className:"friendListButtons"},u&&j.createElement("div",{className:h,onClick:this.OnDoFriendsListUpdate,title:d?Object(L.c)("#Tooltip_FriendsListUpdate_VeryOld"):Object(L.c)("#Tooltip_FriendsListUpdate")},j.createElement(P.R,null)),j.createElement("div",{className:"friendListButton friendSettingsButton no-drag",onClick:this.OnSettingsClick,title:Object(L.c)("#Tooltip_Settings")},j.createElement(P.X,null))),j.createElement(k.TransitionGroup,null,_&&j.createElement(k.CSSTransition,{key:"activeVoiceControls1",classNames:"activevoice-anim",timeout:500},j.createElement(pe,{chats:this.props.chats}))),j.createElement(O,{FavoritesStore:this.props.friends.FavoritesStore}),j.createElement("div",{className:"socialTabSearchContainer"},j.createElement("div",{className:"socialTabContainer"},j.createElement("div",{className:c},j.createElement("div",{className:"tabLabel",style:l,ref:this.BindTabLabel},Object(L.c)("#tab_friends")),j.createElement("div",{className:"friendsTabButtonsContainer"},j.createElement("div",{className:"TabSearchButton",onClick:s?null:this.OnTabSearchClick},j.createElement(k.TransitionGroup,{className:"tabSearchTransitionGroup"},s&&j.createElement(k.CSSTransition,{className:"tabSearchTransition",key:"tabSearch",classNames:"tab-search-anim",timeout:500},j.createElement("div",{className:"socialSearchContainer"},j.createElement("form",{className:"socialInputContainer"+(s?" SearchActive":""),name:"friendSearchForm",onSubmit:this.OnSearchSubmit},j.createElement("div",{className:"inputContainer no-drag"},j.createElement("input",{id:"friendSearchInputID",className:"friendSearchInput",autoFocus:!0,type:"text",name:"friendSearch",placeholder:Object(L.c)("#SearchFriends"),value:this.state.searchString,onInput:this.OnSearchInput,onKeyDown:this.OnSearchKeyDown,autoComplete:"off",ref:this.OnSearchInputRef}),j.createElement("div",{className:"friendSearchClear",onClick:this.OnClearSearch},j.createElement(P.pb,null))))))),j.createElement("div",{className:"searchIconButton",onClick:this.OnTabSearchClick,title:Object(L.c)("#Tooltip_SearchFriends")},j.createElement(P.E,null))),(n||o||i)&&j.createElement("div",{className:a,onClick:this.ToggleViewingIncomingInvites,title:Object(L.d)("#Tooltip_FriendRequest",r)},j.createElement(P.t,null),0<r&&j.createElement("div",{className:"requestsNumber"},r)),j.createElement(E.b,{href:y.a.COMMUNITY_BASE_URL+"friends/add"},j.createElement("div",{className:"friendListButton addFriendButton no-drag",title:Object(L.c)("#Tooltip_AddFriend")},j.createElement(P.a,null))))))),j.createElement("div",{className:"disconnectBlocker"})),j.createElement(Se,{friends:this.props.friends,chats:this.props.chats,searchString:t,fnOnSearchSelection:this.OnSearchSelection,onStartSearch:this.StartSearchOnKeyPress,browserContext:this.props.browserContext,bViewingIncomingInvites:this.state.bViewingIncomingInvites,onClose:this.ToggleViewingIncomingInvites}),j.createElement("div",{className:"friendListFooter"},j.createElement(be,null)))},Object(D.c)([h.a],e.prototype,"OnSearchInputRef",null),Object(D.c)([h.a],e.prototype,"StartSearchOnKeyPress",null),Object(D.c)([h.a],e.prototype,"OnSearchInput",null),Object(D.c)([h.a],e.prototype,"OnSearchSubmit",null),Object(D.c)([h.a],e.prototype,"OnSearchSelection",null),Object(D.c)([h.a],e.prototype,"OnSearchKeyDown",null),Object(D.c)([h.a],e.prototype,"OnClearSearch",null),Object(D.c)([h.a],e.prototype,"OnSettingsClick",null),Object(D.c)([h.a],e.prototype,"ToggleCollapseExpand",null),Object(D.c)([h.a],e.prototype,"OnDoFriendsListUpdate",null),Object(D.c)([h.a],e.prototype,"BindTabLabel",null),Object(D.c)([h.a],e.prototype,"CollapseTabLabel",null),Object(D.c)([h.a],e.prototype,"OnTabSearchClick",null),Object(D.c)([h.a],e.prototype,"ToggleViewingIncomingInvites",null),e=Object(D.c)([u.a],e)}(j.Component),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.render=function(){var e=y.a.COMMUNITY_BASE_URL+"groups/SteamClientBeta/discussions/3/";return G.f.IsInBeta()?j.createElement("div",{className:"betaFeedbackLabel"},Object(L.e)("#GiveFeedbackToSteam_Desc",j.createElement(E.b,{href:e,className:"betaFeedbackAnchor"}," ",Object(L.c)("#GiveFeedbackToSteam_URL")," "))):null},t}(j.Component),ge=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bShowChangeLogViolator:S.h.UIDisplayPrefs.nChangeLogDismissed<oe.Posts().length},t}return Object(D.d)(e,n),e.prototype.OpenChangeLog=function(e){var t;S.h.SetUIDisplayPref("nChangeLogDismissed",oe.Posts().length),this.setState({bShowChangeLogViolator:!1}),t=e.currentTarget.ownerDocument.defaultView,Object(V.b)(j.createElement(ie,null),t,"ChangeLog",{strTitle:Object(L.c)("#changeLog_Title"),popupWidth:640,popupHeight:680},Object(S.g)(t))},e.prototype.render=function(){var e=this.state.bShowChangeLogViolator,t=0;return e&&(t=oe.Posts().length-(S.h.UIDisplayPrefs.nChangeLogDismissed||7)),oe.Posts().length&&36288e5<Date.now()-Number(new Date(oe.Posts()[0].date))?null:j.createElement("div",{className:"changeLog"+(e?" showViolator":""),onClick:this.OpenChangeLog,title:e?Object(L.c)("#changeLog_Value_Button",t):Object(L.c)("#changeLog_Button")},j.createElement(P.W,null),e&&j.createElement("div",{className:"changeLogViolator"},t))},Object(D.c)([h.a],e.prototype,"OpenChangeLog",null),e}(j.Component),be=function(t){function e(e){return t.call(this,e)||this}return Object(D.d)(e,t),e.prototype.OnSettingsZooClick=function(e){0},e.prototype.render=function(){return j.createElement(j.Fragment,null,j.createElement("div",{className:"flexRowCentered"},!1,j.createElement(_e,null),j.createElement(ge,null)))},Object(D.c)([h.a],e.prototype,"OnSettingsZooClick",null),e=Object(D.c)([u.a],e)}(j.Component),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.OnShowContextMenu=function(e){return Object(i.a)(Object(S.e)(this,e),e)},t.prototype.ToggleSingleWindowToggle=function(){S.h.ToggleSingleWindowToggle(this.props.popup)},t.prototype.ShowCurrentUserProfile=function(e){var t=this.props.currentUser.GetCommunityProfileURL();Object(E.e)(e,t),e.stopPropagation()},t.prototype.render=function(){var e=this.props.currentUser,t="currentUserContainer "+Object(ee.d)(e.persona);G.f.FriendStore.GetUserDoNotDisturb()&&(t+=" userDoNotDisturb");var n=null;G.f.FriendStore.BIsInvisibleMode()&&(n=function(){return Object(L.c)("#PersonaStateInvisible")});var o=!1;this.props.popup&&(o=Object(S.f)(this.props.popup)!=G.a);var i=null;e.persona.HasCurrentGameRichPresence()?i=function(){return e.persona.GetCurrentGameRichPresence()}:e.persona.m_broadcastAccountId&&(i=function(){return e.GetBroadcastDescription()});var r=e.persona.is_ingame&&1==G.f.UserStore.PrivacySettings.privacy_state_ownedgames;return j.createElement("div",{className:t},j.createElement("svg",{className:"statusHeaderGlow",width:"100%",height:"132",xmlns:"http://www.w3.org/2000/svg"},j.createElement("defs",null,j.createElement("radialGradient",{id:"exampleGradient",cx:"50%",cy:"50%",r:"50%",fx:"35%",fy:"30%"},j.createElement("stop",{offset:"10%",stopColor:"gold"}),j.createElement("stop",{offset:"95%",stopColor:"green"}))),j.createElement("ellipse",{cx:"5%",cy:"28%",rx:"65%",ry:"60%",fill:"url(#exampleGradient)"})),j.createElement("div",{className:"AvatarAndUser",onContextMenu:this.OnShowContextMenu},j.createElement(Te,{friend:e,context:{chatContext:"friendslist"},onContextMenu:this.OnShowContextMenu},j.createElement("img",{className:"currentUserAvatar",src:e.persona.avatar_url_medium,onClick:this.ShowCurrentUserProfile})),j.createElement(ae.a,{className:"labelHolder",persona:e.persona,bIsSelf:!0,eFriendRelationship:e.efriendrelationship,strNickname:e.nickname,bParenthesizeNicknames:G.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames,bCompactView:G.f.SettingsStore.FriendsSettings.bCompactFriendsList,bHideSnooze:!0,renderStatus:n,renderRichPresence:i,onContextMenu:this.OnShowContextMenu,bDNDSet:G.f.FriendStore.GetUserDoNotDisturb(),bHasGamePrivacy:r})),this.props.popup&&y.a.IN_CLIENT&&j.createElement("div",{className:"title-area-icon singleWindowToggle"+(o?" inOverlay":""),title:Object(L.c)("#FriendsList_TitleArea_SingleWindowButton"),onClick:this.ToggleSingleWindowToggle},j.createElement(P.Z,null)))},Object(D.c)([h.a],t.prototype,"OnShowContextMenu",null),Object(D.c)([h.a],t.prototype,"ToggleSingleWindowToggle",null),Object(D.c)([h.a],t.prototype,"ShowCurrentUserProfile",null),t=Object(D.c)([u.a],t)}(j.Component),Se=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bScrolledFromTop:!1},t}return Object(D.d)(e,n),Object.defineProperty(e.prototype,"frame",{get:function(){return this.m_elFriendsListContent},enumerable:!0,configurable:!0}),e.prototype.OnContextMenu=function(e){var t=this.props.searchString&&0<this.props.searchString.length;this.props.bViewingIncomingInvites||t||Object(i.c)(Object(S.e)(this,e),null,e)},e.prototype.BindFriendsListContent=function(e){this.m_elFriendsListContent=e},e.prototype.OnFriendsListKeyDown=function(e){e.ctrlKey||e.altKey||e.metaKey||1<e.key.length||this.props.onStartSearch(e)},e.prototype.OnFriendsListScrollRef=function(e){this.m_elFriendsListScroll=e},e.prototype.ScrollToTop=function(){this.m_elFriendsListScroll&&(this.m_elFriendsListScroll.scrollTop=0)},e.prototype.OnScrollFriendsList=function(e){var t=10<e.currentTarget.scrollTop;t!=this.state.bScrolledFromTop&&this.setState({bScrolledFromTop:t})},e.prototype.OnAcceptClanInvite=function(e,t){var n=e.currentTarget.ownerDocument.defaultView;G.f.FriendStore.ClanStore.RespondToClanInvite(t,!0).then(function(e){e||Object(r.c)(n,Object(L.c)("#Friend_AcceptClanInvite"),Object(L.c)("#Friend_AcceptClanInvite_Error"))})},e.prototype.OnDeclineClanInvite=function(e,t){var n=e.currentTarget.ownerDocument.defaultView;G.f.FriendStore.ClanStore.RespondToClanInvite(t,!1).then(function(e){e||Object(r.c)(n,Object(L.c)("#Friend_DeclineClanInvite"),Object(L.c)("#Friend_DeclineClanInvite_Error"))})},e.prototype.render=function(){var e,o=this,t=this.props.searchString&&0<this.props.searchString.length,n=this.props.bViewingIncomingInvites,i={searchString:this.props.searchString,fnOnSearchSelection:this.props.fnOnSearchSelection};if(this.props.friends.self.is_ready)if(n){var r=G.f.FriendStore.ClanStore.clan_invites.length,a=(ne.a.InitFromAccountID(G.f.FriendStore.self.accountid),[]);if(r)for(var s=function(e){var t=e.steamid,n=void 0;n=e.BIsOGG()?y.a.COMMUNITY_BASE_URL+"app/"+e.GetOGGAppID():y.a.COMMUNITY_BASE_URL+"gid/"+t.ConvertTo64BitString(),a.push(j.createElement("div",{className:"clanInviteContainer",key:"clan_invite_"+t.GetAccountID()},j.createElement(E.b,{href:n},j.createElement("div",{className:"clanAvatar"},j.createElement("img",{className:"clanAvatarIcon",src:e.avatar_url_medium})),j.createElement("div",{className:"clanName"},e.name,j.createElement("div",{className:"clanDetails displayRow"},j.createElement("div",{className:"displayRow statMembersTotal"},j.createElement("div",{className:"statCircle"}),e.member_count," Members"),0<e.users_online&&j.createElement("div",{className:"displayRow statMembersOnline",title:Object(L.d)("#Chat_Members_Online_Tooltip",e.users_online)},j.createElement("div",{className:"statCircle"}),e.users_online),0<e.users_ingame&&j.createElement("div",{className:"displayRow statMembersInGame",title:Object(L.d)("#Chat_Members_InGame_Tooltip",e.users_ingame)},j.createElement("div",{className:"statCircle"}),e.users_ingame)))),j.createElement("div",{className:"clanActionButtons"},j.createElement("div",{className:"displayColumn",title:Object(L.c)("#FriendGroup_Tip_Accept_Invite")},j.createElement(U.B,{onClick:function(e){o.OnAcceptClanInvite(e,t)}},Object(L.c)("#Button_Accept"))),j.createElement("div",{className:"displayColumn",title:Object(L.c)("#FriendGroup_Tip_Decline_Invite")},j.createElement(U.B,{onClick:function(e){o.OnDeclineClanInvite(e,t)}},Object(L.c)("#Button_Decline"))))))},c=0,l=G.f.FriendStore.ClanStore.clan_invites;c<l.length;c++){s(l[c])}e=j.createElement(j.Fragment,null,0<r&&!t&&j.createElement(j.Fragment,null,j.createElement("div",{className:"clanInvitesGroupContainer"},j.createElement("div",{className:"clanInviteTitle"},Object(L.c)("#Friend_PendingClanInvites")),a)),j.createElement(Ie,Object(D.a)({group:this.props.friends.FriendGroupStore.incoming_invites_group,collapsed:!1},i,{onClose:this.props.onClose})),j.createElement(Ie,Object(D.a)({group:this.props.friends.FriendGroupStore.outgoing_invites_group,collapsed:!1},i,{onClose:this.props.onClose})))}else if(t)e=j.createElement(Ie,Object(D.a)({group:this.props.friends.FriendGroupStore.all_friends,collapsed:!1},i));else{var p=this.props.friends.FriendGroupStore.user_groups.map(function(e){return j.createElement(Ie,Object(D.a)({group:e,key:e.id,groupDisplayPrefs:o.props.friends.FriendGroupStore.groupDisplayPrefs},i))}),u=this.props.friends.FriendGroupStore.default_groups.map(function(e){return j.createElement(Ie,Object(D.a)({group:e,key:e.id,groupDisplayPrefs:o.props.friends.FriendGroupStore.groupDisplayPrefs},i))}),m=!1;this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext).length&&(m=!0),e=j.createElement(j.Fragment,null,m&&j.createElement("div",{className:"recentChatsGroup unreadChatsGroup"},j.createElement(Ae,{friendChatStore:this.props.chats.FriendChatStore,browserContext:this.props.browserContext}),!1),j.createElement(Oe,null),p,u)}else e=void 0;var d=G.f.SettingsStore.FriendsSettings.bCompactFriendsList;return j.createElement("div",{className:"FriendsListContent"+(d?" CompactFriendsList":""),ref:this.BindFriendsListContent},j.createElement(ce.b,null),j.createElement(Le,{browserContext:this.props.browserContext,bScrolledFromTop:this.state.bScrolledFromTop&&!t,onClick:this.ScrollToTop}),j.createElement("div",{className:"friendlistListContainer",onContextMenu:this.OnContextMenu,tabIndex:0,onKeyDown:this.OnFriendsListKeyDown,ref:this.OnFriendsListScrollRef,onScroll:this.OnScrollFriendsList},j.createElement("div",{className:"listContentContainer"},e,j.createElement("div",{className:"disconnectBlocker"}))),j.createElement(ce.a,null),j.createElement(ye,{friends:this.props.friends,chats:this.props.chats,parent:this}))},Object(D.c)([h.a],e.prototype,"OnContextMenu",null),Object(D.c)([h.a],e.prototype,"BindFriendsListContent",null),Object(D.c)([h.a],e.prototype,"OnFriendsListKeyDown",null),Object(D.c)([h.a],e.prototype,"OnFriendsListScrollRef",null),Object(D.c)([h.a],e.prototype,"ScrollToTop",null),Object(D.c)([h.a],e.prototype,"OnScrollFriendsList",null),e=Object(D.c)([u.a],e)}(j.Component),ye=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bMouseOver=!1,t.state={nChatRoomListContainerHeight:S.h.UIDisplayPrefs.nChatRoomListHeightPx,nChatRoomListContainerMaxHeight:S.h.UIDisplayPrefs.nChatRoomListHeightPx,bChatRoomListCollapsed:S.h.UIDisplayPrefs.bChatRoomListCollapsed,nChatRoomListPreCollapseHeight:S.h.UIDisplayPrefs.nChatRoomListHeightPx,bChatRoomListResizing:!1},t}return Object(D.d)(e,n),e.prototype.UpdateChatSectionSize=function(){var e=this;if(Object(re.a)(this.m_elChatSection,"m_elChatRoomListContainer not set"),this.m_bMouseOver)return this.m_iTimeoutUpdateChatSectionSize&&this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),void(this.m_iTimeoutUpdateChatSectionSize=this.m_window.setTimeout(function(){e.m_iTimeoutUpdateChatSectionSize=void 0,e.UpdateChatSectionSize()},500));var t=this.m_elChatSection.maximumHeight,n=this.m_elChatSection.minimumHeight;if(this.m_elChatRoomListContainer.style.minHeight=n+"px",this.state.nChatRoomListContainerMaxHeight>t){this.m_animationChatSectionShrink&&this.m_animationChatSectionShrink.Cancel();var o=this.state.nChatRoomListContainerMaxHeight,i=t;this.setState({nChatRoomListContainerMaxHeight:o},function(){e.m_animationChatSectionShrink=new N.b(e,{nChatRoomListContainerHeight:Object(B.a)(e.state.nChatRoomListContainerHeight,n,t),nChatRoomListContainerMaxHeight:i},{msDuration:300,timing:"sine"}),e.m_animationChatSectionShrink.Start()})}else this.setState({nChatRoomListContainerMaxHeight:t})},e.prototype.OnChatSectionMutation=function(e,t){var n=this;this.m_iTimeoutUpdateChatSectionSize&&this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),this.m_iTimeoutUpdateChatSectionSize=this.m_window.setTimeout(function(){n.m_iTimeoutUpdateChatSectionSize=void 0,n.UpdateChatSectionSize()},1e3)},e.prototype.BindChatRoomTitleContainer=function(e){this.m_elChatRoomTitleContainer=e},e.prototype.BindChatRoomListContainer=function(e){e&&(this.m_elChatRoomListContainer=e,this.UpdateChatSectionSize())},e.prototype.BindChatSection=function(e){this.m_observerChatSection&&(this.m_observerChatSection.disconnect(),this.m_observerChatSection=null),e&&(this.m_elChatSection=e,this.m_window=e.div.ownerDocument.defaultView,this.m_observerChatSection=new MutationObserver(this.OnChatSectionMutation),this.m_observerChatSection.observe(e.div,{childList:!0,subtree:!0}))},e.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.m_iGrabberBarInitialGrabOffset=e.clientY-this.m_elChatRoomTitleContainer.getBoundingClientRect().top,this.setState({nChatRoomListPreCollapseHeight:S.h.UIDisplayPrefs.nChatRoomListHeightPx}),t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterChatRoomListDragEvents)},e.prototype.OnGrabberTouchStart=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.m_iGrabberBarInitialGrabOffset=e.touches[0].clientY-this.m_elChatRoomTitleContainer.getBoundingClientRect().top,t.addEventListener("touchmove",this.HandleTouchMove),t.addEventListener("touchend",this.UnregisterChatRoomListDragEvents)},e.prototype.HandleTouchMove=function(e){1<=e.touches.length&&this.InternalAdjustChatRoomListContainerOnDrag(e.touches[0].clientY)},e.prototype.HandleMouseMove=function(e){this.InternalAdjustChatRoomListContainerOnDrag(e.clientY)},e.prototype.OnMouseEnter=function(e){this.m_bMouseOver=!0},e.prototype.OnMouseLeave=function(e){this.m_bMouseOver=!1},e.prototype.InternalAdjustChatRoomListContainerOnDrag=function(e){if(this.props.parent&&this.props.parent.frame){var t=this.props.parent.frame.getBoundingClientRect(),n=t.top,o=this.m_iGrabberBarInitialGrabOffset,i=t.height-(this.m_elChatRoomTitleContainer.getBoundingClientRect().height-o),r=e-n;r<0?r=0:i<r&&(r=i);var a=i-r;a=Object(B.a)(a,this.m_elChatSection.minimumHeight,this.m_elChatSection.maximumHeight),this.setState({nChatRoomListContainerHeight:a}),this.setState({bChatRoomListCollapsed:!(0<this.state.nChatRoomListContainerHeight)}),S.h.SetUIDisplayPref("bChatRoomListCollapsed",!(0<this.state.nChatRoomListContainerHeight)),this.setState({bChatRoomListResizing:!0})}},e.prototype.ToggleChatsList=function(){this.state.bChatRoomListCollapsed&&this.setState({nChatRoomListContainerHeight:this.state.nChatRoomListPreCollapseHeight}),this.setState({bChatRoomListCollapsed:!this.state.bChatRoomListCollapsed}),S.h.SetUIDisplayPref("bChatRoomListCollapsed",!this.state.bChatRoomListCollapsed)},e.prototype.UnregisterChatRoomListDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("touchmove",this.HandleTouchMove),e.view.removeEventListener("mouseup",this.UnregisterChatRoomListDragEvents),e.view.removeEventListener("touchend",this.UnregisterChatRoomListDragEvents),this.state.nChatRoomListContainerHeight<1?S.h.SetUIDisplayPref("nChatRoomListHeightPx",this.state.nChatRoomListPreCollapseHeight):(this.setState({nChatRoomListPreCollapseHeight:this.state.nChatRoomListContainerHeight}),S.h.SetUIDisplayPref("nChatRoomListHeightPx",this.state.nChatRoomListContainerHeight)),this.m_iGrabberBarInitialGrabOffset=null,this.setState({bChatRoomListResizing:!1})},e.prototype.OnCreateChatRoom=function(e){Object(F.c)(Object(S.e)(this,e),e.currentTarget.ownerDocument.defaultView)},e.prototype.render=function(){var e={height:this.state.bChatRoomListCollapsed?0:this.state.nChatRoomListContainerHeight+"px",maxHeight:this.state.bChatRoomListCollapsed?0:this.state.nChatRoomListContainerMaxHeight+"px"},t=this.props.chats.currentChatRoomGroups,n=!1,o="FriendsListChatSection ChatRoomListContainerParent";if(this.props.chats.chat_group_list_ready)for(var i=0,r=t;i<r.length;i++){r[i].hasUnreadChatMessage&&(0,n=!0)}return this.state.bChatRoomListCollapsed&&(o+=" Collapsed"),this.state.bChatRoomListResizing&&(o+=" ChatListResizing"),n&&(o+=" HasUnreadChats"),j.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},j.createElement("div",{className:"friendsListSectionTitle chatSectionTitle",ref:this.BindChatRoomTitleContainer},this.state.bChatRoomListCollapsed&&n&&j.createElement(f.b,null),j.createElement("div",{className:"ToggleGroupChatList",onClick:this.ToggleChatsList,title:this.state.bChatRoomListCollapsed?Object(L.c)("#Tooltip_ChatsExpand"):Object(L.c)("#Tooltip_ChatsCollapse")},j.createElement(P.n,{angle:-90})),j.createElement("div",{className:"voiceRoomDragBar",onMouseDown:this.OnGrabberMouseDown,onTouchStart:this.OnGrabberTouchStart},j.createElement("div",{className:"groupChatSectionTitle"},Object(L.c)("#tab_chats"))),j.createElement("button",{className:"createChatRoomButton",onClick:this.OnCreateChatRoom,title:Object(L.c)("#Tooltip_CreateGroupChat")},j.createElement(P.K,null)),j.createElement("div",{className:"disconnectBlocker"})),j.createElement(ce.b,null),j.createElement("div",{className:"chatRoomListContainer",style:e,ref:this.BindChatRoomListContainer},j.createElement(f.a,{friends:this.props.friends,chats:this.props.chats,ref:this.BindChatSection})),j.createElement(ce.a,null))},Object(D.c)([h.a],e.prototype,"UpdateChatSectionSize",null),Object(D.c)([h.a],e.prototype,"OnChatSectionMutation",null),Object(D.c)([h.a],e.prototype,"BindChatRoomTitleContainer",null),Object(D.c)([h.a],e.prototype,"BindChatRoomListContainer",null),Object(D.c)([h.a],e.prototype,"BindChatSection",null),Object(D.c)([h.a],e.prototype,"OnGrabberMouseDown",null),Object(D.c)([h.a],e.prototype,"OnGrabberTouchStart",null),Object(D.c)([h.a],e.prototype,"HandleTouchMove",null),Object(D.c)([h.a],e.prototype,"HandleMouseMove",null),Object(D.c)([h.a],e.prototype,"OnMouseEnter",null),Object(D.c)([h.a],e.prototype,"OnMouseLeave",null),Object(D.c)([h.a],e.prototype,"ToggleChatsList",null),Object(D.c)([h.a],e.prototype,"UnregisterChatRoomListDragEvents",null),Object(D.c)([h.a],e.prototype,"OnCreateChatRoom",null),e=Object(D.c)([u.a],e)}(j.Component),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.GetDragDropProps=function(e){void 0===e&&(e=!0);var t={rgAcceptedTypes:[]};return e&&(t.fnDragEnter=this.OnDragEnter,t.fnDragLeave=this.OnDragLeave,t.fnDrop=this.OnDrop,t.rgAcceptedTypes=["friend"]),t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t},t.prototype.OnDragStart=function(e){var t=S.h.DragDropManager.GetDragData();if(t&&"friend"==t.type){var n=t;n.group=this.GetGroup(),this.setState({friendDraggedOut:n.friend})}},t.prototype.OnDragEnd=function(e){this.state.friendDraggedOut&&this.setState({friendDraggedOut:null})},t.prototype.OnDragEnter=function(e,t){Object(re.a)(e&&"friend"==e.type,"Invalid data type passed to FriendGroupDragDrop.OnDragEnter");var n=e,o=n.friend,i=n.group,r=this.GetGroup();return(!r||i==r||!this.GetGroup().HasMember(o.accountid)||n.is_favorite||this.GetGroup().accepts_group_removals&&i.modifiable)&&o.is_friend&&this.state.friendDrag!=o&&this.setState({friendDrag:o}),!0},t.prototype.ResetDragState=function(){this.setState({friendDrag:null})},t.prototype.OnDragLeave=function(){this.state.friendDrag&&this.ResetDragState()},t.prototype.OnDrop=function(e,t){var n=this;Object(re.a)(e&&"friend"==e.type,"Invalid data type passed to FriendGroupDragDrop.OnDrop");var o=e;if(o.group==this.GetGroup())this.setState({friendDraggedOut:null});else{var i=this.state.friendDrag,r=function(){n.state.friendDrag&&n.state.friendDrag==i&&n.ResetDragState()};this.PerformDropAction(o).then(r).catch(r)}},Object(D.c)([h.a],t.prototype,"OnDragStart",null),Object(D.c)([h.a],t.prototype,"OnDragEnd",null),Object(D.c)([h.a],t.prototype,"OnDragEnter",null),Object(D.c)([h.a],t.prototype,"OnDragLeave",null),Object(D.c)([h.a],t.prototype,"OnDrop",null),t}(j.Component),Oe=Object(u.a)(function(e){if(!G.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame)return null;var t=G.f.FriendStore.FriendGroupStore.game_groups,n=t.map(function(e){return j.createElement(Me,{key:e.id,group:e,bSingletonGroup:!1,bOtherGroups:!0,groupDisplayPrefs:G.f.FriendStore.FriendGroupStore.groupDisplayPrefs})}),o=G.f.FriendStore.FriendGroupStore.singleton_game_group;return o&&n.push(j.createElement(Me,{key:"singleton",group:o,bSingletonGroup:!0,bOtherGroups:0<t.length,groupDisplayPrefs:G.f.FriendStore.FriendGroupStore.groupDisplayPrefs})),j.createElement(j.Fragment,null,n)}),Ie=function(n){function e(e){var t=n.call(this,e)||this;return t.m_actions=p.x.map(),t.state={bLocalCollapsed:t.props.collapsed,bSortOfflineByRecent:!1},t}return Object(D.d)(e,n),e.prototype.GetGroup=function(){return this.props.group},e.prototype.PerformDropAction=function(e){var t=e.friend,n=e.group,o=this.props.group;return e.is_favorite||S.h.DragDropManager.SetDropConsumed(),G.f.FriendStore.FriendGroupStore.TransferFriendFromToGroup(t,n,o)},e.prototype.ToggleCollapsed=function(){this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(this.props.group.unique_id):this.setState({bLocalCollapsed:!this.state.bLocalCollapsed})},e.prototype.IsCollapsed=function(){return this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.GetUserGroupCollapsed(this.props.group.unique_id):this.state.bLocalCollapsed},e.prototype.IsInviteGroup=function(){return this.props.group.m_eDisplayType==T.c.eIncomingInvites},e.prototype.OnContextMenu=function(e){(this.props.group.modifiable||this.props.group.accepts_group_removals)&&Object(i.c)(Object(S.e)(this,e),this.props.group,e)},e.prototype.OnFriendSelected=function(e){this.props.friendSelectAction?this.props.friendSelectAction(e):(e.OpenChatDialog(Object(S.e)(this)),this.props.fnOnSearchSelection&&this.props.fnOnSearchSelection())},e.prototype.OnAcceptInvite=function(e,t){Object(re.a)(this.IsInviteGroup(),"accept invite on non-invite group");var n=this.m_actions.get(t.accountid);n&&"accept"==n.action?this.m_actions.delete(t.accountid):this.m_actions.set(t.accountid,{friend:t,action:"accept"})},e.prototype.OnDeclineInvite=function(e,t){Object(re.a)(this.IsInviteGroup(),"decline invite on non-invite group");var n=this.m_actions.get(t.accountid);!n||"decline"!=n.action&&"block"!=n.action?this.m_actions.set(t.accountid,{friend:t,action:"decline"}):this.m_actions.delete(t.accountid)},e.prototype.OnBlockInvite=function(e,t){Object(re.a)(this.IsInviteGroup(),"block invite on non-invite group"),e?this.m_actions.set(t.accountid,{friend:t,action:"block"}):this.m_actions.set(t.accountid,{friend:t,action:"decline"})},e.prototype.AcceptInvite=function(t,n){G.f.FriendStore.SendFriendInvite(n).then(function(e){3!=e&&Object(r.c)(t,Object(L.c)("#Friend_Menu_AddToFriendsList"),Object(L.c)("#Friend_InviteError",n.display_name))})},e.prototype.DeclineInvite=function(t,n){G.f.FriendStore.RemoveFriend(n).then(function(e){1!=e&&Object(r.c)(t,Object(L.c)("#Friend_Menu_IgnoreIncomingInvite"),Object(L.c)("#Friend_IgnoreIncomingInvite_Error",n.display_name))})},e.prototype.BlockInvite=function(t,n){G.f.FriendStore.BlockPlayer(n).then(function(e){5!=e&&Object(r.c)(t,Object(L.c)("#Friend_Menu_BlockIncomingInvite"),Object(L.c)("#Friend_BlockIncomingInvite_Error",n.display_name))})},e.prototype.OnConfirmChanges=function(e){var t=this;Object(re.a)(this.IsInviteGroup(),"confirm changes on non-invite group");var n=e.currentTarget.ownerDocument.defaultView;this.m_actions.forEach(function(e){"accept"==e.action?t.AcceptInvite(n,e.friend):"decline"==e.action?t.DeclineInvite(n,e.friend):"block"==e.action?t.BlockInvite(n,e.friend):console.log("unknown action "+e.action)})},e.prototype.OnIgnoreAllInvites=function(e){var o=this;Object(re.a)(this.IsInviteGroup(),"ignore all invites on non-invite group");var i=e.currentTarget.ownerDocument.defaultView;Object(r.d)(i,Object(L.c)("#FriendGroup_ConfirmAllIgnore_Title"),Object(L.c)("#FriendGroup_ConfirmAllIgnore_Body"),Object(L.c)("#FriendGroup_ConfirmAllIgnore_OK")).then(function(){for(var e=0,t=o.props.group.member_list;e<t.length;e++){var n=t[e];o.DeclineInvite(i,n)}}).catch(function(){})},e.prototype.OnCloseInvites=function(){Object(re.a)(this.IsInviteGroup(),"close invites on non-invite group"),this.props.onClose()},e.prototype.ToggleOfflineSortMethod=function(){this.setState({bSortOfflineByRecent:!this.state.bSortOfflineByRecent})},e.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.friendGroup==this.props.group||(this.m_FriendRenderContext={friendGroup:this.props.group,chatContext:"friendslist"}),this.m_FriendRenderContext},e.prototype.render=function(){var s=this,e=this.props.searchString&&0<this.props.searchString.length,t=e,n=this.IsCollapsed()&&!e&&!this.state.friendDrag,c=[],l=this.IsInviteGroup(),o=this.props.group.m_eDisplayType==T.c.eOfflineOnly,i=!1;if(!n){var p=!1,r=void 0;if(r=this.props.searchString&&this.props.searchString.length?this.props.group.GetMembersMatchingSearch(this.props.searchString):this.props.group.member_list,this.state.friendDrag&&(this.props.group.HasMember(this.state.friendDrag.accountid)?p=!0:r=r.concat(this.state.friendDrag).sort(C.b.DefaultFriendSortComparator)),o&&this.state.bSortOfflineByRecent&&(r=this.props.group.member_list_unsorted.slice().sort(C.b.FriendSortByLastSeenComparator),i=!0),l){var a=G.f.FriendStore.FriendGroupStore.incoming_invites_group;r=r.slice().sort(function(e,t){var n=a.map_steamid_to_mutual_friends.get(e.steamid64),o=a.map_steamid_to_mutual_friends.get(t.steamid64),i=(n?n.size:0)-(o?o.size:0);return 0<i||0==i&&e.accountid>t.accountid?-1:1})}var u=null;!e&&this.props.group.should_filter_categorized_friends&&(u=G.f.FriendStore.FriendGroupStore.categorized_friend_set);for(var m=function(t){if(d.props.setExcludedFriends&&d.props.setExcludedFriends.has(t.accountid))return"continue";if(u&&u.has(t.accountid))return"continue";var e=4==t.efriendrelationship,n=d.state.friendDrag!=t||p?"":"dropGhost";d.state.friendDraggedOut==t&&d.state.friendDrag!=t&&(n+=" dragOriginGhost");var o=void 0,i=void 0,r=void 0;if(l){var a=d.m_actions.get(t.accountid);o=a&&"accept"==a.action?"bright":"dim",i=!a||"decline"!=a.action&&"block"!=a.action?"dim":"bright",r=!a||"decline"!=a.action&&"block"!=a.action?"":" declined",a&&"accept"==a.action?n+="bright":!a||"decline"!=a.action&&"block"!=a.action||(n+="dim")}c.push(j.createElement(k.CSSTransition,{className:l?"friendInviteContainer"+r:"friendCategoryContainer",key:t.accountid,classNames:"friend-anim",timeout:320},j.createElement("div",null,j.createElement(Ge,Object(D.a)({friend:t,key:t.accountid,className:n,context:d.GetFriendRenderContext(),action:e?function(){}:d.OnFriendSelected},d.props.friendProps,{bFriendsListEntry:!0})),l&&j.createElement("div",{className:"friendInviteButtons"},j.createElement("div",{className:"friendInviteButton acceptFriendInvite "+o,onClick:function(e){return s.OnAcceptInvite(e,t)},title:Object(L.c)("#FriendGroup_Tip_Accept")},j.createElement(P.h,null)),j.createElement("div",{className:"friendInviteButton declineFriendInvite "+i,onClick:function(e){return s.OnDeclineInvite(e,t)},title:Object(L.c)("#FriendGroup_Tip_Decline")},j.createElement(P.pb,null))),l&&j.createElement("div",{className:"friendInviteBlockContainer"},j.createElement(U.e,{onChange:function(e){return s.OnBlockInvite(e,t)}}),j.createElement("div",{className:"displayColumn"},j.createElement("div",{className:"blockCommunicationLabel"},Object(L.c)("#FriendGroup_IncomingInvites_Block")),j.createElement("div",{className:"blockCommunicationLabel subtitle"},Object(L.c)("#FriendGroup_IncomingInvites_Block_desc")))))))},d=this,h=0,f=r;h<f.length;h++){m(f[h])}}var _="friendGroup",g=!1,b=!1;if(t&&(_+=" noTransitions"),this.props.group.modifiable?(_+=" taggedGroup ",g=!0):this.props.group.m_eDisplayType==T.c.eOnlineOnlyNotInGame?(_+=" onlineFriends ",!0):this.props.group.m_eDisplayType==T.c.eOfflineOnly?(_+=" offlineFriends ",b=!0):this.IsInviteGroup()&&(_+=" friendRequests "),e&&(!c||!c.length))return j.createElement("div",{className:"friendSearchNoResultsContainer"},j.createElement("div",null,Object(L.c)("#FriendGroup_Search_NoResults",this.props.searchString)),j.createElement("div",{className:"searchSteamSuggestion"},Object(L.c)("#FriendGroup_Search_CantFind")),j.createElement(E.b,{href:y.a.COMMUNITY_BASE_URL+"search/users"},Object(L.c)("#FriendGroup_Search_Link")));if(0==c.length&&!this.IsCollapsed())return null;var v=0!=this.m_actions.size,S="SortByRecent";return i&&(S+=" Recent"),n&&(S+=" Collapsed"),j.createElement(R.a,Object(D.a)({className:_},this.GetDragDropProps(this.props.group.modifiable||this.props.group.accepts_group_removals)),j.createElement("div",{className:"groupHeaderContainer"},!e&&j.createElement("div",{className:"groupName"+(n?" Collapsed":""),onClick:this.ToggleCollapsed,onContextMenu:this.OnContextMenu},j.createElement("div",{className:"ExpandPlusMinus"},j.createElement(P.P,null)),this.props.group.icon_url&&j.createElement("img",{className:"groupIcon",src:this.props.group.icon_url}),this.props.group.name,!e&&j.createElement("span",{className:this.IsCollapsed()?"groupCount collapsed":"groupCount"},"(",this.props.group.member_count,")"),g&&j.createElement("hr",null)),b&&j.createElement("div",{className:S,onClick:this.ToggleOfflineSortMethod,title:i?Object(L.c)("#FriendGroup_Tip_SortByRecent"):Object(L.c)("#FriendGroup_Tip_SortByAlphabet")},j.createElement(P.ab,null))),j.createElement(k.TransitionGroup,{className:"groupList",enter:!t,exit:!t},c,l&&j.createElement(k.CSSTransition,{key:"inviteButtons",classNames:"opacityfade-anim",timeout:320},j.createElement("div",{className:"confirmInviteRequestContainer"},j.createElement("div",{className:"confirmInviteRequestActions"},v?j.createElement("div",{className:"confirmInviteButton confirmInvites",onClick:this.OnConfirmChanges},Object(L.c)("#FriendGroup_ConfirmInvites")):j.createElement("div",{className:"confirmInviteButton confirmInvites dim"},Object(L.c)("#FriendGroup_ConfirmInvites")),j.createElement("div",{className:"confirmInviteButton ignoreAllRequests",onClick:this.OnIgnoreAllInvites},Object(L.c)("#FriendGroup_AllIgnore"))),j.createElement("div",{className:"cancelAddFriends",onClick:this.OnCloseInvites,title:Object(L.c)("#FriendGroup_Close")},j.createElement(P.b,{angle:-90}))))),g&&j.createElement("div",{className:"dropTargetBox"}))},Object(D.c)([h.a],e.prototype,"ToggleCollapsed",null),Object(D.c)([h.a],e.prototype,"OnContextMenu",null),Object(D.c)([h.a],e.prototype,"OnFriendSelected",null),Object(D.c)([h.a],e.prototype,"OnAcceptInvite",null),Object(D.c)([h.a],e.prototype,"OnDeclineInvite",null),Object(D.c)([h.a],e.prototype,"OnBlockInvite",null),Object(D.c)([h.a],e.prototype,"OnConfirmChanges",null),Object(D.c)([h.a],e.prototype,"OnIgnoreAllInvites",null),Object(D.c)([h.a],e.prototype,"OnCloseInvites",null),Object(D.c)([h.a],e.prototype,"ToggleOfflineSortMethod",null),e=Object(D.c)([u.a],e)}(Ce);function Ee(e,t,n){return Object(w.a)(j.createElement(we,{browserContext:e,appid:t,ownerWindow:n.currentTarget.ownerDocument.defaultView}),n)}var we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.render=function(){return j.createElement(M.c,null,j.createElement(i.d,{unAppID:this.props.appid,bShowLargeHeader:!0}))},t}(j.PureComponent),Me=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bLocalCollapsed:t.props.collapsed},t}return Object(D.d)(e,n),e.prototype.GetGroup=function(){return this.props.group},e.prototype.PerformDropAction=function(e){return Promise.reject("FriendGameGroups do not accept drops")},e.prototype.ToggleCollapsed=function(){this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(this.props.group.unique_id):this.setState({bLocalCollapsed:!this.state.bLocalCollapsed})},e.prototype.IsCollapsed=function(){return this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.GetUserGroupCollapsed(this.props.group.unique_id):this.state.bLocalCollapsed},e.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.friendGroup==this.props.group||(this.m_FriendRenderContext={friendGroup:this.props.group,chatContext:"friendslist"}),this.m_FriendRenderContext},e.prototype.OnShowHeaderContextMenu=function(e){var t=this.props.group.id;t&&(G.f.AppInfoStore.GetAppInfo(t).is_valid&&Ee(Object(S.e)(this,e),t,e))},e.prototype.render=function(){if(this.props.bSingletonGroup&&0==this.props.group.unfiltered_count)return null;var e=[];if(!this.IsCollapsed()){var t=this.props.group.member_list,n=new Map,o=new Map,i=new Map;if(!this.props.bSingletonGroup){for(var r="",a=null,s=0,c=t;s<c.length;s++){var l=c[s];a&&l.persona.player_group!=r&&n.set(a.accountid,"lastInGroup"),l.persona.player_group&&(i.set(l.persona.player_group,l.persona.player_group_size),o.has(l.persona.player_group)?o.set(l.persona.player_group,o.get(l.persona.player_group)+1):o.set(l.persona.player_group,1),a=(l.persona.player_group!=r?(n.set(l.accountid,"firstInGroup"),r=l.persona.player_group):n.set(l.accountid,"inGroup"),l))}a&&n.set(a.accountid,"lastInGroup")}for(var p=!this.props.bSingletonGroup&&this.props.group.id!=T.d,u=null,m=0,d=t;m<d.length;m++){l=d[m];var h="";this.state.friendDraggedOut==l&&this.state.friendDrag!=l&&(h+=" dragOriginGhost");var f=!1;if(n.has(l.accountid)){f=!0;var _=n.get(l.accountid);if("lastInGroup"==_){var g=o.get(l.persona.player_group),b=i.get(l.persona.player_group);if(b<=1&&1==g)_="";else if(b&&g<b){var v=!1;G.f.FriendStore.self.persona.player_group==l.persona.player_group&&(v=!0);var S=b-g,y=b-g-(v?1:0),C="oneDigit";10<=S&&S<100?C="twoDigits":100<=S&&(C="manyDigits");var O=1==y?"#FriendGroup_PlayerGroupFooter_Label_Singular":"#FriendGroup_PlayerGroupFooter_Label";v&&(O=0==y?"#FriendGroup_PlayerGroupFooter_Label_PlusYouOnly":1==y?"#FriendGroup_PlayerGroupFooter_Label_PlusYou_Singular":"#FriendGroup_PlayerGroupFooter_Label_PlusYou"),_=1==g?"firstInGroup":"inGroup",u=j.createElement(k.CSSTransition,{key:l.persona.player_group+"_footer",classNames:"friend-anim",timeout:320},j.createElement("div",{className:"SteamPlayerGroupFooter lastInGroup",draggable:!1},j.createElement("div",{className:"SteamPlayerGroupLines"}),j.createElement("div",{className:"SteamPlayerGroupFooterCount "+C},j.createElement("div",{className:"count"},"+",S)),j.createElement("div",{className:"SteamPlayerGroupFooterLabel"},Object(L.c)(O,y))))}}h+=" "+_}var I=void 0;this.props.bSingletonGroup&&(I=j.createElement(De,{appid:l.persona.m_unGamePlayedAppID})),h+=" "+A.a.hoverClass,e.push(j.createElement(k.CSSTransition,{key:l.accountid,classNames:"friend-anim",timeout:320},j.createElement(Ge,{friend:l,key:l.accountid,bHideGameName:p,className:h,context:this.GetFriendRenderContext(),bInGroup:f,bFriendsListEntry:!0,listStatusIndicatorLeft:I}))),u&&e.push(u)}}var E="friendGroup gameGroup",w=this.props.group.name,M=null;return this.props.bSingletonGroup&&(E+=" OtherGamesGroup",M=this.props.bOtherGroups?Object(L.c)("#FriendGroup_InGame_Others"):Object(L.c)("#FriendGroup_InGame")),j.createElement(R.a,Object(D.a)({className:E},this.GetDragDropProps(this.props.group.modifiable||this.props.group.accepts_group_removals)),j.createElement("div",{className:"groupName"+(this.IsCollapsed()?" Collapsed":""),onClick:this.ToggleCollapsed,onContextMenu:this.OnShowHeaderContextMenu},j.createElement("div",{className:"gameGroupContainer"},j.createElement("div",{className:"ExpandPlusMinus"},j.createElement(P.P,null)),M,this.props.group.icon_url&&j.createElement("img",{className:"groupIcon",src:this.props.group.icon_url})),w,j.createElement("span",{className:this.IsCollapsed()?"groupCount collapsed":"groupCount"},"(",this.props.group.member_count,")"),j.createElement("hr",null)),j.createElement(k.TransitionGroup,{className:this.IsCollapsed()?"friendsContainer groupCollapsed":"friendsContainer"},e))},Object(D.c)([h.a],e.prototype,"ToggleCollapsed",null),Object(D.c)([h.a],e.prototype,"OnShowHeaderContextMenu",null),e=Object(D.c)([u.a],e)}(Ce),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.OnShowGameIconContextMenu=function(e){Ee(Object(S.e)(this,e),this.props.appid,e)},t.prototype.render=function(){var e=0!=this.props.appid?G.f.AppInfoStore.GetAppInfo(this.props.appid):null;return e&&e.is_valid?j.createElement("div",{className:"FriendInGameIcon",onContextMenu:this.OnShowGameIconContextMenu},j.createElement("img",{className:"gameIcon",alt:"",src:e.icon_url})):j.createElement("div",{className:"FriendInGameIcon"},j.createElement("div",{className:"FriendInGameIcon_NA"},"N/A"))},Object(D.c)([h.a],t.prototype,"OnShowGameIconContextMenu",null),t=Object(D.c)([u.a],t)}(j.Component),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.OnContextMenu=function(e){if(!this.props.disableContextMenu){var t=void 0;if(this.props.onContextMenu)t=this.props.onContextMenu(e);else t=S.h.FriendHoverStore.GetHover(this.props.friend).OnContextMenu(this.props.context,e);t&&this.props.onContextMenuShown&&this.props.onContextMenuShown(t)}},t.prototype.componentWillUnmount=function(){S.h.FriendHoverStore.GetHover(this.props.friend).HideByElement(m.findDOMNode(this))},t.prototype.render=function(){var e=j.Children.only(this.props.children);if(e){var t=this.props,n=S.h.FriendHoverStore.GetHover(t.friend);return j.cloneElement(e,{onMouseEnter:function(e){return n.Show(e,t.context)},onMouseLeave:n.Hide,onContextMenu:this.OnContextMenu})}return this.props.children},Object(D.c)([h.a],t.prototype,"OnContextMenu",null),t}(j.Component),Ge=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bActive:!1},t}return Object(D.d)(e,n),e.prototype.OnDoubleClick=function(e){this.RunAction(!0,e)},e.prototype.OnClick=function(e){this.RunAction(!1,e)},e.prototype.RunAction=function(e,t){!this.props.bSingleClickActivate==e&&(this.props.action?this.props.action(this.props.friend):this.props.noActions||this.props.friend.OpenChatDialog(Object(S.e)(this,t)))},e.prototype.OnDragStart=function(e){e.dataTransfer.setData("text/plain",this.props.friend.persona.m_strPlayerName),e.dataTransfer.setData("text/steamid",this.props.friend.persona.m_steamid.ConvertTo64BitString()),this.props.friend.is_friend?S.h.DragDropManager.StartDrag({type:"friend",source:this.props.context.chatContext,friend:this.props.friend,sourceContext:this.props.context}):S.h.DragDropManager.StartDrag({type:"nonfriend",source:this.props.context.chatContext,friend:this.props.friend,sourceContext:this.props.context}),S.h.FriendHoverStore.GetHover(this.props.friend).HideAllInstances()},e.prototype.OnDragEnd=function(e){S.h.DragDropManager.EndDrag()},e.prototype.OnShowContextMenu=function(e){var t=Object(i.b)(Object(S.e)(this,e),this.props.context,this.props.friend,e);t&&this.OnContextMenuShown(t)},e.prototype.OnContextMenuShown=function(e){var t=this;this.setState({bActive:!0}),e.SetOnHideCallback(function(){t.setState({bActive:!1})})},e.prototype.render=function(){var e=this.props.friend;if(e.LoadIfNecessary(),!e.is_ready)return j.createElement("div",null);var t=G.f.CMInterface.steamid.GetAccountID()==e.accountid,n=null,o=0;this.props.showVoiceLevel&&(o=G.f.VoiceStore.get_volume(e.accountid));var i,r={className:"friend "+Object(ee.d)(e.persona)};if(this.props.className&&(r.className+=" "+this.props.className),this.props.bFriendsListEntry&&(r.className+=" friendStatusHover"),t){var a=G.f.VoiceStore.IsAttemptingInitialConnection(),s=G.f.VoiceStore.HasBeenAttemptingOverTwoSeconds(),c=G.f.VoiceStore.IsAttemptingReconnect(),l=Object(L.c)("#VoiceChatConnectingHelp"),p=null;s?p=Object(L.c)("#VoiceChatConnecting"):c&&(p=Object(L.c)("#VoiceChatReconnecting")),p&&(n=t?function(){return j.createElement("a",{target:"_blank",title:l,href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},p)}:function(){return p});var u="";a&&(u+=" connecting"),s&&(u+=" slowconnecting"),c&&(u+=" reconnecting"),r.className+=u}if(this.props.noActions&&!this.props.action||(r.onDoubleClick=this.OnDoubleClick,r.onClick=this.OnClick),this.props.noActions||this.props.disableContextMenu||(r.onContextMenu=this.OnShowContextMenu),this.props.noActions||this.props.notDraggable||(r.onDragStart=this.OnDragStart,r.onDragEnd=this.OnDragEnd,r.draggable=!0),this.props.children)i=j.createElement("div",Object(D.a)({},r),this.props.children);else{var m={};if(this.props.showVoiceLevel&&1!=o){var d=Math.min(3.2*o,1),h=Math.max(0,100*d);h=Math.round(10*h)/10,m.height=h+"%",m.top="auto",1<h&&(r.className+=" speaking")}0;var f=void 0;this.props.context&&this.props.context.group&&(f=this.props.context.group.GetMemberPartyBeacon(e.accountid))&&(r.className+=" partyBeacon"),this.state.bActive&&(r.className+=" Friend_ContextMenuActive");var _=G.f.VoiceStore.GetPerUserMuting(e.accountid),g=j.createElement(I.b,{persona:e.persona,size:this.props.avatarQualityFull?"Large":"Medium",statusStyle:m},this.props.bInVoiceList&&_&&j.createElement(P.nb,null));this.props.noActions||(g=j.createElement(Te,{friend:e,context:this.props.context,disableContextMenu:this.props.disableContextMenu,onContextMenuShown:this.OnContextMenuShown},g));var b=this.props.context&&"chatmemberlist"==this.props.context.chatContext,v="";if(2==e.efriendrelationship&&!b){var S,y,C=G.f.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(e.steamid64);void 0===C?(G.f.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),y=Object(L.c)("#FriendGroup_NoMutualFriends"),v="noMutualFriends"):(y=Object(L.d)("#FriendGroup_YesMutualFriends",C.size),S=C.size),n=function(){return j.createElement("span",{className:"inviteLabel"},j.createElement("span",{className:"mutualFriendNumber"},S&&S+" "),y)}}var O=null;e.persona.HasCurrentGameRichPresence()?O=function(){return e.persona.GetCurrentGameRichPresence()}:e.persona.m_broadcastAccountId&&(O=function(){return e.GetBroadcastDescription()}),i=j.createElement("div",Object(D.a)({},r),this.props.bInGroup&&j.createElement("div",{className:"SteamPlayerGroupLines"}),this.props.bInVoiceList&&j.createElement(Re,{friend:e}),this.props.listStatusIndicatorLeft,g,!this.props.bHideStatusInfo&&j.createElement(ae.a,{className:Object(se.a)("labelHolder",v),persona:e.persona,eFriendRelationship:e.efriendrelationship,bIsSelf:G.f.FriendStore.self==e,strNickname:e.nickname,bParenthesizeNicknames:G.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames,renderStatus:n,renderRichPresence:O,bHideGameName:this.props.bHideGameName,bHideEnhancedRichPresenceLabel:this.props.bHideEnhancedRichPresenceLabel,bHidePersona:this.props.bHidePersona,bCompactView:G.f.SettingsStore.FriendsSettings.bCompactFriendsList,onContextMenu:this.props.noActions||this.props.disableContextMenu?void 0:this.OnShowContextMenu,bHasPartyBeacon:void 0!==f}),null,this.props.listStatusIndicator)}return i},Object(D.c)([h.a],e.prototype,"OnDoubleClick",null),Object(D.c)([h.a],e.prototype,"OnClick",null),Object(D.c)([h.a],e.prototype,"OnDragStart",null),Object(D.c)([h.a],e.prototype,"OnDragEnd",null),Object(D.c)([h.a],e.prototype,"OnShowContextMenu",null),Object(D.c)([h.a],e.prototype,"OnContextMenuShown",null),e=Object(D.c)([u.a],e)}(j.Component),Re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.render=function(){var e=this.props.friend,t=G.f.CMInterface.steamid.GetAccountID()==e.accountid,n="voiceStatusIconsContainer",o="",i="",r=!1,a=!1,s=!1,c=G.f.VoiceStore.GetPerUserMuting(e.accountid),l=G.f.VoiceStore.GetUserMutedRemotely(e.accountid),p=G.f.VoiceStore.GetOutputMutedRemotely(e.accountid);return t?(r=G.f.VoiceStore.IsMicMuted(),a=G.f.VoiceStore.IsOutputMuted(),s=G.f.VoiceStore.BNoMicAvailableForSession(),r&&(n+=" mic_muted_self"),a&&(n+=" output_muted_self")):s=G.f.VoiceStore.GetUserHasNoMicForSession(e.accountid),c&&(n+=" muted_locally"),l&&(n+=" mic_muted_remotely"),p&&(n+=" output_muted_remotely"),s&&(n+=" no_mic_for_session"),s?o=Object(L.c)("#Tooltip_MicStatus_NoMic"):l?o=Object(L.c)("#Tooltip_RemoteMicStatus_Muted"):r&&(o=Object(L.c)("#Tooltip_YourMicStatus_Muted")),p?i=Object(L.c)("#Tooltip_RemoteOutputStatus_Muted"):a&&(i=Object(L.c)("#Tooltip_YourOutputStatus_Muted")),j.createElement("div",{className:n},j.createElement("div",{className:"voicestatusIcon voiceStatusMic disabled",title:o},j.createElement(P.H,null)),j.createElement("div",{className:"voicestatusIcon voiceStatusOutput disabled",title:i},j.createElement(P.w,null)))},t=Object(D.c)([u.a],t)}(j.Component),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.render=function(){var e=this.props.friend,t=j.createElement(I.a,{persona:e.persona,size:this.props.bLarge?"Large":"Medium",className:this.props.className},this.props.children);return j.createElement(Te,{friend:e,context:this.props.context},t)},t=Object(D.c)([u.a],t)}(j.Component),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(D.d)(t,e),t.prototype.render=function(){var e,t=G.f.ChatStore.FriendChatStore.GetUnreadFriendMessageCount(this.props.browserContext);return this.props.bScrolledFromTop&&0<t&&(e=j.createElement(k.CSSTransition,{classNames:"unread-messages-anim",timeout:320},j.createElement("div",{className:"unreadMessageViolator",onClick:this.props.onClick},1==t&&Object(L.c)("#FriendGroup_UnreadMessagesViolator"),1<t&&Object(L.c)("#FriendGroup_UnreadMessagesViolatorPlural",t)))),j.createElement(k.TransitionGroup,null,e)},t=Object(D.c)([u.a],t)}(j.Component),Ae=function(n){function e(e){var t=n.call(this,e)||this;return t.state={collapsed:!1},t}return Object(D.d)(e,n),e.prototype.OnHeaderClick=function(e){this.setState({collapsed:!this.state.collapsed})},e.prototype.render=function(){var e=this.props.friendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext);if(!e.length)return null;var t=this.state.collapsed,n=t?null:e.map(function(e){var t=e.unread_message_count,n=e.chat_partner,o=j.createElement("div",{className:"FriendMessageCount"},t);return j.createElement(k.CSSTransition,{key:n.accountid,classNames:"friend-anim",timeout:320},j.createElement("div",{className:"unreadFriend"},j.createElement(Ge,{friend:n,key:n.accountid,context:{chat:e},bFriendsListEntry:!0}),o))});return j.createElement("div",{className:"friendGroup"},j.createElement("div",{className:"groupName"+(t?" Collapsed":""),onClick:this.OnHeaderClick},j.createElement("div",{className:"ExpandPlusMinus"},j.createElement(P.P,null)),Object(L.c)("#FriendGroup_UnreadMessages"),j.createElement("span",{className:"groupCount"},"(",e.length,")"),j.createElement("hr",null)),j.createElement(k.TransitionGroup,null,n))},Object(D.c)([h.a],e.prototype,"OnHeaderClick",null),e=Object(D.c)([u.a],e)}(j.Component);j.Component},cLtS:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g});var i=n("mrSG"),a=n("hEDq"),o=n("tkkQ"),r=n("2vnA"),s=n("LAqV"),c=n("s+DT"),l=n("1VtQ"),p=n("3zHc"),u=n("D3Kh"),m=n("XCHq"),d=n("4HGb"),h=n("nDwt"),f=function(){function e(){this.m_status=new a.b,this.m_mapPendingRequests=new r.b,this.m_nRequestID=1,this.m_BroadcastDetails={}}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn(function(){o.a.IN_CLIENT&&(SteamClient&&SteamClient.Broadcast&&SteamClient.Broadcast.RegisterForBroadcastStatus&&SteamClient.Broadcast.RegisterForBroadcastStatus(t.OnBroadcastStatus),SteamClient&&SteamClient.Broadcast&&SteamClient.Broadcast.RegisterForViewerRequests&&SteamClient.Broadcast.RegisterForViewerRequests(t.OnViewerRequest))})},e.prototype.MakeKey=function(e,t){return e+"_"+t},Object.defineProperty(e.prototype,"status",{get:function(){return this.m_status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_broadcasting",{get:function(){return this.m_status.bIsBroadcasting},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"broadcastid",{get:function(){return this.m_status.broadcastid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_broadcast_capable",{get:function(){return this.m_status.bBroadcastCapable},enumerable:!0,configurable:!0}),e.prototype.OnBroadcastStatus=function(e){(this.m_status.bIsBroadcasting&&!e.bIsBroadcasting||"0"!=this.m_status.broadcastid&&"0"==e.broadcastid)&&this.m_mapPendingRequests.forEach(function(e,t,n){e==a.e.k_EPending&&n.delete(t)}),this.m_status=e},e.prototype.OnViewerRequest=function(e,t,n){if(n==a.e.k_EPending){var o=this.m_nRequestID++;this.m_mapPendingRequests.set(this.MakeKey(e,o),n);var i=s.f.GetDefaultBrowserContext(),r=s.f.ShowFriendChatDialog(i,e);r&&r.ViewerNeedsApproval(o)}else this.m_mapPendingRequests.set(this.MakeKey(e,t),n)},e.prototype.ApproveViewerRequest=function(e,t){var n=c.a.InitFromAccountID(e);SteamClient.Broadcast.ApproveViewerRequest(n.ConvertTo64BitString(),Number(t))},e.prototype.RejectViewerRequest=function(e,t){var n=c.a.InitFromAccountID(e);SteamClient.Broadcast.RejectViewerRequest(n.ConvertTo64BitString(),Number(t))},e.prototype.GetRequestState=function(e,t){return this.m_mapPendingRequests.get(this.MakeKey(e,t))},e.prototype.InviteToWatch=function(e){var t=c.a.InitFromAccountID(e);return SteamClient.Broadcast.InviteToWatch(t.ConvertTo64BitString())},e.prototype.SubscribeToBroadcastDetails=function(e,t){if(this.m_BroadcastDetails[e])0===this.m_BroadcastDetails[e].refCount&&this.m_BroadcastDetails[e].details.Subscribe(),this.m_BroadcastDetails[e].refCount++;else{var n=new _(e,t,this.m_CMInterface.GetServiceTransport());n.Subscribe(),this.m_BroadcastDetails[e]={details:n,refCount:1}}},e.prototype.UnsubscribeFromBroadcastDetails=function(e,t){var n=this.m_BroadcastDetails[e];n&&(1<n.refCount?n.refCount--:(n.details.Unsubscribe(),delete this.m_BroadcastDetails[e]))},e.prototype.GetBroadcastDetails=function(e,t){var n=this.m_BroadcastDetails[e];return n||(n={details:new _(e,t,this.m_CMInterface.GetServiceTransport()),refCount:0},this.m_BroadcastDetails[e]=n),n.details},Object(i.c)([r.x],e.prototype,"m_status",void 0),Object(i.c)([r.x],e.prototype,"m_mapPendingRequests",void 0),Object(i.c)([r.i],e.prototype,"status",null),Object(i.c)([r.i],e.prototype,"is_broadcasting",null),Object(i.c)([r.i],e.prototype,"broadcastid",null),Object(i.c)([r.i],e.prototype,"is_broadcast_capable",null),Object(i.c)([l.a,r.g],e.prototype,"OnBroadcastStatus",null),Object(i.c)([l.a,r.g],e.prototype,"OnViewerRequest",null),Object(i.c)([r.g],e.prototype,"ApproveViewerRequest",null),Object(i.c)([r.g],e.prototype,"RejectViewerRequest",null),Object(i.c)([r.g],e.prototype,"InviteToWatch",null),e}(),_=function(){function e(e,t,n){this.m_bExpired=!1,this.m_strThumbnail="",this.m_nThumbnailCount=0,this.m_nTimeout=10,this.m_bSubscribed=!1,this.m_strBroadcastID=e,this.m_strBroadcasterID=t,this.m_ServiceTransport=n}return Object.defineProperty(e.prototype,"strThumbnail",{get:function(){return this.m_strThumbnail?this.m_strThumbnail+"?n="+this.m_nThumbnailCount:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bExpired",{get:function(){return this.m_bExpired},enumerable:!0,configurable:!0}),e.prototype.Subscribe=function(){this.m_bSubscribed||(this.m_bSubscribed=!0,this.PollForDetails())},e.prototype.SchedulePollForDetails=function(){var e=this,t=this.m_strThumbnail?this.m_nTimeout:10;this.m_nTimer=window.setTimeout(function(){e.m_nTimer=void 0,e.m_bSubscribed&&e.PollForDetails()},1e3*t)},e.prototype.PollForDetails=function(){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(e){switch(e.label){case 0:return this.m_nTimer||this.m_bExpired?[3,6]:[4,this.FetchBroadcastStatus()];case 1:return 1==e.sent().GetEResult()?[3,2]:(this.m_bExpired=!0,[3,6]);case 2:return this.m_strThumbnail?[3,4]:[4,this.FetchBroadcastThumbnail()];case 3:return 1===(t=e.sent()).GetEResult()&&(this.m_strThumbnail=t.Body().thumbnail_url(),this.m_nTimeout=t.Body().update_interval()),[3,5];case 4:this.m_nThumbnailCount++,e.label=5;case 5:this.SchedulePollForDetails(),e.label=6;case 6:return[2]}})})},e.prototype.FetchBroadcastStatus=function(){var e=d.b.Init(h.b);return e.Body().set_steamid(this.m_strBroadcasterID),e.Body().set_broadcast_id(this.m_strBroadcastID),h.a.GetBroadcastStatus(this.m_ServiceTransport,e)},e.prototype.FetchBroadcastThumbnail=function(){var e=d.b.Init(h.c);return e.Body().set_steamid(this.m_strBroadcasterID),e.Body().set_broadcast_id(this.m_strBroadcastID),h.a.GetBroadcastThumbnail(this.m_ServiceTransport,e)},e.prototype.Unsubscribe=function(){this.m_bSubscribed=!1,this.m_nTimer&&(clearTimeout(this.m_nTimer),this.m_nTimer=void 0)},Object(i.c)([r.x],e.prototype,"m_bExpired",void 0),Object(i.c)([r.x],e.prototype,"m_strThumbnail",void 0),Object(i.c)([r.x],e.prototype,"m_nThumbnailCount",void 0),e}(),g=function(o){function e(e,t){var n=o.call(this)||this;return n.m_bShowWatchPromptDialog=!1,n.m_steamID=c.a.InitFromAccountID(t),n.m_tabset=e,n.m_info=u.a.StartInfo(n.m_steamID.ConvertTo64BitString()),n}return Object(i.d)(e,o),e.prototype.GetSteamID=function(){return this.m_steamID},e.prototype.GetTabName=function(){var e=this.m_info&&this.m_info.m_strTitle;return!e&&m.b.bValid?m.b.name:e},e.prototype.GetUniqueID=function(){return"br"+this.m_steamID.GetAccountID()},e.prototype.OnTabFocus=function(){},e.prototype.InternalOnTabActivate=function(){},e.prototype.OnTabDeactivate=function(){},e.prototype.OnTabClosed=function(){u.a.StopInfo(this.m_info)},e.prototype.IsVoiceActive=function(){return!1},e.prototype.GetUnreadMessageCount=function(){return 0},e.prototype.IsTabForChat=function(e){return!1},e.prototype.GetChatView=function(){return null},e.prototype.ShowWatchPromptDialog=function(e){this.m_bShowWatchPromptDialog=!0,this.m_watchPromptInitialFriend=e},e.prototype.HideWatchPromptDialog=function(){this.m_bShowWatchPromptDialog=!1,this.m_watchPromptInitialFriend=void 0},Object(i.c)([r.x],e.prototype,"m_bShowWatchPromptDialog",void 0),Object(i.c)([r.x],e.prototype,"m_watchPromptInitialFriend",void 0),Object(i.c)([r.g],e.prototype,"ShowWatchPromptDialog",null),Object(i.c)([r.g],e.prototype,"HideWatchPromptDialog",null),e}(p.b)},cTkQ:function(e,t,n){},dBNU:function(e,t,n){},dXEH:function(e,t,n){e.exports={Emoticon_Toggle:"emoticonsuggestion_Emoticon_Toggle_2zKUt",Active:"emoticonsuggestion_Active_20wFc",Emoticon:"emoticonsuggestion_Emoticon_2h16s"}},"da/R":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n("mrSG"),c=n("q1tI"),o=n("okNM"),l=n("oh5H"),p=n("lqmi"),u=n("QHER"),m=n("e2SU"),i=n("Cebd"),d=n.n(i),r=Object(o.a)(function(e){var t=e.persona,n=e.className,o=Object(s.f)(e,["persona","className"]);if(!t)return null;if(!t.is_online)return null;var i=t.HasStateFlag(512),r=t.HasStateFlag(2048),a=!r&&t.HasStateFlag(1024);return c.createElement(c.Fragment,null,i&&c.createElement("div",Object(s.a)({className:Object(u.a)(n,d.a.PersonaStatusIcon,d.a.MobilePhoneIcon,Object(p.d)(t)),title:Object(l.c)("#Platform_Hint_Mobile")},o),c.createElement(m.J,null)),r&&c.createElement("div",Object(s.a)({className:Object(u.a)(n,d.a.PersonaStatusIcon,d.a.VRIcon,Object(p.d)(t)),title:Object(l.c)("#Platform_Hint_VR")},o),c.createElement(m.jb,null)),a&&c.createElement("div",Object(s.a)({className:Object(u.a)(n,d.a.PersonaStatusIcon,d.a.BigPictureIcon,Object(p.d)(t)),title:Object(l.c)("#Platform_Hint_BigPicture")},o),c.createElement(m.d,null)))})},dcQ8:function(e,t,n){e.exports={BroadcastChat:"broadcastchat_BroadcastChat_25xed",ChatEntry:"broadcastchat_ChatEntry_3hSYv",ChatPanel:"broadcastchat_ChatPanel_3jc_d",ChatMessages:"broadcastchat_ChatMessages_PNfmQ",EmoticonContainer:"broadcastchat_EmoticonContainer_3ArHy",ChatSend:"broadcastchat_ChatSend_2szrh",ChatBox:"broadcastchat_ChatBox_3y_AV",ChatControls:"broadcastchat_ChatControls_35ufH",MessageChat:"broadcastchat_MessageChat_3eku_",MessageName:"broadcastchat_MessageName_2P_MO",MessageContents:"broadcastchat_MessageContents_555m-",EmoticonsOnly:"broadcastchat_EmoticonsOnly_3Z7Z3",MessageNotification:"broadcastchat_MessageNotification_2LJJp",MessageError:"broadcastchat_MessageError_YWUjL",minHeightZero:"broadcastchat_minHeightZero_3Cgfe",ChatLoginButton:"broadcastchat_ChatLoginButton_7EQxy",RateLimitProgressBarContainer:"broadcastchat_RateLimitProgressBarContainer_fFamE",RateLimitProgressBar:"broadcastchat_RateLimitProgressBar_kaFIe",TimedProgressBarContainer:"broadcastchat_TimedProgressBarContainer_321-Z",wrapper:"broadcastchat_wrapper_1iiJF",pie:"broadcastchat_pie_2q7aN",spinner:"broadcastchat_spinner_2u1pz",rota:"broadcastchat_rota_1D2nd",filler:"broadcastchat_filler_ZTWuH",fill:"broadcastchat_fill_1uXHe",mask:"broadcastchat_mask_xcUAc",FlairContainer:"broadcastchat_FlairContainer_tqyZ3"}},dpJ7:function(e,t,n){"use strict";var G=n("mrSG"),R=n("q1tI"),s=n.n(R),r=n("i8i4"),j=n("1w3K"),h=n("ljid"),L=n("e2SU"),o=n("1VtQ"),A=n("tkkQ"),f=n("rsEv"),_=n("V7Fl"),g=n("+M9t"),u=n("geE1"),k=n("LAqV"),P=n("hReu"),l=n("/IDK"),N=n("29iz"),B=n("YZlK"),i=n("20CD"),a=n("Z578"),m=n("+mma"),b=n("Hi0u"),v=n("uWOQ"),c=n("okNM"),p=n("vJVb"),F=n("oh5H"),d=n("HAz9"),S=n("bbBM"),y=n("NB6M"),C=n("cLtS"),O=n("Kwyy"),I=n("2vnA"),E=n("/SYB"),w=n("adxy"),M=n("mQsC"),D=n("0N1H"),T=n("/FkP"),x=n("9Cmb"),V=n("7sd/"),U=n("UMCL"),H=n("N/w2");var W=n("QHER"),z=n("v5rQ"),q=n.n(z);function K(e){return R.createElement("div",{className:"msg"},R.createElement("div",{className:"msgText MessageFromBlockedUser"},Object(F.c)("#Friend_Chat_Blocked")))}var Y=Object(c.a)(function(e){return R.createElement(S.f,{friend:e.player,context:e.context},R.createElement("span",null,e.player.display_name))}),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=this.props.messages,t=this.props.friendRenderContext;if(0==e.length)return null;for(var n=[],o=[],i=!0,r=0,a=e;r<a.length;r++){var s=a[r];if(-1==o.indexOf(s.unServerMsgParamAccountID)){0<n.length&&n.push(", ");var c=k.f.FriendStore.GetPlayer(s.unServerMsgParamAccountID);n.push(R.createElement(Y,{context:t,player:c})),o.push(s.unServerMsgParamAccountID),c.is_ready||(c.LoadIfNecessary(),i=!1)}}var l=k.f.FriendStore.GetPlayer(e[0].unAccountID);l.is_ready||(l.LoadIfNecessary(),i=!1);var p=R.createElement(Y,{context:t,player:l}),u="";if(1<n.length){var m=R.createElement.apply(R,Object(G.g)([R.Fragment,null],n));u=Object(F.e)("#ChatRoom_ServerMessage_Invited_Multiple",m,p)}else u=Object(F.e)("#ChatRoom_ServerMessage_Invited",n[0],p);return R.createElement(U.b,{style:"server"},R.createElement("div",{className:"msg serverMsg"},R.createElement("div",{className:"msgText"},i?u:" ")))},t=Object(G.c)([c.a],t)}(R.Component),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=this.props.messages,t=this.props.friendRenderContext;if(0==e.length)return null;for(var n=[],o=[],i=!0,r=0,a=e;r<a.length;r++){var s=a[r];if(-1==o.indexOf(s.unServerMsgParamAccountID)){0<n.length&&n.push(Object(F.c)("#ChatRoom_ServerMessageMultiple_Separator"));var c=k.f.FriendStore.GetPlayer(s.unServerMsgParamAccountID);n.push(R.createElement(Y,{context:t,player:c})),o.push(s.unServerMsgParamAccountID),c.is_ready||(c.LoadIfNecessary(),i=!1)}}var l="";if(1<n.length){var p=n.pop();2==n.length&&n.pop();var u=R.createElement.apply(R,Object(G.g)([R.Fragment,null],n));l=Object(F.e)(this.props.tokenPrefix+"_Multiple",u,p)}else l=Object(F.e)(this.props.tokenPrefix,n[0]);return R.createElement(U.b,{style:"server"},R.createElement("div",{className:"msg serverMsg"},R.createElement("div",{className:"msgText"},i?l:" ")))},t=Object(G.c)([c.a],t)}(R.Component),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.OnAnimationStart=function(){this.m_nAnimationsInFlight||(this.m_nAnimationsInFlight=0),this.m_nAnimationsInFlight++},t.prototype.OnAnimationEnd=function(){this.m_nAnimationsInFlight&&this.m_nAnimationsInFlight--,this.m_nAnimationsInFlight||this.props.msg.OnAnimationEnd()},t.prototype.render=function(){var e,t,n=this.props,o=n.msg,i=n.speakerWidth,r=n.chatView,a=n.onUpdate,s=n.children,c=n.extraClassName,l=r.chat,p=o.strMessage,u=this.props.hideTimeStamp||r.IsChatRoom(),m=!u&&k.f.FriendStore.GetPlayer(o.unAccountID),d=Object(x.a)(p);if(o.eErrorSending!=T.f.None)switch(o.eErrorSending){case T.f.NotFriends:t="ChatMessageErrorSending",e=R.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(F.c)("#Chat_ErrorSending_NotFriends"));break;case T.f.RateLimitExceeded:t="ChatMessageErrorSending",e=R.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(F.c)("#Chat_ErrorSending_RateLimitExceeded"));break;case T.f.NoChatPermissionInGroup:t="ChatMessageErrorSendingPermissionDenied",e=R.createElement("div",{className:"ChatMessageErrorPermissionDeniedAlert"},R.createElement(L.D,null),Object(F.c)("#Chat_ErrorPermissionDenied"));break;case T.f.Generic:default:t="ChatMessageErrorSending",e=R.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(F.c)("#Chat_ErrorSending"))}var h=Object(W.a)("msg",c,t,{isCurrentUser:l.self.accountid===o.unAccountID,HasTimeStamp:!u,EmojiOnly:x.d(p)}),f={width:i?i+"px":void 0},_={chat:l,unAccountIDSender:o.unAccountID,rtTimestamp:o.rtTimestamp,key:o.UniqueKey(),onLoad:a,bUseLargeEmoticons:Object(x.a)(p),bAnimate:o.eAnimationState===T.g.Animating,onAnimationStart:this.OnAnimationStart,onAnimationEnd:this.OnAnimationEnd},g=s||R.createElement(V.a,{bbcode:p,context:_,parser:l.GetBBCodeParser()}),b=Object(W.a)("msgText",{MsgNoUserContent:!o.HasUserContent(),EmoticonOnly:d});return R.createElement("div",{className:h},!u&&R.createElement(X,{className:"FriendChatTimeStamp",friend:m,style:f},R.createElement(v.f,{rtime:o.rtTimestamp,bTimeOnly:!0})),e,R.createElement(U.b,null,R.createElement("div",{className:b},g)))},Object(G.c)([o.a],t.prototype,"OnAnimationStart",null),Object(G.c)([o.a],t.prototype,"OnAnimationEnd",null),t=Object(G.c)([c.a],t)}(R.Component),X=Object(c.a)(function(e){var t=e.friend.persona,n=!1;t.m_broadcastAccountId&&(n=!0);var o=Object(W.a)(e.className,(t.is_golden&&t.is_online?"golden":t.is_ingame&&"ingame")||t.is_online&&"online"||"offline",{away:t.is_awayOrSnooze,watchingbroadcast:n});return R.createElement("div",{className:o,style:e.style},e.children)}),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.GetChatRoomSpeakerClass=function(e){var t=e.persona;return t.is_golden&&t.is_online?q.a.SpeakerName_Golden:t.is_ingame?q.a.SpeakerName_InGame:t.m_broadcastAccountId?q.a.SpeakerName_WatchingBroadcast:t.is_online?q.a.SpeakerName_Online:q.a.SpeakerName_Default},t.prototype.render=function(){var e,t,n=this.props.friend,o="";if(this.props.chatView.IsChatRoom()){var i=this.props.chatView.chat,r=void 0;switch(i.GetMember(n.accountid)&&(r=i.GetGroup().GetMemberRank(n.accountid)),r){default:break;case 30:o="Moderator";break;case 40:o="Officer";break;case 50:o="Owner",i.GetGroup().BIsClanChatRoom()||(t=R.createElement("div",{className:"rankIcon rankOwner"},R.createElement(L.k,null)))}i.GetGroup().BIsClanChatRoom()&&(40<=r?t=R.createElement("div",{className:"rankIcon rankOwner"},R.createElement("img",{src:A.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_officer.png"})):30<=r&&(t=R.createElement("div",{className:"rankIcon rankOwner"},R.createElement("img",{src:A.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_moderator.png"}))))}else o="";return e="speakerName "+this.GetChatRoomSpeakerClass(n),R.createElement(U.b,{style:"speaker allow-embedded-newlines",text:["["+Object(H.a)(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",n.primary_display_name+":"]},R.createElement("div",{className:"ChatSpeaker ChatRoomSpeaker SpeakerLineBreak"+(n.accountid==this.props.chatView.chat.self.accountid?" isCurrentUser":"")},R.createElement(X,{friend:n,className:"speaker"},R.createElement(S.f,{friend:n,context:this.props.friendRenderContext},R.createElement("div",{className:"speakerHoverArea "+o},t,R.createElement("img",{className:"avatar speakerAvatar",src:n.persona.avatar_url}),R.createElement("div",{className:"speakerStatus"}),R.createElement("div",{className:e},n.primary_display_name,!n.is_display_name_nickname&&n.has_secondary_display_name&&R.createElement("span",{className:"playerNickname"}," (",n.secondary_display_name,")"),n.is_display_name_nickname&&R.createElement("span",{className:"playerNicknameBracket",title:Object(F.c)("#isNickname")},"*")))),R.createElement("div",{className:"speakerTimeStamp"},R.createElement(v.f,{rtime:this.props.msg.rtTimestamp,bTimeOnly:!1})))))},t=Object(G.c)([c.a],t)}(R.Component),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.OnUpdate=function(){this.props.onUpdate("ChatMessageSlashEmote "+this.props.msg.UniqueKey())},t.prototype.render=function(){var e=this.props.msg,t=this.props.chatView.chat,n=k.f.FriendStore.GetPlayer(e.unAccountID),o=e.strMessage.slice(e.strMessage.search(/\s/g)+1),i=Object(W.a)("speaker",n.persona.is_ingame?"ingame":n.persona.is_online?"online":"offline"),r={width:this.props.speakerWidth?this.props.speakerWidth+"px":void 0},a=Object(W.a)("msg","ChatMsgSlashEmote","ChatRoomSlashEmote",{isCurrentUser:t.self.accountid===e.unAccountID,ChatMessageErrorSending:e.eErrorSending!=T.f.None});return R.createElement("div",{className:a},e.eErrorSending!=T.f.None&&R.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(F.c)("#Chat_ErrorSending")),R.createElement("div",{className:"SpeakerLineBreak"+(e.unAccountID==t.self.accountid?" isCurrentUser":"")},R.createElement("div",{className:i},R.createElement(S.f,{friend:n,context:{chat:t,chatContext:"message"}},R.createElement(U.b,{style:"speaker allow-embedded-newlines",text:["["+Object(H.a)(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",n.display_name+":"]},R.createElement("div",{className:"speakerHoverArea"},R.createElement("img",{className:"avatar speakerAvatar",src:n.persona.avatar_url,onLoad:this.OnUpdate}),R.createElement("div",{className:"speakerStatus"}),R.createElement("div",{className:"speakerName",style:r},n.display_name)))),R.createElement(U.b,{style:"force-display append-innertext",text:"/me"},R.createElement("div",{className:"msgText"},R.createElement(V.a,{bbcode:o,context:{chat:t,unAccountIDSender:e.unAccountID,rtTimestamp:e.rtTimestamp,onUpdate:this.props.onUpdate},parser:t.GetBBCodeParser()}))),R.createElement("div",{className:"speakerTimeStamp"},R.createElement(v.f,{rtime:e.rtTimestamp,bTimeOnly:!1})))))},Object(G.c)([o.a],t.prototype,"OnUpdate",null),t=Object(G.c)([c.a],t)}(R.Component),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){return R.createElement(Z,Object(G.a)({},this.props,{extraClassName:"ChatMessageDeleted"}),R.createElement("div",{className:"msgText"},R.createElement("span",{className:"filteredURL bb_removedlink"},Object(F.c)("#Chat_MessageDeleted"))))},t=Object(G.c)([c.a],t)}(R.Component),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e,t=this.props.msg,n=this.props.friendRenderContext;if(11==t.eServerMsgType){var o={unAccountIDSender:0,chat:n.chat,rtTimestamp:t.rtTimestamp,key:t.UniqueKey(),onLoad:void 0};e=R.createElement("div",{className:"msgText"},R.createElement(V.a,{bbcode:this.props.msg.strServerMsgAppCustomLocalized,context:o,parser:n.chat.GetBBCodeParser()}))}else{var i=function(e){switch(e.eServerMsgType){case 1:var t=k.f.FriendStore.GetPlayer(e.unAccountID);return{strToken:"#ChatRoom_ServerMessage_RenameChatRoom",parts:[e.strServerMsgParam,t]};case 2:return{strToken:"#ChatRoom_ServerMessage_Joined",parts:[k.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID)]};case 3:return{strToken:"#ChatRoom_ServerMessage_Parted",parts:[k.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID)]};case 4:var n=k.f.FriendStore.GetPlayer(e.unAccountID);return{strToken:"#ChatRoom_ServerMessage_Kicked",parts:[k.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID),n]};case 9:return t=k.f.FriendStore.GetPlayer(e.unAccountID),e.strServerMsgParam.length?{strToken:"#ChatRoom_ServerMessage_ChatRoomTaglineChanged",parts:[e.strServerMsgParam,t]}:{strToken:"#ChatRoom_ServerMessage_ChatRoomTaglineRemoved",parts:[t]};case 10:return{strToken:"#ChatRoom_ServerMessage_ChatRoomAvatarChanged",parts:[t=k.f.FriendStore.GetPlayer(e.unAccountID)]};case 5:return{strToken:"#ChatRoom_ServerMessage_Invited",parts:[k.f.FriendStore.GetPlayer(e.unServerMsgParamAccountID),k.f.FriendStore.GetPlayer(e.unAccountID)]};default:return{strToken:"#ChatRoom_ServerMessage_Unhandled",parts:[]}}}(t),r=i.parts.length?function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var i=[],r=0,a=n;r<a.length;r++){var s=a[r];s instanceof g.b?i.push(R.createElement(Y,{context:e,player:s})):i.push(s)}return F.e.apply(void 0,Object(G.g)([t],i))}.apply(void 0,Object(G.g)([n,i.strToken],i.parts)):Object(F.c)(i.strToken);e=R.createElement("div",{className:"msgText"},r)}return R.createElement(U.b,{style:"server"},R.createElement("div",{className:"msg serverMsg"},e))},t=Object(G.c)([c.a],t)}(R.Component),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){return R.createElement(U.b,{style:"invite",text:this.props.msg.strMessage},R.createElement("div",{className:"msg"},R.createElement("div",{className:"msg voiceChannelInvite"},this.props.msg.strMessage),R.createElement("div",{className:"msg voiceChannelInviteClear"})))},t=Object(G.c)([c.a],t)}(R.Component),ie=n("XaMz"),re=n("8o0Y"),ae=n("EGkk"),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.componentDidUpdate=function(){this.props.onUpdate("ChatMessageBlocks "+this.props.chatView.GetUniqueID())},t.prototype.renderBlock=function(e){var t,n=this.props,o=this.props.chatView,i=o.chat.chat_message_blocks,r=!o.IsChatRoom()&&i.time_passes_index,a=o.IsChatRoom()?o.chat.first_unread_msg_time:D.g,s=i.message_blocks[e],c=0==e?D.g:i.message_blocks[e-1].GetRTimeLastMessage();if(a&&c<=a&&s.GetRTimeLastMessage()>a){var l=s,p=void 0;a>s.GetRTimeFirstMessage()&&(p=(t=s.CreateVirtualSplitOnTimestamp(a))[0],l=t[1],Object(ie.a)(p.messages.length,"No messages in prefix"));var u=a;return R.createElement(R.Fragment,{key:s.UniqueKey()},p&&R.createElement(ce,Object(G.a)({},n,{block:p,bIsInitialBlock:0===e,bShowTimePasses:e===r})),R.createElement(de,{rtTimestamp:u,bUnread:!0}),0<l.messages.length&&R.createElement(ce,Object(G.a)({},n,{block:l,bIsInitialBlock:!1,bShowTimePasses:!1})))}return R.createElement(ce,Object(G.a)({},n,{key:s.UniqueKey(),block:s,bIsInitialBlock:0===e,bShowTimePasses:e===r}))},t.prototype.render=function(){var n=this;this.props;return this.props.chatView.chat.chat_message_blocks.message_blocks.map(function(e,t){return n.renderBlock(t)})},t=Object(G.c)([c.a],t)}(R.Component),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.componentDidUpdate=function(){this.props.block.is_last_block&&this.props.onUpdate("ChatMessageBlock "+this.props.block.UniqueKey())},t.prototype.render=function(){var e,t,n=this.props,o=n.block,i=n.bIsInitialBlock,r=n.bShowTimePasses,a=Object(G.f)(n,["block","bIsInitialBlock","bShowTimePasses"]),s=a.friendRenderContext,c=o.messages;if(o.BIsInvite()?e=R.createElement(J,{messages:c,friendRenderContext:s}):o.BIsServerMsg()?e=R.createElement(he,{block:o,friendRenderContext:s}):c.length&&(e=R.createElement(pe,Object(G.a)({},a,{messages:c,bLastMessageBlock:o.is_last_block}))),o.is_last_block){var l=k.f.GetLocalMidnightInRTime32();o.GetRTimeMidnightBeforeBlock()!=l&&(t=R.createElement(de,{rtTimestamp:l}))}else o.GetRTimeMidnightBeforeBlock()!=o.GetRTimeMidnightBeforeNextBlock()&&(t=R.createElement(de,{rtTimestamp:o.GetRTimeMidnightBeforeNextBlock()}));return R.createElement(R.Fragment,null,i&&0<c.length&&R.createElement(le,{msg:c[0]}),r&&R.createElement(de,{rtTimestamp:c[0].rtTimestamp,bTimePassesLine:!0}),e,t)},t=Object(G.c)([c.a],t)}(R.Component);function le(e){return e.msg.rtTimestamp<k.f.GetLocalMidnightInRTime32()?R.createElement(de,{rtTimestamp:e.msg.rtTimestamp}):null}var pe=function(n){function e(e){var t=n.call(this,e)||this;return t.m_element=R.createRef(),t.state={bHoveringDelete:!1},t}return Object(G.d)(e,n),e.prototype.OnHoverDelete=function(e){this.setState({bHoveringDelete:e})},e.prototype.CopyMessage=function(){Object(U.a)(this.m_element.current)},e.prototype.SelectMessage=function(e){e.getSelection().selectAllChildren(this.m_element.current)},e.prototype.OnMessageBlockContextMenu=function(e){var t,n=this,o=this.props.messages[0].unAccountID;this.props.chatView.chat instanceof f.a&&(t=this.props.chatView.chat);var i,r=[],a=Object(l.n)(e),s=a.getSelection(),c=s&&0<s.rangeCount&&0<s.toString().length;return i=document.queryCommandEnabled("copy")||c?function(){a.document.execCommand("copy")}:this.CopyMessage,r.push(R.createElement(ae.d,{key:"copy",onSelected:i},Object(F.c)("#ContextMenu_Copy"))),r.push(R.createElement(ae.d,{key:"select",onSelected:function(){n.SelectMessage(a)}},Object(F.c)("#Chat_Actions_Select_Message"))),t&&t.BCanDeleteMemberMessages(o)&&r.push(R.createElement(ae.d,{key:"delete",onSelected:function(){me(a,t,n.props.messages)}},Object(F.c)("#Chat_Actions_Delete"))),r.length?Object(re.a)(R.createElement(ae.c,null,r),e):null},e.prototype.render=function(){var e=!0,t=!1,n=this.props.bLastMessageBlock,o=this.props.messages[0].unAccountID,i=k.f.FriendStore.GetPlayer(o),r=this.props.chatView.IsChatRoom()?this.props.chatView.chat:null,a=r&&r.BCanDeleteMemberMessages(o),s=a&&this.state.bHoveringDelete,c="ChatMessageBlock",l=[];if(r&&i.is_blocked)l.push(R.createElement(K,{key:"blocked"})),c+=" ChatMessageBlock_BlockedSender";else{this.props.messages.length&&"/me"===this.props.messages[0].GetSlashCommand()&&(e=!1);for(var p=0,u=!1,m=0;m<this.props.messages.length;m++){var d=this.props.messages[m],h=!0;if(!r){var f=Math.floor(d.rtTimestamp/60);p&&f!=p?t=!(h=!1):n&&t&&m==this.props.messages.length-1&&(h=!1),p=f}var _={msg:d,key:d.UniqueKey(),chatView:this.props.chatView,hideTimeStamp:h,onUpdate:this.props.onUpdate};d.eDeleteState!=T.e.Deleting&&d.eDeleteState!=T.e.Deleted?(u=!1,"/me"===d.GetSlashCommand()?l.push(R.createElement(ee,Object(G.a)({},_))):d instanceof T.c?(e=!1,l.push(R.createElement(oe,Object(G.a)({},_)))):l.push(R.createElement(Z,Object(G.a)({},_,{speakerWidth:this.props.speakerWidth})))):(u||l.push(R.createElement(te,Object(G.a)({},_,{speakerWidth:this.props.speakerWidth}))),u=!0)}}return n&&(c+=" LastMessageBlock",t&&(c+=" HasInternalTimeStamp")),s&&(c+=" ChatMessageBlock_HighlightDelete"),1!=l.length||r||(c+=" SingletonMsg"),R.createElement(U.b,null,R.createElement("div",{ref:this.m_element,className:c,onContextMenu:this.OnMessageBlockContextMenu},e&&R.createElement($,{friend:i,chatView:this.props.chatView,msg:this.props.messages[0],friendRenderContext:this.props.friendRenderContext,key:"speaker",speakerWidth:this.props.speakerWidth,onUpdate:this.props.onUpdate}),a&&R.createElement(ue,{chatRoom:r,messages:this.props.messages,onHover:this.OnHoverDelete}),l))},Object(G.c)([o.a],e.prototype,"OnHoverDelete",null),Object(G.c)([o.a],e.prototype,"CopyMessage",null),Object(G.c)([o.a],e.prototype,"SelectMessage",null),Object(G.c)([o.a],e.prototype,"OnMessageBlockContextMenu",null),e=Object(G.c)([c.a],e)}(R.Component),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.OnMouseEnter=function(){this.props.onHover(!0)},t.prototype.OnMouseLeave=function(){this.props.onHover(!1)},t.prototype.OnDeleteMessages=function(e){me(Object(l.n)(e),this.props.chatRoom,this.props.messages)},t.prototype.render=function(){return R.createElement("div",{className:"ChatMessageBlockDelete",onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave,onClick:this.OnDeleteMessages,title:Object(F.c)("#Chat_Actions_Delete")},R.createElement(L.ib,null))},Object(G.c)([o.a],t.prototype,"OnMouseEnter",null),Object(G.c)([o.a],t.prototype,"OnMouseLeave",null),Object(G.c)([o.a],t.prototype,"OnDeleteMessages",null),t}(R.Component);function me(c,l,p){return Object(G.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s;return Object(G.e)(this,function(e){switch(e.label){case 0:return 0==p.length?[2]:(t=p[0].unAccountID,n=k.f.FriendStore.GetPlayer(t).primary_display_name,o=Object(F.c)("#Chat_Actions_DeleteChatMessages"),i=Object(F.c)("#Chat_Actions_DeleteChatMessages_Confirm",n),r=Object(F.c)("#Chat_Actions_Delete"),[4,Object(m.a)(c,o,i,r)]);case 1:return e.sent()?[4,l.DeleteChatMessages(p)]:[2];case 2:return 1==(a=e.sent())||(s=15==a?"#Chat_Actions_DeleteChatMessage_FailAccess":"#Chat_Actions_DeleteChatMessage_Fail",i=Object(F.c)(s,n),Object(m.c)(c,o,i)),[2]}})})}var de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.shouldComponentUpdate=function(e){return e.rtTimestamp!==this.props.rtTimestamp||e.bUnread!==this.props.bUnread||e.bTimePassesLine!==this.props.bTimePassesLine},t.prototype.render=function(){var e,t=k.f.RTime32ToDate(this.props.rtTimestamp),n=["msg","timeDivision"];if(this.props.bUnread){var o={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};e=Object(F.c)("#ChatRoom_New_Messages",t.toLocaleDateString(F.b.GetPreferredLocales(),o)),n.push("new_messages")}else if(this.props.bTimePassesLine)e="",n.push("time_passes");else{o={weekday:"long",year:"numeric",month:"long",day:"numeric"};e=t.toLocaleDateString(F.b.GetPreferredLocales(),o)}return R.createElement(U.b,{style:"timestamp",text:e},R.createElement("div",{className:n.join(" ")},R.createElement("div",{className:"preHorizDivider"}),e,R.createElement("div",{className:"horizDivider"})))},t}(R.Component);function he(e){var t=e.friendRenderContext,n=[],o=[],i=[],r=function(){o.length&&(n.push(R.createElement(Q,{key:o[0].UniqueKey(),messages:o,friendRenderContext:t,tokenPrefix:"#ChatRoom_ServerMessage_Joined"})),o=[])},a=function(){i.length&&(n.push(R.createElement(Q,{key:i[0].UniqueKey(),messages:i,friendRenderContext:t,tokenPrefix:"#ChatRoom_ServerMessage_Parted"})),i=[])};return e.block.messages.forEach(function(e){2==e.eServerMsgType?(a(),o.push(e),4==o.length&&r()):3==e.eServerMsgType?(r(),i.push(e),4==i.length&&a()):(r(),a(),n.push(R.createElement(ne,{key:e.UniqueKey(),msg:e,friendRenderContext:t})))}),r(),a(),R.createElement(R.Fragment,null,n)}var fe=n("syWt"),_e=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bInitialized=!1,t.LOG=E.b.create(function(){return t.props.chatView.GetUniqueID()},!1),t.m_bLoadHistoryInProgress=!1,t.m_bLoadingOperationInProgress=!1,t.m_bHasPendedLoadOlder=!1,t.m_nIgnoreScrollUpUntilTime=0,t.state={speakerLabelWidth:-1},e.isActive&&t.InitForChatView(e.chatView),t}return Object(G.d)(e,n),e.prototype.InitForChatView=function(e){e.AddOnChatFrameChangedCallback(this.OnFrameChanged),this.m_bInitialized=!0},e.prototype.GetScrollTop=function(){return this.LOG("scrollTop is",this.m_elHistoryScroll.scrollTop,"returning",Math.ceil(this.m_elHistoryScroll.scrollTop)),Math.ceil(this.m_elHistoryScroll.scrollTop)},e.prototype.GetScrollInfo=function(){if(this.m_elHistoryScroll){var e=this.m_elHistoryScroll,t=e.scrollHeight,n=e.clientHeight;return{scrollTop:this.GetScrollTop(),scrollHeight:t,clientHeight:n}}return{scrollTop:0,scrollHeight:0,clientHeight:0}},e.prototype.LogScrollInfo=function(e){},e.prototype.DumpChildSizes=function(){},e.prototype.OnHistoryScrollRef=function(e){this.m_elHistoryScroll&&this.m_window&&this.m_window.removeEventListener("resize",this.OnResize),(this.m_elHistoryScroll=e)&&(this.m_window=e.ownerDocument.defaultView,this.m_window.addEventListener("resize",this.OnResize))},e.prototype.OnScrollEvent=function(e){this.LogScrollInfo("*** OnScrollEvent"),this.OnScroll()},e.prototype.OnScroll=function(){var e=this.props.chatView,t=this.GetScrollInfo(),n=t.scrollTop,o=t.scrollHeight,i=t.clientHeight,r=e.lastScrollTop,a=e.lastScrollHeight,s=e.lastClientHeight;if(this.LogScrollInfo("OnScroll"),0!=i){var c=o-n<=i,l=a-r<=s;Object(ie.a)(l==e.is_scrolled_to_bottom,e.GetUniqueID()+": computed and stored at bottom don't match"),this.LOG("bAtBottom",c,"bWasAtBottom",l);var p=n;l&&r-p==1&&(this.LOG("*** Scroll position off by one while pinned, ignoring and setting scrollTop to",r),p=r),c||l&&o!=a||p<r&&l&&Date.now()<this.m_nIgnoreScrollUpUntilTime?(this.LogScrollInfo("At bottom"),p<r&&l&&Date.now()<this.m_nIgnoreScrollUpUntilTime&&this.LOG("**** IGNORING APPARENT SCROLL UP WHILE PINNED TO BOTTOM IN LAYOUT"),p=o-i,Object(ie.a)(0<=p,e.GetUniqueID()+": Onscroll client height bigger than scroll height"),e.is_scrolled_to_bottom=!0,p!=n&&(this.LOG("Setting scrollTop to",p),this.m_elHistoryScroll.scrollTop=p)):i<s&&l?(this.LogScrollInfo("Shrinking window while pinned to bottom"),p=o-i,e.is_scrolled_to_bottom=!0,p!=n&&(this.LOG("Setting scrollTop to",p),this.m_elHistoryScroll.scrollTop=p)):p<r?(this.LogScrollInfo("Detected scroll up"),e.is_scrolled_to_bottom=c):p!=r&&(this.LogScrollInfo("Detected scroll down but not to bottom"),e.is_scrolled_to_bottom=!1),e.lastScrollTop=p,e.lastScrollHeight=o,e.lastClientHeight=i;var u=!(e.is_scrolled_to_bottom==e.lastScrollHeight-e.lastScrollTop<=e.lastClientHeight);u&&(Object(ie.a)(!u,e.GetUniqueID()+": setting mismatched computed and stored"),this.LOG(e.lastScrollTop,e.lastScrollHeight,e.lastClientHeight,e.is_scrolled_to_bottom)),p<10&&this.LoadOlderMessages()}else this.LOG("Onscroll zero clientHeight, ignoring")},e.prototype.ScrollToBottom=function(){var e=this.GetScrollInfo(),t=e.scrollHeight,n=e.clientHeight;this.LogScrollInfo("ScrollToBottom");var o=t-n;Object(ie.a)(0<=o,this.props.chatView.GetUniqueID()+": ScrollToBottom client height bigger than scroll height"),this.m_animation&&this.m_animation.Cancel(),this.m_animation=new w.a(this.m_elHistoryScroll,{scrollTop:o},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start()},e.prototype.LoadOlderMessages=function(){var o=this,i=this.props.chatView,e=i.chat;if(e.IsMoreHistoryAvailable()){if(this.m_bLoadingOperationInProgress)return this.LOG("noting pended load"),void(this.m_bHasPendedLoadOlder=!0);var r=function(){return e.LoadMoreHistory().then(function(e){var t=o.GetScrollInfo().scrollHeight,n=i.lastScrollTop+t-i.lastScrollHeight;return o.LogScrollInfo("LoadOlderMessags"),o.m_elHistoryScroll.scrollTop=n,o.m_bHasPendedLoadOlder?(o.LOG("LoadOlderMessages starting pended"),o.m_bHasPendedLoadOlder=!1,r()):(o.m_bLoadingOperationInProgress=!1,e)})};this.LOG("LoadOlderMessages starting"),this.m_bLoadHistoryInProgress=!0,this.m_bLoadingOperationInProgress=!0,this.DoAndDelay(this.m_window,r,500).then(function(e){o.LOG("loading over"),o.m_bLoadHistoryInProgress=!1})}},e.prototype.DoAndDelay=function(o,e,i){var r=performance.now();return e().then(function(t){var n=performance.now()-r;return n<i?new Promise(function(e){return o.setTimeout(e.bind(null,t),i-n)}):t})},e.prototype.Focus=function(){this.m_elHistoryScroll&&this.m_elHistoryScroll.focus()},e.prototype.componentDidMount=function(){if(this.LOG("ComponentDidMount"),this.m_elHistoryScroll&&this.props.chatView.is_scrolled_to_bottom){var e=this.props.chatView,t=this.GetScrollInfo(),n=t.scrollHeight,o=t.clientHeight;e.lastScrollTop=n-o,e.lastScrollHeight=n,e.lastClientHeight=o,this.m_elHistoryScroll.scrollTop=e.lastScrollTop,Object(ie.a)(e.is_scrolled_to_bottom==e.lastScrollHeight-e.lastScrollTop<=e.lastClientHeight,e.GetUniqueID()+": setting mismatched computed and stored")}},e.prototype.componentDidUpdate=function(){var e=this.props.chatView,t=this.GetScrollInfo(),n=t.scrollTop,o=t.scrollHeight,i=t.clientHeight,r=e.lastScrollTop,a=e.lastScrollHeight;if(0!=i){var s=n;o==a?s=r:o-n<=i&&(s=o-i),this.LogScrollInfo("componentDidUpdate"),this.DelayedScrollTo(s)}else this.LOG("componentDidUpdate clientHeight == 0, ignoring")},e.prototype.componentWillUnmount=function(){this.m_window&&(this.m_window.removeEventListener("resize",this.OnResize),this.m_window=void 0),this.props.chatView.RemoveOnChatFrameChangedCallback(this.OnFrameChanged)},e.prototype.componentWillReceiveProps=function(e){e.chatView!=this.props.chatView&&(this.props.chatView.RemoveOnChatFrameChangedCallback(this.OnFrameChanged),this.m_bInitialized=!1),!this.m_bInitialized&&e.isActive&&this.InitForChatView(e.chatView)},e.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.chat==this.props.chatView.chat||(this.m_FriendRenderContext={chatContext:"message",chat:this.props.chatView.chat}),this.m_FriendRenderContext},e.prototype.OnFrameChanged=function(){var e,t=this.props.chatView,n=this.GetScrollInfo(),o=n.scrollHeight,i=n.clientHeight,r=t.lastScrollTop,a=t.lastScrollHeight,s=t.lastClientHeight;this.LogScrollInfo("OnFrameChanged"),this.m_nIgnoreScrollUpUntilTime=Date.now()+300,e=t.is_scrolled_to_bottom?(this.LOG("OnFrameChanged scrolling to bottom"),o-i):(this.LOG("OnFrameChanged preserving bottom"),r+s+o-a-i),this.LOG("OnFrameChanged setting scrollTop to",e),this.DelayedScrollTo(e)},e.prototype.DelayedScrollTo=function(e){var t=this;this.LOG("DelayedScrollTo",e),this.m_elHistoryScroll.scrollTop=e,this.m_window.setTimeout(function(){t.LOG("DelayedOnScroll firing",e),t.OnScroll()},30)},e.prototype.OnUpdate=function(e){var t=this.props.chatView,n=this.GetScrollInfo(),o=n.scrollHeight,i=n.clientHeight;if(this.LogScrollInfo("OnUpdate for "+e),this.LOG("Scrolled to bottom is",t.is_scrolled_to_bottom),0==o)this.LOG("OnUpdate zero scroll height");else if(t.is_scrolled_to_bottom){this.LogScrollInfo("OnUpdate currently scrolled to bottom");var r=o-i;this.DelayedScrollTo(r)}else if(t.chat.BIsPrepend){t.chat.ResetPrepended();var a=t.lastScrollTop,s=t.lastScrollHeight,c=t.lastClientHeight;this.LogScrollInfo("OnUpdate prepended messages");r=a+c+o-s-i;this.DelayedScrollTo(r)}else this.LogScrollInfo("OnUpdate content updated, doing nothing")},e.prototype.OnResize=function(){var e=this.GetScrollInfo(),t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;this.LogScrollInfo("OnResize");var i=t;n-t<=o&&(i=n-o),this.DelayedScrollTo(i)},e.prototype.Swallow=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.render=function(){if(!this.m_bInitialized)return null;var e=this.props,t=e.chatView,n=e.speakerLabelWidth,o=e.blockInteraction,i=t.chat,r=this.GetFriendRenderContext(),a=n&&Math.max(Math.min(n,120),50);this.LOG("Render"),i.LoadChatLogs();var s=null;if(i instanceof f.a){var c="currentTextChannelName";i.IsDefaultRoomForGroup()&&(c+=" DefaultChatRoom"),s=R.createElement("div",{className:c},"#",i.name)}var l=k.f.SettingsStore.FriendsSettings.nChatFontSize,p="ChatHistoryContainer";return l==M.a.k_EChatFontSizeSmall?p+=" smallChatFont":l==M.a.k_EChatFontSizeLarge&&(p+=" largeChatFont"),R.createElement("div",{className:p},o&&R.createElement("div",{className:"interactionBlocker",onClick:this.Swallow}),s,R.createElement(fe.b,null),R.createElement(ge,{chatHistory:this,chatView:t}),R.createElement("div",{className:"chatHistoryScroll",ref:this.OnHistoryScrollRef,onScroll:this.OnScrollEvent,tabIndex:0},R.createElement("div",{className:"chatHistory"},R.createElement(se,{chatView:t,friendRenderContext:r,onUpdate:this.OnUpdate,speakerWidth:a}),R.createElement("div",{className:"disconnectBlocker"}))),R.createElement(ft,{chatView:t}),R.createElement(be,{chatView:t,action:this.ScrollToBottom}),R.createElement(fe.a,null))},Object(G.c)([I.x],e.prototype,"m_bLoadHistoryInProgress",void 0),Object(G.c)([o.a],e.prototype,"DumpChildSizes",null),Object(G.c)([o.a],e.prototype,"OnHistoryScrollRef",null),Object(G.c)([o.a],e.prototype,"OnScrollEvent",null),Object(G.c)([o.a],e.prototype,"OnScroll",null),Object(G.c)([o.a],e.prototype,"ScrollToBottom",null),Object(G.c)([o.a],e.prototype,"LoadOlderMessages",null),Object(G.c)([o.a],e.prototype,"OnFrameChanged",null),Object(G.c)([o.a],e.prototype,"OnUpdate",null),Object(G.c)([o.a],e.prototype,"OnResize",null),Object(G.c)([o.a],e.prototype,"Swallow",null),e=Object(G.c)([c.a],e)}(R.Component),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e="LoadingOlderMessages";return this.props.chatHistory.m_bLoadHistoryInProgress||(e+=" Hidden"),R.createElement("div",{className:e},R.createElement("span",null,Object(F.c)("#Chat_Loading")))},t=Object(G.c)([c.a],t)}(R.Component),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.chatView,n=e.action,o="ScrollToBottomButton";t.is_scrolled_to_bottom&&(o+=" Hidden");var i=Object(F.c)("#Chat_ScrollToBottom");return 0<t.chat.unread_message_count&&(i=Object(F.d)("#Chat_UnreadMessages",t.chat.unread_message_count),o+=" UnreadMessages"),R.createElement("div",{className:o,onClick:n},R.createElement("span",null,i))},t=Object(G.c)([c.a],t)}(R.Component),ve=n("yolM"),Se=n("QxgC"),ye=n("tY0L"),Ce=n("3/mw"),Oe=n.n(Ce),Ie=function(n){function e(e){var t=n.call(this,e)||this;return t.m_rgCurrentMatches=[],t.m_mapMatchByKey=new Map,t.m_hMobxSearchDisposer=Object(I.h)(function(){return Object(G.b)(t,void 0,void 0,function(){return Object(G.e)(this,function(e){switch(e.label){case 0:return[4,this.UpdateSearchResults(this.props.strSearch)];case 1:return e.sent(),this.forceUpdate(),[2]}})})}),t.state={selectedIndex:void 0},t}return Object(G.d)(e,n),e.prototype.OnKeyDown=function(e){this.BHandleKeyPress(e.keyCode)&&e.preventDefault()},e.prototype.BHandleKeyPress=function(e){switch(e){case 38:this.SetSelectedIndexDelta(-1);break;case 40:this.SetSelectedIndexDelta(1);break;case 36:this.SetSelectedIndex(0);break;case 33:this.SetSelectedIndexDelta(-this.GetPageSize());break;case 35:this.SetSelectedIndex(-1);break;case 34:this.SetSelectedIndexDelta(this.GetPageSize());break;case 13:case 9:if(void 0===this.state.selectedIndex)return this.props.onSuggestionSelected(this.props.strSearch),!1;this.ChooseSuggestion(this.m_rgCurrentMatches[this.state.selectedIndex]);break;case 27:this.props.onSuggestionSelected(this.props.strSearch);break;default:return!1}return!0},e.prototype.GetPageSize=function(){var e=r.findDOMNode(this),t=e&&e.firstElementChild,n=this.m_rgCurrentMatches.length;if(n>this.getMaxMatches()&&(n=this.getMaxMatches()),t&&n){var o=t.scrollHeight/n,i=t.clientHeight/o;return Math.max(1,Math.floor(i))}return 5},e.prototype.ChooseSuggestion=function(e){this.props.onSuggestionSelected(this.props.strSearch,e?this.getSelection(e):void 0)},e.prototype.SetSelectedIndexDelta=function(e){void 0!==this.state.selectedIndex?this.SetSelectedIndex(this.state.selectedIndex+e):this.SetSelectedIndex(1===e?0:e)},e.prototype.SetSelectedIndex=function(e){if(this.m_rgCurrentMatches.length){var t=this.m_rgCurrentMatches.length;t>this.getMaxMatches()&&(t=this.getMaxMatches()),(e%=t)<0&&(e+=t),this.setState({selectedIndex:e})}},e.prototype.FindKeyIndex=function(e){if(!this.m_mapMatchByKey.size&&this.m_rgCurrentMatches.length)for(var t=0;t<this.m_rgCurrentMatches.length;t++)this.m_mapMatchByKey.set(this.getKey(this.m_rgCurrentMatches[t]),t);return this.m_mapMatchByKey.get(e)},e.prototype.OnClickSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.ChooseSuggestion(this.m_rgCurrentMatches[t])},e.prototype.OnMouseOverSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.SetSelectedIndex(t)},e.prototype.BindSelectedElement=function(e){var t=r.findDOMNode(this),n=r.findDOMNode(e),o=t&&t.firstElementChild;n&&o&&(o.scrollTop+o.clientHeight<n.offsetTop||n.offsetTop<o.scrollTop)&&n.scrollIntoView()},e.prototype.UpdateSearchResults=function(n){return Object(G.b)(this,void 0,void 0,function(){var t;return Object(G.e)(this,function(e){switch(e.label){case 0:return[4,(t=this).performSearch(n)];case 1:return t.m_rgCurrentMatches=e.sent(),this.m_strLastSearch=n,this.m_mapMatchByKey.clear(),this.m_rgCurrentMatches.length?this.state&&void 0!==this.state.selectedIndex?this.state.selectedIndex>=this.m_rgCurrentMatches.length&&this.setState({selectedIndex:0}):(void 0===this.props.nMinimumSearchLengthBeforeAutoSelection||n.length>=this.props.nMinimumSearchLengthBeforeAutoSelection)&&this.setState({selectedIndex:0}):this.state&&void 0!==this.state.selectedIndex&&this.setState({selectedIndex:void 0}),[2]}})})},e.prototype.componentWillUnmount=function(){this.m_hMobxSearchDisposer&&(this.m_hMobxSearchDisposer(),this.m_hMobxSearchDisposer=void 0)},e.prototype.componentDidUpdate=function(e){return Object(G.b)(this,void 0,void 0,function(){return Object(G.e)(this,function(e){switch(e.label){case 0:return this.m_strLastSearch==this.props.strSearch?[3,2]:[4,this.UpdateSearchResults(this.props.strSearch)];case 1:e.sent(),this.forceUpdate(),e.label=2;case 2:return[2]}})})},e.prototype.render=function(){var e=[];if(this.m_rgCurrentMatches.length){for(var t=this.getMaxMatches(),n=0;n<Math.min(t,this.m_rgCurrentMatches.length);n++){var o=this.m_rgCurrentMatches[n],i=this.getKey(o),r=n===this.state.selectedIndex;e.push(s.a.createElement(Ee,{key:i,matchKey:i,fnOnClick:this.OnClickSuggestion,fnOnMouseOver:this.OnMouseOverSuggestion,bIsSelected:r,ref:r?this.BindSelectedElement:void 0},this.renderMatch(o)))}this.m_rgCurrentMatches.length>t&&e.push(this.renderTooManyMatchesMessage(this.m_rgCurrentMatches.length-t))}else{var a=this.renderNoMatchMessage();if(!a)return null;e.push(a)}return s.a.createElement("div",{className:Oe.a.mentionDialogPosition},s.a.createElement("div",{className:Oe.a.mentionDialog,tabIndex:0,onKeyDown:this.OnKeyDown},this.renderHeader(),e))},Object(G.c)([o.a],e.prototype,"OnKeyDown",null),Object(G.c)([o.a],e.prototype,"OnClickSuggestion",null),Object(G.c)([o.a],e.prototype,"OnMouseOverSuggestion",null),Object(G.c)([o.a],e.prototype,"BindSelectedElement",null),e}(s.a.Component),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.OnMouseOver=function(e){this.props.fnOnMouseOver(this.props.matchKey)},t.prototype.OnClick=function(e){this.props.fnOnClick(this.props.matchKey)},t.prototype.render=function(){return s.a.createElement("div",{className:Object(W.a)(Oe.a.suggestOption,Oe.a.mentionSearchOption,this.props.bIsSelected?Oe.a.selected:""),onMouseEnter:this.OnMouseOver,onClick:this.OnClick},this.props.children)},Object(G.c)([o.a],t.prototype,"OnMouseOver",null),Object(G.c)([o.a],t.prototype,"OnClick",null),t}(s.a.PureComponent),we=Ie,Me=n("dXEH"),De=n.n(Me),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.performSearch=function(e){return this.props.emoticonStore.SearchEmoticons(e,10,!1)},t.prototype.getSelection=function(e){return e.name},t.prototype.getKey=function(e){return e.name},t.prototype.renderMatch=function(e){return s.a.createElement("div",{className:Object(W.a)(De.a.EmoticonSuggestion,e.recent?"Recent":"")},s.a.createElement("div",{className:De.a.Emoticon},s.a.createElement(ye.a,{emoticon:e.name,emoticonHoverStore:this.props.emoticonHoverStore}),e.new&&s.a.createElement(ye.c,null)),":",e.name,":")},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(we),Ge=n("UDpV"),Re=n.n(Ge),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=this.props.fileUploadManager,t=e.file_upload_props.eUploadState;return 1==t?R.createElement(Le,{fileUploadManager:e}):3==t||5==t||4==t?R.createElement(ke,{fileUploadManager:e}):0!=t?R.createElement(Ae,{fileUploadManager:e}):null},t=Object(G.c)([c.a],t)}(R.Component),Le=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bSpoilerChecked:!1},t}return Object(G.d)(e,n),e.prototype.OnCancelClick=function(e){this.props.fileUploadManager.Reset()},e.prototype.OnUploadClick=function(){return Object(G.b)(this,void 0,void 0,function(){return Object(G.e)(this,function(e){switch(e.label){case 0:return[4,this.props.fileUploadManager.BeginFileUpload({bSpoiler:this.state.bSpoilerChecked})];case 1:return e.sent(),this.props.fileUploadManager.Reset(),[2]}})})},e.prototype.OnDialogChecked=function(){this.setState({bSpoilerChecked:!this.state.bSpoilerChecked})},e.prototype.render=function(){var e=void 0,t=this.props.fileUploadManager.file;return-1!=t.type.indexOf("image")?e=R.createElement("img",{className:"chatFileUploadPreview",src:this.props.fileUploadManager.file_upload_data_url}):-1!=t.type.indexOf("video")&&(e=R.createElement(L.kb,null)),R.createElement("div",{className:"chatFileUploadPreviewContainer"},e,R.createElement("div",{className:"chatFileUploadFileName"},"'",t.name,"'"),R.createElement("div",{className:"chatFileUploadCancel",onClick:this.OnCancelClick},R.createElement(L.pb,null)),R.createElement("button",{className:"DialogButton Primary chatFileUploadBtn",type:"button",onClick:this.OnUploadClick},Object(F.c)("#Chat_Upload")),R.createElement(h.e,{classname:"spoilerCheckBox",label:Object(F.c)("#ChatEntry_TagAsSpoiler"),checked:this.state.bSpoilerChecked,onChange:this.OnDialogChecked}))},Object(G.c)([o.a],e.prototype,"OnCancelClick",null),Object(G.c)([o.a],e.prototype,"OnUploadClick",null),Object(G.c)([o.a],e.prototype,"OnDialogChecked",null),e}(R.Component),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=this.props.fileUploadManager.file_upload_props,t=e.file?Object(F.c)("#Chat_Uploading",e.displayFileName):"",n={width:e.uploadProgress+"%"};return R.createElement("div",{className:"chatFileUploadProgressContainer"},R.createElement("div",{className:"chatFileUploadProgressName"},t),R.createElement("div",{className:"chatFileUploadProgressBarContainer DialogProgressBar_ProgressBarContainer"},R.createElement("div",{className:"DialogProgressBar_Value",style:n})))},t=Object(G.c)([c.a],t)}(R.Component),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.ClearErrorState=function(){this.props.fileUploadManager.ClearFileUploadError()},t.prototype.OnRetryClick=function(){return Object(G.b)(this,void 0,void 0,function(){return Object(G.e)(this,function(e){switch(e.label){case 0:return[4,this.props.fileUploadManager.RetryFileUpload()];case 1:return e.sent(),this.props.fileUploadManager.Reset(),[2]}})})},t.prototype.render=function(){var e=this.props.fileUploadManager.file_upload_props,t=e.displayFileName?Object(F.c)("#Chat_Uploading",e.displayFileName):"",n=e.strErrorDescription||Object(F.c)("#Chat_Settings_Error_Unknown"),o=void 0;return 3==e.eUploadState&&(o=R.createElement(h.x,{onClick:this.OnRetryClick},Object(F.c)("#Chat_Upload_ErrorAction_Retry"))),R.createElement("div",{className:"chatFileUploadProgressContainer"},R.createElement("div",{className:"chatFileUploadProgressName"},t),R.createElement("div",{className:"chatFileUploadErrorDescription"},n),R.createElement("div",{className:"chatFileUploadActions"},R.createElement(h.D,{className:"DialogLayout_NoMinWidth"},o,R.createElement(h.d,{onClick:this.ClearErrorState},Object(F.c)("#Chat_Upload_ErrorAction_Close")))))},Object(G.c)([o.a],t.prototype,"ClearErrorState",null),Object(G.c)([o.a],t.prototype,"OnRetryClick",null),t=Object(G.c)([c.a],t)}(R.Component),Pe=n("Jdiq"),Ne=n("vDqi"),Be=n.n(Ne),Fe=function(n){function e(e){var t=n.call(this,e)||this;return t.m_refTextInput=R.createRef(),t.m_refFileInput=R.createRef(),t.m_textFocusCallback=null,t.m_nChatEntryInitialHeight=void 0,t.state={messageInput:"",submitEnabled:!1,mentionSearch:void 0,activeSuggestSearchType:void 0},t}return Object(G.d)(e,n),e.prototype.BindMentionDialog=function(e){this.m_MentionDialog=e},e.prototype.SetMessageInput=function(e,t){this.setState({messageInput:e,submitEnabled:0<e.trim().length},t),(this.props.chatView.text_entry=e)&&e.length&&this.props.chatView.chat.OnTyping()},e.prototype.OnSubmit=function(e){e&&e.preventDefault(),this.props.chatView&&this.props.chatView.file_upload_manager.file&&this.props.chatView.UploadFile(),this.state.messageInput.trim().length&&this.props.chatView&&(this.props.chatView.chat.SendChatMessage(this.state.messageInput),this.m_iMentionSearchCancelledOffset=void 0,this.ClearMentionSearchState(),this.setState({submitEnabled:!1}),this.SetMessageInput(""),this.props.chatView.is_scrolled_to_bottom=!0,this.FocusTextInput()),this.SizeChatEntry(this.m_refTextInput.current,!0)},e.prototype.OnTextAreaChange=function(e){this.SizeChatEntry(e.currentTarget),this.SetMessageInput(e.target.value)},e.prototype.SizeChatEntry=function(e,t){var n=k.f.SettingsStore.FriendsSettings.bCompactFriendsList?12:0;e.style.height="inherit";var o=window.getComputedStyle(e),i=parseInt(o.getPropertyValue("border-top-width"),10)+parseInt(o.getPropertyValue("padding-top"),10)+parseInt(o.getPropertyValue("padding-bottom"),10)+parseInt(o.getPropertyValue("border-bottom-width"),10);null==this.m_nChatEntryInitialHeight&&(this.m_nChatEntryInitialHeight=e.clientHeight-i-n+"px");var r=e.scrollHeight-i-n;t?(e.style.height=this.m_nChatEntryInitialHeight,this.m_nChatEntryInitialHeight=void 0):e.style.height=Math.min(120,r)+"px"},e.prototype.OnFocus=function(e){this.UpdateMentionSearchState()},e.prototype.OnBlur=function(e){if(!e.relatedTarget||!l.e(r.findDOMNode(this),e.relatedTarget)){if(Object(ae.h)())return;this.m_iMentionSearchCancelledOffset=void 0,this.ClearMentionSearchState()}},e.prototype.OnKeyDown=function(e){this.state.activeSuggestSearchType&&this.m_MentionDialog&&!e.shiftKey&&!e.ctrlKey&&this.m_MentionDialog.BHandleKeyPress(e.keyCode)?e.preventDefault():8==e.keyCode||46==e.keyCode?this.m_iMentionSearchCancelledOffset=void 0:13!=e.keyCode||e.shiftKey||e.ctrlKey?13==e.keyCode&&e.ctrlKey&&(e.preventDefault(),this.InsertAtCursor("\n")):(e.preventDefault(),this.OnSubmit())},e.prototype.OnPaste=function(e){var t=l.l(e);t&&(this.props.chatView.SetFileToUpload(t),e.preventDefault(),e.stopPropagation())},e.prototype.OnFileInputChange=function(e){var t=e.currentTarget;t.files.length&&(this.props.chatView.SetFileToUpload(t.files[0]),t.value="")},e.prototype.OnEmbedClick=function(e){Object(re.a)(R.createElement(We,{chatView:this.props.chatView,refFileInput:this.m_refFileInput.current,fnInsertText:this.InsertAtCursor.bind(this)}),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0})},e.prototype.OnEmoticonSelected=function(e,t){void 0===t&&(t=!1),t||this.m_refTextInput.current.focus(),this.InsertAtCursor(":"+e+":")},e.prototype.InsertAtCursor=function(e){var t=this.m_refTextInput.current,n=t.value,o=n.substr(0,t.selectionStart)+e+n.substr(t.selectionEnd),i=t.selectionStart+e.length;this.SetMessageInput(o,function(){t.selectionStart=t.selectionEnd=i})},e.prototype.OnKeyPress=function(e){this.UpdateMentionSearchState()},e.prototype.OnClick=function(e){this.UpdateMentionSearchState()},e.prototype.OnContextMenu=function(e){A.a.IN_CLIENT||e.stopPropagation()},e.prototype.ClearMentionSearchState=function(){this.m_iMentionSearchStartOffset=void 0,this.state.activeSuggestSearchType&&this.setState({activeSuggestSearchType:void 0,mentionSearch:void 0})},e.prototype.FindMatchOpener=function(e,t,n){for(var o=n-1;0<=o;o--){if(t[o]==e)return o;if(" "==t[o])break}},e.prototype.UpdateMentionSearchState=function(){var e=this.m_refTextInput.current;if(e){var t=(this.props.chatView&&this.props.chatView.chat)instanceof f.a;if(e.selectionStart==e.selectionEnd&&e.selectionStart){for(var n=e.selectionStart,o=e.value,i=void 0,r=void 0,a=n-1;0<=a;a--){var s=0<a?o[a-1]:void 0;if(("@"==o[a]||"＠"==o[a])&&t){s&&" "!=s&&"\n"!=s||(i=a,r="Mention");break}if(":"==o[a]&&2<n-a){s&&" "!=s&&"\n"!=s&&":"!=s||(i=a,r="Emoticon");break}if(o.startsWith("/store ")){i="/store ".length-1,r="Store";break}if("/"==o[a]&&0==a){i=a,r="SlashCommand";break}if(" "==o[a]||"\n"==o[a])break}if(void 0!==i&&i!==this.m_iMentionSearchCancelledOffset){var c=o.substr(i+1,n-i-1);this.m_iMentionSearchStartOffset=i,this.setState({activeSuggestSearchType:r,mentionSearch:c})}else this.ClearMentionSearchState()}else this.ClearMentionSearchState()}},e.prototype.ReplaceSuggestedText=function(e,t,n){var o=this.m_refTextInput.current.selectionStart,i=this.m_refTextInput.current.value,r=this.FindMatchOpener(e,i,o);if(void 0===r&&"@"==e&&(r=this.FindMatchOpener("＠",i,o)),void 0!==r){var a=i.substr(0,r);a+=t,(o>=i.length||" "!=i[o])&&(a+=" ");var s=a.length;a+=i.substr(o),this.SetMessageInput(a,n),this.m_refTextInput.current.value=a,this.m_refTextInput.current.selectionStart=this.m_refTextInput.current.selectionEnd=s,this.FocusTextInput()}},e.prototype.OnMentionSuggestionSelected=function(e,t){var n;if(t instanceof g.b?n=t.persona.m_strPlayerName:t&&(n=t),!n)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();var o=n;-1!==o.lastIndexOf("#")&&(o=o.substr(0,o.lastIndexOf("#"))),1<this.props.chatView.chat.SearchMembers(o,2,!0).length&&(t instanceof g.b?n+="#"+t.accountid.toString(36):n+="#0"),this.ReplaceSuggestedText("@","@"+n),this.ClearMentionSearchState()},e.prototype.OnEmoticonSuggestionSelected=function(e,t){if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText(":",":"+t+":"),this.ClearMentionSearchState()},e.prototype.OnSlashCommandSuggestionSelected=function(e,t){var n=this;if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText("/",t,function(){0===Object(T.h)(t).unExpectedArguments&&n.OnSubmit()}),this.ClearMentionSearchState()},e.prototype.OnStoreSuggestionSelected=function(e,t){var n=this;if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.SetMessageInput(t,function(){n.OnSubmit()}),this.ClearMentionSearchState()},e.prototype.FocusTextInput=function(){this.m_refTextInput.current&&this.m_refTextInput.current.focus()},e.prototype.InitForChatView=function(e){this.m_textFocusCallback&&(this.m_textFocusCallback.Unregister(),this.m_textFocusCallback=null);var t=e.text_entry;t!=this.state.messageInput&&this.setState({messageInput:t}),this.m_textFocusCallback=e.RegisterForTextEntryFocus(this.FocusTextInput)},e.prototype.componentWillMount=function(){this.InitForChatView(this.props.chatView)},e.prototype.componentDidMount=function(){this.FocusTextInput()},e.prototype.componentWillUnmount=function(){this.m_textFocusCallback&&this.m_textFocusCallback.Unregister(),this.m_textFocusCallback=null},e.prototype.componentWillReceiveProps=function(e){var t=this;e.chatView!=this.props.chatView&&this.InitForChatView(e.chatView),e.isActive&&!this.props.isActive&&setTimeout(function(){t.FocusTextInput()},0)},e.prototype.render=function(){var e=this.props,t=e.chatView,n=e.disabled,o=t&&t.chat,i=void 0;switch(this.state.activeSuggestSearchType){case"Mention":i=R.createElement(Ve,{chat:o,strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnMentionSuggestionSelected,ref:this.BindMentionDialog});break;case"Emoticon":i=R.createElement(Te,{emoticonStore:k.f.ChatStore.EmoticonStore,emoticonHoverStore:Pe.b,strSearch:this.state.mentionSearch,nMinimumSearchLengthBeforeAutoSelection:2,onSuggestionSelected:this.OnEmoticonSuggestionSelected,ref:this.BindMentionDialog});break;case"SlashCommand":i=R.createElement(Ue,{strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnSlashCommandSuggestionSelected,ref:this.BindMentionDialog});break;case"Store":i=R.createElement(He,{strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnStoreSuggestionSelected,ref:this.BindMentionDialog})}var r=k.f.SettingsStore.FriendsSettings.bCompactFriendsList,a=k.f.SettingsStore.FriendsSettings.nChatFontSize,s="";return a==M.a.k_EChatFontSizeSmall?s=" smallChatFont":a==M.a.k_EChatFontSizeLarge&&(s=" largeChatFont"),R.createElement("div",{className:"chatEntry"+(r?" compactView":"")+s},R.createElement(je,{fileUploadManager:t.file_upload_manager}),R.createElement("form",{className:""+Re.a.chatEntryControls,onSubmit:this.OnSubmit,onBlur:this.OnBlur},i,R.createElement("textarea",{className:Re.a.chatTextarea,value:this.state.messageInput,onPaste:this.OnPaste,onContextMenu:this.OnContextMenu,ref:this.m_refTextInput,onChange:this.OnTextAreaChange,onKeyDown:this.OnKeyDown,onKeyUp:this.OnKeyPress,onClick:this.OnClick,onFocus:this.OnFocus,disabled:n||k.f.CMInterface.BDisconnected(),maxLength:5e3,spellCheck:!k.f.SettingsStore.FriendsSettings.bDisableSpellcheck}),R.createElement("button",{className:Re.a.chatSubmitButton+(this.state.submitEnabled?"":" "+Re.a.disabled),type:"submit",disabled:!this.state.submitEnabled,title:Object(F.c)("#ChatEntryButton_Submit")},R.createElement(L.db,null)),R.createElement("input",{type:"file",style:{display:"none"},name:"fileupload",ref:this.m_refFileInput,onChange:this.OnFileInputChange})),R.createElement("div",{className:Re.a.chatEntryActionsContainer+" compactableHeight"},R.createElement("div",{className:Re.a.chatEntryActionsGroup},R.createElement(Se.a,{disabled:n,OnEmoticonSelected:this.OnEmoticonSelected,rtLastAckedNewEmoticons:P.h.UIDisplayPrefs.rtLastAckedNewEmoticons,SetUIDisplayPref:P.h.SetUIDisplayPref.bind(P.h),emoticonHoverStore:Pe.b,emoticonStore:k.f.ChatStore.EmoticonStore}),R.createElement("button",{className:Re.a.chatSubmitButton+" "+Re.a.EmbedButton+(n?" "+Re.a.disabled:""),type:"button",onClick:this.OnEmbedClick,title:Object(F.c)("#ChatEntryButton_SendEmbed"),disabled:n},R.createElement(L.L,null))),R.createElement(xe,{chat:o})),R.createElement("div",{className:"disconnectBlocker compactableHeight"}))},Object(G.c)([o.a],e.prototype,"BindMentionDialog",null),Object(G.c)([o.a],e.prototype,"OnSubmit",null),Object(G.c)([o.a],e.prototype,"OnTextAreaChange",null),Object(G.c)([o.a],e.prototype,"SizeChatEntry",null),Object(G.c)([o.a],e.prototype,"OnFocus",null),Object(G.c)([o.a],e.prototype,"OnBlur",null),Object(G.c)([o.a],e.prototype,"OnKeyDown",null),Object(G.c)([o.a],e.prototype,"OnPaste",null),Object(G.c)([o.a],e.prototype,"OnFileInputChange",null),Object(G.c)([o.a],e.prototype,"OnEmbedClick",null),Object(G.c)([o.a],e.prototype,"OnEmoticonSelected",null),Object(G.c)([o.a],e.prototype,"OnKeyPress",null),Object(G.c)([o.a],e.prototype,"OnClick",null),Object(G.c)([o.a],e.prototype,"OnContextMenu",null),Object(G.c)([o.a],e.prototype,"OnMentionSuggestionSelected",null),Object(G.c)([o.a],e.prototype,"OnEmoticonSuggestionSelected",null),Object(G.c)([o.a],e.prototype,"OnSlashCommandSuggestionSelected",null),Object(G.c)([o.a],e.prototype,"OnStoreSuggestionSelected",null),Object(G.c)([o.a],e.prototype,"FocusTextInput",null),e=Object(G.c)([c.a],e)}(R.Component),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.HandleStartVoice=function(e){var t=this.props.chat;if(t instanceof u.a)t.ToggleVoiceChat();else if(this.IsVoiceActiveForButton())k.f.VoiceStore.OnUserEndVoiceChat();else if(t instanceof f.a){var n=t.GetGroup();if(n){var o=n.voiceRoomList;if(0!=o.length)if(1!=o.length){var i=R.createElement(ze,{group:n});Object(re.a)(i,e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0})}else{var r=o[0];k.f.VoiceStore.InitiateRoomChat(n.GetGroupID(),r.GetRoomID())}else n.CreateAndJoinTempVoiceRoom()}}},t.prototype.IsVoiceActiveForButton=function(){var e=this.props.chat,t=!1;if(e instanceof u.a)t=e.BVoiceActive();else if(e instanceof f.a){var n=e.GetGroup();t=k.f.VoiceStore.IsVoiceActiveForGroup(n.GetGroupID())}return t},t.prototype.OnSettingsClick=function(e){Object(ve.a)(Object(P.e)(this,e),e.currentTarget.ownerDocument.defaultView,"voice")},t.prototype.render=function(){var e=this.IsVoiceActiveForButton(),t=["VoiceToggle"],n="",o=this.props.chat;e?(t.push("Active"),k.f.VoiceStore.BNoMicAvailableForSession()&&t.push("NoMicrophone"),k.f.VoiceStore.IsMicMuted()&&t.push("MicMuted")):t.push(" Inactive");var i=!o.BIsVoiceAllowed();if(i)t.push(" Disabled"),n=o.GetVoiceNotAllowedReason();else if(o instanceof u.a)n=e?"#Tooltip_VoiceControlButton_1v1_active":"#Tooltip_VoiceControlButton_1v1_inactive";else if(o instanceof f.a)if(this.IsVoiceActiveForButton())n="#Tooltip_VoiceControlButton_group_leave";else{var r=o.GetGroup();r&&0==r.voiceRoomList.length?n="#Tooltip_VoiceControlButton_group_create":r&&1==r.voiceRoomList.length?n="#Tooltip_VoiceControlButton_group_joinsingle":r&&(n="#Tooltip_VoiceControlButton_group_joinmultiple")}var a=k.f.VoiceStore.GetPushToTalkEnabled(),s=k.f.VoiceStore.GetPushToMuteEnabled(),c=k.f.VoiceStore.GetPushToTalkVoiceStateEnabled(),l=k.f.VoiceStore.GetPushToTalkHotKeyDisplayString(),p="";return(a||s)&&(p+=" pushToTalkEnabled"),c&&(p+=" pushToTalkKeyDown"),R.createElement("div",{className:"ChatMessageEntryVoice"+p+(e?" Active":" Inactive")+(i?" Disabled":"")},R.createElement("div",{className:"buttonsContainer"},R.createElement("button",{disabled:i,className:t.join(" "),onClick:this.HandleStartVoice,title:Object(F.c)(n)},R.createElement("div",{className:"VoiceToggleIconCtn"},R.createElement(L.mb,null))),R.createElement("div",{className:"activeVoiceControls"},R.createElement("div",{className:"activeVoiceFlexBox"},R.createElement("div",{className:"activeVoiceButtons"},R.createElement(S.h,null),R.createElement(S.i,null),R.createElement("div",{className:"friendListButton friendSettingsButton no-drag",onClick:this.OnSettingsClick,title:Object(F.c)("#Tooltip_VoiceSettings")},R.createElement(L.X,null)))))),(a||s)&&this.IsVoiceActiveForButton()&&R.createElement("div",{className:"activeVoicePushToTalk"+p,title:Object(F.c)(s?"#ActiveVoicePushToMute":"#ActiveVoicePushToTalk",l)},l))},Object(G.c)([o.a],t.prototype,"HandleStartVoice",null),Object(G.c)([o.a],t.prototype,"OnSettingsClick",null),t=Object(G.c)([c.a],t)}(R.Component),Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(G.d)(e,t),e.prototype.performSearch=function(e){return this.props.chat.SearchMembers(e,Number.MAX_VALUE)},e.prototype.ChooseSuggestion=function(e){e&&e.strNotSelectable||t.prototype.ChooseSuggestion.call(this,e)},e.prototype.getSelection=function(e){return e.friend?e.friend:e.meta_mention},e.prototype.getKey=function(e){return""+(e.friend?e.friend.accountid:e.meta_mention)},e.prototype.renderMatch=function(e){var t,n,o=e.friend,i=e.iMatchOffset,r=e.bNicknameMatch,a=this.props.strSearch.length,s=null;return o?(t=o.persona.m_strPlayerName,n=o.has_nickname&&o.nickname,o.persona.avatar_url_medium&&(s=o.persona.avatar_url_medium)):(t="@"+e.meta_mention,n=null,i++),r?R.createElement("span",{className:"mentionSuggestion"},s&&R.createElement("img",{className:"mentionAvatar",src:o.persona.avatar_url_medium,draggable:!1}),t,R.createElement("span",{className:"nickname"}," (",n.substr(0,i).replace(/ /g," "),R.createElement("span",{className:"mentionSearchMatch"},n.substr(i,a).replace(/ /g," ")),n.substr(i+a).replace(/ /g," "),")")):R.createElement("span",{className:"mentionSuggestion"},t.substr(0,i).replace(/ /g," "),s&&R.createElement("img",{className:"mentionAvatar",src:o.persona.avatar_url_medium,draggable:!1}),R.createElement("span",{className:"mentionSearchMatch"},t.substr(i,a).replace(/ /g," ")),t.substr(i+a).replace(/ /g," "),e.strNotSelectable&&R.createElement("span",{className:"notSelectable"}," ",": "+e.strNotSelectable," "),n&&R.createElement("span",{className:"nickname"}," (",n,")"))},e.prototype.renderNoMatchMessage=function(){return R.createElement("div",{key:"nomatches",className:"suggestOption mentionSearchOption noMatches"},Object(F.c)("#ChatMentionSuggest_NoMatches"))},e.prototype.renderTooManyMatchesMessage=function(e){var t=e<=1?"#ChatMentionSuggest_ManyMatches":"#ChatMentionSuggest_ManyMatchesPlural";return R.createElement("div",{key:"manymatches",className:"suggestOption mentionSearchOption manyMatches"},Object(F.c)(t,e))},e.prototype.renderHeader=function(){return R.createElement("div",{className:"mentionSearchText"},Object(F.c)("#ChatMentionSuggest_MembersMatching",this.props.strSearch))},e.prototype.getMaxMatches=function(){return e.nMaxMatches},e.nMaxMatches=12,e}(we),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.performSearch=function(e){var t="/"+e;return Object(T.i)().filter(function(e){return e.startsWith(t)})},t.prototype.getSelection=function(e){return e},t.prototype.getKey=function(e){return e},t.prototype.renderMatch=function(e){var t=Object(T.h)(e);if(!t)return null;var n=Object(F.c)(t.strDescriptionToken);return R.createElement("span",{className:"SlashCommandSuggestion"},R.createElement("span",{className:"SlashCommandSuggestion_SlashCommand"},e),": ",R.createElement("span",{className:"SlashCommandSuggestion_SlashCommandDescription"},n))},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(we),He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.performSearch=function(n){return Object(G.b)(this,void 0,void 0,function(){var t;return Object(G.e)(this,function(e){switch(e.label){case 0:return[4,Be.a.get(A.a.STORE_BASE_URL+"search/suggest?term="+encodeURIComponent(n)+"&f=json&cc="+A.a.COUNTRY+"&l="+A.a.LANGUAGE)];case 1:return t=e.sent(),[2,t.data.filter(function(e){return"game"===e.type||"software"===e.type})]}})})},t.prototype.getSelection=function(e){return A.a.STORE_BASE_URL+"app/"+e.id},t.prototype.getKey=function(e){return String(e.id)},t.prototype.renderMatch=function(e){return R.createElement("span",{className:"SlashCommandSuggestion"},R.createElement("span",{className:"SlashCommandSuggestion_SlashCommand"},e.name))},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(we);function We(t){var e=[];t.refFileInput&&e.push(R.createElement(ae.d,{key:"upload",onSelected:function(){t.refFileInput.click()}},Object(F.c)("#ChatEntry_UploadImage")));return e.push(R.createElement(ae.d,{key:"tradeoffer",onSelected:function(){k.f.EconomyStore.GetTradeOfferURL().then(function(e){t.fnInsertText(e)})}},Object(F.c)("#ChatEntry_SendTradeURL"))),R.createElement(ae.c,null,e)}function ze(e){var t=e.group.GetGroupID(),n=e.group.voiceRoomList.map(function(e){return R.createElement(ae.d,{key:e.GetRoomID(),onSelected:function(){k.f.VoiceStore.InitiateRoomChat(t,e.GetRoomID())}},e.name)});return R.createElement(ae.c,null,n)}var qe=n("ieu3"),Ke=n("hx5d"),Ye=n("GxRc"),Je=n("/7KC"),Qe=n("/ZM5"),Ze=function(n){function e(e){var t=n.call(this,e)||this;return t.m_msWentInactive=0,t.m_bShownTabIsGroupChat=!0,t.m_keyEventListener="keydown",t.m_refBroadcastContainer=R.createRef(),t.state={dropToInviteFriend:void 0,bShowBothChats:!1},t.props.popup&&t.props.popup.addEventListener(t.m_keyEventListener,t.OnHTMLKeyEvent),t}return Object(G.d)(e,n),e.prototype.OnDragEnter=function(e,t){if(Object(ie.a)(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var n=e;n.friend&&n.sourceContext.group!=this.props.groupView.GetGroup()&&this.setState({dropToInviteFriend:n.friend})}return!0},e.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},e.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},e.prototype.OnDrop=function(e,t){Object(ie.a)(e&&"friend"==e.type||0!=t.dataTransfer.files.length,"Invalid data type passed to ChatRoomGroupDialog.OnDrop");var n=this.props.groupView.GetChatView();if(e&&"friend"==e.type){var o=e;if(o.friend){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),P.h.DragDropManager.SetDropConsumed();var i=t.currentTarget.ownerDocument.defaultView;o.sourceContext.group!=this.props.groupView.GetGroup()&&rt({invitee:o.friend,chatview:null,invitedto:this.props.groupView.GetGroup()},Object(P.e)(this,t),i)}}else if(0!=t.dataTransfer.files.length){var r=t.dataTransfer.files[0];n.SetFileToUpload(r)}},e.prototype.componentWillReceiveProps=function(e){this.props.isActive&&!e.isActive?this.OnBecameInactive():e.isActive&&this.OnBecameActive()},e.prototype.OnBecameInactive=function(){this.m_msWentInactive=performance.now(),this.m_iIntervalInactive=SetBackgroundTimeout(this.forceUpdate.bind(this),10100),this.m_iIntervalVeryInactive=SetBackgroundTimeout(this.forceUpdate.bind(this),60100)},e.prototype.OnBecameActive=function(){this.m_msWentInactive=0,this.ClearIntervals()},e.prototype.GetTitleBarDragDropProps=function(){var e={rgAcceptedTypes:[],bAcceptsFiles:!0};return e.fnDrop=this.OnDrop,e},e.prototype.GetChatBodyDragDropProps=function(){var e={rgAcceptedTypes:["friend"],bAcceptsFiles:!0};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDragOver=this.OnDragOver,e.fnDrop=this.OnDrop,e},e.prototype.ClearIntervals=function(){this.m_iIntervalInactive&&(ClearBackgroundTimeout(this.m_iIntervalInactive),this.m_iIntervalInactive=void 0),this.m_iIntervalVeryInactive&&(ClearBackgroundTimeout(this.m_iIntervalVeryInactive),this.m_iIntervalVeryInactive=void 0)},e.prototype.OnHTMLKeyEvent=function(e){if(A.a.IN_CLIENT&&this.props.isActive&&e.altKey&&!e.ctrlKey&&!e.shiftKey){var t=this.props.groupView;if(!t)return;38===e.keyCode&&t.SelectPreviousChannel(),40===e.keyCode&&t.SelectNextChannel()}},e.prototype.componentDidMount=function(){(this.props.popup?this.props.popup:window).addEventListener("resize",this.OnLayoutChange)},e.prototype.componentWillUnmount=function(){this.ClearIntervals(),this.props.popup&&this.props.popup.removeEventListener(this.m_keyEventListener,this.OnHTMLKeyEvent),(this.props.popup?this.props.popup:window).removeEventListener("resize",this.OnLayoutChange)},e.prototype.CalculateBroadcastSectionStyles=function(e){if(this.props.groupView.m_bChatHidden)return{width:"100%",height:"100%"};var t=P.h.UIDisplayPrefs,n=t.nWatchPartyBroadcastHeightPercentage,o=t.nWatchPartyBroadcastWidthPercentage,i={};if(e){var r=n||66;if(i.height=r+"%",this.m_elMainContent){var a=this.m_elMainContent,s=a.clientWidth,c=a.clientHeight,l=9/16*s+50,p=Object(Je.a)(r,1,l/c*100);i.height=p+"%"}}else i.width=o?o+"%":"66%",i.overflowY="auto";return i},e.prototype.ShouldShowVerticalBroadcastChat=function(){return void 0!==this.props.groupView.m_bShowVerticalBroadcastChat?this.props.groupView.m_bShowVerticalBroadcastChat:!!this.m_elMainContent&&this.m_elMainContent.clientHeight/this.m_elMainContent.clientWidth>5/7},e.prototype.OnLayoutChange=function(){this.forceUpdate()},e.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})},e.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),n=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),o=this.ShouldShowVerticalBroadcastChat(),i=o?t.top:t.left,r=o?e.clientY:e.clientX,a=o?n.height:n.width,s=Object(Je.a)((r-i)/a*100,1,100),c=o?"nWatchPartyBroadcastHeightPercentage":"nWatchPartyBroadcastWidthPercentage";P.h.SetUIDisplayPref(c,s)},e.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})},e.prototype.OnLocalStreamChange=function(e){this.props.groupView.SetLocalBroadcastId(e)},e.prototype.ShowBroadcast=function(){this.props.groupView.ShowBroadcast()},e.prototype.HideChat=function(){this.props.groupView.SetChatHidden(!0)},e.prototype.ShowChat=function(){this.props.groupView.SetChatHidden(!1)},e.prototype.ToggleVerticalBroadcastChat=function(){this.props.groupView.SetVerticalBroadcastChat(!this.ShouldShowVerticalBroadcastChat()),this.props.groupView.SetChatHidden(!1)},e.prototype.SetMainContentRef=function(e){this.m_elMainContent=e,this.OnLayoutChange()},e.prototype.ToggleShowBothChats=function(){this.state.bShowBothChats?this.m_bShownTabIsGroupChat&&this.state.bShowBothChats&&this.props.groupView.SetGlobalBroadcastChatShown(!1):(this.m_bShownTabIsGroupChat=!this.props.groupView.m_bShowGlobalChat,this.props.groupView.SetGlobalBroadcastChatShown(!0)),this.setState({bShowBothChats:!this.state.bShowBothChats})},e.prototype.RenderInnerChatTabs=function(){var e=this.props.groupView,t=e.GetGroup();return R.createElement("div",{className:"ChatBodyControls"},R.createElement("div",{className:"Close",onClick:this.HideChat,title:Object(F.c)("#Broadcast_View_HideChat")},R.createElement(L.y,{showChat:!1})),R.createElement("div",{className:"InnerChatTabs"},R.createElement("div",{className:Object(W.a)("InnerChatTab",!e.m_bShowGlobalChat&&"Active"),onClick:function(){return e.SetGlobalBroadcastChatShown(!1)}},R.createElement(qe.b,{group:t}),R.createElement(B.a,{group:t,micro:!0}),R.createElement("span",{className:"InnerChatTabLabel"},Object(F.c)("#Broadcast_Chat_GroupChatTab",t.name))),(!this.state.bShowBothChats||this.state.bShowBothChats&&this.ShouldShowVerticalBroadcastChat())&&R.createElement("div",{className:Object(W.a)("InnerChatTab",e.m_bShowGlobalChat&&"Active"),onClick:function(){return e.SetGlobalBroadcastChatShown(!0)}},R.createElement(L.u,null),R.createElement("span",{className:"InnerChatTabLabel"},Object(F.c)("#Broadcast_Chat_PublicChatTab")))),R.createElement("div",{className:"showBothTabs",onClick:this.ToggleShowBothChats,title:Object(F.c)(this.state.bShowBothChats?"#Broadcast_View_ShowSingleChats":"#Broadcast_View_ShowBothChats")},R.createElement(L.Y,null)))},e.prototype.render=function(){if(!this.props.groupView||!this.props.groupView.GetChatView())return null;var e=this.props.groupView.GetGroup(),t=this.props.groupView,n=t.GetSelectedChatView(),o=t.GetPopoverChatView(),i=n.chat,r=this.state.bShowBothChats&&t.isBroadcastShown,a=t.m_bShowGlobalChat,s=a&&r||!a&&!r,c=r&&t.isBroadcastShown||!r&&a,l=null;this.state.dropToInviteFriend&&(l=R.createElement(j.CSSTransition,{key:"inviteDrop",classNames:"inviteDrop-anim",timeout:300},R.createElement(dt,{chatView:n,friend:this.state.dropToInviteFriend})));var p=!1,u=null,m=this.ShouldShowVerticalBroadcastChat(),d=t.m_bChatHidden,h=4;if(A.a.STEAM_TV&&(h=2),e.watching_broadcast_steamid&&t.isBroadcastShown){var f=P.h.UIDisplayPrefs,_=(f.nWatchPartyBroadcastHeightPercentage,f.nWatchPartyBroadcastWidthPercentage,this.CalculateBroadcastSectionStyles(m));u=R.createElement(R.Fragment,null,R.createElement(lt,{ref:this.m_refBroadcastContainer,steamID:e.watching_broadcast_steamid.ConvertTo64BitString(),localSteamID:t.m_strLocalBroadcastId,watchLocation:h,bWebRTC:!1,onRequestClose:t.HideBroadcast,onLocalStreamChange:this.OnLocalStreamChange,actions:[R.createElement("div",{key:"ChatPosToggle",onClick:this.ToggleVerticalBroadcastChat,title:""+(m?Object(F.c)("#Broadcast_View_Stack_H"):Object(F.c)("#Broadcast_View_Stack_V")),className:"BroadcastChatPositionToggle "+(m?"right":"bottom")})],style:_,onTheaterMode:t.ToggleTheaterModeBroadcastChat,bVerticalBroadcastChat:!m}),!d&&R.createElement("div",{className:"BroadcastChatDivider "+(m?"vertical":"horizontal"),onMouseDown:this.OnGrabberMouseDown}),d&&R.createElement(ct,{onClick:this.ShowChat,edge:m?"bottom":"right"})),p=!0}else p=!1;var g=!1,b=!1,v={};if(!this.props.isActive){v.display="none";var S=this.m_msWentInactive?performance.now()-this.m_msWentInactive:6e4;1e4<=S&&(g=!0),6e4<=S&&!u&&(b=!0)}var y="chatWindow MultiUserChat",C="ChatRoomGroupDialog_contents";o&&(C+=" InsetWindowOpen"),r&&(C+=" BothChatsDisplayed"),e.IsNamedGroupChat()&&(y+=" namedGroup");var O="chatBody";this.state.dropToInviteFriend&&(O="chatBody chatRoomActiveDrop"),k.f.SettingsStore.FriendsSettings.bCompactFriendsList&&(y+=" compactView"),p&&(y+=" broadcastVisible");var I=null;this.props.bHideMemberList||(I=R.createElement(Qe.b,{groupView:this.props.groupView,inactive:g}));var E,w=this.props.bHideMessageInput||t.isBroadcastShown&&(!r&&t.m_bShowGlobalChat||d)?null:R.createElement(Fe,{key:i.unique_id,chatView:t.GetActiveChatView(),isActive:this.props.isActive,disabled:!1}),M=R.createElement(N.a,Object(G.a)({style:v,className:"chatHistoryAndMembers"},this.GetChatBodyDragDropProps()),R.createElement(j.TransitionGroup,null,l),R.createElement("div",{className:"displayColumn fullWidth"},R.createElement("div",{className:"displayRow minHeightZero"},R.createElement("div",{className:"ChatRoomGroupDialog_history"},R.createElement(_e,{chatView:n,isActive:this.props.isActive}),R.createElement(j.TransitionGroup,null,R.createElement(ut,{groupView:t}))),R.createElement("div",{className:"dropTargetBox"}),I),w));if(e.watching_broadcast_steamid&&t.isBroadcastShown){var D=R.createElement(Ke.a,{emoticonStore:k.f.ChatStore.EmoticonStore,steamID:e.watching_broadcast_steamid.ConvertTo64BitString(),broadcastID:"0",watchLocation:h,hidden:!t.m_bShowGlobalChat,className:this.state.bDraggingChatGrabber?"avoidEvents":void 0});E=R.createElement(R.Fragment,null,D)}var T="chatStack "+(m?"displayRow":"displayColumn");return c&&(T+=" GlobalChatVisible"),s&&(T+=" GroupChatVisible"),R.createElement(N.a,Object(G.a)({"data-activechat":this.props.isActive,style:v,className:y},this.GetTitleBarDragDropProps()),!b&&!this.props.bHideHeader&&R.createElement("div",{className:"chatHeader titleBarContainer"},R.createElement("div",{className:"chatHeaderGradient"}),R.createElement(B.b,{groupView:t,onBroadcastPreviewClick:this.ShowBroadcast}),R.createElement("div",{className:"disconnectBlocker"})),e.readyToRender&&!b&&R.createElement("div",{className:C},R.createElement(Qe.a,{groupView:t,inactive:g}),R.createElement("div",{className:"ChatRoomGroup_MainAndChatEntry displayColumn",ref:this.SetMainContentRef},R.createElement("div",{className:"ChatRoomGroup_Main_ContentAndMembers displayRow"},R.createElement("div",{className:"ChatRoomGroup_Main_Content "+(m?"Vertical":"Horizontal")+" "+(d?"chatHidden":"")},u,(!t.m_bChatHidden||!t.isBroadcastShown)&&R.createElement("div",{className:O},t.isBroadcastShown&&this.RenderInnerChatTabs(),R.createElement("div",{className:T},M,r&&R.createElement("div",{className:"BothChatsSeperator"}),r&&!this.ShouldShowVerticalBroadcastChat()&&R.createElement("div",{className:"InnerChatTab",onClick:function(){return t.SetGlobalBroadcastChatShown(!0)}},R.createElement(L.u,null),R.createElement("span",{className:"InnerChatTabLabel"},Object(F.c)("#Broadcast_Chat_PublicChatTab"))),E),!s&&t.isBroadcastShown&&w))))),!e.readyToRender&&!b&&R.createElement("div",{className:C},R.createElement(Ye.a,{position:"center",string:Object(F.c)("#Chat_ChatRoomGroup_Requesting")})))},Object(G.c)([o.a],e.prototype,"OnDragEnter",null),Object(G.c)([o.a],e.prototype,"OnDragLeave",null),Object(G.c)([o.a],e.prototype,"OnDragOver",null),Object(G.c)([o.a],e.prototype,"OnDrop",null),Object(G.c)([o.a],e.prototype,"OnHTMLKeyEvent",null),Object(G.c)([o.a],e.prototype,"ShouldShowVerticalBroadcastChat",null),Object(G.c)([o.a],e.prototype,"OnLayoutChange",null),Object(G.c)([o.a],e.prototype,"OnGrabberMouseDown",null),Object(G.c)([o.a],e.prototype,"HandleMouseMove",null),Object(G.c)([o.a],e.prototype,"UnregisterDragEvents",null),Object(G.c)([o.a],e.prototype,"OnLocalStreamChange",null),Object(G.c)([o.a],e.prototype,"ShowBroadcast",null),Object(G.c)([o.a],e.prototype,"HideChat",null),Object(G.c)([o.a],e.prototype,"ShowChat",null),Object(G.c)([o.a],e.prototype,"ToggleVerticalBroadcastChat",null),Object(G.c)([o.a],e.prototype,"SetMainContentRef",null),Object(G.c)([o.a],e.prototype,"ToggleShowBothChats",null),e=Object(G.c)([c.a],e)}(R.Component),Xe=n("s+DT"),$e=function(n){function e(e){var t=n.call(this,e)||this;return t.m_fnUnregisterDropComplete=void 0,t.m_bChatHidden=!1,t.m_refBroadcastContainer=R.createRef(),t.state={dropToInviteFriend:void 0,dropGroupToInviteFriend:void 0,dropClanToInvite:void 0,speakerLabelWidth:0},t.m_friendSteamId=Xe.a.InitFromAccountID(e.chatView.chat.accountid_partner).ConvertTo64BitString(),t}return Object(G.d)(e,n),e.prototype.OnDragEnter=function(e,t){if(e?Object(ie.a)("friend"==e.type||"chatroomgroup"==e.type||"clan"==e.type,"Invalid data type passed to FriendChatDialog.OnDrop"):Object(ie.a)(t,"Invalid data type passed to FriendChatDialog.OnDrop"),!e)return!0;var n="friend"==e.type?e.friend:void 0;if(n&&n.accountid!==this.props.chatView.chat.accountid_partner)return this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=P.h.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropToInviteFriend:n}),!0;var o="chatroomgroup"==e.type?e.group:void 0;if(o)return this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=P.h.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropGroupToInviteFriend:o}),!0;var i="clan"==e.type?e.clan:void 0;return i&&(this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=P.h.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropClanToInvite:i})),!0},e.prototype.OnDragLeave=function(){(this.state.dropToInviteFriend||this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0,dropGroupToInviteFriend:void 0,dropClanToInvite:void 0}))},e.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},e.prototype.OnDrop=function(e,t){e?Object(ie.a)("friend"==e.type||"chatroomgroup"==e.type||"clan"==e.type,"Invalid data type passed to FriendChatDialog.OnDrop"):Object(ie.a)(0!=t.dataTransfer.files.length,"Invalid data type passed to FriendChatDialog.OnDrop");var n=this.props.chatView;if(e){var o=t.currentTarget.ownerDocument.defaultView,i=n.chat.chat_partner,r="friend"==e.type?e.friend:void 0,a="chatroomgroup"==e.type?e.group:void 0,s="clan"==e.type?e.clan:void 0;if(r){if(i==r)return;this.state.dropToInviteFriend&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0})),P.h.DragDropManager.SetDropConsumed(),rt({invitee:r,chatview:n,invitedto:i},Object(P.e)(this,t),o)}else(a||s)&&((this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropGroupToInviteFriend:void 0,dropClanToInvite:void 0})),P.h.DragDropManager.SetDropConsumed(),s&&(a=k.f.ChatStore.GetChatRoomGroup(s.GetChatGroupIDIfLoaded())),rt({invitee:i,invitedto:a},Object(P.e)(this,t),o))}else if(0!=t.dataTransfer.files.length){var c=t.dataTransfer.files[0];n.SetFileToUpload(c)}},e.prototype.OnDropComplete=function(e){!e&&this.state.dropToInviteFriend&&(this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0}))},e.prototype.OnNameWidthChanged=function(e){this.setState({speakerLabelWidth:e})},e.prototype.componentDidMount=function(){window.addEventListener("resize",this.OnLayoutChange)},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.OnLayoutChange)},e.prototype.CalculateBroadcastSectionStyles=function(e){if(this.m_bChatHidden)return{width:"100%",height:"100%"};var t=P.h.UIDisplayPrefs,n=t.nWatchPartyBroadcastHeightPercentage,o=t.nWatchPartyBroadcastWidthPercentage,i={};if(e){var r=n||66;if(i.height=r+"%",this.m_elMainContent){var a=this.m_elMainContent,s=a.clientWidth,c=a.clientHeight,l=9/16*s+50,p=Object(Je.a)(r,1,l/c*100);i.height=p+"%"}}else i.width=o?o+"%":"66%",i.overflowY="auto";return i},e.prototype.ShouldShowVerticalBroadcastChat=function(){return void 0!==this.m_bShowVerticalBroadcastChat?this.m_bShowVerticalBroadcastChat:!!this.m_elMainContent&&this.m_elMainContent.clientHeight/this.m_elMainContent.clientWidth>5/7},e.prototype.OnLayoutChange=function(){this.forceUpdate()},e.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents)},e.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),n=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),o=this.ShouldShowVerticalBroadcastChat(),i=o?t.top:t.left,r=o?e.clientY:e.clientX,a=o?n.height:n.width,s=Object(Je.a)((r-i)/a*100,1,100),c=o?"nWatchPartyBroadcastHeightPercentage":"nWatchPartyBroadcastWidthPercentage";P.h.SetUIDisplayPref(c,s)},e.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents)},e.prototype.HideChat=function(){this.SetChatHidden(!0)},e.prototype.ShowChat=function(){this.SetChatHidden(!1)},e.prototype.SetChatHidden=function(e){this.m_bChatHidden=e,this.forceUpdate()},e.prototype.ShowBroadcast=function(){var e=this;k.f.UIStore.SetFriendBroadcastVisible(this.m_friendSteamId,!0),SetBackgroundTimeout(function(){e.props.chatView.OnChatFrameChanged()},30)},e.prototype.HideBroadcast=function(){var e=this;k.f.UIStore.SetFriendBroadcastVisible(this.m_friendSteamId,!1),k.f.UIStore.SetTheaterMode(!1),SetBackgroundTimeout(function(){e.props.chatView.OnChatFrameChanged()},30)},e.prototype.ToggleVerticalBroadcastChat=function(){this.SetVerticalBroadcastChat(!this.ShouldShowVerticalBroadcastChat()),this.SetChatHidden(!1)},e.prototype.ToggleTheaterModeBroadcastChat=function(){k.f.UIStore.SetTheaterMode(!k.f.UIStore.GetTheaterMode())},e.prototype.SetVerticalBroadcastChat=function(e){this.m_bShowVerticalBroadcastChat=e},e.prototype.SetLocalBroadcastId=function(e){this.m_strLocalBroadcastId=e},e.prototype.SetMainContentRef=function(e){this.m_elMainContent=e,this.OnLayoutChange()},e.prototype.GetTitleBarDragDropProps=function(){var e={rgAcceptedTypes:[],bAcceptsFiles:!0};return e.fnDrop=this.OnDrop,e},e.prototype.GetChatBodyDragDropProps=function(){var e={rgAcceptedTypes:["friend"],bAcceptsFiles:!0};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDragOver=this.OnDragOver,e.fnDrop=this.OnDrop,e},e.prototype.RenderInnerChatTabs=function(){return R.createElement("div",{className:"ChatBodyControls"},R.createElement("div",{className:"Close",onClick:this.HideChat,title:Object(F.c)("#Broadcast_View_HideChat")},R.createElement(L.y,{showChat:!1})),R.createElement(st,{chatView:this.props.chatView,additionalClasses:"broadcastVisible"}))},e.prototype.render=function(){if(!this.props.chatView)return null;var e,t=this.props.chatView.chat,n=k.f.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(t.accountid_partner),o=this.props.chatView.BVoiceActive(),i=k.f.UIStore.IsFriendBroadcastVisible(this.m_friendSteamId),r=t.GetShowNonFriendWarning();this.state.dropToInviteFriend?e=R.createElement(j.CSSTransition,{key:"inviteDrop",classNames:"inviteDrop-anim",timeout:300},R.createElement(dt,{chatView:this.props.chatView,friend:this.state.dropToInviteFriend})):(this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(e=R.createElement(j.CSSTransition,{key:"inviteDrop",classNames:"inviteDrop-anim",timeout:300},R.createElement(ht,{chatView:this.props.chatView,group:this.state.dropGroupToInviteFriend,clan:this.state.dropClanToInvite})));var a=!1,s=null,c=this.ShouldShowVerticalBroadcastChat(),l=this.m_bChatHidden;if(i){var p=P.h.UIDisplayPrefs,u=(p.nWatchPartyBroadcastHeightPercentage,p.nWatchPartyBroadcastWidthPercentage,this.CalculateBroadcastSectionStyles(c));s=R.createElement(R.Fragment,null,R.createElement(tt,{ref:this.m_refBroadcastContainer,steamID:Xe.a.InitFromAccountID(t.accountid_partner).ConvertTo64BitString(),localSteamID:this.m_strLocalBroadcastId,watchLocation:12,bWebRTC:!0,onRequestClose:this.HideBroadcast,actions:[R.createElement("div",{key:"ChatPosToggle",onClick:this.ToggleVerticalBroadcastChat,title:""+(c?Object(F.c)("#Broadcast_View_Stack_H"):Object(F.c)("#Broadcast_View_Stack_V")),className:"BroadcastChatPositionToggle "+(c?"right":"bottom")})],style:u,onTheaterMode:this.ToggleTheaterModeBroadcastChat}),!l&&R.createElement("div",{className:"BroadcastChatDivider "+(c?"vertical":"horizontal"),onMouseDown:this.OnGrabberMouseDown}),l&&R.createElement(ct,{onClick:this.ShowChat,edge:c?"bottom":"right"})),a=!0}else a=!1;var m={};this.props.isActive||(m.display="none");var d="chatWindow MultiUserChat";o&&(d+=" VoiceActive",k.f.ChatStore.VoiceChat.IsMicMuted()&&(d+=" MicMuted")),n&&(d+=" VoiceRequested"),r&&(d+=" NotAFriendOrApproved");var h="chatBody";(this.state.dropToInviteFriend||this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(h="chatBody chatRoomActiveDrop"),k.f.SettingsStore.FriendsSettings.bCompactFriendsList&&(d+=" compactView"),a&&(d+=" broadcastVisible");var f=this.m_bChatHidden&&i?null:R.createElement(Fe,{key:t.unique_id,chatView:this.props.chatView,isActive:this.props.isActive,disabled:!1}),_=R.createElement(N.a,Object(G.a)({style:m,className:"chatHistoryAndMembers"},this.GetChatBodyDragDropProps()),R.createElement(j.TransitionGroup,null,e),R.createElement("div",{className:"displayColumn fullWidth"},R.createElement("div",{className:"displayRow minHeightZero"},r&&R.createElement(mt,{chatView:this.props.chatView,friend:t.chat_partner}),R.createElement("div",{className:"ChatRoomGroupDialog_history"},R.createElement(_e,{chatView:this.props.chatView,isActive:this.props.isActive,speakerLabelWidth:this.state.speakerLabelWidth,blockInteraction:r})),!i&&R.createElement(st,{chatView:this.props.chatView,additionalClasses:void 0}),R.createElement("div",{className:"dropTargetBox"})),f)),g="chatStack "+(c?"displayRow":"displayColumn")+" GroupChatVisible";return R.createElement(N.a,Object(G.a)({"data-activechat":this.props.isActive,style:m,className:d},this.GetTitleBarDragDropProps()),R.createElement("div",{className:"chatHeader"}),this.props.isActive&&R.createElement(et,{chatView:this.props.chatView,onNameWidthChanged:this.OnNameWidthChanged}),R.createElement(j.TransitionGroup,null,(o||n)&&R.createElement(j.CSSTransition,{key:"OneOnOneVoiceHeader",classNames:"OneOnOneVoice-anim",timeout:300},R.createElement("div",null,R.createElement(it,{chatView:this.props.chatView})))),R.createElement("div",{className:"ChatRoomGroupDialog_contents"},R.createElement("div",{className:"ChatRoomGroup_MainAndChatEntry displayColumn",ref:this.SetMainContentRef},R.createElement("div",{className:"ChatRoomGroup_Main_ContentAndMembers displayRow"},R.createElement("div",{className:"ChatRoomGroup_Main_Content "+(c?"Vertical":"Horizontal")+" "+(l?"chatHidden":"")},s,(!this.m_bChatHidden||!i)&&R.createElement("div",{className:h},i&&this.RenderInnerChatTabs(),R.createElement("div",{className:g},_)))))))},Object(G.c)([o.a],e.prototype,"OnDragEnter",null),Object(G.c)([o.a],e.prototype,"OnDragLeave",null),Object(G.c)([o.a],e.prototype,"OnDragOver",null),Object(G.c)([o.a],e.prototype,"OnDrop",null),Object(G.c)([o.a],e.prototype,"OnDropComplete",null),Object(G.c)([o.a],e.prototype,"OnNameWidthChanged",null),Object(G.c)([o.a],e.prototype,"ShouldShowVerticalBroadcastChat",null),Object(G.c)([o.a],e.prototype,"OnLayoutChange",null),Object(G.c)([o.a],e.prototype,"OnGrabberMouseDown",null),Object(G.c)([o.a],e.prototype,"HandleMouseMove",null),Object(G.c)([o.a],e.prototype,"UnregisterDragEvents",null),Object(G.c)([o.a],e.prototype,"HideChat",null),Object(G.c)([o.a],e.prototype,"ShowChat",null),Object(G.c)([o.a],e.prototype,"SetChatHidden",null),Object(G.c)([o.a],e.prototype,"ShowBroadcast",null),Object(G.c)([o.a],e.prototype,"HideBroadcast",null),Object(G.c)([o.a],e.prototype,"ToggleVerticalBroadcastChat",null),Object(G.c)([o.a],e.prototype,"ToggleTheaterModeBroadcastChat",null),Object(G.c)([o.a],e.prototype,"SetVerticalBroadcastChat",null),Object(G.c)([o.a],e.prototype,"SetLocalBroadcastId",null),Object(G.c)([o.a],e.prototype,"SetMainContentRef",null),e=Object(G.c)([c.a],e)}(R.Component),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.SpeakerLabel=function(e){e&&this.props.onNameWidthChanged(e.clientWidth)},t.prototype.render=function(){var e=this.props.chatView.chat,t=k.f.SettingsStore.FriendsSettings.nChatFontSize,n="speakerLabelWidthContainer";return t==M.a.k_EChatFontSizeSmall?n+=" smallChatFont":t==M.a.k_EChatFontSizeLarge&&(n+=" largeChatFont"),e.chat_partner.is_ready&&e.self.is_ready?R.createElement("div",{className:n,ref:this.SpeakerLabel},R.createElement("div",{className:"nameWidthLabel"},e.self.display_name+":"),R.createElement("div",{className:"nameWidthLabel"},e.chat_partner.display_name+":")):null},Object(G.c)([o.a],t.prototype,"SpeakerLabel",null),t=Object(G.c)([c.a],t)}(R.Component),tt=R.forwardRef(function(e,t){var n=e.steamID,o=e.localSteamID,i=e.watchLocation,r=e.bWebRTC,a=e.style,s=e.onRequestClose,c=e.actions,l=e.onTheaterMode,p=o||n;return R.createElement("div",{ref:t,style:Object(G.a)({display:"flex",flexDirection:"column"},a)},R.createElement("div",{className:"BroadcastSection"},R.createElement(y.b,{key:p,steamIDBroadcast:p,watchLocation:i,bWebRTC:r,onRequestClose:s,actions:c,onTheaterMode:l,onOpenLinkInNewWindow:v.e}),R.createElement("div",{className:"videoContainerSizer"})),R.createElement(nt,{steamID:n}))}),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.OnClick=function(e,t){var n=A.a.STORE_BASE_URL+"app/"+t;Object(v.e)(e,n),e.stopPropagation()},t.prototype.render=function(){var t=this,e=new Xe.a(this.props.steamID),n=k.f.FriendStore.GetPlayer(e.GetAccountID()),o=n.persona.GetCurrentGameIconURL(),i=n.persona.GetCurrentGameName(),r=n.persona.m_unGamePlayedAppID;return i||o?R.createElement("div",{className:"FriendChatBroadcastDetails"},R.createElement("div",{className:"FriendChatBroadcastDetails_PlayingText"},Object(F.c)("#broadcastDetails_Playing")),o&&R.createElement("img",{className:"FriendChatBroadcastDetails_Icon",src:o}),R.createElement("div",{className:"FriendChatBroadcastDetails_GameName",onClick:function(e){return t.OnClick(e,r)}},i)):null},Object(G.c)([o.a],t.prototype,"OnClick",null),t=Object(G.c)([c.a],t)}(R.Component);n.d(t,"g",function(){return ot}),n.d(t,"i",function(){return it}),n.d(t,"k",function(){return rt}),n.d(t,"f",function(){return st}),n.d(t,"b",function(){return ct}),n.d(t,"a",function(){return lt}),n.d(t,"j",function(){return ut}),n.d(t,"h",function(){return mt}),n.d(t,"d",function(){return dt}),n.d(t,"c",function(){return ht}),n.d(t,"e",function(){return ft});var ot=function(n){function e(e){var t=n.call(this,e)||this;return t.m_keyEventListener="keydown",t.macUserAgentStrings=/(MacIntel|Macintosh|Mac OS X)/,t.linuxUserAgentStrings=/(Linux|X11)/,-1==navigator.userAgent.search(t.macUserAgentStrings)&&-1==navigator.userAgent.search(t.linuxUserAgentStrings)||(t.m_keyEventListener="keyup"),t.props.popup&&t.props.popup.addEventListener(t.m_keyEventListener,t.OnHTMLKeyEvent),t}return Object(G.d)(e,n),e.prototype.componentWillUnmount=function(){this.props.popup&&this.props.popup.removeEventListener(this.m_keyEventListener,this.OnHTMLKeyEvent)},e.prototype.OnCopy=function(e){var t=this.props.popup||window;if(t){var n=t.getSelection();if(0!=n.rangeCount){var o=Object(U.c)(n.getRangeAt(0));void 0!==o&&("Win32"==t.navigator.platform&&(o=o.replace(/\n/g,"\r\n")),e.clipboardData.setData("text",o),e.preventDefault())}}},e.prototype.OnChatTabRef=function(e){this.m_refChatTabs=e},e.prototype.OnDragEnter=function(e){if(Object(ie.a)(e&&("chattab"==e.type||"friend"==e.type||"chatroomgroup"==e.type),"Invalid data type passed to MultiChatDialog.OnDragEnter",e.type),"chattab"==e.type){var t=this.props.tabs,n=e;(n.tabSet!=t||1<t.tabCount)&&(t.Focus(),this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()!=n.tab&&this.m_refChatTabs.SetDragTab(n.tab))}return!0},e.prototype.OnDragLeave=function(){this.m_refChatTabs&&this.m_refChatTabs.SetDragTab(void 0)},e.prototype.OnDragOver=function(e){this.m_refChatTabs&&this.m_refChatTabs.UpdateDragOffset(e)},e.prototype.OnDrop=function(e,t){if(Object(ie.a)(e&&("chattab"==e.type||"friend"==e.type||"chatroomgroup"==e.type),"Invalid data type passed to MultiChatDialog.OnDrop",e.type),"chattab"==e.type){var n=e,o=-1;this.m_refChatTabs&&(o=this.m_refChatTabs.state.iDragIndex),P.h.DragDropManager.SetDropConsumed(),n.tabSet!=this.props.tabs&&(n.tabSet.RemoveTab(n.tab),this.props.tabs.AddTab(n.tab),P.h.DragDropManager.EndDrag()),-1!=o&&this.props.tabs.MoveTabToIndex(n.tab,o),this.props.tabs.ActivateTab(n.tab),this.setState({tabDrag:void 0})}else if("friend"==e.type){P.h.DragDropManager.SetDropConsumed(),e.friend.OpenChatDialog(Object(P.e)(this,t))}else if("chatroomgroup"==e.type){P.h.DragDropManager.SetDropConsumed();var i=e;k.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(P.e)(this),i.group,!0)}},e.prototype.OnHTMLKeyEvent=function(e){if(A.a.IN_CLIENT&&e.ctrlKey&&!e.altKey){if(!e.shiftKey&&9==e.keyCode||34==e.keyCode)this.props.tabs.ActivateNextTab();else if(9==e.keyCode||33==e.keyCode)this.props.tabs.ActivatePreviousTab();else{if("W"!=e.key&&"w"!=e.key)return;this.props.tabs.RemoveTab(this.props.tabs.activeTab)}return e.preventDefault(),void e.stopPropagation()}},e.prototype.OnKeyDown=function(e){var t=this.props.tabs.activeTab;if(t&&!(e.ctrlKey||e.altKey||e.metaKey||1<e.key.length)){var n=e.target,o=n&&n.tagName?n.tagName.toLowerCase():"";"input"!=o&&"select"!=o&&"textarea"!=o&&t.GetChatView().FocusTextInput()}},e.prototype.render=function(){var i=this,r=this.props.tabs.activeTab;this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()&&(r=this.m_refChatTabs.GetDragTab());var e=this.props.tabs.tabs.slice();this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()&&-1==e.indexOf(this.m_refChatTabs.GetDragTab())&&e.push(this.m_refChatTabs.GetDragTab()),e.sort(function(e,t){return e.GetUniqueID()<t.GetUniqueID()?1:-1});var t=e.map(function(e){var t=null,n=e instanceof _.d&&e,o=e instanceof C.b;return t=n?R.createElement(Ze,{groupView:n,isActive:e==r,popup:i.props.popup}):o?R.createElement(pt,{broadcastView:e,isActive:e==r,popup:i.props.popup}):R.createElement($e,{chatView:e.GetChatView(),isActive:e==r}),R.createElement(p.a,{key:e.GetUniqueID()},t)});return R.createElement(N.a,{className:"multiChatDialog",rgAcceptedTypes:["chattab","friend","chatroomgroup"],fnDragEnter:this.OnDragEnter,fnDragOver:this.OnDragOver,fnDragLeave:this.OnDragLeave,fnDrop:this.OnDrop,onKeyDown:this.OnKeyDown,onCopy:this.OnCopy,tabIndex:0},R.createElement(d.a,{tabSet:this.props.tabs,popup:this.props.popup,activeTab:r,ref:this.OnChatTabRef,ResponsiveWindowState:this.props.ResponsiveWindowState,showOpenFriendsList:this.props.showOpenFriendsList}),R.createElement("div",{className:"chatDialogs"},0==t.length&&R.createElement("div",{className:"emptyChatDialogs"},Object(F.c)("#Chat_EmptyDialogsWindowMsg")),t))},Object(G.c)([o.a],e.prototype,"OnCopy",null),Object(G.c)([o.a],e.prototype,"OnChatTabRef",null),Object(G.c)([o.a],e.prototype,"OnDragEnter",null),Object(G.c)([o.a],e.prototype,"OnDragLeave",null),Object(G.c)([o.a],e.prototype,"OnDragOver",null),Object(G.c)([o.a],e.prototype,"OnDrop",null),Object(G.c)([o.a],e.prototype,"OnHTMLKeyEvent",null),Object(G.c)([o.a],e.prototype,"OnKeyDown",null),e=Object(G.c)([c.a],e)}(R.Component),it=function(t){function e(e){return t.call(this,e)||this}return Object(G.d)(e,t),e.prototype.InitiateVoiceChat=function(){var e=this.props.chatView.chat.accountid_partner;k.f.VoiceStore.InitiateFriendChat(e)},e.prototype.VoidOnClick=function(){},e.prototype.EndVoiceChat=function(){k.f.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==this.props.chatView.chat.accountid_partner&&k.f.VoiceStore.OnUserEndVoiceChat()},e.prototype.OnCloseClick=function(){k.f.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==this.props.chatView.chat.accountid_partner?k.f.VoiceStore.OnUserEndVoiceChat():k.f.VoiceStore.OnRejectOneOnOneVoiceChatForPartner(this.props.chatView.chat.accountid_partner)},e.prototype.render=function(){var e=k.f.VoiceStore.BInitiatedOneOnOneChat(this.props.chatView.chat.accountid_partner),t=k.f.CMInterface.steamid.GetAccountID(),n=this.props.chatView.chat.accountid_partner,o=k.f.FriendStore.GetPlayer(t),i=k.f.VoiceStore.BSelfHasAcceptedOrInitiatedOneOnOneChat(n),r=k.f.VoiceStore.BSelfHadPreviouslyJoinedOneOnOneChat(n),a=this.props.chatView.chat.chat_partner,s=k.f.VoiceStore.BPartnerHasAcceptedOrInitiatedOneOnOneChat(n),c=!i&&k.f.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(a.accountid),l=void 0;l=e||i?R.createElement(j.CSSTransition,{key:t,classNames:"friend-anim",timeout:320},R.createElement(S.c,{friend:o,key:t,showVoiceLevel:!0,context:{chat:this.props.chatView.chat},listStatusIndicator:R.createElement("div",{className:"connectionSpinner"})})):R.createElement(j.CSSTransition,{key:t,classNames:"friend-anim",timeout:320},R.createElement("div",{className:"friend emptyFriend",onClick:!i&&this.InitiateVoiceChat},R.createElement("div",{className:"avatarHolder"},R.createElement("img",{className:"avatar",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",draggable:!1}))));var p=[];e&&p.push(l),s||c?p.push(R.createElement(j.CSSTransition,{key:n,classNames:"friend-anim",timeout:320},R.createElement(S.c,{friend:a,key:n,showVoiceLevel:!0,context:{chat:this.props.chatView.chat},listStatusIndicator:R.createElement("div",{className:"connectionSpinner"})}))):p.push(R.createElement(j.CSSTransition,{key:n,classNames:"friend-anim",timeout:320},R.createElement("div",{className:"friend emptyFriend",onClick:i?this.VoidOnClick:this.InitiateVoiceChat},R.createElement("div",{className:"avatarHolder "},R.createElement("img",{className:"avatar",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",draggable:!1}))))),e||p.push(l);var u=void 0;u=i&&s?R.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.EndVoiceChat},Object(F.c)("#Voice_StopTalking")):i&&!s?R.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.EndVoiceChat},Object(F.c)("#Voice_EndVoice")):R.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.InitiateVoiceChat},Object(F.c)("#Voice_StartTalking"));var m="",d="OneOnOneVoiceRoomControls",h=!1;i&&!s?(m=Object(F.c)("#Voice_WaitingForFriendToJoin",a.display_name),d+=" WaitingForPartner"):s&&!i?(r?m=Object(F.c)("#Voice_ChannelRejoinAvailable",a.display_name):(m=Object(F.c)("#Voice_ChannelAvailable",a.display_name),d+=" WaitingForYouFirstTime"),d+=" WaitingForYou"):(m=Object(F.c)("#Voice_ChannelActive",a.display_name),d+=" OneOnOneVoiceActive",h=!0);var f=R.createElement("div",{className:"OneOnOneVoiceStatusLabel"},m);return R.createElement("div",{className:d},R.createElement("div",{className:"VoiceToggleIconCtn"},R.createElement(L.mb,null),R.createElement("div",{className:"Sonar"},R.createElement("div",{className:"SonarCircle"}))),R.createElement("div",{className:"OneOnOneVoiceMembers"},u,p,f),!h&&R.createElement("div",{className:"OneOnOneVoiceClose",onClick:this.OnCloseClick,title:i?Object(F.c)("#Voice_EndVoice"):Object(F.c)("#Tooltip_DismissVoice")},R.createElement(L.pb,null)))},Object(G.c)([o.a],e.prototype,"InitiateVoiceChat",null),Object(G.c)([o.a],e.prototype,"VoidOnClick",null),Object(G.c)([o.a],e.prototype,"EndVoiceChat",null),Object(G.c)([o.a],e.prototype,"OnCloseClick",null),e=Object(G.c)([c.a],e)}(R.Component);function rt(e,t,n){var o,i=!1,r=!0;if(e.invitedto instanceof g.b)o=300;else if(e.invitedto instanceof _.b){o=340,(a=e.invitedto).BCanInvite()||a.BHasMember(e.invitee.accountid)||(r=!1)}else if(e.invitedto instanceof f.a){var a;i=!0,o=340,(a=e.invitedto.GetGroup()).BCanInvite()||a.BHasMember(e.invitee.accountid)||(r=!1)}r?Object(b.b)(R.createElement(at,Object(G.a)({},e)),n,"InviteDialog",{strTitle:i?Object(F.c)("#Chat_Actions_InviteFriend_VoiceChat"):Object(F.c)("#Chat_Actions_DropGroupInvite_Title"),popupWidth:650,popupHeight:o},Object(P.g)(n)):Object(m.c)(n,Object(F.c)("#Chat_Actions_DropGroupInvite_Denied"),Object(F.c)("#Chat_Actions_DropGroupInvite_Denied_Description"))}var at=function(n){function e(e){var t=n.call(this,e)||this;return t.invitee=t.props.invitee,t}return Object(G.d)(e,n),e.prototype.AddMoreFriends=function(e){var t=[],n=e.currentTarget.ownerDocument.defaultView;t.push(this.invitee.accountid),this.props.invitedto instanceof g.b?Object(a.c)(Object(P.e)(this,e),n,this.props.chatview,!0,t):this.props.invitedto instanceof _.b?Object(i.c)(Object(P.e)(this,e),n,this.props.invitedto,void 0,!0,t):this.props.invitedto instanceof f.a&&Object(i.b)(Object(P.e)(this,e),n,this.props.invitedto.GetGroup(),this.props.invitedto,t),this.props.closeModal()},e.prototype.Cancel=function(){this.props.closeModal()},e.prototype.componentDidMount=function(){var e=r.findDOMNode(this);if(e){var t=e.querySelector("button[type=submit]");t&&t.focus()}},e.prototype.OnInviteClicked=function(e){var t=e.currentTarget.ownerDocument.defaultView;if(this.props.invitedto instanceof g.b)this.invitedToPlayer=this.props.invitedto,(n=[]).push(this.invitedToPlayer.persona.m_steamid.ConvertTo64BitString()),n.push(this.invitee.persona.m_steamid.ConvertTo64BitString()),Object(a.b)(t,this.props.chatview,n);else if(this.props.invitedto instanceof _.b)this.invitedToGroup=this.props.invitedto,this.invitedToGroup.InviteFriend(this.invitee.accountid);else if(this.props.invitedto instanceof f.a){var n;(n=[]).push(this.invitee.accountid),this.invitedToChatRoom=this.props.invitedto,this.invitedToChatRoom.GetGroup().InviteFriend(this.invitee.accountid,this.invitedToChatRoom)}this.props.closeModal()},e.prototype.render=function(){var e,t,n,o=this.props.invitee,i=k.f.FriendStore.self,r=!1;this.props.invitedto instanceof g.b?e=this.props.invitedto:this.props.invitedto instanceof _.b?t=this.props.invitedto:this.props.invitedto instanceof f.a&&(n=this.props.invitedto);var a,s,c=!o.is_in_beta,l=e&&!e.is_in_beta,p="#Chat_Actions_DropGroupInvite_Confirm",u=!1;t?(t.BIsUserGroupMember(o)&&(p="#Chat_Actions_DropGroupInvite_Member_Confirm"),r=!!t.BIsClanChatRoom()&&k.f.FriendStore.ClanStore.GetClan(t.GetClanID()).BIsOGG(),a=t.name,s=R.createElement(B.a,{group:t,name:t.name}),u=t.BIsUserGroupMember(o)):e?(p="#Chat_Actions_DropGroupInvite_1v2_Confirm",a=e.display_name,s=R.createElement("div",{className:"displayRow"},R.createElement("div",{className:"dropGroupInviteDialog_Friend"},R.createElement("img",{src:i.persona.avatar_url_medium})),R.createElement("div",{className:"dropGroupInviteDialog_Friend"},R.createElement("img",{src:e.persona.avatar_url_medium})))):n&&(p="#Chat_Actions_DropVoiceInvite_Confirm",a=n.name,s=R.createElement("div",{className:"displayRow"},R.createElement(L.mb,null)));var m=null,d=!0;return k.f.IsInBeta()&&(d=!c&&!l,l&&c?m=R.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(F.c)("#Chat_InviteFriend_Unavailable_Short_NoBetas")):c?m=R.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(F.e)("#Chat_InviteFriend_Unavailable_Short",R.createElement("span",{className:"whiteText"},o.display_name))):l&&(m=R.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(F.e)("#Chat_InviteFriend_Unavailable_Short_InvitedTo",R.createElement("span",{className:"whiteText"},e.display_name))))),R.createElement(b.a,{onEscKeypress:this.Cancel},R.createElement(h.h,{classNameContent:"GenericConfirmDialog",onSubmit:this.OnInviteClicked,bCenterVertically:!0},R.createElement(h.m,null,n?Object(F.c)("#Chat_Actions_InviteFriend_VoiceChat"):Object(F.c)("#Chat_Actions_DropGroupInvite_Title")),R.createElement(h.b,null,R.createElement("div",{className:"dropGroupInviteDialog displayColumn"+(t||n?" groupInviteHeight":"")},d&&R.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(F.e)(p,R.createElement("span",{className:"highlight"},o.display_name),R.createElement("span",{className:"highlight"},a),e&&R.createElement("span",{className:"highlight"},Object(F.c)("#Chat_You")))),m,R.createElement("div",{className:"dropGroupInviteDialog_Graphic"+(r?" isOGGGroup":"")},R.createElement("div",{className:"dropGroupInviteDialog_Friend"},R.createElement("img",{src:o.persona.avatar_url_medium})),d?R.createElement("div",{className:"movingArrow"},R.createElement(L.b,{angle:90})):R.createElement("div",{className:"staticX"},R.createElement(L.pb,null)),s,R.createElement("div",{className:"addMoreFriendsButton",onClick:this.AddMoreFriends},R.createElement("div",null,Object(F.c)("#Chat_Actions_AddMoreFriends")),R.createElement("div",{className:"ExpandArrow"}))))),R.createElement(h.j,null,R.createElement(h.D,null,R.createElement(h.x,{disabled:c||l,onClick:this.OnInviteClicked},u?Object(F.c)("#Chat_SendLink"):Object(F.c)("#Chat_Invite")," "),R.createElement(h.d,{onClick:this.Cancel},Object(F.c)("#Button_Cancel"))))))},Object(G.c)([o.a],e.prototype,"AddMoreFriends",null),Object(G.c)([o.a],e.prototype,"Cancel",null),Object(G.c)([o.a],e.prototype,"OnInviteClicked",null),e=Object(G.c)([c.a],e)}(R.Component),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.AddFriendClick=function(e){this.ContinueCreateChat(Object(P.e)(this,e),Object(l.n)(e))},t.prototype.AddFriendClickNotInBeta=function(o){return Object(G.b)(this,void 0,void 0,function(){var t,n;return Object(G.e)(this,function(e){switch(e.label){case 0:return t=Object(P.e)(this,o),n=Object(l.n)(o),k.f.IsInBeta()?(Object(m.c)(n,"",Object(F.c)("#Chat_InviteFriend_Unavailable",this.props.chatView.chat.chat_partner.display_name)),[3,3]):[3,1];case 1:return[4,Object(m.a)(n,"",Object(F.c)("#Chat_InviteFriend_Unavailable_Released",this.props.chatView.chat.chat_partner.display_name),Object(F.c)("#Chat_StillInVoiceDialog_KeepChatting"))];case 2:e.sent()&&this.ContinueCreateChat(t,n),e.label=3;case 3:return[2]}})})},t.prototype.ContinueCreateChat=function(e,t){Object(a.c)(e,t,this.props.chatView,!0)},t.prototype.render=function(){var e=this.props.chatView.chat.chat_partner,t="inviteAnotherFriendButton";return this.props.additionalClasses&&(t+=" "+this.props.additionalClasses),R.createElement("div",{title:Object(F.c)("#Chat_AddFriend_Hint"),className:t,onClick:e.is_in_beta?this.AddFriendClick:this.AddFriendClickNotInBeta},R.createElement(L.B,null))},Object(G.c)([o.a],t.prototype,"AddFriendClick",null),Object(G.c)([o.a],t.prototype,"AddFriendClickNotInBeta",null),t=Object(G.c)([c.a],t)}(R.Component),ct=function(e){var t=e.onClick,n=e.edge;return R.createElement("div",{className:Object(W.a)("BroadcastChatExpander",n),onClick:t,title:Object(F.c)("#Broadcast_View_ShowChat")},R.createElement(L.y,{showChat:!0}))},lt=R.forwardRef(function(e,t){var n=e.steamID,o=e.localSteamID,i=e.watchLocation,r=e.bWebRTC,a=e.style,s=e.onRequestClose,c=e.actions,l=e.onTheaterMode,p=e.onLocalStreamChange,u=e.bVerticalBroadcastChat,m=o||n;return R.createElement("div",{ref:t,style:Object(G.a)({display:"flex",flexDirection:"column"},a)},R.createElement("div",{className:"BroadcastSection"},R.createElement(y.b,{key:m,steamIDBroadcast:m,watchLocation:i,bWebRTC:r,onRequestClose:s,actions:c,onTheaterMode:l,onOpenLinkInNewWindow:v.e}),R.createElement("div",{className:"videoContainerSizer"})),R.createElement("div",{className:"BroadcastDetailsSection"},R.createElement(y.a,{steamID:m,onLocalStreamChange:p,bVerticalBroadcastChat:u})))}),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=this.props.broadcastView;if(!e)return null;var t={};return this.props.isActive||(t.display="none"),R.createElement(O.a,{style:t,broadcastView:e,popup:this.props.popup})},t=Object(G.c)([c.a],t)}(R.Component),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.OnTextChannelCloseClick=function(e){this.props.groupView.ClosePopoverChat()},t.prototype.OnChatHistoryRef=function(e){e&&e.Focus()},t.prototype.render=function(){var e=this.props.groupView.GetPopoverChatView();return e?R.createElement(j.CSSTransition,{key:"quickChat",classNames:"chatWindow-anim",timeout:320},R.createElement("div",{className:"VoiceRoomChatHistory"},R.createElement("div",{className:"VoiceRoomChatWindow"},R.createElement("div",{className:"VoiceRoomChatTitle"},R.createElement("div",{className:"VoiceRoomTitleLabels"},R.createElement("div",{className:"VoiceChatTextChannelName"},Object(F.c)("#Chat_Scratch_Pad"))),R.createElement("div",{className:"MinimizeTextChat",onClick:this.OnTextChannelCloseClick},R.createElement(L.pb,null))),R.createElement("div",{className:"VoiceChatTextChannelDesc"},Object(F.c)("#Chat_Scratch_Pad_Desc")),R.createElement(_e,{chatView:e,isActive:!0,ref:this.OnChatHistoryRef})))):null},Object(G.c)([o.a],t.prototype,"OnTextChannelCloseClick",null),Object(G.c)([o.a],t.prototype,"OnChatHistoryRef",null),t=Object(G.c)([c.a],t)}(R.Component),mt=function(t){function e(e){return t.call(this,e)||this}return Object(G.d)(e,t),e.prototype.OnBlock=function(){k.f.FriendStore.BlockPlayer(this.props.friend,!1),k.f.UIStore.CloseTabByID(this.props.chatView.GetUniqueID())},e.prototype.OnAllow=function(){k.f.FriendStore.SetApprovedNonFriendMessages(this.props.friend.accountid)},e.prototype.render=function(){return R.createElement("div",{className:"NotAFriendMessage"},R.createElement("div",{className:"NotAFriendBody"},R.createElement("div",{className:"Exclamation"},R.createElement(L.f,null)),R.createElement("div",{className:"Explanation"},R.createElement("div",{className:"ExplanationHeader"},Object(F.c)("#DirectMessageFromNonFriend")),R.createElement("div",{className:"ExplanationBody"},Object(F.c)("#DirectMessageFromNonFriendNote")),R.createElement(v.b,{href:"https://support.steampowered.com/kb_article.php?ref=1266-OAFV-8478",className:"ExplanationMoreInfo"},Object(F.c)("#Generic_More_Info"))),R.createElement("div",{className:"Buttons"},R.createElement("button",{className:"NotAFriendActionButton",onClick:this.OnBlock},Object(F.c)("#NonFriendAction_Block")),R.createElement("button",{className:"NotAFriendActionButton",onClick:this.OnAllow},Object(F.c)("#NonFriendAction_Allow")))))},Object(G.c)([o.a],e.prototype,"OnBlock",null),Object(G.c)([o.a],e.prototype,"OnAllow",null),e=Object(G.c)([c.a],e)}(R.Component),dt=function(t){function e(e){return t.call(this,e)||this}return Object(G.d)(e,t),e.prototype.render=function(){var e=!1;return this.props.chatView.chat instanceof f.a&&(e=!0),R.createElement("div",{className:"chatModalCover inviteDrop"},R.createElement(b.a,null,R.createElement(h.m,null,e?Object(F.c)("#Chat_DropToInviteGroup"):Object(F.c)("#Chat_DropToInvite")),R.createElement(h.g,null,R.createElement(h.c,null,R.createElement(S.c,{friend:this.props.friend,context:null,avatarQualityFull:!0})))))},e=Object(G.c)([c.a],e)}(R.Component),ht=function(t){function e(e){return t.call(this,e)||this}return Object(G.d)(e,t),e.prototype.render=function(){var e="";return this.props.group?e=this.props.group.name:this.props.clan&&(e=this.props.clan.name),R.createElement("div",{className:"chatModalCover inviteDrop DropGroupToInviteFriend"},R.createElement(b.a,null,R.createElement(h.m,null,Object(F.c)("#Chat_DropGroupToInviteFriend")),R.createElement(h.g,null,R.createElement(h.c,{className:"avatarHolder"},this.props.clan?R.createElement(B.c,{clan:this.props.clan,large:!0}):R.createElement(B.a,{group:this.props.group,large:!0}),R.createElement("div",{className:"dropGroupName"},e)))))},e=Object(G.c)([c.a],e)}(R.Component),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(G.d)(t,e),t.prototype.render=function(){var e=!1;if(!(this.props.chatView.chat instanceof u.a))return null;var t=this.props.chatView.chat;return t.is_friend_typing&&(e=!0),R.createElement("div",{className:"FriendChatTypingNotification"+(e?" FriendIsTyping":"")},Object(F.c)("#Friend_Chat_Typing",t.chat_partner.display_name))},t=Object(G.c)([c.a],t)}(R.Component)},e2SU:function(e,t,n){"use strict";n.d(t,"z",function(){return c}),n.d(t,"X",function(){return l}),n.d(t,"g",function(){return p}),n.d(t,"j",function(){return u}),n.d(t,"o",function(){return m}),n.d(t,"E",function(){return d}),n.d(t,"H",function(){return h}),n.d(t,"p",function(){return f}),n.d(t,"db",function(){return _}),n.d(t,"S",function(){return g}),n.d(t,"Q",function(){return b}),n.d(t,"ob",function(){return v}),n.d(t,"pb",function(){return S}),n.d(t,"mb",function(){return y}),n.d(t,"fb",function(){return C}),n.d(t,"w",function(){return O}),n.d(t,"v",function(){return I}),n.d(t,"N",function(){return E}),n.d(t,"P",function(){return w}),n.d(t,"a",function(){return M}),n.d(t,"t",function(){return D}),n.d(t,"B",function(){return T}),n.d(t,"L",function(){return G}),n.d(t,"nb",function(){return R}),n.d(t,"K",function(){return j}),n.d(t,"k",function(){return L}),n.d(t,"O",function(){return A}),n.d(t,"M",function(){return k}),n.d(t,"ab",function(){return P}),n.d(t,"h",function(){return N}),n.d(t,"l",function(){return B}),n.d(t,"f",function(){return F}),n.d(t,"D",function(){return x}),n.d(t,"gb",function(){return V}),n.d(t,"kb",function(){return U}),n.d(t,"A",function(){return H}),n.d(t,"c",function(){return W}),n.d(t,"b",function(){return z}),n.d(t,"n",function(){return q}),n.d(t,"eb",function(){return K}),n.d(t,"F",function(){return Y}),n.d(t,"I",function(){return J}),n.d(t,"T",function(){return Q}),n.d(t,"Z",function(){return Z}),n.d(t,"R",function(){return X}),n.d(t,"hb",function(){return $}),n.d(t,"ib",function(){return ee}),n.d(t,"W",function(){return te}),n.d(t,"r",function(){return ne}),n.d(t,"s",function(){return oe}),n.d(t,"m",function(){return ie}),n.d(t,"G",function(){return re}),n.d(t,"cb",function(){return ae}),n.d(t,"bb",function(){return se}),n.d(t,"lb",function(){return ce}),n.d(t,"u",function(){return le}),n.d(t,"U",function(){return pe}),n.d(t,"V",function(){return ue}),n.d(t,"y",function(){return me}),n.d(t,"Y",function(){return de}),n.d(t,"d",function(){return he}),n.d(t,"J",function(){return fe}),n.d(t,"jb",function(){return _e}),n.d(t,"C",function(){return ge}),n.d(t,"q",function(){return be}),n.d(t,"qb",function(){return ve}),n.d(t,"e",function(){return Se}),n.d(t,"i",function(){return ye}),n.d(t,"x",function(){return Ce});var o=n("mrSG"),i=n("q1tI"),r=n("twdX"),a=n.n(r),s=n("QHER");n("/7KC"),n("vvG3");function c(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Hyperlink","data-name":"Layer 1",viewBox:"0 0 100 100",x:"0px",y:"0px"},i.createElement("g",{"data-name":"Group"},i.createElement("path",{"data-name":"Path",d:"M50.86,20.23l-9,9,4.24,4.24,9-9c6.35-6.35,16.09-6.93,21.73-1.3s5,15.38-1.3,21.73l-9,9,4.24,4.24,9-9c8.69-8.69,9.27-22.24,1.3-30.21S59.55,11.55,50.86,20.23Z"}),i.createElement("path",{"data-name":"Path",d:"M44.89,75.53a17.22,17.22,0,0,1-11.28,5.13A13.23,13.23,0,0,1,19.34,66.39a17.22,17.22,0,0,1,5.13-11.28l9-9-4.24-4.24-9,9a23.21,23.21,0,0,0-6.88,15.22c0,.37,0,.74,0,1.11A19.19,19.19,0,0,0,33.91,86.66a23.21,23.21,0,0,0,15.22-6.88l9-9-4.24-4.24Z"}),i.createElement("rect",{"data-name":"Path",className:"Link1",x:"28.75",y:"47",width:"42.48",height:"6",transform:"translate(-20.71 50) rotate(-45)"})))}function l(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Settings",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-305.5 396.5 256 256",enableBackground:"new -305.5 396.5 256 256"},i.createElement("path",{d:"M-232.755,589.942l3.103,2.408c5.78,4.492,11.973,8.18,18.409,10.959l3.581,1.547l2.276,33.783 c0.089,1.33,1.385,2.54,2.715,2.54h48.62c1.355,0,2.745-1.273,2.852-2.621l2.74-33.284l3.602-1.496 c6.406-2.656,12.646-6.262,18.554-10.707l3.137-2.366l30.578,15.009c1.155,0.571,2.924,0.017,3.563-1.087l24.303-42.1 c0.674-1.173,0.265-3.014-0.852-3.785l-27.872-19.309l0.469-3.832c0.495-4.032,0.725-7.395,0.725-10.57 c0-3.129-0.227-6.5-0.687-10.307l-0.469-3.896l28.699-19.253c1.112-0.741,1.509-2.473,0.84-3.627l-24.3-42.104 c-0.657-1.139-2.502-1.727-3.7-1.155l-31.208,14.748l-3.091-2.341c-5.571-4.224-11.466-7.688-17.522-10.306l-3.58-1.548 l-2.34-34.887c-0.089-1.33-1.381-2.536-2.715-2.536h-48.617c-1.355,0-2.74,1.274-2.851,2.626l-2.834,34.371l-3.593,1.501 c-6.082,2.535-12.028,5.924-17.667,10.071l-3.124,2.302l-31.392-15.413c-1.168-0.575-2.924-0.025-3.559,1.074l-24.309,42.107 c-0.678,1.172-0.264,3.014,0.848,3.781l28.068,19.444l-0.524,3.883c-0.592,4.378-0.865,8.018-0.865,11.462 c0,2.988,0.179,6.065,0.55,9.403l0.431,3.853l-28.528,19.125c-1.108,0.742-1.509,2.468-0.84,3.632l24.308,42.1 c0.656,1.142,2.489,1.726,3.7,1.154L-232.755,589.942z M-177.498,560.051c-19.311,0-35.02-15.709-35.02-35.02 s15.709-35.02,35.02-35.02s35.02,15.709,35.02,35.02S-158.188,560.051-177.498,560.051z"}))}function p(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ChatSettings",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 600 600"},i.createElement("g",null,i.createElement("path",{d:"M256,0C126.6,0,21.3,104.7,21.3,233.7c0,65.9,26.5,125.4,74.7,168.3v99.3c0,3.8,2,7.4,5.3,9.2c1.7,1,3.5,1.5,5.3,1.5   c1.8,0,3.7-0.5,5.4-1.5l85.8-50.3c18.9,4.8,38.4,7.3,58.1,7.3c129.4,0,234.7-104.9,234.7-233.7C490.7,104.7,385.4,0,256,0z    M405.3,254.1L370,260c-3,13.5-8.3,26-15.5,37.3l20.8,29.2L347.8,354l-29.2-20.8c-11.3,7.2-23.8,12.5-37.3,15.5l-5.9,35.3h-39   l-5.9-35.3c-13.5-3-26-8.3-37.3-15.5L164.2,354l-27.5-27.5l20.8-29.2C150.3,286,145,273.5,142,260l-35.3-5.9v-39l35.3-5.9   c3-13.5,8.3-26,15.5-37.3l-20.8-29.2l27.5-27.5l29.2,20.8c11.3-7.2,23.8-12.5,37.3-15.5l5.9-35.3h39l5.9,35.3   c13.5,3,26,8.3,37.3,15.5l29.2-20.8l27.5,27.5L354.5,172c7.2,11.3,12.5,23.8,15.5,37.3l35.3,5.9V254.1z"}),i.createElement("circle",{cx:"256",cy:"234.6",r:"45.9"})))}function u(){return i.createElement("svg",{version:"1.1",className:"SVGIcon_Button SVGIcon_CopyToClipboard",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"178.25,197.25 247,197.25 247,82.5 175,10.25 111.5,10.25 111.5,56 "}),i.createElement("polygon",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"155,133 83,60.75 11,60.75 11,247.75 155,247.75 "}),i.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"83,60.75 83,133 155,133 "}),i.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"175,10.25 175,82.5 247,82.5 "}))}function m(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DownArrowContextMenu","data-name":"Layer 1",viewBox:"0 0 128 128",x:"0px",y:"0px"},i.createElement("polygon",{points:"50 59.49 13.21 22.89 4.74 31.39 50 76.41 95.26 31.39 86.79 22.89 50 59.49"}))}function d(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_MagnifyingGlass",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"},i.createElement("g",{transform:"translate(0,-952.36218)"},i.createElement("path",{className:"ColorSelector",d:"m 40.99855,964.36216 c -15.9798,0 -28.9986,13.01864 -28.9986,28.99862 0,15.97992 13.0188,28.99862 28.9986,28.99862 6.9189,0 13.2881,-2.4349 18.2803,-6.4997 l 23.5927,23.6239 c 1.1714,1.1714 3.0784,1.1715 4.2498,0 1.1716,-1.1715 1.1716,-3.0783 0,-4.2498 l -23.6239,-23.5926 c 4.0649,-4.9923 6.4997,-11.3615 6.4997,-18.28042 0,-15.97998 -13.0187,-28.99862 -28.9986,-28.99862 z m 0,5.99972 c 12.7374,0 22.9989,10.26145 22.9989,22.9989 0,12.73732 -10.2615,22.99892 -22.9989,22.99892 -12.7374,0 -22.9989,-10.2616 -22.9989,-22.99892 0,-12.73745 10.2615,-22.9989 22.9989,-22.9989 z",fill:"#ffffff",fillOpacity:"1",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"})))}function h(e){var t="SVGIcon_Button SVGIcon_Microphone";return e.className&&(t+=" "+e.className),i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-127.5 664.5 256 256"},i.createElement("g",{className:"MicBase"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{d:"M-64.7,826.3c-0.5-2.9-0.8-5.8-0.8-8.7v-38.2h11.2v36.5L-64.7,826.3z"}),i.createElement("path",{d:"M-54.8,779.9v35.8l-9.6,9.6c-0.4-2.6-0.6-5.1-0.6-7.6v-37.7H-54.8 M-53.8,778.9H-66v38.7c0,3.3,0.4,6.5,1,9.7l11.2-11.2 V778.9L-53.8,778.9z"})),i.createElement("g",null,i.createElement("path",{d:"M56.8,817.6c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1h-35.2 c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6v-38.7H56.8V817.6z"}),i.createElement("path",{d:"M69,778.9H56.8v38.7c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1 h-35.2c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6V778.9L69,778.9z"}))),i.createElement("g",null,i.createElement("path",{d:"M40.6,712.5c0-21.6-17.5-39.1-39.1-39.1c-21.6,0-39.1,17.5-39.1,39.1v87.4l10-10v-72.4h0v-5c0-16.1,13.1-29.1,29.1-29.1 c16.1,0,29.1,13.1,29.1,29.1v5v14.1l10-10V712.5z"})),i.createElement("g",null,i.createElement("path",{d:"M-4.7,835.4c-2.2-0.5-4.4-1.2-6.4-2.2C-9.1,834.2-6.9,834.9-4.7,835.4z"}),i.createElement("path",{d:"M-0.1,836c-0.2,0-0.4,0-0.6,0C-0.6,836-0.4,836-0.1,836z"}),i.createElement("path",{d:"M30.6,806.9C30.6,806.9,30.6,806.9,30.6,806.9v-16.6"}),i.createElement("path",{d:"M-11.9,832.8c0.2,0.1,0.5,0.2,0.7,0.3C-11.4,833-11.7,832.9-11.9,832.8L-11.9,832.8z"}),i.createElement("path",{d:"M-1.7,835.9c-0.3,0-0.5-0.1-0.8-0.1C-2.3,835.8-2,835.8-1.7,835.9z"}),i.createElement("path",{d:"M-3.3,835.7c-0.3-0.1-0.6-0.1-1-0.2C-3.9,835.6-3.6,835.6-3.3,835.7z"}),i.createElement("path",{d:"M30.6,776.1v14.1v16.6c0,0,0,0,0,0s0,0,0,0c0,16.1-13,29.1-29.1,29.1c-0.5,0-1.1,0-1.6,0c-0.2,0-0.4,0-0.6,0 c-0.3,0-0.6,0-1-0.1c-0.3,0-0.5-0.1-0.8-0.1c-0.2,0-0.5-0.1-0.7-0.1c-0.3-0.1-0.6-0.1-1-0.2c-0.2,0-0.3-0.1-0.5-0.1 c-2.2-0.5-4.4-1.2-6.4-2.2c0,0-0.1,0-0.1,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-3-1.6-5.7-3.6-8-6.1l-7.1,7.1 c7.1,7.6,17.3,12.3,28.5,12.3c21.6,0,39.1-17.5,39.1-39.1v-40.8L30.6,776.1z"}),i.createElement("path",{d:"M-0.8,836c-0.3,0-0.6-0.1-1-0.1C-1.4,835.9-1.1,835.9-0.8,836z"}),i.createElement("path",{d:"M1.5,836.1c-0.5,0-1.1,0-1.6,0C0.4,836,0.9,836.1,1.5,836.1z"}),i.createElement("path",{d:"M-2.6,835.8c-0.2,0-0.5-0.1-0.7-0.1C-3,835.7-2.8,835.7-2.6,835.8z"}),i.createElement("path",{d:"M1.5,836.1c16.1,0,29.1-13,29.1-29.1c0,0,0,0,0,0C30.6,823,17.6,836.1,1.5,836.1z"}),i.createElement("path",{d:"M-4.2,835.5c-0.2,0-0.3-0.1-0.5-0.1C-4.5,835.4-4.4,835.5-4.2,835.5z"}),i.createElement("path",{d:"M-11.1,833.2C-11.1,833.2-11.2,833.2-11.1,833.2C-11.2,833.2-11.1,833.2-11.1,833.2z"}))),i.createElement("g",{className:"MicFill"},i.createElement("g",null,i.createElement("path",{d:"M-53.8,816.1L-65,827.3c2.2,10.8,7.9,20.5,16.2,28.3l8.6-8.6c-8.5-7.9-13.6-18.2-13.6-29.4V816.1L-53.8,816.1z"})),i.createElement("g",null,i.createElement("path",{d:"M1.5,834.6c-15.2,0-27.6-12.4-27.6-27.6v-94.5c0-15.2,12.4-27.6,27.6-27.6c15.2,0,27.6,12.4,27.6,27.6v94.5 C29.1,822.2,16.7,834.6,1.5,834.6z"}),i.createElement("path",{d:"M1.5,696.3c8.9,0,16.1,7.2,16.1,16.1v94.5c0,8.9-7.2,16.1-16.1,16.1c-8.9,0-16.1-7.2-16.1-16.1v-94.5 C-14.6,703.6-7.4,696.3,1.5,696.3 M1.5,673.3c-21.6,0-39.1,17.5-39.1,39.1v94.5c0,21.6,17.5,39.1,39.1,39.1s39.1-17.5,39.1-39.1 v-94.5C40.6,690.8,23.1,673.3,1.5,673.3L1.5,673.3z"}))),i.createElement("g",{className:"MicStrike",fill:"none",strokeWidth:"1"},i.createElement("line",{x1:"-82.5",y1:"866.5",x2:"83.5",y2:"700.4"})))}function f(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Emoticon",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeMiterlimit:"10",cx:"128",cy:"128",r:"107.5"}),i.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",d:"M74.484,145.945 c0,0,12.996,37.533,53.514,37.533c38.084,0,53.499-37.533,53.499-37.533"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",x1:"94.5",y1:"97.5",x2:"94.5",y2:"109.5"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",x1:"160.5",y1:"97.5",x2:"160.5",y2:"109.5"}))}function _(){return i.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Submit",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"},i.createElement("g",{transform:"translate(0,-952.36218)"},i.createElement("path",{d:"m 92.115057,974.14842 a 2.0001999,2.0001999 0 0 0 -1.96764,2.02965 l 0.0376,31.19553 -77.475501,0 16.161909,-15.73013 a 2.0002746,2.0002746 0 1 0 -2.790355,-2.8667 L 6.3913393,1007.9405 a 2.0001999,2.0001999 0 0 0 -0.0011,2.8646 l 19.6896957,19.2036 a 2.0002671,2.0002671 0 1 0 2.792551,-2.8646 l -16.170767,-15.771 79.153048,0 a 2.0001999,2.0001999 0 0 0 1.72959,-0.5437 2.0001999,2.0001999 0 0 0 0.0598,-0.058 2.0001999,2.0001999 0 0 0 0.54259,-1.7218 l -0.0388,-32.87638 a 2.0001999,2.0001999 0 0 0 -2.03297,-2.02522 z",fill:"#FFFFFF",fillOpacity:"1",fillRule:"evenodd",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"})))}function g(){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ResizeIcon",x:"0px",y:"0px",viewBox:"0 0 256 256"},i.createElement("g",null,i.createElement("path",{fill:"#020202",d:"M115.512,137.263l21.6-21.6c0,0,25.5,25.5,45.8,45.8l35-35v91.6h-91.6l35-35 C141.012,162.763,115.512,137.263,115.512,137.263z"}),i.createElement("path",{fill:"#020202",d:"M108.312,129.763c-20.3-20.3-35.8-35.8-35.8-35.8l21.6-21.601c0,0,15.5,15.5,35.8,35.801L108.312,129.763z"}),i.createElement("path",{fill:"#020202",d:"M54.312,75.763c-20.3-20.3-15.8-15.8-15.8-15.8l21.6-21.601c0,0-4.5-4.5,15.8,15.801L54.312,75.763z"})))}function b(){return i.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Popout",viewBox:"0 0 8 8",x:"0px",y:"0px"},i.createElement("path",{d:"M0 0v8h8v-2h-1v1h-6v-6h1v-1h-2zm4 0l1.5 1.5-2.5 2.5 1 1 2.5-2.5 1.5 1.5v-4h-4z"}))}function v(e){return i.createElement("svg",Object(o.a)({fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_X",version:"1.1",x:"0px",y:"0px",viewBox:"-165 95 100 100"},e),i.createElement("g",null,i.createElement("polygon",{points:"-74.9,117.2 -102.2,145 -74.9,172.8 -89.1,186.8 -116.2,159.3 -143.2,186.8 -157.5,172.8 -130.2,145 -157.5,117.2 -143.2,103.2 -116.2,130.7 -89.1,103.2"})))}function S(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_X_Line",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"45",strokeMiterlimit:"10",x1:"212",y1:"212",x2:"44",y2:"44"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"45",strokeMiterlimit:"10",x1:"44",y1:"212",x2:"212",y2:"44"}))}function y(e){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_VoiceRoom",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64"},!e.exitOnly&&i.createElement("g",null,i.createElement("path",{className:"Bubble",fill:"none",strokeMiterlimit:"1",strokeWidth:"2.5px",d:"M60.1,32.3c0,15.1-12.3,27.3-27.4,27.3 c-5,0-9.7-1.4-13.8-3.7c-1.8-1.1-15,5.4-13.8,3.4c1.7-2.9,5.9-10.3,4.7-12C7,43,5.3,37.8,5.3,32.3C5.3,17.2,17.6,5,32.7,5 C47.8,5,60.1,17.2,60.1,32.3z"})),!e.exitOnly&&i.createElement("g",null,i.createElement("path",{className:"AudioLines",opacity:"0",strokeWidth:"1px",d:"M37.2,51.1c-0.5,0-1-0.1-1.3-0.4c-0.7-0.5-0.7-1.3,0-1.8c6.3-4.4,9.8-10.2,9.8-16.4c0-6.2-3.5-12-9.8-16.4 c-0.7-0.5-0.7-1.3,0-1.8s1.9-0.5,2.6,0c7.1,4.9,10.9,11.4,10.9,18.3c0,6.9-3.9,13.4-10.9,18.3C38.2,51,37.7,51.1,37.2,51.1 M21.4,40.2c0.5,0,0.9-0.1,1.3-0.4c2.8-2,4.3-4.6,4.3-7.3s-1.5-5.4-4.3-7.3c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c2.1,1.5,3.3,3.4,3.3,5.5c0,2.1-1.2,4-3.3,5.5c-0.7,0.5-0.7,1.3,0,1.8C20.4,40.1,20.9,40.2,21.4,40.2 M29.3,45.7 c0.5,0,1-0.1,1.3-0.4c4.9-3.4,7.7-7.9,7.7-12.7c0-4.8-2.7-9.3-7.7-12.7c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c4.2,2.9,6.6,6.8,6.6,10.9c0,4.1-2.3,8-6.6,10.9c-0.7,0.5-0.7,1.3,0,1.8C28.4,45.5,28.8,45.7,29.3,45.7"})),i.createElement("g",{className:"Arrow",opacity:e.exitOnly?1:0},i.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,19.4 "}),i.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,42 "})),i.createElement("g",null,i.createElement("polyline",{className:"ExitDoor",opacity:e.exitOnly?1:0,strokeLinecap:"round",strokeMiterlimit:"1",strokeWidth:"2px",fill:"none",points:"32.5,22.1 32.5,17.7 47.7,17.7 47.7,43.8 32.5,43.8 32.5,39.5"})),!e.exitOnly&&i.createElement("g",{className:"Microphone"},i.createElement("path",{d:"M40.971,28.593v6.278c0,4.007-4.023,7.284-8.971,7.284c-2.693,0-5.126-0.974-6.765-2.516 c-1.379-1.28-2.207-2.952-2.207-4.769v-6.278l0,0H21.05v6.278c0,0.536,0.064,1.055,0.162,1.573 c0.357,1.752,1.281,3.325,2.627,4.592c1.801,1.702,4.332,2.839,7.17,3.049v4.072H25.3c-0.341,0-0.616,0.438-0.616,0.989 c0,0.552,0.275,0.99,0.616,0.99h5.759h1.882H38.7c0.341,0,0.616-0.438,0.616-0.99c0-0.551-0.275-0.989-0.616-0.989h-5.71v-4.072 c5.58-0.422,9.96-4.396,9.96-9.214v-6.278H40.971z"}),i.createElement("g",null,i.createElement("path",{d:"M32,39.841c-3.493,0-6.343-2.344-6.343-5.213v-17.85c0-2.871,2.85-5.213,6.343-5.213s6.343,2.342,6.343,5.213v17.85,C38.343,37.497,35.493,39.841,32,39.841z"}))))}function C(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_TextRoom",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256",stroke:"#000",strokeWidth:"10px"},i.createElement("g",{className:"ScratchPad"},i.createElement("path",{fill:"none",strokeWidth:"0",strokeMiterlimit:"10",d:"M179.751,40.994h14.869 c8.388,0,15.25,6.862,15.25,15.25v141.193c0,8.388-6.862,15.25-15.25,15.25H57.37c-8.388,0-15.25-6.862-15.25-15.25V56.244 c0-8.388,6.862-15.25,15.25-15.25h14.869H179.751z"}),i.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"74.495",y1:"27.313",x2:"74.495",y2:"54.063"}),i.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"124.495",y1:"27.313",x2:"124.495",y2:"54.063"}),i.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"174.745",y1:"27.313",x2:"174.745",y2:"54.063"})),i.createElement("line",{className:"TextLines",x1:"71.6",y1:"115.4",x2:"179.4",y2:"115.4"}),i.createElement("line",{className:"TextLines",x1:"71.6",y1:"145.8",x2:"143.3",y2:"145.8"}),i.createElement("line",{className:"TextLines",x1:"71.6",y1:"175.9",x2:"179.4",y2:"175.9"}),i.createElement("line",{className:"TextLines",x1:"73.7",y1:"82.7",x2:"166.8",y2:"82.7"}))}function O(e){var t="SVGIcon_Button SVGIcon_Headphones";return e.className&&(t+=" "+e.className),i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-305.5 396.5 256 256"},i.createElement("g",{className:"HeadPhonesBase"},i.createElement("g",null,i.createElement("path",{fill:"none",d:"M-176.5,418.7c-37,0-69.5,30.2-69.5,64.5v25.3c11.3,2.3,19.9,12.3,19.9,24.3v8.6l100.9-100.9 C-138.2,427.3-156.7,418.7-176.5,418.7z"}),i.createElement("path",{d:"M-226.2,532.9c0-12-8.5-22-19.9-24.3v-25.3c0-34.4,32.5-64.5,69.5-64.5c19.8,0,38.3,8.6,51.2,21.9l6.9-6.9 c-14.8-15.1-35.7-24.9-58.2-24.9c-42.3,0-79.4,34.8-79.4,74.5v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8c0,7.8,3.6,14.7,9.2,19.3 l40.5-40.5V532.9z"}),i.createElement("path",{d:"M-97.1,508.6v-25.3c0-7.5-1.3-14.8-3.8-21.8l-7.9,7.9c1.2,4.5,1.8,9.1,1.8,13.9v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8 c0,13.7,11.1,24.8,24.8,24.8c13.7,0,24.8-11.1,24.8-24.8v-29.8C-77.2,520.9-85.8,510.9-97.1,508.6z"}))),i.createElement("g",{className:"HeadphonesStrike"},i.createElement("line",{fill:"none",x1:"-260.5",y1:"598.5",x2:"-94.5",y2:"432.4"})),i.createElement("g",{className:"HeadPhonesFill"},i.createElement("path",{d:"M-226.2,562.7v-21.2l-40.5,40.5c4.3,3.5,9.7,5.6,15.6,5.6C-237.3,587.5-226.2,576.4-226.2,562.7z"}),i.createElement("path",{d:"M-118.3,433.7l-6.9,6.9c7.9,8.1,13.7,18,16.5,28.8l7.9-7.9C-104.5,451.1-110.5,441.6-118.3,433.7z"})))}function I(){return i.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Group",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{transform:"translate(0,-952.36218)"},i.createElement("path",{d:"M58.6,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1\tC86.7,983,74,970.4,58.6,970.4z M202.1,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C230.2,983,217.6,970.4,202.1,970.4z M130.4,986c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C158.5,998.6,145.8,986,130.4,986z M242.8,1110.6c0-0.1,0-17.9,0-18l-0.1-16.1c0-22.4-18.2-40.6-40.6-40.6 c-17.8,0-30,7.7-36.3,18.8c-2,3.5-3.4,7.3-4.5,11.1c-7.5-8.7-18.6-14.3-31-14.3s-23.5,5.6-31,14.3c-1.1-3.9-2.5-7.6-4.5-11.1 c-6.3-11.1-18.4-18.8-36.3-18.8c-22.4,0-40.6,18.2-40.6,40.6v46.8c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2 c3.4,0,6.2-2.8,6.2-6.2v-31.2h9.4v9.4c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2H146c3.4,0,6.2-2.8,6.2-6.2v-31.2 h12.5c3.4,0,6.2-2.8,6.2-6.2v-9.4h9.4v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2c3.4,0,6.2-2.8,6.2-6.2v-31.2h12.5c3.4,0,6.3-2.7,6.3-6.2\tV1110.6z"})))}function E(e){var t="SVGIcon_Button SVGIcon_Pin";return e.bPinned&&(t+=" Pinned"),i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"point",d:"M134.787,129.241v52.051v26.025c0.041,4.334-0.092,8.677,0.094,13.009c-1.493,4.332-3.129,8.675-5.239,13.009 c-2.109-4.334-3.734-8.677-5.237-13.009c0.186-4.333,0.05-8.677,0.092-33.009v-26.025v-32.051v-5.146h10.291V129.241z"}),i.createElement("path",{className:"head",d:"M186.55,151.049H73.351l-5.146-5.146c0-23.791,11.186-40.359,30.871-46.091V39.394 c-6.843-3.478-17.164-10.034-17.154-27.312l5.146-5.146h85.167l5.146,5.146c0,17.227-9.828,23.803-16.537,27.292v60.521 c19.664,6.062,30.852,22.609,30.852,46.01L186.55,151.049z"}),i.createElement("line",{className:"ground",opacity:e.bPinned?1:0,fill:"none",stroke:"#ffffff",strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",x1:"33.833",y1:"238.5",x2:"221.834",y2:"238.5"}))}function w(e){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_PlusCircle",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},!e.nocircle&&i.createElement("circle",{fill:"none",strokeWidth:"10",strokeMiterlimit:"10",cx:"128",cy:"128",r:"95.333"}),i.createElement("line",{className:"horizontalLine",fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"73.333",y1:"128",x2:"183.333",y2:"128"}),!e.minus&&i.createElement("line",{className:"verticalLine",fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"128.333",y1:"73.335",x2:"128.333",y2:"183.333"}))}function M(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_AddFriend",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"friendHead",transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},i.createElement("circle",{cx:"86.296",cy:"47.419",r:"33.526"})),i.createElement("path",{className:"friendBody",d:"M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"}),i.createElement("path",{className:"plusCircle",d:"M179.01,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.989,66.99,66.989c36.997,0,66.99-29.991,66.99-66.989 S216.008,103.892,179.01,103.892z M217.893,175.882h-33.647v33.882c0,2.762-2.239,5-5,5s-5-2.238-5-5v-33.882h-33.647 c-2.762,0-5-2.238-5-5c0-2.763,2.238-5,5-5h33.647V132.47c0-2.762,2.239-5,5-5s5,2.238,5,5v33.412h33.647c2.762,0,5,2.237,5,5 C222.893,173.643,220.654,175.882,217.893,175.882z"}))}function D(){return i.createElement("svg",{version:"1.1",id:"Layer_4",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FriendRequest",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"friendHead",transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},i.createElement("circle",{cx:"85.923",cy:"47.419",r:"33.526"})),i.createElement("path",{className:"friendBody",d:"M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"}),i.createElement("path",{className:"friendBodyFull",d:"M176.504,217.922v-42.624c0-35.443-17.002-64.217-57.483-64.217H106.96h-1.017H94.898 c-40.48,0.001-57.484,28.774-57.484,64.217v42.624c0,0,0,22.197,69.544,22.197C177.521,240.121,176.504,217.922,176.504,217.922z"}),i.createElement("path",{className:"friendArm",d:"M18.167,63.833c6.53-0.734,39.348,39.127,50.007,47.647s21.327,16.686,15.16,25.353s-20.646,16.74-36.167,2.5 S-1.349,90.532,0,85.333S8.599,64.909,18.167,63.833z"}),i.createElement("path",{className:"redCircle",d:"M178.51,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.99,66.99,66.99c36.997,0,66.99-29.992,66.99-66.99 S215.508,103.892,178.51,103.892z"}))}function T(){return i.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Invite",x:"0px",y:"0px",width:"256px",height:"255.999px",viewBox:"0 0 256 255.999"},i.createElement("path",{d:"M165.678,20.535c-17.251,0-31.386,14.135-31.386,31.386c0,17.252,14.135,31.386,31.386,31.386 c17.251,0,31.386-14.134,31.386-31.386C197.063,34.67,182.929,20.535,165.678,20.535z"}),i.createElement("path",{d:"M165.678,93.121c24.995,0,45.335,20.34,45.335,45.335v52.31c0,3.853-3.123,6.975-6.975,6.975h-13.95v34.874 c0,3.852-3.123,6.974-6.974,6.975h-34.874c-3.852-0.001-6.974-3.123-6.975-6.975v-34.874h-13.95c-3.852,0-6.974-3.123-6.974-6.975 v-52.31C120.343,113.461,140.683,93.121,165.678,93.121z"}),i.createElement("g",{className:"invitePlus"},i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",x1:"14",y1:"128",x2:"101.5",y2:"128"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",x1:"57.75",y1:"84.25",x2:"57.75",y2:"171.75"})))}function G(){return i.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Paperclip",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M167.768,62.647 l-0.012,123.052c0,24.729-19.334,44.856-43.096,44.866c-23.765-0.006-43.099-20.134-43.096-44.872L81.557,48.851 c0-15.345,14.483-27.827,29.83-27.83c15.342,0.003,27.827,12.488,27.833,27.833l-0.002,139.245 c0.003,6.376-8.546,12.925-14.925,12.925c0,0-13.929-0.166-13.929-12.928l0.003-124.839"}))}function R(e){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Volume",x:"0px",y:"0px",width:"256px",height:"255.999px",viewBox:"0 0 256 255.999"},i.createElement("g",{className:"Speaker"},i.createElement("path",{d:"M93.785,52.265c-0.946,0-2.357,0.63-3.304,1.577L40.284,98.022c-0.947,0.789-2.831,1.578-4.093,1.578H9.367 C8.104,99.6,7,100.706,7,101.967v52.069c0,1.264,1.104,2.367,2.367,2.367H36.19c1.262,0,3.146,0.632,4.093,1.578l50.197,44.181 c0.947,0.789,2.516,1.578,3.304,1.578s1.578-1.104,1.578-2.367V54.631C95.363,53.369,94.731,52.265,93.785,52.265z"})),!e.muted&&i.createElement("g",{className:"SoundWaves"},i.createElement("path",{className:"SoundWavesHighest",d:"M193.826,30.402c24.959,24.958,40.349,59.403,40.349,97.604c0,38.199-15.388,72.645-40.349,97.603l9.916,9.916 c28.067-28.067,44.263-64.673,44.263-107.521c0-42.847-16.196-79.455-44.263-107.521"}),i.createElement("path",{className:"SoundWavesHigh",d:"M175.737,47.628l-8.924,8.924c18.271,18.27,29.536,43.484,29.536,71.448s-11.264,53.178-29.536,71.448l8.924,8.924 c20.546-20.546,33.234-49.008,33.234-80.374c0-31.366-12.688-59.829-33.234-80.374V47.628z"}),i.createElement("path",{className:"SoundWavesMed",d:"M148.913,74.454l-8.925,8.925c11.488,11.488,18.491,27.236,18.491,44.624c0,17.388-7.054,33.281-18.491,44.575l8.875,8.975 c13.811-13.635,22.239-32.753,22.239-53.55c0-20.797-8.432-39.793-22.189-53.55V74.454z"}),i.createElement("path",{className:"SoundWavesLow",d:"M121.989,101.229l-8.778,9.073c4.641,4.516,7.397,10.706,7.397,17.702c0,6.995-2.755,13.186-7.397,17.702l8.778,9.073 c7.035-6.844,11.243-16.413,11.243-26.775C133.232,117.643,129.024,108.075,121.989,101.229z"})),i.createElement("g",{className:"SoundX"},i.createElement("line",{fill:"none",strokeWidth:e.muted?10:0,stroke:"#fff",strokeMiterlimit:"10",x1:"137",y1:"170.667",x2:"223.167",y2:"84.5"}),i.createElement("line",{fill:"none",strokeWidth:e.muted?10:0,stroke:"#fff",strokeMiterlimit:"10",x1:"137",y1:"84.5",x2:"223.167",y2:"170.667"})))}function j(){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_NewChatGroup",x:"0px",y:"0px",viewBox:"0 0 256 256"},i.createElement("path",{className:"Bubble",strokeWidth:"12",strokeMiterlimit:"10",d:"M127.393,10.833 c64.854,0,117.46,52.609,117.46,117.013c0,24.035-7.254,45.804-19.5,63.943c-4.99,7.711,13.15,39.457,20.408,51.705 c4.989,8.612-51.701-19.05-59.412-14.514c-17.233,9.979-37.188,15.872-58.957,15.872c-64.859,0-117.465-52.607-117.465-117.008 C9.928,63.442,62.534,10.833,127.393,10.833z"}),i.createElement("line",{strokeWidth:"22",strokeLinecap:"round",strokeMiterlimit:"10",x1:"83.5",y1:"128.886",x2:"176.184",y2:"128.886"}),i.createElement("line",{strokeWidth:"22",strokeLinecap:"round",strokeMiterlimit:"10",x1:"129.842",y1:"82.544",x2:"129.842",y2:"175.228"}))}function L(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Crown",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",null,i.createElement("path",{d:"M239.874,94.963l-31.115,21.325c-18.18,12.586-43.351,5.594-52.44-14.333l-23.772-50.692c-2.099-4.194-8.041-4.194-9.789,0 l-23.074,50.343c-9.439,20.627-35.31,27.27-53.49,13.983L16.128,93.565c-4.195-3.147-10.139,1.049-8.391,6.293l31.464,106.628 c0.35,1.049,1.398,1.397,2.098,1.397h173.752c1.049,0,1.749-0.698,2.098-1.397l31.115-104.53 C250.012,96.36,244.068,91.816,239.874,94.963z"})))}function A(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Play",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"playTriangle",d:"M65.321,33.521c-11.274-6.615-20.342-1.471-20.342,11.52V210.96c0,12.989,9.068,18.135,20.342,11.521l137.244-82.348 c11.274-6.618,11.274-17.646,0-24.509L65.321,33.521z"}))}function k(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Pause",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{d:"M44.979,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6H50.979c-3.3,0-6,2.7-6,6V219.364z"}),i.createElement("path",{d:"M149.267,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6h-49.753c-3.3,0-6,2.7-6,6V219.364z"}))}function P(e){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_SortBy",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},e.bytime?i.createElement("g",{className:"time"},i.createElement("circle",{fill:"none",strokeWidth:"10",strokeMiterlimit:"10",cx:"91.735",cy:"128.014",r:"64"}),i.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"91.735,90.833 91.735,128.014 116.58,152.086 \t"})):i.createElement("g",{className:"alphabet"},i.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"70.268,109.934 94.483,63.635 119.77,109.934"}),i.createElement("line",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",x1:"77.458",y1:"97.861",x2:"112.135",y2:"97.861"}),i.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"70.045,145.379 119.547,145.379 70.045,192.032 119.547,192.032"})),i.createElement("g",{className:"Arrow"},i.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"199.735,63.66 199.735,192.366 171.207,163.675"}),i.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"199.735,63.66 199.735,192.366 228.266,163.675"})))}function N(){return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Check",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polyline",{fill:"none",stroke:"#fff",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"49.5,147.75 95,210.75 206.5,45.25 "}))}function B(e){var t=e.highlightColor||"#00ccff",n=e.color||"#2d73ff";return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DialogCheck",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("defs",null,i.createElement("linearGradient",{id:"linear",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},i.createElement("stop",{id:"stop0",offset:"0%",stopColor:t}),i.createElement("stop",{id:"stop1",offset:"100%",stopColor:n})),i.createElement("filter",{id:"f1",x:"0",y:"0",width:"200%",height:"200%"},i.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"20",dy:"20"}),i.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"10"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}))),i.createElement("path",{fill:"none",stroke:"url(#linear)",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"10",d:"M206.5,45.25L95,210.75l-45.5-63",strokeDasharray:"365.19 365.19",strokeDashoffset:"0.00"}),i.createElement("path",{fill:"none",opacity:".2",filter:"url(#f1)",stroke:"url(#linear)",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"10",d:"M206.5,45.25L95,210.75l-45.5-63",strokeDasharray:"365.19 365.19",strokeDashoffset:"0.00"}))}function F(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Caution",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"triangle"},i.createElement("path",{stroke:"#020202",strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",d:"M127.9,76.632"}),i.createElement("path",{fill:"none",stroke:"#020202",strokeWidth:"11",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"5",d:"M128.001,226.606c42.507,0,81.538,0,87.756,0c31.222,0,36.95-14.974,24.045-34.771c-6.921-10.617-78.297-122.962-89.163-140.254\tC141.859,37.613,138.542,29.393,128,29.393l0,0c-10.543,0-13.86,8.222-22.639,22.189C94.495,68.874,23.119,181.219,16.198,191.836 c-12.905,19.797-7.175,34.771,24.045,34.771C46.463,226.606,85.494,226.606,128.001,226.606"}),i.createElement("path",{fill:"#020202",d:"M127.9,208.12"})),i.createElement("g",{className:"exclamation"},i.createElement("line",{fill:"none",stroke:"#020202",strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",x1:"127.9",y1:"76.632",x2:"127.9",y2:"160.07"}),i.createElement("path",{fill:"#020202",d:"M127.9,208.12c-6.377,0-11.548-5.17-11.548-11.548c0-6.377,5.17-11.547,11.548-11.547 c6.377,0,11.547,5.17,11.547,11.547C139.447,202.95,134.277,208.12,127.9,208.12"})))}function x(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Lock",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"topLock",d:"M203.553,197.794c0,21.929-17.778,39.706-39.706,39.706H92.154c-21.929,0-39.706-17.777-39.706-39.706v-71.693 c0-21.928,17.778-39.706,39.706-39.706h71.692c21.928,0,39.706,17.778,39.706,39.706V197.794z M128.001,129.664 c-8.941,0-16.19,7.248-16.19,16.189c0,5.589,2.833,10.518,7.137,13.427c2.066,1.395,0.318,23.508,0.318,32.842 c0,2.292-0.078,3.65,8.734,3.65c8.676,0,8.75-1.221,8.75-3.654c0-9.348-1.708-31.469,0.368-32.886 c4.269-2.916,7.071-7.821,7.071-13.38C144.191,136.912,136.941,129.664,128.001,129.664z"}),i.createElement("path",{className:"baseLock",fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",d:"M84.813,172.74V73.688l0,0 c0-23.85,19.335-43.188,43.187-43.188l0,0c23.852,0,43.188,19.337,43.188,43.188l0,0v23.885"}))}function V(e){var t="SVGIcon_Button SVGIcon_Throbber ";return e.className&&(t+=e.className),i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:a.a.partCircle},i.createElement("path",{className:a.a.roundOuter,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895"}),i.createElement("path",{className:a.a.roundOuter,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M201.432,101.166"}),i.createElement("path",{className:a.a.roundOuter,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754"})),i.createElement("g",{className:a.a.mainOutline},i.createElement("path",{className:a.a.roundFill,fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundOuterOutline,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber01,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber02,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber03,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber04,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber05,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber06,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber07,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber08,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber09,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber10,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber11,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber12,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber13,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber14,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),i.createElement("path",{className:a.a.roundThrobber15,strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"})),i.createElement("g",{className:a.a.bottomCircle},i.createElement("path",{fill:"#ffffff",d:"M89.226,181.579L76.5,176.321c2.256,4.696,6.159,8.628,11.339,10.786 c11.197,4.668,24.11-0.647,28.779-11.854c2.259-5.425,2.274-11.405,0.033-16.841c-2.237-5.436-6.46-9.675-11.886-11.938 c-5.384-2.24-11.151-2.156-16.22-0.244l13.146,5.436c8.261,3.443,12.166,12.93,8.725,21.189 C106.976,181.115,97.486,185.022,89.226,181.579"})),i.createElement("g",{className:a.a.topCircle},i.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",cx:"161.731",cy:"101.274",r:"23.019"})))}function U(){return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Video",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"videoPlayButton",d:"M165.399,124.063L109.118,92.06c-1.399-0.797-3.118-0.787-4.508,0.026c-1.39,0.805-2.25,2.295-2.25,3.905v64.008 c0,1.609,0.86,3.1,2.25,3.913c0.705,0.412,1.491,0.613,2.277,0.613c0.768,0,1.546-0.191,2.241-0.596l56.283-32.003 c1.416-0.806,2.285-2.306,2.285-3.934C167.694,126.368,166.816,124.869,165.399,124.063z"}),i.createElement("path",{d:"M238.069,40.646H214.25h-28.82h-28.82h-28.458h-0.36H99.333H70.536H41.727h-23.82c-3.184,0-5.773,2.59-5.773,5.772v23.856 v120.441v18.867c0,3.184,2.589,5.771,5.773,5.771h2.415h21.394h28.82h28.82h28.459h0.361h28.457h28.82h28.82h23.82 c3.184,0,5.773-2.589,5.773-5.771v-18.867V70.274V46.418C243.844,43.223,241.254,40.646,238.069,40.646z M191.215,47.181h17.273  V64.5h-17.273V47.181L191.215,47.181z M162.396,47.181h17.272V64.5h-17.272V47.181z M133.938,47.181h16.912V64.5h-16.912V47.181z\tM105.128,47.181h16.912V64.5h-16.912V47.181z M76.309,47.181h17.273V64.5H76.309V47.181z M47.488,47.181h17.273V64.5H47.488V47.181 z M18.681,47.181h17.273V64.5H18.681V47.181z M35.954,208.811H18.681v-17.319h17.273V208.811z M64.763,208.811H47.489v-17.319 h17.273V208.811L64.763,208.811z M93.583,208.811H76.31v-17.319h17.273V208.811z M122.041,208.811h-16.912v-17.319h16.912V208.811z M150.849,208.811h-16.912v-17.319h16.912V208.811z M179.668,208.811h-17.272v-17.319h17.272V208.811z M208.488,208.811h-17.273 v-17.319h17.273V208.811z M237.297,208.811h-17.273v-17.319h17.273V208.811L237.297,208.811z M237.297,184.943H214.25h-28.819 h-28.82h-28.458h-0.361H99.333H70.537H41.728H18.682V71.047h23.046h28.82h28.82h28.458h0.36h28.458h28.82h28.82h23.045v113.896 H237.297z M237.297,64.5h-17.273V47.181h17.273V64.5L237.297,64.5z"}))}function H(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"SVGIcon_Button SVGIcon_Image",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},i.createElement("path",{stroke:"#ffffff",fill:"#ffffff",d:"M83.086,12.091H16.913C10.344,12.091,5,17.435,5,24.004v51.992l0.005,0.102c0.056,6.514,5.396,11.813,11.908,11.813h66.173  c6.531,0,11.874-5.314,11.906-11.764L95,24.004C95,17.435,89.654,12.091,83.086,12.091z M83.086,82.989H16.913  c-3.516,0-6.488-2.653-6.93-6.106l18.899-20.615c1.226-1.34,2.85-2.076,4.574-2.076c1.723,0,3.347,0.736,4.574,2.078l19.611,21.393  c0.885,0.961,2.508,1.029,3.473,0.148c1-0.916,1.068-2.476,0.152-3.478l-4.113-4.485l8.406-8.918  c1.258-1.332,2.926-2.064,4.696-2.064c1.772,0,3.44,0.732,4.696,2.064l15.061,15.973C89.564,80.346,86.594,82.989,83.086,82.989z   M90.08,69.801L78.532,57.555c-2.194-2.328-5.132-3.609-8.275-3.609c-3.142,0-6.08,1.281-8.272,3.609l-8.164,8.656l-12.162-13.27  c-2.171-2.366-5.084-3.67-8.201-3.67c-3.119,0-6.031,1.304-8.202,3.67L9.92,69.673V24.004c0-3.856,3.137-6.994,6.993-6.994h66.173  c3.857,0,6.994,3.137,6.994,6.994V69.801z"}),i.createElement("path",{stroke:"#ffffff",fill:"#ffffff",d:"M68.907,22.489c-6.569,0-11.914,5.344-11.914,11.914c0,6.569,5.345,11.913,11.914,11.913  c6.567,0,11.913-5.344,11.913-11.913C80.82,27.833,75.477,22.489,68.907,22.489z M68.907,41.396c-3.856,0-6.993-3.137-6.993-6.993  s3.137-6.994,6.993-6.994c3.854,0,6.991,3.138,6.991,6.994S72.764,41.396,68.907,41.396z"}))}function W(){return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Bell",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{d:"M107.785,33.965c-34.875,8.972-60.644,40.618-60.644,78.308v53.903c0,4.965-4.035,8.99-8.975,8.99 c-9.929,0-17.978,8.066-17.978,17.971c0,9.924,8.059,17.969,18.013,17.969h179.598c9.948,0,18.014-8.066,18.014-17.969 c0-9.926-8.087-17.971-17.979-17.971c-4.956,0-8.975-3.993-8.975-8.99v-53.903c0-37.676-25.763-69.333-60.644-78.308v-9.281 c0-11.193-9.052-20.219-20.215-20.219c-11.143,0-20.215,9.052-20.215,20.219V33.965L107.785,33.965z M96.554,220.09h62.891 c0,17.366-14.079,31.445-31.445,31.445C110.633,251.535,96.554,237.458,96.554,220.09z"}))}function z(e){return i.createElement("svg",{style:{transform:"rotate("+e.angle+"deg)"},version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Arrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"128,247.688 128,8.313 181.061,61.674 "}),i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"128,247.688 128,8.313 74.939,61.674 "}))}function q(e){return i.createElement("svg",{style:{transform:"rotate("+e.angle+"deg)"},version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoubleArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polyline",{className:"Arrow1",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"135.65,21.667 30.081,127.235 137.18,234.333 "}),!e.singlearrow&&i.createElement("polyline",{className:"Arrow2",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"224.389,21.667 118.821,127.235 225.92,234.333 "}))}function K(){return i.createElement("svg",{version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoubleArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polyline",{className:"Arrow1",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"135.65,21.667 30.081,127.235 137.18,234.333 "}),i.createElement("polyline",{className:"Arrow2",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"224.389,21.667 118.821,127.235 225.92,234.333 "}))}function Y(){return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Maximize",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("rect",{x:"24",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"208",height:"171.667"}),i.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"24",y1:"54.01",x2:"232",y2:"54.01"}))}function J(){return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Minimize",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",x1:"24",y1:"209.01",x2:"232",y2:"209.01"}))}function Q(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Restore",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polyline",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"12",strokeMiterlimit:"10",points:"83,90.861 83,42.167 232,42.167 232,165.14 173,165.14 "}),i.createElement("rect",{x:"24",y:"90.861",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"149",height:"122.973"}))}function Z(){return i.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_SingleWindowToggle",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"mainBox"},i.createElement("rect",{x:"90",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"142",height:"171.667"}),i.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"90",y1:"54.01",x2:"232",y2:"54.01"})),i.createElement("g",{className:"leftBox"},i.createElement("rect",{x:"28",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"62",height:"171.667"}),i.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"28",y1:"54.01",x2:"90",y2:"54.01"})))}function X(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Reload",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"30",strokeLinecap:"round",strokeMiterlimit:"10",d:"M229.809,147.639 c-9.178,47.863-51.27,84.027-101.809,84.027c-57.253,0-103.667-46.412-103.667-103.666S70.747,24.334,128,24.334 c34.107,0,64.368,16.472,83.261,41.895"}),i.createElement("polygon",{points:"147.639,108.361 245.755,10.166 245.834,108.361 "}))}function $(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Trade",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{d:"M132.025,162.943h40.246c0,0,3.219,56.879-31.303,79.599c-12.298,8.094,71.103-6.708,75.574-79.599h35.775l-60.146-74.681 L132.025,162.943z"}),i.createElement("path",{d:"M123.975,93.056H83.729c0,0-3.219-56.879,31.303-79.599c12.298-8.094-71.103,6.708-75.574,79.599H3.682l60.146,74.681 L123.975,93.056z"}))}function ee(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Trash",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"base"},i.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M216.773,43.909 l-7.399,177.589c-0.37,8.893-7.919,16.1-16.812,16.1H63.437c-8.914,0-16.442-7.24-16.812-16.1L39.226,43.909"})),i.createElement("g",{className:"lines"},i.createElement("path",{className:"line1",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M128,68.12v137.197"}),i.createElement("path",{className:"line2",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M83.613,68.12 l4.035,137.197"}),i.createElement("path",{className:"line3",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M172.387,68.12 l-4.035,137.197"})),i.createElement("g",{className:"lid"},i.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.121,38.577H228.88"}),i.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",d:"M87.648,38.577l4.319-10.796c2.072-5.181,8.292-9.379,13.84-9.379h44.386 c5.572,0,11.761,4.18,13.841,9.379l4.319,10.796"})))}function te(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Scroll",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{transform:"translate(0,-952.36215)"},i.createElement("path",{d:"M49.624,963.362c-20.72,0-37.667,14.78-37.667,32.806c0,3.589,3.353,6.499,7.486,6.499l52.407-0.305v162.5 c0,18.134,17.404,32.5,38.018,32.5h96.508c20.612,0,37.667-14.475,37.667-32.5c0-3.59-3.354-6.499-7.486-6.5H217.84V996.168 c0-18.024-16.947-32.806-37.667-32.806H49.624z M49.624,976.362h2.223c0.569,0.162,1.158,0.265,1.754,0.306 c8.159,1.274,14.426,6.085,16.962,12.694l-42.112,0.306C31.513,981.897,39.656,976.362,49.624,976.362z M79.337,976.362h100.836 c12.587,0,22.694,8.77,22.694,19.806v162.194H139.23c-4.135,0.001-7.486,2.91-7.488,6.5c0,4.609-1.43,7.796-4.21,10.765 c-2.78,2.972-7.203,5.757-13.686,7.923c-0.624,0.201-1.214,0.476-1.755,0.813h-2.223c-12.695,0-23.044-8.573-23.044-19.5v-169 C86.824,988.529,84.023,981.812,79.337,976.362z M108.582,1005.611c-4.135,0.169-7.33,3.216-7.135,6.807 c0.193,3.59,3.702,6.363,7.837,6.194h71.123c4.135,0.051,7.535-2.817,7.592-6.407c0.059-3.591-3.246-6.542-7.381-6.594 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1005.603,108.816,1005.603,108.582,1005.611z M108.582,1044.612 c-4.135,0.169-7.33,3.215-7.135,6.807c0.193,3.588,3.702,6.362,7.837,6.192h71.123c4.135,0.051,7.535-2.816,7.592-6.407 c0.059-3.59-3.246-6.542-7.381-6.592c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1044.603,108.816,1044.603,108.582,1044.612z M108.582,1083.612c-4.135,0.169-7.33,3.216-7.135,6.806c0.193,3.589,3.702,6.363,7.837,6.193h71.123 c4.135,0.052,7.535-2.816,7.592-6.407c0.059-3.59-3.246-6.541-7.381-6.592c-0.069-0.001-0.141-0.001-0.211,0h-71.123 C109.05,1083.602,108.816,1083.602,108.582,1083.612z M108.582,1122.611c-4.135,0.17-7.33,3.216-7.135,6.806 c0.193,3.591,3.702,6.364,7.837,6.195h71.123c4.135,0.05,7.535-2.818,7.592-6.408c0.059-3.591-3.246-6.541-7.381-6.593 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1122.602,108.816,1122.602,108.582,1122.611z M145.547,1171.363h82.002 c-3.09,7.604-11.189,12.999-21.173,12.999h-67.849c0.196-0.197,0.512-0.306,0.703-0.509 C142.576,1180.277,144.436,1175.973,145.547,1171.363z"})))}function ne(e){return i.createElement("svg",{style:{transform:"rotate("+e.angle+"deg)"},version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FlatArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polygon",{points:"13.913,141 128,59 242.087,141 ",fill:"#ffffff"}))}function oe(e){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FriendIcon"+(e.bPending?" SVGIcon_FriendIcon_Pending":""),x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"Outline"},i.createElement("g",{transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},i.createElement("path",{d:"M102.239,90.394c-22.556,0-40.906-18.351-40.906-40.906c0-22.556,18.35-40.906,40.906-40.906s40.906,18.35,40.906,40.906 C143.145,72.043,124.795,90.394,102.239,90.394z"})),i.createElement("path",{d:"M127.453,250.212c-30.208,0-52.086-4.188-65.028-12.45c-12.507-7.983-13.141-17.484-13.141-19.308v-41.781 c0-20.554,5.356-38.104,15.489-50.754c11.63-14.519,29.216-22.193,50.858-22.194h23.646c21.643,0,39.229,7.674,50.858,22.193 c10.133,12.65,15.488,30.201,15.488,50.754v41.751c0.011,2.202-0.586,8.058-6.43,14.175 c-11.164,11.687-35.301,17.613-71.732,17.613C127.458,250.212,127.458,250.212,127.453,250.212z"}),i.createElement("path",{className:"WavingArm",opacity:e.bPending?"1":"0",d:"M87.625,170.102c-5.877,0-14.85-1.804-24.219-10.4c-8.677-7.961-20.959-20.438-30.563-31.048 c-18.766-20.732-21.125-26.658-19.522-32.832c1.463-5.64,10.288-27.077,26.729-28.926c0.429-0.048,0.867-0.072,1.303-0.072 c7.609,0,14.543,6.335,38.063,31.516c7.141,7.645,14.524,15.549,18.002,18.33l0.803,0.641c5.551,4.432,11.291,9.015,15.104,14.136 c8.477,11.383,3.634,20.705,1.158,24.185C108.034,164.692,97.995,170.102,87.625,170.102z"})),i.createElement("g",{className:"foreground"},i.createElement("g",{transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},i.createElement("circle",{fill:"#FFFFFF",cx:"102.239",cy:"49.488",r:"33.446"})),i.createElement("path",{fill:"#FFFFFF",d:"M195.624,218.454v-41.781c0-34.743-16.666-62.948-56.347-62.948h-11.822h-0.997h-10.826 c-39.68,0.001-56.348,28.205-56.348,62.948v41.781c0,0,0,21.758,68.169,21.758C196.62,240.214,195.624,218.454,195.624,218.454z"}),i.createElement("path",{className:"WavingArm",opacity:e.bPending?"1":"0",d:"M41.167,76.833c6.53-0.734,39.348,39.127,50.007,47.647c10.659,8.52,21.327,16.686,15.16,25.353 s-20.646,16.74-36.167,2.5 s-48.516-48.801-47.167-54S31.599,77.909,41.167,76.833z"})))}function ie(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoNotDisturb",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"24",strokeMiterlimit:"10",cx:"128",cy:"128",r:"101.5"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"24",strokeMiterlimit:"10",x1:"73",y1:"128",x2:"183",y2:"128"}))}function re(e){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scaleX("+(e.bFlipHorizontal?-1:1)+")"},className:"SVGIcon_Button SVGIcon_MediaControls",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"Arrow",d:"M77.003,54.763h32.784c3.794,0,9.113,2.181,11.814,4.848l63.604,62.773c2.703,2.667,2.727,7.054,0.05,9.748 l-63.705,64.206c-2.674,2.693-7.968,4.898-11.763,4.898H77.003"}),i.createElement("polyline",{className:"preArrowBox",opacity:e.bHidePreArrow?"0":"1",points:"6.833,54.763 46.71,54.763 46.71,201.236 6.833,201.236 \t"}),i.createElement("polyline",{className:"jumpAheadBox",opacity:e.bShowJumpAheadBox?"1":"0",points:"6.833,54.764 86.386,54.764 86.386,201.236 6.833,201.236 \t"}),i.createElement("polyline",{className:"postArrowBox",opacity:e.bHidePostArrow?"0":"1",points:"209.29,54.763 249.167,54.763 249.167,201.236 209.29,201.236 \t"}))}function ae(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_SteamTV",x:"0px",y:"0px",width:"1024px",height:"256px",viewBox:"0 0 1024 256"},i.createElement("defs",null,i.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},i.createElement("stop",{offset:"0%",stopColor:"rgb(55, 102, 251)"}),i.createElement("stop",{offset:"100%",stopColor:"rgb(91, 106, 219)"})),i.createElement("linearGradient",{id:"gradientText",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},i.createElement("stop",{offset:"0%",stopColor:"rgb(91, 106, 219)"}),i.createElement("stop",{offset:"100%",stopColor:"rgb(125, 110, 188)"}))),i.createElement("circle",{className:"logoBG",opacity:"0",fill:"#000000",cx:"156.586",cy:"128",r:"125.914"}),i.createElement("g",{id:"logo"},i.createElement("path",{fill:"url(#gradient)",d:"M156.374,5.355c-64.404,0-117.167,49.661-122.18,112.77l65.712,27.171 c5.567-3.808,12.293-6.032,19.53-6.032c0.649,0,1.294,0.016,1.934,0.051l29.226-42.355c0-0.202-0.005-0.399-0.005-0.598 c0-25.496,20.74-46.241,46.237-46.241c25.498,0,46.239,20.745,46.239,46.241c0,25.494-20.741,46.241-46.239,46.241 c-0.352,0-0.698-0.01-1.047-0.021l-41.68,29.741c0.022,0.546,0.041,1.095,0.041,1.644c0,19.14-15.569,34.707-34.706,34.707 c-16.796,0-30.843-11.991-34.026-27.87l-46.993-19.429c14.55,51.464,61.831,89.19,117.957,89.19 c67.713,0,122.605-54.893,122.605-122.604C278.978,60.244,224.086,5.355,156.374,5.355"}),i.createElement("path",{fill:"rgb(67, 104, 241)",d:"M111.026,191.387l-15.061-6.22c2.67,5.56,7.285,10.208,13.418,12.767 c13.25,5.521,28.531-0.771,34.054-14.028c2.674-6.416,2.694-13.5,0.04-19.929c-2.646-6.431-7.64-11.451-14.063-14.129 c-6.371-2.648-13.196-2.552-19.198-0.291l15.561,6.436c9.776,4.074,14.396,15.299,10.324,25.072 C132.031,190.841,120.801,195.464,111.026,191.387"}),i.createElement("path",{fill:"rgb(79, 105, 230)",d:"M227.639,96.359c0-16.987-13.82-30.809-30.809-30.809c-16.987,0-30.812,13.821-30.812,30.809 c0,16.988,13.824,30.806,30.812,30.806C213.818,127.165,227.639,113.347,227.639,96.359 M173.736,96.306 c0-12.783,10.364-23.142,23.145-23.142c12.783,0,23.145,10.359,23.145,23.142c0,12.783-10.361,23.142-23.145,23.142 C184.1,119.447,173.736,109.089,173.736,96.306"})),i.createElement("g",{id:"steam"},i.createElement("path",{fill:"rgb(92, 106, 218)",d:"M404.52,91.9l-7.968,14.006c-6.138-4.287-14.455-6.862-21.717-6.862c-8.299,0-13.437,3.43-13.437,9.586 c0,7.473,9.124,9.212,22.682,14.082c14.574,5.149,22.948,11.21,22.948,24.558c0,18.264-14.359,28.519-34.998,28.519 c-10.063,0-22.195-2.595-31.53-8.265l5.815-15.539c7.579,4.008,16.644,6.381,24.722,6.381c10.897,0,16.071-4.021,16.071-9.96 c0-6.802-7.893-8.843-20.641-13.06c-14.521-4.856-24.586-11.213-24.586-25.992c0-16.658,13.34-26.225,32.538-26.225 C387.797,83.128,398.551,87.367,404.52,91.9"}),i.createElement("polygon",{fill:"rgb(99, 107, 211)",points:"468.163,100.753 468.163,174.252 449.402,174.252 449.402,100.753 422.166,100.753 422.166,84.663 495.315,84.663 495.315,100.753 \t"}),i.createElement("polygon",{fill:"rgb(108, 108, 203)",points:"533.512,100.706 533.512,120.896 569.417,120.896 569.417,136.982 533.512,136.982 533.512,158.014 575.173,158.014 575.173,174.253 514.757,174.253 514.757,84.665 575.173,84.665 575.173,100.706"}),i.createElement("path",{fill:"rgb(117, 109, 195)",d:"M617.054,156.857l-5.932,17.396h-19.67l33.593-89.594h18.888l34.539,89.594h-20.336l-6.061-17.396H617.054z M634.378,106.035l-12.23,35.87h24.723L634.378,106.035z"}),i.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"773.403,119.291 748.888,171.645 738.302,171.645 714.182,119.758 714.182,174.253 696.212,174.253 696.212,84.665 714.138,84.665 744.251,149.33 773.285,84.665 791.374,84.665 791.374,174.253 773.406,174.253"})),i.createElement("g",{id:"tv"},i.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"853.961,92.664 823.506,92.664 823.506,84.147 893.835,84.147 893.835,92.664 863.51,92.664 863.51,174.479 853.961,174.479"}),i.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"909.835,84.147 920.286,84.147 950.612,165.831 980.033,84.147 990.487,84.147 956.421,174.479 944.159,174.479"})))}function se(e){var t=Object(s.a)("SVGIcon_Button","SVGIcon_SteamLogo",e&&e.className);return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",viewBox:"0 0 256 256"},i.createElement("path",{fill:"#ffffff",d:"M127.374,5.355c-64.404,0-117.167,49.661-122.18,112.77l65.712,27.171 c5.567-3.808,12.293-6.032,19.53-6.032c0.649,0,1.294,0.017,1.934,0.051l29.226-42.354c0-0.202-0.005-0.399-0.005-0.598 c0-25.496,20.74-46.241,46.237-46.241c25.498,0,46.238,20.745,46.238,46.241c0,25.494-20.74,46.242-46.238,46.242 c-0.352,0-0.698-0.011-1.047-0.021l-41.68,29.741c0.022,0.546,0.041,1.095,0.041,1.644c0,19.141-15.569,34.707-34.706,34.707 c-16.796,0-30.843-11.99-34.026-27.869l-46.993-19.43c14.55,51.464,61.831,89.189,117.957,89.189 c67.713,0,122.604-54.893,122.604-122.604C249.979,60.244,195.086,5.355,127.374,5.355"}),i.createElement("path",{fill:"#ffffff",d:"M82.026,191.387l-15.061-6.22c2.67,5.56,7.285,10.208,13.418,12.767 c13.25,5.521,28.531-0.771,34.054-14.027c2.674-6.416,2.694-13.5,0.04-19.93c-2.646-6.431-7.64-11.451-14.063-14.129 c-6.371-2.647-13.196-2.552-19.198-0.291l15.561,6.437c9.776,4.073,14.396,15.299,10.324,25.071 C103.031,190.841,91.801,195.464,82.026,191.387"}),i.createElement("path",{fill:"#ffffff",d:"M198.639,96.359c0-16.987-13.82-30.809-30.809-30.809c-16.987,0-30.813,13.821-30.813,30.809 c0,16.988,13.824,30.806,30.813,30.806S198.639,113.347,198.639,96.359 M144.736,96.306c0-12.783,10.363-23.142,23.145-23.142 c12.783,0,23.145,10.359,23.145,23.142c0,12.783-10.36,23.142-23.145,23.142C155.1,119.447,144.736,109.089,144.736,96.306"}))}function ce(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Viewers",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"frontGuy",fill:"#666666",d:"M181.732,53.151c-17.255,0-31.321,13.316-31.321,32.634v25.132 c0,18.005,24.006,21.006,24.382,21.381c-10.691,2.813-30.947,8.252-40.888,15.566c-8.252,6.003-11.44,18.005-13.128,22.882 c-0.75,2.063-1.688,5.064-1.688,7.127c0,0,0,9.94,0,19.881s12.941,16.505,18.005,16.505h89.65c4.877,0,18.006-5.627,18.006-16.505 s0-19.881,0-19.881c0-2.251-0.938-5.627-1.688-7.689c-4.313-10.878-4.688-16.316-13.315-22.319 c-9.941-6.939-30.009-12.19-40.512-15.004c0.374-0.563,24.193-4.127,24.193-22.131V85.785 C213.053,66.467,198.986,53.151,181.732,53.151L181.732,53.151z"}),i.createElement("path",{className:"backGuy",fill:"rgb(144, 153, 161)",d:"M84.204,34.396c-20.068,0-36.385,15.38-36.385,38.074v29.258c0,20.818,27.945,24.382,28.32,24.944 c-12.378,3.189-36.01,9.565-47.638,18.006c-9.753,7.127-13.504,21.006-15.379,26.632c-0.75,2.251-1.876,6.002-1.876,8.253  c0,0,0,11.44,0,23.257c0,11.815,15.004,19.13,20.819,19.13h104.279c5.814,0,20.818-6.564,20.818-19.13c0-12.566,0-23.257,0-23.257 c0-2.438-1.125-6.564-2.063-8.815c-5.063-12.566-5.438-18.942-15.566-26.069c-11.628-8.065-34.885-14.067-47.076-17.443 c0.375-0.563,28.133-4.876,28.133-25.695V72.469C120.59,49.775,104.272,34.396,84.204,34.396L84.204,34.396z"}))}function le(){return i.createElement("svg",{version:"1.1",id:"Layer_5",className:"SVGIcon_Button SVGIcon_Globe",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 64 64"},i.createElement("g",null,i.createElement("path",{d:"M32.5,5C17.9,5,6,16.9,6,31.5C6,46.1,17.9,58,32.5,58S59,46.1,59,31.5C59,16.9,47.1,5,32.5,5 M32.5,54.7c-1.2,0-2.5-0.1-3.7-0.3c-1.1-1.1-2.1-2.8-3-4.8c-0.8-1.8-1.4-3.8-2-6c2.7-0.3,5.6-0.5,8.6-0.5c3,0,5.9,0.2,8.6,0.5c-0.5,2.2-1.2,4.2-2,6c-0.9,2-1.9,3.7-3,4.8C35,54.6,33.7,54.7,32.5,54.7 M32.5,41.4c-3.2,0-6.2,0.2-9,0.5c-0.6-3-0.9-6.2-1-9.6h19.9c0,3.4-0.4,6.6-1,9.6C38.7,41.6,35.7,41.4,32.5,41.4 M32.5,8.3c1.2,0,2.5,0.1,3.7,0.3c1.1,1.1,2.1,2.8,3,4.8c0.8,1.8,1.4,3.8,2,6c-2.7,0.3-5.6,0.5-8.6,0.5c-3,0-5.9-0.2-8.6-0.5c0.5-2.2,1.2-4.2,2-6c0.9-2,1.9-3.7,3-4.8C30,8.4,31.3,8.3,32.5,8.3 M32.5,21.6c3.2,0,6.2-0.2,9-0.5c0.6,3,0.9,6.2,1,9.6H22.6c0-3.4,0.4-6.6,1-9.6C26.3,21.4,29.3,21.6,32.5,21.6 M44.1,30.7c0-3.5-0.4-6.8-1-9.8c3.4-0.5,6.4-1.1,8.8-2c2.3,3.5,3.6,7.5,3.7,11.8H44.1z M20.9,30.7H9.3c0.1-4.2,1.4-8.3,3.7-11.8c2.5,0.8,5.5,1.5,8.8,2C21.3,23.9,21,27.2,20.9,30.7 M20.9,32.3c0,3.5,0.4,6.8,1,9.8c-3.4,0.5-6.4,1.1-8.8,2c-2.3-3.5-3.6-7.5-3.7-11.8H20.9z M44.1,32.3h11.6c-0.1,4.2-1.4,8.3-3.7,11.8c-2.5-0.8-5.5-1.5-8.8-2C43.7,39.1,44,35.8,44.1,32.3 M51,17.5c-0.1,0-0.2,0.1-0.3,0.1c-2.3,0.7-5,1.3-7.9,1.7c-0.9-4.1-2.3-7.6-4-10.1c3.8,1.1,7.3,3.1,10.2,5.9C49.6,15.9,50.3,16.6,51,17.5 M26.3,9.2c-1.7,2.5-3.1,6-4,10.1c-2.9-0.4-5.6-1-7.9-1.7c-0.1,0-0.2-0.1-0.3-0.1c0.6-0.8,1.3-1.6,2.1-2.4C19,12.2,22.5,10.2,26.3,9.2 M14,45.5c0.1,0,0.2-0.1,0.3-0.1c2.3-0.7,5-1.3,7.9-1.7c0.9,4.1,2.3,7.6,4,10.1c-3.8-1.1-7.3-3.1-10.2-5.9C15.4,47.1,14.7,46.4,14,45.5 M38.7,53.8c1.7-2.5,3.1-6,4-10.1c2.9,0.4,5.6,1,7.9,1.7c0.1,0,0.2,0.1,0.3,0.1c-0.6,0.8-1.3,1.6-2.1,2.4C46,50.8,42.5,52.8,38.7,53.8"})))}function pe(){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_STVTimelineGrabber",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{className:"leftarrow",opacity:"0"},i.createElement("polygon",{points:"127.817,4.403 4,128 127.817,251.598"})),i.createElement("g",{className:"rightarrow",opacity:"0"},i.createElement("polygon",{points:"127.816,4.403 251.633,128 127.816,251.598"})),i.createElement("g",{className:"grabber"},i.createElement("polygon",{points:"145.692,22.132 145.692,234.361 127.817,251.598 110.307,234.361 110.307,22.132 127.817,4.403"})))}function ue(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_STVTimelineMarker",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polygon",{className:"pointer",points:"128,154.979 46.374,230.548 46.374,253.333 209.626,253.333 209.626,230.548 \t"}),i.createElement("rect",{className:"line",x:"116.271",y:"3.168",width:"23.459",height:"137.332"}))}function me(e){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_HideShowChat",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("g",{id:"hidechat",opacity:e.showChat?"0":"1"},">",i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011"}),i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"49.786",y1:"15.012",x2:"214.409",y2:"233.723"})),i.createElement("g",{id:"showchat",opacity:e.showChat?"1":"0"},i.createElement("polygon",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 225.299,59.011 225.299,189.834"})),i.createElement("g",{id:"textlines",opacity:e.showChat?"1":"0"},i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"124.75",x2:"194.167",y2:"124.75"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"155.75",x2:"194.167",y2:"155.75"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"93.75",x2:"179.926",y2:"93.75"}),i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011 "}),i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"})))}function de(){return i.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ShowBothChats",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("circle",{opacity:"0",fill:"#FFFFFF",strokeWidth:"0",cx:"166.241",cy:"161.906",r:"75.259"}),i.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeLinecap:"round",strokeMiterlimit:"10",points:"92.367,155.634 51.311,183 51.311,150.296 23.834,150.296 23.834,19.473 140.5,19.473 140.5,91.5"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"82.167",x2:"113.379",y2:"82.167"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"113.167",x2:"113.379",y2:"113.167"}),i.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"51.167",x2:"99.138",y2:"51.167"}),i.createElement("path",{d:"M166.241,82.167c-43.933,0-79.74,35.807-79.74,79.74c0,43.932,35.808,79.739,79.74,79.739 c43.932,0,79.739-35.808,79.739-79.739C245.98,117.975,210.173,82.167,166.241,82.167 M166.241,231.717 c-3.611,0-7.522-0.301-11.134-0.902c-3.31-3.311-6.318-8.426-9.027-14.444c-2.407-5.416-4.212-11.434-6.018-18.054  8.124-0.902,16.851-1.505,25.878-1.505c9.026,0,17.753,0.603,25.877,1.505c-1.504,6.62-3.61,12.638-6.018,18.054 c-2.708,6.019-5.718,11.134-9.027,14.444C173.764,231.416,169.852,231.717,166.241,231.717 M166.241,191.696 c-9.629,0-18.656,0.602-27.082,1.505c-1.805-9.027-2.708-18.656-3.009-28.887h59.88c0,10.23-1.203,19.859-3.009,28.887 C184.896,192.298,175.87,191.696,166.241,191.696 M166.241,92.097c3.61,0,7.522,0.301,11.133,0.903 c3.311,3.31,6.319,8.425,9.027,14.443c2.407,5.416,4.213,11.435,6.019,18.055c-8.125,0.902-16.851,1.504-25.878,1.504  s-17.753-0.602-25.878-1.504c1.505-6.62,3.611-12.639,6.019-18.055c2.708-6.018,5.717-11.133,9.026-14.443 \tC158.719,92.398,162.63,92.097,166.241,92.097 M166.241,132.117c9.629,0,18.655-0.602,27.081-1.504 \tc1.806,9.026,2.708,18.655,3.009,28.887h-59.88c0-10.231,1.204-19.86,3.01-28.887 \tC147.585,131.516,156.612,132.117,166.241,132.117 M201.146,159.5c0-10.532-1.203-20.462-3.009-29.488 c10.23-1.505,19.258-3.311,26.479-6.019c6.921,10.531,10.833,22.567,11.134,35.507H201.146z M131.336,159.5H96.432 c0.301-12.639,4.212-24.976,11.133-35.507c7.522,2.407,16.55,4.514,26.479,6.019C132.54,139.038,131.637,148.968,131.336,159.5 M131.336,164.314c0,10.531,1.204,20.461,3.01,29.488c-10.231,1.505-19.259,3.31-26.48,6.018 c-6.921-10.531-10.832-22.567-11.133-35.506H131.336z M201.146,164.314h34.905c-0.301,12.638-4.213,24.975-11.134,35.506 c-7.522-2.406-16.55-4.513-26.479-6.018C199.942,184.775,200.845,174.846,201.146,164.314 M221.908,119.78 c-0.301,0-0.602,0.301-0.903,0.301c-6.92,2.106-15.045,3.912-23.771,5.115c-2.708-12.337-6.921-22.868-12.036-30.391 c11.434,3.31,21.966,9.328,30.691,17.753C217.695,114.966,219.802,117.072,221.908,119.78 M147.585,94.806 c-5.115,7.522-9.328,18.054-12.036,30.391c-8.727-1.203-16.851-3.009-23.771-5.115c-0.301,0-0.602-0.301-0.902-0.301 c1.805-2.407,3.911-4.814,6.318-7.222C125.619,103.833,136.15,97.814,147.585,94.806 M110.574,204.033 c0.301,0,0.602-0.301,0.902-0.301c6.921-2.106,15.045-3.912,23.771-5.115c2.708,12.337,6.921,22.869,12.036,30.392 c-11.435-3.311-21.966-9.328-30.692-17.754C114.786,208.848,112.68,206.742,110.574,204.033 M184.896,229.009 c5.116-7.522,9.329-18.055,12.036-30.392c8.727,1.203,16.852,3.009,23.771,5.115c0.301,0,0.603,0.301,0.903,0.301 c-1.806,2.407-3.912,4.814-6.319,7.222C206.863,219.981,196.331,226,184.896,229.009"}))}function he(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_BigPicture",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{fill:"#ffffff",d:"M213.771,68.659c-4.108-7.066-46.007-7.231-49.293-7.231H128H91.522c-3.286,0-45.186,0.165-49.293,7.231 c-19.555,29.248-27.385,100.263-27.276,104.01c0.238,8.294,2.11,24.583,16.595,35.162c9.201,6.72,22.183,8.709,29.083,3.614 c4.989-3.682,11.995-19.224,19.061-32.204c7.064-12.981,9.202-11.174,12.98-12.159c3.78-0.986,36.066-0.74,36.066-0.74 s30.809-0.247,34.588,0.74c3.777,0.985,5.915-0.822,12.98,12.159c7.064,12.98,14.07,28.522,19.061,32.204 c6.9,5.095,19.882,3.106,29.083-3.614c14.485-10.58,16.356-26.868,16.595-35.162C241.154,168.922,233.325,97.906,213.771,68.659z M67.251,128.14c-14.974,0-27.112-12.137-27.112-27.111c0-14.975,12.137-27.112,27.112-27.112 c14.973,0,27.111,12.137,27.111,27.112C94.362,116.003,82.224,128.14,67.251,128.14z M188.749,128.14 c-14.974,0-27.111-12.137-27.111-27.111c0-14.975,12.138-27.112,27.111-27.112c14.973,0,27.111,12.137,27.111,27.112 C215.86,116.003,203.722,128.14,188.749,128.14z"}))}function fe(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_MobilePhone",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{d:"M165.693,45.186H91.368c-7.963,0-14.41,6.447-14.41,14.41V210.9c0,7.964,6.447,14.41,14.41,14.41h74.134 c7.965,0,14.41-6.447,14.41-14.41V59.596C180.102,51.633,173.657,45.186,165.693,45.186z M113.172,57.509h30.717 c1.707,0,3.223,1.327,3.223,3.224c0,1.896-1.328,3.223-3.223,3.223h-30.717c-1.707,0-3.223-1.328-3.223-3.223 C109.949,58.837,111.465,57.509,113.172,57.509z M128.529,213.554c-4.551,0-8.152-3.603-8.152-8.153c0-4.55,3.604-8.152,8.152-8.152 s8.151,3.603,8.151,8.152C136.682,209.761,133.081,213.554,128.529,213.554z M169.105,186.819h-81.15V74.384h81.15V186.819 L169.105,186.819z"}))}function _e(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_VR",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{d:"M224.389,62.411H31.613c-10.147,0-18.36,8.214-18.36,18.36v94.453c0,10.147,8.215,18.359,18.36,18.359h192.775 c10.146,0.241,18.358-7.968,18.358-18.116V80.771C242.747,70.625,234.534,62.411,224.389,62.411z M92.317,175.026H71.646 L35.472,79.832h21.895l25.022,72.484l24.343-72.484h21.895L92.317,175.026z M195.264,175.026l-19.175-32.095h-2.176h-14.279 v32.095h-19.991V79.832h35.63c13.056,0,22.664,2.607,28.831,7.819c6.164,5.215,9.247,12.49,9.247,21.827 c0,7.343-1.61,13.463-4.828,18.359c-3.219,4.896-7.729,8.614-13.531,11.151l22.575,36.038H195.264z"}),i.createElement("path",{d:"M187.784,100.298c-2.812-2.312-7.391-3.468-13.735-3.468h-14.415v28.966h15.639c5.257,0,9.36-1.336,12.308-4.012 c2.945-2.673,4.42-6.368,4.42-11.083C192,106.078,190.593,102.61,187.784,100.298z"}))}function ge(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_LargeMobilePhone",x:"0px",y:"0px",width:"128px",height:"255px",viewBox:"0 0 128 255"},i.createElement("rect",{className:"screen",x:"7.756",y:"5.518",fill:"#292D33",width:"112.144",height:"234.357"}),i.createElement("path",{className:"frame",fill:"#3C414B",d:"M40.334,15.72h47.237c3.957,0,7.164-3.259,7.164-7.28c0-1.113,0.889-2.017,1.984-2.017h9.746 c7.417,0,13.432,6.108,13.432,13.646v206.156c0,7.538-6.015,13.647-13.431,13.647H21.459c-7.417,0-13.429-6.109-13.429-13.647 V20.071c0-7.536,6.013-13.646,13.429-13.646h9.728c1.096,0,1.983,0.903,1.983,2.017C33.17,12.461,36.377,15.72,40.334,15.72 M107.057,0.001H20.87c-9.922,0-17.965,8.174-17.965,18.256v217.505c0,10.082,8.043,18.256,17.965,18.256h86.188 c9.923,0,17.966-8.174,17.966-18.256V18.257C125.022,8.175,116.979,0.001,107.057,0.001"}),i.createElement("path",{fill:"#3C414B",d:"M0.826,33.349C0.369,33.349,0,33.725,0,34.189v7.616c0,0.464,0.37,0.84,0.826,0.84s0.827-0.376,0.827-0.84 v-7.617C1.653,33.725,1.283,33.349,0.826,33.349"}),i.createElement("path",{fill:"#3C414B",d:"M0.826,51.56C0.369,51.56,0,51.936,0,52.4v16.8c0,0.465,0.37,0.841,0.826,0.841s0.827-0.376,0.827-0.841 V52.4C1.653,51.936,1.283,51.56,0.826,51.56"}),i.createElement("path",{fill:"#3C414B",d:"M0.826,75.304C0.369,75.304,0,75.68,0,76.144v15.904c0,0.464,0.37,0.84,0.826,0.84s0.827-0.376,0.827-0.84 V76.144C1.653,75.68,1.283,75.304,0.826,75.304"}),i.createElement("path",{fill:"#3C414B",d:"M127.617,58.056c-0.457,0-0.827,0.376-0.827,0.84v27.328c0,0.464,0.37,0.84,0.827,0.84 c0.456,0,0.826-0.376,0.826-0.84V58.896C128.443,58.432,128.073,58.056,127.617,58.056"}))}function be(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Envelope",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("polygon",{fill:"#3C414B",points:"3.167,48.809 127.22,128 252.833,48.809 "}),i.createElement("polygon",{fill:"#3C414B",points:"252.833,203.68 252.833,55.439 185.151,99.131 "}),i.createElement("polygon",{fill:"#3C414B",points:"247.958,207.191 180.47,101.472 128.001,134.24 75.142,101.472 7.849,207.191 "}),i.createElement("polygon",{fill:"#3C414B",points:"3.167,203.682 3.167,55.441 70.851,99.132 "}))}function ve(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_YouTube",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{d:"M243.402,70.101c-2.775-10.309-10.906-18.439-21.217-21.217c-18.838-5.152-94.185-5.152-94.185-5.152 s-75.348,0-94.185,4.957c-10.112,2.775-18.44,11.104-21.216,21.413C7.644,88.94,7.644,128,7.644,128s0,39.257,4.957,57.896 c2.775,10.313,10.905,18.439,21.216,21.219c19.036,5.154,94.185,5.154,94.185,5.154s75.347,0,94.185-4.957 c10.311-2.771,18.441-10.906,21.217-21.217c4.953-18.838,4.953-57.898,4.953-57.898S248.557,88.94,243.402,70.101z M104.008,164.088 V91.912L166.668,128L104.008,164.088z"}))}function Se(){return i.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_CSGO",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M236.979,138.059c0.548,0.078,6.91,0.101,7.772,0.032 c1.215-0.095,1.396,0.068,1.388,0.708c-0.01,0.397,0.012,3.039-2.365,7.32c-3.301,5.948-12.079,10.436-12.55,10.672 c-0.47,0.233-0.53,0.484-0.136,0.75c0.434,0.295,8.068,1.454,9.084,1.611c1.017,0.154,0.637,1.001,0.637,1.001 s-0.704,2.621-2.895,5.36c-2.189,2.738-9.311,6.123-8.583,6.123c0.731,0,7.187,0.159,6.181,1.422 c-3.019,3.786-13.603,9.528-18.43,13.813c-13.388,11.885-13.217,12.864-15.52,15.09c-0.983-3.298-3.02-12.658-3.02-12.658 l-6.105-11.467c4.413,0.18,6.364,0.081,8.952,0.081c9.214,0,17.525-2.185,22.234-5.841l2.371-1.843l-2.911-0.728 c-2.131-0.528-7.121-1.782-11.896-2.979c2.184-0.104,10.803-1.299,14.413-5.339c0.136-0.151,0.276-0.321,0.406-0.494l1.245-1.664 l-2.404-0.735c-2.607-0.799-5.948-1.682-8.517-2.335c3.173-1.572,7.585-3.942,10.048-6.088c4.83-4.203,7.226-9.709,7.322-9.943 l0.9-2.098l-10.772,0.318c1.503-1.483,3.218-3.197,3.939-3.991c1.43-1.571,4.053-6.221,4.198-9.896l0.072-1.787l-1.763,0.288 c-1.979,0.322-5.301,1.279-8.179,2.173c2.025-2.193,4.296-4.767,5.46-6.484c2.687-3.964,2.76-8.371,2.597-12.916l-0.104-2.881 l-2.261,1.79c-2.559,2.028-7.595,5.031-11.097,7.047c1.538-3.644,3.54-8.752,3.813-11.276c0.5-4.681-0.248-10.196-0.248-10.196 l-10.76,9.394c0.885-1.953,1.684-4.013,2.117-5.832c1.735-7.29,0.055-17.892-0.021-18.338l-0.452-2.807l-7.777,7.739 c0.722-3.535,1.465-8.253,1.23-11.789c-0.426-6.321-2.278-10.517-2.359-10.694l-1.01-2.251l-6.465,8.577 c0.231-4.285,0.27-10.24-0.948-13.547c-1.934-5.262-3.651-8.007-3.723-8.121l-1.232-1.958l-3.057,4.85 c0.018-2.967-0.11-6.475-0.69-8.68c-1.202-4.543-2.825-6.396-3.002-6.592l-1.325-1.433l-1.623,2.705 c-0.278-3.19-1.112-7.084-3.343-9.478l-0.814-0.872l-1.012,0.623c-0.327,0.201-0.714,0.497-1.104,0.823 c-0.154-1.135-0.365-2.451-0.639-3.691c0.563-4.733,1.186-10.03,1.206-10.452c0.027-0.547,0.274-0.767,1.017-0.391 c0.898,0.452,3.156,2.064,5.187,6.133c2.036,4.067,3.132,11.324,3.117,12.044c-0.009,0.383,0.291,0.757,0.438,0.151 c0.145-0.607,0.478-7.591,0.623-8.312c0.081-0.383,0.199-0.484,0.737-0.212c0.496,0.249,2.959,2.181,4.899,6.463 c1.179,2.599,1.634,11.946,1.574,12.653c-0.106,1.278,0.313,0.891,0.339,0.883c-0.009,0.013-0.025,0.04-0.03,0.049 c0.03-0.041,0.036-0.049,0.03-0.049c0.573-0.841,4.21-8.99,4.519-9.377c0.313-0.39,0.521-0.395,0.835,0.002 c0.262,0.33,2.095,1.717,4.049,10.088c1.902,8.135,1.949,11.542,1.848,12.682c-0.08,0.86,0.339,0.993,0.731,0.524 c0.389-0.47,5.104-9.201,5.497-9.515c0.389-0.313,0.613-0.309,0.927,0.161c0.312,0.469,2.718,4.762,3.684,11.448 c0.861,5.947,0.608,13.599,0.375,14.381c-0.235,0.782-0.135,1.077,0.493,0.53c0.623-0.548,10.299-8.412,11.004-9.038 c0.703-0.627,1.18-0.65,1.34-0.046c0.172,0.654,0.822,8.654,0.275,15.225c-0.549,6.571-2.626,12.752-2.94,13.145 c-0.312,0.391,0.087,0.712,0.478,0.555c0.394-0.157,11.902-10.018,12.645-10.402c0.711-0.367,1.043,0.005,1.105,0.507 c0.068,0.544,0.966,3.098-0.419,11.269c-0.959,5.65-3.54,11.876-3.855,12.033c-0.313,0.157-0.077,0.336,0.234,0.259 c0.315-0.079,8.324-3.488,8.872-3.567c0.546-0.079,0.671,0.339,0.514,0.808c-0.158,0.469-0.458,6.273-2.534,11.639 c-2.603,6.732-6.056,11.001-6.056,11.001s-0.252,0.519,0.217,0.519s9.266-0.186,9.813-0.263c0.547-0.079,0.627,0.156,0.547,0.704 c-0.077,0.547,0.858,9.116-8.624,14.601C236.524,137.734,236.432,137.979,236.979,138.059z M174.473,24.823 c1.981,3.34,2.018,9.248,1.836,11.469l-0.52,6.238l5.25-8.744c0.395,0.843,0.85,2.003,1.25,3.524 c1.02,3.877,0.422,13.082,0.417,13.173l-0.384,5.752l6.435-10.212c0.628,1.27,1.45,3.097,2.32,5.459 c1.466,3.983,0.772,13.806,0.381,17.257l-0.602,5.308l9.568-12.69c0.493,1.707,1.058,4.21,1.259,7.227 c0.39,5.821-2.272,15.731-2.299,15.83l-1.428,5.26l11.125-11.068c0.377,3.586,0.772,9.774-0.304,14.302 c-1.2,5.057-5.778,12.588-5.823,12.664l-1.806,3.992l16.878-14.09c-0.116,1.366-0.262,2.944-0.423,4.435 c-0.312,2.935-3.954,11.389-5.335,14.399l-1.827,4.002l3.856-2.115c0.381-0.208,8.027-4.41,12.979-7.778 c-0.039,3.484-0.537,6.042-2.139,8.4c-2.189,3.234-9.05,10.198-9.118,10.268l-4.352,4.408l5.861-2.004 c0.08-0.025,6.868-2.34,11.188-3.41c-0.675,2.445-2.208,5.125-3.11,6.118c-1.319,1.449-6.429,6.429-6.48,6.482l-2.682,2.614 l13.475-0.404c-1.06,1.837-2.89,4.549-5.457,6.783c-3.727,3.244-12.956,7.341-13.048,7.383l-3.952,1.746l4.201,1.008 c0.062,0.015,5.637,1.354,10.266,2.67c-3.412,2.191-9.291,3.081-10.948,3.138c-2.06,0.072-11.075,0.125-11.075,0.125l-11.51,0.069 l11.162,2.804c0,0,12.587,3.164,19.486,4.894c-4.398,2.216-10.717,3.493-17.657,3.493c-3.102,0-10.335-0.284-15.048-0.483 c4.064,6.069,7.041,11.004,7.992,13.681c2.813,7.915,6.777,28.269,6.889,48.907c0.039,6.572-1.081,11.649-9.022,11.649 c-0.288,0-0.597-0.038-0.908-0.092c-1.846,0.339-4.351,0.595-5.438-0.095c-1.805-1.149-3.163-2.627-3.544-3.957 c-0.383-1.334-1.146-9.374-3.106-20.675c-1.92-11.046-4.038-19.431-4.237-19.525c-1.535-0.731-9.358-18.45-9.358-18.45 l-37.23-47.615c0,0-20.737,23.917-37.455,47.8c-0.867,1.235-5.994,11.251-9.275,17.989c-0.212,0.437-0.181,0.475-0.281,0.808 c-0.604,2.015-2.396,9.525-4.039,18.994c-1.962,11.301-2.725,19.341-3.105,20.675c-0.384,1.33-1.74,2.808-3.546,3.957 c-1.085,0.689-3.592,0.434-5.437,0.095c-0.313,0.054-0.621,0.092-0.909,0.092c-7.941,0-9.061-5.077-9.024-11.649 c0.114-20.639,4.078-40.992,6.892-48.907c0.95-2.677,3.926-7.611,7.993-13.681c-4.714,0.199-11.946,0.483-15.051,0.483 c-6.939,0-13.26-1.277-17.653-3.493c6.896-1.729,19.486-4.894,19.486-4.894l11.159-2.804l-11.508-0.069 c0,0-9.019-0.053-11.076-0.125c-1.66-0.057-7.537-0.946-10.949-3.138c4.629-1.315,10.202-2.655,10.264-2.67l4.201-1.008l-3.95-1.746 c-0.094-0.042-9.324-4.139-13.049-7.383c-2.566-2.234-4.397-4.946-5.458-6.783l13.477,0.404l-2.684-2.614 c-0.05-0.054-5.16-5.033-6.48-6.482c-0.9-0.993-2.436-3.673-3.108-6.118c4.319,1.069,11.108,3.384,11.188,3.41l5.861,2.004 l-4.352-4.408c-0.069-0.069-6.928-7.033-9.12-10.268c-1.601-2.358-2.099-4.916-2.139-8.4c4.953,3.368,12.601,7.57,12.98,7.778 l3.858,2.115l-1.829-4.002c-1.379-3.011-5.022-11.465-5.334-14.399c-0.161-1.491-0.305-3.068-0.421-4.435l16.877,14.09l-1.806-3.992 c-0.046-0.076-4.622-7.607-5.821-12.664c-1.078-4.528-0.682-10.716-0.307-14.302L58.57,89.672l-1.426-5.26 c-0.025-0.098-2.688-10.008-2.3-15.83c0.203-3.017,0.767-5.52,1.26-7.227l9.566,12.69l-0.601-5.308 c-0.391-3.451-1.083-13.274,0.381-17.257c0.871-2.362,1.693-4.189,2.32-5.459l6.435,10.212l-0.382-5.752 c-0.006-0.091-0.604-9.295,0.416-13.173c0.401-1.521,0.854-2.681,1.251-3.524l5.249,8.744l-0.52-6.238 c-0.181-2.221-0.144-8.129,1.836-11.469c0.596,0.522,1.248,1.148,1.67,1.575l2.215,2.245l0.276-3.142 c0.162-1.838,0.783-7.003,1.703-8.813c1.342-2.635,4.69-3.91,7.104-4.505c-6.691,13.614-36.889,77.59-36.889,122.937 c0,23.658,16.206,23.931,16.368,23.931c4.881,0,6.947-7.914,6.947-11.063V133.45c0-2.744,1.148-2.744,1.835-2.744 c5.807,0,10.48,3.196,13.855,6.69c8.813-11.615,15.81-20.526,15.81-20.526s0.16-0.182,0.248-0.345 c-1.03-2.443-7.165-16.995-7.165-16.995l1.708-43.717c0,0-0.278-3.797,1.044-6.052c1.314-2.245,4.247-3.175,4.247-3.175 l13.307,41.443c0,0-4.107,0.866-4.107,5.585c0,2.982,2.658,4.99,6.227,5.013c3.572-0.022,6.227-2.031,6.227-5.013 c0-4.719-4.109-5.585-4.109-5.585l13.311-41.443c0,0,2.93,0.93,4.245,3.175c1.322,2.255,1.043,6.052,1.043,6.052l1.709,43.717 l-7.309,17.34c0,0,6.997,8.911,15.809,20.526c3.375-3.494,8.048-6.69,13.855-6.69c0.687,0,1.833,0,1.833,2.744v14.538 c0,3.148,2.068,11.063,6.95,11.063c0.159,0,16.367-0.272,16.367-23.931c0-45.347-30.197-109.322-36.888-122.937 c2.412,0.595,5.761,1.87,7.104,4.505c0.92,1.809,1.541,6.975,1.705,8.813l0.275,3.142l2.213-2.245 C173.226,25.972,173.875,25.345,174.473,24.823z M176.157,181.396c-1.644-2.189-41.07-55.856-41.07-55.856l-6.723,8.809 l-0.946-1.233l-0.829-1.082l-5.053-6.594l-0.095,0.101c0,0-39.427,53.667-41.07,55.856c-1.643,2.191-4.777,6.708-6.058,9.322 c-1.279,2.614-8.946,39.306-8.946,42.592c0,2.005,0.041,8.618,0.071,13.47c1.536,0.2,3.411,0.761,4.357,0.125 c1.624-1.093,2.363-2.323,2.491-3.372c0.128-1.048,1.367-12.969,2.69-20.812c1.779-10.547,4.571-19.005,4.415-18.97 c3.213-6.672,8.966-17.938,9.887-19.252c17.808-25.439,38.994-49.947,38.994-49.947s21.166,24.502,38.978,49.947 c0.921,1.313,6.672,12.58,9.888,19.252c-0.158-0.035,2.635,8.423,4.414,18.97c1.322,7.843,2.562,19.764,2.688,20.812 c0.131,1.049,0.87,2.279,2.493,3.372c0.944,0.636,2.818,0.075,4.355-0.125c0.032-4.852,0.073-11.465,0.073-13.47 c0-3.286-7.667-39.978-8.948-42.592C180.936,188.104,177.801,183.588,176.157,181.396z M82.538,21.517l-1.014-0.623l-0.813,0.872 c-2.231,2.394-3.063,6.287-3.342,9.478l-1.624-2.705l-1.323,1.433c-0.179,0.197-1.801,2.049-3.004,6.592 c-0.581,2.205-0.709,5.712-0.689,8.68l-3.057-4.85l-1.234,1.958c-0.072,0.114-1.787,2.859-3.722,8.121 c-1.22,3.307-1.179,9.262-0.949,13.547l-6.463-8.577l-1.012,2.251c-0.08,0.177-1.934,4.373-2.359,10.694 c-0.234,3.536,0.51,8.253,1.231,11.789l-7.778-7.739l-0.453,2.807c-0.073,0.446-1.754,11.048-0.02,18.338 c0.433,1.819,1.231,3.879,2.117,5.832l-10.759-9.394c0,0-0.749,5.515-0.248,10.196c0.271,2.523,2.272,7.632,3.813,11.276 c-3.503-2.016-8.539-5.019-11.099-7.047l-2.259-1.79l-0.106,2.881c-0.162,4.545-0.087,8.952,2.6,12.916 c1.161,1.717,3.433,4.291,5.459,6.484c-2.877-0.894-6.201-1.851-8.179-2.173l-1.763-0.288l0.071,1.787 c0.148,3.675,2.771,8.324,4.198,9.896c0.723,0.794,2.436,2.508,3.941,3.991L21.93,137.83l0.896,2.098 c0.1,0.234,2.493,5.74,7.324,9.943c2.464,2.146,6.876,4.516,10.047,6.088c-2.57,0.653-5.908,1.536-8.518,2.335l-2.402,0.735 l1.246,1.664c0.13,0.173,0.27,0.343,0.407,0.494c3.608,4.04,12.229,5.234,14.412,5.339c-4.774,1.197-9.767,2.451-11.896,2.979 l-2.911,0.728l2.371,1.843c4.708,3.656,13.02,5.841,22.233,5.841c2.588,0,4.539,0.099,8.954-0.081l-6.105,11.467 c0,0-2.038,9.36-3.02,12.658c-2.304-2.226-2.133-3.205-15.52-15.09c-4.829-4.284-15.411-10.026-18.429-13.813 c-1.005-1.263,5.449-1.422,6.179-1.422c0.73,0-6.393-3.385-8.582-6.123c-2.191-2.739-2.895-5.36-2.895-5.36s-0.38-0.847,0.637-1.001 c1.018-0.157,8.65-1.316,9.084-1.611c0.395-0.266,0.332-0.517-0.137-0.75c-0.469-0.236-9.248-4.724-12.548-10.672 c-2.375-4.281-2.357-6.923-2.364-7.32c-0.01-0.64,0.17-0.803,1.385-0.708c0.862,0.068,7.226,0.046,7.774-0.032 c0.546-0.08,0.453-0.324,0.019-0.576c-9.483-5.484-8.546-14.054-8.624-14.601c-0.079-0.548,0-0.783,0.548-0.704 c0.546,0.077,9.342,0.263,9.812,0.263c0.469,0,0.218-0.519,0.218-0.519s-3.452-4.27-6.056-11.001 c-2.077-5.366-2.377-11.169-2.533-11.639c-0.157-0.469-0.034-0.887,0.514-0.808c0.549,0.079,8.558,3.488,8.87,3.567 c0.313,0.077,0.548-0.103,0.235-0.259c-0.314-0.157-2.896-6.383-3.855-12.033c-1.384-8.17-0.488-10.725-0.42-11.269 c0.063-0.502,0.397-0.874,1.105-0.507c0.743,0.385,12.255,10.245,12.646,10.402c0.391,0.157,0.79-0.164,0.477-0.555 c-0.313-0.392-2.392-6.574-2.938-13.145c-0.548-6.571,0.1-14.571,0.274-15.225c0.161-0.604,0.635-0.581,1.339,0.046 c0.704,0.626,10.381,8.489,11.006,9.038c0.625,0.547,0.727,0.252,0.492-0.53c-0.235-0.782-0.484-8.435,0.375-14.381 c0.965-6.686,3.372-10.979,3.685-11.448s0.536-0.474,0.927-0.161c0.391,0.313,5.106,9.045,5.497,9.515 c0.391,0.469,0.809,0.336,0.732-0.524c-0.104-1.14-0.057-4.547,1.845-12.682c1.956-8.371,3.789-9.758,4.052-10.088 c0.313-0.396,0.521-0.392,0.833-0.002c0.309,0.387,3.945,8.536,4.519,9.377c-0.005,0,0,0.008,0.031,0.049 c-0.007-0.009-0.022-0.036-0.031-0.049c0.025,0.008,0.446,0.395,0.34-0.883c-0.058-0.707,0.396-10.055,1.574-12.653 c1.941-4.282,4.404-6.214,4.899-6.463c0.54-0.272,0.658-0.171,0.737,0.212c0.146,0.721,0.478,7.705,0.625,8.312 c0.146,0.606,0.444,0.232,0.437-0.151c-0.015-0.72,1.081-7.977,3.115-12.044c2.033-4.069,4.292-5.681,5.188-6.133 c0.742-0.376,0.989-0.156,1.018,0.391c0.022,0.422,0.645,5.719,1.206,10.452c-0.272,1.24-0.484,2.556-0.639,3.691 C83.251,22.014,82.866,21.718,82.538,21.517z M127.35,141.814c-1.158,12.032-4.978,23.045-6.326,29.486 c-1.643,7.849-4.788,18.061-6.793,20.931c-4.433,6.343-18.036,18.547-20.403,19.732c-1.094,0.547-6.376-4.115-6.56-4.846 c-0.182-0.728,2.883-3.993,2.154-3.627c-0.731,0.364-4.104,0.906-5.06,0.87c-0.753-0.026,0.633-2.728,0.633-2.728 s-1.484,2.217-3.021,2.947c-0.03,0.015,9.433-18.119,9.433-18.119S127.52,140.043,127.35,141.814z M119.7,169.39l3.104-10.647 l-1.869-0.559l-3.152,10.656L119.7,169.39z M114.072,167.242l4.687-10.051l-1.764-0.838l-4.735,10.055L114.072,167.242z  M126.961,159.319l-0.82,11.06l-1.991-0.139l0.867-11.079L126.961,159.319z M131.727,170.391l-1.986,0.167l-0.828-11.078 l1.944-0.144L131.727,170.391z M164.422,186.462c0,0,9.463,18.134,9.434,18.119c-1.54-0.73-3.021-2.947-3.021-2.947 s1.384,2.701,0.633,2.728c-0.957,0.036-4.33-0.506-5.06-0.87c-0.731-0.366,2.334,2.899,2.153,3.627 c-0.185,0.73-5.467,5.393-6.56,4.846c-2.368-1.186-15.973-13.39-20.404-19.732c-2.007-2.87-5.149-13.082-6.792-20.931 c-1.349-6.441-4.621-17.127-5.778-29.16C128.854,140.373,164.422,186.462,164.422,186.462z M142.029,167.242l1.813-0.834 l-4.735-10.055l-1.762,0.838L142.029,167.242z M136.402,169.39l1.917-0.55l-3.152-10.656l-1.868,0.559L136.402,169.39z"}))}function ye(){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ClosedCaption",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{className:"CCBox",fill:"none",stroke:"#000000",strokeWidth:"10",strokeMiterlimit:"10",d:"M238,210c0,6.627-5.373,12-12,12H30 c-6.627,0-12-5.373-12-12V46c0-6.627,5.373-12,12-12h196c6.627,0,12,5.373,12,12V210z"}),i.createElement("path",{className:"C1",d:"M90.505,173.207c11.431,0,22.338-4.276,30.72-12.036c2.6-2.407,2.753-6.47,0.347-9.068c-2.41-2.604-6.47-2.757-9.072-0.349 c-5.998,5.559-13.811,8.62-21.995,8.62c-17.852,0-32.373-14.524-32.373-32.372c0-17.849,14.521-32.373,32.373-32.373 c8.177,0,15.981,3.055,21.979,8.603c2.603,2.407,6.662,2.25,9.072-0.353c2.407-2.602,2.249-6.662-0.353-9.068 c-8.375-7.751-19.276-12.019-30.694-12.019c-24.931,0-45.209,20.281-45.209,45.209C45.3,152.93,65.574,173.207,90.505,173.207z"}),i.createElement("path",{className:"C1",d:"M177.926,173.207c11.431,0,22.338-4.276,30.721-12.036c2.6-2.407,2.754-6.47,0.347-9.068 c-2.41-2.604-6.47-2.757-9.072-0.349c-5.998,5.559-13.812,8.62-21.995,8.62c-17.852,0-32.372-14.524-32.372-32.372 c0-17.849,14.521-32.373,32.372-32.373c8.178,0,15.981,3.055,21.979,8.603c2.604,2.407,6.663,2.25,9.072-0.353 c2.407-2.602,2.25-6.662-0.353-9.068c-8.375-7.751-19.277-12.019-30.694-12.019c-24.932,0-45.209,20.281-45.209,45.209 C132.721,152.93,152.996,173.207,177.926,173.207z"}))}function Ce(){return i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Hidden",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},i.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M62.499,172.263 c-32.755-16.197-47.415-39.509-47.415-39.509"}),i.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M177.948,85.392 c48.213,14.998,68.451,47.362,68.451,47.362s-36.393,54.737-115.689,54.737c-17.938,0-33.591-2.671-47.096-6.832"}),i.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M15.084,132.754 c0,0,32.933-56.576,115.674-54.785c8.505,0.185,16.486,0.913,23.96,2.072"}),i.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M93.981,141.131 c-0.475-2.385-0.725-4.852-0.725-7.377c0-20.711,16.789-37.5,37.5-37.5c2.42,0,4.787,0.229,7.08,0.668"}),i.createElement("path",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M156.528,106.512 c7.223,6.836,11.729,16.513,11.729,27.242c0,20.711-16.789,37.5-37.5,37.5c-10.609,0-20.189-4.405-27.012-11.487"}),i.createElement("line",{fill:"none",stroke:"#FFFFFF",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"53.007",y1:"210.504",x2:"208.507",y2:"55.004"}))}},eMko:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return p});var f=n("mrSG"),_=n("q1tI"),o=n("2vnA"),i=n("okNM"),r=n("vDqi"),a=n.n(r),s=n("1n9R"),g=n("lqmi"),b=n("oh5H"),v=n("9PRf"),S=n("uw3m"),y=n("da/R"),C=n("QHER"),c=n("r6f6"),O=n.n(c),l=function(){function e(e){this.m_bLoadingData=!1,this.m_accountid=e}return Object.defineProperty(e.prototype,"community_data",{get:function(){return this.m_communityData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"community_data_ready",{get:function(){return void 0!==this.m_communityData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_level",{get:function(){return this.m_communityData&&this.m_communityData.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_level_class",{get:function(){return this.m_communityData&&this.m_communityData.level_class},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_badge",{get:function(){return this.m_communityData&&this.m_communityData.favorite_badge},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_in_game",{get:function(){return this.m_communityData&&this.m_communityData.in_game},enumerable:!0,configurable:!0}),e.prototype.EnsureCommunityDataLoaded=function(){var n=this;void 0!==this.m_communityData||this.m_bLoadingData||(this.m_bLoadingData=!0,a.a.get(s.b.CHAT_BASE_URL+"miniprofile/"+this.m_accountid+"/json").then(function(e){var t=e.data;t.level&&t.level_class&&(n.m_communityData=t),n.m_bLoadingData=!1}).catch(function(e){n.m_bLoadingData=!1}))},Object(f.c)([o.x],e.prototype,"m_communityData",void 0),e}(),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(f.d)(t,e),t.prototype.render=function(){var e=this.props.community_data&&this.props.community_data.favorite_badge;return e?_.createElement("div",{className:O.a.miniProfileFeaturedContainer},_.createElement("div",{className:O.a.favoriteBadgeIcon},_.createElement("img",{src:e.icon,className:O.a.badgeIcon})),_.createElement("div",{className:Object(C.a)(O.a.featuredLabels,O.a.favoriteBadgeDescription)},_.createElement("div",{className:O.a.featuredTitle},e.name),_.createElement("div",{className:O.a.featuredSubTitle},Object(b.c)("#Hover_BadgeXP",e.xp)))):null},t=Object(f.c)([i.a],t)}(_.Component),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(f.d)(t,e),t.prototype.render=function(){return this.props.community_data_ready?_.createElement("div",{className:O.a.miniProfileFeaturedContainer},_.createElement("div",{className:this.props.community_data.level_class},_.createElement("span",{className:O.a.friendPlayerLevelNum},this.props.community_data.level)),_.createElement("div",{className:O.a.featuredLabels},_.createElement("div",{className:O.a.featuredTitle},Object(b.c)("#Hover_SteamLevel")+" "))):null},t=Object(f.c)([i.a],t)}(_.Component),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(f.d)(t,e),t.prototype.render=function(){var e=this.props.persona;return _.createElement("div",{className:O.a.miniProfileGameContainer},this.props.persona.GetCurrentGameLogoURL()&&_.createElement("img",{className:O.a.gameLogo,src:this.props.persona.GetCurrentGameLogoURL()}),_.createElement("div",{className:Object(C.a)(O.a.gameContent,O.a.persona,O.a.ingame,O.a.ellipsis)},_.createElement("div",{className:O.a.gameState},Object(b.c)(e.is_in_nonsteam_game?"#PersonaStateInNonSteamGame":"#PersonaStateInGame")),this.props.persona.GetCurrentGameName(),this.props.persona.HasCurrentGameRichPresence()&&_.createElement("div",{className:O.a.richPresence},this.props.persona.GetCurrentGameRichPresence()),this.props.in_game_section_additional))},t=Object(f.c)([i.a],t)}(_.Component),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(f.d)(t,e),t.prototype.render=function(){var e,t,n=this.props.broadcast_description;return n&&(e=Object(b.c)("#PersonaStateWatchingBroadcast"),t=n),_.createElement("div",{className:O.a.miniProfileGameContainer},this.props.persona.GetBroadcastGameLogoURL()&&_.createElement("img",{className:O.a.gameLogo,src:this.props.persona.GetBroadcastGameLogoURL()}),_.createElement("div",{className:Object(C.a)(O.a.gameContent,O.a.persona,O.a.watchingbroadcast,O.a.ellipsis)},_.createElement("div",{className:O.a.gameState},e),t&&_.createElement("div",{className:O.a.richPresence},t),_.createElement("div",{className:O.a.watchingbroadcastThumbnail},this.props.broadcast_thumbnail)))},t=Object(f.c)([i.a],t)}(_.Component),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(f.d)(t,e),t.prototype.render=function(){var e=this.props,t=(e.className,e.persona),n=(e.community_data_ready,e.community_data,e.nickname),o=e.is_friend,i=e.is_blocked,r=(e.friend_relationship,e.broadcast_description,e.broadcast_thumbnail,e.mutual_friends,e.in_game_section_additional,e.bottom_section_additional),a=Object(f.f)(e,["className","persona","community_data_ready","community_data","nickname","is_friend","is_blocked","friend_relationship","broadcast_description","broadcast_thumbnail","mutual_friends","in_game_section_additional","bottom_section_additional"]),s=void 0,c=O.a.miniProfileContent;t.is_ingame?s=_.createElement(w,Object(f.a)({},this.props)):t.is_watchingbroadcast?s=_.createElement(M,Object(f.a)({},this.props)):c+=" "+O.a.notInOrWatchingGame;var l=!0,p=!1,u=!1;o||(c+=" "+O.a.notFriends,l=!1),i&&(c+=" "+O.a.communicationBlocked,u=!0);var m=void 0!==n,d=t.is_awayOrSnooze,h=void 0;return h=m?_.createElement("div",null,_.createElement("div",{className:O.a.personaAndIcons},_.createElement("div",{className:Object(C.a)(O.a.personaName,O.a.nickName)},_.createElement("div",{className:O.a.personaNameLabel},this.props.nickname),_.createElement("div",{className:O.a.playerNicknameBracket,title:Object(b.c)("#isNickname")},"*")),_.createElement(y.a,{persona:t})),_.createElement("div",{className:Object(C.a)(O.a.personaName,O.a.hasNickname)},"(",_.createElement("div",{className:O.a.personaNameLabel},t.m_strPlayerName),")")):_.createElement("div",{className:O.a.personaAndIcons},_.createElement("div",{className:O.a.personaName},_.createElement("div",{className:O.a.personaNameLabel},t.m_strPlayerName)),_.createElement(y.a,{persona:t})),2==this.props.friend_relationship&&(p=!0),_.createElement(_.Fragment,null,_.createElement("div",Object(f.a)({className:Object(C.a)(this.props.className,O.a.miniProfile)},a),_.createElement("div",{className:c},_.createElement("div",{className:O.a.miniProfileBackground},_.createElement("img",{className:O.a.miniProfileBackgroundBlur,src:t.avatar_url})),_.createElement("div",{className:O.a.miniProfileHeader},_.createElement("div",{className:Object(C.a)(O.a.miniProfilePlayer,t.online_state,d&&O.a.isAway,Object(g.d)(t))},_.createElement(S.b,{persona:this.props.persona,size:"X-Large",statusPosition:"bottom",className:O.a.playerAvatar}),d&&_.createElement(v.a,{persona:t,animating:!0,className:O.a.SnoozeContainer,size:"large"}),_.createElement("div",{className:O.a.playerContent},_.createElement("div",{className:O.a.playerName},_.createElement("div",{className:O.a.persona},h,d&&_.createElement("div",{className:O.a.awayStatusLabel},Object(b.c)("#PersonaStateAway")),!t.is_online&&_.createElement("div",{className:O.a.awayStatusLabel},this.props.persona.GetLocalizedOnlineStatus()),"online"==t.online_state&&!d&&_.createElement("div",{className:O.a.awayStatusLabel},Object(b.c)("#PersonaStateOnline")),!l&&_.createElement("div",{className:O.a.miniProfileNotFriends},p?Object(b.c)("#Friend_Menu_NotAFriendRequesting"):Object(b.c)("#Friend_Menu_NotAFriendLabel")),u&&_.createElement("div",{className:O.a.miniProfileBlocked},Object(b.c)("#PersonaStateBlocked"))))))),s,_.createElement("div",{className:O.a.miniProfileBottom},_.createElement(I,Object(f.a)({},this.props)),_.createElement(E,Object(f.a)({},this.props))),r,_.createElement("div",{className:O.a.mutualFriends},this.props.mutual_friends))))},t=Object(f.c)([i.a],t)}(_.Component)},eQUm:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n("mrSG"),p=n("LAqV"),r=n("hReu"),u=n("VZeO"),i=n("okNM"),m=n("Hi0u"),d=n("q1tI"),a=n("1VtQ"),s=n("uWOQ"),c=n("hEDq"),h=n("oh5H"),f=n("ljid"),l=n("ha6C"),_=n("tkkQ"),g=n("E7zH"),b=n("QHER"),v=n("bbBM"),S=n("yolM"),y=n("y4mg"),C=n("yIxU");function O(e,t,n,o){var i=o?758:842;Object(m.b)(d.createElement(I,{streamHost:t,bIsHost:o}),n,"RemotePlayDialog",{strTitle:Object(h.c)("#Friend_Menu_RemotePlay"),popupWidth:512,popupHeight:i},Object(r.g)(n))}var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bHadPlayers=!1,e.nCurrentAppID=0,e.bUnmounted=!1,e.state={gameVolumeNumber:-1,bAllowDesktopStream:!1},e}return Object(o.d)(e,t),e.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n=this;return Object(o.e)(this,function(e){switch(e.label){case 0:return _.a.IN_CLIENT?Object(l.a)("RemotePlay.GetGameSystemVolume")?[4,SteamClient.RemotePlay.GetGameSystemVolume()]:[3,2]:[3,3];case 1:if(t=e.sent(),this.bUnmounted)return[2];this.setState({gameVolumeNumber:t}),e.label=2;case 2:Object(l.a)("RemotePlay.RegisterForRemoteClientStopped")&&SteamClient.RemotePlay.RegisterForRemoteClientStopped(function(e){return n.RemoteClientStopped(e)}),this.forceUpdate(),e.label=3;case 3:return[2]}})})},e.prototype.componentWillUnmount=function(){this.bUnmounted=!0,this.props.bIsHost?p.f.RemotePlayStore.CancelAllInvitesAndSessions():p.f.RemotePlayStore.StopStreamingClient()},e.prototype.RemoteClientStopped=function(e){this.props.closeModal()},e.prototype.OnChangePauseOnDesktop=function(e){p.f.RemotePlayStore.SetStreamingDesktopToRemotePlayTogetherEnabled(!e),this.setState({bAllowDesktopStream:e})},e.prototype.OnGameVolumeChanged=function(e){_.a.IN_CLIENT&&Object(l.a)("RemotePlay.SetGameSystemVolume")&&(SteamClient.RemotePlay.SetGameSystemVolume(e),this.setState({gameVolumeNumber:e}))},e.prototype.OnInputGainChanged=function(e){p.f.VoiceStore.SetVoiceInputGain(p.f.VoiceStore.ConvertSliderToGainValue(e,u.a.k_MaxInputOutputGainValue))},e.prototype.OnSettingsClick=function(e){Object(S.a)(Object(r.e)(this,e),e.currentTarget.ownerDocument.defaultView,"voice")},e.prototype.componentWillReceiveProps=function(e){},e.prototype.render=function(){var e=this,t=this.props.bIsHost;var n=!1;if(t){for(var o=0,i=0;i<p.f.RemotePlayStore.player_props_count;i++){p.f.RemotePlayStore.GetPlayerPropsByIndex(i).bSession&&++o}0==o?this.bHadPlayers?this.props.closeModal():n=!0:this.bHadPlayers=!0}var r=!0,a=this.state.gameVolumeNumber;a<0&&(r=!1);Object(b.a)(C.remotePlayIcon,C.IconAllowDesktop);this.state.bAllowDesktopStream?C.accessEnabled:C.accessDisabled;var s=p.f.VoiceStore.IsAnyVoiceActive(),c=p.f.VoiceStore.ConvertGainValueToSliderValue(p.f.VoiceStore.GetVoiceInputGain(),u.a.k_MaxInputOutputGainValue);0==this.nCurrentAppID&&(this.nCurrentAppID=this.props.streamHost.persona.m_unGamePlayedAppID);var l=this.nCurrentAppID;return d.createElement(m.a,{className:Object(b.a)(C.Dialog_RemotePlay,"Dialog_RemotePlay")},d.createElement(f.h,{classNameContent:"RemotePlayDialog"},d.createElement(f.m,{className:Object(b.a)(C.NoRightMargin,C.BottomMargin)},Object(h.c)("#Friend_Menu_RemotePlay"),!1,d.createElement(f.c,null,d.createElement("div",{className:C.VerticalContainer},d.createElement("div",{className:Object(b.a)(C.EndStreamContainer,t&&C.EndStreamContainerHost,!p.f.RemotePlayStore.bIsShowingPlaceholder&&C.EndStreamContainerUnpaused)},d.createElement("div",{className:Object(b.a)(C.TextButton,C.FitContent,C.AlignRight),onClick:function(){return e.props.closeModal()}},Object(h.c)(t?"#RemotePlay_EndStream":"#RemotePlay_LeaveStream"))),t&&p.f.RemotePlayStore.bIsShowingPlaceholder&&d.createElement("div",{className:C.StreamPausedContainer},Object(h.c)("#RemotePlay_StreamPaused")),!t&&d.createElement(E,{currentAppID:l}),d.createElement("div",{className:C.GroupingBox},r&&Object(h.c)("#RemotePlay_GameMasterVolume"),r&&d.createElement("div",{className:C.HorizontalContainer},d.createElement("div",{className:C.IconSpeaker}),d.createElement("div",{className:C.VolumeSlider},d.createElement(f.A,{min:0,max:100,value:a,onChange:this.OnGameVolumeChanged}))),!!s&&d.createElement("div",{className:C.VoiceSettingsButtonContainer},d.createElement("div",{className:Object(b.a)(C.TextButton,C.FitContent,C.AlignRight),onClick:this.OnSettingsClick},Object(h.c)("#Tooltip_VoiceSettings"))),!!s&&d.createElement("div",{className:C.HorizontalContainer},d.createElement("div",{className:Object(b.a)(C.SmallAvatarContainer,C.HorizontalContainer,"OneOnOneVoiceMembers")},d.createElement(v.c,{friend:p.f.FriendStore.self,key:p.f.FriendStore.self.accountid,showVoiceLevel:!0,avatarQualityFull:!1,noActions:!0,notDraggable:!0,bHideStatusInfo:!0,context:void 0})),d.createElement("div",{className:C.MicContainer},d.createElement(v.h,null)),d.createElement("div",{className:C.VolumeSlider},d.createElement(f.A,{min:0,max:100,value:c,onChange:this.OnInputGainChanged}))),t&&!1)),d.createElement("div",{className:C.Spacer}),d.createElement("div",{className:C.PlayerSectionTitle},Object(h.c)("#RemotePlay_Players")))),d.createElement(f.b,null,!n&&d.createElement(w,{isHost:t,streamHost:this.props.streamHost}),n&&d.createElement(G,{addFriend:!0})),d.createElement(f.j,null)))},Object(o.c)([a.a],e.prototype,"OnChangePauseOnDesktop",null),Object(o.c)([a.a],e.prototype,"OnGameVolumeChanged",null),Object(o.c)([a.a],e.prototype,"OnInputGainChanged",null),Object(o.c)([a.a],e.prototype,"OnSettingsClick",null),e=Object(o.c)([i.a],e)}(d.Component),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.OnGameImageClick=function(e){var t=_.a.STORE_BASE_URL+"app/"+this.props.currentAppID;Object(s.e)(e,t)},t.prototype.render=function(){var e=p.f.AppInfoStore.GetAppInfo(this.props.currentAppID);return d.createElement("div",{className:C.ActiveGameButton,onClick:this.OnGameImageClick,title:Object(h.c)(e.name)},d.createElement("img",{src:e.header_image_url,className:C.ProductImage}))},Object(o.c)([a.a],t.prototype,"OnGameImageClick",null),t=Object(o.c)([i.a],t)}(d.Component),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.render=function(){var e=[],t=!0;this.props.isHost||(e.push(d.createElement(M,{key:"player_host",accountid:this.props.streamHost.accountid,isHost:this.props.isHost,isHostPlayer:!0})),t=!1);for(var n=0;n<1;n++)for(var o=0;o<p.f.RemotePlayStore.player_props_count;o++){var i=p.f.RemotePlayStore.GetPlayerPropsByIndex(o);i.bSession&&(t||e.push(d.createElement("div",{key:"spacer_"+n+"_"+o,className:C.Spacer})),e.push(d.createElement(M,{key:"player_client_"+o,accountid:i.friend.accountid,isHost:this.props.isHost})),t=!1)}return d.createElement("div",{className:C.HeightLimited},e)},t=Object(o.c)([i.a],t)}(d.Component),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){},t.prototype.OnMicVolumeChanged=function(e,t){p.f.VoiceStore.SetPerUserGainLevel(t,p.f.VoiceStore.ConvertSliderToGainValue(e,u.a.k_MaxPerUserGainMultiplier))},t.prototype.OnMutingToggleClick=function(e){p.f.VoiceStore.SetPerUserMuting(e,!p.f.VoiceStore.GetPerUserMuting(e))},t.prototype.OnMutingClick=function(e,t){p.f.VoiceStore.SetPerUserMuting(t,e)},t.prototype.render=function(){var t=this,e=p.f.RemotePlayStore.GetPlayerProps(this.props.accountid);void 0===e&&(e={friend:p.f.FriendStore.GetPlayer(this.props.accountid),bSession:!0,bJoined:!0,bKeyboardEnabled:!0,bMouseEnabled:!0,bControllerEnabled:!0,nKeyboardUsedTime:0,nMouseUsedTime:0,nControllerUsedTime:0});var n=e.friend,o=p.f.VoiceStore.ConvertGainValueToSliderValue(p.f.VoiceStore.GetPerUserGainLevel(n.accountid),u.a.k_MaxPerUserGainMultiplier),i=p.f.VoiceStore.GetPerUserMuting(n.accountid),r=this.props.isHostPlayer||e.bJoined||!1;return d.createElement(f.c,{className:"NoBottomMargin"},d.createElement("div",{className:C.GroupingBox},this.props.isHost&&d.createElement("div",{className:C.KickPlayerContainer},d.createElement("div",{className:Object(b.a)(C.TextButton,C.FitContent,C.AlignRight),onClick:function(){return p.f.RemotePlayStore.CancelInviteAndSession(n.accountid)}},Object(h.c)(e.bJoined?"#RemotePlay_Kick":"#RemotePlay_CancelInvite"))),!this.props.isHost&&d.createElement("div",{className:C.NegativeSpacer}),d.createElement(D,{player:n,joined:e.bJoined,isHostPlayer:this.props.isHostPlayer}),r&&d.createElement("div",{className:Object(b.a)(C.HorizontalContainer,C.playerVoiceContainer)},d.createElement(f.d,{className:C.BasicButton,onClick:function(){return t.OnMutingToggleClick(n.accountid)},title:Object(h.c)(i?"#VoiceChat_UnmuteSpeaker":"#VoiceChat_MuteSpeaker")},d.createElement("div",{className:Object(b.a)(C.remotePlayIcon,C.IconSpeaker)}),i&&d.createElement("div",{className:Object(b.a)(C.remotePlayIcon,C.Slashout)})),d.createElement("div",{className:C.VolumeSlider},d.createElement(f.A,{min:0,max:100,value:o,onChange:function(e){return t.OnMicVolumeChanged(e,n.accountid)}}))),!r&&d.createElement("div",{className:C.InviteSentContainer},Object(h.c)("#RemotePlay_Invited")),this.props.isHost&&d.createElement("div",{className:C.SharedInputContainer},Object(h.c)("#RemotePlay_SharedInput"),d.createElement("div",{className:C.HorizontalContainer},d.createElement(T,{inputType:c.h.k_EClientUsedInputTypeKeyboard,enabled:e.bKeyboardEnabled,usedTime:e.nKeyboardUsedTime,accountID:e.friend.accountid}),d.createElement(T,{inputType:c.h.k_EClientUsedInputTypeMouse,enabled:e.bMouseEnabled,usedTime:e.nMouseUsedTime,accountID:e.friend.accountid}),d.createElement(T,{inputType:c.h.k_EClientUsedInputTypeController,enabled:e.bControllerEnabled,usedTime:e.nControllerUsedTime,accountID:e.friend.accountid})))))},Object(o.c)([a.a],t.prototype,"OnMicVolumeChanged",null),Object(o.c)([a.a],t.prototype,"OnMutingToggleClick",null),Object(o.c)([a.a],t.prototype,"OnMutingClick",null),t=Object(o.c)([i.a],t)}(d.Component),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_schInputUsedReset=new g.b,e}return Object(o.d)(e,t),e.prototype.componentDidUpdate=function(e){},e.prototype.render=function(){return d.createElement("div",{className:Object(b.a)(C.HorizontalContainer,"OneOnOneVoiceMembers",C.AvatarContainer)},d.createElement(v.c,{friend:this.props.player,key:this.props.player.accountid,showVoiceLevel:!0,avatarQualityFull:!0,context:void 0}))},e=Object(o.c)([i.a],e)}(d.Component),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_schInputUsedReset=new g.b,e}return Object(o.d)(e,t),e.prototype.componentDidUpdate=function(e){},e.prototype.ToggleButton=function(){switch(this.props.inputType){case c.h.k_EClientUsedInputTypeKeyboard:p.f.RemotePlayStore.SetPerUserKeyboardInputEnabled(this.props.accountID,!this.props.enabled);break;case c.h.k_EClientUsedInputTypeMouse:p.f.RemotePlayStore.SetPerUserMouseInputEnabled(this.props.accountID,!this.props.enabled);break;case c.h.k_EClientUsedInputTypeController:p.f.RemotePlayStore.SetPerUserControllerInputEnabled(this.props.accountID,!this.props.enabled)}},e.prototype.render=function(){var e,t=this,n=performance.now(),o=C.remotePlayIcon;switch(this.props.inputType){case c.h.k_EClientUsedInputTypeKeyboard:o+=" "+C.IconKeyboard,e=this.props.enabled?"#Tooltip_RemotePlayDisableKeyboard":"#Tooltip_RemotePlayEnableKeyboard";break;case c.h.k_EClientUsedInputTypeMouse:o+=" "+C.IconMouse,e=this.props.enabled?"#Tooltip_RemotePlayDisableMouse":"#Tooltip_RemotePlayEnableMouse";break;case c.h.k_EClientUsedInputTypeController:o+=" "+C.IconController,e=this.props.enabled?"#Tooltip_RemotePlayDisableController":"#Tooltip_RemotePlayEnableController"}return o+=" "+(this.props.enabled?C.accessEnabled:C.accessDisabled),n-this.props.usedTime<800&&(o+=" "+C.wiggleIcon,this.m_schInputUsedReset.Cancel(),this.m_schInputUsedReset.Schedule(900,function(){t.forceUpdate()})),d.createElement(f.d,{className:C.BasicButton,onClick:function(){return t.ToggleButton()},title:Object(h.c)(e)},d.createElement("div",{className:o}),!this.props.enabled&&d.createElement("div",{className:Object(b.a)(C.remotePlayIcon,C.Slashout)}))},Object(o.c)([a.a],e.prototype,"ToggleButton",null),e}(d.PureComponent),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e},t.prototype.OnFriendListSelectionChanged=function(){if(this.m_friendPicker&&0<this.m_friendPicker.selectedFriendCount){var e=this.m_friendPicker.SelectedFriendByIndex(0);void 0!==e&&void 0!==e.secondary_display_name&&this.InviteSelectedPlayers()}},t.prototype.InviteSelectedPlayers=function(){for(var e=0;e<this.m_friendPicker.selectedFriendCount;e++){var t=this.m_friendPicker.SelectedFriendByIndex(e);void 0!==t&&p.f.RemotePlayStore.CreateInviteAndSession(t.accountid,p.f.FriendStore.self.persona.m_gameid)}},t.prototype.componentDidUpdate=function(e){},t.prototype.render=function(){for(var e=new Set,t=0;t<p.f.RemotePlayStore.player_props_count;t++){var n=p.f.RemotePlayStore.GetPlayerPropsByIndex(t);n.bSession&&e.add(n.friend.accountid)}return d.createElement("div",{className:Object(b.a)(C.Separator,this.props.addFriend&&C.FriendPickerSeparator)},d.createElement(y.a,{ref:this.OnFriendPickerRef,label:Object(h.c)("#RemotePlay_InviteFriend"),eSort:0,setExcludedFriends:e,autoFocus:!1,onFriendSelected:this.OnFriendListSelectionChanged,onFriendRemoved:this.OnFriendListSelectionChanged,rgSelectedFriends:this.props.vecInvitePlayers}))},Object(o.c)([a.a],t.prototype,"OnFriendPickerRef",null),Object(o.c)([a.a],t.prototype,"OnFriendListSelectionChanged",null),Object(o.c)([a.a],t.prototype,"InviteSelectedPlayers",null),t}(d.Component)},eeM7:function(e,t,n){e.exports={SubText:"shared_common_SubText_iXOar",AvatarImageContainer:"shared_common_AvatarImageContainer_2-Mc0",GameImageContainer:"shared_common_GameImageContainer_tFW9T",AvatarImage:"shared_common_AvatarImage_HVcru",STV_HomeGridPreviewDetails:"shared_common_STV_HomeGridPreviewDetails_1FyZE",ChatAvatarImage:"shared_common_ChatAvatarImage_3n4wV",EditButton:"shared_common_EditButton_DLPvj",Small:"shared_common_Small_lUt7Z",FlexCenter:"shared_common_FlexCenter_2xt9g",ThrobberCtn:"shared_common_ThrobberCtn_10smC",MarkdownLink:"shared_common_MarkdownLink_KOE6T",SummaryTextArea:"shared_common_SummaryTextArea_3Ar18",RemoveIcon:"shared_common_RemoveIcon_2Dwi9"}},fGPn:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});var o=n("tkkQ"),i={success:!0,result:1},r=function(){function e(){this.m_connection=new a,this.m_bAllowAccountMismatch=!1,this.m_mapCacheSubscribedApp=new Map}return e.prototype.FailureResult=function(e){void 0===e&&(e=2);var t={success:!1,result:e};return this.m_connection&&!this.m_connection.browser_supported&&(t.browser_unsupported=!0),this.m_connection&&!this.m_connection.connected_to_client&&(t.connect_failed=!0),7==e&&(t.call_unsupported=!0),t},e.prototype.SetAllowAccountMismatch=function(e){this.m_bAllowAccountMismatch=e},e.prototype.BClientConnected=function(){var e=this;return this.m_connection.Connect().then(function(){return i},function(){return e.FailureResult()})},e.prototype.BClientSupportsMessage=function(e){return!(!this.m_connection.connected_to_client||!this.m_connection.ready)&&-1!==this.m_connection.ClientInfo.rgSupportedMessages.indexOf(e)},e.prototype.OpenFriendChatDialog=function(e){var t={message:"ShowFriendChatDialog",steamid:e};return this.GenericEResultCall(t)},e.prototype.OpenChatRoomGroupDialog=function(e,t){var n={message:"ShowChatRoomGroupDialog",chat_group_id:e};return t&&(n.chat_room_id=t),this.GenericEResultCall(n)},e.prototype.ShowChatRoomGroupInvite=function(e){var t={message:"ShowChatRoomGroupInvite",invite_code:e};return this.GenericEResultCall(t)},e.prototype.OpenJoinGameDialog=function(e){var t={message:"ShowJoinGameDialog",friend_id:e};return this.GenericEResultCall(t)},e.prototype.BIsSubscribedApp=function(n){var o=this;if(this.m_mapCacheSubscribedApp.has(n))return Promise.resolve(this.m_mapCacheSubscribedApp.get(n));var e={message:"IsSubscribedApp",appid:n};return this.GenericEResultCall(e).then(function(e){if(!e.connect_failed){var t=1==e.result;return o.m_mapCacheSubscribedApp.set(n,t),t}})},e.prototype.ViewGameInfoForSteamID=function(e){var t={message:"ViewGameInfoForSteamID",steamid:e};return this.GenericEResultCall(t)},e.prototype.BClientAccountMatches=function(){return!o.d.logged_in||o.d.accountid==this.m_connection.ClientInfo.unAccountID},e.prototype.GenericEResultCall=function(e){var t=this;return this.m_connection.Connect().then(function(){return t.m_bAllowAccountMismatch||t.BClientAccountMatches()?t.m_connection.SendMsgAndAwaitResponse(e).then(function(e){return 1===e.success?i:t.FailureResult(e.success)}):{success:!1,result:19,account_mismatch:!0}}).catch(function(){return t.FailureResult()})},e}(),a=function(){function e(){this.m_mapWaitingCallbacks=new Map,this.m_iCallSeq=1,this.m_bReady=!1,this.m_bClientConnectionFailed=!1,this.m_bSecurityException=!1,this.m_ClientInfo={ulVersion:"",bFriendsUIEnabled:!1,unAccountID:0,rgSupportedMessages:[]}}return Object.defineProperty(e.prototype,"ClientInfo",{get:function(){return this.m_ClientInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this.m_bReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browser_supported",{get:function(){return!this.m_bSecurityException},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected_to_client",{get:function(){return this.m_socket&&this.m_socket.readyState==WebSocket.OPEN},enumerable:!0,configurable:!0}),e.prototype.SendMsgAndAwaitResponse=function(o){var i=this;return new Promise(function(e,t){var n=i.m_iCallSeq++;i.BSendMsg(o,n)?i.m_mapWaitingCallbacks.set(n,{iSeq:n,fnCallback:e,fnError:t}):t()})},e.prototype.BSendMsg=function(e,t){if(!this.m_socket||this.m_socket.readyState!=WebSocket.OPEN)return!1;var n=Object.assign({},e,{universe:o.a.EUNIVERSE,accountid:o.d.accountid});void 0!==t&&(n.sequenceid=t);try{return this.m_socket.send(JSON.stringify(n)),!0}catch(e){return!1}},e.prototype.OnSocketMessage=function(e){try{var t=JSON.parse(e.data);if(t.sequenceid){var n=this.m_mapWaitingCallbacks.get(t.sequenceid);if(n)return this.m_mapWaitingCallbacks.delete(t.sequenceid),void n.fnCallback(t)}}catch(e){console.error("exception parsing response",e)}},e.prototype.Connect=function(){var o=this;if(this.m_bReady&&this.m_socket.readyState==WebSocket.OPEN)return Promise.resolve();if(this.m_promiseConnect)return this.m_promiseConnect;var e=new Promise(function(t,n){try{o.m_socket=new WebSocket("ws://127.0.0.1:27060/clientsocket/")}catch(e){return o.m_bSecurityException=!0,void n(e)}o.m_socket.onerror=function(e){n()},o.m_socket.onmessage=o.OnSocketMessage.bind(o),o.m_socket.onopen=function(e){o.SendMsgAndAwaitResponse({message:"GetClientInfo"}).then(function(e){1==e.success?(o.m_ClientInfo.ulVersion=e.clientversion,o.m_ClientInfo.bFriendsUIEnabled=!!e.friendsui,o.m_ClientInfo.unAccountID=e.accountid,e.supported_messages&&(o.m_ClientInfo.rgSupportedMessages=e.supported_messages),t()):n()}).catch(n)}});return this.m_promiseConnect=e,this.m_promiseConnect.then(function(){o.m_bReady=!0,o.m_promiseConnect=void 0}).catch(function(){o.m_bClientConnectionFailed=!0,o.m_promiseConnect=void 0}),this.m_promiseConnect},e}(),s=new r;window.ClientConnectionAPI=s},geE1:function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return C});var s=n("mrSG"),l=n("tkkQ"),c=n("4HGb"),p=n("s+DT"),o=n("OJz+"),u=n("nRcY"),r=n("+M9t"),m=n("LAqV"),d=n("7sd/"),a=n("2vnA"),h=n("oh5H"),f=n("tZiA"),_=(n("5Nu3"),n("/FkP")),g=n("1VtQ"),b=n("WpBz"),i=n("ujHl"),v=n("9Eit"),S="FriendRecentChats",y=function(){function e(e){var c=this;this.m_rgFriendChats=[],this.m_bReceivedFriendChats=!1,this.m_rtLastSessionUpdate=0,this.m_mapLastChatTimeByFriend=a.x.map(),this.m_mapRecentIgnoreTimeBeforeByFriend=a.x.map(),this.m_LastMessageCache=l.a.IN_MOBILE?new O:new I,this.m_IncomingFriendMessageHandler=Object(o.d)(u.f.IncomingMessageHandler,function(e){var t=new p.a(e.Body().steamid_friend()),n=m.f.FriendStore.GetPlayerIfCached(t.GetAccountID());if(!n){if(e.Body().low_priority())return 41;n=m.f.FriendStore.GetPlayer(t.GetAccountID())}if(1==e.Body().chat_entry_type()){var o=e.Body().local_echo(),i=n.is_blocked||e.Body().low_priority()&&!n.is_friend,r=o?c.m_ChatStore.FriendStore.self.persona.m_steamid:t,a=(s=c.GetFriendChat(t.GetAccountID(),!i)).GetVisibilityState();!(i||o||m.f.FriendStore.BIsInvisibleMode()||m.f.FriendStore.GetUserDoNotDisturb())&&!l.a.IN_MOBILE&&m.f.UIStore.ShowAndOrActivateChat(m.f.GetDefaultBrowserContext(),s,!1),s&&(n.is_friend||0!=a||s.SetShowNonFriendWarning(!0),o||!n.is_blocked?s.AddNewChatMsgAndNotify(r.GetAccountID(),e.Body().rtime32_server_timestamp(),e.Body().ordinal(),e.Body().message(),e.Body().message_no_bbcode()):s.AppendChatMsg(r.GetAccountID(),e.Body().rtime32_server_timestamp(),e.Body().ordinal(),e.Body().message())),c.m_mapLastChatTimeByFriend.set(t.GetAccountID(),e.Body().rtime32_server_timestamp())}else if(2==e.Body().chat_entry_type()&&!e.Body().local_echo()){var s;if(!n.is_blocked)(s=c.GetFriendChat(t.GetAccountID(),!1))&&s.OnFriendTypingNotification()}return 1}),this.m_AckMessageEchoHandler=Object(o.d)(u.f.NotifyAckMessageEchoHandler,function(e){var t=new p.a(e.Body().steamid_partner()),n=c.GetFriendChat(t.GetAccountID());return n&&n.UpdateLastAckTimeFromServer(e.Body().timestamp()),1}),this.m_ChatStore=e}return e.prototype.Init=function(){this.m_LastMessageCache.Init()},e.prototype.GetFriendChat=function(e,t){void 0===t&&(t=!0);for(var n=0,o=this.m_rgFriendChats;n<o.length;n++){var i=o[n];if(i.accountid_partner==e)return i}if(!t)return null;var r=new C(e,this.m_ChatStore,this.m_ChatStore.CMInterface);return this.m_rgFriendChats.push(r),r},e.prototype.OnLogon=function(){var o=this;this.LoadFriendMessageSessions(),m.f.SettingsStore.GetObjectFromLocalStorageWhenReady(S).then(function(e){for(var t in o.m_mapRecentIgnoreTimeBeforeByFriend.clear(),e.ignoretimes){var n=parseInt(t,10);o.m_mapRecentIgnoreTimeBeforeByFriend.set(n,e.ignoretimes[t])}})},e.prototype.RestoreStatePostDisconnect=function(e){e&&this.LoadFriendMessageSessions();for(var t=0,n=this.m_rgFriendChats;t<n.length;t++){n[t].OnConnectionRestored()}},e.prototype.GetServiceTransport=function(){return this.m_ChatStore.CMInterface.GetServiceTransport()},e.prototype.LoadFriendMessageSessions=function(){var i=this,e=c.b.Init(u.e);e.Body().set_lastmessage_since(this.m_rtLastSessionUpdate),e.Body().set_only_sessions_with_messages(!0),u.g.GetActiveMessageSessions(this.GetServiceTransport(),e).then(function(e){i.m_rtLastSessionUpdate=e.Body().timestamp();for(var t=0,n=e.Body().message_sessions();t<n.length;t++){var o=n[t];i.m_mapLastChatTimeByFriend.set(o.accountid_friend(),o.last_message()),i.GetFriendChat(o.accountid_friend()).InitMessageSessionFromServer(o.unread_message_count(),o.last_view(),o.last_message())}m.f.FriendStore.UpdateUnreadMessagesGlobal(),i.m_bReceivedFriendChats=!0})},e.prototype.GetFriendChatsByLastChatTime=function(){var n=this,o=[];return this.m_mapLastChatTimeByFriend.forEach(function(e,t){o.push([e,n.GetFriendChat(t)])}),o.sort(function(e,t){var n=e[0];return t[0]-n}).map(function(e){e[0];return e[1]})},e.prototype.GetFriendsWithUnreadMessages=function(e){for(var t=[],n=0,o=this.m_rgFriendChats;n<o.length;n++){var i=o[n];0<i.unread_message_count&&(!e||i.GetVisibilityState(e)<2)&&!i.is_blocked_friend&&t.push(i)}return t.sort(function(e,t){return e.time_last_message-t.time_last_message}),t},e.prototype.BIsFriendChatRecent=function(e){var t=m.f.GetServerRTime32()-this.RecentChatCutoffDuration,n=this.m_mapLastChatTimeByFriend.get(e);if(!n)return!1;if(t<=n){var o=this.m_mapRecentIgnoreTimeBeforeByFriend.get(e);if(!o||o<n)return!0}return!1},e.prototype.GetFriendChatsWithRecentMessages=function(){var t=this;return this.m_rgFriendChats.filter(function(e){return t.BIsFriendChatRecent(e.accountid_partner)})},e.prototype.GetUnfilteredFriendsWithUnreadMessages=function(){for(var e=[],t=0,n=this.m_rgFriendChats;t<n.length;t++){var o=n[t];0<o.unread_message_count&&!o.is_blocked_friend&&e.push(o)}return e.sort(function(e,t){return e.time_last_message-t.time_last_message}),e},e.prototype.GetAllChats=function(){return this.m_rgFriendChats.slice()},Object.defineProperty(e.prototype,"RecentChatCutoffDuration",{get:function(){return 3600},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LastMessageCache",{get:function(){return this.m_LastMessageCache},enumerable:!0,configurable:!0}),e.prototype.ClearRecentChatsForFriend=function(e){this.m_mapRecentIgnoreTimeBeforeByFriend.set(e,m.f.GetServerRTime32()),this.WriteRecentChatsPrefs()},e.prototype.WriteRecentChatsPrefs=function(){var n=this,o=m.f.GetServerRTime32()-this.RecentChatCutoffDuration;this.m_mapRecentIgnoreTimeBeforeByFriend.forEach(function(e,t){e<o&&n.m_mapRecentIgnoreTimeBeforeByFriend.delete(t)}),m.f.SettingsStore.StoreObjectInLocalStorage(S,{ignoretimes:this.m_mapRecentIgnoreTimeBeforeByFriend.toJS()})},Object.defineProperty(e.prototype,"GetRecentlyChattingFriends",{get:function(){var o=this,i=[];return this.m_mapLastChatTimeByFriend.forEach(function(e,t){if(o.BIsFriendChatRecent(t)){var n=m.f.FriendStore.GetFriend(t);n&&i.push(n)}}),i.sort(r.b.DefaultFriendSortComparator),i},enumerable:!0,configurable:!0}),e.prototype.GetUnreadFriendMessageCount=function(e){for(var t=0,n=0,o=this.m_rgFriendChats;n<o.length;n++){var i=o[n];0<i.unread_message_count&&(!e||i.GetVisibilityState(e)<2)&&!i.is_blocked_friend&&(t+=i.unread_message_count)}return t},e.prototype.GetFriendLastChatTime=function(e){return this.m_mapLastChatTimeByFriend.get(e)||0},Object(s.c)([a.x],e.prototype,"m_rgFriendChats",void 0),Object(s.c)([a.x],e.prototype,"m_bReceivedFriendChats",void 0),Object(s.c)([a.g],e.prototype,"ClearRecentChatsForFriend",null),Object(s.c)([a.i],e.prototype,"GetRecentlyChattingFriends",null),e}(),C=function(i){function e(e,t,n){var o=i.call(this,t.FriendStore,t,n)||this;return o.m_iClearFriendIsTypingInterval=void 0,o.m_bFriendIsTyping=!1,o.m_bNeedsNonFriendWarning=!1,o.m_unAccountIDFriend=e,o.m_MessageSendQueue=new v.a(e.toString()),o.m_MessageSendQueue.InitFromStorage().then(function(){return o.InitQueuedMessages()}),o}return Object(s.d)(e,i),e.prototype.GetLastMessage=function(){var t=this;if(!this.m_strLastMessage&&!this.m_bChatLogsLoaded){var e=this.m_ChatStore.FriendChatStore.LastMessageCache.GetLastMessage(this.m_unAccountIDFriend);if(e&&this.m_rtLastMessageReceived<=e.rtTime)return e.strMessage;if(this.LoadChatLogs().then(function(){var e=t.chat_messages[t.chat_messages.length-1];e&&(t.m_strLastMessage=e.strMessage,t.m_accountIDLastMessage=e.unAccountID,t.m_rtLastMessageReceived=e.rtTimestamp,t.m_ChatStore.FriendChatStore.LastMessageCache.UpdateLastMessage(t.m_unAccountIDFriend,{strMessage:e.strMessage,rtTime:e.rtTimestamp,unAccountIDSender:e.unAccountID}))}),e)return e.strMessage}return this.m_strLastMessage},Object.defineProperty(e.prototype,"time_last_message",{get:function(){if(this.m_rtLastMessageReceived)return this.m_rtLastMessageReceived;var e=this.m_ChatStore.FriendChatStore.LastMessageCache.GetLastMessage(this.m_unAccountIDFriend);return e?e.rtTime:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accountid_last_message",{get:function(){if(this.m_accountIDLastMessage)return this.m_accountIDLastMessage;var e=this.m_ChatStore.FriendChatStore.LastMessageCache.GetLastMessage(this.m_unAccountIDFriend);return e?e.unAccountIDSender:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unread_message_count",{get:function(){var e=this.m_ChatStore.VoiceChat.BPartnerHasRequestedAndIsInOneOnOneChat(this.m_unAccountIDFriend);return e=e&&!this.BVoiceActive(),this.m_cUnreadChatMessages+(e?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VoiceChatStore",{get:function(){return this.m_ChatStore.VoiceChat},enumerable:!0,configurable:!0}),e.prototype.SetShowNonFriendWarning=function(e){this.m_bNeedsNonFriendWarning=e},e.prototype.GetShowNonFriendWarning=function(){var e=this.m_bNeedsNonFriendWarning&&!m.f.FriendStore.BApprovedNonFriendMessages(this.accountid_partner);if(e){var t=m.f.FriendStore.GetFriend(this.accountid_partner);e=!t||!t.is_friend}return e},e.prototype.GetMessagesFromTimeRange=function(e,t,n,o,i){var r=this,a=c.b.Init(u.b);return a.Body().set_steamid1(this.m_CMInterface.steamid.ConvertTo64BitString()),a.Body().set_steamid2(p.a.InitFromAccountID(this.m_unAccountIDFriend).ConvertTo64BitString()),a.Body().set_count(f.a.k_LoadMoreMessageCount),a.Body().set_bbcode_format(!0),a.Body().set_rtime32_start_time(e),a.Body().set_start_ordinal(t),a.Body().set_time_last(n),a.Body().set_ordinal_last(o),console.log(this.unique_id+" friend trying to load "+i+" messages in range "+e+":"+t+" - "+n+":"+o),u.g.GetRecentMessages(this.m_ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){var t=e.GetEResult();if(1!=t)throw t;return{messages:r.GetMessagesFromResponse(e),moreAvailable:e.Body().more_available()}})},e.prototype.GetMessagesFromResponse=function(e){for(var t=e.Body().messages(),n=[],o=t.length-1;0<=o;o--){var i=t[o],r=i.accountid();n.push(new _.d(r,i.timestamp(),i.ordinal(),i.message()||""))}return n},e.prototype.GetBBCodeParser=function(){return this.m_ChatStore.FriendChatBBCodeParser},e.prototype.AckChatMsgOnServer=function(e){var t=c.b.Init(u.a);t.Body().set_steamid_partner(p.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),t.Body().set_timestamp(e),u.g.AckMessage(this.m_CMInterface.GetServiceTransport(),t)},e.prototype.CheckShouldNotify=function(e,t,n){i.prototype.CheckShouldNotify.call(this,e,t,n),this.m_ChatStore.FriendChatStore.LastMessageCache.UpdateLastMessage(this.m_unAccountIDFriend,{rtTime:e.rtTimestamp,strMessage:e.strMessage,unAccountIDSender:e.unAccountID})},Object.defineProperty(e.prototype,"name",{get:function(){var e=this.chat_partner;return e?e.display_name:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"f"+this.accountid_partner},enumerable:!0,configurable:!0}),e.prototype.BIsVoiceAllowed=function(){return!!this.chat_partner.is_friend&&(0!=this.chat_partner.persona.m_ePersonaState&&!!this.chat_partner.is_online_in_beta)},e.prototype.GetVoiceNotAllowedReason=function(){return this.chat_partner.is_friend?0==this.chat_partner.persona.m_ePersonaState?Object(h.c)("#VoiceChat_Unavailable_NotOnline",this.chat_partner.display_name):this.chat_partner.is_online_in_beta?null:Object(h.c)("#VoiceChat_Unavailable_NotInBeta",this.chat_partner.display_name):Object(h.c)("#VoiceChat_Unavailable_NotFriend",this.chat_partner.display_name)},e.prototype.ToggleVoiceChat=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(this.accountid_partner)?this.ChatStore.VoiceChat.OnUserEndVoiceChat():this.ChatStore.VoiceChat.InitiateFriendChat(this.accountid_partner),!0},e.prototype.BVoiceActive=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(this.accountid_partner)},Object.defineProperty(e.prototype,"is_blocked_friend",{get:function(){return this.chat_partner.is_blocked},enumerable:!0,configurable:!0}),e.prototype.SendChatMessageInternal=function(a){return Object(s.b)(this,void 0,void 0,function(){var t,n,o,i,r=this;return Object(s.e)(this,function(e){switch(e.label){case 0:return this.chat_partner.is_friend||m.f.FriendStore.SetApprovedNonFriendMessages(this.chat_partner.accountid),t=Object(d.f)(a),n=this.AppendLocalEchoChatMsg(t),this.m_strLastMessage=a,(o=c.b.Init(u.d)).Body().set_chat_entry_type(1),o.Body().set_message(t),o.Body().set_steamid(p.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),o.Body().set_contains_bbcode(!0),this.m_tsLastSentTypingNotification=void 0,[4,this.SendWithRetries(n,function(){return u.g.SendMessage(r.m_CMInterface.GetServiceTransport(),o)})];case 1:return(i=e.sent())===_.f.None&&this.m_ChatStore.FriendChatStore.LastMessageCache.UpdateLastMessage(this.m_unAccountIDFriend,{rtTime:n.rtTimestamp,unAccountIDSender:this.self.accountid,strMessage:n.strMessage}),[2,i]}})})},e.prototype.OnTyping=function(){if(!this.m_tsLastSentTypingNotification||1e4<performance.now()-this.m_tsLastSentTypingNotification){this.m_tsLastSentTypingNotification=performance.now();var e=c.b.Init(u.d);e.Body().set_chat_entry_type(2),e.Body().set_steamid(p.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),u.g.SendMessage(this.m_CMInterface.GetServiceTransport(),e)}},Object.defineProperty(e.prototype,"is_friend_typing",{get:function(){return this.m_bFriendIsTyping},enumerable:!0,configurable:!0}),e.prototype.OnFriendTypingNotification=function(){var e=this;this.m_bFriendIsTyping||(this.m_bFriendIsTyping=!0),void 0!==this.m_iClearFriendIsTypingInterval&&window.clearInterval(this.m_iClearFriendIsTypingInterval),this.m_iClearFriendIsTypingInterval=window.setTimeout(function(){e.m_iClearFriendIsTypingInterval=void 0,e.ClearFriendIsTypingState()},11e3)},e.prototype.PlayFriendMessageSound=function(){m.f.FriendStore.GetUserDoNotDisturb()||m.f.AudioPlaybackManager.PlayAudioURL(l.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_message_old_smooth.m4a")},e.prototype.OnReceivedNewMessage=function(e,t,n,o){if(!e.BIsLocalEcho()&&e.unAccountID!=this.self.accountid){if(this.ClearFriendIsTypingState(),t<2&&(this.is_blocked_friend||m.f.FriendStore.BIsInvisibleMode()))return;if(m.f.NotificationManager.BNotificationsPermitted()&&this.chat_partner.BShowMessageNotification()&&t<4&&!m.f.FriendStore.GetUserDoNotDisturb()){var i={title:this.chat_partner.display_name,body:n,tag:"message_"+this.chat_partner.accountid,steamid:this.chat_partner.persona.m_steamid.ConvertTo64BitString()};(i=this.DecorateNotification(e,i,n,o)).body&&(this.GetShowNonFriendWarning()&&m.f.SettingsStore.BClientHasFeatureOrOnWeb("NonFriendMessageHandling")&&(i.body=""),m.f.NotificationManager.DisplayNotificationFromFriend(this.chat_partner,i),this.m_bHasUnreadPriorityChatMessages||(this.m_bHasUnreadPriorityChatMessages=!0,m.f.FriendStore.UpdateUnreadMessagesGlobal()))}this.chat_partner.BPlayMessageSound()&&t<4&&this.PlayFriendMessageSound(),0==m.f.SettingsStore.FriendsSettings.nChatFlashMode&&t<4&&!m.f.FriendStore.GetUserDoNotDisturb()&&m.f.UIStore.FlashChatWindow(this,!0)}},e.prototype.ClearFriendIsTypingState=function(){void 0!==this.m_iClearFriendIsTypingInterval&&(window.clearInterval(this.m_iClearFriendIsTypingInterval),this.m_iClearFriendIsTypingInterval=void 0),this.m_bFriendIsTyping=!1},e.prototype.PopulateCommitFileUploadFormData=function(e,t){e.append("friend_steamid",p.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),e.append("spoiler",t.bSpoiler?"1":"0")},e.prototype.GetMember=function(e){return e==this.m_unAccountIDFriend?this.chat_partner:e==this.self.accountid?this.self:void 0},Object.defineProperty(e.prototype,"accountid_partner",{get:function(){return this.m_unAccountIDFriend},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chat_partner",{get:function(){return m.f.FriendStore.GetPlayer(this.m_unAccountIDFriend)},enumerable:!0,configurable:!0}),e.prototype.ViewerNeedsApproval=function(e){var t='[broadcastviewrequest requestid="'+e+'"][/broadcastviewrequest]';this.InternalAppendChatMsg(new _.d(this.chat_partner.accountid,m.f.GetServerRTime32(),0,t)),m.f.FriendStore.GetUserDoNotDisturb()||m.f.NotificationManager.DisplayNotificationFromFriend(this.chat_partner,{title:"",body:Object(h.c)("#Chat_BroadcastViewRequest_Notification"),tag:"message_"+this.chat_partner.accountid,steamid:this.chat_partner.persona.m_steamid.ConvertTo64BitString()})},Object(s.c)([a.x],e.prototype,"m_bFriendIsTyping",void 0),Object(s.c)([a.x],e.prototype,"m_bNeedsNonFriendWarning",void 0),Object(s.c)([a.g],e.prototype,"ToggleVoiceChat",null),Object(s.c)([g.a,Object(b.a)(100)],e.prototype,"PlayFriendMessageSound",null),Object(s.c)([a.g],e.prototype,"ClearFriendIsTypingState",null),Object(s.c)([a.g],e.prototype,"ViewerNeedsApproval",null),e}(f.a),O=function(){function o(){this.m_cache=a.x.map()}return o.prototype.Init=function(){return Object(s.b)(this,void 0,void 0,function(){var t,n;return Object(s.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,m.f.Storage.GetObject(o.StorageKey)];case 1:return t=e.sent(),this.Validate(t)?(this.m_cache.replace(t),this.TrimCache()):this.ClearCache(),[3,3];case 2:return n=e.sent(),console.error("There was a problem loading recent friend messages from storage: "+n),this.ClearCache(),[3,3];case 3:return[2]}})})},o.prototype.Validate=function(e){if("object"!=typeof e||!e)return!1;for(var t in e){if(isNaN(parseInt(t)))return!1;var n=e[t];if("object"!=typeof n)return!1;if("string"!=typeof n.strMessage&&null!==n.strMessage||"number"!=typeof n.rtTime||"number"!=typeof n.unAccountIDSender)return!1}return!0},o.prototype.ClearCache=function(){this.m_cache.clear(),this.SerializeToStorage()},o.prototype.SerializeToStorage=function(){return m.f.Storage.StoreObject(o.StorageKey,this.m_cache.toJSON())},o.prototype.GetLastMessage=function(e){return this.m_cache.get(e.toString())},o.prototype.UpdateLastMessage=function(e,t){return this.m_cache.set(e.toString(),t),this.SerializeToStorage()},o.prototype.TrimCache=function(){var n=this,o=Date.now()/1e3;this.m_cache.forEach(function(e,t){e.rtTime<o-i.b.PerYear/2&&n.m_cache.delete(t)}),this.SerializeToStorage()},o.StorageKey="FriendLastMessageCache",o}(),I=function(){function e(){}return e.prototype.Init=function(){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){return[2]})})},e.prototype.GetLastMessage=function(){},e.prototype.UpdateLastMessage=function(){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(e){return[2]})})},e}()},gfbn:function(e,t,n){"use strict";n.r(t);var s,c,l,a=n("tkkQ"),p=n("1n9R"),u=n("ywG3"),o=n("mrSG"),i=n("YiOU"),r=n("vDqi"),m=n.n(r),d=n("4HGb"),h=n("1VtQ"),f=n("2vnA"),_=n("s+DT"),g=n("OJz+"),b=n("XaMz"),v=function(){function e(e){var t=this;this.m_bLogonFailed=!1,this.m_bForcedDisconnect=!1,this.m_bConnectSucceeded=!1,this.m_bEverConnected=!1,this.m_bEverLoggedOn=!1,this.m_cConsecutiveConnectionFailures=0,this.m_bWaitingToReconnect=!1,this.m_rgdtRecentFailures=[],this.m_eWebLogonState=0,this.m_ClientLogoffHandler=Object(g.b)(757,i.c,function(e){34==e.Body().eresult()&&(t.m_eWebLogonState=15,t.m_bWaitingToReconnect=!0)}),this.m_CMInterface=e,this.m_CMInterface.AddOnDisconnectCallback(this.OnCMDisconnected),this.m_CMInterface.AddOnLogonCallback(this.OnCMLoggedOn)}return Object.defineProperty(e.prototype,"web_logon_state",{get:function(){return this.m_eWebLogonState},enumerable:!0,configurable:!0}),e.prototype.BIsInInitialConnect=function(){return 1==this.m_eWebLogonState||5==this.m_eWebLogonState},e.prototype.BIsWaitingToReconnect=function(){return this.m_bWaitingToReconnect},e.prototype.BWillAutoReconnect=function(){return void 0!==this.m_iTimeoutRetryLogon},e.prototype.ClearRetryTimeout=function(){this.m_iTimeoutRetryLogon&&(window.clearTimeout(this.m_iTimeoutRetryLogon),this.m_iTimeoutRetryLogon=void 0)},e.prototype.GetMSUntilNextReconnectAttempt=function(){return this.m_dtNextLogonAttempt?Math.max(0,this.m_dtNextLogonAttempt.getTime()-(new Date).getTime()):0},e.prototype.ReconnectNow=function(){this.m_bWaitingToReconnect&&(this.m_rgdtRecentFailures=[],this.RetryLogin())},e.prototype.OnCMDisconnected=function(e){if(13!=this.m_eWebLogonState&&14!=this.m_eWebLogonState&&15!=this.m_eWebLogonState){if(this.m_bForcedDisconnect)return this.m_bForcedDisconnect=!1,void this.RetryLogin();for(;24<=this.m_rgdtRecentFailures.length;)this.m_rgdtRecentFailures.shift();if(this.m_rgdtRecentFailures.push(new Date),this.m_bConnectSucceeded&&!this.m_CMInterface.session.m_bWaitingForLogonResponse){var t=this.m_CMInterface.session.m_eResultLogonSuccess;this.m_eWebLogonState=1!=t?this.m_bEverLoggedOn?6:8:10}else this.m_eWebLogonState=this.m_bEverConnected?10:2;this.m_cConsecutiveConnectionFailures++,e||this.RescheduleLogin()}},e.prototype.OnCMLoggedOn=function(){this.m_eWebLogonState=9,this.m_bEverLoggedOn=!0,this.m_cConsecutiveConnectionFailures=0},e.prototype.PerformInitialLogon=function(e){e.token_use_id&&(window.sessionStorage.getItem("token_use_id")==e.token_use_id?(console.log("In-page token has already been consumed, requesting a new token."),e=null):window.sessionStorage.setItem("token_use_id",e.token_use_id)),this.PerformWebLogOn(e)},e.prototype.PerformWebLogOn=function(e){var t=this;if(this.m_bConnectSucceeded=!1,this.m_eWebLogonState=this.m_bEverConnected?3:1,e&&e.steamid&&e.token&&e.account_name){a.d.steamid=e.steamid,a.d.accountid=new _.a(e.steamid).GetAccountID(),a.d.account_name=e.account_name;var n=d.b.Init(i.d,5514);n.Body().set_account_name(e.account_name),n.Body().set_protocol_version(65580),n.Body().set_qos_level(2),n.Body().set_client_os_type(4294966596),n.Body().set_ui_mode(4),n.Body().set_chat_mode(2),n.Body().set_web_logon_nonce(e.token),n.Hdr().set_steamid(e.steamid),this.m_CMInterface.session.m_nSessionIDLast&&n.Body().set_last_session_id(this.m_CMInterface.session.m_nSessionIDLast>>>0),n.Body().set_client_instance_id(this.m_CMInterface.session.m_nClientInstanceID),this.m_CMInterface.Connect().then(function(){a.d.logged_in=!0,t.m_bConnectSucceeded=!0,t.m_bEverConnected=!0,t.m_eWebLogonState=t.m_bEverLoggedOn?7:5,t.m_CMInterface.Send(n)})}else this.RetryLogin()},e.prototype.RetryLogin=function(){var o=this;if(this.m_bWaitingToReconnect=!1,this.ClearRetryTimeout(),this.m_CMInterface.BIsConnected()&&this.m_bConnectSucceeded)return this.m_bForcedDisconnect=!0,void this.m_CMInterface.ForceDisconnect();Object(b.a)(11!=this.m_eWebLogonState,"RetryLogin called while request in flight"),11!=this.m_eWebLogonState&&(this.m_eWebLogonState=11,this.m_CMInterface.Connect().catch(function(){}),m.a.get(a.a.TOKEN_URL,{method:"POST"}).then(function(e){var t=e.data;if(t.logged_in&&t.steamid&&t.token&&t.account_name){var n=new _.a(t.steamid);o.m_bEverLoggedOn&&o.m_CMInterface.steamid.GetAccountID()!=n.GetAccountID()?(o.m_eWebLogonState=14,o.m_CMInterface.ForceDisconnect()):o.PerformWebLogOn(t)}else o.m_eWebLogonState=13,o.m_CMInterface.ForceDisconnect()}).catch(function(e){o.m_eWebLogonState=12,o.RescheduleLogin()}))},e.prototype.RescheduleLogin=function(){for(var e=this,t=0,n=0,o=new Date,i=0,r=this.m_rgdtRecentFailures;i<r.length;i++){var a=r[i];a.getTime()>=o.getTime()-6e4?t++:a.getTime()>=o.getTime()-36e5&&n++}n+=t;var s=this.m_cConsecutiveConnectionFailures+t;if(s<=2)this.RetryLogin();else if(s<=10&&n<=10){var c=5e3*(s-2);this.m_dtNextLogonAttempt=new Date((new Date).getTime()+c),this.m_bWaitingToReconnect=!0,this.ClearRetryTimeout(),this.m_iTimeoutRetryLogon=window.setTimeout(function(){e.m_dtNextLogonAttempt=void 0,e.RetryLogin()},c)}else this.m_bWaitingToReconnect=!0},Object(o.c)([f.x],e.prototype,"m_eWebLogonState",void 0),Object(o.c)([h.a],e.prototype,"OnCMDisconnected",null),Object(o.c)([h.a],e.prototype,"OnCMLoggedOn",null),e}(),S=n("hReu"),y=n("yoQ3"),C=n("Kwyy"),O=n("oh5H"),I=(n("Y3TG"),n("XCHq"));n("w/TS"),n("whIR"),n("eeM7"),n("m1EC");window.AssertMsg=b.a,document.addEventListener("DOMContentLoaded",function(){Object(a.c)();var e=!0;p.a.steamid&&Object(I.a)(p.a.steamid),!a.a.IN_CLIENT&&a.a.STEAM_TV&&(a.d.logged_in?Object(C.c)():(e=!1,Object(S.d)(),(new C.b).Init(function(){window.location=window.location}))),e&&function(){var e,t=new S.c,n=null,o=!1;if(a.a.IN_CLIENT){Object(p.d)();var i={message:"ChatJavascriptInitialized",data:a.a.BUILD_TIMESTAMP};window.parent.postMessage(i,"https://steamloopback.host"),window.parent.postMessage("ChatJavascriptIntialized","https://steamloopback.host"),o=!0,(e=new u.a).Connect()}else{var r=e=new u.b(t.Storage);(n=new v(r)).PerformInitialLogon(a.d)}t.Init(e,o,n),Object(y.d)(S.a,t.FriendStore,t.ChatStore,document.getElementById("friendslist-container"),o)}()}),window.LocalizationReady=function(e,t,n){if("english"!==t)"friendsui"==e?s=n:"shared"==e&&(c=n);else if("shared"==e)l=n;else{var o=void 0,i=null,r=void 0,a=null;void 0!==s?(o=s,i=n):o=n,void 0!==c?(r=c,a=l):r=l,O.b.InitFromObjects(o,i,r,a),l=c=s=void 0}}},gtB6:function(e,t,n){"use strict";n.d(t,"b",function(){return I}),n.d(t,"c",function(){return E}),n.d(t,"a",function(){return M});var o=n("mrSG"),i=n("tkkQ"),r=n("hReu"),a=n("/IDK"),s=n("LAqV"),c=n("YZlK"),l=n("+mma"),p=n("FkUk"),u=n("Hi0u"),m=n("uWOQ"),d=n("okNM"),h=n("q1tI"),f=n("8o0Y"),_=n("EGkk"),g=n("ljid"),b=n("oh5H"),v=n("1VtQ"),S=n("e2SU"),y=n("20CD"),C=n("AAGn"),O=n.n(C);function I(e,t,n){var o,i=Object(r.e)(null,e);return t.BIsClanChatRoom()&&(o=s.f.FriendStore.ClanStore.GetClan(t.GetClanID())),Object(f.a)(h.createElement(w,{browserContext:i,group:t,clan:o,context:n,ownerWindow:e.currentTarget.ownerDocument.defaultView}),e)}function E(e,t,n){var o,i=Object(r.e)(null,e);return t.GetChatGroupIDIfLoaded()&&(o=s.f.ChatStore.GetChatRoomGroup(t.GetChatGroupIDIfLoaded())),Object(f.a)(h.createElement(w,{browserContext:i,group:o,clan:t,context:n,ownerWindow:e.currentTarget.ownerDocument.defaultView}),e)}var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OpenChatWindow=function(e){this.props.group?s.f.UIStore.ShowAndOrActivateChatRoomGroup(this.props.browserContext,this.props.group,!0):this.props.clan.OpenChatDialog(this.props.browserContext,!0)},t.prototype.ShowClanProfile=function(e){var t;if(this.props.clan.BIsOGG())t=i.a.COMMUNITY_BASE_URL+"app/"+this.props.clan.GetOGGAppID();else{var n=this.props.clan.steamid;t=i.a.COMMUNITY_BASE_URL+"gid/"+n.ConvertTo64BitString()}Object(m.e)(e,t),e.stopPropagation()},t.prototype.LeaveChatRoomGroup=function(e){Object(c.d)(e.currentTarget.ownerDocument.defaultView,this.props.group)},t.prototype.render=function(){var e=this,t=[],n=this.props.group,o=this.props.clan,i=this.props.context||{},r=s.f.FriendStore.FavoritesStore;i.tab?t.push(h.createElement(_.d,{key:"closetab",onSelected:function(){s.f.UIStore.CloseTab(e.props.browserContext,i.tab)}},Object(b.c)("#Chat_CloseTabAction"))):i.is_chat_window||t.push(h.createElement(_.d,{key:"opentab",onSelected:this.OpenChatWindow},Object(b.c)("#Chat_Actions_OpenChat"))),o&&!o.BIsOGG()&&t.push(h.createElement(_.d,{key:"viewprofile",onSelected:this.ShowClanProfile},Object(b.c)("#Friend_Menu_ViewProfile"))),t.push(h.createElement(_.d,{key:"leavechatroom",onSelected:this.LeaveChatRoomGroup},Object(b.c)(o?"#Chat_Actions_LeaveChatRoom":"#Chat_Actions_LeaveChatRoomGroup")));var a=o?{clan:o}:{chat:n};return s.f.FriendStore.FavoritesStore.BIsFavorited(a)?i.is_favorites&&t.push(h.createElement(_.d,{key:"quickaccess",onSelected:function(){r.RemoveFromFavorites(a)}},Object(b.c)("#Friend_Menu_RemoveFromQuickAccess"))):t.push(h.createElement(_.d,{key:"quickaccess",onSelected:function(){r.AddToFavorites(a)}},Object(b.c)("#Friend_Menu_AddToQuickAccess"))),o&&o.BIsOGG()&&t.push(h.createElement(p.d,{unAppID:o.GetOGGAppID(),strGameName:o.name})),h.createElement(_.c,{className:"chatRoomListItemContextMenu"},t)},Object(o.c)([v.a],t.prototype,"OpenChatWindow",null),Object(o.c)([v.a],t.prototype,"ShowClanProfile",null),Object(o.c)([v.a],t.prototype,"LeaveChatRoomGroup",null),t}(h.Component);function M(e,t,n,o,i){return t.GetDefaultChatID()==n?null:D.BIsMenuEmpty(t,n,!!i)?null:Object(f.a)(h.createElement(D,{browserContext:e,group:t,roomID:n,ownerWindow:o.currentTarget.ownerDocument.defaultView,onStartRoomRename:i}),o)}var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ShowInviteDialog=function(){var e=this.props.group.GetChatRoom(this.props.roomID);Object(y.b)(this.props.browserContext,this.props.ownerWindow,this.props.group,e)},t.prototype.SaveVoiceRoom=function(e){var t,n,o,i=Object(a.n)(e);t=i,n=this.props.group,o=this.props.roomID,Object(u.b)(h.createElement(T,{group:n,roomID:o}),t,"SaveVoiceRoomDialog",{strTitle:Object(b.c)("#Chat_SaveVoiceRoom"),popupWidth:664,popupHeight:380},Object(r.g)(t))},t.prototype.RemoveRoom=function(){var n=this;Object(l.d)(this.props.ownerWindow,Object(b.c)("#Chat_Actions_RemoveRoom"),Object(b.c)("#Chat_Actions_RemoveRoom_Confirm"),Object(b.c)("#Chat_Actions_RemoveRoom_Action")).then(function(){var e=n.props.group,t=n.props.roomID;e.DeleteChatRoom(t)}).catch(function(){})},t.prototype.ChangeRoomName=function(){this.props.onStartRoomRename(this.props.roomID)},t.BIsMenuEmpty=function(e,t,n){var o=e.GetDefaultChatID()==t,i=e.BIsTempVoiceChannel(t),r=e.BCanAdminChannel();return!e.BIsVoiceChannel(t)&&((!i||!r)&&(!(n&&!o&&!i&&r)&&!(!o&&r)))},t.prototype.render=function(){var e=[],t=this.props.group,n=this.props.roomID,o=t.GetDefaultChatID()==n,i=t.BIsTempVoiceChannel(n),r=t.BCanAdminChannel();t.BCanInvite();return e.push(h.createElement(_.d,{key:"invitefriend",onSelected:this.ShowInviteDialog},Object(b.c)("#Chat_Actions_InviteFriendtoVoice"))),i&&e.push(h.createElement(_.d,{key:"savechannel",className:r?"":O.a.ChatRoomContextNoPermission,onSelected:this.SaveVoiceRoom},!r&&h.createElement(S.D,null),Object(b.c)("#Chat_Actions_SaveChannel"))),this.props.onStartRoomRename&&!o&&!i&&r&&e.push(h.createElement(_.d,{key:"renameroom",onSelected:this.ChangeRoomName},Object(b.c)("#Chat_Actions_ChangeRoomName"))),!o&&r&&e.push(h.createElement(_.d,{key:"removeroom",onSelected:this.RemoveRoom},Object(b.c)("#Chat_Actions_RemoveRoom"))),e.length<1?(console.log("warning: empty context menu. Did someone not update BIsMenuEmpty?"),null):h.createElement(_.c,{className:"friendsContextMenu"},e)},Object(o.c)([v.a],t.prototype,"ShowInviteDialog",null),Object(o.c)([v.a],t.prototype,"SaveVoiceRoom",null),Object(o.c)([v.a],t.prototype,"RemoveRoom",null),Object(o.c)([v.a],t.prototype,"ChangeRoomName",null),t}(h.PureComponent);var T=function(n){function e(e){var t=n.call(this,e)||this;return t.state={strName:"",strError:void 0},t}return Object(o.d)(e,n),e.prototype.HandleTextEntry=function(e){this.setState({strName:e.target.value})},e.prototype.HandleSubmit=function(e){e&&e.preventDefault();var t=this.state.strName;0!=t.length?(this.props.group.RenameRoom(this.props.roomID,t),this.props.closeModal()):this.setState({strError:Object(b.c)("#Chat_SaveVoiceRoom_Error_EmptyName")})},e.prototype.render=function(){return h.createElement(u.a,{onEscKeypress:this.props.closeModal},h.createElement(g.h,{classNameContent:"SaveVoiceRoomDialog",onSubmit:this.HandleSubmit},h.createElement(g.m,null,Object(b.c)("#Chat_SaveVoiceRoom")),h.createElement(g.b,null,this.state.strError&&h.createElement(g.c,{className:"nicknameError"},this.state.strError),h.createElement(g.c,null,Object(b.c)("#Chat_SaveVoiceRoom_Description")),h.createElement(g.o,{type:"text",label:Object(b.c)("#Chat_SaveVoiceRoom_Name"),className:"nicknameInput",value:this.state.strName,onChange:this.HandleTextEntry,autoFocus:!0})),h.createElement(g.j,null,h.createElement(g.t,{onCancel:this.props.closeModal}))))},Object(o.c)([v.a],e.prototype,"HandleTextEntry",null),Object(o.c)([v.a],e.prototype,"HandleSubmit",null),e=Object(o.c)([d.a],e)}(h.Component)},hEDq:function(e,t,n){"use strict";n.d(t,"j",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"g",function(){return m}),n.d(t,"i",function(){return h}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return _}),n.d(t,"h",function(){return v});var o=n("mrSG"),i=n("0N1H");n.d(t,"k",function(){return i.d});var r=n("2vnA"),a=function(){function e(){this.enabled=!1,this.locked=!1,this.features=0,this.allowallapps=!1,this.baselist=void 0,this.customlist=void 0}return Object(o.c)([r.x],e.prototype,"enabled",void 0),Object(o.c)([r.x],e.prototype,"locked",void 0),Object(o.c)([r.x],e.prototype,"features",void 0),Object(o.c)([r.x],e.prototype,"allowallapps",void 0),Object(o.c)([r.x],e.prototype,"baselist",void 0),Object(o.c)([r.x],e.prototype,"customlist",void 0),e}(),s=function(){return function(){this.broadcastid="0",this.nViewers=0,this.nRequests=0,this.bIsBroadcasting=!1,this.bIsRecordingDesktop=!1,this.bBroadcastCapable=!1}}();function c(){return{bNotifications_ShowIngame:!0,bNotifications_ShowOnline:!1,bNotifications_ShowMessage:!0,bNotifications_EventsAndAnnouncements:!0,bSounds_PlayIngame:!1,bSounds_PlayOnline:!1,bSounds_PlayMessage:!0,bSounds_EventsAndAnnouncements:!1,bAlwaysNewChatWindow:!1,bForceAlphabeticFriendSorting:!1,nChatFlashMode:0,bRememberOpenChats:!0,bCompactQuickAccess:!1,bCompactFriendsList:!1,bNotifications_ShowChatRoomNotification:!0,bSounds_PlayChatRoomNotification:!0,bHideOfflineFriendsInTagGroups:!1,bHideCategorizedFriends:!1,bCategorizeInGameFriendsByGame:!0,nChatFontSize:2,b24HourClock:!1,bDoNotDisturbMode:!1,bDisableEmbedInlining:!1,bSignIntoFriends:!0,bDisableSpellcheck:!1,featuresEnabled:{}}}var l,p;function u(e){return e==l.EBrowserType_OpenVROverlay||e==l.EBrowserType_OpenVROverlay_Dashboard}(p=l||(l={}))[p.EBrowserType_OffScreen=0]="EBrowserType_OffScreen",p[p.EBrowserType_OpenVROverlay=1]="EBrowserType_OpenVROverlay",p[p.EBrowserType_OpenVROverlay_Dashboard=2]="EBrowserType_OpenVROverlay_Dashboard",p[p.EBrowserType_DirectHWND=3]="EBrowserType_DirectHWND",p[p.EBrowserType_DirectHWND_Borderless=4]="EBrowserType_DirectHWND_Borderless",p[p.EBrowserType_DirectHWND_Hidden=5]="EBrowserType_DirectHWND_Hidden",p[p.EBrowserType_ChildHWNDNative=6]="EBrowserType_ChildHWNDNative",p[p.EBrowserType_Transparent_Toplevel=7]="EBrowserType_Transparent_Toplevel",p[p.EBrowserType_OffScreen_SharedTexture=8]="EBrowserType_OffScreen_SharedTexture",p[p.EBrowserType_OffScreen_GameOverlay=9]="EBrowserType_OffScreen_GameOverlay",p[p.EBrowserType_OffScreen_GameOverlay_SharedTexture=10]="EBrowserType_OffScreen_GameOverlay_SharedTexture",p[p.EBrowserType_Offscreen_FriendsUI=11]="EBrowserType_Offscreen_FriendsUI",p[p.EBrowserType_MAX=12]="EBrowserType_MAX";var m,d,h,f;(d=m||(m={}))[d.k_EClientUINotificationGroupChatMessage=1]="k_EClientUINotificationGroupChatMessage",d[d.k_EClientUINotificationFriendChatMessage=2]="k_EClientUINotificationFriendChatMessage",d[d.k_EClientUINotificationFriendPersonaState=3]="k_EClientUINotificationFriendPersonaState",(f=h||(h={}))[f.k_EComputerActiveStateInvalid=0]="k_EComputerActiveStateInvalid",f[f.k_EComputerActiveStateActive=1]="k_EComputerActiveStateActive",f[f.k_EComputerActiveStateIdle=2]="k_EComputerActiveStateIdle";var _,g,b=function(){return function(){}}();(g=_||(_={}))[g.k_EPending=0]="k_EPending",g[g.k_EAccepted=1]="k_EAccepted",g[g.k_ERejected=2]="k_ERejected";var v,S;(S=v||(v={}))[S.k_EClientUsedInputTypeKeyboard=0]="k_EClientUsedInputTypeKeyboard",S[S.k_EClientUsedInputTypeMouse=1]="k_EClientUsedInputTypeMouse",S[S.k_EClientUsedInputTypeController=2]="k_EClientUsedInputTypeController",S[S.k_EClientUsedInputTypeMax=3]="k_EClientUsedInputTypeMax"},hReu:function(e,t,n){"use strict";var l=n("mrSG"),G=n("LAqV"),c=n("yoQ3"),o=n("okNM"),R=n("q1tI"),i=n.n(R),s=n("i8i4"),r=n("vDqi"),a=n.n(r),f=n("tkkQ"),p=n("4HGb"),u=n("KrQr"),m=n("rrR9"),j=n("e2SU"),d=n("/IDK"),h=n("VtNY"),L=n("oh5H"),y=n("YZlK"),_=n("1VtQ"),g=n("+mma"),b=n("Hi0u"),A=n("GxRc"),C=n("UMCL");var v,S,O=Object(G.h)(function(e,t,n){Object(b.b)(R.createElement(w,Object(l.a)({},e,{bIsInviteDialog:!0})),n,"InviteDialog",{strTitle:"Invite",popupWidth:540,popupHeight:260},Mt(n))}),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.AcceptInvite=function(e){var t=this,n=d.n(e);G.f.ChatStore.InviteStore.AcceptInvite(this.props.invite,Et(this,e)).then(function(e){t.HandleJoinResult(n,e)})},t.prototype.HandleJoinResult=function(e,t){var n=Object(h.b)(t);n&&Object(g.c)(e,Object(L.c)("#ChatRoom_InviteMessage_Header"),n,Object(L.c)("#Button_OK")),this.props.onAccept&&this.props.onAccept()},t.prototype.render=function(){var e=this.props.invite;if(!e||!e.BIsReady())return R.createElement("div",{className:"ChatMessageInvite RequestingInfo displayRow"},R.createElement(A.a,{size:"small"}),R.createElement("div",{className:"postedExpiredInvite"},Object(L.c)("#bbcode_invite_requesting_info")));if(!e.BIsValid())return R.createElement("div",{className:"ChatMessageInvite InviteExpired"},R.createElement("div",{className:"postedExpiredInvite"},Object(L.c)("#bbcode_invite_no_longer_valid")));var t=this.props.inviter&&G.f.FriendStore.self.accountid==this.props.inviter.accountid,n=G.f.ChatStore.GetChatRoomGroup(e.GetChatRoomGroupID()),o=n&&n.BIsCurrentUserAMember(),i=e.BIsExpired(),r=n&&n.name,a="",s="ChatMessageInvite NoBGSplitInvite",c="inviteButton inviteButtonJoinChat";this.props.strClassName&&(s+=" "+this.props.strClassName);var l,p,u=e.BIsInviteLink(),m=e.BIsVoiceChatInvite();if(m){c+=" inviteButtonJoinVoice",s+=" VoiceChannelInvite";var d=n.GetChatRoom(e.GetChatID());d&&(a=d.name)}if(this.props.bIsInviteDialog||(o&&!t&&(s+=" GroupAlreadyJoined"),t&&(s+=" Inviter")),u&&(s+=" InviteLink"),i)s+=" InviteExpired";else if(e.BNeverExpires())l=R.createElement("div",{className:"Invite_ExpireTime"},Object(L.c)("#bbcode_invite_never_expires"));else{var h=G.f.RTime32ToDate(e.time_expires);l=R.createElement("div",{className:"Invite_ExpireTime"},Object(L.c)("#bbcode_invite_expires",h.toLocaleTimeString(),h.toDateString()))}p=t?m?Object(L.c)("#Voice_StartTalking"):Object(L.c)("#ChatRoom_Invite_Accept_Inviter"):m?Object(L.c)("#Voice_StartTalking"):o?Object(L.c)("#ChatRoom_Invite_Accept_Inviter"):Object(L.c)("#ChatRoom_Invite_Accept");var f=null,_=!1;if(e.BIsUserBanned())_=!0,f=R.createElement("div",null,Object(L.c)("#bbcode_invite_banned_forever"));else if(e.GetTimeKickExpires()&&e.GetTimeKickExpires()>G.f.GetServerRTime32()){_=!0;var g=(h=G.f.RTime32ToDate(e.GetTimeKickExpires())).toLocaleString([],{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});f=R.createElement("div",null,Object(L.c)("#bbcode_invite_banned_until",g))}var b=this.props.inviter&&o,v=!b&&!t,S=m?a:r;return R.createElement(C.b,{text:[p,S,e.GetURL()]},R.createElement("div",{className:s},R.createElement("div",{className:"leftInviteContainer"},R.createElement(y.a,{group:n,small:b,large:v}),m&&R.createElement("div",null,R.createElement(j.mb,null))),R.createElement("div",{className:"rightInviteContainer"+(o||t?" rightInvite_Horizontal":"")},R.createElement("div",{className:"rightInviteContainerContent"},R.createElement(E,{invite:this.props.invite,inviter:this.props.inviter,invitee:this.props.invitee}),R.createElement("div",null,R.createElement("div",{className:"groupName"},S)),u&&R.createElement(M,{url:e.GetURL(),bDisabled:e.BIsExpired()}),f,!t&&o&&!m&&R.createElement("div",null,R.createElement("span",{className:"groupAlreadyJoined"},Object(L.c)("#bbcode_invite_already_group_member")))),!i&&!_&&R.createElement("button",{className:c,type:"button",onClick:this.AcceptInvite},p)),(!t&&!o||u)&&l,R.createElement("div",{style:{clear:"left"}})))},Object(l.c)([_.a],t.prototype,"AcceptInvite",null),t=Object(l.c)([o.a],t)}(R.Component),E=Object(o.a)(function(e){var t=e.invite,n=e.inviter,o=e.invitee,i=t.BIsVoiceChatInvite(),r=t.BIsInviteLink(),a=e.inviter&&G.f.FriendStore.self.accountid==e.inviter.accountid,s=G.f.ChatStore.GetChatRoomGroup(t.GetChatRoomGroupID()).name,c=Object(L.c)("#bbcode_invite_youre_invited");return a?c=i?r?Object(L.e)("#bbcode_invite_you_shared_voice_link",R.createElement("span",{className:"inviteHighlight"},s," ")):Object(L.e)("#bbcode_invite_you_invited_friend_voice",R.createElement("span",{className:"inviteHighlight"},o.display_name," "),R.createElement("span",{className:"inviteHighlight"},s," ")):r?Object(L.e)("#bbcode_invite_you_shared_invite_link"):Object(L.e)("#bbcode_invite_you_invited_friend",R.createElement("span",{className:"inviteHighlight"},o.display_name," ")):n&&(c=i?r?Object(L.e)("#bbcode_invite_voice_url_description",R.createElement("span",{className:"inviteHighlight"},n.display_name," "),R.createElement("span",{className:"inviteHighlight"},s," ")):Object(L.e)("#bbcode_invite_voice_description",R.createElement("span",{className:"inviteHighlight"},n.display_name," "),R.createElement("span",{className:"inviteHighlight"},s," ")):r?Object(L.e)("#bbcode_invite_url_description",R.createElement("span",{className:"inviteHighlight"},n.display_name," ")):Object(L.e)("#bbcode_invite_description",R.createElement("span",{className:"inviteHighlight"},n.display_name," "))),R.createElement("div",{className:"inviteLabel"},c)}),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.closeModal,o=t.onAccept,i=t.strClassName,r=Object(l.f)(t,["closeModal","onAccept","strClassName"]);return i="InviteDialog"+(i?" "+i:""),R.createElement(b.a,{onEscKeypress:n},R.createElement(I,Object(l.a)({},r,{strClassName:i,onAccept:function(){e.props.closeModal&&e.props.closeModal(),o&&o()}})))},t}(R.Component),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.CopyToClipboard=function(e){d.j(this.props.url)},t.prototype.HandleFocus=function(e){e.currentTarget.select()},t.prototype.render=function(){var e=this.props.strLabel||Object(L.c)("#bbcode_invite_url_desc");return R.createElement("div",{className:"inviteURLContainer"},R.createElement("span",{className:"inviteURLLinkDesc"},e),R.createElement("div",{className:"inviteURLAndCopy"},R.createElement("input",{className:"inviteURLLink",value:this.props.bDisabled?Object(L.c)("#bbcode_invite_link_text_expired"):this.props.url,onFocus:this.HandleFocus,onClick:this.HandleFocus,readOnly:!0}),!this.props.bDisabled&&R.createElement("span",{className:"copyInviteLink",onClick:this.CopyToClipboard,title:Object(L.c)("#Chat_Copy_Clipboard")},R.createElement(j.j,null))))},Object(l.c)([_.a],t.prototype,"CopyToClipboard",null),Object(l.c)([_.a],t.prototype,"HandleFocus",null),t}(R.Component),D=n("bbBM"),k=n("uWOQ"),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={bCanAcceptRemotePlayInvite:!1},e}return Object(l.d)(e,t),e.prototype.componentDidMount=function(){return Object(l.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(l.e)(this,function(e){switch(e.label){case 0:return this.props.gameInvite.remoteplayString?(t=this.props.gameInvite.remoteplayString.split("&"),n="restricted_countries=",o="",t.forEach(function(e){e.startsWith(n)&&(o=e.slice(n.length))}),[4,G.f.RemotePlayStore.BCanAcceptInviteForGame(this.props.gameInvite.appID.toString(),o)]):[3,2];case 1:i=e.sent(),this.setState({bCanAcceptRemotePlayInvite:i}),e.label=2;case 2:return[2]}})})},e.prototype.AcceptGameInvite=function(){this.props.gameInvite.AcceptGameInvite()},e.prototype.BCanAcceptVoiceChat=function(){var e=this.props.inviter,t=2==e.efriendrelationship,n=4==e.efriendrelationship,o=e.persona.is_online&&!t&&!n&&!e.is_blocked;return!G.f.VoiceStore.IsAnyVoiceActive()&&o},e.prototype.AcceptGameInviteAndVoiceChat=function(){this.props.gameInvite.AcceptGameInvite(),this.BCanAcceptVoiceChat()&&G.f.UIStore.ShowFriendChatDialogAndStartVoice(G.f.GetDefaultBrowserContext(),this.props.inviter.accountid)},e.prototype.DismissInvite=function(){this.props.gameInvite.DismissInvite()},e.prototype.OnShowGameContextMenu=function(e){Object(D.b)(Et(this,e),this.props.gameInvite.appID,e)},e.prototype.render=function(){var e=G.f.AppInfoStore.GetAppInfo(this.props.gameInvite.appID);if(!e)return null;if(G.f.FriendStore.self==this.props.inviter){var t=this.props.inviteTarget.display_name,n=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_YouInvited":"#ChatRoom_GameInvite_YouInvited";return R.createElement("div",{className:"gameInviteSelf"},R.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(L.e)(n,t,R.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.bOld||this.props.gameInvite.bDismissed||this.props.inviter.persona.m_unGamePlayedAppID!=this.props.gameInvite.appID){var o=this.props.inviter.display_name;n=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_Dismissed":"#ChatRoom_GameInvite_Dismissed";return R.createElement("div",{className:"gameInviteDismissed"},R.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(L.e)(n,o,R.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.bAccepted){n=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_Accepted":"#ChatRoom_GameInvite_Accepted";return R.createElement("div",{className:"gameInviteAccepted"},R.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(L.e)(n,R.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.remoteplayString&&!this.state.bCanAcceptRemotePlayInvite){var i=this.props.inviter.display_name;n="#ChatRoom_GameInviteRemotePlay_CantAccept";return R.createElement("div",{className:"gameInviteDismissed"},R.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(L.e)(n,i,R.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}var r=this.props.inviter,a=null,s=r.persona.player_group_size-1;if(r.persona.m_unGamePlayedAppID==this.props.gameInvite.appID&&0<r.persona.player_group_size){var c=r.persona.player_group;G.f.FriendStore.all_friends;a=G.f.FriendStore.FriendGroupStore.ingame_group.member_list.map(function(e){return e!=r&&e.persona.player_group==c?(s--,R.createElement(D.d,{key:e.accountid,friend:e,context:null})):null})}var l={};this.props.chatGutterWidth&&(l.marginLeft="-"+this.props.chatGutterWidth+"px");var p=this.props.gameInvite.remoteplayString?"#ChatRoom_GameInviteRemotePlay_Invite":"#ChatRoom_GameInvite_Invite",u=Object(L.e)(p,this.props.inviter.display_name),m=this.props.gameInvite.remoteplayString&&this.BCanAcceptVoiceChat()&&G.f.VoiceStore.BPartnerHasAcceptedOrInitiatedOneOnOneChat(this.props.inviter.accountid);return R.createElement("div",{className:"msg ChatMessageInvite gameInviteMsg",style:l},R.createElement("div",{className:"leftInviteContainer"},R.createElement("img",{src:e.header_image_url,className:"productImage productImageBlur"}),R.createElement("img",{src:e.header_image_url,className:"productImage"})),R.createElement("div",{className:"rightInviteContainer"},R.createElement("div",{className:"centerBlock"},R.createElement("div",{className:"invitedTimeLabel"},Object(L.c)("#ChatRoom_GameInvite_InviteTime"),R.createElement(k.f,{rtime:this.props.gameInvite.rtTimestamp,bTimeOnly:!0})),R.createElement(C.b,null,R.createElement("div",{className:"inviteLabel"},u)),R.createElement(C.b,null,R.createElement("div",{className:"productName"},e.name)),0<r.persona.player_group_size&&R.createElement(C.b,null,R.createElement("div",{className:"playingWithBlock"},R.createElement("div",null,Object(L.c)("#ChatRoom_GameInvite_PlayingWith")),R.createElement("div",{className:"playingWithAvatars"},R.createElement("div",{className:"playingWithLine"}),a,0<s&&R.createElement("div",{className:"playingWithExtraCount"},Object(L.c)("#ChatRoom_GameInvite_PartyMore",s)," "))))),R.createElement("div",{className:"acceptButtonsGroup"},R.createElement("button",{className:"DialogButton GreenPlay",onClick:this.AcceptGameInvite},Object(L.c)("#ChatRoom_GameInvite_Accept")),m&&R.createElement("button",{className:"DialogButton GreenPlay",onClick:this.AcceptGameInviteAndVoiceChat},Object(L.c)("#ChatRoom_GameInvite_Accept_And_Voice_Chat"))),R.createElement("div",{className:"closeButton",onClick:this.DismissInvite},R.createElement(j.pb,null))))},Object(l.c)([_.a],e.prototype,"AcceptGameInvite",null),Object(l.c)([_.a],e.prototype,"BCanAcceptVoiceChat",null),Object(l.c)([_.a],e.prototype,"AcceptGameInviteAndVoiceChat",null),Object(l.c)([_.a],e.prototype,"DismissInvite",null),Object(l.c)([_.a],e.prototype,"OnShowGameContextMenu",null),e=Object(l.c)([o.a],e)}(R.Component),P=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bSubscribed:!1,bDismissed:!1,bThumbnailLoaded:!1},t}return Object(l.d)(e,n),e.prototype.componentDidMount=function(){this.props.broadcaster.accountid!=G.f.FriendStore.self.accountid&&this.props.broadcastid&&(G.f.BroadcastStore.SubscribeToBroadcastDetails(this.props.broadcastid,this.props.broadcaster.steamid64),this.setState({bSubscribed:!0}))},e.prototype.componentWillUnmount=function(){this.state.bSubscribed&&G.f.BroadcastStore.UnsubscribeFromBroadcastDetails(this.props.broadcastid,this.props.broadcaster.steamid64)},e.prototype.OnWatch=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.broadcaster.steamid64,n=Et(this,e);SteamClient.WebChat.OpenURLInClient(t,n.m_unPID,!1)}else{var o=f.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.broadcaster.steamid64;Object(k.e)(e,o),e.stopPropagation()}this.OnClose()},e.prototype.OnClose=function(){this.setState({bDismissed:!0})},e.prototype.OnOpen=function(){this.setState({bDismissed:!1})},e.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},e.prototype.render=function(){var e=G.f.AppInfoStore.GetAppInfo(this.props.appid),t=R.createElement("span",null,R.createElement("img",{src:e.icon_url,className:"productImage"}),R.createElement("span",{className:"productName"},e.name));if(this.props.broadcaster.accountid==G.f.FriendStore.self.accountid){var n=this.props.viewer.display_name;return R.createElement("div",{className:"broadcastInviteSelf"},this.props.appid?Object(L.e)("#ChatRoom_BroadcastInvite_YouInvited",n,t):Object(L.e)("#ChatRoom_BroadcastInvite_YouInvited_NoAppID",n))}var o=this.props.broadcaster.display_name,i=G.f.BroadcastStore.GetBroadcastDetails(this.props.broadcastid,this.props.broadcaster.steamid64)||{strThumbnail:"",bExpired:!1};if(this.state.bDismissed||!this.props.broadcastid||i.bExpired)return R.createElement("div",{className:"broadcastInviteDismissed"},this.props.appid?Object(L.e)("#ChatRoom_BroadcastInvite_Expired",o,t):Object(L.e)("#ChatRoom_BroadcastInvite_Expired_NoAppID",o));var r=f.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",a=Object(L.e)("#ChatRoom_BroadcastInvite_Invite",o);return R.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg"},R.createElement("div",{className:"leftInviteContainer"},R.createElement("img",{src:i.strThumbnail,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),R.createElement("img",{src:r,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),R.createElement("div",{className:"noisePattern"})),R.createElement("div",{className:"rightInviteContainer"},R.createElement(C.b,null,R.createElement("div",{className:"centerBlock"},R.createElement("div",{className:"inviteLabel"},a),R.createElement("div",{className:"productName"},e.name))),R.createElement("button",{className:"DialogButton Primary inviteButtonWatchBroadcast",onClick:this.OnWatch},Object(L.c)("#ChatRoom_BroadcastInvite_Watch")),R.createElement("div",{className:"closeButton",onClick:this.OnClose},R.createElement(j.pb,null))))},Object(l.c)([_.a],e.prototype,"OnWatch",null),Object(l.c)([_.a],e.prototype,"OnClose",null),Object(l.c)([_.a],e.prototype,"OnOpen",null),Object(l.c)([_.a],e.prototype,"ShowThumbnail",null),e=Object(l.c)([o.a],e)}(R.Component),N=n("hEDq"),B=function(n){function e(e){var t=n.call(this,e)||this;return t.m_pollTimeout=void 0,t.m_broadcastid=void 0,t.m_bExpired=!1,t.state={strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},t}return Object(l.d)(e,n),e.prototype.OnAccept=function(e){G.f.BroadcastStore.ApproveViewerRequest(this.props.viewer.accountid,this.props.requestid)},e.prototype.OnClose=function(){G.f.BroadcastStore.RejectViewerRequest(this.props.viewer.accountid,this.props.requestid)},e.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},e.prototype.render=function(){var e=G.f.AppInfoStore.GetAppInfo(this.props.appid),t=R.createElement("span",null,R.createElement("img",{src:e.icon_url,className:"productImage"}),R.createElement("span",{className:"productName"},e.name)),n=this.props.viewer.display_name,o=G.f.BroadcastStore.GetRequestState(this.props.viewer.accountid,this.props.requestid),i=void 0!==this.m_broadcastid&&this.m_broadcastid!=G.f.BroadcastStore.broadcastid;if(void 0===this.m_broadcastid&&"0"!==G.f.BroadcastStore.broadcastid&&(this.m_broadcastid=G.f.BroadcastStore.broadcastid),i||o!=N.e.k_EPending){var r="#ChatRoom_BroadcastViewRequest_Expired";return o==N.e.k_EAccepted?r="#ChatRoom_BroadcastViewRequest_Accepted":o==N.e.k_ERejected&&(r="#ChatRoom_BroadcastViewRequest_Dismissed"),R.createElement("div",{className:"broadcastViewRequestDismissed"},Object(L.e)(r,n,t))}var a=f.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",s=(this.state.bThumbnailLoaded,this.state.nThumbnailUpdateCounter),c=Object(L.e)("#ChatRoom_BroadcastViewRequest_Invite",n);return R.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg broadcastViewRequestMsg"},R.createElement("div",{className:"leftInviteContainer"},this.state.strThumbnail&&R.createElement("img",{src:this.state.strThumbnail+"?n="+s,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),R.createElement("img",{src:a,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),R.createElement("div",{className:"noisePattern"})),R.createElement("div",{className:"rightInviteContainer"},R.createElement(C.b,null,R.createElement("div",{className:"centerBlock"},R.createElement("div",{className:"inviteLabel"},c),R.createElement("div",{className:"productName"},e.name))),R.createElement("button",{className:"inviteButton inviteButtonWatchBroadcast",onClick:this.OnAccept},Object(L.c)("#ChatRoom_BroadcastViewRequest_Accept")),R.createElement("div",{className:"closeButton",onClick:this.OnClose})))},Object(l.c)([_.a],e.prototype,"OnAccept",null),Object(l.c)([_.a],e.prototype,"OnClose",null),Object(l.c)([_.a],e.prototype,"ShowThumbnail",null),e=Object(l.c)([o.a],e)}(R.Component),F=function(n){function e(e){var t=n.call(this,e)||this;return t.m_pollTimeout=void 0,t.m_broadcastid=void 0,t.m_bExpired=!1,t.state={strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},t}return Object(l.d)(e,n),e.prototype.OnWatch=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.broadcaster.steamid64,n=Et(this,e);SteamClient.WebChat.OpenURLInClient(t,n.m_unPID,!1)}else{var o=f.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.broadcaster.steamid64;Object(k.e)(e,o),e.stopPropagation()}},e.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},e.prototype.render=function(){var e=this.props.broadcaster.current_game_name,t=this.props.broadcaster.display_name,n=f.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",o=(this.state.bThumbnailLoaded,this.state.nThumbnailUpdateCounter),i=Object(L.e)("#ChatRoom_BroadcastInvite_WatchGame",t);return R.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg"},R.createElement("div",{className:"leftInviteContainer"},this.state.strThumbnail&&R.createElement("img",{src:this.state.strThumbnail+"?n="+o,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),R.createElement("img",{src:n,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),R.createElement("div",{className:"noisePattern"})),R.createElement("div",{className:"rightInviteContainer"},R.createElement(C.b,null,R.createElement("div",{className:"centerBlock"},R.createElement("div",{className:"inviteLabel"},i),e&&R.createElement("div",{className:"productName"},e))),R.createElement("button",{className:"DialogButton Primary inviteButtonWatchBroadcast",onClick:this.OnWatch},Object(L.c)("#ChatRoom_BroadcastInvite_Watch"))))},Object(l.c)([_.a],e.prototype,"OnWatch",null),Object(l.c)([_.a],e.prototype,"ShowThumbnail",null),e}(R.Component),x=n("tY0L"),V=n("7sd/"),U=n("UqDm");(S=v||(v={}))[S.NotLoaded=0]="NotLoaded",S[S.Loading=1]="Loading",S[S.Loaded=2]="Loaded";var H=v.NotLoaded,W=[];function z(){H=v.Loaded;for(var e=0,t=W;e<t.length;e++){(0,t[e])()}W=[]}var q=function(n){function o(e){var t=n.call(this,e)||this;return t.m_strPlayerID="",t.m_player=null,t.m_playerContainer=null,t.m_bPlayerReady=!1,t.m_strPlayerID="YoutubePlayer_"+o.s_nPlayerIndex++,t.state={bYoutubeLoaded:!1},t}return Object(l.d)(o,n),o.prototype.componentWillUnmount=function(){var e;this.DestroyPlayer(),e=this.OnYoutubeScriptsReady,U.c(W,e)},o.prototype.shouldComponentUpdate=function(e,t){if(!this.m_player)return!1;var n=this.props;return n.autoplay!=e.autoplay||n.controls!=e.controls||n.showInfo!=e.showInfo||n.video!=e.video?this.CreatePlayer(e):n.width==e.width&&n.height==e.height||this.m_bPlayerReady&&this.m_player.setSize(e.width,e.height),!1},o.prototype.DestroyPlayer=function(){if(this.m_player)try{this.m_player.stopVideo&&this.m_player.stopVideo(),this.m_player.destroy&&this.m_player.destroy()}catch(e){}finally{this.m_player=null}},o.prototype.BindPlayerContainer=function(e){this.m_playerContainer!=e&&(this.m_playerContainer=e,this.DestroyPlayer(),this.m_playerContainer&&function(t){if(H!=v.Loaded){if(H==v.NotLoaded){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),window.onYouTubeIframeAPIReady=z}W.findIndex(function(e){return t==e})<0&&W.push(t)}else t()}(this.OnYoutubeScriptsReady))},o.prototype.OnYoutubeScriptsReady=function(){this.CreatePlayer(this.props)},o.prototype.CreatePlayer=function(e){if(this.DestroyPlayer(),this.m_playerContainer){var t=!1===e.autoplay?0:1,n=!0===e.showInfo?1:0,o=!0===e.controls?1:0,i=!0===e.showFullscreenBtn?1:0,r={width:String(e.width),height:String(e.height),videoId:e.video,playerVars:{autoplay:t,showinfo:n,autohide:1,fs:i,modestbranding:1,rel:0,playsinline:0,iv_load_policy:3,controls:o,start:e.startSeconds},events:{onReady:this.OnPlayerReady,onStateChange:this.OnPlayerStateChange,onError:this.OnError}},a=this.m_playerContainer.firstElementChild;this.m_bPlayerReady=!1,this.m_player=new YT.Player(a,r)}},o.prototype.OnPlayerReady=function(e){if(this.m_bPlayerReady=!0,this.props.onVideoInfoChanged){var t=this.m_player.getVideoData(),n={strAuthor:"",strTitle:"",strVideoID:""};t.author&&(n.strAuthor=t.author),t.title&&(n.strTitle=t.title),t.video_id&&(n.strVideoID=t.video_id),this.props.onVideoInfoChanged(n)}this.m_player.setSize(this.props.width,this.props.height),this.props.onPlayerReady&&this.props.onPlayerReady()},o.prototype.OnPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.UNSTARTED:case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:case YT.PlayerState.BUFFERING:break;case YT.PlayerState.ENDED:this.props.onMovieEnd&&this.props.onMovieEnd()}},o.prototype.OnError=function(e){console.log("Youtube: Playback failed",e),this.props.onError&&this.props.onError(e)},o.prototype.render=function(){return R.createElement("div",{key:this.m_strPlayerID,ref:this.BindPlayerContainer,className:"YoutubePlayer"},R.createElement("div",null,"Loading Youtube..."))},o.s_nPlayerIndex=0,Object(l.c)([_.a],o.prototype,"BindPlayerContainer",null),Object(l.c)([_.a],o.prototype,"OnYoutubeScriptsReady",null),Object(l.c)([_.a],o.prototype,"CreatePlayer",null),Object(l.c)([_.a],o.prototype,"OnPlayerReady",null),Object(l.c)([_.a],o.prototype,"OnPlayerStateChange",null),Object(l.c)([_.a],o.prototype,"OnError",null),o}(R.Component),K=n("adxy"),Y=n("B7ut"),J=n("s+DT"),Q=function(e){var t=e.children;return i.a.createElement(C.b,{text:t},i.a.createElement("div",{className:"spoilerMsgText"},i.a.createElement("div",{className:"spoilerMsg"},t)))},Z=n("QHER"),X=n("SOfK"),$=n.n(X),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.CheckLoadPrettify=function(){var e=this;if(this.m_preElem){var t=this.m_preElem.ownerDocument.defaultView;if(t&&"object"!=typeof t.PR&&!0!==t.PR){t.PR=!0;var n=t.document.createElement("script");t.document.head.appendChild(n),n.onload=function(){e.TryRunPrettyPrint()},n.src=f.a.COMMUNITY_CDN_ASSET_URL+"prettify/prettify.js"}}},t.prototype.BindRef=function(e){this.m_preElem=e},t.prototype.TryRunPrettyPrint=function(){if(this.CheckLoadPrettify(),this.m_preElem){var e=this.m_preElem.ownerDocument.defaultView;e&&"object"==typeof e.PR&&e.PR.prettyPrint()}},t.prototype.componentDidMount=function(){this.TryRunPrettyPrint()},t.prototype.componentDidUpdate=function(){this.TryRunPrettyPrint()},t.prototype.render=function(){return i.a.createElement("div",null,i.a.createElement("pre",{className:Object(Z.a)("prettyprint",$.a.CodeMessage),ref:this.BindRef},this.props.children))},Object(l.c)([_.a],t.prototype,"BindRef",null),t}(i.a.Component),te=function(e){var t=e.children;return i.a.createElement("div",null,i.a.createElement("pre",{className:$.a.PreMessage},t))},ne=function(e){var t=e.children;return i.a.createElement("div",{className:$.a.QuoteMessage},t)},oe=n("MfD9"),ie=n.n(oe),re=n("/7KC"),ae=n("geE1");function se(e){if(e.context.chat instanceof ae.a){var t=e.args.appid,n=G.f.AppInfoStore.GetAppInfo(parseInt(t)).name,o="";return o=e.context.unAccountIDSender===e.context.chat.self.accountid?e.args.remoteplay?"#ChatRoom_GameInviteRemotePlay_YouInvited":"#ChatRoom_GameInvite_YouInvited":e.args.remoteplay?"#Friend_Notification_GameInviteRemotePlay":"#Friend_Notification_GameInvite",{title:"",body:Object(L.c)(o,e.context.chat.chat_partner.display_name,n,"")}}return null}function ce(e){if(e.context.chat instanceof ae.a){var t=e.args.appid,n=G.f.AppInfoStore.GetAppInfo(parseInt(t)).name;return{title:"",body:e.context.unAccountIDSender===e.context.chat.self.accountid?Object(L.c)("#Friend_Notification_GameInviteYouInvited",e.context.chat.chat_partner.display_name,n):Object(L.c)("#Friend_Notification_GameInvite",e.context.chat.chat_partner.display_name,n)}}return null}function le(e){return e.context.chat instanceof ae.a?null!=e.args.chatid?{title:"",body:e.context.unAccountIDSender===e.context.chat.self.accountid?Object(L.c)("#bbcode_invite_you_invited_friend_voice",e.context.chat.chat_partner.display_name,e.args.chatname):Object(L.c)("#Friend_Notification_InviteVoice",e.context.chat.chat_partner.display_name,e.args.chatname)}:{title:"",body:e.context.unAccountIDSender===e.context.chat.self.accountid?Object(L.c)("#bbcode_invite_you_invited_friend",e.context.chat.chat_partner.display_name):Object(L.c)("#Friend_Notification_Invite",e.context.chat.chat_partner.display_name,e.args.chatgroupname)}:null}function pe(e){var t=e.context.chat;return t instanceof ae.a?{title:Object(L.c)("#TradeOffer_FriendSentYou",t.chat_partner.display_name),body:e.text}:null}function ue(e){return{body:Object(L.c)("#Notification_Spoiler")}}me("#bbcode_random_description"),me("#bbcode_flip_description"),me("#bbcode_video_description"),me("#bbcode_inviteurl_description"),me("#bbcode_image_description");function me(n){return function(e){var t=G.f.FriendStore.GetPlayer(e.context.unAccountIDSender);return{body:Object(L.c)(n,t.display_name)}}}var de=n("Jdiq"),he=n("9Cmb");function fe(){return{url:ve,youtube:ye,filteredurl:Qe,emoticon:Xe,img:Oe,video:Ee,og:De,tweet:Te,inviteurl:Fe,publishedfile:ze,tradeofferlink:qe,econitem:Je,steamstore:$e,broadcast:Ye,oembed:Ge,spoiler:je,plusone:Le,flip:Ae,random:ke,quote:Pe,pre:Ne,code:Be}}function _e(e){if("string"==typeof e)return e;var n="";return R.Children.forEach(e,function(e){if("string"!=typeof e){if("object"==typeof e&&e.props){var t=e.props["bbcode-text"];t&&(n+=t)}}else n+=e}),n}var ge,be,ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this.GetArgument(),t=this.props.children,n=null,o=Y.a(e);return o!=e&&(n=o),t||(n=o),G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining&&"string"!=typeof t?R.createElement(Ce,{href:e},R.createElement(j.z,null),o):R.createElement(C.b,{text:e,style:"merge-adjacent"},R.createElement(k.b,{href:e},n||t))},t=Object(l.c)([o.a],t)}(V.b),Se=function(i){function e(e){var t=i.call(this,e)||this,n=G.f.ChatStore.EmbedStore.GetCollapsedState(t.props.unAccountIDSender,t.props.msgUniqueKey),o=G.f.ChatStore.EmbedStore.GetWidths(t.props.unAccountIDSender,t.props.msgUniqueKey);return t.state={nResizedWidth:n?16:o?o.nDesiredWidth:0,bResized:void 0!==o,bIsResizing:!1,bIsRestoring:!1,bMinimized:n,bIsMinimizing:!1},t.m_frameInitialXPos=-1,t.m_frameInitialYPos=-1,t.m_frameInitialWidth=-1,t.m_frameDefaultWidth=o?o.nDefaultWidth:-1,t.m_frameDesiredWidth=o?o.nDesiredWidth:-1,t}return Object(l.d)(e,i),e.prototype.BindContainer=function(e){this.m_elContainer=e,this.m_elContainer&&450<this.props.height&&this.HandleTallImages()},e.prototype.handleCollapse=function(e){var t=this;this.state.bMinimized||(this.m_frameDesiredWidth=this.m_elContainer.clientWidth),this.m_animationCollapse&&this.m_animationCollapse.Cancel();var n=!this.state.bMinimized,o=n?this.m_frameDesiredWidth:16,i=n?16:this.m_frameDesiredWidth;this.setState({nResizedWidth:o,bMinimized:!1,bIsMinimizing:!0},function(){t.m_animationCollapse=new K.b(t,{nResizedWidth:i},{msDuration:300,timing:"sine",setStateOnComplete:{bMinimized:n,bIsMinimizing:!1},onComplete:t.OnSizeChanged}),t.m_animationCollapse.Start()}),G.f.ChatStore.EmbedStore.SetCollapsedState(this.props.unAccountIDSender,this.props.msgUniqueKey,n)},e.prototype.OnSizeChanged=function(){this.props.onSizeChanged("BBCodeResizableComponent "+this.props.msgUniqueKey+this.state.bResized+this.state.bMinimized)},e.prototype.handleRestore=function(e){var t=this;this.state.bResized&&(this.m_animationCollapse&&this.m_animationCollapse.Cancel(),this.setState({bIsRestoring:!0},function(){t.m_animationCollapse=new K.b(t,{nResizedWidth:t.m_frameDefaultWidth},{msDuration:300,timing:"sine",setStateOnComplete:{bMinimized:!1,bIsRestoring:!1,bResized:!1},onComplete:t.OnSizeChanged}),t.m_animationCollapse.Start()}),G.f.ChatStore.EmbedStore.SetWidths(this.props.unAccountIDSender,this.props.msgUniqueKey,this.m_frameDefaultWidth,this.m_frameDefaultWidth))},e.prototype.OnResize=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.HandleMouseUp)},e.prototype.HandleMouseMove=function(e){this.m_frameInitialXPos<0&&(this.m_frameInitialXPos=e.clientX),this.m_frameInitialWidth<0&&(this.m_frameInitialWidth=this.m_elContainer.clientWidth),this.m_frameDefaultWidth<0&&!this.state.bResized&&(this.m_frameDefaultWidth=this.m_elContainer.clientWidth),this.m_frameInitialYPos<0&&(this.m_frameInitialYPos=e.clientY);var t=e.clientX-this.m_frameInitialXPos,n=e.clientY-this.m_frameInitialYPos,o=this.m_frameInitialWidth+t+n,i="image"==this.props.strMediaType?64:320;o<i&&(o=i),1280<o&&(o=1280),this.setState({nResizedWidth:o,bResized:!0,bIsResizing:!0}),this.OnSizeChanged()},e.prototype.HandleTallImages=function(){var e=450*(this.props.width/this.props.height),t=this.props.width;t>Math.min(1280,e)&&(t=Math.min(1280,e)),t<parseInt(this.m_elContainer.ownerDocument.defaultView.getComputedStyle(this.m_elContainer).maxWidth)&&this.setState({nMaxWidth:t}),this.OnSizeChanged()},e.prototype.HandleMouseUp=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.HandleMouseUp),this.m_frameInitialXPos=-1,this.m_frameInitialYPos=-1,this.m_frameInitialWidth=-1,this.state.bIsResizing&&this.setState({bIsResizing:!1}),!this.state.bMinimized&&this.m_elContainer&&(this.m_frameDesiredWidth=this.m_elContainer.clientWidth),G.f.ChatStore.EmbedStore.SetWidths(this.props.unAccountIDSender,this.props.msgUniqueKey,this.m_frameDesiredWidth,this.m_frameDefaultWidth)},e.prototype.render=function(){var e={};0<this.state.nResizedWidth?e.width=this.state.nResizedWidth+"px":this.state.nMaxWidth&&(e.maxWidth=this.state.nMaxWidth+"px");var t="BBCodeResizableComponent";this.props.className&&(t+=" "+this.props.className),this.state.bResized&&(t+=" Resized"),this.state.bIsResizing&&(t+=" ActivelyResizing"),this.state.bMinimized&&(t+=" Minimized"),this.state.bIsMinimizing&&(t+=" Minimizing");var n=this.props.titleInfo?this.props.titleInfo:"";return R.createElement(C.b,{style:this.props["data-copystyle"],text:this.props["data-copytext"]},R.createElement("div",{className:t,style:e,ref:this.BindContainer},R.createElement("div",{className:"BBCodeCollapsed",onClick:this.handleCollapse,title:n},Object(L.c)("#bbcode_"+this.props.strMediaType+"_minimized")),!this.state.bMinimized&&!this.state.bIsMinimizing&&this.props.children,R.createElement("div",{className:"BBCodeRestoreControl",onClick:this.handleRestore,title:Object(L.c)("#bbcode_"+this.props.strMediaType+"_tooltip_restore")},R.createElement("div",{className:"restoreSize"})),R.createElement("div",{className:"BBCodeResizeControl",onMouseDown:this.OnResize,title:Object(L.c)("#bbcode_"+this.props.strMediaType+"_tooltip_resize")},R.createElement(j.S,null)),R.createElement("div",{className:"BBCodeCollapseControl",onClick:this.handleCollapse,title:this.state.bMinimized?Object(L.c)("#bbcode_"+this.props.strMediaType+"_tooltip_uncollapse"):Object(L.c)("#bbcode_"+this.props.strMediaType+"_tooltip_collapse")},R.createElement(j.ob,null))))},Object(l.c)([_.a],e.prototype,"BindContainer",null),Object(l.c)([_.a],e.prototype,"handleCollapse",null),Object(l.c)([_.a],e.prototype,"OnSizeChanged",null),Object(l.c)([_.a],e.prototype,"handleRestore",null),Object(l.c)([_.a],e.prototype,"OnResize",null),Object(l.c)([_.a],e.prototype,"HandleMouseMove",null),Object(l.c)([_.a],e.prototype,"HandleTallImages",null),Object(l.c)([_.a],e.prototype,"HandleMouseUp",null),e}(R.Component),ye=function(n){function e(e){var t=n.call(this,e)||this;return t.state={strTitle:"",strAuthor:"",strVideoID:""},t}return Object(l.d)(e,n),e.prototype.OnVideoInfoChanged=function(e){var t=e.strTitle,n=e.strAuthor,o=e.strVideoID;this.setState({strTitle:t,strAuthor:n,strVideoID:o})},e.prototype.OnPlayerReady=function(){this.props.context.onLoad&&this.props.context.onLoad("BBCodeYouTubeComponent "+this.state.strVideoID)},e.prototype.OnPlaceholderImageLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("BBCodeYouTubeComponent "+this.state.strVideoID)},e.prototype.componentDidMount=function(){var e=this;s.findDOMNode(this).ownerDocument.defaultView.setTimeout(function(){e.props.context.onLoad&&e.props.context.onLoad("BBCodeYouTubeComponent "+e.state.strVideoID)},250)},e.prototype.GetVideoID=function(){return this.GetArgument("v").replace(/^[^a-z0-9\-_]*([a-z0-9\-_]+).*$/gi,"$1")},e.prototype.render=function(){var e=this.state.strAuthor,t=this.state.strTitle,n="https://www.youtube.com/watch?v="+this.state.strVideoID,o=this.GetArgument("t");if(o&&(n+="&t="+encodeURIComponent(o)),G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var i="https://www.youtube.com/watch?v="+encodeURIComponent(this.GetVideoID());return o&&(i+="&t="+encodeURIComponent(o)),R.createElement(Ce,{href:i},R.createElement(j.qb,null),i)}var r=0;if(o){var a=o.match(/^(?:([\d]+)h)?(?:([\d]+)m)?(?:([\d]+)s)?/);0<a[0].length?(null!=a[1]&&(r+=3600*parseInt(a[1])),null!=a[2]&&(r+=60*parseInt(a[2])),null!=a[3]&&(r+=parseInt(a[3]))):r=parseInt(o)}return R.createElement(C.b,{style:"block",text:[t,n]},R.createElement(Se,{className:"BBCodeYouTubeComponent",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,strMediaType:"video",titleInfo:t,onSizeChanged:this.props.context.onLoad},R.createElement("div",{className:"BBCodeYouTubeComponent_Sizer BBCodeResizableElement"},R.createElement(q,{video:this.GetVideoID(),startSeconds:r,width:640,height:385,autoplay:!1,controls:!0,showFullscreenBtn:!0,onVideoInfoChanged:this.OnVideoInfoChanged,onPlayerReady:this.OnPlayerReady}),R.createElement(C.b,{style:"block",text:[t,n]},R.createElement("img",{src:f.a.PUBLIC_SHARED_URL+"images/responsive/youtube_16x9_placeholder.gif",width:"100%",onLoad:this.OnPlaceholderImageLoad}))),0<t.length&&R.createElement(k.b,{className:"test HideWhenMinimized",href:n},R.createElement("div",{className:"BBCodeTitle"},t)),0<e.length&&R.createElement("div",{className:"BBCodeDetails HideWhenMinimized"},Object(L.c)("#bbcode_youtube_author",e))))},Object(l.c)([_.a],e.prototype,"OnVideoInfoChanged",null),Object(l.c)([_.a],e.prototype,"OnPlayerReady",null),Object(l.c)([_.a],e.prototype,"OnPlaceholderImageLoad",null),e=Object(l.c)([o.a],e)}(V.b);function Ce(e){var t=e.copyText;return null==t&&(t=e.href),R.createElement(C.b,{text:t,style:"merge-adjacent"},R.createElement("div",{className:"NonInlinedEmbed"},R.createElement(k.b,{href:e.href,title:e.href},e.children)))}(be=ge||(ge={}))[be.Loading=1]="Loading",be[be.Loaded=2]="Loaded",be[be.Error=3]="Error";var Oe=function(n){function e(e){var t=n.call(this,e)||this;return t.state={eLoadingState:ge.Loading},t}return Object(l.d)(e,n),e.prototype.IsEmbeddedInOtherTag=function(){for(var e=0,t=this.props.parentTags;e<t.length;e++){if("tweet"==t[e])return!0}return!1},e.prototype.OnImageLoad=function(){this.setState({eLoadingState:ge.Loaded}),this.props.context.onLoad&&this.props.context.onLoad("BBCodeImage "+this.props.args.src)},e.prototype.OnImageError=function(){this.setState({eLoadingState:ge.Error})},e.prototype.ShowModal=function(e,t){var n=parseInt(this.GetArgument("width")),o=parseInt(this.GetArgument("height")),i=e.currentTarget.ownerDocument.defaultView,r=Object(re.a)(o||800,.5*i.screen.height,.7*i.screen.height),a=Object(re.a)(n||600,.5*i.screen.width,.7*i.screen.width);Object(b.b)(R.createElement(Ie,{imageUrl:t,ownerWin:i}),i,"ImageModal",{strTitle:"",popupHeight:r,popupWidth:a},Mt(i))},e.prototype.render=function(){var e,t=this,n=this.GetArgument("thumbnail_src"),o=this.GetArgument("srcset",!0),i=this.GetArgument("src"),r=this.GetArgument("title"),a=this.state.eLoadingState,s=parseInt(this.GetArgument("width")),c=parseInt(this.GetArgument("height")),l=void 0!==this.GetArgument("giphy_search"),p=i.startsWith("https://imgur.com"),u=i;if(l?u=n:p&&(u=n.replace("?fb","")),c&&(c=Math.max(0,Math.min(c,652))),s&&(s=Math.max(0,Math.min(s,652))),l&&(e="/giphy "+this.GetArgument("giphy_search")),G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){if(l)return R.createElement(Ce,{href:i,copyText:[e,i]},R.createElement("div",{className:"NonInlinedEmbedLogo NonInlinedEmbedLogo_Giphy"}),R.createElement("span",{style:{fontWeight:"bold"}}," ",Object(L.e)("#bbcode_image_link_giphy",R.createElement("span",{className:"giphySearch"},this.GetArgument("giphy_search")))));var m=i;return r&&(m=Object(L.c)("#bbcode_disable_embed_inlining_parenthetical",r,Y.b(i))),R.createElement(Ce,{href:i,copyText:[r,i]},R.createElement(j.A,null),m)}if("true"==this.GetArgument("proxied")&&(n+="?s=652x652"),this.IsEmbeddedInOtherTag())return R.createElement(we,{className:"embeddedImg",context:this.props.context,src:n,onContextMenu:k.c});var d="chatImageContainer";l&&(d+=" giphyImg"),a==ge.Error&&(d+=" FailedToLoad");var h={display:"none"};return a==ge.Loaded&&(h={display:"block"}),R.createElement(R.Fragment,null,l&&R.createElement(C.b,null,R.createElement("div",null,e)),R.createElement(C.b,{style:"block",text:[r,i]},R.createElement(Se,{className:d,width:s,height:c,strMediaType:"image",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,titleInfo:l?Object(L.c)("#bbcode_image_link_giphy",this.GetArgument("giphy_search")):i,onSizeChanged:this.props.context.onLoad},a==ge.Loading&&R.createElement("div",{className:"LoadingImage"},Object(L.c)("#BBCode_Loading"),"...",R.createElement(k.b,{href:i},i)),a==ge.Error&&R.createElement("div",{className:"FailedToLoadImage"},R.createElement("span",null,Object(L.c)("#BBCode_Failed"),":")," ",R.createElement(k.b,{href:i},i)),R.createElement("img",{style:h,className:"chatImageFull BBCodeResizableElement",src:n,srcSet:o,onLoad:this.OnImageLoad,onError:this.OnImageError,onContextMenu:function(e){Object(k.d)(e,i)},onClick:function(e){return t.ShowModal(e,u)}}),a==ge.Loaded&&R.createElement(R.Fragment,null,R.createElement(k.b,{className:"chatImageURL",href:i,title:l?Object(L.c)("#bbcode_image_tooltip_link_giphy",this.GetArgument("giphy_search")):Object(L.c)("#bbcode_image_tooltip_link")},R.createElement(j.Q,null),R.createElement("div",{className:"giphyTag"},l&&Object(L.e)("#bbcode_image_link_giphy",R.createElement("span",{className:"giphySearch"},this.GetArgument("giphy_search")))))))))},Object(l.c)([_.a],e.prototype,"OnImageLoad",null),Object(l.c)([_.a],e.prototype,"OnImageError",null),Object(l.c)([_.a],e.prototype,"ShowModal",null),e=Object(l.c)([o.a],e)}(V.b),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){return R.createElement(b.a,{onEscKeypress:this.props.closeModal,hideTopBar:!0},R.createElement("div",{className:ie.a.ImageModalBackground},R.createElement("img",{className:ie.a.ImageModalContent,src:this.props.imageUrl})))},t}(R.Component),Ee=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bSeeking:!1,bPlay:!1,bError:!1},t}return Object(l.d)(e,n),e.prototype.StartVideo=function(){this.m_elVideo&&this.m_elVideo.play()},e.prototype.BindVideo=function(e){this.m_elVideo=e},e.prototype.OnVideoPlay=function(){this.setState({bPlay:!0})},e.prototype.OnVideoPause=function(){this.state.bPlay||this.state.bSeeking||this.setState({bPlay:!1})},e.prototype.OnVideoError=function(e){this.setState({bError:!0})},e.prototype.OnVideoLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeVideo "+this.props.context.key)},e.prototype.render=function(){this.GetArgument("simple");var e=this.GetArgument("src"),t=this.GetArgument("title"),n=this.state.bError;if(G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var o=e;return t&&(o=Object(L.c)("#bbcode_disable_embed_inlining_parenthetical",t,Y.b(e))),R.createElement(Ce,{href:e},R.createElement(j.kb,null),o)}var i,r={controls:this.state.bPlay,autoPlay:!1,loop:!1,muted:!1};return n&&(i=R.createElement(k.b,{className:"failedVideoURL",href:e,title:Object(L.c)("#bbcode_video_tooltip_link")},R.createElement("span",{className:"failedVideoSpan"},e))),n?R.createElement("div",{className:"ChatMessageErrorSendingAlert VideoFailed"},Object(L.e)("#Chat_VideoLoadError",i)):R.createElement(C.b,{style:"block",text:[t,e]},R.createElement(Se,{className:"chatVideoContainer",strMediaType:"video",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,titleInfo:e,onSizeChanged:this.props.context.onLoad},R.createElement("video",Object(l.a)({className:"BBCodeResizableElement"},r,{ref:this.BindVideo,onPause:this.OnVideoPause,onPlay:this.OnVideoPlay,controlsList:"nodownload",onError:this.OnVideoError,onLoadedData:this.OnVideoLoaded}),R.createElement("source",{src:e,type:this.GetArgument("type",!0),onError:this.OnVideoError,onLoad:this.OnVideoLoaded})),!this.state.bPlay&&R.createElement("div",{className:"chatVideoPlayControl HideWhenMinimized",onClick:this.StartVideo},R.createElement("div",{className:"playButtonContainer"},R.createElement(j.O,null))),R.createElement(k.b,{className:"chatImageURL",href:e,title:Object(L.c)("#bbcode_video_tooltip_link")},R.createElement(j.Q,null))))},Object(l.c)([_.a],e.prototype,"StartVideo",null),Object(l.c)([_.a],e.prototype,"BindVideo",null),Object(l.c)([_.a],e.prototype,"OnVideoPlay",null),Object(l.c)([_.a],e.prototype,"OnVideoPause",null),Object(l.c)([_.a],e.prototype,"OnVideoError",null),Object(l.c)([_.a],e.prototype,"OnVideoLoaded",null),e=Object(l.c)([o.a],e)}(V.b),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.OnLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("ImgNotifyChatOnLoad "+this.props.src)},t.prototype.render=function(){var e=this.props,t=(e.context,Object(l.f)(e,["context"]));return R.createElement("img",Object(l.a)({},t,{onLoad:this.OnLoad}))},Object(l.c)([_.a],t.prototype,"OnLoad",null),t}(R.Component);function Me(e){var t=e.context,n=e.width,o=e.height,i=e.src,r=Object(l.f)(e,["context","width","height","src"]),a=i+"?s="+n+"x"+o,s=a+"dpx2x";return R.createElement(we,Object(l.a)({context:t},r,{src:a,srcSet:a+" 1x, "+s+" 2x"}))}var De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.CopyToClipboard=function(){var e=this.GetArgument("url");e&&0!=e.length&&d.j(e)},t.prototype.HandleFocus=function(e){e.target.select()},t.prototype.OnLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeOpenGraph.OnLoad "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("img"),t=this.GetArgument("title"),n=this.GetArgument("desc"),o=this.GetArgument("url"),i=Y.b(o);if(G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var r=o;return t&&(r=Object(L.c)("#bbcode_disable_embed_inlining_parenthetical",t,i)),R.createElement(Ce,{href:o,copyText:[r,o]},R.createElement(j.z,null),r)}return R.createElement(C.b,{style:"block",text:[t,n,o]},R.createElement("div",{className:"ChatMessageOpenGraph"},R.createElement("div",{className:"OpenGraphContent"},e&&0<e.length&&R.createElement("div",{className:"OpenGraphImgBackground"},R.createElement("img",{className:"ChatMessageOpenGraph_Image",src:e,onLoad:this.OnLoad})),e&&0<e.length&&R.createElement(k.b,{className:"OpenGraphImgContainer",href:o},R.createElement(Me,{width:256,height:140,context:this.props.context,className:"ChatMessageOpenGraph_Image",src:e,onContextMenu:function(e){Object(k.c)(e,o)}})),R.createElement("div",{className:"ChatMessageOpenGraph_Body"},t&&0<t.length&&R.createElement(k.b,{className:"ChatMessageOpenGraph_Title",href:o},t),n&&0<n.length&&R.createElement("div",{className:"ChatMessageOpenGraph_Description"},n)),R.createElement("div",{style:{clear:"left"}})),R.createElement("div",{className:"OpenGraphFooter"},R.createElement("div",{className:"OpenGraphMessageURL"},R.createElement("span",{className:"OpenGraphMessageURLPosition",onFocus:this.HandleFocus,onClick:this.HandleFocus},R.createElement("span",{className:"OpenGraphMessageURL_short"},i),R.createElement("input",{className:"OpenGraphMessageURL_full",value:o,onFocus:this.HandleFocus,onClick:this.HandleFocus,readOnly:!0}))),R.createElement("div",{className:"OpenGraphURLButton CopyToClipboard",onClick:this.CopyToClipboard,title:Object(L.c)("#Chat_Copy_Link_Clipboard")},R.createElement(j.j,null)))))},Object(l.c)([_.a],t.prototype,"CopyToClipboard",null),Object(l.c)([_.a],t.prototype,"HandleFocus",null),Object(l.c)([_.a],t.prototype,"OnLoad",null),t=Object(l.c)([o.a],t)}(V.b),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.FormatCreatedDate=function(e){var t=new Date(e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+t.getFullYear()},t.prototype.OpenTweet=function(e){for(var t=!1,n=e.target,o=e.currentTarget;n&&n!=o;){if("A"==n.nodeName||n.classList.contains("chatVideoContainer")){t=!0;break}n=n.parentElement}t||d.a(o)||Object(k.e)(e,this.GetArgument("url"))},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeTweet "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("created"),t=this.GetArgument("profile_name"),n=this.GetArgument("profile_screen_name"),o=this.GetArgument("profile_image"),i=this.GetArgument("profile_verified"),r=this.GetArgument("url"),a="http://twitter.com/"+n,s="true"==i;if(e=this.FormatCreatedDate(e),G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var c=new Date(e).toLocaleDateString(L.b.GetPreferredLocales(),{year:"numeric",month:"long",day:"numeric"}),l=void 0;if("string"==typeof this.props.children)l=this.props.children;else if(this.props.children instanceof Array)for(var p=0,u=this.props.children;p<u.length;p++){var m=u[p];if("string"==typeof m){l=m;break}}return R.createElement(Ce,{href:r,copyText:[l,r]},R.createElement("div",{className:"NonInlinedEmbedLogo NonInlinedEmbedLogo_Twitter"}),Object(L.c)("#bbcode_disable_embed_inlining_tweet",t,c),R.createElement("br",null),R.createElement("div",{className:"NonInlinedEmbedSingleLine"},l))}return R.createElement("div",{className:ie.a.ChatMessageTweet,onClick:this.OpenTweet},R.createElement(C.b,{style:"block",text:t+" (@"+n+")"},R.createElement("div",{className:ie.a.ChatMessageTweet_Header},R.createElement(k.b,{className:ie.a.ChatMessageTweet_ProfileImage,href:a},R.createElement("img",{src:o,onLoad:this.OnImageLoaded})),R.createElement("div",{className:ie.a.ChatMessageTweet_NameSection},R.createElement("div",{className:ie.a.ChatMessageTweet_NameGroup},R.createElement(k.b,{className:ie.a.ChatMessageTweet_Name,href:a},t),s&&R.createElement("div",{className:ie.a.ChatMessageTweet_Verified})),R.createElement(k.b,{className:ie.a.ChatMessageTweet_ScreenName,href:a},"@",n)),R.createElement(k.b,{className:ie.a.ChatMessageTweet_Logo,href:r}))),R.createElement(C.b,{style:"block-continue prepend-innertext-with-newline",text:r},R.createElement("div",{className:ie.a.ChatMessageTweet_Body},this.props.children)),R.createElement("div",{className:ie.a.ChatMessageTweet_Footer},R.createElement("div",{className:ie.a.ChatMessageTweet_Created},e)))},Object(l.c)([_.a],t.prototype,"OpenTweet",null),Object(l.c)([_.a],t.prototype,"OnImageLoaded",null),t=Object(l.c)([o.a],t)}(V.b),Ge=function(n){function e(e){var t=n.call(this,e)||this;return t.state={bActivated:!1},t}return Object(l.d)(e,n),e.prototype.Activate=function(){this.setState({bActivated:!0})},e.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeOEmbed "+this.props.context.key)},e.prototype.render=function(){var e=this.GetArgument("url"),t=this.GetArgument("title"),n=this.GetArgument("author"),o=this.GetArgument("provider_name"),i=this.GetArgument("preview_image");if(G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var r=e;return t&&(r=Object(L.c)("#bbcode_disable_embed_inlining_parenthetical",t,e)),R.createElement(Ce,{href:e,copyText:[t,e]},R.createElement(j.z,null),r)}var a,s=!this.state.bActivated;if("SoundCloud"!=o&&"Spotify"!=o||(s=!1),s)a=R.createElement("div",{className:"OEmbedPreview",onClick:this.Activate},R.createElement("div",{className:"oembedImgContainer"},R.createElement(C.b,{style:"block",text:[t,e]},R.createElement("img",{src:i,onLoad:this.OnImageLoaded})),R.createElement("div",{className:"oembedHint"},Object(L.c)("#bbcode_oembed_preview_hint"))),R.createElement("div",{className:"oembedProvider"},o),R.createElement("div",{className:"oembedTitle"},t));else{var c=JSON.parse(this.GetArgument("iframe_attrs")),l=c.src,p=c.width,u=c.height;a=R.createElement(k.b,{className:"OpenGraphImgContainer",href:e,style:{display:"flex",flexDirection:"column"}},R.createElement(Re,{width:p,height:u,src:l,strProviderName:o}),o&&o.length&&R.createElement("div",{className:"oembedProvider"},o),t&&0<t.length&&R.createElement("div",{className:"oembedTitle"},t),n&&0<n.length&&R.createElement("div",{className:"oembedAuthor"},Object(L.c)("#bbcode_oembed_author",n)))}return R.createElement(C.b,{style:"block",text:[t,e]},R.createElement("div",{className:"BBCodeOEmbedComponent "+o},a))},Object(l.c)([_.a],e.prototype,"Activate",null),Object(l.c)([_.a],e.prototype,"OnImageLoaded",null),e=Object(l.c)([o.a],e)}(V.b);function Re(e){var t=e.strProviderName,n=e.src,o=e.width,i=e.height;if(!n||!n.startsWith("http"))return null;"SoundCloud"==t&&(n=n.replace("visual=true","visual=false"));var r="number"==typeof o?o:parseInt(o),a="number"==typeof i?i:parseInt(i);!isNaN(r)&&!isNaN(a)&&640<r&&(a*=640/r,r=640);var s={flex:isNaN(a)?void 0:"1 1 "+a+"px",maxWidth:640};return R.createElement("iframe",{height:isNaN(a)?void 0:a+"px",style:s,src:n,scrolling:"no",frameBorder:0,sandbox:"allow-scripts allow-same-origin",allowFullScreen:"Vimeo"===t||void 0})}var je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){return R.createElement(Q,null,this.props.children)},t}(V.b),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this.props.context,t=e.bAnimate,n=e.onAnimationStart,o=e.onAnimationEnd;return R.createElement("div",{className:Object(Z.a)(ie.a.plusOne,t&&ie.a.MsgAnimating),onAnimationStart:n,onAnimationEnd:o},"+1")},t}(V.b),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this.props.context,t=e.bAnimate,n=e.onAnimationStart,o=e.onAnimationEnd,i=this.props.children,r=this.GetArgument("result"),a=Object(Z.a)(ie.a.flipCoinAndResult,t&&ie.a.MsgAnimating),s=Object(Z.a)(ie.a.flipCoinContainer,r);return R.createElement(C.b,{text:i},R.createElement("div",{className:a,onAnimationStart:n,onAnimationEnd:o},R.createElement("div",null,"/flip:"),R.createElement("div",{className:s},R.createElement("div",{className:ie.a.coin},R.createElement("div",{className:ie.a.front}),R.createElement("div",{className:ie.a.front_b}),R.createElement("div",{className:ie.a.mid}),R.createElement("div",{className:ie.a.back}),R.createElement("div",{className:ie.a.back_b}))),R.createElement("div",{className:ie.a.resultLabel},Object(L.c)("#SlashCommandCoinFlip_Result_"+r))))},t}(V.b),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.Pad=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},t.prototype.GetLastNumber=function(e){if(e<10)return e;var t=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))-1),n=Math.floor(e/t);return n-10*Math.floor(n/10)},t.prototype.render=function(){for(var e=this.props.children,t=this.GetArgument("min"),n=this.GetArgument("max"),o=this.Pad(this.GetArgument("result"),n.length),i=[],r=!0,a=0;a<n.length;a++){"0"!=o[a]&&(r=!1);var s=(n.length-a)*Math.max(.5*n.length,2)/n.length,c=10-a;i.push(R.createElement("div",{key:"random"+a,className:ie.a.numberCounterContainer},R.createElement("div",{className:ie.a.numberColumn+(r?" "+ie.a.startingZero:""),style:{animationDuration:s+"s",animationName:ie.a["randomNumbers"+c]}},R.createElement("div",{className:ie.a.randomNumberLabel+" "+ie.a.randomActual},o[a]),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+1)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+2)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+3)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+4)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+5)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+6)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+7)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+8)),R.createElement("div",{className:ie.a.randomNumberLabel},this.GetLastNumber(parseInt(o[a])+9)),R.createElement("div",{className:ie.a.randomNumberLabel},o[a])),R.createElement("div",{className:ie.a.randomNumberShadow})))}var l=this.props.context,p=l.bAnimate,u=l.onAnimationStart,m=l.onAnimationEnd;return R.createElement(C.b,{text:e},R.createElement("div",{className:Object(Z.a)(ie.a.randomMsg,p&&ie.a.MsgAnimating),onAnimationStart:u,onAnimationEnd:m},R.createElement("span",null,"/random "),R.createElement("span",{className:ie.a.randomValues},t,"-",n)," : ",i))},t}(V.b),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){return R.createElement(ne,null,this.props.children)},t}(V.b),Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){return R.createElement(te,null,this.props.children)},t}(V.b),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){return R.createElement(ee,null,this.props.children)},t}(V.b),Fe=function(n){function e(e){var t=n.call(this,e)||this;return t.state={invite:void 0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n=e.args.invitecode;return{invite:e.context.chat.ChatStore.InviteStore.GetInviteFromCode(n)}},e.prototype.render=function(){var e=this.props.context.chat.GetMember(this.props.context.unAccountIDSender);return R.createElement(I,{invite:this.state.invite,inviter:e})},e}(V.b),xe=function(n){function e(e){var t=n.call(this,e)||this;return t.state={invite:void 0,inviter:void 0,invitee:void 0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n,o,i,r=e.args.chatgroupid,a=e.args.chatid,s=e.context.chat;return n=s.self.accountid==e.context.unAccountIDSender?(o=s.self,i=s.chat_partner,s.accountid_partner):(o=s.chat_partner,i=s.self,s.self.accountid),{invite:e.context.chat.ChatStore.InviteStore.GetDirectInviteInfo(r,a,n),inviter:o,invitee:i}},e.prototype.render=function(){return R.createElement(I,{invite:this.state.invite,inviter:this.state.inviter,invitee:this.state.invitee})},e}(V.b),Ve=function(n){function e(e){var t=n.call(this,e)||this;return t.state={inviter:void 0,inviteTarget:void 0,gameInvite:void 0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n,o,i=e.args.appid,r=e.args.connect,a=e.args.remoteplay,s=e.context.chat;return o=s.self.accountid==e.context.unAccountIDSender?(n=s.self,s.chat_partner):(n=s.chat_partner,s.self),{inviter:n,inviteTarget:o,gameInvite:e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(e.context.unAccountIDSender,e.context.rtTimestamp,parseInt(i),r,a,void 0)}},e.prototype.render=function(){return R.createElement(T,{inviter:this.state.inviter,inviteTarget:this.state.inviteTarget,gameInvite:this.state.gameInvite})},e}(V.b),Ue=function(n){function e(e){var t=n.call(this,e)||this;return t.state={inviter:void 0,inviteTarget:void 0,gameInvite:void 0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n,o,i=e.args.appid,r=e.args.lobbyid,a=e.context.chat;return o=a.self.accountid==e.context.unAccountIDSender?(n=a.self,a.chat_partner):(n=a.chat_partner,a.self),{inviter:n,inviteTarget:o,gameInvite:e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(e.context.unAccountIDSender,e.context.rtTimestamp,parseInt(i),"","",r)}},e.prototype.render=function(){return R.createElement(T,{inviter:this.state.inviter,inviteTarget:this.state.inviteTarget,gameInvite:this.state.gameInvite})},e}(V.b),He=function(n){function e(e){var t=n.call(this,e)||this;return t.state={broadcastid:"",broadcaster:void 0,viewer:void 0,appid:0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n,o,i=e.args.broadcastid,r=Number(e.args.appid),a=e.context.chat;return o=a.self.accountid==e.context.unAccountIDSender?(n=a.self,a.chat_partner):(n=a.chat_partner,a.self),{broadcastid:i,broadcaster:n,viewer:o,appid:r}},e.prototype.render=function(){return R.createElement(P,{broadcastid:this.state.broadcastid,appid:this.state.appid,broadcaster:this.state.broadcaster,viewer:this.state.viewer})},e}(V.b),We=function(n){function e(e){var t=n.call(this,e)||this;return t.state={broadcaster:void 0,viewer:void 0,requestid:0,appid:0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n,o,i=Number(e.args.requestid),r=e.context.chat,a=G.f.FriendStore.self.persona.m_unGamePlayedAppID;return o=r.self.accountid!=e.context.unAccountIDSender?(n=r.self,r.chat_partner):(n=r.chat_partner,r.self),{requestid:i,appid:a,broadcaster:n,viewer:o}},e.prototype.render=function(){return R.createElement(B,{requestid:this.state.requestid,appid:this.state.appid,broadcaster:this.state.broadcaster,viewer:this.state.viewer})},e}(V.b),ze=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bMounted=!1,t.state={bHaveVoteData:!1,bLocalVoteDown:!1,bLocalVoteUp:!1,nCommentCount:parseInt(t.GetArgument("num_comments_public"))},t}return Object(l.d)(e,n),e.prototype.componentWillUnmount=function(){this.m_bMounted=!1},e.prototype.componentDidMount=function(){var n=this;this.m_bMounted=!0;var e=G.f.CMInterface;if(e){var t=this.GetArgument("fileid"),o=p.b.Init(u.a,8509);o.Body().add_published_file_ids().set_published_file_id(t),e.SendMsgAndAwaitResponse(o,u.b).then(function(e){if(1==e.Body().eresult()&&1==e.Body().user_item_vote_details().length){var t=e.Body().user_item_vote_details()[0].vote();n.m_bMounted&&n.setState({bHaveVoteData:!0,bLocalVoteUp:1==t,bLocalVoteDown:2==t})}})}},e.prototype.VoteItem=function(t,e){var n=this,o=G.f.CMInterface;if(o){var i=p.b.Init(u.c,8507);i.Body().set_published_file_id(e),i.Body().set_vote_up(t),o.SendMsgAndAwaitResponse(i,u.d).then(function(e){1==e.Body().eresult()&&n.m_bMounted&&n.setState({bLocalVoteUp:t,bLocalVoteDown:!t})})}},e.prototype.render=function(){var e=this,t=this.GetArgument("fileid"),n=this.GetArgument("url"),o=this.GetArgument("title"),i=this.GetArgument("description"),r=this.GetArgument("preview_url"),a=parseInt(this.GetArgument("file_type")),s=["SteamPublishedFile"];switch(a){case 4:s.push("video");break;case 3:case 5:s.push("image")}if(G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var c=n;o&&(c=Object(L.c)("#bbcode_disable_embed_inlining_steam_workshop",o));var l=R.createElement(j.z,null);switch(a){case 4:l=R.createElement(j.kb,null);break;case 3:case 5:l=R.createElement(j.A,null)}return R.createElement(Ce,{href:n,copyText:[c,n]},l,c)}var p,u=parseInt(this.GetArgument("num_comments_public")),m=parseInt(this.GetArgument("votes_up"));return this.state.bLocalVoteUp&&m++,(o||i)&&(p=R.createElement(C.b,{text:[o,i,n]},R.createElement("div",{className:"ChatLargeImageContainer_Description"},o&&R.createElement(k.b,{className:"ChatMessageOpenGraph_Title",href:n},o),i&&R.createElement("div",{className:"ChatMessageOpenGraph_Description"},i)))),R.createElement("div",{className:s.join(" ")},r&&0<r.length&&R.createElement(k.b,{className:"ChatLargeImageContainer",href:n},R.createElement(we,{context:this.props.context,className:"ChatLargeImageContainer_Image",src:r,onContextMenu:function(e){Object(k.d)(e,n)}})),p,R.createElement(k.b,{className:"SteamPublishedFile_Logo",href:n}),this.state.bHaveVoteData&&R.createElement("div",null,R.createElement("div",{className:"workshopItemControls"},R.createElement("div",{className:"workshopItemControlCtn"},0<=m&&R.createElement("span",{className:"upvoteCount"},m),0<=u&&R.createElement("span",{className:"commentCount"},u),R.createElement("span",{className:this.state.bLocalVoteUp?"general_btn voteUp toggled":"general_btn voteUp",onClick:function(){e.VoteItem(!0,t)}},Object(L.c)("#bbcode_community_publishedfile_vote_up")),R.createElement("span",{className:this.state.bLocalVoteDown?"general_btn voteDown toggled":"general_btn voteDown",onClick:function(){e.VoteItem(!1,t)}})))))},e=Object(l.c)([o.a],e)}(V.b),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.OnCreateOfferClick=function(e){var t="NewTradeOffer"+parseInt(this.GetArgument("partner"));d.n(e).open(this.GetArgument("url"),t,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.render=function(){var e=this.GetArgument("url"),t=parseInt(this.GetArgument("partner"));if(t&&t==this.props.context.unAccountIDSender){var n=this.props.context.chat.GetMember(t);if(n){var o=Object(L.c)("#TradeOfferLink_Label");return R.createElement(C.b,{style:"block",text:[o,e]},R.createElement("div",{className:"ChatMessageInvite NoBGSplitInvite TradeOfferInvite"},R.createElement("div",{className:"leftInviteContainer"},R.createElement(D.d,{friend:n,context:{chat:this.props.context.chat},bLarge:!0})),R.createElement("div",{className:"rightInviteContainer rightInvite_Horizontal"},R.createElement("div",{className:"rightInviteContainerContent"},R.createElement("div",{className:"inviteLabel TradeOfferInvite_Title"},Object(L.e)("#TradeOfferLink_SharedTradeLink",n.display_name)),R.createElement(M,{url:e,strLabel:o})),R.createElement("button",{className:"inviteButton inviteButtonJoinChat",type:"button",onClick:this.OnCreateOfferClick},Object(L.e)("#TradeOfferLink_SendUserOffer"))),R.createElement("div",{style:{clear:"left"}})))}}return R.createElement(k.b,{href:e},e)},Object(l.c)([_.a],t.prototype,"OnCreateOfferClick",null),t}(V.b),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.ViewOfferClick=function(e){var t=this.GetArgument("id"),n=f.a.COMMUNITY_BASE_URL+"tradeoffer/"+t+"/",o="ViewTradeOffer"+t;d.n(e).open(n,o,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.ViewMyOffersClick=function(e){var t=this.props.context.chat.self.steamid64,n=this.GetArgument("id"),o=f.a.COMMUNITY_BASE_URL+"profiles/"+t+"/tradeoffers/sent/#tradeofferid_"+n;Object(k.e)(e,o)},t.prototype.render=function(){var e=this.GetArgument("id"),t=parseInt(this.GetArgument("sender"));if(!e&&this.GetArgument("url"))return R.createElement(qe,Object(l.a)({},this.props));var n=this.props.context.chat,o=n.self.accountid==t,i=R.createElement("span",{className:"inviteeNameLabel"},n.chat_partner.display_name);return R.createElement("div",{className:"ChatMessageInvite TradeOfferInvite"},R.createElement("div",{className:"leftInviteContainer"},R.createElement(D.d,{friend:o?n.self:n.chat_partner,context:{chat:n},bLarge:!0}),R.createElement(j.hb,null)),R.createElement("div",{className:"rightInviteContainer"+(o?" rightInvite_Horizontal":"")},R.createElement("div",{className:"rightInviteContainerContent"},R.createElement(C.b,null,R.createElement("div",{className:"inviteLabel TradeOfferInvite_Title"},Object(L.e)(o?"#TradeOffer_YouSentFriend":"#TradeOffer_FriendSentYou",i)),0<R.Children.count(this.props.children)&&R.createElement("div",{className:"TradeOffer_NoteFromFriendCtn"},R.createElement("div",{className:"TradeOffer_NoteFromFriend_QuoteArrow"}),R.createElement("div",{className:"inviteLabel TradeOffer_NoteFromFriend"},this.props.children)))),R.createElement("button",{className:"DialogButton Primary",type:"button",onClick:o?this.ViewMyOffersClick:this.ViewOfferClick},Object(L.e)("#TradeOffer_ViewTradeOffer"))),R.createElement("div",{style:{clear:"left"}}))},Object(l.c)([_.a],t.prototype,"ViewOfferClick",null),Object(l.c)([_.a],t.prototype,"ViewMyOffersClick",null),t}(V.b),Ye=function(n){function e(e){var t=n.call(this,e)||this;return t.state={broadcaster:void 0},t}return Object(l.d)(e,n),e.getDerivedStateFromProps=function(e,t){var n=new J.a(e.args.broadcaster);return{broadcaster:G.f.FriendStore.GetPlayer(n.GetAccountID())}},e.prototype.render=function(){return R.createElement(F,{broadcaster:this.state.broadcaster})},e}(V.b),Je=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bMounted=!1,t.state={bLoading:!0,bStillLoading:!1,bLoadFail:!1,bLoadSuccess:!1,description:null},t}return Object(l.d)(e,n),e.prototype.CopyToClipboard=function(){var e=this.GetArgument("url");e&&0!=e.length&&d.j(e)},e.prototype.componentWillUnmount=function(){this.m_bMounted=!1},e.prototype.componentDidMount=function(){var t=this;this.m_bMounted=!0;var e=G.f.CMInterface;if(e){var n=parseInt(this.GetArgument("appid")),o=this.GetArgument("classid"),i=this.GetArgument("instanceid"),r=p.b.Init(m.a);r.Body().set_language(f.a.LANGUAGE),r.Body().set_appid(n);var a=r.Body().add_classes();a.set_classid(o),a.set_instanceid(i),m.c.GetAssetClassInfo(e.GetServiceTransport(),r).then(function(e){t.m_bMounted&&(1==e.GetEResult()?t.setState({bLoading:!1,bLoadFail:!1,bLoadSuccess:!0,description:e.Body().descriptions()[0]}):t.setState({bLoading:!1,bLoadFail:!0,bLoadSuccess:!1}))})}s.findDOMNode(this).ownerDocument.defaultView.setTimeout(function(){t.m_bMounted&&t.setState(function(e){return e.bLoading?{bStillLoading:!0}:null})},500)},e.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeEconItem "+this.GetArgument("url"))},e.prototype.render=function(){var e=this.GetArgument("image"),t=this.GetArgument("url"),n=parseInt(this.GetArgument("appid")),o=this.GetArgument("contextid"),i=this.GetArgument("assetid"),r=this.GetArgument("market_hash_name"),a=parseInt(this.GetArgument("owner")),s=G.f.AppInfoStore.GetAppInfo(n);if(a&&t){var c=this.props.context.chat.GetMember(a),l=c?c.display_name:this.GetArgument("persona"),p=Y.b(t),u=f.a.COMMUNITY_BASE_URL+"economy/image/"+e+"/512x512",m={color:""},d=f.a.COMMUNITY_BASE_URL+"market/listings/"+n+"/"+r,h=f.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+a+"&for_items[]="+n+"_"+o+"_"+i;return this.state.bLoadSuccess&&(this.state.description.name_color()&&(m.color="#"+this.state.description.name_color()),this.state.description.icon_url_large()?u=f.a.COMMUNITY_BASE_URL+"economy/image/"+this.state.description.icon_url_large()+"/512x512":this.state.description.icon_url()&&(u=f.a.COMMUNITY_BASE_URL+"economy/image/"+this.state.description.icon_url()+"/512x512")),R.createElement(C.b,{text:t},R.createElement("div",{className:"ChatMessageOpenGraph"},R.createElement("div",{className:"OpenGraphContent ClientFetchesData"},R.createElement("div",{className:"OpenGraphImgBackground"},R.createElement("img",{className:"ChatMessageOpenGraph_Image",src:u,onLoad:this.OnImageLoaded})),R.createElement(k.b,{className:"OpenGraphImgContainer",href:t},R.createElement(we,{context:this.props.context,className:"ChatMessageOpenGraph_Image",src:u,onContextMenu:function(e){Object(k.c)(e,t)}})),R.createElement("div",{className:"ChatMessageOpenGraph_Body"},this.state.bStillLoading&&R.createElement(A.a,{size:"medium",position:"center"}),this.state.bLoadSuccess&&R.createElement(C.b,{text:[Object(L.c)("#bbcode_econ_ItemTitle",l,this.state.description.name()),t]},R.createElement("div",null,R.createElement(k.b,{className:"ChatMessageOpenGraph_Title",href:t,style:m},Object(L.c)("#bbcode_econ_ItemTitle",l,this.state.description.name())),R.createElement("div",{className:"ChatMessageOpenGraph_Description"},R.createElement("div",{className:"EconItemOpenGraph_GameInfo"},R.createElement("img",{src:s.icon_url,onLoad:this.OnImageLoaded}),R.createElement("div",null,R.createElement("div",null,s.name),R.createElement("div",null,this.state.description.type())))),R.createElement("div",{style:{marginTop:"1em"}},this.state.description.tradable()&&G.f.CMInterface&&a!=G.f.CMInterface.steamid.GetAccountID()&&R.createElement(k.b,{className:"general_btn inline",href:h},Object(L.c)("#bbcode_econ_TradeWithOwner",l)),this.state.description.marketable()&&R.createElement(k.b,{className:"general_btn inline",href:d},Object(L.c)("#bbcode_econ_ViewInMarket"))))),this.state.bLoadFail&&R.createElement("div",null,R.createElement(k.b,{className:"ChatMessageOpenGraph_Title",href:t},Object(L.c)("#bbcode_econ_UnknownItem")),R.createElement("div",{className:"ChatMessageOpenGraph_Description"},Object(L.c)("#bbcode_econ_LoadFail"))))),R.createElement("div",{className:"OpenGraphFooter"},R.createElement(k.b,{className:"OpenGraphMessageURL",href:t},R.createElement("span",{className:"OpenGraphMessageURLPosition"},R.createElement("span",{className:"OpenGraphMessageURL_short"},p),R.createElement("span",{className:"OpenGraphMessageURL_full"},t))),R.createElement("div",{className:"OpenGraphURLButton CopyToClipboard",onClick:this.CopyToClipboard},R.createElement(j.j,null)))))}return R.createElement(k.b,{href:t},t)},Object(l.c)([_.a],e.prototype,"CopyToClipboard",null),Object(l.c)([_.a],e.prototype,"OnImageLoaded",null),e=Object(l.c)([o.a],e)}(V.b),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this.props.children?this.props.args[""]:"";return R.createElement(C.b,{text:Object(L.c)("#bbcode_linkremoved")},R.createElement("span",{className:"filteredURL bb_removedlink",title:Object(L.c)("#Community_RemoveLink_Tooltip")},R.createElement(j.f,null),R.createElement("span",{className:"threatURLDesc"},Object(L.c)("#bbcode_linkremoved_desc")),R.createElement("span",{className:"threatURL"},e)))},t}(V.b),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this.GetArgument();if(e){if("here"==e&&(e="online"),"all"==e||"online"==e)return R.createElement("span",{className:"mention me"},R.createElement("span",{className:"MentionAtSymbol"},"@"),e);var t=parseInt(e),n=t&&this.props.context.chat.GetMember(t);if(n||(n=t&&G.f.FriendStore.GetPlayer(t)),n){var o=n.accountid==this.props.context.chat.self.accountid;return R.createElement(D.f,{friend:n,context:{chat:this.props.context.chat}},R.createElement("span",{className:"mention"+(o?" me":"")},R.createElement("span",{className:"MentionAtSymbol"},"@"),n.display_name))}}return R.createElement("span",null,"@"+e)},t=Object(l.c)([o.a],t)}(V.b),Xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var n="";return"string"==typeof this.props.children?n=this.props.children:R.Children.forEach(this.props.children,function(e){if("string"==typeof e&&(n+=e),"object"==typeof e&&e.props){var t=e.props["bbcode-text"];t&&(n+=t)}}),n?R.createElement(x.a,{emoticon:n,emoticonHoverStore:de.b,large:this.props.context.bUseLargeEmoticons}):null},t}(V.b),$e=function(n){function e(e){var t=n.call(this,e)||this;return t.m_storePreferences=G.f.SettingsStore.StorePreferences,t.state={SteamStoreItem:null,bStoreRequestFailed:!1,bPlayVideo:!1,nThumbnailHovered:-1},t}return Object(l.d)(e,n),e.prototype.ExtractGameData=function(e){var t=e.name,n=e.is_free,o=e.short_description,i=e.header_image,r=e.developers,a=e.screenshots,s=e.movies,c=e.release_date,l=e.price_overview,p=e.content_descriptors,u=e.steam_appid;return{name:t,is_free:n,description:Object(he.c)(o),header_image:i,developer:r&&r[0],screenshot:a&&a[0]&&a[0].path_thumbnail,screenshots:a&&a,movie:s&&s[0]&&s[0].webm&&s[0].webm[480]&&s[0].webm[480].replace("http://","https://"),thumbnail:s&&s[0]&&s[0].thumbnail,release_date:c&&c.date,url:f.a.STORE_BASE_URL+"app/"+u,price:l&&l.final_formatted,initial_price:l&&l.initial_formatted,discount:l&&l.discount_percent&&l.discount_percent,content_descriptor_ids:p&&p.ids}},e.prototype.OnFrameLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeSteamStore "+this.GetArgument("app"))},e.prototype.componentDidMount=function(){return Object(l.b)(this,void 0,void 0,function(){var t,n,o,i,r;return Object(l.e)(this,function(e){switch(e.label){case 0:return t=this.GetArgument("app"),"basic,price_overview,developers,screenshots,movies,release_date,content_descriptors",n=f.a.COUNTRY||"US",[4,a.a.get(f.a.STORE_BASE_URL+"api/appdetails?appids="+t+"&cc="+n+"&language="+f.a.LANGUAGE+"&filters=basic,price_overview,developers,screenshots,movies,release_date,content_descriptors&client="+f.a.IN_CLIENT)];case 1:return o=e.sent(),i=null,o&&o.data&&(r=this.GetArgument("app"),i=o.data[r]),i&&i.success?this.setState({SteamStoreItem:this.ExtractGameData(i.data),bStoreRequestFailed:!1},this.OnFrameLoaded):this.setState({bStoreRequestFailed:!0}),[2]}})})},e.prototype.OpenStoreLink=function(e){Object(k.e)(e,this.state.SteamStoreItem.url)},e.prototype.PlayVideoClicked=function(){this.setState({bPlayVideo:!this.state.bPlayVideo})},e.prototype.OnThumbnailOver=function(e){this.setState({nThumbnailHovered:e})},e.prototype.OnThumbnailLeave=function(){this.setState({nThumbnailHovered:-1})},e.prototype.CopyToClipboard=function(){var e=this.props.children;e&&0!=e.length&&d.j(e)},e.prototype.render=function(){var o=this;if(G.f.SettingsStore.FriendsSettings.bDisableEmbedInlining){var e=_e(this.props.children);return R.createElement(Ce,{href:e},R.createElement(j.z,null),e)}if(this.state.bStoreRequestFailed){var t=G.f.FriendStore.GetPlayer(this.props.context.unAccountIDSender).display_name,n=(e=_e(this.props.children),R.createElement("span",{className:ie.a.senderName},t)),i=R.createElement("span",{className:ie.a.URLSent},e),r=R.createElement(k.b,{className:ie.a.SteamURL,href:"https://store.steampowered.com/"},Object(L.c)("#bbcode_steam_store_embed_Failed_Steam_Store"));return R.createElement("div",{className:ie.a.ChatMessageSteamStore_Failed},R.createElement("span",null,Object(L.e)("#bbcode_steam_store_embed_Failed",n,r,i)))}var a=this.state.SteamStoreItem;if(!a)return R.createElement("div",{className:ie.a.ChatMessageSteamStore,style:{width:640,height:208}},R.createElement("div",{className:ie.a.ChatMessageSteamStore_Header,style:{height:70}},R.createElement("div",{className:ie.a.ChatMessageSteamStore_HeaderImage})),R.createElement(A.a,null));var s=a.name,c=a.price,l=a.description,p=a.header_image,u=a.developer,m=a.movie,d=a.thumbnail,h=a.release_date,f=a.screenshots,_=a.is_free,g=a.initial_price,b=a.discount,v=a.content_descriptor_ids,S=!1,y=this.m_storePreferences&&this.m_storePreferences.content_descriptor_preferences()&&this.m_storePreferences.content_descriptor_preferences().content_descriptors_to_exclude()&&this.m_storePreferences.content_descriptor_preferences().content_descriptors_to_exclude().map(function(e){return e.content_descriptorid()});v&&y&&v.some(function(e){return-1!==y.indexOf(e)})&&(S=!0);var C=[],O=!0;if(S)O=!1;else for(var I=function(e){var t=e;if(m||(t=e+1),m&&2<t||!m&&3<t)return"break";var n="";f&&f[t]&&"undefined"!==f[t].path_thumbnail?n=""+f[t].path_thumbnail:O=!1,C.push(R.createElement("div",{key:"screenshot"+t,className:ie.a.ChatMessageSteamStore_Screenshot},R.createElement("img",{className:ie.a.ChatMessageSteamStore_ScreenshotThumbnail,src:n,onMouseEnter:function(){return o.OnThumbnailOver(t)}})))},E=0;E<f.length;E++){if("break"===I(E))break}var w=!("0"==b||null==b),M=this.state.nThumbnailHovered,D=this.state.bPlayVideo,T=R.createElement("div",{className:ie.a.ChatMessageSteamStore_FilteredDescription},Object(L.c)("#bbcode_steam_store_embed_Filtered")," ");return R.createElement("div",{className:Object(Z.a)(ie.a.ChatMessageSteamStore,S?ie.a.ChatMessagesSteamStore_FilteredContent:null)},R.createElement("div",{className:ie.a.ChatMessageSteamStore_Header},p&&R.createElement(R.Fragment,null,R.createElement("img",{className:ie.a.ChatMessageSteamStore_HeaderImage,src:p,onClick:S?null:this.OpenStoreLink}),S&&R.createElement("div",{className:ie.a.ChatMessageSteamStore_HeaderImageFiltered},Object(L.c)("#bbcode_steam_store_embed_Image_Filtered")),R.createElement("img",{className:Object(Z.a)(ie.a.ChatMessageSteamStore_HeaderImage,ie.a.Blurred),src:p})),R.createElement("div",{className:ie.a.ChatMessageSteamStore_GameDetails},R.createElement("div",{className:ie.a.ChatMessageSteamStore_GameNameAndIcon,onClick:S?null:this.OpenStoreLink},R.createElement("div",{className:ie.a.ChatMessageSteamStore_Name},s)),R.createElement("div",null,Object(L.c)("#bbcode_steam_store_embed_From"),R.createElement("span",{style:{color:"#fffc"}},""+u)),R.createElement("div",{style:{fontSize:12}},Object(L.c)("#bbcode_steam_store_embed_ReleaseDate"),R.createElement("span",{style:{color:"#fffc"}},""+h)))),R.createElement("div",{className:ie.a.ChatMessageSteamStore_Body},R.createElement("div",{className:ie.a.ChatMessageSteamStore_DetailsContainer},R.createElement("div",{className:ie.a.ChatMessageTweet_NameSection},R.createElement("div",{className:ie.a.ChatMessageSteamStore_Description},S?T:l," "),R.createElement("div",{className:ie.a.ChatMessageSteamStore_Footer},R.createElement("div",{className:ie.a.ChatMessageSteamStore_PricingContainer},R.createElement("div",{className:ie.a.ChatMessageSteamStore_Pricing},w&&R.createElement("div",{className:ie.a.ChatMessageSteamStore_Pricing_Discount},"-"+b+"%"),R.createElement("div",{className:ie.a.ChatMessageSteamStore_Pricing_FinalContainer},w&&g&&R.createElement("div",{className:ie.a.ChatMessageSteamStore_Pricing_Initial},""+g),c&&R.createElement("div",{className:Object(Z.a)(ie.a.ChatMessageSteamStore_Pricing_Final,w?ie.a.hasDiscount:null)},""+c)),_&&!c&&R.createElement("span",{className:ie.a.ChatMessageSteamStore_Free},Object(L.c)("#bbcode_steam_store_embed_FreeToPlay"))),R.createElement("div",{className:ie.a.ChatMessageSteamStore_ViewStore,onClick:this.OpenStoreLink},Object(L.c)(S?"#bbcode_steam_store_embed_ViewStorePage_Filtered":"#bbcode_steam_store_embed_ViewStorePage"))),R.createElement("div",{className:ie.a.ChatMessageSteamStore_CopyURL,onClick:this.CopyToClipboard,title:Object(L.c)("#Chat_Copy_Link_Clipboard")},R.createElement(j.j,null))))),!S&&R.createElement("div",{className:ie.a.ChatMessageSteamStore_MediaContainer},R.createElement("div",{className:ie.a.ChatMessageSteamStore_MainMedia},m&&R.createElement("div",{className:Object(Z.a)(ie.a.ChatMessageSteamStore_VideoThumbnail,D?ie.a.videoPlaying:null),onClick:this.PlayVideoClicked},M<0||null==M?R.createElement(R.Fragment,null,R.createElement("img",{src:d}),R.createElement("div",{className:ie.a.ChatMessageSteamStore_VideoPlayButton},R.createElement(j.O,null))):R.createElement("img",{src:""+f[M].path_thumbnail,style:{width:"100%"}})),!m&&f&&R.createElement("img",{src:""+f[Math.max(M,0)].path_thumbnail,style:{width:"100%"}})),O&&f&&R.createElement("div",{className:ie.a.ChatMessageSteamStore_ThumbnailsContainer,onMouseLeave:this.OnThumbnailLeave},C)),R.createElement("div",{className:Object(Z.a)(ie.a.ChatMessageSteamStore_VideoLargeContainer,D?ie.a.videoPlaying:null),onClick:this.PlayVideoClicked},D&&R.createElement("video",{className:ie.a.ChatMessageSteamStore_VideoLarge,src:m,controls:!0,autoPlay:!0}),R.createElement("div",{onClick:this.PlayVideoClicked},R.createElement(j.pb,null)))))},Object(l.c)([_.a],e.prototype,"ExtractGameData",null),Object(l.c)([_.a],e.prototype,"OnFrameLoaded",null),Object(l.c)([_.a],e.prototype,"OpenStoreLink",null),Object(l.c)([_.a],e.prototype,"PlayVideoClicked",null),Object(l.c)([_.a],e.prototype,"OnThumbnailOver",null),Object(l.c)([_.a],e.prototype,"OnThumbnailLeave",null),Object(l.c)([_.a],e.prototype,"CopyToClipboard",null),e=Object(l.c)([o.a],e)}(V.b),et=function(){function e(){}return e.prototype.GetObject=function(n){return Object(l.b)(this,void 0,void 0,function(){var t;return Object(l.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.GetString(n)];case 1:return[2,(t=e.sent())?JSON.parse(t):null];case 2:return e.sent(),[2,null];case 3:return[2]}})})},e.prototype.StoreObject=function(t,n){return Object(l.b)(this,void 0,void 0,function(){return Object(l.e)(this,function(e){return[2,this.StoreString(t,JSON.stringify(n))]})})},e}(),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.GetString=function(n){return SteamClient.Storage.GetString(n).then(function(e){if(e)return e;var t=localStorage.getItem(n);return t&&SteamClient.Storage.SetString(n,t),t})},t.prototype.StoreString=function(e,t){return SteamClient.Storage.SetString(e,t),Promise.resolve()},t.prototype.RemoveObject=function(e){return SteamClient.Storage.DeleteKey(e),Promise.resolve()},t}(et),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.GetString=function(e){return Promise.resolve(localStorage.getItem(e))},t.prototype.StoreString=function(e,t){return localStorage.setItem(e,t),Promise.resolve()},t.prototype.RemoveObject=function(e){return localStorage.removeItem(e),Promise.resolve()},t}(et),ot=n("2vnA"),it=n("JtU4"),rt=n("MB4Y"),at=n("Oefq"),st=function(){function e(){this.m_mapBrowserInfo=new Map,this.m_hOverlayChatBrowserInfoChanged=null}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_hOverlayChatBrowserInfoChanged=SteamClient.WebChat.RegisterOverlayChatBrowserInfoChanged(this.OnOverlayChatBrowserInfoChanged),this.m_CMInterface.RunWhenLoggedOn(function(){t.OnOverlayChatBrowserInfoChanged()})},e.prototype.HasOverlayInstance=function(e){return this.m_mapBrowserInfo.has(e)},e.prototype.OnOverlayChatBrowserInfoChanged=function(){var s=this;SteamClient.WebChat.GetOverlayChatBrowserInfo().then(function(e){for(var t=new Map(s.m_mapBrowserInfo),n=0,o=e;n<o.length;n++){var i=o[n];t.delete(i.unPID);var r={m_unPID:i.unPID,m_nBrowserID:i.nBrowserID,m_eBrowserType:i.eBrowserType},a=s.m_mapBrowserInfo.get(i.unPID);a&&(a.m_nBrowserID!=i.nBrowserID?(s.OverlayBrowserClosed(a),s.m_mapBrowserInfo.delete(i.unPID),a=void 0):G.f.UIStore.OnOverlayBrowserChanged(r,i.nScreenWidth,i.nScreenHeight)),a||(s.m_mapBrowserInfo.set(i.unPID,r),s.OverlayBrowserCreated(r,i.nScreenWidth,i.nScreenHeight))}t.forEach(function(e,t){s.m_mapBrowserInfo.delete(t),s.OverlayBrowserClosed(e)})}).catch(function(e){console.log("Failed to load overlay browser info:",e)})},e.prototype.OverlayBrowserCreated=function(e,t,n){G.f.UIStore.OnOverlayBrowserCreated(e,t,n),xt.ShowPopupFriendsList(e,!1,!1),G.f.SetDefaultPopupContext(e)},e.prototype.OverlayBrowserClosed=function(e){G.f.UIStore.SetSuppressBrowserContextBroadcasting(!0),G.f.GetDefaultBrowserContext().m_nBrowserID==e.m_nBrowserID&&G.f.GetDefaultBrowserContext().m_unPID==e.m_unPID&&G.f.SetDefaultPopupContext(G.a),console.log("Removing overlay browser window:",e.m_unPID,e.m_nBrowserID),it.d.ClosePopupsOwnedByBrowser(e),G.f.UIStore.SetSuppressBrowserContextBroadcasting(!1),G.f.UIStore.OnOverlayBrowserClosed(e)},Object(l.c)([_.a],e.prototype,"OnOverlayChatBrowserInfoChanged",null),e}(),ct=function(){function e(e){this.m_FriendStore=e}return e.prototype.DisplayNotificationFromFriend=function(t,e,n){return void 0===n&&(n={}),this.DisplayNotification(Object(l.a)({icon:t.persona.avatar_url_medium},e),function(e){return t.OpenChatDialog(e)},n)},e.prototype.BNotificationsPermitted=function(){return!G.f.ParentalStore.BIsFriendsBlocked()},e.prototype.RequestNotificationPermission=function(){return Promise.resolve(!0)},e}(),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.GetNotificationPermissionLevel=function(){if("undefined"==typeof Notification)return"unsupported";var e=Notification.permission;return"default"==e||"granted"==e||"denied"==e?e:"unsupported"},t.prototype.DisplayNotification=function(e,t,n){var o=this;void 0===n&&(n={});var i={body:e.body,icon:e.icon,tag:e.tag,silent:!0},r=new Notification(e.title,Object(l.a)({badge:f.a.COMMUNITY_CDN_URL+"public/shared/images/responsive/share_steam_logo.png"},i));return window.setTimeout(function(){r.close()},n.timeoutMS||5e3),r.addEventListener("click",function(){return o.OnNotificationClicked(r,t)}),new Promise(function(e,t){r.addEventListener("close",function(){e()})})},t.prototype.OnNotificationClicked=function(e,t){t(G.a),e.close()},t.prototype.BNotificationsPermitted=function(){return"granted"==this.GetNotificationPermissionLevel()},t.prototype.RequestNotificationPermission=function(){return"unsupported"==this.GetNotificationPermissionLevel()?Promise.resolve(!1):this.BNotificationsPermitted()?e.prototype.RequestNotificationPermission.call(this):new Promise(function(t,e){Notification.requestPermission(function(e){t("granted"==e)})})},t}(ct),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.DisplayNotification=function(e,t,n){if(void 0===n&&(n={}),e.tag){var o=JSON.stringify(e);e.tag.startsWith("groupmsg_")?SteamClient.ClientNotifications.DisplayClientNotification(N.g.k_EClientUINotificationGroupChatMessage,o,t):e.tag.startsWith("message_")?SteamClient.ClientNotifications.DisplayClientNotification(N.g.k_EClientUINotificationFriendChatMessage,o,t):G.f.SettingsStore.BClientHasFeatureOrOnWeb("PersonaNotifications")&&e.tag.startsWith("state_")&&SteamClient.ClientNotifications.DisplayClientNotification(N.g.k_EClientUINotificationFriendPersonaState,o,t)}return Promise.resolve()},t}(ct),ut=function(){function e(){this.m_mapPlaybackObjs=new Map,this.m_bVoiceActive=!1,this.m_hCloseContextTimeout=void 0,this.m_nLastObservedSampleRate=0,this.m_bSupportsAudioWorkletProcessors=!1,this.m_MediaStreamDestination=void 0,this.m_MediaStreamAudioElem=void 0}return Object.defineProperty(e.prototype,"context",{get:function(){return this.m_Context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supports_audio_worklets",{get:function(){return this.m_bSupportsAudioWorkletProcessors},enumerable:!0,configurable:!0}),e.prototype.GetActiveDestination=function(){if(this.CreateContextIfNeeded(),G.f.VoiceStore.IsAnyVoiceActive()&&"default"!=G.f.VoiceStore.GetSelectedOutputDevice()){if(null==this.m_MediaStreamDestination){var e=this.m_Context;this.m_MediaStreamDestination=e.createMediaStreamDestination(),this.m_MediaStreamAudioElem=document.createElement("audio"),this.m_MediaStreamAudioElem.srcObject=this.m_MediaStreamDestination.stream,this.m_MediaStreamAudioElem.play();try{this.m_MediaStreamAudioElem.setSinkId(G.f.VoiceStore.GetSelectedOutputDevice())}catch(e){console.log("(CAudioPlaybackManager) Failed setting audio output device to "+G.f.VoiceStore.GetSelectedOutputDevice()+": "+e)}}return this.m_MediaStreamDestination}return this.m_Context.destination},e.prototype.PlayAudioURL=function(e,t){return void 0===t&&(t=1),this.PlayAudioURLWithRepeats(e)},e.prototype.PlayAudioURLWithRepeats=function(e,t){void 0===t&&(t=0),console.log("(CAudioPlaybackManager) web audio playback requested: "+e),this.CreateContextIfNeeded();var n=new mt(this,e,t);return this.m_mapPlaybackObjs.set(n,!0),n},e.prototype.PlaybackFinished=function(e){this.m_mapPlaybackObjs.delete(e),this.CleanupContextIfUneeded(!1)},e.prototype.SetVoiceActive=function(e){this.m_bVoiceActive=!0,this.CreateContextIfNeeded(e)},e.prototype.SetVoiceNotActive=function(){this.m_bVoiceActive=!1,this.CleanupContextIfUneeded(!0)},e.prototype.GetLastObservedSampleRate=function(){return this.m_nLastObservedSampleRate},e.prototype.CreateContextIfNeeded=function(t){if(void 0===t&&(t=void 0),null==this.m_Context){console.log("(CAudioPlaybackManager) new context");var e=window,n=e.AudioContext||e.webkitAudioContext||!1;this.m_Context=new n,this.m_Context.onstatechange=this.OnAudioContextStateChange,console.log("(CAudioPlaybackManager) sample rate "+this.m_Context.sampleRate),this.m_nLastObservedSampleRate=this.m_Context.sampleRate;var o=this.m_Context;null!=o.audioWorklet?(this.m_bSupportsAudioWorkletProcessors=!0,o.audioWorklet.addModule(f.a.CHAT_BASE_URL+"public/javascript/webui/noisegate-audio-worklet.js?v=3").then(function(){console.log("(CAudioPlaybackManager) noisegate-audio-worklet.js worklet processor loaded"),t&&t()}).catch(function(e){console.log("(CAudioPlaybackManager) Failed to load noisegate-audio-worklet.js worklet processor"),t&&t()})):t&&t()}else t&&t()},e.prototype.DelayedCleanupContextIfInactive=function(){this.m_hCloseContextTimeout=void 0,0==this.m_mapPlaybackObjs.size&&0==this.m_bVoiceActive&&(console.log("(CAudioPlaybackManager) close context"),null!=this.m_MediaStreamAudioElem&&(this.m_MediaStreamAudioElem.pause(),this.m_MediaStreamAudioElem.src=void 0,this.m_MediaStreamAudioElem.srcObject=void 0),this.m_MediaStreamAudioElem=void 0,this.m_MediaStreamDestination=void 0,this.m_Context.close(),this.m_Context=void 0)},e.prototype.CleanupContextIfUneeded=function(e){if(0==this.m_mapPlaybackObjs.size&&0==this.m_bVoiceActive){if(null!=this.m_hCloseContextTimeout&&(clearTimeout(this.m_hCloseContextTimeout),this.m_hCloseContextTimeout=void 0),e)return void this.DelayedCleanupContextIfInactive();this.m_hCloseContextTimeout=SetBackgroundTimeout(this.DelayedCleanupContextIfInactive,1e4)}},e.prototype.OnAudioContextStateChange=function(){null!=this.m_Context&&console.log("(CAudioPlaybackManager) web audio context state changed: "+this.m_Context.state)},Object(l.c)([ot.x],e.prototype,"m_nLastObservedSampleRate",void 0),Object(l.c)([ot.x],e.prototype,"m_bSupportsAudioWorkletProcessors",void 0),Object(l.c)([_.a],e.prototype,"DelayedCleanupContextIfInactive",null),Object(l.c)([ot.g.bound],e.prototype,"OnAudioContextStateChange",null),e}(),mt=function(){function e(n,e,t){var o=this;this.m_Source=void 0,this.m_RepeatCount=0,this.m_TimesPlayed=0,this.m_Cancelled=!1,this.m_Manager=n,this.m_URL=e,this.m_RepeatCount=t,a.a.get(e,{responseType:"arraybuffer"}).then(function(e){n.context.decodeAudioData(e.data).then(function(e){if(o.m_Cancelled)o.m_Manager.PlaybackFinished(o);else{var t=n.context.createBufferSource();t.buffer=e,t.connect(n.GetActiveDestination()),t.start(0),t.onended=o.OnPlaybackEnded,o.m_Source=t}}).catch(function(e){o.OnFailure()})}).catch(function(e){o.OnFailure()})}return e.prototype.StopPlayback=function(){this.m_Cancelled=!0,this.m_Source&&(this.m_Source.stop(0),this.m_Source.disconnect(),this.m_Source=void 0,this.m_Manager.PlaybackFinished(this))},Object.defineProperty(e.prototype,"url",{get:function(){return this.m_URL},enumerable:!0,configurable:!0}),e.prototype.OnFailure=function(){var e=this;SetBackgroundTimeout(function(){return e.m_Manager.PlaybackFinished(e)},1)},e.prototype.OnPlaybackEnded=function(e){if(this.m_TimesPlayed+=1,!this.m_Cancelled&&this.m_TimesPlayed<=this.m_RepeatCount){var t=this.m_Manager.context.createBufferSource();return t.buffer=this.m_Source.buffer,t.connect(this.m_Manager.GetActiveDestination()),t.start(0),t.onended=this.OnPlaybackEnded,this.m_Source.disconnect(),this.m_Source=void 0,void(this.m_Source=t)}this.m_Source.disconnect(),this.m_Source=void 0,this.m_Manager.PlaybackFinished(this)},Object(l.c)([ot.g.bound],e.prototype,"OnFailure",null),Object(l.c)([ot.g.bound],e.prototype,"OnPlaybackEnded",null),e}(),dt=function(){function e(){this.m_rgActivityCallbacks=[]}return e.prototype.AddTrackedWindow=function(e){},e.prototype.BIsUserIdle=function(e){return this.GetUserIdleTime()>e},e.prototype.AddOnIdleCallback=function(e,t){this.RunOnIdleCallback(e,t)},e.prototype.AddOnNextActivityCallback=function(e){this.m_rgActivityCallbacks.push(e)},e.prototype.FireOnUserActivityCallbacks=function(){if(this.m_rgActivityCallbacks.length){for(var e=0,t=this.m_rgActivityCallbacks;e<t.length;e++){(0,t[e])()}this.m_rgActivityCallbacks=[]}},e.prototype.RunOnIdleCallback=function(e,t){this.GetUserIdleTime()>=t-1?e():SetBackgroundTimeout(this.RunOnIdleCallback.bind(this,e,t),1e3*(t-this.GetUserIdleTime()))},e}(),ht=function(t){function i(){var e=t.call(this)||this;return e.m_rgWindows=[],e.m_bEventTrackingActive=!1,e.OnUserAction(),e}return Object(l.d)(i,t),i.prototype.GetUserIdleTime=function(){return Math.floor((performance.now()-this.m_msUserLastAction)/1e3)},i.prototype.AddTrackedWindow=function(e){this.m_rgWindows.push(e),e.addEventListener("unload",this.RemoveTrackedWindow.bind(this,e)),this.m_bEventTrackingActive&&this.BindEventsForWindow(e)},i.prototype.RemoveTrackedWindow=function(e){this.m_bEventTrackingActive&&this.UnbindEventsForWindow(e),U.c(this.m_rgWindows,e)},i.prototype.OnUserAction=function(){this.m_msUserLastAction=performance.now(),this.FireOnUserActivityCallbacks(),this.UnbindEvents(),window.setTimeout(this.BindEvents.bind(this),1e4)},i.prototype.BindEvents=function(){if(!this.m_bEventTrackingActive){this.m_bEventTrackingActive=!0;for(var e=0,t=this.m_rgWindows;e<t.length;e++){var n=t[e];this.BindEventsForWindow(n)}}},i.prototype.UnbindEvents=function(){if(this.m_bEventTrackingActive){this.m_bEventTrackingActive=!1;for(var e=0,t=this.m_rgWindows;e<t.length;e++){var n=t[e];this.UnbindEventsForWindow(n)}}},i.prototype.UnbindEventsForWindow=function(e){for(var t=0,n=i.sm_rgUserEvents;t<n.length;t++){var o=n[t];e.removeEventListener(o,this.OnUserAction)}},i.prototype.BindEventsForWindow=function(e){for(var t=0,n=i.sm_rgUserEvents;t<n.length;t++){var o=n[t];e.addEventListener(o,this.OnUserAction)}},i.sm_rgUserEvents=["mousemove","mousedown","keypress","focus"],Object(l.c)([_.a],i.prototype,"OnUserAction",null),i}(dt),ft=function(t){function e(){var e=t.call(this)||this;return e.m_eActiveState=N.i.k_EComputerActiveStateActive,e.m_hRegisterForComputerActiveStateChange=null,e.m_hFireUserStillActive=void 0,e.m_hRegisterForComputerActiveStateChange=SteamClient.WebChat.RegisterForComputerActiveStateChange(e.OnComputerActiveStateChange),e}return Object(l.d)(e,t),e.prototype.OnComputerActiveStateChange=function(e,t){var n=(new Date).getTime()/1e3-t;this.m_eActiveState=e,this.m_msUserLastAction=Math.max(performance.now()-1e3*n,this.m_msUserLastAction),this.m_eActiveState==N.i.k_EComputerActiveStateActive&&(this.m_hFireUserStillActive&&(clearTimeout(this.m_hFireUserStillActive),this.m_hFireUserStillActive=void 0),this.UpdateStillActive())},e.prototype.UpdateStillActive=function(){this.m_hFireUserStillActive=void 0,this.m_eActiveState==N.i.k_EComputerActiveStateActive&&(this.OnUserAction(),this.m_hFireUserStillActive=SetBackgroundTimeout(this.UpdateStillActive,1e4))},Object(l.c)([_.a],e.prototype,"OnComputerActiveStateChange",null),Object(l.c)([_.a],e.prototype,"UpdateStillActive",null),e}(ht),_t=n("E7zH"),gt=n("XaMz"),bt=function(){function e(){this.m_bDropConsumed=!1,this.m_onDropCompleteCallbacks=new _t.a,this.m_vecClasses=[]}return e.prototype.BInDrag=function(){return!!this.m_data},e.prototype.StartDrag=function(e){var t,n;Object(gt.a)(!this.m_data,"second drag started, existing data discarded",this.m_data),this.m_data=e,this.m_bDropConsumed=!1,this.m_vecClasses.push("in_global_drag"),this.m_vecClasses.push("drag_type_"+e.type),void 0!==e.source&&this.m_vecClasses.push("drag_source_"+e.source);for(var o=0,i=Array.from(it.d.GetPopups());o<i.length;o++){var r=i[o];r.window&&r.window.document.body&&(t=r.window.document.body.classList).add.apply(t,this.m_vecClasses)}(n=window.document.body.classList).add.apply(n,this.m_vecClasses)},e.prototype.EndDrag=function(){var e,t;this.m_onDropCompleteCallbacks.Dispatch(this.m_bDropConsumed),this.m_onDropCompleteCallbacks.ClearAllCallbacks(),this.m_data=void 0,this.m_bDropConsumed=void 0;for(var n=0,o=Array.from(it.d.GetPopups());n<o.length;n++){var i=o[n];i.window&&i.window.document.body&&(e=i.window.document.body.classList).remove.apply(e,this.m_vecClasses)}(t=window.document.body.classList).remove.apply(t,this.m_vecClasses),this.m_vecClasses=[]},e.prototype.GetDragData=function(){return this.m_data},e.prototype.BWasDropConsumed=function(){return this.m_bDropConsumed},e.prototype.SetDropConsumed=function(){Object(gt.a)(this.BInDrag(),"Asked to set drop consumed but no active drag"),this.m_bDropConsumed=!0},e.prototype.RegisterForDropComplete=function(e){return this.m_onDropCompleteCallbacks.Register(e)},e}(),vt=n("8o0Y"),St=n("HAz9"),yt=n("OJz+"),Ct=n("RBVV"),Ot=function(){return function(e){var t=this;this.m_UsabilityHandler=Object(yt.c)(Ct.X.NotifyRequestClientUsabilityMetricsHandler,function(n){return Object(l.b)(t,void 0,void 0,function(){var t;return Object(l.e)(this,function(e){switch(e.label){case 0:return(t=p.b.Init(Ct.Q)).Body().set_metrics_run_id(n.Body().metrics_run_id()),t.Body().set_metrics_version(3),t.Body().set_client_build(f.a.BUILD_TIMESTAMP),t.Body().set_in_web(!f.a.IN_CLIENT),G.f.ready_to_render?[3,2]:[4,Object(ot.E)(function(){return G.f.ready_to_render})];case 1:e.sent(),e.label=2;case 2:return[4,G.f.SettingsStore.FillInChatUsabilityMetrics(t.Body())];case 3:return e.sent(),[4,G.f.FriendStore.FillInChatUsabilityMetrics(t.Body())];case 4:return e.sent(),[4,G.f.ChatStore.FillInChatUsabilityMetrics(t.Body())];case 5:return e.sent(),[4,G.f.UIStore.FillInChatUsabilityMetrics(t.Body())];case 6:return e.sent(),[4,G.f.VoiceStore.FillInChatUsabilityMetrics(t.Body())];case 7:return e.sent(),this.m_fnFillAppUsabilityMetrics?[4,this.m_fnFillAppUsabilityMetrics(t.Body())]:[3,9];case 8:e.sent(),e.label=9;case 9:return Ct.Y.NotifyClientUsabilityMetrics(G.f.CMInterface.GetServiceTransport(),t),[2,1]}})})}),this.m_fnFillAppUsabilityMetrics=e}}(),It=n("8JTq");function Et(e,t){var n=Object(d.n)(t);if(!n&&e){var o=s.findDOMNode(e);o&&o.ownerDocument&&(n=o.ownerDocument.defaultView)}return Object(gt.a)(n,"Couldn't find owning window to determine browser context"),wt(n)}function wt(e){var t=It.a;return e&&(Object(gt.a)(e.__FriendsUIBrowserContext,"FriendsUI Browser context missing from owner window"),e.__FriendsUIBrowserContext&&(t=e.__FriendsUIBrowserContext)),t}function Mt(e){var t=wt(e);return t&&t.m_unPID!=It.a.m_unPID&&t.m_nBrowserID!=It.a.m_nBrowserID?t:null}var Dt=n("ha6C"),Tt=n("FkUk"),Gt=n("eQUm"),Rt=n("kQil");n.d(t,"b",function(){return Lt}),n.d(t,"c",function(){return Bt}),n.d(t,"d",function(){return Ft}),n.d(t,"h",function(){return xt}),n.d(t,"g",function(){return Mt}),n.d(t,"f",function(){return wt}),n.d(t,"e",function(){return Et}),n.d(t,"a",function(){return It.a});var jt=function(i){function e(e,t,n){var o=i.call(this,"",{title:"",bIgnoreSavedDimensions:!0,dimensions:{width:1,height:1,left:e,top:t},eCreationFlags:it.c.Tooltip})||this;return o.m_fnOnRender=n,o}return Object(l.d)(e,i),e.prototype.OnClose=function(){},e.prototype.OnLoad=function(){},e.prototype.OnResize=function(){},e.prototype.Render=function(e,t){this.m_fnOnRender(e,t)},e}(it.a),Lt=function(n){function e(e){var t=n.call(this)||this;return t.m_window=e,t}return Object(l.d)(e,n),e.prototype.BringToFront=function(){null!=this.m_window.SteamClient&&null!=this.m_window.SteamClient.Window&&null!=this.m_window.SteamClient.Window.BringToFront?this.m_window.SteamClient.Window.BringToFront():this.m_window.focus()},e.prototype.FlashWindow=function(e){null!=this.m_window.SteamClient&&null!=this.m_window.SteamClient.Window&&(e&&null!=this.m_window.SteamClient.Window.FlashWindow?this.m_window.SteamClient.Window.FlashWindow():null!=this.m_window.SteamClient.Window.StopFlashWindow&&this.m_window.SteamClient.Window.StopFlashWindow())},e.prototype.Close=function(){this.m_window&&this.m_window.close()},Object.defineProperty(e.prototype,"title",{get:function(){return this.m_window.document.title},set:function(e){this.m_window.document.title=e},enumerable:!0,configurable:!0}),e.prototype.BIsClosed=function(){return this.m_window.closed},e.prototype.BIsVisible=function(){return"visible"==this.m_window.document.visibilityState},e.prototype.BIsFocused=function(){return this.m_window.document.hasFocus()},e.prototype.OnFocus=function(e){var t=this,n=function(){e()};return this.m_window.addEventListener("focus",n),{unregister:function(){t.m_window.removeEventListener("focus",n)}}},e.prototype.GetWindow=function(){return this.m_window},e}(G.c),At=function(n){function e(e){var t=n.call(this)||this;return t.m_popup=e,t}return Object(l.d)(e,n),Object.defineProperty(e.prototype,"container",{get:function(){return!this.m_container&&this.m_popup.window&&(this.m_container=new Lt(this.m_popup.window)),this.m_container},enumerable:!0,configurable:!0}),e.prototype.Show=function(e){G.f.ParentalStore.BIsFriendsBlocked()?console.log("Blocked popup due to parental controls"):this.m_popup.Show(e)},e.prototype.Close=function(){this.m_popup.Close()},e.prototype.GetWindowRestoreDetails=function(){return this.m_popup.GetWindowRestoreDetails()},e.prototype.IsMinimized=function(){return this.m_popup.IsMinimized()},e.prototype.GetBrowserContext=function(){return this.m_popup.browser_info},e.prototype.GetWindow=function(){return this.m_popup.window},e}(G.e),kt={nChatRoomListHeightPx:224,bChatRoomListCollapsed:!1,bDontShowVoiceAlert:!1,nFriendsListSingleWindowWidthPx:300,bFavoritesHintDismissed:!1,nChangeLogDismissed:0},Pt="UIDisplayPrefs",Nt=function(){function e(e,t){var n=this;this.m_FriendHoverStore=new rt.c,this.m_DragDropManager=new bt,this.m_OverlayStore=new st,this.m_UsabilityMetricsStore=new Ot(this.FillInChatUsabilityMetrics.bind(this)),this.m_mapFriendsListPopups=new Map,this.m_UIDisplayPrefs=kt,this.m_bUpdatedBuildAvailable=!1,this.m_nSecondsOutOfDate=0,this.m_strLoaderWindowRestoreDetails=void 0,this.m_bShowFriendsListOnLoadFromLoader=void 0,this.m_FriendsUIApp=e,this.m_bEmbeddedApp=t,this.IsEmbeddedApp()||("undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.RegisterForFriendPostMessage?(SteamClient.WebChat.RegisterForFriendPostMessage(this.HandlePostMessage),window.addEventListener("message",this.HandleWebLoaderPostMessage)):(Object(gt.a)(!f.a.IN_CLIENT,"Config.IN_CLIENT set but SteamClient globals not available"),window.addEventListener("message",this.HandlePostMessage)),Object(Dt.a)("Messaging.RegisterForMessages")&&(SteamClient.Messaging.RegisterForMessages("LibraryCommands",this.HandleLibraryCommandMessage),SteamClient.Messaging.RegisterForMessages("ContextMenus",this.HandleContextMenuMessage),SteamClient.Messaging.RegisterForMessages("PersonaState",this.HandlePersonaStateMessage)),this.InstrumentWindow(window,It.a),it.d.AddPopupCreatedCallback(function(e){n.InstrumentWindow(e.window,e.browser_info||It.a)}))}return e.prototype.IsEmbeddedApp=function(){return this.m_bEmbeddedApp},e.prototype.OverlayStore=function(){return this.m_OverlayStore},e.prototype.BNeedsUpdate=function(){return this.m_bUpdatedBuildAvailable},e.prototype.GetSecondsOutOfDate=function(){return this.m_nSecondsOutOfDate},e.prototype.InstrumentWindow=function(e,t){e.__FriendsUIBrowserContext=t,this.m_FriendsUIApp.IdleTracker.AddTrackedWindow(e)},e.prototype.HandlePostMessage=function(e){var t=e.data;if(t&&t.command){var n=this.m_FriendsUIApp.GetDefaultBrowserContext();void 0!==e.data.pid&&(n={m_unPID:e.data.pid,m_nBrowserID:e.data.browserid}),this.ExecuteCommand(n,e.data)}},e.prototype.HandleLibraryCommandMessage=function(e,t,n){var o=this.m_FriendsUIApp.GetDefaultBrowserContext(),i=JSON.parse(n);i.command=t,this.ExecuteCommand(o,i)},e.prototype.OnCloseFakeContextMenu=function(e){SteamClient.Messaging.PostMessage("ContextMenus","OnFriendContextMenuClosed",""),this.m_LibraryFriendContextMenu=void 0},e.prototype.HandleContextMenuMessage=function(e,t,n){var o=this;if("ShowFriendContextMenu"==t){var i=JSON.parse(n),r=new J.a(i.steamid);if(r.GetAccountID()==this.m_FriendsUIApp.FriendStore.self.steamid.GetAccountID())return void this.OnCloseFakeContextMenu(i.steamid);var a=new jt(i.x,i.y,function(e,t){var n=G.f.FriendStore.GetFriend(r.GetAccountID());o.m_LibraryFriendContextMenu=Object(vt.b)(Object(Tt.e)(o.m_FriendsUIApp.GetDefaultBrowserContext(),{chatContext:"friendslist"},n,e),t,i.x,i.y),o.m_LibraryFriendContextMenu.SetOnHideCallback(function(){o.OnCloseFakeContextMenu(i.steamid),a.Close()}),SteamClient.Messaging.PostMessage("ContextMenus","OnFriendContextMenuShown","")});a.Show()}else"CloseFriendContextMenu"==t&&this.m_LibraryFriendContextMenu&&this.m_LibraryFriendContextMenu.Hide()},e.prototype.SendPersonaUpdateToLibrary=function(e){Object(Dt.a)("Messaging.PostMessage")&&SteamClient.Messaging.PostMessage("PersonaState","PersonaUpdate",JSON.stringify(e))},e.prototype.HandlePersonaStateMessage=function(e,t,n){"RequestPersonaState"==t&&this.SendPersonaUpdateToLibrary(G.f.FriendStore.self.persona.m_ePersonaState)},e.prototype.PerformFriendsUIUpdate=function(){var e=this.m_FriendsUIApp.UIStore.SerializePopupStateToObject(!0);window.parent.postMessage({message:"ChatReloadRequest",state:e},"https://steamloopback.host")},e.prototype.HandleWebLoaderPostMessage=function(e){null!=e.data.message&&("UpdatedBuildAvailable"==e.data.message?(console.log("There is an updated friendsui build available, we are "+(e.data.bVeryOutOfDate?"":"NOT ")+"very out of date. We are "+(e.data.bForce?"":"NOT ")+"forcing an update."),this.m_bUpdatedBuildAvailable=!0,void 0!==e.data.nSecondsOutOfDate&&(this.m_nSecondsOutOfDate=e.data.nSecondsOutOfDate),(7200<this.m_FriendsUIApp.IdleTracker.GetUserIdleTime()||void 0!==e.data.bForce&&1==e.data.bForce)&&this.PerformFriendsUIUpdate()):"ReloadSerializedChatState"==e.data.message&&void 0!==e.data.state?(console.log("Asked by loader to reload serialized chat state"),this.m_FriendsUIApp.UIStore.SetStateToRestoreFrom(e.data.state)):"LoaderWindowRestoreDetails"==e.data.message?(this.m_bShowFriendsListOnLoadFromLoader=e.data.bVisible,this.m_strLoaderWindowRestoreDetails=e.data.data):"SetPersonaState"==e.data.message&&this.SetUserPersonaStateWhenReady(e.data.persona_state))},e.prototype.SetUserPersonaStateWhenReady=function(e){this.m_FriendsUIApp.FriendStore.SetUserPersonaState(e)},e.prototype.ExecuteCommand=function(e,t){switch(t.command){case"CheckForUpdates":window.parent.postMessage({message:"CheckForAndForceUpdate"},"https://steamloopback.host");break;case"ShowPopupFriendsList":this.ShowPopupFriendsList(e,!1,!0,"1"===t.force_to_foreground);break;case"ShowFriendChatDialog":var n=new J.a(t.steamid),o=0!=t.btakefocus;n.BIsValid()?n.BIsIndividualAccount()?this.m_FriendsUIApp.UIStore.ShowFriendChatDialogWhenReady(e,n.GetAccountID(),!0,o):n.BIsClanAccount()&&this.m_FriendsUIApp.FriendStore.ClanStore.JoinClanChatRoom(e,n):this.ShowChatUnreadMessages(e);break;case"CloseChatDialog":if((n=new J.a(t.steamid)).BIsIndividualAccount()){var i=this.m_FriendsUIApp.ChatStore.GetFriendChat(n.GetAccountID(),!1);i&&this.m_FriendsUIApp.UIStore.CloseTabByID(i.unique_id)}else if(n.BIsClanAccount()){var r=this.m_FriendsUIApp.FriendStore.ClanStore.GetClan(n);if(r&&r.GetChatGroupIDIfLoaded())(a=this.m_FriendsUIApp.ChatStore.GetChatRoomGroup(r.GetChatGroupIDIfLoaded()))&&this.m_FriendsUIApp.UIStore.CloseTabByID(a.unique_id)}break;case"ShowChatRoomGroupDialog":var a,s=t.chat_group_id,c=t.chat_room_id;if((a=this.m_FriendsUIApp.ChatStore.GetChatRoomGroup(s))&&a.BIsCurrentUserAMember()&&!c)this.m_FriendsUIApp.UIStore.ShowAndOrActivateChatRoomGroupWhenReady(e,a,!0);else{var l=this.m_FriendsUIApp.ChatStore.InviteStore.GetDirectInviteInfo(s,c,this.m_FriendsUIApp.FriendStore.self.accountid);O({invite:l,inviter:null},e,window)}break;case"ShowChatRoomGroupInvite":if(this.m_FriendsUIApp.ready_to_render){var p=t.invite_code;l=this.m_FriendsUIApp.ChatStore.InviteStore.GetInviteFromCode(p);O({invite:l,inviter:null},e,window)}break;case"SetPersonaState":this.m_FriendsUIApp.FriendStore.SetUserPersonaState(t.persona_state);break;case"ShowWatchBroadcast":var u=new J.a(t.steamid);this.m_FriendsUIApp.UIStore.ShowOrActivateBroadcast(e,u.GetAccountID(),!0).ShowWatchPromptDialog()}},e.prototype.Init=function(e,t,n){var r=this,o=[],i=this.m_FriendsUIApp.SettingsStore.GetObjectFromLocalStorageWhenReady(Pt,kt).then(function(e){Object(ot.A)(function(){r.m_UIDisplayPrefs=e})});if(o.push(i),e.RunWhenLoggedOn(function(){it.d.SetCurrentLoggedInAccountID(e.steamid.GetAccountID())}),this.m_WebLogonManager=n,vt.c.GetBrowserInfoForPopup=Mt,t&&this.m_OverlayStore.Init(e),window.addEventListener("dragover",function(e){(e||event).preventDefault()},!1),window.addEventListener("dragenter",function(e){(e||event).preventDefault()},!1),window.addEventListener("drop",function(e){(e||event).preventDefault()},!1),f.a.IN_CLIENT&&void 0!==SteamClient.FriendSettings.GetEnabledFeatures){var a=SteamClient.FriendSettings.GetEnabledFeatures().then(function(e){for(var t=!1,n=0,o=e;n<o.length;n++){var i=o[n];if("LoaderWindowSynchronization"==i.feature){t=i.bEnabled;break}}return t?Object(ot.E)(function(){return void 0!==r.m_strLoaderWindowRestoreDetails}):Promise.resolve()});o.push(a)}return o},Object.defineProperty(e.prototype,"FriendHoverStore",{get:function(){return this.m_FriendHoverStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WebLogonManager",{get:function(){return this.m_WebLogonManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DragDropManager",{get:function(){return this.m_DragDropManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UIDisplayPrefs",{get:function(){return this.m_UIDisplayPrefs},enumerable:!0,configurable:!0}),e.prototype.SetUIDisplayPref=function(e,t){var n=this;this.m_UIDisplayPrefs[e]!=t&&(this.m_UIDisplayPrefs[e]=t,this.m_iTimeoutSaveUIDisplayPrefs&&window.clearTimeout(this.m_iTimeoutSaveUIDisplayPrefs),this.m_iTimeoutSaveUIDisplayPrefs=window.setTimeout(function(){n.m_FriendsUIApp&&n.m_FriendsUIApp.SettingsStore&&n.m_FriendsUIApp.SettingsStore.StoreObjectInLocalStorage(Pt,n.m_UIDisplayPrefs),n.m_iTimeoutSaveUIDisplayPrefs=void 0},1e3))},e.prototype.ShowPopupFriendsList=function(e,t,n,o){if(this.m_FriendsUIApp.ParentalStore.BIsFriendsBlocked())console.log("Blocked friends list popup due to parental controls");else{var i=this.m_mapFriendsListPopups.get(e.m_unPID);if(i)!t&&n&&i.Focus(o);else{i=new c.b(this.m_FriendsUIApp.FriendStore,this.m_FriendsUIApp.ChatStore,e,t),this.m_mapFriendsListPopups.set(e.m_unPID,i),i.Show(!t&&n,o);var r=new At(i),a=this.m_FriendsUIApp.UIStore.GetPerContextChatData(e);a.SetFriendsListWindow(r.container),this.m_FriendsUIApp.UIStore.SerializePopupState(),Object(Rt.c)(r.GetWindow()).SetUsePopups(a.BUsePopups())}}},e.prototype.OnFriendsListClosed=function(e){this.m_mapFriendsListPopups.delete(e.m_unPID),this.m_FriendsUIApp.UIStore.GetPerContextChatData(e).SetFriendsListWindow(void 0),this.m_FriendsUIApp.UIStore.SerializePopupState()},e.prototype.ToggleSingleWindowToggle=function(e){var t=wt(e);if(this.m_FriendsUIApp.UIStore.BIsFriendsListSingleWindow(t)){n=Math.min(xt.UIDisplayPrefs.nFriendsListSingleWindowWidthPx,e.screen.availWidth);e.SteamClient.Window.ResizeTo(n,e.innerHeight)}else{var n=Math.min(1280,e.screen.availWidth);e.SteamClient.Window.ResizeTo(n,e.innerHeight),xt.SetUIDisplayPref("nFriendsListSingleWindowWidthPx",e.innerWidth)}},e.prototype.FillInChatUsabilityMetrics=function(e){e.ui_state().set_friends_list_group_chats_height(this.UIDisplayPrefs.nChatRoomListHeightPx);var t=this.m_FriendsUIApp.UIStore.GetPerContextChatData(It.a),n=t.friends_list_window;n&&n instanceof Lt&&(e.ui_state().set_friends_list_width(n.GetWindow().outerWidth),e.ui_state().set_friends_list_height(n.GetWindow().outerHeight));for(var o=void 0,i=0,r=Array.from(t.popup_list);i<r.length;i++){var a=r[i];if((o=a).tab_set===t.default_tabset&&!t.IsFriendsListSingleWindow())break}o&&o.popup.GetWindow()&&(e.ui_state().set_friends_list_width(o.popup.GetWindow().outerWidth),e.ui_state().set_friends_list_height(o.popup.GetWindow().outerHeight))},e.prototype.ShowChatUnreadMessages=function(e){if(!this.m_FriendsUIApp.ParentalStore.BIsFriendsBlocked()){var t=this.m_FriendsUIApp.ChatStore.GetChatToActivateForOldestUnread(e);return t?(console.log("ShowChatUnreadMessages - showing chat "+t.unique_id),void this.m_FriendsUIApp.UIStore.ShowAndOrActivateChat(e,t,!0)):this.ShowPopupFriendsList(e,!1,!0)}console.log("Blocked friends list popup due to parental controls")},Object(l.c)([ot.x],e.prototype,"m_UIDisplayPrefs",void 0),Object(l.c)([ot.x],e.prototype,"m_bUpdatedBuildAvailable",void 0),Object(l.c)([ot.x],e.prototype,"m_nSecondsOutOfDate",void 0),Object(l.c)([ot.x],e.prototype,"m_strLoaderWindowRestoreDetails",void 0),Object(l.c)([ot.x],e.prototype,"m_bShowFriendsListOnLoadFromLoader",void 0),Object(l.c)([_.a],e.prototype,"HandlePostMessage",null),Object(l.c)([_.a],e.prototype,"HandleLibraryCommandMessage",null),Object(l.c)([_.a],e.prototype,"OnCloseFakeContextMenu",null),Object(l.c)([_.a],e.prototype,"HandleContextMenuMessage",null),Object(l.c)([_.a],e.prototype,"HandlePersonaStateMessage",null),Object(l.c)([_.a],e.prototype,"HandleWebLoaderPostMessage",null),Object(l.c)([G.g],e.prototype,"SetUserPersonaStateWhenReady",null),Object(l.c)([ot.i],e.prototype,"UIDisplayPrefs",null),Object(l.c)([ot.g],e.prototype,"SetUIDisplayPref",null),Object(l.c)([G.g],e.prototype,"ShowPopupFriendsList",null),Object(l.c)([G.g],e.prototype,"ShowChatUnreadMessages",null),e}(),Bt=function(r){function e(){var t=r.call(this,f.a.IN_CLIENT&&void 0!==SteamClient.Storage?new tt:new nt)||this;return t.m_AudioPlaybackManager=new ut,t.m_IdleTracker=f.a.IN_CLIENT?new ft:new ht,t.m_DesktopApp=xt=new Nt(t,!1),t.m_ChatRoomBBCodeParser=new V.d(Object.assign(fe(),{mention:Ze}),V.c),t.m_FriendChatBBCodeParser=new V.d(Object.assign(fe(),{invite:xe,gameinvite:Ve,lobbyinvite:Ue,tradeoffer:Ke,broadcastinvite:He,broadcastviewrequest:We}),V.c),t.m_NotificationBBCodeParser=new V.e({gameinvite:se,lobbyinvite:ce,invite:le,tradeoffer:pe,spoiler:ue}),f.a.IN_CLIENT&&Object(Dt.a)("RemotePlay.RegisterForRemoteClientStarted")&&SteamClient.RemotePlay.RegisterForRemoteClientStarted(function(e){return t.RemoteClientStarted(e)}),xt=t.m_DesktopApp,Object(gt.a)(!f.a.IN_MOBILE,"DesktopApp initialized in mobile context"),t}return Object(l.d)(e,r),e.prototype.Init=function(e,t,n){var o=t?new pt(this.m_FriendStore):new lt(this.m_FriendStore),i=this.m_DesktopApp.Init(e,t,n);r.prototype.InitInternal.call(this,e,o,i)},e.prototype.OnReadyToRender=function(){return Object(l.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c;return Object(l.e)(this,function(e){switch(e.label){case 0:return[4,this.UIStore.RestorePopupState()];case 1:e.sent(),(t=it.d.GetRestoreDetails("PopupFriendsListDimensions"))&&window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:t},"https://steamloopback.host"),n="oFriendsUIStartupParam";try{(o=window.sessionStorage.getItem(n))&&(i=JSON.parse(o))&&i.command&&this.m_DesktopApp.ExecuteCommand(It.a,i.command),window.sessionStorage.removeItem(n)}catch(e){}if(window.opener)for(r=[f.a.COMMUNITY_BASE_URL,f.a.STORE_BASE_URL,f.a.CHAT_BASE_URL],a=0,s=r;a<s.length;a++)c=s[a],window.opener.postMessage("FriendsUIReady",c.replace(/\/$/,""));return[2]}})})},Object.defineProperty(e.prototype,"AudioPlaybackManager",{get:function(){return this.m_AudioPlaybackManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IdleTracker",{get:function(){return this.m_IdleTracker},enumerable:!0,configurable:!0}),e.prototype.AddPopupManagerShutdownCallback=function(e){it.d.AddShutdownCallback(e)},e.prototype.CreateChatPopup=function(e,t,n,o,i,r){var a=new c.a(e,t,n,this.m_ChatStore,o,i,r),s=new At(a);return new at.a(s,a)},e.prototype.ShowPopupFriendsListAtStartup=function(e){var t=e;if(void 0!==xt.m_bShowFriendsListOnLoadFromLoader&&(t=xt.m_bShowFriendsListOnLoadFromLoader),t){var n=!0===xt.m_bShowFriendsListOnLoadFromLoader;G.f.GetDefaultBrowserContext()!=It.a&&(console.log("Blocked taking focus in root context during ShowPopupFriendsList, because other context is primary"),n=!1),G.f.ShowPopupFriendsList(It.a,!1,n)}},e.prototype.ShowPopupFriendsList=function(e,t,n){this.m_DesktopApp.ShowPopupFriendsList(e,t,n)},e.prototype.OnFriendsListClosed=function(e){this.m_DesktopApp.OnFriendsListClosed(e)},e.prototype.RemoteClientStarted=function(e){var t=new J.a(e).GetAccountID();if(0!=t&&t!=G.f.FriendStore.self.accountid){var n=G.f.FriendStore.GetPlayer(t);Object(Gt.a)(It.a,n,window,!1)}},e.prototype.ShowAlert=function(e,t,n){return Object(g.c)(window,e,t,n)},e.prototype.OpenURLInBrowser=function(e,t){f.a.IN_CLIENT?SteamClient.WebChat.OpenURLInClient(e,t.m_unPID,!1):Object(k.e)(window,e)},e.prototype.BIsValidBrowserContext=function(e){return r.prototype.BIsValidBrowserContext.call(this,e)||this.m_DesktopApp.OverlayStore().HasOverlayInstance(e.m_unPID)},e.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){if(!this.m_DesktopApp.UIDisplayPrefs.bDontShowVoiceAlert){var n=t.popup;Object(St.b)(n.GetWindow())}},e.prototype.SignOutOfFriends=function(e){this.m_DesktopApp.SendPersonaUpdateToLibrary(0);var t=G.f.UIStore.GetRootChatPerContextData().friends_list_window&&G.f.UIStore.GetRootChatPerContextData().friends_list_window.BIsVisible();window.parent.postMessage({message:"SignOutRequest",bShowLoaderWindow:t,browserContext:e},"https://steamloopback.host")},e.prototype.UpdatePersonaState=function(e){this.m_DesktopApp.SendPersonaUpdateToLibrary(e)},e}(G.d);function Ft(){return xt=new Nt(new Bt,!1)}var xt=void 0},ha6C:function(e,t,n){"use strict";function o(e){var t,n=e.split(".");return 2==n.length&&(t=n[0],"object"==typeof SteamClient&&t in SteamClient)&&n[1]in SteamClient[n[0]]}n.d(t,"a",function(){return o})},hx5d:function(e,t,n){"use strict";var m=n("mrSG"),r=n("q1tI"),o=n("2vnA"),i=n("okNM"),a=n("1VtQ"),s=n("vDqi"),d=n.n(s),p=n("nDwt"),c=n("E7zH"),h=n("oh5H"),u=n("1n9R"),f=n("MsQV"),_=n("4HGb"),g=n("Dss5"),l=n("H7XF"),b=n("hRO2"),v=n("Kqva"),S=n("s+DT"),y=function(){function e(e,t,n){void 0===n&&(n=!1),this.m_webApiAccessToken="",this.m_bJsonMode=!1,this.m_strWebAPIBaseURL=e,this.m_webApiAccessToken=t,this.m_bJsonMode=n,this.ConstructServiceTransport()}return e.prototype.WaitUntilLoggedOn=function(){return Promise.resolve()},e.prototype.GetServerRTime32=function(){return Number(new Date)},Object.defineProperty(e.prototype,"steamid",{get:function(){return new S.a},enumerable:!0,configurable:!0}),e.prototype.RTime32ToDate=function(e){return new Date(1e3*e)},e.prototype.GetServiceTransport=function(){return this.m_ServiceTransport},e.prototype.ConstructServiceTransport=function(){this.m_ServiceTransport={SendMsg:this.SendMsgAndAwaitResponse,SendNotification:this.SendNotification}},e.prototype.SendMsgAndAwaitResponse=function(r,a,s,c){return Object(m.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(m.e)(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.Send(r,a,c)];case 2:if(200!=(n=e.sent()).status||!n.data)throw new Error("Request Error");return t=_.b.Init(s,147),n.headers&&(n.headers["x-eresult"]&&t.Hdr().set_eresult(n.headers["x-eresult"]),n.headers["x-error_message"]&&t.Hdr().set_error_message(n.headers["x-error_message"])),this.m_bJsonMode?t.SetBodyJSON(n.data.response):(o=new v.b(n.data),i=new b.BinaryReader(o.GetPacket(),o.TellGet(),o.GetCountBytesRemaining()),s.deserializeBinaryFromReader(t.Body(),i)),[3,4];case 3:return e.sent(),t=this.CreateFailedMsgProtobuf(s,3,null),[3,4];case 4:return[2,t]}})})},e.prototype.SendNotification=function(e,t){return this.Send(e,t),!0},e.prototype.Send=function(e,t,n){var o=this.CreateWebAPIURL(e),i=t.SerializeBody(),r=l.fromByteArray(i),a={responseType:this.m_bJsonMode?"json":"arraybuffer",params:{}};if(this.m_webApiAccessToken&&(a.params.access_token=this.m_webApiAccessToken),n.bConstMethod)return this.m_bJsonMode?a.params=Object(m.a)(Object(m.a)({},a.params),{input_json:JSON.stringify(t.Body().toObject())}):a.params=Object(m.a)(Object(m.a)({},a.params),{input_protobuf_encoded:r}),d.a.get(o,a);var s=new FormData;return this.m_bJsonMode?s.append("input_json",JSON.stringify(t.Body().toObject())):s.append("input_protobuf_encoded",r),d.a.post(o,s,a)},e.prototype.CreateWebAPIURL=function(e){var t=e.match(/([^\.]+)\.(.+)#(\d+)/);return t&&4==t.length?this.m_strWebAPIBaseURL+"I"+t[1]+"Service/"+t[2]+"/v"+t[3]:null},e.prototype.CreateFailedMsgProtobuf=function(e,t,n){var o=_.b.Init(e);return o.Hdr().set_eresult(2),o.Hdr().set_transport_error(t),n&&o.Hdr().set_error_message(n),o},Object(m.c)([a.a],e.prototype,"SendMsgAndAwaitResponse",null),Object(m.c)([a.a],e.prototype,"SendNotification",null),Object(m.c)([a.a],e.prototype,"Send",null),e}(),C=function(){function e(){this.m_mapChats=new Map}return e.prototype.GetOrCreateChat=function(e,t){var n=this.m_mapChats.get(e)||this.m_mapChats.get(t);return n||(n=new O,this.m_mapChats.set(e||t,n)),n},Object(m.c)([o.x],e.prototype,"m_mapChats",void 0),e}(),O=function(){function e(){this.m_ulBroadcastChannelID="",this.m_ulChatID="",this.m_strFlairGroupID="",this.m_bAutoScroll=!0,this.m_ulBroadcastID="",this.m_ulBroadcastSteamID="",this.m_tsFirstRequest=null,this.m_nFromFirstRequestMS=0,this.m_nNextChatTS=0,this.m_cConsecutiveErrors=0,this.m_nNudgeFactorMS=0,this.m_nLastSleepMS=0,this.m_bReconnecting=!1,this.m_unInstanceID=Math.floor(4294967296*Math.random()),this.m_strUserSteamID="",this.m_regexUserEmoticons=null,this.m_chatScheduledFunc=null,this.m_webAPIInterface=null,this.m_mapMutedUsers={},this.m_mapChannelModeratorUsers=new Map,this.m_nRateLimitSeconds=0,this.m_bRateLimited=!1,this.m_rgChatMessages=[],this.m_webAPIInterface=new y(u.b.WEBAPI_BASE_URL,u.g.webapi_token)}return e.prototype.GetBroadcastSteamID=function(){return this.m_ulBroadcastSteamID},e.prototype.GetUserSteamID=function(){return this.m_strUserSteamID},e.prototype.StartForSteamID=function(e,t){this.m_webAPIInterface=new y(u.b.WEBAPI_BASE_URL,u.g.webapi_token),this.m_ulBroadcastSteamID=e,this.m_ulBroadcastID=t,this.RequestChatInfo()},e.prototype.StartForChannel=function(e){this.m_webAPIInterface=new y(u.b.WEBAPI_BASE_URL,u.g.webapi_token),this.m_ulBroadcastChannelID=e,this.m_strUserSteamID=u.g.steamid,this.JoinChannelChat()},e.prototype.Stop=function(){this.m_chatScheduledFunc&&this.m_chatScheduledFunc.Cancel()},e.prototype.SendMessage=function(l){return Object(m.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c=this;return Object(m.e)(this,function(e){switch(e.label){case 0:if(0==(t=l.trim()).length)return[2];e.label=1;case 1:return e.trys.push([1,6,,7]),i=o=n=void 0,this.m_webApiToken?((r=new FormData).append("chat_id",this.m_ulChatID),r.append("message",t),r.append("instance_id",this.m_unInstanceID.toString()),[4,d.a.post(u.b.WEBAPI_BASE_URL+"IBroadcastService/PostChatMessage/v0001?access_token="+this.m_webApiToken,r)]):[3,3];case 2:return o=e.sent(),i=o.data&&o.data.response,[3,5];case 3:return(a=_.b.Init(p.e)).SetBodyFields({chat_id:this.m_ulChatID,message:t,instance_id:this.m_unInstanceID.toString()}),[4,p.a.PostChatMessage(this.m_webAPIInterface.GetServiceTransport(),a)];case 4:n=e.sent(),i={result:n.GetEResult(),cooldown_time_seconds:n.Body().cooldown_time_seconds(),in_game:n.Body().in_game(),persona_name:n.Body().persona_name()},e.label=5;case 5:return i&&i.result&&1!=i.result?(s="",s=17==i.result?Object(h.c)("#BroadcastChat_YouMuted"):84==i.result?Object(h.c)("#BroadcastChat_Cooldown",i.cooldown_time_seconds):Object(h.c)("#BroadcastChat_FailedToSendMsg",t),this.m_rgChatMessages.push({type:f.a.Error,msg:s,client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:i.in_game,persona_name:i.persona_name,steamid:""}),[2]):(this.m_nRateLimitSeconds||(this.m_nRateLimitSeconds=i.cooldown_time_seconds),this.m_nRateLimitSeconds&&(this.m_bRateLimited=!0,setTimeout(function(){return c.m_bRateLimited=!1},1e3*this.m_nRateLimitSeconds)),[3,7]);case 6:return e.sent(),this.m_rgChatMessages.push({type:f.a.Error,msg:Object(h.c)("#BroadcastChat_FailedToSendMsg",t),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 7:return[2]}})})},e.prototype.RequestChatInfo=function(){return Object(m.b)(this,void 0,void 0,function(){var t,n,o;return Object(m.e)(this,function(e){switch(e.label){case 0:this.m_cConsecutiveErrors=0,this.m_bReconnecting=!1,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,d.a.get(u.b.CHAT_BASE_URL+"broadcast/getchatinfo",{params:{steamid:this.m_ulBroadcastSteamID,broadcastid:this.m_ulBroadcastID,sessionid:u.b.SESSIONID},withCredentials:!0})];case 2:return t=e.sent(),n=t.data,this.m_strChatURL=n.view_url_template,this.m_ulChatID=n.chat_id,this.m_strFlairGroupID=n.flair_group_ids&&n.flair_group_ids[0],n.blocked&&console.log("User is blocked from chat"),n.steamid&&(this.m_strUserSteamID=n.steamid),n.token&&(this.m_webApiToken=n.token),n.emoticons&&this.SetOwnedEmoticons(n.emoticons),this.m_rgChatMessages.push({type:f.a.Notification,msg:Object(h.c)("#BroadcastChat_DefaultMessage"),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),this.m_chatScheduledFunc=new c.b,this.m_chatScheduledFunc.Schedule(0,this.RequestLoop),[3,4];case 3:return o=e.sent(),console.error(o),console.log("Failed to get chat info!"),[3,4];case 4:return[2]}})})},e.prototype.JoinChannelChat=function(){return Object(m.b)(this,void 0,void 0,function(){var t,n,o;return Object(m.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),(t=_.b.Init(g.d)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID}),[4,g.e.JoinChat(this.m_webAPIInterface.GetServiceTransport(),t)];case 1:return(n=e.sent()).Body().chat_id&&n.Body().view_url_template?(this.m_strChatURL=n.Body().view_url_template(),this.m_ulChatID=n.Body().chat_id(),this.m_strFlairGroupID=n.Body().flair_group_ids()&&n.Body().flair_group_ids()[0],this.FetchChatModerators(),this.m_rgChatMessages=[],this.m_rgChatMessages.push({type:f.a.Notification,msg:Object(h.c)("#BroadcastChat_DefaultMessage"),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),this.m_chatScheduledFunc=new c.b,this.m_chatScheduledFunc.Schedule(0,this.RequestLoop),[3,3]):(console.log("Failed to join channel chat"),[2]);case 2:return o=e.sent(),console.error(o),console.log("Failed to join chat!"),[3,3];case 3:return[2]}})})},e.prototype.FetchChatModerators=function(){return Object(m.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(m.e)(this,function(e){switch(e.label){case 0:return(t=_.b.Init(g.c)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID}),[4,g.e.GetChatModerators(this.m_webAPIInterface.GetServiceTransport(),t)];case 1:return n=e.sent(),o=n.Body().results(),i=new Map,o.forEach(function(e){i.set(e.steamid(),!0)}),this.m_mapChannelModeratorUsers=i,[2]}})})},e.prototype.RequestLoop=function(){return Object(m.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c,l,p,u=this;return Object(m.e)(this,function(e){switch(e.label){case 0:t={},(n=this.m_strChatURL.replace("{0}",this.m_nNextChatTS.toString()))==this.m_strChatURL&&0<this.m_nNextChatTS&&(t.t=this.m_nNextChatTS),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,d.a.get(n,{params:t})];case 2:if(o=e.sent(),i=o.data,this.m_cConsecutiveErrors=0,r=i.messages.map(function(e){return Object(m.a)(Object(m.a)({},e),{type:f.a.Chat,client_ts:Number(new Date)})}).filter(function(e){return!u.IsUserMutedLocally(e.steamid)}),(p=this.m_rgChatMessages).push.apply(p,r),a=this.m_bAutoScroll?150:300,this.m_rgChatMessages.length>a&&this.m_rgChatMessages.splice(0,this.m_rgChatMessages.length-a),i.muted)for(c=0;c<i.muted.length;c++)s=i.muted[c].muted==this.m_strUserSteamID?Object(h.c)("#BroadcastChat_YouMuted",i.muted[c].persona_name):Object(h.c)("#BroadcastChat_UserMuted",i.muted[c].persona_name),this.m_rgChatMessages.push({type:f.a.Notification,msg:s,client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""});if(i.remove_msgs)for(c=0;c<i.remove_msgs.length;c++)this.RemoveUserMessagesLocal(i.remove_msgs[c].steamid);if(l=0,null==this.m_tsFirstRequest||0==this.m_nNextChatTS||i.initial_delay){if("undefined"===i.initial_delay)return console.log("Need initial_delay to know when to request first chat message"),[2];this.m_tsFirstRequest=performance.now()+i.initial_delay,this.m_nFromFirstRequestMS=0,this.m_nNextChatTS=i.next_request,l=i.initial_delay}else{if(i.next_request<this.m_nNextChatTS)return console.log("Next request in past"),[2];this.m_nFromFirstRequestMS+=i.next_request-this.m_nNextChatTS,this.m_nNextChatTS=i.next_request,l=this.m_tsFirstRequest+this.m_nFromFirstRequestMS-performance.now()+this.m_nNudgeFactorMS}return this.m_bReconnecting&&(this.m_bReconnecting=!1),(this.m_nLastSleepMS=l)<0&&(l=0),this.m_chatScheduledFunc.Schedule(l,this.RequestLoop),[3,4];case 3:if(e.sent(),console.log("Failed to get chat messages. Previous sleep set to: "+this.m_nLastSleepMS+" firstReq: "+this.m_tsFirstRequest+" firstFromRequest: "+this.m_nFromFirstRequestMS+" nudge: "+this.m_nNudgeFactorMS),this.m_cConsecutiveErrors++,this.m_nNudgeFactorMS+=10,4<=this.m_cConsecutiveErrors){if(null==this.m_tsFirstRequest)return this.m_rgChatMessages.push({type:f.a.Error,msg:Object(h.c)("#BroadcastChat_UnableToJoinChat"),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[2];this.m_cConsecutiveErrors=0,this.m_bReconnecting=!0,this.SyncChat()}return this.m_chatScheduledFunc.Schedule(500,this.RequestLoop),[3,4];case 4:return[2]}})})},e.prototype.GetUserEmoticons=function(){return this.m_regexUserEmoticons},e.prototype.SetOwnedEmoticons=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];2<=o.length&&":"==o[0]?t.push(o.substr(1,o.length-2)):t.push(o)}var i=":("+t.join("|")+"):";this.m_regexUserEmoticons=new RegExp(i,"g")},e.prototype.UpdateBroadcastChatModerator=function(o,i,r){return Object(m.b)(this,void 0,void 0,function(){var t,n;return Object(m.e)(this,function(e){switch(e.label){case 0:if(!this.m_ulBroadcastChannelID)return[3,6];e.label=1;case 1:return e.trys.push([1,4,,5]),(t=_.b.Init(g.b)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID,moderator_steamid:o,undo:!i}),[4,g.e.AddChatModerator(this.m_webAPIInterface.GetServiceTransport(),t)];case 2:return e.sent(),this.m_rgChatMessages.push({type:f.a.Notification,msg:"Moderator '"+r+"' "+(i?"added.":"removed.")}),[4,this.FetchChatModerators()];case 3:return e.sent(),[3,5];case 4:return e.sent(),this.m_rgChatMessages.push({type:f.a.Error,msg:"Failed to "+(i?"assign":"remove")+" '"+r+"' as moderator!"}),[3,5];case 5:return[3,10];case 6:(n=new FormData).append("broadcaststeamid",this.m_ulBroadcastSteamID),n.append("moderatorsteamid",o),n.append("bAdd",i?"1":"0"),n.append("sessionid",u.b.SESSIONID),e.label=7;case 7:return e.trys.push([7,9,,10]),[4,d.a.post(u.b.CHAT_BASE_URL+"broadcast/ajaxupdatechannelmod",n)];case 8:return e.sent(),this.m_mapChannelModeratorUsers.set(o,i),this.m_rgChatMessages.push({type:f.a.Notification,msg:"Moderator '"+r+"' "+(i?"added.":"removed.")}),[3,10];case 9:return e.sent(),this.m_rgChatMessages.push({type:f.a.Error,msg:"Failed to "+(i?"assign":"remove")+" '"+r+"' as moderator!"}),[3,10];case 10:return[2]}})})},e.prototype.UpdateUserChatBan=function(r,a,s,c,l,p){return Object(m.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(m.e)(this,function(e){switch(e.label){case 0:return t=this.m_ulBroadcastSteamID,n=this.m_strUserSteamID,this.m_ulBroadcastChannelID?((o=_.b.Init(g.a)).SetBodyFields({broadcast_channel_id:this.m_ulBroadcastChannelID,chatter_steamid:r,duration:3600*s,permanent:c,undo:p}),[4,g.e.AddChatBan(this.m_webAPIInterface.GetServiceTransport(),o)]):[3,2];case 1:return e.sent(),[3,6];case 2:(i=new FormData).append("broadcaststeamid",t),i.append("issuersteamid",n),i.append("chattersteamid",r),i.append("bantype",a),i.append("duration",s.toString()),i.append("perm",c?"1":"0"),i.append("sessionid",u.b.SESSIONID),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,d.a.post(u.b.CHAT_BASE_URL+"broadcast/ajaxupdateusermute",i)];case 4:return e.sent(),0==a?delete this.m_mapMutedUsers[r]:this.m_mapMutedUsers[r]=l,[3,6];case 5:return e.sent(),console.log("Failed to update mute for "+l),[3,6];case 6:return[2]}})})},e.prototype.MuteUserForSession=function(i,r){return Object(m.b)(this,void 0,void 0,function(){var t,n,o;return Object(m.e)(this,function(e){switch(e.label){case 0:if(i==this.m_strUserSteamID)return[2];if(this.m_ulBroadcastSteamID==i)return[2];if(t=this.m_ulBroadcastSteamID==this.m_strUserSteamID,this.m_mapMutedUsers[i])return[3,7];this.m_mapMutedUsers[i]=r,e.label=1;case 1:return e.trys.push([1,6,,7]),this.m_webApiToken?((n=new FormData).append("chat_id",this.m_ulChatID),n.append("user_steamid",i),n.append("muted","1"),[4,d.a.post(u.b.WEBAPI_BASE_URL+"IBroadcastService/MuteBroadcastChatUser/v0001/?access_token="+this.m_webApiToken,n)]):[3,3];case 2:return e.sent(),[3,5];case 3:return(o=_.b.Init(p.d)).SetBodyFields({chat_id:this.m_ulChatID,user_steamid:i,muted:!0}),[4,p.a.MuteBroadcastChatUser(this.m_webAPIInterface.GetServiceTransport(),o)];case 4:e.sent(),e.label=5;case 5:return[3,7];case 6:return e.sent(),t&&(this.m_rgChatMessages.push({type:f.a.Error,msg:Object(h.c)("#BroadcastChat_UserMuteFailed",r),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),delete this.m_mapMutedUsers[i]),[3,7];case 7:return t||this.m_rgChatMessages.push({type:f.a.Notification,msg:Object(h.c)("#BroadcastChat_UserMutedLocal",r),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[2]}})})},e.prototype.UnmuteUserForSession=function(o,i){return Object(m.b)(this,void 0,void 0,function(){var t,n;return Object(m.e)(this,function(e){switch(e.label){case 0:if(o==this.m_strUserSteamID)return[2];if(this.m_mapMutedUsers[o]&&delete this.m_mapMutedUsers[o],!(this.m_ulBroadcastSteamID==this.m_strUserSteamID))return[3,8];e.label=1;case 1:return e.trys.push([1,6,,7]),this.m_webApiToken?((t=new FormData).append("chat_id",this.m_ulChatID),t.append("user_steamid",o),t.append("muted","0"),[4,d.a.post(u.b.WEBAPI_BASE_URL+"IBroadcastService/MuteBroadcastChatUser/v0001/?access_token="+this.m_webApiToken,t)]):[3,3];case 2:return e.sent(),[3,5];case 3:return(n=_.b.Init(p.d)).SetBodyFields({chat_id:this.m_ulChatID,user_steamid:o,muted:!1}),[4,p.a.MuteBroadcastChatUser(this.m_webAPIInterface.GetServiceTransport(),n)];case 4:e.sent(),e.label=5;case 5:return this.m_rgChatMessages.push({type:f.a.Notification,msg:Object(h.c)("#BroadcastChat_UserUnmutedLocal",i),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 6:return e.sent(),this.m_rgChatMessages.push({type:f.a.Error,msg:Object(h.c)("#BroadcastChat_UserUnmuteFailed",i),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 7:return[3,9];case 8:this.m_rgChatMessages.push({type:f.a.Notification,msg:Object(h.c)("#BroadcastChat_UserUnmutedLocal",i),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),e.label=9;case 9:return[2]}})})},e.prototype.RemoveUserMessagesLocal=function(t){this.m_rgChatMessages=this.m_rgChatMessages.filter(function(e){return e.steamid!==t})},e.prototype.RemoveUserMessagesServer=function(o,i){return Object(m.b)(this,void 0,void 0,function(){var t,n;return Object(m.e)(this,function(e){switch(e.label){case 0:if(o==this.m_strUserSteamID)return[2];e.label=1;case 1:return e.trys.push([1,6,,7]),this.m_webApiToken?((t=new FormData).append("chat_id",this.m_ulChatID),t.append("user_steamid",o),[4,d.a.post(u.b.WEBAPI_BASE_URL+"IBroadcastService/RemoveUserChatText/v0001/?access_token="+this.m_webApiToken,t)]):[3,3];case 2:return e.sent(),[3,5];case 3:return(n=_.b.Init(p.f)).SetBodyFields({chat_id:this.m_ulChatID,user_steamid:o}),[4,p.a.RemoveUserChatText(this.m_webAPIInterface.GetServiceTransport(),n)];case 4:e.sent(),e.label=5;case 5:return[3,7];case 6:return e.sent(),this.m_rgChatMessages.push({type:f.a.Error,msg:Object(h.c)("#BroadcastChat_RemoveMessagesFailed",i),client_ts:Number(new Date),instance_id:this.m_unInstanceID,in_game:!1,persona_name:"",steamid:""}),[3,7];case 7:return[2]}})})},e.prototype.UpdateChatMessageFlair=function(o){return Object(m.b)(this,void 0,void 0,function(){var t,n;return Object(m.e)(this,function(e){switch(e.label){case 0:return this.m_webApiToken?((t=new FormData).append("chat_id",this.m_ulChatID),t.append("flair","^"+this.m_strFlairGroupID+"^:"+o+":"),[4,d.a.post(u.b.WEBAPI_BASE_URL+"IBroadcastService/UpdateChatMessageFlair/v0001/?access_token="+this.m_webApiToken,t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return(n=_.b.Init(p.g)).SetBodyFields({chat_id:this.m_ulChatID,flair:"^"+this.m_strFlairGroupID+"^:"+o+":"}),[4,p.a.UpdateChatMessageFlair(this.m_webAPIInterface.GetServiceTransport(),n)];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.IsUserMutedLocally=function(e){return Boolean(this.m_mapMutedUsers[e])},e.prototype.IsUserChannelModerator=function(e){return this.m_mapChannelModeratorUsers.get(e)},e.prototype.IsUserBroadcaster=function(e){return e===this.m_ulBroadcastSteamID},e.prototype.SyncChat=function(){this.m_tsFirstRequest=null,this.m_nFromFirstRequestMS=0,this.m_nNextChatTS=0,this.m_rgChatMessages=[]},Object(m.c)([o.x],e.prototype,"m_mapChannelModeratorUsers",void 0),Object(m.c)([o.x],e.prototype,"m_nRateLimitSeconds",void 0),Object(m.c)([o.x],e.prototype,"m_bRateLimited",void 0),Object(m.c)([o.x],e.prototype,"m_rgChatMessages",void 0),Object(m.c)([a.a],e.prototype,"FetchChatModerators",null),Object(m.c)([a.a],e.prototype,"RequestLoop",null),Object(m.c)([a.a],e.prototype,"MuteUserForSession",null),e}(),I=new C,E=n("8o0Y"),w=n("EGkk"),M=n("dcQ8"),D=n.n(M),T=n("UDpV"),G=n.n(T),R=n("QxgC"),j=n("e2SU"),L=n("tY0L"),A=n("Jdiq"),k=n("syWt");n.d(t,"a",function(){return B});var P=new RegExp("ː([^ː]*)ː","g"),N=(new RegExp("(https?://[^ '\"<>]*)","gi"),new RegExp("^https?://(?:[^/?#]+?\\.)?(?:valvesoftware|steamcommunity|steampowered)\\.com(?:/?#|$)","i")),B=function(n){function e(e){var t=n.call(this,e)||this;return t.m_chat=null,t.messagesContainer=r.createRef(),t.textInput=r.createRef(),t.state={message:""},t}return Object(m.d)(e,n),e.prototype.componentDidMount=function(){this.StartChat()},e.prototype.componentDidUpdate=function(e){this.m_chat&&this.m_chat.m_bAutoScroll&&this.ScrollToBottom(),this.props.steamID===e.steamID&&this.props.broadcastID===e.broadcastID&&this.props.broadcastChannelID===e.broadcastChannelID||this.StartChat()},e.prototype.componentWillUnmount=function(){this.m_chat&&this.m_chat.Stop()},e.prototype.StartChat=function(){this.m_chat&&this.m_chat.Stop(),this.m_chat=I.GetOrCreateChat(this.props.broadcastChannelID,this.props.steamID),this.props.broadcastChannelID?this.m_chat.StartForChannel(this.props.broadcastChannelID):this.props.steamID&&this.props.steamID&&this.props.broadcastID&&(this.m_chat.StartForSteamID(this.props.steamID,this.props.broadcastID),this.ScrollToBottom())},e.prototype.ChatBoxChange=function(e){this.setState({message:e.target.value})},e.prototype.ChatBoxKeypress=function(e){!!e.shiftKey||13!==e.charCode||(this.SendMessage(),e.preventDefault())},e.prototype.SendMessage=function(e){this.m_chat.m_bRateLimited||(this.m_chat.SendMessage(this.state.message),this.setState({message:""}),e&&e.preventDefault())},e.prototype.IsTrustedDomain=function(e){return!!e.match(N)},e.prototype.AddLinksEmoticons=function(e,t){t&&this.m_chat.GetUserEmoticons();for(var n=e.split(P),o=[],i=0;i<n.length;i+=1)i%2==1?o.push(r.createElement(L.a,{emoticonHoverStore:A.b,key:i,emoticon:n[i],large:!0})):o.push(n[i]);return o},e.prototype.HandleScroll=function(e){var t=e.currentTarget.scrollTop+e.currentTarget.clientHeight>=e.currentTarget.scrollHeight-6;this.m_chat&&(this.m_chat.m_bAutoScroll=t)},e.prototype.ScrollToBottom=function(){this.messagesContainer&&this.messagesContainer.current&&(this.messagesContainer.current.scrollTop=this.messagesContainer.current.scrollHeight)},e.prototype.OnContextMenu=function(e,t){var n=this;if(t.type!==f.a.Chat)return null;var o=[];return u.g&&u.g.is_support||this.m_chat.IsUserBroadcaster(this.m_chat.GetUserSteamID())||this.m_chat.IsUserChannelModerator(this.m_chat.GetUserSteamID())?o.push(r.createElement(w.d,{key:"remove",onSelected:function(){return n.m_chat.RemoveUserMessagesServer(t.steamid,t.persona_name)}},Object(h.c)("#BroadcastChat_RemoveMessages")),r.createElement(w.d,{key:"updatebanh",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,12,!1,t.persona_name)}},Object(h.c)("#BroadcastChat_half_Mute")),r.createElement(w.d,{key:"updateband",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,24,!1,t.persona_name)}},Object(h.c)("#BroadcastChat_day_Mute")),r.createElement(w.d,{key:"updatebanw",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,168,!1,t.persona_name)}},Object(h.c)("#BroadcastChat_week_Mute")),r.createElement(w.d,{key:"updatebanp",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,1,0,!0,t.persona_name)}},Object(h.c)("#BroadcastChat_perm_Mute")),r.createElement(w.d,{key:"removeban",onSelected:function(){return n.m_chat.UpdateUserChatBan(t.steamid,0,0,!1,t.persona_name,!0)}},Object(h.c)("#BroadcastChat_Unmute"))):this.m_chat.IsUserMutedLocally(t.steamid)?o.push(r.createElement(w.d,{key:"unmuteuser",onSelected:function(){return n.m_chat.UnmuteUserForSession(t.steamid,t.persona_name)}},Object(h.c)("#BroadcastChat_UnmuteLocal"))):o.push(r.createElement(w.d,{key:"muteuser",onSelected:function(){return n.m_chat.MuteUserForSession(t.steamid,t.persona_name)}},Object(h.c)("#BroadcastChat_MuteLocal"))),(u.g&&u.g.is_support||this.m_chat.IsUserBroadcaster(this.m_chat.GetUserSteamID()))&&o.push(r.createElement(w.d,{key:"addmod",onSelected:function(){return n.m_chat.UpdateBroadcastChatModerator(t.steamid,!0,t.persona_name)}},Object(h.c)("#BroadcastChat_Add_Moderator")),r.createElement(w.d,{key:"removemod",onSelected:function(){return n.m_chat.UpdateBroadcastChatModerator(t.steamid,!1,t.persona_name)}},Object(h.c)("#BroadcastChat_Remove_Moderator"))),o.length?Object(E.a)(r.createElement(w.c,null,o),e):null},e.prototype.OnEmoticonSelected=function(e,t){void 0===t&&(t=!1),this.setState({message:this.state.message+"ː"+e+"ː"}),this.textInput&&this.textInput.current&&this.textInput.current.focus()},e.prototype.OnFlairSelected=function(e){this.m_chat.UpdateChatMessageFlair(e),this.textInput&&this.textInput.current&&this.textInput.current.focus()},e.prototype.GetTypeClassName=function(e){return e.type===f.a.Notification?D.a.MessageNotification:e.type===f.a.Error?D.a.MessageError:D.a.MessageChat},e.prototype.render=function(){var n=this,e=this.m_chat?this.m_chat.m_rgChatMessages:[];return r.createElement("div",{className:D.a.ChatPanel,style:this.props.hidden?{display:"none"}:void 0},r.createElement(k.b,null),r.createElement("div",{className:D.a.ChatMessages+" "+G.a.minHeightZero,onScroll:this.HandleScroll,ref:this.messagesContainer},e.map(function(t,e){return r.createElement("div",{key:t.instance_id+"_"+t.client_ts+"_"+e,className:n.GetTypeClassName(t),onContextMenu:function(e){return n.OnContextMenu(e,t)}},t.flair&&r.createElement("span",{className:D.a.FlairContainer}," ",n.AddLinksEmoticons(t.flair,!1)),t.type===f.a.Chat&&r.createElement("span",null,r.createElement("a",{className:D.a.MessageName,href:u.b.COMMUNITY_BASE_URL+"profiles/"+t.steamid,target:"_blank",rel:"noopener noreferrer"},t.persona_name)),t.type===f.a.Chat&&n.m_chat.GetBroadcastSteamID()===t.steamid&&r.createElement("span",{className:D.a.MessageNotification+" "+D.a.MessageContents}," ("+Object(h.c)("#BroadcastChat_Broadcaster")+")"),t.type===f.a.Chat&&n.m_chat.m_mapChannelModeratorUsers.get(t.steamid)&&r.createElement("span",{className:D.a.MessageNotification+" "+D.a.MessageContents}," ("+Object(h.c)("#BroadcastChat_Moderator")+")"),r.createElement("span",{className:D.a.MessageContents+" "+(n.AddLinksEmoticons(t.msg,!1).filter(function(e){return e&&"string"==typeof e}).length?"":D.a.EmoticonsOnly)},t.type===f.a.Chat?" : ":"",t.type===f.a.Chat?n.AddLinksEmoticons(t.msg,!1):t.msg))})),r.createElement(k.a,null),u.g&&u.g.logged_in&&this.m_chat?r.createElement("div",null,r.createElement("div",{className:D.a.ChatEntry},r.createElement("form",{className:""+G.a.chatEntryControls},r.createElement("textarea",{className:G.a.chatTextarea,placeholder:Object(h.c)("#BroadcastChat_EnterResponse"),onKeyPress:this.ChatBoxKeypress,onChange:this.ChatBoxChange,value:this.state.message,ref:this.textInput}),this.m_chat.m_bRateLimited&&r.createElement(F,{nSeconds:this.m_chat.m_nRateLimitSeconds,bRateLimited:this.m_chat.m_bRateLimited}),r.createElement("button",{className:G.a.chatSubmitButton+" "+(this.state.message?"":G.a.disabled),title:Object(h.c)("#ChatEntryButton_Submit"),onClick:this.SendMessage},r.createElement(j.db,null))),r.createElement("div",{style:{height:"50px"},className:""+G.a.chatEntryActionsContainer},r.createElement("div",{className:G.a.chatEntryActionsGroup},r.createElement(R.a,{disabled:!1,OnEmoticonSelected:this.OnEmoticonSelected,rtLastAckedNewEmoticons:Number.MAX_VALUE,emoticonStore:this.props.emoticonStore,emoticonHoverStore:A.b}),this.m_chat.m_strFlairGroupID&&this.props.emoticonStore.flair_list&&this.props.emoticonStore.GetFlairListByGroupID(this.m_chat.m_strFlairGroupID).length?r.createElement(R.a,{disabled:!1,OnEmoticonSelected:this.OnFlairSelected,rtLastAckedNewEmoticons:Number.MAX_VALUE,emoticonStore:this.props.emoticonStore,emoticonHoverStore:A.b,strFlairGroupID:this.m_chat.m_strFlairGroupID,title:Object(h.c)("#ChatEntryButton_Flair"),buttonIcon:r.createElement(j.e,null)}):null)))):null)},Object(m.c)([o.x],e.prototype,"m_chat",void 0),Object(m.c)([a.a],e.prototype,"StartChat",null),Object(m.c)([a.a],e.prototype,"ChatBoxChange",null),Object(m.c)([a.a],e.prototype,"ChatBoxKeypress",null),Object(m.c)([a.a],e.prototype,"SendMessage",null),Object(m.c)([a.a],e.prototype,"HandleScroll",null),Object(m.c)([a.a],e.prototype,"OnContextMenu",null),Object(m.c)([a.a],e.prototype,"OnEmoticonSelected",null),Object(m.c)([a.a],e.prototype,"OnFlairSelected",null),e=Object(m.c)([i.a],e)}(r.Component),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(m.d)(t,e),t.prototype.render=function(){return r.createElement("div",{className:D.a.TimedProgressBarContainer},r.createElement("div",{className:D.a.wrapper},r.createElement("div",{className:D.a.spinner+" "+D.a.pie,style:{animationDuration:(this.props.nSeconds||0)+"s"}}),r.createElement("div",{className:D.a.filler+" "+D.a.pie,style:{animationDuration:(this.props.nSeconds||0)+"s"}}),r.createElement("div",{className:D.a.mask,style:{animationDuration:(this.props.nSeconds||0)+"s"}})))},t}(r.Component)},iIMO:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBRDg3RTRCNENCMzExRTNCRjc1OUVCNjQzQTc5MUY3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBRDg3RTRDNENCMzExRTNCRjc1OUVCNjQzQTc5MUY3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUFEODdFNDk0Q0IzMTFFM0JGNzU5RUI2NDNBNzkxRjciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUFEODdFNEE0Q0IzMTFFM0JGNzU5RUI2NDNBNzkxRjciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6imCnEAAAA6UlEQVR42szUPwtBURjHcVfKJGVT7DLYvQCTkoGSspq8CZPNzmyQIq+AskgsFgtegZRCSTi+cibudZ+rmzz1Gc7pnF+dv4ZSyuNmGW4Heh6BQjGM0Ps0ThoWxEI9q+ZGYFGHjRH+NNZqD7MoIYQVlkjhihvO6KCt25Z76EdVvdcRB5P+it2SSxYTzWqGqF1gX8krLTmUoTBsp0/+LdD75fUNICG52E0HSza9Qq+BGWwdhE7sAn2oOwhsSV5KBGtB2AZx6dNLYa8nXjDFHFfdd0LeydN7VBk5DNCFDwUkdbvxk//w/wPvAgwAuYpVKbKt5hQAAAAASUVORK5CYII="},ieu3:function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return I});var s=n("mrSG"),c=n("+M9t"),i=n("hReu"),l=n("LAqV"),p=n("YZlK"),a=n("/ZM5"),o=n("gtB6"),r=n("okNM"),u=n("q1tI"),m=n("1w3K"),d=n("e2SU"),h=n("/IDK"),f=n("oh5H"),_=n("1VtQ"),g=n("bbBM"),b=n("uWOQ"),v=n("tkkQ"),S=n("D3Kh"),y=n("s+DT"),C=function(n){function e(e){var t=n.call(this,e)||this;return t.state={ulSelectedGroupID:""},t}return Object(s.d)(e,n),e.prototype.BindDiv=function(e){this.m_elDiv=e},Object.defineProperty(e.prototype,"div",{get:function(){return this.m_elDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recommendedHeight",{get:function(){return this.m_elDiv.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximumHeight",{get:function(){return this.recommendedHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumHeight",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.OnGroupSelected=function(e){e==this.state.ulSelectedGroupID?this.setState({ulSelectedGroupID:""}):this.setState({ulSelectedGroupID:e})},e.prototype.render=function(){var t=this,e=this.props.chats.currentChatRoomGroups.sort(function(e,t){return t.time_last_activity-e.time_last_activity});return u.createElement("div",{className:"ChatRoomList CompactFriendsList",ref:this.BindDiv},0==e.length&&u.createElement("div",{className:"ChatRoomList_Empty"},Object(f.c)("#Chat_ChatRoomList_Empty"),u.createElement("br",null),u.createElement("br",null),Object(f.e)("#Chat_ChatRoomList_Empty_How",u.createElement(b.b,{href:v.a.COMMUNITY_BASE_URL+"my/groups/"},Object(f.c)("#Chat_ChatRoomList_Empty_HowLink")))),e.map(function(e){return u.createElement(O,{key:e.GetGroupID(),group:e,bExpanded:!1,onSelect:t.OnGroupSelected})}),u.createElement("div",{className:"disconnectBlocker"}))},Object(s.c)([_.a],e.prototype,"BindDiv",null),Object(s.c)([_.a],e.prototype,"OnGroupSelected",null),e=Object(s.c)([r.a],e)}(u.Component),O=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bAcceptDrag=!1,t.state={friendDrag:void 0,bStateExpanded:!1,bNonGroupHovered:!1,broadcastInfo:e.group.watching_broadcast_steamid&&S.a.StartInfo(e.group.watching_broadcast_steamid.ConvertTo64BitString())},t}return Object(s.d)(e,n),e.prototype.GetDragDropProps=function(e){void 0===e&&(e=!0);var t={};return e&&(t.onDragEnter=this.OnDragEnter,t.onDragOver=this.OnDragOver,t.onDragLeave=this.OnDragLeave,t.onDrop=this.OnDrop),t.draggable=!0,t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t},e.prototype.OnDragStart=function(e){var t=this.props.group;if(t.BIsClanChatRoom()){var n=l.f.FriendStore.ClanStore.GetClan(t.GetClanID());i.h.DragDropManager.StartDrag({type:"clan",clan:n})}else i.h.DragDropManager.StartDrag({type:"chatroomgroup",group:t})},e.prototype.componentWillUnmount=function(){this.state.broadcastInfo&&S.a.StopInfo(this.state.broadcastInfo)},e.prototype.OnDragEnd=function(e){i.h.DragDropManager.EndDrag()},e.prototype.OnDragEnter=function(e){var t=i.h.DragDropManager.GetDragData();if(t&&"friend"==t.type){var n=t.friend;this.m_bAcceptDrag=!0,e.preventDefault(),this.setState({friendDrag:n})}else this.m_bAcceptDrag=!1;e&&(e.preventDefault(),this.m_bAcceptDrag&&e.stopPropagation())},e.prototype.OnDragOver=function(e){this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())},e.prototype.OnDragLeave=function(e){Object(h.c)(e)&&(this.m_bAcceptDrag=!1,this.state.friendDrag&&this.setState({friendDrag:void 0}))},e.prototype.OnDrop=function(e){var t=i.h.DragDropManager.GetDragData();if(t&&"friend"==t.type){e.preventDefault(),e.stopPropagation();var n=this.props.group.memberList.member_list.slice(),o=t;if(null!=o.friend&&-1!=n.indexOf(o.friend))return;i.h.DragDropManager.SetDropConsumed(),this.props.group.InviteFriend(o.friend.accountid),this.setState({friendDrag:void 0})}},e.prototype.OnClick=function(e){l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(i.e)(this),this.props.group,!0)},e.prototype.OnToggleSelected=function(e){this.setState({bStateExpanded:!this.state.bStateExpanded}),e.stopPropagation()},e.prototype.OnOpenGroup=function(e){l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(i.e)(this),this.props.group,!0),e.stopPropagation()},e.prototype.OnContextMenu=function(e){Object(o.b)(e,this.props.group)},e.prototype.OnMouseEnterNonTitle=function(){this.setState({bNonGroupHovered:!0})},e.prototype.OnMouseLeaveNonTitle=function(){this.setState({bNonGroupHovered:!1})},e.prototype.render=function(){var e=this.props.group,t=this.state.bStateExpanded,n=null!==e.watching_broadcast_steamid,o=n&&new y.a(e.watching_broadcast_steamid),i=n&&this.state.broadcastInfo?this.state.broadcastInfo.m_strTitle||this.state.broadcastInfo.m_strAppTitle||Object(f.c)("#PersonaStateWatchingBroadcast_Player",l.f.FriendStore.GetPlayer(o.GetAccountID()).display_name):void 0,r=["ChatRoomListGroupItem"],a=this.props.group.hasVoiceRoom;return a||r.push("NoChannels"),t&&r.push("ShowAllChannels"),this.state.bNonGroupHovered&&r.push("NonGroupHovered"),n&&r.push("HasLinkedBroadcast"),u.createElement("div",Object(s.a)({className:r.join(" ")},this.GetDragDropProps(!0)),u.createElement("div",{className:"ChatRoomListGroupItem_header",onClick:this.OnClick,onContextMenu:this.OnContextMenu},u.createElement(p.a,{group:e,small:!0}),n&&u.createElement("div",{className:"steamTVSubtitle"},u.createElement(d.cb,null),": ",i," "),u.createElement("div",{className:"groupNameStatusContainer"},u.createElement("div",{className:"displayRow"},u.createElement("div",{className:"chatRoomName"},this.props.group.name),u.createElement("div",{className:"ContextMenuButton",onClick:this.OnContextMenu,onMouseEnter:this.OnMouseEnterNonTitle,onMouseLeave:this.OnMouseLeaveNonTitle},u.createElement(d.o,null))),!t&&a&&u.createElement(M,{group:e})),u.createElement(I,{group:e}),a&&u.createElement("div",{onMouseEnter:this.OnMouseEnterNonTitle,onMouseLeave:this.OnMouseLeaveNonTitle},u.createElement(E,{expanded:t,onClick:this.OnToggleSelected}))),a&&u.createElement("div",{className:"detailsView"},u.createElement("div",{className:"ChatRoomListGroupItemChatRooms"},u.createElement(w,{group:e,expanded:t}))))},Object(s.c)([_.a],e.prototype,"OnDragStart",null),Object(s.c)([_.a],e.prototype,"OnDragEnd",null),Object(s.c)([_.a],e.prototype,"OnDragEnter",null),Object(s.c)([_.a],e.prototype,"OnDragOver",null),Object(s.c)([_.a],e.prototype,"OnDragLeave",null),Object(s.c)([_.a],e.prototype,"OnDrop",null),Object(s.c)([_.a],e.prototype,"OnClick",null),Object(s.c)([_.a],e.prototype,"OnToggleSelected",null),Object(s.c)([_.a],e.prototype,"OnOpenGroup",null),Object(s.c)([_.a],e.prototype,"OnContextMenu",null),Object(s.c)([_.a],e.prototype,"OnMouseEnterNonTitle",null),Object(s.c)([_.a],e.prototype,"OnMouseLeaveNonTitle",null),e=Object(s.c)([r.a],e)}(u.Component),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.d)(t,e),t.prototype.render=function(){var e=this.props.group,t=this.props.chat;if(e&&!e.hasUnreadChatMessage||t&&!t.has_any_unread_messages)return null;var n=(this.props.className||"")+" ChatUnreadMessageIndicator";return(e&&e.HasUnreadMention||t&&t.has_unread_mention)&&(n+=" UnreadMention"),u.createElement("div",{className:n},u.createElement("div",{className:"chatUnreadCircle"},"@"))},t=Object(s.c)([r.a],t)}(u.Component);function E(e){var t=e.expanded?Object(f.c)("#Chat_ChatRoomListO_OpenGroupCollapse"):Object(f.c)("#Chat_ChatRoomListO_OpenGroupExpand");return u.createElement("div",{className:"openGroupButton",title:t,onClick:e.onClick},u.createElement(d.n,null))}var w=Object(r.a)(function(e){for(var t=[],n=0,o=e.group.voiceRoomList;n<o.length;n++){var i=o[n];(e.expanded||i.voice_active_contains_self)&&t.push(i)}var r=null;return t&&(r=t.map(function(e){return u.createElement(m.CSSTransition,{classNames:"heightcollapseandfade-anim",timeout:300,key:e.unique_id},u.createElement(a.d,{key:e.unique_id,chat:e,bRenameActive:!1,context:"ChatRoomList",onSelect:e.StartVoiceChat}))})),u.createElement(m.TransitionGroup,null,r)}),M=Object(r.a)(function(e){for(var t=[],n=0,o=e.group.voiceRoomList;n<o.length;n++){var i=o[n];if(!i.voice_active_contains_self){var r=i.voice_active_member_list;if(0!=r.member_count){var a=r.member_list.filter(function(e){return e.is_friend});0!=a.length&&((a=r.member_list.slice()).sort(c.b.FriendSortByFriendOrNotComparator),t.push({ulRoomID:i.unique_id,rgFriends:a}))}}}return t&&0!=t.length?u.createElement("div",{className:"membersInVoice"},u.createElement("div",{className:"voiceChannelIcon"},u.createElement(d.mb,null)),t.map(function(e){return u.createElement(D,{key:e.ulRoomID,friendsInRoom:e})})):null}),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.d)(t,e),t.prototype.render=function(){var e=this.props.friendsInRoom;return u.createElement("span",{className:"voiceChatGroup"},e.rgFriends.map(function(e){return u.createElement(g.f,{key:e.accountid,friend:e,context:{},disableContextMenu:!1},u.createElement("img",{className:"voiceFriendAvatar"+(e.is_friend?"":" isNotFriend"),src:e.persona.avatar_url,draggable:!1}))}))},t=Object(s.c)([r.a],t)}(u.Component)},kQil:function(e,t,n){"use strict";n.d(t,"f",function(){return _}),n.d(t,"e",function(){return g}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return C}),n.d(t,"c",function(){return I});var l=n("mrSG"),p=n("q1tI"),i=n("/IDK"),u=n("oh5H"),m=n("ljid"),r=n("vJVb"),o=n("1VtQ"),a=n("e2SU"),s=n("okNM"),c=n("2vnA"),d=n("QHER"),h=n("Au4U"),f=n.n(h);function _(n,o,i,r,a,s,c){return new Promise(function(e,t){n(p.createElement(v,{strTitle:o,strDescription:i,strOKButtonText:r,strCancelButtonText:a,onOK:e,onCancel:t,bDestructiveWarning:s,children:c}))})}function g(n,o,i,r){return new Promise(function(e,t){n(p.createElement(v,{bAlertDialog:!0,strTitle:o,strDescription:i,strOKButtonText:r,onOK:e,onCancel:e}))})}function b(t){var e,n={};t.onEscKeypress&&(n.tabIndex=0,n.onKeyDown=function(e){27==e.keyCode&&t.onEscKeypress()},n.onMouseDown=function(e){e.currentTarget!==e.target||t.bDisableBackgroundDismiss||t.onEscKeypress()},e=function(e){e&&(i.e(e,e.ownerDocument.activeElement)||e.focus())});var o=["ModalPosition"];return t.className&&o.push(t.className),t.bDestructiveWarning&&o.push("Destructive"),p.createElement("div",Object(l.a)({className:o.join(" ")},n,{ref:e}),p.createElement("div",{className:"ModalPosition_Content"},!t.hideTopBar&&p.createElement("div",{className:"ModalPosition_TopBar"}),t.onEscKeypress&&!t.bHideCloseIcon&&p.createElement("div",{className:"ModalPosition_Dismiss"},p.createElement("div",{className:"closeButton",onClick:t.onEscKeypress},p.createElement(a.pb,null))),p.createElement(r.a,null,t.children)))}p.Component;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.Cancel=function(){this.props.onCancel&&this.props.onCancel(),this.props.closeModal&&this.props.closeModal()},t.prototype.render=function(){var e=this.props,t=e.strTitle,n=e.strDescription,o=e.strOKButtonText,i=e.strCancelButtonText,r=e.bAlertDialog,a=e.children,s=Object(l.f)(e,["strTitle","strDescription","strOKButtonText","strCancelButtonText","bAlertDialog","children"]),c=o||Object(u.c)("#Button_Close");return p.createElement(S,Object(l.a)({},s),p.createElement(m.m,null," ",t," "),p.createElement(m.b,null,p.createElement(m.c,null,n,a),p.createElement(m.j,null,r?p.createElement(m.x,null,c):p.createElement(m.t,{bOKDisabled:this.props.bOKDisabled,strOKText:o,onCancel:this.Cancel,strCancelText:i}))))},Object(l.c)([o.a],t.prototype,"Cancel",null),t=Object(l.c)([s.a],t)}(p.Component),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.Cancel=function(){this.props.onCancel&&this.props.onCancel(),this.props.closeModal&&this.props.closeModal()},t.prototype.OK=function(){this.props.bOKDisabled||(this.props.onOK&&this.props.onOK(),this.props.closeModal&&this.props.closeModal())},t.prototype.render=function(){return p.createElement(b,{onEscKeypress:this.Cancel,bDestructiveWarning:this.props.bDestructiveWarning,bDisableBackgroundDismiss:this.props.bDisableBackgroundDismiss},p.createElement(m.h,{classNameContent:Object(d.a)("GenericConfirmDialog",this.props.bAllowFullSize&&"DialogContentFullSize",this.props.className),onSubmit:this.OK,bCenterVertically:!0},this.props.children))},Object(l.c)([o.a],t.prototype,"Cancel",null),Object(l.c)([o.a],t.prototype,"OK",null),t=Object(l.c)([s.a],t)}(p.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=Object(l.a)({strTitle:Object(u.c)("#Error_FailureNotice"),strDescription:Object(u.c)("#Error_GenericFailureDescription"),bAlertDialog:!0,bDestructiveWarning:!0,onOK:function(){},onCancel:function(){}},this.props);return p.createElement(v,Object(l.a)({},e))},t=Object(l.c)([s.a],t)}(p.Component),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.ModalManager.modals;e&&e.length?document.body.classList.add(f.a.BodyNoScrollDialog):document.body.classList.remove(f.a.BodyNoScrollDialog)},t.prototype.render=function(){var e=this.props.ModalManager.modals;if(!e||!e.length)return null;var o=this.props.ModalManager.active_modal,t=e.map(function(e,t){var n=e==o?"active":"inactive";return p.createElement("div",{className:Object(d.a)("ModalOverlayContent",n),key:n+"-"+t},e.element)});return p.createElement("div",{className:"FullModalOverlay"},p.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),t)},t=Object(l.c)([s.a],t)}(p.Component),O=function(){function e(){this.m_bUsePopups=!0,this.m_rgModals=c.x.array(null,{deep:!1})}return Object.defineProperty(e.prototype,"modals",{get:function(){return this.m_rgModals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active_modal",{get:function(){return this.m_rgModals.length?this.m_rgModals[this.m_rgModals.length-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.ShowModal=function(e){var t=this,n={element:e};return this.m_rgModals.push(n),{Close:function(){var e=t.m_rgModals.indexOf(n);-1!=e&&t.m_rgModals.splice(e,1)}}},e.prototype.SetUsePopups=function(e){this.m_bUsePopups=e},e.prototype.BUsePopups=function(){return this.m_bUsePopups},e}();function I(e){var t=E.get(e);return t||(t=new O,E.set(e,t)),t}var E=new WeakMap},ljid:function(e,t,n){"use strict";var d=n("mrSG"),h=n("q1tI"),f=n("e2SU"),_=n("oh5H"),o=n("1VtQ"),r=G("DialogHeader"),i=(G("DialogSubHeader"),G("DialogFooter")),a=G("DialogLabel _DialogLayout"),s=G("DialogBodyText"),c=G("DialogBody"),l=G("DialogInnerBody"),u=G("DialogBodyNotificationBar"),p=G("DialogTwoColLayout _DialogColLayout"),m=G("DialogThreeColLayout _DialogColLayout"),g=(G("DialogTwoThirdColLayout _DialogColLayout"),G("DialogColumn _DialogLayout"));function b(e){var t=e.children,n=e.bCenterVertically,o=Object(d.f)(e,["children","bCenterVertically"]),i="DialogContent _DialogLayout"+(e.className?" "+e.className:"");return n&&(i+=" _DialogCenterVertically"),h.createElement("div",Object(d.a)({},o,{className:i}),h.createElement("div",{className:"DialogContent_InnerWidth"},t))}var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnSubmit=function(e){e.preventDefault(),this.props.onSubmit&&this.props.onSubmit(e)},t.prototype.render=function(){return h.createElement("form",Object(d.a)({},this.props,{onSubmit:this.OnSubmit}))},Object(d.c)([o.a],t.prototype,"OnSubmit",null),t}(h.Component);function S(e){var t=e.classNameContent,n=e.bCenterVertically,o=Object(d.f)(e,["classNameContent","bCenterVertically"]);return h.createElement(b,{className:t,bCenterVertically:n},h.createElement(v,Object(d.a)({},o)))}function y(e){e.svgicon;var t,n=Object(d.f)(e,["svgicon"]),o="DialogButton _DialogLayout Primary"+(e.className?" "+e.className:""),i=void 0!==e.svgicon;return i&&(o+=" hasSVGIcon",t=e.svgicon),h.createElement("button",Object(d.a)({type:e.onClick?"button":"submit"},n,{className:o}),i&&h.createElement(t,null),e.children)}function C(e){e.svgicon;var t,n=Object(d.f)(e,["svgicon"]),o="DialogButton _DialogLayout Secondary"+(e.className?" "+e.className:""),i=void 0!==e.svgicon;return i&&(o+=" hasSVGIcon",t=e.svgicon),h.createElement("button",Object(d.a)({type:"button"},n,{className:o}),i&&h.createElement(t,null),e.children)}function O(e){e.svgicon;var t,n=Object(d.f)(e,["svgicon"]),o="TextButton"+(e.className?" "+e.className:""),i=void 0!==e.svgicon;return i&&(o+=" hasSVGIcon",t=e.svgicon),h.createElement("button",Object(d.a)({type:"button"},n,{className:o}),i&&h.createElement(t,null),e.children)}function I(e){var t="DialogHBar"+(e.className?" "+e.className:"");return h.createElement("div",Object(d.a)({},e,{className:t}))}function E(e){return h.createElement(p,null,h.createElement(y,{onClick:e.onOK,disabled:e.bOKDisabled},e.strOKText||Object(_.c)("#Button_Confirm")," "),h.createElement(C,{onClick:e.onCancel},e.strCancelText||Object(_.c)("#Button_Cancel")))}var w=function(n){function e(e){var t=n.call(this,e)||this;return t.state={checked:e.checked,disabled:e.disabled},t}return Object(d.d)(e,n),e.prototype.componentDidUpdate=function(e){e.checked!=this.props.checked&&this.props.checked!=this.state.checked&&this.setState({checked:this.props.checked}),e.disabled!=this.props.disabled&&this.props.disabled!=this.state.disabled&&this.setState({disabled:this.props.disabled})},e.prototype.shouldComponentUpdate=function(e,t){return e.label!=this.props.label||e.description!=this.props.description||e.onChange!=this.props.onChange||e.disabled!=this.props.disabled||e.checked!=this.state.checked||t.checked!=this.state.checked},Object.defineProperty(e.prototype,"checked",{get:function(){return this.state.checked},enumerable:!0,configurable:!0}),e.prototype.Toggle=function(){if(!this.props.disabled){var e=!this.state.checked;this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},e.prototype.KeyDown=function(e){32==e.keyCode&&(this.Toggle(),e.preventDefault(),e.stopPropagation())},Object(d.c)([o.a],e.prototype,"Toggle",null),Object(d.c)([o.a],e.prototype,"KeyDown",null),e}(h.Component),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){var e="DialogCheckbox"+(this.state.checked?" Active":"");return 1==this.state.disabled&&(e+=" Disabled"),this.props.label?h.createElement("div",{className:"DialogCheckbox_Container _DialogLayout "+(this.props.classname?this.props.classname:""),tabIndex:this.props.tabIndex||0,onClick:this.Toggle},h.createElement("div",{className:e},h.createElement(f.l,{color:this.props.color,highlightColor:this.props.highlightColor})),h.createElement("div",{className:"DialogToggle_Label"},h.createElement("span",null,this.props.label),this.props.tooltip&&h.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)")),h.createElement("div",{style:{clear:"left"}}),this.props.description&&h.createElement("div",{className:"DialogToggle_Description"},this.props.description)):h.createElement("div",{className:e,onClick:this.Toggle,tabIndex:this.props.tabIndex||0},h.createElement(f.l,null))},t}(w),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.render=function(){var e=this.state.checked?" Active":"";return h.createElement("div",{className:"DialogRoundCheckbox"},h.createElement("div",{className:"DialogRoundCheckbox_Control"+e,onClick:this.Toggle,tabIndex:this.props.tabIndex||0},h.createElement("div",{className:"DialogRoundCheckbox_OuterCircle"},h.createElement("div",{className:"DialogRoundCheckbox_InnerCircle"}))))},t}(w),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnOffKeyDown=function(e){37==e.keyCode&&this.state.checked||39==e.keyCode&&!this.state.checked?(this.Toggle(),e.preventDefault(),e.stopPropagation()):this.KeyDown(e)},t.prototype.render=function(){console.log(this.props.checked,this.state.checked);var e="DialogOnOffToggle _DialogInputContainer _DialogLayout "+(this.props.classname?this.props.classname:"");return this.props.disabled&&(e+=" Disabled"),h.createElement("div",{className:e,tabIndex:this.props.tabIndex||0,onKeyDown:this.OnOffKeyDown},h.createElement("div",{className:"displayColumn alignSelfCenter"},h.createElement("div",{className:"DialogToggle_Label"},h.createElement("span",null,this.props.label),this.props.tooltip&&h.createElement("span",{"data-tooltip-text":this.props.tooltip}," (?)")),this.props.description&&h.createElement("div",{className:"DialogToggle_Description"},this.props.description),this.props.children),h.createElement("div",{className:"DialogOnOffToggle_Control",onClick:this.Toggle},h.createElement("div",{className:"DialogOnOffToggle_Option Off"+(this.state.checked?"":" Active")},Object(_.c)("#Dialog_Off")),h.createElement("div",{className:"DialogOnOffToggle_Option On"+(this.state.checked?" Active":"")},Object(_.c)("#Dialog_On"))))},Object(d.c)([o.a],t.prototype,"OnOffKeyDown",null),t}(w);function G(n){return function(e){var t=n+(e.className?" "+e.className:"");return h.createElement("div",Object(d.a)({},e,{className:t}))}}var R=n("adxy"),j=n("XaMz"),L=function(n){function e(e){var t=n.call(this,e)||this;return t.CheckProps(e),t.state={m_CopiedYPos:0,m_bPlayingCopiedAnimation:!1,m_bCompletedCopiedAnimation:!1,m_bNumberBelowMinRange:!1,m_bNumberAboveMaxRange:!1,m_bIsNotNumeric:!1,m_bIsInvalidURL:!1,m_bIsInvalidEmail:!1},t}return Object(d.d)(e,n),e.prototype.componentDidUpdate=function(e){this.CheckProps(this.props)},e.prototype.OnInputRef=function(e){this.m_elInput=e,this.m_elInput&&this.props.focusOnMount&&this.m_elInput.focus()},Object.defineProperty(e.prototype,"element",{get:function(){return this.m_elInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.m_elInput&&this.m_elInput.value},enumerable:!0,configurable:!0}),e.prototype.validateUrl=function(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},e.prototype.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())},e.prototype.Validate=function(){this.setState({m_bNumberBelowMinRange:null!==this.props.rangeMin&&void 0!==this.props.rangeMin&&Number(this.m_elInput.value)<this.props.rangeMin,m_bNumberAboveMaxRange:null!==this.props.rangeMax&&void 0!==this.props.rangeMax&&Number(this.m_elInput.value)>this.props.rangeMax,m_bIsNotNumeric:1==this.props.mustBeNumeric&&isNaN(Number(this.m_elInput.value)),m_bIsInvalidURL:1==this.props.mustBeURL&&!this.validateUrl(this.m_elInput.value),m_bIsInvalidEmail:1==this.props.mustBeEmail&&!this.validateEmail(this.m_elInput.value)})},e.prototype.OnChanged=function(e){this.props.onChange&&this.props.onChange(e),this.Validate()},e.prototype.OnCopyClick=function(e){var t=this;if(this.m_elInput){this.m_elInput.select();var n=this.m_elInput.ownerDocument;if(n.queryCommandEnabled("copy")){n.execCommand("copy"),e.currentTarget.focus(),this.m_CopiedAnimation&&this.m_CopiedAnimation.Cancel();this.setState({m_bCompletedCopiedAnimation:!1}),this.setState({m_CopiedYPos:-4},function(){t.m_CopiedAnimation=new R.b(t,{m_CopiedYPos:-24},{msDuration:300,timing:"sine",setStateOnComplete:{m_bCompletedCopiedAnimation:!0}}),t.m_CopiedAnimation.Start()})}}},e.prototype.OnClearClick=function(e){this.m_elInput&&this.m_elInput.value&&(Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(this.m_elInput,""),this.m_elInput.dispatchEvent(new Event("input",{bubbles:!0})))},e.prototype.CheckProps=function(e){Object(j.a)(!(e.bShowClearAction||e.bAlwaysShowClearAction)||e.onChange,"In order for bShowClearAction to work correctly, you should be handling onChange and passing value to the Dialog.Input.")},e.prototype.render=function(){var e=this.props,t=e.label,n=e.explainer,o=e.bShowCopyAction,i=e.bShowClearAction,r=e.bAlwaysShowClearAction,a=Object(d.f)(e,["label","explainer","bShowCopyAction","bShowClearAction","bAlwaysShowClearAction"]),s="DialogInput DialogInputPlaceholder DialogTextInputBase"+(a.className?" "+a.className:""),c="copiedAnimation",l=this.state.m_bCompletedCopiedAnimation;this.m_CopiedAnimation&&(c="copiedAnimation animationPlaying"),l&&(c="copiedAnimation animationComplete");var p={};void 0!==this.state.m_CopiedYPos&&(p.transform="translateY("+this.state.m_CopiedYPos+"px)");var u=void 0;n&&(u=h.createElement("div",{className:"DialogLabelExplainer"},n));var m=h.createElement(h.Fragment,null,h.createElement("div",{className:"DialogInput_Wrapper _DialogLayout"},h.createElement("input",Object(d.a)({type:a.bIsPassword?"password":"text"},a,{className:s,ref:this.OnInputRef,onChange:this.OnChanged})),o&&h.createElement("div",{className:"displayRow"},h.createElement(C,{className:"DialogInput_CopyAction Primary",onClick:this.OnCopyClick},Object(_.c)("#Button_CopyLink")),h.createElement("div",{style:p,className:c},"Link Copied")),(r||i&&a.value)&&h.createElement("div",{className:"DialogInput_ClearAction",onClick:this.OnClearClick},h.createElement(f.pb,null))),u);return t?h.createElement("div",{className:"DialogInputLabelGroup _DialogLayout "},h.createElement("label",null,h.createElement("div",{className:"DialogLabel"},t," ",h.createElement("span",{className:"DialogInputRequirementLabel"},this.props.requiredLabel)," "),m,this.state.m_bNumberBelowMinRange?h.createElement("div",null," ",Object(_.c)("#Input_Error_NumberTooSmall")," "):null,this.state.m_bNumberAboveMaxRange?h.createElement("div",null," ",Object(_.c)("#Input_Error_NumberTooLarge")," "):null,this.state.m_bIsInvalidURL?h.createElement("div",null," ",Object(_.c)("#Input_Error_MustBeURL")," "):null,this.state.m_bIsInvalidEmail?h.createElement("div",null," ",Object(_.c)("#Input_Error_MustBeEmail")," "):null,this.state.m_bIsNotNumeric?h.createElement("div",null," ",Object(_.c)("#Input_Error_MustBeNumber")," "):null)):m},Object(d.c)([o.a],e.prototype,"OnInputRef",null),Object(d.c)([o.a],e.prototype,"OnChanged",null),Object(d.c)([o.a],e.prototype,"OnCopyClick",null),Object(d.c)([o.a],e.prototype,"OnClearClick",null),e}(h.PureComponent),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnBackgroundClick=function(){this.m_elInput&&this.m_elInput.focus()},t.prototype.OnInputFocus=function(e){this.m_bFocused||(this.m_bFocused=!0,this.forceUpdate()),this.props.onFocus&&this.props.onFocus(e)},t.prototype.OnInputBlur=function(e){this.m_bFocused&&(this.m_bFocused=!1,this.forceUpdate()),this.props.onBlur&&this.props.onBlur(e)},t.prototype.render=function(){var e=this.props,t=e.label,n=e.explainer,o=e.children,i=(e.className,Object(d.f)(e,["label","explainer","children","className"]));return h.createElement("div",{className:"DialogInputLabelGroup _DialogLayout DialogListBuilderInput"},h.createElement("label",null,t&&h.createElement("div",{className:"DialogLabel"},t),h.createElement("div",{className:"_DialogInputContainer"+(this.m_bFocused?" Active":""),onClick:this.OnBackgroundClick},h.createElement("div",{className:"DialogListBuilderInput_List"},h.Children.map(o,function(e,t){return h.createElement("div",{className:"DialogListBuilderInput_ListItem",key:t},e)}),h.createElement("input",Object(d.a)({type:"text"},i,{className:"DialogListBuilderInput_Input DialogInputPlaceholder",ref:this.OnInputRef,onFocus:this.OnInputFocus,onBlur:this.OnInputBlur,size:4})))),this.props.explainer&&h.createElement("div",{className:"DialogLabelExplainer"},n)))},Object(d.c)([o.a],t.prototype,"OnBackgroundClick",null),Object(d.c)([o.a],t.prototype,"OnInputFocus",null),Object(d.c)([o.a],t.prototype,"OnInputBlur",null),t}(L),k=function(n){function e(e){var t=n.call(this,e)||this;return t.state={value:t.ClampValue(e.value)},t}return Object(d.d)(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),e.prototype.ClampValue=function(e){return void 0===e||isNaN(e)||e<this.props.min?this.props.min:e>this.props.max?this.props.max:e},e.prototype.BPropsValid=function(){return this.props.max>this.props.min},e.prototype.shouldComponentUpdate=function(e,t){return t.value!=this.state.value||(e.max!==this.props.max||e.min!==this.props.min||e.value!==this.state.value&&e.value!==this.props.value||e.onChange!==this.props.onChange)},e.prototype.componentDidUpdate=function(e){e.value!=this.props.value&&this.setState({value:this.props.value})},e.prototype.OnMouseDown=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.clientX),this.m_elSlider.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},e.prototype.OnMouseMove=function(e){this.AdjustSliderForClientX(e.clientX)},e.prototype.OnMouseUp=function(e){this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp)},e.prototype.OnTouchStart=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.touches[0].clientX),this.m_elSlider.ownerDocument.defaultView.addEventListener("touchmove",this.OnTouchMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("touchend",this.OnTouchEnd)},e.prototype.OnTouchMove=function(e){this.AdjustSliderForClientX(e.touches[0].clientX)},e.prototype.OnTouchEnd=function(e){this.m_elSlider.ownerDocument.defaultView.removeEventListener("touchmove",this.OnTouchMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("touchend",this.OnTouchEnd)},e.prototype.OnKeyDown=function(e){var t=1;e.ctrlKey&&(t=Math.max(1,Math.floor(.1*(this.props.max-this.props.min)+.5))),37==e.keyCode?(this.IncrementValue(-1*t),e.preventDefault()):39==e.keyCode&&(this.IncrementValue(1*t),e.preventDefault())},e.prototype.AdjustSliderForClientX=function(e){var t=(e-this.m_rectSlider.left)/(this.m_rectSlider.right-this.m_rectSlider.left)*(this.props.max-this.props.min)+this.props.min;t=Math.floor(t+.5);var n=this.ClampValue(t);n!=this.state.value&&(this.setState({value:n}),this.props.onChange&&this.props.onChange(n))},e.prototype.IncrementValue=function(e){var t=this.ClampValue(this.state.value+e);t!=this.state.value&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(t))},e.prototype.render=function(){var e={},t={};if(this.BPropsValid()){var n=100*(this.state.value-this.props.min)/(this.props.max-this.props.min)+"%";e.width=n,t.left=n}var o=this.props,i=o.label,r=o.explainer,a=(Object(d.f)(o,["label","explainer"]),void 0);return r&&(a=h.createElement("div",{className:"DialogLabelExplainer"},r)),h.createElement("div",{className:"DialogSlider_Container _DialogInputContainer _DialogLayout"+(this.props.classname?" "+this.props.classname:""),onKeyDown:this.OnKeyDown,tabIndex:this.props.tabIndex||0},i&&h.createElement("div",{className:"DialogLabel"},i),h.createElement("div",{className:"DialogSlider_Slider",onMouseDown:this.OnMouseDown,onTouchStart:this.OnTouchStart},h.createElement("div",{className:"DialogSlider_Value",style:e}),h.createElement("div",{className:"DialogSlider_Grabber",style:t})),this.props.bShowValue?h.createElement("div",{className:"DialogLabelExplainer"},this.state.value):null,a)},Object(d.c)([o.a],e.prototype,"OnMouseDown",null),Object(d.c)([o.a],e.prototype,"OnMouseMove",null),Object(d.c)([o.a],e.prototype,"OnMouseUp",null),Object(d.c)([o.a],e.prototype,"OnTouchStart",null),Object(d.c)([o.a],e.prototype,"OnTouchMove",null),Object(d.c)([o.a],e.prototype,"OnTouchEnd",null),Object(d.c)([o.a],e.prototype,"OnKeyDown",null),e}(h.Component),P=n("8o0Y"),N=function(n){function e(e){var t=n.call(this,e)||this;return t.state={iSelectedOption:t.FindActiveOptionIndex(e.selectedOption),bOpened:!1},t}return Object(d.d)(e,n),e.prototype.FindAndSetActiveOption=function(e){var t=this.FindActiveOptionIndex(e);t!==this.state.iSelectedOption&&this.setState({iSelectedOption:t})},e.prototype.FindActiveOptionIndex=function(e){for(var t=0;t<this.props.rgOptions.length;t++)if(this.props.rgOptions[t].data===e)return t},Object.defineProperty(e.prototype,"value",{get:function(){return void 0!==this.state.iSelectedOption?this.props.rgOptions[this.state.iSelectedOption]:void 0},enumerable:!0,configurable:!0}),e.prototype.SetSelectedOption=function(e){null!=e?this.FindAndSetActiveOption(e):this.setState({iSelectedOption:void 0})},e.prototype.shouldComponentUpdate=function(e,t,n){if(e.selectedOption!=this.props.selectedOption){this.FindActiveOptionIndex(e.selectedOption);if(this.state.iSelectedOption!==t.iSelectedOption)return!0}if(e.disabled!=this.props.disabled)return!0;if(e.postDropdownElement!=this.props.postDropdownElement)return!0;if(e.postOptionElement!=this.props.postOptionElement)return!0;if(t.bOpened!==this.state.bOpened||t.iSelectedOption!==this.state.iSelectedOption)return!0;for(var o=0,i=["label","selectedOption","tabIndex","onChange","strDefaultLabel"];o<i.length;o++){var r=i[o];if(e[r]!==this.props[r])return!0}return!(!this.state.bOpened||!this.DoOptionsDiffer(e.rgOptions))},e.prototype.DoOptionsDiffer=function(e){if(e.length!=this.props.rgOptions.length)return!0;for(var t=0;t<e.length;t++)if(e[t].label!==this.props.rgOptions[t].label)return!0;return!1},e.prototype.componentDidUpdate=function(e){e.selectedOption!==this.props.selectedOption&&this.FindAndSetActiveOption(this.props.selectedOption),this.DoOptionsDiffer(e.rgOptions)&&(this.HideMenu(),this.m_iMenuInstance=void 0)},e.prototype.OnInputRef=function(e){this.m_elInput=e},e.prototype.ToggleMenu=function(){this.state.bOpened?this.HideMenu():this.ShowMenu()},e.prototype.OnItemSelected=function(e,t){this.HideMenu(),this.setState({iSelectedOption:e}),this.props.onChange&&this.props.onChange(void 0!==e?this.props.rgOptions[e]:void 0,this)},e.prototype.ShowMenu=function(){if(this.m_iMenuInstance)this.m_iMenuInstance.Show();else{var e="DialogMenuPosition";this.props.strDropDownClassName&&(e+=" "+this.props.strDropDownClassName);var t=Object(d.a)({bOverlapHorizontal:!0,bMatchWidth:!0,bFitToWindow:!0,strClassName:e,bDisableMouseOverlay:this.props.bDisableMouseOverlay},this.props.contextMenuPositionOptions);this.m_iMenuInstance=Object(P.a)(h.createElement(B,{rgOptions:this.props.rgOptions,fnOnItemSelected:this.OnItemSelected,strDropDownItemClassName:this.props.strDropDownItemClassName}),this.m_elInput,t),this.m_iMenuInstance.SetOnHideCallback(this.HideMenu)}this.setState({bOpened:!0})},e.prototype.HideMenu=function(){this.m_iMenuInstance&&this.m_iMenuInstance.Hide(),this.setState({bOpened:!1})},e.prototype.render=function(){var e=void 0!==this.state.iSelectedOption&&this.props.rgOptions[this.state.iSelectedOption],t=e?e.label:this.props.strDefaultLabel,n="DialogDropDown _DialogInputContainer",o="DialogInputLabelGroup _DialogLayout";return this.state.bOpened&&(n+=" Active"),this.props.disabled&&(n+=" Disabled"),this.props.strClassName&&(o+=" "+this.props.strClassName),h.createElement("div",{className:o},this.props.label&&h.createElement("div",{className:"DialogLabel"},this.props.label),h.createElement("div",{className:n,tabIndex:this.props.tabIndex||0,onClick:this.props.disabled?void 0:this.ToggleMenu,ref:this.OnInputRef},this.props.postDropdownElement,!this.props.disabled&&h.createElement("div",{className:"DialogDropDown_Arrow"},h.createElement(f.o,null)),this.props.postOptionElement,h.createElement("div",{className:"DialogDropDown_CurrentDisplay"},t)))},Object(d.c)([o.a],e.prototype,"OnInputRef",null),Object(d.c)([o.a],e.prototype,"ToggleMenu",null),Object(d.c)([o.a],e.prototype,"OnItemSelected",null),Object(d.c)([o.a],e.prototype,"ShowMenu",null),Object(d.c)([o.a],e.prototype,"HideMenu",null),e}(h.Component),B=function(n){function e(e){var t=n.call(this,e)||this;return t.state={iFocus:0},t}return Object(d.d)(e,n),e.prototype.OnItemClicked=function(e){var t=parseInt(e.currentTarget.getAttribute("data-dropdown-index"));(t||0===t)&&0<=t&&t<this.props.rgOptions.length&&this.props.fnOnItemSelected(t,this.props.rgOptions[t])},e.prototype.render=function(){var n=this,o="DialogDropDownMenu_Item";this.props.strDropDownItemClassName&&(o+=" "+this.props.strDropDownItemClassName);var e=this.props.rgOptions.map(function(e,t){return h.createElement("div",{className:o+" "+e.strOptionClass,key:t,"data-dropdown-index":t,onClick:n.OnItemClicked},e.label)});return h.createElement("div",{className:"DialogDropDownMenu _DialogInputContainer"},e)},Object(d.c)([o.a],e.prototype,"OnItemClicked",null),e}(h.Component),F=n("i8i4"),x=n("2vnA"),V=n("G+3Z"),U=n("UqDm"),H=n("QHER"),W=n("/7KC");function z(e){return e.children}var q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_coordinator=new Y,e}return Object(d.d)(e,t),e.prototype.OnDrop=function(e,t){e<t&&t--,t!=e&&this.props.onReorder(e,t)},e.prototype.render=function(){var i=this,r=[];return r.push(h.createElement(X,{coordinator:this.m_coordinator,key:"dropregion_top",fnBAcceptDraggable:function(e){return 0!=e.props.data},fnOnDrop:function(e){return i.OnDrop(e.props.data,0)}})),h.Children.forEach(this.props.children,function(e,t){var n=e.props.id||"__list_"+t,o=t+1;r.push(h.createElement(J,{coordinator:i.m_coordinator,data:t,key:n},e)),r.push(h.createElement(X,{coordinator:i.m_coordinator,key:"dropregion_"+n,fnBAcceptDraggable:function(e){return e.props.data!=o},fnOnDrop:function(e){return i.OnDrop(e.props.data,o)}}))}),h.createElement("div",{className:"DialogReorderableList"},r)},Object(d.c)([o.a],e.prototype,"OnDrop",null),e}(h.Component);function K(e,t,n,o){return o?n&&e>n.left&&e<n.right&&t>n.top&&t<n.bottom:n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}var Y=function(){function e(){this.m_embeddedElement=new V.a("DragGhosts"),this.m_rgDropRegions=[],this.m_rgActiveDropRegions=[]}return e.prototype.RegisterDropRegion=function(e){this.m_rgDropRegions.push(e),this.m_activeDraggable&&e.BAcceptDraggable(this.m_activeDraggable)&&(e.OnDragStarted(this.m_activeDraggable),this.m_rgActiveDropRegions.push(e))},e.prototype.UnregisterDropRegion=function(e){U.c(this.m_rgDropRegions,e),U.c(this.m_rgActiveDropRegions,e),this.m_activeDropRegion==e&&(this.m_activeDropRegion=void 0,this.m_activeDraggable&&this.ShowDragGhost())},e.prototype.OnDragGhostRef=function(e){this.m_dragGhost=e},e.prototype.ShowDragGhost=function(){var e=this.m_activeDraggable.renderDragGhost(),t=Object(H.a)(e.props.className,!!this.m_activeDropRegion&&"DraggedOverActiveDrop"),n=h.cloneElement(e,{ref:this.OnDragGhostRef,className:t});this.m_embeddedElement.ShowElement(this.m_activeDraggable.GetDragDocument(),n,this.m_activeDraggable)},e.prototype.HideDragGhost=function(){this.m_embeddedElement.HideElement(this.m_activeDraggable.GetDragDocument(),this.m_activeDraggable)},e.prototype.OnDragStart=function(e){this.m_activeDraggable=e,this.m_rgActiveDropRegions=[];for(var t=0,n=this.m_rgDropRegions;t<n.length;t++){var o=n[t];o.BAcceptDraggable(e)&&(o.OnDragStarted(e),this.m_rgActiveDropRegions.push(o))}this.ShowDragGhost()},e.prototype.EndDrag=function(){if(this.m_activeDraggable){this.HideDragGhost(),this.m_activeDropRegion&&this.m_activeDropRegion.OnDrop(this.m_activeDraggable);for(var e=0,t=this.m_rgActiveDropRegions;e<t.length;e++){t[e].OnDragEnded(this.m_activeDraggable)}this.m_activeDraggable=void 0,this.m_dropGhost=void 0,this.m_rgActiveDropRegions=[]}},e.prototype.OnDrag=function(e,t,n){var o=this,i=void 0===t?0:t-this.m_dragGhost.state.clientX,r=void 0===n?0:n-this.m_dragGhost.state.clientY;if(e.props.bEnableHTMLDrag&&this.m_dragOffWindowTimer&&window.clearTimeout(this.m_dragOffWindowTimer),this.m_dragGhost&&(this.m_dragGhost.setState({clientX:t,clientY:n,clientXDelta:i,clientYDelta:r,bVisible:!0}),e.props.bEnableHTMLDrag)){var a=t+i,s=n+r,c=e.GetDragDocument().body.getBoundingClientRect();if(K(t,n,c)&&!K(a,s,c,!0)){var l=W.c(a,c.left,c.right,c.left-200,c.right+200),p=W.c(s,c.top,c.bottom,c.top-100,c.bottom+100);this.m_dragOffWindowTimer=window.setTimeout(function(){e==o.m_activeDraggable&&o.OnDrag(e,l,p)},50)}}if(this.m_activeDropRegion&&this.m_activeDropRegion.BDraggableInRegion(t,n,this.m_activeDraggable))this.m_activeDropRegion.OnDragMove(t,n,this.m_activeDraggable);else{var u=!!this.m_activeDropRegion;this.m_activeDropRegion&&(this.m_activeDropRegion.OnDragLeave(this.m_activeDraggable),this.m_activeDropRegion=void 0);for(var m=0,d=this.m_rgActiveDropRegions;m<d.length;m++){var h=d[m];if(h.BDraggableInRegion(t,n,this.m_activeDraggable)){this.m_activeDropRegion=h,this.m_dropGhost||(this.m_dropGhost=this.m_activeDraggable.renderDropGhost()),this.m_activeDropRegion.OnDragEnter(this.m_activeDraggable,this.m_dropGhost);break}}!!this.m_activeDropRegion!=u&&this.ShowDragGhost()}},Object(d.c)([o.a],e.prototype,"OnDragGhostRef",null),e}(),J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_DragInfo={bStarted:!1,startClientX:void 0,startClientY:void 0,startOffsetX:void 0,startOffsetY:void 0,startWidth:void 0,startHeight:void 0,ownerWin:void 0},e}return Object(d.d)(e,t),e.prototype.GetDragDocument=function(){return this.m_DragInfo.ownerWin&&this.m_DragInfo.ownerWin.document},e.prototype.RecordDragStart=function(e,t,n){this.m_DragInfo.startClientX=t,this.m_DragInfo.startClientY=n;var o=e.getBoundingClientRect();this.m_DragInfo.startOffsetX=t-o.left,this.m_DragInfo.startOffsetY=n-o.top,this.m_DragInfo.startWidth=o.width,this.m_DragInfo.startHeight=o.height,this.m_DragInfo.ownerWin=e.ownerDocument.defaultView},e.prototype.ProcessDragMove=function(e){var t=function(e){if("touches"in e){var t=e;return[t.touches[0].clientX,t.touches[0].clientY]}return[e.clientX,e.clientY]}(e),n=t[0],o=t[1];if(this.m_DragInfo.bStarted){if(this.props.bEnableHTMLDrag&&0==n&&0==o)return;this.props.coordinator.OnDrag(this,n,o)}else 25<=Math.pow(n-this.m_DragInfo.startClientX,2)+Math.pow(o-this.m_DragInfo.startClientY,2)&&(this.m_DragInfo.bStarted=!0,this.forceUpdate(),this.props.fnOnDragStart&&this.props.fnOnDragStart(),this.props.coordinator.OnDragStart(this),this.props.coordinator.OnDrag(this,n,o))},e.prototype.OnMouseDown=function(e){this.m_DragInfo.bStarted||0!=e.button||(this.RecordDragStart(e.currentTarget,e.clientX,e.clientY),this.m_DragInfo.ownerWin.addEventListener("mousemove",this.ProcessDragMove),this.m_DragInfo.ownerWin.addEventListener("mouseup",this.OnMouseUp))},e.prototype.OnMouseUp=function(e){this.m_DragInfo.ownerWin.removeEventListener("mousemove",this.ProcessDragMove),this.m_DragInfo.ownerWin.removeEventListener("mouseup",this.OnMouseUp),this.ResetDragState()},e.prototype.OnTouchStart=function(e){this.m_DragInfo.bStarted||(this.RecordDragStart(e.currentTarget,e.touches[0].clientX,e.touches[0].clientY),this.m_DragInfo.ownerWin.addEventListener("touchmove",this.ProcessDragMove),this.m_DragInfo.ownerWin.addEventListener("touchend",this.OnTouchEnd))},e.prototype.OnTouchEnd=function(e){this.m_DragInfo.ownerWin.removeEventListener("touchmove",this.ProcessDragMove),this.m_DragInfo.ownerWin.removeEventListener("touchend",this.OnTouchEnd),this.ResetDragState()},e.prototype.ResetDragState=function(){this.m_DragInfo.bStarted&&(this.props.coordinator.EndDrag(),this.props.fnOnDragEnd&&this.props.fnOnDragEnd()),this.m_DragInfo.bStarted=!1,this.m_DragInfo.startClientX=void 0,this.m_DragInfo.startClientY=void 0,this.m_DragInfo.startOffsetX=void 0,this.m_DragInfo.startOffsetY=void 0,this.m_DragInfo.ownerWin=void 0,this.forceUpdate()},e.prototype.OnHTMLDragStart=function(n){n.dataTransfer.effectAllowed="copyMove",this.props.strHTMLDragData&&this.props.strHTMLDragData.forEach(function(e,t){return n.dataTransfer.setData(t,e)}),n.dataTransfer.getData("text/plain")||n.dataTransfer.setData("text/plain",this.props.data.toString());var e=new Image;n.dataTransfer.setDragImage(e,0,0),this.RecordDragStart(n.currentTarget,n.clientX,n.clientY)},e.prototype.OnHTMLDragEnd=function(){this.ResetDragState()},e.prototype.render=function(){var e=this.props,t=(e.coordinator,e.data,e.bEnableHTMLDrag),n=(e.strHTMLDragData,e.fnOnDragStart,e.fnOnDragEnd,e.fnRenderDragGhost,e.fnRenderDropGhost,e.className),o=e.strActiveClassName,i=e.children,r=Object(d.f)(e,["coordinator","data","bEnableHTMLDrag","strHTMLDragData","fnOnDragStart","fnOnDragEnd","fnRenderDragGhost","fnRenderDropGhost","className","strActiveClassName","children"]),a={},s=n||"DialogDraggable";return this.m_DragInfo.bStarted?(s=Object(H.a)(s,o||"DraggedOut"),t&&(a={onDrag:this.ProcessDragMove,onDragEnd:this.OnHTMLDragEnd})):a=t?{onDragStart:this.OnHTMLDragStart,onDrag:this.ProcessDragMove,onDragEnd:this.OnHTMLDragEnd}:{onMouseDown:this.OnMouseDown,onTouchStart:this.OnTouchStart},h.createElement("div",Object(d.a)({className:s},a,r,{draggable:t}),i)},e.prototype.renderDropGhost=function(){return this.props.fnRenderDropGhost?this.props.fnRenderDropGhost():h.createElement(Q,{elContent:this.GetClone()})},e.prototype.renderDragGhost=function(){return this.props.fnRenderDragGhost?this.props.fnRenderDragGhost():h.createElement(Z,{elContent:this.GetClone(),offsetX:this.m_DragInfo.startOffsetX,offsetY:this.m_DragInfo.startOffsetY,width:this.m_DragInfo.startWidth,height:this.m_DragInfo.startHeight})},e.prototype.GetClone=function(){var e,t=F.findDOMNode(this);if(t&&t.childElementCount)if(1==t.childElementCount)e=t.firstElementChild.cloneNode(!0);else{e=document.createElement("div");for(var n=t.firstChild;n;n=n.nextSibling)e.appendChild(n.cloneNode(!0))}return e},Object(d.c)([o.a],e.prototype,"ProcessDragMove",null),Object(d.c)([o.a],e.prototype,"OnMouseDown",null),Object(d.c)([o.a],e.prototype,"OnMouseUp",null),Object(d.c)([o.a],e.prototype,"OnTouchStart",null),Object(d.c)([o.a],e.prototype,"OnTouchEnd",null),Object(d.c)([x.g],e.prototype,"ResetDragState",null),Object(d.c)([o.a],e.prototype,"OnHTMLDragStart",null),Object(d.c)([o.a],e.prototype,"OnHTMLDragEnd",null),e}(h.Component),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.OnRef=function(e){e&&e.appendChild(this.props.elContent)},t.prototype.render=function(){return h.createElement("div",{className:"DialogDraggable_DropGhost",ref:this.OnRef})},Object(d.c)([o.a],t.prototype,"OnRef",null),t}(h.Component),Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={clientX:void 0,clientY:void 0,bVisible:!0,clientXDelta:void 0,clientYDelta:void 0},e}return Object(d.d)(e,t),e.prototype.OnRef=function(e){e&&e.appendChild(this.props.elContent)},e.prototype.CalculateRotationDegrees=function(e){return!e||Math.abs(e)<4?0:(0<e?7.5:-7.5)*Math.sqrt(Math.abs(e))},e.prototype.render=function(){if(!this.state.bVisible||void 0===this.state.clientX||void 0===this.state.clientY)return h.createElement("div",null);var e={left:this.state.clientX-(this.props.offsetX||0),top:this.state.clientY-(this.props.offsetY||0),width:this.props.width||"auto",height:this.props.height||"auto",perspective:"600px"},t=W.c(this.CalculateRotationDegrees(this.state.clientYDelta),-90,90,2,0),n={transform:"rotateX("+this.CalculateRotationDegrees(-1*this.state.clientYDelta)+"deg) rotateY( "+this.CalculateRotationDegrees(this.state.clientXDelta)+"deg)",transition:"transform .16s ease-out, filter .16s ease-out",filter:"brightness("+t+")"},o=this.props.className||"DialogDraggable_DragGhost";return h.createElement("div",{className:o,style:e},h.createElement("div",{ref:this.OnRef,style:n}))},Object(d.c)([o.a],e.prototype,"OnRef",null),e}(h.Component),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t.prototype.BDraggableInRegion=function(e,t,n){var o=this.GetClientRect();return!!o&&(e>=o.left&&e<=o.right&&t>=o.top-20&&t<=o.bottom+20)},t}(function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t}return Object(d.d)(e,n),e.prototype.componentDidMount=function(){this.props.coordinator.RegisterDropRegion(this)},e.prototype.componentWillUnmount=function(){this.props.coordinator.UnregisterDropRegion(this)},e.prototype.OnDragStarted=function(e){this.setState({bDraggableActive:!0})},e.prototype.OnDragEnded=function(e){this.setState({bDraggableActive:!1})},e.prototype.OnDragEnter=function(e,t){this.setState({dropGhost:t}),this.props.fnOnDragEnter&&this.props.fnOnDragEnter(e)},e.prototype.OnDragLeave=function(e){this.setState({dropGhost:void 0}),this.props.fnOnDragLeave&&this.props.fnOnDragLeave(e)},e.prototype.OnDragMove=function(e,t,n){},e.prototype.OnDrop=function(e){this.setState({dropGhost:void 0}),this.props.fnOnDrop(e)},e.prototype.BAcceptDraggable=function(e){return!this.props.fnBAcceptDraggable||this.props.fnBAcceptDraggable(e)},e.prototype.BDraggableInRegion=function(e,t,n){return K(e,t,this.GetClientRect())},e.prototype.GetClientRect=function(){return this.m_elDropRegion||(this.m_elDropRegion=F.findDOMNode(this)),this.m_elDropRegion&&this.m_elDropRegion.getBoundingClientRect()},e.prototype.render=function(){var e=this.props,t=(e.coordinator,e.fnBAcceptDraggable,e.fnOnDrop,e.fnOnDragEnter,e.fnOnDragLeave,e.className),n=e.strActiveClassName,o=e.children,i=Object(d.f)(e,["coordinator","fnBAcceptDraggable","fnOnDrop","fnOnDragEnter","fnOnDragLeave","className","strActiveClassName","children"]),r=Object(H.a)(t||"DialogDropRegion",this.state.bDraggableActive&&(n||"Active")),a=function(e){e.preventDefault()},s={onDragEnter:a,onDragOver:a,onDragLeave:a,onDrop:a,id:"fff"};return h.createElement("div",Object(d.a)({className:r},s,{onDragOver:a},i),this.state.dropGhost,o)},e}(h.Component)),$=n("1w3K"),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.d)(t,e),t}(h.Component),te=function(n){function e(e){var t=n.call(this,e)||this;return void 0!==e.startingPage?t.state={activePage:e.startingPage}:t.state={activePage:-1},t}return Object(d.d)(e,n),e.prototype.OnActivePageRef=function(e){this.m_ActivePage=e instanceof ee?e:(Object(j.a)(!e,'PagedSettingsDialog page "'+this.GetActivePage().title+'" does not derive from PagedSettingsPageComponent'),null)},e.prototype.GetActivePage=function(){return this.state.activePage<0||this.state.activePage>=this.props.pages.length?this.props.pages[0]:this.props.pages[this.state.activePage]},e.prototype.SelectPage=function(e){e!=this.state.activePage&&(this.m_ActivePage&&!this.m_ActivePage.OKToSwitchAway()||this.setState({activePage:e}))},e.prototype.render=function(){for(var s=this,c=this.GetActivePage(),l=[],e=function(e){var t=p.props.pages[e],n=t==c,o=t.className||"",i=t.click||function(){s.SelectPage(e)},r=["PagedSettingsDialog_PageListItem"],a=!1;"ChatRoomLeave"==t.className&&(a=!0),n&&r.push("Active"),r.push(o),l.push(h.createElement("div",{className:r.join(" "),key:t.title,onClick:i},a&&h.createElement(f.mb,null),t.title))},p=this,t=0;t<this.props.pages.length;t++)e(t);var n=c.hideTitle,o="";c.uniqueName&&(o=" Page_"+c.uniqueName.replace(/\s/g,""));var i=!1!==c.enabled;return i||(o+=" noPermission"),h.createElement("div",{className:(this.props.className?this.props.className:"")+" PagedSettingsDialog"},h.createElement("div",{className:"PagedSettingsDialog_PageListColumn"},h.createElement("div",{className:"PagedSettingsDialog_Title"},this.props.title),h.createElement("div",{className:"PagedSettingsDialog_PageList"},l)),h.createElement($.TransitionGroup,{className:"DialogContentTransition"},c&&h.createElement($.CSSTransition,{key:c.title,classNames:"opacityfade-anim",timeout:300},h.createElement(b,{className:"PagedSettingsDialog_PageContent"+o},!n&&h.createElement(r,null,c.title,!i&&h.createElement(u,null,h.createElement(f.D,null),Object(_.c)("#Chat_Settings_Permission_Denied"))),null!=c.content&&h.cloneElement(c.content,{ref:this.OnActivePageRef})))))},Object(d.c)([o.a],e.prototype,"OnActivePageRef",null),e}(h.Component),ne=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_refTextArea=h.createRef(),e.m_cEntryLength=Number.MAX_VALUE,e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"textarea",{get:function(){return this.m_refTextArea.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.m_refTextArea.current&&this.m_refTextArea.current.value},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this.m_refTextArea.current.focus()},e.prototype.InternalOnInput=function(){var e,t=this.m_refTextArea.current,n=this.GetMinHeight(),o=this.GetMaxHeight(),i=t.value.length;if(void 0===this.m_nTextAreaPadding&&this.CalculatePadding(),i<this.m_cEntryLength&&(e=window.scrollY,t.style.height=n+"px"),t.scrollHeight>o)t.style.height=o+"px",t.style.overflow="auto";else if(t.scrollHeight!=t.clientHeight){var r=Math.max(t.scrollHeight,n);t.style.height=r-this.m_nTextAreaPadding+"px","auto"==t.style.overflow&&(t.style.overflow="hidden")}void 0!==e&&window.scrollTo(window.scrollX,e),this.m_cEntryLength=i},e.prototype.CalculatePadding=function(){var e=getComputedStyle(this.m_refTextArea.current);this.m_nTextAreaPadding=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)},e.prototype.GetMinHeight=function(){return this.props.nMinHeight||20},e.prototype.GetMaxHeight=function(){return this.props.nMaxHeight||500},e.prototype.DeferredInternalOnInput=function(){window.setTimeout(this.InternalOnInput,1)},e.prototype.OnKeyUp=function(e){this.InternalOnInput(),this.props.onKeyUp&&this.props.onKeyUp(e)},e.prototype.OnBlur=function(e){this.DeferredInternalOnInput(),this.props.onBlur&&this.props.onBlur(e)},e.prototype.OnClick=function(e){this.InternalOnInput(),this.props.onClick&&this.props.onClick(e)},e.prototype.OnPaste=function(e){this.DeferredInternalOnInput(),this.props.onPaste&&this.props.onPaste(e)},e.prototype.OnCut=function(e){this.InternalOnInput(),this.props.onCut&&this.props.onCut(e)},e.prototype.componentDidMount=function(){this.m_refTextArea.current.style.overflow="hidden",this.m_refTextArea.current.style.resize="none",this.InternalOnInput()},e.prototype.componentDidUpdate=function(e){e.nMinHeight==this.props.nMinHeight&&e.nMaxHeight==this.props.nMaxHeight||(this.m_cEntryLength=Number.MAX_VALUE),this.m_refTextArea.current.value.length!=this.m_cEntryLength&&this.InternalOnInput()},e.prototype.render=function(){var e=this.props,t=(e.nMinHeight,e.nMaxHeight,Object(d.f)(e,["nMinHeight","nMaxHeight"]));return h.createElement("textarea",Object(d.a)({},t,{ref:this.m_refTextArea,onKeyUp:this.OnKeyUp,onBlur:this.OnBlur,onClick:this.OnClick,onPaste:this.OnPaste,onCut:this.OnCut}))},Object(d.c)([o.a],e.prototype,"InternalOnInput",null),Object(d.c)([o.a],e.prototype,"OnKeyUp",null),Object(d.c)([o.a],e.prototype,"OnBlur",null),Object(d.c)([o.a],e.prototype,"OnClick",null),Object(d.c)([o.a],e.prototype,"OnPaste",null),Object(d.c)([o.a],e.prototype,"OnCut",null),e}(h.Component);n.d(t,"m",function(){return r}),n.d(t,"j",function(){return i}),n.d(t,"p",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"n",function(){return l}),n.d(t,"s",function(){return u}),n.d(t,"D",function(){return p}),n.d(t,"C",function(){return m}),n.d(t,"f",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"k",function(){return v}),n.d(t,"h",function(){return S}),n.d(t,"x",function(){return y}),n.d(t,"d",function(){return C}),n.d(t,"B",function(){return O}),n.d(t,"l",function(){return I}),n.d(t,"t",function(){return E}),n.d(t,"e",function(){return M}),n.d(t,"z",function(){return D}),n.d(t,"u",function(){return T}),n.d(t,"o",function(){return L}),n.d(t,"q",function(){return A}),n.d(t,"A",function(){return k}),n.d(t,"i",function(){return N}),n.d(t,"r",function(){return z}),n.d(t,"y",function(){return q}),n.d(t,"w",function(){return ee}),n.d(t,"v",function(){return te}),n.d(t,"a",function(){return ne})},lqmi:function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return f});var o=n("mrSG"),i=n("1n9R"),l=n("s+DT"),r=n("2vnA"),p=n("Kqva"),u=n("XCHq"),a=n("OTLo"),s=n("Gp1o"),c=n("oh5H"),m="fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb";function d(e,t){var n=".jpg";"0000000000000000000000000000000000000000"===e&&(e=m),44==e.length&&(n=e.substr(-4),e=e.substr(0,40));var o=i.b.MEDIA_CDN_COMMUNITY_URL+"images/avatars/";return o+=e.substr(0,2)+"/"+e,t&&(o+="_"+t),o+=n}function h(e){var t="offline";return e.is_golden&&e.is_online?t="golden":e.is_ingame?t="ingame":e.m_broadcastAccountId?t="watchingbroadcast":e.is_online&&(t="online"),e.is_awayOrSnooze&&(t+=" awayOrSnooze"),t}var f=function(){function e(e){this.m_bInitialized=!1,this.m_ePersonaState=0,this.m_unGamePlayedAppID=0,this.m_gameid="0",this.m_unPersonaStateFlags=0,this.m_strPlayerName="",this.m_strAvatarHash=m,this.m_rtLastSeenOnline=0,this.m_strGameExtraInfo="",this.m_unGameServerIP=0,this.m_unGameServerPort=0,this.m_game_lobby_id="",this.m_mapRichPresence=r.x.map(),this.m_bNameInitialized=!1,this.m_bStatusInitialized=!1,this.m_steamid=e}return e.prototype.Reset=function(){this.m_ePersonaState=0,this.m_unGamePlayedAppID=0,this.m_gameid="0",this.m_strGameExtraInfo="",this.m_unGameServerIP=0,this.m_unGameServerPort=0,this.m_game_lobby_id="",this.m_mapRichPresence.clear(),this.m_broadcastId=void 0,this.m_broadcastAccountId=void 0,this.m_broadcastAppId=void 0,this.m_broadcastViewerCount=void 0,this.m_strBroadcastTitle=void 0},e.prototype.UpdateFromMessage=function(e,t){if(0!=(1&e)&&(this.m_bStatusInitialized=!0,this.m_ePersonaState=t.persona_state()||0,0!=this.m_ePersonaState?(this.m_unGamePlayedAppID=t.game_played_app_id()||0,this.m_gameid=t.gameid()||"0",this.m_strGameExtraInfo=t.game_name()||"",this.m_unGameServerIP=t.game_server_ip()||0,this.m_unGameServerPort=t.game_server_port()||0,this.m_game_lobby_id=t.game_lobby_id()||""):this.Reset()),0!=(2&e)&&(this.m_bNameInitialized=!0,this.m_strPlayerName=t.player_name()||""),0!=(64&e)&&(this.m_rtLastSeenOnline=t.last_seen_online()||t.last_logoff()||0),0!=(16&e)){var n=t.avatar_hash(),o=!0;if(n){for(var i=0;i<n.length&&o;i++)o=!n[i];this.m_strAvatarHash=o?m:Object(p.a)(n)}}if(void 0!==t.persona_state_flags()&&(this.m_unPersonaStateFlags=t.persona_state_flags()),0!=(4096&e)){this.m_mapRichPresence.clear();for(var r=0,a=t.rich_presence();r<a.length;r++){var s=a[r];this.m_mapRichPresence.set(s.key().toLowerCase(),s.value())}}if(0!=(8192&e)&&(this.m_broadcastId=t.broadcast_id()),0!=(16384&e)){var c=l.a.InitFromAccountID(t.watching_broadcast_accountid()).ConvertTo64BitString();c&&u.b.stream[c]?(this.m_broadcastAccountId=t.watching_broadcast_accountid(),this.m_broadcastAppId=t.watching_broadcast_appid(),this.m_broadcastViewerCount=t.watching_broadcast_viewers(),this.m_strBroadcastTitle=t.watching_broadcast_title()):(this.m_broadcastAccountId=0,this.m_broadcastAppId=0,this.m_broadcastViewerCount=0,this.m_strBroadcastTitle="")}this.m_bNameInitialized&&this.m_bStatusInitialized&&(this.m_bInitialized=!0)},e.prototype.GetAccountID=function(){return this.m_steamid.GetAccountID()},Object.defineProperty(e.prototype,"is_online",{get:function(){return 0!=this.m_ePersonaState&&7!=this.m_ePersonaState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_ingame",{get:function(){return this.is_online&&(0!=this.m_unGamePlayedAppID||"0"!=this.m_gameid)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_watchingbroadcast",{get:function(){return!!this.m_broadcastAccountId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_in_nonsteam_game",{get:function(){return 0==this.m_unGamePlayedAppID&&"0"!=this.m_gameid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_in_joinable_game",{get:function(){return this.has_joinable_game_flag||this.is_in_valid_lobby||this.has_server_ip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_joinable_game_flag",{get:function(){return 0!=(2&this.m_unPersonaStateFlags)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_in_valid_lobby",{get:function(){return this.m_game_lobby_id&&"0"!=this.m_game_lobby_id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_server_ip",{get:function(){return 0!=this.m_unGameServerIP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_awayOrSnooze",{get:function(){return 3==this.m_ePersonaState||4==this.m_ePersonaState},enumerable:!0,configurable:!0}),e.prototype.HasStateFlag=function(e){return 0!=(this.m_unPersonaStateFlags&e)},Object.defineProperty(e.prototype,"last_seen_online",{get:function(){return this.m_rtLastSeenOnline},enumerable:!0,configurable:!0}),e.prototype.ClearStateOnDisconnect=function(){0!=this.m_ePersonaState&&this.Reset()},Object.defineProperty(e.prototype,"is_golden",{get:function(){return this.HasStateFlag(4)},enumerable:!0,configurable:!0}),e.prototype.GetCurrentGameName=function(){return this.m_strGameExtraInfo?this.m_strGameExtraInfo:this.m_unGamePlayedAppID?a.a.GetAppInfo(this.m_unGamePlayedAppID).name:""},e.prototype.GetCurrentGameIconURL=function(){return this.m_unGamePlayedAppID?a.a.GetAppInfo(this.m_unGamePlayedAppID).icon_url:""},e.prototype.GetCurrentGameLogoURL=function(){return this.m_unGamePlayedAppID?a.a.GetAppInfo(this.m_unGamePlayedAppID).logo_url:""},e.prototype.GetBroadcastGameLogoURL=function(){return this.m_broadcastAppId?a.a.GetAppInfo(this.m_broadcastAppId).logo_url:""},e.prototype.BIsAppInfoReady=function(){return!this.m_unGamePlayedAppID||a.a.GetAppInfo(this.m_unGamePlayedAppID).is_initialized},e.prototype.HasCurrentGameRichPresence=function(){return this.m_mapRichPresence.has("steam_display")},e.prototype.GetCurrentGameRichPresence=function(){if(this.HasCurrentGameRichPresence()){var e=a.a.GetRichPresenceLoc(this.m_unGamePlayedAppID);if(e){var t=this.m_mapRichPresence.get("steam_display");return e.Localize(t,this.m_mapRichPresence)}}return""},e.prototype.GetOfflineStatusUpdateRate=function(){if(0==this.last_seen_online)return 3e4;var e=1e3,t=a.a.CMInterface.GetServerRTime32()-this.last_seen_online;return e*=86400<t?3600:7200<t?60:15},e.prototype.GetOfflineStatusTime=function(){if(0==this.last_seen_online)return Object(c.c)("#PersonaStateOffline");var e=this.GetOfflineStatusUpdateRate();(!i.b.IN_MOBILE||e<=60)&&Object(s.a)(e);var t=a.a.CMInterface.GetServerRTime32()-this.last_seen_online;return t<60?Object(c.c)("#PersonaStateLastSeen_JustNow"):Object(c.c)("#PersonaStateLastSeen",Object(c.f)(t))},e.prototype.GetLocalizedOnlineStatus=function(){switch(this.m_ePersonaState){case 0:case 7:return this.GetOfflineStatusTime();case 1:return Object(c.c)("#PersonaStateOnline");case 2:return Object(c.c)("#PersonaStateBusy");case 3:return Object(c.c)("#PersonaStateAway");case 4:return Object(c.c)("#PersonaStateSnooze");case 5:return Object(c.c)("#PersonaStateLookingToTrade");case 6:return Object(c.c)("#PersonaStateLookingToPlay");default:return""}},Object.defineProperty(e.prototype,"has_public_party_beacon",{get:function(){return this.m_mapRichPresence.has("__beacon")&&this.is_ingame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_group",{get:function(){return this.m_mapRichPresence.has("steam_player_group")?this.m_mapRichPresence.get("steam_player_group"):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_group_size",{get:function(){return this.m_mapRichPresence.has("steam_player_group_size")?Number.parseInt(this.m_mapRichPresence.get("steam_player_group_size")):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"online_state",{get:function(){return this.is_online?this.is_golden?"golden":this.is_ingame?"in-game":this.m_broadcastAccountId?"watchingbroadcast":"online":"offline"},enumerable:!0,configurable:!0}),e.prototype.BHasAvatarSet=function(){return this.m_strAvatarHash!=m},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return d(this.m_strAvatarHash)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return d(this.m_strAvatarHash,"medium")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return d(this.m_strAvatarHash,"full")},enumerable:!0,configurable:!0}),e.SortStatusComparator=function(e,t,n){if(t.has_public_party_beacon){if(!n.has_public_party_beacon)return-1}else{if(n.has_public_party_beacon)return 1;if(t.is_ingame){if(!n.is_ingame)return-1;if(!e)return 0;if(t.is_awayOrSnooze){if(!n.is_awayOrSnooze)return 1}else if(n.is_awayOrSnooze)return-1}else if(n.is_ingame)return 1}if(t.is_online){if(!n.is_online)return-1}else if(n.is_online)return 1;if(e)if(t.is_awayOrSnooze){if(!n.is_awayOrSnooze)return 1}else if(n.is_awayOrSnooze)return-1;return 0},Object(o.c)([r.x],e.prototype,"m_bInitialized",void 0),Object(o.c)([r.x],e.prototype,"m_ePersonaState",void 0),Object(o.c)([r.x],e.prototype,"m_unGamePlayedAppID",void 0),Object(o.c)([r.x],e.prototype,"m_gameid",void 0),Object(o.c)([r.x],e.prototype,"m_unPersonaStateFlags",void 0),Object(o.c)([r.x],e.prototype,"m_strPlayerName",void 0),Object(o.c)([r.x],e.prototype,"m_strAvatarHash",void 0),Object(o.c)([r.x],e.prototype,"m_rtLastSeenOnline",void 0),Object(o.c)([r.x],e.prototype,"m_strGameExtraInfo",void 0),Object(o.c)([r.x],e.prototype,"m_unGameServerIP",void 0),Object(o.c)([r.x],e.prototype,"m_unGameServerPort",void 0),Object(o.c)([r.x],e.prototype,"m_game_lobby_id",void 0),Object(o.c)([r.x],e.prototype,"m_broadcastId",void 0),Object(o.c)([r.x],e.prototype,"m_broadcastAccountId",void 0),Object(o.c)([r.x],e.prototype,"m_broadcastAppId",void 0),Object(o.c)([r.x],e.prototype,"m_broadcastViewerCount",void 0),Object(o.c)([r.x],e.prototype,"m_strBroadcastTitle",void 0),e}()},m1EC:function(e,t,n){},mQsC:function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return S});var o,i,c=n("mrSG"),r=n("q1tI"),a=n("ljid"),s=n("tkkQ"),l=n("okNM"),p=n("1VtQ"),u=n("oh5H"),m=n("lqmi"),d=n("uw3m"),h=n("az2Z"),f=n("s+DT"),_=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bSettingsChanged=!1,t.m_bCommunityPreferencesChanged=!1,t.state={friendSettings:Object.assign({},e.friendsSettingsInitial),communityPreferences:Object.assign({},e.communityPreferencesInitial)},t}return Object(c.d)(e,n),e.prototype.componentWillReceiveProps=function(e){for(var t={},n=0,o=Object.keys(e.friendsSettingsInitial);n<o.length;n++){var i=o[n];e.friendsSettingsInitial[i]!=this.props.friendsSettingsInitial[i]&&(t[i]=e.friendsSettingsInitial[i])}for(var r={},a=0,s=Object.keys(e.communityPreferencesInitial);a<s.length;a++){i=s[a];e.communityPreferencesInitial[i]!=this.props.communityPreferencesInitial[i]&&(r[i]=e.communityPreferencesInitial[i])}this.setState({friendSettings:Object(c.a)(Object(c.a)({},this.state.friendSettings),t),communityPreferences:Object(c.a)(Object(c.a)({},this.state.communityPreferences),r)})},e.prototype.OKToSwitchAway=function(){return!0},e.prototype.OnSubmit=function(){this.props.onSubmit(this.state.friendSettings,this.state.communityPreferences),this.m_bSettingsChanged=!1,this.m_bCommunityPreferencesChanged=!1},e.prototype.HandleRadioChange=function(e){this.setState({friendSettings:Object(c.a)(Object(c.a)({},this.state.friendSettings),{nChatFlashMode:parseInt(e.currentTarget.value)})}),this.m_bSettingsChanged=!0},e.prototype.OnSettingToggled=function(e,t){var n;this.setState({friendSettings:Object(c.a)(Object(c.a)({},this.state.friendSettings),(n={},n[e]=t,n))}),this.m_bSettingsChanged=!0},e.prototype.OnCommunityPreferenceToggled=function(e,t){var n;this.setState({communityPreferences:Object(c.a)(Object(c.a)({},this.state.communityPreferences),(n={},n[e]=t,n))}),this.m_bCommunityPreferencesChanged=!0},e.prototype.componentDidUpdate=function(e,t){this.props.bSubmitImmediate&&(this.m_bSettingsChanged||this.m_bCommunityPreferencesChanged)&&this.props.onSubmit(this.state.friendSettings,this.state.communityPreferences),this.m_bSettingsChanged=!1,this.m_bCommunityPreferencesChanged=!1},e.prototype.FriendsSettingsToggleRow=function(t){var n=this;return r.createElement(a.u,{key:t.strName,onChange:function(e){n.OnSettingToggled(t.strName,e)},label:t.strLabel,checked:!!this.state.friendSettings[t.strName],description:t.strDesc?t.strDesc:""})},e.prototype.FriendsSettingsCheckbox=function(t){var n=this;return r.createElement(a.e,{key:t.strName,onChange:function(e){n.OnSettingToggled(t.strName,e)},checked:!!this.state.friendSettings[t.strName]})},e.prototype.FriendsSettingsCommunityPreferenceToggleRow=function(t){var n=this;return r.createElement(a.u,{key:"CommunityPreference"+t.strName,onChange:function(e){n.OnCommunityPreferenceToggled(t.strName,e)},label:t.strLabel,checked:!!this.state.communityPreferences[t.strName],description:t.strDesc?t.strDesc:""},t.children)},Object(c.c)([p.a],e.prototype,"OnSubmit",null),Object(c.c)([p.a],e.prototype,"HandleRadioChange",null),Object(c.c)([p.a],e.prototype,"OnSettingToggled",null),Object(c.c)([p.a],e.prototype,"OnCommunityPreferenceToggled",null),Object(c.c)([p.a],e.prototype,"FriendsSettingsToggleRow",null),Object(c.c)([p.a],e.prototype,"FriendsSettingsCheckbox",null),Object(c.c)([p.a],e.prototype,"FriendsSettingsCommunityPreferenceToggleRow",null),e}(a.w);(i=o||(o={}))[i.k_EChatFontSizeSmall=1]="k_EChatFontSizeSmall",i[i.k_EChatFontSizeDefault=2]="k_EChatFontSizeDefault",i[i.k_EChatFontSizeLarge=3]="k_EChatFontSizeLarge";var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props.bParenthesizeNicknames,t=Object(u.c)("#FriendSettings_ExampleFriend"),n=Object(u.c)("#FriendSettings_ExampleNickname"),o=new m.b(new f.a);return o.m_strPlayerName=t,o.m_ePersonaState=1,o.m_strAvatarHash=m.c,r.createElement("div",{className:"friend online friendSettingsFakeFriend"},r.createElement(d.b,{className:"fakeFriendAvatar",persona:o,statusPosition:"right"}),r.createElement(h.a,{className:"labelHolder",persona:o,eFriendRelationship:3,bIsSelf:!1,strNickname:n,bParenthesizeNicknames:e,bCompactView:!1}))},t}(r.Component),b=function(t){function e(e){return t.call(this,e)||this}return Object(c.d)(e,t),e.prototype.SetChatFontSize=function(e){this.setState({friendSettings:Object(c.a)(Object(c.a)({},this.state.friendSettings),{nChatFontSize:e})}),this.m_bSettingsChanged=!0},e.prototype.render=function(){var e=this,t=this.FriendsSettingsToggleRow,n=this.state.friendSettings.nChatFontSize;return r.createElement(a.k,{className:"DialogBody",onSubmit:this.OnSubmit},r.createElement("div",{className:"SettingsGroup"},r.createElement(t,{strName:"bCompactFriendsList",strLabel:Object(u.c)("#FriendSettings_CompactFriendsAndChat")}),r.createElement(t,{strName:"bCompactQuickAccess",strLabel:Object(u.c)("#FriendSettings_CompactQuickAccess")}),r.createElement(a.p,{className:"friendSettingsSubheader"},Object(u.c)("#FriendSettings_ChatFontSize")),r.createElement(a.C,{className:"FriendsSettingsChatFontSizeSection_ButtonRow"},r.createElement(a.d,{className:"smallFontSetting "+(n==o.k_EChatFontSizeSmall?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(o.k_EChatFontSizeSmall)}},Object(u.c)("#FriendSetting_ChatFontSmall")),r.createElement(a.d,{className:"defaultFontSetting "+(n==o.k_EChatFontSizeDefault?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(o.k_EChatFontSizeDefault)}},Object(u.c)("#FriendSetting_ChatFontDefault")),r.createElement(a.d,{className:"largeFontSetting "+(n==o.k_EChatFontSizeLarge?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(o.k_EChatFontSizeLarge)}},Object(u.c)("#FriendSetting_ChatFontLarge")))),!this.props.bSubmitImmediate&&r.createElement(a.t,{onCancel:this.props.onCancel}))},Object(c.c)([p.a],e.prototype,"SetChatFontSize",null),e=Object(c.c)([l.a],e)}(_),v=function(t){function e(e){return t.call(this,e)||this}return Object(c.d)(e,t),e.prototype.render=function(){var e=this.FriendsSettingsToggleRow,t=s.a.IN_CLIENT?"#FriendSettings_RememberOpenChats_DescClient":"#FriendSettings_RememberOpenChats_Desc";return r.createElement(a.k,{className:"DialogBody",onSubmit:this.OnSubmit},r.createElement("div",{className:"SettingsGroup"},this.props.bShowPopupOpts&&r.createElement(e,{strName:"bAlwaysNewChatWindow",strLabel:Object(u.c)("#FriendSettings_AlwaysNewChatWindow")}),r.createElement(e,{strName:"bDisableEmbedInlining",strLabel:Object(u.c)("#FriendSettings_DisableEmbedInlining")}),r.createElement(e,{strName:"bRememberOpenChats",strLabel:Object(u.c)("#FriendSettings_RememberOpenChats"),strDesc:Object(u.c)(t)}),r.createElement(e,{strName:"b24HourClock",strLabel:Object(u.c)("#FriendSettings_AlwaysUse24HourClock")}),r.createElement(e,{strName:"bDisableSpellcheck",strLabel:Object(u.c)("#FriendSettings_DisableSpellcheck")})))},e=Object(c.c)([l.a],e)}(_),S=function(t){function e(e){return t.call(this,e)||this}return Object(c.d)(e,t),e.prototype.render=function(){var e=this.FriendsSettingsToggleRow,t=this.FriendsSettingsCommunityPreferenceToggleRow;return r.createElement(a.k,{className:"DialogBody",onSubmit:this.OnSubmit},r.createElement("div",{className:"SettingsGroup"},r.createElement(t,{strName:"bParenthesizeNicknames",strLabel:Object(u.c)("#FriendSettings_ParenthesizeNicknames")},r.createElement(g,{bParenthesizeNicknames:this.state.communityPreferences.bParenthesizeNicknames})),r.createElement(e,{strName:"bCategorizeInGameFriendsByGame",strLabel:Object(u.c)("#FriendSettings_CategorizeInGameFriendsByGame")}),r.createElement(e,{strName:"bHideOfflineFriendsInTagGroups",strLabel:Object(u.c)("#FriendSettings_HideOfflineFriendsInCategories")}),r.createElement(e,{strName:"bHideCategorizedFriends",strLabel:Object(u.c)("#FriendSettings_HideCategorizedFriends")}),r.createElement(e,{strName:"bForceAlphabeticFriendSorting",strLabel:Object(u.c)("#FriendSettings_SortFriendsByStatus")}),this.props.bDoNotDisturbSupported&&r.createElement(e,{strName:"bSignIntoFriends",strLabel:Object(u.c)("#FriendSettings_SignInToFriends")})))},e=Object(c.c)([l.a],e)}(_)},mrSG:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"g",function(){return p});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function s(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(r<3?i(a):3<r?i(t,n,a):i(t,n))||a);return 3<r&&a&&Object.defineProperty(t,n,a),a}function c(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})}function l(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function p(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o}},oh5H:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var l=n("mrSG"),p=n("q1tI"),o=(n("Gp1o"),n("XaMz"),n("ujHl")),i=n("0N1H"),r=n("1n9R"),a=function(){function e(){this.m_mapTokens=new Map,this.m_mapFallbackTokens=new Map}return e.prototype.InitFromObjects=function(n,o,i,r,e){var a=this;e||this.m_mapTokens.clear(),i&&Object.keys(i).forEach(function(e,t){a.m_mapTokens.set(e,i[e])}),Object.keys(n).forEach(function(e,t){a.m_mapTokens.set(e,n[e])}),o&&Object.keys(o).forEach(function(e,t){a.m_mapTokens.has(e)||a.m_mapTokens.set(e,o[e]),a.m_mapFallbackTokens.set(e,o[e])}),r&&Object.keys(r).forEach(function(e,t){a.m_mapTokens.has(e)||a.m_mapTokens.set(e,r[e]),a.m_mapFallbackTokens.has(e)||a.m_mapFallbackTokens.set(e,r[e])})},e.prototype.InitDirect=function(n,o){var i=this;this.m_mapTokens.clear(),this.m_mapFallbackTokens.clear(),Object.keys(n).forEach(function(e,t){i.m_mapTokens.set(e,n[e])}),o&&Object.keys(o).forEach(function(e,t){i.m_mapTokens.has(e)||i.m_mapTokens.set(e,o[e]),i.m_mapFallbackTokens.set(e,o[e])})},e.prototype.GetPreferredLocales=function(){return this.m_rgLocalesToUse?this.m_rgLocalesToUse:navigator&&navigator.languages?navigator.languages:["en-US"]},e.prototype.GetELanguageFallbackOrder=function(){var t=new Array;return t.push(Object(i.d)(r.b.LANGUAGE)),(r.b.SUPPORTED_LANGUAGES||[]).forEach(function(e){e.value!=r.b.LANGUAGE&&t.push(Object(i.d)(e.value))}),t},e.prototype.SetPreferredLocales=function(e){this.m_rgLocalesToUse=e},e.prototype.LocalizeString=function(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";var t=this.m_mapTokens.get(e.substring(1));return void 0===t?"":t},e.prototype.LocalizeStringFromFallback=function(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";var t=this.m_mapFallbackTokens.get(e.substring(1));return void 0===t?"":t},e}();function s(e){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];var n=h.LocalizeString(e);return n?(0<o.length&&(n=n.replace(/%(\d+)\$s/g,function(e,t){if(t<=o.length&&1<=t){var n=o[t-1];return String(null==n?"":n)}return e})),n):e}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=h.LocalizeString(e);if(!o)return e;for(var i,r=[],a=/(.*?)%(\d+)\$s/g,s=0;i=a.exec(o);){s+=i[0].length,r.push(i[1]);var c=parseInt(i[2]);1<=c&&c<=t.length&&r.push(t[c-1])}return r.push(o.substr(s)),p.createElement.apply(p,Object(l.g)([p.Fragment,null],r))}function u(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return s.apply(void 0,1===t||"1"===t?Object(l.g)([e,t],n):Object(l.g)([e+"_Plural",t],n))}function m(e,t){void 0===t&&(t=!1);var n=t?"#TimeInterval_":"#TimeSince_";return e>=2*o.b.PerYear?s(n+"XYears",Math.floor(e/o.b.PerYear)):e>=o.b.PerYear?(e-=o.b.PerYear)>=2*o.b.PerMonth?s(n+"1YearXMonths",Math.floor(e/o.b.PerMonth)):s(n+"1Year"):e>=2*o.b.PerMonth?s(n+"XMonths",Math.floor(e/o.b.PerMonth)):e>=2*o.b.PerWeek?s(n+"XWeeks",Math.floor(e/o.b.PerWeek)):e>=o.b.PerWeek?s(n+"1Week",Math.floor(e/o.b.PerWeek)):e>=2*o.b.PerDay?s(n+"XDays",Math.floor(e/o.b.PerDay)):e>=o.b.PerDay?(e-=o.b.PerDay)>=2*o.b.PerHour?s(n+"1DayXHours",Math.floor(e/o.b.PerHour)):s(n+"1Day"):e>=2*o.b.PerHour?s(n+"XHours",Math.floor(e/o.b.PerHour)):e>=o.b.PerHour?(e-=o.b.PerHour)>=2*o.b.PerMinute?s(n+"1HourXMinutes",Math.floor(e/o.b.PerMinute)):s(n+"1Hour"):e>=2*o.b.PerMinute?s(n+"XMinutes",Math.floor(e/o.b.PerMinute)):e>=o.b.PerMinute?s(n+"1Minute"):s(n+"LessThanAMinute")}new Map,new Map;new Map,new Map,new Map,new Map;var d={english:"en",german:"de",french:"fr",italian:"it",korean:"ko",latam:"es-419",spanish:"es",schinese:"zh-cn",tchinese:"zh-tw",russian:"ru",thai:"th",japanese:"ja",brazilian:"pt-br",portuguese:"pt",polish:"pl",danish:"da",dutch:"nl",finnish:"fi",norwegian:"no",swedish:"sv",hungarian:"hu",czech:"cs",romanian:"ro",turkish:"tr",arabic:"ar",bulgarian:"bg",greek:"el",ukrainian:"uk",vietnamese:"vn"},h=new a;window.LocalizationManager=h},q8zB:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAWhJREFUeNrMlLEuREEUhv9BKOxu6EXrAWQRISqJWhQKlHQiEo8gEYVOYXNJZC3RqxUqEoKKamXFA5CQyLL5FM5uxu7sbLOFk9zkzsx/vznn/nPGAWpndKjNUQM65/48ksYkHUgqSfqSVJZUlJSTlA3ofwOQXzaQBk5oHUdApoHjAw123QL07b1fVaHNgLHM7oFRIAMMetpCEAhMRGDvBkmATSt3yDIEGAkB8xHgGTAHzFg2KWAHWLP1XJXT5Tk+FTkNe5IqktI27jXnu2083eCylfMRyC4xnQO2gV1g337Bg2nKzUzpszIeTXQOpPxU7SRMAhfepmGg95ED+oFFYNmbnwdeA1U8hUxZBRaAnjr4hh2Xw4hpNVP8Xr6VlJf0AswCAzbfKWlY0lLEtCTYesCp7fgMrABbwDpwGcmu0Kr1bkz4CdwBbxFYvPVsIQMct+VyqDNj3IwoARU7GkUzIBvQC5D79zf2zwD3iiwiPxUy2wAAAABJRU5ErkJggg=="},r6f6:function(e,t,n){e.exports={miniProfile:"miniprofile_miniProfile_s5zcg",miniProfileContent:"miniprofile_miniProfileContent_25Sge",miniProfileHeader:"miniprofile_miniProfileHeader_3oBIW",miniProfilePlayer:"miniprofile_miniProfilePlayer_3cN6K",playerContent:"miniprofile_playerContent_PV11V",miniProfileBackground:"miniprofile_miniProfileBackground_3gfFJ",miniProfileBackgroundBlur:"miniprofile_miniProfileBackgroundBlur_G000o",miniProfileBlocked:"miniprofile_miniProfileBlocked_1fKEq",miniProfileNotFriends:"miniprofile_miniProfileNotFriends_7gGbH",notFriends:"miniprofile_notFriends_nfBN5",SnoozeContainer:"miniprofile_SnoozeContainer_2HCB2",miniProfileHover:"miniprofile_miniProfileHover_2P8wD",miniprofile_arrow:"miniprofile_miniprofile_arrow_38UVn",left:"miniprofile_left_qVPF2",playerAvatar:"miniprofile_playerAvatar_1dzWG",avatarStatus:"miniprofile_avatarStatus_23H45",miniProfileAvatarStatus:"miniprofile_miniProfileAvatarStatus_1VgK8",personaName:"miniprofile_personaName_W3QjS",hasNickname:"miniprofile_hasNickname_dgG-l",personaNameLabel:"miniprofile_personaNameLabel_390p4",nickName:"miniprofile_nickName_2E8Iz",persona:"miniprofile_persona_1Z3Ey",personaAndIcons:"miniprofile_personaAndIcons_2OhlV",awayStatusLabel:"miniprofile_awayStatusLabel_2UzRy",nickname:"miniprofile_nickname_1W3dU",playerNicknameBracket:"miniprofile_playerNicknameBracket_1bkKo",notInOrWatchingGame:"miniprofile_notInOrWatchingGame_3AIC2",miniProfileBottom:"miniprofile_miniProfileBottom_3Agb6",miniProfileGameContainer:"miniprofile_miniProfileGameContainer_2FyZH",gameLogo:"miniprofile_gameLogo_2B0di",ingame:"miniprofile_ingame_3H2mq",richPresence:"miniprofile_richPresence_1rud4",gameState:"miniprofile_gameState_2Va3_",golden:"miniprofile_golden_3cUbZ",watchingbroadcast:"miniprofile_watchingbroadcast_24vwG",watchingbroadcastThumbnail:"miniprofile_watchingbroadcastThumbnail_3EoM-",gameContent:"miniprofile_gameContent_3x24t",miniProfileFeaturedContainer:"miniprofile_miniProfileFeaturedContainer_3ljT4",favoriteBadgeIcon:"miniprofile_favoriteBadgeIcon_icnrU",badgeIcon:"miniprofile_badgeIcon_2TBf0",featuredLabels:"miniprofile_featuredLabels_1dGw1",friendPlayerLevelNum:"miniprofile_friendPlayerLevelNum_2Ni_1",featuredTitle:"miniprofile_featuredTitle_2_2RA",mutualFriends:"miniprofile_mutualFriends_36Vl4",featuredSubTitle:"miniprofile_featuredSubTitle_2p8kJ"}},r95U:function(e,t,n){e.exports={scrollMaskVertical:"chatroomnotificationsettings_scrollMaskVertical_3HdsB"}},rWGG:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"c",function(){return y}),n.d(t,"a",function(){return C});var r=n("mrSG"),a=n("5FJe"),i=n("okNM"),s=n("q1tI"),c=n("i8i4"),l=n("JtU4"),b=n("/IDK"),p=n("oh5H"),o=n("1VtQ"),u=n("LAqV"),m=n("D3Kh"),d=n("s+DT"),h=n("xdma"),f=n("eMko"),_=n("8AUz");n("7oej");function g(e){return s.createElement(_.a,{target:e.target,className:"friendHover miniProfileHover",visibilityObserver:e.hoverInstance,onNoSpace:e.onNoSpace},s.createElement(y,{hoverInstance:e.hoverInstance}))}var v=function(o){function e(e){var t=o.call(this,e)||this,n=t.props.broadcastAccountID&&d.a.InitFromAccountID(t.props.broadcastAccountID);return t.state={broadcastInfo:n&&m.a.StartInfo(n.ConvertTo64BitString())},t}return Object(r.d)(e,o),e.prototype.componentDidUpdate=function(e){if(this.props.broadcastAccountID!==e.broadcastAccountID){this.state.broadcastInfo&&m.a.StopInfo(this.state.broadcastInfo);var t=this.props.broadcastAccountID&&d.a.InitFromAccountID(this.props.broadcastAccountID);this.setState({broadcastInfo:t&&m.a.StartInfo(t.ConvertTo64BitString())})}},e.prototype.componentWillUnmount=function(){this.state.broadcastInfo&&m.a.StopInfo(this.state.broadcastInfo)},e.prototype.render=function(){return this.state.broadcastInfo?s.createElement(h.a,{src:this.state.broadcastInfo.m_strThumbnailUrl}):null},e=Object(r.c)([i.a],e)}(s.Component),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=u.f.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(this.props.friend.steamid64);if(null==e)return s.createElement("div",null);for(var t=s.createElement("div",{className:"mutualFriendTitle"}," ",Object(p.c)("#FriendGroup_MutualFriends_Title")," "),n=[],o=Array.from(e),i=0;i<o.length&&i<10;i++){var r=u.f.FriendStore.GetFriend(o[i]);n.push(s.createElement("div",{className:"mutualFriend",key:r.steamid64},s.createElement("img",{className:"mutualFriendAvatar",src:r.persona.avatar_url_medium}),s.createElement("div",{className:"mutualFriendLabel"},r.display_name)))}return 10<=o.length&&n.push(s.createElement("div",{className:"mutualFriend"},s.createElement("div",{className:"mutualFriendLabel plusOthersLabel"},Object(p.d)("#FriendGroup_MutualFriends_Others",o.length-10)))),s.createElement("div",{className:"mutualFriendsContainer"}," ",t," ",s.createElement("div",null," ",n," ")," ")},t}(s.Component),y=function(t){function e(e){return t.call(this,e)||this}return Object(r.d)(e,t),e.prototype.render=function(){var e=this.props.hoverInstance.hover,t=e.persona,n={className:"miniProfileHoverInner",persona:e.persona,community_data_ready:e.community_data_ready};e.community_data_ready&&(n.community_data=e.community_data),t.is_watchingbroadcast&&(n.broadcast_description=e.friend.GetBroadcastDescription(),n.broadcast_thumbnail=s.createElement("div",{className:"watchingbroadcastThumbnail"},s.createElement(v,{broadcastAccountID:t.m_broadcastAccountId}))),e.friend.has_nickname&&(n.nickname=e.friend.nickname),n.is_friend=e.friend.is_friend||e.friend==u.f.FriendStore.self,n.is_blocked=e.friend.is_blocked,n.friend_relationship=e.friend.efriendrelationship;var o=s.createElement("div",null),i=this.props.hoverInstance.context;return i&&i.friendGroup&&i.friendGroup.m_eDisplayType==a.c.eIncomingInvites&&(o=s.createElement(S,{friend:e.friend})),n.mutual_friends=o,s.createElement(f.b,Object(r.a)({},n))},e=Object(r.c)([i.a],e)}(s.Component),C=function(i){function e(e,t,n){var o=i.call(this,{target:e,visibilityObserver:t,className:"friendHover miniProfileHover"},n)||this;return o.m_instance=t,o}return Object(r.d)(e,i),e.prototype.OnLoad=function(){},e.prototype.OnResize=function(){},e.prototype.OnClose=function(){},e.prototype.InternalRender=function(){return s.createElement(y,{hoverInstance:this.m_instance})},e}(function(o){function e(e,t){var n=o.call(this,"hoverpopup",{title:"hover",html_class:"HoverPopup client_chat_frame",body_class:"HoverPopupBody Hover"+e.className,replace_existing_popup:!0,target_browser:t,eCreationFlags:l.c.Tooltip})||this;return n.m_hoverProps=e,n}return Object(r.d)(e,o),e.prototype.UpdateParamsBeforeShow=function(e){var t=b.h(this.m_hoverProps.target.ownerDocument.defaultView,this.m_hoverProps.target.getBoundingClientRect());return e.dimensions={left:t.right,top:t.top,width:1,height:1},e.availscreenwidth=this.m_hoverProps.target.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_hoverProps.target.ownerDocument.defaultView.screen.availHeight,e},e.prototype.Render=function(e,t){var n=this.InternalRender();c.render(s.createElement(O,Object(r.a)({},this.m_hoverProps,{popup:e}),n),t)},e}(l.a)),O=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bNoSpace=!1,t.state={x:void 0,y:void 0,width:void 0,height:void 0,hoverPositionReady:!1},t}return Object(r.d)(e,n),e.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},e.prototype.componentDidUpdate=function(){this.positionHover()},e.prototype.componentWillReceiveProps=function(e){this.setState({hoverPositionReady:!1})},e.prototype.render=function(){var o=this,e=!this.props.visibilityObserver||this.props.visibilityObserver.visible;this.props.className,e&&this.state.hoverPositionReady,this.m_bNoSpace;return void 0!==this.state.x&&this.props.target.ownerDocument.defaultView.SteamClient.Window.GetWindowRestoreDetails(function(e){var t=o.state.x-o.props.target.ownerDocument.defaultView.screenX,n=o.state.y-o.props.target.ownerDocument.defaultView.screenY;try{o.props.popup.SteamClient.Window.PositionWindowRelative(e,t,n,o.state.width,o.state.height)}catch(e){console.error(e)}}),s.createElement("div",{className:"HoverPositionPopup",ref:this.bindHover},this.props.children)},e.prototype.positionHover=function(){var e=this.m_elHover,t=this.props.target;if(e&&t&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var n=this.props.popup,o=t.ownerDocument.defaultView;if(n&&!n.closed){var i=b.h(o,t.getBoundingClientRect()),r=b.h(n,e.getBoundingClientRect()),a=i.left,s=i.top,c=n.screen,l=0;c.availLeft&&(l=c.availLeft);var p=i.right+r.width+2,u=n.screen.availWidth+l-p,m=i.left-r.width-l;a=u<2&&u<m?i.left-r.width-3+3:i.left+i.width- -3;var d=0;i.height<48&&(d=Math.floor(i.height/2)-24),s=i.top-15+d;if(i.top+r.height+0>n.screen.availHeight){var h=r.height+0-(n.screen.availHeight-i.top),f=null!=e.querySelector(".miniprofile_ingame")?78:24;h=Math.min(r.height-f,h),s=i.top-h}a=Math.floor(a),s=Math.floor(s);var _=Math.ceil(r.width),g=Math.ceil(r.height);a!=this.state.x&&this.setState({x:a}),s!=this.state.y&&this.setState({y:s}),_!=this.state.width&&this.setState({width:_}),g!=this.state.height&&this.setState({height:g}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},Object(r.c)([o.a],e.prototype,"bindHover",null),e=Object(r.c)([i.a],e)}(s.Component)},rsEv:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var h=n("mrSG"),l=n("tkkQ"),p=n("4HGb"),u=n("RBVV"),I=n("7sd/"),s=n("2vnA"),f=n("oh5H"),a=n("/SYB"),o=n("tZiA"),c=(n("5Nu3"),n("5FJe")),_=n("LAqV"),i=n("1VtQ"),m=n("/FkP"),d=n("J0bI"),g=n("WpBz"),b=n("XaMz"),v=n("9Eit"),r=function(r){function e(e,t,n,o){var i=r.call(this,e.FriendStore,e,e.CMInterface)||this;return i.LOG=a.b.create(function(){return i.unique_id},!1),i.m_unSortOrder=0,i.m_lastChatLink=null,i.m_groupVoiceActiveMembers=new c.b(Object(f.c)("#Chat_MemberGroup_VoiceChatting")),i.m_eDesktopNotificationLevel=0,i.m_eMobileNotificationLevel=0,i.m_bUnreadIndicatorMuted=!1,i.m_group=t,i.m_ulGroupID=t.GetGroupID(),i.m_ulChatID=n,i.m_bIsDefaultForGroup=o,i.m_groupVoiceActiveMembers.SetOnHeaderClick(i.StartVoiceChat),i.m_MessageSendQueue=new v.a(i.m_ulGroupID+"."+i.m_ulChatID),i.m_MessageSendQueue.InitFromStorage().then(function(){return i.InitQueuedMessages()}),i}return Object(h.d)(e,r),Object.defineProperty(e.prototype,"VoiceChatStore",{get:function(){return this.ChatStore.VoiceChat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unread_message_count",{get:function(){switch(this.GetPlatformNotificationLevel()){case 4:return this.m_cUnreadChatMessages;case 3:case 2:return this.has_unread_mention?1:0;case 1:case 0:default:return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_last_activity",{get:function(){var e=this.GetPlatformNotificationLevel(),t=0,n=this.m_rtFirstUnread||this.time_last_ack;switch(n&&(t=Math.max(n,t)),e){case 4:t=Math.max(this.time_last_message||0,t);break;case 3:case 2:t=Math.max(this.time_last_mention||0,t);break;case 1:case 0:break;default:Object(b.a)(!1,"unhandled EChatRoomNotificationLevel: "+e)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_unread_messages",{get:function(){return this.BIsUnreadIndicatorMuted()?0<this.unread_message_count:this.has_any_unread_messages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_any_unread_messages",{get:function(){return 0<this.m_cUnreadChatMessages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_unread_mention",{get:function(){return this.m_rtLastMention>this.m_rtLastAckedChatMsg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_last_mention",{get:function(){return this.m_rtLastMention},enumerable:!0,configurable:!0}),e.prototype.BHasAckedChatMsg=function(){return this.m_rtLastAckedChatMsg&&0!=this.m_rtLastAckedChatMsg},e.prototype.LoadChatLogs=function(){return r.prototype.LoadChatLogs.call(this)},e.prototype.GetMessagesFromTimeRange=function(e,t,n,o,i){var r=this,a=p.b.Init(u.s);return a.Body().set_chat_group_id(this.m_ulGroupID),a.Body().set_chat_id(this.m_ulChatID),a.Body().set_max_count(i),a.Body().set_start_time(e),a.Body().set_start_ordinal(t),a.Body().set_last_time(n),a.Body().set_last_ordinal(o),this.LOG("trying to load "+i+" messages in range "+e+":"+t+" - "+n+":"+o),u.V.GetMessageHistory(this.m_ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){var t=e.GetEResult();if(1!=t)throw t;return{messages:r.GetMessagesFromResponse(e),moreAvailable:e.Body().more_available()}})},e.prototype.GetMessagesFromResponse=function(e){for(var t=e.Body().messages(),n=[],o=t.length-1;0<=o;o--){var i=t[o],r=i.server_message().message()||0,a=void 0,s=void 0;if(0!=r){if(r=i.server_message().message(),a=i.server_message().string_param(),s=i.server_message().accountid_param(),!Object(m.j)(r)){this.LOG("unrenderable message "+r);continue}}else if(!i.message()||0==i.message().trim().length)continue;var c=new m.d(i.sender(),i.server_timestamp(),i.ordinal()||0,i.message(),r,a,s);i.deleted()&&(c.eDeleteState=m.e.Deleted),n.push(c)}return n},e.prototype.GetBBCodeParser=function(){return this.m_ChatStore.ChatRoomBBCodeParser},e.prototype.AckChatMsgOnServer=function(e){var t=p.b.Init(u.c);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_chat_id(this.m_ulChatID),t.Body().set_timestamp(e),u.V.AckChatMessage(this.m_CMInterface.GetServiceTransport(),t)},e.prototype.GetPlatformNotificationLevel=function(){return l.a.IN_MOBILE?this.GetMobileNotificationLevel():this.GetDesktopNotificationLevel()},e.prototype.GetDesktopNotificationLevel=function(){return 0==this.m_eDesktopNotificationLevel?this.m_group.GetDesktopNotificationLevel():this.m_eDesktopNotificationLevel},e.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eMobileNotificationLevel?this.m_group.GetMobileNotificationLevel():this.m_eMobileNotificationLevel},e.prototype.BIsUnreadIndicatorMuted=function(){return this.m_group.BIsUnreadIndicatorMuted()},e.prototype.GetDesktopNotificationLevelSetting=function(){return this.m_eDesktopNotificationLevel},e.prototype.GetMobileNotificationLevelsetting=function(){return this.m_eMobileNotificationLevel},e.prototype.UpdateUserState=function(e){this.m_rtLastAckedChatMsg=e.time_last_ack(),this.m_rtLastMention=e.time_last_mention(),this.m_eDesktopNotificationLevel=e.desktop_notification_level(),this.m_eMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted(),this.m_rtFirstUnread=e.time_first_unread(),(this.m_rtLastAckedChatMsg||0)<this.m_rtLastMessageReceived&&(this.m_cUnreadChatMessages=1,this.m_rtLastAckedChatMsg&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastAckedChatMsg+1),_.f.FriendStore.UpdateUnreadMessagesGlobal())},e.prototype.UpdateChatState=function(e){var n=this;Object(b.a)(this.m_ulChatID==e.chat_id(),"State for different chat room"),this.m_strName=e.chat_name(),this.m_bVoiceAllowed=e.voice_allowed();for(var t=!1,o=!1,i=this.m_FriendStore.self.accountid,r=new Set(this.m_groupVoiceActiveMembers.GetCurrentMemberSet()),a=0,s=e.members_in_voice();a<s.length;a++){var c=s[a];r.delete(c)||(this.m_groupVoiceActiveMembers.AddMember(c),c!=i&&(t=!0))}r.forEach(function(e){n.m_groupVoiceActiveMembers.RemoveMember(e);var t=n.m_groupVoiceActiveMembers.HasMember(e);n.VoiceChatStore.OnUserLeftChatRoomVoiceChat(n.m_ulGroupID,n.m_ulChatID,e,t),e!=i&&(o=!0)}),this.BVoiceActive()&&(t?_.f.AudioPlaybackManager.PlayAudioURL(l.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_enter.m4a?v=1"):o&&_.f.AudioPlaybackManager.PlayAudioURL(l.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1")),this.m_rtLastMessageReceived=e.time_last_message(),this.m_strLastMessage=e.last_message(),this.m_accountIDLastMessage=e.accountid_last_message(),this.m_unSortOrder=e.sort_order()},Object.defineProperty(e.prototype,"voice_active_member_list",{get:function(){return this.m_groupVoiceActiveMembers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voice_active_contains_friends",{get:function(){for(var e=0;e<this.m_groupVoiceActiveMembers.member_list.length;e++)if(this.m_groupVoiceActiveMembers.member_list[e].is_friend||this.m_groupVoiceActiveMembers.member_list[e]==_.f.FriendStore.self)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voice_active_contains_self",{get:function(){for(var e=0;e<this.m_groupVoiceActiveMembers.member_list.length;e++)if(this.m_groupVoiceActiveMembers.member_list[e]==_.f.FriendStore.self)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voice_active_contains_only_self",{get:function(){return 1==this.m_groupVoiceActiveMembers.member_list.length&&this.m_groupVoiceActiveMembers.member_list[0]==_.f.FriendStore.self},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.IsDefaultRoomForGroup()?"Home":this.IsUnsavedVoiceChannel()?Object(f.c)("#Chat_CreateChatChannel_DefaultName"):this.m_strName},enumerable:!0,configurable:!0}),e.prototype.IsUnsavedVoiceChannel=function(){return!(0!=this.m_strName.length||!this.m_bVoiceAllowed)},e.prototype.GetParentGroupID=function(){return this.m_ulGroupID},e.prototype.GetGroup=function(){return this.m_group},e.prototype.IsDefaultRoomForGroup=function(){return this.m_bIsDefaultForGroup},e.prototype.GetRoomID=function(){return this.m_ulChatID},e.prototype.BIsDefaultRoom=function(){return this.m_bIsDefaultForGroup},Object.defineProperty(e.prototype,"unique_id",{get:function(){return"cr"+this.m_ulChatID},enumerable:!0,configurable:!0}),e.prototype.GetVoiceAllowed=function(){return this.m_bVoiceAllowed},e.prototype.IsTempVoiceRoom=function(){return!!this.GetVoiceAllowed()&&(!this.m_strName||0==this.m_strName.length)},e.prototype.GetSortOrder=function(){return this.m_unSortOrder},e.prototype.InsertBBCodeMarkup=function(e){(e=Object(I.f)(e)).replace(/＠/g,"@");for(var t=e.indexOf("@");-1!==t;){for(var n=e.indexOf("@",t+1),o=e.indexOf(" ",t+1),i=Math.min(-1===n?e.length:n,-1===o?e.length:o),r=e.substr(t+1,i-t-1).toLocaleLowerCase(),a=void 0,s=void 0,c=0,l=this.GetChatRoomGroup().memberList.member_list_unsorted;c<l.length;c++){var p=l[c],u=Object(I.f)(p.player_name_normalized),m=u+"#"+p.accountid.toString(36);if(m.startsWith(r)){var d=void 0,h=m.length===r.length,f=h||u.length===r.length;(f||h)&&(d=r.length),!h&&e.length-t-1>=m.length&&e.substr(t+1,u.length).toLocaleLowerCase()===m&&(f=h=!0,d=m.length),!f&&e.length-t-1>=u.length&&e.substr(t+1,u.length).toLocaleLowerCase()===u&&(d=u.length),d&&(void 0===s||s<=d)&&(a=p,s=d)}}var _=!1;this.GetChatRoomGroup().BCanIMentionAll()&&(_="online"==r||"online#0"==r||"all"==r||"all#0"==r);var g=void 0,b=void 0,v=void 0;if(_&&(void 0===s||s<=r.length)){var S=r;-1!==r.indexOf("#")&&(S=r.substr(0,r.indexOf("#"))),b=g=S,v=r.length,"online"==g&&(g="here")}else a&&void 0!==s&&(g=""+a.accountid,b=a.persona.m_strPlayerName,v=s);if(b&&void 0!==v){var y=e.substr(0,t),C=e.substr(t+1+v),O="[mention="+g+"]@"+Object(I.f)(b)+"[/mention]";n=(e=y+O+C).indexOf("@",y.length+O.length)}t=n}return e},e.prototype.StartVoiceChat=function(){this.BVoiceActive()||this.ChatStore.VoiceChat.InitiateRoomChat(this.m_ulGroupID,this.m_ulChatID)},e.prototype.ToggleVoiceChat=function(){this.BVoiceActive()?this.ChatStore.VoiceChat.OnUserEndVoiceChat():this.StartVoiceChat()},e.prototype.BVoiceActive=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForRoom(this.m_ulGroupID,this.m_ulChatID)},e.prototype.SendChatMessageInternal=function(s){return Object(h.b)(this,void 0,void 0,function(){var t,n,o,i,r,a=this;return Object(h.e)(this,function(e){switch(e.label){case 0:return this.GetChatRoomGroup().BCanChat()?(n=this.InsertBBCodeMarkup(s),(o=p.b.Init(u.J)).Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_chat_id(this.m_ulChatID),o.Body().set_message(n),i=this.AppendLocalEchoChatMsg(n),this.m_strLastMessage=n,this.m_accountIDLastMessage=this.m_FriendStore.self.accountid,[4,this.SendWithRetries(i,function(){return u.V.SendChatMessage(a.m_ChatStore.CMInterface.GetServiceTransport(),o)})]):((t=this.AppendLocalEchoChatMsg("")).eErrorSending=m.f.NoChatPermissionInGroup,[2,t.eErrorSending]);case 1:return(r=e.sent())===m.f.None&&(this.m_accountIDLastMessage=this.m_FriendStore.self.accountid),[2,r]}})})},e.prototype.DeleteChatMessages=function(l){return Object(h.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c;return Object(h.e)(this,function(e){switch(e.label){case 0:for(t=l.map(function(e){return{rtTimestamp:e.rtTimestamp,unOrdinal:e.unOrdinal}}),this.UpdateChatMessageDeletedState(t,m.e.Deleting),(n=p.b.Init(u.i)).Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(this.m_ulChatID),o=0,i=l;o<i.length;o++)r=i[o],(a=n.Body().add_messages()).set_server_timestamp(r.rtTimestamp),a.set_ordinal(r.unOrdinal);return[4,u.V.DeleteChatMessages(this.m_ChatStore.CMInterface.GetServiceTransport(),n)];case 1:return s=e.sent(),1!=(c=s.GetEResult())?(this.UpdateChatMessageDeletedState(t,m.e.None),[2,c]):(this.UpdateChatMessageDeletedState(t,m.e.Deleted),[2,1])}})})},e.prototype.PopulateCommitFileUploadFormData=function(e,t){e.append("chat_group_id",this.m_ulGroupID),e.append("chat_id",this.m_ulChatID),e.append("spoiler",t.bSpoiler?"1":"0")},e.prototype.BShouldTrackUnreadMessages=function(){return this.m_bIsDefaultForGroup||!this.m_bVoiceAllowed||this.BVoiceActive()},e.prototype.BShouldSilentlyAddMessage=function(e){return _.f.FriendStore.GetPlayer(e.unAccountID).is_blocked},e.prototype.PlayChatRoomNotificationSound=function(){_.f.FriendStore.GetUserDoNotDisturb()||_.f.AudioPlaybackManager.PlayAudioURL(l.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_chatroom_notification.m4a?v=1")},e.prototype.PlayAtMentionSound=function(){_.f.FriendStore.GetUserDoNotDisturb()||_.f.AudioPlaybackManager.PlayAudioURL(l.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_at_mention.m4a?v=1")},e.prototype.OnReceivedNewMessage=function(t,e,n,o){var i=this;if(this.BShouldTrackUnreadMessages()){if(!t.BIsLocalEcho()&&t.unAccountID!=this.self.accountid){(t.Mentions.mention_all||t.Mentions.mention_here||t.Mentions.mention_user)&&(this.m_rtLastMention=t.rtTimestamp);var r=void 0;switch(this.GetPlatformNotificationLevel()){case 1:r=!1;break;case 2:r=t.Mentions.mention_user;break;case 3:r=t.Mentions.mention_user||t.Mentions.mention_here||t.Mentions.mention_all;break;case 4:default:r=!0}if(r&&!_.f.FriendStore.GetUserDoNotDisturb()){if(_.f.SettingsStore.FriendsSettings.bSounds_PlayChatRoomNotification&&(t.Mentions.mention_all||t.Mentions.mention_here||t.Mentions.mention_user)?this.PlayAtMentionSound():_.f.SettingsStore.FriendsSettings.bSounds_PlayChatRoomNotification&&e<4&&this.PlayChatRoomNotificationSound(),_.f.NotificationManager.BNotificationsPermitted()&&e<4&&_.f.BShowChatRoomNotification()){var a=_.f.FriendStore.GetPlayer(t.unAccountID);a.LoadIfNecessary();Object(s.E)(function(){return a.is_ready},function(){var e={title:i.m_bIsDefaultForGroup?i.GetGroup().name:i.GetGroup().name+" | "+i.name,body:a.display_name+': "'+n+'"',icon:a.persona.avatar_url_medium,rawbody:n,tag:"groupmsg_"+a.accountid,steamid:a.persona.m_steamid.ConvertTo64BitString(),chatroomgroupid:i.GetParentGroupID(),chatroomid:i.GetRoomID()};(e=i.DecorateNotification(t,e,n,o)).body&&(_.f.NotificationManager.DisplayNotification(e,function(e){return _.f.UIStore.ShowAndOrActivateChat(e,i,!0)}),i.m_bHasUnreadPriorityChatMessages||(i.m_bHasUnreadPriorityChatMessages=!0,_.f.FriendStore.UpdateUnreadMessagesGlobal()))},{timeout:1e3})}0==_.f.SettingsStore.FriendsSettings.nChatFlashMode&&e<4&&_.f.UIStore.FlashChatWindow(this,!0)}}(!this.m_rtFirstUnread||!this.m_group.BIsUnreadIndicatorMuted()&&this.m_rtFirstUnread<=this.m_rtLastAckedChatMsg)&&(this.m_rtFirstUnread=t.rtTimestamp)}},e.prototype.GetChatRoomGroup=function(){return this.m_ChatStore.GetChatRoomGroup(this.m_ulGroupID)},e.prototype.GetMember=function(e){return this.GetChatRoomGroup().GetMember(e)},e.prototype.SearchMembers=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=!1);var o=[],i=e.toLocaleLowerCase(),r=this.GetChatRoomGroup().BCanIMentionAll()?"":Object(f.c)("#ChatMentionSuggest_NoPermission");"online".startsWith(i)&&o.push({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"online",strNotSelectable:r}),"all".startsWith(i)&&o.push({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"all",strNotSelectable:r});for(var a=[],s=[],c=0,l=this.GetChatRoomGroup().memberList.member_list;c<l.length;c++){var p=l[c];if(p!=this.self){if(i.length){var u=p.MatchSearchString(i),m=0===u.iOffset;if(0==u.match||n&&!m)continue;var d={friend:p,iMatchOffset:u.iOffset,bNicknameMatch:2==u.match};m?u.bFullMatch?a.unshift(d):a.push(d):s.push(d)}else o.push({friend:p,iMatchOffset:0,bNicknameMatch:!1});if(o.length+a.length>=t)break}}for(var h=0;h<a.length&&o.length<t;h++)o.push(a[h]);for(h=0;h<s.length&&o.length<t;h++)o.push(s[h]);return o},e.prototype.BNameMatchesSearch=function(e){return-1!=this.name.toLocaleLowerCase().indexOf(e)},e.prototype.CreateInviteLink=function(e){var i=this,t=p.b.Init(u.g);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_seconds_valid(e),t.Body().set_chat_id(this.m_ulChatID),u.V.CreateInviteLink(this.m_ChatStore.CMInterface.GetServiceTransport(),t).then(function(e){var t=e.Body().invite_code(),n=Object(d.a)(t),o=e.Body().seconds_valid();0!=o&&(o+=Math.floor(Date.now()/1e3)),i.m_lastChatLink={strInviteURL:n,rtExpires:o}})},e.prototype.OnActivate=function(){this.m_ChatStore.OnChatRoomActivated(this),r.prototype.OnActivate.call(this)},Object.defineProperty(e.prototype,"lastChatLinkInfo",{get:function(){return this.m_lastChatLink},enumerable:!0,configurable:!0}),e.prototype.BCanDeleteMemberMessages=function(e){return this.GetChatRoomGroup().BCanDeleteMemberMessages(e)},e.prototype.ChangeNameWhileWaitingForRenameRequest=function(e){this.m_strName=e},e.prototype.SetNotificationPreferences=function(e,t,n){var o=p.b.Init(u.P);o.Body().set_chat_group_id(this.m_ulGroupID);var i=o.Body().add_chat_room_preferences();return i.set_chat_id(this.m_ulChatID),void 0!==e&&(this.m_eDesktopNotificationLevel=e,i.set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(n=!1)),void 0!==t&&(this.m_eMobileNotificationLevel=t,i.set_mobile_notification_level(t)),void 0!==n&&(this.m_bUnreadIndicatorMuted=n,i.set_unread_indicator_muted(n)),u.V.SetUserChatGroupPreferences(_.f.CMInterface.GetServiceTransport(),o).then(function(e){return 1==e.GetEResult()})},e.prototype.SetupAppCustomServerMsg=function(d){return Object(h.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c,l,p,u,m;return Object(h.e)(this,function(e){switch(e.label){case 0:if(t=JSON.parse(d.strMessage)||{},n=new Map,t.params)for(o in t.params)n.set(o.toString(),t.params[o].toString());return d.strServerMsgAppCustomLocalized="...",[4,_.f.AppInfoStore.GetRichPresenceLocAsync(this.m_group.GetOwnerAppID())];case 1:for(i=e.sent(),t.tok?d.strServerMsgAppCustomLocalized=i.Localize(t.tok,n):t.msg?d.strServerMsgAppCustomLocalized=i.SubstituteParams(t.msg,n):d.strServerMsgAppCustomLocalized=d.strMessage,r=Object(I.g)(d.strServerMsgAppCustomLocalized),a=null,s="",c=!1,l=0,p=r;l<p.length;l++)1!=(u=p[l]).type?2==u.type&&("mention"!=u.tag?"spoiler"!=u.tag&&(console.log("bbcode tag '"+u.tag+"' not allowed!"),c=!0):u.args&&(a||(a={}),"all"==(m=u.args[""])?a.mention_all=!0:"here"==m?a.mention_here=!0:m==this.m_FriendStore.self.accountid.toString()&&(a.mention_user=!0))):s+=u.text;return c&&(d.strServerMsgAppCustomLocalized=s),a&&(d.Mentions=a),[2,s]}})})},Object(h.c)([s.x],e.prototype,"m_strName",void 0),Object(h.c)([s.x],e.prototype,"m_unSortOrder",void 0),Object(h.c)([s.x],e.prototype,"m_lastChatLink",void 0),Object(h.c)([s.x],e.prototype,"m_rtLastMention",void 0),Object(h.c)([s.x],e.prototype,"m_eDesktopNotificationLevel",void 0),Object(h.c)([s.x],e.prototype,"m_eMobileNotificationLevel",void 0),Object(h.c)([s.x],e.prototype,"m_bUnreadIndicatorMuted",void 0),Object(h.c)([s.g],e.prototype,"UpdateUserState",null),Object(h.c)([s.g],e.prototype,"UpdateChatState",null),Object(h.c)([s.i],e.prototype,"name",null),Object(h.c)([i.a],e.prototype,"StartVoiceChat",null),Object(h.c)([i.a,Object(g.a)(100)],e.prototype,"PlayChatRoomNotificationSound",null),Object(h.c)([i.a,Object(g.a)(100)],e.prototype,"PlayAtMentionSound",null),Object(h.c)([s.g],e.prototype,"CreateInviteLink",null),Object(h.c)([s.g],e.prototype,"OnActivate",null),Object(h.c)([s.g],e.prototype,"ChangeNameWhileWaitingForRenameRequest",null),e}(o.a)},"s+DT":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("2lpH"),a=n.n(o),r=n("0N1H"),s=n("1n9R"),i=function(){function i(e,t,n,o){void 0===e&&(e=0),e instanceof i?this.m_ulSteamID=e.m_ulSteamID:"string"==typeof e?this.m_ulSteamID=a.a.fromString(e,!0):t&&n&&void 0!==o?this.SetFromComponents(e,o,n,t):this.m_ulSteamID=e?a.a.fromNumber(e,!0):a.a.UZERO}return i.InitFromAccountID=function(e){return new i(Number(e),s.b.EUNIVERSE,1,r.o)},i.InitFromClanID=function(e){return new i(Number(e),s.b.EUNIVERSE,7,0)},i.prototype.GetAccountID=function(){return this.m_ulSteamID.getLowBitsUnsigned()},i.prototype.GetInstance=function(){return 1048575&this.m_ulSteamID.getHighBitsUnsigned()},i.prototype.GetAccountType=function(){return this.m_ulSteamID.getHighBitsUnsigned()>>20&15},i.prototype.GetUniverse=function(){return this.m_ulSteamID.getHighBitsUnsigned()>>24&255},i.prototype.ConvertTo64BitString=function(){return this.m_ulSteamID.toString()},i.prototype.Render=function(){switch(this.GetAccountType()){case 0:return"[I:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 7:return"[g:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 4:return"[A:"+this.GetUniverse()+":"+this.GetAccountID()+":"+this.GetInstance()+"]";case 3:return"[G:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 2:return"[M:"+this.GetUniverse()+":"+this.GetAccountID()+":"+this.GetInstance()+"]";case 5:return"[P:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 6:return"[C:"+this.GetUniverse()+":"+this.GetAccountID()+"]";default:return"[U:"+this.GetUniverse()+":"+this.GetAccountID()+"]"}},i.prototype.BIsValid=function(){var e=this.GetAccountType();if(e<=0||11<=e)return!1;var t=this.GetUniverse();if(t<=0||5<=t)return!1;if(1==e){if(0==this.GetAccountID()||this.GetInstance()>r.p)return!1}else if(7==e){if(0==this.GetAccountID()||0!=this.GetInstance())return!1}else if(3==e&&0==this.GetAccountID())return!1;return!0},i.prototype.BIsIndividualAccount=function(){return 1==this.GetAccountType()},i.prototype.BIsClanAccount=function(){return 7==this.GetAccountType()},i.prototype.SetAccountID=function(e){this.m_ulSteamID=new a.a(e,this.m_ulSteamID.getHighBitsUnsigned(),!0)},i.prototype.SetInstance=function(e){this.SetFromComponents(this.GetAccountID(),e,this.GetAccountType(),this.GetUniverse())},i.prototype.SetAccountType=function(e){this.SetFromComponents(this.GetAccountID(),this.GetInstance(),e,this.GetUniverse())},i.prototype.SetUniverse=function(e){this.SetFromComponents(this.GetAccountID(),this.GetInstance(),this.GetAccountType(),e)},i.prototype.SetFromComponents=function(e,t,n,o){var i=((255&o)<<24)+((15&n)<<20)+(1048575&t),r=4294967295&e;this.m_ulSteamID=new a.a(r,i,!0)},i}()},s13G:function(e,t,n){e.exports={statusAndName:"personanameandstatus_statusAndName_9U-hi",blocked:"personanameandstatus_blocked_138jh",richPresenceLabel:"personanameandstatus_richPresenceLabel_3Q6g1",playerName:"personanameandstatus_playerName_1uxaf",playerNickname:"personanameandstatus_playerNickname_3-32P",playerNicknameBracket:"personanameandstatus_playerNicknameBracket_1lu-g",richPresenceContainer:"personanameandstatus_richPresenceContainer_21cNf",NoMask:"personanameandstatus_NoMask_1Wsqc",twoLine:"personanameandstatus_twoLine_2wZNn",DNDContainer:"personanameandstatus_DNDContainer_3h0SR",partyBeaconJoin:"personanameandstatus_partyBeaconJoin__ugTP",gameName:"personanameandstatus_gameName_qvibF",hidePersona:"personanameandstatus_hidePersona_1-otV",compactView:"personanameandstatus_compactView_2PCWF",noContextMenu:"personanameandstatus_noContextMenu_35VFv",SnoozeContainer:"personanameandstatus_SnoozeContainer_2xgNz",ModalPosition_TopBar:"personanameandstatus_ModalPosition_TopBar_1Y6m1",gameIsPrivateIcon:"personanameandstatus_gameIsPrivateIcon_1cu1a"}},syWt:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var o=n("q1tI"),i=n.n(o),r=n("DMSt"),a=n.n(r),s=function(){return i.a.createElement("div",{className:a.a.FriendsListInsetShadowCtn},i.a.createElement("div",{className:a.a.FriendListInsetShadowTop}))},c=function(){return i.a.createElement("div",{className:a.a.FriendsListInsetShadowCtn},i.a.createElement("div",{className:a.a.FriendListInsetShadowBottom}))}},tY0L:function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return S}),n.d(t,"c",function(){return y});var i=n("mrSG"),r=n("/IDK"),o=n("1KZt"),a=n("okNM"),l=n("q1tI"),s=n("i8i4"),c=n("8AUz"),p=n("1VtQ"),u=n("EGkk"),m=n("2vnA"),d=n("oh5H"),h=n("UMCL"),f=n("HVDT"),_=n.n(f),g=n("QHER"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t.prototype.OnMouseEnter=function(e){this.props.emoticonHoverStore.GetEmoticonHover(e.currentTarget.getAttribute("data-emoticon")).Show(e,v)},t.prototype.OnMouseLeave=function(e){this.props.emoticonHoverStore.GetEmoticonHover(e.currentTarget.getAttribute("data-emoticon")).Hide(e)},t.prototype.render=function(){var e=":"+this.props.emoticon+":";return l.createElement(h.b,{text:e,style:"merge-adjacent"},l.createElement("img",{src:o.a.GetEmoticonURL(this.props.emoticon,this.props.large),alt:e,className:Object(g.a)(_.a.emoticon,this.props.large?_.a.large:void 0),"data-emoticon":this.props.emoticon,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave}))},Object(i.c)([p.a],t.prototype,"OnMouseEnter",null),Object(i.c)([p.a],t.prototype,"OnMouseLeave",null),t}(l.PureComponent),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t.prototype.render=function(){return l.createElement(c.a,{visibilityObserver:this.props.hover,target:this.props.target,style:{zIndex:1700}},l.createElement("div",{className:"emoticon_hover_content",dangerouslySetInnerHTML:{__html:this.props.hover.emoticon_html}}),l.createElement("div",{className:"hover_arrow left emoticon_hover_arrow"}),l.createElement("div",{className:"hover_arrow right emoticon_hover_arrow"}))},t=Object(i.c)([a.a],t)}(l.Component),S=function(o){function e(e){var t=o.call(this,e)||this;t.m_ScrollCoordinator=new r.f(40),t.state={strSearchText:""};var n=t.props.emoticonStore;return n.is_initialized||(n.UpdateEmoticonList(),t.m_disposeEmoticonStore=Object(m.E)(function(){return n.is_initialized},function(){return t.forceUpdate()})),t}return Object(i.d)(e,o),e.prototype.componentWillUnmount=function(){this.m_disposeEmoticonStore&&this.m_disposeEmoticonStore()},e.prototype.OnClick=function(e){var t=e.currentTarget.getAttribute("data-emoticon");this.props.OnSelected(t,e.shiftKey),this.props.emoticonHoverStore.GetEmoticonHover(t).Hide(e)},e.prototype.OnSearchInput=function(e){var t=e.currentTarget.value;this.setState({strSearchText:t})},e.prototype.OnSubmit=function(e){e.preventDefault(),this.m_strFirstEmoticon&&this.props.OnSelected(this.m_strFirstEmoticon,!1)},e.prototype.RenderEmoticon=function(e,t){var n=t.name;return e&&(n=e+t.name),l.createElement(C,{key:n,emoticon:t,emoticonHoverStore:this.props.emoticonHoverStore,onClick:this.OnClick,coordinator:this.m_ScrollCoordinator})},e.prototype.OnScrollRef=function(e){this.m_ScrollCoordinator.SetParent(e)},e.prototype.OnScroll=function(e){this.m_ScrollCoordinator.RecomputeVisibility()},e.prototype.componentDidUpdate=function(){this.m_ScrollCoordinator.InvalidateOffsetsAndRecompute()},e.prototype.render=function(){var e=this.props.emoticonStore,t=[],n=[],o=!1;if(e.is_initialized){var i=this.state.strSearchText.trim();if(0<i.length)o=!0,n=(t=e.SearchEmoticons(i,50,!1)).map(this.RenderEmoticon.bind(this,"")),this.m_strFirstEmoticon=t.length?t[0].name:null;else if(this.props.strFlairGroupID)n=e.GetFlairListByGroupID(this.props.strFlairGroupID).map(this.RenderEmoticon.bind(this,"")),this.m_strFirstEmoticon=null;else{var r=e.recent_emoticons,a=e.emoticon_list,s=Math.ceil(a.length/9);if(s<=2)r=[];else{var c=Math.floor(s/2);9<(r=r.slice(0,9*c)).length&&r.length%9<=2&&(r=r.slice(0,9*Math.floor(r.length/9)))}r.length&&(n=r.map(this.RenderEmoticon.bind(this,"recent_"))).push(l.createElement("div",{key:"__recent_all_separator",className:_.a.EmoticonSelector_Separator},l.createElement("div",{className:_.a.EmoticonSelector_SeparatorBackground}))),1e3<a.length&&(a=a.slice(0,1e3)),32<=a.length&&(o=!0),n.push.apply(n,a.map(this.RenderEmoticon.bind(this,""))),this.m_strFirstEmoticon=null}}return l.createElement(u.c,null,l.createElement("div",{className:_.a.EmoticonSelector},l.createElement("div",{className:_.a.EmoticonSelector_Emoticons,ref:this.OnScrollRef,onScroll:this.OnScroll},n),o&&l.createElement("div",{className:_.a.EmoticonSelector_Controls},l.createElement("form",{onSubmit:this.OnSubmit},l.createElement("input",{type:"text",placeholder:Object(d.c)("#Emoticon_Search"),value:this.state.strSearchText,onChange:this.OnSearchInput,className:"ContextMenuAutoFocus friendSearchInput"})))))},Object(i.c)([p.a],e.prototype,"OnClick",null),Object(i.c)([p.a],e.prototype,"OnSearchInput",null),Object(i.c)([p.a],e.prototype,"OnSubmit",null),Object(i.c)([p.a],e.prototype,"OnScrollRef",null),Object(i.c)([p.a],e.prototype,"OnScroll",null),e}(l.Component);function y(){return l.createElement("div",{className:_.a.NewEmoticonIndicator},l.createElement("div",{className:_.a.NewEmoticonCircle}))}var C=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!1},t}return Object(i.d)(e,n),e.prototype.SetVisible=function(e){e&&!this.state.visible&&this.setState({visible:!0})},e.prototype.componentDidMount=function(){this.props.coordinator.RegisterChild(s.findDOMNode(this),this.SetVisible)},e.prototype.componentWillUnmount=function(){this.props.coordinator.UnregisterChild(s.findDOMNode(this))},e.prototype.render=function(){var e=this.props.emoticon,t=[_.a.EmoticonSelector_Item],n=!1;return!e.last_used&&e.time_received&&(t.push(_.a.EmoticonSelector_Item_New),n=!0),l.createElement("div",{className:g.a.apply(void 0,t),"data-emoticon":e.name,onClick:this.props.onClick},this.state.visible&&l.createElement(b,{emoticonHoverStore:this.props.emoticonHoverStore,emoticon:e.name,large:!0}),n&&l.createElement(y,null))},Object(i.c)([p.a],e.prototype,"SetVisible",null),e}(l.Component)},tZiA:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var l=n("mrSG"),c=n("2vnA"),p=n("0N1H"),i=n("/SYB"),u=n("/FkP"),m=n("LAqV"),r=n("XaMz"),o=n("tkkQ"),a=n("ujHl"),d=a.b.PerMinute,h=6*a.b.PerHour,s=function(){function a(e,t,n){var o=this;this.BASELOG=i.b.create(function(){return"CChat-"+o.unique_id},!1),this.m_rgChatViews=[],this.m_bChatLogsLoaded=!1,this.m_bReceivedChatLogs=!1,this.m_bMoreAvailable=!1,this.m_nLoadingHistoryInProgressCount=0,this.m_rgChatMessages=[],this.m_ChatMessageBlockList=new u.a,this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,this.m_rtFirstUnreadChatMsg=0,this.m_rtLastAckedChatMsg=0,this.m_rtLastServerAckedChatMsg=0,this.m_rtLastMessageReceived=0,this.m_rtLastServerMessageReceived=0,this.m_rtFirstUnread=0,this.m_msTimeActivated=0,this.m_bPrepended=!1,this.m_FriendStore=e,this.m_ChatStore=t,this.m_CMInterface=n}return a.prototype.UnloadChatState=function(){this.UnloadActiveChatState(),this.m_rtLastMessageReceived=0,this.m_rtLastServerMessageReceived=0},a.prototype.UnloadActiveChatState=function(){this.m_rgChatMessages=[],this.m_ChatMessageBlockList.Clear(),this.m_bChatLogsLoaded=!1,this.m_bReceivedChatLogs=!1},Object.defineProperty(a.prototype,"BIsPrepend",{get:function(){return this.m_bPrepended},enumerable:!0,configurable:!0}),a.prototype.ResetPrepended=function(){this.m_bPrepended=!1},a.prototype.OnTyping=function(){},Object.defineProperty(a.prototype,"is_friend_typing",{get:function(){return!1},enumerable:!0,configurable:!0}),a.prototype.OnReceivedNewMessage=function(e,t,n,o){},a.prototype.BShouldTrackUnreadMessages=function(){return!0},a.prototype.BIsVoiceAllowed=function(){return!0},a.prototype.GetVoiceNotAllowedReason=function(){return null},a.prototype.SendChatMessage=function(o){return Object(l.b)(this,void 0,void 0,function(){var t,n;return Object(l.e)(this,function(e){switch(e.label){case 0:t=this.m_MessageSendQueue.Add(o),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.SendChatMessageInternal(o)];case 2:return(n=e.sent())===u.f.None?this.m_MessageSendQueue.RemoveItem(t):this.m_MessageSendQueue.SetItemFailed(t,n),[3,4];case 3:return e.sent(),this.m_MessageSendQueue.SetItemFailed(t,u.f.Generic),[3,4];case 4:return[2]}})})},a.prototype.SendWithRetries=function(a,s){return Object(l.b)(this,void 0,void 0,function(){var i,t,n,o,r=this;return Object(l.e)(this,function(e){switch(e.label){case 0:i=1,t=Date.now(),n=function(){var t,n,o;return Object(l.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,s()];case 1:if(1===(t=e.sent()).GetEResult())return[2,{value:Object(c.A)(function(){a.rtTimestamp=t.Body().server_timestamp(),a.unOrdinal=t.Body().ordinal(),r.OnUserChatEcho(a.rtTimestamp,a.unOrdinal);var e=t.Body().modified_message();return e&&(r.m_ChatStore.EmoticonStore.TrackEmoticonUsage(e,a.rtTimestamp),a.strMessage=e,r.m_strLastMessage=e,r.m_accountIDLastMessage=r.m_FriendStore.self.accountid),a.OnServerAcknowledged(),u.f.None})}];switch(t.GetEResult()){case 15:return a.eErrorSending=u.f.NotFriends,[2,{value:a.eErrorSending}];case 84:return a.eErrorSending=u.f.RateLimitExceeded,[2,{value:a.eErrorSending}];default:if(3===t.Hdr().transport_error())return a.eErrorSending=u.f.Generic,[2,{value:a.eErrorSending}];console.warn("Error sending message (Attempt #"+i+"). Got EResult "+t.GetEResult())}return[3,3];case 2:return n=e.sent(),console.warn("Error sending message (Attempt #"+i+"). Got error "+n),[3,3];case 3:return o=1*Math.pow(2,i-1),[4,new Promise(function(e){return setTimeout(e,1e3*o)})];case 4:return e.sent(),i++,[2]}})},e.label=1;case 1:return Date.now()-1e3*d<t?[5,n()]:[3,3];case 2:return"object"==typeof(o=e.sent())?[2,o.value]:[3,1];case 3:return a.eErrorSending=u.f.Generic,[2,a.eErrorSending]}})})},a.prototype.InitMessageSessionFromServer=function(e,t,n){4!==this.GetVisibilityState()&&(this.m_cUnreadChatMessages=e),this.m_bHasUnreadPriorityChatMessages=!1,this.m_rtLastAckedChatMsg=this.m_rtLastServerAckedChatMsg=t,this.m_rtLastMessageReceived=n,this.m_rtLastAckedChatMsg<this.m_rtLastMessageReceived&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastAckedChatMsg+1)},a.prototype.AddChatView=function(e){this.m_rgChatViews.push(e)},a.prototype.RemoveChatView=function(e){var t=this.m_rgChatViews.indexOf(e);-1!=t&&this.m_rgChatViews.splice(t,1)},a.prototype.IsMoreHistoryAvailable=function(){return this.m_bMoreAvailable},a.prototype.InternalLoadChatLogs=function(e){var t,n,o,i=this;if(void 0===e&&(e=!1),e){var r=this.GetMostRecentChatMsg();n=r?(t=r.rtTimestamp,r.unOrdinal):(t=p.g,0)}else t=p.g,n=0;return o=p.f,0,this.m_nLoadingHistoryInProgressCount+=1,this.GetMessagesFromTimeRange(t,n,o,0,a.k_InitialMessageCount).then(function(e){var t=e.messages,n=e.moreAvailable;i.AddMessagesToHistory(t,n),i.m_nLoadingHistoryInProgressCount-=1,i.m_bReceivedChatLogs=!0}).catch(function(e){return i.m_nLoadingHistoryInProgressCount-=1,Promise.reject(e)})},a.prototype.LoadMoreHistory=function(){var o=this;return 0!=this.m_nLoadingHistoryInProgressCount?Promise.resolve(!0):(this.m_nLoadingHistoryInProgressCount+=1,this.GetMessagesFromTimeRange(p.g,0,this.m_oldestMessageTime,this.m_oldestMessageOrdinal,a.k_LoadMoreMessageCount).then(function(e){var t=e.messages,n=e.moreAvailable;return o.AddMessagesToHistory(t,n),o.m_nLoadingHistoryInProgressCount-=1,!0}).catch(function(e){return o.m_nLoadingHistoryInProgressCount-=1,Promise.reject(e)}))},a.prototype.AddMessagesToHistory=function(e,t){this.BASELOG("merging "+e.length+" messages"),this.MergeChatHistoryChunk(e),this.BASELOG(this.m_rgChatMessages.length+" total messages"),this.m_bMoreAvailable=t,this.BASELOG("friend chat oldest time "+this.m_oldestMessageTime+" oldest ordinal "+this.m_oldestMessageOrdinal+" bMoreAvailable "+this.m_bMoreAvailable)},Object.defineProperty(a.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!0,configurable:!0}),a.prototype.OnActivate=function(){(this.m_cUnreadChatMessages||this.m_bHasUnreadPriorityChatMessages)&&(this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,this.m_rtLastMessageReceived&&(this.m_rtLastAckedChatMsg=this.m_rtLastMessageReceived,this.AckChatMsg(this.m_rtLastMessageReceived)),m.f.FriendStore.UpdateUnreadMessagesGlobal(),m.f.UIStore.FlashChatWindow(this,!1))},a.prototype.OnDeactivate=function(){this.m_rtFirstUnreadChatMsg=0},Object.defineProperty(a.prototype,"self",{get:function(){return this.m_FriendStore.self},enumerable:!0,configurable:!0}),a.prototype.InternalAppendChatMsg=function(e){(0!=this.m_rgChatViews.length||this.m_bChatLogsLoaded)&&(this.m_rgChatMessages.push(e),this.m_ChatMessageBlockList.AppendNewMessage(e),this.TrimLogsIfPossible())},a.prototype.TrimLogsIfPossible=function(){var e=this.m_rgChatMessages.length-a.k_KeepLoadedWhenAtScrollBottom;if(!(e<=0)){for(var t=0,n=this.m_rgChatViews;t<n.length;t++){if(!n[t].is_scrolled_to_bottom)return}var o=this.m_ChatMessageBlockList.RemoveOldestMessages(e);if(o){var i=this.m_rgChatMessages.indexOf(o);i<0?Object(r.a)(!1,"Failed to find message being removed"):this.m_rgChatMessages.splice(0,i+1)}}},a.prototype.AppendChatMsg=function(e,t,n,o){var i=new u.d(e,t,n,o);return i.eAnimationState=u.g.Animating,this.InternalAppendChatMsg(i),i},a.prototype.AppendLocalEchoChatMsg=function(e){var t=new u.b(this.self.accountid,m.f.GetServerRTime32(),e);return t.eAnimationState=u.g.Animating,this.InternalAppendChatMsg(t),t},a.prototype.RemoveMessage=function(t){var e=this.m_rgChatMessages.findIndex(function(e){return e.UniqueKey()===t.UniqueKey()});-1===e?console.warn("Could not find message to remove."):this.m_rgChatMessages.splice(e,1),this.m_ChatMessageBlockList.RemoveLocalMessage(t),this.TrimLogsIfPossible()},a.prototype.RetryFailedMessage=function(e){e.eErrorSending!==u.f.None?(this.RemoveMessage(e),this.SendChatMessage(e.strMessage)):console.log("RetryFailedMessage called with a non-failed message. Ignoring.")},a.prototype.AddNewChatMsgAndNotify=function(e,t,n,o,i,r){var a=this.AppendChatMsg(e,t,n,o);a.Mentions=r;var s=void 0!==i;this.CheckShouldNotify(a,s?i:o,o)},a.prototype.UpdateChatMessageDeletedState=function(e,t){for(var n=0,o=this.m_rgChatMessages;n<o.length;n++)for(var i=o[n],r=0,a=e;r<a.length;r++){var s=a[r];i.rtTimestamp==s.rtTimestamp&&i.unOrdinal==s.unOrdinal&&(i.eDeleteState!=u.e.Deleted&&(i.eDeleteState=t))}},a.prototype.BShouldSilentlyAddMessage=function(e){return!1},a.prototype.DecorateNotification=function(e,t,n,o){if(o!==n){var i=this.m_ChatStore.NotificationBBCodeParser,r={chat:this,unAccountIDSender:e.unAccountID,key:e.UniqueKey(),rtTimestamp:e.rtTimestamp,onLoad:function(){}},a=i.ParseBBCode(o,r);if(a)return Object(l.a)(Object(l.a)({},t),a)}return t},a.prototype.CheckShouldNotify=function(e,t,n){var o=this,i=this.self.accountid==e.unAccountID,r=!1,a=!1,s=this.GetVisibilityState(),c=this.BShouldSilentlyAddMessage(e),l=e.Mentions;if(!e.BIsServerMessage()||l.mention_all||l.mention_here||l.mention_user){i?a=r=!0:c&&0==this.m_cUnreadChatMessages?r=!0:4==s?r=!0:3==s&&0==this.m_cUnreadChatMessages&&m.f.IdleTracker.AddOnNextActivityCallback(function(){4==o.GetVisibilityState()&&o.OnActivate()}),this.m_rtLastMessageReceived=e.rtTimestamp,this.m_strLastMessage=e.strMessage,this.m_accountIDLastMessage=e.unAccountID;var p=this.m_cUnreadChatMessages,u=this.m_bHasUnreadPriorityChatMessages;this.BShouldTrackUnreadMessages()&&(r?(this.m_rtLastAckedChatMsg=e.rtTimestamp,this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,a||this.AckChatMsg(e.rtTimestamp)):(0==this.m_rtFirstUnreadChatMsg&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastMessageReceived),this.m_cUnreadChatMessages++)),c||this.OnReceivedNewMessage(e,s,t,n),p==this.m_cUnreadChatMessages&&u==this.m_bHasUnreadPriorityChatMessages||m.f.FriendStore.UpdateUnreadMessagesGlobal()}else this.m_rtLastServerMessageReceived=e.rtTimestamp},a.prototype.AddVoiceChannelInviteMsg=function(e,t,n){this.InternalAppendChatMsg(new u.c(e,t,n))},a.prototype.AddNewServerMsg=function(e,t,n,o,i,r,a){var s=this;if(Object(u.j)(o)){var c=new u.d(e,t,n,i,o,r,a);11==c.eServerMsgType&&this.SetupAppCustomServerMsg(c).then(function(e){s.CheckShouldNotify(c,e,c.strServerMsgAppCustomLocalized)}),this.InternalAppendChatMsg(c)}},a.prototype.AckChatMsg=function(e){(0<this.m_cUnreadChatMessages||this.m_rtLastServerAckedChatMsg!=e)&&(this.AckChatMsgOnServer(e),this.m_rtLastServerAckedChatMsg=e)},a.prototype.OnUserChatEcho=function(e,t){e>=this.m_rtLastAckedChatMsg&&(this.m_rtLastMessageReceived=e,this.UpdateLastAckTimeFromServer(e))},a.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastServerAckedChatMsg<=e&&(this.m_rtLastServerAckedChatMsg=e,this.m_rtLastAckedChatMsg=e,this.m_rtLastMessageReceived<=e&&(this.m_cUnreadChatMessages=0,this.m_bHasUnreadPriorityChatMessages=!1,m.f.FriendStore.UpdateUnreadMessagesGlobal(),m.f.UIStore.FlashChatWindow(this,!1)))},a.prototype.GetMostRecentChatMsg=function(){for(var e=this.m_rgChatMessages.length-1;0<=e;e--)if(-1!=this.m_rgChatMessages[e].unOrdinal)return this.m_rgChatMessages[e];return null},a.prototype.MergeChatHistoryChunk=function(e){var t;if(e.length){var n,o=e[0],i=e[e.length-1],r=0;for(n=this.m_rgChatMessages.length-1;0<=n;n--)if(-1!=this.m_rgChatMessages[n].unOrdinal){if(this.m_rgChatMessages[n].BIsOlderThan(o))break;this.m_rgChatMessages[n].BIsNewerThan(i)&&r++}for(var a=0,s=e;a<s.length;a++){var c=s[a];this.MsgLoadedFromHistory(c)}for(n++,(t=this.m_rgChatMessages).splice.apply(t,Object(l.g)([n,this.m_rgChatMessages.length-n-r],e)),n=0;n<this.m_rgChatMessages.length&&-1==this.m_rgChatMessages[n].unOrdinal;n++);n>=this.m_rgChatMessages.length?(this.m_oldestMessageTime=p.f,this.m_oldestMessageOrdinal=0):(this.m_oldestMessageTime=this.m_rgChatMessages[n].rtTimestamp,this.m_oldestMessageOrdinal=this.m_rgChatMessages[n].unOrdinal),this.m_ChatMessageBlockList.BuildMessageBlocks(this.m_rgChatMessages),this.m_bPrepended=!0}},a.prototype.InitQueuedMessages=function(){var a=this,e=this.m_MessageSendQueue.queued_messages;if(0!==e.length){var s=[];e.forEach(function(e){var t=e.timestamp,n=e.message,o=e.eError,i=e.id;if(void 0===o||o===u.f.None)Date.now()-1e3*h<t&&(a.m_MessageSendQueue.RemoveItem(i),a.SendChatMessage(n));else{var r=new u.b(a.self.accountid,m.f.GetServerRTime32(),n);r.rtTimestamp=t,r.eErrorSending=o,s.push(r)}}),this.MergeLocalMessages(s)}},a.prototype.MergeLocalMessages=function(e){e.sort(function(e,t){return e.rtTimestamp-t.rtTimestamp});for(var t=[],n=0,o=0;n<this.m_rgChatMessages.length||o<e.length;)n>=this.m_rgChatMessages.length?t.push(e[o++]):o>=e.length?t.push(this.m_rgChatMessages[n++]):this.m_rgChatMessages[n].rtTimestamp<e[o].rtTimestamp?t.push(e[o++]):t.push(this.m_rgChatMessages[n++]);this.m_rgChatMessages=t},a.prototype.GetBeginFileUploadURL=function(){return o.a.CHAT_BASE_URL+"chat/beginfileupload/"},a.prototype.GetCommitFileUploadURL=function(){return o.a.CHAT_BASE_URL+"chat/commitfileupload/"},a.prototype.LogFileUploadMessage=function(e){this.BASELOG(e)},a.prototype.MsgLoadedFromHistory=function(e){11==e.eServerMsgType&&this.SetupAppCustomServerMsg(e)},a.prototype.SetupAppCustomServerMsg=function(e){return Object(l.b)(this,void 0,void 0,function(){return Object(l.e)(this,function(e){return console.warn("App custom server message should only be used in a class that knows what to do with it"),[2,""]})})},a.prototype.GetVisibilityState=function(e){for(var t=0,n=0,o=this.m_rgChatViews;n<o.length;n++){var i=o[n];if(!e||i.BIsInBrowserContext(e)){var r=i.GetVisibilityState();t<r&&(t=r)}}return t},a.prototype.GetLastMessage=function(){return this.m_strLastMessage},Object.defineProperty(a.prototype,"accountid_last_message",{get:function(){return this.m_accountIDLastMessage},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"unread_message_count",{get:function(){return this.m_cUnreadChatMessages},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"has_unread_priority_messages",{get:function(){return this.m_bHasUnreadPriorityChatMessages},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"first_unread_msg_time",{get:function(){return this.m_rtFirstUnreadChatMsg},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"time_last_message",{get:function(){return this.m_rtLastMessageReceived},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"time_last_ack",{get:function(){return this.m_rtLastAckedChatMsg},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chat_messages",{get:function(){return this.m_rgChatMessages},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chat_message_blocks",{get:function(){return this.m_ChatMessageBlockList},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"last_voice_participation_time",{get:function(){return this.m_rtLastAckedChatMsg},enumerable:!0,configurable:!0}),a.prototype.LoadChatLogs=function(){return Object(l.b)(this,void 0,void 0,function(){return Object(l.e)(this,function(e){return this.m_bChatLogsLoaded?[2]:(this.m_bChatLogsLoaded=!0,[2,this.InternalLoadChatLogs(!1)])})})},a.prototype.OnConnectionRestored=function(){this.m_bChatLogsLoaded&&this.InternalLoadChatLogs(!0)},a.k_KeepLoadedWhenAtScrollBottom=2*(a.k_InitialMessageCount=100),a.k_LoadMoreMessageCount=50,Object(l.c)([c.x],a.prototype,"m_bReceivedChatLogs",void 0),Object(l.c)([c.x],a.prototype,"m_bMoreAvailable",void 0),Object(l.c)([c.x.shallow],a.prototype,"m_rgChatMessages",void 0),Object(l.c)([c.x],a.prototype,"m_cUnreadChatMessages",void 0),Object(l.c)([c.x],a.prototype,"m_rtFirstUnreadChatMsg",void 0),Object(l.c)([c.x],a.prototype,"m_rtLastAckedChatMsg",void 0),Object(l.c)([c.x],a.prototype,"m_rtLastMessageReceived",void 0),Object(l.c)([c.x],a.prototype,"m_rtLastServerMessageReceived",void 0),Object(l.c)([c.x],a.prototype,"m_strLastMessage",void 0),Object(l.c)([c.x],a.prototype,"m_accountIDLastMessage",void 0),Object(l.c)([c.x],a.prototype,"m_rtFirstUnread",void 0),Object(l.c)([c.g],a.prototype,"InitMessageSessionFromServer",null),Object(l.c)([c.g],a.prototype,"AddMessagesToHistory",null),Object(l.c)([c.g],a.prototype,"OnActivate",null),Object(l.c)([c.g],a.prototype,"OnDeactivate",null),Object(l.c)([c.g],a.prototype,"AppendChatMsg",null),Object(l.c)([c.g],a.prototype,"AppendLocalEchoChatMsg",null),Object(l.c)([c.g],a.prototype,"AddNewChatMsgAndNotify",null),Object(l.c)([c.g],a.prototype,"UpdateChatMessageDeletedState",null),Object(l.c)([c.g],a.prototype,"AddVoiceChannelInviteMsg",null),Object(l.c)([c.g],a.prototype,"AddNewServerMsg",null),a}()},tkkQ:function(e,t,n){"use strict";var o=n("1n9R");n.d(t,"a",function(){return o.b}),n.d(t,"d",function(){return o.g}),n.d(t,"c",function(){return o.f}),n.d(t,"b",function(){return o.e})},twdX:function(e,t,n){e.exports={LoadingWrapper:"throbber_LoadingWrapper_9UFR8",Static:"throbber_Static_2qWST",none:"throbber_none_3yGk4",bottomCircle:"throbber_bottomCircle_1XTvd",noString:"throbber_noString_2uxjb",Throbber:"throbber_Throbber_1Y6Da",throbber_small:"throbber_throbber_small_21jHr",throbber_medium:"throbber_throbber_medium_1nACb",throbber_large:"throbber_throbber_large_3hJM_",throbber_center_wrapper:"throbber_throbber_center_wrapper_1Dn-N",ThrobberText:"throbber_ThrobberText_3r290",blur:"throbber_blur_3cMTP",ThrobberRoundLoop:"throbber_ThrobberRoundLoop_3iwJU",roundOuterOutline:"throbber_roundOuterOutline_1yAiX",roundOuter:"throbber_roundOuter_3LNze",roundFill:"throbber_roundFill_3dnp9",ThrobberFillLoop:"throbber_ThrobberFillLoop_1e442",topCircle:"throbber_topCircle_3Zy4H",circlePulse:"throbber_circlePulse_17mrs",ThrobberTopCircleLoop:"throbber_ThrobberTopCircleLoop_RFW6m",ThrobberBottomCircleLoop:"throbber_ThrobberBottomCircleLoop_1AigW",roundThrobber15:"throbber_roundThrobber15_Ty6Px",roundThrobber14:"throbber_roundThrobber14_T03GA",roundThrobber13:"throbber_roundThrobber13_2YjHq",roundThrobber12:"throbber_roundThrobber12_39ueX",roundThrobber11:"throbber_roundThrobber11_ze_zC",roundThrobber10:"throbber_roundThrobber10_jIdSr",roundThrobber09:"throbber_roundThrobber09_3R4dR",roundThrobber08:"throbber_roundThrobber08_2WJ-s",roundThrobber07:"throbber_roundThrobber07_2UhCH",roundThrobber06:"throbber_roundThrobber06_gkW0p",roundThrobber05:"throbber_roundThrobber05_20j9w",roundThrobber04:"throbber_roundThrobber04_3TMdv",roundThrobber03:"throbber_roundThrobber03_3aNO_",roundThrobber02:"throbber_roundThrobber02_1m8h_",roundThrobber01:"throbber_roundThrobber01_2h6Ph",ThrobberRoundLoopThickness:"throbber_ThrobberRoundLoopThickness_1YJDV",throbber_xlarge:"throbber_throbber_xlarge_iO6_X",throbber_xxlarge:"throbber_throbber_xxlarge_3KPYp"}},uWOQ:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return d});var o=n("mrSG"),a=n("hReu"),i=n("N/w2"),r=n("okNM"),s=n("q1tI"),c=n("z9WT");function l(e){return s.createElement(c.b,Object(o.a)({},e,{onContextMenu:p}))}function p(e){var t=Object(a.e)(null,e);return Object(c.e)(e,t.m_unPID)}function u(e,t){var n=Object(a.e)(null,e);return Object(c.c)(e,t,n.m_unPID)}function m(e,t,n){void 0===n&&(n=!1);var o,i={bForceExternal:n};if(o="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,"undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection){var r=Object(a.f)(o);i.unPID=r.m_unPID}return Object(c.f)(o,t,i)}n.d(t,"a",function(){return c.a}),n.d(t,"d",function(){return c.d});var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return s.createElement(s.Fragment,null,Object(i.a)(this.props.rtime,{bTimeOnly:this.props.bTimeOnly,bIncludeSeconds:this.props.bIncludeSeconds}))},t=Object(o.c)([r.a],t)}(s.Component)},ugMY:function(e,t,n){e.exports={avatarHolder:"steamavatar_avatarHolder_1G7LI",avatarStatus:"steamavatar_avatarStatus_1Pwr6",avatar:"steamavatar_avatar_f2laR",friendavatar:"steamavatar_friendavatar_2yzw2"}},ujHl:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r});var o={PerYear:31536e3,PerMonth:2628e3,PerWeek:604800,PerDay:86400,PerHour:3600,PerMinute:60};function i(e){return new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0)}function r(t){return new Promise(function(e){return setTimeout(e,t)})}},uw3m:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return a});var c=n("mrSG"),l=n("q1tI"),o=n("okNM"),p=n("lqmi"),u=n("QHER"),i=n("ugMY"),m=n.n(i),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.strAvatarURL,n=e.size,o=e.className,i=e.statusStyle,r=e.statusPosition,a=e.children,s=Object(c.f)(e,["strAvatarURL","size","className","statusStyle","statusPosition","children"]);return l.createElement("div",Object(c.a)({className:Object(u.a)(m.a.avatarHolder,"avatarHolder","no-drag",n||"Medium",o)},s),l.createElement("div",{className:Object(u.a)(m.a.avatarStatus,"avatarStatus",r),style:i}),l.createElement("img",{className:Object(u.a)(m.a.avatar,"avatar"),src:t,draggable:!1}),a)},t}(l.Component),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.persona,n=e.size,o=Object(c.f)(e,["persona","size"]),i=t.avatar_url_medium;return"Small"==n||"X-Small"==n?i=t.avatar_url:"Large"!=n&&"X-Large"!=n||(i=t.avatar_url_full),l.createElement(r,Object(c.a)({strAvatarURL:i,size:n},o))},t=Object(c.c)([o.a],t)}(l.Component),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.persona,n=e.size,o=e.className,i=(e.statusStyle,e.statusPosition),r=e.children,a=Object(c.f)(e,["persona","size","className","statusStyle","statusPosition","children"]),s={};return a.onClick&&(s.cursor="pointer"),l.createElement("div",Object(c.a)({style:s,className:Object(u.a)(m.a.friendavatar,"friend","FriendAvatar",Object(p.d)(t),o)},a),r,l.createElement(d,{persona:t,size:n,statusPosition:i}))},t=Object(c.c)([o.a],t)}(l.Component)},v5rQ:function(e,t,n){e.exports={SpeakerName_InGame:"messages_SpeakerName_InGame_1vaKy",SpeakerName_Golden:"messages_SpeakerName_Golden_hZgKn",SpeakerName_WatchingBroadcast:"messages_SpeakerName_WatchingBroadcast_3DQ_c",SpeakerName_Online:"messages_SpeakerName_Online_2nKVN",SpeakerName_Default:"messages_SpeakerName_Default_1Qo8j"}},vJVb:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n("mrSG"),i=n("q1tI"),r=n("1VtQ"),a=function(n){function e(e){var t=n.call(this,e)||this;return t.state={error:null},t}return Object(o.d)(e,n),e.prototype.componentDidCatch=function(e,t){var n={error:e,info:t};this.setState({error:n})},e.prototype.clearError=function(){this.setState({error:null})},e.prototype.render=function(){var e=this.state.error;return e?this.props.renderError?this.props.renderError(e):this.defaultErrorRender(e):this.props.children},e.prototype.defaultErrorRender=function(e){var t=e.error?e.error.stack:"Stack missing",n=e.info?e.info.componentStack:"",o=e.error&&e.error.message||"unknown error";return i.createElement("div",{style:{overflow:"auto"}},i.createElement("h1",{style:{marginTop:"15px",marginLeft:"15px",color:"white",fontSize:"20px",display:"inline-block"}},'Error: "',o,'"'),"   ",i.createElement("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:this.clearError},"(x) Dismiss"),i.createElement("br",null),i.createElement("pre",{style:{marginTop:"15px",marginLeft:"15px",color:"white",fontSize:"16px"}},t),i.createElement("pre",{style:{marginTop:"15px",marginLeft:"15px",color:"white",fontSize:"16px"}},"The error occurred while rendering:",n))},Object(o.c)([r.a],e.prototype,"clearError",null),e}(i.Component)},vN90:function(e,t,n){},vZ27:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTM3OEVDNTUyMUM0MTFFNDgxN0ZEN0MzNjYzNzcxOTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTM3OEVDNTYyMUM0MTFFNDgxN0ZEN0MzNjYzNzcxOTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMzc4RUM1MzIxQzQxMUU0ODE3RkQ3QzM2NjM3NzE5NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMzc4RUM1NDIxQzQxMUU0ODE3RkQ3QzM2NjM3NzE5NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps9jzFQAAACPSURBVHjaYvz//z+DkJDQdQYGhpsMCMAKxMZAHPXu3bt9cFGQYkFBwQ0gGoaBfAEgzgfibUDsBxNnYsAOfgKxJBBvAeIZMEEWZBVA52xA5gOdUAEUc8NQDBTkBEoGMOAByCYLAjUsRzM5AKtioMQzIEW0ydjcHIBTMSE3M0Ij5RKQfQ6HGiOgIXogBkCAAQDGVT+0v+n6EQAAAABJRU5ErkJggg=="},vvG3:function(e,t,n){},"w/TS":function(e,t,n){},whIR:function(e,t,n){},xdma:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("mrSG"),s=n("q1tI"),c=n("1w3K"),l=n("QHER"),o=(n("vN90"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.duration,o=e.className,i=Object(a.f)(e,["src","duration","className"]),r={backgroundImage:"url("+t+")",transitionDuration:n/1e3+"s"};return s.createElement(c.TransitionGroup,Object(a.a)({},i,{className:Object(l.a)("crossfade",o)}),s.createElement(c.CSSTransition,{classNames:"crossfade-anim",timeout:n||500,key:t,style:r},s.createElement("div",{className:"crossfade-img"})))},t}(s.Component))},y4mg:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var m=n("mrSG"),i=n("+M9t"),d=n("LAqV"),h=n("bbBM"),f=n("q1tI"),o=n("ljid"),r=n("UqDm"),a=n("/IDK"),_=n("oh5H"),s=n("1VtQ"),c=n("e2SU"),l=function(n){function e(e){var t=n.call(this,e)||this;return t.m_friendList=null,t.m_rctChosenFriends=[],t.state={rgFriendsChosen:[],strInputValue:""},t}return Object(m.d)(e,n),Object.defineProperty(e.prototype,"selectedFriendCount",{get:function(){return this.state.rgFriendsChosen.length},enumerable:!0,configurable:!0}),e.prototype.SelectedFriendByIndex=function(e){return this.state.rgFriendsChosen[e]},e.prototype.OnTextInput=function(e){this.setState({strInputValue:e.currentTarget.value})},e.prototype.OnInputKeyDown=function(e){var t=this;if(13==e.keyCode){if(e.currentTarget.value.trim().length||this.m_friendList.BHasSelection()){e.preventDefault();var n=this.m_friendList.GetSelectedFriend();n&&this.SelectFriendSuggestion(n)}}else if(8==e.keyCode&&0==e.currentTarget.selectionEnd&&this.state.rgFriendsChosen.length){e.preventDefault();var o=void 0;this.setState(function(e){return o=e.rgFriendsChosen[e.rgFriendsChosen.length-1],{rgFriendsChosen:e.rgFriendsChosen.slice(0,e.rgFriendsChosen.length-1)}},function(){t.props.onFriendRemoved&&t.props.onFriendRemoved(o)})}else this.m_friendList.BHandleInputKeyPress(e)&&e.preventDefault()},e.prototype.SelectFriendSuggestion=function(t){var e=this;this.setState({strInputValue:""}),this.m_friendList.ClearSelection(),this.setState(function(e){return-1==e.rgFriendsChosen.indexOf(t)?{rgFriendsChosen:Object(m.g)(e.rgFriendsChosen,[t])}:null},function(){e.props.onFriendSelected&&e.props.onFriendSelected(t)})},e.prototype.RemoveFriendFromList=function(t){var e=this;this.setState(function(e){return{rgFriendsChosen:r.a(e.rgFriendsChosen,t)}},function(){e.props.onFriendRemoved&&e.props.onFriendRemoved(t)})},e.prototype.OnFriendsListRef=function(e){this.m_friendList=e},e.prototype.componentWillReceiveProps=function(e){e.rgSelectedFriends!==this.props.rgSelectedFriends&&void 0!==e.rgSelectedFriends&&(void 0!==this.props.rgSelectedFriends&&r.f(e.rgSelectedFriends,this.props.rgSelectedFriends)||this.setState({rgFriendsChosen:e.rgSelectedFriends.map(function(e){return d.f.FriendStore.GetFriend(e)})}))},e.prototype.componentWillUpdate=function(e,t){this.BuildChosenFriendList(t)},e.prototype.componentWillMount=function(){if(this.props.rgSelectedFriends){var e=this.props.rgSelectedFriends.map(function(e){return d.f.FriendStore.GetFriend(e)});e=e.filter(function(e){return null!=e}),this.setState({rgFriendsChosen:e}),this.BuildChosenFriendList(Object(m.a)(Object(m.a)({},this.state),{rgFriendsChosen:e}))}},e.prototype.BuildChosenFriendList=function(e){var t=this,n=!1;if(e.rgFriendsChosen.length!=this.m_rctChosenFriends.length)n=!0;else for(var o=0;o<e.rgFriendsChosen.length;o++)if(e.rgFriendsChosen[o].accountid!=this.m_rctChosenFriends[o].key){n=!0;break}if(n){var i=this.props.chosenFriendComponent||u;this.m_rctChosenFriends=e.rgFriendsChosen.map(function(e){return f.createElement(i,{friend:e,key:e.accountid,onClick:t.RemoveFriendFromList})})}},e.prototype.render=function(){var e=0<this.state.rgFriendsChosen.length,t=["FriendPicker"];return e&&t.push("FriendPicker_FriendsChosen"),f.createElement("div",{className:t.join(" ")},f.createElement(o.q,{onChange:this.OnTextInput,onKeyDown:this.OnInputKeyDown,label:this.props.label,value:this.state.strInputValue,placeholder:e?"":Object(_.c)("#FriendPicker_StartTyping"),autoFocus:this.props.autoFocus},this.m_rctChosenFriends),1==this.props.bDropInvite&&f.createElement("div",{className:"DialogLabel"},Object(_.c)("#Chat_InviteFriends_DropInvite")),f.createElement(p,{ref:this.OnFriendsListRef,eSort:this.props.eSort,strInputValue:this.state.strInputValue,setExcludedFriends:this.props.setExcludedFriends,rgFriendsChosen:this.state.rgFriendsChosen,fnSelectFriendSuggestion:this.SelectFriendSuggestion}))},Object(m.c)([s.a],e.prototype,"SelectedFriendByIndex",null),Object(m.c)([s.a],e.prototype,"OnTextInput",null),Object(m.c)([s.a],e.prototype,"OnInputKeyDown",null),Object(m.c)([s.a],e.prototype,"SelectFriendSuggestion",null),Object(m.c)([s.a],e.prototype,"RemoveFriendFromList",null),Object(m.c)([s.a],e.prototype,"OnFriendsListRef",null),e}(f.Component),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_iSelectedFriendIndex=-1,e.m_rgFriendSuggestions=[],e}return Object(m.d)(e,t),e.prototype.BuildFriendsList=function(t){this.m_rgFriendsList=d.f.FriendStore.all_friends,t.setExcludedFriends&&t.setExcludedFriends.size&&(this.m_rgFriendsList=this.m_rgFriendsList.filter(function(e){return!t.setExcludedFriends.has(e.accountid)}));var o=d.f.ChatStore.FriendChatStore;switch(this.props.eSort){case 0:this.m_rgFriendsList.sort(function(e,t){var n=o.GetFriendLastChatTime(t.accountid)-o.GetFriendLastChatTime(e.accountid);return 0!==n?n:i.b.DefaultFriendSortComparator(e,t)});break;default:case 1:this.m_rgFriendsList.sort(function(e,t){return e.display_name.localeCompare(t.display_name)})}this.BuildFriendSuggestionList(t)},e.prototype.componentWillMount=function(){this.BuildFriendsList(this.props)},e.prototype.componentWillReceiveProps=function(e){e.setExcludedFriends!=this.props.setExcludedFriends&&this.BuildFriendsList(e)},e.prototype.ClearSelection=function(){this.m_iSelectedFriendIndex=-1},e.prototype.BHasSelection=function(){return-1!==this.m_iSelectedFriendIndex},e.prototype.GetSelectedFriend=function(){return-1!==this.m_iSelectedFriendIndex?this.m_rgFriendSuggestions[this.m_iSelectedFriendIndex]:this.m_rgFriendSuggestions.length?this.m_rgFriendSuggestions[0]:null},e.prototype.BHandleInputKeyPress=function(e){return(38==e.keyCode||40==e.keyCode||34==e.keyCode||33==e.keyCode)&&(this.m_rgFriendSuggestions.length&&(38==e.keyCode?this.m_iSelectedFriendIndex--:33==e.keyCode?this.m_iSelectedFriendIndex=Math.max(0,this.m_iSelectedFriendIndex-5):34==e.keyCode?this.m_iSelectedFriendIndex=Math.min(this.m_rgFriendSuggestions.length-1,this.m_iSelectedFriendIndex+5):40==e.keyCode&&this.m_iSelectedFriendIndex++,this.m_iSelectedFriendIndex=(this.m_iSelectedFriendIndex+this.m_rgFriendSuggestions.length)%this.m_rgFriendSuggestions.length,this.forceUpdate()),!0)},e.prototype.OnFriendSuggestionClicked=function(e){this.props.fnSelectFriendSuggestion(this.m_rgFriendSuggestions[this.GetIndex(e)])},e.prototype.OnFriendSuggestionMouseEnter=function(e){this.m_iSelectedFriendIndex=this.GetIndex(e),this.forceUpdate()},e.prototype.OnFriendSelected=function(e){this.props.fnSelectFriendSuggestion(e)},e.prototype.OnFocusFriendRef=function(e){e&&Object(a.p)(e,e.parentElement)},e.prototype.BuildFriendSuggestionList=function(e){var t,n=void 0;-1!==this.m_iSelectedFriendIndex&&(t=this.m_rgFriendSuggestions[this.m_iSelectedFriendIndex]);var o=e.strInputValue&&e.strInputValue.trim().toLocaleLowerCase();this.m_rgFriendSuggestions=[];for(var i=0;i<this.m_rgFriendsList.length&&this.m_rgFriendSuggestions.length<100;i++){var r=this.m_rgFriendsList[i];-1===e.rgFriendsChosen.indexOf(r)&&(o&&!r.BMatchesSearchString(o,!1)||(r===t&&(n=this.m_rgFriendSuggestions.length),this.m_rgFriendSuggestions.push(r)))}-1===this.m_iSelectedFriendIndex&&o.length?this.m_iSelectedFriendIndex=0:void 0!==n?this.m_iSelectedFriendIndex=n:this.m_iSelectedFriendIndex>=this.m_rgFriendSuggestions.length&&(this.m_iSelectedFriendIndex=this.m_rgFriendSuggestions.length-1)},e.prototype.GetIndex=function(e){return Math.max(0,Math.min(this.m_rgFriendSuggestions.length,parseInt(e.currentTarget.getAttribute("data-index"))))},e.prototype.componentWillUpdate=function(e,t){this.BuildFriendSuggestionList(e)},e.prototype.render=function(){var e,i=this,t=this.m_rgFriendSuggestions.map(function(e,t){var n="FriendPicker_SuggestedFriend",o=t===i.m_iSelectedFriendIndex;return o&&(n+=" Focus"),f.createElement("div",{className:n,onClick:i.OnFriendSuggestionClicked,onMouseEnter:i.OnFriendSuggestionMouseEnter,key:e.accountid,ref:o?i.OnFocusFriendRef:null,"data-index":t},f.createElement(h.c,{noActions:!0,friend:e,context:null}))});if(""!=this.props.strInputValue||1==this.props.eSort||0==this.props.eSort)e=f.createElement(f.Fragment,null,t);else{for(var n=new Set(this.props.setExcludedFriends),o=0,r=this.props.rgFriendsChosen;o<r.length;o++){var a=r[o];a&&!n.has(a.accountid)&&n.add(a.accountid)}var s={bSingleClickActivate:!0,disableContextMenu:!0},c=0,l=d.f.FriendStore.FavoritesStore.favorites.map(function(e){return e.friend&&!n.has(e.friend.accountid)?(c++,f.createElement(h.c,Object(m.a)({friend:e.friend,key:e.friend.accountid,className:"",context:{},action:i.OnFriendSelected},s,{bFriendsListEntry:!0}))):null}),p=f.createElement(h.e,{group:d.f.FriendStore.FriendGroupStore.ingame_group,key:d.f.FriendStore.FriendGroupStore.ingame_group.id,collapsed:!1,searchString:this.props.strInputValue,fnOnSearchSelection:function(){},friendSelectAction:this.OnFriendSelected,setExcludedFriends:n,friendProps:s}),u=d.f.FriendStore.FriendGroupStore.default_groups.map(function(e){return f.createElement(h.e,{group:e,key:e.id,collapsed:!1,searchString:i.props.strInputValue,fnOnSearchSelection:function(){},friendSelectAction:i.OnFriendSelected,setExcludedFriends:n,friendProps:s})});e=f.createElement(f.Fragment,null,0<c&&f.createElement("div",{className:"friendGroup"},f.createElement("div",{className:"groupName"},Object(_.c)("#FriendGroup_Favorites")),l),p,u)}return f.createElement("div",{className:"FriendPicker_Suggestions CompactFriendsList"},f.createElement("div",{className:"insetShadow verticalInsetShadow"}),f.createElement("div",{className:"FriendPicker_Suggestions_List"},e))},Object(m.c)([s.a],e.prototype,"OnFriendSuggestionClicked",null),Object(m.c)([s.a],e.prototype,"OnFriendSuggestionMouseEnter",null),Object(m.c)([s.a],e.prototype,"OnFriendSelected",null),Object(m.c)([s.a],e.prototype,"OnFocusFriendRef",null),e}(f.Component);function u(e){return f.createElement(h.f,{friend:e.friend,context:null},f.createElement("div",{className:"FriendPicker_ChosenFriend",onClick:function(){e.onClick(e.friend)}},f.createElement("span",null,e.friend.display_name),f.createElement(c.pb,null)))}},yIxU:function(e,t,n){e.exports={Separator:"remoteplay_Separator_HudB6",FriendPickerSeparator:"remoteplay_FriendPickerSeparator_1tFSY",Spacer:"remoteplay_Spacer_2CNje",NegativeSpacer:"remoteplay_NegativeSpacer_k4oQ6",Dialog_RemotePlay:"remoteplay_Dialog_RemotePlay_KxSGW",NoRightMargin:"remoteplay_NoRightMargin_2lF51",BottomMargin:"remoteplay_BottomMargin_10Hm5",HorizontalContainer:"remoteplay_HorizontalContainer_2Hgly",SmallAvatarContainer:"remoteplay_SmallAvatarContainer_XZwtu",AvatarContainer:"remoteplay_AvatarContainer_1GpXq",playerVoiceContainer:"remoteplay_playerVoiceContainer_RACvk",StreamPauseOptionContainer:"remoteplay_StreamPauseOptionContainer_3rtYF",SharedInputContainer:"remoteplay_SharedInputContainer_3mLvF",StreamPauseOptionLabel:"remoteplay_StreamPauseOptionLabel_3lNx_",VerticalContainer:"remoteplay_VerticalContainer_JlcJr",HeightLimited:"remoteplay_HeightLimited_3YWYC",AlignRight:"remoteplay_AlignRight_33Dx4",Width100:"remoteplay_Width100_2pizL",GroupingBox:"remoteplay_GroupingBox_3RQlG",EndStreamContainer:"remoteplay_EndStreamContainer_2wVqS",EndStreamContainerHost:"remoteplay_EndStreamContainerHost_2Bp5D",EndStreamContainerUnpaused:"remoteplay_EndStreamContainerUnpaused_2OyOp",StreamPausedContainer:"remoteplay_StreamPausedContainer_1qgCi",InviteSentContainer:"remoteplay_InviteSentContainer_1ZcDv",inviteGlow:"remoteplay_inviteGlow_3Rj5v",MicContainer:"remoteplay_MicContainer_190N4",PlayerSectionTitle:"remoteplay_PlayerSectionTitle_2Pqsn",ActiveGameButton:"remoteplay_ActiveGameButton_1CVa6",ProductImage:"remoteplay_ProductImage_3685D",BasicButton:"remoteplay_BasicButton_1xo61",FitButton:"remoteplay_FitButton_3Hql6",FitContent:"remoteplay_FitContent_1CSne",TextButton:"remoteplay_TextButton_1ppit",VoiceSettingsButtonContainer:"remoteplay_VoiceSettingsButtonContainer_2UFte",KickPlayerContainer:"remoteplay_KickPlayerContainer_3VGUM",VolumeSlider:"remoteplay_VolumeSlider_2TzD0",AutoSizeButton:"remoteplay_AutoSizeButton_2wzm1",AddFriendButton:"remoteplay_AddFriendButton_3UWe3",remotePlayAddFriendText:"remoteplay_remotePlayAddFriendText_5SyTY",remotePlayIcon:"remoteplay_remotePlayIcon_JOpvU",DialogButton:"remoteplay_DialogButton_hSk9D",wiggleIcon:"remoteplay_wiggleIcon_2fQQS",accessDisabled:"remoteplay_accessDisabled_1nvPI",wiggleIconDisabled:"remoteplay_wiggleIconDisabled_3CUcV",IconKeyboard:"remoteplay_IconKeyboard_2egIR",IconMouse:"remoteplay_IconMouse_3a1rQ",IconController:"remoteplay_IconController_3mRay",IconSpeaker:"remoteplay_IconSpeaker_2iecr",Slashout:"remoteplay_Slashout_37vz8"}},yoQ3:function(e,t,n){"use strict";var r=n("mrSG"),u=n("tkkQ"),m=n("hReu"),d=n("LAqV"),h=n("Oefq"),f=n("dpJ7"),_=n("bbBM"),g=n("q1tI"),b=function(n){function e(e){var t=n.call(this,e)||this;return t.m_fnExistingPopupInitializer=void 0,t.BindResizeGrip=t.BindResizeGrip.bind(t),t}return Object(r.d)(e,n),e.prototype.BindResizeGrip=function(e){var t=0,n=0;if(e){var o=e.getBoundingClientRect(),i=e.ownerDocument.defaultView;o&&i&&(t=Math.ceil(i.innerWidth-o.left),n=Math.ceil(i.innerHeight-o.top))}var r=this.props.popup;r.SteamClient&&r.SteamClient.Window&&r.SteamClient.Window.SetResizeGrip&&r.SteamClient.Window.SetResizeGrip(t,n)},e.prototype.componentWillUnmount=function(){this.props.popup.SteamClient.Window.SetResizeGrip(0,0)},e.prototype.render=function(){return g.createElement("div",{className:"window_resize_grip",ref:this.BindResizeGrip})},e}(g.PureComponent),v=n("oh5H"),i=n("1VtQ"),S=function(n){function e(e){var t=n.call(this,e)||this;return t.m_refTextInput=null,t.state={error:1,strPIN:""},t}return Object(r.d)(e,n),e.prototype.componentDidMount=function(){this.m_refTextInput.focus()},e.prototype.BindTextInput=function(e){this.m_refTextInput=e},e.prototype.OnPINInput=function(e){this.setState({strPIN:e.target.value})},e.prototype.onOK=function(e){var t=this;return e.preventDefault(),d.f.ParentalStore.Unlock(this.state.strPIN).then(function(e){1!=e&&t.setState({error:e})}),!0},e.prototype.render=function(){var e="";switch(this.state.error){case 1:break;case 25:e=Object(v.c)("#FamilyView_TooManyAttempts");break;default:e=Object(v.c)("#FamilyView_BadPIN")}return g.createElement("div",null,g.createElement("div",{className:"FamilyViewTitle"},Object(v.c)("#FamilyView_Title")),g.createElement("div",{className:"FamilyViewInstructions"},Object(v.c)("#FamilyView_Unlock_Instructions")),g.createElement("form",{onSubmit:this.onOK},g.createElement("input",{type:"password",maxLength:4,className:"pinInput",autoComplete:"current-pin",ref:this.BindTextInput,value:this.state.strPIN,onChange:this.OnPINInput}),g.createElement("button",{type:"submit"},Object(v.c)("#Button_OK"))),e&&g.createElement("p",{className:"error_text"},e))},Object(r.c)([i.a],e.prototype,"BindTextInput",null),Object(r.c)([i.a],e.prototype,"OnPINInput",null),Object(r.c)([i.a],e.prototype,"onOK",null),e}(g.Component),a=n("2vnA"),s=n("okNM"),c=n("i8i4"),y=n("1w3K"),C=n("JtU4"),O=n("vJVb"),o=n("0wLp"),I=n("EGkk"),l=n("/7KC"),E=n("GxRc"),w=n("29iz"),p=n("ZsEe"),M=n.n(p),D=n("XaMz"),T=n("kQil"),G=n("hEDq");function R(e,t,n,o,i){(i?d.h:setTimeout)(function(){c.render(g.createElement(j,{friends:t,chats:n,browserContext:e,elTarget:o}),o)})}n.d(t,"d",function(){return R}),n.d(t,"b",function(){return k}),n.d(t,"a",function(){return F}),n.d(t,"c",function(){return z}),n.d(t,"e",function(){return q});var j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.browserContext,n=e.friends,o=e.chats,i=e.elTarget,r=new m.b(i.ownerDocument.defaultView),a=null,s=d.f.ready_to_render;return s&&(a=d.f.UIStore.GetDefaultTabSetForContext(t),d.f.UIStore.GetPerContextChatData(t).SetFriendsListWindow(r)),[g.createElement(L,{key:"throbber",fadeOut:s}),d.f.ready_to_render?g.createElement(P,{key:"interface",friends:n,chats:o,tabset:a,container:r}):null]},t=Object(r.c)([s.a],t)}(g.Component),L=function(n){function e(e){var t=n.call(this,e)||this;return t.m_refElement=g.createRef(),t.state={bFadeOutComplete:!1},t}return Object(r.d)(e,n),e.prototype.OnTransitionEnd=function(e){var t=this.m_refElement.current;t&&e.target==t&&this.props.fadeOut&&"opacity"==e.propertyName&&this.setState({bFadeOutComplete:!0})},e.prototype.render=function(){if(this.state.bFadeOutComplete)return null;var e=M.a.throbberContainer;return this.props.fadeOut&&(e+=" "+M.a["throbberContainer-exit-active"]),g.createElement("div",{className:e,onTransitionEnd:this.OnTransitionEnd,ref:this.m_refElement},g.createElement("div",{className:"WaitingForInterFaceReadyContainer"},g.createElement("div",{className:"WaitingForInterFaceReadyThrobber"},g.createElement(E.a,{className:"Throbber_Blur",size:"xlarge"}),g.createElement(E.a,{size:"xlarge"}))))},Object(r.c)([i.a],e.prototype,"OnTransitionEnd",null),e}(g.Component),A=function(i){function e(e,t,n,o){return i.call(this,e,t,n,o)||this}return Object(r.d)(e,i),e.prototype.GetSavedDimensionsKey=function(){if(this.BIsInOverlay()){var e=d.f.UIStore.GetPerContextChatData(this.m_rgParams.target_browser).screen_info;return"Overlay_"+(e&&e.width&&e.height?e.width+"x"+e.height+"_":"")+this.m_strSavedDimensionsKey}return this.m_strSavedDimensionsKey},e}(C.b),k=function(p){function e(e,t,n,o){var i=this,r=C.c.Resizable;o&&(r|=C.c.Minimized);var a=300,s=650,c="PopupFriendsListDimensions";n.m_eBrowserType==G.f.EBrowserType_OpenVROverlay_Dashboard&&(a=1440,s=810,r&=~C.c.Resizable,c=null);var l={dimensions:{width:a,height:s},minWidth:226,minHeight:400,title:Object(v.c)("#WindowTitle_FriendsList"),html_class:"client_chat_frame fullheight SavedDimensionsPopup",body_class:"fullheight",target_browser:0<n.m_unPID?n:void 0,eCreationFlags:r};return(i=p.call(this,"friendslist",c,l,!1)||this).m_friends=e,i.m_chats=t,m.h.m_strLoaderWindowRestoreDetails&&(i.SaveWindowPosition(m.h.m_strLoaderWindowRestoreDetails),m.h.m_strLoaderWindowRestoreDetails=void 0),i}return Object(r.d)(e,p),e.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame");var n=new m.b(e),o=this.browser_info||d.a,i=d.f.UIStore.GetDefaultTabSetForContext(o);this.m_browserContext=o,c.render(g.createElement(P,{popup:this,friends:this.m_friends,chats:this.m_chats,tabset:i,container:n}),t)},e.prototype.OnResizeComplete=function(e){p.prototype.OnResizeComplete.call(this,e),window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:e},"https://steamloopback.host")},e.prototype.OnClose=function(){p.prototype.OnClose.call(this),window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:this.m_rgParams.strRestoreDetails},"https://steamloopback.host"),d.f.OnFriendsListClosed(this.m_browserContext)},e}(A),P=function(o){function e(e){var t=o.call(this,e)||this;t.m_bUsePopups=!1,t.m_nWindowTitleUnreadCycleCount=0,t.m_refChatDialog=g.createRef(),t.m_refRoot=g.createRef(),t.m_lastFocusElement=null;t.m_browserContext=t.props.popup&&t.props.popup.browser_info?t.props.popup.browser_info:d.a;var n=d.f.UIStore.GetPerContextChatData(t.m_browserContext);return t.m_bUsePopups=n.BUsePopups(),t.m_bUsePopups?t.m_nInlineChatWidth=640:(t.m_nInlineChatWidth=530,t.m_ResponsiveWindowState=d.f.UIStore.GetResponsiveWindowState(t.m_browserContext)),t.state={bIsResizingWindow:!1},t}return Object(r.d)(e,o),e.prototype.OnCopy=function(e){this.m_refChatDialog&&this.m_refChatDialog.current&&this.m_refChatDialog.current.OnCopy(e)},e.prototype.OnWindowResizeEvent=function(e){var o=this,i=this.m_bUsePopups?this.props.popup:null;i&&i.IsMinimized().then(function(e){if(!e){var t=i.window;if(!(t.innerWidth<226)){var n=t.innerWidth>=o.m_nInlineChatWidth;d.f.UIStore.SetFriendsListSingleWindowMode(o.m_browserContext,n),n&&o.SetFriendsListSingleWindowWidth(m.h.UIDisplayPrefs.nFriendsListSingleWindowWidthPx)}}})},e.prototype.BindWindowHandlers=function(){var i=this;this.m_popupActionDisposer=Object(a.h)(function(){if(!u.a.IN_CLIENT){var e=d.f.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();e.length&&void 0===i.m_unTimerWindowTitleUnreadCycle?i.m_unTimerWindowTitleUnreadCycle=window.setInterval(function(){i.m_nWindowTitleUnreadCycleCount=(i.m_nWindowTitleUnreadCycleCount+1)%1e3},2e3):e.length||void 0===i.m_unTimerWindowTitleUnreadCycle||(window.clearInterval(i.m_unTimerWindowTitleUnreadCycle),i.m_unTimerWindowTitleUnreadCycle=void 0);var t=1+e.length,n=i.m_nWindowTitleUnreadCycleCount%t;if(0<n){var o=e[n-1];return void(i.props.container.title=Object(v.c)("#WindowTitle_UnreadMessage",o.name))}}d.f.UIStore.BIsFriendsListSingleWindow(i.m_browserContext)&&i.props.tabset.GetTitle()?u.a.IN_CLIENT?i.props.container.title=Object(v.c)("#WindowTitle_FriendsList")+" - "+i.props.tabset.GetTitle():i.props.container.title=i.props.tabset.GetTitle():i.props.container.title=Object(v.c)("#WindowTitle_FriendsList")}),this.m_popupFocusDisposer=this.props.container.OnFocus(function(){d.f.UIStore.BIsFriendsListSingleWindow(i.m_browserContext)&&i.props.tabset.OnWindowFocus()})},e.prototype.UnbindWindowHandlers=function(){this.m_popupActionDisposer&&(this.m_popupActionDisposer(),this.m_popupActionDisposer=void 0),this.m_popupFocusDisposer&&(this.m_popupFocusDisposer.unregister(),this.m_popupFocusDisposer=void 0)},e.prototype.componentWillMount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.addEventListener("resize",this.OnWindowResizeEvent),this.BindWindowHandlers()},e.prototype.componentWillUnmount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.removeEventListener("resize",this.OnWindowResizeEvent),this.UnbindWindowHandlers()},e.prototype.componentDidMount=function(){this.m_browserContext.m_eBrowserType!=G.f.EBrowserType_OpenVROverlay&&this.m_browserContext.m_eBrowserType!=G.f.EBrowserType_OpenVROverlay_Dashboard||(this.m_refRoot.current.addEventListener("focusin",this.OnFocusIn),this.m_refRoot.current.addEventListener("focusout",this.OnFocusOut))},e.prototype.OnFocusIn=function(e){var t=!1;switch(e.target.tagName){case"TEXTAREA":t=!0;break;case"INPUT":t="text"==e.target.type}t&&(e.currentTarget.ownerDocument.defaultView.SteamClient.OpenVR.ShowKeyboard(),console.log("Showing VR Keyboard"),this.m_lastFocusElement=e.target,this.m_lastFocusElement.addEventListener("click",this.OnTextInputClick))},e.prototype.OnFocusOut=function(e){e.target==this.m_lastFocusElement&&(e.currentTarget.ownerDocument.defaultView.SteamClient.OpenVR.HideKeyboard(),this.m_lastFocusElement.removeEventListener("click",this.OnTextInputClick),this.m_lastFocusElement=null,console.log("Hiding VR Keyboard"))},e.prototype.OnTextInputClick=function(e){e.currentTarget.ownerDocument.defaultView.SteamClient.OpenVR.ShowKeyboard()},e.prototype.BindFriendsListContainer=function(e){this.m_elFriendsListContainer=e&&e.div},e.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.setState({bIsResizingWindow:!0}),t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterFriendsListDragEvents)},e.prototype.OnGrabberTouchStart=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("touchmove",this.HandleTouchMove),t.addEventListener("touchend",this.UnregisterFriendsListDragEvents)},e.prototype.HandleTouchMove=function(e){1<=e.touches.length&&this.InternalAdjustFriendsListContainerOnDrag(e.touches[0].clientX)},e.prototype.HandleMouseMove=function(e){this.InternalAdjustFriendsListContainerOnDrag(e.clientX)},e.prototype.InternalAdjustFriendsListContainerOnDrag=function(e){if(this.m_elFriendsListContainer){var t=this.m_elFriendsListContainer.getBoundingClientRect().left;this.SetFriendsListSingleWindowWidth(e-t)}},e.prototype.SetFriendsListSingleWindowWidth=function(e){var t=(this.props.popup?this.props.popup.window:window).innerWidth,n=Object(l.a)(t-400,200,440);e=Object(l.a)(e,200,n),m.h.SetUIDisplayPref("nFriendsListSingleWindowWidthPx",e)},e.prototype.UnregisterFriendsListDragEvents=function(e){this.setState({bIsResizingWindow:!1}),e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("touchmove",this.HandleTouchMove),e.view.removeEventListener("mouseup",this.UnregisterFriendsListDragEvents),e.view.removeEventListener("touchend",this.UnregisterFriendsListDragEvents)},e.prototype.render=function(){var e=!0,t=!0,n=!1,o=!1;if(!d.f.UIStore.BIsFriendsListSingleWindow(this.m_browserContext))if(this.m_ResponsiveWindowState){var i=this.m_ResponsiveWindowState.GetActiveView();e=i==h.c.FriendsList,t=i==h.c.Chat}else t=!1;var r=d.f.UIStore.GetTheaterMode(),a=!(u.a.IN_CLIENT||r||u.a.IN_TENFOOT||window.__bHideHeader),s="chat_main fullheight",c=null;e&&t?(0<this.props.tabset.tabCount&&(o=!0,n=d.f.UIStore.BIsFriendsListCollapsed(this.m_browserContext)),s+=" singlewindow",c=g.createElement("div",{className:"singleWindowDivider"+(n?" friendsListCollapsed":""),onMouseDown:this.OnGrabberMouseDown,onTouchStart:this.OnGrabberTouchStart})):e?s+=" responsive_friends":t&&(s+=" responsive_chats"),this.state.bIsResizingWindow&&(s+=" resizingSingleWindow"),r&&(s+=" TheaterMode"),this.props.popup&&this.props.popup.focused&&(s+=" focused"),d.f.CMInterface.BDisconnected()&&(s+=" errorDisconnected");var l=this.props.popup&&this.props.popup.window,p=n?{width:0,transition:"width 0.32s ease-in-out, opacity 0.32s ease-in-out"}:{width:m.h.UIDisplayPrefs.nFriendsListSingleWindowWidthPx+"px"};return d.f.ParentalStore.BIsFriendsBlocked()?u.a.IN_CLIENT?g.createElement("div",{className:s},g.createElement(S,null)):(location.reload(),g.createElement("div",null)):g.createElement("div",{className:s,onContextMenu:I.i,ref:this.m_refRoot},g.createElement(O.a,null,g.createElement(V,{popup:this.props.popup?this.props.popup.window:void 0})),a&&g.createElement(N,{friends:this.props.friends}),g.createElement("div",{className:"chat_main_flex displayRow",onCopy:this.OnCopy},!1,d.f.ready_to_render&&g.createElement(O.a,null,g.createElement(T.a,{ModalManager:Object(T.c)(l||window)}),e&&g.createElement(w.a,{className:"friendsListContainer fullheight "+(n?"collapsed":""),style:t?p:null,ref:this.BindFriendsListContainer,rgAcceptedTypes:[],bAcceptsFiles:!0},g.createElement(_.g,{friends:this.props.friends,chats:this.props.chats,popup:l,browserContext:this.m_browserContext,collapsible:o,collapsed:n})),c,t&&g.createElement(f.g,{tabs:this.props.tabset,popup:l,ref:this.m_refChatDialog,ResponsiveWindowState:e?null:this.m_ResponsiveWindowState,showOpenFriendsList:o&&n}),this.props.popup&&u.a.IN_CLIENT&&g.createElement(b,{popup:l}),g.createElement("div",{className:"singleWindowFocusBar"}))))},Object(r.c)([a.x],e.prototype,"m_nWindowTitleUnreadCycleCount",void 0),Object(r.c)([i.a],e.prototype,"OnCopy",null),Object(r.c)([i.a],e.prototype,"OnWindowResizeEvent",null),Object(r.c)([i.a],e.prototype,"OnFocusIn",null),Object(r.c)([i.a],e.prototype,"OnFocusOut",null),Object(r.c)([i.a],e.prototype,"OnTextInputClick",null),Object(r.c)([i.a],e.prototype,"BindFriendsListContainer",null),Object(r.c)([i.a],e.prototype,"OnGrabberMouseDown",null),Object(r.c)([i.a],e.prototype,"OnGrabberTouchStart",null),Object(r.c)([i.a],e.prototype,"HandleTouchMove",null),Object(r.c)([i.a],e.prototype,"HandleMouseMove",null),Object(r.c)([i.a],e.prototype,"UnregisterFriendsListDragEvents",null),e=Object(r.c)([s.a],e)}(g.Component),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props.friends.self;return g.createElement("div",{className:M.a.SteamPageHeader},g.createElement("a",{href:""+u.a.STORE_BASE_URL},g.createElement("div",{className:M.a.SteamPageHeaderShortLogo})),g.createElement(B,{text:"STORE",href:""+u.a.STORE_BASE_URL}),g.createElement(B,{text:"COMMUNITY",href:""+u.a.COMMUNITY_BASE_URL}),g.createElement(B,{text:e.primary_display_name,href:e.GetCommunityProfileURL()}),g.createElement(B,{text:"SUPPORT",href:""+u.a.HELP_BASE_URL}))},t=Object(r.c)([s.a],t)}(g.Component);function B(e){return g.createElement("a",{className:M.a.SteamPageHeaderTopLink,href:e.href},e.text)}var F=function(l){function e(e,t,n,o,i,r,a){var s=this,c={title:"",html_class:"client_chat_frame fullheight ChatPopup",body_class:"fullheight",minWidth:400,minHeight:250,strRestoreDetails:i,dimensions:{width:740,height:650},target_browser:0<e.m_unPID?e:void 0,eCreationFlags:C.c.Resizable};return a&&(c.eCreationFlags|=C.c.Minimized),r&&(Object.assign(c.dimensions,r),c.bIgnoreSavedDimensions=!0),(s=l.call(this,"chat_"+t,n.GetTabSetIdentifier(),c,!0)||this).m_tabSet=n,s.m_chats=o,s}return Object(r.d)(e,l),e.prototype.SetTitle=function(){if(this.m_popup&&this.m_popup.document&&this.m_tabSet){var e=this.m_tabSet.GetTitle();this.m_popup.document.title=e}},e.prototype.OnFocus=function(){this.m_tabSet.OnWindowFocus()},e.prototype.BindWindowHandlers=function(){this.m_popupActionDisposer||(this.m_popupActionDisposer=Object(a.h)(this.SetTitle))},e.prototype.UnbindWindowHandlers=function(){this.m_popupActionDisposer&&(this.m_popupActionDisposer(),this.m_popupActionDisposer=void 0)},Object.defineProperty(e.prototype,"tab_set",{get:function(){return this.m_tabSet},enumerable:!0,configurable:!0}),e.prototype.ClearTabSet=function(){this.m_tabSet=void 0},e.prototype.OnResize=function(){d.f.UIStore.OnTabSetResized(this.m_tabSet),l.prototype.OnResize.call(this)},e.prototype.OnBeforeUnload=function(){l.prototype.SetSavedDimensionsKey.call(this,this.m_tabSet.GetTabSetIdentifier()),l.prototype.OnBeforeUnload.call(this)},e.prototype.OnClose=function(){if(this.m_tabSet){var e=!1;null!=this.m_popup.window&&this.m_popup.window.SteamClient&&this.m_popup.window.SteamClient.Window&&this.m_popup.window.SteamClient.Window.ProcessShuttingDown&&(e=this.m_popup.window.SteamClient.Window.ProcessShuttingDown()),this.m_tabSet.OnPopupClosed(e)}this.UnbindWindowHandlers()},e.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame"),this.BindWindowHandlers(),c.render(g.createElement(x,{popup:this,chatTabs:this.m_tabSet}),t)},Object(r.c)([i.a],e.prototype,"SetTitle",null),e}(A),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props.popup.window,t=this.props.chatTabs,n="popup_chat_frame fullheight";return this.props.popup.focused&&(n+=" focused"),d.f.UIStore.GetTheaterMode()&&(n+=" TheaterMode"),d.f.CMInterface.BDisconnected()&&(n+=" errorDisconnected"),g.createElement("div",{className:n,onContextMenu:I.i},g.createElement(V,{popup:this.props.popup.window}),!1,g.createElement(T.a,{ModalManager:Object(T.c)(e)}),g.createElement(f.g,{tabs:t,popup:e,ResponsiveWindowState:null}),u.a.IN_CLIENT&&g.createElement(b,{popup:e}))},t=Object(r.c)([s.a],t)}(g.Component),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.OnKeyDown=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.render=function(){if(u.a.IN_CLIENT){if(d.f.CMInterface.BDisconnected()){Object(m.f)(this.props.popup),d.a;return g.createElement("div",{className:"ConnectionTrouble",tabIndex:0,onKeyDown:this.OnKeyDown},g.createElement("div",{className:"ConnectionTroubleContent"},g.createElement(o.a,{hideMinMax:!0,popup:this.props.popup}),g.createElement("div",{className:"ConnectionTroubleMessage"},Object(v.c)("#ConnectionTrouble_CurrentlyDisconnected"))))}return null}return g.createElement(U,null)},Object(r.c)([i.a],t.prototype,"OnKeyDown",null),t=Object(r.c)([s.a],t)}(g.Component),U=function(n){function e(e){var t=n.call(this,e)||this;return t.m_bRequestingNotificationPermission=!1,t.state={bShouldRequestNotificationPermission:!0,bShowStartupDelayMessage:!1,bShowReconnectWaitMessage:!1,cReconnectWaitSeconds:0},t}return Object(r.d)(e,n),e.prototype.componentWillMount=function(){var e=this;if(!d.f.ready_to_render){var t=performance.now()-d.f.GetStartupTime();this.m_iIntervalDelayedStartup=window.setTimeout(function(){e.setState({bShowStartupDelayMessage:!0}),e.m_iIntervalDelayedStartup=void 0},1500-t)}},e.prototype.componentWillUnmount=function(){this.m_iIntervalDelayedStartup&&(window.clearTimeout(this.m_iIntervalDelayedStartup),this.m_iIntervalDelayedStartup=void 0),this.m_iIntervalUpdateReconnectStatus&&(window.clearInterval(this.m_iIntervalUpdateReconnectStatus),this.m_iIntervalUpdateReconnectStatus=void 0)},e.prototype.IntervalUpdateReconnectWaitStatus=function(){var e=m.h.WebLogonManager;if(e.BIsWaitingToReconnect()){var t=Math.ceil(e.GetMSUntilNextReconnectAttempt()/1e3);t!=this.state.cReconnectWaitSeconds&&this.setState({bShowReconnectWaitMessage:!0,cReconnectWaitSeconds:t})}else window.clearInterval(this.m_iIntervalUpdateReconnectStatus),this.m_iIntervalUpdateReconnectStatus=void 0,this.setState({bShowReconnectWaitMessage:!1,cReconnectWaitSeconds:0})},e.prototype.StartReconnectUpdateInterval=function(){this.m_iIntervalUpdateReconnectStatus||(this.m_iIntervalUpdateReconnectStatus=window.setInterval(this.IntervalUpdateReconnectWaitStatus,250))},e.prototype.OnReconnectNowClick=function(){m.h.WebLogonManager.ReconnectNow()},e.prototype.OnLoginClick=function(){window.location.href=window.location.href},e.prototype.render=function(){var e=this,t=m.h.WebLogonManager;if(Object(D.a)(t,"No WebLogonManager in WebConnectionTroubleOverlay"),!t)return null;var n=null,o=t.web_logon_state,i=!d.f.NotificationManager.BNotificationsPermitted()&&this.state.bShouldRequestNotificationPermission;if(9!=o||i){var r=void 0,a="",s=!1,c=!1;if(9!=o)if(d.f.ready_to_render||this.state.bShowStartupDelayMessage||!t.BIsInInitialConnect())switch(o){case 1:case 3:r=Object(v.c)("#ConnectionTrouble_Connecting"),c=!0;break;case 5:case 7:r=Object(v.c)("#ConnectionTrouble_LoggingIn"),c=!0;break;case 11:r=Object(v.c)("#ConnectionTrouble_RetrievingLogin"),c=!0;break;case 2:case 4:case 12:r=Object(v.c)("#ConnectionTrouble_FailedToConnect");break;case 8:case 6:r=Object(v.c)("#ConnectionTrouble_FailedToLogIn");break;case 10:r=Object(v.c)("#ConnectionTrouble_DisconnectedFinal");break;case 13:r=Object(v.c)("#ConnectionTrouble_LoginLost"),s=!0;break;case 14:r=Object(v.c)("#ConnectionTrouble_LoginChanged"),s=!0;break;case 15:r=Object(v.c)("#ConnectionTrouble_LoggedOnElsewhere");break;default:Object(D.a)(!1,"No message for trouble state "+o)}else a="InitialConnect";else i&&(this.m_bRequestingNotificationPermission||(d.f.NotificationManager.RequestNotificationPermission().then(function(){e.m_bRequestingNotificationPermission=!1,e.setState({bShouldRequestNotificationPermission:!1})}),this.m_bRequestingNotificationPermission=!0),a="NotificationBrowserWarning",r=Object(v.c)("#NotificationBrowserWarning"));var l=t.BIsWaitingToReconnect(),p=t.BWillAutoReconnect();!this.state.bShowReconnectWaitMessage&&p&&this.StartReconnectUpdateInterval(),!r&&d.f.ready_to_render||(n=g.createElement(y.CSSTransition,{classNames:"modalbg-anim",timeout:300},g.createElement("div",{className:"ConnectionTrouble WebConnectionTrouble"+(d.f.ready_to_render?"":" NotReadyToRender")},g.createElement("div",{className:""+a}),g.createElement("div",{className:"ConnectionTroubleContent"},g.createElement("div",{className:"ConnectionTroubleMessage "+a},g.createElement("div",{className:"errorMessageContainer"},g.createElement("div",{className:"connectionThrobber"+(c?" showThrobber":"")},g.createElement(E.a,{size:"small"})," "),g.createElement("div",null,d.f.ready_to_render?r:Object(v.c)("#ConnectionTrouble_Connecting"))),l&&p&&g.createElement("div",{className:"ReconnectWaitMessage"},Object(v.d)("#ConnectionTrouble_ReconnectingInSeconds",Math.ceil(t.GetMSUntilNextReconnectAttempt()/1e3))),l&&g.createElement("div",{className:"ConnectionTroubleReconnectMessage"},g.createElement("div",{className:"ReconnectNow"},g.createElement("button",{type:"button",className:"DialogButton Primary",onClick:this.OnReconnectNowClick},Object(v.c)("#ConnectionTrouble_ReconnectNow")))),s&&g.createElement("div",{className:"ConnectionTroubleReconnectMessage"},g.createElement("div",{className:"ReconnectNow"},g.createElement("button",{type:"button",className:"DialogButton Primary",onClick:this.OnLoginClick},Object(v.c)(14!=o?"#ConnectionTrouble_LoginAgain":"#ConnectionTrouble_LoginChanged_Reload")))))))))}return g.createElement(y.TransitionGroup,null,n)},Object(r.c)([i.a],e.prototype,"IntervalUpdateReconnectWaitStatus",null),Object(r.c)([i.a],e.prototype,"OnReconnectNowClick",null),Object(r.c)([i.a],e.prototype,"OnLoginClick",null),e=Object(r.c)([s.a],e)}(g.Component),H="DEBUG_MobxDevTools",W=Object(a.x)({bEnabled:null});function z(){return W.bEnabled}function q(e){e?window.sessionStorage.setItem(H,"true"):window.sessionStorage.removeItem(H),W.bEnabled=e}},yolM:function(e,t,n){"use strict";var o=n("mrSG"),d=n("LAqV"),i=n("hReu"),r=n("tkkQ"),a=n("Hi0u"),h=n("q1tI"),s=n("okNM"),c=n("mQsC"),l=n("1VtQ"),f=n("oh5H"),_=n("ljid"),g=n("VZeO"),b=n("bbBM"),v=n("e2SU"),p=function(n){function e(e){var t=n.call(this,e)||this;return t.m_rgMicOptions=[{label:"Default",data:"default"}],t.m_rgOutputOptions=[{label:"Default",data:"default"}],t.state={showAdvanced:!1,micOptionsReady:!1,outputOptionsReady:!1,hotkeyCapturing:!1},navigator.mediaDevices.enumerateDevices().then(t.gotMediaDevices).catch(t.gotMediaDevicesError),t}return Object(o.d)(e,n),e.prototype.gotMediaDevices=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("audioinput"==n.kind){if("default"!=n.deviceId){var o=n.label;"communications"==n.deviceId&&(o=Object(f.c)("#Voice_DefaultCommunicationsDefault")),this.m_rgMicOptions.push({label:o,data:n.deviceId})}}else if("audiooutput"==n.kind&&"default"!=n.deviceId){o=n.label;"communications"==n.deviceId&&(o=Object(f.c)("#Voice_DefaultCommunicationsDefault")),this.m_rgOutputOptions.push({label:o,data:n.deviceId})}}this.setState({micOptionsReady:!0}),this.setState({outputOptionsReady:!0})},e.prototype.gotMediaDevicesError=function(){this.setState({micOptionsReady:!0}),this.setState({outputOptionsReady:!0})},e.prototype.OKToSwitchAway=function(){return!0},e.prototype.onSubmit=function(){return!1},e.prototype.VoiceSettingsRefMarker=function(e){e&&e.ownerDocument&&(this.m_elVoiceSettingsMarkerScroll=e,this.m_window=e.ownerDocument.defaultView)},e.prototype.OnShowAdvancedSettings=function(){var e=this;this.setState({showAdvanced:!this.state.showAdvanced}),this.m_iTimeOutVoiceSettingsScroll=this.m_window.setTimeout(function(){e.m_elVoiceSettingsMarkerScroll&&e.state.showAdvanced&&e.m_elVoiceSettingsMarkerScroll.scrollIntoView({behavior:"smooth"}),e.m_window.clearTimeout(e.m_iTimeOutVoiceSettingsScroll)},200)},e.prototype.OnMicDropdownChanged=function(e){this.props.voiceStore.SetSelectedMic(e.data)},e.prototype.OnOutputDeviceDropdownChanged=function(e){this.props.voiceStore.SetSelectedOutput(e.data)},e.prototype.OnInputGainChanged=function(e){this.props.voiceStore.SetVoiceInputGain(this.props.voiceStore.ConvertSliderToGainValue(e,g.a.k_MaxInputOutputGainValue))},e.prototype.OnOutputGainChanged=function(e){this.props.voiceStore.SetVoiceOutputGain(this.props.voiceStore.ConvertSliderToGainValue(e,g.a.k_MaxInputOutputGainValue))},e.prototype.OnToggleEchoCancellation=function(e){this.props.voiceStore.SetUseEchoCancellation(e)},e.prototype.OnToggleNoiseCancellation=function(e){this.props.voiceStore.SetUseNoiseCancellation(e)},e.prototype.OnToggleAutoGainControl=function(e){this.props.voiceStore.SetUseAutoGainControl(e)},e.prototype.SetNoiseGateOff=function(){this.props.voiceStore.SetUseNoiseGateLevel(g.b.k_ENoiseGateLevel_Off)},e.prototype.SetNoiseGateMedium=function(){this.props.voiceStore.SetUseNoiseGateLevel(g.b.k_ENoiseGateLevel_Medium)},e.prototype.SetNoiseGateHigh=function(){this.props.voiceStore.SetUseNoiseGateLevel(g.b.k_ENoiseGateLevel_High)},e.prototype.SetHotKeyCaptureState=function(e){0==e?(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.UnregisterForMouseXButtonDown&&SteamClient.WebChat.UnregisterForMouseXButtonDown(),this.setState({hotkeyCapturing:!1})):(this.setState({hotkeyCapturing:!0}),null!=SteamClient.WebChat&&null!=SteamClient.WebChat.RegisterForMouseXButtonDown&&SteamClient.WebChat.RegisterForMouseXButtonDown(this.OnXButtonDown))},e.prototype.OnXButtonDown=function(e){0<e&&this.state.hotkeyCapturing&&(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkMouseButton&&(SteamClient.WebChat.SetPushToTalkMouseButton(e),d.f.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1))},e.prototype.OnTogglePushToTalk=function(){if("undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkEnabled){var e=d.f.VoiceStore.GetPushToTalkEnabled();SteamClient.WebChat.SetPushToTalkEnabled(!e),d.f.VoiceStore.SetPushToTalkEnabled(!e)}},e.prototype.OnSetOpenMic=function(){"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkEnabled&&(SteamClient.WebChat.SetPushToTalkEnabled(!1),d.f.VoiceStore.SetPushToTalkEnabled(!1))},e.prototype.OnSetPushToTalk=function(){"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkEnabled&&(SteamClient.WebChat.SetPushToTalkEnabled(!0),d.f.VoiceStore.SetPushToTalkEnabled(!0))},e.prototype.OnSetPushToMute=function(){"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToMuteEnabled&&(SteamClient.WebChat.SetPushToMuteEnabled(!0),d.f.VoiceStore.SetPushToMuteEnabled(!0))},e.prototype.AssignHotkey=function(){0==this.state.hotkeyCapturing&&this.SetHotKeyCaptureState(!0)},e.prototype.ClearHotKey=function(){"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkHotKey&&(SteamClient.WebChat.SetPushToTalkHotKey(0),d.f.VoiceStore.RefreshPushToTalkKeySettings())},e.prototype.onMouseDown=function(e){0!=this.state.hotkeyCapturing&&0!=e.button&&this.onClick(e)},e.prototype.onClick=function(e){0!=this.state.hotkeyCapturing&&(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkMouseButton&&(SteamClient.WebChat.SetPushToTalkMouseButton(e.button),d.f.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1),e.preventDefault(),e.stopPropagation())},e.prototype.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.onKeyDown=function(e){0!=this.state.hotkeyCapturing&&(null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToTalkHotKey&&(SteamClient.WebChat.SetPushToTalkHotKey(e.keyCode),d.f.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1),e.preventDefault(),e.stopPropagation())},e.prototype.OnPPTSoundChecked=function(e){d.f.VoiceStore.SetPushToTalkOrMuteSoundsEnabled(e)},e.prototype.CopyVoiceLogsToClipboard=function(){var e=d.f.ChatStore.VoiceChat.GetVoiceLogs(),t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.warn("Copy voice logs to clipboard failed.",e)}finally{document.body.removeChild(t)}},e.prototype.componentWillUnmount=function(){d.f.VoiceStore.IsLocalMicTestActive()&&d.f.VoiceStore.EndLocalMicTest()},e.prototype.OnStartLocalMicTest=function(){d.f.VoiceStore.InitiateLocalMicTest()},e.prototype.OnStopLocalMicTest=function(){d.f.VoiceStore.EndLocalMicTest()},e.prototype.render=function(){var t=this,e=d.f.VoiceStore.GetPushToTalkEnabled(),n=d.f.VoiceStore.GetPushToMuteEnabled(),o=!1,i=(d.f.VoiceStore.GetPushToTalkHotKeyVK(),d.f.VoiceStore.GetPushToTalkHotKeyDisplayString()),r=Object(f.c)("#VoicePushToTalkAssigned"),a=Object(f.c)("#VoicePushToMuteAssigned"),s=Object(f.c)("#VoiceMuteToggleAssigned"),c=d.f.VoiceStore.GetPushToTalkOrMuteSoundsEnabled(),l=d.f.SettingsStore.BClientHasFeatureOrOnWeb("NewVoiceHotKeyState"),p=d.f.VoiceStore.IsLocalMicTestActive(),u=d.f.FriendStore.self;"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.GetPushToTalkEnabled&&(o=!0),this.state.hotkeyCapturing&&(r=Object(f.c)("#VoicePushToTalkPressHotKey"));var m=this.props.voiceStore.GetUseNoiseGateLevel();return h.createElement(_.k,{className:"DialogBody VoiceSettings",onContextMenu:this.onContextMenu,onSubmit:this.onSubmit,onMouseDown:this.onMouseDown,onClick:this.onClick,onKeyDown:this.onKeyDown},h.createElement("div",{className:"_FixedHeight"},h.createElement("div",{className:"voiceSelfHeader"},h.createElement("div",{className:"DialogLabel"},Object(f.c)("#VoiceSetupHeader")),h.createElement("div",{className:"voiceMicTestContainer"},h.createElement("div",{className:"voiceSelfDirections",title:Object(f.c)("#VoiceWhenMicIsWorking")},h.createElement(b.c,{friend:u,key:u.accountid,showVoiceLevel:!0,context:void 0,noActions:!0,listStatusIndicator:h.createElement("div",{className:"connectionSpinner"})}),h.createElement(_.d,{className:"LocalMicTestButton "+(p?"Primary":"Off"),onClick:p?this.OnStopLocalMicTest:this.OnStartLocalMicTest},p?Object(f.c)("#VoiceStopLocalMicTest"):Object(f.c)("#VoiceStartLocalMicTest"))))),this.state.micOptionsReady&&h.createElement(_.i,{strClassName:"InputDevice",label:Object(f.c)("#VoiceDevice"),rgOptions:this.m_rgMicOptions,strDefaultLabel:Object(f.c)("#DefaultMic"),selectedOption:this.props.voiceStore.GetSelectedMic(),onChange:this.OnMicDropdownChanged}),!this.state.micOptionsReady&&h.createElement(_.i,{label:Object(f.c)("#VoiceDevice"),rgOptions:this.m_rgMicOptions,strDefaultLabel:Object(f.c)("#MicLoading...")}),this.state.outputOptionsReady&&h.createElement(_.i,{label:Object(f.c)("#VoiceOutputDevice"),rgOptions:this.m_rgOutputOptions,strDefaultLabel:Object(f.c)("#DefaultOutputDevice"),selectedOption:this.props.voiceStore.GetSelectedOutputDevice(),onChange:this.OnOutputDeviceDropdownChanged}),!this.state.outputOptionsReady&&h.createElement(_.i,{label:Object(f.c)("#VoiceOutputDevice"),rgOptions:this.m_rgOutputOptions,strDefaultLabel:Object(f.c)("#OutputDeviceLoading...")}),h.createElement(_.p,null,Object(f.c)("#VoiceVolume")),h.createElement(_.D,{className:"DialogLabelStrong"},h.createElement(_.A,{min:0,max:100,label:Object(f.c)("#VoiceInputGain"),explainer:Object(f.c)("#VoiceInputGainExplainer"),value:this.props.voiceStore.ConvertGainValueToSliderValue(this.props.voiceStore.GetVoiceInputGain(),g.a.k_MaxInputOutputGainValue),onChange:this.OnInputGainChanged}),h.createElement(_.A,{min:0,max:100,label:Object(f.c)("#VoiceOutputGain"),explainer:Object(f.c)("#VoiceOutputGainExplainer"),value:this.props.voiceStore.ConvertGainValueToSliderValue(this.props.voiceStore.GetVoiceOutputGain(),g.a.k_MaxInputOutputGainValue),onChange:this.OnOutputGainChanged})),"undefined"!=typeof SteamClient&&null!=SteamClient.WebChat&&null!=SteamClient.WebChat.SetPushToMuteEnabled?h.createElement("div",{className:"_DialogSection pushToTalkSection"+(o?"":" disabled")},h.createElement(_.p,null,Object(f.c)("#VoiceTransmissionType_Label"),!o&&h.createElement("span",{className:"disabledNotice"}," (",Object(f.c)("#VoiceTransmissionType_Disabled"),") ")),h.createElement(_.C,{className:"FriendsSettingsVoiceTransmissionType_ButtonRow"},h.createElement(_.d,{className:e||n?"Off":"Primary",onClick:this.OnSetOpenMic},Object(f.c)("#VoiceTransmissionType_OpenMic")),h.createElement(_.d,{className:e?"Primary":"Off",disabled:!o,onClick:this.OnSetPushToTalk},Object(f.c)("#VoiceTransmissionType_PushToTalk")),h.createElement(_.d,{className:n?"Primary":"Off",disabled:!o,onClick:this.OnSetPushToMute},Object(f.c)("#VoiceTransmissionType_PushToMute")),h.createElement("div",{className:"pushToKeyAssignContainer displayColumn"+(l||n||e?" showPTTOptions":"")},h.createElement("div",{className:"displayRow"},h.createElement(_.p,{className:"DialogLabelExplainer"},e?r:n?a:s),h.createElement(_.d,{disabled:!o,className:this.state.hotkeyCapturing&&"capturingKey",onClick:this.AssignHotkey},i),!e&&!n&&h.createElement(_.d,{className:"ClearHotKeyButton",onClick:this.ClearHotKey,title:Object(f.c)("#VoiceClearHotKeyTooltip")},h.createElement(v.pb,null))),h.createElement("div",{className:"PPTSoundOption DialogLabelExplainer"},h.createElement(_.e,{onChange:function(e){t.OnPPTSoundChecked(e)},label:Object(f.c)("#VoicePushToSomethingSoundOption"),checked:c}))))):h.createElement("div",{className:"_DialogSection pushToTalkSection"+(o?"":" disabled")},h.createElement(_.p,null,Object(f.c)("#VoiceTransmissionType"),!o&&h.createElement("span",{className:"disabledNotice"}," (",Object(f.c)("#g_DisabledOnWeb"),") ")),h.createElement(_.u,{disabled:!o,label:Object(f.c)("#VoiceTransmissionTypeExplainer"),checked:e,onChange:this.OnTogglePushToTalk}),e&&h.createElement("div",{className:"pushtoTalkKeyAssignContainer displayRow"},h.createElement(_.p,{className:"DialogLabelExplainer"},r),h.createElement(_.d,{disabled:!o,className:this.state.hotkeyCapturing&&"capturingKey",onClick:this.AssignHotkey},i))),h.createElement("div",{className:"_DialogSection"},h.createElement(_.p,null,Object(f.c)("#VoiceTransmisionThreshold")),h.createElement(_.p,{className:"DialogLabelStrong"},Object(f.c)("#VoiceTransmissionThresholdExplainer")),h.createElement(_.C,{className:"FriendsSettingsFlashSection_ButtonRow"},h.createElement(_.d,{className:m<=g.b.k_ENoiseGateLevel_Low?"Primary":"Off",onClick:this.SetNoiseGateOff},Object(f.c)("#VoiceTransmissionThresholdOff")),h.createElement(_.d,{className:m==g.b.k_ENoiseGateLevel_Medium?"Primary":"Off",onClick:this.SetNoiseGateMedium},Object(f.c)("#VoiceTransmissionThresholdMedium")),h.createElement(_.d,{className:m==g.b.k_ENoiseGateLevel_High?"Primary":"Off",onClick:this.SetNoiseGateHigh},Object(f.c)("#VoiceTransmissionThresholdHigh"))),h.createElement(_.p,{className:"DialogLabelExplainer"},Object(f.c)("#VoiceTransmissionThresholdRecommended"))),h.createElement(_.d,{className:"advancedSettingsButton",onClick:this.OnShowAdvancedSettings},this.state.showAdvanced?Object(f.c)("#VoiceHideAdvancedSettings"):Object(f.c)("#VoiceShowAdvancedSettings")),h.createElement("div",{className:"advancedSettings"+(this.state.showAdvanced?" showAdvanced":"")},h.createElement(_.p,null,Object(f.c)("#VoiceAdvancedSettings")),h.createElement(_.p,{className:"DialogLabelExplainer Left"},Object(f.c)("#VoiceAdvancedSettingsExplainer")),h.createElement(_.u,{label:Object(f.c)("#VoiceEchoCancellation"),checked:this.props.voiceStore.GetUseEchoCancellation(),onChange:this.OnToggleEchoCancellation}),h.createElement(_.u,{label:Object(f.c)("#VoiceNoiseCancellation"),checked:this.props.voiceStore.GetUseNoiseCancellation(),onChange:this.OnToggleNoiseCancellation}),h.createElement(_.u,{label:Object(f.c)("#VoiceAutoGainControl"),checked:this.props.voiceStore.GetUseAutoGainControl(),onChange:this.OnToggleAutoGainControl}),h.createElement(_.d,{className:"copyVoiceLogsButton",onClick:this.CopyVoiceLogsToClipboard},Object(f.c)("#CopyVoiceChatLogs"))),h.createElement("div",{className:"scrollToRef",ref:this.VoiceSettingsRefMarker})))},Object(o.c)([l.a],e.prototype,"gotMediaDevices",null),Object(o.c)([l.a],e.prototype,"gotMediaDevicesError",null),Object(o.c)([l.a],e.prototype,"onSubmit",null),Object(o.c)([l.a],e.prototype,"VoiceSettingsRefMarker",null),Object(o.c)([l.a],e.prototype,"OnShowAdvancedSettings",null),Object(o.c)([l.a],e.prototype,"OnMicDropdownChanged",null),Object(o.c)([l.a],e.prototype,"OnOutputDeviceDropdownChanged",null),Object(o.c)([l.a],e.prototype,"OnInputGainChanged",null),Object(o.c)([l.a],e.prototype,"OnOutputGainChanged",null),Object(o.c)([l.a],e.prototype,"OnToggleEchoCancellation",null),Object(o.c)([l.a],e.prototype,"OnToggleNoiseCancellation",null),Object(o.c)([l.a],e.prototype,"OnToggleAutoGainControl",null),Object(o.c)([l.a],e.prototype,"SetNoiseGateOff",null),Object(o.c)([l.a],e.prototype,"SetNoiseGateMedium",null),Object(o.c)([l.a],e.prototype,"SetNoiseGateHigh",null),Object(o.c)([l.a],e.prototype,"OnXButtonDown",null),Object(o.c)([l.a],e.prototype,"OnTogglePushToTalk",null),Object(o.c)([l.a],e.prototype,"OnSetOpenMic",null),Object(o.c)([l.a],e.prototype,"OnSetPushToTalk",null),Object(o.c)([l.a],e.prototype,"OnSetPushToMute",null),Object(o.c)([l.a],e.prototype,"AssignHotkey",null),Object(o.c)([l.a],e.prototype,"ClearHotKey",null),Object(o.c)([l.a],e.prototype,"onMouseDown",null),Object(o.c)([l.a],e.prototype,"onClick",null),Object(o.c)([l.a],e.prototype,"onContextMenu",null),Object(o.c)([l.a],e.prototype,"onKeyDown",null),Object(o.c)([l.a],e.prototype,"OnPPTSoundChecked",null),Object(o.c)([l.a],e.prototype,"CopyVoiceLogsToClipboard",null),Object(o.c)([l.a],e.prototype,"OnStartLocalMicTest",null),Object(o.c)([l.a],e.prototype,"OnStopLocalMicTest",null),e=Object(o.c)([s.a],e)}(_.w),u=n("/Byk");function m(e,t,n){Object(a.b)(h.createElement(S,{browserContext:e,startingPage:n}),t,Object(f.c)("#Settings"),{strTitle:Object(f.c)("#Settings"),popupWidth:842,popupHeight:720},Object(i.g)(t))}n.d(t,"a",function(){return m});var S=function(t){function e(e){return t.call(this,e,Object(f.c)("#Settings"))||this}return Object(o.d)(e,t),e.prototype.SaveFriendSettings=function(e,t){d.f.SettingsStore.BUpdateFriendsSettings(e),d.f.SettingsStore.SetCommunityPreferences(t)},e.prototype.render=function(){var e=d.f.UIStore.GetPerContextChatData(this.props.browserContext),t={friendsSettingsInitial:d.f.SettingsStore.FriendsSettings,communityPreferencesInitial:d.f.SettingsStore.CommunityPreferences,onCancel:this.props.closeModal,onSubmit:this.SaveFriendSettings,bShowClientOpts:r.a.IN_CLIENT,bShowPopupOpts:e.BUsePopups(),bShowGroupOpts:!0,bSubmitImmediate:!0,bDoNotDisturbSupported:r.a.IN_CLIENT&&d.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")},n={title:Object(f.c)("#FriendSettings_Title"),className:"FriendSettingsContainer",pages:[{title:Object(f.c)("#FriendSettings_Friends"),uniqueName:"FriendSettings_Friends",content:h.createElement(c.d,Object(o.a)({},t))},{title:Object(f.c)("#FriendSettings_Chat"),uniqueName:"FriendSettings_Chat",content:h.createElement(c.c,Object(o.a)({},t))},{title:Object(f.c)("#FriendSettings_SizeAndScaling"),uniqueName:"FriendSettings_SizeAndScaling",content:h.createElement(c.e,Object(o.a)({},t))},{title:Object(f.c)("#FriendSettings_Notifications"),uniqueName:"FriendSettings_Notifications",content:h.createElement(y,Object(o.a)({},t))},{title:Object(f.c)("#FriendSettings_Voice"),uniqueName:"FriendSettings_Voice",content:h.createElement(p,{onCancel:this.props.closeModal,voiceStore:d.f.ChatStore.VoiceChat})}],startingPage:-1};if(void 0!==this.props.startingPage)switch(this.props.startingPage){case"friends":n.startingPage=0;break;case"chat":n.startingPage=1;break;case"sizeAndScaling":n.startingPage=2;break;case"notifications":n.startingPage=3;break;case"voice":n.startingPage=4}return h.createElement(a.a,{onEscKeypress:this.props.closeModal},h.createElement(_.v,Object(o.a)({},n)))},e=Object(o.c)([s.a],e)}(h.Component),y=function(n){function e(e){var t=n.call(this,e)||this;return t.m_rgOptions=Object(u.a)(!1),t}return Object(o.d)(e,n),e.prototype.FriendsSettingsNotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return h.createElement("div",null,h.createElement("div",{className:"FriendsSettingsNotificationRow"},h.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),h.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},h.createElement(t,{strName:e.strNameShow})),h.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},h.createElement(t,{strName:e.strNameSound}))))},e.prototype.render=function(){var e=this.state.friendSettings,t=this.FriendsSettingsNotificationRow;return h.createElement(_.k,{className:"DialogBody",onSubmit:this.OnSubmit},h.createElement("div",{className:"SettingsGroup"},h.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},h.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(f.c)("#FriendSettings_Notification_Table_Label")),h.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(f.c)("#FriendSettings_Notification_Table_Show")),h.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(f.c)("#FriendSettings_Notification_Table_Play"))),h.createElement(t,{strLabel:Object(f.c)("#FriendSettings_Notification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),h.createElement(t,{strLabel:Object(f.c)("#FriendSettings_Notification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),h.createElement(t,{strLabel:Object(f.c)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}),h.createElement(t,{strLabel:Object(f.c)("#FriendSettings_Notification_ChatRoomNotification"),strNameShow:"bNotifications_ShowChatRoomNotification",strNameSound:"bSounds_PlayChatRoomNotification"}),this.props.bShowGroupOpts&&h.createElement(t,{strLabel:Object(f.c)("#FriendSettings_Notification_GroupEvent"),strNameShow:"bNotifications_EventsAndAnnouncements",strNameSound:"bSounds_EventsAndAnnouncements"})),this.props.bShowPopupOpts&&this.props.bShowClientOpts&&h.createElement("div",{className:"SettingsGroup"},h.createElement("div",{className:"FriendsSettingsFlashSection"},h.createElement(_.p,{className:"FriendsSettingsFlashSection_Header"},Object(f.c)("#FriendSettings_Flash_Header")),h.createElement(_.C,{className:"FriendsSettingsFlashSection_ButtonRow"},h.createElement(_.d,{className:0==e.nChatFlashMode?"Primary":"Off",value:0,onClick:this.HandleRadioChange},Object(f.c)("#FriendSettings_Flash_Always")),h.createElement(_.d,{className:1==e.nChatFlashMode?"Primary":"Off",value:1,onClick:this.HandleRadioChange},Object(f.c)("#FriendSettings_Flash_Minimized")),h.createElement(_.d,{className:2==e.nChatFlashMode?"Primary":"Off",value:2,onClick:this.HandleRadioChange},Object(f.c)("#FriendSettings_Flash_Never"))))),!this.props.bSubmitImmediate&&h.createElement(_.t,{onCancel:this.props.onCancel}))},Object(o.c)([l.a],e.prototype,"FriendsSettingsNotificationRow",null),e=Object(o.c)([s.a],e)}(c.b)},ywG3:function(e,t,n){"use strict";var p=n("mrSG"),s=n("OJz+"),a=n("H7XF"),h=n("1n9R"),c=n("4HGb"),i=n("s+DT"),l=n("Kqva"),o=n("R/D/"),r=n("2vnA"),u=n("qeMu"),m=n("YiOU"),d=n("BpBa"),f=n("E7zH"),_=n("XaMz"),g="DEBUG_LogCMTraffic";function b(){return window.localStorage&&"true"==window.localStorage.getItem(g)}function v(e){e?window.localStorage.setItem(g,"true"):window.localStorage.removeItem(g)}var S=function(){function e(e){void 0===e&&(e=!1),this.m_bRunOnce=!1,this.m_ClientConnectionCallbacks=new f.a,this.m_mapServerTypeCallbacks=new Map,this.m_bRunOnce=e}return e.prototype.RunCallbacks=function(e,t){void 0===e?(this.m_ClientConnectionCallbacks.Dispatch(t),this.m_bRunOnce&&this.m_ClientConnectionCallbacks.ClearAllCallbacks()):this.m_mapServerTypeCallbacks.has(e)&&(this.m_mapServerTypeCallbacks.get(e).Dispatch(),this.m_bRunOnce&&this.m_mapServerTypeCallbacks.delete(e))},e.prototype.RunAllCallbacks=function(e,t){var n=this;this.RunCallbacks(void 0,t),e.forEach(function(e){return n.RunCallbacks(e,t)})},e.prototype.AddCallback=function(e,t){var n=this.m_ClientConnectionCallbacks;return void 0!==t&&(this.m_mapServerTypeCallbacks.has(t)||this.m_mapServerTypeCallbacks.set(t,new f.a),n=this.m_mapServerTypeCallbacks.get(t)),n.Register(e)},e}();function y(e,t){return function(){try{e()}catch(e){console.error("Error in "+t+" callback:",e)}}}var C=function(){function e(){var a=this;this.m_steamid=new i.a,this.m_bLoggedOn=!1,this.m_bCompletedInitialConnect=!1,this.m_unAccountFlags=0,this.m_strIPCountry="",this.m_strPersonaName="",this.m_steamidLastLoggedOn=new i.a,this.m_bConnected=!1,this.m_bConnectionFailed=!1,this.m_setConnectedServers=new Set,this.m_callbacksOnConnectOneTime=new S(!0),this.m_callbacksOnConnect=new S,this.m_callbacksOnDisconnect=new S,this.m_bForceDisconnect=!1,this.m_bPerformedInitialClockAdjustment=!1,this.m_nWallClockDriftMS=0,this.m_nPerfClockServerMSOffset=(new Date).getTime()-performance.now(),this.ClientServersAvailableHandler=Object(s.a)(5501,d.f,function(e){for(var t=new Set(a.m_setConnectedServers),n=0,o=e.Body().server_types_available();n<o.length;n++){var i=o[n],r=i.server();void 0!==r&&(a.m_bLoggedOn&&(a.m_setConnectedServers.has(r)&&!i.changed()||(i.changed()&&a.m_setConnectedServers.has(r)&&a.m_callbacksOnDisconnect.RunCallbacks(r),a.m_callbacksOnConnect.RunCallbacks(r),a.m_callbacksOnConnectOneTime.RunCallbacks(r))),a.m_setConnectedServers.add(r),t.delete(r))}t.forEach(function(e){a.m_setConnectedServers.delete(e),a.m_bLoggedOn&&a.m_callbacksOnDisconnect.RunCallbacks(e)})}),this.m_ServiceTransport={SendMsg:function(e,t,n){return t.SetEMsg(151),t.Hdr().set_target_job_name(e),a.SendMsgAndAwaitResponse(t,n)},SendNotification:function(e,t){return t.SetEMsg(151),t.Hdr().set_target_job_name(e),a.Send(t)}},window&&window.addEventListener&&window.addEventListener("unload",function(e){a.ForceDisconnect()})}return Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamidLastLoggedOn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logged_on",{get:function(){return this.m_bLoggedOn},enumerable:!0,configurable:!0}),e.prototype.BDisconnected=function(){return!this.logged_on&&this.m_steamidLastLoggedOn.BIsValid()},e.prototype.BConnectedToServer=function(e){return void 0===e?this.m_bLoggedOn:this.m_setConnectedServers.has(e)},Object.defineProperty(e.prototype,"has_completed_initial_connect",{get:function(){return this.m_bCompletedInitialConnect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"account_flags",{get:function(){return this.m_unAccountFlags},enumerable:!0,configurable:!0}),e.prototype.GetServiceTransport=function(){return this.m_ServiceTransport},e.prototype.RunWhenLoggedOn=function(e,t){var n=y(e,"RunWhenLoggedOn");this.BConnectedToServer(t)?n():this.m_callbacksOnConnectOneTime.AddCallback(n,t)},e.prototype.WaitUntilLoggedOn=function(){var t=this;return new Promise(function(e){return t.RunWhenLoggedOn(e)})},e.prototype.AddOnLogonCallback=function(e,t){var n=y(e,"AddOnLogonCallback");return this.BConnectedToServer(t)&&n(),this.m_callbacksOnConnect.AddCallback(n,t)},e.prototype.AddOnDisconnectCallback=function(e,t){var n,o,i=(n=e,o="AddOnDisconnectCallback",function(e){try{n(e)}catch(e){console.error("Error in "+o+" callback:",e)}});this.m_callbacksOnDisconnect.AddCallback(i,t)},e.prototype.ForceDisconnect=function(){this.m_bForceDisconnect=!0,this.Disconnect()},e.prototype.Send=function(e){return!!this.BIsConnected()&&(this.DEBUG_LogCMInterfaceActivity(e,"send"),this.SendInternal(e))},e.prototype.BInternalShouldDispatchMessage=function(e){return!0},e.prototype.ResolveAwaitWithTransportError=function(e,t,n,o){var i=c.b.Init(t);i.Hdr().set_eresult(2),i.Hdr().set_transport_error(n),o&&i.Hdr().set_error_message(o),e(i)},e.prototype.DispatchMessage=function(t){var n=this;try{if(!this.BInternalShouldDispatchMessage(t))return;if(t.BIsValid()){s.e.DispatchMsgToHandlers(t,function(e){e.Hdr().set_jobid_target(t.Hdr().jobid_source()),n.Send(e)})||this.DEBUG_LogCMInterfaceActivity(t,"receive",!1)}else console.error("CMInterface RECV could not parse message of type "+Object(u.a)(t.GetEMsg())+" "+t.GetEMsg())}catch(e){console.error("CMInterface RECV exception thrown while processing message of type "+Object(u.a)(t.GetEMsg()),e),t.DEBUG_LogToConsole()}},e.prototype.BIsConnected=function(){return this.m_bConnected},e.prototype.OnConnect=function(){this.m_bConnected=!0,this.m_bConnectionFailed=!1,this.m_bForceDisconnect=!1},e.prototype.OnLoggedOn=function(){this.m_bCompletedInitialConnect=!0,this.InternalAdjustClock(),this.m_callbacksOnConnect.RunAllCallbacks(this.m_setConnectedServers),this.m_callbacksOnConnectOneTime.RunAllCallbacks(this.m_setConnectedServers)},e.prototype.OnDisconnect=function(){this.m_bConnected;this.m_bConnected=!1,this.m_bConnectionFailed=!0,this.m_onConnect=void 0,this.m_steamid=new i.a,this.m_bLoggedOn=!1,this.m_unAccountFlags=0,this.m_strIPCountry="",this.m_strPersonaName="",this.m_callbacksOnDisconnect.RunAllCallbacks(this.m_setConnectedServers,this.m_bForceDisconnect),this.m_setConnectedServers.clear()},e.prototype.DEBUG_LogCMInterfaceActivity=function(e,t,n){void 0===n&&(n=!0)},e.prototype.DEBUG_LogMessage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.InternalAdjustClock=function(){return Object(p.b)(this,void 0,void 0,function(){var t,r=this;return Object(p.e)(this,function(e){return(t=c.b.Init(m.f,9802)).Body().set_client_request_timestamp(Math.floor(performance.now()).toString()),[2,this.SendMsgAndAwaitResponse(t,m.g).then(function(e){var t=performance.now(),n=new Date,o=parseInt(e.Body().client_request_timestamp()),i=parseInt(e.Body().server_timestamp_ms())-(t-o>>1);return i&&!isNaN(i)&&t&&!isNaN(t)?(r.m_bPerformedInitialClockAdjustment=!0,r.m_nPerfClockServerMSOffset=i-t,r.m_nWallClockDriftMS=n.getTime()-i):Object(_.a)(!1,"Error computing server time, server echo: "+o+" server time "+i),!0})]})})},e.prototype.BPerformedInitialClockAdjustment=function(){return this.m_bPerformedInitialClockAdjustment},e.prototype.GetServerTimeMS=function(){return performance.now()+this.m_nPerfClockServerMSOffset},e.prototype.GetServerRTime32=function(){return Math.floor((performance.now()+this.m_nPerfClockServerMSOffset)/1e3)},e.prototype.RTime32ToDate=function(e){return new Date(1e3*e+this.m_nWallClockDriftMS)},Object(p.c)([r.x],e.prototype,"m_steamid",void 0),Object(p.c)([r.x],e.prototype,"m_bLoggedOn",void 0),Object(p.c)([r.x],e.prototype,"m_bCompletedInitialConnect",void 0),Object(p.c)([r.x],e.prototype,"m_unAccountFlags",void 0),Object(p.c)([r.x],e.prototype,"m_strIPCountry",void 0),Object(p.c)([r.x],e.prototype,"m_strPersonaName",void 0),Object(p.c)([r.x],e.prototype,"m_steamidLastLoggedOn",void 0),Object(p.c)([r.x],e.prototype,"m_bPerformedInitialClockAdjustment",void 0),Object(p.c)([r.g],e.prototype,"DispatchMessage",null),Object(p.c)([r.g],e.prototype,"OnDisconnect",null),e}(),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_setEMsgHandlers=new Set,e.m_setServiceMethodHandlers=new Set,e}return Object(p.d)(e,t),e.prototype.SendMsgAndAwaitResponse=function(n,i){var r=this;return new Promise(function(o,e){if(r.m_hSharedConnection){r.DEBUG_LogCMInterfaceActivity(n,"send");var t=a.fromByteArray(n.Serialize());SteamClient.SharedConnection.SendMsgAndAwaitResponse(r.m_hSharedConnection,t).then(function(e){var t=new l.b(a.toByteArray(e)),n=c.b.InitFromPacket(i,t);r.DEBUG_LogCMInterfaceActivity(n,"receive",!0),n.BIsValid()?o(n):r.ResolveAwaitWithTransportError(o,i,102,"Failed to parse response from server")}).catch(function(e){r.ResolveAwaitWithTransportError(o,i,2,e)})}})},e.prototype.SendInternal=function(e){var t=a.fromByteArray(e.Serialize());return SteamClient.SharedConnection.SendMsg(this.m_hSharedConnection,t),!0},e.prototype.OnMsgRecvd=function(e){var t=new l.b(a.toByteArray(e)),n=c.a.InitHeaderFromPacket(t);this.DispatchMessage(n)},e.prototype.OnLogonInfoChanged=function(e){this.DEBUG_LogMessage("Login info from client: ",e),this.m_bLoggedOn=e.bLoggedOn,h.b.EUNIVERSE=e.eUniverse,h.b.MEDIA_CDN_COMMUNITY_URL=e.strCommunityImagesURL,e.strSteamid?(this.m_steamid=new i.a(e.strSteamid),this.m_steamidLastLoggedOn=this.m_steamid,h.g.logged_in=!0,h.g.steamid=e.strSteamid,h.g.accountid=this.m_steamid.GetAccountID(),h.g.account_name=e.strAccountName):0!=this.m_steamid.GetAccountID()&&(this.m_steamid=new i.a),this.m_bLoggedOn?(this.m_bConnected||this.OnConnect(),this.OnLoggedOn()):this.OnDisconnect()},e.prototype.Connect=function(){var o=this;return this.m_hSharedConnection?Promise.resolve():this.m_onConnect=new Promise(function(t,n){SteamClient.SharedConnection.AllocateSharedConnection().then(function(e){e?(o.OnSharedConnectionEstablished(e),o.DEBUG_LogMessage("obtained handle ",o.m_hSharedConnection),o.OnConnect(),t()):n()}).catch(n)})},e.prototype.OnSharedConnectionEstablished=function(e){var a=this;this.m_hSharedConnection=e,this.m_setEMsgHandlers.clear(),this.m_setServiceMethodHandlers.clear(),this.m_hEMsgRegistrationObserver&&this.m_hEMsgRegistrationObserver(),this.m_hEMsgRegistrationObserver=Object(r.h)(function(){if(a.m_hSharedConnection){for(var e=0,t=s.e.emsg_list;e<t.length;e++){var n=t[e];a.m_setEMsgHandlers.has(n)||(a.m_setEMsgHandlers.add(n),SteamClient.SharedConnection.SubscribeToEMsg(a.m_hSharedConnection,n))}for(var o=0,i=s.e.servicemethod_list;o<i.length;o++){var r=i[o];a.m_setServiceMethodHandlers.has(r)||(a.m_setServiceMethodHandlers.add(r),SteamClient.SharedConnection.SubscribeToClientServiceMethod(a.m_hSharedConnection,r))}}});var t=!1;SteamClient.SharedConnection.RegisterOnLogonInfoChanged(this.m_hSharedConnection,function(e){a.OnLogonInfoChanged(e),t||(t=!0,SteamClient.SharedConnection.RegisterOnMessageReceived(a.m_hSharedConnection,a.OnMsgRecvd.bind(a)))})},e.prototype.OnConnect=function(){t.prototype.OnConnect.call(this)},e.prototype.Disconnect=function(){if(this.m_hSharedConnection){var e=c.b.Init(o.c,716);e.Body().set_persona_state(0),e.Body().set_persona_set_by_user(!1),this.Send(e),SteamClient.SharedConnection.Close(this.m_hSharedConnection),this.OnSharedConnectionClosed()}},e.prototype.OnSharedConnectionClosed=function(){t.prototype.OnDisconnect.call(this),this.m_hSharedConnection=void 0,this.m_setEMsgHandlers.clear(),this.m_hEMsgRegistrationObserver&&(this.m_hEMsgRegistrationObserver(),this.m_hEMsgRegistrationObserver=void 0)},e.prototype.SendHeartbeat=function(){},e.prototype.ClearHeartbeatInterval=function(){},e.prototype.ResetHeartbeatInterval=function(){},Object(p.c)([r.g],e.prototype,"OnLogonInfoChanged",null),e}(C),I=n("16wW"),E=n("/511"),w=n("0N1H"),M=n("vDqi"),D=n.n(M),T=function(){function e(){this.m_CMList={rgCMList:[],rtLastLoaded:0}}return e.prototype.Init=function(e){this.m_Storage=e,this.m_InitPromise=this.LoadFromCache()},e.prototype.LoadFromCache=function(){return Object(p.b)(this,void 0,void 0,function(){var n;return Object(p.e)(this,function(e){switch(e.label){case 0:return this.m_InitPromise?[2,this.m_InitPromise]:[4,this.m_Storage.GetObject(this.GetLocalStorageKey())];case 1:return n=e.sent(),(t=n)&&"object"==typeof t&&Array.isArray(t.rgCMList)&&"number"==typeof t.rtLastLoaded?this.m_CMList=n:(this.m_CMList={rgCMList:[],rtLastLoaded:0},this.WriteCMListToLocalStorage()),[2,this.m_CMList]}var t})})},e.prototype.GetBestCMsToConnectTo=function(){return Object(p.b)(this,void 0,void 0,function(){var t,n,o;return Object(p.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.LoadFromCache()];case 1:return!(t=e.sent()).rgCMList.length||604800<Date.now()/1e3-t.rtLastLoaded?[4,(n=this).GetCMListFromWebAPI()]:[3,3];case 2:n.m_CMList=e.sent(),this.WriteCMListToLocalStorage(),e.label=3;case 3:return[3,5];case 4:return o=e.sent(),console.error("There was a problem loading CM list. Attempting to use stale data. "+o),[3,5];case 5:return[2,this.PingCMs()]}})})},e.prototype.RecordCMDisconnected=function(e){e.nConnectFailures=(e.nConnectFailures||0)+1,e.msPing=Number.MAX_SAFE_INTEGER,e.nCMLoad=Number.MAX_SAFE_INTEGER,this.WriteCMListToLocalStorage()},e.prototype.BuildCMWebSocketURL=function(e){return"wss://"+this.FixDevHost(e)+"/cmsocket/"},e.prototype.FixDevHost=function(e){if(4==h.b.EUNIVERSE&&"dev"==h.b.WEB_UNIVERSE&&e.match(/^127\.0\.0\.1/)){var t=h.b.WEBAPI_BASE_URL.match(/https?:\/\/([^\/:]*)/);if(t&&t[1])return e.replace(/^127\.0\.0\.1/,t[1])}return e},e.prototype.GetLocalStorageKey=function(){return"CCMList_"+h.b.EUNIVERSE},e.prototype.WriteCMListToLocalStorage=function(){this.m_Storage.StoreObject(this.GetLocalStorageKey(),this.m_CMList)},e.prototype.GetCMListFromWebAPI=function(){return Object(p.b)(this,void 0,void 0,function(){var t,n;return Object(p.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(r=G,a=1e4,new Promise(function(t,n){var o=!1,i=window.setTimeout(function(){o=!0,n(new Error("Timed out"))},a);r().then(function(e){o||(clearTimeout(i),t(e))},function(e){o||(clearTimeout(i),n(e))})}))];case 1:return t=e.sent(),n=this.m_CMList.rgCMList.reduce(function(e,t){var n;return Object(p.a)(Object(p.a)({},e),((n={})[t.strHost]=t,n))},{}),[2,{rgCMList:t.map(function(e){return Object(p.a)(Object(p.a)({},n[e.strHost]||{}),e)}),rtLastLoaded:(new Date).getTime()/1e3}];case 2:throw e.sent(),new Error("Failed to load CM List from webapi");case 3:return[2]}var r,a})})},e.prototype.PingCMs=function(){for(var u=this,e=(new Date).getTime()/1e3-18e3,n=[],m={},t=0,o=this.m_CMList.rgCMList;t<o.length;t++){var i=o[t],r=R(i),a=!r||i.rtLastCheck<e;a&&n.length<20&&n.push(i),a&&!h.b.IN_MOBILE||r&&r<1e4&&(m[i.strHost]=i)}n.length;var d=!1;return new Promise(function(o,i){var r,a,s="immediate",c=function(t){if(Object(_.a)(!d,"fnPingingComplete called a second time"),!d){var e=Object.keys(t).map(function(e){return t[e]}).sort(function(e,t){return R(e)-R(t)});if(e.length,e.length&&e[0].strHost,d=!0,u.WriteCMListToLocalStorage(),r&&window.clearTimeout(r),a&&window.clearTimeout(a),e.length)return o(e);var n=u.GetCMWithFewestDisconnects();if(n)return o([n]);i("No CMs available")}};(0===n.length||Object.keys(m).some(function(e){return u.BCMOkToUse(m[e],s)})||h.b.IN_MOBILE&&Object.keys(m).length)&&(Object.keys(m).length&&h.b.IN_MOBILE,c(m)),d||(r=window.setTimeout(function(){s="timeout",!d&&Object.keys(m).some(function(e){return u.BCMOkToUse(m[e],s)})&&c(m)},400),a=window.setTimeout(function(){s="seriouslytimeout",c(m)},12e3));var l,e=0,p=0;l=function(){if(e<n.length){var o=n[e++];return u.PingCM(o).then(function(){var e,t,n;e=o,!d&&u.BCMOkToUse(e,s)?c(((t={})[e.strHost]=e,t)):m[e.strHost]=e,!d&&l()||0==--p&&(d?u.WriteCMListToLocalStorage():u.BCMOkToUse(e,"seriouslytimeout")?c(((n={})[e.strHost]=e,n)):(m[e.strHost]=e,c(m)))}),!0}return!1};for(var t=0;t<4;t++)l()&&p++})},e.prototype.GetCMWithFewestDisconnects=function(){if(this.m_CMList.rgCMList.length){for(var e=this.m_CMList.rgCMList[0],t=1;0<e.nConnectFailures&&t<this.m_CMList.rgCMList.length;){var n=this.m_CMList.rgCMList[t++];(!n.nConnectFailures||n.nConnectFailures<e.nConnectFailures)&&(e=n)}return e&&this.FixDevHost(e.strHost),e}},e.prototype.BCMOkToUse=function(e,t){if(!e)return!1;var n=e.msPing+e.nCMLoad;return n<80&&e.msPing<60||"immediate"!==t&&(n<140&&e.msPing<100||"timeout"!==t&&(n<350&&e.msPing<275))},e.prototype.PingCM=function(l){return Object(p.b)(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c;return Object(p.e)(this,function(e){switch(e.label){case 0:t="https://"+this.FixDevHost(l.strHost)+"/cmping/",n=performance.now(),o=D.a.CancelToken.source(),i=window.setTimeout(function(){l.strHost,o.cancel()},1e3),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,D.a.head(t,{cancelToken:o.token})];case 2:return r=e.sent(),l.strHost,window.clearTimeout(i),a=performance.now()-n,s=r.headers["x-steam-cmload"]?parseInt(r.headers["x-steam-cmload"]):void 0,l.strHost,l.msPing=a,l.nCMLoad=s,[3,4];case 3:return c=e.sent(),D.a.isCancel(c)?l.strHost:window.clearTimeout(i),l.msPing=1e4,l.nCMLoad=0,[3,4];case 4:return l.rtLastCheck=(new Date).getTime()/1e3,[2,l.msPing]}})})},e}();function G(){return Object(p.b)(this,void 0,void 0,function(){var t,n,o,i;return Object(p.e)(this,function(e){switch(e.label){case 0:return t=h.b.WEBAPI_BASE_URL+"ISteamDirectory/GetCMList/v1/?cellid=0",[4,D.a.get(t)];case 1:return n=e.sent(),o=n.data,(i=o&&o.response&&o.response.serverlist_websockets||[]).length,[2,i.map(function(e,t){return{strHost:e,nPriority:t}})]}})})}function R(e){return(e.msPing||0)+(e.nCMLoad||0)}var j=function(o){function e(e){var n=o.call(this)||this;return n.m_Session={m_bWaitingForLogonResponse:!1,m_nSessionID:0,m_eResultLogonSuccess:2,m_nSessionIDLast:0,m_nClientInstanceID:"0"},n.m_bLoadingCMList=!1,n.m_iCallSeq=1,n.m_mapWaitingCallbacks=new Map,n.m_CMList=new T,n.LogOnResponseHandler=Object(s.a)(751,m.e,function(e){var t=e.Body().eresult();n.m_Session.m_bWaitingForLogonResponse=!1,1==(n.m_Session.m_eResultLogonSuccess=t)?(n.m_steamid=new i.a(e.Body().client_supplied_steamid()),n.m_steamidLastLoggedOn=n.m_steamid,n.m_bLoggedOn=!0,n.m_Session.m_nSessionID=e.Hdr().client_sessionid(),n.m_Session.m_nSessionIDLast=n.m_Session.m_nSessionID,n.m_Session.m_nClientInstanceID=e.Body().client_instance_id(),n.OnLoggedOn()):(console.warn("Received error code from LogOnResponse, disconnecting. EResult=",e.Body().eresult()),48==t&&n.m_CMList.RecordCMDisconnected(n.m_SocketCMHost),n.Disconnect())}),n.ClientAccountInfoHandler=Object(s.a)(768,m.a,function(e){n.m_unAccountFlags=e.Body().account_flags()||0,n.m_strIPCountry=e.Body().ip_country()||"",n.m_strPersonaName=e.Body().persona_name()||""}),n.m_CMList.Init(e),n}return Object(p.d)(e,o),e.prototype.BIsConnected=function(){return this.m_Socket&&this.m_Socket.readyState==WebSocket.OPEN},e.prototype.Connect=function(){var s=this;return this.m_onConnect||(console.log("Loading CM List"),this.m_bConnected=!1,this.m_bLoggedOn=!1,this.m_Session.m_bWaitingForLogonResponse=!0,this.m_bLoadingCMList=!0,this.m_onConnect=this.m_CMList.GetBestCMsToConnectTo().then(function(e){return s.m_bLoadingCMList=!1,new Promise(function(o,i){var r=0,a=!1;e.slice(0,3).forEach(function(t,e,n){return s.AttemptHostConnect(t).then(function(e){a?e.close(4e3):(a=!0,s.m_Socket=e,s.m_SocketCMHost=t,s.m_bConnected=!0,s.OnConnect(),o())},function(){console.log("Failed to connect to CM "+(e+1)+" of "+n.length+": "+t.strHost),++r===n.length&&(console.log("Failed to connect to all "+n.length+" best CMs"),i())})})})}).catch(function(e){throw s.m_bLoadingCMList=!1,s.OnDisconnect(),e})),this.m_onConnect},e.prototype.AttemptHostConnect=function(i){var r=this;console.log("Attempting to connect to host "+i.strHost);var a=new WebSocket(this.m_CMList.BuildCMWebSocketURL(i.strHost));return a.binaryType="arraybuffer",a.onmessage=function(e){var t=new l.b(e.data),n=c.a.InitHeaderFromPacket(t);1==n.GetEMsg()?r.DecodeAndDispatchMultiMsg(c.b.InitFromMsg(E.e,n)):r.DispatchMessage(n)},new Promise(function(e,t){var n=!1,o=window.setTimeout(function(){console.warn("Socket connection timed out after 3000ms: "+i.strHost),n=!0,a.close(4e3),r.m_CMList.RecordCMDisconnected(i),t()},3e3);a.onopen=function(){console.log("Connected socket to host "+i.strHost),Object(_.a)(!n,"Socket connection was opened after timing out."),n||window.clearTimeout(o),e(a)},a.onerror=function(e){n||(window.clearTimeout(o),Object(_.a)(!1,"Socket connect failed",e),r.m_CMList.RecordCMDisconnected(i),t())}})},Object.defineProperty(e.prototype,"session",{get:function(){return this.m_Session},enumerable:!0,configurable:!0}),e.prototype.ClearHeartbeatInterval=function(){this.m_iIntervalHeartbeat&&(window.clearInterval(this.m_iIntervalHeartbeat),this.m_iIntervalHeartbeat=void 0)},e.prototype.ResetHeartbeatInterval=function(){var e=this;this.ClearHeartbeatInterval(),this.m_iIntervalHeartbeat=window.setInterval(function(){return e.SendHeartbeat()},27e3)},e.prototype.SendHeartbeat=function(){var e=c.b.Init(m.b,703);this.Send(e)},e.prototype.OnConnect=function(){var t=this;o.prototype.OnConnect.call(this),this.m_Socket&&(this.m_Socket.onerror=function(e){},this.ResetHeartbeatInterval(),this.m_Socket.onclose=function(e){t.OnDisconnect()})},e.prototype.Disconnect=function(){this.m_Socket&&this.m_Socket.close()},e.prototype.OnDisconnect=function(){this.m_Socket=void 0,this.m_SocketCMHost=void 0,this.m_onConnect=void 0,this.ClearHeartbeatInterval(),o.prototype.OnDisconnect.call(this)},e.prototype.SendMsgAndAwaitResponse=function(o,i){var r=this;return new Promise(function(e,t){var n=r.m_iCallSeq++;o.Hdr().set_jobid_source(""+n),r.Send(o)?r.m_mapWaitingCallbacks.set(n,{iSeq:n,msgClass:i,fnCallback:e}):r.ResolveAwaitWithTransportError(e,i,2,"Web socket not connected")})},e.prototype.SendInternal=function(e){return!!this.m_Socket&&(this.m_steamid.BIsValid()&&e.Hdr().set_steamid(this.m_steamid.ConvertTo64BitString()),this.m_Session.m_nSessionID&&e.Hdr().set_client_sessionid(this.m_Session.m_nSessionID),this.m_Socket.send(e.Serialize()),703!=e.GetEMsg()&&this.ResetHeartbeatInterval(),!0)},e.prototype.BInternalShouldDispatchMessage=function(e){if(e.BIsValid()&&e.Hdr().jobid_target()&&e.Hdr().jobid_target()!==w.e){var t=parseInt(e.Hdr().jobid_target());if(this.m_mapWaitingCallbacks.has(t)){var n=this.m_mapWaitingCallbacks.get(t);if(n){var o=c.b.InitFromMsg(n.msgClass,e);this.DEBUG_LogCMInterfaceActivity(o,"receive",!0),o.BIsValid()?n.fnCallback(o):this.ResolveAwaitWithTransportError(n.fnCallback,n.msgClass,102,"Failed to parse response from server"),this.m_mapWaitingCallbacks.delete(t)}return!1}this.DEBUG_LogCMInterfaceActivity(e,"receive",!1)}return!0},e.prototype.DecodeAndDispatchMultiMsg=function(e){var t=e.Body().message_body();if(t){e.Body().size_unzipped()&&(t=I.inflate(t));for(var n=new l.b(t);0<n.GetCountBytesRemaining();){var o=n.GetUint32(),i=c.a.InitHeaderFromPacket(new l.b(n.GetPacket(),n.TellGet(),o));this.DispatchMessage(i),n.SeekGetCurrent(o)}}},Object(p.c)([r.g],e.prototype,"DecodeAndDispatchMultiMsg",null),e}(C);n.d(t,"a",function(){return O}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return j})},z9WT:function(e,t,n){"use strict";n.d(t,"g",function(){return l}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return m}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return _});var a=n("mrSG"),s=n("q1tI"),i=n("EGkk"),o=n("oh5H"),r=n("/IDK"),c=n("8o0Y");function l(e,t){var n;n="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,0==t.indexOf("steam://")?n.location.href=t:n.open(t,null,"menubar,location,resizable,scrollbars,status,noopener")}function p(e){var t="undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection,n=e.bDisableContextMenu,o=e.onContextMenu,i=e.href,r=Object(a.f)(e,["bDisableContextMenu","onContextMenu","href"]);return t&&!i.startsWith("steam://")&&(i="steam://openurl/"+i),n||o||(o=m),s.createElement("a",Object(a.a)({},r,{href:i,target:"_blank",rel:"noopener noreferrer",onContextMenu:o}),e.children)}function u(e){var t=e.strURL,n=e.unPID;return s.createElement(s.Fragment,null,s.createElement(i.d,{onSelected:function(){r.j(t)}},Object(o.c)("#ContextMenu_CopyLinkURL")),s.createElement(i.d,{onSelected:function(e){_(e,t,{unPID:n})}},Object(o.c)("#ContextMenu_OpenLinkInNewWindow")))}function m(e,t){var n=e.currentTarget;return Object(c.a)(s.createElement(i.c,null,s.createElement(u,{strURL:n.href,unPID:t})),e)}function d(e){var t=e.strFullImageURL,n=e.unPID;return s.createElement(s.Fragment,null,s.createElement(i.d,{onSelected:function(){r.j(t)}},Object(o.c)("#ContextMenu_CopyImageURL")),s.createElement(i.d,{onSelected:function(e){_(e,t,{unPID:n})}},Object(o.c)("#ContextMenu_OpenImageInNewWindow")))}function h(e,t,n){return f(e,e.currentTarget.src,t,n)}function f(e,t,n,o){return Object(c.a)(s.createElement(i.c,null,n&&s.createElement(u,{strURL:n}),s.createElement(d,{strFullImageURL:t,unPID:o})),e)}function _(e,t,n){void 0===n&&(n={});var o,i=n.bForceExternal,r=n.unPID;o="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,"undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat?SteamClient.WebChat.OpenURLInClient(t,r||0,!!i):0==t.indexOf("steam://")&&0!=t.indexOf("steam://remoteplay/connect")?o.location.href=t:o.open(t,null,"menubar,location,resizable,scrollbars,status,noopener")}}});