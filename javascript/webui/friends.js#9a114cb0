/*! This file includes third-party software, governed by the licenses described here: https://steamcommunity.com/public/javascript/webui/friends.licenses.txt */










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
var CLSTAMP='5992313';
!function(e){function t(t){for(var o,r,s=t[0],c=t[1],l=t[2],p=0,m=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={7:0},i={7:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{3:1}[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="../../css/webui/"+({3:"broadcast"}[e]||e)+".css",i=s.p+o,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var l=(u=a[c]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===i))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){var u;if((l=(u=p[c]).getAttribute("data-href"))===o||l===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.request=o,delete r[e],m.parentNode.removeChild(m),n(a)},m.href=i,document.getElementsByTagName("head")[0].appendChild(m)})).then((function(){r[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+({3:"broadcast"}[e]||e)+".js"}(e);var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}i[e]=void 0}};var p=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var u=l;a.push(["gfbn",1,0,2]),n()}({"+M9t":function(e,t,n){"use strict";n.d(t,"d",(function(){return N})),n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return B})),n.d(t,"c",(function(){return P}));var o=n("mrSG"),r=n("tkkQ"),i=n("4HGb"),a=n("lqmi"),s=n("Kqva"),c=n("XCHq"),l=n("s+DT"),p=n("yovy"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.UpdateFromMessage=function(e,t){if(0!=(1&e)&&(this.m_bStatusInitialized=!0,this.m_ePersonaState=t.persona_state()||0,0!=this.m_ePersonaState?(this.m_unGamePlayedAppID=t.game_played_app_id()||0,this.m_gameid=t.gameid()||"0",this.m_strGameExtraInfo=t.game_name()||"",this.m_unGameServerIP=t.game_server_ip()||0,this.m_unGameServerPort=t.game_server_port()||0,this.m_game_lobby_id=t.game_lobby_id()||""):this.Reset()),0!=(2&e)){this.m_bNameInitialized=!0;var n=t.player_name()||"";this.m_bPlayerNamePending=this.m_bPlayerNamePending&&this.m_strPlayerName===n,this.m_strPlayerName=n}if(0!=(64&e)&&(this.m_rtLastSeenOnline=t.last_seen_online()||t.last_logoff()||0),0!=(16&e)){var o=t.avatar_hash(),r=!0;if(o){for(var i=0;i<o.length&&r;i++)r=!o[i];this.m_strAvatarHash=r?p.b:Object(s.a)(o)}}if(void 0!==t.persona_state_flags()&&(this.m_unPersonaStateFlags=t.persona_state_flags()),0!=(4096&e)){this.m_mapRichPresence.clear();for(var a=0,u=t.rich_presence();a<u.length;a++){var m=u[a];this.m_mapRichPresence.set(m.key().toLowerCase(),m.value())}}if(0!=(8192&e)&&(this.m_broadcastId=t.broadcast_id()),0!=(16384&e)){var d=l.a.InitFromAccountID(t.watching_broadcast_accountid()).ConvertTo64BitString();d&&c.b.stream[d]?(this.m_broadcastAccountId=t.watching_broadcast_accountid(),this.m_broadcastAppId=t.watching_broadcast_appid(),this.m_broadcastViewerCount=t.watching_broadcast_viewers(),this.m_strBroadcastTitle=t.watching_broadcast_title()):(this.m_broadcastAccountId=0,this.m_broadcastAppId=0,this.m_broadcastViewerCount=0,this.m_strBroadcastTitle="")}this.m_bNameInitialized&&this.m_bStatusInitialized&&(this.m_bInitialized=!0)},t}(a.b),m=n("OJz+"),d=n("RBVV"),h=n("R/D/"),f=n("BpBa"),_=n("p7Z6"),g=n("nRcY"),b=n("HxRt"),v=n("3Liw"),y=n("KrQr"),S=n("lgHT"),C=n("LAqV"),O=n("2vnA"),I=n("XaMz"),E=function(){function e(e,t){this.m_bInitialized=!1,this.m_bGotInitialState=!1,this.m_strClanName="",this.m_strClanTag="",this.m_strAvatarHash=a.c,this.m_eClanAccountFlags=0,this.m_cMemberCount=0,this.m_cUsersOnline=0,this.m_cUsersInGame=0,this.m_cChatRoomMembers=0,this.m_bPersonaStateLoadRequested=!1,this.m_steamid=e,this.m_eClanRelationship=t}return e.prototype.BNeedsPersonaData=function(){return!this.m_bInitialized&&!this.m_bPersonaStateLoadRequested},e.prototype.SetPersonaStateLoadRequested=function(){this.m_bPersonaStateLoadRequested=!0},Object.defineProperty(e.prototype,"name",{get:function(){return this.m_bInitialized?this.m_strClanName:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clanid",{get:function(){return this.m_steamid.GetAccountID()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_count",{get:function(){return this.m_cMemberCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"users_online",{get:function(){return this.m_cUsersOnline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"users_ingame",{get:function(){return this.m_cUsersInGame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count_chat_room_members",{get:function(){return this.m_cChatRoomMembers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chat_room_private",{get:function(){return this.m_bChatRoomPrivate},enumerable:!1,configurable:!0}),e.prototype.BIsMember=function(){return 3==this.m_eClanRelationship},e.prototype.BIsInvite=function(){return 2==this.m_eClanRelationship},e.prototype.SetRelationship=function(e){this.m_eClanRelationship=e},e.prototype.BIsOGG=function(){return!!this.m_unOGGAppID||this.m_bGotInitialState&&0!=(16&this.m_eClanAccountFlags)},e.prototype.GetOGGAppID=function(){return this.m_unOGGAppID},e.prototype.BMatchesSearchString=function(e){return-1!==this.m_strClanName.toLocaleLowerCase().indexOf(e)},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return Object(a.a)(this.m_strAvatarHash)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.BIsOGG()?this.avatar_url:Object(a.a)(this.m_strAvatarHash,"medium")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.BIsOGG()?this.avatar_url:Object(a.a)(this.m_strAvatarHash,"full")},enumerable:!1,configurable:!0}),e.prototype.OpenChatDialog=function(e,t){return void 0===t&&(t=!0),this.GetChatRoomGroupID().then((function(n){return C.f.ChatStore.JoinAndShowChatRoomGroup(e,n,t),n}))},e.prototype.ReadPersonaStateUpdate=function(e,t){if(this.m_bInitialized=!0,0!=(2&e)&&(this.m_strClanName=t.player_name()),0!=(1024&e)&&(this.m_strClanTag=t.clan_tag(),t.clan_data().chat_group_id()&&(this.m_ulChatRoomGroupID=t.clan_data().chat_group_id()),t.clan_data().ogg_app_id()&&(this.m_unOGGAppID=t.clan_data().ogg_app_id())),0!=(16&e)){var n=t.avatar_hash(),o=!0;if(n){for(var r=0;r<n.length&&o;r++)o=!n[r];this.m_strAvatarHash=o?a.c:Object(s.a)(n)}}},e.prototype.ReadStateUpdate=function(e){if(this.m_bGotInitialState=!0,this.m_eClanAccountFlags=e.clan_account_flags(),this.m_bChatRoomPrivate=e.chat_room_private(),void 0!==e.user_counts()&&e.user_counts().members()){var t=e.user_counts();this.m_cMemberCount=t.members(),this.m_cUsersOnline=t.online(),this.m_cUsersInGame=t.in_game(),this.m_cChatRoomMembers=t.chat_room_members()}},e.prototype.GetChatGroupIDIfLoaded=function(){return this.m_ulChatRoomGroupID},e.prototype.GetChatRoomGroupID=function(){var e=this;if(this.m_ulChatRoomGroupID)return Promise.resolve(this.m_ulChatRoomGroupID);var t=i.b.Init(d.U);return t.Body().set_steamid(this.steamid.ConvertTo64BitString()),t.Body().set_autocreate(!0),d.bb.GetClanChatRoomInfo(C.f.CMInterface.GetServiceTransport(),t).then((function(t){return 1==t.GetEResult()&&t.Body().chat_group_summary().chat_group_id()?(e.m_ulChatRoomGroupID=t.Body().chat_group_summary().chat_group_id(),e.m_ulChatRoomGroupID):null}))},e.prototype.SetChatGroupID=function(e){this.m_ulChatRoomGroupID=e},Object(o.c)([O.A],e.prototype,"m_bInitialized",void 0),Object(o.c)([O.A],e.prototype,"m_bGotInitialState",void 0),Object(o.c)([O.A],e.prototype,"m_eClanRelationship",void 0),Object(o.c)([O.A],e.prototype,"m_strAvatarHash",void 0),Object(o.c)([O.A],e.prototype,"m_ulChatRoomGroupID",void 0),Object(o.c)([O.A],e.prototype,"m_cMemberCount",void 0),Object(o.c)([O.A],e.prototype,"m_cUsersOnline",void 0),Object(o.c)([O.A],e.prototype,"m_cUsersInGame",void 0),Object(o.c)([O.A],e.prototype,"m_cChatRoomMembers",void 0),Object(o.c)([O.A],e.prototype,"m_bChatRoomPrivate",void 0),Object(o.c)([O.l],e.prototype,"avatar_url",null),Object(o.c)([O.l],e.prototype,"avatar_url_medium",null),Object(o.c)([O.l],e.prototype,"avatar_url_full",null),e}(),w=function(){function e(e){var t=this;this.m_mapClans=O.A.map(),this.m_eClanStateHandler=Object(m.a)(822,f.c,(function(e){var n=new l.a(e.Body().steamid_clan());t.GetOrCreateClan(n).ReadStateUpdate(e.Body())})),this.m_FriendStore=e}return e.prototype.Init=function(e){this.m_CMInterface=e,this.m_CMInterface.AddOnLogonCallback(this.OnLogOn.bind(this))},e.prototype.OnLogOn=function(){},Object.defineProperty(e.prototype,"clan_invites",{get:function(){var e=[];return this.m_mapClans.forEach((function(t){t.m_bInitialized&&t.BIsInvite()&&e.push(t)})),e.sort((function(e,t){return e.name.localeCompare(t.name)})),e},enumerable:!1,configurable:!0}),e.prototype.GetClan=function(e){var t;return e instanceof l.a?(Object(I.a)(e.BIsClanAccount(),"expected clan steamid in GetClan()"),t=e.GetAccountID()):t=e,this.m_mapClans.get(t)},e.prototype.JoinClanChatRoom=function(e,t){var n=this.GetOrCreateClan(t);n.OpenChatDialog(e,!0),n.BNeedsPersonaData()&&this.LoadMissingClanPersonas()},e.prototype.ClearClanMembershipData=function(){this.m_mapClans.forEach((function(e){e.SetRelationship(0)}))},e.prototype.SetClanChatGroupID=function(e,t){var n=this.GetOrCreateClan(e);n.SetChatGroupID(t),n.BNeedsPersonaData()&&this.ScheduleLoadMissingClanPersonas()},e.prototype.GetOrCreateClan=function(e,t){var n;n=e instanceof l.a?e:l.a.InitFromClanID(e);var o=this.m_mapClans.get(n.GetAccountID());return o?void 0!==t&&o.SetRelationship(t):(o=new E(n,t||0),this.m_mapClans.set(n.GetAccountID(),o)),o},e.prototype.OnClanRelationshipChanged=function(e,t){this.GetOrCreateClan(e,t)},e.prototype.RespondToClanInvite=function(e,t){var n=i.b.Init(S.a);return n.Body().set_steamid(e.ConvertTo64BitString()),n.Body().set_accept(t),S.b.RespondToClanInvite(this.m_CMInterface.GetServiceTransport(),n).then((function(e){return 1==e.GetEResult()}))},e.prototype.EnsureInitialStateForClanInvites=function(){var e=i.b.Init(y.e,5554);this.clan_invites.forEach((function(t){t.m_bGotInitialState||e.Body().add_steamid_clans(t.steamid.ConvertTo64BitString())})),e.Body().steamid_clans().length<=0||this.m_CMInterface.Send(e)},e.prototype.ScheduleLoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData||(this.m_iIntervalLoadClanData=SetBackgroundTimeout(this.LoadMissingClanPersonas.bind(this),100))},e.prototype.LoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData&&(ClearBackgroundTimeout(this.m_iIntervalLoadClanData),this.m_iIntervalLoadClanData=void 0);var e=i.b.Init(h.q,815);e.Body().set_persona_state_requested(1042),this.m_mapClans.forEach((function(t){t.BNeedsPersonaData()&&(e.Body().add_friends(t.steamid.ConvertTo64BitString()),t.SetPersonaStateLoadRequested())})),e.Body().friends().length&&this.m_CMInterface.Send(e)},e.prototype.OnClanPersonaStateUpdate=function(e,t){var n=new l.a(t.friendid());this.GetOrCreateClan(n).ReadPersonaStateUpdate(e,t)},Object(o.c)([O.l],e.prototype,"clan_invites",null),e}(),A=n("5FJe"),D=n("TA9H"),T=n("0N1H"),M=n("E7zH"),j=n("WpBz"),L=n("oh5H"),G=n("1VtQ"),N=function(){return function(){this.Notifications_ShowInGame=0,this.Notifications_ShowOnline=0,this.Notifications_ShowMessage=0,this.Notifications_SendMobile=0,this.Sounds_PlayInGame=0,this.Sounds_PlayOnline=0,this.Sounds_PlayMessage=0}}(),R=function(){function e(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.m_eFriendRelationship=0,this.m_bPersonaStateLoadRequested=!1,this.m_bPersonaStateReady=!1,this.m_bPersonaNameHistoryLoaded=void 0,this.m_rgPersonaNameHistory=[],this.m_bBetaStatusLoading=!1,this.m_bBetaStatusStale=!0,this.m_bIsOnlineInBeta=void 0,this.m_bIsInBeta=void 0,this.m_bLoadedEquippedProfileItems=!1,this.m_equippedProfileItems={},this.m_unAccountID=e,this.m_persona=new u(l.a.InitFromAccountID(e)),0==e&&(Object(I.a)(!1,"unset accountid"),this.m_bPersonaStateReady=!0,this.m_persona.m_bInitialized=!0),t&&(this.m_bPersonaStateReady=!0,this.m_persona.UpdateFromMessage(n,t))}return e.prototype.LoadIfNecessary=function(){this.m_persona.m_bInitialized||this.m_bPersonaStateLoadRequested||(this.m_bPersonaStateLoadRequested=!0,C.f.FriendStore.QueueFriendPersonaStateLoad(this))},Object.defineProperty(e.prototype,"is_ready",{get:function(){return!(!this.m_persona.m_bInitialized&&!this.m_bPersonaStateReady)&&(Object.defineProperty(this,"is_ready",{value:!0}),!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persona",{get:function(){return this.LoadIfNecessary(),Object.defineProperty(this,"persona",{value:this.m_persona}),this.m_persona},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mutable_persona",{get:function(){return this.m_persona},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accountid",{get:function(){return this.m_unAccountID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_persona.m_steamid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steamid64",{get:function(){return this.m_persona.m_steamid.ConvertTo64BitString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"efriendrelationship",{get:function(){return this.m_eFriendRelationship},set:function(e){this.m_eFriendRelationship=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_friend",{get:function(){return Object(T.b)(this.m_eFriendRelationship)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_blocked",{get:function(){return Object(T.a)(this.m_eFriendRelationship)},enumerable:!1,configurable:!0}),e.prototype.GetCommunityProfileURL=function(){return r.a.COMMUNITY_BASE_URL+"profiles/"+this.steamid64+"/"},Object.defineProperty(e.prototype,"has_nickname",{get:function(){return!!this.m_strNickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.m_strNickname},set:function(t){this.m_strNickname=t,this.m_strPlayerNicknameNormalized=t?e.NormalizeNameForSearch(t):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notification_settings",{get:function(){return this.m_NotificationSettings||(this.m_NotificationSettings=new N),this.m_NotificationSettings},set:function(e){this.m_NotificationSettings=e},enumerable:!1,configurable:!0}),e.prototype.BShowInGameNotification=function(){return 1==this.notification_settings.Notifications_ShowInGame||C.f.SettingsStore.FriendsSettings.bNotifications_ShowIngame&&2!=this.notification_settings.Notifications_ShowInGame},e.prototype.BShowMessageNotification=function(){return r.a.IN_MOBILE?1===this.notification_settings.Notifications_SendMobile||C.f.BShowDirectChatNotification()&&2!==this.notification_settings.Notifications_SendMobile:1===this.notification_settings.Notifications_ShowMessage||C.f.BShowDirectChatNotification()&&2!==this.notification_settings.Notifications_ShowMessage},e.prototype.BShowOnlineNotification=function(){return 1==this.notification_settings.Notifications_ShowOnline||C.f.SettingsStore.FriendsSettings.bNotifications_ShowOnline&&2!=this.notification_settings.Notifications_ShowOnline},e.prototype.BPlayInGameSound=function(){return 1==this.notification_settings.Sounds_PlayInGame||C.f.SettingsStore.FriendsSettings.bSounds_PlayIngame&&2!=this.notification_settings.Sounds_PlayInGame},e.prototype.BPlayMessageSound=function(){return 1==this.notification_settings.Sounds_PlayMessage||C.f.SettingsStore.FriendsSettings.bSounds_PlayMessage&&2!=this.notification_settings.Sounds_PlayMessage},e.prototype.BPlayOnlineSound=function(){return 1==this.notification_settings.Sounds_PlayOnline||C.f.SettingsStore.FriendsSettings.bSounds_PlayOnline&&2!=this.notification_settings.Sounds_PlayOnline},Object.defineProperty(e.prototype,"display_name",{get:function(){if(this.has_nickname){var e=this.primary_display_name;return this.showing_secondary_display_name&&(e+=" ("+this.secondary_display_name+")"),e}return this.persona.m_strPlayerName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"primary_display_name",{get:function(){if(this.has_nickname&&!C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames)return this.nickname;return this.persona.m_strPlayerName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_secondary_display_name",{get:function(){return this.has_nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showing_secondary_display_name",{get:function(){return!!C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_secondary_display_name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondary_display_name",{get:function(){return C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_nickname?this.nickname:this.persona.m_strPlayerName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_display_name_nickname",{get:function(){return this.has_nickname&&!C.f.SettingsStore.CommunityPreferences.bParenthesizeNicknames},enumerable:!1,configurable:!0}),e.NormalizeNameForSearch=function(e){return e.toLocaleLowerCase()},Object.defineProperty(e.prototype,"player_name_normalized",{get:function(){var t=this;if(void 0===this.m_strPlayerNameNormalized){if(!this.is_ready)return"";var n=function(){t.m_strPlayerNameNormalized=e.NormalizeNameForSearch(t.m_persona.m_strPlayerName)};Object(O.j)(n),void 0===this.m_strPlayerNameNormalized&&n()}return this.m_strPlayerNameNormalized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current_game_name",{get:function(){return this.m_persona.GetCurrentGameName()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current_game_icon_url",{get:function(){return this.m_persona.GetCurrentGameIconURL()},enumerable:!1,configurable:!0}),e.prototype.is_appinfo_ready=function(){return this.m_persona.BIsAppInfoReady()},Object.defineProperty(e.prototype,"current_game_rich_presence",{get:function(){return this.m_persona.GetCurrentGameRichPresence()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game_name_normalized",{get:function(){var t=this;if(void 0===this.m_strGameNameNormalized){if(!this.is_ready)return"";var n=function(){t.m_strGameNameNormalized=e.NormalizeNameForSearch(t.current_game_name)};Object(O.j)(n),void 0===this.m_strGameNameNormalized&&n()}return this.m_strGameNameNormalized},enumerable:!1,configurable:!0}),e.prototype.MatchSearchString=function(e){var t=this.player_name_normalized.indexOf(e);return-1!==t?{match:1,iOffset:t,bFullMatch:0===t&&this.player_name_normalized.length===e.length}:this.has_nickname&&-1!==(t=this.m_strPlayerNicknameNormalized.indexOf(e))?{match:2,iOffset:t,bFullMatch:0===t&&this.m_strPlayerNicknameNormalized.length===e.length}:{match:0}},e.prototype.BMatchesSearchString=function(e,t){if(-1!==this.player_name_normalized.indexOf(e))return!0;if(this.has_nickname){if(-1!==this.m_strPlayerNicknameNormalized.indexOf(e))return!0}else if(t&&this.m_persona.is_ingame&&-1!==this.game_name_normalized.indexOf(e))return!0;return!1},Object.defineProperty(e.prototype,"persona_name_history",{get:function(){var e=this;if(void 0===this.m_bPersonaNameHistoryLoaded){var t=i.b.Init(f.a,5570);t.Body().add_Ids().set_steamid(this.steamid64),t.Body().set_id_count(1),C.f.CMInterface.SendMsgAndAwaitResponse(t,f.b).then((function(t){if(Object(I.a)(1==t.Body().responses().length,"Got an invalid number of responses to CMsgClientAMGetPersonaNameHistory"),1==t.Body().responses().length){var n=t.Body().responses()[0];Object(I.a)(n.steamid()==e.steamid64,"Got a response for the wrong user from CMsgClientAMGetPersonaNameHistory"),n.steamid()==e.steamid64&&(Object(I.a)(0==e.m_rgPersonaNameHistory.length,"Got persona name history response for same user twice."),Object(O.E)((function(){for(var t=0,o=n.names();t<o.length;t++){var r=o[t];e.m_rgPersonaNameHistory.push(r.name())}e.m_bPersonaNameHistoryLoaded=!0})))}})),this.m_bPersonaNameHistoryLoaded=!1}return this.m_rgPersonaNameHistory},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persona_name_history_loaded",{get:function(){return!0===this.m_bPersonaNameHistoryLoaded},enumerable:!1,configurable:!0}),e.prototype.OpenChatDialog=function(e){return this.is_blocked?(r.a.IN_MOBILE?C.f.ShowAlert(Object(L.d)("#Friend_Chat_OpenError_Blocked"),Object(L.d)("#Friend_Chat_OpenError_BlockedBody")):C.f.OpenURLInBrowser(this.GetCommunityProfileURL(),e),null):C.f.ShowFriendChatDialog(e,this.m_unAccountID,!0)},Object.defineProperty(e,"FriendSortStatusComparator",{get:function(){var t=C.f.SettingsStore.BForceAlphabeticFriendSorting();return e.FriendSortStatusComparatorInternal.bind(null,t)},enumerable:!1,configurable:!0}),e.FriendSortStatusComparatorInternal=function(e,t,n){var o=t.persona,r=n.persona;return a.b.SortStatusComparator(!e,o,r)},Object.defineProperty(e,"DefaultFriendSortComparator",{get:function(){var t=C.f.SettingsStore.BForceAlphabeticFriendSorting();return function(n,o){var r=e.FriendSortStatusComparatorInternal(t,n,o);return 0!=r?r:n.display_name.localeCompare(o.display_name)}},enumerable:!1,configurable:!0}),e.FriendSortByLastSeenComparator=function(e,t){var n=e.persona,o=t.persona;if(!n.is_online&&!o.is_online){var r=C.f.GetServerRTime32()-n.last_seen_online,i=C.f.GetServerRTime32()-o.last_seen_online;if(r>i)return 1;if(i>r)return-1}return e.display_name.localeCompare(t.display_name)},e.FriendSortByFriendOrNotComparator=function(e,t){return e.is_friend&&!t.is_friend||!e.is_friend&&t.is_friend?e.is_friend?-1:1:e.display_name.localeCompare(t.display_name)},Object.defineProperty(e.prototype,"localized_online_status",{get:function(){return this.persona.GetLocalizedOnlineStatus()},enumerable:!1,configurable:!0}),e.prototype.GetBroadcastDescription=function(){if(this.persona.m_strBroadcastTitle)return this.persona.m_strBroadcastTitle;if(this.persona.m_broadcastAccountId){var e=C.f.FriendStore.GetPlayer(this.persona.m_broadcastAccountId),t=this.persona.m_broadcastAppId?C.f.AppInfoStore.GetAppInfo(this.persona.m_broadcastAppId):null;return t&&t.is_valid?Object(L.d)("#PersonaStateWatchingBroadcast_PlayerGame",e.display_name,t.name):Object(L.d)("#PersonaStateWatchingBroadcast_Player",e.display_name)}return null},e.prototype.LoadFriendsUIBetaStatus=function(){var e=this;if(this.is_friend&&this.m_bBetaStatusStale&&!this.m_bBetaStatusLoading){this.m_bBetaStatusLoading=!0;var t=this.persona.is_online,n=i.b.Init(g.c);n.Body().set_steamid(this.steamid64),g.g.IsInFriendsUIBeta(C.f.CMInterface.GetServiceTransport(),n).then((function(n){e.m_bBetaStatusLoading=!1,e.m_bBetaStatusStale=!1,e.m_bIsOnlineInBeta=n.Body().online_in_friendsui()||!1,e.m_bIsInBeta=n.Body().has_used_friendsui()||!1,Object(O.J)((function(){return e.persona.is_online!=t})).then((function(){e.m_bBetaStatusStale=!0}))}))}},Object.defineProperty(e.prototype,"is_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsInBeta},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_online_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsOnlineInBeta},enumerable:!1,configurable:!0}),e.prototype.LoadEquippedProfileItems=function(e){return void 0===e&&(e=!1),Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_bLoadedEquippedProfileItems&&!e?[2]:(this.m_bLoadedEquippedProfileItems=!0,(t=i.b.Init(v.g)).Body().set_steamid(this.m_persona.m_steamid.ConvertTo64BitString()),[4,v.m.GetProfileItemsEquipped(C.f.CMInterface.GetServiceTransport(),t)]);case 1:return 1==(n=o.sent()).GetEResult()&&(this.m_equippedProfileItems=n.Body().toObject(),this.m_persona.is_golden&&(this.m_equippedProfileItems.avatar_frame.image_small&&0!=this.m_equippedProfileItems.avatar_frame.image_small.length||(this.m_equippedProfileItems.avatar_frame.image_small=r.a.COMMUNITY_CDN_ASSET_URL+"rewardsseason1/goldenprofile/presige_frame_anim.png",this.m_equippedProfileItems.avatar_frame.image_large=r.a.COMMUNITY_CDN_ASSET_URL+"rewardsseason1/goldenprofile/presige_frame_anim.png"))),[2]}}))}))},e.prototype.BLoadedEquippedItems=function(){return this.m_bLoadedEquippedProfileItems},e.prototype.GetEquippedProfileItems=function(){return this.LoadEquippedProfileItems(),this.m_equippedProfileItems},Object(o.c)([O.A],e.prototype,"m_eFriendRelationship",void 0),Object(o.c)([O.A],e.prototype,"m_bPersonaStateReady",void 0),Object(o.c)([O.A],e.prototype,"m_bPersonaNameHistoryLoaded",void 0),Object(o.c)([O.A],e.prototype,"m_rgPersonaNameHistory",void 0),Object(o.c)([O.A],e.prototype,"m_strPlayerNicknameNormalized",void 0),Object(o.c)([O.A],e.prototype,"m_strNickname",void 0),Object(o.c)([O.A],e.prototype,"m_bBetaStatusStale",void 0),Object(o.c)([O.A],e.prototype,"m_bIsOnlineInBeta",void 0),Object(o.c)([O.A],e.prototype,"m_bIsInBeta",void 0),Object(o.c)([O.A],e.prototype,"m_NotificationSettings",void 0),Object(o.c)([O.A],e.prototype,"m_bLoadedEquippedProfileItems",void 0),Object(o.c)([O.A],e.prototype,"m_equippedProfileItems",void 0),Object(o.c)([O.l],e.prototype,"display_name",null),Object(o.c)([O.l],e.prototype,"secondary_display_name",null),Object(o.c)([O.l],e.prototype,"current_game_name",null),Object(o.c)([O.l],e.prototype,"current_game_icon_url",null),Object(o.c)([O.l],e.prototype,"current_game_rich_presence",null),Object(o.c)([O.l],e.prototype,"persona_name_history",null),Object(o.c)([O.l],e.prototype,"persona_name_history_loaded",null),Object(o.c)([O.l],e.prototype,"localized_online_status",null),e}(),k=function(){function e(){this.m_currentMsg=null,this.m_mapLastSeenApp=new Map}return e.prototype.Init=function(e){this.m_CMInterface=e,r.a.IN_MOBILE||SetBackgroundInterval(this.NotifyImpressions,12e4)},e.prototype.RecordFriendInGameImpression=function(e){if(!r.a.IN_MOBILE&&!(e==T.o||e>=T.i&&e<=T.j)){this.m_currentMsg||(this.m_currentMsg=i.b.Init(_.a));var t=!0;if(this.m_mapLastSeenApp.has(e)){var n=this.m_mapLastSeenApp.get(e);t=Date.now()-n>864e5}var o=null;if(t)this.m_mapLastSeenApp.set(e,Date.now()),(o=this.m_currentMsg.Body().add_impressions()).set_appid(e),o.set_type(2),o.set_num_impressions(0);else{for(var a=0;a<this.m_currentMsg.Body().impressions().length;++a){var s=this.m_currentMsg.Body().impressions()[a];if(s.appid()==e&&1==s.type()){o=s;break}}o||((o=this.m_currentMsg.Body().add_impressions()).set_appid(e),o.set_type(1),o.set_num_impressions(0))}o.set_num_impressions(o.num_impressions()+1)}},e.prototype.NotifyImpressions=function(){if(this.m_currentMsg){var e=this.m_currentMsg;this.m_currentMsg=null,_.b.ReportProductImpressionsFromClient(this.m_CMInterface.GetServiceTransport(),e)}},Object(o.c)([O.i.bound],e.prototype,"NotifyImpressions",null),e}(),B=function(){function e(){var e=this;this.m_FriendGroupStore=new A.a(this),this.m_ClanStore=new w(this),this.m_FavoritesStore=new D.a(this),this.m_mapPlayerCache=new Map,this.m_mapApprovedNonFriendMessages=O.A.map(),this.m_setFriendsNeedingPersonaStateLoad=new Set,this.m_iIntervalSubscribeToPersonaStateUpdates=0,this.m_setFriendAccountIDs=new Set,this.m_setIncomingInviteAccountIDs=new Set,this.m_bUserSetPersonaState=!1,this.m_eUserPersonaState=0,this.m_bIsClientIdle=!1,this.m_FriendStorePrefs={ePersonaState:1,strNonFriendsAllowedToMsg:""},this.m_cFriendPersonaStatesInitialized=0,this.m_bReadyToRender=!1,this.m_bPerFriendPreferencesLoaded=!1,this.m_bReceivedFriendsList=!1,this.m_bInitialPersonaStatesLoaded=!1,this.m_InitialAppInfoPromises=[],this.m_bInitialAppInfoLoaded=!1,this.m_bParentalLocked=void 0,this.m_eUserPersonaStateParental=1,this.m_rgPersonaStateChangeCallbacks=new M.a,this.m_rgPlayerGameChangedCallbacks=new M.a,this.m_nMissingPersonaStateRetryCount=0,this.m_nMissingPersonaStateMaxRetries=5,this.m_FriendInGameNotificationStore=new k,this.m_bSnoozeCallbackFired=!0,this.m_bAwayCallbackFired=!0,this.m_bNextActivityCallbackRegistered=!1,this.fnRecvMsgClientFriendsList=Object(m.a)(767,h.i,(function(t){t.Body().bincremental()&&e.SetFriendsList(t.Body())})),this.fnRecvMsgClientPersonaState=Object(m.a)(766,h.m,(function(t){for(var n=t.Body().status_flags(),o=new Set,r=new Set,i=0,a=t.Body().friends();i<a.length;i++){var s=a[i],p=new l.a(s.friendid());if(p.BIsClanAccount())e.m_ClanStore.OnClanPersonaStateUpdate(n,s);else if(p.BIsIndividualAccount()){var u=e.GetPlayerIfCached(p.GetAccountID());u||(u=e.GetPlayer(p.GetAccountID()));var m=u.mutable_persona,d=m.m_ePersonaState,h=m.m_strPlayerName,f=m.m_unGamePlayedAppID,_=m.m_strGameExtraInfo,g=m.is_in_nonsteam_game,b=m.m_broadcastAppId,v=m.m_bInitialized;m.UpdateFromMessage(n,s),!v&&m.m_bInitialized&&e.m_setFriendAccountIDs.has(u.accountid)&&e.m_cFriendPersonaStatesInitialized++;var y=0!=(1&n);if(p.GetAccountID()==e.self.accountid&&y){var S=!!s.persona_set_by_user(),O=m.m_ePersonaState;e.UpdateUserPersonaStateInternal(O,S,e.m_bIsClientIdle,!0),1==O&&1!=(O=e.AdjustPersonaStateForIdleTime(O))&&e.UpdateUserPersonaStateInternal(O,!1,e.m_bIsClientIdle)}var I=!1,E=m.m_unGamePlayedAppID,w=m.m_broadcastAppId;c.b.bValid&&b&&b!=c.b.appID&&(b=void 0),c.b.bValid&&w&&w!=c.b.appID&&(w=void 0);var D=!1;if(E||f||g||m.is_in_nonsteam_game||w||b){if(I=f!=E,E&&o.add(E),w&&o.add(w),m.GetAccountID()!=e.m_self.accountid){var T=f,M=E;0==m.m_ePersonaState&&(M=0),g&&(T=A.d),m.is_in_nonsteam_game&&(M=A.d),!T&&b&&(T=b),!M&&w&&(M=w),u.is_friend&&e.m_FriendGroupStore.OnFriendGameChanged(p.GetAccountID(),T,M),e.m_rgPlayerGameChangedCallbacks.Dispatch(p.GetAccountID(),T,M),D=!0}}else m.m_strGameExtraInfo&&(I=_!=m.m_strGameExtraInfo);(4096&n||I)&&E&&m.HasCurrentGameRichPresence()&&r.add(E),v&&u.is_friend&&u.accountid!=e.m_self.accountid&&(d!=m.m_ePersonaState||I)&&(u.BPlayInGameSound()&&I&&u.persona.is_ingame?e.PlayJoinGameSound():u.BPlayOnlineSound()&&d!=m.m_ePersonaState&&1==m.m_ePersonaState&&e.PlayFriendOnlineSound(),e.OnFriendPersonaStateChanged(u,d,m.m_ePersonaState,I)),D||m.m_ePersonaState==d&&!I&&m.m_strPlayerName==h||e.m_rgPersonaStateChangeCallbacks.Dispatch(u)}}var j=C.f.AppInfoStore.EnsureAppInfoForAppIDs(o);e.m_bInitialPersonaStatesLoaded||e.m_InitialAppInfoPromises.push(j),!e.m_bInitialPersonaStatesLoaded&&r.size&&(console.log("Preloading Game Rich Presence for AppIDs:",Array.from(r)),r.forEach((function(e){return C.f.AppInfoStore.GetRichPresenceLoc(e)}))),e.m_cFriendPersonaStatesInitialized>=e.m_setFriendAccountIDs.size&&e.m_bReceivedFriendsList&&!e.m_bInitialPersonaStatesLoaded&&(e.m_bInitialPersonaStatesLoaded=!0,e.StartWaitForInitialAppInfo())})),this.m_PerFriendPreferencesChangedHandler=Object(m.d)(v.l.NotifyPerFriendPreferencesChangedHandler,(function(t){var n=e.GetPlayer(t.Body().accountid());if(n){var o=t.Body().preferences();n.nickname=o.nickname()||void 0;var r=new N;e.FillPerFriendNotificationSettingsFromMessage(r,o),n.notification_settings=r}return 1})),this.m_FriendEquippedProfileItemsChangedHandler=Object(m.d)(v.l.NotifyFriendEquippedProfileItemsChangedHandler,(function(t){var n=e.GetPlayer(t.Body().accountid());return n&&n.BLoadedEquippedItems()&&n.LoadEquippedProfileItems(!0),1}))}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupStore.Init(e),this.m_ClanStore.Init(e),this.m_FavoritesStore.Init(e),this.m_FriendInGameNotificationStore.Init(e);var n=!1;return this.m_CMInterface.AddOnLogonCallback((function(){n?t.SendPersonaStateToServer(!0):(n=!0,t.m_self=t.AddPlayerToCache(t.m_CMInterface.steamid.GetAccountID(),1),C.f.SettingsStore.GetObjectFromLocalStorage("FriendStoreLocalPrefs",t.m_FriendStorePrefs).then((function(e){if(t.m_FriendStorePrefs=e,null!=e.strNonFriendsAllowedToMsg&&""!=e.strNonFriendsAllowedToMsg)for(var n=(new Date).getTime(),o=e.strNonFriendsAllowedToMsg.split(","),r=0;r<o.length;++r){var i=o[r].split("=");if(2==i.length){var a=Number(i[0]),s=Number(i[1]);s>n&&t.m_mapApprovedNonFriendMessages.set(a,s)}}t.m_eUserPersonaState=e.ePersonaState,t.m_bUserSetPersonaState=!1,t.SendPersonaStateToServer(!0)})),t.m_bReadyToRender||SetBackgroundTimeout(t.ForceReadyToRender.bind(t),1e3)),t.GetFriendsList()})),this.m_CMInterface.AddOnDisconnectCallback((function(){t.SetPersonasOffline(!0)}),102),Object(O.j)((function(){var e=C.f.ParentalStore.BIsFriendsBlocked();t.OnParentalLockChanged(e)})),this.InitializeIdleTracking(),this.m_bReadyToRender?Promise.resolve():new Promise((function(e,n){t.m_fnOnReadyToRender=e}))},e.prototype.UpdateUnreadMessagesGlobal=function(){if(void 0!==window.SteamClient&&null!=window.SteamClient.WebChat&&null!=window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages){var e=C.f.ChatStore.GetChatsWithUnreadPriorityMessages().length;window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages(e)}},e.prototype.GetFriendsList=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=i.b.Init(b.c),[4,b.f.GetFriendsList(this.m_CMInterface.GetServiceTransport(),e)];case 1:return 1==(t=o.sent()).GetEResult()?this.SetFriendsList(t.Body().friendslist()):(n={message:"ShowFriendsErrorRetryDialog"},window.parent.postMessage(n,"https://steamloopback.host"),Object(I.a)(!1,"GetFriendsList returned",t.GetEResult())),[2]}}))}))},Object.defineProperty(e.prototype,"not_ready_to_render_reason",{get:function(){if(this.m_bReadyToRender)return"";var e="";return this.m_bPerFriendPreferencesLoaded||(e+="P"),this.m_bReceivedFriendsList||(e+="F"),this.m_bInitialPersonaStatesLoaded||(e+="I"),this.m_bInitialAppInfoLoaded||(e+="A"),e},enumerable:!1,configurable:!0}),e.prototype.UpdateReadyToRenderState=function(){this.m_bReadyToRender||this.m_bReceivedFriendsList&&this.m_bInitialPersonaStatesLoaded&&this.m_bPerFriendPreferencesLoaded&&this.m_bInitialAppInfoLoaded&&(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.ForceReadyToRender=function(){Object(I.a)(this.m_bReadyToRender,"FriendStore: Forcing ready to render, was not ready in time."),this.m_bInitialPersonaStatesLoaded=!0,this.m_bPerFriendPreferencesLoaded=!0,this.m_bInitialAppInfoLoaded=!0,this.UpdateReadyToRenderState()},e.prototype.AddPersonaStateChangedCallback=function(e){return this.m_rgPersonaStateChangeCallbacks.Register(e)},e.prototype.AddPlayerGameChangedCallback=function(e){return this.m_rgPlayerGameChangedCallbacks.Register(e)},e.prototype.BIsInvisibleMode=function(){return 7==this.m_eUserPersonaState},e.prototype.GetUserDoNotDisturb=function(){return C.f.SettingsStore.FriendsSettings.bDoNotDisturbMode},e.prototype.SetUserDoNotDisturb=function(e){C.f.SettingsStore.FriendsSettings.bDoNotDisturbMode=e,C.f.SettingsStore.BUpdateFriendsSettings(C.f.SettingsStore.FriendsSettings)},e.prototype.SetUserPersonaState=function(e){this.UpdateUserPersonaStateInternal(e,!0,!1)},e.prototype.BApprovedNonFriendMessages=function(e){var t=new Date,n=this.m_mapApprovedNonFriendMessages.get(e);return null!=n&&n>t.getTime()},e.prototype.SetApprovedNonFriendMessages=function(e){var t=(new Date).getTime();this.m_mapApprovedNonFriendMessages.set(e,t+864e5);var n="";this.m_mapApprovedNonFriendMessages.forEach((function(e,o,r){e>t&&(0!=n.length&&(n+=","),n+=o.toString()+"="+e.toString())})),this.m_FriendStorePrefs.strNonFriendsAllowedToMsg=n,C.f.SettingsStore.StoreObjectInLocalStorage("FriendStoreLocalPrefs",this.m_FriendStorePrefs)},e.prototype.OnParentalLockChanged=function(e){!this.m_bParentalLocked&&e?(this.m_eUserPersonaStateParental=this.m_eUserPersonaState,this.UpdateUserPersonaStateInternal(0,!1,this.m_bIsClientIdle),this.m_bParentalLocked=e):this.m_bParentalLocked&&!e&&(this.m_bParentalLocked=e,this.UpdateUserPersonaStateInternal(this.m_eUserPersonaStateParental,!1,this.m_bIsClientIdle))},e.prototype.UpdateUserPersonaStateInternal=function(e,t,n,o){void 0===o&&(o=!1),this.m_bParentalLocked||(C.f.UpdatePersonaState(e),e==this.m_eUserPersonaState&&this.m_bUserSetPersonaState==t&&this.m_bIsClientIdle==n||(0==e&&t?C.f.SignOutOfFriends(void 0):(t||3!=e&&4!=e||(n=!0),o&&this.m_bIsClientIdle!=n&&(o=!1),this.m_eUserPersonaState=e,this.m_bUserSetPersonaState=t,this.m_bIsClientIdle=n,o||this.SendPersonaStateToServer(!1),(t||1==this.m_eUserPersonaState)&&(this.m_FriendStorePrefs.ePersonaState=e,C.f.SettingsStore.StoreObjectInLocalStorage("FriendStoreLocalPrefs",this.m_FriendStorePrefs)))))},e.prototype.SendPersonaStateToServer=function(e){void 0===e&&(e=!1);var t=i.b.Init(h.c,716);t.Body().set_persona_state(this.m_eUserPersonaState),t.Body().set_persona_set_by_user(this.m_bUserSetPersonaState),t.Body().set_need_persona_response(e),t.Body().set_is_client_idle(this.m_bIsClientIdle),this.m_CMInterface.Send(t)},e.prototype.AdjustPersonaStateForIdleTime=function(e){return(1==e||3==e)&&C.f.IdleTracker.GetUserIdleTime()>=7200?4:1==e&&C.f.IdleTracker.GetUserIdleTime()>=300?3:e},Object.defineProperty(e.prototype,"FriendGroupStore",{get:function(){return this.m_FriendGroupStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ClanStore",{get:function(){return this.m_ClanStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FavoritesStore",{get:function(){return this.m_FavoritesStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"all_friends",{get:function(){var e=this,t=[];return this.m_setFriendAccountIDs.forEach((function(n){t.push(e.GetFriend(n))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"all_friends_accountids",{get:function(){return this.m_setFriendAccountIDs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_ready",{get:function(){return this.m_bReceivedFriendsList},enumerable:!1,configurable:!0}),e.prototype.GetFriend=function(e){var t=this.m_mapPlayerCache.get(e);if(t){if(!t.is_friend)return null}else Object(I.a)(!1,"Friend missing from cache: "+e);return t},e.prototype.GetPlayer=function(e){var t=this.m_mapPlayerCache.get(e);return t||(t=this.AddPlayerToCache(e,3)),t},e.prototype.AddPlayerToCache=function(e,t,n){if(void 0===n&&(n=!0),this.m_mapPlayerCache.has(e))return this.m_mapPlayerCache.get(e);var o=new R(e);return this.m_mapPlayerCache.set(e,o),o},e.prototype.GetPlayerIfCached=function(e){return this.m_mapPlayerCache.get(e)},e.prototype.GetFriendIfCached=function(e){var t=this.m_mapPlayerCache.get(e);return t&&t.is_friend?t:null},e.prototype.SetPersonasOffline=function(e){var t=this;this.m_mapPlayerCache.forEach((function(n){e&&(n.is_friend||n.accountid==t.self.accountid)||n.persona.is_online&&n.persona.ClearStateOnDisconnect()}))},e.prototype.QueueFriendPersonaStateLoad=function(e){this.m_setFriendsNeedingPersonaStateLoad.add(e.accountid),this.m_iIntervalSubscribeToPersonaStateUpdates||(this.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(this.SubscribeToMissingPersonaStates.bind(this),50))},Object.defineProperty(e.prototype,"self",{get:function(){return this.m_self},enumerable:!1,configurable:!0}),e.prototype.SubscribeToMissingPersonaStates=function(){var e=this;this.m_iIntervalSubscribeToPersonaStateUpdates&&(ClearBackgroundTimeout(this.m_iIntervalSubscribeToPersonaStateUpdates),this.m_iIntervalSubscribeToPersonaStateUpdates=0);var t=[];if(this.m_setFriendsNeedingPersonaStateLoad.forEach((function(n){var o=e.m_mapPlayerCache.get(n);o&&!o.persona.m_bInitialized&&t.push(o.accountid)})),this.m_setFriendsNeedingPersonaStateLoad.clear(),t.length){var n=i.b.Init(h.q,815);n.Body().set_persona_state_requested(1106);for(var o=0,r=t;o<r.length;o++){var a=r[o];n.Body().add_friends(l.a.InitFromAccountID(a).ConvertTo64BitString())}this.m_CMInterface.Send(n),SetBackgroundTimeout((function(){for(var n=0,o=0,r=t;o<r.length;o++){var i=r[o],a=e.GetPlayer(i);a&&!a.persona.m_bInitialized&&(a.m_bPersonaStateReady=!0,a.persona.m_bNameInitialized||(Object(I.a)(a.m_bPersonaStateLoadRequested,"PersonaStateLoadRequested not set"),e.m_setFriendsNeedingPersonaStateLoad.add(i)),n++)}n>0?e.m_nMissingPersonaStateRetryCount<e.m_nMissingPersonaStateMaxRetries?(e.m_nMissingPersonaStateRetryCount++,e.m_iIntervalSubscribeToPersonaStateUpdates||(e.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(e.SubscribeToMissingPersonaStates.bind(e),1e3))):console.log("Giving up persona state retries with",n,"still not filled",e.m_setFriendsNeedingPersonaStateLoad):e.m_nMissingPersonaStateRetryCount=0}),500)}},e.prototype.InitializeIdleTracking=function(){this.m_bAwayCallbackFired&&(this.m_bAwayCallbackFired=!1,C.f.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,3),300)),this.m_bSnoozeCallbackFired&&(this.m_bSnoozeCallbackFired=!1,C.f.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,4),7200))},e.prototype.ResetIdleState=function(){var e=this.m_eUserPersonaState;this.m_bUserSetPersonaState||3!=this.m_eUserPersonaState&&4!=this.m_eUserPersonaState||(e=1),this.UpdateUserPersonaStateInternal(e,this.m_bUserSetPersonaState,!1),this.m_bNextActivityCallbackRegistered=!1,this.InitializeIdleTracking()},e.prototype.OnIdle=function(e){var t=e;3==e?(this.m_bAwayCallbackFired=!0,4==this.m_eUserPersonaState&&(t=4)):4==e&&(this.m_bSnoozeCallbackFired=!0),this.m_bUserSetPersonaState&&(t=this.m_eUserPersonaState),this.UpdateUserPersonaStateInternal(t,this.m_bUserSetPersonaState,!0),this.m_bNextActivityCallbackRegistered||(this.m_bNextActivityCallbackRegistered=!0,C.f.IdleTracker.AddOnNextActivityCallback(this.ResetIdleState.bind(this)))},e.prototype.SendFriendInvite=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(t=i.b.Init(v.a)).Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),[4,v.m.AddFriend(this.m_CMInterface.GetServiceTransport(),t)];case 1:return n=o.sent(),r=1,void 0!==n.Body().result()&&(r=n.Body().result()),a=n.Body().friend_relationship(),[2,{eResult:r,eFriendRelationship:a}]}}))}))},e.prototype.RemoveFriend=function(e){var t=i.b.Init(v.i);return t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),v.m.RemoveFriend(this.m_CMInterface.GetServiceTransport(),t).then((function(e){return e.Body().friend_relationship()}))},e.prototype.BlockPlayer=function(e,t){void 0===t&&(t=!1);var n=i.b.Init(v.h);return n.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),t&&n.Body().set_unignore(!0),v.m.IgnoreFriend(this.m_CMInterface.GetServiceTransport(),n).then((function(e){return e.Body().friend_relationship()}))},e.prototype.AddFriend=function(e,t){var n=new l.a(e).GetAccountID(),o=this.m_setIncomingInviteAccountIDs.has(n);2==t?o||((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,s.LoadIfNecessary(),this.m_setIncomingInviteAccountIDs.add(n),this.m_FriendGroupStore.OnIncomingInviteAdded(n)):o&&((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,this.m_setIncomingInviteAccountIDs.delete(n),this.m_FriendGroupStore.OnIncomingInviteRemoved(n));4==t?((s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t,s.LoadIfNecessary(),this.m_FriendGroupStore.OnOutgoingInviteAdded(n)):this.m_FriendGroupStore.OnOutgoingInviteRemoved(n);if(5==t||6==t){var r=C.f.ChatStore.GetFriendChat(n,!1);r&&C.f.UIStore.CloseTabByID(r.unique_id)}var i=this.m_setFriendAccountIDs.has(n);if(Object(T.b)(t)){var a=void 0;i?a=this.GetFriend(n):(this.m_setFriendAccountIDs.add(n),(a=this.AddPlayerToCache(n,2,!1)).LoadIfNecessary(),this.m_FriendGroupStore.OnFriendAdded(n)),a.efriendrelationship=t}else{var s;i&&(this.m_FriendGroupStore.OnFriendRemoved(n),this.m_FavoritesStore.OnFriendRemoved(n),this.m_setFriendAccountIDs.delete(n)),(s=this.AddPlayerToCache(n,3,!1)).efriendrelationship=t}},e.prototype.SetFriendsList=function(e){var t=e.friends();if(!e.bincremental()){for(var n=0,o=this.all_friends;n<o.length;n++){o[n].efriendrelationship=0}this.m_setFriendAccountIDs.clear(),this.m_setIncomingInviteAccountIDs.clear(),this.m_FriendGroupStore.OnFullFriendsListUpdateStart(),this.m_ClanStore.ClearClanMembershipData()}for(var r=0,a=t;r<a.length;r++){var s=a[r],c=new l.a(s.ulfriendid());if(c.BIsIndividualAccount()){var p=s.efriendrelationship();this.AddFriend(c.ConvertTo64BitString(),p)}else c.BIsClanAccount()&&this.m_ClanStore.OnClanRelationshipChanged(c,s.efriendrelationship())}if(!e.bincremental()){this.m_FriendGroupStore.OnFullFriendsListUpdateComplete(),this.m_ClanStore.LoadMissingClanPersonas(),this.m_bReceivedFriendsList=!0;var u=i.b.Init(d.T);d.Y.RequestFriendPersonaStates(this.m_CMInterface.GetServiceTransport(),u),this.RequestPerFriendPreferences(),0==this.m_setFriendAccountIDs.size?(this.m_bInitialPersonaStatesLoaded=!0,this.StartWaitForInitialAppInfo()):this.SubscribeToMissingPersonaStates()}},e.prototype.OnFriendPersonaStateChanged=function(e,t,n,o){if(C.f.NotificationManager.BNotificationsPermitted()&&C.f.SettingsStore.BReady()&&!C.f.FriendStore.GetUserDoNotDisturb()){if(o&&e.persona.is_ingame&&e.BShowInGameNotification()){var r=e.current_game_name;return e.persona.is_in_nonsteam_game||this.m_FriendInGameNotificationStore.RecordFriendInGameImpression(e.persona.m_unGamePlayedAppID),void(r&&C.f.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(L.d)("#Friend_StateChange_InGame",r),rawbody:r,tag:"state_"+e.accountid,state:"ingame",steamid:e.persona.m_steamid.ConvertTo64BitString()}))}0==t&&0!=n&&e.BShowOnlineNotification()&&C.f.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(L.d)("#Friend_StateChange_Online"),tag:"state_"+e.accountid,state:"online",steamid:e.persona.m_steamid.ConvertTo64BitString()})}},e.prototype.PlayJoinGameSound=function(){C.f.FriendStore.GetUserDoNotDisturb()||C.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_join.m4a")},e.prototype.PlayFriendOnlineSound=function(){C.f.FriendStore.GetUserDoNotDisturb()||C.f.AudioPlaybackManager.PlayAudioURL(r.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_online.m4a")},e.prototype.FillPerFriendNotificationSettingsFromMessage=function(e,t){e.Notifications_ShowInGame=t.notifications_showingame(),e.Notifications_ShowMessage=t.notifications_showmessages(),e.Notifications_ShowOnline=t.notifications_showonline(),e.Notifications_SendMobile=t.notifications_sendmobile(),e.Sounds_PlayInGame=t.sounds_showingame(),e.Sounds_PlayMessage=t.sounds_showmessages(),e.Sounds_PlayOnline=t.sounds_showonline()},e.prototype.RequestPerFriendPreferences=function(){var e=this,t=i.b.Init(v.e);v.m.GetPerFriendPreferences(this.m_CMInterface.GetServiceTransport(),t).then((function(t){Object(O.E)((function(){for(var n=0,o=t.Body().preferences();n<o.length;n++){var r=o[n],i=e.GetPlayer(r.accountid());if(i){i.nickname=r.nickname()||void 0;var a=new N;e.FillPerFriendNotificationSettingsFromMessage(a,r),i.notification_settings=a}else console.log("Got per-friend preferences back for a user we don't have a Player for:",r)}e.m_bPerFriendPreferencesLoaded=!0,e.UpdateReadyToRenderState()}))}))},e.prototype.StartWaitForInitialAppInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.m_InitialAppInfoPromises)];case 1:return e.sent(),this.m_bInitialAppInfoLoaded=!0,this.UpdateReadyToRenderState(),[2]}}))}))},e.prototype.FillMessageFromPerFriendNotificationSettings=function(e,t){e.set_notifications_showingame(t.Notifications_ShowInGame),e.set_notifications_showmessages(t.Notifications_ShowMessage),e.set_notifications_showonline(t.Notifications_ShowOnline),e.set_notifications_sendmobile(t.Notifications_SendMobile),e.set_sounds_showingame(t.Sounds_PlayInGame),e.set_sounds_showmessages(t.Sounds_PlayMessage),e.set_sounds_showonline(t.Sounds_PlayOnline)},e.prototype.SetPlayerNickname=function(e,t){return this.SetPlayerPerFriendPreferences(e,t,e.notification_settings)},e.prototype.SetPlayerNotificationSettings=function(e,t){return this.SetPlayerPerFriendPreferences(e,e.nickname,t)},e.prototype.SetPlayerPerFriendPreferences=function(e,t,n){var o=i.b.Init(v.k),r=o.Body().preferences();return r.set_accountid(e.accountid),r.set_nickname(t),this.FillMessageFromPerFriendNotificationSettings(r,n),v.m.SetPerFriendPreferences(C.f.CMInterface.GetServiceTransport(),o).then((function(e){return e.GetEResult()}))},e.prototype.InviteToGame=function(e,t,n){var o=i.b.Init(f.d,7005);o.Hdr().set_routing_appid(t),o.Body().set_steam_id_src(this.m_CMInterface.steamid.ConvertTo64BitString()),o.Body().set_steam_id_dest(l.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),n&&o.Body().set_connect_string(n),this.m_CMInterface.Send(o)},e.prototype.InviteToLobby=function(e,t,n){var o=i.b.Init(f.e,6621);o.Hdr().set_routing_appid(t),o.Body().set_steam_id_lobby(n),o.Body().set_steam_id_user_invited(l.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),this.m_CMInterface.Send(o)},e.prototype.InviteToWatch=function(e){C.f.ShowFriendChatDialog(C.f.GetDefaultBrowserContext(),e.accountid,!0);C.f.BroadcastStore.InviteToWatch(e.accountid).then((function(e){}))},e.prototype.FillInChatUsabilityMetrics=function(e){for(var t=0,n=0,o=0,r=0,i=this.all_friends;r<i.length;r++){var a=i[r];3==a.efriendrelationship&&(t++,a.persona.is_online&&n++,a.persona.is_ingame&&o++)}e.metrics().set_friends_count(t),e.metrics().set_friends_online_count(n),e.metrics().set_friends_in_game_count(o),this.m_FriendGroupStore.FillInChatUsabilityMetrics(e),this.m_FavoritesStore.FillInChatUsabilityMetrics(e)},Object(o.c)([O.A],e.prototype,"m_eUserPersonaState",void 0),Object(o.c)([O.A],e.prototype,"m_bPerFriendPreferencesLoaded",void 0),Object(o.c)([O.A],e.prototype,"m_bReceivedFriendsList",void 0),Object(o.c)([O.A],e.prototype,"m_bInitialPersonaStatesLoaded",void 0),Object(o.c)([O.A],e.prototype,"m_bInitialAppInfoLoaded",void 0),Object(o.c)([O.l],e.prototype,"not_ready_to_render_reason",null),Object(o.c)([O.i],e.prototype,"OnParentalLockChanged",null),Object(o.c)([O.i],e.prototype,"SetPersonasOffline",null),Object(o.c)([O.i],e.prototype,"SetFriendsList",null),Object(o.c)([G.a,Object(j.a)(100)],e.prototype,"PlayJoinGameSound",null),Object(o.c)([G.a,Object(j.a)(100)],e.prototype,"PlayFriendOnlineSound",null),Object(o.c)([O.i],e.prototype,"SetPlayerNickname",null),Object(o.c)([O.i],e.prototype,"SetPlayerNotificationSettings",null),Object(o.c)([O.i],e.prototype,"SetPlayerPerFriendPreferences",null),Object(o.c)([O.i],e.prototype,"InviteToGame",null),Object(o.c)([O.i],e.prototype,"InviteToLobby",null),Object(o.c)([O.i],e.prototype,"InviteToWatch",null),e}();function P(e){switch(e){case 25:return"#Friend_InviteError_LimitExceeded";case 15:return"#Friend_InviteError_AccessDenied";case 40:return"#Friend_InviteError_Blocked";case 11:return"#Friend_InviteError_InvalidState";case 84:return"#Friend_InviteError_RateLimitExceeded";case 24:return"#Friend_InviteError_InsufficientPrivilege"}return""}},"+iD5":function(e,t,n){e.exports={countdownCtn:"giveawaynextdraw_countdownCtn_22VBs",Closed:"giveawaynextdraw_Closed_1FNPH",CountDownCtn:"giveawaynextdraw_CountDownCtn_3aSbO",CountDownTime:"giveawaynextdraw_CountDownTime_11wIw",CountDownText:"giveawaynextdraw_CountDownText_25s_8",LearnMore:"giveawaynextdraw_LearnMore_2rVL5",Throbber:"giveawaynextdraw_Throbber_3ABX0",WinnerInfo:"giveawaynextdraw_WinnerInfo_3GUAk",WinnerCount:"giveawaynextdraw_WinnerCount_2hjQN",WinnerText:"giveawaynextdraw_WinnerText_12XUV"}},"+mma":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return u}));var o=n("Hi0u"),r=n("hReu"),i=n("LAqV"),a=n("oh5H"),s=n("kQil");function c(e,t,n,i,c,l,p){return void 0===c&&(c=Object(a.d)("#Button_Cancel")),Object(s.h)((function(n){var i=u(e,t);Object(o.c)(n,e,"alertdialog",i,Object(r.g)(e))}),t,n,i,c,l,p)}function l(e,t,n,o,r,i,s){return void 0===r&&(r=Object(a.d)("#Button_Cancel")),c(e,t,n,o,r,i,s).then((function(){return Promise.resolve(!0)})).catch((function(){return Promise.resolve(!1)}))}function p(e,t,n,i,c){return void 0===i&&(i=Object(a.d)("#Button_OK")),Object(s.g)((function(n){var i=u(e,t);Object(o.c)(n,e,"alertdialog",i,Object(r.g)(e))}),t,n,i,c)}function u(e,t){return i.f.UIStore.GetPerContextChatData(Object(r.f)(e)).BUsePopups()&&e.innerWidth<600?{strTitle:t,popupWidth:638,popupHeight:300}:null}},"/1MB":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("mrSG"),r=n("1KZt"),i=n("1n9R"),a=n("vDqi"),s=n.n(a),c=function(e){function t(){return e.call(this)||this}return Object(o.d)(t,e),t.prototype.BInitialized=function(){return!0},t.prototype.GetServerTime=function(){return i.c.PAGE_TIMESTAMP+Math.floor(performance.now()/1e3)},t.prototype.RequestEmoticonListInternal=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,a,c,l,p,u;return Object(o.e)(this,(function(o){switch(o.label){case 0:e=[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.a.get(i.c.CHAT_BASE_URL+"actions/EmoticonData",{withCredentials:!0})];case 2:if((t=o.sent()).data.emoticons)for(n=0,r=t.data.emoticons;n<r.length;n++)a=r[n],(c=a.name).startsWith("^")?e.push({name:c}):(l={name:c.substr(1,c.length-2)},(p=l.name.toLowerCase())!=l.name&&(l.name_normalized=p),a.time_last_used&&(l.last_used=a.time_last_used),a.use_count&&(l.use_count=a.use_count),a.time_received&&(l.time_received=a.time_received),e.push(l));return[3,4];case 3:return u=o.sent(),console.error("error loading emoticon list"),console.error(u),[3,4];case 4:return this.OnEmoticonListReceived(e),[2]}}))}))},t}(r.a),l=new c},"/7KC":function(e,t,n){"use strict";function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function r(e,t,n){return Math.max(t,Math.min(n,e))}function i(e,t,n,o,r){return o+(r-o)*(e-t)/(n-t)}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i}))},"/Byk":function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return g}));var o=n("mrSG"),r=n("q1tI"),i=n("ljid"),a=n("hReu"),s=n("Hi0u"),c=n("oh5H"),l=n("1VtQ"),p=n("LAqV"),u=n("okNM"),m=n("yolM"),d=n("XaMz"),h=n("r95U"),f=n.n(h);function _(e,t){var n=t.GetGroup().textRoomList.length;n>7&&(n=7);var o=60*n;n<2&&(o-=32),Object(s.c)(r.createElement(b,{group:t.GetGroup()}),e,"ChatRoomGroupNotificationSettings",{strTitle:Object(c.d)("#NotificationSettings_Title"),popupWidth:600,popupHeight:348+o},Object(a.g)(e))}r.createElement("div",{className:"notificationChimeAndToast FriendsSettingsNotificationRow"},r.createElement(i.e,null),r.createElement(i.e,null));function g(e){void 0===e&&(e=!0);var t=[];return e&&(t=t.concat([{label:r.createElement("span",{className:"ChannelSpecificNotificationSettings_Inherit"},Object(c.d)("#NotificationSetting_Inherit")),data:0}])),t=t.concat([{label:Object(c.d)("#NotificationSetting_AllMessages"),data:4},{label:Object(c.d)("#NotificationSetting_AnyMention",p.f.FriendStore.self.display_name),data:3},{label:Object(c.d)("#NotificationSetting_DirectMention",p.f.FriendStore.self.display_name),data:2},{label:Object(c.d)("#NotificationSetting_None"),data:1}])}var b=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgSelectOptions=g(!1),n.state={cSavesInFlight:0},n}return Object(o.d)(t,e),t.prototype.IncrementSavesInFlight=function(){this.setState((function(e){return{cSavesInFlight:e.cSavesInFlight+1}}))},t.prototype.DecrementSavesInFlight=function(){this.setState((function(e){return Object(d.a)(e.cSavesInFlight>0,"expected "+e.cSavesInFlight+" > 0"),{cSavesInFlight:e.cSavesInFlight-1}}))},t.prototype.WrapSavePromise=function(e){this.IncrementSavesInFlight(),e.then(this.DecrementSavesInFlight,this.DecrementSavesInFlight)},t.prototype.OnGroupNotificationLevelChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(e))},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(void 0,void 0,e))},t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnFriendsSettingsClicked=function(e){Object(m.a)(Object(a.e)(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.render=function(){var e,t=this,n=this.props.group,o=n.chatRoomList.filter((function(e){return e.BShouldTrackUnreadMessages()})),a=o.length>0;if(1==o.length&&0==o[0].GetDesktopNotificationLevelSetting()&&0==o[0].GetMobileNotificationLevelsetting()&&(a=!1),a){var l=o.map((function(e){return r.createElement(v,{fnHandleSave:t.WrapSavePromise,group:n,chat:e,key:e.unique_id})}));e=r.createElement(r.Fragment,null,r.createElement("div",{className:"notificationsChannelListContainer\t"},l))}return r.createElement(s.a,{onEscKeypress:this.DismissDialog},r.createElement(i.h,{classNameContent:"ChatRoomNotificationSettingsDialog"},r.createElement(i.m,null,Object(c.d)("#NotificationSettings_Title")),r.createElement(i.p,null,Object(c.k)("#NotificationSettings_SubTitle",r.createElement("span",{className:"whiteText"},n.name))),r.createElement(i.b,null,r.createElement(i.p,{className:"NotificationSettingsSavingIndicator "+(this.state.cSavesInFlight?"Saving":"")},Object(c.d)("#GroupSettings_Permissions_Saving"),"..."),r.createElement(y,{drop_down_options:this.m_rgSelectOptions,get_notification_level:function(e){return t.props.group.GetDesktopNotificationLevel(e)},set_notification_level:this.OnGroupNotificationLevelChanged,get_muted:function(){return t.props.group.BIsUnreadIndicatorMuted()},set_muted:this.OnShowUnreadIndicatorChanged}),a&&r.createElement(r.Fragment,null,r.createElement(i.l,null),r.createElement(i.D,{className:"notificationsChannelHeader"},r.createElement(i.p,{className:"NotificationChannelNameLabel"},Object(c.d)("#GroupSettings_Channels_TextChannels")),r.createElement(i.p,{className:"OverrideChannelLabel"},Object(c.d)("#NotificationSetting_ShortLabel"))),r.createElement(i.n,{className:f.a.scrollMaskVertical},e))),r.createElement(i.j,null,Object(c.k)("#NotificationSetting_Footer_Desc",r.createElement("span",{className:"textLink",onClick:this.OnFriendsSettingsClicked},Object(c.d)("#FriendSettings_Title"))))))},Object(o.c)([l.a],t.prototype,"IncrementSavesInFlight",null),Object(o.c)([l.a],t.prototype,"DecrementSavesInFlight",null),Object(o.c)([l.a],t.prototype,"WrapSavePromise",null),Object(o.c)([l.a],t.prototype,"OnGroupNotificationLevelChanged",null),Object(o.c)([l.a],t.prototype,"OnShowUnreadIndicatorChanged",null),Object(o.c)([l.a],t.prototype,"DismissDialog",null),Object(o.c)([l.a],t.prototype,"OnFriendsSettingsClicked",null),t=Object(o.c)([u.a],t)}(r.Component),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_rgSelectOptions=g(),t}return Object(o.d)(t,e),t.prototype.OnChatNotificationLevelChanged=function(e){this.props.fnHandleSave(this.props.chat.SetNotificationPreferences(e.data))},t.prototype.render=function(){var e=this.props.chat;e.GetDesktopNotificationLevelSetting();return r.createElement(i.C,{className:"notificationsChannel"},r.createElement("div",{className:"NotificationChannelName"},e.name),r.createElement(i.i,{rgOptions:this.m_rgSelectOptions,selectedOption:e.GetDesktopNotificationLevelSetting(),onChange:this.OnChatNotificationLevelChanged}))},Object(o.c)([l.a],t.prototype,"OnChatNotificationLevelChanged",null),t=Object(o.c)([u.a],t)}(r.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnNotificationLevelChanged=function(e){this.props.set_notification_level(e.data)},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.props.set_muted(!e)},t.prototype.render=function(){var e=this.props.get_notification_level(!0);this.props.bIsDefault&&0==e&&(e=4);var t=this.props.get_notification_level();return this.props.bIsDefault&&0==t&&(t=4),r.createElement("div",{className:"ChatRoomNotificationSettingsDialog"},r.createElement("div",{className:"notificationGeneralHeader"+(this.props.bIsDefault?" isDefault":"")},r.createElement(i.p,null,this.props.bIsDefault?Object(c.d)("#NotificationSetting_DefaultLabel"):Object(c.d)("#NotificationSetting_Label"))),r.createElement("div",{style:{marginBottom:16}},r.createElement("div",{className:"notificationRow"},r.createElement(i.i,{rgOptions:this.props.drop_down_options,selectedOption:e,onChange:this.OnNotificationLevelChanged})),4!=t&&r.createElement("div",{className:"indicatorOptionContainer"},r.createElement(i.u,{classname:"indicatorOption",label:Object(c.d)("#NotificationSetting_Indicator"),onChange:this.OnShowUnreadIndicatorChanged,checked:!this.props.get_muted()}),r.createElement("div",{className:"ChatUnreadMessageIndicator"+(this.props.get_muted()?" Hidden":"")},r.createElement("div",{className:"chatUnreadCircle"})))))},Object(o.c)([l.a],t.prototype,"OnNotificationLevelChanged",null),Object(o.c)([l.a],t.prototype,"OnShowUnreadIndicatorChanged",null),t=Object(o.c)([u.a],t)}(r.Component)},"/FkP":function(e,t,n){"use strict";n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"j",(function(){return _})),n.d(t,"a",(function(){return g}));var o,r,i,a=n("mrSG"),s=n("2vnA"),c=n("0N1H"),l=n("LAqV"),p={"/me":{strDescriptionToken:"#SlashCommandDescription_Me"},"/code":{strDescriptionToken:"#SlashCommandDescription_Code"},"/pre":{strDescriptionToken:"#SlashCommandDescription_Pre"},"/giphy":{strDescriptionToken:"#SlashCommandDescription_Giphy"},"/spoiler":{strDescriptionToken:"#SlashCommandDescription_Spoiler"},"/quote":{strDescriptionToken:"#SlashCommandDescription_Quote"},"/random":{strDescriptionToken:"#SlashCommandDescription_Random",unExpectedArguments:[1,2]},"/flip":{strDescriptionToken:"#SlashCommandDescription_Flip",unExpectedArguments:0},"/store":{strDescriptionToken:"#SlashCommandDescription_Store"}};function u(){return Object.keys(p)}function m(e){return p[e]}!function(e){e[e.None=0]="None",e[e.Deleting=1]="Deleting",e[e.Deleted=2]="Deleted"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Animating=1]="Animating"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Generic=1]="Generic",e[e.NotFriends=2]="NotFriends",e[e.NoChatPermissionInGroup=3]="NoChatPermissionInGroup",e[e.RateLimitExceeded=4]="RateLimitExceeded"}(i||(i={}));var d=function(){function e(e,t,n,i,a,s,c){this.unOrdinal=0,this.eDeleteState=o.None,this.eAnimationState=r.None,this.unAccountID=e,this.rtTimestamp=t,this.unOrdinal=n||0,i&&i.length>13e3?this.strMessage=i.substr(0,13e3):this.strMessage=i,this.m_strSlashCommand=function(e){if(!e)return null;var t=e.split(/\s/),n=t[0],o=t.slice(1);if(p[n]){var r=p[n].unExpectedArguments;if(void 0===r||("number"==typeof r?r===o.length:r.indexOf(o.length)>-1))return n}return null}(i),this.strMessage=this.HandleSpecialMessage(this.strMessage),void 0!==a&&(this.eServerMsgType=a,this.strServerMsgParam=s,this.unServerMsgParamAccountID=c)}return e.prototype.UniqueKey=function(){return this.unOrdinal?this.rtTimestamp+"_"+this.unOrdinal:this.rtTimestamp},Object.defineProperty(e.prototype,"Mentions",{get:function(){return this.m_mentions||{}},set:function(e){this.m_mentions=e},enumerable:!1,configurable:!0}),e.prototype.BIsLocalEcho=function(){return!1},e.prototype.BHasServerAcknowledged=function(){return!0},Object.defineProperty(e.prototype,"eErrorSending",{get:function(){return i.None},enumerable:!1,configurable:!0}),e.prototype.BIsServerMessage=function(){return null!=this.eServerMsgType&&0!=this.eServerMsgType},e.prototype.BIsInvite=function(){return 5==this.eServerMsgType},e.prototype.GetSlashCommand=function(){return this.m_strSlashCommand},e.prototype.BIsOlderThan=function(e){return this.rtTimestamp<e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal<e.unOrdinal},e.prototype.BIsNewerThan=function(e){return this.rtTimestamp>e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal>e.unOrdinal},e.prototype.HasUserContent=function(){return!this.m_bNoUserContent},e.prototype.HandleSpecialMessage=function(e){return"+1"==e?(this.m_bNoUserContent=!0,"[plusone][/plusone]"):e},e.prototype.OnAnimationEnd=function(){this.eAnimationState=r.None},Object(a.c)([s.A],e.prototype,"rtTimestamp",void 0),Object(a.c)([s.A],e.prototype,"unOrdinal",void 0),Object(a.c)([s.A],e.prototype,"eDeleteState",void 0),Object(a.c)([s.A],e.prototype,"eAnimationState",void 0),Object(a.c)([s.A],e.prototype,"strServerMsgAppCustomLocalized",void 0),e}(),h=function(e){function t(n,o,r){var a=e.call(this,n,o,-1,r)||this;return a.eErrorSending=i.None,a.m_bServerAcknowledged=!1,a.strMessageObservable=a.HandleSpecialMessage(r),a.m_iLocalEchoID=t.sm_iLocalEchoID++,a}return Object(a.d)(t,e),Object.defineProperty(t.prototype,"strMessage",{get:function(){return this.strMessageObservable},set:function(e){this.strMessageObservable=this.HandleSpecialMessage(e)},enumerable:!1,configurable:!0}),t.prototype.BIsLocalEcho=function(){return!0},t.prototype.UniqueKey=function(){return this.m_bServerAcknowledged?e.prototype.UniqueKey.call(this):"localecho_"+this.m_iLocalEchoID},t.prototype.BHasServerAcknowledged=function(){return this.m_bServerAcknowledged},t.prototype.OnServerAcknowledged=function(){this.m_bServerAcknowledged=!0},t.sm_iLocalEchoID=0,Object(a.c)([s.A],t.prototype,"eErrorSending",void 0),Object(a.c)([s.A],t.prototype,"strMessageObservable",void 0),Object(a.c)([s.A],t.prototype,"m_bServerAcknowledged",void 0),Object(a.c)([s.i],t.prototype,"OnServerAcknowledged",null),t}(d),f=function(e){function t(n,o,r){return e.call(this,n,o,++t.m_nOrdinal,r)||this}return Object(a.d)(t,e),t.m_nOrdinal=0,t}(d);function _(e){switch(e){case 1:case 5:case 2:case 3:case 4:case 9:case 10:case 11:return!0}return!1}var g=function(){function e(){this.m_rgMessageBlocks=s.A.array([],{deep:!1}),this.Clear()}return Object.defineProperty(e.prototype,"message_blocks",{get:function(){return this.m_rgMessageBlocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time_passes_index",{get:function(){return this.m_iIndexLastTimePassesGap},enumerable:!1,configurable:!0}),e.prototype.Clear=function(){this.m_rgMessageBlocks.clear(),this.m_rgMessageBlocks.push(new b),this.m_iIndexLastTimePassesGap=void 0},e.prototype.AppendMessage=function(e){var t=this.m_rgMessageBlocks[this.m_rgMessageBlocks.length-1];if(!t.BCanAccumulateMessage(e)){var n=t;t=new b,this.m_rgMessageBlocks.push(t),n.SetNextBlock(t),e.rtTimestamp-n.GetRTimeLastMessage()>=3600&&(n.GetRTimeMidnightBeforeBlock()==l.f.GetLocalMidnightInRTime32(e.rtTimestamp)?this.m_iIndexLastTimePassesGap=this.m_rgMessageBlocks.length-1:this.m_iIndexLastTimePassesGap=void 0)}t.AppendMessage(e)},e.prototype.BuildMessageBlocks=function(e){this.Clear();for(var t=0,n=e;t<n.length;t++){var o=n[t];this.AppendMessage(o)}},e.prototype.AppendNewMessage=function(e){this.AppendMessage(e)},e.prototype.RemoveLocalMessage=function(e){for(var t=0,n=this.m_rgMessageBlocks;t<n.length;t++){if(n[t].RemoveLocalMessage(e))return!0}return!1},e.prototype.RemoveOldestMessages=function(e){for(var t=0;e>0&&!(t>=this.m_rgMessageBlocks.length);){if((r=this.m_rgMessageBlocks[t].messages).length>e)break;e-=r.length,t++}if(0==t)return null;for(var n=null,o=t-1;o>=0;o--){var r;if(0!=(r=this.m_rgMessageBlocks[o].messages).length){n=r[r.length-1];break}}return this.m_rgMessageBlocks.splice(0,t),n},Object(a.c)([s.A],e.prototype,"m_iIndexLastTimePassesGap",void 0),Object(a.c)([s.i],e.prototype,"BuildMessageBlocks",null),Object(a.c)([s.i],e.prototype,"AppendNewMessage",null),Object(a.c)([s.i],e.prototype,"RemoveLocalMessage",null),Object(a.c)([s.i],e.prototype,"RemoveOldestMessages",null),e}(),b=function(){function e(){this.m_rgMessages=[],this.m_bMessageBlockIsOnlyEmotes=!0}return e.prototype.CreateVirtualSplitOnTimestamp=function(t){var n=new e,o=new e;n.SetNextBlock(o),o.SetNextBlock(this.m_nextBlock);for(var r=0,i=this.m_rgMessages;r<i.length;r++){var a=i[r];a.rtTimestamp<t?n.AppendMessage(a):o.AppendMessage(a)}return[n,o]},e.prototype.UniqueKey=function(){return this.m_rgMessages.length?this.m_rgMessages[0].UniqueKey():"EmptyBlock"},Object.defineProperty(e.prototype,"messages",{get:function(){return this.m_rgMessages},enumerable:!1,configurable:!0}),e.prototype.SetNextBlock=function(e){this.m_nextBlock=e},Object.defineProperty(e.prototype,"is_last_block",{get:function(){return void 0===this.m_nextBlock},enumerable:!1,configurable:!0}),e.prototype.GetRTimeMidnightBeforeBlock=function(){return this.m_rtMidnightBeforeBlock},e.prototype.GetRTimeMidnightBeforeNextBlock=function(){return this.m_nextBlock?this.m_nextBlock.GetRTimeMidnightBeforeBlock():l.f.GetLocalMidnightInRTime32()},e.prototype.GetRTimeLastMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp:c.g},e.prototype.GetRTimeFirstMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[0].rtTimestamp:0},e.prototype.AppendMessage=function(e){"/me"===e.GetSlashCommand()||(this.m_bMessageBlockIsOnlyEmotes=!1),this.m_rgMessages.length||(this.m_rtMidnightBeforeBlock=l.f.GetLocalMidnightInRTime32(e.rtTimestamp)),this.m_rgMessages.push(e)},e.prototype.BCanAccumulateMessage=function(e){if(!this.m_rgMessages.length)return!0;var t=this.m_rgMessages[0].unAccountID,n=this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp,o=this.m_rgMessages[this.m_rgMessages.length-1];return e.BIsServerMessage()==this.m_rgMessages[0].BIsServerMessage()&&(!(!e.BIsServerMessage()||e.BIsInvite()||this.m_rgMessages[0].BIsInvite())||!(!t||t!=e.unAccountID)&&(e.BIsInvite()==this.m_rgMessages[0].BIsInvite()&&(!(e.rtTimestamp-n>300)&&((!this.m_bMessageBlockIsOnlyEmotes||"/me"===e.GetSlashCommand())&&(!(e instanceof f||o instanceof f)&&!(l.f.GetLocalMidnightInRTime32(e.rtTimestamp)>this.m_rtMidnightBeforeBlock))))))},e.prototype.BIsInvite=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0].BIsInvite()},e.prototype.BIsServerMsg=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0].BIsServerMessage()&&!this.m_rgMessages[0].BIsInvite()},e.prototype.RemoveLocalMessage=function(e){var t=this.m_rgMessages.findIndex((function(t){return t.BIsLocalEcho()&&t.UniqueKey()===e.UniqueKey()}));return-1!==t&&(this.m_rgMessages.splice(t,1),!0)},Object(a.c)([s.A.shallow],e.prototype,"m_rgMessages",void 0),Object(a.c)([s.A.shallow],e.prototype,"m_nextBlock",void 0),Object(a.c)([s.i],e.prototype,"CreateVirtualSplitOnTimestamp",null),e}()},"/IDK":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"p",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"s",(function(){return p})),n.d(t,"r",(function(){return u})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return d})),n.d(t,"q",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"t",(function(){return _})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"l",(function(){return y})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return C})),n.d(t,"m",(function(){return O}));var o=n("UqDm");n("XaMz");function r(e){if(!(e.clientX||e.clientY||e.screenX||e.screenY))return!0;if(e.relatedTarget)return!i(e.currentTarget,e.relatedTarget);var t=e.currentTarget.getBoundingClientRect();return(e.clientX<=t.left||e.clientX>=t.right||e.clientY<=t.top||e.clientY>=t.bottom)&&(console.log(e.clientX+" <= "+t.left+" || "+e.clientX+" >= "+t.right+" ||\n\t\t\t\t"+e.clientY+" <= "+t.top+" || "+e.clientY+" >= "+t.bottom),!0)}function i(e,t){for(;t;){if(t.parentNode.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(t=t.parentNode.host),t==e)return!0;t=t.parentElement}return!1}function a(e,t){for(;t;)if((t=t.parentElement)==e)return!0;return!1}function s(e){if(!window.getSelection)return!1;for(var t=window.getSelection(),n=0,o=0;o<t.rangeCount;o++){var r=t.getRangeAt(o);if(r.startOffset!=r.endOffset)i(e,r.commonAncestorContainer)&&n++}return t.rangeCount>0&&t.rangeCount==n}function c(e,t,n){var o=0,r=0;return t<e.left?o=e.left-t:t>e.right&&(o=t-e.right),n<e.top?r=e.top-n:n>e.bottom&&(r=n-e.bottom),Math.sqrt(o*o+r*r)}function l(e,t){return{width:t.width,height:t.height,top:e.screenTop+t.top,bottom:e.screenTop+t.bottom,left:e.screenLeft+t.left,right:e.screenLeft+t.right}}function p(e){var t=void 0;return e&&e.currentTarget&&(t=e.currentTarget.ownerDocument.defaultView),t}function u(e){var t=void 0;return e&&(t=e.ownerDocument.defaultView),t}function m(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{document.body.removeChild(t)}}function d(e){e.startsWith("steam://openurl/")&&(e=e.slice("steam://openurl/".length)),m(e)}function h(e){return e?0==e.clipboardData.files.length||e.clipboardData.types.some((function(e){return("text"==e||e.startsWith("text/"))&&"text/html"!==e}))?null:e.clipboardData.files[0]:null}function f(e){var t=e.ownerDocument;return t.fullscreen||t.webkitIsFullScreen||t.mozFullScreen||t.msFullscreenElement}function _(e,t){var n=e;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():t&&t.webkitSetPresentationMode?t.webkitSetPresentationMode("fullscreen"):n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}function g(e){var t=e.ownerDocument;t.cancelFullscreen?t.cancelFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()}var b=function(){function e(e){var t=this;this.m_bNeedSort=!1,this.m_bOffsetsInvalidated=!1,this.m_rgChildren=[],this.RecomputeVisibility=function(){var e=t.m_elParent.scrollTop-t.m_nBufferPx,n=t.m_elParent.scrollTop+t.m_elParent.clientHeight+t.m_nBufferPx;t.EnsureSort();for(var o=0,r=t.m_rgChildren;o<r.length;o++){var i=r[o];if(!(i.yOffset<e)){if(i.yOffset>n)break;i.fnCallback(!0)}}t.m_nLastYMin=e,t.m_nLastYMax=n},this.m_nBufferPx=e}return e.prototype.SetParent=function(e){this.m_elParent&&this.m_elParent.ownerDocument.defaultView.removeEventListener("resize",this.RecomputeVisibility),this.m_elParent=e,this.m_elParent&&this.m_elParent.ownerDocument.defaultView.addEventListener("resize",this.RecomputeVisibility)},e.prototype.InvalidateOffsetsAndRecompute=function(){this.m_bOffsetsInvalidated=!0,this.RecomputeVisibility()},e.prototype.EnsureSort=function(){if(this.m_bOffsetsInvalidated){for(var e=0;e<this.m_rgChildren.length;e++)this.m_rgChildren[e].yOffset=this.m_rgChildren[e].element.offsetTop;this.m_bOffsetsInvalidated=!1}this.m_bNeedSort&&(this.m_rgChildren.sort((function(e,t){return e.yOffset-t.yOffset})),this.m_bNeedSort=!1)},e.prototype.RegisterChild=function(e,t){this.m_rgChildren.push({element:e,yOffset:e.offsetTop,fnCallback:t}),this.m_bNeedSort=!0,void 0!==this.m_nLastYMin&&void 0!==this.m_nLastYMax&&e.offsetTop>=this.m_nLastYMin&&e.offsetTop<=this.m_nLastYMax&&t(!0)},e.prototype.UnregisterChild=function(e){o.d(this.m_rgChildren,(function(t){return t.element==e}))},e}();function v(e,t){var n=e;return n.lastModifiedDate=new Date,n.name=t||Date.now().toString(),e}function y(e,t,n){for(var o=t.parentElement;o&&o!==e&&!o.hasAttribute(n);)o=o.parentElement;return o||e}function S(e,t){for(var n=[],o=Array.prototype.slice.call(e.children).reverse();o.length>0;){var r=o.pop();r.hasAttribute(t)?n.push(r):o.push.apply(o,Array.prototype.slice.call(r.children).reverse())}return n}function C(e){for(var t=e.parentElement;t;){var n=window.getComputedStyle(t).overflowY;if("scroll"==n||"auto"==n)break;t=t.parentElement}return t}function O(e,t){for(;e;){if(t(e))return e;e=e.parentElement}}},"/SYB":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=function(){function e(e){this.idGenerator=e||function(){return""}}return e.prototype.LOG=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&console.log.apply(console,Object(o.g)([this.idGenerator()+":"],e))},e.create=function(t,n){void 0===n&&(n=!1);var o=new e(t);return o.enabled=n,o.LOG.bind(o)},e}();function s(e){if(i.a.isCancel(e))return{strErrorMsg:"Action Cancelled:"+e,errorCode:52};if(void 0!==e.response&&e.response.data&&"object"==typeof e.response.data){if("msg"in e.response.data)return{strErrorMsg:e.response.data.msg,errorCode:e.response.data.success};if("err_msg"in e.response.data)return{strErrorMsg:e.response.data.err_msg,errorCode:e.response.data.success};if("message"in e.response.data)return{strErrorMsg:e.response.data.message,errorCode:e.response.data.success}}else{if(void 0!==e.success&&void 0!==e.msg)return{strErrorMsg:e.msg,errorCode:e.success};if(void 0!==e.success&&void 0!==e.message)return{strErrorMsg:e.message,errorCode:e.success};if(void 0!==e.success&&void 0!==e.err_msg)return{strErrorMsg:e.err_msg,errorCode:e.success};console.error("GetMsgAndErrorCodeFromResponse: ",e)}return"status"in e?{strErrorMsg:"Unknown Error: "+e+"\nStatus Code:"+e.status,errorCode:2}:{strErrorMsg:"Unknown Error: "+e,errorCode:2}}},"/ZM5":function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return L}));var o=n("mrSG"),r=n("q1tI"),i=n("1w3K"),a=n("ljid"),s=n("e2SU"),c=n("hReu"),l=n("LAqV"),p=n("29iz"),u=n("gtB6"),m=n("+mma"),d=n("Hi0u"),h=n("2vnA"),f=n("okNM"),_=n("8o0Y"),g=n("EGkk"),b=n("oh5H"),v=n("1VtQ"),y=n("bbBM"),S=n("ieu3"),C=n("dpJ7"),O=n("/IDK"),I=n("20CD"),E=n("XaMz"),w=n("E7zH"),A=function(e){function t(t){var n=e.call(this,t)||this;return n.m_schHoverDelay=new w.b,n.state={bCollapsed:!1,bMouseHover:!1},n}return Object(o.d)(t,e),t.prototype.OnRoomsContextMenu=function(e){var t=this;if(this.props.groupView.GetGroup().BCanAdminChannel()){var n=e.currentTarget.ownerDocument.defaultView;Object(_.a)(r.createElement(g.c,null,r.createElement(g.d,{onSelected:function(){t.CreateTextChannel(n)}},Object(b.d)("#GroupSettings_Channels_CreateText")),r.createElement(g.d,{onSelected:function(){t.CreateVoiceChannel(n)}},Object(b.d)("#GroupSettings_Channels_CreateVoice"))),e)}},t.prototype.CreateTextChannel=function(e){Object(d.c)(r.createElement(D,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!0}),e)},t.prototype.CreateVoiceChannel=function(e){Object(d.c)(r.createElement(D,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!0}),e)},t.prototype.OnMouseEnter=function(e){var t=this;this.m_schHoverDelay.Schedule(400,(function(){t.setState({bMouseHover:!0})}))},t.prototype.OnMouseLeave=function(e){this.setState({bMouseHover:!1}),this.m_schHoverDelay.Cancel()},t.prototype.ToggleCollapseExpand=function(){var e=this.props.groupView;e.SetChannelListCollapsed(!e.isChannelListCollapsed)},t.prototype.render=function(){var e=this.props.groupView.GetGroup(),t=e.IsNamedGroupChat(),n=!1,o="chatRoomGroupNavColumn",i=this.props.groupView.isChannelListCollapsed;return 0!=e.voiceRoomList.length||t?i&&!this.state.bMouseHover&&(o+=" chatRoomGroupNavCollapsed"):(n=!0,o+=" defaultChatOnly"),this.props.inactive||n?r.createElement("div",{className:o}):r.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},r.createElement("div",{className:"chatRoomChannelGroups",onContextMenu:this.OnRoomsContextMenu},t&&r.createElement(T,{groupView:this.props.groupView}),r.createElement(j,{groupView:this.props.groupView}),(!i||this.state.bMouseHover)&&r.createElement("div",{className:"chatRoomGroupNavCollapseExpand",title:Object(b.d)(i?"#Tooltip_PinChannelList":"#Tooltip_UnpinChannelList"),onClick:this.ToggleCollapseExpand},r.createElement(s.P,{bPinned:!i}))),r.createElement("div",{className:"disconnectBlocker"}))},Object(o.c)([v.a],t.prototype,"OnRoomsContextMenu",null),Object(o.c)([v.a],t.prototype,"OnMouseEnter",null),Object(o.c)([v.a],t.prototype,"OnMouseLeave",null),Object(o.c)([v.a],t.prototype,"ToggleCollapseExpand",null),t=Object(o.c)([f.a],t)}(r.Component),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnSubmit=function(){var e=this,t=this.m_refInput&&this.m_refInput.value;t&&this.props.groupView.GetGroup().CreateChatRoom(t,this.props.bVoiceChannel).then((function(t){t&&(e.props.closeModal(),e.props.bJoinChannel&&(e.props.bVoiceChannel?t.StartVoiceChat():e.props.groupView.SelectChat(t.GetRoomID())))})).catch((function(t){Object(m.c)(e.props.ownerWin,Object(b.d)("#Generic_Error"),Object(b.d)("#Chat_CreateChatRoom_GenericError")),e.props.closeModal()}))},t.prototype.render=function(){var e=this;return r.createElement(d.a,{onEscKeypress:this.props.closeModal},r.createElement(a.h,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},r.createElement(a.m,null,Object(b.d)(this.props.bVoiceChannel?"#GroupSettings_Channels_CreateVoice":"#GroupSettings_Channels_CreateText")),r.createElement(a.b,null,r.createElement(a.o,{ref:function(t){e.m_refInput=t},autoFocus:!0,label:Object(b.d)("#Chat_SaveVoiceRoom_Name")})),r.createElement(a.j,null,r.createElement(a.s,{onCancel:this.props.closeModal}))))},Object(o.c)([v.a],t.prototype,"OnSubmit",null),t}(r.Component);var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCreateNewTextChannel=function(e){var t,n,o,i=Object(O.s)(e);this.props.groupView.GetGroup().BCanAdminChannel()&&(t=i,n=this.props.groupView,o=!1,Object(d.c)(r.createElement(D,{ownerWin:t,groupView:n,bVoiceChannel:o,bJoinChannel:!0}),t,"CreateChatChannelDialog",{strTitle:Object(b.d)("#GroupSettings_Channels_CreateText"),popupWidth:800,popupHeight:400},Object(c.g)(t)))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var e=this,t=this.props.groupView,n=t.GetGroup().textRoomList,o=t.GetGroup().BCanAdminChannel();t.isChannelListCollapsed;return r.createElement("div",{className:"chatRoomTextChannelsGroup"},r.createElement("div",{className:"ChannelTypeTitle",title:Object(b.d)("#Tooltip_TextChannel"),onClick:this.OnCreateNewTextChannel},r.createElement("div",{className:"ChannelTypeLabel"+(o?"":" NoPermission"),title:o?Object(b.d)("#Tooltip_TextChannelCreate"):Object(b.d)("#Tooltip_NoPermissionChannelCreate")},o?Object(b.d)("#Chat_AddTextChat"):Object(b.d)("#Chat_CreateTextChannel_DefaultName")),r.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(b.d)("#Tooltip_TextChannelCreate")},r.createElement(s.R,null))),n.map((function(n){return r.createElement(M,{key:n.unique_id,chat:n,bRenameActive:t.IsRoomRenameActive(n.GetRoomID()),bActiveChat:n==t.GetActiveChatView().chat,bDefaultRoom:n==t.GetGroup().GetDefaultChatRoom(),onStartRename:e.OnStartChannelRename,onRename:e.OnChannelRename,onEndRename:e.OnEndChannelRename})})))},Object(o.c)([v.a],t.prototype,"OnCreateNewTextChannel",null),Object(o.c)([v.a],t.prototype,"OnStartChannelRename",null),Object(o.c)([v.a],t.prototype,"OnChannelRename",null),Object(o.c)([v.a],t.prototype,"OnEndChannelRename",null),t=Object(o.c)([f.a],t)}(r.Component),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ToggleTextChat=function(){if(!this.props.bRenameActive){var e=l.f.UIStore.IsChatRoomGroupActive(Object(c.e)(this),this.props.chat.GetGroup()),t=l.f.UIStore.ShowAndOrActivateChatRoomGroup(Object(c.e)(this),this.props.chat.GetGroup(),!1),n=t.GetPopoverChatView();e&&n&&n.chat&&n.chat==this.props.chat?t.ClosePopoverChat():t.SelectChat(this.props.chat.GetRoomID())}},t.prototype.OnContextMenu=function(e){this.props.bRenameActive||Object(u.a)(Object(c.e)(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename)},t.prototype.render=function(){var e=this.props.chat,t="chatRoomTextChannel";this.props.bActiveChat&&(t+=" ActiveTextChannel");var n="chatRoomTextChannelName";this.props.bDefaultRoom&&(n+=" IsCommonsChannel");var o=this.props.bRenameActive&&!this.props.chat.GetVoiceAllowed();return r.createElement("div",{className:t,onClick:this.ToggleTextChat,onContextMenu:this.OnContextMenu},r.createElement(S.b,{chat:e}),r.createElement("div",{className:"chatRoomTextChannelIcon"},r.createElement(s.gb,null)),!o&&r.createElement("div",{className:n},e.BIsDefaultRoom()?Object(b.d)("#Chat_DefaultChannelName"):e.name),!this.props.bDefaultRoom&&o&&r.createElement(G,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}))},Object(o.c)([v.a],t.prototype,"ToggleTextChat",null),Object(o.c)([v.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([f.a],t)}(r.Component),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.CreateVoiceRoom=function(){this.props.groupView.GetGroup().CreateAndJoinTempVoiceRoom()},t.prototype.OnVoiceRoomSelected=function(e){this.props.groupView.GetRenameRoomID()==e.GetRoomID()||(l.f.ChatStore.VoiceChat.GetActiveVoiceChatID()==e.GetRoomID()||(this.props.groupView.ClosePopoverChat(),e.StartVoiceChat()))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var e=this,t=this.props.groupView,n=t.GetGroup().voiceRoomList;return r.createElement("div",{className:"chatRoomVoiceChannelsGroup"},r.createElement("div",{className:"ChannelTypeTitle",title:Object(b.d)("#Tooltip_VoiceChannelCreate"),onClick:this.CreateVoiceRoom},r.createElement("div",{className:"ChannelTypeLabel"},Object(b.d)("#Chat_AddVoiceChat")),r.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(b.d)("#Tooltip_VoiceChannelCreate")},r.createElement(s.R,null))),n.map((function(n){return r.createElement(L,{key:n.unique_id,context:"VoiceRoomsGroup",chat:n,bRenameActive:t.GetRenameRoomID()==n.GetRoomID(),onSelect:function(){e.OnVoiceRoomSelected(n)},onStartRename:e.OnStartChannelRename,onRename:e.OnChannelRename,onEndRename:e.OnEndChannelRename})})))},Object(o.c)([v.a],t.prototype,"CreateVoiceRoom",null),Object(o.c)([v.a],t.prototype,"OnVoiceRoomSelected",null),Object(o.c)([v.a],t.prototype,"OnStartChannelRename",null),Object(o.c)([v.a],t.prototype,"OnChannelRename",null),Object(o.c)([v.a],t.prototype,"OnEndChannelRename",null),t=Object(o.c)([f.a],t)}(r.Component),L=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dropToInviteFriend:void 0,bDropConfirmationNotice:!1},n}return Object(o.d)(t,e),t.prototype.OnContextMenu=function(e){this.props.bRenameActive||Object(u.a)(Object(c.e)(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename),e.preventDefault(),e.stopPropagation()},t.prototype.InviteToChat=function(e){Object(I.b)(Object(c.e)(this,e),e.currentTarget.ownerDocument.defaultView,this.props.chat.GetGroup(),this.props.chat),e.stopPropagation()},t.prototype.OnDragEnter=function(e,t){if(Object(E.a)(e&&"friend"==e.type,"Invalid type passed to VoiceRoom.OnDragEnter"),e){var n=e;n.friend&&this.setState({dropToInviteFriend:n.friend})}return!0},t.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){var n=this;if(Object(E.a)(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var o=e;if(o.friend&&o.friend!=l.f.FriendStore.self){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),c.h.DragDropManager.SetDropConsumed();var r=t.currentTarget.ownerDocument.defaultView;this.props.chat.GetGroup().BIsUserGroupMember(o.friend)?(this.props.chat.GetGroup().InviteFriend(o.friend.accountid,this.props.chat),this.setState({bDropConfirmationNotice:!0}),this.m_dropInviteInvitee=o.friend,this.m_dropConfirmationInterval=window.setInterval((function(){n.setState({bDropConfirmationNotice:!1}),window.clearInterval(n.m_dropConfirmationInterval)}),1200)):Object(C.k)({invitee:o.friend,chatview:null,invitedto:this.props.chat},Object(c.e)(this,t),r)}}},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.GetFriendContext=function(){var e=this.props.chat&&this.props.chat.GetGroup().readyToRender?this.props.chat:null;return this.m_FriendContext&&this.m_FriendContext.chat==e||(this.m_FriendContext={chat:e}),this.m_FriendContext},t.prototype.render=function(){var e=this,t=this.props.chat.GetGroup(),n=this.props.chat==t.GetDefaultChatRoom(),a=l.f.ChatStore.VoiceChat.GetActiveVoiceChatID()==this.props.chat.GetRoomID(),c=l.f.CMInterface.steamid.GetAccountID(),u=l.f.FriendStore.GetPlayer(c),m=this.props.chat.voice_active_contains_only_self,d="emptyChannelNotice",h=this.props.chat.voice_active_member_list.member_list.map((function(t){return r.createElement(i.CSSTransition,{key:t.accountid,classNames:"friend-anim",timeout:320},r.createElement(y.c,{friend:t,key:t.accountid,context:e.GetFriendContext(),showVoiceLevel:!0,bInVoiceList:!0}))})),f=this.props.chat.voice_active_contains_friends;a&&!this.props.chat.voice_active_contains_self&&(0==h.length&&(m=!0),f=!0,h.push(r.createElement(i.CSSTransition,{key:c,classNames:"friend-anim",timeout:320},r.createElement(y.c,{friend:u,key:c,context:this.GetFriendContext(),showVoiceLevel:!0}))));var _=["chatRoomVoiceChannel"];a&&_.push("ActiveVoiceChannel"),f||"ChatRoomList"!=this.props.context||_.push("MinimizeMemberList"),this.state.dropToInviteFriend&&_.push("voiceRoomActiveDrop"),a&&m&&(d+=" Visible");var g=this.props.chat.IsUnsavedVoiceChannel(),v=this.props.chat.name;return r.createElement(p.a,Object(o.a)({className:_.join(" "),onClick:this.props.onSelect},this.GetDragDropProps()),r.createElement("div",{className:"chatRoomVoiceChannelIconGlow"}),r.createElement("div",{className:"chatRoomVoiceChannelNameContainer",onContextMenu:this.OnContextMenu},r.createElement("div",{className:"chatRoomVoiceChannelIcon"},r.createElement(s.nb,null)),!this.props.bRenameActive&&r.createElement("div",{className:"chatRoomVoiceChannelName"+(g?" unsavedVoiceChannel":"")},v),this.props.bRenameActive&&r.createElement(G,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}),!this.props.bRenameActive&&r.createElement(r.Fragment,null,r.createElement("div",{onContextMenu:this.OnContextMenu,onClick:this.OnContextMenu,className:"VoiceControlPanelButton chatPinRoom",title:Object(b.d)("#Chat_ChannelOptions")},r.createElement(s.p,null)))),r.createElement("div",{className:"VoiceChannelParticipants CompactFriendsList"},!f&&h,f&&r.createElement(i.TransitionGroup,{enter:!0,exit:!0},h)),r.createElement("div",{className:d},Object(b.d)("#Chat_VoiceEmptyChannel")),r.createElement(y.a,{name:v,chat:this.props.chat,nostatus:!0}),!n&&r.createElement(M,{chat:this.props.chat,bRenameActive:!1,bActiveChat:!1,bDefaultRoom:!1}),r.createElement("div",{className:"ScratchPadConnect"}),this.state.bDropConfirmationNotice&&r.createElement("div",{className:"dropConfirmationNotice"+(this.state.bDropConfirmationNotice?" Active":"")},r.createElement("div",{className:"dropConfirmationLabel"},r.createElement("img",{className:"avatar",src:this.m_dropInviteInvitee.persona.avatar_url_medium}))),r.createElement("div",{className:"dropTargetBox"}))},Object(o.c)([v.a],t.prototype,"OnContextMenu",null),Object(o.c)([v.a],t.prototype,"InviteToChat",null),Object(o.c)([v.a],t.prototype,"OnDragEnter",null),Object(o.c)([v.a],t.prototype,"OnDragLeave",null),Object(o.c)([v.a],t.prototype,"OnDragOver",null),Object(o.c)([v.a],t.prototype,"OnDrop",null),t=Object(o.c)([f.a],t)}(r.Component),G=function(e){function t(t){var n=e.call(this,t)||this;return n.m_strValue="",n.m_strValue=n.props.chat.name,n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.chat!==this.props.chat&&(this.m_strValue=this.props.chat.name)},t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.OnGlobalKeyDown,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.OnGlobalKeyDown,!1)},t.prototype.BindInputRef=function(e){e&&e.focus()},t.prototype.OnChange=function(e){this.m_strValue=e.target.value},t.prototype.OnSubmit=function(e){this.SubmitAndClose(),e.preventDefault()},t.prototype.OnGlobalKeyDown=function(e){27==e.keyCode&&this.Close()},t.prototype.OnBlur=function(e){this.SubmitAndClose()},t.prototype.SubmitAndClose=function(){this.props.onRename(this.props.chat.GetRoomID(),this.m_strValue),this.Close()},t.prototype.Close=function(){this.props.onEndRename()},t.prototype.render=function(){return r.createElement("form",{className:"RenameChatRoomInline",onSubmit:this.OnSubmit},r.createElement("input",{ref:this.BindInputRef,type:"text",value:this.m_strValue,onChange:this.OnChange,onBlur:this.OnBlur}))},Object(o.c)([h.A],t.prototype,"m_strValue",void 0),Object(o.c)([v.a],t.prototype,"BindInputRef",null),Object(o.c)([v.a],t.prototype,"OnChange",null),Object(o.c)([v.a],t.prototype,"OnSubmit",null),Object(o.c)([v.a],t.prototype,"OnGlobalKeyDown",null),Object(o.c)([v.a],t.prototype,"OnBlur",null),t=Object(o.c)([f.a],t)}(r.Component)},"/edK":function(e,t,n){e.exports={General:"chatroomgroupsettings_General_19Qfz",Avatar:"chatroomgroupsettings_Avatar_R-sn3",AvatarAndUser:"chatroomgroupsettings_AvatarAndUser_2xLKr",NoIconLabel:"chatroomgroupsettings_NoIconLabel_o2amd",ChannelsButtons:"chatroomgroupsettings_ChannelsButtons_2iMyG",Notification:"chatroomgroupsettings_Notification_235kw",LeaveButton:"chatroomgroupsettings_LeaveButton_3OGY7",PermissionsEdit:"chatroomgroupsettings_PermissionsEdit_12equ",Back:"chatroomgroupsettings_Back_xsnh9",PermissionsGroup:"chatroomgroupsettings_PermissionsGroup_1EzhI",PermissionToggle:"chatroomgroupsettings_PermissionToggle_qmDqN",PermissionsDescription:"chatroomgroupsettings_PermissionsDescription_21ml5",RoleNameHeader:"chatroomgroupsettings_RoleNameHeader__O_NZ",FixedRoleName:"chatroomgroupsettings_FixedRoleName_4ZaQ0"}},"0N1H":function(e,t,n){"use strict";function o(e){return 3==e||6==e}function r(e){return 5==e||6==e}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"p",(function(){return i})),n.d(t,"q",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return c})),n.d(t,"o",(function(){return l})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return u})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return _})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return v}));var i=1,a=4,s=750,c=799,l=7,p=250820,u=330050,m=358510,d=366490,h="18446744073709551615",f=0,_=2147483647;function g(e,t){switch(void 0===t&&(t="en"),e){case 0:return"en";case 1:return"de";case 2:return"fr";case 3:return"it";case 4:return"ko";case 5:return"es";case 6:return"zn-cn";case 7:return"zn-tw";case 8:return"ru";case 9:return"th";case 10:return"ja";case 11:return"pt";case 12:return"pl";case 13:return"da";case 14:return"nl";case 15:return"fi";case 16:return"no";case 17:return"sv";case 18:return"hu";case 19:return"cs";case 20:return"ro";case 21:return"tr";case 25:return"ar";case 22:return"pt-br";case 23:return"bg";case 24:return"el";case 26:return"uk";case 27:return"es-419";case 28:return"vn";default:return t}}function b(e,t){switch(void 0===t&&(t=""),e){case 0:return"english";case 1:return"german";case 2:return"french";case 3:return"italian";case 4:return"korean";case 5:return"spanish";case 6:return"schinese";case 7:return"tchinese";case 8:return"russian";case 9:return"thai";case 10:return"japanese";case 11:return"portuguese";case 12:return"polish";case 13:return"danish";case 14:return"dutch";case 15:return"finnish";case 16:return"norwegian";case 17:return"swedish";case 18:return"hungarian";case 19:return"czech";case 20:return"romanian";case 21:return"turkish";case 25:return"arabic";case 22:return"brazilian";case 23:return"bulgarian";case 24:return"greek";case 26:return"ukrainian";case 27:return"latam";case 28:return"vietnamese";default:return t}}function v(e,t){switch(void 0===t&&(t=0),e){case"english":return 0;case"german":return 1;case"french":return 2;case"italian":return 3;case"korean":case"koreana":return 4;case"spanish":return 5;case"schinese":return 6;case"tchinese":return 7;case"russian":return 8;case"thai":return 9;case"japanese":return 10;case"portuguese":return 11;case"polish":return 12;case"danish":return 13;case"dutch":return 14;case"finnish":return 15;case"norwegian":return 16;case"swedish":return 17;case"hungarian":return 18;case"czech":return 19;case"romanian":return 20;case"turkish":return 21;case"arabic":return 25;case"brazilian":return 22;case"bulgarian":return 23;case"greek":return 24;case"ukrainian":return 26;case"latam":return 27;case"vietnamese":return 28;default:return t}}},"0wLp":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("mrSG"),r=n("q1tI"),i=n("e2SU"),a=n("1VtQ"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={maximized:n.BIsMaximized()},n}return Object(o.d)(t,e),t.prototype.BIsMaximized=function(){var e=this.props.popup.screen.availWidth-this.props.popup.innerWidth,t=this.props.popup.screen.availHeight-this.props.popup.innerHeight;return 0===e&&0===t},t.prototype.componentDidMount=function(){this.props.popup.addEventListener("resize",this.UpdateMaximizeState)},t.prototype.componentWillUnmount=function(){this.props.popup.removeEventListener("resize",this.UpdateMaximizeState)},t.prototype.UpdateMaximizeState=function(){var e=this.BIsMaximized();e!=this.state.maximized&&this.setState({maximized:e})},t.prototype.render=function(){var e=this.props.popup,t="title-area-icon";this.state.maximized?t+=" restoreButton":t+=" maximizeButton";var n="TitleBar title-area";return this.props.className&&(n=n+" "+this.props.className),r.createElement("div",{className:n,style:this.props.style},r.createElement("div",{className:"title-area-highlight"}),r.createElement("div",{className:"title-area-children"},this.props.children),!this.props.hideActions&&r.createElement("div",{className:"title-bar-actions"},r.createElement("div",{className:"title-area-icon closeButton",onClick:function(){e&&e.close()}},r.createElement(i.qb,null)),!this.props.hideMinMax&&r.createElement("div",{className:t,onClick:function(){e.SteamClient.Window.ToggleMaximize()}},this.state.maximized&&r.createElement(i.V,null),!this.state.maximized&&r.createElement(i.H,null)),!this.props.hideMinMax&&r.createElement("div",{className:"title-area-icon minimizeButton",onClick:function(){e.SteamClient.Window.Minimize()}},r.createElement(i.K,null))))},Object(o.c)([a.a],t.prototype,"UpdateMaximizeState",null),t}(r.Component)},"1K16":function(e,t,n){e.exports={Main:"basicpartnereventrender_Main_Wfrc1"}},"1KZt":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("mrSG"),r=n("1n9R"),i=n("2vnA"),a=function(){function e(){this.m_bEmoticonListRequested=!1,this.m_bInitialized=!1,this.m_rgEmoticons=[],this.m_rgFlairs=[],this.m_rgRecentEmoticons=void 0,this.m_rgStickers=[],this.m_rgEffects=[],this.m_rtLastStickerOrEffect=Number.MIN_SAFE_INTEGER}return e.GetEmoticonURL=function(e,t){return t?r.c.COMMUNITY_CDN_URL+"economy/emoticonlarge/"+e:r.c.COMMUNITY_CDN_URL+"economy/emoticon/"+e},e.GetEmoticonReplaceRegex=function(){return e.sm_EmoticonRegex},e.prototype.SearchEmoticons=function(e,t,n){function o(e){return e.name_normalized||e.name}void 0===t&&(t=25),void 0===n&&(n=!0),this.UpdateEmoticonList(),e=e.toLocaleLowerCase();var r=this.recent_emoticons.filter((function(t){return!e||o(t).startsWith(e)})),i=this.recent_emoticons.filter((function(t){return!n&&-1!==o(t).indexOf(e)})),a=this.m_rgEmoticons.filter((function(t){return!e||o(t).startsWith(e)})),s=this.m_rgEmoticons.filter((function(t){return!n&&-1!==o(t).indexOf(e)})),c=new Set,l=[];function p(e,n,r){return!(l.length>=t)&&(c.has(e)||(c.add(e),l.push({name:o(e),recent:n,new:r})),!0)}function u(e,t,n){for(var o=0,r=e;o<r.length;o++){var i=r[o];if(!p(i,t,n(i)))break}}return u(r,!0,(function(e){return!(e.last_used||!e.time_received)})),u(a,!1,(function(){return!1})),u(i,!0,(function(e){return!(e.last_used||!e.time_received)})),u(s,!1,(function(){return!1})),l},Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!1,configurable:!0}),e.prototype.GetTimeReceivedNewestEmoticon=function(){return this.UpdateEmoticonList(),this.m_rtMostRecentEmoticon},e.prototype.GetTimeReceivedForStickerOrEffect=function(){return this.m_rtLastStickerOrEffect},e.prototype.UpdateEmoticonList=function(){this.m_bInitialized||this.RequestEmoticonList()},Object.defineProperty(e.prototype,"emoticon_list",{get:function(){return this.UpdateEmoticonList(),this.m_rgEmoticons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flair_list",{get:function(){return this.UpdateEmoticonList(),this.m_rgFlairs},enumerable:!1,configurable:!0}),e.prototype.GetStickerList=function(){return this.m_rgStickers},e.prototype.GetEffectList=function(){return this.m_rgEffects},e.prototype.GetFlairListByGroupID=function(e){return this.m_rgFlairs.filter((function(t){return t.flairGroupID===e}))},Object.defineProperty(e.prototype,"recent_emoticons",{get:function(){return void 0===this.m_rgRecentEmoticons&&this.BuildRecentEmoticonList(),this.m_rgRecentEmoticons},enumerable:!1,configurable:!0}),e.prototype.TrackEmoticonUsage=function(e,t){if(this.m_bInitialized){for(var n,o=new Map,r=/\[emoticon\]([^[]*)/g;n=r.exec(e);){var i=o.get(n[1])||0;o.set(n[1],i+1)}var a=!1;if(o.size){if(void 0!==this.m_rgRecentEmoticons)for(var s=0,c=this.m_rgRecentEmoticons;s<c.length;s++){var l=c[s];o.has(l.name)&&(l.last_used=t,l.use_count+=o.get(l.name),o.delete(l.name),l.time_received&&(a=!0,delete l.time_received))}if(o.size)for(var p=0,u=this.m_rgEmoticons;p<u.length;p++){l=u[p];o.has(l.name)&&(l.last_used=t,l.use_count+=o.get(l.name),delete l.time_received,void 0!==this.m_rgRecentEmoticons&&this.m_rgRecentEmoticons.push(l))}if(void 0!==this.m_rgRecentEmoticons&&(this.SortRecentEmoticons(),a)){this.m_rtMostRecentEmoticon=void 0;for(var m=0,d=this.m_rgRecentEmoticons;m<d.length;m++){!(l=d[m]).last_used&&l.time_received&&(!this.m_rtMostRecentEmoticon||l.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=l.time_received)}}}}},e.prototype.RequestEmoticonList=function(){!this.m_bEmoticonListRequested&&this.BInitialized()&&(this.m_bEmoticonListRequested=!0,this.RequestEmoticonListInternal())},e.prototype.BuildRecentEmoticonList=function(){this.m_rgRecentEmoticons=[];for(var e=this.GetServerTime()-604800,t=0,n=this.m_rgEmoticons;t<n.length;t++){var o=n[t];(o.last_used||o.time_received&&o.time_received>e)&&this.m_rgRecentEmoticons.push(o)}this.SortRecentEmoticons()},e.prototype.SortRecentEmoticons=function(){this.m_rgRecentEmoticons.sort((function(e,t){return(t.last_used||t.time_received)-(e.last_used||e.time_received)})),this.m_rgRecentEmoticons=this.m_rgRecentEmoticons.slice(0,50)},e.prototype.OnEmoticonListReceived=function(e){this.m_rgFlairs=[],this.m_rgEmoticons=[],this.m_rgRecentEmoticons=void 0,this.m_rtMostRecentEmoticon=void 0;for(var t=this.GetServerTime()-604800,n=0,o=e;n<o.length;n++){var r=o[n],i=r.name;i.startsWith("^")?this.m_rgFlairs.push({name:i.match(new RegExp(/:(.*):/))[1],flairGroupID:i.match(new RegExp(/\^(.*)\^/))[1]}):(!r.last_used&&r.time_received>t?(!this.m_rtMostRecentEmoticon||r.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=r.time_received):delete r.time_received,this.m_rgEmoticons.push(r))}this.m_bInitialized=!0,this.m_bEmoticonListRequested=!1},e.sm_EmoticonRegex=new RegExp("ː([a-zA-Z0-9_\\-]+)ː","g"),Object(o.c)([i.A],e.prototype,"m_bInitialized",void 0),Object(o.c)([i.A],e.prototype,"m_rtMostRecentEmoticon",void 0),Object(o.c)([i.A],e.prototype,"m_rtLastStickerOrEffect",void 0),Object(o.c)([i.i],e.prototype,"TrackEmoticonUsage",null),e}()},"1VtQ":function(e,t,n){"use strict";function o(e,t,n){return{get:function(){var e=n.value.bind(this);return this.hasOwnProperty(t)||Object.defineProperty(this,t,{value:e}),e}}}function r(e,t,n){return[e,t,n]}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}))},"1n9R":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h}));n("mrSG");var o,r=n("/7KC"),i=n("YlSc"),a={EUNIVERSE:0,WEB_UNIVERSE:"",LANGUAGE:"english",SUPPORTED_LANGUAGES:[],COUNTRY:"",CDN_URL:"",MEDIA_CDN_COMMUNITY_URL:"",MEDIA_CDN_URL:"",COMMUNITY_CDN_URL:"",COMMUNITY_CDN_ASSET_URL:"",STORE_CDN_URL:"",PUBLIC_SHARED_URL:"",COMMUNITY_BASE_URL:"",CHAT_BASE_URL:"",STORE_BASE_URL:"",STORE_ICON_BASE_URL:"",IMG_URL:"",STEAMTV_BASE_URL:"",HELP_BASE_URL:"",PARTNER_BASE_URL:"",BASE_URL_STORE_CDN_ASSETS:"",IN_CLIENT:!1,USE_POPUPS:!1,IN_MOBILE:!1,IN_TENFOOT:!1,PLATFORM:"",SNR:"",LAUNCHER_TYPE:0,LOCAL_HOSTNAME:"",WEBAPI_BASE_URL:"",TOKEN_URL:"",BUILD_TIMESTAMP:0,PAGE_TIMESTAMP:0,get SESSIONID(){return function(){if(!Object(i.a)())return o||(o=p()),o;var e=Object(i.b)("sessionid");e||(e=p());return e}()},FRIENDSUI_BETA:!1,STEAM_TV:!1,DEV_MODE:!1,OFFLINE_MODE:!1,IN_LIBRARY:!1},s={logged_in:!1,steamid:"",accountid:0,account_name:"",token:void 0,token_use_id:void 0,webapi_token:"",authwgtoken:"",is_support:!1,is_limited:!1,short_url:"",country_code:""},c={steamid:"",clanid:0,listid:0},l={CLANSTEAMID:"",CLANACCOUNTID:0,ANNOUNCEMENT_GID:"",IMG_URL:"",APPID:0,VANITY_ID:"",IS_CREATOR_HOME:!1,IS_CURATOR:!1,IS_OGG:!1,CAN_UPLOAD_IMAGES:!1,HEADER_IMAGE:"",APP_NAME:"",HAS_ADULT_CONTENT:!1,HAS_ADULT_CONTENT_SEX:!1,HAS_ADULT_CONTENT_VIOLENCE:!1};function p(){var e=function(){for(var e="",t=0;t<24;t++)e+=Object(r.b)(0,35).toString(36);return e}();return Object(i.c)("sessionid",e,0),e}function u(e){void 0===e&&(e="webui_config");var t={},n=m("config",e);n&&(delete n.SESSIONID,Object.assign(a,n),t.config=!0);var o=m("userinfo",e);o&&(Object.assign(s,o),t.userConfig=!0);var r=m("broadcast",e);r&&(Object.assign(c,r),t.broadcastConfig=!0);var i=m("community",e);return i&&(Object.assign(l,i),t.communityConfig=!0),t}function m(e,t){var n;if(void 0===t&&(t="webui_config"),n="string"==typeof t?document.getElementById(t):t)try{return n.hasAttribute("data-"+e)?JSON.parse(n.getAttribute("data-"+e)):null}catch(e){console.error("Failed to parse config",e)}else console.error("Missing config element #",t)}function d(){var e=window.location.href;return e.startsWith(a.STORE_BASE_URL)?a.STORE_BASE_URL:e.startsWith(a.COMMUNITY_BASE_URL)?a.COMMUNITY_BASE_URL:e.startsWith(a.PARTNER_BASE_URL)?a.PARTNER_BASE_URL:e.startsWith(a.HELP_BASE_URL)?a.HELP_BASE_URL:e.startsWith(a.STEAMTV_BASE_URL)?a.STEAMTV_BASE_URL:""}function h(){var e=window.location.href;return e.startsWith(a.STORE_BASE_URL)?"store":e.startsWith(a.COMMUNITY_BASE_URL)?"community":e.startsWith(a.PARTNER_BASE_URL)?"partnerweb":e.startsWith(a.HELP_BASE_URL)?"help":e.startsWith(a.STEAMTV_BASE_URL)?"steamtv":""}},"20CD":function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return y}));var o=n("mrSG"),r=n("hReu"),i=n("LAqV"),a=n("29iz"),s=n("YZlK"),c=n("y4mg"),l=n("bbBM"),p=n("Hi0u"),u=n("okNM"),m=n("q1tI"),d=n("ljid"),h=n("e2SU"),f=n("oh5H"),_=n("1VtQ"),g=n("XaMz");function b(e,t,n,o,r){v(e,t,n,o,!1,r)}function v(e,t,n,o,i,a){Object(p.c)(m.createElement(C,{browserContext:e,chatRoomGroup:n,chatRoom:o,bIsDropInvite:i,vecInvitePlayers:a}),t,"ChatRoomGroupInviteDialog",{strTitle:Object(f.d)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:680},Object(r.g)(t))}var y=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this.props.chat.lastChatLinkInfo;(!e||Date.now()>=e.rtExpires)&&this.GenerateLink(86400)},t.prototype.GenerateLink=function(e){this.props.chat.CreateInviteLink(e)},t.prototype.OnFocus=function(e){e.target.select()},t.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=Object(f.d)("#Chat_Invite_Loading");return this.props.disabled&&(e=void 0,t=""),m.createElement(m.Fragment,null,m.createElement(d.o,{label:Object(f.d)("#Chat_Invite_Linkheader"),className:"InviteFriendToChatDialog_LinkInput",type:"text",value:e?e.strInviteURL:t,readOnly:!0,bShowCopyAction:!!e,onFocus:this.OnFocus,onClick:this.OnFocus}),!this.props.disabled&&m.createElement(S,{onGenerate:this.GenerateLink,chat:this.props.chat}))},Object(o.c)([_.a],t.prototype,"GenerateLink",null),Object(o.c)([_.a],t.prototype,"OnFocus",null),t=Object(o.c)([u.a],t)}(m.Component),S=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.OnDropDownChange=function(e,t){this.props.onGenerate(e.data),t.SetSelectedOption(void 0)},t.prototype.CreateExpiresText=function(e){return 0==e?Object(f.d)("#InviteLink_ExpiresNever_Short"):e-i.f.GetServerRTime32()>3600?Object(f.d)("#InviteLink_ExpiresDay_Short"):Object(f.d)("#InviteLink_ExpiresHour_Short")},t.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=[{label:Object(f.d)("#InviteLink_ExpiresHour_Short"),data:3600},{label:Object(f.d)("#InviteLink_ExpiresDay_Short"),data:86400},{label:Object(f.d)("#InviteLink_ExpiresNever_Short"),data:0}];return m.createElement("div",{className:"expireLinkInContainer"},m.createElement(d.p,null,Object(f.d)("#InviteLink_ExpireDropDownLabel")),m.createElement(d.i,{strClassName:"inviteLinkDropDown",rgOptions:t,strDefaultLabel:e?this.CreateExpiresText(e.rtExpires):m.createElement("span",null," "),onChange:this.OnDropDownChange,selectedOption:void 0}))},Object(o.c)([_.a],t.prototype,"OnDropDownChange",null),t=Object(o.c)([u.a],t)}(m.Component),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dropToInviteFriend:void 0,rgPickedFriends:[]},n.BuildMemberOfGroupSet(t),n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.chatRoomGroup!==this.props.chatRoomGroup&&this.BuildMemberOfGroupSet(this.props)},t.prototype.BuildMemberOfGroupSet=function(e){var t=e.chatRoomGroup;this.m_setMembersOfGroup=t.memberList.GetCurrentMemberSet(),this.forceUpdate()},t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnSubmit=function(){for(var e=0,t=this.state.rgPickedFriends;e<t.length;e++){var n=t[e];this.props.chatRoomGroup.InviteFriend(n.accountid,this.props.chatRoom)}this.props.closeModal()},t.prototype.OnDragEnter=function(e,t){if(Object(g.a)(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var n=e;n.friend&&this.setState({rgPickedFriends:this.state.rgPickedFriends.concat(n.friend)})}return!0},t.prototype.OnDragLeave=function(){var e=this.state,t=e.dropToInviteFriend,n=e.rgPickedFriends;if(t){var o=n.findIndex((function(e){return e.accountid===t.accountid}));this.setState({dropToInviteFriend:void 0,rgPickedFriends:n.slice(0,o).concat(n.slice(o+1))})}},t.prototype.OnDrop=function(e,t){if(Object(g.a)(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var n=e;if(n.friend)r.h.DragDropManager.SetDropConsumed(),this.state.rgPickedFriends.findIndex((function(e){return e.accountid===n.friend.accountid}))>-1?this.setState({dropToInviteFriend:void 0,rgPickedFriends:this.state.rgPickedFriends.concat(n.friend)}):this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})}},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.render=function(){var e=this,t=this.props.chatRoomGroup.GetDefaultChatRoom();this.props.chatRoom&&(t=this.props.chatRoom);var n,r=this.props.chatRoomGroup.name,l=null!=this.props.chatRoom,u=new Set([]),h=this.props.chatRoomGroup.BCanInvite();h?this.props.chatRoom||(u=this.m_setMembersOfGroup):this.props.chatRoom?i.f.FriendStore.all_friends.forEach((function(t){e.props.chatRoomGroup.BHasMember(t.accountid)||u.add(t.accountid)})):Object(g.a)(!1,"User should not be able to invite to the group"),n=this.props.bIsDropInvite?Object(f.d)("#Chat_InviteFriends_DropInvite_Pre"):h?Object(f.d)("#Chat_InviteFriends"):Object(f.d)("#Chat_InviteGroupMembers");var _=this.state.rgPickedFriends.some((function(e){return!1===e.is_in_beta}));return m.createElement(p.a,{onEscKeypress:this.DismissDialog},m.createElement(d.h,{classNameContent:"ChatRoomGroupInviteDialog"+(this.props.bIsDropInvite?" IsDropInvite":""),onSubmit:this.OnSubmit},m.createElement(d.m,null,l?m.createElement("div",null,Object(f.d)("#Chat_Actions_InviteFriend_VoiceChat"),m.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},'"',this.props.chatRoom.name,'"')):Object(f.d)("#Chat_Actions_InviteFriend"),m.createElement("div",{className:"displayRow"},m.createElement(s.a,{group:this.props.chatRoomGroup,small:!0}),m.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},r))),m.createElement(d.b,null,!this.props.bIsDropInvite&&h&&m.createElement(m.Fragment,null,m.createElement("div",{className:"inviteLinkContainer"},m.createElement(y,{chat:t,disabled:!1})),m.createElement("div",{className:"OrSeparator"},m.createElement("div",{className:"HBar"}),m.createElement("div",{className:"OrSeparatorLabel"},Object(f.d)("#Chat_InviteFriends_OR_Separator")),m.createElement("div",{className:"HBar"}))),m.createElement(a.a,Object(o.a)({className:""},this.GetDragDropProps()),m.createElement(d.c,{className:"CreateChat_NonBetaFriendsWarning"+(i.f.IsInBeta()?"":" Released")+(_?" Active":"")},m.createElement(O,null),Object(f.d)(i.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),m.createElement(c.a,{label:n,eSort:1,rgPickedFriends:this.state.rgPickedFriends,bDropInvite:this.props.bIsDropInvite,renderChosenFriend:I,onChange:function(t){return e.setState({rgPickedFriends:t})},excludeFriend:function(t){return e.m_setMembersOfGroup.has(t.accountid)}}))),m.createElement(d.j,null,m.createElement("div",{className:"DialogTwoColLayout _DialogColLayout"},m.createElement(d.x,{disabled:0===this.state.rgPickedFriends.length},Object(f.d)("#Chat_Invite")),m.createElement(d.d,{onClick:this.DismissDialog},Object(f.d)("#Button_Close"))))))},Object(o.c)([_.a],t.prototype,"DismissDialog",null),Object(o.c)([_.a],t.prototype,"OnSubmit",null),Object(o.c)([_.a],t.prototype,"OnDragEnter",null),Object(o.c)([_.a],t.prototype,"OnDragLeave",null),Object(o.c)([_.a],t.prototype,"OnDrop",null),t}(m.PureComponent);function O(){return m.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(f.d)(i.f.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}var I=Object(u.a)((function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return m.createElement(m.Fragment,null,m.createElement(l.e,{friend:e.friend,context:null},m.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&m.createElement(O,null),m.createElement("span",null,e.friend.display_name),m.createElement(h.qb,null))))}))},"29iz":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("hReu"),i=n("q1tI"),a=n("/IDK"),s=n("1VtQ"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.m_bAcceptDrag=!1,n.m_deferredEnter=null,n.m_divElement=null,n}return Object(o.d)(t,e),t.prototype.BindDiv=function(e){this.m_divElement=e},Object.defineProperty(t.prototype,"div",{get:function(){return this.m_divElement},enumerable:!1,configurable:!0}),t.prototype.DeliverDeferredDragEnter=function(){var e=r.h.DragDropManager.GetDragData();return this.props.fnDragEnter(e,this.m_deferredEnter.bFiles)},t.prototype.OnDragEnter=function(e){if(!this.m_bAcceptDrag){var t=r.h.DragDropManager.GetDragData(),n=this.props.bAcceptsFiles&&-1!=e.dataTransfer.types.indexOf("Files");t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.m_bAcceptDrag=!0:this.m_bAcceptDrag=!!n,this.m_bAcceptDrag&&this.props.fnDragEnter&&(this.m_deferredEnter={bFiles:n}),this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())}},t.prototype.OnDragLeave=function(e){if(this.m_bAcceptDrag){if(!Object(a.c)(e))return;this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation(),this.props.fnDragLeave&&this.props.fnDragLeave()}},t.prototype.OnDragOver=function(e){if(this.m_bAcceptDrag){if(this.m_deferredEnter){var t=this.DeliverDeferredDragEnter();if(this.m_deferredEnter=null,!t)return void(this.m_bAcceptDrag=!1)}e.preventDefault(),e.stopPropagation(),this.props.fnDragOver&&this.props.fnDragOver(e)}},t.prototype.OnDrop=function(e){if(this.m_bAcceptDrag){this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation();var t=r.h.DragDropManager.GetDragData();t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.props.fnDrop&&this.props.fnDrop(t,e):this.props.bAcceptsFiles&&0!=e.dataTransfer.files.length&&this.props.fnDrop&&this.props.fnDrop(null,e)}},t.prototype.render=function(){var e=this.props,t=(e.rgAcceptedTypes,e.bAcceptsFiles,e.fnDragEnter,e.fnDragLeave,e.fnDragOver,e.fnDrop,Object(o.f)(e,["rgAcceptedTypes","bAcceptsFiles","fnDragEnter","fnDragLeave","fnDragOver","fnDrop"]));return i.createElement("div",Object(o.a)({},t,{ref:this.BindDiv,className:"DropTarget "+this.props.className,onDragEnter:this.OnDragEnter,onDragLeave:this.OnDragLeave,onDragOver:this.OnDragOver,onDrop:this.OnDrop}),this.props.children)},Object(o.c)([s.a],t.prototype,"BindDiv",null),Object(o.c)([s.a],t.prototype,"DeliverDeferredDragEnter",null),Object(o.c)([s.a],t.prototype,"OnDragEnter",null),Object(o.c)([s.a],t.prototype,"OnDragLeave",null),Object(o.c)([s.a],t.prototype,"OnDragOver",null),Object(o.c)([s.a],t.prototype,"OnDrop",null),t}(i.PureComponent)},"2GiS":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABcFJREFUeNrcm1uIVlUUx/9nlHFmNC0s0ZBxIhS1izZSWQ86OCXzYEhhJSUpXvJFye4ZWSGkpYRmll3MIoseIgvMyLLQLkpFMDV0sbyESSWVOjlUMzn+enBPHTf7XL9vcp8WzMA5Z6+11/qftfde+3/2J0CAiirAWGA10AJ0cFz+Ar4EngTGx+ge/1dEAIBhwBbSyYfAef8bAIDJQBvZ5E/g+sIDAEwCOskv1xUWAKAOaHUEtR9YaOaDOuBC4DZgj6PtH8DIogKwwRHQOqA6on0lsNKh827hAABGOAJZn1L3UYfu2KIBsNgK4BfglJS6vYB9lv4qQBUFmvzHWdfPBEFwJI1iEATtktY47RUoAw5Yb7ApR8EUlvaiZUAv6/qnjPp2+0pJhQKg3bo+NaO+3b6zaADsta4vzahvt99TGACAWscQmAn0TKkfSJpl3d7u/SQI9AceNnW8SxaltDPPoTvJ2zoAqAHuBg4n1PXHgPkJtmaY7XFYvgAqvAMA6AncCPyYcYOzBWgCqkIlcCOwMaJ9Y1f2B13BB0GQ5FyFpAZJEyXVS6qTVCWpwywxLZLekfRmEARtGQMPJF0laYmkYRHNOiQ9JqlV0v0x5lol9ZUUFdDiIAjuS70XMGXkAuD7lG/jN7MBGZAy+PHARwlp/jwwJKRzT86t8DIDdrrtMHAR8HXOzlqB6TGBjwLeSLDxuovJCfEC+1L6cgC4OhMjBNwQ4thKkTVAD2tPv9682SjZAYxLkT3VwFzgPeCoZaPTZNZNQJ9MnCAwPca57SYFrwAagMuB+cBrpr52ybPAGcCKBFC/Aq7MOYFWmi3zBcA5URxBIgDAJRFOfgDUJxgcBDwVEVxc4PuB2WkLmzKuOicCAFQBuxwOLg2ncUrS8vcUw+MwcEeat/VfAXCnw8kHchqf6BiXYV5uGXDaSa47/gXAjCF7z73VrP95O7jXEfyrwGBPCq8TAJjscPbcEjtwUlEeldwnAPCE5ejbZerkLsvuLl8BaLYcnVemToY7Mqu/jwDYn5ouLmNH3Wa7VADCE1xv6/mBMvZl2+rnyzCIm+GDMvbTw8XH+QZAq/VscJnSrIekgdbtQz4CsNN6Vq5xOsrB533jIwA7rGfXlKmPKdZ1S1bCpNtnQvPX6FiuGkq0PRQ4Ytlc4msdUAHstpz9vItny2G8ylFbAIzwEgBzY47D4Rfy7AeA5TFkR62vAFQAnzicfjmKVXERnMDtCYzPobzER7cCEBq3rmMo3wFT40gLQ6ZszUCXrQQqTyYATlocuEzSRkN7u6q6zZI+k3RQUo2k4ZIaJY2M6GuFpCZJrvH/qaRrgyDY7UUGhB42AAdLJEQ7gQXGXm/guRgGeYpXAJgGtcBbOYPf7VpGzaeqthgGuSpjEDXASGC0IUUrywZAqGETsC1l4DvNx8jKhC1yS4R+MzA0wZ++wC1mwu50kK/bgFlJYGT+NggMMezt48AmM+FtNql9K1Af/vKSYKsaWBsBwhFgWoTeNODnlC9jr5nPygNAN43DqY5qsUvWdjHGZnldlWMoHgNu9haA0NLbHBFAi/nQsTwhyKRP6XO9BSBUOq+OodFd8opZrXqGbEwC3ne0bQfO9xaAkFNTIgoxe6KbmpGM/eeIrNcAGMfOBj6OAWBmSjvLHLqjvQfAOBd10Hl7BhvVju8SSwsBQMjJH6wAZmTUX2Lpb4tihb3MAkmDrNs7MpqxM6Y2LSvsg9Q47h3MaMMme/sVCYA2Sfb4HJjRxoA4AL0GIAiCozJHWkMyIaMZu/0uJynq8TywzprEvs1wRPZ0R02xsGirgIutfjAlNbfBUTLXFQoA46irKHooKhOAPsBLDp0XC1EJOgIaE3HIaqc5xFlvjt+NBRZFHLX9FTizkAAYZ2eXQM11uHiBIv5ucE6Ow5utUb8vKupPZ8cknC0OyybgLK8ZoRKAmAA8beaBo6E9fzPwCDAmDSn69wCRm39XiJ/zWQAAAABJRU5ErkJggg=="},"2fJL":function(e,t,n){e.exports={EventDetailsPageContainer:"partnereventdisplay_EventDetailsPageContainer_3EdRL",EventBackgroundBlurCtn:"partnereventdisplay_EventBackgroundBlurCtn_2kCeX",EventBackgroundBlur:"partnereventdisplay_EventBackgroundBlur_3pgo7",DetailArtworkAgeAppropriate:"partnereventdisplay_DetailArtworkAgeAppropriate_1lrp0",DetailArtworkAgeNotAppropriate:"partnereventdisplay_DetailArtworkAgeNotAppropriate_1Fo7_",EventCoverImageBlr:"partnereventdisplay_EventCoverImageBlr_DdfeF",EventBodyCtn:"partnereventdisplay_EventBodyCtn_1S3dS",EventBodyPosition:"partnereventdisplay_EventBodyPosition_Yne7f",EventBody:"partnereventdisplay_EventBody_1GRsH",EventBroadcastCtn:"partnereventdisplay_EventBroadcastCtn_34Hqc",EventColumns:"partnereventdisplay_EventColumns_18yl-",EventCoverImageCtn:"partnereventdisplay_EventCoverImageCtn_16OS-",NoTitleArtwork:"partnereventdisplay_NoTitleArtwork_1B2md",EventCoverImage:"partnereventdisplay_EventCoverImage_2Xb45",EventCoverImageBackground:"partnereventdisplay_EventCoverImageBackground_1Ls4q",InLibraryView:"partnereventdisplay_InLibraryView_1S90-",InEditor:"partnereventdisplay_InEditor_1wuhL",EventCoverImageFuzz:"partnereventdisplay_EventCoverImageFuzz_2Rnq8",LibraryEventTitleContainer:"partnereventdisplay_LibraryEventTitleContainer_3wviV",CoverImageGradient:"partnereventdisplay_CoverImageGradient_kA4YD",EventDetailTitleImg:"partnereventdisplay_EventDetailTitleImg_2-rUX",EventDetailTitleDesc:"partnereventdisplay_EventDetailTitleDesc_3TXw_",EventDetailsSticky:"partnereventdisplay_EventDetailsSticky_1y5ud",EventDetailUserType:"partnereventdisplay_EventDetailUserType_V9_HO",EventDetailGameCallToAction:"partnereventdisplay_EventDetailGameCallToAction_3fZsn",EventDetailTimeInfo:"partnereventdisplay_EventDetailTimeInfo_19gby",EventDetailsDescription:"partnereventdisplay_EventDetailsDescription_1Yq4c",EventDetailsBody:"partnereventdisplay_EventDetailsBody_1awbQ",EventDetailsGame:"partnereventdisplay_EventDetailsGame_3aD3h",EventDetailsAvatar:"partnereventdisplay_EventDetailsAvatar_3lfsh",GameActions:"partnereventdisplay_GameActions_3Owqg",ActionButton:"partnereventdisplay_ActionButton_2BN7t",Ownership:"partnereventdisplay_Ownership_17gwA",EventDetailsType:"partnereventdisplay_EventDetailsType_3Ehx9",EventDetailTitle:"partnereventdisplay_EventDetailTitle_34BsR",EventDetailTitleContainer:"partnereventdisplay_EventDetailTitleContainer_3LibJ",EventDetailsSubTitle:"partnereventdisplay_EventDetailsSubTitle_2cGAf",LibraryEventBodyContainer:"partnereventdisplay_LibraryEventBodyContainer_131Kd","lang_zn-cn":"partnereventdisplay_lang_zn-cn_1jFhl",lang_ko:"partnereventdisplay_lang_ko_30gNG",lang_ja:"partnereventdisplay_lang_ja_1kHGK","lang_zn-tw":"partnereventdisplay_lang_zn-tw_nHEw1",AppSocialLinksCtn:"partnereventdisplay_AppSocialLinksCtn_18TmW",AppSocialLinks:"partnereventdisplay_AppSocialLinks_3KcJ8",AppSocialLink:"partnereventdisplay_AppSocialLink_3weO2",StartDate:"partnereventdisplay_StartDate_eLvKv",EndDate:"partnereventdisplay_EndDate_37MqY",MultiDateAndTime:"partnereventdisplay_MultiDateAndTime_1uTBL",RightSideTitles:"partnereventdisplay_RightSideTitles_3xsDf",DisplayAdminPanel_Title:"partnereventdisplay_DisplayAdminPanel_Title_1QtiS",DateAndTime:"partnereventdisplay_DateAndTime_1r7EM",NoDateAndTime:"partnereventdisplay_NoDateAndTime_1HRGG",AppSummaryCtn:"partnereventdisplay_AppSummaryCtn_2bPCO",AppSummaryWidgetTitleCtn:"partnereventdisplay_AppSummaryWidgetTitleCtn_1jjk5",Title:"partnereventdisplay_Title_1KXsN",AppSummaryWidgetCtn:"partnereventdisplay_AppSummaryWidgetCtn_1Zg10",DisplayAdminPanel:"partnereventdisplay_DisplayAdminPanel_3SN1L",DisplayAdminPanel_ctn:"partnereventdisplay_DisplayAdminPanel_ctn_2-EDT",DisplayAdminPanel_Spacer:"partnereventdisplay_DisplayAdminPanel_Spacer_1cHJN",AdminButton:"partnereventdisplay_AdminButton_3I4OB",EditorStatsCtn:"partnereventdisplay_EditorStatsCtn_2mxA1",EditorStatsRow:"partnereventdisplay_EditorStatsRow_3KHan",SteamBlog:"partnereventdisplay_SteamBlog_1cLm6",LunarNewYearHeader:"partnereventdisplay_LunarNewYearHeader_tA7C_",EnvelopeArea:"partnereventdisplay_EnvelopeArea_fcSHH",TokenBalanceContainer:"partnereventdisplay_TokenBalanceContainer_2gPsN",TokenBalance:"partnereventdisplay_TokenBalance_15bmV",EnvelopeContainer:"partnereventdisplay_EnvelopeContainer_3K-Cq",BackingRect:"partnereventdisplay_BackingRect__UJJp",Envelope:"partnereventdisplay_Envelope_1TiYX",GiftLabel:"partnereventdisplay_GiftLabel_1eBef",OpenState:"partnereventdisplay_OpenState_2rFp7",Opened:"partnereventdisplay_Opened_m1aHY",Locked:"partnereventdisplay_Locked_7AAVC",Unlocked:"partnereventdisplay_Unlocked_3curA",NeedLogin:"partnereventdisplay_NeedLogin_7qul6",BottomMessage:"partnereventdisplay_BottomMessage_2NaUa",VO:"partnereventdisplay_VO_1M_sA",LunarNewYearOpenEnvelopeVideoDialog:"partnereventdisplay_LunarNewYearOpenEnvelopeVideoDialog_2-T7w",Container:"partnereventdisplay_Container_siv49",Column:"partnereventdisplay_Column_FQedS",VideoBox:"partnereventdisplay_VideoBox_1OUET",CoinText:"partnereventdisplay_CoinText_1AyVS",Visible:"partnereventdisplay_Visible_1Dqiy",LunarNewYearOpenEnvelopeVideo:"partnereventdisplay_LunarNewYearOpenEnvelopeVideo_1DOnT",StoryHeader:"partnereventdisplay_StoryHeader_34n4x",StorySubHeader:"partnereventdisplay_StorySubHeader_3g2no",StoryText:"partnereventdisplay_StoryText_35RL7",StoryPicture:"partnereventdisplay_StoryPicture_2Cz03",CheckBackText:"partnereventdisplay_CheckBackText_3C2os",DancingRat:"partnereventdisplay_DancingRat_kbnof",Links:"partnereventdisplay_Links_2kcXw",MarketLink:"partnereventdisplay_MarketLink_23Zzj",MarketLinkhover:"partnereventdisplay_MarketLinkhover_2zMRB"}},"2sgH":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("1n9R"),c=n("oh5H"),l=n("XaMz"),p=function(){function e(){this.timestamp=0,this.imageWidth=0,this.imageHeight=0,this.eUploadState=0,this.uploadProgress=0}return Object(o.c)([a.A],e.prototype,"file",void 0),Object(o.c)([a.A],e.prototype,"dataURL",void 0),Object(o.c)([a.A],e.prototype,"imageWidth",void 0),Object(o.c)([a.A],e.prototype,"imageHeight",void 0),Object(o.c)([a.A],e.prototype,"eUploadState",void 0),Object(o.c)([a.A],e.prototype,"uploadProgress",void 0),Object(o.c)([a.A],e.prototype,"strErrorDescription",void 0),e}(),u=function(){function e(e){this.m_fileUploadProps=new p,this.m_Callbacks=e}return Object.defineProperty(e.prototype,"file_upload_props",{get:function(){return this.m_fileUploadProps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file_upload_data_url",{get:function(){return this.m_fileUploadProps.dataURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.m_fileUploadProps.file},enumerable:!1,configurable:!0}),e.prototype.LogFileUploadMessage=function(e){this.m_Callbacks.LogFileUploadMessage&&this.m_Callbacks.LogFileUploadMessage(e)},e.prototype.SetUploadFileError=function(e,t){this.m_fileUploadProps.eUploadState=e,this.m_fileUploadProps.strErrorDescription=t,this.m_fileUploadProps.displayFileName=null},e.prototype.SetImageFileToUpload=function(e,t){return void 0===t&&(t=m),Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e?e.size>10485760?(this.SetUploadFileError(4,Object(c.d)("#Chat_Settings_Error_ChatFileTooLarge",e.name)),[2]):(n=["jpg","jpeg","png","gif","webm","mpg","mp4","mpeg","ogv"],r=e.name.split(".").pop().toLowerCase(),-1==n.indexOf(r)?(this.SetUploadFileError(5,Object(c.d)("#Chat_Settings_Error_ChatFileTypeNotSupported",e.name)),[2]):[4,t(e)]):(this.SetFileToUpload(null),[2]);case 1:return i=o.sent(),this.SetFileToUpload(i.file),this.m_fileUploadProps.imageHeight=i.height,this.m_fileUploadProps.imageWidth=i.width,[2]}}))}))},e.prototype.SetFileToUpload=function(e){if(this.m_fileUploadProps.file=e,this.m_fileUploadProps.dataURL=null,this.m_fileUploadProps.hmac=null,this.m_fileUploadProps.sha1=null,this.m_fileUploadProps.imageWidth=0,this.m_fileUploadProps.imageHeight=0,e){this.m_fileUploadProps.eUploadState=1;for(var t="";t.length<40;)t+=Math.floor(16*Math.random()).toString(16);this.m_fileUploadProps.dataURL=URL.createObjectURL(e),this.m_fileUploadProps.displayFileName=e.name,this.m_fileUploadProps.uploadFileName=window.performance.now()+"_"+e.name,this.m_fileUploadProps.sha1=t,this.m_fileUploadProps.hmac="",this.m_fileUploadProps.timestamp=0}else this.m_fileUploadProps.eUploadState=0},e.prototype.RetryFileUpload=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return[2,this.BeginFileUpload(this.m_fileUploadProps.additionalProps)]}))}))},e.prototype.BeginFileUpload=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,p,u,m=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!(t=this.m_fileUploadProps.file))throw Object(l.a)(!1,"Must SetImageFileToUpload before calling BeginFileUpload"),new Error("Invalid State");this.m_fileUploadProps.eUploadState=2,this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.additionalProps=e,(n=new FormData).append("sessionid",s.c.SESSIONID),n.append("l",s.c.LANGUAGE),n.append("file_size",t.size.toString()),n.append("file_name",this.m_fileUploadProps.uploadFileName),n.append("file_sha",this.m_fileUploadProps.sha1),n.append("file_image_width",this.m_fileUploadProps.imageWidth.toString()),n.append("file_image_height",this.m_fileUploadProps.imageHeight.toString()),n.append("file_type",t.type),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(this.m_Callbacks.GetBeginFileUploadURL(),n,{params:{l:s.c.LANGUAGE}})];case 2:return r=o.sent(),this.m_fileUploadProps.timestamp=r.data.timestamp,this.m_fileUploadProps.hmac=r.data.hmac,[2,this.DoFileUpload(r.data.result)];case 3:throw p=o.sent(),u=null,Object(a.E)((function(){if(m.m_fileUploadProps.eUploadState=3,m.LogFileUploadMessage(p.response),p.response){var e=p.response.data;p.response.status,e&&e.success;u=e.message?e.message:Object(c.d)("#Chat_Settings_Error_ServerError")}else u=Object(c.d)("#ConnectionTrouble_FailedToConnect");m.m_fileUploadProps.strErrorDescription=Object(c.d)("#Chat_Upload_ErrorStart",u)})),u;case 4:return[2]}}))}))},e.prototype.DoFileUpload=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,l,p,u=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:for(t=this.m_fileUploadProps.file,n=e.use_https?"https://":"http://",n+=e.url_host+e.url_path,r={onUploadProgress:function(e){var t=e.loaded/e.total*100;t>u.m_fileUploadProps.uploadProgress&&Object(a.E)((function(){u.m_fileUploadProps.uploadProgress=t}))},headers:{},transformRequest:[function(e){return e}]},s=0;s<e.request_headers.length;++s)"Content-Length"!=(l=e.request_headers[s]).name&&"Host"!=l.name&&(r.headers[l.name]=l.value);o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.put(n,t,r)];case 2:return o.sent(),[2,this.CommitFileUpload(!0,e.ugcid)];case 3:throw p=o.sent(),this.LogFileUploadMessage(p.response),Object(a.E)((function(){u.m_fileUploadProps.strErrorDescription=Object(c.d)("#Chat_Upload_ErrorCloud"),u.m_fileUploadProps.eUploadState=3,u.m_fileUploadProps.uploadProgress=0})),this.CommitFileUpload(!1,e.ugcid),this.m_fileUploadProps.strErrorDescription;case 4:return[2]}}))}))},e.prototype.CommitFileUpload=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,l,p,u,m,d=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:n=this.m_fileUploadProps.file,r=this.m_fileUploadProps.sha1,(l=new FormData).append("sessionid",s.c.SESSIONID),l.append("l",s.c.LANGUAGE),l.append("file_name",this.m_fileUploadProps.uploadFileName),l.append("file_sha",r),l.append("success",e?"1":"0"),l.append("ugcid",t),l.append("file_type",n.type),l.append("file_image_width",this.m_fileUploadProps.imageWidth.toString()),l.append("file_image_height",this.m_fileUploadProps.imageHeight.toString()),l.append("timestamp",this.m_fileUploadProps.timestamp.toString()),l.append("hmac",this.m_fileUploadProps.hmac),this.m_Callbacks.PopulateCommitFileUploadFormData(l,this.file_upload_props.additionalProps),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(this.m_Callbacks.GetCommitFileUploadURL(),l)];case 2:return p=o.sent(),e?(this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.eUploadState=6):this.m_fileUploadProps.eUploadState=3,[2,p];case 3:if(u=o.sent(),!e)return[2,null];throw m=null,Object(a.E)((function(){if(d.LogFileUploadMessage(u),d.m_fileUploadProps.uploadProgress=0,d.m_fileUploadProps.eUploadState=3,u.response){var e=u.response.data;u.response.status,e&&e.success;m=e.message?e.message:Object(c.d)("#Chat_Settings_Error_ServerError")}else m=Object(c.d)("#ConnectionTrouble_FailedToConnect");d.m_fileUploadProps.strErrorDescription="Failed to commit upload: "+m})),m;case 4:return[2]}}))}))},e.prototype.ClearFileUploadError=function(){3!=this.m_fileUploadProps.eUploadState&&4!=this.m_fileUploadProps.eUploadState&&5!=this.m_fileUploadProps.eUploadState||this.Reset()},e.prototype.Reset=function(){this.SetFileToUpload(null)},Object(o.c)([a.i],e.prototype,"SetUploadFileError",null),Object(o.c)([a.i],e.prototype,"SetImageFileToUpload",null),Object(o.c)([a.i],e.prototype,"SetFileToUpload",null),Object(o.c)([a.i],e.prototype,"RetryFileUpload",null),Object(o.c)([a.i],e.prototype,"BeginFileUpload",null),Object(o.c)([a.i],e.prototype,"DoFileUpload",null),Object(o.c)([a.i],e.prototype,"CommitFileUpload",null),Object(o.c)([a.i],e.prototype,"ClearFileUploadError",null),Object(o.c)([a.i],e.prototype,"Reset",null),e}();function m(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var o=e,r=function(e){var t=new DataView(e),n=0,o=0,r=[],i=0;if(65496==t.getUint16(n)){n+=2;var a=t.getUint16(n);for(n+=2;n<t.byteLength&&n<131072;){if(65505==a)r[i]={recess:o,offset:n-2},o=n+t.getUint16(n),i++;else if(65498==a)break;n+=t.getUint16(n),a=t.getUint16(n),n+=2}var s=e.byteLength-o;if(r.forEach((function(e){s+=e.offset-e.recess})),s===e.byteLength)return e;var c=new Uint8Array(s);if(r.length>0){var l=0;r.forEach((function(t){var n=t.offset-t.recess;c.set(new Uint8Array(e.slice(t.recess,t.offset)),l),l+=n})),c.set(new Uint8Array(e.slice(o)),l)}return c.buffer}return e}(n.result),i=new Blob([r],{type:e.type});if(i){var a=i;a.lastModifiedDate=new Date(e.lastModified),a.name=e.name,o=a}if(0==e.type.indexOf("image")){var s=new Image;s.src=URL.createObjectURL(e),s.onload=function(e){t({file:o,width:s.width,height:s.height})}}else t({file:o,width:0,height:0})},n.readAsArrayBuffer(e)}))}},"2wX0":function(e,t,n){e.exports={PartnerEventFont:"partnereventshared_PartnerEventFont_guiIY",BetaContainer:"partnereventshared_BetaContainer_2yDhg",EventBetaTextTitle:"partnereventshared_EventBetaTextTitle_3NjnO",Clear:"partnereventshared_Clear_3n3_O",Divider:"partnereventshared_Divider_26Tlx",EventDefaultRowContainer:"partnereventshared_EventDefaultRowContainer_3Q8Dr",EventStartPublic:"partnereventshared_EventStartPublic_3oV6b",EventOptions:"partnereventshared_EventOptions_2vHY_",FlexColumnContainer:"partnereventshared_FlexColumnContainer_1IIW_",FlexRowContainer:"partnereventshared_FlexRowContainer_34oey",FlexContainSpaceBetween:"partnereventshared_FlexContainSpaceBetween_2yJdN",FlexRowWrapSpaceBetweenContainer:"partnereventshared_FlexRowWrapSpaceBetweenContainer_12nJm",Button:"partnereventshared_Button_vHRhC",FlexRowWrapFlexStartContainer:"partnereventshared_FlexRowWrapFlexStartContainer_1t48T",SaveBackground:"partnereventshared_SaveBackground_1GJS5",SupportedGroupLabel:"partnereventshared_SupportedGroupLabel_3aRAW",LangaugeWithContent:"partnereventshared_LangaugeWithContent_sidWp",InputBorder:"partnereventshared_InputBorder_2XVMj",RadioOption:"partnereventshared_RadioOption_dMFpL",EventEditorTextTitleCtn:"partnereventshared_EventEditorTextTitleCtn_2qs1W",doclink:"partnereventshared_doclink_vnuV8",EventEditorUnpaddedTextTitle:"partnereventshared_EventEditorUnpaddedTextTitle_3zuPV",EventEditorTextTitle:"partnereventshared_EventEditorTextTitle_4u8AK",EventEditorTextTitleLengthInfo:"partnereventshared_EventEditorTextTitleLengthInfo_3uNCx",EventSectionTitleCtn:"partnereventshared_EventSectionTitleCtn_ozwVb",EventSectionTitle:"partnereventshared_EventSectionTitle_KEXXa",EventSectionSpacer:"partnereventshared_EventSectionSpacer_5FbJa",EventSectionMoreBtn:"partnereventshared_EventSectionMoreBtn_2hdIF",EventEditorSpacerPadding:"partnereventshared_EventEditorSpacerPadding_2trt_",EventEditorVisibilityCtn:"partnereventshared_EventEditorVisibilityCtn_1dC8o",EventEditorTextSubTitle:"partnereventshared_EventEditorTextSubTitle_1HRiS",FloatingTitle:"partnereventshared_FloatingTitle_3TKtJ",EventEditorEventStatus:"partnereventshared_EventEditorEventStatus_1H_x_",EventHidden:"partnereventshared_EventHidden_33eoA",EventVisible:"partnereventshared_EventVisible_9OA0F",EventBarTitleCtn:"partnereventshared_EventBarTitleCtn_1rO-6",EventBarTitle:"partnereventshared_EventBarTitle_2iysK",EventBarBack:"partnereventshared_EventBarBack_1Xr6O",EditPreviewButton:"partnereventshared_EditPreviewButton_2PEIa",BrowseMoreButton:"partnereventshared_BrowseMoreButton_QTrhr",Icon:"partnereventshared_Icon_fCQJR",Primary:"partnereventshared_Primary_3uuII",ClearThings:"partnereventshared_ClearThings_1p6-J",OnIndicator:"partnereventshared_OnIndicator_lPo-r",OffIndicator:"partnereventshared_OffIndicator_U53TH",IconImage:"partnereventshared_IconImage_1iap9",RightColumnContainer:"partnereventshared_RightColumnContainer_3ofiw",EventPublishButton:"partnereventshared_EventPublishButton_U0o0u",FloatRight:"partnereventshared_FloatRight_3qSeX",TTip:"partnereventshared_TTip_3E9wx",ValveSupportOnly:"partnereventshared_ValveSupportOnly_2hj7U",ArtworkAgeNotAppropriate:"partnereventshared_ArtworkAgeNotAppropriate_-1se4",EventDashboardHeader:"partnereventshared_EventDashboardHeader_2lb6f",ContainerSpaceBetween:"partnereventshared_ContainerSpaceBetween_3T0Pr",EventDashboardTitles:"partnereventshared_EventDashboardTitles_3XWe3",EventDashboardActions:"partnereventshared_EventDashboardActions_2i1-P",EventDashboardStatsCtn:"partnereventshared_EventDashboardStatsCtn_iDETf",EventDashboardAppCtn:"partnereventshared_EventDashboardAppCtn_iUAoi",maintitle:"partnereventshared_maintitle_21WFS",AppTitle:"partnereventshared_AppTitle_3-UCH",subtitle:"partnereventshared_subtitle_2psnk",ValveOnlyBackground:"partnereventshared_ValveOnlyBackground_3HNFH",ValveOnlyAdminBackground:"partnereventshared_ValveOnlyAdminBackground_MkZOo",Columns:"partnereventshared_Columns_3F7nd",LeftCol:"partnereventshared_LeftCol_jRpF9",RightCol:"partnereventshared_RightCol_1Rsr2",DropDownScroll:"partnereventshared_DropDownScroll_22e7r",CloseButton:"partnereventshared_CloseButton_1sshi",CloseSectionTools:"partnereventshared_CloseSectionTools_vmq2W",HalfColumn:"partnereventshared_HalfColumn_iCcAr",ThemedCtn:"partnereventshared_ThemedCtn_2jzrF",Halloween:"partnereventshared_Halloween_juiix",tooltip_Ctn:"partnereventshared_tooltip_Ctn_1JlN_",SaleSectionHeader:"partnereventshared_SaleSectionHeader_tYyZc",SaleSectionContainer:"partnereventshared_SaleSectionContainer_sWcXL",AddSectionButton:"partnereventshared_AddSectionButton_1Wscd",EventElementRequired:"partnereventshared_EventElementRequired_1h4Q5",EventElementOptional:"partnereventshared_EventElementOptional_1bmU_"}},"3/mw":function(e,t,n){e.exports={mentionDialogPosition:"suggestdialog_mentionDialogPosition_3I0f3",mentionDialog:"suggestdialog_mentionDialog_2hRnz",mentionSearchText:"suggestdialog_mentionSearchText_26-gv",suggestOption:"suggestdialog_suggestOption_t54xp",nickname:"suggestdialog_nickname_NtV85",selected:"suggestdialog_selected_e-sy7",mentionSearchMatch:"suggestdialog_mentionSearchMatch_m3oS2"}},"3zHc":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return p}));var o=n("mrSG"),r=n("UqDm"),i=n("2vnA"),a=n("oh5H"),s=n("LAqV"),c=function(){function e(){}return e.prototype.OnTabActivate=function(){this.m_msLastActive=performance.now(),this.InternalOnTabActivate()},e.prototype.GetTimeLastActivate=function(){return this.m_msLastActive||0},e.prototype.IsChatRoom=function(){return!1},e.prototype.IsFriendChat=function(){return!1},e}(),l=0,p=function(){function e(e){this.m_vecTabs=i.A.array(null,{deep:!1}),this.m_id=l++,this.m_browserContext=e}return e.prototype.GetBrowserContext=function(){return this.m_browserContext},e.prototype.GetTitle=function(){return this.m_activeTab?2==this.tabCount?Object(a.d)("#WindowTitle_ChatTabTitle",this.m_activeTab.GetTabName()):this.tabCount>2?Object(a.d)("#WindowTitle_ChatTabTitlePlural",this.m_activeTab.GetTabName(),this.tabCount-1):this.m_activeTab.GetTabName():""},e.prototype.OnWindowFocus=function(){this.m_activeTab&&this.m_activeTab.OnTabFocus()},Object.defineProperty(e.prototype,"tabs",{get:function(){return this.m_vecTabs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabCount",{get:function(){return this.m_vecTabs.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeTab",{get:function(){return this.m_activeTab},enumerable:!1,configurable:!0}),e.prototype.GetTabSetIdentifier=function(){return this.m_vecTabs.map((function(e){return e.GetUniqueID()})).join("_")},e.prototype.GetTabForChat=function(e){for(var t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];if(o.IsTabForChat(e))return o}return null},e.prototype.GetTabByUniqueID=function(e){for(var t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];if(o.GetUniqueID()==e)return o}return null},e.prototype.BHasTab=function(e){return-1!==this.m_vecTabs.indexOf(e)},e.prototype.AddTab=function(e){-1==this.m_vecTabs.indexOf(e)&&(this.m_vecTabs.push(e),!this.m_activeTab&&this.m_vecTabs.length>0&&(this.m_activeTab=this.m_vecTabs[0]))},e.prototype.ActivateTab=function(e){-1!=this.m_vecTabs.indexOf(e)?(this.activeTab&&this.activeTab!=e&&this.activeTab.OnTabDeactivate(),this.m_activeTab=e,e.OnTabActivate(),this.Focus()):console.log("Tab not found")},e.prototype.ActivateNextTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.ActivatePreviousTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+this.m_vecTabs.length-1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.DeactivateTab=function(e){-1!==this.m_vecTabs.indexOf(e)?this.activeTab&&this.activeTab===e&&(e.OnTabDeactivate(),this.m_activeTab=void 0):console.log("Tab not found")},e.prototype.RemoveTab=function(e){var t=this.m_vecTabs.indexOf(e);if(-1==t)return!1;var n=e&&e==this.m_activeTab;if(this.m_vecTabs.splice(t,1),n)if(this.m_vecTabs.length){for(var o=void 0,r=0,i=this.m_vecTabs;r<i.length;r++){var a=i[r];(!o||a.GetTimeLastActivate()>o.GetTimeLastActivate())&&(o=a)}this.m_activeTab=o||this.m_vecTabs[Math.max(t-1,0)]}else this.m_activeTab=void 0;return 0==this.m_vecTabs.length&&s.f.UIStore.CloseTabSet(this),!0},e.prototype.MoveTabAfter=function(e,t){var n=this.m_vecTabs.indexOf(t);-1!=n&&this.MoveTabToIndex(e,n+1)},e.prototype.MoveTabToIndex=function(e,t){var n=this.m_vecTabs.indexOf(e);-1!=n&&r.f(this.m_vecTabs,n,Math.min(t,this.m_vecTabs.length-1))},e.prototype.Focus=function(){s.f.UIStore.FocusTabSet(this)},e.prototype.OnPopupClosed=function(e){e&&s.f.UIStore.SetSuppressBrowserContextBroadcasting(!0),s.f.UIStore.OnTabSetClosed(this),this.CloseAllTabs(),e&&s.f.UIStore.SetSuppressBrowserContextBroadcasting(!1)},e.prototype.CloseAllTabs=function(){this.m_activeTab=void 0;for(var e=0,t=this.m_vecTabs;e<t.length;e++){var n=t[e];s.f.UIStore.CloseTab(this.m_browserContext,n,!0)}this.m_vecTabs.clear()},Object.defineProperty(e.prototype,"is_popup_active",{get:function(){return s.f.UIStore.BIsTabSetActive(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_visible",{get:function(){return s.f.UIStore.BIsTabSetVisible(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_focused",{get:function(){return s.f.UIStore.BIsTabSetFocused(this)},enumerable:!1,configurable:!0}),e.prototype.Serialize=function(){for(var e=[],t=0,n=this.m_vecTabs;t<n.length;t++){var o=n[t];o.GetUniqueID().startsWith("br")||e.push(o.GetUniqueID())}return{tabs:e,active_tab:this.activeTab&&this.activeTab.GetUniqueID()}},Object(o.c)([i.A],e.prototype,"m_id",void 0),Object(o.c)([i.A],e.prototype,"m_activeTab",void 0),Object(o.c)([i.i],e.prototype,"AddTab",null),Object(o.c)([i.i],e.prototype,"ActivateTab",null),Object(o.c)([i.i],e.prototype,"ActivateNextTab",null),Object(o.c)([i.i],e.prototype,"ActivatePreviousTab",null),Object(o.c)([i.i],e.prototype,"DeactivateTab",null),Object(o.c)([i.i],e.prototype,"RemoveTab",null),Object(o.c)([i.i],e.prototype,"OnPopupClosed",null),Object(o.c)([i.i],e.prototype,"CloseAllTabs",null),e}()},"4HGb":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var o=n("mrSG"),r=n("Kqva"),i=n("hRO2"),a=(n("qeMu"),n("/511")),s=(n("s+DT"),function(){function e(e,t,n,o,r){if(o)this.m_eMsg=o.m_eMsg,this.m_bValid=o.m_bValid,this.m_bValid&&(this.m_netPacket=o.m_netPacket,this.m_cubHeader=o.m_cubHeader,this.m_header=o.m_header,this.InitForType(n));else{if(this.m_header=new a.f(null),this.m_bValid=!0,t)if(this.m_netPacket=t,this.m_netPacket.SeekGetHead(),this.m_eMsg=this.m_netPacket.GetUint32(),2147483648&this.m_eMsg){this.m_eMsg=2147483647&this.m_eMsg,this.m_cubHeader=this.m_netPacket.GetUint32();try{a.f.deserializeBinaryFromReader(this.m_header,new i.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_cubHeader)),this.m_netPacket.SeekGetCurrent(this.m_cubHeader),n&&this.InitForType(n)}catch(e){console.error("Exception deserializing protobuf",e),this.m_bValid=!1}}else this.m_bValid=!1;else e&&(this.m_eMsg=e),n&&(this.m_body=new n);r&&this.m_header.set_jobid_target(r.Hdr().jobid_target())}}return e.InitHeaderFromPacket=function(t){return new e(void 0,t)},e.prototype.InitForType=function(e){if(this.m_body=new e,this.m_netPacket){this.m_netPacket.SeekGetHead(8+this.m_cubHeader);try{e.deserializeBinaryFromReader(this.m_body,new i.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_netPacket.GetCountBytesRemaining()))}catch(e){this.m_bValid=!1,console.error("Exception parsing protobuf message body.  Definitions may be out of sync with server version."),console.log(e.stack||e)}}},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.Body=function(){return this.m_body},e.prototype.SetBodyJSON=function(e){e.toObject=function(){return e},this.m_body=e},e.prototype.Hdr=function(){return this.m_header},e.prototype.GetEMsg=function(){return this.m_eMsg},e.prototype.SetEMsg=function(e){this.m_eMsg=e},e.prototype.GetEResult=function(){return this.Hdr().eresult()},e.prototype.Serialize=function(){var e=this.m_header.serializeBinary(),t=this.m_body.serializeBinary(),n=2147483648|this.m_eMsg,o=new Uint8Array(8+e.length+t.length),i=new r.b(o);return i.PutUint32(n),i.PutUint32(e.length),i.PutBytes(e),i.PutBytes(t),o},e.prototype.SerializeBody=function(){var e=this.m_body.serializeBinary(),t=new Uint8Array(e.length);return new r.b(t).PutBytes(e),t},e.prototype.DEBUG_ToObject=function(){return{}},e.prototype.DEBUG_LogToConsole=function(){},e}()),c=function(e){function t(t,n,o,r){return void 0===n&&(n=0),e.call(this,n,o,t,r)||this}return Object(o.d)(t,e),t.InitFromPacket=function(e,n){return new t(e,0,n)},t.InitFromMsg=function(e,n){return new t(e,void 0,void 0,n)},t.Init=function(e,n){return new t(e,n)},t.prototype.Body=function(){return e.prototype.Body.call(this)},t.prototype.SetBodyFields=function(e){var t=this,n=function(n){Array.isArray(e[n])?o.Body()["add_"+n]&&e[n].forEach((function(e){t.Body()["add_"+n](e)})):o.Body()["set_"+n]&&o.Body()["set_"+n](e[n])},o=this;for(var r in e)n(r)},t}(s)},"5FJe":function(e,t,n){"use strict";n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return D}));var o,r=n("mrSG"),i=n("UqDm"),a=n("4HGb"),s=n("s+DT"),c=n("R/D/"),l=n("3Liw"),p=n("LAqV"),u=n("2vnA"),m=n("oh5H"),d=n("+M9t"),h=n("HxRt"),f=n("XCHq"),_=-6;!function(e){e[e.eOnlineOnly=0]="eOnlineOnly",e[e.eOnlineOnlyNotInGame=1]="eOnlineOnlyNotInGame",e[e.eOfflineOnly=2]="eOfflineOnly",e[e.eIncomingInvites=3]="eIncomingInvites",e[e.eAll=4]="eAll"}(o||(o={}));var g=function(){function e(e){this.m_eDisplayType=o.eAll,this.m_strName="",this.m_bCollapsed=!1,this.m_OnHeaderClick=void 0,this.m_rgAccountIDMembers=u.A.array(),this.m_setMembers=new Set,this.m_strName=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},set:function(e){this.m_strName=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display_type",{get:function(){return this.m_eDisplayType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onheaderclick",{get:function(){return this.m_OnHeaderClick},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this.m_bCollapsed},set:function(e){this.m_bCollapsed=e},enumerable:!1,configurable:!0}),e.prototype.GetCurrentMemberSet=function(){return this.m_setMembers},Object.defineProperty(e.prototype,"member_count",{get:function(){return this.display_type==o.eAll?this.unfiltered_count:this.member_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.member_accountid_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,n=0,o=this.member_list_unsorted;n<o.length;n++){var r=o[n];r.persona.is_online&&(e++,r.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!1,configurable:!0}),e.prototype.SetOnHeaderClick=function(e){this.m_OnHeaderClick=e},e.prototype.Clear=function(){this.m_rgAccountIDMembers.clear(),this.m_setMembers.clear()},e.prototype.AddMember=function(e){this.HasMember(e)||(this.m_setMembers.add(e),this.m_rgAccountIDMembers.push(e))},e.prototype.RemoveMember=function(e){this.HasMember(e)&&(this.m_setMembers.delete(e),i.c(this.m_rgAccountIDMembers,e))},e.prototype.HasMember=function(e){return this.m_setMembers.has(e)},Object.defineProperty(e.prototype,"GetRawMemberList",{get:function(){return this.m_rgAccountIDMembers.map((function(e){return p.f.FriendStore.GetPlayer(e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(d.b.DefaultFriendSortComparator),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){for(var e=[],t=0,n=this.GetRawMemberList;t<n.length;t++){var r=n[t];if((this.display_type!=o.eOnlineOnly||r.persona.is_online)&&(this.display_type!=o.eOfflineOnly||!r.persona.is_online)){if(this.display_type==o.eOnlineOnlyNotInGame){if(!r.persona.is_online||r.persona.is_ingame)continue;if(r.persona.m_broadcastAppId&&r.persona.m_broadcastAppId==f.b.appID)continue}e.push(r)}}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_accountid_list",{get:function(){return this.m_rgAccountIDMembers},enumerable:!1,configurable:!0}),Object(r.c)([u.A],e.prototype,"m_strName",void 0),Object(r.c)([u.A],e.prototype,"m_bCollapsed",void 0),Object(r.c)([u.l],e.prototype,"member_count",null),Object(r.c)([u.l],e.prototype,"unfiltered_count",null),Object(r.c)([u.l],e.prototype,"member_counts",null),Object(r.c)([u.i],e.prototype,"SetOnHeaderClick",null),Object(r.c)([u.i],e.prototype,"Clear",null),Object(r.c)([u.i],e.prototype,"AddMember",null),Object(r.c)([u.i],e.prototype,"RemoveMember",null),Object(r.c)([u.l],e.prototype,"member_list",null),Object(r.c)([u.l],e.prototype,"member_list_unsorted",null),e}(),b=function(e){function t(t,n,o,r){void 0===n&&(n=-1),void 0===o&&(o=!1),void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.m_bModifiable=!1,i.m_bAcceptsGroupRemovals=!1,i.m_iGroupID=n,i.m_bModifiable=o,i.m_bAcceptsGroupRemovals=r,i}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.m_iGroupID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return""+this.m_iGroupID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modifiable",{get:function(){return this.m_bModifiable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accepts_group_removals",{get:function(){return this.m_bAcceptsGroupRemovals},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GetRawMemberList",{get:function(){return this.member_accountid_list.map((function(e){return p.f.FriendStore.GetPlayer(e)}))},enumerable:!1,configurable:!0}),t.prototype.GetMembersMatchingSearch=function(e){for(var t=[],n=0,o=this.GetRawMemberList;n<o.length;n++){var r=o[n];r.BMatchesSearchString(e,!1)&&t.push(r)}return t.sort(d.b.DefaultFriendSortComparator),t},Object(r.c)([u.l],t.prototype,"GetRawMemberList",null),t}(g),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"display_type",{get:function(){return p.f.SettingsStore.FriendsSettings.bHideOfflineFriendsInTagGroups?o.eOnlineOnly:o.eAll},enumerable:!1,configurable:!0}),t}(b),y=function(e){function t(t,n){var r=e.call(this,t,n,!1,!0)||this;return r.m_eDisplayType=o.eOnlineOnlyNotInGame,r}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"all"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"display_type",{get:function(){return p.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame?o.eOnlineOnlyNotInGame:o.eOnlineOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){return p.f.SettingsStore.FriendsSettings.bHideCategorizedFriends},enumerable:!1,configurable:!0}),t}(b),S=function(e){function t(t,n){return e.call(this,t,n,!1,!0)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"offline"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){var e=p.f.SettingsStore.FriendsSettings;return e.bHideCategorizedFriends&&!e.bHideOfflineFriendsInTagGroups},enumerable:!1,configurable:!0}),t}(b),C=function(e){function t(t,n){return e.call(this,t,n,!1,!0)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"outgoing"},enumerable:!1,configurable:!0}),t}(b),O=function(e){function t(t,n){return e.call(this,t,n,!1,!0)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"ingame"},enumerable:!1,configurable:!0}),t}(b),I=function(e){function t(t,n){var r=e.call(this,t,n,!1,!0)||this;return r.m_mapSteamIDToMutualFriends=u.A.map(),r.m_unMutualFriendsCacheHash=0,r.m_eDisplayType=o.eIncomingInvites,r}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"incominginvites"},enumerable:!1,configurable:!0}),t.prototype.GetMutualFriendsCacheHash=function(){return this.m_unMutualFriendsCacheHash},t.prototype.SetMutualFriendsCacheHash=function(e){this.m_unMutualFriendsCacheHash=e},t.prototype.SetMutualFriends=function(e){this.m_mapSteamIDToMutualFriends.replace(e)},Object.defineProperty(t.prototype,"map_steamid_to_mutual_friends",{get:function(){return this.m_mapSteamIDToMutualFriends},enumerable:!1,configurable:!0}),t}(b),E=function(e){function t(t){return e.call(this,"",t,!1,!1)||this}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"is_initialized",{get:function(){return 0!=this.id&&p.f.AppInfoStore.GetAppInfo(this.id).is_initialized},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"game_"+this.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return!this.is_initialized||this.id<0?"":p.f.AppInfoStore.GetAppInfo(this.id).name},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon_url",{get:function(){return!this.is_initialized||this.id<0?"":p.f.AppInfoStore.GetAppInfo(this.id).icon_url},enumerable:!1,configurable:!0}),t.prototype.PlayerGroupSortComparator=function(e,t,n,o){var r=e.persona.player_group,i=t.persona.player_group,a=r?Math.max(e.persona.player_group_size,n.get(r)||1):1,s=i?Math.max(t.persona.player_group_size,n.get(i)||1):1;return a!=s?s-a:a>1&&r!=i?r.localeCompare(i):o(e,t)},Object.defineProperty(t.prototype,"member_list",{get:function(){for(var e=this,t=[],n=new Map,o=0,r=this.GetRawMemberList;o<r.length;o++){var i=r[o];if(t.push(i),i.persona.player_group){var a=n.get(i.persona.player_group);n.set(i.persona.player_group,a?a+1:1)}}var s=d.b.DefaultFriendSortComparator;return 0==this.id?t.sort(s):t.sort((function(t,o){return e.PlayerGroupSortComparator(t,o,n,s)})),t},enumerable:!1,configurable:!0}),Object(r.c)([u.l],t.prototype,"member_list",null),t}(b),w={groups:{offline:!0,outgoing:!0}},A=function(){function e(){this.m_mapCollapsePrefs=u.A.map()}return e.prototype.Init=function(){var e=this;p.f.SettingsStore.GetObjectFromLocalStorageWhenReady("FriendGroupCollapse",w).then((function(t){for(var n in e.m_mapCollapsePrefs.clear(),t.groups)e.m_mapCollapsePrefs.set(n,t.groups[n])}))},e.prototype.GetUserGroupCollapsed=function(e){return!!this.m_mapCollapsePrefs.get(e)},e.prototype.SetUserGroupCollapsed=function(e,t){!!this.m_mapCollapsePrefs.get(e)!=t&&(t||w.groups[e]?this.m_mapCollapsePrefs.set(e,t):this.m_mapCollapsePrefs.delete(e),this.WritePrefs())},e.prototype.ToggleUserGroupCollapsed=function(e){this.SetUserGroupCollapsed(e,!this.GetUserGroupCollapsed(e))},e.prototype.WritePrefs=function(){p.f.SettingsStore.StoreObjectInLocalStorage("FriendGroupCollapse",{groups:this.m_mapCollapsePrefs.toJSON()})},Object(r.c)([u.i],e.prototype,"SetUserGroupCollapsed",null),Object(r.c)([u.i],e.prototype,"ToggleUserGroupCollapsed",null),e}(),D=function(){function e(e){this.m_FriendGroupDisplayPrefs=new A,this.m_mapGroups=u.A.map(),this.m_mapGameGroups=u.A.map(),this.m_singletonGameGroup=new E(0),this.m_groupAllFriends=new y(Object(m.d)("#FriendGroup_Online"),-1),this.m_groupOfflineFriends=new S(Object(m.d)("#FriendGroup_Offline"),-3),this.m_groupIngameFriends=new O(Object(m.d)("#FriendGroup_InGame"),-4),this.m_groupIncomingInvites=new I(Object(m.d)("#FriendGroup_IncomingInvites"),-5),this.m_groupOutgoingInvites=new C(Object(m.d)("#FriendGroup_Outgoing"),-6),this.m_FriendStore=e,this.m_groupOfflineFriends.m_eDisplayType=o.eOfflineOnly}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupDisplayPrefs.Init(),this.m_CMInterface.AddOnLogonCallback((function(){return Object(r.b)(t,void 0,void 0,(function(){var e,t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=a.b.Init(h.a),[4,h.f.GetCategories(this.m_CMInterface.GetServiceTransport(),e)];case 1:return 1==(t=n.sent()).GetEResult()&&this.RecvCategoriesList(t.Body()),[2]}}))}))}),47)},Object.defineProperty(e.prototype,"all_friends",{get:function(){return this.m_groupAllFriends},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ingame_group",{get:function(){return this.m_groupIngameFriends},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"incoming_invites_group",{get:function(){return this.m_groupIncomingInvites},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outgoing_invites_group",{get:function(){return this.m_groupOutgoingInvites},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friend_groups",{get:function(){return Object(r.g)(this.game_groups,this.user_groups,this.default_groups)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupDisplayPrefs",{get:function(){return this.m_FriendGroupDisplayPrefs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"user_groups",{get:function(){var e=[];return this.m_mapGroups.forEach((function(t){e.push(t)})),e.sort((function(e,t){return e.name.localeCompare(t.name)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game_groups",{get:function(){var e=[],t=2;return 1==this.m_singletonGameGroup.unfiltered_count&&(t=1),this.m_mapGameGroups.forEach((function(n){n.name&&n.member_count>=t&&e.push(n)})),e.sort((function(e,t){return e.member_count==t.member_count?e.name.localeCompare(t.name):t.member_count-e.member_count})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"singleton_game_group",{get:function(){if(1==this.m_singletonGameGroup.unfiltered_count){var e=this.m_singletonGameGroup.member_accountid_list[0];if(!p.f.FriendStore.GetPlayer(e).persona.is_in_nonsteam_game)return}return this.m_singletonGameGroup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"default_groups",{get:function(){return[this.m_groupAllFriends,this.m_groupOfflineFriends]},enumerable:!1,configurable:!0}),e.prototype.OnFullFriendsListUpdateStart=function(){this.m_groupOfflineFriends.Clear(),this.m_groupAllFriends.Clear(),this.m_groupIncomingInvites.Clear(),this.m_groupOutgoingInvites.Clear()},e.prototype.OnFullFriendsListUpdateComplete=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear();for(var e=0,t=this.m_FriendStore.all_friends;e<t.length;e++){var n=t[e];if(n.persona.is_ingame){var o=n.persona.is_in_nonsteam_game?_:n.persona.m_unGamePlayedAppID;this.OnFriendGameChanged(n.accountid,0,o)}}},e.prototype.OnPersonaStateCacheReset=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear()},e.prototype.OnFriendAdded=function(e){this.m_groupAllFriends.AddMember(e),this.m_groupOfflineFriends.AddMember(e)},e.prototype.OnFriendRemoved=function(e){this.m_groupAllFriends.RemoveMember(e),this.m_groupOfflineFriends.RemoveMember(e),this.m_groupIngameFriends.RemoveMember(e),this.m_singletonGameGroup.RemoveMember(e),this.m_mapGroups.forEach((function(t){t.RemoveMember(e)})),this.m_mapGameGroups.forEach((function(t){t.RemoveMember(e)}))},e.prototype.OnFriendGameChanged=function(e,t,n){var o=t==_?this.m_singletonGameGroup:0!=t?this.m_mapGameGroups.get(t):null,r=n==_?this.m_singletonGameGroup:0!=n?this.m_mapGameGroups.get(n):null;if(!(o&&r&&t==n||r&&r.HasMember(e))){if(o&&o.HasMember(e)&&(o.RemoveMember(e),o!=this.m_singletonGameGroup&&(0==o.unfiltered_count?this.m_singletonGameGroup.RemoveMember(e):1==o.unfiltered_count&&this.m_singletonGameGroup.AddMember(o.member_accountid_list[0]))),r)r!=this.m_singletonGameGroup&&(1==r.unfiltered_count?this.m_singletonGameGroup.RemoveMember(r.member_accountid_list[0]):0==r.unfiltered_count&&this.m_singletonGameGroup.AddMember(e)),r.AddMember(e);else if(0!=n){var i=new E(n);i.AddMember(e),this.m_singletonGameGroup.AddMember(e),this.m_mapGameGroups.set(n,i)}0!=n?this.m_groupIngameFriends.AddMember(e):this.m_groupIngameFriends.RemoveMember(e)}},e.prototype.OnIncomingInviteAdded=function(e){this.m_groupIncomingInvites.AddMember(e)},e.prototype.OnIncomingInviteRemoved=function(e){this.m_groupIncomingInvites.RemoveMember(e)},e.prototype.OnOutgoingInviteAdded=function(e){this.m_groupOutgoingInvites.AddMember(e)},e.prototype.OnOutgoingInviteRemoved=function(e){this.m_groupOutgoingInvites.RemoveMember(e)},e.prototype.EnsureMutualFriendsForIncomingInvites=function(){var e=this;function t(e){for(var t=2166136261,n=0;n<e.length;++n)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}for(var n=0,o=0,r=this.m_groupIncomingInvites.member_list;o<r.length;o++){var i=r[o];n^=t(""+i.accountid)}if(this.m_groupIncomingInvites.GetMutualFriendsCacheHash()!=n){this.m_groupIncomingInvites.SetMutualFriendsCacheHash(n);var s=a.b.Init(l.d);l.m.GetMutualFriendsForIncomingInvites(this.m_CMInterface.GetServiceTransport(),s).then((function(t){if(1==t.GetEResult()&&e.m_groupIncomingInvites.GetMutualFriendsCacheHash()==n){for(var o=u.A.map(),r=0,i=t.Body().incoming_invite_mutual_friends_lists();r<i.length;r++){for(var a=i[r],s=new Set,c=0,l=a.mutual_friend_account_ids();c<l.length;c++){var p=l[c];s.add(p)}o.set(a.steamid(),s)}e.m_groupIncomingInvites.SetMutualFriends(o)}}))}},e.prototype.CreateGroup=function(e,t){var n=this,o=a.b.Init(c.d,5560);return o.Body().set_groupname(e),t&&o.Body().set_steamid_friends(t),new Promise((function(r,i){n.m_CMInterface.SendMsgAndAwaitResponse(o,c.e).then((function(o){1==o.Body().eresult()&&Object(u.E)((function(){var r=o.Body().groupid(),i=new v(e,o.Body().groupid(),!0);if(t)for(var a=0,c=t;a<c.length;a++){var l=c[a];i.AddMember(new s.a(l).GetAccountID())}n.m_mapGroups.set(r,i)})),r(1==o.Body().eresult())})).catch((function(){r(!1)}))}))},e.prototype.ManageGroup=function(e,t,n,o){var r=this;if(t==e.name&&!n&&!o)return Promise.resolve(!0);var i=a.b.Init(c.k,5564);return i.Body().set_groupid(e.id),t&&t!=e.name&&i.Body().set_groupname(t),n&&i.Body().set_steamid_friends_added(n),o&&i.Body().set_steamid_friends_removed(o),new Promise((function(a,l){r.m_CMInterface.SendMsgAndAwaitResponse(i,c.l).then((function(r){if(1==r.Body().eresult()){e.name=t;for(var i=0,c=n;i<c.length;i++){var l=c[i];e.AddMember(new s.a(l).GetAccountID())}for(var p=0,u=o;p<u.length;p++){l=u[p];e.RemoveMember(new s.a(l).GetAccountID())}}a(1==r.Body().eresult())})).catch((function(){a(!1)}))}))},e.prototype.RemoveGroup=function(e){var t=this,n=a.b.Init(c.f,5562);n.Body().set_groupid(e.id),this.m_CMInterface.SendMsgAndAwaitResponse(n,c.g).then((function(n){1==n.Body().eresult()&&t.HandleGroupRemoval(e)}))},e.prototype.HandleGroupRemoval=function(e){this.m_mapGroups.delete(e.id)},Object.defineProperty(e.prototype,"categorized_friend_set",{get:function(){var e=new Set;return this.m_mapGroups.forEach((function(t){t.member_accountid_list.forEach(e.add.bind(e))})),e},enumerable:!1,configurable:!0}),e.prototype.RecvCategoriesList=function(e){this.m_mapGroups.clear();for(var t=0,n=e.categories();t<n.length;t++){var r=n[t],i=r.groupid(),a=new v(r.name()||"",r.groupid(),!0);a.m_eDisplayType=o.eAll,this.m_mapGroups.set(i,a);for(var s=0,c=r.accountid_members();s<c.length;s++){var l=c[s];a.AddMember(l)}}},e.prototype.TransferFriendFromToGroup=function(e,t,n){var o,r=this,i=n&&n.modifiable,s=t&&t.modifiable,l=[];i&&((o=a.b.Init(c.a,5566)).Body().set_groupid(n.id),o.Body().set_steamiduser(e.persona.m_steamid.ConvertTo64BitString()),l.push(this.m_CMInterface.SendMsgAndAwaitResponse(o,c.b).then((function(t){return 1==t.Body().eresult()&&(n.AddMember(e.accountid),!0)}))));s&&((o=a.b.Init(c.o,5568)).Body().set_groupid(t.id),o.Body().set_steamiduser(e.persona.m_steamid.ConvertTo64BitString()),l.push(this.m_CMInterface.SendMsgAndAwaitResponse(o,c.p).then((function(n){return 1==n.Body().eresult()&&(t.RemoveMember(e.accountid),0==t.unfiltered_count&&r.HandleGroupRemoval(t),!0)}))));return Promise.all(l)},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this;e.metrics().set_friends_category_count(this.m_mapGroups.size),e.metrics().set_friends_categorized_count(this.categorized_friend_set.size),this.singleton_game_group&&e.metrics().set_friends_in_game_singleton_count(this.singleton_game_group.unfiltered_count),e.metrics().set_game_group_count(this.game_groups.length);var n=function(e){return t.m_FriendGroupDisplayPrefs.GetUserGroupCollapsed(e.unique_id)},o=e.ui_state().category_collapse();o.set_in_game_collapsed(n(this.m_singletonGameGroup)),o.set_online_collapsed(n(this.m_groupAllFriends)),o.set_offline_collapsed(n(this.m_groupOfflineFriends)),o.set_categories_collapsed(i.b(Array.from(this.m_mapGroups.values()),n)),o.set_game_groups_collapsed(i.b(Array.from(this.m_mapGameGroups.values()),n))},Object(r.c)([u.l],e.prototype,"friend_groups",null),Object(r.c)([u.l],e.prototype,"user_groups",null),Object(r.c)([u.l],e.prototype,"game_groups",null),Object(r.c)([u.l],e.prototype,"singleton_game_group",null),Object(r.c)([u.l],e.prototype,"default_groups",null),Object(r.c)([u.i],e.prototype,"OnFullFriendsListUpdateComplete",null),Object(r.c)([u.i],e.prototype,"OnPersonaStateCacheReset",null),Object(r.c)([u.i],e.prototype,"HandleGroupRemoval",null),Object(r.c)([u.l],e.prototype,"categorized_friend_set",null),Object(r.c)([u.i],e.prototype,"RecvCategoriesList",null),Object(r.c)([u.i],e.prototype,"TransferFriendFromToGroup",null),e}()},"5Nu3":function(e,t,n){"use strict";n.d(t,"b",(function(){return B})),n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return F}));var o=n("mrSG"),r=n("2vnA"),i=n("4HGb"),a=n("s+DT"),s=n("OJz+"),c=n("RBVV"),l=n("3zHc"),p=n("VtNY"),u=n("LAqV"),m=n("tkkQ"),d=function(){function e(e,t,n,o,r,i,a){this.unAccountIDInviter=e,this.rtTimestamp=t,this.appID=n,this.connectString=o,this.remoteplayString=r,this.lobbyID=a,this.bDismissed=i,this.bAccepted=!1}return e.prototype.AcceptGameInvite=function(){var e,t=a.a.InitFromAccountID(this.unAccountIDInviter);null!=this.lobbyID?e="steam://joinlobby/"+this.appID+"/"+this.lobbyID+"/"+t.ConvertTo64BitString():this.remoteplayString?e=m.a.IN_MOBILE?"https://s.team/remoteplay/connect/"+t.ConvertTo64BitString()+"?appid="+this.appID+"&"+this.remoteplayString:"steam://remoteplay/connect/"+t.ConvertTo64BitString()+"?appid="+this.appID+"&"+this.remoteplayString:(e="steam://rungame/"+this.appID+"/"+t.ConvertTo64BitString(),void 0!==this.connectString&&(e+="/"+encodeURIComponent(this.connectString))),u.f.OpenURLInBrowser(e,u.a),this.bAccepted=!0,u.f.ChatStore.GameInviteStore.RecordDismissTime(this)},e.prototype.DismissInvite=function(){this.bDismissed=!0,u.f.ChatStore.GameInviteStore.RecordDismissTime(this)},Object.defineProperty(e.prototype,"bOld",{get:function(){return u.f.GetServerRTime32()-this.rtTimestamp>21600},enumerable:!1,configurable:!0}),Object(o.c)([r.A],e.prototype,"bDismissed",void 0),Object(o.c)([r.A],e.prototype,"bAccepted",void 0),Object(o.c)([r.i],e.prototype,"AcceptGameInvite",null),Object(o.c)([r.i],e.prototype,"DismissInvite",null),e}(),h={dismisstimes:{}},f=function(){function e(){this.m_mapGameInvites=new Map,this.m_mapDismissedInvites=r.A.map(),this.m_mapInviteByCode=new Map}return e.prototype.Init=function(){var e=this;u.f.SettingsStore.GetObjectFromLocalStorageWhenReady("GameInvites",h).then((function(t){var n=new Date;for(var o in n.setDate(n.getDate()-14),e.m_mapDismissedInvites.clear(),t.dismisstimes){var r=parseInt(o),i=t.dismisstimes[o];new Date(1e3*i)<n||e.m_mapDismissedInvites.set(r,i)}}))},e.prototype.RegisterGameInvite=function(e,t,n,o,r,i){var a=this.m_mapGameInvites.get(e);a||(a=new Map,this.m_mapGameInvites.set(e,a));var s=a.get(t);if(!s){var c=!1,l=this.m_mapDismissedInvites.get(e);l&&(c=t<=l),s=new d(e,t,n,o,r,c,i),a.set(t,s),a.forEach((function(e){e.rtTimestamp<t&&e.DismissInvite()}))}return s},e.prototype.RecordDismissTime=function(e){var t=this.m_mapDismissedInvites.get(e.unAccountIDInviter);t&&t>e.rtTimestamp||(this.m_mapDismissedInvites.set(e.unAccountIDInviter,e.rtTimestamp),this.WriteToLocalStorage())},e.prototype.WriteToLocalStorage=function(){u.f.SettingsStore.StoreObjectInLocalStorage("GameInvites",{dismisstimes:this.m_mapDismissedInvites})},e}(),_=function(){function e(){this.bCollapsed=!1}return e.prototype.IsEmpty=function(){return!this.bCollapsed&&void 0===this.nDefaultWidth&&void 0===this.nDesiredWidth},e}(),g=function(){function e(){this.m_mapEmbed=new r.b}return e.prototype.Init=function(){var e=this;u.f.SettingsStore.GetObjectFromLocalStorageWhenReady("ChatEmbeds",{}).then((function(t){for(var n in e.m_mapEmbed.clear(),t){var o=new _;Object.assign(o,t[n]),e.m_mapEmbed.set(n,o)}}))},e.prototype.GetKey=function(e,t){return t+"_"+e},e.prototype.EvictOldestIfNecessary=function(){if(this.m_mapEmbed.size>100){var e=Array.from(this.m_mapEmbed.keys()).sort()[0];this.m_mapEmbed.delete(e)}},e.prototype.GetOrCreateEmbedData=function(e,t){var n=this.GetKey(e,t),o=this.m_mapEmbed.get(n);return o||((o=new _).bCollapsed=!1),o},e.prototype.SaveEmbedData=function(e,t,n){n.IsEmpty()?this.m_mapEmbed.delete(this.GetKey(e,t)):this.m_mapEmbed.set(this.GetKey(e,t),n),this.EvictOldestIfNecessary(),this.WriteToLocalStorage()},e.prototype.WriteToLocalStorage=function(){u.f.SettingsStore.StoreObjectInLocalStorage("ChatEmbeds",this.m_mapEmbed)},e.prototype.GetCollapsedState=function(e,t){var n=this.m_mapEmbed.get(this.GetKey(e,t));return!(!n||!n.bCollapsed)},e.prototype.SetCollapsedState=function(e,t,n){var o=this.GetOrCreateEmbedData(e,t);o.bCollapsed=n,this.SaveEmbedData(e,t,o)},e.prototype.GetWidths=function(e,t){var n=this.m_mapEmbed.get(this.GetKey(e,t));if(n&&n.nDesiredWidth&&n.nDefaultWidth)return{nDesiredWidth:n.nDesiredWidth,nDefaultWidth:n.nDefaultWidth}},e.prototype.SetWidths=function(e,t,n,o){var r=this.GetOrCreateEmbedData(e,t);n==o?(delete r.nDefaultWidth,delete r.nDesiredWidth):(r.nDesiredWidth=n,r.nDefaultWidth=o),this.SaveEmbedData(e,t,r)},e}(),b=n("rsEv"),v=n("V7Fl"),y=n("1KZt"),S=n("R/D/"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fnRecvEmoticonList=Object(s.a)(9331,S.h,(function(e){for(var n=[],o=0,r=e.Body().emoticons();o<r.length;o++){var i=r[o],a=i.name();if(a.startsWith("^"))n.push({name:a});else{var s={name:a.substr(1,a.length-2)},c=s.name.toLowerCase();c!=s.name&&(s.name_normalized=c),i.time_last_used()&&(s.last_used=i.time_last_used()),i.use_count()&&(s.use_count=i.use_count()),i.time_received()&&(s.time_received=i.time_received()),n.push(s)}}t.OnEmoticonListReceived(n),e.Body().stickers()&&(t.m_rgStickers=e.Body().stickers().map((function(e){return{name:e.name(),count:e.count(),time_received:e.time_received()}}))),e.Body().effects()&&(t.m_rgEffects=e.Body().effects().map((function(e){return{name:e.name(),count:e.count(),time_received:e.time_received()}})));var l=t.m_rgStickers.map((function(e){return e.time_received})).reduce((function(e,t){return Math.max(e,t)}),Number.MIN_SAFE_INTEGER),p=t.m_rgEffects.map((function(e){return e.time_received})).reduce((function(e,t){return Math.max(e,t)}),Number.MIN_SAFE_INTEGER);t.m_rtLastStickerOrEffect=Math.max(l,p)})),t}return Object(o.d)(t,e),t.prototype.Init=function(e){this.m_CMInterface=e},t.prototype.BInitialized=function(){return!!this.m_CMInterface},t.prototype.GetServerTime=function(){return this.m_CMInterface.GetServerRTime32()},t.prototype.RequestEmoticonListInternal=function(){var e=this;this.m_CMInterface.RunWhenLoggedOn((function(){var t=i.b.Init(S.j,9330);e.m_CMInterface.Send(t)}))},t}(y.a),O=n("geE1"),I=n("7sd/"),E=n("UqDm"),w=n("E7zH");function A(e,t){if(!e||!t)return[];for(var n=[],o=e.values(),r=o.next();!r.done;)t(r.value)&&n.push(r.value),r=o.next();return n}var D=n("/FkP"),T=n("oh5H"),M=n("/SYB"),j=n("XaMz"),L=n("2sgH"),G=n("9Eit"),N=n("ujHl");function R(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=Math.floor(Math.random()*t*1e3),[4,new Promise((function(e){return setTimeout(e,n)}))];case 1:return o.sent(),[2,e()]}}))}))}var k=n("ha6C"),B=(n("tZiA"),function(){function e(e){var t=this;this.LOG=M.b.create((function(){return"chatstore"}),!1),this.m_EmoticonStore=new C,this.m_FriendChatStore=new O.b(this),this.m_InviteStore=new p.a(this),this.m_GameInviteStore=new f,this.m_ChatRoomGroupDisplayPrefs=new v.c,this.m_EmbedStore=new g,this.m_mapChatGroups=r.A.map(),this.m_mapActiveChatGroupsToRefCount=r.A.map(),this.m_mapVirtualizedMemberListViews=new Map,this.m_mapClanChatsByClanID=new Map,this.m_bReceivedChatGroupList=!1,this.m_bReadyToRender=!1,this.m_bSendingActiveGroups=!1,this.m_bSendActiveGroupsQueued=!1,this.m_IncomingChatRoomMessageHandler=Object(s.d)(c.W.NotifyIncomingChatMessageHandler,(function(e){var n=e.Body(),o=t.FindChatRoom(n.chat_group_id(),n.chat_id());if(!o)return 2;var r=new a.a(n.steamid_sender());if(0!=(n.server_message().message()||0))o.AddNewServerMsg(r.GetAccountID(),n.timestamp(),n.ordinal()||0,n.server_message().message(),n.message(),n.server_message().string_param(),n.server_message().accountid_param());else{var i=n.mentions(),s=null;i&&(s={},i.mention_all()&&(s.mention_all=!0),i.mention_here()&&(s.mention_here=!0),i.mention_accountids()&&-1!==i.mention_accountids().indexOf(t.m_FriendStore.self.accountid)&&(s.mention_user=!0)),o.AddNewChatMsgAndNotify(r.GetAccountID(),n.timestamp(),n.ordinal()||0,n.message(),n.message_no_bbcode(),s)}return 1})),this.m_ChatMessageModifiedHandler=Object(s.d)(c.W.NotifyChatMessageModifiedHandler,(function(e){var n=e.Body(),o=t.FindChatRoom(n.chat_group_id(),n.chat_id());if(!o)return 2;for(var r=[],i=0,a=e.Body().messages();i<a.length;i++){var s=a[i];s.deleted&&r.push({rtTimestamp:s.server_timestamp(),unOrdinal:s.ordinal()})}return o.UpdateChatMessageDeletedState(r,D.e.Deleting),1})),this.m_IncomingChatRoomHeaderStateChangeHandler=Object(s.c)(c.W.NotifyChatRoomHeaderStateChangeHandler,(function(e){var n=e.Body().header_state().chat_group_id(),o=t.m_mapChatGroups.get(n);return o&&o.UpdateChatRoomHeaderState(e.Body().header_state()),1})),this.m_IncomingStateChangeHandler=Object(s.c)(c.W.NotifyMemberStateChangeHandler,(function(e){var n=e.Body().chat_group_id(),o=e.Body().change(),r=e.Body().member();m.a.IN_CLIENT&&Object(k.a)("WebChat.OnGroupChatUserStateChange")&&u.f.SettingsStore.BClientHasFeatureOrOnWeb("SteamworksChatAPI")&&SteamClient.WebChat.OnGroupChatUserStateChange(n,r.accountid(),o);var i=t.m_mapChatGroups.get(n);return i&&i.OnUserStateChange(r,o),1})),this.m_IncomingChatRoomGroupRoomsChangeHandler=Object(s.c)(c.W.NotifyChatRoomGroupRoomsChangeHandler,(function(e){var n=e.Body(),o=t.m_mapChatGroups.get(n.chat_group_id());return o&&o.OnRoomStateChange(n),1})),this.m_IncomingChatGroupUserStateChangedHandler=Object(s.c)(c.W.NotifyChatGroupUserStateChangedHandler,(function(e){var n=e.Body(),o=n.chat_group_id(),r=n.user_action();switch(m.a.IN_CLIENT&&Object(k.a)("WebChat.OnGroupChatUserStateChange")&&u.f.SettingsStore.BClientHasFeatureOrOnWeb("SteamworksChatAPI")&&SteamClient.WebChat.OnGroupChatUserStateChange(o,m.c.accountid,r),r){case 1:var i=t.AddJoinedChatRoomGroup(n.group_summary(),n.user_chat_group_state());u.f.UIStore.ShowAndOrActivateChatRoomGroup(u.a,i,!1);break;case 2:case 3:case 10:u.f.VoiceStore.GetActiveChatRoomGroupID()==o&&u.f.VoiceStore.OnUserEndVoiceChat();var a=(i=t.GetChatRoomGroup(o))?i.name:void 0;t.RemoveChatRoomGroup(o),a&&(3==r?u.f.ShowAlert(Object(T.d)("#Alert_YouWereKickedTitle"),Object(T.d)("#Alert_YouWereKickedDescription",a)):10==r&&u.f.ShowAlert(Object(T.d)("#Alert_YouWereBannedTitle"),Object(T.d)("#Alert_YouWereBannedDescription",a)));break;case 7:case 0:i=t.GetChatRoomGroup(o);Object(j.a)(i,"Got state change for ChatRoomGroup we don't know about"),i&&i.UpdateUserState(n.user_chat_group_state());break;case 4:break;default:Object(j.a)(!1,"Don't know how to handle state change of type "+Object(c.cb)(r)+" ")}return 1})),this.m_AckChatMessageEchoHandler=Object(s.d)(c.W.NotifyAckChatMessageEchoHandler,(function(e){var n=e.Body().chat_group_id(),o=e.Body().chat_id(),r=e.Body().timestamp(),i=t.GetChatRoomGroup(n);if(!i)return 2;if(o){var a=i.GetChatRoom(o);if(!a)return 11;a.UpdateLastAckTimeFromServer(r)}else i.UpdateLastAckTimeFromServer(r);return 1})),this.m_IncomingChatRoomDisconnectHandler=Object(s.c)(c.W.NotifyChatRoomDisconnectHandler,(function(e){return R((function(){return Object(r.E)((function(){for(var n=0,o=e.Body().chat_group_ids();n<o.length;n++){var r=o[n],i=t.m_mapChatGroups.get(r);i&&i.OnConnectionRestored(!0)}t.SendActiveChatRoomGroupsToServer()}))}),4),1})),this.m_IncomingMemberListViewUpdatedHandler=Object(s.c)(c.W.NotifyMemberListViewUpdatedHandler,(function(e){var n=t.m_mapVirtualizedMemberListViews.get(e.Body().view_id());return n&&n.OnServerUpdate(e.Body()),1})),this.m_FriendStore=e}return e.prototype.Init=function(e,t){var n=this;this.m_CMInterface=e,this.m_EmoticonStore.Init(e),this.m_VoiceChat=t,this.m_ChatRoomBBCodeParser=u.f.GetChatRoomBBCodeParser(),this.m_FriendChatBBCodeParser=u.f.GetFriendChatBBCodeParser(),this.m_NotificationBBCodeParser=u.f.GetNotificationBBCodeParser(),this.m_ChatRoomEffectSettings=u.f.GetChatRoomEffectSettings(),this.m_ChatRoomGroupDisplayPrefs.Init(u.f.SettingsStore),this.m_EmbedStore.Init(),this.m_FriendChatStore.Init();var o=!1,r=0;return this.m_CMInterface.AddOnLogonCallback((function(){if(o){var t=r<Date.now()/1e3-N.d.PerMinute/2;t?R((function(){return n.RestoreStatePostDisconnect(t)}),4):n.RestoreStatePostDisconnect(t)}else G.b.Init(u.f.Storage,e.steamid.GetAccountID().toString()).then((function(){return n.LoadMyChatRooms()})),n.m_FriendChatStore.OnLogon(),o=!0;n.m_GameInviteStore.Init()}),102),this.m_CMInterface.AddOnDisconnectCallback((function(){return r=Date.now()/1e3}),102),new Promise((function(e){n.m_fnOnReadyToRender=e}))},e.prototype.SetReadyToRender=function(){this.m_bReadyToRender||(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.RestoreStatePostDisconnect=function(e){e&&this.LoadMyChatRooms();var t=this.m_mapActiveChatGroupsToRefCount.toPOJO(),n=Object.keys(t).some((function(e){return t[e]>0}));this.m_FriendChatStore.RestoreStatePostDisconnect(e),this.m_mapChatGroups.forEach((function(t){return t.OnConnectionRestored(e)})),n&&this.SendActiveChatRoomGroupsToServer()},e.prototype.LoadMyChatRooms=function(){var e=this,t=i.b.Init(c.t);c.X.GetMyChatRoomGroups(this.m_CMInterface.GetServiceTransport(),t).then((function(t){Object(r.E)((function(){1!=t.GetEResult()&&!0;for(var n=0,o=t.Body().chat_room_groups();n<o.length;n++){var r=o[n],i=r.group_summary().chat_group_id();if(i){var a=e.m_mapChatGroups.get(i);a||(a=new v.b(e,i),e.m_mapChatGroups.set(i,a)),a.SetInitialGroupState(r.group_summary()),a.UpdateUserState(r.user_chat_group_state()),e.OnGroupAdded(a),a.BHasEverBeenAcked()||u.f.UIStore.ShowUnackedGroup(a)}else!0}e.SetReadyToRender(),e.m_bReceivedChatGroupList=!0}))})).catch((function(t){console.error("Failed to load chat rooms from server",t),e.SetReadyToRender()}))},e.prototype.OnGroupAdded=function(e){e.GetClanID()&&(this.m_mapClanChatsByClanID.set(e.GetClanID(),e.GetGroupID()),this.m_FriendStore.ClanStore.SetClanChatGroupID(e.GetClanID(),e.GetGroupID()))},e.prototype.OnChatRoomActivated=function(e){e.GetGroup().OnActivate()},e.prototype.JoinAndShowChatRoomGroup=function(e,t,n){var o=this.GetChatRoomGroup(t);o&&o.BIsCurrentUserAMember()?u.f.UIStore.ShowAndOrActivateChatRoomGroup(e,o,n):this.m_InviteStore.JoinChatGroup(t,null,e)},e.prototype.AddCreatedChatRoomGroup=function(e,t,n,o){if(!this.m_mapChatGroups.has(t)){var r=new v.b(this,t);this.m_mapChatGroups.set(t,r),r.UpdateGroupState(n),r.UpdateUserState(o),this.OnGroupAdded(r),u.f.UIStore.ShowAndOrActivateChatRoomGroup(e,r,!0)}},e.prototype.AddKnownChatRoomGroup=function(e,t){var n=e.chat_group_id();if(this.m_mapChatGroups.has(n)){(o=this.m_mapChatGroups.get(n)).SetInitialGroupState(e)}else{var o=new v.b(this,n);this.m_mapChatGroups.set(n,o),o.SetInitialGroupState(e),t&&o.UpdateUserState(t),this.OnGroupAdded(o)}},e.prototype.AddJoinedChatRoomGroup=function(e,t){var n=t.chat_group_id(),o=this.m_mapChatGroups.get(n);return o||(o=new v.b(this,n),this.m_mapChatGroups.set(n,o)),e instanceof c.b?o.UpdateGroupState(e):o.SetInitialGroupState(e),this.OnGroupAdded(o),o.UpdateUserState(t),o},e.prototype.RemoveChatRoomGroup=function(e){var t=this.m_mapChatGroups.get(e);if(t){var n=this.m_mapChatGroups.get(e);n&&u.f.UIStore.CloseTabByID(n.unique_id),this.GetRefCountActiveChatRoomGroup(e)<=0&&t.UnloadAndResetGroupState()}},e.prototype.FindChatRoom_Deprecated=function(e){var t=null;return this.m_mapChatGroups.forEach((function(n){var o=n.GetChatRoom(e);o&&(t=o)})),t},e.prototype.FindChatRoom=function(e,t){var n=this.m_mapChatGroups.get(e);return n?n.GetChatRoom(t):null},Object.defineProperty(e.prototype,"chat_group_list_ready",{get:function(){return this.m_bReceivedChatGroupList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VoiceChat",{get:function(){return this.m_VoiceChat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomBBCodeParser",{get:function(){return this.m_ChatRoomBBCodeParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatBBCodeParser",{get:function(){return this.m_FriendChatBBCodeParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NotificationBBCodeParser",{get:function(){return this.m_NotificationBBCodeParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomEffectSettings",{get:function(){return this.m_ChatRoomEffectSettings},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatStore",{get:function(){return this.m_FriendChatStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EmoticonStore",{get:function(){return this.m_EmoticonStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"InviteStore",{get:function(){return this.m_InviteStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GameInviteStore",{get:function(){return this.m_GameInviteStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EmbedStore",{get:function(){return this.m_EmbedStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomGroupDisplayPrefs",{get:function(){return this.m_ChatRoomGroupDisplayPrefs},enumerable:!1,configurable:!0}),e.prototype.GetActiveVoiceChat=function(){var e=this.m_VoiceChat.GetActiveVoiceChatID();if(""!=e){if(t=this.FindChatRoom_Deprecated(e))return t}else{var t,n=this.m_VoiceChat.GetActiveOneOnOneVoiceChatAccountID();if(0!=n)if(t=this.GetFriendChat(n,!1))return t}},e.prototype.GetActiveVoiceChannelName=function(){var e=this.GetActiveVoiceChat();return null!=e?e.name:""},e.prototype.GetFriendChat=function(e,t){return void 0===t&&(t=!0),e==this.FriendStore.self.accountid?null:this.m_FriendChatStore.GetFriendChat(e,t)},e.prototype.GetChatRoomGroup=function(e){return this.m_mapChatGroups.get(e)},Object.defineProperty(e.prototype,"currentChatRoomGroups",{get:function(){return A(this.m_mapChatGroups,(function(e){return e.BIsCurrentUserAMember()}))},enumerable:!1,configurable:!0}),e.prototype.FindChatRoomGroupsMatchingSearch=function(e){return this.currentChatRoomGroups.filter((function(t){return-1!==t.name.toLocaleLowerCase().indexOf(e)}))},Object.defineProperty(e.prototype,"ClanChatRooms",{get:function(){return A(this.m_mapChatGroups,(function(e){return e.BIsClanChatRoom()}))},enumerable:!1,configurable:!0}),e.prototype.GetRefCountActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===t&&(t=0),t},e.prototype.IncRefActiveChatRoomGroup=function(e,t){var n=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===n&&(n=0),n+=1,this.m_mapActiveChatGroupsToRefCount.set(e,n),1==n&&t&&this.SendActiveChatRoomGroupsToServer(),n},e.prototype.DecRefActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e),n=void 0!==t&&t>0;if(Object(j.a)(n,"Attempting to DecRef a Chat Group that has no existing references. Doing nothing."),!n)return 0;if((t-=1)<=0){this.m_mapActiveChatGroupsToRefCount.delete(e);var o=this.m_mapChatGroups.get(e);o&&o.UnloadActiveGroupState(),this.SendActiveChatRoomGroupsToServer()}else this.m_mapActiveChatGroupsToRefCount.set(e,t);return t},e.prototype.OnRestorePopupsComplete=function(){this.m_mapActiveChatGroupsToRefCount.size>0&&this.SendActiveChatRoomGroupsToServer()},e.prototype.SendActiveChatRoomGroupsToServer=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(r){switch(r.label){case 0:if(this.m_bSendingActiveGroups)return this.m_bSendActiveGroupsQueued=!0,[2];e=.5,t=function(){return Object(o.b)(n,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.InternalSendActiveChatRoomGroupsToServer()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))},r.label=1;case 1:return[4,t()];case 2:return r.sent()?[3,4]:[4,new Promise((function(t){return setTimeout(t,1e3*e)}))];case 3:return r.sent(),e*=2,[3,1];case 4:return[2]}}))}))},e.prototype.InternalSendActiveChatRoomGroupsToServer=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(t){return[2,new Promise((function(t){var n=[],o=i.b.Init(c.O);e.m_mapActiveChatGroupsToRefCount.forEach((function(t,r){if(Object(j.a)(t>0,"SendActiveChatRoomGroupsToServer found invalid ref count for chat group."),!(t<=0)){o.Body().add_chat_group_ids(r);var i=e.m_mapChatGroups.get(r);i&&i.readyToRender||o.Body().add_chat_groups_data_requested(r),u.f.SettingsStore.BClientHasFeatureOrOnWeb("ServerVirtualizedMemberLists")&&o.Body().set_virtualize_members_threshold(100),i&&i.BIsClanChatRoom()&&n.push(i.GetClanID())}}));var a=function(o){m.a.IN_CLIENT&&SteamClient.WebChat.SetActiveClanChatIDs(n),o&&void 0!==s&&ClearBackgroundTimeout(s),e.m_bSendingActiveGroups=!1,e.m_bSendActiveGroupsQueued?t(!1):t(o)},s=SetBackgroundTimeout((function(){e.m_bSendActiveGroupsQueued=!0,a(!1)}),1e4);e.m_bSendActiveGroupsQueued=!1,e.m_bSendingActiveGroups=!0,c.X.SetSessionActiveChatRoomGroups(e.m_CMInterface.GetServiceTransport(),o).then((function(t){var o=!1;return Object(r.E)((function(){if(1==t.GetEResult()){for(var r=0,i=t.Body().chat_states();r<i.length;r++){var a=i[r];if(l=e.m_mapChatGroups.get(a.header_state().chat_group_id()))try{l.UpdateGroupState(a),l.BIsClanChatRoom()&&-1===n.indexOf(l.GetClanID())&&n.push(l.GetClanID())}catch(e){o=!0,console.error("exception processing group update for group "+l.GetGroupID(),e)}}for(var s=0,c=t.Body().virtualize_members_chat_group_ids();s<c.length;s++){var l,p=c[s];(l=e.m_mapChatGroups.get(p))&&l.SetMemberListVirtualized(!0)}}else o=!0})),!o}),(function(){return!1})).then(a)}))]}))}))},e.prototype.CreateChatRoomGroup=function(e,t,n,o){var r=this;void 0===o&&(o={});var a=o.unBroadcastAccountId,s=i.b.Init(c.e);s.Body().set_name(t);for(var l=0,p=n;l<p.length;l++){var u=p[l];s.Body().add_steamid_invitees(u)}return a&&s.Body().set_watching_broadcast_accountid(a),c.X.CreateChatRoomGroup(this.m_CMInterface.GetServiceTransport(),s).then((function(t){var n=t.GetEResult();if(1!=n)throw n;return r.AddCreatedChatRoomGroup(e,t.Body().chat_group_id(),t.Body().state(),t.Body().user_chat_state()),t.Body().chat_group_id()}))},e.prototype.LeaveChatRoomGroup=function(e,t){var n=this,o=i.b.Init(c.y);return o.Body().set_chat_group_id(t),c.X.LeaveChatRoomGroup(this.m_CMInterface.GetServiceTransport(),o).then((function(e){var o=e.GetEResult();if(1!=o)throw o;n.RemoveChatRoomGroup(t)}))},e.prototype.FindNamelessChatGroupWithFriends=function(e){if(0==e.length)return null;for(var t=e.map((function(e){return new a.a(e).GetAccountID()})),n=0,o=Array.from(this.m_mapChatGroups.values());n<o.length;n++){var r=o[n];if(!r.IsNamedGroupChat()&&r.BRoomContainsJustTheseFriendsAndSelf(t))return r}return null},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_group_chat_count(E.b(Array.from(this.m_mapChatGroups.values()),(function(e){return e.BIsCurrentUserAMember()}))),this.m_ChatRoomGroupDisplayPrefs.FillInChatUsabilityMetrics(e)},e.prototype.GetChatsWithUnreadPriorityMessages=function(){for(var e=[],t=0,n=this.FriendChatStore.GetFriendsWithUnreadMessages(null);t<n.length;t++){var o=n[t];o.has_unread_priority_messages&&e.push(o)}var r=this;return this.m_mapActiveChatGroupsToRefCount.forEach((function(t,n){r.m_mapChatGroups.get(n).GetChatRoomsWithUnreadPriorityMessages(e)})),e},e.prototype.GetChatToActivateForOldestUnread=function(e){var t=this,n=null,o=function(t){return!(!t.has_unread_priority_messages&&0==t.GetVisibilityState(e))&&(!n||!(n.has_unread_priority_messages&&!t.has_unread_priority_messages)&&(!(n.has_unread_priority_messages||!t.has_unread_priority_messages)||(n.m_msTimeActivated<t.m_msTimeActivated||!(n.m_msTimeActivated>t.m_msTimeActivated)&&n.time_last_message<t.time_last_message)))};this.m_mapActiveChatGroupsToRefCount.forEach((function(e,r){for(var i=0,a=t.m_mapChatGroups.get(r).chatRoomList;i<a.length;i++){var s=a[i];o(s)&&(n=s)}}));for(var r=0,i=this.m_FriendChatStore.GetAllChats();r<i.length;r++){var a=i[r];o(a)&&(n=a)}return n},e.prototype.RegisterVirtualizedMemberListView=function(e){this.m_mapVirtualizedMemberListViews.set(e.GetViewID(),e)},e.prototype.UnregisterVirtualizedMemberListView=function(e){e&&(this.m_mapVirtualizedMemberListViews.delete(e.GetViewID()),e.UnregisterFromServer())},Object(o.c)([r.A],e.prototype,"m_bReceivedChatGroupList",void 0),Object(o.c)([u.g],e.prototype,"JoinAndShowChatRoomGroup",null),Object(o.c)([r.i],e.prototype,"AddCreatedChatRoomGroup",null),Object(o.c)([r.i],e.prototype,"AddKnownChatRoomGroup",null),Object(o.c)([r.i],e.prototype,"AddJoinedChatRoomGroup",null),Object(o.c)([r.i],e.prototype,"RemoveChatRoomGroup",null),Object(o.c)([r.l],e.prototype,"currentChatRoomGroups",null),Object(o.c)([r.l],e.prototype,"ClanChatRooms",null),e}()),P=function(e){function t(t,n){var o=e.call(this)||this;return o.m_rgOnChatFrameChangedCallbacks=[],o.m_bScrolledToBottom=!0,o.m_scrollTop=-1,o.m_scrollHeight=-1,o.m_clientHeight=1,o.m_textEntryFocusCallbacks=new w.a,o.m_tabset=t,o.m_chat=n,o.m_tabset&&o.m_chat.AddChatView(o),o.m_strTextEntry="",o.m_fileUploadManager=new L.a(n),o}return Object(o.d)(t,e),t.prototype.GetTabName=function(){return this.m_chat.name},t.prototype.GetUniqueID=function(){return this.m_chat.unique_id},t.prototype.OnTabFocus=function(){this.OnFocus()},t.prototype.InternalOnTabActivate=function(){this.OnActivate()},t.prototype.OnTabDeactivate=function(){this.OnDeactivate()},t.prototype.OnTabClosed=function(){this.OnViewClosed()},t.prototype.IsChatRoom=function(){return this.m_chat instanceof b.a},t.prototype.IsFriendChat=function(){return this.m_chat instanceof O.a},t.prototype.IsVoiceActive=function(){return this.m_chat.BVoiceActive()},t.prototype.GetUnreadMessageCount=function(){return this.m_chat.unread_message_count},t.prototype.IsTabForChat=function(e){return this.m_chat==e},t.prototype.GetChatView=function(){return this},t.prototype.OnViewClosed=function(){this.m_chat.RemoveChatView(this)},Object.defineProperty(t.prototype,"chat",{get:function(){return this.m_chat},enumerable:!1,configurable:!0}),t.prototype.BIsInBrowserContext=function(e){var t=this.m_tabset.GetBrowserContext();return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},t.prototype.GetVisibilityState=function(){if(!this.m_tabset||!this.m_tabset.is_popup_active&&!m.a.IN_MOBILE)return 0;var e=void 0;return this.m_tabset.activeTab&&(e=this.m_tabset.activeTab.GetChatView()),e!=this||!this.m_tabset.is_popup_visible&&!m.a.IN_MOBILE?1:this.m_tabset.is_popup_focused||m.a.IN_MOBILE?this.m_bScrolledToBottom&&!u.f.IdleTracker.BIsUserIdle(60)?4:3:2},Object.defineProperty(t.prototype,"lastScrollHeight",{get:function(){return this.m_scrollHeight},set:function(e){this.m_scrollHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastScrollTop",{get:function(){return this.m_scrollTop},set:function(e){this.m_scrollTop=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastClientHeight",{get:function(){return this.m_clientHeight},set:function(e){this.m_clientHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"is_scrolled_to_bottom",{get:function(){return this.m_bScrolledToBottom},set:function(e){!this.m_bScrolledToBottom&&e&&this.m_chat.OnActivate(),this.m_bScrolledToBottom=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text_entry",{get:function(){return this.m_strTextEntry},set:function(e){this.m_strTextEntry=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"file_upload_manager",{get:function(){return this.m_fileUploadManager},enumerable:!1,configurable:!0}),t.prototype.CheckActivationAndNotifyChat=function(){this.m_bScrolledToBottom&&this.m_chat.OnActivate()},t.prototype.OnActivate=function(){this.CheckActivationAndNotifyChat(),this.FocusTextInput(),this.m_chat.m_msTimeActivated=Date.now()},t.prototype.OnDeactivate=function(){this.m_chat.OnDeactivate()},t.prototype.OnFocus=function(){this.CheckActivationAndNotifyChat()},t.prototype.FocusTextInput=function(){this.m_textEntryFocusCallbacks.Dispatch()},t.prototype.AddOnChatFrameChangedCallback=function(e){this.m_rgOnChatFrameChangedCallbacks.push(e)},t.prototype.RemoveOnChatFrameChangedCallback=function(e){E.c(this.m_rgOnChatFrameChangedCallbacks,e)},t.prototype.OnChatFrameChanged=function(){for(var e=0,t=this.m_rgOnChatFrameChangedCallbacks;e<t.length;e++){(0,t[e])()}},t.prototype.SetFileToUpload=function(e,t){this.m_fileUploadManager.SetImageFileToUpload(e,t)},t.prototype.UploadFile=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.m_fileUploadManager.BeginFileUpload({bSpoiler:e})];case 1:return t.sent(),this.m_fileUploadManager.Reset(),[2]}}))}))},t.prototype.RegisterForTextEntryFocus=function(e){return this.m_textEntryFocusCallbacks.Register(e)},t.prototype.BVoiceActive=function(){return this.m_chat.BVoiceActive()},t.prototype.ConvertMessageToBBCode=function(e){return Object(I.f)(e)},t.prototype.SendChatMessage=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return[2,this.m_chat.SendChatMessage(this.ConvertMessageToBBCode(e))]}))}))},Object(o.c)([r.A],t.prototype,"m_bScrolledToBottom",void 0),t}(l.b),F=function(e){function t(t,n,o){var r=e.call(this,t,n)||this;return r.m_parentGroupView=o,r}return Object(o.d)(t,e),t.prototype.SearchMembers=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return[2,this.m_parentGroupView.SearchMembers(e,t)]}))}))},t.prototype.SearchMembersForMention=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,this.SearchMembers(e,t)];case 1:return n=o.sent(),this.m_parentGroupView.GetGroup().AddMetaMentionsToResults(e,n),[2,n]}}))}))},t.prototype.BIsMemberNameAmbiguous=function(e){return this.m_parentGroupView.BIsMemberNameAmbiguous(e)},t.prototype.ConvertMessageToBBCode=function(e){var t=Object(I.f)(e);return this.m_parentGroupView.ProcessMentions(t)},Object.defineProperty(t.prototype,"virtualizer",{get:function(){return this.m_parentGroupView.GetGroup().BIsMemberListVirtualized()?this.m_parentGroupView.GetVirtualizedMemberListView():null},enumerable:!1,configurable:!0}),t}(P)},"5O1C":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c}));var o=n("mrSG"),r=n("q1tI"),i=n("XaMz"),a=function(){function e(){this.reactNodes=[]}return e.prototype.AppendText=function(e,t){void 0===t&&(t=!1),e.length&&(t?this.reactNodes.push(r.createElement("span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e},e)):this.reactNodes.push(e))},e.prototype.AppendNode=function(e){this.reactNodes.push(e)},e.prototype.GetElements=function(){return this.reactNodes},e}(),s=function(){function e(e){Object(i.a)(e,"decorated accumulator cannot be null"),this.m_decoratedAccumulator=e}return e.prototype.AppendText=function(e,t){void 0===t&&(t=!1),this.m_decoratedAccumulator.AppendText(e,t)},e.prototype.AppendNode=function(e){this.m_decoratedAccumulator.AppendNode(e)},e.prototype.GetElements=function(){return this.m_decoratedAccumulator.GetElements()},e}(),c=function(e){function t(t,n,o){var r=e.call(this,t)||this;return r.m_nStartCursor=1,r.m_bDisableDataCopy=!1,r.m_nStartCursor=void 0!==n?n:1,r.m_bDisableDataCopy=Boolean(o),r}return Object(o.d)(t,e),t.prototype.AppendText=function(t){for(var n=this,o=t,i=[],a=o.indexOf("\n",this.m_nStartCursor);-1!==a;a=o.indexOf("\n"))i.push(o.substr(0,a)),i.push(r.createElement("br")),o=o.substr(a+1);o.length&&i.push(o),i.forEach((function(t){e.prototype.AppendNode.call(n,t)}))},t}(s)},"5l92":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("mrSG"),r=n("q1tI"),i=n("1VtQ"),a=n("B7ut"),s=n("1n9R"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hoverRef=r.createRef(),t}return Object(o.d)(t,e),t.prototype.OnHover=function(e){"clan"!=this.props.type&&(this.props.fnHoverState&&this.props.fnHoverState(!0),window.GameHover&&window.GameHover(this.props.fnGetIDOverride?this.props.fnGetIDOverride():this.hoverRef.current,e,"global_hover",{type:this.props.type,id:this.props.id,v6:1}))},t.prototype.OnHoverEnd=function(e){"clan"!=this.props.type&&(this.props.fnHoverState&&e.relatedTarget&&this.props.fnHoverState(!1),window.HideGameHover&&window.HideGameHover(this.props.fnGetIDOverride?this.props.fnGetIDOverride():this.hoverRef.current,e,"global_hover"))},t.prototype.render=function(){return r.createElement("div",{ref:this.hoverRef,className:this.props.hoverClassName,onMouseEnter:this.OnHover,onMouseLeave:this.OnHoverEnd,onFocus:this.OnHover,onBlur:this.OnHoverEnd},this.props.children)},Object(o.c)([i.a],t.prototype,"OnHover",null),Object(o.c)([i.a],t.prototype,"OnHoverEnd",null),t}(r.Component),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return r.createElement(c,Object(o.a)({},this.props),r.createElement("a",{className:this.props.className,href:Object(a.d)((s.c.IN_CLIENT?"steam://openurl/":"")+this.props.strURL),target:s.c.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"},this.props.children))},t}(r.Component)},"6Eqa":function(e,t,n){e.exports={OtherEventsCtn:"eventrow_OtherEventsCtn_3gEdh",OtherEvents_MainImageCtn:"eventrow_OtherEvents_MainImageCtn_18pZC",OtherEvents:"eventrow_OtherEvents_3kLM3",OtherEvents_EventCtn:"eventrow_OtherEvents_EventCtn_32Whp",OtherEvents_MainImage:"eventrow_OtherEvents_MainImage_7K5Hr",OtherEvents_BGImage:"eventrow_OtherEvents_BGImage_3rVPT",OtherEvents_ContentCtn:"eventrow_OtherEvents_ContentCtn_2MfcM",OtherEvents_TextCtn:"eventrow_OtherEvents_TextCtn_D7H5M",OtherEvents_TextTitle:"eventrow_OtherEvents_TextTitle_Dz6YM",OtherEvents_SubTitle:"eventrow_OtherEvents_SubTitle_2NISr",HoversEnabled:"eventrow_HoversEnabled_kzDRu",PartnerEventRowCapsule_MainImage:"eventrow_PartnerEventRowCapsule_MainImage_3s1gz",EventSummaryContainer:"eventrow_EventSummaryContainer_1gn4h",EventSummaryText:"eventrow_EventSummaryText_28kmD",EventSummaryType:"eventrow_EventSummaryType_HE8Yz",HorizontalEvent:"eventrow_HorizontalEvent_145ds",HorizontalSummary:"eventrow_HorizontalSummary_3aeuy",HorizontalTitle:"eventrow_HorizontalTitle_3dc9h",HorizontalDescriptionCtn:"eventrow_HorizontalDescriptionCtn_3yupl",HorizontalDescription:"eventrow_HorizontalDescription_37iS7",AppCapsuleImage:"eventrow_AppCapsuleImage_21u9T",AppCapsuleCtn:"eventrow_AppCapsuleCtn_flhrF",AppCapsuleImageHover:"eventrow_AppCapsuleImageHover_1GWUN",AppCapsulePrice:"eventrow_AppCapsulePrice_1FjpK"}},"6JoM":function(e,t,n){e.exports={Container:"sharewithfriends_Container_9Dzhg",SmallAvatar:"sharewithfriends_SmallAvatar_3n2P4",ShareDescription:"sharewithfriends_ShareDescription_1FF7-"}},"6b33":function(e,t,n){"use strict";var o;n.r(t);function r(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function i(){return new r(null)}"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(e,t,n,o,r,i){for(var a=32767&t,s=t>>15;--i>=0;){var c=32767&this[e],l=this[e++]>>15,p=s*c+l*a;r=((c=a*c+((32767&p)<<15)+n[o]+(1073741823&r))>>>30)+(p>>>15)+s*l+(r>>>30),n[o++]=1073741823&c}return r},o=30):"Netscape"!=navigator.appName?(r.prototype.am=function(e,t,n,o,r,i){for(;--i>=0;){var a=t*this[e++]+n[o]+r;r=Math.floor(a/67108864),n[o++]=67108863&a}return r},o=26):(r.prototype.am=function(e,t,n,o,r,i){for(var a=16383&t,s=t>>14;--i>=0;){var c=16383&this[e],l=this[e++]>>14,p=s*c+l*a;r=((c=a*c+((16383&p)<<14)+n[o]+r)>>28)+(p>>14)+s*l,n[o++]=268435455&c}return r},o=28),r.prototype.DB=o,r.prototype.DM=(1<<o)-1,r.prototype.DV=1<<o;r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-o,r.prototype.F2=2*o-52;var a,s,c=new Array;for(a="0".charCodeAt(0),s=0;s<=9;++s)c[a++]=s;for(a="a".charCodeAt(0),s=10;s<36;++s)c[a++]=s;for(a="A".charCodeAt(0),s=10;s<36;++s)c[a++]=s;function l(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function p(e,t){var n=c[e.charCodeAt(t)];return null==n?-1:n}function u(e){var t=i();return t.fromInt(e),t}function m(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function d(e){this.m=e}function h(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function f(e,t){return e&t}function _(e,t){return e|t}function g(e,t){return e^t}function b(e,t){return e&~t}function v(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function y(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function S(){}function C(e){return e}function O(e){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h.prototype.convert=function(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},h.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},h.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},h.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},r.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var o=e.length,i=!1,a=0;--o>=0;){var s=8==n?255&e[o]:p(e,o);s<0?"-"==e.charAt(o)&&(i=!0):(i=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var n,o=e%this.DB,r=this.DB-o,i=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<o&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&i)<<o;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var o=e%this.DB,r=this.DB-o,i=(1<<o)-1;t[0]=this[n]>>o;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&i)<<r,t[a-n]=this[a]>>o;o>0&&(t[this.t-n-1]|=(this.s&i)<<r),t.t=this.t-n,t.clamp()}},r.prototype.subTo=function(e,t){for(var n=0,o=0,r=Math.min(e.t,this.t);n<r;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()},r.prototype.multiplyTo=function(e,t){var n=this.abs(),o=e.abs(),i=n.t;for(t.t=i+o.t;--i>=0;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,n){var o=e.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=i());var s=i(),c=this.s,l=e.s,p=this.DB-m(o[o.t-1]);p>0?(o.lShiftTo(p,s),a.lShiftTo(p,n)):(o.copyTo(s),a.copyTo(n));var u=s.t,d=s[u-1];if(0!=d){var h=d*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),f=this.FV/h,_=(1<<this.F1)/h,g=1<<this.F2,b=n.t,v=b-u,y=null==t?i():t;for(s.dlShiftTo(v,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),r.ONE.dlShiftTo(u,y),y.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--v>=0;){var S=n[--b]==d?this.DM:Math.floor(n[b]*f+(n[b-1]+g)*_);if((n[b]+=s.am(0,S,n,v,0,u))<S)for(s.dlShiftTo(v,y),n.subTo(y,n);n[b]<--S;)n.subTo(y,n)}null!=t&&(n.drShiftTo(u,t),c!=l&&r.ZERO.subTo(t,t)),n.t=u,n.clamp(),p>0&&n.rShiftTo(p,n),c<0&&r.ZERO.subTo(n,n)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(e,t){if(e>4294967295||e<1)return r.ONE;var n=i(),o=i(),a=t.convert(this),s=m(e)-1;for(a.copyTo(n);--s>=0;)if(t.sqrTo(n,o),(e&1<<s)>0)t.mulTo(o,a,n);else{var c=n;n=o,o=c}return t.revert(n)},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,o=(1<<t)-1,r=!1,i="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(r=!0,i=l(n));a>=0;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&o,s<=0&&(s+=this.DB,--a)),n>0&&(r=!0),r&&(i+=l(n));return r?i:"0"},r.prototype.negate=function(){var e=i();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=i();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new d(t):new h(t),this.exp(e,n)},r.ZERO=u(0),r.ONE=u(1),S.prototype.convert=C,S.prototype.revert=C,S.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},S.prototype.sqrTo=function(e,t){e.squareTo(t)},O.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=i();return e.copyTo(t),this.reduce(t),t},O.prototype.revert=function(e){return e},O.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},O.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},O.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],E=(1<<26)/I[I.length-1];r.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},r.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),o=u(n),r=i(),a=i(),s="";for(this.divRemTo(o,r,a);r.signum()>0;)s=(n+a.intValue()).toString(e).substr(1)+s,r.divRemTo(o,r,a);return a.intValue().toString(e)+s},r.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),o=Math.pow(t,n),i=!1,a=0,s=0,c=0;c<e.length;++c){var l=p(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(s=t*s+l,++a>=n&&(this.dMultiply(o),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(r.ONE.shiftLeft(e-1),_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(r.ONE.shiftLeft(e-1),this);else{var o=new Array,i=7&e;o.length=1+(e>>3),t.nextBytes(o),i>0?o[0]&=(1<<i)-1:o[0]=0,this.fromString(o,256)}},r.prototype.bitwiseTo=function(e,t,n){var o,r,i=Math.min(e.t,this.t);for(o=0;o<i;++o)n[o]=t(this[o],e[o]);if(e.t<this.t){for(r=e.s&this.DM,o=i;o<this.t;++o)n[o]=t(this[o],r);n.t=this.t}else{for(r=this.s&this.DM,o=i;o<e.t;++o)n[o]=t(r,e[o]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},r.prototype.changeBit=function(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},r.prototype.addTo=function(e,t){for(var n=0,o=0,r=Math.min(e.t,this.t);n<r;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()},r.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(e,t){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]},r.prototype.multiplyLowerTo=function(e,t,n){var o,r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(o=n.t-this.t;r<o;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(o=Math.min(e.t,t);r<o;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()},r.prototype.multiplyUpperTo=function(e,t,n){--t;var o=n.t=this.t+e.t-t;for(n.s=0;--o>=0;)n[o]=0;for(o=Math.max(t-this.t,0);o<e.t;++o)n[this.t+o-t]=this.am(t-o,e[o],n,0,0,this.t+o-t);n.clamp(),n.drShiftTo(1,n)},r.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var o=this.t-1;o>=0;--o)n=(t*n+this[o])%e;return n},r.prototype.millerRabin=function(e){var t=this.subtract(r.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var o=t.shiftRight(n);(e=e+1>>1)>I.length&&(e=I.length);for(var a=i(),s=0;s<e;++s){a.fromInt(I[s]);var c=a.modPow(o,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(t)){for(var l=1;l++<n&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},r.prototype.clone=function(){var e=i();return this.copyTo(e),e},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,o=this.DB-e*this.DB%8,r=0;if(e-- >0)for(o<this.DB&&(n=this[e]>>o)!=(this.s&this.DM)>>o&&(t[r++]=n|this.s<<this.DB-o);e>=0;)o<8?(n=(this[e]&(1<<o)-1)<<8-o,n|=this[--e]>>(o+=this.DB-8)):(n=this[e]>>(o-=8)&255,o<=0&&(o+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.min=function(e){return this.compareTo(e)<0?this:e},r.prototype.max=function(e){return this.compareTo(e)>0?this:e},r.prototype.and=function(e){var t=i();return this.bitwiseTo(e,f,t),t},r.prototype.or=function(e){var t=i();return this.bitwiseTo(e,_,t),t},r.prototype.xor=function(e){var t=i();return this.bitwiseTo(e,g,t),t},r.prototype.andNot=function(e){var t=i();return this.bitwiseTo(e,b,t),t},r.prototype.not=function(){for(var e=i(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},r.prototype.shiftLeft=function(e){var t=i();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},r.prototype.shiftRight=function(e){var t=i();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},r.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+v(this[e]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=y(this[n]^t);return e},r.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},r.prototype.setBit=function(e){return this.changeBit(e,_)},r.prototype.clearBit=function(e){return this.changeBit(e,b)},r.prototype.flipBit=function(e){return this.changeBit(e,g)},r.prototype.add=function(e){var t=i();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=i();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=i();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=i();return this.divRemTo(e,t,null),t},r.prototype.remainder=function(e){var t=i();return this.divRemTo(e,null,t),t},r.prototype.divideAndRemainder=function(e){var t=i(),n=i();return this.divRemTo(e,t,n),new Array(t,n)},r.prototype.modPow=function(e,t){var n,o,r=e.bitLength(),a=u(1);if(r<=0)return a;n=r<18?1:r<48?3:r<144?4:r<768?5:6,o=r<8?new d(t):t.isEven()?new O(t):new h(t);var s=new Array,c=3,l=n-1,p=(1<<n)-1;if(s[1]=o.convert(this),n>1){var f=i();for(o.sqrTo(s[1],f);c<=p;)s[c]=i(),o.mulTo(f,s[c-2],s[c]),c+=2}var _,g,b=e.t-1,v=!0,y=i();for(r=m(e[b])-1;b>=0;){for(r>=l?_=e[b]>>r-l&p:(_=(e[b]&(1<<r+1)-1)<<l-r,b>0&&(_|=e[b-1]>>this.DB+r-l)),c=n;0==(1&_);)_>>=1,--c;if((r-=c)<0&&(r+=this.DB,--b),v)s[_].copyTo(a),v=!1;else{for(;c>1;)o.sqrTo(a,y),o.sqrTo(y,a),c-=2;c>0?o.sqrTo(a,y):(g=a,a=y,y=g),o.mulTo(y,s[_],a)}for(;b>=0&&0==(e[b]&1<<r);)o.sqrTo(a,y),g=a,a=y,y=g,--r<0&&(r=this.DB-1,--b)}return o.revert(a)},r.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return r.ZERO;for(var n=e.clone(),o=this.clone(),i=u(1),a=u(0),s=u(0),c=u(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;o.isEven();)o.rShiftTo(1,o),t?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(e,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(o)>=0?(n.subTo(o,n),t&&i.subTo(s,i),a.subTo(c,a)):(o.subTo(n,o),t&&s.subTo(i,s),c.subTo(a,c))}return 0!=o.compareTo(r.ONE)?r.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},r.prototype.pow=function(e){return this.exp(e,new S)},r.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var o=t;t=n,n=o}var r=t.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)return t;for(r<i&&(i=r),i>0&&(t.rShiftTo(i,t),n.rShiftTo(i,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n},r.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(n[0]==I[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<I.length;){for(var o=I[t],r=t+1;r<I.length&&o<E;)o*=I[r++];for(o=n.modInt(o);t<r;)if(o%I[t++]==0)return!1}return n.millerRabin(e)};var w=r,A=function(e,t){this.modulus=new w(e,16),this.encryptionExponent=new w(t,16)},D={base64:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){if(!e)return!1;var t,n,o,r,i,a,s,c="",l=0;do{r=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,a=(15&n)<<2|(o=e.charCodeAt(l++))>>6,s=63&o,isNaN(n)?a=s=64:isNaN(o)&&(s=64),c+=this.base64.charAt(r)+this.base64.charAt(i)+this.base64.charAt(a)+this.base64.charAt(s)}while(l<e.length);return c},decode:function(e){if(!e)return!1;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var t,n,o,r,i="",a=0;do{t=this.base64.indexOf(e.charAt(a++)),n=this.base64.indexOf(e.charAt(a++)),o=this.base64.indexOf(e.charAt(a++)),r=this.base64.indexOf(e.charAt(a++)),i+=String.fromCharCode(t<<2|n>>4),64!=o&&(i+=String.fromCharCode((15&n)<<4|o>>2)),64!=r&&(i+=String.fromCharCode((3&o)<<6|r))}while(a<e.length);return i}},T={hex:"0123456789abcdef",encode:function(e){if(!e)return!1;var t,n="",o=0;do{t=e.charCodeAt(o++),n+=this.hex.charAt(t>>4&15)+this.hex.charAt(15&t)}while(o<e.length);return n},decode:function(e){if(!e)return!1;e=e.replace(/[^0-9abcdef]/g,"");var t="",n=0;do{t+=String.fromCharCode(this.hex.indexOf(e.charAt(n++))<<4&240|15&this.hex.indexOf(e.charAt(n++)))}while(n<e.length);return t}},M={getPublicKey:function(e,t){return new A(e,t)},encrypt:function(e,t){return!!t&&(!!(e=this.pkcs1pad2(e,t.modulus.bitLength()+7>>3))&&(!!(e=e.modPowInt(t.encryptionExponent,t.modulus))&&(1==(1&(e=e.toString(16)).length)&&(e="0"+e),D.encode(T.decode(e)))))},pkcs1pad2:function(e,t){if(t<e.length+11)return null;for(var n=[],o=e.length-1;o>=0&&t>0;)n[--t]=e.charCodeAt(o--);for(n[--t]=0;t>2;)n[--t]=Math.floor(254*Math.random())+1;return n[--t]=2,n[--t]=0,new w(n)}};t.default=M},"79VW":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENENEIzRkRDOEM2MTFFNzkzQkNCNkJENzEzMDIzQ0UiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENENEIzRkNDOEM2MTFFNzkzQkNCNkJENzEzMDIzQ0UiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUZCNDhBREI0Q0IzMTFFM0FCM0ZDMUU2OTVGNUEwRUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUZCNDhBREM0Q0IzMTFFM0FCM0ZDMUU2OTVGNUEwRUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5YkRRHAAABB0lEQVR42mL8//8/AzUB47AyUBCIxYFYAojloFgBiJmBOBGXgcJQDSAsD8QyQHwSiIuAWB+IhYCYFc2iZ0AsDeeBDITibUD8Coh//0cFFf/xg9tIZjCwINnkCMQcaLb/AeJfQPwdiDmJCRcmJPY3akQKsoGM2CINjxxZBjJBxRmJNAMlltOwhOE/ID4KxJZAzILDwA9AvAibgbegaQ09UpqAuBJPpNwHYjMYB9lWMSDmR1MMso0LmqDZcBj4GZf//2JR/Bdq6F88YfgXl4HM1E422NIhC9Qioi1DDkMbIJaE5l9Yxgfl0XdQy3CFIRuppQ0ztKAQh1ogD8VyUD4oW9oNnQIWIMAAJM2E2lF9QHUAAAAASUVORK5CYII="},"7Vyq":function(e,t,n){e.exports={ContextMenuMouseOverlay:"contextmenu_ContextMenuMouseOverlay_3H7og",ContextMenuFocusContainer:"contextmenu_ContextMenuFocusContainer_2thYU",contextMenu:"contextmenu_contextMenu_3_a2Z",ContextMenuPopup:"contextmenu_ContextMenuPopup_1exss",contextMenuContents:"contextmenu_contextMenuContents_1yyTu",contextMenuItem:"contextmenu_contextMenuItem_CBC-y",active:"contextmenu_active_3vYUp",MenuSectionHeader:"contextmenu_MenuSectionHeader_x3Kot",StrongerSeparation:"contextmenu_StrongerSeparation_31Tii",UpperCase:"contextmenu_UpperCase_2T9by",SubMenu:"contextmenu_SubMenu_3BzT1",Label:"contextmenu_Label_1D1Dk",Arrow:"contextmenu_Arrow_KJxKr",PopoutSubMenu:"contextmenu_PopoutSubMenu_29Zea",PopoutSubMenuItems:"contextmenu_PopoutSubMenuItems_1cXx5"}},"7l8a":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("/SYB"),c=n("B7ut"),l=n("1n9R"),p=function(){function e(){}return e.prototype.InitFrom=function(e){this.title=e.title,this.capsule=u(e.capsule),this.tiny_capsule=u(e.tiny_capsule),this.main_capsule=u(e.main_capsule),this.type=e.type,this.price=e.price,this.orig_price=e.orig_price,this.discount_percent=e.discount_percent,this.release=e.release,this.screenshot_list=e.screenshot_list.map(u),this.subid=e.subid,this.button_action=e.button_action,this.app_to_run=e.app_to_run,this.is_free=e.is_free,this.required_age=e.required_age,this.coming_soon=e.coming_soon,this.appid=Number(e.appid),this.full_game_appid=Number(e.full_game_appid),this.tags=e.tags,this.content_descriptors=e.content_descriptors,this.reviews_filtered=e.reviews_filtered,this.reviews_unfiltered=e.reviews_unfiltered,this.available_windows=e.available_windows,this.available_mac=e.available_mac,this.available_linux=e.available_linux,this.microtrailer=u(e.microtrailer),this.microtrailer_mp4=u(e.microtrailer_mp4),this.support_vrhmd=e.support_vrhmd,this.support_vrhmd_only=e.support_vrhmd_only},e.prototype.GetCapsuleDimensions=function(){return{width:460,height:215}},e.prototype.GetMainCapsuleDimensions=function(){return{width:616,height:353}},e.prototype.GetTinyCapsuleDimensions=function(){return{width:231,height:87}},Object.defineProperty(e.prototype,"capsule_link",{get:function(){return Object(c.d)(l.c.STORE_BASE_URL+"app/"+this.appid)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.appid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header_image_url",{get:function(){return this.capsule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formatted_orig_price",{get:function(){return this.orig_price},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formatted_final_price",{get:function(){return this.price},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"purchasePackageId",{get:function(){return this.subid},enumerable:!1,configurable:!0}),Object(o.c)([a.A],e.prototype,"title",void 0),Object(o.c)([a.A],e.prototype,"capsule",void 0),Object(o.c)([a.A],e.prototype,"tiny_capsule",void 0),Object(o.c)([a.A],e.prototype,"main_capsule",void 0),Object(o.c)([a.A],e.prototype,"type",void 0),Object(o.c)([a.A],e.prototype,"price",void 0),Object(o.c)([a.A],e.prototype,"orig_price",void 0),Object(o.c)([a.A],e.prototype,"discount_percent",void 0),Object(o.c)([a.A],e.prototype,"release",void 0),Object(o.c)([a.A],e.prototype,"screenshot_list",void 0),Object(o.c)([a.A],e.prototype,"subid",void 0),Object(o.c)([a.A],e.prototype,"button_action",void 0),Object(o.c)([a.A],e.prototype,"app_to_run",void 0),Object(o.c)([a.A],e.prototype,"is_free",void 0),Object(o.c)([a.A],e.prototype,"required_age",void 0),Object(o.c)([a.A],e.prototype,"coming_soon",void 0),Object(o.c)([a.A],e.prototype,"appid",void 0),Object(o.c)([a.A],e.prototype,"full_game_appid",void 0),Object(o.c)([a.A],e.prototype,"tags",void 0),Object(o.c)([a.A],e.prototype,"content_descriptors",void 0),Object(o.c)([a.A],e.prototype,"reviews_filtered",void 0),Object(o.c)([a.A],e.prototype,"reviews_unfiltered",void 0),Object(o.c)([a.A],e.prototype,"available_windows",void 0),Object(o.c)([a.A],e.prototype,"available_mac",void 0),Object(o.c)([a.A],e.prototype,"available_linux",void 0),Object(o.c)([a.A],e.prototype,"microtrailer",void 0),Object(o.c)([a.A],e.prototype,"microtrailer_mp4",void 0),Object(o.c)([a.A],e.prototype,"support_vrhmd",void 0),Object(o.c)([a.A],e.prototype,"support_vrhmd_only",void 0),e}();function u(e){return e&&!e.startsWith("http")?l.c.STORE_ICON_BASE_URL+e:e}var m=function(e){function t(t){var n=e.call(this)||this;return n.appid=t,n.success=2,n.title="",n.screenshot="",n.age_safe_screenshot=!1,n.creator_list=new Array,n.is_free=!1,n.required_age=!1,n.coming_soon=!1,n.library_asset_setup_complete=!0,n}return Object(o.d)(t,e),t.prototype.InitializeFrom=function(e){this.success=1,this.type=e.type,this.price=e.price,this.discount_percent=e.discount_percent,this.subid=e.subid,this.button_action=e.button_action,this.app_to_run=e.app_to_run,this.is_free=e.is_free,this.required_age=e.required_age,this.coming_soon=e.coming_soon,this.full_game_appid=e.full_game_appid,this.title=e.title,this.release=e.release,this.capsule=e.capsule,this.tiny_capsule=e.tiny_capsule,this.main_capsule=e.main_capsule,this.screenshot=e.screenshot,this.screenshot_list=e.screenshot_list,this.age_safe_screenshot=e.age_safe_screenshot,this.library_asset_setup_complete=e.library_asset_setup_complete,this.item_id=e.item_id,this.icon_url=e.icon_url,this.cover_image_asset_url=e.cover_image_asset_url,this.tags=e.tags,this.content_descriptors=e.content_descriptors,this.available_windows=e.available_windows,this.available_mac=e.available_mac,this.available_linux=e.available_linux,this.microtrailer=e.microtrailer,this.microtrailer_mp4=e.microtrailer_mp4,this.support_vrhmd=e.support_vrhmd,this.support_vrhmd_only=e.support_vrhmd_only,this.languages=e.languages,this.associated_demo_appids=e.associated_demo_appids,this.creator_list=new Array;var t=e.creator_list;if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];this.creator_list.push(r)}this.social=new Array;var i=e.social;if(i)for(var a=0,s=i;a<s.length;a++){var c=s[a];this.social.push(c)}},t.prototype.BHasDemoAppID=function(){return this.associated_demo_appids&&this.associated_demo_appids.length>0},Object(o.c)([a.A],t.prototype,"success",void 0),Object(o.c)([a.A],t.prototype,"release",void 0),Object(o.c)([a.A],t.prototype,"tiny_capsule",void 0),Object(o.c)([a.A],t.prototype,"main_capsule",void 0),Object(o.c)([a.A],t.prototype,"type",void 0),Object(o.c)([a.A],t.prototype,"screenshot",void 0),Object(o.c)([a.A],t.prototype,"age_safe_screenshot",void 0),Object(o.c)([a.A],t.prototype,"library_asset_setup_complete",void 0),Object(o.c)([a.A],t.prototype,"screenshot_list",void 0),Object(o.c)([a.A],t.prototype,"social",void 0),Object(o.c)([a.A],t.prototype,"creator_list",void 0),Object(o.c)([a.A],t.prototype,"item_id",void 0),Object(o.c)([a.A],t.prototype,"icon_url",void 0),Object(o.c)([a.A],t.prototype,"cover_image_asset_url",void 0),Object(o.c)([a.A],t.prototype,"microtrailer",void 0),Object(o.c)([a.A],t.prototype,"microtrailer_mp4",void 0),Object(o.c)([a.A],t.prototype,"support_vrhmd",void 0),Object(o.c)([a.A],t.prototype,"support_vrhmd_only",void 0),Object(o.c)([a.A],t.prototype,"languages",void 0),Object(o.c)([a.A],t.prototype,"associated_demo_appids",void 0),Object(o.c)([a.i],t.prototype,"InitializeFrom",null),t}(p),d=function(){function e(e,t){this.m_bLoaded=!1,this.m_appid=e,this.m_bLoaded=!1,this.m_appStoreData=new m(e),t&&this.InitializeFrom(t)}return e.prototype.InitializeFrom=function(e){this.m_appStoreData.InitializeFrom(e),this.m_bLoaded=!0},e.prototype.BIsLoaded=function(){return this.m_bLoaded},e.prototype.GetAppStoreData=function(){return this.m_appStoreData},e.prototype.HintLoadBroadcastAppData=function(e){return void 0===e&&(e="steamtv"),Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_loadingPromise?[3,2]:(this.m_loadingPromise=this.InternalLoadBroadcastAppData(e),[4,this.m_loadingPromise]);case 1:t.sent(),t.label=2;case 2:return[2,this.m_loadingPromise]}}))}))},e.prototype.InternalLoadBroadcastAppData=function(e){return void 0===e&&(e="steamtv"),Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_bLoaded)return[3,4];t={appid:this.m_appid,feature:e,cc:l.c.COUNTRY||"US",l:l.c.LANGUAGE,origin:self.origin},n=l.c.STORE_BASE_URL+"broadcast/ajaxgetappinfoforcap",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(n,{params:t})];case 2:return(r=o.sent()).data&&1==r.data.success?(this.InitializeFrom(r.data),[3,4]):(console.log("AMS - failed to load store info about appid: "+this.m_appid),this.m_appStoreData.success=r.data?r.data.success:2,[2,this]);case 3:return a=o.sent(),c=Object(s.a)(a),console.log("InternalLoadBroadcastAppData: calling ajaxgetappinfoforcap for appid "+this.m_appid+" failed with "+c.strErrorMsg,c),[3,4];case 4:return[2,this]}}))}))},Object(o.c)([a.A],e.prototype,"m_bLoaded",void 0),Object(o.c)([a.A],e.prototype,"m_appStoreData",void 0),e}()},"7oej":function(e,t,n){},"7sd/":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return _}));var o=n("mrSG"),r=n("q1tI"),i=n("XaMz"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetArgument=function(e,t){return void 0===t&&(t=!1),!e||t&&void 0===this.props.args[e]?this.props.args[""]:this.props.args[e]},t}(r.Component),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={failedToRender:!1},n}return Object(o.d)(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({failedToRender:!0})},t.prototype.render=function(){if(this.state.failedToRender)return this.props.bbcode;var e=this.props.bbcode;return!0!==this.props.bSkipTrimInput&&(e=e.trim()),this.props.parser.ParseBBCode(e,this.props.context)},t}(r.PureComponent);function c(e,t,n){if(void 0===n&&(n=0),2==t.type){var o=t.text.indexOf("="),r=t.text.indexOf(" ");if(-1!=r&&(-1==o||r<o)&&(o=r),o>0){t.tag=t.text.substr(0,o);var a=t.text.substr(o);t.args=function(e){if(!e||e.length<1)return{};var t={},n="",o="",r=0,a=0;"="==e[0]&&(r=2);var s=!1;for(a++;a<e.length;a++){var c=e[a],l=!0,p=!1;switch(r){case 0:if("="==c)return{};if(" "==c)continue;r=1;break;case 1:"="!=c&&" "!=c||s||(r=" "==c?0:2,l=!1);break;case 2:" "==c?(r=0,l=!1,p=!0):'"'==c?(r=4,l=!1):r=3;break;case 3:case 4:(" "==c&&4!=r&&!s||'"'==c&&4==r&&!s)&&(r=0,l=!1,p=!0)}l&&("\\"!=c||s?(s=!1,1==r?n+=c:3==r||4==r?o+=c:Object(i.a)(!1,"Not expecting to accumulate buffer in state %u",r)):s=!0),p&&(t[n]=o,n="",o="")}0!=r&&(t[n]=o);return t}(a)}else t.args={},t.tag=t.text}e.push(t);var s=new f;return s.type=n,s}function l(e){for(var t=[],n=new f,o=!1,r=!1,i=0;i<e.length;i++){var a=e[i];switch(n.type){case 0:"["==a?(n.type=2,r=!0):(n.type=1,"\\"==a?o=!o:n.text+=a);break;case 2:case 3:"/"==a&&r?(n.type=3,n.text="",r=!1):"["!=a||o?"]"!=a||o?"\\"==a?(n.text+=a,o=!o,r=!1):(n.text+=a,o=!1,r=!1):(r&&n.ConvertMalformedNodeToText(),n=c(t,n),r=!1):(n.ConvertMalformedNodeToText(),n=c(t,n,2),r=!0);break;case 1:"["!=a||o?"\\"==a?(o&&(n.text+=a),o=!o):(n.text+=a,o=!1):(n=c(t,n,2),r=!0)}}return 0!=n.type&&(2!=n.type&&3!=n.type||n.ConvertMalformedNodeToText(),t.push(n)),t}var p=function(){function e(e){this.m_dictComponents=e}return e.prototype.dictComponents=function(){return this.m_dictComponents},e}(),u=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.ParseBBCode=function(e,t){var n=l(e);return this.Parse_NotificationHandlers(n,t)},t.prototype.Parse_NotificationHandlers=function(e,t){for(var n,o=void 0,r=this.dictComponents(),i="",a=0,s=e;a<s.length;a++){var c=s[a];if(2==c.type)o||(o=[]),o.push(c);else if(3==c.type){var l=o&&o.pop();0===o.length&&l&&l.tag==c.text&&r[l.tag]&&(n=l)}else 1==c.type&&(i+=c.text)}if(n)return r[n.tag]({context:t,tagname:n.tag,args:n.args,text:i})},t}(p),m=function(){function e(){this.m_rctElements=[]}return e.prototype.AppendText=function(e,t,n){e.length&&(t?this.m_rctElements.push(r.createElement("span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e},e)):this.m_rctElements.push(e))},e.prototype.AppendNode=function(e,t){this.m_rctElements.push(e)},e.prototype.GetElements=function(e){return this.m_rctElements},e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.AppendText=function(e,t,n){for(var i=e,a=[],s=i.indexOf("\n");-1!==s;s=i.indexOf("\n"))a.push(i.substr(0,s)),a.push(r.createElement("br")),i=i.substr(s+1);i.length&&a.push(i),t?this.m_rctElements.push(r.createElement.apply(r,Object(o.g)(["span",{"data-copytext":"","data-copystyle":"merge-adjacent","bbcode-text":e}],a))):this.m_rctElements.push(e)},t}(m),h=function(e){function t(t,n){void 0===n&&(n=m);var o=e.call(this,t)||this;return o.m_accumulatorType=n,o}return Object(o.d)(t,e),t.prototype.ParseBBCode=function(e,t){if(e.startsWith("[pre]"))return r.createElement(this.dictComponents().pre,null,g(e));if(e.startsWith("[code]"))return r.createElement(this.dictComponents().code,null,g(e));var n=l(e);return this.Parse_BuildReactComponents(n,t)},t.prototype.Parse_BuildReactComponents=function(e,t){var n=this,i=new this.m_accumulatorType,a=void 0,s=this.dictComponents();e.forEach((function(e,c){if(1==e.type)i.AppendText(e.text,!a||0==a.length,t);else if(2==e.type)a||(a=[]),a.push({accumulator:i,node:e}),i=new n.m_accumulatorType;else if(3==e.type){var l=a&&a.pop();if(l&&l.node.tag===e.text&&s.hasOwnProperty(l.node.tag)&&s[l.node.tag]){var p=s[l.node.tag],u=a.map((function(e){return e.node.tag})),m={context:t,parentTags:u,tagname:l.node.tag,args:l.node.args,key:e.tag+"_"+c},d=r.createElement.apply(r,Object(o.g)([p,m],i.GetElements(e)));(i=l.accumulator).AppendNode(d,e)}else if(l){var h=l.accumulator;h.AppendText("["+l.node.text+"]",!1,t),i.GetElements(e).forEach((function(e){return h.AppendNode(e)})),h.AppendText("[/"+e.text+"]",!1,t),i=h}}}));for(var c=function(){var e=a.pop(),n=e.accumulator;n.AppendText("["+e.node.text+"]",!1,t),i.GetElements().forEach((function(e){return n.AppendNode(e)})),i=n};a&&a.length;)c();var l=i.GetElements();return l.length>1?r.createElement.apply(r,Object(o.g)([r.Fragment,null],l)):1==l.length?l[0]:null},t}(p),f=function(){function e(){this.type=0,this.text=""}return e.prototype.ConvertMalformedNodeToText=function(){3==this.type?this.text="[/"+this.text:2==this.type&&(this.text="["+this.text),this.type=1},e}();function _(e){return e.replace(/[\[\\]/g,"\\$&")}function g(e){for(var t="",n=0,o=l(e.trim());n<o.length;n++){var r=o[n];1==r.type&&(t+=r.text)}return t}},"8AUz":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("mrSG"),r=n("q1tI"),i=n("1VtQ"),a=n("okNM"),s=n("E7zH"),c=n("QHER"),l=n("H+H8"),p=n.n(l),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_listeners=new s.c,t.m_bNoSpace=!1,t.state={x:void 0,y:void 0,hoverPositionReady:!1},t}return Object(o.d)(t,e),t.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},t.prototype.componentDidMount=function(){this.m_listeners.AddEventListener(window,"blur",this.OnWindowBlur)},t.prototype.componentDidUpdate=function(){this.positionHover()},t.prototype.componentWillUnmount=function(){this.m_listeners.Unregister()},t.prototype.OnWindowBlur=function(e){this.props.onWindowBlur&&this.props.onWindowBlur(e)},t.prototype.render=function(){var e=this.props,t=(e.target,e.visibilityObserver),n=e.className,i=e.style,a=e.bEnablePointerEvents,s=(e.direction,e.nBodyAlignment,e.nBodyDistance,e.nAllowOffscreenPx,e.nMaxLateralMoveOnScreen,e.children),l=(e.onNoSpace,e.onWindowBlur,Object(o.f)(e,["target","visibilityObserver","className","style","bEnablePointerEvents","direction","nBodyAlignment","nBodyDistance","nAllowOffscreenPx","nMaxLateralMoveOnScreen","children","onNoSpace","onWindowBlur"])),u=Object.assign({left:this.state.x,top:this.state.y},i),m=!t||t.visible;return r.createElement("div",Object(o.a)({},l,{className:Object(c.a)(n,p.a.HoverPosition,m&&this.state.hoverPositionReady&&p.a.Ready,this.m_bNoSpace&&p.a.NoSpace,a&&p.a.EnablePointerEvents),style:u,ref:this.bindHover}),s)},t.prototype.positionHover=function(){var e,t=this.m_elHover,n=this.props.target;if(t&&n&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var o=n.ownerDocument.defaultView;if(o&&!o.closed){var r=t.querySelector(".hover_arrow.left"),i=t.querySelector(".hover_arrow.right"),a=t.querySelector(".hover_arrow.top"),s=t.querySelector(".hover_arrow.bottom"),c=n.getBoundingClientRect(),l=t.getBoundingClientRect(),p="overlay"==this.props.direction||"overlay-center"==this.props.direction;r&&r.setAttribute("style","display: none;"),i&&i.setAttribute("style","display: none;"),a&&a.setAttribute("style","display: none;"),s&&s.setAttribute("style","display: none;");var u=this.props.direction,d=m(u,this.props.nBodyAlignment,this.props.nBodyDistance,c,l,o.innerWidth,o.innerHeight),h=d.nLeft,f=d.nTop,_=d.nOverflow,g=d.nLateralOverflow;if(_>this.props.nAllowOffscreenPx&&!p){var b=function(e){switch(e){case"right":return"left";case"left":return"right";case"bottom":return"top";case"top":return"bottom";case"overlay":return"overlay";case"overlay-center":return"overlay-center"}}(this.props.direction),v=m(b,this.props.nBodyAlignment,this.props.nBodyDistance,c,l,o.innerWidth,o.innerHeight),y=v.nLeft,S=v.nTop,C=v.nOverflow,O=v.nLateralOverflow;if(C<_&&(u=b,h=y,f=S,_=C,g=O),_>this.props.nAllowOffscreenPx)return t.setAttribute("style","display: none;"),this.m_bNoSpace=!0,void(this.props.onNoSpace&&this.props.onNoSpace())}0===this.props.nMaxLateralMoveOnScreen||p||(e=function(e,t,n,o,r){var i=Math.max(t[0],t[1]);void 0!==e&&(i=Math.min(e,i));i=Math.max(0,i);var a=t[0]>t[1]?i:-i;"left"===n||"right"===n?o+=a:r+=a;return[o,r]}(this.props.nMaxLateralMoveOnScreen,g,u,f,h),f=e[0],h=e[1]);var I=null;switch(u){case"left":I=i;break;case"right":I=r;break;case"top":I=s;break;case"bottom":I=a}I&&I.setAttribute("style",""),h!=this.state.x&&this.setState({x:h}),f!=this.state.y&&this.setState({y:f}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},t.defaultProps={direction:"right",nBodyAlignment:.5,nAllowOffscreenPx:10,nBodyDistance:8,nMaxLateralMoveOnScreen:void 0},Object(o.c)([i.a],t.prototype,"bindHover",null),Object(o.c)([i.a],t.prototype,"OnWindowBlur",null),t=Object(o.c)([a.a],t)}(r.Component);function m(e,t,n,o,r,i,a){var s,c,l,p,u=i,m=a;switch(e){case"right":s=o.right+n,c=d(o.top,o.height,r.height,t),l=Math.max(0,s+r.width-u),p=[Math.max(0,0-c),Math.max(0,c+r.height-m)];break;case"left":s=o.left-n-r.width,c=d(o.top,o.height,r.height,t),l=Math.max(0,0-s),p=[Math.max(0,0-c),Math.max(0,c+r.height-m)];break;case"bottom":s=d(o.left,o.width,r.width,t),c=o.bottom+n,l=Math.max(0,c+r.height-m),p=[Math.max(0,0-s),Math.max(0,s+r.width-u)];break;case"top":s=d(o.left,o.width,r.width,t),c=o.top-n-r.height,l=Math.max(0,0-c),p=[Math.max(0,0-s),Math.max(0,s+r.width-u)];break;case"overlay":s=o.left,c=o.top,l=0,p=[0,0];break;case"overlay-center":s=o.left+.5*o.width-.5*r.width,c=o.top+.5*o.height-.5*r.height,l=0,p=[0,0]}return{nLeft:s,nTop:c,nOverflow:l,nLateralOverflow:p}}function d(e,t,n,o){return Math.max(0,Math.min(1,o))*(t-n)+e}},"8JTq":function(e,t,n){"use strict";function o(e,t){return e.m_unPID==t.m_unPID&&e.m_nBrowserID==t.m_nBrowserID}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var r={m_unPID:0,m_nBrowserID:-1}},"8o0Y":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var o=n("mrSG"),r=n("q1tI"),i=n("/IDK"),a=n("EGkk"),s=n("G+3Z"),c=n("2vnA"),l=function(){function e(){}return e.GetBrowserInfoForPopup=function(e){return null},e.prototype.SetTakeFocus=function(e){this.m_fnTakeFocus=e},e}();function p(e,t,n){var o,r=void 0,i=void 0,a=t;if(a.preventDefault&&a.stopPropagation){if(a.shiftKey)return null;a.preventDefault(),a.stopPropagation(),o=a.currentTarget,r=a.clientX,i=a.clientY}else o=t;var s=new d(e,o,r,i,n);return s.Show(),s}function u(e,t,n,o){var r=new d(e,t,n,o,{bForcePopup:!0,bScreenCoordinates:!0});return r.Show(),r}var m=function(e){function t(t){var n=e.call(this)||this;return n.m_bVisible=!1,n.m_elSubmenuItem=null,n.m_timerHideSubMenu=0,n.m_ownerWindow=t,n}return Object(o.d)(t,e),t.prototype.Init=function(e,t){(e.options.bForcePopup||this.m_ownerWindow.innerWidth)<400&&this.m_ownerWindow.SteamClient&&this.m_ownerWindow.SteamClient.Window?this.m_popupContextMenu=new a.a(e,t,l.GetBrowserInfoForPopup(this.m_ownerWindow)):(this.m_embeddedElementInstance=Object(s.b)(this.m_ownerWindow.document),this.m_rctElement=r.createElement(a.g,e,t))},t.prototype.SetOnHideCallback=function(e){this.m_fnOnHideCallback=e},t.prototype.Show=function(){this.m_rctElement?this.m_embeddedElementInstance.Show(this.m_rctElement):this.m_popupContextMenu.Show(),this.m_bVisible=!0},t.prototype.Hide=function(){this.InternalHide()},t.prototype.HideIfNotInFocus=function(){this.BHasFocus()||this.BIsFocusInChildHierarchy()||this.Hide()},t.prototype.InternalHide=function(){this.m_bVisible&&(this.m_bVisible=!1,this.InternalHideSubMenu(),this.m_fnOnHideCallback&&this.m_fnOnHideCallback(),this.m_embeddedElementInstance?this.m_embeddedElementInstance.Hide(300):this.m_popupContextMenu.Close())},Object.defineProperty(t.prototype,"visible",{get:function(){return this.m_bVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.m_options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"owner_window",{get:function(){return this.m_ownerWindow},enumerable:!1,configurable:!0}),t.prototype.ShowSubMenu=function(e,t){return this.m_elSubmenuItem==e?(this.CancelHideSubMenuTimer(),this.m_submenu.TakeFocus(),null):(this.InternalHideSubMenu(),this.m_elSubmenuItem=e,this.m_submenu=new h(this,t(),e),this.m_submenu.Show(),this.m_submenu)},t.prototype.CancelHideSubMenuTimer=function(){this.m_timerHideSubMenu>0&&(clearTimeout(this.m_timerHideSubMenu),this.m_timerHideSubMenu=0)},t.prototype.HideSubMenu=function(){var e=this;if(this.m_submenu){if(!(this.m_timerHideSubMenu>0)){this.m_timerHideSubMenu=window.setTimeout((function(){e.InternalHideSubMenu(),e.m_timerHideSubMenu=0}),150)}}else this.CancelHideSubMenuTimer()},t.prototype.InternalHideSubMenu=function(){this.CancelHideSubMenuTimer(),this.m_submenu&&(this.BIsFocusInChildHierarchy()&&this.TakeFocus(),this.m_elSubmenuItem=null,this.m_submenu.InternalHide(),this.m_submenu=null)},t.prototype.TakeFocus=function(){this.m_popupContextMenu&&this.m_popupContextMenu.Focus(),this.m_fnTakeFocus&&this.m_fnTakeFocus()},t.prototype.BInternalElementInParentHierarchy=function(e){return this.m_parentInstance&&(this.m_parentInstance.BIsChildElement(e)||this.m_parentInstance.BInternalElementInParentHierarchy(e))},t.prototype.BInternalElementInChildHierarchy=function(e){return this.m_submenu&&(this.m_submenu.BIsChildElement(e)||this.m_submenu.BInternalElementInChildHierarchy(e))},t.prototype.BIsChildElement=function(e){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(e):i.e(this.m_popupContextMenu.root_element,e)},t.prototype.BHasFocus=function(){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(this.m_ownerWindow.document.activeElement):this.m_popupContextMenu.focused},t.prototype.BIsFocusInChildHierarchy=function(){return this.m_submenu&&(this.m_submenu.BHasFocus()||this.m_submenu.BIsFocusInChildHierarchy())},t.prototype.BIsElementInMenuHierarchy=function(e){return this.BInternalElementInParentHierarchy(e)||this.BInternalElementInChildHierarchy(e)},t.prototype.BIsSubMenuVisible=function(){return!!this.m_submenu},Object(o.c)([c.A],t.prototype,"m_bVisible",void 0),t}(l),d=function(e){function t(n,o,r,i,a){var s=e.call(this,o.ownerDocument.defaultView)||this;t.sm_iActiveContextMenuInstance&&t.sm_iActiveContextMenuInstance.Hide(),t.sm_iActiveContextMenuInstance=s,s.m_options=a||{};var c={element:o,clientX:r,clientY:i,instance:s,options:s.m_options,fnOnMenuItemSelected:function(){s.Hide()}};return s.Init(c,n),s}return Object(o.d)(t,e),t.prototype.Show=function(){this.m_options.bDisableMouseOverlay||(this.m_embeddedElementInstanceOverlay=Object(s.b)(this.m_ownerWindow.document),this.m_embeddedElementInstanceOverlay.Show(r.createElement(a.f))),e.prototype.Show.call(this)},t.prototype.Hide=function(){this.m_embeddedElementInstanceOverlay&&this.m_embeddedElementInstanceOverlay.Hide(0),e.prototype.Hide.call(this)},t}(m),h=function(e){function t(t,n,o){var r=e.call(this,o.ownerDocument.defaultView)||this;r.m_parentInstance=t,r.m_options={bOverlapVertical:!0,bUseWebStyles:t.options.bUseWebStyles,strClassName:t.options.strClassName,bFitToWindow:t.options.bFitToWindow,bShiftToFitWindow:t.options.bShiftToFitWindow};var i={element:o,clientX:null,clientY:null,instance:r,options:r.m_options,fnOnMenuItemSelected:function(){r.Hide()},bSubmenu:!0};return r.Init(i,n),r}return Object(o.d)(t,e),t.prototype.Hide=function(){var e=this;this.m_popupContextMenu?window.setTimeout((function(){e.m_parentInstance.HideIfNotInFocus()}),10):this.m_parentInstance.Hide()},t}(m)},"9Cmb":function(e,t,n){"use strict";function o(e,t){return e<t?-1:e>t?1:0}function r(e){return e>=55356&&e<=57343||e>=8205&&e<=11093||12953==e||12349==e||12336==e||65039==e||12951==e||169==e||e>=48&&e<=57||35==e||42==e||10==e||174==e}function i(e){for(var t=!1,n=!1,o=!0,i=0;i<e.length;i++){var a=e.charCodeAt(i);if(o&&a>=48&&a<=57||35==a||42==a||10==a?n=!0:r(a)&&(n=!0,o=!1),n&&0==i)t=!0,n=!1;else if(n&&t)t=!0,n=!1;else if(!n)return t=!1,!1;if(i>20)return!1}return!o&&t}function a(e){var t=e.charCodeAt(0);return t>=65&&t<=90}function s(e){if(e.length<=2)return e;for(var t=e.charAt(1),n=a(t),o=2;o<e.length;o++){var r=e.charAt(o);if(n||!a(r)){if(" "==r){(r=e.charAt(o+1)).length>0&&(t=r);break}}else n=!0,t=r}return e.charAt(0)+t}function c(e){return e?DOMParser?(new DOMParser).parseFromString(e,"text/html").documentElement.textContent:e:""}function l(e,t){return void 0===t&&(t=""),e.replace(/\bhttps?:\/\/\S+/gi,t)}function p(e,t,n){void 0===n&&(n=!0);var o=e.trim();if((o=o.replace(n?/\s+/g:/[ \t]+/g," ")).length>t){var r=(o=o.substring(0,t)).replace(/^(.*([.!?])) .*$/,"$1"),i=r.length;(i<.6*t||i==t)&&(r=o.replace(/ [^ ]*$/,"...")),o=n?r.replace(/(\r\n|\n|\r)/gm,""):r}return o}function u(e){if(e.startsWith("[emoticon")){var t=e.match(/^(?:\[emoticon\][^\[]+\[\/emoticon\]\s*)+$/);if(t&&t.length){var n=e.match(/\[emoticon\][^\[]+\[\/emoticon\]/g);return n&&n.length<=6}}return!1}function m(e){return e.length<=1?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)}n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return m}))},"9Eit":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("mrSG");function r(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&Object.keys(e).every((function(t){return function(e){return!(!e||"object"!=typeof e||!Array.isArray(e))&&e.every(i)}(e[t])}))}function i(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;var t=e;return"number"==typeof t.timestamp&&("string"==typeof t.message&&(void 0===t.eError||"number"==typeof t.eError))}var a=new(function(){function e(){this.m_bInitialized=!1}return e.prototype.Init=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_bInitialized)return[2];this.m_storage=e,this.m_strStorageKey="InflightMessageQueue_"+t,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.GetObject(this.m_strStorageKey)];case 2:return(n=o.sent())?r(n)?this.m_queues=n:(console.warn("Malformed "+this.m_strStorageKey+" found in storage. Resetting."),this.m_queues={},this.WriteToStorage()):this.m_queues={},[3,4];case 3:return i=o.sent(),console.warn("Error while parsing stored message queues. Resetting.",i),this.m_queues={},this.WriteToStorage(),[3,4];case 4:return this.m_bInitialized=!0,[2]}}))}))},e.prototype.Update=function(e,t){0===t.length?delete this.m_queues[e]:this.m_queues[e]=t,this.WriteToStorage()},e.prototype.WriteToStorage=function(){Object.keys(this.m_queues).length>0?this.m_storage.StoreObject(this.m_strStorageKey,this.m_queues):this.m_storage.RemoveObject(this.m_strStorageKey)},e.prototype.Get=function(e){return this.m_queues[e]||[]},e}()),s=function(){function e(e){this.m_id=e,this.InitFromStorage()}return e.prototype.InitFromStorage=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return e=this,[4,a.Get(this.m_id)];case 1:return e.m_queue=t.sent(),[2]}}))}))},e.prototype.Add=function(e){var t={message:e,timestamp:Date.now()};return this.m_queue.push(t),this.UpdateStoredQueue(),this.GetItemID(t)},Object.defineProperty(e.prototype,"queued_messages",{get:function(){var e=this;return this.m_queue.map((function(t){return Object(o.a)(Object(o.a)({},t),{id:e.GetItemID(t)})}))},enumerable:!1,configurable:!0}),e.prototype.RemoveItem=function(e){var t=this.GetItemIndex(e);-1!==t?(this.m_queue.splice(t,1),this.UpdateStoredQueue()):console.warn("Could not find item to remove from send queue")},e.prototype.UpdateStoredQueue=function(){a.Update(this.m_id,this.m_queue)},e.prototype.GetItemID=function(e){return e.message.slice(0,10)+"_"+e.timestamp},e.prototype.GetItemIndex=function(e){var t=this;return this.m_queue.findIndex((function(n){return t.GetItemID(n)===e}))},e.prototype.SetItemFailed=function(e,t){var n=this.GetItemIndex(e);-1!==n?(this.m_queue[n].eError=t,this.UpdateStoredQueue()):console.warn("Could not find item to update from send queue")},e}()},"9PRf":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("mrSG"),r=n("q1tI"),i=n("okNM"),a=n("QHER"),s=n("F2OU"),c=n.n(s),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),Object.defineProperty(t,"hoverClass",{get:function(){return c.a.hoverParent},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.persona,n=e.animating,i=e.className,s=e.size,l=e.dim,p=Object(o.f)(e,["persona","animating","className","size","dim"]),u="";return"medium"==s?u=c.a.Medium:"large"==s&&(u=c.a.Large),r.createElement("div",Object(o.a)({className:Object(a.a)(c.a.SnoozeContainer,t.online_state,i,n&&c.a.animating,u,l&&c.a.Dim)},p),r.createElement("div",{"data-text":"Z",className:Object(a.a)(c.a.SnoozeZ,c.a.Z1)},"Z"),r.createElement("div",{"data-text":"Z",className:Object(a.a)(c.a.SnoozeZ,c.a.Z2)},"Z"),r.createElement("div",{"data-text":"Z",className:Object(a.a)(c.a.SnoozeZ,c.a.Z3)},"Z"))},t=Object(o.c)([i.a],t)}(r.Component)},AAGn:function(e,t,n){e.exports={ChatRoomContextNoPermission:"chatroommenu_ChatRoomContextNoPermission_3HB3b",SVGIcon_Lock:"chatroommenu_SVGIcon_Lock_2mfz6"}},ABiV:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABApJREFUeNrsm2tIFUEUx2evRl5ISnugZuULIwoVtIykIIkgowdmERERUh9CqQ/Rh+gFCX4oKCIjyi8VQtETsoLoARViJEokRYlako9Iy4JKfLX9hz2CwXrv7t6ZvbvcPfDjwr3uzJ7/npk5c3ZUVFVlkWw+FuHmCeAJ4AngCeAJ4AkQwRbtgnucBzJALPgNPoJ28FdI6zwTdCDp4DToUvWtF1SDHIPtFUz0m5GLp9noeAw4BYZV43YFxOm05QNF4DmosirADNABMm1wPgE0qdasHWSAKJALKkAr/TYIUq0KcIAa4Y0lS3Q+HjSroVk/+Knz/eFAfQe7sfpxDckU4bYqx2opKsb6UcwIMElnLPLhsECw8xskOc9F9RPFoIaGyX/9B8oDknSWybmgHhQJXOaOSlg634AP4AH4Dm6Bh6DVzDKYE0ThSoqSUJ5+lmqPVUx0D4EioDeIygdBA8gL4UmtsiGROhcoygIJ8AUMBGk8G7wC1SDRws1lSXb+OCjngW5FgFHw0kAnCthF6ekZkGLiBhMlOT4ENoNjoW6GrpvoNAbsBW3gLtgKpgS5ZkCSAD3gpojdYA34ZmGHuQ5cpWtrSZilJNJ46w/3TksxUBbfDS4K6m+ElqdO0A3mg2WSlsFsUQLwMX4DbHLRNr/eqLCBhkAm2EgC7ABPXCRAr9E/DFQQ8YM7FK61FAUJYKELBGgTIUA3fSaDPS6rdBkWIFgm+M6lpb4mUUXRey50fhA0ihLgLBh2mQANlAkKEaCTNhNusvuiEyE/7QmyXCJAhqhJcHy+vtZMo2G0RrP3afTNEB8KBeCpwwUwnbIrJo/I8KxwJzgCUh3mfD/lLH9kRAC3eLCIabW1FWA/bTudYufNOm82AuJAF02KzIFPPw38MHuhz2Qnlxw69iutOG9lDuDDoAVMd5Dzb0EuZYBMZgRw4zV2XuoadYjz/BV5qVXnrQjA7THY7pAU+STTqtKWTQnhpCjPCy6D9DA5/wIUMq3MFhYBxtJkXncvY9pJDrusAywBX0NtSBF0VthHe4Xl9FnK5J0/6qPoaxF146Imo9dUQFkj2flCUc6LFIDvwK7RBDlbYtjzCGsW2Wiop8TyafxvA1ESx3wdKGHa+0oWTgGmgsVgNVjPtBcbMo1PUCdo8yVl2dUTYBY4BOYw7VxeLGWAKbTbUmya6d8z7aVrnVyJ9Q8ORINy0KPab31gn4DDF4YItgz66SmU2RDun0AVuAB+2ZVQGM0DeNivBFtAMZgpcBvLi5j8LfQjJur4q+REiM/2eSRIPiU+aQZzhc+UL/DS9TOmFVtHWBhNVCY4mWmnypJo2IwdjBikp8xTVl5XHGIOM8X7t7kIN08ATwBPAE8ATwBPgAi2fwIMABJGc33swO3GAAAAAElFTkSuQmCC"},Au4U:function(e,t,n){e.exports={BodyNoScroll:"modals_BodyNoScroll_37Qxr",BodyNoScrollDialog:"modals_BodyNoScrollDialog_2E4Pq",OverlayModal:"modals_OverlayModal_2n8Ob"}},B0FO:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return h}));var o=n("mrSG"),r=n("q1tI"),i=n("5O1C"),a=n("0N1H"),s=n("1n9R"),c=["h1","h2","h3","b","u","hr","i","img","strike","spoiler","noparse","url","list","olist","quote","pullquote","code","table","tr","td","th","previewyoutube","looping_media","roomeffect","sticker","price","pricesavings"],l=["h1","h2","h3","b","u","i","strike","spoiler","noparse","url"],p=["img","previewyoutube","looping_media","roomeffect"];c.filter((function(e){return-1==p.indexOf(e)}));function u(e,t,n){return void 0===t&&(t=c),void 0===n&&(n=" "),t.forEach((function(t){var o="\\["+t+".*(\\=[^\\]]*)?\\].*\\[\\/"+t+"\\]";e=e.replace(new RegExp(o,"gi"),n)})),e}function m(e,t,n){void 0===t&&(t=c),void 0===n&&(n="");var o="\\[\\/?(?:"+t.join("|")+")*?.*?\\]";return e.replace(new RegExp(o,"gi"),n)}function d(e,t,n){if(void 0===n&&(n=0),2==t.type){var o=t.text.indexOf("="),r=t.text.indexOf(" ");if(-1!=r&&(-1==o||r<o)&&(o=r),o>0){t.tag=t.text.substr(0,o).toLocaleLowerCase();var i=t.text.substr(o);t.args=function(e){if(!e||e.length<1)return{};var t={},n="",o="",r=0,i=0;"="==e[0]&&(r=2);var a=!1;for(i++;i<e.length;i++){var s=e[i],c=!0,l=!1;switch(r){case 0:if("="==s)return{};if(" "==s)continue;r=1;break;case 1:"="!=s&&" "!=s||a||(" "==s?(r=0,l=!0):r=2,c=!1);break;case 2:" "==s?(r=0,c=!1,l=!0):'"'==s?(r=4,c=!1):r=3;break;case 3:case 4:(" "==s&&4!=r&&!a||'"'==s&&4==r&&!a)&&(r=0,c=!1,l=!0)}if(c)if("\\"!=s||a)if(a=!1,1==r)n+=s;else{if(3!=r&&4!=r)throw new Error("Not expecting to accumulate buffer in state "+r);o+=s}else a=!0;l&&(t[n]=o,n="",o="")}0!=r&&(t[n]=o);return t}(i)}else t.args={},t.tag=t.text.toLocaleLowerCase()}e.push(t);var a=new f;return a.type=n,a}var h=function(){function e(e,t,n){void 0===t&&(t=function(){return new i.b}),this.m_dictComponents=void 0,this.m_dictComponents=e,this.m_fnAccumulatorFactory=t,this.m_renderingLanguage=n||Object(a.e)(s.c.LANGUAGE)}return e.prototype.UpdateOverrideLanguage=function(e){this.m_renderingLanguage=e||Object(a.e)(s.c.LANGUAGE)},e.prototype.ParseBBCode=function(e,t){var n=function(e){for(var t=[],n=new f,o=!1,r=!1,i=0;i<e.length;i++){var a=e[i];switch(n.type){case 0:"["==a?(n.type=2,r=!0):(n.type=1,"\\"==a?o=!o:n.text+=a);break;case 2:case 3:"/"==a&&r?(n.type=3,n.text="",r=!1):"["!=a||o?"]"!=a||o?"\\"==a?(n.text+=a,o=!o,r=!1):(n.text+=a,o=!1,r=!1):(r&&n.ConvertMalformedNodeToText(),n=d(t,n),r=!1):(n.ConvertMalformedNodeToText(),n=d(t,n,2),r=!0);break;case 1:"["!=a||o?"\\"==a?(o&&(n.text+=a),o=!o):(n.text+=a,o=!1):(n=d(t,n,2),r=!0)}}return 0!=n.type&&(2!=n.type&&3!=n.type||n.ConvertMalformedNodeToText(),t.push(n)),t}(e);return this.Parse_BuildReactComponents(n,t)},e.prototype.Parse_BuildReactComponents=function(e,t){var n=this,i=this.m_fnAccumulatorFactory(void 0),a=[],s=function(){return a.length<1?void 0:a[a.length-1]},c=this.m_dictComponents,l=this.m_renderingLanguage,p=!1,u=function(e,n,s){if(e&&e.node.tag===n.text&&c.get(e.node.tag)){var u=c.get(e.node.tag),m=a.map((function(e){return e.node.tag})),d={context:t,parentTags:m,tagname:e.node.tag,args:e.node.args,language:l,key:e.node.tag+"_"+s},h=r.createElement.apply(r,Object(o.g)([u.Constructor,d],i.GetElements()));(i=e.accumulator).AppendNode(h),p=u.skipFollowingNewline}else if(e){var f=e.accumulator;f.AppendText("["+e.node.text+"]",!1),i.GetElements().forEach((function(e){return f.AppendNode(e)})),f.AppendText("[/"+n.text+"]",!1),i=f}};e.forEach((function(e,t){if(1==e.type){var o=p?e.text.replace(/^[\t\r ]*\n/g,""):e.text;i.AppendText(o,0==a.length),p=!1}else if(2==e.type){var r=c.get(e.tag);if(r){var l=s();if(void 0!==l){var m=c.get(l.node.tag);m&&m.autocloses&&e.tag===l.node.tag&&u(a.pop(),l.node,t)}a.push({accumulator:i,node:e}),i=n.m_fnAccumulatorFactory(e),p=r.skipInternalNewline}else i.AppendText("["+e.text+"]",0==a.length)}else if(3==e.type){for(;s()&&s().node.tag!==e.text&&c.get(s().node.tag)&&c.get(s().node.tag).autocloses;){var d=a.pop();u(d,d.node,t)}var h=a.pop();u(h,e,t)}}));for(var m=function(){var e=a.pop(),t=e.accumulator;t.AppendText("["+e.node.text+"]",!1),i.GetElements().forEach((function(e){return t.AppendNode(e)})),i=t};a.length>0;)m();var d=i.GetElements();return d.length>1?r.createElement.apply(r,Object(o.g)([r.Fragment,null],d)):1==d.length?d[0]:null},e}(),f=function(){function e(){this.type=0,this.text=""}return e.prototype.ConvertMalformedNodeToText=function(){3==this.type?this.text="[/"+this.text:2==this.type&&(this.text="["+this.text),this.type=1},e}()},B7ut:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c}));var o=n("1n9R");function r(e){var t=new RegExp("^(steam://openurl(_external)?/)?((f|ht)tps?://)?([^@/?#]*@)?([^/#?]+)","im"),n=e.match(t);return n&&n.length>5?n[6].toString():e}function i(e){var t=r(e);return t.startsWith("www.")&&(t=t.slice(4)),t}function a(e){var t=document.createElement("a");return t.href=e,t.hostname.indexOf("xn--")>=0?t.href:e}function s(e){return"http:"!==e.substr(0,5)||1!=o.c.EUNIVERSE||"http:"==(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/http:\/\/media.steampowered.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/cdn.akamai.steamstatic.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/cdn.edgecast.steamstatic.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/cdn.dota2.com\//g,o.c.MEDIA_CDN_URL)).replace(/http:\/\/storefront.steampowered.com\/v\/gfx\//g,o.c.MEDIA_CDN_URL+"steam/")).replace(/http:\/\/cdn.steamcommunity.com\//g,o.c.COMMUNITY_CDN_URL)).replace(/http:\/\/community.akamai.steamstatic.com\//g,o.c.COMMUNITY_CDN_URL)).replace(/http:\/\/community.edgecast.steamstatic.com\//g,o.c.COMMUNITY_CDN_URL)).substr(0,5)&&(e="https:"+e.substr(5)),e}function c(e){return o.c.SNR&&o.c.SNR.length>0?e+(e.indexOf("?")>=0?"&":"?")+"snr="+o.c.SNR:e}},C8jb:function(e,t,n){e.exports={SaleHeaderContainer:"partnersaledisplay_SaleHeaderContainer_2Kpls",SaleSection:"partnersaledisplay_SaleSection_FfzNv",CarouselDisplay:"partnersaledisplay_CarouselDisplay_3RDEb",SaleViewAll:"partnersaledisplay_SaleViewAll_qU4Rf",SaleSectionLoginPrompt:"partnersaledisplay_SaleSectionLoginPrompt_LzOSG",LoginButton:"partnersaledisplay_LoginButton_Dxxbh",SaleOverlayCtn:"partnersaledisplay_SaleOverlayCtn_2dtYu",SaleOverlay:"partnersaledisplay_SaleOverlay_3PS79",AppSummaryWidgetCtn:"partnersaledisplay_AppSummaryWidgetCtn_i6DFs",SaleBroadcastCtn:"partnersaledisplay_SaleBroadcastCtn_1wQa9",SaleOuterContainer:"partnersaledisplay_SaleOuterContainer_3xu9l",CustomStyle_together:"partnersaledisplay_CustomStyle_together_2q9Vw",SaleBackground:"partnersaledisplay_SaleBackground_1l7B-",SaleSectionTitleCtn:"partnersaledisplay_SaleSectionTitleCtn_1XjSK",SaleSectionSubtext:"partnersaledisplay_SaleSectionSubtext_3mgOb",SaleSectionContainer:"partnersaledisplay_SaleSectionContainer_10H7u",ShowContentsContainer:"partnersaledisplay_ShowContentsContainer_AmT1N",ShowContentsButton:"partnersaledisplay_ShowContentsButton_396J5",vr_supported:"partnersaledisplay_vr_supported_VEncj",vr_required:"partnersaledisplay_vr_required_3b4Dk",preview_placeholder_section:"partnersaledisplay_preview_placeholder_section_t3fmh",LinkCapsule:"partnersaledisplay_LinkCapsule_1F0x3",fullscreen_bg:"partnersaledisplay_fullscreen_bg_1wtr2",fullscreen_bg__video:"partnersaledisplay_fullscreen_bg__video_1gAtI",SalePageBroadcastContextHover:"partnersaledisplay_SalePageBroadcastContextHover_3ww6l",AlbumCoverImage:"partnersaledisplay_AlbumCoverImage_3JA9x",AlbumTitle:"partnersaledisplay_AlbumTitle_3DbPP",PreviewSalesPageContainer:"partnersaledisplay_PreviewSalesPageContainer_1yb13",SaleSectionTabs:"partnersaledisplay_SaleSectionTabs_1bxYK",SaleSectionTabsTab:"partnersaledisplay_SaleSectionTabsTab_2MHb9",SaleSectionTabContainer:"partnersaledisplay_SaleSectionTabContainer_3Q5Mn",SaleSectionTabsRow:"partnersaledisplay_SaleSectionTabsRow_2OwQW",SaleTab:"partnersaledisplay_SaleTab_3QG1w",SaleTabLabel:"partnersaledisplay_SaleTabLabel_3NVTW",SaleSectionTabListContainer:"partnersaledisplay_SaleSectionTabListContainer_1FE1U",TabContentsContainer:"partnersaledisplay_TabContentsContainer_38dpV",HorizontalScrollInDragForceCursor:"partnersaledisplay_HorizontalScrollInDragForceCursor_lNSkD",SaleBroadcastSection:"partnersaledisplay_SaleBroadcastSection_31o_B"}},CFWN:function(e,t,n){e.exports={DynamicLinkBox:"eventbbcodeyoutubeembed_DynamicLinkBox_2SiIl",DynamicLink_Preview:"eventbbcodeyoutubeembed_DynamicLink_Preview_10_HJ",DynamicLink_Author:"eventbbcodeyoutubeembed_DynamicLink_Author_155mg",DynamicLink_Description:"eventbbcodeyoutubeembed_DynamicLink_Description_2Q0My",DynamicLink_Content:"eventbbcodeyoutubeembed_DynamicLink_Content_1J_LT",DynamicLink_Name:"eventbbcodeyoutubeembed_DynamicLink_Name_dHv3I",DynamicLink_YoutubeViews:"eventbbcodeyoutubeembed_DynamicLink_YoutubeViews_38q0r",Dynamiclink_Content:"eventbbcodeyoutubeembed_Dynamiclink_Content_1XTy_",DynamicLink_URL:"eventbbcodeyoutubeembed_DynamicLink_URL_17X_I",DynamicLink_AuthorName:"eventbbcodeyoutubeembed_DynamicLink_AuthorName_-o-Y7",DynamicLink_Date:"eventbbcodeyoutubeembed_DynamicLink_Date_1Hl8P",PreviewYouTubeVideo:"eventbbcodeyoutubeembed_PreviewYouTubeVideo_2o1rL",sizeThumb:"eventbbcodeyoutubeembed_sizeThumb_1h_Ov",sizeFull:"eventbbcodeyoutubeembed_sizeFull_AOrFh",floatLeft:"eventbbcodeyoutubeembed_floatLeft_QQX_V",floatRight:"eventbbcodeyoutubeembed_floatRight_a8f46"}},CKJp:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("1n9R"),r=n("yovy"),i=n("XaMz"),a=120,s=function(){function e(e){this.m_bInitialized=!1,this.m_unAppID=e}return Object.defineProperty(e.prototype,"appid",{get:function(){return this.m_unAppID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_valid",{get:function(){return this.m_bInitialized&&!!this.m_strName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header_image_url",{get:function(){return o.c.MEDIA_CDN_URL+"steam/apps/"+this.m_unAppID+"/header.jpg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return this.BuildAppURL(this.m_strIconURL,"061818254b2c99ac49e6626adb128ed1282a392f")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo_url",{get:function(){return this.BuildAppURL(this.m_strLogoURL,"338200c5d6c4d9bdcf6632642a2aeb591fb8a5c2.gif")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time_updated_from_server",{get:function(){return this.m_dtUpdatedFromServer},enumerable:!1,configurable:!0}),e.prototype.BuildAppURL=function(e,t){return e?o.c.MEDIA_CDN_COMMUNITY_URL+"images/apps/"+this.appid+"/"+e+".jpg":Object(r.a)(t)},e.prototype.DeserializeFromMessage=function(e){this.m_bInitialized=!0,this.m_strName=e.name(),this.m_strIconURL=e.icon(),this.m_strLogoURL=e.logo(),this.m_dtUpdatedFromServer=new Date},e.prototype.DeserializeFromAppOverview=function(e){e.logo_hash()&&1073741824!=e.app_type()?(this.m_bInitialized=!0,this.m_strName=e.display_name(),this.m_strIconURL=e.icon_hash(),this.m_strLogoURL=e.logo_hash(),this.m_dtUpdatedFromServer=new Date):this.m_bInitialized=!1},e.prototype.DeserializeFromCacheObject=function(e){try{this.m_strName=e.strName,this.m_strIconURL=e.strIconURL,this.m_strLogoURL=e.strLogoURL,this.m_dtUpdatedFromServer=new Date(e.strUpdatedFromServer),this.m_bInitialized=!0}catch(e){}},e.prototype.SerializeToCacheObject=function(){return Object(i.a)(this.m_bInitialized,"Attempting to serialize an uninitialized AppInfo object for caching!"),this.m_bInitialized?{strName:this.m_strName,strIconURL:this.m_strIconURL,strLogoURL:this.m_strLogoURL,strUpdatedFromServer:this.m_dtUpdatedFromServer.toJSON()}:null},e}()},Cebd:function(e,t,n){e.exports={PersonaStatusIcon:"personastatusicons_PersonaStatusIcon_2rP7f",MobilePhoneIcon:"personastatusicons_MobilePhoneIcon_2ZlAW"}},"D/sW":function(e,t,n){e.exports={BroadcastPlayerLite:"broadcastplayer_BroadcastPlayerLite_2GiO-",BroadcastPlayerLiteVideo:"broadcastplayer_BroadcastPlayerLiteVideo_15xWu",BroadcastContext:"broadcastplayer_BroadcastContext_1-bEe"}},D3Kh:function(e,t,n){"use strict";n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return Z})),n.d(t,"a",(function(){return ne}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("UqDm"),c=n("XaMz"),l=n("E7zH"),p=n("oh5H"),u=n("/7KC"),m=n("1VtQ"),d=n("1n9R"),h=n("MsQV"),f=n("OTLo"),_=n("oZT8"),g=n("mh12"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(Error),v=function(e){function t(t){var n=e.call(this)||this;return n.m_appid=t||0,n}return Object(o.d)(t,e),t.prototype.GetAppID=function(){return this.m_appid},t.prototype.parseColor=function(e){if("string"!=typeof e||!e.match(/^#[0-9a-fA-F]{6}$/))throw new b("expected color string");return[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)]},t.prototype.parseString=function(e){if("string"==typeof e)return e;throw new b("expected string")},t.prototype.parseNumber=function(e){if("number"==typeof e)return e;throw new b("expected number")},t.prototype.parseDate=function(e){if("number"==typeof e)return new Date(e);throw new b("expected timestamp")},t.prototype.parseArray=function(e,t){var n=[];if("object"!=typeof e||!Array.isArray(e))throw new b("expected array");for(var o=e.length,r=0;r<o;++r)try{n.push(t(e[r]))}catch(e){throw e.message+="\n...while parsing array element "+r,e}return n},t.prototype.parseDict=function(e,t){var n=new Map;if("object"!=typeof e||Array.isArray(e))throw new b("expected object");for(var o in e)try{n.set(o,t(e[o]))}catch(e){throw e.message+="\n...while parsing dictionary element "+o,e}return n},t.prototype.parseBracket=function(e){var t={name:this.parseString(e.name),start:this.parseDate(e.start),color:[255,0,255]};return"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"end"in e&&(t.end=this.parseDate(e.end)),"color"in e&&(t.color=this.parseColor(e.color)),t},t.prototype.parseMarker=function(e){var t={time:this.parseDate(e.time),color:[0,255,255]};return"name"in e&&(t.name=this.parseString(e.name)),"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"color"in e&&(t.color=this.parseColor(e.color)),t},t.prototype.parseSoundTrack=function(e){var t={};return"song_title"in e&&(t.song_title=this.parseString(e.song_title)),"appid"in e&&(t.appid=this.parseNumber(e.appid)),"song_index"in e&&(t.song_index=this.parseNumber(e.song_index)),t},t.prototype.parseBroadcastGameData=function(e){var t={appid:0,brackets:[],markers:[]};return"appid"in e&&(t.appid=this.parseNumber(e.appid)),"brackets"in e&&(t.brackets=this.parseArray(e.brackets,this.parseBracket.bind(this))),"markers"in e&&(t.markers=this.parseArray(e.markers,this.parseMarker.bind(this))),"soundtrack"in e&&(t.soundtrack=this.parseSoundTrack(e.soundtrack)),t},t.prototype.convertTime=function(e,t){return e-t/1e3},t.prototype.LocalizeTokenIfPossible=function(e,t){return f.a.Localize(this.m_appid,e,t)},t.prototype.UpdateMarkers=function(e,t){for(var n=[],o=[],r=0,i=e;r<i.length;r++){var a=i[r];a.persistent?(o.length>0&&(o[o.length-1].nTimeEnd=this.convertTime(a.Timestamp,t)),a.name.length>0&&o.push({strTemplateName:a.name,nTimeStart:this.convertTime(a.Timestamp,t),nTimeEnd:-1,color:Object(m.b)(a.color_r,a.color_g,a.color_b)})):n.push({strTemplateName:a.name,nTime:this.convertTime(a.Timestamp,t),color:Object(m.b)(a.color_r,a.color_g,a.color_b)})}return{rgMarkers:n,rgSegments:o}},t.prototype.UpdateRegions=function(e){for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n];t.push({strTemplateName:r.name,min:{x:r.min_x,y:r.min_y},max:{x:r.max_x,y:r.max_y},behavior:r.behavior})}return t},t.prototype.UpdateSoundtrack=function(e,t){var n=this.parseSoundTrack(t),o=_.c.GetPlayReadyStream();o&&o.steamid==e&&(n.song_title&&o.gamedata_subtitle!=n.song_title&&(o.gamedata_subtitle=n.song_title),o.appid!=n.appid&&(o.appid=n.appid,g.a.LoadAppLinkInfo([o.appid])))},t}(h.b),y=n("Y3w+");function S(e,t){var n=e.getElementsByTagName("MPD");return n&&1==n.length?n[0]:null}function C(e,t){for(var n=0;n<e.children.length;n++){var o=e.children[n];if(o.tagName==t)return o}return null}function O(e,t){var n=e.getAttribute(t);if(!n)return null;var o=new Date(n);return"[object Date]"===Object.prototype.toString.call(o)?o:null}function I(e,t){var n=e.getAttribute(t);if(!n)return null;var o=0,r=n.match(/(\d*)H/);return r&&(o+=60*parseFloat(r[1])*60),(r=n.match(/(\d*)M/))&&(o+=60*parseFloat(r[1])),(r=n.match(/(\d*\.?\d*)S/))&&(o+=parseFloat(r[1])),o}function E(e,t){var n=e.getAttribute(t);return n?"true"==(n=n.toLowerCase())||"false"!=n&&null:null}function w(e,t){var n=e.getAttribute(t);return n?parseInt(n):null}function A(e,t){var n=e.getAttribute(t);return n||""}function D(e,t,n){return e=(e=e.replace("$RepresentationID$",t)).replace("$Number$",n.toString())}function T(e){return 0==e.rgRoles.length||e.rgRoles.findIndex((function(e){return"main"==e}))>=0}function M(e){return e?1e3==e.segmentTemplate.nTimeScale?e.segmentTemplate.nDuration:e.segmentTemplate.nDuration/e.segmentTemplate.nTimeScale*1e3:0}function j(e,t){var n=M(e);return Math.floor(t/n)+1}var L,G=function(){function e(){this.m_nMinBufferTime=0,this.m_dtAvailabilityStartTime=null,this.m_dtPublishTime=null,this.m_nMinimumUpdatePeriod=0,this.m_nTimeShiftBufferDepth=0,this.m_dtMediaPresentationDuration=null,this.m_strBaseURL="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_rgPeriods=null,this.m_tsLiveContentStart=0}return e.prototype.GetType=function(){return this.m_strType},e.prototype.GetMinimumUpdatePeriod=function(){return this.m_nMinimumUpdatePeriod},e.prototype.GetAvailabilityStartTime=function(){return this.m_dtAvailabilityStartTime},e.prototype.GetPeriods=function(){return this.m_rgPeriods},e.prototype.GetBaseURL=function(){return this.m_strBaseURL},e.prototype.GetTimeShiftBufferDepth=function(){return this.m_nTimeShiftBufferDepth},e.prototype.GetMinBufferTime=function(){return this.m_nMinBufferTime},e.prototype.IsLiveContent=function(){return"dynamic"==this.GetType()},e.prototype.GetAdaptationByTrackID=function(e){if(!this.m_rgPeriods||0==this.m_rgPeriods.length)return null;for(var t=0,n=this.m_rgPeriods[0].rgAdaptationSets;t<n.length;t++){var o=n[t];if(e==o.strID)return o}return null},e.prototype.GetVideoAdaption=function(){for(var e=0,t=this.m_rgPeriods[0].rgAdaptationSets;e<t.length;e++){var n=t[e];if(n.bContainsVideo)return n}return null},e.prototype.GetStartTime=function(){return!this.IsLiveContent()&&this.m_rgPeriods.length>0?this.m_rgPeriods[0].nStart:0},e.prototype.GetEndTime=function(){return!this.IsLiveContent()&&this.m_rgPeriods.length>0?this.GetStartTime()+this.m_rgPeriods[0].nDuration:Number.MAX_VALUE},e.prototype.GetLowestRepresentation=function(e){var t=this.GetAdaptationByTrackID(e);if(!t)return null;for(var n=t.rgRepresentations[0],o=0,r=t.rgRepresentations;o<r.length;o++){var i=r[o];i.nBandwidth<n.nBandwidth&&(n=i)}return n},e.prototype.GetStatsLink=function(){return this.m_strStatsLink},e.prototype.GetStalledLink=function(){return this.m_strStalledLink},e.prototype.GetEventLink=function(){return this.m_strEventLogLink},e.prototype.StartLiveContentNow=function(e){this.m_tsLiveContentStart=performance.now()-e},e.prototype.GetDurationSinceStarted=function(){return performance.now()-this.m_tsLiveContentStart},e.prototype.ParseRepresentation=function(e,t){var n=t,o={strID:A(e,"id"),strMimeType:A(e,"mimeType"),strCodecs:A(e,"codecs"),nBandwidth:w(e,"bandwidth")};if(n.bContainsVideo){if(o.nWidth=w(e,"width"),o.nHeight=w(e,"height"),o.nFrameRate=w(e,"frameRate"),!(o.strID&&o.strMimeType&&o.strCodecs&&o.nBandwidth))return Object(y.c)("MPD - Representation Video Data Missing"),null}else if(n.bContainsAudio){o.nAudioSamplingRate=w(e,"audioSamplingRate");var r=C(e,"AudioChannelConfiguration");if(r&&(o.nAudioChannels=w(r,"value")),o.nAudioChannels||(o.nAudioChannels=2),!(o.strID&&o.strMimeType&&o.strCodecs&&o.nAudioSamplingRate&&o.nAudioChannels))return Object(y.c)("MPD - Representation Audio Data Missing"),null}return o},e.prototype.BParse=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=S(t);if(!n)return!1;var o=n.getAttribute("type");if(this.m_nMinBufferTime=I(n,"minBufferTime"),"dynamic"==o){if(this.m_strType="dynamic",this.m_dtAvailabilityStartTime=O(n,"availabilityStartTime"),this.m_dtPublishTime=O(n,"publishTime"),this.m_nMinimumUpdatePeriod=I(n,"minimumUpdatePeriod"),this.m_nTimeShiftBufferDepth=I(n,"timeShiftBufferDepth"),!(this.m_dtAvailabilityStartTime&&this.m_dtPublishTime&&this.m_nMinimumUpdatePeriod&&this.m_nMinBufferTime&&this.m_nTimeShiftBufferDepth))return!1}else{if("static"!=o)return Object(y.c)("MPD - Unknown type"),!1;if(this.m_strType="static",this.m_dtMediaPresentationDuration=O(n,"mediaPresentationDuration"),!this.m_nMinBufferTime||!this.m_dtMediaPresentationDuration)return Object(y.c)("MPD - Missing Buffer Time or Presentation Duration"),!1}var r=C(n,"BASEURL");r&&(this.m_strBaseURL=r.textContent);var i=C(n,"Analytics");i&&(this.m_strStatsLink=A(i,"statslink"),this.m_strStalledLink=A(i,"stalledlink"),this.m_strEventLogLink=A(i,"eventlink"));var a=t.getElementsByTagName("Period");if(0==a.length)return!1;var s=a[0],c={strID:A(s,"id"),nStart:I(s,"start"),nDuration:I(s,"duration"),rgAdaptationSets:[]};if(!c.strID||null===c.nStart)return Object(y.c)("MPD - Missing Period Information."),!1;this.m_rgPeriods=[],this.m_rgPeriods.push(c);for(var l=s.getElementsByTagName("AdaptationSet"),p=0;p<l.length;p++){var u=l[p],m=A(u,"description"),d=A(u,"lang"),h={bSegmentAlignment:E(u,"segmentAlignment"),bIsClosedCaption:"text/vtt"==A(u,"mimeType"),strLanguage:A(u,"lang"),bContainsVideo:!1,bContainsAudio:!1,bContainsGame:!1,strDescription:m||d,strForceSub:A(u,"forceSub"),strID:A(u,"id"),rgRoles:[],rgRepresentations:[],thumbnails:null,segmentTemplate:null};if(c.rgAdaptationSets.push(h),h.bIsClosedCaption){h.rgRoles.push("subtitle");for(var f=u.getElementsByTagName("Role"),_=0;_<f.length;_++){(P=A(f[_],"value"))&&h.rgRoles.push(P)}for(var g=u.getElementsByTagName("Representation"),b=0;b<g.length;b++){var v={strID:A(H=g[b],"id"),nBandwidth:w(H,"bandwidth"),strClosedCaptionFile:""},T=C(H,"BaseURL"),M=T?T.textContent:"";if(!M)return Object(y.c)("Closed Caption File has no BaseURL for (id): "+v.strID),!1;v.strClosedCaptionFile=this.m_strBaseURL+D(M,v.strID,0),h.rgRepresentations.push(v)}}else{if(!h.bSegmentAlignment)return Object(y.c)("MPD - Segment Alignment Missing"),!1;for(var j=u.getElementsByTagName("ContentComponent"),L=0;L<j.length;L++){var G=A(j[L],"contentType");"video"==G&&(h.bContainsVideo=!0),"audio"==G&&(h.bContainsAudio=!0),"game"==G&&(h.bContainsGame=!0)}if(h.bContainsVideo){var N=C(u,"Thumbnails");if(N){var R=w(N,"sheet"),k=w(N,"period");h.thumbnails={nPeriod:k,strTemplate:A(N,"template"),nSheet:R,nSheetSeconds:R*k}}}var B=u.getElementsByTagName("Role");for(L=0;L<B.length;L++){var P;(P=A(B[L],"value"))&&h.rgRoles.push(P)}var F=u.getElementsByTagName("SegmentTemplate");if(0==F.length)return Object(y.c)("MPD - Segment Template Missing"),!1;var x=F[0];h.segmentTemplate={nTimeScale:w(x,"timescale"),nDuration:w(x,"duration"),nStartNumber:w(x,"startNumber"),strMedia:A(x,"media"),strInitialization:""};var V=h.segmentTemplate;if(h.bContainsGame?V.strInitialization=V.strMedia:V.strInitialization=A(x,"initialization"),!(V.nTimeScale&&V.nDuration&&V.nStartNumber&&V.strMedia&&V.strInitialization))return Object(y.c)("MPD - Segment Template Data Missing"),!1;var U=u.getElementsByTagName("Representation");for(L=0;L<U.length;L++){var H=U[L];if(!(v=this.ParseRepresentation(H,h)))return!1;h.rgRepresentations.push(v)}}}return!0},e.prototype.BUpdate=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=S(t);if(!n)return!1;if(this.IsLiveContent()){var o=t.getElementsByTagName("Period");if(0==o.length)return!1;for(var r=o[0].getElementsByTagName("AdaptationSet"),i=0;i<r.length;i++){var a=r[i],s=A(a,"id"),c=this.GetAdaptationByTrackID(s);if(c){var l=a.getElementsByTagName("SegmentTemplate");if(0==l.length)return Object(y.c)("MPD - Segment Template Missing"),!1;var p=l[0];c.segmentTemplate.strMedia=A(p,"media");var u=a.getElementsByTagName("Representation");if(u.length>1)for(var m=0;m<u.length;m++){for(var d=u[m],h=this.ParseRepresentation(d,c),f=!0,_=0,g=c.rgRepresentations;_<g.length;_++){var b=g[_];if(h.strID==b.strID){f=!1;break}}f&&c.rgRepresentations.push(h)}break}}}var v=C(n,"Analytics");return v&&(this.m_strStatsLink=A(v,"statslink"),this.m_strStalledLink=A(v,"stalledlink"),this.m_strEventLogLink=A(v,"eventlink")),!0},e}();!function(e){e[e.None=0]="None",e[e.Append=1]="Append",e[e.Remove=2]="Remove"}(L||(L={}));var N=function(){function e(e,t,n,o){this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_sourceBuffer=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_eBufferUpdate=L.None,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bRemoveBufferState=!1,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_schNextDownload=new l.b,this.m_xhrDownload=null,this.m_listeners=new l.c,this.m_rgDownloadLog=[],this.m_nCurDownloadProgress=0,this.m_nCurDownloadBitrate=0,this.m_nNumConsecutiveDownloadGones=0,this.m_statsGameData=null,this.m_callbacks=e,this.m_mpd=t,this.m_adaptation=n,this.m_stats=o}return e.prototype.SetMediaSource=function(e){this.m_mediaSource=e},e.prototype.SetBufferMS=function(e){this.m_nTrackBufferMS=e},e.prototype.GetRepresentationsCount=function(){return this.m_adaptation.rgRepresentations.length},e.prototype.GetRepresentationByID=function(e){for(var t=0,n=this.m_adaptation.rgRepresentations;t<n.length;t++){var o=n[t];if(o.strID==e)return o}return null},e.prototype.GetNumConsecutiveDownloadGones=function(){return this.m_nNumConsecutiveDownloadGones},e.prototype.ContainsVideo=function(){return this.m_adaptation.bContainsVideo},e.prototype.ContainsAudio=function(){return this.m_adaptation.bContainsAudio},e.prototype.ContainsGame=function(){return this.m_adaptation.bContainsGame},e.prototype.GetAdaptation=function(){return this.m_adaptation},e.prototype.GetBandwidthRequired=function(){return this.m_representation.nBandwidth},e.prototype.BIsCurrentRepresentation=function(e){return e&&e.strID==this.m_representation.strID},e.prototype.GetSourceBufferTimeRanges=function(){return this.m_sourceBuffer.buffered},e.prototype.GetEstimatedAudioRate=function(){return this.m_representation&&this.ContainsAudio()?this.m_representation.nBandwidth:0},e.prototype.GetDebugName=function(){var e=[];return this.ContainsVideo()?e.push("Video"):this.ContainsAudio()?e.push("Audio"):this.ContainsGame()&&e.push("Game"),e.join(" & ")},e.prototype.GetMaxSegment=function(){if(this.m_mpd.IsLiveContent())return Number.MAX_VALUE;var e=this.m_mpd.GetEndTime();return j(this.m_adaptation,1e3*e)-1},e.prototype.GetAmountBufferedInPlayerMS=function(e){if(!this.m_sourceBuffer)return 0;var t=this.m_sourceBuffer.buffered;if(0==t.length)return 0;e<t.start(0)&&(e=t.start(0)),e>t.end(0)&&(e=t.end(0));var n=t.end(0)-e;return Math.floor(1e3*n)},e.prototype.GetAmountBufferedMS=function(e){for(var t=this.GetAmountBufferedInPlayerMS(e),n=0,o=this.m_rgBufferedSegments;n<o.length;n++){t+=o[n].nDurationMS}return t},e.prototype.ChangeRepresentation=function(e){if(this.m_adaptation.rgRepresentations.indexOf(e)<0)return null;if(this.m_representation==e)return null;if(this.ContainsVideo()&&Object(y.c)(this.GetDebugName()+" changing representation to "+(e.nHeight||0)+"p at "+Math.ceil(e.nBandwidth/1e3)+"KB for segment "+this.m_nNextSegment),this.m_representation=e,this.m_bNeedInitSegment=!this.ContainsGame(),this.m_stats.SetRepresentation(e),this.ContainsGame())return e;if(!this.m_sourceBuffer){var t=e.strMimeType+";codecs="+e.strCodecs;this.m_sourceBuffer=this.m_mediaSource.addSourceBuffer(t),Object(y.c)(t),this.m_listeners.AddEventListener(this.m_sourceBuffer,"updateend",this.OnSourceBufferUpdateEnd),this.m_listeners.AddEventListener(this.m_sourceBuffer,"error",this.OnSourceBufferError),this.m_listeners.AddEventListener(this.m_sourceBuffer,"abort",this.OnSourceBufferAbort)}return e},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_sourceBuffer=null,this.ForceStopDownloads(),this.m_eBufferUpdate=L.None,this.m_bRemoveBufferState=!1,this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_rgDownloadLog=[],this.m_stats=null,this.m_rgGameDataFrames=[],this.m_statsGameData=null},e.prototype.GetActiveDownloads=function(){return this.m_xhrDownload?1:0},e.prototype.GetActiveDownloadProgress=function(){return this.GetActiveDownloads()?this.m_nCurDownloadProgress:0},e.prototype.OnSourceBufferUpdateEnd=function(e){var t=this.m_callbacks.GetCurrentPlayTime(),n=this.GetAmountBufferedInPlayerMS(t);Object(y.c)(this.GetDebugName()+" OnSourceBufferUpdateEnd: [playback="+t+"][buffered="+n+"][start="+this.GetBufferedStart()+"][end="+this.GetBufferedEnd()+"]");var o=this.m_eBufferUpdate;this.m_eBufferUpdate=L.None,o==L.Append&&this.m_callbacks.OnSegmentDownloaded(this),this.m_bSeekInProgress&&o==L.Remove&&!this.m_bRemoveBufferState&&this.ContinueSeek(),this.UpdateBuffer()},e.prototype.OnSourceBufferError=function(e){console.log("OnSourceBufferError")},e.prototype.OnSourceBufferAbort=function(e){console.log("OnSourceBufferAbort")},e.prototype.ScheduleNextDownload=function(){if(this.m_bNeedInitSegment)this.DownloadNextSegment();else if(this.m_schNextDownload.Cancel(),this.m_xhrDownload)Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - download already going");else if(this.m_bSeekInProgress)Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - seeking");else if(this.m_nNextSegment>this.GetMaxSegment())Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - reached max segment");else{var e=this.m_callbacks.GetCurrentPlayTime(),t=this.m_callbacks.GetPlaybackRate(),n=function(e,t,n){if(!e.IsLiveContent())return 0;var o=M(t);return(n-t.segmentTemplate.nStartNumber)*o-e.GetDurationSinceStarted()}(this.m_mpd,this.m_adaptation,this.m_nNextSegment);if(n>0)return Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - segment in future"),void this.m_schNextDownload.Schedule(n,this.ScheduleNextDownload);var o=this.GetAmountBufferedMS(e);if(t>1&&(o/=t),o<4e4)return Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - download now"),void this.DownloadNextSegment();var r=1.1*M(this.m_adaptation),i=this.GetAmountBufferedInPlayerMS(this.m_callbacks.GetCurrentPlayTime());Object(y.c)(this.GetDebugName()+" ScheduleNextDownload - buffered, schedule later [sleep="+r+"ms][buffer="+i+"]"),this.m_schNextDownload.Schedule(r,this.ScheduleNextDownload)}},e.prototype.DownloadNextSegment=function(){this.m_schNextDownload.Cancel();var e,t,n,o="",r=0;if(this.m_bNeedInitSegment)this.m_bNeedInitSegment=!1,e=this.m_mpd.GetBaseURL(),t=this.m_adaptation,n=this.m_representation,o=D(e+t.segmentTemplate.strInitialization,n.strID,0),r=0;else{if(this.m_nNextSegment<0)return void console.error("Attempting to download negative segment:",this.m_nNextSegment);o=function(e,t,n,o){return D(e+t.segmentTemplate.strMedia,n.strID,o)}(this.m_mpd.GetBaseURL(),this.m_adaptation,this.m_representation,this.m_nNextSegment),r=M(this.m_adaptation),this.m_nNextSegment++}this.DownloadSegment(this.m_representation.strID,o,r)},e.prototype.DownloadSegment=function(e,t,n,r){return void 0===r&&(r=performance.now()),Object(o.b)(this,void 0,void 0,(function(){var a,s,l,p,u,m,d,h,f,_,g,b,v,S,C=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:Object(c.a)(null===this.m_xhrDownload,"Trying to download another segment while a download is already in flight"),this.m_schNextDownload.Cancel(),Object(y.c)("Downloading: "+t),a=null,s=performance.now(),l=i.a.CancelToken.source(),o.label=1;case 1:return o.trys.push([1,3,,4]),this.m_nCurDownloadProgress=0,this.m_xhrDownload=l,p={cancelToken:this.m_xhrDownload.token,timeout:15e3,responseType:"arraybuffer",onDownloadProgress:function(e){C.m_nCurDownloadProgress=e.loaded/e.total,C.m_nCurDownloadBitrate=8*e.loaded*1e3/Math.max(1,performance.now()-s)}},this.ContainsGame()&&(p.responseType="json"),[4,i.a.get(t,p)];case 2:return a=o.sent(),[3,4];case 3:return u=o.sent(),Object(y.c)("Failed to download segment: "+u),a=u.response,[3,4];case 4:return this.m_xhrDownload&&this.m_xhrDownload==l?(m=performance.now(),d=Math.floor(performance.now()-s),h=a?a.status:0,this.m_xhrDownload=null,this.m_bSeekInProgress?(this.ContinueSeek(),[2]):a&&200==a.status?(this.m_nNumConsecutiveDownloadGones=0,this.ContainsGame()?(g=a.data,this.m_rgGameDataFrames||(this.m_rgGameDataFrames=[]),b=Number.MIN_VALUE,v=Number.MIN_VALUE,this.m_rgGameDataFrames.length>0&&(b=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].pts,v=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].gdi),(S=g.frame)&&(S.pts&&S.gamedata&&S.gdi?S.pts<=b?Object(y.c)("Invalid game pts"):S.gdi!=v&&this.m_rgGameDataFrames.push(S):Object(y.c)("Invalid game data")),this.TrimGameDataIfNecessary(),this.m_statsGameData={nAppID:g.appid,ulBroadcastRelayID:g.broadcastrelayid,nSegmentID:g.segmentid}):(f=new Uint8Array(a.data),this.m_rgBufferedSegments.push({nDurationMS:n,data:f,representationStrID:e}),this.LogDownload(s,f.length),this.UpdateBuffer(),_=f.length/1e3,Object(y.c)("HTTP "+h+" ("+d+"ms, "+Math.floor(_)+"k): "+t)),this.ScheduleNextDownload(),[2]):this.ContainsGame()?(this.ScheduleNextDownload(),[2]):(this.m_stats.LogSegmentDownloadFailure(d,a?a.status:444),m-r>9e3?(Object(y.c)(this.GetDebugName()+" HTTP download failed.. stopping loader: "+(m-r)+"ms"),this.DownloadFailed(),[2]):410==h?(this.m_nNumConsecutiveDownloadGones+=1,Object(y.c)(this.GetDebugName()+" HTTP download gone.. informing the player: "+(m-r)+"ms"),this.DownloadGone(),[2]):(this.m_schNextDownload.Schedule(500,(function(){return C.DownloadSegment(e,t,n,r)})),[2]))):[2]}}))}))},e.prototype.DownloadFailed=function(){this.m_callbacks.OnSegmentDownloadFailed(this)},e.prototype.DownloadGone=function(){this.m_callbacks.OnSegmentDownloadGone(this)},e.prototype.TrimGameDataIfNecessary=function(){},e.prototype.UpdateBuffer=function(){if(this.m_eBufferUpdate==L.None)if(this.m_bRemoveBufferState)this.RemoveAllBuffers();else if(this.m_sourceBuffer)if(this.m_rgBufferedSegments.length>0)try{this.m_eBufferUpdate=L.Append;var e=this.m_rgBufferedSegments[0];this.m_sourceBuffer.appendBuffer(e.data),this.m_rgBufferedSegments.splice(0,1)}catch(e){"QuotaExceededError"===e.name?(this.m_eBufferUpdate=L.None,Object(y.c)(this.GetDebugName()+" Buffer - QuotaExceededError")):Object(y.c)(this.GetDebugName()+" Buffer - Exception",e)}else{var t=performance.now();if(!this.m_bSeekInProgress&&t-this.m_tsLastBufferRemove>1e4){var n=this.GetBufferedStart(),o=this.m_callbacks.GetCurrentPlayTime()-40;if(n<o){var r=Math.min(this.GetBufferedEnd(),o);return void(r!=n&&(this.m_eBufferUpdate=L.Remove,this.m_sourceBuffer.remove(n,r),this.m_tsLastBufferRemove=t))}}}else Object(y.c)("No source buffer?")},e.prototype.RemoveAllBuffers=function(){this.m_rgBufferedSegments=[];var e=0;if(this.m_sourceBuffer)for(var t=this.m_sourceBuffer.buffered,n=0;n<t.length;n++)e<t.end(n)&&(e=t.end(n));this.m_bRemoveBufferState=!1,this.m_eBufferUpdate=L.Remove,0!=e?this.m_sourceBuffer.remove(0,e+1):this.OnSourceBufferUpdateEnd(null)},e.prototype.GetBufferedStart=function(){return this.m_sourceBuffer&&this.m_sourceBuffer.buffered&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.start(0):0},e.prototype.GetBufferedEnd=function(){return this.m_sourceBuffer&&this.m_sourceBuffer.buffered&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.end(0):0},e.prototype.ForceStopDownloads=function(){this.m_schNextDownload.Cancel(),this.m_xhrDownload&&(this.m_xhrDownload.cancel(),this.m_xhrDownload=null)},e.prototype.ForceRestartDownload=function(){this.ForceStopDownloads(),this.ScheduleNextDownload()},e.prototype.Seek=function(e){var t=this.GetBufferedStart(),n=this.GetBufferedEnd(),o=e<t||e>n;if(0==t&&0==n&&(o=!0),Object(y.c)(this.GetDebugName()+" making an "+(o?"unbuffered":"buffered")+" seek to "+e),this.m_bSeekInProgress||o||this.m_bNeedInitSegment){this.m_bSeekInProgress=!0,this.ForceStopDownloads();var r=j(this.m_adaptation,1e3*e);if(this.m_nNextSegment=Math.min(r,this.GetMaxSegment()),Object(y.c)("Seek To Next Segment: "+this.m_nNextSegment+" at approx. "+Object(y.d)((this.m_nNextSegment-1)*M(this.m_adaptation)/1e3)+" seconds."),this.ContainsGame())return this.m_bSeekInProgress=!1,this.m_rgGameDataFrames=[],void this.ScheduleNextDownload();this.m_bRemoveBufferState=!0,this.UpdateBuffer()}else this.ScheduleNextDownload()},e.prototype.ContinueSeek=function(){this.m_bSeekInProgress&&(this.m_eBufferUpdate==L.Remove||this.m_bRemoveBufferState||(this.m_bSeekInProgress=!1,this.ScheduleNextDownload()))},e.prototype.BHasEnoughBuffered=function(e){return!this.m_bSeekInProgress&&(!!this.ContainsGame()||(this.GetAmountBufferedInPlayerMS(e)>=this.m_nTrackBufferMS||this.m_nNextSegment>=this.GetMaxSegment()))},e.prototype.LogDownload=function(e,t){this.m_rgDownloadLog.length>=4&&this.m_rgDownloadLog.shift();var n=performance.now()-e;n<=0||(this.m_rgDownloadLog.push({cubData:t,nDownloadMS:n}),this.m_stats.LogDownload(t,n))},e.prototype.GetDownloadHistory=function(){return this.m_rgDownloadLog},e.prototype.GetAvgDownloadRate=function(){for(var e=0,t=0,n=0,o=this.m_rgDownloadLog;n<o.length;n++){var r=o[n];e+=r.nDownloadMS,t+=r.cubData}return e<=0?this.m_nCurDownloadBitrate&&this.GetActiveDownloads()>0?this.m_nCurDownloadBitrate:0:8*t*1e3/e},e.prototype.GetGameDataFrames=function(){return this.m_rgGameDataFrames},e.prototype.GetLatestGameDataFrameAppID=function(){return this.m_statsGameData&&this.m_statsGameData.nAppID?this.m_statsGameData.nAppID:0},Object(o.c)([m.a],e.prototype,"OnSourceBufferUpdateEnd",null),Object(o.c)([m.a],e.prototype,"OnSourceBufferError",null),Object(o.c)([m.a],e.prototype,"OnSourceBufferAbort",null),Object(o.c)([m.a],e.prototype,"ScheduleNextDownload",null),Object(o.c)([m.a],e.prototype,"DownloadNextSegment",null),Object(o.c)([m.a],e.prototype,"DownloadFailed",null),Object(o.c)([m.a],e.prototype,"DownloadGone",null),e}(),R=n("s+DT");var k,B=function(){return function(){this.playback_speed=1}}(),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(B),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(B),x=function(){function e(){this.m_steamIDBroadcast="",this.m_steamIDViewer="",this.m_broadcastID="",this.m_ulViewerToken="",this.m_host="",this.m_strBroadcastOrigin="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_allTimeSnapshot=new V(0),this.m_rgSnapShots=new Array(new V(0)),this.m_videoResolution=0,this.m_audioRate=0,this.m_audioChannel=0,this.m_frameRate=0,this.m_strBufferingVideoResolution="0x0@0",this.m_nPlaybackVideoResolution=0,this.m_strPlaybackVideoResolution="0x0",this.m_htmlVideoResolution=0,this.m_strHtmlVideoDisplay="",this.m_nAudioBandwidth=0,this.m_nVideoBandwidth=0,this.m_nBandwidthRequired=0,this.m_nCurBandwidthVideo=0,this.m_nAudioBufferedMS=0,this.m_nVideoBufferedMS=0,this.m_nActiveDownloads=0,this.m_nVideoDownloadProgress=0,this.m_videoBufferedRanges=null,this.m_audioBufferedRanges=null,this.m_nSegmentDurationMS=0,this.m_nPlaybackRate=0,this.m_nTimeToFirstFrameMS=-1,this.m_fpsMonitor=new H}return e.prototype.GetBytesReceivedToDisplay=function(){return function(e,t,n,o){void 0===t&&(t=2),void 0===n&&(n=!0),void 0===o&&(o=!1);var r,i,a=n?1024:1e3,s=a*a,c=s*a,l=c*a;return e>l?(r=e/l,i=o?"Tbps":"TB"):e>c?(r=e/c,i=o?"Gbps":"GB"):e>s?(r=e/s,i=o?"Mbps":"MB"):e>a?(r=e/a,i=o?"Kbps":"KB"):(r=e,i=o?"bps":"bytes"),r.toLocaleString(p.c.GetPreferredLocales(),{minimumFractionDigits:0,maximumFractionDigits:t})+" "+i}(this.m_allTimeSnapshot.m_nBytesReceived,1)},e.prototype.GetBufferingResolutionToDisplay=function(){return this.m_strBufferingVideoResolution},e.prototype.GetPlaybackResolutionToDisplay=function(){return this.m_strPlaybackVideoResolution},e.prototype.GetHTMLVideoResolutionToDisplay=function(){return this.m_strHtmlVideoDisplay},e.prototype.GetDroppedFramesToDisplay=function(){return this.m_allTimeSnapshot.m_nFramesDropped+"/"+this.m_allTimeSnapshot.m_nFramesDecoded},e.prototype.GetStalledEventsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nStallEvents)},e.prototype.GetFailedDownloadsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nFailedSegments)},e.prototype.GetNumBufferedVideoRanges=function(){return this.m_videoBufferedRanges?this.m_videoBufferedRanges.length:0},e.prototype.GetNumBufferedAudioRanges=function(){return this.m_audioBufferedRanges?this.m_audioBufferedRanges.length:0},e.prototype.GetBufferedVideoSegmentForDisplay=function(e){return this.m_videoBufferedRanges&&e<this.m_videoBufferedRanges.length?Object(y.d)(this.m_videoBufferedRanges.start(e))+" - "+Object(y.d)(this.m_videoBufferedRanges.end(e)):Object(p.d)("#DASHPlayerStats_VideoNoRangeInformation")},e.prototype.GetBufferedAudioSegmentForDisplay=function(e){return this.m_audioBufferedRanges&&e<this.m_audioBufferedRanges.length?Object(y.d)(this.m_audioBufferedRanges.start(e))+" - "+Object(y.d)(this.m_audioBufferedRanges.end(e)):Object(p.d)("#DASHPlayerStats_AudioNoRangeInformation")},e.prototype.GetBandwidthStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nBandwidthMin/1e6).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nBandwidthMax/1e6).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageBandwidth()/1e6).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nBandwidthMin?e.m_nBandwidthMin:Math.min(e.m_nBandwidthMin,t.m_nBandwidthMin))/1e6).toFixed(3)+" / "+(Math.max(e.m_nBandwidthMax,t.m_nBandwidthMax)/1e6).toFixed(3)+" / "+(e.GetAverageBandwidthFromTwo(t)/1e6).toFixed(3)},e.prototype.GetDownloadTimeStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMinMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMaxMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageDownloadTime()/1e3).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nSegmentDownloadTimeMinMS?e.m_nSegmentDownloadTimeMinMS:Math.min(e.m_nSegmentDownloadTimeMinMS,t.m_nSegmentDownloadTimeMinMS))/1e3).toFixed(3)+" / "+(Math.max(e.m_nSegmentDownloadTimeMaxMS,t.m_nSegmentDownloadTimeMaxMS)/1e3).toFixed(3)+" / "+(e.GetAverageDownloadTimeFromTwo(t)/1e3).toFixed(3)},e.prototype.BHasFrameInformation=function(){return this.m_allTimeSnapshot.m_nFramesDecoded>0},e.prototype.GetBandwidthRequiredToDisplay=function(){return(this.m_nBandwidthRequired/1e6).toFixed(3)},e.prototype.GetBandwithVideoToDisplay=function(){return(this.m_nCurBandwidthVideo/1e6).toFixed(3)},e.prototype.GetContentServerToDisplay=function(){return this.m_host},e.prototype.GetVideoBufferedToDisplay=function(){return(this.m_nVideoBufferedMS/1e3).toFixed(3)},e.prototype.GetAudioBufferedToDisplay=function(){return(this.m_nAudioBufferedMS/1e3).toFixed(3)},e.prototype.GetActiveDownloadsToDisplay=function(){return String(this.m_nActiveDownloads)},e.prototype.GetVideoDownloadProgressToDisplay=function(){return this.m_nVideoDownloadProgress?String(Math.round(100*this.m_nVideoDownloadProgress))+"%":"100%"},e.prototype.GetTimeToFirstFrameToDisplay=function(){return-1==this.m_nTimeToFirstFrameMS?"Unknown":String(this.m_nTimeToFirstFrameMS)},e.prototype.GetPersistentFrameDropsForDisplay=function(){return String(this.m_fpsMonitor.BIsDroppingFrames())},e.prototype.GetCurrentFPSForDisplay=function(){return this.m_fpsMonitor.BHasCurrentFPS()?this.m_fpsMonitor.GetCurrentFPS().toFixed(1):Object(p.d)("#DASHPlayerStats_Tracking")},e.prototype.GetPlaybackRateForDisplay=function(){return this.m_nPlaybackRate.toFixed(1)+"x"},e.prototype.GetFPSMonitor=function(){return this.m_fpsMonitor},e.prototype.SetHTMLVideoPlayerDisplay=function(e,t,n,o){this.m_htmlVideoResolution!=o&&(this.m_htmlVideoResolution=o,this.m_strHtmlVideoDisplay=n+"x"+o),this.m_nPlaybackVideoResolution!=t&&(this.m_nPlaybackVideoResolution=t,this.m_strPlaybackVideoResolution=e+"x"+t)},e.prototype.SetVideoPlaybackResolution=function(e,t,n){0==this.m_videoResolution&&(this.m_allTimeSnapshot.m_nInitialVideoResolution=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nInitialVideoResolution=t),this.m_strBufferingVideoResolution=e+"x"+t+"@"+n,this.m_videoResolution=t,this.m_frameRate=n},e.prototype.SetRepresentation=function(e){e&&(e.nAudioSamplingRate?(this.m_audioRate=Math.round(e.nBandwidth/1e3),this.m_audioChannel=e.nAudioChannels,this.m_nAudioBandwidth=e.nBandwidth):e.nFrameRate&&(this.SetVideoPlaybackResolution(e.nWidth,e.nHeight,e.nFrameRate),this.m_nVideoBandwidth=e.nBandwidth),this.m_nBandwidthRequired=this.m_nAudioBandwidth+this.m_nVideoBandwidth)},e.prototype.SetCurrentVideoBandwidth=function(e){this.m_nCurBandwidthVideo=e},e.prototype.SetSegmentDurationMS=function(e){this.m_nSegmentDurationMS=e},e.prototype.SetBroadcasterAndViewerInfo=function(e,t,n,o){this.m_steamIDBroadcast=e,this.m_steamIDViewer=t,this.m_broadcastID=n,this.m_ulViewerToken=o},e.prototype.SetAnalyticLinks=function(e,t,n){this.m_strStatsLink=e,this.m_strStalledLink=t,this.m_strEventLogLink=n},e.prototype.SetVideoInitializationURL=function(e){var t=new URL(e);this.m_host=t.hostname,this.m_strBroadcastOrigin=t.searchParams.get("broadcast_origin")||"";var n=this.m_strBroadcastOrigin.indexOf(":");-1!==n&&(this.m_strBroadcastOrigin=this.m_strBroadcastOrigin.substr(0,n))},e.prototype.SetAudioRate=function(e){this.m_audioRate=e},e.prototype.CaptureFrequentlyUpdatingInformation=function(e,t){var n=this.ExtractFrameInfo(e);this.LogFrameInfo(n),this.LogBufferDuration(t,e)},e.prototype.LogDownload=function(e,t){this.m_allTimeSnapshot.SegmentReceived(e,t),this.m_rgSnapShots[this.m_rgSnapShots.length-1].SegmentReceived(e,t)},e.prototype.LogSegmentDownloadFailure=function(e,t){this.m_allTimeSnapshot.m_nFailedSegments+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nFailedSegments+=1,this.m_allTimeSnapshot.m_nLastSegementDownloadStatus=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus=t,this.LogDownload(0,e)},e.prototype.LogVideoError=function(e){},e.prototype.LogVideoOnCanPlay=function(e){-1===this.m_nTimeToFirstFrameMS&&(this.m_nTimeToFirstFrameMS=Date.now()-this.m_allTimeSnapshot.m_timeMS)},e.prototype.LogErrorEvent=function(e,t){},e.prototype.ReportVideoStalled=function(e,t){if(0!=this.m_strStalledLink.length){var n=this.FindBehindSegmentLoader(e,t);if(n){this.m_allTimeSnapshot.m_nStallEvents+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nStallEvents+=1;var o=new F;this.GatherCommonStats(o,t,n.GetBandwidthRequired(),n.GetAvgDownloadRate()),o.last_segment_response=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus,o.audio_stalled=n.ContainsAudio(),this.CaptureActiveDownloads(e),o.active_downloads=this.m_nActiveDownloads,o.vid_down_progress=this.m_nVideoDownloadProgress;for(var r=n.GetDownloadHistory(),i=0,a=r.length-1;a>=0&&i<3;--a)o["segment"+ ++i+"_bytes"]=r[a].cubData,o["segment"+i+"_time"]=Math.round(r[a].nDownloadMS)/1e3;this.SendReportToServer(o,this.m_strStalledLink)}else Object(y.c)("DASHStats: Did not find any audio or video loaders")}},e.prototype.FindBehindSegmentLoader=function(e,t){for(var n=!1,o=!1,r=t.currentTime,i=null,a=null,s=0,c=e;s<c.length;s++){var l=c[s];a=l.ContainsAudio()?l:a,i=l.ContainsVideo()?l:a,l.BHasEnoughBuffered(r)&&(o=o||l.ContainsAudio(),n=n||l.ContainsVideo())}return o=o||null==a,!n||n&&o?i:a},e.prototype.ExtractFrameInfo=function(e){var t=0,n=0;if(e.getVideoPlaybackQuality)try{var o=e.getVideoPlaybackQuality();n=o.totalVideoFrames,t=o.droppedVideoFrames}catch(e){Object(y.c)("Browser does not support HTMLVideoElement.getVideoPlaybackQuality()",e.message)}else e.webkitDecodedFrames?(n=e.webkitDecodedFrames,t=e.webkitDroppedFrames):e.webkitDecodedFrameCount&&(n=e.webkitDecodedFrameCount,t=e.webkitDroppedFrameCount);return{framesDecoded:n,framesDropped:t}},e.prototype.LogFrameInfo=function(e){this.m_allTimeSnapshot.m_nFramesDecoded=e.framesDecoded,this.m_allTimeSnapshot.m_nFramesDropped=e.framesDropped;var t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];if(1==this.m_rgSnapShots.length)t.m_nFramesDecoded=e.framesDecoded,t.m_nFramesDropped=e.framesDropped;else{var n=this.m_rgSnapShots[this.m_rgSnapShots.length-2];t.m_nFramesDecoded=e.framesDecoded-n.m_nFramesDecoded,t.m_nFramesDropped=e.framesDropped-n.m_nFramesDropped}},e.prototype.LogBufferDuration=function(e,t){this.m_nActiveDownloads=0;for(var n=0,o=e;n<o.length;n++){var r=o[n];r.ContainsAudio()?(this.m_nAudioBufferedMS=r.GetAmountBufferedMS(t.currentTime),this.m_audioBufferedRanges=r.GetSourceBufferTimeRanges()):r.ContainsVideo()&&(this.m_nVideoBufferedMS=r.GetAmountBufferedMS(t.currentTime),this.m_videoBufferedRanges=r.GetSourceBufferTimeRanges()),this.m_nActiveDownloads+=r.GetActiveDownloads(),r.ContainsVideo()&&(this.m_nVideoDownloadProgress=r.GetActiveDownloadProgress())}this.m_nPlaybackRate=t.playbackRate},e.prototype.CaptureActiveDownloads=function(e){this.m_nActiveDownloads=0;for(var t=0,n=e;t<n.length;t++){var o=n[t];this.m_nActiveDownloads+=o.GetActiveDownloads(),o.ContainsVideo()&&(this.m_nVideoDownloadProgress=o.GetActiveDownloadProgress())}},e.prototype.ReportPlayerStats=function(e,t){if(0!=this.m_strStatsLink.length){var n=this.ExtractFrameInfo(t);if(n.framesDecoded!=this.m_allTimeSnapshot.m_nFramesDecoded||0!=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nBytesReceived){this.LogFrameInfo(n),this.LogBufferDuration(e,t);var o=new P,r=this.m_rgSnapShots[this.m_rgSnapShots.length-1];o.frames_decoded=r.m_nFramesDecoded,o.frames_dropped=r.m_nFramesDropped,o.bytes_received=r.m_nBytesReceived,o.seconds_delta=Math.round((Date.now()-r.m_timeMS)/1e3),o.failed_segments=r.m_nFailedSegments,o.bw_min=r.m_nBandwidthMin,o.bw_max=r.m_nBandwidthMax,o.audio_buffer=Math.round(this.m_nAudioBufferedMS/1e3),o.video_buffer=Math.round(this.m_nVideoBufferedMS/1e3),o.seg_time_avg=Math.round(r.GetAverageDownloadTime())/1e3,o.seg_time_min=Math.round(r.m_nSegmentDownloadTimeMinMS)/1e3,o.seg_time_max=Math.round(r.m_nSegmentDownloadTimeMaxMS)/1e3,o.initial_vid_res=r.m_nInitialVideoResolution,o.ttff=this.m_nTimeToFirstFrameMS,o.seg_duration=this.m_nSegmentDurationMS,this.GatherCommonStats(o,t,this.m_nBandwidthRequired,r.GetAverageBandwidth()),this.CreateNewEmptySnapshot(t.videoHeight),this.SendReportToServer(o,this.m_strStatsLink)}else this.CreateNewEmptySnapshot(t.videoHeight)}},e.prototype.SendReportToServer=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,a,s,c;return Object(o.e)(this,(function(o){for(n=new URL(t),r=new FormData,a=0,s=Object.keys(e);a<s.length;a++)c=s[a],r.append(c,e[c]);return r.append("l",n.searchParams.get("l")),r.append("e",n.searchParams.get("e")),r.append("h",n.searchParams.get("h")),Object(y.c)("CDASHStats Sending Report to Server",e),i.a.post(t,r).catch((function(e){Object(y.c)("Failed to upload stats: ",e)})),[2]}))}))},e.prototype.CreateNewEmptySnapshot=function(e){this.m_rgSnapShots.length>=5&&this.m_rgSnapShots.shift(),this.m_rgSnapShots.push(new V(e))},e.prototype.GatherCommonStats=function(e,t,n,o){e.steamid=this.m_steamIDViewer,e.host=this.m_host,e.playback_position=Math.round(t.currentTime),e.video_res=this.m_videoResolution,e.audio_rate=this.m_audioRate,e.audio_ch=this.m_audioChannel,e.bw_required=n,e.bw_avg=Math.round(o),e.broadcast_accountid=this.m_steamIDBroadcast?new R.a(this.m_steamIDBroadcast).GetAccountID():0,e.useragent=window.navigator.userAgent,e.sessionid=d.c.SESSIONID,e.broadcast_origin=this.m_strBroadcastOrigin},Object(o.c)([a.A],e.prototype,"m_allTimeSnapshot",void 0),Object(o.c)([a.A],e.prototype,"m_strBufferingVideoResolution",void 0),Object(o.c)([a.A],e.prototype,"m_strPlaybackVideoResolution",void 0),Object(o.c)([a.A],e.prototype,"m_strHtmlVideoDisplay",void 0),Object(o.c)([a.A],e.prototype,"m_nBandwidthRequired",void 0),Object(o.c)([a.A],e.prototype,"m_nCurBandwidthVideo",void 0),Object(o.c)([a.A],e.prototype,"m_nAudioBufferedMS",void 0),Object(o.c)([a.A],e.prototype,"m_nVideoBufferedMS",void 0),Object(o.c)([a.A],e.prototype,"m_nActiveDownloads",void 0),Object(o.c)([a.A],e.prototype,"m_nVideoDownloadProgress",void 0),Object(o.c)([a.A],e.prototype,"m_videoBufferedRanges",void 0),Object(o.c)([a.A],e.prototype,"m_audioBufferedRanges",void 0),Object(o.c)([a.A],e.prototype,"m_nPlaybackRate",void 0),Object(o.c)([a.i],e.prototype,"SetVideoPlaybackResolution",null),Object(o.c)([a.i],e.prototype,"SetRepresentation",null),Object(o.c)([a.i],e.prototype,"SetCurrentVideoBandwidth",null),Object(o.c)([a.i],e.prototype,"CaptureFrequentlyUpdatingInformation",null),Object(o.c)([a.i],e.prototype,"LogDownload",null),Object(o.c)([a.i],e.prototype,"LogSegmentDownloadFailure",null),Object(o.c)([a.i],e.prototype,"LogFrameInfo",null),Object(o.c)([a.i],e.prototype,"LogBufferDuration",null),e}(),V=function(){function e(e){this.m_timeMS=Date.now(),this.m_nBytesReceived=0,this.m_nInitialVideoResolution=0,this.m_nFailedSegments=0,this.m_nStallEvents=0,this.m_nEntries=0,this.m_nSegmentDownloadTimeTotalMS=0,this.m_nSegmentDownloadTimeMaxMS=0,this.m_nSegmentDownloadTimeMinMS=0,this.m_nBandwidthTotal=0,this.m_nBandwidthMin=0,this.m_nBandwidthMax=0,this.m_nLastSegementDownloadStatus=200,this.m_nFramesDecoded=0,this.m_nFramesDropped=0,this.m_nInitialVideoResolution=e}return e.prototype.GetAverageBandwidth=function(){return this.m_nBandwidthTotal/Math.max(1,this.m_nEntries)},e.prototype.GetAverageDownloadTime=function(){return this.m_nSegmentDownloadTimeTotalMS/Math.max(1,this.m_nEntries)},e.prototype.GetAverageBandwidthFromTwo=function(e){return(e.m_nBandwidthTotal+this.m_nBandwidthTotal)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.GetAverageDownloadTimeFromTwo=function(e){return(e.m_nSegmentDownloadTimeTotalMS+this.m_nSegmentDownloadTimeTotalMS)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.SegmentReceived=function(e,t){if(this.m_nBytesReceived+=e,!(e<1024)){var n=Math.round(8*e*1e3/Math.max(t,1));0==this.m_nEntries?(this.m_nSegmentDownloadTimeMinMS=t,this.m_nBandwidthMin=n):(this.m_nSegmentDownloadTimeMinMS=Math.min(t,this.m_nSegmentDownloadTimeMinMS),this.m_nBandwidthMin=Math.min(n,this.m_nBandwidthMin)),this.m_nBandwidthMax=Math.max(n,this.m_nBandwidthMax),this.m_nSegmentDownloadTimeMaxMS=Math.max(t,this.m_nSegmentDownloadTimeMaxMS),this.m_nBandwidthTotal+=n,this.m_nSegmentDownloadTimeTotalMS+=t,this.m_nEntries+=1}},Object(o.c)([a.A],e.prototype,"m_nBytesReceived",void 0),Object(o.c)([a.A],e.prototype,"m_nFailedSegments",void 0),Object(o.c)([a.A],e.prototype,"m_nStallEvents",void 0),Object(o.c)([a.A],e.prototype,"m_nSegmentDownloadTimeMaxMS",void 0),Object(o.c)([a.A],e.prototype,"m_nSegmentDownloadTimeMinMS",void 0),Object(o.c)([a.A],e.prototype,"m_nBandwidthMin",void 0),Object(o.c)([a.A],e.prototype,"m_nBandwidthMax",void 0),Object(o.c)([a.A],e.prototype,"m_nFramesDecoded",void 0),Object(o.c)([a.A],e.prototype,"m_nFramesDropped",void 0),Object(o.c)([a.i],e.prototype,"SegmentReceived",null),e}(),U=function(){function e(){}return e.prototype.reset=function(e,t){this.bDropReading=e,this.nTotalDecodedFrames=t},e}(),H=function(){function e(){this.k_nTestFrequencyMS=1e3,this.k_nSlidingWindow=6,this.k_nDroppedFramesThreshold=1,this.k_nFailThreshold=3,this.k_nIgnoreReadingAroundResizeMS=2e3,this.m_schTracker=new l.b,this.m_rgResultsWindow=[],this.m_nLastResizeMS=0,this.m_bDroppingFrameDetected=!1,this.m_nCurrentFPS=0}return e.prototype.StartTracking=function(e){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading),this.m_fnRequestDecoded=e,this.m_lastFrameInfo=this.m_fnRequestDecoded(),this.m_bDroppingFrameDetected=!1},e.prototype.BHasCurrentFPS=function(){return 0!=this.m_nCurrentFPS},e.prototype.GetCurrentFPS=function(){return this.m_nCurrentFPS},e.prototype.BIsDroppingFrames=function(){return this.m_bDroppingFrameDetected},e.prototype.SetWindowResized=function(){this.m_nLastResizeMS=Date.now()},e.prototype.BIsInResizeTimeWindow=function(){return this.m_nLastResizeMS&&Date.now()-this.m_nLastResizeMS<this.k_nIgnoreReadingAroundResizeMS},e.prototype.Close=function(){this.m_schTracker.Cancel(),this.m_rgResultsWindow=[],this.m_bDroppingFrameDetected=!1},e.prototype.LogResizeAction=function(){this.m_nLastResizeMS=Date.now()},e.prototype.TakeReading=function(){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading);var e=!1,t=this.m_fnRequestDecoded();this.BIsInResizeTimeWindow()||(e=this.m_lastFrameInfo.framesDropped>0&&t.framesDropped-this.m_lastFrameInfo.framesDropped>this.k_nDroppedFramesThreshold),this.AppendReading(e,t.framesDecoded),this.m_bDroppingFrameDetected=this.ComputeDroppingFrames(),this.m_nCurrentFPS=t.framesDecoded-this.m_lastFrameInfo.framesDecoded-(t.framesDropped-this.m_lastFrameInfo.framesDropped),this.m_lastFrameInfo=t},e.prototype.ComputeDroppingFrames=function(){return this.m_rgResultsWindow.length==this.k_nSlidingWindow&&this.m_rgResultsWindow.filter((function(e){return e.bDropReading})).length>=this.k_nFailThreshold},e.prototype.AppendReading=function(e,t){var n;(n=this.m_rgResultsWindow.length>=this.k_nSlidingWindow?this.m_rgResultsWindow.shift():new U).reset(e,t),this.m_rgResultsWindow.push(n)},Object(o.c)([a.A],e.prototype,"m_bDroppingFrameDetected",void 0),Object(o.c)([a.A],e.prototype,"m_nCurrentFPS",void 0),Object(o.c)([a.i.bound],e.prototype,"TakeReading",null),e}(),W=n("ujHl");!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(k||(k={}));var z=function(){function e(e,t){void 0===t&&(t=!1),this.m_elVideo=null,this.m_strMPD="",this.m_strHLS="",this.m_schUpdateMPD=new l.b,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_rgLoaders=[],this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_bIsBuffering=!0,this.m_nSeekingToTime=-1,this.m_listeners=new l.c,this.m_bFirstPlay=!0,this.m_schGameDataEventTrigger=new l.b,this.m_schReportPlayerTrigger=new l.b,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new l.b,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats=new x,this.m_bClosing=!1,this.m_hlsTimeOffset=0,this.m_bUserPlayChoice=!0,this.m_bUserLiveEdgeChoice=!0,this.m_schFirstFrameThrottler=new l.b,this.m_elVideo=e,this.m_schReportPlayerTrigger.Schedule(3e4,this.ReportPlayerStats),this.m_bUseHLSManifest=t}return e.prototype.CalcVideoStartRelativeToSystemClock=function(e){var t=(e?new Date(e).getTime():Date.now())-this.m_mpd.GetAvailabilityStartTime().getTime();this.m_mpd.StartLiveContentNow(t),Object(y.c)("server time: "+e)},e.prototype.PlayMPD=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_strMPD=e,this.m_strHLS=t,[4,this.DownloadMPD()];case 1:return(n=o.sent())?(this.m_mpd=new G,this.m_mpd.BParse(n.data)?(this.IsLiveContent()&&(this.m_mpd.GetMinimumUpdatePeriod()>0&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),this.CalcVideoStartRelativeToSystemClock(n.headers.date)),this.m_bUseHLSManifest?(this.m_elVideo.src=this.m_strHLS,this.m_elVideo.addEventListener("loadedmetadata",(function(){r.m_bIsBuffering=!1,r.BeginPlayback()})),document.addEventListener("visibilitychange",this.OnVisibilityChange),[2]):this.BCreateLoaders()?(this.m_stats.SetSegmentDurationMS(M(this.GetCurrentVideoAdaptation())),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_stats.SetVideoInitializationURL(this.GetCurrentVideoAdaptation().segmentTemplate.strInitialization),this.InitVideoControl(),[2]):(this.CloseWithError("playbackerror","Failed to create segment loaders"),[2])):(this.CloseWithError("playbackerror","Failed to parse MPD file",this.m_strMPD),[2])):[2]}}))}))},e.prototype.PlayWebRTC=function(e,t,n,o,r){},e.prototype.OnVisibilityChange=function(){"visible"===document.visibilityState&&(this.m_elVideo.src=this.m_strHLS)},e.prototype.Close=function(){if(this.m_bClosing=!0,this.m_listeners.Unregister(),this.m_bUseHLSManifest&&document.removeEventListener("visibilitychange",this.OnVisibilityChange),this.StopDownloads(),this.m_elVideo&&this.m_elVideo.pause(),this.m_mediaSource){try{"closed"!=this.m_mediaSource.readyState&&this.m_mediaSource.endOfStream()}catch(e){}this.m_mediaSource=null}this.m_bIsBuffering=!0,this.m_elVideo=null,this.m_strMPD="",this.m_mpd=null,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_nSeekingToTime=-1,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats&&this.m_stats.GetFPSMonitor().Close(),this.m_stats=null,this.m_bFirstPlay=!0},e.prototype.StopDownloads=function(){this.m_xhrUpdateMPD&&(this.m_xhrUpdateMPD.cancel(),this.m_xhrUpdateMPD=null),this.m_schUpdateMPD.Cancel(),this.m_schGameDataEventTrigger.Cancel(),this.m_schReportPlayerTrigger.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_schFirstFrameThrottler.Cancel(),this.m_elVideo&&1!=this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1);for(var e=0,t=this.m_rgLoaders;e<t.length;e++){t[e].Close()}this.m_bIsBuffering=!0},e.prototype.IsBuffering=function(){return this.m_bIsBuffering},e.prototype.IsLiveContent=function(){return!!this.m_mpd&&this.m_mpd.IsLiveContent()},e.prototype.DownloadMPD=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:if(this.m_xhrUpdateMPD)return Object(c.a)(!1,"Multiple MPD download requests"),[2,null];e=performance.now(),n.label=1;case 1:if(!(performance.now()-e<3e4))return[3,7];t=null,n.label=2;case 2:return n.trys.push([2,4,,5]),this.m_xhrUpdateMPD=i.a.CancelToken.source(),[4,i.a.get(this.m_strMPD,{cancelToken:this.m_xhrUpdateMPD.token})];case 3:return t=n.sent(),[3,5];case 4:return n.sent(),[3,5];case 5:return this.m_xhrUpdateMPD=null,this.m_bClosing?[2,null]:t&&200==t.status?[2,t]:t&&410==t.status?(this.CloseWithError("playbackerror","Failed to download MPD: 410 Gone"),[2,null]):(Object(y.c)("Failed to download, will retry: "+this.m_strMPD),[4,Object(W.e)(200)]);case 6:return n.sent(),[3,1];case 7:return Object(y.c)("Failed to download: "+this.m_strMPD),[2,null]}}))}))},e.prototype.UpdateMPD=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.DownloadMPD()];case 1:return(e=t.sent())?this.m_mpd.BUpdate(e.data)?(this.CalcVideoStartRelativeToSystemClock(e.headers.date),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_mpd.GetMinimumUpdatePeriod()>0&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),[2]):(this.CloseWithError("playbackerror","Failed to parse on Update the MPD file"),[2]):[2]}}))}))},e.prototype.CloseWithError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.Close(),y.c.apply(void 0,t)},e.prototype.BCreateLoaders=function(){var e=this.m_mpd.GetPeriods();if(0==e.length)return!1;var t=e[0];this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="";for(var n=0,o=t.rgAdaptationSets;n<o.length;n++){var r=o[n],i=null;if(!this.m_strVideoAdaptationID&&r.bContainsVideo&&T(r)&&(i=r,this.m_strVideoAdaptationID=r.strID),!this.m_strAudioAdaptationID&&r.bContainsAudio&&T(r)&&(i=r,this.m_strAudioAdaptationID=r.strID),!this.m_strGameAdaptationID&&r.bContainsGame&&(i=r,this.m_strGameAdaptationID=r.strID),i){var a=new N(this,this.m_mpd,i,this.m_stats);this.m_rgLoaders.push(a)}}return this.m_strVideoAdaptationID.length>0},e.prototype.InitVideoControl=function(){var e=new MediaSource,t=URL.createObjectURL(e);this.m_elVideo.pause(),this.m_elVideo.srcObject=null,this.m_elVideo.src=t,this.m_mediaSource=e,this.m_listeners.AddEventListener(e,"sourceopen",this.OnMediaSourceOpen),this.m_listeners.AddEventListener(e,"sourceended",this.OnMediaSourceEnded),this.m_listeners.AddEventListener(e,"sourceclose",this.OnMediaSourceClose),this.m_listeners.AddEventListener(this.m_elVideo,"waiting",this.OnVideoWaiting),this.m_listeners.AddEventListener(this.m_elVideo,"error",this.OnVideoError),this.m_listeners.AddEventListener(this.m_elVideo,"canplay",this.OnVideoCanPlay),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate)},e.prototype.OnMediaSourceOpen=function(e){Object(y.c)("OnMediaSourceOpen");for(var t=0,n=this.m_rgLoaders;t<n.length;t++){n[t].SetMediaSource(this.m_mediaSource)}this.BeginPlayback()},e.prototype.OnMediaSourceEnded=function(e){Object(y.c)("OnMediaSourceEnded")},e.prototype.OnMediaSourceClose=function(e){Object(y.c)("OnMediaSourceClose")},e.prototype.OnVideoWaiting=function(e){if(!this.IsLiveContent()&&this.m_mpd&&this.m_mpd.GetEndTime()-this.GetCurrentPlayTime()<1)this.Pause();else if(!this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,this.m_elVideo.currentTime+.5)){if(this.m_elVideo&&this.m_elVideo.buffered.length>1)for(var t=this.m_elVideo.currentTime,n=this.m_elVideo.buffered,o=0;o<n.length;++o)if(Object(y.c)("OnVideoWaiting buffer "+o+" start:"+n.start(o)+" end: "+n.end(o)+" playerTime: "+t),n.start(o)<=t&&t<=n.end(o))return Object(y.c)("OnVideoWaiting - time splitting, jumping to buffer "+o),void this.Seek(n.start(o));if(this.m_stats.ReportVideoStalled(this.m_rgLoaders,this.m_elVideo),null===this.m_videoRepSelected){var r=!0,i=this.GetVideoLoader();if(i){var a=this.m_mpd.GetLowestRepresentation(this.GetCurrentVideoAdaptation().strID);a&&!i.BIsCurrentRepresentation(a)&&(i.ChangeRepresentation(a),Object(y.c)("OnVideoWaiting - Stalled, forced restart download at resolution: "+a.nWidth+"x"+a.nHeight+"@"+a.nFrameRate+" instead"),r=!1),this.Seek(this.m_elVideo.currentTime)}r&&Object(y.c)("OnVideoWaiting - Stalled, already at lowest resolution. No action taken. BHasLoader: "+(null!=i))}else Object(y.c)("OnVideoWaiting - Stalled, user explicitly chose a resolution: "+this.m_videoRepSelected.nWidth+"x"+this.m_videoRepSelected.nHeight+"@"+this.m_videoRepSelected.nFrameRate)}},e.prototype.OnVideoPause=function(e){this.OnVideoBufferProgress(),this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.OnDebugPrintEventInfoAndAvailableBuffer=function(e){var t=-1,n=this.GetVideoLoader();this.m_elVideo&&n&&(t=n.GetAmountBufferedInPlayerMS(this.m_elVideo.currentTime)),Object(y.c)("DebugMessage - Stats: "+e.type+" BufferedMS: "+t)},e.prototype.OnVideoError=function(e){Object(y.c)("OnVideoError")},e.prototype.OnVideoCanPlay=function(e){this.m_bIsBuffering||(this.m_bUserPlayChoice&&this.PlayOnElement(),this.m_stats.LogVideoOnCanPlay(e))},e.prototype.GetCurrentPlayTime=function(){return-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:this.m_bUseHLSManifest&&this.m_mpd?(this.m_elVideo.currentTime>0&&0===this.m_hlsTimeOffset&&(this.m_hlsTimeOffset=this.GetBufferedLiveEdgeTime()-this.m_elVideo.currentTime),this.m_elVideo.currentTime+this.m_hlsTimeOffset):this.m_elVideo.currentTime},e.prototype.OnVideoTimeUpdate=function(){if(this.m_bUserLiveEdgeChoice&&this.IsLiveContent()){var e=this.GetBufferedLiveEdgeTime();if(1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime<=e-4.5&&this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,e)){var t=e-this.m_elVideo.currentTime;this.m_elVideo.playbackRate=1.1,Object(y.c)("User is behind by "+t.toFixed(2)+" seconds, increasing playback speed to catch-up to live edge.")}else 1.1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime>=e-1&&(this.m_elVideo.playbackRate=1,Object(y.c)("User is caught up, returning to normal playrate"))}},e.prototype.BIsPlayerBufferedBetween=function(e,t){return this.m_elVideo.buffered.length>0&&e>=this.m_elVideo.buffered.start(0)&&t<=this.m_elVideo.buffered.end(0)},e.prototype.GetLiveContentStartTime=function(){return this.m_mpd.GetAvailabilityStartTime()},e.prototype.GetAvailableVideoStartTime=function(){if(!this.m_mpd)return 0;var e=0;if(this.IsLiveContent()){var t=Math.floor(this.m_mpd.GetDurationSinceStarted()/1e3),n=this.GetBufferedLiveEdgeTime(),o=this.m_mpd.GetTimeShiftBufferDepth();e=u.a(t-o+10,0,n)}else e=this.m_mpd.GetStartTime();return e},e.prototype.GetBufferedLiveEdgeTime=function(){if(!this.m_mpd)return 0;return this.IsLiveContent()?Math.floor((this.m_mpd.GetDurationSinceStarted()-this.m_nTrackBufferMS)/1e3):this.m_mpd.GetEndTime()},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){this.m_bUserPlayChoice=!0,!this.IsLiveContent()&&this.m_mpd&&this.m_mpd.GetEndTime()-this.GetCurrentPlayTime()<1?this.Seek(this.m_mpd.GetStartTime()):this.Seek(this.GetCurrentPlayTime())},e.prototype.Pause=function(){this.m_bUserLiveEdgeChoice=!1,1.1==this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1),this.m_bUserPlayChoice=!1,this.m_elVideo.pause()},e.prototype.GetPlaybackRate=function(){return this.m_elVideo.paused?0:this.m_elVideo.playbackRate},e.prototype.OnSegmentDownloaded=function(e){Object(y.c)(e.GetDebugName()+" OnSegmentDownloaded"),this.UpdateVideoRepresentation(this.m_videoRepSelected),this.OnVideoBufferProgress(),e==this.GetVideoLoader()&&this.m_stats.SetCurrentVideoBandwidth(e.GetAvgDownloadRate())},e.prototype.PlayOnElement=function(){var e=this,t=this.m_bFirstPlay;this.m_bFirstPlay=!1;var n=this.m_elVideo.play();n?n.then((function(){e.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))})).catch((function(n){t&&e.DispatchEvent("valve-userinputneeded")})):this.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))},e.prototype.OnVideoBufferProgress=function(){if(this.IsBuffering()){for(var e=this.m_rgLoaders.length>0,t=-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:0,n=0,o=this.m_rgLoaders;n<o.length;n++){var r=o[n];if(!r.BHasEnoughBuffered(t)){e=!1;break}t=Math.max(t,r.GetBufferedStart())}e&&(this.m_bIsBuffering=!1,this.m_nSeekingToTime=-1,this.m_elVideo.currentTime!=t?this.m_elVideo.currentTime=t:this.m_elVideo.paused&&this.m_bUserPlayChoice&&this.PlayOnElement(),this.DispatchEvent("valve-bufferupdate"))}},e.prototype.OnSegmentDownloadFailed=function(e){this.StopDownloads(),this.DispatchEvent("valve-downloadfailed")},e.prototype.OnSegmentDownloadGone=function(e){this.m_bIsBuffering&&e.GetNumConsecutiveDownloadGones()<=3?this.Seek(this.GetCurrentPlayTime()+M(this.GetCurrentVideoAdaptation())/1e3):(Object(y.c)("OnSegmentDownloadGone: too many consecutive 'gone', erroring the download: "+e.GetNumConsecutiveDownloadGones()),this.OnSegmentDownloadFailed(e))},e.prototype.GetCurrentAudioAdaptationfunction=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strAudioAdaptationID):null},e.prototype.GetCurrentVideoAdaptation=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strVideoAdaptationID):null},e.prototype.GetVideoLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsVideo())return n}return null},e.prototype.GetAudioLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsAudio())return n}return null},e.prototype.GetGameLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var n=t[e];if(n.ContainsGame())return n}return null},e.prototype.SetTrackBufferMS=function(e){this.m_nTrackBufferMS=e;for(var t=0,n=this.m_rgLoaders;t<n.length;t++){n[t].SetBufferMS(e)}},e.prototype.BeginPlayback=function(){var e=0;if(this.IsLiveContent()){var t=M(this.GetCurrentVideoAdaptation()),n=1e3*this.m_mpd.GetMinBufferTime(),o=Math.max(t,n);this.SetTrackBufferMS(o),e=this.GetBufferedLiveEdgeTime(),Object(y.c)("Begin playback of live content [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]")}else this.SetTrackBufferMS(8e3),e=0,Object(y.c)("Begin playback of non-live content [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]");if(Object(y.c)("Starting playback at "+e),!this.m_bUseHLSManifest)for(var r=this.PickStartingVideoRepresentation(),i=0,a=this.m_rgLoaders;i<a.length;i++){var s=a[i];if(s.ContainsVideo()){s.ChangeRepresentation(r);t=M(s.GetAdaptation());this.m_schFirstFrameThrottler.Schedule(t/2,this.VerifyFirstSegementDownloadProgress)}else if(s.ContainsAudio()||s.ContainsGame()){var c=s.GetAdaptation().rgRepresentations.length>0?s.GetAdaptation().rgRepresentations[0]:null;s.ChangeRepresentation(c)}}this.Seek(e),this.GetGameLoader()&&this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)},e.prototype.VerifyFirstSegementDownloadProgress=function(){var e=this.GetVideoLoader();if(null===this.m_videoRepSelected&&e&&e.GetDownloadHistory().length<=1&&e.GetActiveDownloads()>0&&e.GetActiveDownloadProgress()<.55){var t=this.DetermineBestVideoRepresentation();t&&!e.BIsCurrentRepresentation(t)&&(e.ChangeRepresentation(t),e.ForceRestartDownload(),Object(y.c)("Video download progressing too slowly, choosing "+t.nWidth+"x"+t.nHeight+"@"+t.nFrameRate+" instead"))}},e.prototype.PickStartingVideoRepresentation=function(){var e=this.GetVideoLoader();if(!e)return null;for(var t=e.GetAdaptation(),n=null,o=e.GetRepresentationsCount()-1;o>=0;o--){var r=t.rgRepresentations[o],i=r.nFrameRate?r.nFrameRate:0;if(!(this.m_nLimitFPS>0&&i>this.m_nLimitFPS)&&(n=r,this.GetVideoPlayerHeight()<=r.nHeight))break}return n},e.prototype.DetermineBestVideoRepresentation=function(){for(var e=this.GetVideoLoader(),t=this.GetAudioLoader(),n=t&&t!=e?t.GetEstimatedAudioRate():0,o=this.GetAvgLoaderDownloadRate(),r=e.GetRepresentationsCount()-1,i=e.GetAdaptation().rgRepresentations[r],a=r-1;a>=0;a--){var s=e.GetAdaptation().rgRepresentations[a],c=(s.nBandwidth+n)*this.m_elVideo.playbackRate*1.15;if(o<c)Object(y.c)("Video select: Skipping "+a+" due to rate: [avg="+o+"][required="+c+"]");else{var l=s.nFrameRate||0;if(this.IsLiveContent()&&l>30){var p=this.m_stats.GetFPSMonitor();if(p.BIsDroppingFrames()||p.BHasCurrentFPS()&&Math.ceil(p.GetCurrentFPS())<29){Object(y.c)("Video select: Skipping "+a+" due to dropping frames and high FPS representation: [fps:"+l+"]");continue}}if(this.m_nLimitFPS>0&&l>this.m_nLimitFPS)Object(y.c)("Video select: Skipping "+a+" due to frame rate limit");else{var u=i.nHeight||0,m=s.nHeight||0,d=this.GetVideoPlayerHeight();if(d>0&&u>0)if(m>Y(d))break;i=s}}}return i},e.prototype.UpdateVideoRepresentation=function(e){if(e&&this.m_videoRepSelected==e)return null;var t=this.GetVideoLoader();if(!t)return null;if(this.IsBuffering())return null;var n=this.DetermineBestVideoRepresentation();return this.m_videoRepSelected=null,t.ChangeRepresentation(n)},e.prototype.CanSeek=function(){return!0},e.prototype.SeekAndPlay=function(e){return this.m_bUserPlayChoice=!0,this.Seek(e)},e.prototype.Seek=function(e){if(!this.m_mpd)return 0;var t=this.GetAvailableVideoStartTime(),n=this.GetBufferedLiveEdgeTime();e=u.a(e,t,n),this.m_bUserLiveEdgeChoice=e>=n-5;var o=this.m_elVideo.paused;if(o||this.m_elVideo.pause(),this.m_bUseHLSManifest)this.m_elVideo.currentTime=e-this.m_hlsTimeOffset,this.m_elVideo.play();else{this.m_bIsBuffering=!0,this.m_nSeekingToTime=e;for(var r=0,i=this.m_rgLoaders;r<i.length;r++){var a=i[r];a.ContainsGame()&&(e=this.GetBufferedLiveEdgeTime()),a.Seek(e)}this.DispatchEvent("valve-bufferupdate"),o&&this.OnVideoBufferProgress()}return e},e.prototype.JumpTime=function(e){return e+=this.GetCurrentPlayTime(),this.Seek(e)},e.prototype.GetVideoPlayerHeight=function(){return this.m_elVideo.clientHeight},e.prototype.GetAvgLoaderDownloadRate=function(){for(var e=0,t=0,n=0,o=[this.GetVideoLoader()];n<o.length;n++){var r=o[n];r&&(e+=r.GetAvgDownloadRate(),t++)}return 0==t?0:e/t},e.prototype.GameDataEventTrigger=function(){var e=this.GetGameLoader();if(e){var t=e.GetGameDataFrames(),n=-1;if((n=t.length-1)>=0){var o=t[n];o.pts!=this.m_nGameDataLastFramePTS&&(this.m_nGameDataLastFramePTS=o.pts,o.gamedata.appid=e.GetLatestGameDataFrameAppID(),this.DispatchEvent("valve-gamedataupdate",o))}this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)}},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var n=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(n)},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=u.a(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.ReportPlayerStats=function(){this.m_stats.ReportPlayerStats(this.m_rgLoaders,this.m_elVideo),this.m_schReportPlayerTrigger.Schedule(3e5,this.ReportPlayerStats)},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_stats.CaptureFrequentlyUpdatingInformation(this.m_elVideo,this.m_rgLoaders),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.GetVideoRepresentations=function(){var e=[];if(e.push({id:"auto",displayName:"Auto",selected:null===this.m_videoRepSelected}),this.m_bUseHLSManifest)return e;var t=this.GetCurrentVideoAdaptation();if(t)for(var n=0,o=t.rgRepresentations;n<o.length;n++){var r=o[n],i=this.m_videoRepSelected&&this.m_videoRepSelected.strID==r.strID,a=r.nFrameRate;a>50&&r.nFrameRate<70?a=60:a>25&&a<35&&(a=30);var s=r.nWidth+"x"+r.nHeight+" @ "+a+"fps";e.push({id:r.strID,displayName:s,selected:i,width:r.nWidth,fps:a})}return e.sort((function(e,t){return e.width===t.width?t.fps-e.fps:t.width-e.width})),e},e.prototype.SetVideoRepresentation=function(e){var t=!0,n=this.GetVideoLoader();if(e&&"auto"!=e.id){var o=n.GetRepresentationByID(e.id);o&&(t=!1,null!==this.m_videoRepSelected&&this.m_videoRepSelected.strID==o.strID||(this.m_videoRepSelected=o,n.ChangeRepresentation(o),this.Seek(this.GetCurrentPlayTime())))}t&&(this.m_videoRepSelected=null)},e.prototype.GetThumbnailForTimestamp=function(e){try{var t=this.m_mpd.GetPeriods()[0].rgAdaptationSets[0].segmentTemplate.nDuration/1e3,n=e-e%(10*t),o=Math.floor(n/t)+1,r=this.m_mpd.GetPeriods()[0].rgAdaptationSets[0].segmentTemplate.strMedia;return r=(r=(r=r.replace("/video/","/scrollthumb/")).replace("$RepresentationID$","1")).replace("$Number$",o.toString())}catch(e){return""}},Object(o.c)([m.a],e.prototype,"OnVisibilityChange",null),Object(o.c)([m.a],e.prototype,"UpdateMPD",null),Object(o.c)([m.a],e.prototype,"OnMediaSourceOpen",null),Object(o.c)([m.a],e.prototype,"OnMediaSourceEnded",null),Object(o.c)([m.a],e.prototype,"OnMediaSourceClose",null),Object(o.c)([m.a],e.prototype,"OnVideoWaiting",null),Object(o.c)([m.a],e.prototype,"OnVideoPause",null),Object(o.c)([m.a],e.prototype,"OnVideoResize",null),Object(o.c)([m.a],e.prototype,"OnDebugPrintEventInfoAndAvailableBuffer",null),Object(o.c)([m.a],e.prototype,"OnVideoError",null),Object(o.c)([m.a],e.prototype,"OnVideoCanPlay",null),Object(o.c)([m.a],e.prototype,"GetCurrentPlayTime",null),Object(o.c)([m.a],e.prototype,"OnVideoTimeUpdate",null),Object(o.c)([m.a],e.prototype,"GetPlaybackRate",null),Object(o.c)([m.a],e.prototype,"OnSegmentDownloaded",null),Object(o.c)([m.a],e.prototype,"PlayOnElement",null),Object(o.c)([m.a],e.prototype,"OnSegmentDownloadFailed",null),Object(o.c)([m.a],e.prototype,"OnSegmentDownloadGone",null),Object(o.c)([m.a],e.prototype,"VerifyFirstSegementDownloadProgress",null),Object(o.c)([m.a],e.prototype,"GameDataEventTrigger",null),Object(o.c)([m.a],e.prototype,"ReportPlayerStats",null),Object(o.c)([a.i.bound],e.prototype,"CaptureStatsForDisplay",null),e}();function Y(e){return e<360?480:e<480?720:4320}var q,K=function(){function e(e){this.m_elVideo=null,this.m_peerConnection=null,this.m_schCandidateTimer=new l.b,this.m_listeners=new l.c,this.m_bFirstPlay=!0,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new l.b,this.m_stats=new x,this.m_elVideo=e}return e.prototype.PlayMPD=function(e){},e.prototype.PlayWebRTC=function(e,t,n,r,a){return Object(o.b)(this,void 0,void 0,(function(){var s,c=this;return Object(o.e)(this,(function(l){return this.m_strBroadcastSteamID=e,this.m_ulWebRTCSessionID=n,this.m_nHostCandidateGeneration=0,this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),s={iceServers:[{urls:["stun:"+r]},{urls:["turn:"+r],username:t,credential:n}],iceTransportPolicy:"relay"},this.m_peerConnection=new RTCPeerConnection(s),this.m_peerConnection.oniceconnectionstatechange=function(e){c.m_peerConnection&&(console.log("BroadcastWebRTC: ICE connection state changed to "+c.m_peerConnection.iceConnectionState),"failed"===c.m_peerConnection.iceConnectionState?c.OnWebRTCConnectionFailed():"disconnected"===c.m_peerConnection.iceConnectionState&&c.OnWebRTCConnectionRetry())}.bind(this),this.m_peerConnection.onicecandidate=function(e){if(e.candidate){var t=new FormData;t.append("broadcaststeamid",c.m_strBroadcastSteamID),t.append("webrtc_session_id",c.m_ulWebRTCSessionID),t.append("sdp_mid",e.candidate.sdpMid),t.append("sdp_mline_index",String(e.candidate.sdpMLineIndex)),t.append("candidate",e.candidate.candidate),i.a.post(d.c.CHAT_BASE_URL+"broadcast/addbroadcastwebrtccandidate",t).then((function(e){var t=e.data;t.success&&1==t.success||console.log("Failed to add a WebRTC session ICE candidate: "+String(t.success))})).catch((function(e){return console.log("Failed to add a WebRTC session ICE candidate"+e)}))}}.bind(this),this.m_peerConnection.ontrack=function(e){"video"===e.track.kind&&(c.m_elVideo.src=null,c.m_elVideo.srcObject=e.streams[0],c.Play())}.bind(this),this.m_peerConnection.setRemoteDescription({type:"offer",sdp:a}).then((function(){return Object(o.b)(c,void 0,void 0,(function(){var e,t,n,r,a=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=(e=this.m_peerConnection).setLocalDescription,[4,this.m_peerConnection.createAnswer()];case 1:return[4,t.apply(e,[o.sent()])];case 2:o.sent(),(n=new FormData).append("broadcaststeamid",this.m_strBroadcastSteamID),n.append("webrtc_session_id",this.m_ulWebRTCSessionID),n.append("answer",this.m_peerConnection.localDescription.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,i.a.post(d.c.CHAT_BASE_URL+"broadcast/setbroadcastwebrtcanswer",n).then((function(e){var t=e.data;if(!t.success||1!=t.success)throw new Error(String(t.success))}))];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),console.log("Failed to set the WebRTC session answer: "+r),this.OnWebRTCConnectionRetry(),[2];case 6:return this.m_nCandidateUpdateIntervalMS=250,this.m_schCandidateTimer.Schedule(this.m_nCandidateUpdateIntervalMS,(function(){return a.GetHostCandidates()})),[2]}}))}))})),[2]}))}))},e.prototype.GetHostCandidates=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:(e=new FormData).append("broadcaststeamid",this.m_strBroadcastSteamID),e.append("webrtc_session_id",this.m_ulWebRTCSessionID),e.append("candidate_generation",String(this.m_nHostCandidateGeneration)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(d.c.CHAT_BASE_URL+"broadcast/getbroadcastwebrtccandidates",e).then((function(e){var t=e.data,o=t.data;if(!t.success||1!=t.success)throw new Error(String(t.success));o.candidate_generation>n.m_nHostCandidateGeneration?(o.candidates.forEach((function(e){var t=new RTCIceCandidate({sdpMid:e.sdp_mid,sdpMLineIndex:e.sdp_mline_index,candidate:e.candidate});n.m_peerConnection.addIceCandidate(t).catch((function(e){return console.error(e)}))})),n.m_nHostCandidateGeneration=o.candidate_generation):n.m_nHostCandidateGeneration>0&&(n.m_nCandidateUpdateIntervalMS*=2)}))];case 2:return o.sent(),[3,4];case 3:return t=o.sent(),console.log("Failed to get WebRTC session ICE candidates"+t),this.OnWebRTCConnectionRetry(),[2];case 4:return this.m_schCandidateTimer.Schedule(this.m_nCandidateUpdateIntervalMS,(function(){return n.GetHostCandidates()})),[2]}}))}))},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var n=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(n)},e.prototype.OnWebRTCConnectionRetry=function(){this.DispatchEvent("valve-webrtcretry")},e.prototype.OnWebRTCConnectionFailed=function(){this.DispatchEvent("valve-webrtcfailed")},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_schCandidateTimer.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_peerConnection&&(this.m_peerConnection.close(),this.m_peerConnection=null),this.m_elVideo.pause(),this.m_elVideo.srcObject=null,this.m_stats&&(this.m_stats.GetFPSMonitor().Close(),this.m_stats=null),this.m_bFirstPlay=!0},e.prototype.IsBuffering=function(){return!1},e.prototype.GetCurrentPlayTime=function(){return 0},e.prototype.GetLiveContentStartTime=function(){return null},e.prototype.GetAvailableVideoStartTime=function(){return 0},e.prototype.GetBufferedLiveEdgeTime=function(){return 0},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){var e=this,t=this.m_bFirstPlay;this.m_bFirstPlay=!1;var n=this.m_elVideo.play();n?n.then((function(){e.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))})).catch((function(n){t&&e.DispatchEvent("valve-userinputneeded")})):this.m_stats.GetFPSMonitor().StartTracking((function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}))},e.prototype.Pause=function(){this.m_elVideo.pause()},e.prototype.CanSeek=function(){return!1},e.prototype.SeekAndPlay=function(e){return this.Play(),0},e.prototype.Seek=function(e){return 0},e.prototype.JumpTime=function(e){return 0},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=u.a(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.OnVideoPause=function(e){this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.GetVideoRepresentations=function(){var e=[];return e.push({id:"auto",displayName:"Auto",selected:!0}),e},e.prototype.SetVideoRepresentation=function(e){},e.prototype.IsLiveContent=function(){return!0},e.prototype.GetThumbnailForTimestamp=function(e){return""},Object(o.c)([m.a],e.prototype,"PlayWebRTC",null),Object(o.c)([a.i.bound],e.prototype,"CaptureStatsForDisplay",null),Object(o.c)([m.a],e.prototype,"OnVideoPause",null),Object(o.c)([m.a],e.prototype,"OnVideoResize",null),e}(),Q=n("XCHq");!function(e){e[e.None=0]="None",e[e.Loading=1]="Loading",e[e.Ready=2]="Ready",e[e.Error=3]="Error"}(q||(q={}));var Z,J=function(){function e(){this.m_steamIDBroadcast="",this.m_ulBroadcastID="",this.m_ulViewerToken="",this.m_bWebRTC=!1,this.m_eWatchState=q.None,this.m_strStateDescription="",this.m_rgVideos=[],this.m_schManifestTimeout=new l.b,this.m_schHeartbeatTimeout=new l.b}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==q.Error&&console.log(this.m_strStateDescription)},Object(o.c)([a.A],e.prototype,"m_ulBroadcastID",void 0),Object(o.c)([a.A],e.prototype,"m_eWatchState",void 0),Object(o.c)([a.A],e.prototype,"m_strStateDescription",void 0),Object(o.c)([a.i],e.prototype,"SetState",null),e}(),X=function(){function e(e){this.m_steamIDBroadcast="",this.m_strTitle="",this.m_strAppId="",this.m_strAppTitle="",this.m_strThumbnailUrl="",this.m_nViewerCount=0,this.m_bIsOnline=!1,this.m_schUpdateTimeout=new l.b,this.m_nRefCount=0,this.m_steamIDBroadcast=e}return Object(o.c)([a.A],e.prototype,"m_strTitle",void 0),Object(o.c)([a.A],e.prototype,"m_strAppId",void 0),Object(o.c)([a.A],e.prototype,"m_strAppTitle",void 0),Object(o.c)([a.A],e.prototype,"m_strThumbnailUrl",void 0),Object(o.c)([a.A],e.prototype,"m_nViewerCount",void 0),Object(o.c)([a.A],e.prototype,"m_bIsOnline",void 0),e}(),$=function(){function e(){this.m_eWatchState=q.None,this.m_strStateDescription="",this.m_rgVideos=[]}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==q.Error&&console.log(this.m_strStateDescription)},Object(o.c)([a.A],e.prototype,"m_eWatchState",void 0),Object(o.c)([a.A],e.prototype,"m_strStateDescription",void 0),Object(o.c)([a.i],e.prototype,"SetState",null),e}(),ee=function(){function e(){this.m_mapBroadcasts=new Map,this.m_mapClips=new Map,this.m_activeVideo=null,this.m_broadcastSettings={nVolume:1,bMuted:!1,ulViewerToken:"0"},this.m_schSaveSettings=new l.b,this.m_broadcastInfos={},this.LoadBroadcastSettings()}return e.prototype.GetBroadcastState=function(e){if(e.IsBroadcastClip()){var t=this.m_mapClips.get(e.GetBroadcastClipID());return t?t.m_eWatchState:q.None}var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return n?n.m_eWatchState:q.None},e.prototype.GetBroadcastStateDescription=function(e){if(e.IsBroadcastClip()){var t=this.m_mapClips.get(e.GetBroadcastClipID());return t?t.m_strStateDescription:""}var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return n?n.m_strStateDescription:""},e.prototype.CreateBroadcastVideo=function(e,t,n,o){var r=this.GetOrCreateBroadcast(t),i=this.m_broadcastSettings,a=i.nVolume,s=i.bMuted,c=new te(e,a,s,n);return c.SetBroadcastSteamID(t),r.m_rgVideos.push(c),r.m_bWebRTC=o,Object(y.a)()||Object(y.b)()||r.SetState(q.Error,Object(p.d)("#BroadcastWatch_MinBrowser")),c},e.prototype.CreateClipVideo=function(e,t,n){var o=this.GetOrCreateClip(t),r=this.m_broadcastSettings,i=r.nVolume,a=r.bMuted,s=new te(e,i,a,n);return s.SetBroadcastClipID(t),o.m_rgVideos.push(s),Object(y.a)()||Object(y.b)()||o.SetState(q.Error,Object(p.d)("#BroadcastWatch_MinBrowser")),s},e.prototype.StartVideo=function(e){if(e.IsBroadcastClip()){console.log("Starting clip for "+e.GetBroadcastClipID());var t=this.m_mapClips.get(e.GetBroadcastClipID());if(!t)return;this.SetActiveVideo(e),t.m_eWatchState==q.None?this.GetClipManifest(t,e.GetWatchLocation()):t.m_eWatchState==q.Ready&&e.StartClip(t)}else{console.log("Starting broadcast for "+e.GetBroadcastSteamID());var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());if(!n)return;this.SetActiveVideo(e),n.m_eWatchState==q.None?this.GetBroadcastManifest(n,e.GetWatchLocation()):n.m_eWatchState==q.Ready&&e.StartBroadcast(n)}},e.prototype.SetActiveVideo=function(e){this.m_mapBroadcasts.forEach((function(t){for(var n=0,o=t.m_rgVideos;n<o.length;n++){var r=o[n];r!=e&&r.StopPlaybackTillUserInput()}})),this.m_mapClips.forEach((function(t){for(var n=0,o=t.m_rgVideos;n<o.length;n++){var r=o[n];r!=e&&r.StopPlaybackTillUserInput()}})),this.m_activeVideo=e},e.prototype.PauseAllVideo=function(){this.m_mapBroadcasts.forEach((function(e){for(var t=0,n=e.m_rgVideos;t<n.length;t++){n[t].StopPlaybackTillUserInput()}}))},e.prototype.StopVideo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(r){return t=e.GetBroadcastSteamID(),n=this.m_mapBroadcasts.get(t),e.Stop(),n?(n.m_ulBroadcastID&&function(e,t,n){Object(o.b)(this,void 0,void 0,(function(){var r;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!t)return[2];(r=new FormData).append("steamid",e),r.append("broadcastid",t),r.append("viewertoken",n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.post(d.c.CHAT_BASE_URL+"broadcast/stopwatching",r)];case 2:return o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2]}}))}))}(t,n.m_ulBroadcastID,this.m_broadcastSettings.ulViewerToken),s.d(n.m_rgVideos,(function(t){return t==e})),this.RemoveBroadcastIfUnused(n),[2]):[2]}))}))},e.prototype.StartInfo=function(e){var t=this.GetOrCreateBroadcastInfo(e);return t.m_nRefCount++,1===t.m_nRefCount&&this.LoadBroadcastInfo(t),t},e.prototype.StopInfo=function(e){e.m_nRefCount--,0===e.m_nRefCount&&(e.m_schUpdateTimeout.Cancel(),delete this.m_broadcastInfos[e.m_steamIDBroadcast])},e.prototype.GetOrCreateBroadcastInfo=function(e){if(!this.m_broadcastInfos[e]){var t=new X(e);this.m_broadcastInfos[e]=t}return this.m_broadcastInfos[e]},e.prototype.GetOrCreateBroadcast=function(e){var t=this.m_mapBroadcasts.get(e);return t||((t=new J).m_steamIDBroadcast=e,t.m_eWatchState=q.None,this.m_mapBroadcasts.set(e,t),t)},e.prototype.GetBroadcast=function(e){return this.m_mapBroadcasts.get(e)},e.prototype.GetBroadcastClip=function(e){return this.m_mapClips.get(e)},e.prototype.RemoveBroadcastIfUnused=function(e){e.m_rgVideos.length||(e.m_schHeartbeatTimeout.Cancel(),e.m_schManifestTimeout.Cancel(),this.m_mapBroadcasts.delete(e.m_steamIDBroadcast))},e.prototype.GetOrCreateClip=function(e){var t=this.m_mapClips.get(e);return t||((t=new $).m_clipID=e,t.m_eWatchState=q.None,this.m_mapClips.set(e,t),t)},e.prototype.LoadBroadcastInfo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a,s,c,l,p=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:t="0",(n=this.m_mapBroadcasts.get(e.m_steamIDBroadcast))&&(t=n.m_ulBroadcastID),r={steamid:e.m_steamIDBroadcast,broadcastid:t,location:n&&n.m_rgVideos&&n.m_rgVideos[0]&&n.m_rgVideos[0].GetWatchLocation()},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(d.c.CHAT_BASE_URL+"broadcast/getbroadcastinfo/",{params:r})];case 2:return(a=o.sent())&&a.data?(s=a.data,e.m_strTitle=s.title,e.m_strAppId=s.appid,e.m_strAppTitle=s.app_title,e.m_strThumbnailUrl=s.thumbnail_url,e.m_nViewerCount=s.viewer_count,e.m_bIsOnline=s.is_online,!e.m_strTitle&&Q.b&&(e.m_strTitle=Q.b.name,e.m_strAppTitle=Q.b.appName||Q.b.name),(c=s.update_interval)&&"number"==typeof c&&e.m_schUpdateTimeout.Schedule(1e3*c,(function(){return p.LoadBroadcastInfo(e)})),[3,4]):[2];case 3:return l=o.sent(),console.error(l),[3,4];case 4:return[2]}}))}))},e.prototype.GetBroadcastManifest=function(e,t,n){return void 0===n&&(n=Date.now()),Object(o.b)(this,void 0,void 0,(function(){var r,a,s,c,l,u,m,h=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:e.SetState(q.Loading,""),r={steamid:e.m_steamIDBroadcast,broadcastid:0,viewertoken:this.m_broadcastSettings.ulViewerToken,watchlocation:t,sessionid:d.c.SESSIONID,is_webrtc:e.m_bWebRTC},a=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(d.c.CHAT_BASE_URL+"broadcast/getbroadcastmpd/",{params:r,withCredentials:!0})];case 2:return a=o.sent(),[3,4];case 3:return s=o.sent(),console.error(s),console.log("Failed to get broadcast manifest!"),[3,4];case 4:if(!a||200!=a.status)return e.SetState(q.Error,Object(p.d)("#BroadcastWatch_RequestFailed")),[2];if((c=a.data).viewertoken&&this.SetViewerToken(c.viewertoken),"ready"==(l=c.success))e.SetState(q.Ready),e.m_ulBroadcastID=c.broadcastid,e.m_ulViewerToken=this.m_broadcastSettings.ulViewerToken,e.m_bWebRTC=c.is_webrtc,e.m_data=c,this.LoadBroadcast(e),setTimeout((function(){e.m_schHeartbeatTimeout.Schedule(1e3*e.m_data.heartbeat_interval,(function(){return h.HeartbeatBroadcast(e)}))}),3e4*Math.random());else if("waiting"==l){if(e.SetState(q.Loading,Object(p.d)("#BroadcastWatch_WaitingForResponse")),(u=Date.now()-n)>6e4)return e.SetState(q.Error,Object(p.d)("#BroadcastWatch_NotAvailable")),[2];m=u>3e4?c.retry:5e3,e.m_schManifestTimeout.Schedule(m,(function(){return h.GetBroadcastManifest(e,t,n)}))}else"waiting_for_start"==l?(e.SetState(q.Loading,Object(p.d)("#BroadcastWatch_WaitingForStart")),e.m_schManifestTimeout.Schedule(c.retry,(function(){return h.GetBroadcastManifest(e,t,n)}))):"waiting_for_reconnect"==l?(e.SetState(q.Loading,Object(p.d)("#BroadcastWatch_WaitingForReconnect")),e.m_schManifestTimeout.Schedule(c.retry,(function(){return h.GetBroadcastManifest(e,t,n)}))):"end"==l?e.SetState(q.Error,Object(p.d)("#BroadcastWatch_NotAvailable")):"noservers"==l?e.SetState(q.Error,Object(p.d)("#BroadcastWatch_ServerLoad")):"system_not_supported"==l?e.SetState(q.Error,Object(p.d)("#BroadcastWatch_SystemNotSupported")):"user_restricted"==l?e.SetState(q.Error,Object(p.d)("#BroadcastWatch_UserRestricted")):"poor_upload_quality"==l?e.SetState(q.Error,Object(p.d)("#BroadcastWatch_PoorUploadQuality")):"request_failed"==l?e.SetState(q.Error,Object(p.d)("#BroadcastWatch_RequestFailed")):e.SetState(q.Error,Object(p.d)("#BroadcastWatch_NotAvailable"));return[2]}}))}))},e.prototype.GetClipManifest=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:e.SetState(q.Loading,""),n={clipid:e.m_clipID,watchlocation:t,sessionid:d.c.SESSIONID},r=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.a.get(d.c.CHAT_BASE_URL+"broadcast/getclipdetails",{params:n,withCredentials:!0})];case 2:return r=o.sent(),[3,4];case 3:return a=o.sent(),console.error(a),console.log("Failed to get clip manifest!"),[3,4];case 4:return r&&200==r.status?(1==(s=r.data).success?(e.SetState(q.Ready),e.m_data=s,this.LoadClip(e)):e.SetState(q.Error,Object(p.d)("#BroadcastWatch_RequestFailed")),[2]):(e.SetState(q.Error,Object(p.d)("#BroadcastWatch_RequestFailed")),[2])}}))}))},e.prototype.HeartbeatBroadcast=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.e)(this,(function(o){return(t=new FormData).append("steamid",e.m_steamIDBroadcast),t.append("broadcastid",e.m_ulBroadcastID),t.append("viewertoken",this.m_broadcastSettings.ulViewerToken),i.a.post(d.c.CHAT_BASE_URL+"broadcast/heartbeat/",t),e.m_schHeartbeatTimeout.Schedule(1e3*e.m_data.heartbeat_interval,(function(){return n.HeartbeatBroadcast(e)})),[2]}))}))},e.prototype.LoadBroadcast=function(e){var t=this;e.m_rgVideos.findIndex((function(e){return e==t.m_activeVideo}))>=0&&this.m_activeVideo.StartBroadcast(e)},e.prototype.LoadClip=function(e){var t=this;e.m_rgVideos.findIndex((function(e){return e==t.m_activeVideo}))>=0&&this.m_activeVideo.StartClip(e)},e.prototype.BroadcastDownloadFailed=function(e,t){void 0===t&&(t=!0),e.Stop();var n=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());n&&n.m_eWatchState!=q.Loading&&(n.m_bWebRTC&&t&&(n.m_bWebRTC=!1),this.GetBroadcastManifest(n,e.GetWatchLocation()))},e.prototype.UserInputClickVideo=function(e){if(this.m_activeVideo!=e){this.PauseAllVideo();var t=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());return this.m_activeVideo=e,void this.GetBroadcastManifest(t,e.GetWatchLocation())}e.UserInputClick()},e.prototype.LoadBroadcastSettings=function(){if(window.localStorage){var e=window.localStorage.getItem("broadcastSettings");if(e){var t=JSON.parse(e);if(t){Object.assign(this.m_broadcastSettings,t);var n=this.m_broadcastSettings;n.bMuted=!!n.bMuted,n.nVolume=u.a(n.nVolume,0,1),"string"!=typeof n.ulViewerToken&&(n.ulViewerToken="0")}}}},e.prototype.SaveBroadcastSettings=function(){var e=this;window.localStorage&&this.m_schSaveSettings.Schedule(1e3,(function(){try{window.localStorage.setItem("broadcastSettings",JSON.stringify(e.m_broadcastSettings))}catch(e){}}))},e.prototype.SetViewerToken=function(e){this.m_broadcastSettings.ulViewerToken!=e&&(this.m_broadcastSettings.ulViewerToken=e,this.SaveBroadcastSettings())},e.prototype.SaveVolumeChange=function(e,t){this.m_broadcastSettings.nVolume==e&&this.m_broadcastSettings.bMuted==t||(this.m_broadcastSettings.nVolume=e,this.m_broadcastSettings.bMuted=t,this.SaveBroadcastSettings())},Object(o.c)([a.A],e.prototype,"m_mapBroadcasts",void 0),e}();!function(e){e[e.Timeline=1]="Timeline",e[e.Minimap=2]="Minimap"}(Z||(Z={}));var te=function(){function e(e,t,n,o){this.m_elVideo=null,this.m_player=null,this.m_listeners=new l.c,this.m_gameDataParser=null,this.m_rgSubtitles=[],this.m_eWatchLocation=0,this.m_steamIDBroadcast=null,this.m_BroadcastInfo=null,this.m_broadcastClipID=null,this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_bOnLiveEdge=!1,this.m_nVolume=0,this.m_bMuted=!1,this.m_bUserInputNeeded=!1,this.m_bIsReplay=!1,this.m_nTimelineDuration=1800,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_editorStartTime=0,this.m_editorEndTime=0,this.m_rgMarkers=a.A.array(),this.m_rgSegments=a.A.array(),this.m_rgRegions=a.A.array(),this.m_elVideo=e,this.m_nVolume=t,this.m_bMuted=n,this.m_eWatchLocation=o}return e.prototype.SetBroadcastSteamID=function(e){this.m_steamIDBroadcast=e},e.prototype.GetBroadcastSteamID=function(){return this.m_steamIDBroadcast},e.prototype.GetWatchLocation=function(){return this.m_eWatchLocation},e.prototype.IsPaused=function(){return this.m_bPaused},e.prototype.GetPlaybackTime=function(){return this.m_nPlaybackTime},e.prototype.SetStatsViewIsVisible=function(e){this.m_player&&this.m_player.SetStatsViewIsVisible(e)},e.prototype.GetDASHPlayerStats=function(){return this.m_player.GetDASHPlayerStats()},e.prototype.BHasDASHStats=function(){return null!=this.m_player},e.prototype.IsTimelineMapActive=function(){return!1},e.prototype.CanSeek=function(){return this.m_player&&this.m_player.CanSeek()},e.prototype.IsBuffering=function(){return this.m_bBuffering},e.prototype.IsOnLiveEdge=function(){return this.m_bOnLiveEdge},e.prototype.GetVideoAvailableStartTime=function(){return this.m_nVideoStartPos},e.prototype.GetVolume=function(){return this.m_nVolume},e.prototype.GetUserInputNeeded=function(){return this.m_bUserInputNeeded},e.prototype.IsReplay=function(){return this.m_bIsReplay},e.prototype.IsBroadcastClip=function(){return null!=this.m_broadcastClipID},e.prototype.SetBroadcastClipID=function(e){this.m_broadcastClipID=e},e.prototype.GetBroadcastClipID=function(){return this.m_broadcastClipID},e.prototype.GetVideoRepresentations=function(){return this.m_player?this.m_player.GetVideoRepresentations():[]},e.prototype.SetVideoRepresentation=function(e){this.m_player.SetVideoRepresentation(e)},e.prototype.GetBroadcastInfo=function(){return this.m_BroadcastInfo},e.prototype.ListSubtitles=function(){return this.m_elVideo.textTracks},e.prototype.GetSubtitles=function(){for(var e=0;e<this.m_elVideo.textTracks.length;e++){var t=this.m_elVideo.textTracks[e];if("showing"===t.mode)return t}return null},e.prototype.SetSubtitles=function(e){for(var t=0;t<this.m_elVideo.textTracks.length;t++){var n=this.m_elVideo.textTracks[t];n.language===e?n.mode="showing":n.mode="disabled"}},e.prototype.GetBroadcastState=function(){return ne.GetBroadcastState(this)},e.prototype.GetBroadcastStateDescription=function(){return ne.GetBroadcastStateDescription(this)},e.prototype.InitPlayer=function(){Object(c.a)(!this.m_player,"Initialized twice?"),this.m_listeners.AddEventListener(this.m_elVideo,"playing",this.OnVideoPlaying),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-gamedataupdate",this.OnGameDataUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-downloadfailed",this.OnDownloadFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-webrtcretry",this.OnWebRTCRetry),this.m_listeners.AddEventListener(this.m_elVideo,"valve-webrtcfailed",this.OnWebRTCFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-userinputneeded",this.OnUserInputNeeded),this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_nTimelineDuration=1800,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_rgMarkers.clear(),this.m_rgSegments.clear(),this.m_bUserInputNeeded=!1,this.m_bIsReplay=!1},e.prototype.StartBroadcast=function(e){this.InitPlayer(),e.m_data.url?(this.m_player=new z(this.m_elVideo,!Object(y.a)()&&Object(y.b)()),this.m_player.PlayMPD(e.m_data.url,e.m_data.hls_url)):(this.m_player=new K(this.m_elVideo),this.m_player.PlayWebRTC(this.m_steamIDBroadcast,e.m_ulViewerToken,e.m_data.webrtc_session_id,e.m_data.webrtc_turn_server,e.m_data.webrtc_offer_sdp)),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted);var t=this.m_player.GetDASHPlayerStats();t&&(t.SetBroadcasterAndViewerInfo(this.m_steamIDBroadcast,d.i.steamid,e.m_ulBroadcastID,e.m_ulViewerToken),Object(y.c)("DASH Stat Object",t)),this.m_BroadcastInfo=ne.StartInfo(this.m_steamIDBroadcast)},e.prototype.StartClip=function(e){this.InitPlayer(),this.m_player=new z(this.m_elVideo),this.m_player.PlayMPD(e.m_data.clip_url),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted)},e.prototype.InitSubtitles=function(){var e=this;"76561198894692971"!==this.m_steamIDBroadcast&&"148618792083695635"!==this.m_steamIDBroadcast&&"148618792083694878"!==this.m_steamIDBroadcast||(this.m_rgSubtitles=d.c.SUPPORTED_LANGUAGES||[],setInterval((function(){return Object(o.b)(e,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,i.a.get("https://steamconfig.blob.core.windows.net/config/steamawards_offset.json")];case 1:return e=n.sent().data.offsetSeconds,(t=this.GetSubtitles())&&t.currentOffset!==e&&(Array.from(t.cues||[]).forEach((function(n){var o=e-(t.currentOffset||0);n.startTime+=o,n.endTime+=o})),t.currentOffset=e),[2]}}))}))}),5e3)),this.m_rgSubtitles.forEach((function(t){var n=document.createElement("track");n.kind="subtitles",n.label=t.displayName,n.srclang=t.value,n.src="/public/steamawards_"+t.value+".vtt?t=1549644543",e.m_elVideo.appendChild(n),n.addEventListener("load",(function(){e.ListSubtitles()[0].mode="disabled"}))})),"english"!==d.c.LANGUAGE&&this.SetSubtitles(d.c.LANGUAGE)},e.prototype.Stop=function(){this.m_listeners.Unregister(),this.m_BroadcastInfo&&(ne.StopInfo(this.m_BroadcastInfo),this.m_BroadcastInfo=null),this.m_gameDataParser=null,this.m_player&&(this.m_player.Close(),this.m_player=null)},e.prototype.TogglePlayPause=function(){!this.m_player||this.m_player.IsPaused()?this.Play():this.Pause()},e.prototype.Play=function(){console.log("Play ",this.m_steamIDBroadcast);var e=this.GetBroadcastState();e==q.None||this.IsBroadcastClip()?ne.StartVideo(this):e==q.Ready&&(ne.SetActiveVideo(this),this.m_player?this.m_player.Play():this.StartBroadcast(ne.GetBroadcast(this.m_steamIDBroadcast)))},e.prototype.Pause=function(){console.log("Pause ",this.m_steamIDBroadcast),this.m_player&&this.m_player.Pause()},e.prototype.JumpTime=function(e){this.m_player.JumpTime(e)},e.prototype.Seek=function(e){this.m_player.Seek(e)},e.prototype.SeekAndPlay=function(e){this.m_player.SeekAndPlay(e)},e.prototype.JumpToLiveEdge=function(){this.m_player.IsLiveContent()?this.SeekAndPlay(this.m_player.GetBufferedLiveEdgeTime()):this.SeekAndPlay(this.m_player.GetAvailableVideoStartTime())},e.prototype.SetVolume=function(e){this.m_player&&this.m_player.SetVolume(e),this.m_nVolume=this.m_player.GetVolume(),ne.SaveVolumeChange(e,this.m_bMuted)},e.prototype.SetMute=function(e){this.m_player&&this.m_player.SetMuted(e),this.m_bMuted=e,ne.SaveVolumeChange(this.m_nVolume,e)},e.prototype.IsMuted=function(){return this.m_bMuted},e.prototype.OnVideoPlaying=function(){this.m_bPaused=!1,0===this.m_editorStartTime&&0===this.m_editorEndTime&&(this.m_editorStartTime=this.GetVideoAvailableStartTime(),this.m_editorEndTime=this.GetVideoAvailableStartTime()+this.GetTimelineDuration())},e.prototype.OnVideoPause=function(){this.m_bPaused=!0},e.prototype.OnVideoTimeUpdate=function(){this.IsBroadcastClip()?(this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=this.m_player.GetBufferedLiveEdgeTime(),this.m_nTimelineDuration=this.m_nVideoEndPos-this.m_nVideoStartPos,this.m_bOnLiveEdge=!1,this.m_bBuffering=this.m_player.IsBuffering()):(this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=Math.max(this.m_player.GetBufferedLiveEdgeTime(),this.m_nPlaybackTime),this.m_bBuffering=this.m_player.IsBuffering(),this.m_bOnLiveEdge=this.m_nVideoEndPos-this.m_nPlaybackTime<5,this.m_player.IsPaused()&&(this.m_bOnLiveEdge=!1))},e.prototype.OnGameDataUpdate=function(e){var t=e.detail;if(t&&"object"==typeof t.gamedata){this.m_gameDataParser&&this.m_gameDataParser.GetAppID()==t.gamedata.__appid||(this.m_gameDataParser=new v(t.gamedata.__appid));var n=this.m_player.GetLiveContentStartTime().getTime();if("timelinemarkers"in t.gamedata){var o=this.m_gameDataParser.UpdateMarkers(t.gamedata.__timelinemarkers,n);o&&(this.m_rgMarkers.replace(o.rgMarkers||[]),this.m_rgSegments.replace(o.rgSegments||[]));var r=this.m_gameDataParser.UpdateRegions(t.gamedata.__regions);r&&this.m_rgRegions.replace(r)}else"soundtrack"in t.gamedata&&this.m_gameDataParser.UpdateSoundtrack(this.m_steamIDBroadcast,t.gamedata.soundtrack)}},e.prototype.OnDownloadFailed=function(){ne.BroadcastDownloadFailed(this)},e.prototype.OnWebRTCRetry=function(){ne.BroadcastDownloadFailed(this,!1)},e.prototype.OnWebRTCFailed=function(){ne.BroadcastDownloadFailed(this,!0)},e.prototype.OnUserInputNeeded=function(){this.m_bUserInputNeeded=!0},e.prototype.UserInputClick=function(){this.m_bUserInputNeeded=!1,this.m_player?this.JumpToLiveEdge():this.Play()},e.prototype.StopPlaybackTillUserInput=function(){this.Stop(),this.OnUserInputNeeded()},e.prototype.GetTimelineStartPos=function(){return this.m_nVideoEndPos-this.m_nTimelineDuration},e.prototype.GetTimelineDuration=function(){return this.m_nTimelineDuration},e.prototype.GetTimeAtMousePosition=function(e,t,n,o){var r=u.c(e,t.left,t.right,n,o);return Math.floor(r+.5)},e.prototype.GetPercentOffsetFromTime=function(e,t){var n=0,o=0;return t==Z.Timeline?n=(o=this.m_nVideoEndPos)-this.m_nTimelineDuration:(n=0,o=0),u.c(e,n,o,0,100)},e.prototype.GetTimelineMarkers=function(){return this.m_rgMarkers},e.prototype.GetTimelineSegments=function(){return this.m_rgSegments},e.prototype.GetGameDataRegions=function(){return this.m_rgRegions},e.prototype.BHasMarkersOrSegments=function(){return this.has_segments||this.has_markers},e.prototype.GetThumbnailForTimestamp=function(e){return this.m_player.GetThumbnailForTimestamp(e)},Object.defineProperty(e.prototype,"has_markers",{get:function(){return this.m_rgMarkers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"has_segments",{get:function(){return this.m_rgSegments.length>0},enumerable:!1,configurable:!0}),Object(o.c)([a.A],e.prototype,"m_bPaused",void 0),Object(o.c)([a.A],e.prototype,"m_nPlaybackTime",void 0),Object(o.c)([a.A],e.prototype,"m_bBuffering",void 0),Object(o.c)([a.A],e.prototype,"m_bOnLiveEdge",void 0),Object(o.c)([a.A],e.prototype,"m_nVolume",void 0),Object(o.c)([a.A],e.prototype,"m_bMuted",void 0),Object(o.c)([a.A],e.prototype,"m_bUserInputNeeded",void 0),Object(o.c)([a.A],e.prototype,"m_bIsReplay",void 0),Object(o.c)([a.A],e.prototype,"m_nTimelineDuration",void 0),Object(o.c)([a.A],e.prototype,"m_nVideoStartPos",void 0),Object(o.c)([a.A],e.prototype,"m_nVideoEndPos",void 0),Object(o.c)([a.A],e.prototype,"m_editorStartTime",void 0),Object(o.c)([a.A],e.prototype,"m_editorEndTime",void 0),Object(o.c)([a.i.bound],e.prototype,"StartBroadcast",null),Object(o.c)([a.i.bound],e.prototype,"StartClip",null),Object(o.c)([m.a],e.prototype,"OnVideoPlaying",null),Object(o.c)([m.a],e.prototype,"OnVideoPause",null),Object(o.c)([a.i.bound],e.prototype,"OnVideoTimeUpdate",null),Object(o.c)([a.i.bound],e.prototype,"OnGameDataUpdate",null),Object(o.c)([m.a],e.prototype,"OnDownloadFailed",null),Object(o.c)([m.a],e.prototype,"OnWebRTCRetry",null),Object(o.c)([m.a],e.prototype,"OnWebRTCFailed",null),Object(o.c)([m.a],e.prototype,"OnUserInputNeeded",null),e}(),ne=new ee;window.uiBroadcastWatchStore=ne},DMSt:function(e,t,n){e.exports={FriendsListInsetShadowCtn:"insetshadow_FriendsListInsetShadowCtn_1S167",FriendListInsetShadowTop:"insetshadow_FriendListInsetShadowTop_1mEmL",FriendListInsetShadowBottom:"insetshadow_FriendListInsetShadowBottom_3cl4u"}},E7zH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var o=n("mrSG"),r=n("UqDm"),i=n("1VtQ"),a=function(){function e(){this.m_vecCallbacks=[]}return e.prototype.Register=function(e){var t=this;this.m_vecCallbacks.push(e);return{Unregister:function(){r.c(t.m_vecCallbacks,e)}}},e.prototype.Dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=this.m_vecCallbacks;n<o.length;n++){var r=o[n];r.apply(void 0,e)}},e.prototype.ClearAllCallbacks=function(){this.m_vecCallbacks=[]},e}(),s=function(){function e(){}return e.prototype.Schedule=function(e,t){this.IsScheduled()&&this.Cancel(),this.m_fnCallback=t,this.m_schTimer=window.setTimeout(this.ScheduledInternal,e)},e.prototype.IsScheduled=function(){return void 0!==this.m_schTimer},e.prototype.Cancel=function(){this.m_schTimer&&(clearTimeout(this.m_schTimer),this.m_schTimer=void 0)},e.prototype.ScheduledInternal=function(){this.m_schTimer=void 0;var e=this.m_fnCallback;this.m_fnCallback=void 0,e()},Object(o.c)([i.a],e.prototype,"ScheduledInternal",null),e}(),c=function(){function e(){this.m_rgListeners=[]}return e.prototype.AddEventListener=function(e,t,n){e.addEventListener(t,n),this.m_rgListeners.push({element:e,type:t,listener:n})},e.prototype.Unregister=function(){for(var e=0,t=this.m_rgListeners;e<t.length;e++){var n=t[e];n.element.removeEventListener(n.type,n.listener)}this.m_rgListeners=[]},e}();function l(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=[],(n=Object.keys(e)).forEach((function(n){return t.push(e[n])})),[4,Promise.all(t)];case 1:return r=o.sent(),i={},[2,r.reduce((function(e,t,o){return e[n[o]]=t,e}),i)]}}))}))}},EGkk:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return S})),n.d(t,"g",(function(){return C})),n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return I})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return w})),n.d(t,"j",(function(){return A}));var o=n("mrSG"),r=n("okNM"),i=n("q1tI"),a=n("i8i4"),s=n("8o0Y"),c=n("JtU4"),l=n("/IDK"),p=n("1VtQ"),u=n("e2SU"),m=n("WpBz"),d=n("oh5H"),h=n("1n9R"),f=n("7Vyq"),_=n.n(f),g=n("QHER"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.renderMenuContainer,a=Object(o.f)(e,["children","className","renderMenuContainer"]),s=this.context.contextMenuInstance&&this.context.contextMenuInstance.options.bUseWebStyles?"popup_menu popup_body":_.a.contextMenuContents;n&&(s+=" "+n);var c=r||"div";return i.createElement(c,Object(o.a)({},a,{className:s}),t)},t.contextTypes={contextMenuInstance:function(){return null}},t}(i.PureComponent),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnClick=function(e){this.props.disabled||(this.props.onClick&&this.props.onClick(e),this.props.bInteractableItem||(this.props.onSelected&&this.props.onSelected(e),this.context.contextMenuInstance&&this.context.contextMenuInstance.Hide()))},t.prototype.OnMouseEnter=function(e){this.context.contextMenuInstance&&this.context.contextMenuInstance.HideSubMenu()},t.prototype.render=function(){var e=this.props,t=(e.onSelected,e.bInteractableItem,e.renderMenuItem),n=Object(o.f)(e,["onSelected","bInteractableItem","renderMenuItem"]),r=[];this.context.contextMenuInstance&&this.context.contextMenuInstance.options.bUseWebStyles?r.push("popup_menu_item"):r.push(_.a.contextMenuItem,"contextMenuItem"),this.props.className&&r.push(this.props.className),this.props.disabled&&r.push("disabled");var a=t||"div";return i.createElement(a,Object(o.a)({onMouseEnter:this.OnMouseEnter},n,{onClick:this.OnClick,unselectable:this.props.unselectable,className:g.a.apply(void 0,r)}),this.props.children)},t.contextTypes={contextMenuInstance:function(){return null}},Object(o.c)([p.a],t.prototype,"OnClick",null),Object(o.c)([p.a],t.prototype,"OnMouseEnter",null),t}(i.PureComponent),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.bChecked,n=e.children,r=e.className,a=Object(o.f)(e,["bChecked","children","className"]);return i.createElement(v,Object(o.a)({},a,{className:Object(g.a)(r,t&&"menuChecked")}),i.createElement("div",{className:"contextMenuCheckMark"}),n)},t}(i.PureComponent),S=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bActive:!1},n}return Object(o.d)(t,e),t.prototype.OnSubMenuMouseEnter=function(){this.context.contextMenuInstance.CancelHideSubMenuTimer()},t.prototype.RenderSubMenu=function(){return i.createElement(b,{onMouseEnter:this.OnSubMenuMouseEnter},this.props.children)},t.prototype.OnMouseEnter=function(e){var t=this;if(this.context.contextMenuInstance){var n=this.context.contextMenuInstance.ShowSubMenu(e.currentTarget,this.RenderSubMenu);n&&(this.setState({bActive:!0}),n.SetOnHideCallback((function(){t.setState({bActive:!1})})))}},t.prototype.OnClick=function(e){this.OnMouseEnter(e),this.props.onClick&&this.props.onClick(e)},t.prototype.render=function(){var e=this.props,t=e.label,n=(e.children,e.className),r=Object(o.f)(e,["label","children","className"]);return i.createElement(v,Object(o.a)({},r,{onClick:this.OnClick,className:Object(g.a)(n,_.a.SubMenu,this.state.bActive&&_.a.active),onMouseEnter:this.OnMouseEnter,onSelected:null,bInteractableItem:!0}),i.createElement("div",{className:_.a.Label},t),i.createElement("div",{className:_.a.Arrow},i.createElement(u.p,null)))},t.contextTypes={contextMenuInstance:function(){return null}},Object(o.c)([p.a],t.prototype,"OnSubMenuMouseEnter",null),Object(o.c)([p.a],t.prototype,"RenderSubMenu",null),Object(o.c)([p.a],t.prototype,"OnMouseEnter",null),Object(o.c)([p.a],t.prototype,"OnClick",null),t}(i.PureComponent),C=function(e){function t(t){var n=e.call(this,t)||this;return n.m_elMenu=void 0,n.m_cReenteranceGuard=1,n.state={ready:!1,menuLeft:void 0,menuTop:void 0,menuRight:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},n.m_mutationObserver=new MutationObserver(n.OnMenuMutation),n}return Object(o.d)(t,e),t.prototype.BindMenuElement=function(e){var t=this;this.m_elMenu&&(this.m_mutationObserver.disconnect(),this.props.popup||this.m_elMenu.ownerDocument.defaultView.removeEventListener("resize",this.OnWindowResize)),e&&(this.m_mutationObserver.observe(e,{childList:!0,subtree:!0}),this.props.popup||e.ownerDocument.defaultView.addEventListener("resize",this.OnWindowResize)),this.m_elMenu=e||void 0,this.PositionMenu(),this.state.ready||(this.props.instance.SetTakeFocus(this.TakeFocus.bind(this)),this.setState({ready:!0},(function(){t.TakeFocus()})))},t.prototype.OnMenuMutation=function(e,t){this.PositionMenu()},t.prototype.OnWindowResize=function(){this.PositionMenu()},t.prototype.OnBlur=function(e){e.relatedTarget&&l.e(e.currentTarget,e.relatedTarget)||e.relatedTarget&&this.props.instance.BIsElementInMenuHierarchy(e.relatedTarget)||this.props.instance.BIsSubMenuVisible()||this.state.ready&&this.props.instance.visible&&this.props.instance.Hide()},t.prototype.OnKeyDown=function(e){27==e.keyCode&&this.state.ready&&(this.props.instance.Hide(),e.preventDefault(),e.stopPropagation())},t.prototype.getChildContext=function(){return{contextMenuInstance:this.props.instance}},t.prototype.componentDidUpdate=function(){this.m_cReenteranceGuard-- >0?this.PositionMenu():this.m_cReenteranceGuard=2},t.prototype.TakeFocus=function(){if(this.m_elMenu&&this.state.ready&&this.props.instance.visible&&(this.props.popup||!l.e(this.m_elMenu,this.m_elMenu.ownerDocument.activeElement))){var e=this.m_elMenu.querySelector(".ContextMenuAutoFocus");e&&e.focus?e.focus():this.m_elMenu.focus()}},t.prototype.PositionMenu=function(){var e=this.m_elMenu,t=this.props.element;if(e&&t){var n=t.ownerDocument.defaultView;e.ownerDocument.defaultView.CtxUpdate=this.PositionMenu.bind(this);var o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=null!=this.props.popup,a=this.props.options,s={menuLeft:void 0,menuRight:void 0,menuTop:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},c=this.props.clientX,p=this.props.clientY,u=n.innerWidth,m=n.innerHeight;if(i){this.props.options.bScreenCoordinates||(c+=n.screenLeft,p+=n.screenTop),o=l.i(n,o);var d=n.screen,h=0,f=0;d.availLeft&&(h=d.availLeft),d.availTop&&(f=d.availTop),u=h+d.availWidth,m=f+d.availHeight}(a.bOverlapHorizontal||a.bOverlapVertical)&&(c=p=void 0);var _=c||o.left,g=c||o.right,b=r.width;a.bMatchWidth&&(b=g-_,s.menuWidth=b);var v=(a.bOverlapHorizontal?g:_)-b,y=v>0,S=u-(a.bOverlapHorizontal?_:g)-b,C=S>0,O=(a.bPreferPopLeft||!C)&&y;y||C||(O=y>C,a.bFitToWindow&&(b+=(O?v:S)-8,s.menuWidth=b)),!a.bPreferPopLeft&&C||!y?s.menuLeft=a.bOverlapHorizontal?_:g:s.menuRight=u-(a.bOverlapHorizontal?g:_);var I=p||o.top,E=p||o.bottom,w=e.scrollHeight;a.bMatchHeight&&(w=E-I,s.menuHeight=w);var A=(a.bOverlapVertical?E:I)-w,D=A>0,T=m-(a.bOverlapVertical?I:E)-w,M=T>0,j=(a.bPreferPopTop||!M)&&D&&!a.bDisablePopTop;if(!D&&!M){var L=void 0!==a.bShiftToFitWindow?a.bShiftToFitWindow:a.bFitToWindow&&!a.bOverlapHorizontal;j=A>T&&!a.bDisablePopTop,L&&(j?s.menuTop=4:s.menuBottom=4),a.bFitToWindow&&(L?w=Math.min(w,m-8):w+=j?A:T,s.menuHeight=w-8)}void 0===s.menuBottom&&void 0===s.menuTop&&(j?s.menuBottom=m-(a.bOverlapVertical?E:I):s.menuTop=a.bOverlapVertical?I:E),i?(s.menuHeight||(s.menuHeight=r.height),s.menuWidth||(s.menuWidth=r.width),s.menuBottom&&!s.menuTop&&(s.menuTop=m-s.menuBottom-s.menuHeight,s.menuBottom=void 0),s.menuRight&&!s.menuLeft&&(s.menuLeft=u-s.menuRight-s.menuWidth,s.menuRight=void 0)):(s.menuLeft&&(s.menuLeft+=n.scrollX),s.menuTop&&(s.menuTop+=n.scrollY),s.menuBottom&&(s.menuBottom+=n.document.body.clientHeight-n.scrollY-n.innerHeight),s.menuRight&&(s.menuRight+=n.document.body.clientWidth-n.scrollX-n.innerWidth)),s.menuLeft===this.state.menuLeft&&s.menuRight===this.state.menuRight&&s.menuTop===this.state.menuTop&&s.menuBottom===this.state.menuBottom&&s.menuWidth===this.state.menuWidth&&s.menuHeight===this.state.menuHeight||this.setState(s)}},t.prototype.render=function(){var e=this,t={visibility:this.state.ready?"visible":"hidden"};if(this.props.popup){var n=this.props.element.ownerDocument.defaultView;void 0!==this.state.menuLeft&&void 0!==this.state.menuTop&&void 0!==this.state.menuWidth&&void 0!==this.state.menuHeight&&n.SteamClient.Window.GetWindowRestoreDetails((function(t){var o=e.props.popup.window,r=e.state.menuLeft-n.screenX,i=e.state.menuTop-n.screenY;try{o.SteamClient.Window.PositionWindowRelative(t,r,i,e.state.menuWidth,e.state.menuHeight)}catch(e){console.error(e)}}))}else void 0!==this.state.menuTop?t.top=this.state.menuTop:void 0!==this.state.menuBottom&&(t.bottom=this.state.menuBottom),void 0!==this.state.menuLeft?t.left=this.state.menuLeft:void 0!==this.state.menuRight&&(t.right=this.state.menuRight),void 0!==this.state.menuHeight&&(t.height=this.state.menuHeight),void 0!==this.state.menuWidth&&(t.width=this.state.menuWidth);var o=this.props.options.strClassName||(this.props.options.bUseWebStyles?"popup_block_new popup_block_hidden_until_visible":_.a.contextMenu);return this.props.instance.visible&&this.state.ready&&(o+=" visible"),o+=" "+_.a.ContextMenuFocusContainer,i.createElement("div",{className:o,ref:this.BindMenuElement,style:t,onBlur:this.OnBlur,onKeyDown:this.OnKeyDown,tabIndex:0},this.props.children)},t.childContextTypes={contextMenuInstance:function(){return null},context:function(){return null}},Object(o.c)([p.a],t.prototype,"BindMenuElement",null),Object(o.c)([p.a,Object(m.a)(100)],t.prototype,"OnMenuMutation",null),Object(o.c)([p.a],t.prototype,"OnWindowResize",null),Object(o.c)([p.a],t.prototype,"OnBlur",null),Object(o.c)([p.a],t.prototype,"OnKeyDown",null),t=Object(o.c)([r.a],t)}(i.Component),O=function(e){function t(n,o,r){var i=e.call(this,"contextmenu_"+t.sm_iContextMenuInstance++,{title:"Menu",html_class:_.a.ContextMenuPopup+" client_chat_frame",body_class:"ContextMenuPopupBody",replace_existing_popup:!1,target_browser:r,eCreationFlags:c.c.ContextMenu})||this;return i.m_menuProps=n,i.m_children=o,i}return Object(o.d)(t,e),t.prototype.UpdateParamsBeforeShow=function(e){if(this.m_menuProps.options.bScreenCoordinates)e.dimensions={left:this.m_menuProps.clientX,top:this.m_menuProps.clientY,width:350,height:1};else{var t=l.i(this.m_menuProps.element.ownerDocument.defaultView,this.m_menuProps.element.getBoundingClientRect());e.dimensions={left:t.right,top:t.top,width:350,height:1}}return e.availscreenwidth=this.m_menuProps.element.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_menuProps.element.ownerDocument.defaultView.screen.availHeight,e},t.prototype.Render=function(e,t){a.render(i.createElement(C,Object(o.a)({},this.m_menuProps,{popup:this}),this.m_children),t)},t.prototype.OnBlur=function(){},t.prototype.OnFocus=function(){},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){},t.sm_iContextMenuInstance=0,t}(c.a);function I(e){return i.createElement("div",{className:_.a.ContextMenuMouseOverlay})}function E(e){var t=[],n=l.s(e),o=n.getSelection(),r=o&&o.rangeCount>0&&o.toString().length>0,a=e.target,c=!1;if(a&&"tagName"in a&&("INPUT"!=a.tagName&&"TEXTAREA"!=a.tagName||(c=!0)),(n.document.queryCommandEnabled("cut")||r&&c)&&t.push(i.createElement(v,{key:"cut",onSelected:function(){n.document.execCommand("cut")}},Object(d.d)("#ContextMenu_Cut"))),(document.queryCommandEnabled("copy")||r)&&t.push(i.createElement(v,{key:"copy",onSelected:function(){n.document.execCommand("copy")}},Object(d.d)("#ContextMenu_Copy"))),h.c.IN_CLIENT&&c&&t.push(i.createElement(v,{key:"paste",onSelected:function(){a.focus(),n.SteamClient._internal.Paste()}},Object(d.d)("#ContextMenu_Paste"))),t.length)Object(s.a)(i.createElement(b,null,t),e);else{if(e.shiftKey)return;e.preventDefault(),e.stopPropagation()}}function w(){return window.sessionStorage&&"true"==window.sessionStorage.getItem("DEBUG_StickyContextMenus")}function A(e){e?window.sessionStorage.setItem("DEBUG_StickyContextMenus","true"):window.sessionStorage.removeItem("DEBUG_StickyContextMenus")}},EO5R:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTQwMHB4IiBoZWlnaHQ9IjE0MDlweCIgdmlld0JveD0iMCAxODAxLjUgMTQwMCAxNDA5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMTgwMS41IDE0MDAgMTQwOSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iaWNvbm1vbnN0ci1saW5rLTFfMV8iIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zNjIuMzUzLDIzMTAuNTg4YzE0OC4yMzUtMTQ4LjIzNSwzODcuMDYtMTQ4LjIzNSw1MjcuMDYsMA0KCWMxNi40NzEsMTYuNDcxLDMyLjk0MSw0MS4xNzcsNDkuNDExLDU3LjY0N0w4MDcuMDU5LDI1MDBjLTQxLjE3Ni04Mi4zNTMtMTMxLjc2NS0xMzEuNzY1LTIyMi4zNTMtMTE1LjI5NA0KCWMtNDEuMTc3LDguMjM1LTc0LjExOCwyNC43MDYtOTguODIzLDQ5LjQxMWwtMjQ3LjA1OSwyNDcuMDZjLTc0LjExOCw3NC4xMTctNzQuMTE4LDE5Ny42NDYsMCwyODANCgljNzQuMTE4LDc0LjExNywxOTcuNjQ3LDc0LjExNywyODAsMGwwLDBsNzQuMTE4LTc0LjExOGM3NC4xMTcsMjQuNzA2LDE0OC4yMzUsNDEuMTc3LDIyMi4zNTMsMzIuOTQxbC0xNzIuOTQsMTcyLjk0MQ0KCWMtMTQ4LjIzNSwxNDguMjM1LTM4Ny4wNiwxNDguMjM1LTUyNy4wNiwwcy0xNDguMjM1LTM4Ny4wNTksMC01MjcuMDU5QzEwNy4wNTksMjU1Ny42NDcsMzYyLjM1MywyMzEwLjU4OCwzNjIuMzUzLDIzMTAuNTg4eg0KCSBNNzU3LjY0NiwxOTA3LjA1OUw1OTIuOTQxLDIwODBjNzQuMTE3LTguMjM1LDE0OC4yMzUsOC4yMzUsMjE0LjExNywzMi45NDFsNzQuMTE4LTc0LjExOGM3NC4xMTctNzQuMTE3LDE5Ny42NDYtNzQuMTE3LDI4MCwwDQoJYzgyLjM1Myw3NC4xMTgsNzQuMTE3LDE5Ny42NDcsMCwyODBsLTI1NS4yOTQsMjQ3LjA2Yy03NC4xMTgsNzQuMTE3LTE5Ny42NDcsNzQuMTE3LTI4MCwwDQoJYy04LjIzNS0xNi40NzEtMjQuNzA2LTQxLjE3Ny0zMi45NDEtNjUuODgzbC0xMzEuNzY1LDEzMS43NjVjMTYuNDcxLDI0LjcwNiwzMi45NCw0MS4xNzcsNDkuNDExLDU3LjY0Nw0KCWMxNDguMjM1LDE0OC4yMzUsMzg3LjA1OSwxNDguMjM1LDUyNy4wNiwwbDAsMGwyNDcuMDU5LTI0Ny4wNmMxNDguMjM1LTE0OC4yMzUsMTQ4LjIzNS0zODcuMDU5LDAtNTI3LjA1OQ0KCVM5MDUuODgzLDE3NjcuMDU5LDc1Ny42NDYsMTkwNy4wNTlMNzU3LjY0NiwxOTA3LjA1OUw3NTcuNjQ2LDE5MDcuMDU5eiIvPg0KPC9zdmc+DQo="},EcbU:function(e,t,n){"use strict";n.d(t,"f",(function(){return ba})),n.d(t,"d",(function(){return va})),n.d(t,"g",(function(){return ya})),n.d(t,"e",(function(){return Oa})),n.d(t,"c",(function(){return Da})),n.d(t,"a",(function(){return Ta})),n.d(t,"b",(function(){return Ma}));var o=n("mrSG"),r=n("okNM"),i=n("q1tI"),a=n.n(i),s=n("1w3K"),c=n("FNBO"),l=n.n(c),p=n("S+nL"),u=n.n(p),m=n("vZ27"),d=n.n(m),h=n("q8zB"),f=n.n(h),_=n("iIMO"),g=n.n(_),b=n("79VW"),v=n.n(b),y=n("B0FO"),S=n("hEDq"),C=n("8o0Y"),O=n("mh12"),I=n("vDqi"),E=n.n(I),w=n("2vnA"),A=n("G4oX"),D=n("1n9R"),T=function(){function e(e){this.bundleid=e.bundleid,this.packageids=e.packageids,this.enabled=e.enabled,this.name=e.name,this.finalized=e.finalized,this.must_purchase_as_set=e.must_purchase_as_set,this.publisherid=e.publisherid,this.header_image_url=e.header_image_url,this.initial_price=e.initial_price,this.final_price=e.final_price,this.formatted_orig_price=e.formatted_orig_price,this.formatted_final_price=e.formatted_final_price,this.discount_percent=e.discount_percent,this.bundle_base_discount=e.bundle_base_discount,this.available_windows=e.available_windows,this.available_mac=e.available_mac,this.available_linux=e.available_linux,this.support_vrhmd=e.support_vrhmd,this.support_vrhmd_only=e.support_vrhmd_only}return e.prototype.GetHeaderImageDimension=function(){return{width:292,height:136}},Object.defineProperty(e.prototype,"type",{get:function(){return"bundle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.bundleid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"purchasePackageId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app_to_run",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_free",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(),M=new(function(){function e(){this.m_mapBundleInfo=new Map,this.m_mapMissingBundles=new Map,this.m_mapInFlightRequests=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.LazyInit=function(){var e=this;if(!this.m_bLoadedFromConfig){var t=Object(D.g)("bundleinfo","application_config");this.ValidateStoreDefault(t)&&("dev"!=D.c.WEB_UNIVERSE&&"beta"!=D.c.WEB_UNIVERSE||console.log("DEV_DEBUG: CBundleInfoStore loading bundles payload: "+t.length),Object(w.E)((function(){return t.forEach((function(t){return e.m_mapBundleInfo.set(Number(t.bundleid),new T(t))}))})));var n=Object(D.g)("bundleunknown","application_config");Object(A.a)(n)&&n.forEach((function(t){return e.m_mapMissingBundles.set(t,!0)})),this.m_bLoadedFromConfig=!0}},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].bundleid&&"string"==typeof t[0].name)},e.prototype.GetBundleInfo=function(e){return this.LazyInit(),this.m_mapBundleInfo.get(e)},e.prototype.LoadBundleInfo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.LazyInit(),t=e.map((function(e){return a.m_mapInFlightRequests.get(e)})),(n=e.filter((function(e){return e&&!a.m_mapBundleInfo.has(e)&&!a.m_mapMissingBundles.has(e)&&!a.m_mapInFlightRequests.has(e)}))).length?(n.sort(),r=E.a.get(D.c.STORE_BASE_URL+"actions/ajaxresolvebundles",{params:{bundleids:n.join(","),cc:D.c.COUNTRY||"US",l:D.c.LANGUAGE,origin:self.origin}}),i=r.then((function(e){var t=e&&e.data;if(t)for(var o=0,r=t;o<r.length;o++){var i=r[o];a.m_mapBundleInfo.set(i.bundleid,new T(i))}n.forEach((function(e){a.m_mapBundleInfo.has(e)||a.m_mapMissingBundles.set(e,!0),a.m_mapInFlightRequests.delete(e)}))})),n.forEach((function(e){return a.m_mapInFlightRequests.set(e,i)})),[4,i]):[3,2];case 1:o.sent(),o.label=2;case 2:return[4,Promise.all(t)];case 3:return o.sent(),[2]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapBundleInfo",void 0),e}());window.g_BundleInfoStore=M;var j=n("ljid"),L=n("kQil"),G=n("Hi0u"),N=n("e2SU"),R=n("QHER"),k=n("oh5H"),B=n("OTLo"),P=n("ieiw"),F=n.n(P);function x(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return D.c.IN_CLIENT?(console.log("Running game "+e+" locally."),window.location.href="steam://run/"+e):(console.log("Cannot identify local client. Prompting user to launch "+e+"."),function(e){Object(o.b)(this,void 0,void 0,(function(){var t,n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,B.a.EnsureAppInfoForAppIDs([e])];case 1:return o.sent(),t=B.a.GetAppInfo(e),n=t&&t.name,console.log("prompting for",n),r=D.c.STORE_BASE_URL+"about/",Object(G.b)(i.createElement(U,{appid:e,strGameName:n,strDownloadSteamUrl:r}),window),[2]}}))}))}(e)),[2]}))}))}var V,U=function(e){var t=function(){return e.closeModal&&e.closeModal()};return i.createElement(L.f,{onEscKeypress:t,className:F.a.GotSteamDialog},i.createElement(j.g,null,i.createElement(j.m,null," ",Object(k.d)("#GotSteam_Title")," "),i.createElement(j.b,null,i.createElement(j.c,null,Object(k.k)("#GotSteam_PromptWithDownloadLink",i.createElement("a",{href:e.strDownloadSteamUrl,className:F.a.DownloadSteamUrl},Object(k.d)("#GotSteam_DownloadLinkText")),i.createElement("span",{className:F.a.GameName},e.strGameName))),i.createElement("div",{className:F.a.Buttons},i.createElement("a",{href:"steam://run/"+e.appid,onClick:t,className:Object(R.a)(F.a.Button,F.a.LeftButton)},i.createElement("div",{className:F.a.AnswerText}," ",Object(k.d)("#GotSteam_Yes")," "),i.createElement("div",{className:F.a.ActionText}," ",Object(k.d)("#GotSteam_Yes_Play")," ")),i.createElement("a",{href:e.strDownloadSteamUrl,onClick:t,className:F.a.Button},i.createElement("div",{className:F.a.AnswerText}," ",Object(k.d)("#GotSteam_No")," "),i.createElement("div",{className:F.a.ActionText}," ",Object(k.d)("#GotSteam_No_Download")," "))),i.createElement("div",{className:F.a.Footer},i.createElement(N.cb,{className:F.a.Logo}),Object(k.d)("#GotSteam_Blurb")))))};!function(e){e[e.k_eNone=0]="k_eNone",e[e.k_eSecond=1]="k_eSecond",e[e.k_eMinute=2]="k_eMinute",e[e.k_eHour=3]="k_eHour",e[e.k_eDay=4]="k_eDay",e[e.k_eWeek=5]="k_eWeek",e[e.k_eMonth=6]="k_eMonth",e[e.k_eYear=7]="k_eYear"}(V||(V={}));var H=function(){function e(e){this.packageid=e.packageid,this.enabled=e.enabled,this.name=e.name,this.header_image_url=e.header_image_url,this.formatted_orig_price=e.formatted_orig_price,this.formatted_final_price=e.formatted_final_price,this.discount_percent=e.discount_percent,this.appids=e.appids,this.release_date=e.release_date,this.available_windows=e.available_windows,this.available_mac=e.available_mac,this.available_linux=e.available_linux,this.support_vrhmd=e.support_vrhmd,this.support_vrhmd_only=e.support_vrhmd_only,this.final_price_cents=e.final_price_cents,this.renewal_package_id=e.renewal_package_id,this.renewal_time_units=e.renewal_time_units,this.renewal_time_amount=e.renewal_time_amount}return e.prototype.GetHeaderImageDimension=function(){return this.header_image_url.includes("header_586x192")?{width:586,height:192}:{width:292,height:136}},Object.defineProperty(e.prototype,"type",{get:function(){return"sub"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.packageid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"purchasePackageId",{get:function(){return this.packageid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app_to_run",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is_free",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(),W=new(function(){function e(){this.m_mapPackageInfo=new Map,this.m_mapMissingPackages=new Map,this.m_mapInFlightRequests=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.LazyInit=function(){var e=this;if(!this.m_bLoadedFromConfig){var t=Object(D.g)("packageinfo","application_config");this.ValidateStoreDefault(t)&&("dev"!=D.c.WEB_UNIVERSE&&"beta"!=D.c.WEB_UNIVERSE||console.log("DEV_DEBUG: CPackageInfoStore loading bundles payload: "+t.length),Object(w.E)((function(){return t.forEach((function(t){return e.m_mapPackageInfo.set(Number(t.packageid),new H(t))}))})));var n=Object(D.g)("bundleunknown","application_config");Object(A.a)(n)&&n.forEach((function(t){return e.m_mapMissingPackages.set(t,!0)})),this.m_bLoadedFromConfig=!0}},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].packageid&&"string"==typeof t[0].name)},e.prototype.GetPackageInfo=function(e){return this.LazyInit(),this.m_mapPackageInfo.get(e)},e.prototype.LoadPackageInfo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.LazyInit(),t=e.map((function(e){return a.m_mapInFlightRequests.get(e)})),(n=e.filter((function(e){return e&&!a.m_mapPackageInfo.has(e)&&!a.m_mapMissingPackages.has(e)&&!a.m_mapInFlightRequests.has(e)}))).length?(n.sort(),r=E.a.get(D.c.STORE_BASE_URL+"actions/ajaxresolvepackages",{params:{packageids:n.join(","),cc:D.c.COUNTRY||"US",l:D.c.LANGUAGE,origin:self.origin}}),i=r.then((function(e){var t=e&&e.data;if(t)for(var o={},r=0,i=t;r<i.length;r++){var s=i[r],c=s.appids.join(",");o[c]||(o[c]=1,a.m_mapPackageInfo.set(s.packageid,new H(s)))}n.forEach((function(e){a.m_mapPackageInfo.has(e)||a.m_mapMissingPackages.set(e,!0),a.m_mapInFlightRequests.delete(e)}))})),n.forEach((function(e){return a.m_mapInFlightRequests.set(e,i)})),[4,i]):[3,2];case 1:o.sent(),o.label=2;case 2:return[4,Promise.all(t)];case 3:return o.sent(),[2]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapPackageInfo",void 0),e}());window.g_PackageInfoStore=W;var z,Y=n("k9Zl"),q=n("oZT8"),K=n("Gp1o"),Q=n("0N1H"),Z=n("s+DT"),J=n("UqDm"),X=n("XaMz"),$=n("E7zH"),ee=n("/IDK"),te=n("/SYB"),ne=n("1VtQ"),oe=n("ujHl");function re(e,t,n,o){if(void 0===o&&(o=!1),n)for(var r=0,i=n;r<i.length;r++){var a=i[r];if(o?ot(e,t,a):nt(e,t,a))return a}}!function(e){e.full="",e.background_main="_960x311",e.background_mini="_480x156",e.capsule_main="_400x225",e.spotlight_main="_1054x230"}(z||(z={}));var ie=function(){function e(){this.m_mapClanToImages=new Map,this.m_mapClanImageLoadState=new Map,this.m_mapImageIDToResolution=new Map,this.m_curLocImageGroup=null,this.m_curLocImageGroupType=null,this.m_vecClanImageDragListener=new Array}return e.prototype.BHasImageResolution=function(e){return this.m_mapImageIDToResolution.has(e.imageid)},e.prototype.GetImageResolution=function(e){return this.m_mapImageIDToResolution.get(e.imageid)},e.prototype.SetImageResolution=function(e,t){this.m_mapImageIDToResolution.set(e.imageid,t)},e.GetExtensionStringForFileType=function(e){switch(e){case 1:return".jpg";case 2:return".gif";case 3:return".png"}},e.GetExtensionString=function(t){return e.GetExtensionStringForFileType(t.file_type)||".jpg"},e.GetExtensionTypeFromURL=function(e){return e.endsWith(".jpg")?1:e.endsWith(".png")?3:e.endsWith(".gif")?2:void 0},e.GetHashAndExt=function(t){return t.image_hash+e.GetExtensionString(t)},e.GetThumbHashAndExt=function(t){return t.thumbnail_hash+e.GetExtensionString(t)},e.prototype.AddClanImageDragListener=function(e){-1==this.m_vecClanImageDragListener.indexOf(e)&&this.m_vecClanImageDragListener.push(e)},e.prototype.RemoveClanImageDragListener=function(e){var t=this.m_vecClanImageDragListener.indexOf(e);-1!=t&&this.m_vecClanImageDragListener.splice(t,1)},e.prototype.GetClanImageDragListener=function(){return this.m_vecClanImageDragListener},e.prototype.BHasLoadedClanImages=function(e){return this.m_mapClanToImages.has(e.GetAccountID())},e.prototype.LoadClanImages=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c,l,p=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return r=e.GetAccountID(),Object(X.a)(e&&0!=r,"ClanSteamID missing:"+e),!e||this.m_mapClanToImages.has(r)&&!t?[3,2]:(i={},a=null,s=D.c.COMMUNITY_BASE_URL+"/gid/"+e.ConvertTo64BitString()+"/getimages/",[4,E.a.get(s,{params:i,withCredentials:!0,cancelToken:n?n.token:null})]);case 1:for(a=o.sent(),c=0,l=a.data.images;c<l.length;c++)l[c].clanAccountID=r;Object(w.E)((function(){p.m_mapClanImageLoadState.set(r,{loaded:!0}),p.m_mapClanToImages.set(r,a.data.images)})),o.label=2;case 2:return[2,this.m_mapClanToImages.get(r)]}}))}))},e.prototype.GetLoadState=function(e){return this.m_mapClanImageLoadState.get(e.GetAccountID())},e.prototype.GetClanImages=function(e){var t=this.m_mapClanToImages.get(e.GetAccountID());return t||new Array},e.prototype.GetFilteredClanImages=function(e,t){var n=ce.GetClanImages(e);if(t&&t.length>0){t=t.toLowerCase();for(var o=new Array,r=0,i=n;r<i.length;r++){var a=i[r];a.file_name&&a.file_name.toLowerCase().indexOf(t)>=0&&o.push(a)}return o}return n},e.prototype.GetClanImageByID=function(e,t){var n=e.GetAccountID(),o=this.m_mapClanToImages.get(n);return o?o.find((function(e){return e.imageid==t})):null},e.prototype.GetClanImageByURL=function(e,t){var n=e.GetAccountID(),o=this.m_mapClanToImages.get(n);return o?o.find((function(e){return e.thumb_url==t||e.url==t})):null},e.prototype.GetClanImageByFile=function(e,t){var n=e.GetAccountID(),o=this.m_mapClanToImages.get(n);return o?o.find((function(e){return e.file_name==t.name})):null},e.prototype.GetClanImageByImageHash=function(e,t){var n=e.GetAccountID(),o=this.m_mapClanToImages.get(n);return o?o.find((function(e){return e.image_hash==t})):null},e.prototype.DeleteClanImageByID=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n={sessionid:D.c.SESSIONID,imageid:t},r=e.GetAccountID(),[4,E.a.get(D.c.COMMUNITY_BASE_URL+"/gid/"+e.ConvertTo64BitString()+"/deleteimage/",{params:n})];case 1:return(i=o.sent())&&200==i.status&&1==i.data.success?(a=this.m_mapClanToImages.get(r),(s=a.findIndex((function(e,n,o){return e.imageid==t})))>=0&&a.splice(s,1),[2,i.data]):[2,i.data]}}))}))},e.prototype.DeleteClanImage=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return[2,this.DeleteClanImageByID(e,t.imageid)]}))}))},e.prototype.DetectLanguageFromURL=function(e,t){var n=this.GetClanImageByURL(e,t);return n?this.DetectLanguageFromFilename(n.file_name):null},e.prototype.DetectLangageFromClanImage=function(e){return this.DetectLanguageFromFilename(e.file_name)},e.prototype.DetectLanguageFromFilename=function(e){var t=e.lastIndexOf(".");-1!=t&&(e=e.slice(0,t).toLowerCase());for(var n=0;n<29;++n){if(e.endsWith(Object(Q.c)(n)))return n;if(4==n&&e.endsWith("koreana"))return n}return null},e.GetHashFromHashAndExt=function(e){var t=e.substring(e.lastIndexOf("."));return e.substring(0,e.length-t.length)},e.GetExtensionStringFromHashAndExt=function(e){return e.substring(e.lastIndexOf("."))},e.GenerateArtworkURLFromHashAndExtensions=function(e,t,n,o,r){if(void 0===n&&(n=z.full),n!=z.full||o){var i=t.substring(t.lastIndexOf(".")),a=t.substring(0,t.length-i.length);return o&&"localized_image_group"==r?D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/"+e.GetAccountID()+"/"+a+"/"+Object(Q.c)(o)+i:D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/"+e.GetAccountID()+"/"+a+n+i}return D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/"+e.GetAccountID()+"/"+t},e.GenerateEditableArtworkURLFromHashAndExtension=function(e,t,n){var o=D.c.COMMUNITY_BASE_URL+"gid/"+e.ConvertTo64BitString()+"/showclanimage/?image_hash_and_ext="+t;return n&&(o+="&lang="+n),o},e.GetMimeType=function(e){var t=e.substr(e.length-3);switch(t){case"jpg":return"image/jpeg";case"gif":return"image/gif";case"png":return"image/png"}return"image/"+t},e.prototype.AsyncGetImageResolution=function(t,n,r,i,a){return Object(o.b)(this,void 0,void 0,(function(){var s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:return s=n+e.GetExtensionString({file_type:r}),c=e.GenerateEditableArtworkURLFromHashAndExtension(t,s),[4,this.AsyncGetImageResolutionInternal(c,i,a)];case 1:return[2,o.sent()]}}))}))},e.prototype.AsyncGetImageResolutionInternal=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:r={success:void 0},(i=new Image).crossOrigin="anonymous",i.onerror=function(t){n||(r.err_msg="Load fail on url "+e+" with error: "+Object(te.a)(t).strErrorMsg,console.error(r.err_msg)),r.success=2},i.onload=function(){r.width=i.width,r.height=i.height,Object(X.a)(r.width>0&&r.height>0,"unexpected image resolution discovered for strURL: "+e),r.success=1},i.src=e,t.token.promise.catch((function(e){i.onload=function(){},r.success=52})),a=0,s=100,o.label=1;case 1:return void 0===r.success&&a<s?[4,Object(oe.e)(100)]:[3,3];case 2:return o.sent(),a+=1,[3,1];case 3:return a>=s&&(r.success=16,r.err_msg="We timed out processing images"),[2,r]}}))}))},e.prototype.AsyncOverlay=function(t,n,r,i,a,s){return Object(o.b)(this,void 0,void 0,(function(){var c,l,p,u,m,d;return Object(o.e)(this,(function(o){switch(o.label){case 0:c=void 0,l=void 0,(p=new Image).crossOrigin="anonymous",p.onerror=function(e){c="Load fail on url "+r+" with error: "+Object(te.a)(e).strErrorMsg,console.log(c)},p.onload=function(){var e=new Image;e.crossOrigin="anonymous",e.onerror=function(e){c="Load fail on url "+n+" with error: "+Object(te.a)(e).strErrorMsg,console.log(c)},e.onload=function(){try{var t=document.createElement("canvas"),n=t.getContext("2d");t.width=a,t.height=s,n.drawImage(e,0,0,a,s);var o=(a-p.width)/2,r=(s-p.height)/2;n.drawImage(p,o,r),t.toBlob((function(e){return l=e}),"image/jpeg")}catch(e){c="Failed during image processing for "+i+" with "+e}},e.src=n},p.src=r,u=0,m=100,o.label=1;case 1:return void 0===l&&u<m?[4,Object(oe.e)(100)]:[3,3];case 2:return o.sent(),u+=1,[3,1];case 3:if(u>=m&&void 0===l&&(c="AsyncOverlay - We timed out processing images"),c)throw console.log(c),{success:2,err_msg:c};return[4,new se(t).UploadFile(l,i)];case 4:return[2,(d=o.sent()).image_hash+e.GetExtensionString(d)]}}))}))},e.prototype.BDoesClanImageFileExistsOnCDNOrOrigin=function(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return i=D.c.COMMUNITY_BASE_URL+"gid/"+t.ConvertTo64BitString()+"/hasclanimagefile",a={image_hash_and_ext:n,lang:""+r},[4,E.a.get(i,{params:a,cancelToken:e&&e.token})];case 1:return[2,1==o.sent().data.success]}}))}))},e.prototype.SetPrimaryImageForImageGroup=function(e,t){this.m_curLocImageGroup&&this.m_curLocImageGroup.primaryImage.imageid==e.imageid&&t==this.m_curLocImageGroupType||(this.m_curLocImageGroup={primaryImage:e,localized_images:[]},this.m_curLocImageGroupType=t,this.m_curLocImageGroup.localized_images=Object(J.g)(this.m_curLocImageGroup.localized_images,29,null))},e.prototype.ClearImageGroup=function(){this.m_curLocImageGroup=null,this.m_curLocImageGroupType=null},e.prototype.GetLocalizedImageGroupForEdit=function(){return this.m_curLocImageGroup},e.prototype.GetLocalizedImageGroupForEditAsURL=function(t,n){var o=this.m_curLocImageGroup.primaryImage;return this.m_curLocImageGroup.localized_images[n]?this.m_curLocImageGroup.localized_images[n]:e.GenerateArtworkURLFromHashAndExtensions(t,e.GetHashAndExt(o))},e.prototype.GetLocalizedImageGroupForEditAsImgArray=function(e){return this.GetAllLocalizedGroupImages()},e.prototype.DetermineAvailableLocalizationForGroup=function(t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,c,l=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:for(n=this.m_curLocImageGroup.primaryImage,r=Z.a.InitFromClanID(n.clanAccountID),i=e.GetHashAndExt(n),a=[],s=0;s<29;++s)a.push(this.BDoesClanImageFileExistsOnCDNOrOrigin(t,r,i,s));return[4,Promise.all(a)];case 1:return c=o.sent(),Object(w.E)((function(){for(var t=0;t<29;++t)c[t]&&(l.m_curLocImageGroup.localized_images[t]=e.GenerateArtworkURLFromHashAndExtensions(r,i,z.full,t,l.m_curLocImageGroupType))})),[2]}}))}))},e.prototype.SetLocalizedImageGroupAtLang=function(t,n,o){this.m_curLocImageGroup&&(this.m_curLocImageGroup.localized_images[t]=o?e.GenerateArtworkURLFromHashAndExtensions(n,o,z.full,t,this.m_curLocImageGroupType):null)},e.prototype.AddLocalizeImageUploaded=function(t,n){var o=this.m_curLocImageGroup.primaryImage;if(o.image_hash==t){var r=Z.a.InitFromClanID(o.clanAccountID),i=e.GetHashAndExt(o);this.m_curLocImageGroup.localized_images[n]=e.GenerateArtworkURLFromHashAndExtensions(r,i,z.full,n,this.m_curLocImageGroupType)}},e.prototype.GetAllLocalizedGroupImages=function(){return this.m_curLocImageGroup&&this.m_curLocImageGroup.localized_images||[]},Object(o.c)([w.A],e.prototype,"m_mapClanToImages",void 0),Object(o.c)([w.A],e.prototype,"m_mapClanImageLoadState",void 0),Object(o.c)([w.A],e.prototype,"m_curLocImageGroup",void 0),e}(),ae=function(){function e(e,t,n,o,r){if(this.fileType=0,this.file=e,this.fileType=ie.GetExtensionTypeFromURL(e.name),this.language=t,this.uploadTime=Date.now(),this.img=n,this.localizedImageGroupPrimaryImage=r,o){var i=re(n.width,n.height,o,!1);void 0===i&&(i=re(n.width,n.height,o,!0)),this.type=i||o[0]}this.status="pending",this.ResetImage()}return e.prototype.ResetImage=function(){this.height=this.img.height,this.width=this.img.width,this.dataUrl=this.img.src},e.GetCropFormatDataURLType=function(e){switch(e){case 3:return"image/png";case 1:return"image/jpeg"}},e.prototype.CropImage=function(t,n,r,i,a,s,c){return Object(o.b)(this,void 0,void 0,(function(){var l=this;return Object(o.e)(this,(function(o){return[2,new Promise((function(o,p){var u=e.GetCropFormatDataURLType(c);if(u){var m=document.createElement("canvas");m.width=a,m.height=s;m.getContext("2d").drawImage(l.img,t,n,r,i,0,0,a,s),m.toBlob((function(e){var t=m.toDataURL(u);3!==c&&t.startsWith("data:image/png")?p("Unable to encode into the requested file format"):(l.file=Object(ee.f)(e,l.file.name),l.width=a,l.height=s,l.dataUrl=t,l.uploadTime=Date.now(),o())}))}else p("Invalid format provided")}))]}))}))},e.prototype.IsValidImage=function(t,n,o){var r=0,i=0,a=!1,s=!t||0===t.length||t.includes(this.type);if(n)r=n.width,i=n.height,a=!0;else{var c=tt[this.type];c&&(r=c.width,i=c.height,a=!c.bDisableEnforceDimensions)}var l=this.width>=r&&this.height>=i,p=a?this.width===r&&this.height===i:l,u=o&&o!=this.fileType,m=Boolean(e.GetCropFormatDataURLType(this.fileType)),d="",h=!1;return s?u?d=Object(k.d)("#ImageUpload_InvalidFormat",ie.GetExtensionStringForFileType(o)):p||m?l?!p&&m&&(d=Object(k.d)("#ImageUpload_InvalidDimensions",r,i),h=!0):d=Object(k.d)("#ImageUpload_TooSmall",r,i):d=Object(k.d)("#ImageUpload_InvalidResolution",r,i):d=Object(k.d)("#ImageUpload_InvalidFormatSelected"),{error:d,needsCrop:h}},e.prototype.BIsOriginalMinimumDimensions=function(e){return ot(this.img.width,this.img.height,e)},e.prototype.GetResizeDimension=function(){return e.GetResizeDimension(this.type)},e.GetResizeDimension=function(e){return"background"===e?[{width:960,height:311},{width:480,height:156}]:"capsule"===e||"spotlight"===e?[{width:tt[e].width/2,height:tt[e].height/2}]:void 0},Object(o.c)([w.A],e.prototype,"dataUrl",void 0),Object(o.c)([w.A],e.prototype,"width",void 0),Object(o.c)([w.A],e.prototype,"height",void 0),Object(o.c)([w.A],e.prototype,"type",void 0),Object(o.c)([w.A],e.prototype,"status",void 0),Object(o.c)([w.A],e.prototype,"message",void 0),e}(),se=function(){function e(e){this.m_filesToUpload=[],this.m_filesCompleted=[],this.m_allCancelTokens=new Array,this.m_clanSteamID=e}return e.prototype.AddImage=function(e,t,n,r){return void 0===t&&(t=0),Object(o.b)(this,void 0,void 0,(function(){var i,a=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return i=!1,[4,new Promise((function(o){var s=ce.DetectLanguageFromFilename(e.name)||t,c=new FileReader;c.onload=function(){var t=new Image;t.onload=function(){var c=new ae(e,s,t,n,r);a.m_filesToUpload.push(c),i=!0,o()},t.onerror=function(e){console.error("CClanImageUploader failed to load the image, details",e),i=!1,o()},t.src=c.result.toString()},c.readAsDataURL(e)}))];case 1:return o.sent(),[2,i]}}))}))},e.prototype.AddExistingClanImage=function(e,t,n,r){return void 0===t&&(t=0),Object(o.b)(this,void 0,void 0,(function(){var i,a,s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:return i=ie.GetHashAndExt(e),a=ie.GenerateEditableArtworkURLFromHashAndExtension(this.m_clanSteamID,i),[4,E()({url:a,method:"GET",responseType:"blob"})];case 1:return s=o.sent(),c=Object(ee.f)(s.data,e.file_name),[2,this.AddImage(c,t,n,r)]}}))}))},e.prototype.DeleteUploadImageByIndex=function(e){this.m_filesToUpload.splice(e,1)},e.prototype.DeleteUploadImage=function(e){var t=this.m_filesToUpload.findIndex((function(t){return e.file==t.file&&e.uploadTime==t.uploadTime}));t>=0&&this.DeleteUploadImageByIndex(t)},e.prototype.ClearImages=function(){this.m_filesToUpload=[]},e.prototype.GetFilesUploaded=function(){return this.m_filesCompleted},e.prototype.GetLastErrorFile=function(){return this.m_lastError},e.prototype.GetCompletedFiles=function(){return this.m_filesCompleted.length},e.prototype.GetTotalFiles=function(){return this.m_filesToUpload.length},e.prototype.GetFilesToUpload=function(){return this.m_filesToUpload.map((function(e){return e.file}))},e.prototype.BHasError=function(){return null!=this.m_lastError},e.prototype.BAllDone=function(){return this.m_filesCompleted.length>0&&this.m_filesCompleted.length==this.m_filesToUpload.length},e.prototype.BIsFileCompleted=function(e){return-1!=this.m_filesCompleted.indexOf(e)},e.prototype.UploadAllFiles=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:for(r={},i=0,a=this.m_filesToUpload;i<a.length;i++)s=a[i],this.BIsFileCompleted(s.file)||(c=s.IsValidImage(e,t,n)).error||c.needsCrop||(s.status="uploading",l=s.uploadTime+"/"+s.file.name,r[l]=this.UploadFile(s.file,s.file.name,s.GetResizeDimension(),s.localizedImageGroupPrimaryImage,s.language));return[4,Object($.d)(r)];case 1:return[2,o.sent()]}}))}))},e.prototype.CancelAllUploads=function(){for(var e=0,t=this.m_allCancelTokens;e<t.length;e++){t[e].cancel(Object(k.d)("#ImageUpload_CancelRequest"))}this.m_allCancelTokens=new Array},e.prototype.RetryAllFailedUploads=function(){this.CancelAllUploads(),this.UploadAllFiles()},e.prototype.handleUploadRefresh=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,ce.LoadClanImages(this.m_clanSteamID,!0,e)];case 1:return t.sent(),[2]}}))}))},e.prototype.UploadFile=function(e,t,n,r,i){return Object(o.b)(this,void 0,void 0,(function(){var a,s,c,l,p,u,m;return Object(o.e)(this,(function(o){switch(o.label){case 0:a=null,(s=new FormData).append("clanimage",e,t),s.append("sessionid",D.c.SESSIONID),n&&n.length>0&&s.append("resize",n.map((function(e){return e.width+"x"+e.height})).join(",")),c="/uploadimage/",r&&(c="/ajaxuploadlocalizedimage/",s.append("origimagehash",r.image_hash),s.append("thumbhash",r.thumbnail_hash),s.append("extension",""+r.file_type),s.append("language",""+i)),l=E.a.CancelToken.source(),this.m_allCancelTokens.push(l),p=D.c.COMMUNITY_BASE_URL+"/gid/"+this.m_clanSteamID.ConvertTo64BitString()+c,u={cancelToken:l.token,withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(p,s,u)];case 2:return a=o.sent(),this.m_filesCompleted.push(e),[3,4];case 3:return m=o.sent(),this.m_lastError={file:e,status:m.response?m.response.status:500,message:Object(te.a)(m).strErrorMsg},a=m.response,[3,4];case 4:return r?[3,6]:[4,this.handleUploadRefresh(l)];case 5:o.sent(),o.label=6;case 6:return[2,a.data]}}))}))},e.SendResizeRequest=function(e,t,n,r,i){return Object(o.b)(this,void 0,void 0,(function(){var a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:return a=D.c.COMMUNITY_BASE_URL+"/gid/"+t.ConvertTo64BitString()+"/resizeimage/",(s=new FormData).append("imagehash",n),s.append("extension",r),s.append("resize",i.map((function(e){return e.width+"x"+e.height})).join(",")),s.append("sessionid",D.c.SESSIONID),[4,E.a.post(a,s,{cancelToken:e.token})];case 1:return[2,o.sent().data.count]}}))}))},Object(o.c)([w.A],e.prototype,"m_filesToUpload",void 0),Object(o.c)([w.A],e.prototype,"m_filesCompleted",void 0),Object(o.c)([w.A],e.prototype,"m_lastError",void 0),Object(o.c)([ne.a],e.prototype,"AddImage",null),Object(o.c)([ne.a],e.prototype,"AddExistingClanImage",null),Object(o.c)([ne.a],e.prototype,"DeleteUploadImageByIndex",null),Object(o.c)([ne.a],e.prototype,"DeleteUploadImage",null),Object(o.c)([ne.a],e.prototype,"ClearImages",null),e}(),ce=new ie,le=n("7l8a"),pe=new(function(){function e(){this.m_mapAppIDToInfo=new Map,this.m_mapAppIDToDLCs=new Map,this.m_mapAppMissings=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.GetNumAppLinkLoaded=function(){return this.m_mapAppIDToInfo.size},e.prototype.GetAllAppInfos=function(){return this.m_mapAppIDToInfo},e.prototype.GetMissingAppIDs=function(){return this.m_mapAppMissings},e.prototype.LazyInit=function(){var e=this;if(!this.m_bLoadedFromConfig){if(!Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD&&document.getElementById("application_config")){var t=Object(D.g)("appcapsulestore","application_config");this.ValidateAppConfig(t)&&t.forEach((function(t){e.m_mapAppIDToInfo.set(t.appid,new le.b(t.appid,t))}))}this.m_bLoadedFromConfig=!0}},e.prototype.ValidateAppConfig=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].appid&&"number"==typeof t[0].success&&1===t[0].success)},e.BHasAllAppCasules=function(e){for(var t=0;t<e.length;++t)if(!pe.m_mapAppIDToInfo.has(e[t]))return!1;return!0},e.prototype.EnsureStoreCapsuleInfoLoaded=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return this.LazyInit(),this.m_mapAppIDToInfo.has(e)?[3,2]:(t=new le.b(e),this.m_mapAppIDToInfo.set(e,t),e&&e>0?[4,t.HintLoadBroadcastAppData((D.c.IN_CLIENT?"library-":Object(D.e)()+"-")+"partner-events")]:[3,2]);case 1:n.sent().BIsLoaded()||this.m_mapAppMissings.set(e,!0),n.label=2;case 2:return[2,this.m_mapAppIDToInfo.get(e)]}}))}))},e.prototype.GetStoreCapsuleInfo=function(e){if(this.LazyInit(),!this.m_mapAppIDToInfo.has(e)){var t=new le.b(e);return this.m_mapAppIDToInfo.set(e,t),e&&e>0&&t.HintLoadBroadcastAppData((D.c.IN_CLIENT?"library-":Object(D.e)()+"-")+"partner-events"),t}return this.m_mapAppIDToInfo.get(e)},e.prototype.BIsAppidLoaded=function(e){return this.LazyInit(),!!this.m_mapAppIDToInfo.has(e)&&this.m_mapAppIDToInfo.get(e).BIsLoaded()},e.prototype.LoadDLCForAppID=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.LazyInit(),this.m_mapAppIDToDLCs.has(e)||0==e)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),n={origin:self.origin,cc:D.c.COUNTRY||"US",l:D.c.LANGUAGE},r=D.c.STORE_BASE_URL+"dlc/"+e+"/ajaxgetdlclist",[4,E.a.get(r,{params:n,cancelToken:t.token})];case 2:return i=o.sent(),a=Array(),i.data.dlcs&&i.data.dlcs.forEach((function(e){a.push({appid:e.appid,name:e.name})})),this.m_mapAppIDToDLCs.set(e,a),[3,4];case 3:return s=o.sent(),console.log(Object(te.a)(s)),console.error(s),[3,4];case 4:return[2,this.m_mapAppIDToDLCs.has(e)?this.m_mapAppIDToDLCs.get(e):[]]}}))}))},e.prototype.BatchLoadAppCapsules=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r=this;return Object(o.e)(this,(function(i){switch(i.label){case 0:e.sort(),t=[],0,e.forEach((function(e){r.m_mapAppIDToInfo.has(e)||0==e||r.m_mapAppMissings.has(e)||t.push(e)})),n=function(){var e,n,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return 20,e=Math.min(20,t.length),n=t.slice(0,e),t=t.slice(e),i=new Array,n.forEach((function(e){i.push(r.EnsureStoreCapsuleInfoLoaded(e))})),[4,Promise.all(i)];case 1:return o.sent(),[2]}}))},i.label=1;case 1:return t.length>0?[5,n()]:[3,3];case 2:return i.sent(),[3,1];case 3:return[2]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapAppIDToInfo",void 0),Object(o.c)([w.A],e.prototype,"m_mapAppIDToDLCs",void 0),Object(o.c)([w.A],e.prototype,"m_mapAppMissings",void 0),e}());window.g_AppCapsuleStore=pe;var ue=n("9Cmb"),me={bBroadcastEnabled:!1,broadcastChatSetting:"hide",default_broadcast_title:"#Broadcast_default_title_dev",localized_broadcast_title:new Array(29),localized_broadcast_left_image:new Array(29),localized_broadcast_right_image:new Array(29),broadcast_whitelist:[]};function de(e){switch(e){case 29:case 27:case 2:case 4:case 5:case 6:case 8:case 7:case 9:case 11:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 35:case 25:case 26:case 31:case 32:case 1:case 34:return!0}return!1}var he,fe=n("ljkD"),_e=n.n(fe),ge=n("GxRc"),be=n("2wX0"),ve=n.n(be),ye=n("Jdiq"),Se=n("QxgC"),Ce=n("QAot"),Oe=n("Hk8Z"),Ie=n("zm/W"),Ee=n.n(Ie),we=n("3/mw"),Ae=n.n(we),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.performSearch=function(e){var t=Array();return this.props.supportBBCodes.forEach((function(n){n.indexOf(e)>=0&&t.push({name:n})})),t},t.prototype.getSelection=function(e){return"["+e.name+"][/"+e.name+"]"},t.prototype.getKey=function(e){return e.name},t.prototype.renderMatch=function(e){return a.a.createElement("div",{key:e.name,className:Object(R.a)(Ee.a.BBCodeSuggestion)},a.a.createElement("div",{className:Ee.a.BBCode},e.name),"[",e.name,"]...[/",e.name,"]")},t.prototype.renderNoMatchMessage=function(){return a.a.createElement("div",{key:"nomatches",className:Object(R.a)(Ae.a.mentionSearchOption,Ae.a.noMatches)},Object(k.d)("#Bbcode_No_Match"))},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(Oe.a),Te=function(e){function t(t){var n=e.call(this,t)||this;return n.descTextAreaRef=i.createRef(),n.m_bDisabled=!0,n.state={mentionSearch:void 0,activeSuggestSearchType:void 0},n}return Object(o.d)(t,e),t.prototype.BindMentionDialog=function(e){this.m_MentionDialog=e},t.prototype.OnKeyDown=function(e){this.state.activeSuggestSearchType&&this.m_MentionDialog&&!e.shiftKey&&!e.ctrlKey&&this.m_MentionDialog.BHandleKeyPress(e.keyCode)?e.preventDefault():8!=e.keyCode&&46!=e.keyCode||(this.m_iMentionSearchCancelledOffset=void 0)},t.prototype.FindMatchOpener=function(e,t,n){for(var o=n-1;o>=0;o--){if(t[o]==e)return o;if(" "==t[o]||"\n"==t[o])break}},t.prototype.ReplaceSuggestedText=function(e,t){var n=this.descTextAreaRef.current.selectionStart,o=this.descTextAreaRef.current.value,r=this.FindMatchOpener(e,o,n);if(void 0===r&&"@"==e&&(r=this.FindMatchOpener("＠",o,n)),void 0!==r){var i=o.substr(0,r);i+=t,(n>=o.length||" "!=o[n])&&(i+=" ");var a=i.length;i+=o.substr(n),this.descTextAreaRef.current.value=i,this.descTextAreaRef.current.selectionStart=this.descTextAreaRef.current.selectionEnd=a,this.props.fnSetText(i),this.FocusTextInput()}},t.prototype.OnFocus=function(e){this.UpdateAutoSearchState()},t.prototype.OnKeyPress=function(e){this.UpdateAutoSearchState()},t.prototype.OnClick=function(e){this.UpdateAutoSearchState()},t.prototype.ClearMentionSearchState=function(){this.m_iMentionSearchStartOffset=void 0,this.state.activeSuggestSearchType&&this.setState({activeSuggestSearchType:void 0,mentionSearch:void 0})},t.prototype.OnEmoticonSuggestionSelected=function(e,t){if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText(":",":"+t+":"),this.ClearMentionSearchState()},t.prototype.OnBBCodeSuggestionSelected=function(e,t){if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText("[",t),this.ClearMentionSearchState()},t.prototype.FocusTextInput=function(){this.descTextAreaRef.current&&this.descTextAreaRef.current.focus()},t.prototype.UpdateAutoSearchState=function(){var e=this.descTextAreaRef.current;if(e&&!this.m_bDisabled)if(e.selectionStart==e.selectionEnd&&e.selectionStart){for(var t=e.selectionStart,n=e.value,o=void 0,r=void 0,i=t-1;i>=0;i--){var a=i>0?n[i-1]:void 0;if(this.props.emoticonStore&&":"==n[i]&&n.length>2){a&&" "!=a&&"\n"!=a&&":"!=a||(o=i,r="Emoticon");break}if("["==n[i]&&(i+1>n.length||"/"!=n[i+1])){a&&" "!=a&&"\n"!=a&&"]"!=a||(o=i,r="BBCode");break}if(" "==n[i]||"\n"==n[i])break}if(void 0!==o&&o!==this.m_iMentionSearchCancelledOffset){var s=n.substr(o+1,t-o-1);this.m_iMentionSearchStartOffset=o,this.setState({activeSuggestSearchType:r,mentionSearch:s})}else this.ClearMentionSearchState()}else this.ClearMentionSearchState()},t.prototype.GetTextAreaRef=function(){return this.descTextAreaRef},t.prototype.GetTextAreaCurrent=function(){return this.descTextAreaRef.current},t.prototype.render=function(){var e=this.props,t=e.emoticonStore,n=e.supportBBCodes,r=(e.fnSetText,Object(o.f)(e,["emoticonStore","supportBBCodes","fnSetText"])),a=void 0;switch(this.state.activeSuggestSearchType){case"Emoticon":a=i.createElement(Ce.a,{emoticonStore:t,emoticonHoverStore:ye.b,strSearch:this.state.mentionSearch,nMinimumSearchLengthBeforeAutoSelection:2,onSuggestionSelected:this.OnEmoticonSuggestionSelected,ref:this.BindMentionDialog});break;case"BBCode":a=i.createElement(De,{supportBBCodes:n,strSearch:this.state.mentionSearch,nMinimumSearchLengthBeforeAutoSelection:2,onSuggestionSelected:this.OnBBCodeSuggestionSelected,ref:this.BindMentionDialog})}return i.createElement(i.Fragment,null,a,i.createElement("textarea",Object(o.a)({},r,{ref:this.descTextAreaRef,onKeyDown:this.OnKeyDown,onKeyUp:this.OnKeyPress,onFocus:this.OnFocus,onClick:this.OnClick})))},Object(o.c)([ne.a],t.prototype,"BindMentionDialog",null),Object(o.c)([ne.a],t.prototype,"OnKeyDown",null),Object(o.c)([ne.a],t.prototype,"OnFocus",null),Object(o.c)([ne.a],t.prototype,"OnKeyPress",null),Object(o.c)([ne.a],t.prototype,"OnClick",null),Object(o.c)([ne.a],t.prototype,"OnEmoticonSuggestionSelected",null),Object(o.c)([ne.a],t.prototype,"OnBBCodeSuggestionSelected",null),Object(o.c)([ne.a],t.prototype,"FocusTextInput",null),Object(o.c)([ne.a],t.prototype,"GetTextAreaRef",null),Object(o.c)([ne.a],t.prototype,"GetTextAreaCurrent",null),t}(i.Component),Me=function(e){function t(t){var o=e.call(this,t)||this;return o.m_cancelSignal=E.a.CancelToken.source(),o.state={formattingHelp:{__html:n.s_formattingHelp.has(t.formatType)?n.s_formattingHelp.get(t.formatType):""}},o}var n;return Object(o.d)(t,e),n=t,t.prototype.componentDidMount=function(){var e=this;this.AjaxGetFormattingHelp().catch((function(t){e.setState(Object(te.a)(t))}))},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("FormattingHelpWidget component unmounted")},t.GetHelpURL=function(e,t){return D.c.COMMUNITY_BASE_URL+"comment/"+e+"/formattinghelp"+(t?"?ajax=1":"")},t.prototype.AjaxGetFormattingHelp=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(o){switch(o.label){case 0:return""!=this.state.formattingHelp.__html?[3,2]:(e={sessionid:D.c.SESSIONID},t=void 0,[4,E.a.get(n.GetHelpURL(this.props.formatType,!0),{params:e,cancelToken:this.m_cancelSignal.token})]);case 1:t=o.sent(),n.s_formattingHelp.set(this.props.formatType,t.data),this.setState({formattingHelp:{__html:t.data}}),o.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){return this.state.strErrorMsg?i.createElement("div",null,this.state.strErrorMsg,i.createElement("br",null),this.state.errorCode):""==this.state.formattingHelp.__html?i.createElement(ge.a,null):i.createElement(L.b,{strTitle:Object(k.d)("#EventEditor_FormattingHelp_GetHelpLink"),strDescription:"",closeModal:this.props.closeModal,onOK:this.props.closeModal,onCancel:this.props.closeModal,bAlertDialog:!0},i.createElement("div",{dangerouslySetInnerHTML:this.state.formattingHelp}))},t.s_formattingHelp=new Map,t=n=Object(o.c)([r.a],t)}(i.Component),je=n("jIDk"),Le=n.n(je),Ge=function(e){function t(t){var n=e.call(this,t)||this;return n.descAutoTextAreaRef=i.createRef(),n.state={bShowDragTarget:!1},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){ce.AddClanImageDragListener(this.ClanImageDragListener)},t.prototype.componentWillUnmount=function(){ce.RemoveClanImageDragListener(this.ClanImageDragListener)},t.prototype.ClanImageDragListener=function(e,t){this.state.bShowDragTarget!=t&&this.setState({bShowDragTarget:t})},t.prototype.onFocus=function(e){e&&e.target.select()},t.prototype.InsertText=function(e){Ne.replaceSelection(this.GetTextAreaRef().current,e)},t.prototype.OnTextAreaDropListener=function(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items[0]){var t=e.dataTransfer.getData("text");if(t&&t.length>0){var n=D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/";if(t.startsWith(n)){var o="[img]{STEAM_CLAN_IMAGE}/"+t.substr(n.length)+"[/img]";Ne.replaceSelection(this.GetTextAreaRef().current,o)}}}},t.prototype.GetTextAreaRef=function(){return this.descAutoTextAreaRef&&this.descAutoTextAreaRef.current?this.descAutoTextAreaRef.current.GetTextAreaRef():void 0},t.prototype.render=function(){return i.createElement(i.Fragment,null,i.createElement(Re,{pathToImages:D.c.COMMUNITY_CDN_URL+"public/images/sharedfiles/guides/",fnTextareaRef:this.GetTextAreaRef,emoticonStore:this.props.emoticonStore,supportBBCodes:this.props.limitBBCode?this.props.limitBBCode:y.d,bSupportHTMLImport:this.props.bSupportHTMLImport,showFormatHelp:this.props.showFormatHelp,bEmbeddedInDialog:this.props.bEmbeddedInDialog}),i.createElement("div",{className:Object(R.a)(_e.a.DescriptionCtn,this.state.bShowDragTarget?_e.a.DragTarget:"")},i.createElement(Te,{cols:40,rows:42,maxLength:32e3,className:Object(R.a)(_e.a.DefaultEditor,this.props.classNameForTextArea?this.props.classNameForTextArea:""),placeholder:this.props.strPlaceholder,ref:this.descAutoTextAreaRef,value:this.props.fnGetCurText(),onChange:this.props.fnOnTextChange,onDrop:this.OnTextAreaDropListener,emoticonStore:this.props.emoticonStore,fnSetText:this.props.fnSetText,supportBBCodes:this.props.limitBBCode?this.props.limitBBCode:y.d})))},Object(o.c)([ne.a],t.prototype,"ClanImageDragListener",null),Object(o.c)([ne.a],t.prototype,"onFocus",null),Object(o.c)([ne.a],t.prototype,"OnTextAreaDropListener",null),Object(o.c)([ne.a],t.prototype,"GetTextAreaRef",null),t=Object(o.c)([r.a],t)}(i.Component),Ne=function(){function e(){}return e.BIsFireFox=function(){return Boolean(new RegExp(/Firefox\/([0-9\.]+)(?:\s|$)/i).exec(navigator.userAgent))},e.replaceSelection=function(t,n){var o=t.selectionStart;t.focus(),e.InsertTextAtSelect(n,t),t.setSelectionRange(o,o+n.length)},e.getSelectedString=function(e){return e.value.substr(e.selectionStart,e.selectionEnd-e.selectionStart)},e.wrapBBCode=function(t,n,o){var r=e.getSelectedString(o),i="";i=0==r.indexOf(t)&&r.lastIndexOf(n)==r.length-n.length?r.substr(t.length,r.length-t.length-n.length):t+r+n,e.replaceSelection(o,i)},e.append=function(t,n){n&&(n.focus(),n.setSelectionRange(n.value.length,n.value.length),e.InsertTextAtSelect(t,n))},e.overwrite=function(t,n){n&&(n.focus(),document.execCommand("selectAll",!1,t),e.BIsFireFox()?n.value="":document.execCommand("delete",!1),e.InsertTextAtSelect(t,n))},e.InsertTextAtSelect=function(t,n){e.BIsFireFox()&&n.setRangeText?n.setRangeText(t):document.execCommand("insertText",!1,t)},e}(),Re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_linkPopupRef=i.createRef(),t}return Object(o.d)(t,e),t.prototype.onBold=function(){Ne.wrapBBCode("[b]","[/b]",this.props.fnTextareaRef().current)},t.prototype.onItalics=function(){Ne.wrapBBCode("[i]","[/i]",this.props.fnTextareaRef().current)},t.prototype.onUnderline=function(){Ne.wrapBBCode("[u]","[/u]",this.props.fnTextareaRef().current)},t.prototype.onStrikeThrough=function(){Ne.wrapBBCode("[strike]","[/strike]",this.props.fnTextareaRef().current)},t.prototype.onHeader=function(){Ne.wrapBBCode("[h1]","[/h1]",this.props.fnTextareaRef().current)},t.prototype.onHeader2=function(){Ne.wrapBBCode("[h2]","[/h2]",this.props.fnTextareaRef().current)},t.prototype.onHeader3=function(){Ne.wrapBBCode("[h3]","[/h3]",this.props.fnTextareaRef().current)},t.prototype.onUnorderedList=function(){this.handleList("list")},t.prototype.onOrderedList=function(){this.handleList("olist")},t.prototype.handleList=function(e){var t=this.props.fnTextareaRef().current,n="["+e+"]\n",o="[/"+e+"]";if(t.selectionStart==t.selectionEnd)Ne.wrapBBCode(n+"[*]","\n"+o,t);else{var r=n+Ne.getSelectedString(t).split("\n").map((function(e){return(e.match(/\*+\s/)?"[*]":"[*] ")+e})).join("\n")+"\n"+o;Ne.replaceSelection(t,r)}},t.prototype.OnAddLink=function(e){Object(G.c)(i.createElement(Fe,{textareaRef:this.props.fnTextareaRef()}),Object(ee.s)(e))},t.prototype.ShowHelpDialog=function(e){this.props.showFormatHelp&&Object(G.c)(i.createElement(Me,{formatType:this.props.showFormatHelp}),Object(ee.s)(e))},t.prototype.OnConvertHTMLToBBCodeDialog=function(e){Object(G.c)(i.createElement(Ve,{textareaRef:this.props.fnTextareaRef()}),Object(ee.s)(e))},t.prototype.OnOpenYoutubeDialog=function(e){var t=D.c.IMG_URL+"applications/community/";Object(G.c)(i.createElement(Pe,{textareaRef:this.props.fnTextareaRef(),pathToImages:t}),Object(ee.s)(e))},t.prototype.OnOpenImageDialog=function(e){Object(G.c)(i.createElement(xe,{textareaRef:this.props.fnTextareaRef()}),Object(ee.s)(e))},t.prototype.OnEmoticonSelected=function(e,t){void 0===t&&(t=!1);var n="ː"+e+"ː";Ne.replaceSelection(this.props.fnTextareaRef().current,n),this.props.fnTextareaRef().current.focus()},t.prototype.BSupports=function(e){return this.props.supportBBCodes.findIndex((function(t){return t==e}))>=0},t.prototype.render=function(){var e=this.props,t=e.showFormatHelp,n=e.bEmbeddedInDialog,o=e.bSupportHTMLImport,r=e.pathToImages,a=void 0;return t&&(a=n?i.createElement("span",{className:Object(R.a)("ttip",_e.a.ActionGetHelp),"data-tooltip-text":Object(k.d)("#EventEditor_FormattingHelp_GetHelpLink")},i.createElement("a",{href:(D.c.IN_CLIENT?"steam://openurl/":"")+Me.GetHelpURL(this.props.showFormatHelp,!1),target:D.c.IN_CLIENT?void 0:"_blank"},i.createElement("img",{src:r+"/action_help.png"})," ",Object(k.d)("#EventEditor_FormattingHelp_GetHelpLink"))):i.createElement("span",{onClick:this.ShowHelpDialog,className:Object(R.a)("ttip",_e.a.ActionGetHelp),"data-tooltip-text":Object(k.d)("#EventEditor_FormattingHelp_GetHelpLink")},i.createElement("img",{src:r+"/action_help.png"})," ",Object(k.d)("#EventEditor_FormattingHelp_GetHelpLink"))),i.createElement("div",{className:_e.a.TextEditorToolBarContainer},this.BSupports("b")&&i.createElement("span",{onClick:this.onBold,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Bold")},i.createElement("img",{src:this.props.pathToImages+"/format_bold.png"})),this.BSupports("u")&&i.createElement("span",{onClick:this.onUnderline,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Underline")},i.createElement("img",{src:this.props.pathToImages+"/format_underline.png"})),this.BSupports("i")&&i.createElement("span",{onClick:this.onItalics,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Italics")},i.createElement("img",{src:this.props.pathToImages+"/format_italic.png"})),this.BSupports("strike")&&i.createElement("span",{onClick:this.onStrikeThrough,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_StrikeThrough")},i.createElement("img",{src:this.props.pathToImages+"/format_strike.png"})),Boolean(this.BSupports("url")&&!n)&&i.createElement("span",{onClick:this.OnAddLink,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Link")},i.createElement("img",{src:this.props.pathToImages+"/format_link.png"})),this.BSupports("list")&&i.createElement("span",{onClick:this.onUnorderedList,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Unordered")},i.createElement("img",{src:this.props.pathToImages+"/format_bullet.png"})),this.BSupports("olist")&&i.createElement("span",{onClick:this.onOrderedList,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Ordered")},i.createElement("img",{src:this.props.pathToImages+"/format_numbered.png"})),this.BSupports("h1")&&i.createElement("span",{onClick:this.onHeader,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Header")},i.createElement("img",{src:this.props.pathToImages+"/format_header1.png"})),this.BSupports("h2")&&i.createElement("span",{onClick:this.onHeader2,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Header2")},i.createElement("img",{src:this.props.pathToImages+"/format_header2.png"})),this.BSupports("h3")&&i.createElement("span",{onClick:this.onHeader3,className:"ttip","data-tooltip-text":Object(k.d)("#Editor_Header3")},i.createElement("img",{src:this.props.pathToImages+"/format_header3.png"})),this.BSupports("previewyoutube")&&i.createElement("span",{onClick:this.OnOpenYoutubeDialog,"data-tooltip-text":Object(k.d)("#EventEditor_InsertYouTube")},i.createElement("img",{src:Le.a})),this.props.emoticonStore&&i.createElement(Se.a,{title:" ",ttip:Object(k.d)("#Editor_Emoticon"),className:Object(R.a)(_e.a.EmoteOuter),disabled:!1,OnEmoticonSelected:this.OnEmoticonSelected,rtLastAckedNewEmoticons:Number.MAX_VALUE,emoticonStore:this.props.emoticonStore,emoticonHoverStore:ye.b,useImg:this.props.pathToImages+"/format_emote.png",contextOptions:{bOverlapHorizontal:!0,bDisablePopTop:!0}}),Boolean(this.BSupports("img")&&!n)&&i.createElement("span",{onClick:this.OnOpenImageDialog,"data-tooltip-text":Object(k.d)("#EventEditor_InsertImage")},i.createElement("img",{src:this.props.pathToImages+"/insert_img.png"})),Boolean(o&&!n)&&i.createElement("span",{onClick:this.OnConvertHTMLToBBCodeDialog,className:_e.a.ActionImportHTML,"data-tooltip-text":Object(k.d)("#EventEditor_ImportFromHTML_ttip")},Object(k.d)("#EventEditor_ImportHTML")),a)},Object(o.c)([ne.a],t.prototype,"onBold",null),Object(o.c)([ne.a],t.prototype,"onItalics",null),Object(o.c)([ne.a],t.prototype,"onUnderline",null),Object(o.c)([ne.a],t.prototype,"onStrikeThrough",null),Object(o.c)([ne.a],t.prototype,"onHeader",null),Object(o.c)([ne.a],t.prototype,"onHeader2",null),Object(o.c)([ne.a],t.prototype,"onHeader3",null),Object(o.c)([ne.a],t.prototype,"onUnorderedList",null),Object(o.c)([ne.a],t.prototype,"onOrderedList",null),Object(o.c)([ne.a],t.prototype,"OnAddLink",null),Object(o.c)([ne.a],t.prototype,"ShowHelpDialog",null),Object(o.c)([ne.a],t.prototype,"OnConvertHTMLToBBCodeDialog",null),Object(o.c)([ne.a],t.prototype,"OnOpenYoutubeDialog",null),Object(o.c)([ne.a],t.prototype,"OnOpenImageDialog",null),Object(o.c)([ne.a],t.prototype,"OnEmoticonSelected",null),t=Object(o.c)([r.a],t)}(i.Component);!function(e){e.left="leftthumb",e.right="rightthumb",e.full="full",e.summary="summary"}(he||(he={}));var ke=/^[^v]+v=(.{11}).*/,Be=/.*youtu\.be\/(.{11}).*/;var Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={youtubeInput:"",alignment:he.left},t}return Object(o.d)(t,e),t.prototype.OnYoutubeInsertLink=function(){var e=this.state.youtubeInput,t=-1!=e.indexOf("youtube.com"),n=-1!=e.indexOf("youtu.be");if(0!=e.length&&(t||n)){var o=t?e.replace(ke,"$1"):e.replace(Be,"$1");if(null!=o){if(this.state.alignment==he.summary){var r="https://www.youtube.com/watch?v="+o;Ne.wrapBBCode(r,"",this.props.textareaRef.current)}else{var i="[previewyoutube="+o+";"+this.state.alignment+"]";Ne.wrapBBCode(i,"[/previewyoutube]",this.props.textareaRef.current)}this.setState({youtubeInput:"",alignment:he.left})}else alert(Object(k.d)("#EventEditor_InsertYouTube_NoURL"))}else alert(Object(k.d)("#EventEditor_InsertYouTube_NoURL"))},t.prototype.OnUrlChange=function(e){this.state.youtubeInput!=e.target.value&&this.setState({youtubeInput:e.target.value})},t.prototype.OnLeftSelected=function(){this.setState({alignment:he.left})},t.prototype.OnRightSelected=function(){this.setState({alignment:he.right})},t.prototype.OnFullSelected=function(){this.setState({alignment:he.full})},t.prototype.OnSummarySelected=function(){this.setState({alignment:he.summary})},t.prototype.OnOuterDivClickPassDown=function(e){},t.prototype.render=function(){return i.createElement(L.b,{strTitle:Object(k.d)("#EventEditor_InsertYouTube"),strDescription:"",closeModal:this.props.closeModal,onCancel:this.props.closeModal,onOK:this.OnYoutubeInsertLink,strOKButtonText:Object(k.d)("#EventEditor_InsertYouTube")},i.createElement("div",{className:_e.a.YouTubeInput},i.createElement("div",{className:"DialogInputLabelGroup"},i.createElement("label",null,i.createElement("div",{className:"DialogLabel"},Object(k.d)("#EventEditor_InsertYouTube_URL")),i.createElement("div",{className:"DialogInput_Wrapper"},i.createElement("input",{className:"DialogInput DialogTextInputBase",ref:function(e){return e&&e.focus()},type:"text",value:this.state.youtubeInput,onChange:this.OnUrlChange,placeholder:Object(k.d)("#EventEditor_InsertYouTube_Placholder")})))),i.createElement("div",{className:"DialogInputLabelGroup"},i.createElement("div",{className:"DialogLabel"},Object(k.d)("#EventEditor_InsertYouTube_Position")),i.createElement("div",{className:_e.a.YouTubePreviewInsertOption,onClick:this.OnOuterDivClickPassDown},i.createElement("input",{type:"radio",name:"YouTubePreviewInsertType",id:he.left,value:he.left,checked:this.state.alignment==he.left,onChange:this.OnLeftSelected}),i.createElement("label",{htmlFor:he.left},i.createElement("span",null,Object(k.d)("#EventEditor_InsertYouTube_Left")))),i.createElement("div",{className:_e.a.YouTubePreviewInsertOption,onClick:this.OnOuterDivClickPassDown},i.createElement("input",{type:"radio",name:"YouTubePreviewInsertType",id:he.right,value:he.right,checked:this.state.alignment==he.right,onChange:this.OnRightSelected}),i.createElement("label",{htmlFor:he.right},i.createElement("span",null,Object(k.d)("#EventEditor_InsertYouTube_Right")))),i.createElement("div",{className:_e.a.YouTubePreviewInsertOption,onClick:this.OnOuterDivClickPassDown},i.createElement("input",{type:"radio",name:"YouTubePreviewInsertType",id:he.full,value:he.full,checked:this.state.alignment==he.full,onChange:this.OnFullSelected}),i.createElement("label",{htmlFor:he.full},i.createElement("span",null,Object(k.d)("#EventEditor_InsertYouTube_Full")))),i.createElement("div",{className:_e.a.YouTubePreviewInsertOption,onClick:this.OnOuterDivClickPassDown},i.createElement("input",{type:"radio",name:"YouTubePreviewInsertType",id:he.summary,value:he.summary,checked:this.state.alignment==he.summary,onChange:this.OnSummarySelected}),i.createElement("label",{htmlFor:he.summary},i.createElement("span",null,Object(k.d)("#EventEditor_InsertYouTube_Summary")))))))},Object(o.c)([ne.a],t.prototype,"OnYoutubeInsertLink",null),Object(o.c)([ne.a],t.prototype,"OnUrlChange",null),Object(o.c)([ne.a],t.prototype,"OnLeftSelected",null),Object(o.c)([ne.a],t.prototype,"OnRightSelected",null),Object(o.c)([ne.a],t.prototype,"OnFullSelected",null),Object(o.c)([ne.a],t.prototype,"OnSummarySelected",null),Object(o.c)([ne.a],t.prototype,"OnOuterDivClickPassDown",null),t=Object(o.c)([r.a],t)}(i.Component),Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={textToDisplay:"",strURL:""},t}var n;return Object(o.d)(t,e),n=t,t.prototype.LoadFromTextArea=function(){var e=this.props.textareaRef;if(e&&e.current){var t=Ne.getSelectedString(e.current),o=n.m_regExp.exec(t);o?this.setState({strURL:o[1],textToDisplay:o[2]}):this.setState({textToDisplay:t})}},t.prototype.componentDidMount=function(){this.LoadFromTextArea()},t.prototype.onLinkTitleUpdate=function(e){this.setState({textToDisplay:e.target.value})},t.prototype.onLinkURLUpdate=function(e){this.setState({strURL:e.target.value})},t.prototype.onInsertLink=function(){var e=this.state,t="[url="+e.strURL+"]"+e.textToDisplay+"[/url]";Ne.replaceSelection(this.props.textareaRef.current,t)},t.prototype.render=function(){return i.createElement(L.b,{strTitle:Object(k.d)("#Editor_Link"),strDescription:"",closeModal:this.props.closeModal,onOK:this.onInsertLink,onCancel:this.props.closeModal,strOKButtonText:Object(k.d)("#EventEditor_InsertLinkURL")},i.createElement("div",{className:_e.a.EventEditorLinkInput},i.createElement("div",{className:"DialogInputLabelGroup"},i.createElement("label",null,i.createElement("div",{className:"DialogLabel"},Object(k.d)("#EventEditor_LinkDescription")),i.createElement("div",{className:"DialogInput_Wrapper"},i.createElement("input",{type:"text",onChange:this.onLinkTitleUpdate,value:this.state.textToDisplay,className:"DialogInput DialogTextInputBase"})))),i.createElement("div",{className:"DialogInputLabelGroup"},i.createElement("label",null,i.createElement("div",{className:"DialogLabel"},Object(k.d)("#EventEditor_LinkURL")),i.createElement("div",{className:"DialogInput_Wrapper"},i.createElement("input",{type:"text",onChange:this.onLinkURLUpdate,value:this.state.strURL,className:"DialogInput DialogTextInputBase"}))))))},t.m_regExp=new RegExp(/\[url=([^\]]*)\]([^\[\]]+)\[\/url\]/i),Object(o.c)([ne.a],t.prototype,"onLinkTitleUpdate",null),Object(o.c)([ne.a],t.prototype,"onLinkURLUpdate",null),Object(o.c)([ne.a],t.prototype,"onInsertLink",null),t=n=Object(o.c)([r.a],t)}(i.Component),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={imgURL:"",anchorURL:""},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.refFirstInput&&this.refFirstInput.current.focus()},t.prototype.OnImageInsert=function(){var e=this.state,t=e.anchorURL,n=e.imgURL,o="",r="";t&&t.length>0&&(o+="[url="+t+"]",r="[/url]"+r),o+="[img]"+n,r="[/img]"+r,Ne.wrapBBCode(o,r,this.props.textareaRef.current)},t.prototype.OnImageURLChange=function(e){this.state.imgURL!=e.target.value&&this.setState({imgURL:e.target.value})},t.prototype.OnAnchorURLChange=function(e){this.state.anchorURL!=e.target.value&&this.setState({anchorURL:e.target.value})},t.prototype.render=function(){var e=this.state,t=e.imgURL,n=e.anchorURL;return i.createElement(L.b,{strTitle:Object(k.d)("#EventEditor_InsertImage_Title"),strDescription:"",closeModal:this.props.closeModal,onCancel:this.props.closeModal,onOK:this.OnImageInsert,strOKButtonText:Object(k.d)("#EventEditor_InsertImage_Title")},i.createElement("div",{className:_e.a.EventEditorLinkInput},i.createElement("p",null,Object(k.d)("#EventEditor_InsertImage_Desc")),i.createElement("div",{className:"DialogInputLabelGroup"},i.createElement("label",null,i.createElement("div",{className:"DialogLabel"},Object(k.d)("#EventEditor_InsertImage_URL")),i.createElement("div",{className:"DialogInput_Wrapper"},i.createElement("input",{className:"DialogInput DialogTextInputBase",type:"text",value:t,onChange:this.OnImageURLChange,placeholder:Object(k.d)("#EventEditor_InsertImage_Placeholder"),ref:this.refFirstInput})))),i.createElement("div",{className:"DialogInputLabelGroup"},i.createElement("label",null,i.createElement("div",{className:"DialogLabel"},Object(k.d)("#EventEditor_InsertImage_Anchor")),i.createElement("div",{className:"DialogInput_Wrapper"},i.createElement("input",{className:"DialogInput DialogTextInputBase",type:"text",value:n,onChange:this.OnAnchorURLChange,placeholder:Object(k.d)("#EventEditor_InsertImage_Placeholder")}))))))},Object(o.c)([ne.a],t.prototype,"OnImageInsert",null),Object(o.c)([ne.a],t.prototype,"OnImageURLChange",null),Object(o.c)([ne.a],t.prototype,"OnAnchorURLChange",null),t=Object(o.c)([r.a],t)}(i.Component),Ve=function(e){function t(t){var n=e.call(this,t)||this;return n.m_isMounted=!1,n.m_bAppend=!1,n.state={bPreserveNewLines:!1,strHTMLData:""},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.m_isMounted=!0},t.prototype.componentWillUnmount=function(){this.m_isMounted=!1},t.prototype.OnConvertAndOverriteHTML=function(){this.m_bAppend=!1,this.ConvertBBCode()},t.prototype.OnConvertAndAppendHTML=function(){this.m_bAppend=!0,this.ConvertBBCode()},t.prototype.ConvertHtmlToBBCode=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(n=new URLSearchParams).append("content",e),n.append("preserve_newlines",t?"1":"0"),null,[4,E.a.post(D.c.COMMUNITY_BASE_URL+"/actions/ConvertHTMLToBBCode",n)];case 1:return[2,o.sent().data.content]}}))}))},t.prototype.ConvertBBCode=function(){var e=this;this.setState({bConverting:!0}),this.ConvertHtmlToBBCode(this.state.strHTMLData,this.state.bPreserveNewLines).then((function(t){e.m_isMounted&&(e.m_bAppend?Ne.append(t,e.props.textareaRef.current):Ne.overwrite(t,e.props.textareaRef.current),e.setState({bConverting:!1,bFinishedConverting:!0}))})).catch((function(e){Object(G.d)(i.createElement(L.d,{strTitle:Object(k.d)("#EventEditor_ConvertHTML_Error"),strDescription:Object(k.d)("#EventEditor_ConvertHTML_Error_Desc",e.response&&e.response.data?e.response.data.msg:e),bAlertDialog:!0,bDestructiveWarning:!0}),window,Object(k.d)("#EventEditor_ConvertHTML_Error"))}))},t.prototype.OnCheckboxChange=function(e){var t=e.target.checked;t!=this.state.bPreserveNewLines&&this.setState({bPreserveNewLines:t})},t.prototype.OnTextAreaChange=function(e){this.setState({strHTMLData:e.currentTarget.value})},t.prototype.render=function(){var e=this.props.closeModal;return this.state.bConverting?i.createElement(L.b,{strTitle:Object(k.d)("#EventEditor_ImportFromHTML"),strDescription:Object(k.d)("#EventEditor_ImportFromHTML_ConversionInProgress"),closeModal:e,bAlertDialog:!0,onOK:e,onCancel:e},i.createElement(ge.a,null)):this.state.bFinishedConverting?i.createElement(L.b,{strTitle:Object(k.d)("#EventEditor_ImportFromHTML"),strDescription:Object(k.d)("#EventEditor_ImportFromHTML_ConvertFinished"),closeModal:e,bAlertDialog:!0,onOK:e,onCancel:e}):i.createElement(L.c,{onOK:this.OnConvertAndOverriteHTML,onCancel:e},i.createElement(j.m,null," ",Object(k.d)("#EventEditor_ImportFromHTML")," "),i.createElement(j.b,null,i.createElement(j.c,null,i.createElement("div",{className:Object(R.a)(ve.a.FlexColumnContainer,_e.a.ImportHTMLCtn)},i.createElement("div",{className:ve.a.FlexColumnContainer},Object(k.k)("#EventEditor_ImportFromHTML_ConvertDescription",i.createElement("a",{target:D.c.IN_CLIENT?void 0:"_blank",href:(D.c.IN_CLIENT?"steam://openurl/":"")+"https://partner.steamgames.com/doc/marketing/event_tools/import"},Object(k.d)("#EventEditor_ImportFromHTML_ConvertLearn")))),i.createElement("textarea",{value:this.state.strHTMLData,placeholder:Object(k.d)("#EventEditor_ImportFromHTML_Instruction"),className:_e.a.ImportHTMLTextArea,onChange:this.OnTextAreaChange,ref:function(e){return e&&e.focus()}}),i.createElement("div",{className:_e.a.ImportHTMLCheckBoxLine},i.createElement("input",{id:"ImportFromHTMLNewLines",type:"checkbox",checked:this.state.bPreserveNewLines,onChange:this.OnCheckboxChange}),i.createElement("label",{htmlFor:"ImportFromHTMLNewLines"},Object(k.d)("#EventEditor_ImportFromHTML_PreserveNewlines"),i.createElement("span",{className:"ttip","data-tooltip-text":Object(k.d)("#EventEditor_ImportFromHTML_PreserveNewlines_Hint")},"(?)"))),i.createElement("div",null,Object(k.d)("#EventEditor_ImportFromHTML_ConvertToBBCode")))),i.createElement(j.j,null,i.createElement(j.t,{onCancel:e,strOKText:Object(k.d)("#Button_Overwrite"),onUpdate:this.OnConvertAndAppendHTML,strUpdateText:Object(k.d)("#Button_Append")}))))},Object(o.c)([ne.a],t.prototype,"OnConvertAndOverriteHTML",null),Object(o.c)([ne.a],t.prototype,"OnConvertAndAppendHTML",null),Object(o.c)([ne.a],t.prototype,"OnCheckboxChange",null),Object(o.c)([ne.a],t.prototype,"OnTextAreaChange",null),t=Object(o.c)([r.a],t)}(i.Component),Ue=n("SNN4"),He=new(function(){function e(){this.m_mapAppIDToClanInfo=new Map,this.m_mapVanityToClanInfo=new Map,this.m_mapClanAccountIDToClanInfo=new Map,this.m_mapPromisesLoading=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.LazyInit=function(){var e=this;this.m_bLoadedFromConfig||(!Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD&&document.getElementById("application_config")&&Object(w.E)((function(){var t=Object(D.g)("groupvanityinfo","application_config");e.ValidateClanConfig(t)&&t.forEach((function(t){e.InternalSetupValue(t)}))})),this.m_bLoadedFromConfig=!0)},e.prototype.ValidateClanConfig=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].clanAccountID&&("number"==typeof t[0].appid||"string"==typeof t[0].vanity_url))},e.prototype.InternalSetupValue=function(e){var t={clanAccountID:e.clanAccountID,clanSteamID:new Z.a(e.clanSteamIDString),appid:e.appid,vanity_url:e.vanity_url,member_count:e.member_count,is_ogg:e.is_ogg,is_creator_home:e.is_creator_home,is_curator:e.is_curator,has_rss_feed:e.has_rss_feed,avatar_full_url:e.avatar_full_url,group_name:e.group_name,creator_page_bg_url:e.creator_page_bg_url};0!=e.appid&&this.m_mapAppIDToClanInfo.set(e.appid,t),e.vanity_url&&e.vanity_url.length>0&&this.m_mapVanityToClanInfo.set(e.vanity_url,t),this.m_mapClanAccountIDToClanInfo.set(e.clanAccountID,t)},e.prototype.GetRequestParam=function(){return{origin:self.origin}},e.prototype.LoadOGGClanInfoForAppID=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){return this.LazyInit(),"string"==typeof e&&(e=parseInt(e)),Object(X.a)(0!=e,"LoadOGGClanInfoForAppID called with appid of zero"),0==e?[2,null]:this.m_mapAppIDToClanInfo.has(e)?[2,this.m_mapAppIDToClanInfo.get(e)]:(t="appid_"+e,this.m_mapPromisesLoading.has(t)||this.m_mapPromisesLoading.set(t,this.InternalLoadOGGClanInfoForAppID(e)),[2,this.m_mapPromisesLoading.get(t)])}))}))},e.prototype.InternalLoadOGGClanInfoForAppID=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=D.c.COMMUNITY_BASE_URL+"ogg/"+e+"/ajaxgetvanityandclanid/",[4,E.a.get(t,{params:this.GetRequestParam()})];case 1:return n=o.sent(),this.InternalSetupValue(n.data),[2,this.m_mapAppIDToClanInfo.get(e)]}}))}))},e.prototype.LoadOGGClanInfoForIdentifier=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){return this.LazyInit(),this.m_mapVanityToClanInfo.has(e)?[2,this.m_mapVanityToClanInfo.get(e)]:(t="storevanity_"+e,this.m_mapPromisesLoading.has(t)||this.m_mapPromisesLoading.set(t,this.InternalLoadOGGClanInfoForIdentifier(e)),[2,this.m_mapPromisesLoading.get(t)])}))}))},e.prototype.InternalLoadOGGClanInfoForIdentifier=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=D.c.COMMUNITY_BASE_URL+"games/"+e+"/ajaxgetvanityandclanid/",[4,E.a.get(t,{params:this.GetRequestParam()})];case 1:return n=o.sent(),this.InternalSetupValue(n.data),[2,this.m_mapVanityToClanInfo.get(e)]}}))}))},e.prototype.LoadOGGClanInfoForGroupVanity=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){return this.LazyInit(),this.m_mapVanityToClanInfo.has(e)?[2,this.m_mapVanityToClanInfo.get(e)]:(t="community_name_"+e,this.m_mapPromisesLoading.has(t)||this.m_mapPromisesLoading.set(t,this.InternalLoadOGGClanInfoForGroupVanity(e)),[2,this.m_mapPromisesLoading.get(t)])}))}))},e.prototype.InternalLoadOGGClanInfoForGroupVanity=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=D.c.COMMUNITY_BASE_URL+"groups/"+e+"/ajaxgetvanityandclanid/",[4,E.a.get(t,{params:this.GetRequestParam()})];case 1:return n=o.sent(),this.InternalSetupValue(n.data),[2,this.m_mapVanityToClanInfo.get(e)]}}))}))},e.prototype.LoadOGGClanInfoForClanSteamID=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){return this.LazyInit(),t=e.GetAccountID(),this.m_mapClanAccountIDToClanInfo.has(t)?[2,this.m_mapClanAccountIDToClanInfo.get(t)]:(n="clanaccountid_"+t,this.m_mapPromisesLoading.has(n)||this.m_mapPromisesLoading.set(n,this.InternalLoadOGGClanInfoForClanSteamID(e)),[2,this.m_mapPromisesLoading.get(n)])}))}))},e.prototype.InternalLoadOGGClanInfoForClanSteamID=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=e.GetAccountID(),n=D.c.COMMUNITY_BASE_URL+"gid/"+e.ConvertTo64BitString()+"/ajaxgetvanityandclanid/",[4,E.a.get(n,{params:this.GetRequestParam()})];case 1:return r=o.sent(),this.InternalSetupValue(r.data),[2,this.m_mapClanAccountIDToClanInfo.get(t)]}}))}))},e.prototype.GetOGGClanInfo=function(e){return"string"==typeof e?this.m_mapVanityToClanInfo.get(e):this.m_mapAppIDToClanInfo.get(e)},e.prototype.GetClanSteamIDForAppID=function(e){if(this.LazyInit(),this.m_mapAppIDToClanInfo.has(e))return Z.a.InitFromClanID(this.m_mapAppIDToClanInfo.get(e).clanAccountID)},e.prototype.GetClanVanityForAppID=function(e){if(this.LazyInit(),this.m_mapAppIDToClanInfo.has(e))return this.m_mapAppIDToClanInfo.get(e).vanity_url},e.prototype.GetClanVanityForClanSteamID=function(e){if(this.LazyInit(),this.m_mapClanAccountIDToClanInfo.has(e.GetAccountID()))return this.m_mapClanAccountIDToClanInfo.get(e.GetAccountID()).vanity_url},e.prototype.GetClanMemberCount=function(e){return this.m_mapAppIDToClanInfo.has(e)?this.m_mapAppIDToClanInfo.get(e).member_count:0},e.prototype.GetClanInfoByClanAccountID=function(e){return this.LazyInit(),Object(X.a)(!!e,"Unepxected clanid when requesting information. GetClanInfoByClanAccountID "),this.m_mapClanAccountIDToClanInfo.get(e)},e.prototype.GetCreatorStoreURL=function(e){var t=Ue.a.GetCreatorHome(e);if(t)return t.GetURL("developer");var n=this.GetClanInfoByClanAccountID(e.GetAccountID());return D.c.COMMUNITY_BASE_URL+(n.vanity_url?"groups/"+n.vanity_url:"gid/"+e.ConvertTo64BitString())},Object(o.c)([w.A],e.prototype,"m_mapAppIDToClanInfo",void 0),Object(o.c)([w.A],e.prototype,"m_mapVanityToClanInfo",void 0),Object(o.c)([w.A],e.prototype,"m_mapClanAccountIDToClanInfo",void 0),Object(o.c)([w.i],e.prototype,"InternalSetupValue",null),e}());window.g_ClanStore=He;var We=n("/7KC"),ze=n("wd/R"),Ye=n.n(ze),qe=n("s4NR"),Ke=n.n(qe),Qe=new(function(){function e(){this.bOpenEventLandingPage=!1,this.bIncludeFeaturedAsGameSource=!0,this.nOverrideDateNow=void 0}return e.prototype.GetTimeNowWithOverride=function(){return this.nOverrideDateNow?this.nOverrideDateNow:Date.now()/1e3},e.prototype.GetTimeNowWithOverrideAsDate=function(){return this.nOverrideDateNow?new Date(1e3*this.nOverrideDateNow):new Date},e.prototype.BHasTimeOverride=function(){return Boolean(this.nOverrideDateNow)},e.prototype.ParseDevOverrides=function(e){if(e&&0!=e.length){var t=Ke.a.parse("?"==e[0]?e.substring(1):e);if("string"==typeof t.t&&("dev"==D.c.WEB_UNIVERSE||"beta"==D.c.WEB_UNIVERSE)){var n=/^\d+$/.test(t.t)?Ye.a.unix(Number.parseInt(t.t)):Ye()(t.t);this.nOverrideDateNow=Math.floor(n.unix()),console.log("CEventCalendarDevFeatures overriding partner event time: "+this.nOverrideDateNow+" "+n.format())}}},e}());window.g_EventCalendarDevFeatures=Qe;var Ze;!function(e){e[e.k_EEventStateUnpublished=0]="k_EEventStateUnpublished",e[e.k_EEventStateStaged=1]="k_EEventStateStaged",e[e.k_EEventStateVisible=2]="k_EEventStateVisible"}(Ze||(Ze={}));var Je,Xe={capsules:[],events:[],links:[],localized_label:new Array(29),localized_label_image:new Array(29),default_label:"#Sale_default_label",section_type:"items"};function $e(e){switch(e){case Je.k_EGameOfTheYear:return 1;case Je.k_EVRGameOfTheYear:return 2;case Je.k_ELaborOfLove:return 3;case Je.k_EBetterWithFriends:return 4;case Je.k_EMostInnovativeGameplay:return 5;case Je.k_EOutstandingStoryRichGame:return 6;case Je.k_EBestGameYouSuckAt:return 7;case Je.k_EOutstandingVisualStyle:return 8;case Je.k_ENone:default:return 0}}!function(e){e.k_ENone="none",e.k_EGameOfTheYear="goty",e.k_EVRGameOfTheYear="vrgoty",e.k_ELaborOfLove="love",e.k_EBetterWithFriends="friends",e.k_EMostInnovativeGameplay="gameplay",e.k_EOutstandingStoryRichGame="storyrich",e.k_EBestGameYouSuckAt="yousuck",e.k_EOutstandingVisualStyle="visual"}(Je||(Je={}));var et=Object(o.a)(Object(o.a)({localized_subtitle:new Array(29),localized_summary:new Array(29),localized_title_image:new Array(29),localized_capsule_image:new Array(29),localized_spotlight_image:new Array(29),bSaleEnabled:!1,sale_show_creator:!1,sale_sections:[],sale_browsemore_text:"",sale_browsemore_url:"",sale_browsemore_color:"",sale_browsemore_bgcolor:"",localized_sale_header:new Array(29),localized_sale_overlay:new Array(29),localized_sale_product_banner:new Array(29),localized_sale_product_mobile_banner:new Array(29),sale_font:"",sale_background_color:"",sale_header_offset:150},me),{bScheduleEnabled:!1,scheduleEntries:[]}),tt={capsule:{width:800,height:450},spotlight:{width:2108,height:460},background:{width:1920,height:622},hero:{width:0,height:0},email_full:{width:800,height:300},email_centered:{width:644,height:300},broadcast_left:{width:155,height:337},broadcast_right:{width:155,height:337},sale_header:{width:0,height:0,bDisableEnforceDimensions:!0},sale_overlay:{width:0,height:0,bDisableEnforceDimensions:!0},localized_image_group:{width:0,height:0,bDisableEnforceDimensions:!0},sale_section_background:{width:0,height:0,bDisableEnforceDimensions:!0},sale_section_title:{width:0,height:0,bDisableEnforceDimensions:!0},link_capsule:{width:0,height:0,bDisableEnforceDimensions:!0},product_banner:{width:1100,height:160},product_mobile_banner:{width:500,height:160},product_banner_override:{width:1100,height:160},product_mobile_banner_override:{width:500,height:160}};function nt(e,t,n){var o=tt[n];return!!o&&(!o.bDisableEnforceDimensions&&(e===o.width&&t===o.height))}function ot(e,t,n){var o=tt[n];return!!o&&(!!o.bDisableEnforceDimensions||!(e<o.width||t<o.height))}var rt=function(){function e(){this.type=1,this.appid=0,this.name=new Map,this.description=new Map,this.timestamp_loc_updated=new Map,this.visibility_state=Ze.k_EEventStateUnpublished,this.jsondata=et,this.nCommentCount=0,this.nVotesUp=0,this.nVotesDown=0,this.bOldAnnouncement=!1,this.announcementClanSteamID=void 0,this.loadedAllLanguages=!1,this.bLoaded=!1,this.deleteInProgress=!1,this.vecTags=new Array}return e.prototype.BIsPartnerEvent=function(){return!this.bOldAnnouncement&&Boolean(this.GID)},e.FromJSON=function(t){var n=new e,o=JSON.parse(t);return Object.assign(n,o),n.name=new Map(o.name),n.description=new Map(o.description),n.vecTags=new Array(o.vecTags),n.clanSteamID=new Z.a(o.clanSteamID),Object(X.a)(n.clanSteamID&&n.clanSteamID.BIsValid(),"Invalid Clan SteamID: "+n.clanSteamID.ConvertTo64BitString()),o.broadcaster&&(n.broadcaster=new Z.a(o.broadcaster),Object(X.a)(n.broadcaster&&n.broadcaster.BIsValid(),"Invalid Broadcast SteamID: "+n.broadcaster.ConvertTo64BitString())),n},e.prototype.toJSON=function(e){var t=new Object;return Object.assign(t,this),t.name=Array.from(this.name),t.description=Array.from(this.description),t.tags=Array.from(this.vecTags),t.clanSteamID=this.clanSteamID.ConvertTo64BitString(),this.broadcaster&&(t.broadcaster=this.broadcaster.ConvertTo64BitString()),t},e.prototype.clone=function(){var t=new e;return t.GID=this.GID,t.AnnouncementGID=this.AnnouncementGID,t.clanSteamID=this.clanSteamID,t.bOldAnnouncement=this.bOldAnnouncement,t.nCommentCount=this.nCommentCount,t.nVotesUp=this.nVotesUp,t.nVotesDown=this.nVotesDown,t.forumTopicGID=this.forumTopicGID,t.comment_type=this.comment_type,t.gidfeature=this.gidfeature,t.gidfeature2=this.gidfeature2,t.featured_app_tagid=this.featured_app_tagid,t.last_update_steamid=this.last_update_steamid,t.rtime32_last_modified=this.rtime32_last_modified,t.type=this.type,t.appid=this.appid,t.name=new Map,this.name.forEach((function(e,n){t.name.set(n,e)})),t.description=new Map,this.description.forEach((function(e,n){t.description.set(n,e)})),t.timestamp_loc_updated=new Map,this.timestamp_loc_updated.forEach((function(e,n){t.timestamp_loc_updated.set(n,e)})),t.startTime=this.startTime,t.endTime=this.endTime,t.visibilityStartTime=this.visibilityStartTime,t.visibilityEndTime=this.visibilityEndTime,t.postTime=this.postTime,t.visibility_state=this.visibility_state,t.loadedAllLanguages=this.loadedAllLanguages,t.bLoaded=this.bLoaded,t.broadcaster=this.broadcaster?new Z.a(this.broadcaster.ConvertTo64BitString()):null,t.jsondata=JSON.parse(JSON.stringify(this.jsondata)),t.vecTags=new Array,this.vecTags.forEach((function(e){return t.vecTags.push(e)})),t},e.prototype.GetLastReferencedSaleDayFromCapsules=function(e,t){for(var n=t,o=0,r=e;o<r.length;o++){var i=r[o];void 0!==i.visibility_index&&(n=void 0===n?i.visibility_index:Math.max(n,i.visibility_index))}return n},e.prototype.GetLastReferencedSaleDay=function(){for(var e=void 0,t=0,n=this.GetSaleSections();t<n.length;t++){var o=n[t];if("tabs"===o.section_type)for(var r=0,i=o.tabs;r<i.length;r++){var a=i[r];e=this.GetLastReferencedSaleDayFromCapsules(a.capsules,e)}else e=this.GetLastReferencedSaleDayFromCapsules(o.capsules,e)}return e},e.prototype.GetDayIndexFromEventStart=function(){var e=0,t=Qe.GetTimeNowWithOverride();void 0!==this.startTime&&t>=this.startTime&&(e=Math.floor((t-this.startTime)/86400)),void 0!==this.m_overrideCurrentDay&&this.m_overrideCurrentDay>=0&&(e=this.m_overrideCurrentDay);var n=this.GetLastReferencedSaleDay()||0;return Math.min(e,n)},e.prototype.GetNameWithFallback=function(e){return this.name.get(e)||this.name.get(0)},e.prototype.GetGameTitle=function(e){return pe.GetStoreCapsuleInfo(this.appid).GetAppStoreData().title},e.prototype.GetImgArray=function(e){var t=[];if("background"===e&&(t=this.jsondata.localized_title_image),"capsule"===e)t=this.jsondata.localized_capsule_image;else if("spotlight"===e)t=this.jsondata.localized_spotlight_image;else if("email_full"===e||"email_centered"===e)t=this.jsondata.email_setting?this.jsondata.email_setting.sections[0].localized_image:[];else if("broadcast_left"===e)t=this.jsondata.localized_broadcast_left_image;else if("broadcast_right"===e)t=this.jsondata.localized_broadcast_right_image;else if("sale_header"===e)if(void 0!==this.jsondata.sale_num_headers){var n=Math.min(this.jsondata.sale_num_headers,this.GetDayIndexFromEventStart());t=this.jsondata.localized_per_day_sales_header[n]}else t=this.jsondata.localized_sale_header;else"sale_overlay"===e?t=this.jsondata.localized_sale_overlay:"localized_image_group"===e||"link_capsule"===e||"product_banner_override"===e||"product_mobile_banner_override"===e||"sale_section_title"===e?t=ce.GetLocalizedImageGroupForEditAsImgArray(this.clanSteamID):"product_banner"===e?t=this.jsondata.localized_sale_product_banner:"product_mobile_banner"===e&&(t=this.jsondata.localized_sale_product_mobile_banner);return t},e.prototype.GetImageURL=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=z.full);var o=this.GetImgArray(e);return o&&o.length>t&&null!=o[t]?ie.GenerateArtworkURLFromHashAndExtensions(this.clanSteamID,o[t],n):void 0},e.prototype.GetImageHash=function(e,t){void 0===t&&(t=0);var n=this.GetImgArray(e);return n&&n.length>t&&null!=n[t]?n[t].substr(0,n[t].length-4):null},e.prototype.BHasSomeImage=function(e){var t=this.GetImgArray(e);return t&&t.some((function(e){return null!=e&&e.length>0}))},e.prototype.BHasImage=function(e,t){var n=this.GetImgArray(e);return n&&n.length>t&&null!=n[t]},e.prototype.BHasAnnouncementGID=function(){return null!==this.AnnouncementGID&&void 0!==this.AnnouncementGID&&this.AnnouncementGID.length>1},e.prototype.GetAnnouncementGID=function(){return this.AnnouncementGID},e.prototype.BHasForumTopicGID=function(){return null!==this.forumTopicGID&&void 0!==this.forumTopicGID&&this.forumTopicGID.length>1},e.prototype.GetForumTopicURL=function(){if(!this.BHasForumTopicGID())return"";if(this.appid)return D.c.COMMUNITY_BASE_URL+"app/"+this.appid+"/eventcomments/"+this.forumTopicGID;var e=He.GetClanInfoByClanAccountID(this.clanSteamID.GetAccountID());return e&&e.vanity_url?D.c.COMMUNITY_BASE_URL+"groups/"+e.vanity_url+"/eventcomments/"+this.forumTopicGID:D.c.COMMUNITY_BASE_URL+"gid/"+this.clanSteamID.ConvertTo64BitString()+"/eventcomments/"+this.forumTopicGID},e.prototype.BIsEventInFuture=function(){return Qe.GetTimeNowWithOverride()<this.startTime},e.prototype.UpdateVoteCount=function(e,t){"up"==e?this.nVotesUp=Object(We.a)(this.nVotesUp+t,0,Number.MAX_SAFE_INTEGER):"down"==e&&(this.nVotesDown=Object(We.a)(this.nVotesDown+t,0,Number.MAX_SAFE_INTEGER))},e.prototype.GetImageFromBeginningOfDescription=function(e,t){var n=this.GetDescriptionWithFallback(e);if(n){var o=n.indexOf("[img]");if(-1!==o&&o<t){o+=5;var r=n.indexOf("[/img]",o);if(-1!=r){var i=n.substr(o,r-o).trim();if(0!=i.length)return i.replace("{STEAM_CLAN_IMAGE}",D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/")}}}return null},e.prototype.GetImageURLWithFallback=function(e,t,n){void 0===n&&(n=z.full);var o=this.GetImageURL(e,t,n);if(!o||0==o.trim().length){if(0!=t){var r=this.GetImageURL(e,0,n);if(r&&r.length>0)return r}var i=He.GetClanInfoByClanAccountID(this.clanSteamID.GetAccountID());if("capsule"==e){var a=this.GetImageFromBeginningOfDescription(t,500);if(null!==a)return a=a.replace("http://","https://");if(i&&(i.is_creator_home||i.is_curator))return i.avatar_full_url;var s=pe.GetStoreCapsuleInfo(this.appid);return s.BIsLoaded()?s.GetAppStoreData().capsule:D.c.MEDIA_CDN_URL+"steam/apps/"+this.appid+"/header.jpg"}return"background"==e&&i&&(i.is_creator_home||i.is_curator)?i.creator_page_bg_url:this.GetFallbackArtworkScreenshot()}return o},e.prototype.GetFallbackArtworkScreenshot=function(){if(this.appid){pe.EnsureStoreCapsuleInfoLoaded(this.appid);var e=pe.GetStoreCapsuleInfo(this.appid).GetAppStoreData();if(e.screenshot_list&&e.screenshot_list.length>1){var t=Number(this.bOldAnnouncement?this.AnnouncementGID:null==this.GID?0:this.GID);return t%=e.screenshot_list.length,e.screenshot_list[t]}return e.screenshot}if(this.clanSteamID){var n=He.GetClanInfoByClanAccountID(this.clanSteamID.GetAccountID());if(n&&(n.is_creator_home||n.is_curator))return n.avatar_full_url}return null},e.prototype.BImageNeedScreenshotFallback=function(e,t){var n=this.GetImageURL(e,t);return n&&0!=n.length||0!=t&&(n=this.GetImageURL(e,0)),!n||0==n.length},e.prototype.GetImageForSizeAsArrayWithFallback=function(e,t,n,o){var r=new Array;this.BImageNeedScreenshotFallback(e,t)||(r.push(this.GetImageURLWithFallback(e,t,n)),n!=z.full&&r.push(this.GetImageURLWithFallback(e,t,z.full)));var i=this.GetFallbackArtworkScreenshot();return i&&!o&&r.push(i),r},e.prototype.GetDescriptionWithFallback=function(e){return this.description.get(e)||this.description.get(0)},e.prototype.BIsImageSafeForAllAges=function(e,t){var n=He.GetClanInfoByClanAccountID(this.clanSteamID.GetAccountID());return null!=this.GetImageURL(e,t)||0!=t&&null!=this.GetImageURL(e,0)||this.appid&&pe.GetStoreCapsuleInfo(this.appid).GetAppStoreData().age_safe_screenshot||!this.appid&&n&&(n.is_creator_home||n.is_curator)},e.prototype.BIsVisibleEvent=function(){var e=Math.floor(Qe.GetTimeNowWithOverride());return this.visibility_state==Ze.k_EEventStateVisible&&e>this.visibilityStartTime&&(this.visibilityEndTime<10||e<this.visibilityEndTime)},e.prototype.BIsStagedEvent=function(){return this.visibility_state==Ze.k_EEventStateStaged},e.prototype.GetStartTimeAndDateUnixSeconds=function(){return this.startTime},e.prototype.GetEndTimeAndDateUnixSeconds=function(){return this.endTime},e.prototype.GetPostTimeAndDateUnixSeconds=function(){return this.postTime},e.prototype.GetVisibilityStartTimeAndDateUnixSeconds=function(){return this.visibilityStartTime},e.prototype.BIsEventActionEnabled=function(){return!!this.jsondata.action_end_time&&this.jsondata.action_end_time>Qe.GetTimeNowWithOverride()},e.prototype.BHasSubTitle=function(e){if(!this.jsondata||!this.jsondata.localized_subtitle||e>=this.jsondata.localized_subtitle.length)return!1;var t=this.jsondata.localized_subtitle[e];return null!=t&&""!=t},e.prototype.GetSubTitle=function(e){if(!this.jsondata||!this.jsondata.localized_subtitle||e>=this.jsondata.localized_subtitle.length)return"";var t=this.jsondata.localized_subtitle[e];return t||""},e.prototype.GetSubTitleWithLanguageFallback=function(e){return this.jsondata&&this.jsondata.localized_subtitle&&0!=this.jsondata.localized_subtitle.length?this.jsondata.localized_subtitle[e]||this.jsondata.localized_subtitle[0]:""},e.prototype.GetSubTitleWithSummaryFallback=function(t){var n=null;if(this.jsondata&&this.jsondata.localized_subtitle){var o=this.jsondata.localized_subtitle;o.length>t&&(n=o[t]),!n&&o.length>0&&(n=o[0])}return n||e.GenerateSummaryFromText(this.GetDescriptionWithFallback(t))},e.prototype.GetSummaryWithFallback=function(t){return this.BHasSummary(t)||0!=t&&this.BHasSummary(0)?this.GetSummary(t):e.GenerateSummaryFromText(this.GetDescriptionWithFallback(t))},e.prototype.GetSummary=function(e){if(!this.jsondata||!this.jsondata.localized_summary||e>=this.jsondata.localized_summary.length)return"";var t=this.jsondata.localized_summary[e];return null!=t?t:""},e.prototype.BHasSummary=function(e){if(!this.jsondata||!this.jsondata.localized_summary||e>=this.jsondata.localized_summary.length)return!1;var t=this.jsondata.localized_summary[e];return null!=t&&""!=t},e.GenerateSummaryFromText=function(e){return e&&0!=e.trim().length?(e=Object(y.b)(e,["img","h1","h2","h3","spoiler","table","previewyoutube","looping_media","roomeffect","sticker"]),e=Object(y.c)(e),e=Object(ue.e)(e),Object(ue.f)(e,180)):""},e.prototype.BHasTag=function(e){return-1!=this.vecTags.indexOf(e)},e.prototype.BIsOGGEvent=function(){return 0!==this.appid},e.prototype.BShowLibrarySpotlight=function(){return Boolean(this.jsondata.library_spotlight)},e.prototype.BShowLibrarySpotlightText=function(){return Boolean(this.jsondata.library_spotlight_text)},e.prototype.BHasBroadcastEnabled=function(){return this.jsondata.bBroadcastEnabled},e.prototype.BHasBroadcastForceBanner=function(){return this.jsondata.broadcast_force_banner},e.prototype.BSaleShowBroadcastAtTopOfPage=function(){return!(this.jsondata.sale_sections&&this.jsondata.sale_sections.some((function(e){return"broadcast"==e.section_type})))},e.prototype.GetBroadcastChatVisibility=function(){return this.jsondata.broadcastChatSetting},e.prototype.GetBroadcastTitle=function(e){return this.jsondata.localized_broadcast_title[e]||this.jsondata.localized_broadcast_title[0]||Object(k.d)(this.jsondata.default_broadcast_title)},e.prototype.GetBroadcastWhitelist=function(){return this.jsondata.broadcast_whitelist},e.prototype.GetBroadcastWhitelistAsSteamIDs=function(){return this.jsondata.broadcast_whitelist.map((function(e){return Z.a.InitFromAccountID(e).ConvertTo64BitString()}))},e.prototype.BHasSaleEnabled=function(){return this.jsondata.bSaleEnabled},e.prototype.BHasEmailEnabled=function(){return this.jsondata.email_setting&&this.jsondata.email_setting.bEnable},e.prototype.GetSaleSections=function(){return this.jsondata.sale_sections},e.prototype.GetSaleSectionCount=function(){return this.jsondata.sale_sections.length},e.prototype.BHasScheduleEnabled=function(){return this.jsondata.bScheduleEnabled},e.prototype.GetEventType=function(){return this.type},e.prototype.GetEventTypeAsString=function(){return e=this.type,t="#PartnerEvent_"+e,(n=Object(k.d)(t))!=t?n:Object(k.d)("#PartnerEvent_Other");var e,t,n},e.prototype.GetCategoryAsString=function(){return this.BHasTag("steam_award_nomination_request")?Object(k.d)("#PartnerEvent_SteamAwardNominations"):this.BHasTag("steam_award_vote_request")?Object(k.d)("#PartnerEvent_SteamAwardVoteRequest"):this.BHasTag("steam_game_festival_artist_statement")?Object(k.d)("#PartnerEvent_SteamGameFestival_ArtistState"):this.BHasTag("steam_game_festival_office_hour")?Object(k.d)("#PartnerEvent_SteamGameFestival_OfficeHour"):this.BHasTag("steam_game_festival_broadcast")?Object(k.d)("#PartnerEvent_SteamGameFestival_Broadcast"):this.GetEventTypeAsString()},e.prototype.GetAllTags=function(){return this.vecTags},e.prototype.BHasSteamStoreSpotlight=function(){return Boolean(this.jsondata.store_spotlight)},e.prototype.BHasLibaryHomeSpotlight=function(){return Boolean(this.jsondata.library_home_spotlight)},e.prototype.GetSteamAwardCategory=function(){return this.jsondata.steam_award_category_suggestion},e.prototype.BIsLockedToAppOwners=function(){return Boolean(this.jsondata.ownership_requirement_info&&this.jsondata.ownership_requirement_info.bLockedToAppOwners)},e.prototype.GetRequiredAppIDs=function(){return this.jsondata.ownership_requirement_info?this.jsondata.ownership_requirement_info.rgRequiredAppIDs:[]},e.prototype.GetOwnershipRequirements=function(){return this.jsondata.ownership_requirement_info},Object(o.c)([w.A],e.prototype,"GID",void 0),Object(o.c)([w.A],e.prototype,"AnnouncementGID",void 0),Object(o.c)([w.A],e.prototype,"forumTopicGID",void 0),Object(o.c)([w.A],e.prototype,"type",void 0),Object(o.c)([w.A],e.prototype,"appid",void 0),Object(o.c)([w.A],e.prototype,"name",void 0),Object(o.c)([w.A],e.prototype,"description",void 0),Object(o.c)([w.A],e.prototype,"timestamp_loc_updated",void 0),Object(o.c)([w.A],e.prototype,"startTime",void 0),Object(o.c)([w.A],e.prototype,"endTime",void 0),Object(o.c)([w.A],e.prototype,"visibilityStartTime",void 0),Object(o.c)([w.A],e.prototype,"visibilityEndTime",void 0),Object(o.c)([w.A],e.prototype,"postTime",void 0),Object(o.c)([w.A],e.prototype,"visibility_state",void 0),Object(o.c)([w.A],e.prototype,"broadcaster",void 0),Object(o.c)([w.A],e.prototype,"jsondata",void 0),Object(o.c)([w.A],e.prototype,"nCommentCount",void 0),Object(o.c)([w.A],e.prototype,"nVotesUp",void 0),Object(o.c)([w.A],e.prototype,"nVotesDown",void 0),Object(o.c)([w.A],e.prototype,"bOldAnnouncement",void 0),Object(o.c)([w.A],e.prototype,"announcementClanSteamID",void 0),Object(o.c)([w.A],e.prototype,"loadedAllLanguages",void 0),Object(o.c)([w.A],e.prototype,"bLoaded",void 0),Object(o.c)([w.A],e.prototype,"deleteInProgress",void 0),Object(o.c)([w.A],e.prototype,"vecTags",void 0),Object(o.c)([w.A],e.prototype,"last_update_steamid",void 0),Object(o.c)([w.A],e.prototype,"rtime32_last_modified",void 0),Object(o.c)([w.A],e.prototype,"rtime32_last_local_modification",void 0),Object(o.c)([w.A],e.prototype,"video_preview_type",void 0),Object(o.c)([w.A],e.prototype,"video_preview_id",void 0),Object(o.c)([w.A],e.prototype,"m_overrideCurrentDay",void 0),e}();var it=function(){return function(e){Object(X.a)("number"==typeof e.appid,"AJAX updated app returned a non-numeric AppID! Did the PHP change?"),this.appid=e.appid,this.date=e.date,this.can_play=e.can_play,this.playtime=e.playtime,this.announcementid=e.announcementid}}(),at=function(){function e(){this.m_mapExistingEvents=new Map,this.m_mapAnnouncementBodyToEvent=new Map,this.m_mapClanToGIDs=new Map,this.m_mapAppIDToGIDs=new Map,this.m_mapAdjacentAnnouncementGIDs=new Map,this.m_mapUpdatedApps=new Map,this.m_tsUpdatedAppsQueryTime=0,this.m_rgQueuedEventsClanIDs=new Array,this.m_rgQueuedEventsUniqueIDs=new Array,this.m_QueuedEventTimeout=new $.b,this.m_bLoadedFromConfig=!1}return e.prototype.Init=function(){var e,t=this;if(!this.m_bLoadedFromConfig){if(!Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD&&document.getElementById("application_config")){var n=(e="PartnerEventStore",window.StoreDefaults?window.StoreDefaults[e]:void 0);this.ValidateStoreDefault(n)&&n.forEach((function(e){var n=new Z.a(e.clan_steamid),o=t.InsertEventModelFromClanEventData(n,e);e.announcement_body&&t.m_mapExistingEvents.set("old_announce_"+e.announcement_body.gid,o)}));var o=Object(D.g)("partnereventstore","application_config");this.ValidateStoreDefault(o)&&o.forEach((function(e){var n=new Z.a(e.clan_steamid),o=t.InsertEventModelFromClanEventData(n,e);e.announcement_body&&!t.m_mapExistingEvents.has("old_announce_"+e.announcement_body.gid)&&t.m_mapExistingEvents.set("old_announce_"+e.announcement_body.gid,o)}));var r=Object(D.g)("partnereventadjacents","application_config");this.ValidateAdjacentEvent(r)&&("dev"!=D.c.WEB_UNIVERSE&&"beta"!=D.c.WEB_UNIVERSE||console.log("DEV_DEBUG: CPartnerEventStore loading adjacents gids payload: "+r.length),r.forEach((function(e){t.m_mapAdjacentAnnouncementGIDs.set(e.announcementGID,e.adjacents)})))}this.m_bLoadedFromConfig=!0}},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("string"==typeof t[0].gid||"object"==typeof t[0].announcement_body&&"string"==typeof t[0].announcement_body.gid)},e.prototype.ValidateAdjacentEvent=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("string"==typeof t[0].announcementGID&&Array.isArray(t[0].adjacents)&&(0==t[0].adjacents.length||"string"==typeof t[0].adjacents[0]))},e.prototype.GetClanEventGIDs=function(e){var t=this.m_mapClanToGIDs.get(e.GetAccountID());return t||[]},e.prototype.GetClanEventGIDsForApp=function(e){var t=this.m_mapAppIDToGIDs.get(e);return t||[]},e.prototype.GetClanEventModel=function(e){return this.m_mapExistingEvents.get(e)},e.prototype.BHasClanEventModel=function(e){return this.m_mapExistingEvents.has(e)},e.prototype.BHasClanAnnouncementGID=function(e){if(this.m_mapAnnouncementBodyToEvent.has(e)){var t=this.m_mapAnnouncementBodyToEvent.get(e);return this.BHasClanEventModel(t)}return!1},e.prototype.GetClanEventGIDFromAnnouncementGID=function(e){return this.m_mapAnnouncementBodyToEvent.get(e)},e.prototype.GetClanEventFromAnnouncementGID=function(e){return this.m_mapExistingEvents.get(this.m_mapAnnouncementBodyToEvent.get(e))},e.prototype.DefaultEventSortFunction=function(e,t){return e.startTime==t.startTime?Object(ue.h)(e.GID,t.GID):t.startTime-e.startTime},e.prototype.RegisterClanEvents=function(e){if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t],r=this.GetEventLookupKey(o);if(!this.m_mapExistingEvents.has(r)){var i=new Z.a(o.clan_steamid);this.InsertEventModelFromClanEventData(i,o)}}},e.prototype.GetRankedClanEvents=function(e,t){var n=[],o=e?this.GetClanEventGIDs(e):this.GetClanEventGIDsForApp(t);if(!o||0==o.length)return n;for(var r=0,i=o;r<i.length;r++){var a=i[r],s=this.GetClanEventModel(a);n.push(s)}return n.sort(this.DefaultEventSortFunction),n},e.prototype.BIsOldAnnouncement=function(e){return(null==e.gid||null==e.gid||"0"==e.gid)&&e.announcement_body&&"0"!=e.announcement_body.gid},e.prototype.GetEventLookupKey=function(e){return this.BIsOldAnnouncement(e)?"old_announce_"+e.announcement_body.gid:e.gid},e.prototype.InsertEventModelFromClanEventData=function(e,t){var n=new rt;if(n.clanSteamID=e,Object(X.a)(n.clanSteamID&&n.clanSteamID.BIsValid(),"Invalid Clan SteamID: "+n.clanSteamID.ConvertTo64BitString()+" "+D.c.EUNIVERSE),n.GID=this.GetEventLookupKey(t),n.bOldAnnouncement=this.BIsOldAnnouncement(t),n.appid=t.appid,n.startTime=t.rtime32_start_time,n.endTime=t.rtime32_end_time,n.visibilityStartTime=t.rtime32_visibility_start,n.visibilityEndTime=t.rtime32_visibility_end,n.loadedAllLanguages=!1,n.type=t.event_type,n.nVotesUp=t.votes_up,n.nVotesDown=t.votes_down,n.comment_type=t.comment_type,n.gidfeature=t.gidfeature,n.gidfeature2=t.gidfeature2,n.featured_app_tagid=t.featured_app_tagid,n.vecTags=new Array,n.last_update_steamid=t.last_update_steamid,n.rtime32_last_modified=t.rtime32_last_modified,n.video_preview_type=t.video_preview_type,n.video_preview_id=t.video_preview_id,n.has_live_stream=t.has_live_stream,n.live_stream_viewer_count=t.live_stream_viewer_count,t.announcement_body){var r=t.announcement_body;n.AnnouncementGID=r.gid,n.name.set(r.language,r.headline),n.description.set(r.language,r.body),n.timestamp_loc_updated.clear(),n.forumTopicGID=r.forum_topic_id,n.nCommentCount=r.commentcount,n.postTime=r.posttime,n.bOldAnnouncement&&!r.hidden&&(n.startTime=r.posttime),n.announcementClanSteamID=new Z.a(r.clanid),r.tags&&r.tags.length>0&&r.tags.forEach((function(e){return n.vecTags.push(e)}))}else n.AnnouncementGID="0",n.forumTopicGID=t.forum_topic_id,n.name.clear(),n.description.clear(),n.timestamp_loc_updated.clear(),n.postTime=t.rtime32_start_time,n.nCommentCount=t.comment_count,n.name.set(0,t.event_name),n.description.set(0,t.event_notes);t.broadcaster_accountid&&(n.broadcaster=new Z.a(t.broadcaster_accountid));var i=et;try{n.jsondata=Object(o.a)(Object(o.a)({},i),t.jsondata?JSON.parse(t.jsondata):void 0)}catch(e){throw console.error("PartnerEventStore::InsertEventModelFromClanEventData: failed to parse embedded json model"+Object(te.a)(e)),console.error(t.jsondata),e}if(n.jsondata.localized_capsule_image=Object(J.g)(n.jsondata.localized_capsule_image,29,null),n.jsondata.localized_title_image=Object(J.g)(n.jsondata.localized_title_image,29,null),n.jsondata.localized_spotlight_image=Object(J.g)(n.jsondata.localized_spotlight_image,29,null),n.jsondata.localized_subtitle=Object(J.g)(n.jsondata.localized_subtitle,29,null),n.jsondata.localized_summary=Object(J.g)(n.jsondata.localized_summary,29,null),n.jsondata.localized_broadcast_title=Object(J.g)(n.jsondata.localized_broadcast_title,29,null),n.jsondata.localized_broadcast_left_image=Object(J.g)(n.jsondata.localized_broadcast_left_image,29,null),n.jsondata.localized_broadcast_right_image=Object(J.g)(n.jsondata.localized_broadcast_right_image,29,null),n.jsondata.localized_sale_header=Object(J.g)(n.jsondata.localized_sale_header,29,null),n.jsondata.localized_sale_overlay=Object(J.g)(n.jsondata.localized_sale_overlay,29,null),n.jsondata.localized_sale_product_banner=Object(J.g)(n.jsondata.localized_sale_product_banner,29,null),n.jsondata.localized_sale_product_mobile_banner=Object(J.g)(n.jsondata.localized_sale_product_mobile_banner,29,null),void 0!==n.jsondata.sale_num_headers)for(var a=0;a<n.jsondata.sale_num_headers;++a)n.jsondata.localized_per_day_sales_header[a]=Object(J.g)(n.jsondata.localized_per_day_sales_header[a],29,null);return n.jsondata.sale_sections&&n.jsondata.sale_sections.forEach((function(e,t){e.localized_label&&(e.localized_label=Object(J.g)(e.localized_label,29,null)),n.jsondata.sale_sections[t]=Object(o.a)(Object(o.a)({},Xe),e)})),n.jsondata.email_setting&&n.jsondata.email_setting.sections&&n.jsondata.email_setting.sections.forEach((function(e){void 0!==e.localized_headline&&null!==e.localized_headline&&(e.localized_headline=Object(J.g)(e.localized_headline,29,null)),void 0!==e.localized_body&&null!==e.localized_body&&(e.localized_body=Object(J.g)(e.localized_body,29,null)),void 0!==e.localized_image&&null!==e.localized_image&&(e.localized_image=Object(J.g)(e.localized_image,29,null))})),n.jsondata.localized_title_image.forEach((function(e,t){if(null!=e&&"http"==e.substr(0,4)){var o=e.lastIndexOf("/"),r=e.substr(o+1);n.jsondata.localized_title_image[t]=r}})),t.published?t.hidden?n.visibility_state=Ze.k_EEventStateStaged:n.visibility_state=Ze.k_EEventStateVisible:n.visibility_state=Ze.k_EEventStateUnpublished,this.InsertUniqueEventGID(e.GetAccountID(),n.appid,n.GID),this.m_mapExistingEvents.set(n.GID,n),n.AnnouncementGID&&n.AnnouncementGID.length>1&&this.m_mapAnnouncementBodyToEvent.set(n.AnnouncementGID,n.GID),n.bLoaded=!0,n},e.prototype.HelperInitializeNumSalesHeaderArray=function(e){if(void 0!==e.jsondata.sale_num_headers){e.jsondata.localized_per_day_sales_header=[];for(var t=0;t<e.jsondata.sale_num_headers;++t)e.jsondata.localized_per_day_sales_header.push(Object(J.g)([],29,null));e.m_overrideCurrentDay=0}else e.m_overrideCurrentDay=void 0},e.prototype.GetAllClanEvents=function(e){var t=this,n=new Array;return this.m_mapClanToGIDs.has(e.GetAccountID())&&this.m_mapClanToGIDs.get(e.GetAccountID()).forEach((function(e){var o=t.m_mapExistingEvents.get(e);o&&n.push(o)})),n},e.prototype.QueueLoadPartnerEvent=function(e,t){var n=this;this.m_rgQueuedEventsClanIDs.push(e),this.m_rgQueuedEventsUniqueIDs.push(t);var o=function(){n.InternalLoadPartnerEventList(n.m_rgQueuedEventsClanIDs,n.m_rgQueuedEventsUniqueIDs),n.m_rgQueuedEventsClanIDs=new Array,n.m_rgQueuedEventsUniqueIDs=new Array};if(this.m_rgQueuedEventsClanIDs.length>=30)this.m_QueuedEventTimeout.Cancel(),o();else if(!this.m_QueuedEventTimeout.IsScheduled()){this.m_QueuedEventTimeout.Schedule(50,o)}},e.prototype.InternalLoadPartnerEventList=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:n=D.c.STORE_BASE_URL+"events/ajaxgeteventdetails/",r=Object(Q.e)(D.c.LANGUAGE),i=""+r,0!=r&&(i+="_0"),a={clanid_list:e.join(","),uniqueid_list:t.join(","),lang_list:i,origin:self.origin},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.get(n,{params:a})];case 2:return s=o.sent(),this.RegisterClanEvents(s.data.events),[3,4];case 3:return c=o.sent(),l=Object(te.a)(c),console.error("GetEventDetails hit error "+l.strErrorMsg,l),[3,4];case 4:return[2]}}))}))},e.prototype.LoadAdjacentPartnerEvents=function(e,t,n,r,i,a,s){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadAdjacentPartnerEvents(e,void 0,t,n,r,i,a,s)]}))}))},e.prototype.LoadAdjacentPartnerEventsByAnnouncement=function(e,t,n,r,i,a,s){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadAdjacentPartnerEvents(void 0,e,t,n,r,i,a,s)]}))}))},e.prototype.LoadAdjacentPartnerEventsByEvent=function(e,t,n,r,i,a,s){return Object(o.b)(this,void 0,void 0,(function(){var c;return Object(o.e)(this,(function(o){return c=t||e.clanSteamID,e.bOldAnnouncement?[2,this.InternalLoadAdjacentPartnerEvents(void 0,e.AnnouncementGID,c,n,r,i,a,s)]:[2,this.InternalLoadAdjacentPartnerEvents(e.GID,e.AnnouncementGID,c,n,r,i,a,s)]}))}))},e.prototype.InternalLoadAdjacentPartnerEvents=function(e,t,n,r,i,a,s,c){return Object(o.b)(this,void 0,void 0,(function(){var l,p,u,m,d,h,f,_,g,b,v=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(l=new Array,this.m_mapAdjacentAnnouncementGIDs.has(t))return[3,5];p=D.c.STORE_BASE_URL+"events/ajaxgetadjacentpartnerevents/",u=Object(Q.e)(D.c.LANGUAGE),m=""+u,0!=u&&(m+="_0"),d={clan_accountid:n?n.GetAccountID():void 0,appid:r,count_before:i,count_after:a,gidevent:e,gidannouncement:t,lang_list:m,rtime_oldestevent:s?s.rtime_oldestevent:void 0,require_tags:s&&s.require_tags?s.require_tags.join(","):void 0,exclude_tags:s&&s.exclude_tags?s.exclude_tags.join(","):void 0,require_no_tags:s?s.require_no_tags:void 0,event_type_filter:s&&s.event_type_filter?s.event_type_filter.join(","):void 0,exclude_event_types:s&&s.exclude_event_types?s.exclude_event_types.join(","):void 0,origin:self.origin},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.get(p,{params:d,cancelToken:c?c.token:void 0})];case 2:return h=o.sent(),Object(w.E)((function(){for(var o=0,r=h.data.events;o<r.length;o++){var i=r[o],a=v.GetEventLookupKey(i);if(!v.m_mapExistingEvents.has(a)){var s=new Z.a(i.clan_steamid);v.InsertEventModelFromClanEventData(n||s,i)}l.push(v.m_mapExistingEvents.get(a))}0==l.length&&(e&&v.BHasClanEventModel(e)?l.push(v.m_mapExistingEvents.get(e)):t&&v.BHasClanAnnouncementGID(t)&&l.push(v.GetClanEventFromAnnouncementGID(t)))})),[3,4];case 3:return f=o.sent(),_=Object(te.a)(f),console.error("LoadAdjacentPartnerEvents hit error "+_.strErrorMsg,_),[3,4];case 4:return[3,7];case 5:return g=this.m_mapAdjacentAnnouncementGIDs.get(t),b=new Array,g.forEach((function(e){if(v.m_mapAnnouncementBodyToEvent.has(e)){var t=v.m_mapAnnouncementBodyToEvent.get(e);l.push(v.m_mapExistingEvents.get(t))}else b.push(e)})),b.length>0?[4,this.LoadBatchPartnerEventsByAnnouncementGID(null,b,c)]:[3,7];case 6:o.sent().forEach((function(e){return l.push(e)})),o.label=7;case 7:return[2,l]}}))}))},e.prototype.LoadPartnerEventsPageable=function(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),Object(o.b)(this,void 0,void 0,(function(){var i,a,s,c,l,p=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:i=new Array,a=D.c.STORE_BASE_URL+"events/ajaxgetpartnereventspageable/",s={clan_accountid:e?e.GetAccountID():void 0,appid:t,offset:n,count:r,l:D.c.LANGUAGE,origin:self.origin},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.get(a,{params:s})];case 2:return c=o.sent(),Object(w.E)((function(){for(var e=0,t=c.data.events;e<t.length;e++){var n=t[e],o=p.GetEventLookupKey(n);if(!p.m_mapExistingEvents.has(o)){var r=new Z.a(n.clan_steamid);p.InsertEventModelFromClanEventData(r,n)}i.push(p.m_mapExistingEvents.get(o))}})),[3,4];case 3:return l=o.sent(),console.error("LoadClanEventInDateRange hit error "+Object(te.a)(l)),[3,4];case 4:return[2,i]}}))}))},e.prototype.GetStartRangeWithDefault=function(e){return e&&0!=e?e:Qe.GetTimeNowWithOverride()-7776e3},e.prototype.GetEndRangeWithDefault=function(e,t){return t||e+864e4},e.prototype.LoadPartnerEventInDateRange=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:t=this.GetStartRangeWithDefault(t),n=this.GetEndRangeWithDefault(t,n),r=D.c.COMMUNITY_BASE_URL+"/gid/"+e.ConvertTo64BitString()+"/ajaxlistevents/",i={startRange:t,endRange:n,l:D.c.LANGUAGE,origin:self.origin},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.get(r,{params:i})];case 2:return a=o.sent(),Object(w.E)((function(){for(var t=0,n=JSON.parse(a.data.events);t<n.length;t++){var o=n[t];c.InsertEventModelFromClanEventData(e,o)}})),[3,4];case 3:return s=o.sent(),console.error("LoadClanEventInDateRange hit error "+Object(te.a)(s)),[3,4];case 4:return[2,this.GetAllClanEvents(e)]}}))}))},e.prototype.GetBestEventsForCurrentUser=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return r=new Array,i={l:D.c.LANGUAGE,include_steam_blog:!0,filter_to_played_within_days:e,include_only_game_updates:t},a=D.c.STORE_BASE_URL+"events/ajaxgetbesteventsforuser",[4,E.a.get(a,{params:i,withCredentials:!0,cancelToken:n?n.token:void 0})];case 1:return s=o.sent(),Object(w.E)((function(){for(var e=0,t=s.data.events;e<t.length;e++){var n=t[e],o=c.GetEventLookupKey(n);if(!c.m_mapExistingEvents.has(o)){var i=new Z.a(n.clan_steamid);c.InsertEventModelFromClanEventData(i,n)}var a={nAppPriority:n.nAppPriority,bPossibleTakeOver:n.bPossibleTakeOver,event:c.m_mapExistingEvents.get(o)};r.push(a)}})),[2,r]}}))}))},e.prototype.LoadImportantEventsAroundToday=function(e,t,n,r,i,a){return Object(o.b)(this,void 0,void 0,(function(){var s,c,l,p,u,m=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return s=new Array,(c=new Array).push({priority:0,appids:t}),n&&c.push({priority:1,appids:n}),r&&c.push({priority:2,appids:r}),l={count:e,strAppIDPriority:JSON.stringify({prioritized_apps:c}),filterToEventTypes:a?a.toString():"",l:D.c.LANGUAGE},p=D.c.STORE_BASE_URL+"events/ajaxgettodayboundedevents",[4,E.a.get(p,{params:l,withCredentials:!0,cancelToken:i.token})];case 1:return u=o.sent(),Object(w.E)((function(){for(var e=0,t=u.data.events;e<t.length;e++){var n=t[e],o=m.GetEventLookupKey(n);if(!m.m_mapExistingEvents.has(o)){var r=new Z.a(n.clan_steamid);m.InsertEventModelFromClanEventData(r,n)}s.push(m.m_mapExistingEvents.get(o))}})),[2,s]}}))}))},e.prototype.InsertUniqueEventGID=function(e,t,n){this.m_mapClanToGIDs.has(e)||this.m_mapClanToGIDs.set(e,new Array),this.m_mapAppIDToGIDs.has(t)||this.m_mapAppIDToGIDs.set(t,new Array);var o=this.m_mapClanToGIDs.get(e);-1==o.indexOf(n)&&(o.push(n),this.m_mapAppIDToGIDs.get(t).push(n))},e.prototype.ResetModel=function(){},e.prototype.DeleteClanEvent=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_mapExistingEvents.has(t)&&(this.m_mapExistingEvents.get(t).deleteInProgress=!0),n=null,(r=new URLSearchParams).append("sessionid",D.c.SESSIONID),r.append("bDelete","1"),r.append("gid",t),[4,E.a.post(D.c.COMMUNITY_BASE_URL+"/gid/"+e.ConvertTo64BitString()+"/ajaxcreateupdatedeletepartnerevents/",r)];case 1:return n=o.sent(),this.RemoveGIDFromList(e,t),[2,n.data]}}))}))},e.prototype.RemoveGIDFromList=function(e,t){if(this.m_mapExistingEvents.delete(t),this.m_mapClanToGIDs.has(e.GetAccountID())){var n=this.m_mapClanToGIDs.get(e.GetAccountID()),o=n.indexOf(t);o>=0&&n.splice(o,1)}},e.prototype.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGID=function(e,t,n,r,i,a){return void 0===a&&(a=!1),Object(o.b)(this,void 0,void 0,(function(){var s,c,l,p,u,m,d,h,f;return Object(o.e)(this,(function(o){switch(o.label){case 0:return s=Object(Q.e)(D.c.LANGUAGE),c=""+s,a?c="0":0!=s&&(c+="_0"),l={appid:t,clan_accountid:e?e.GetAccountID():void 0,announcement_gid:r,event_gid:n,lang_list:c,last_modified_time:i||0,origin:self.origin},p=null,u=null,a?("community"===Object(D.e)()?(u=D.c.COMMUNITY_BASE_URL,u+=e?"gid/"+e.ConvertTo64BitString():"ogg/"+t,u+="/"):u=D.c.STORE_BASE_URL+"events/",u+="ajaxgetpartnereventforedit",p={params:l,withCredentials:!0}):(u=D.c.STORE_BASE_URL+"events/ajaxgetpartnerevent",p={params:l,withCredentials:!1}),[4,E.a.get(u,p)];case 1:return m=o.sent(),d=m.data.event,h=this.GetEventLookupKey(d),this.m_mapExistingEvents.has(h)||(Object(X.a)(d.clan_steamid,"ClanSteamID is missing from data we received"),f=new Z.a(d.clan_steamid),this.InsertEventModelFromClanEventData(f,d)),[2,this.m_mapExistingEvents.get(h)]}}))}))},e.prototype.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGIDCached=function(e,t,n,r,i){return Object(o.b)(this,void 0,void 0,(function(){var a;return Object(o.e)(this,(function(o){if(n&&this.m_mapExistingEvents.has(n))return[2,this.m_mapExistingEvents.get(n)];if(r){if(this.m_mapExistingEvents.has("old_announce_"+r))return[2,this.m_mapExistingEvents.get("old_announce_"+r)];if(this.m_mapAnnouncementBodyToEvent.has(r)&&(a=this.m_mapAnnouncementBodyToEvent.get(r),this.m_mapExistingEvents.has(a)))return[2,this.m_mapExistingEvents.get(a)]}return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGID(e,t,n,r,i)]}))}))},e.prototype.LoadPartnerEventFromAnnoucementGID=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGIDCached(void 0,e,void 0,t,n)]}))}))},e.prototype.LoadPartnerEventFromAnnoucementGIDAndClanSteamID=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGIDCached(e,void 0,void 0,t,n)]}))}))},e.prototype.LoadPartnerEventFromClanEventGID=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGIDCached(void 0,e,t,void 0,n)]}))}))},e.prototype.LoadPartnerEventFromClanEventGIDAndClanSteamID=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGIDCached(e,void 0,t,void 0,n)]}))}))},e.prototype.LoadPartnerEventGeneric=function(e,t,n,r,i){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGIDCached(e,t,n,r,i)]}))}))},e.prototype.ForceLoadSteamGameFestivalArtistStatement=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return[2,this.InternalLoadPartnerEventFromClanEventOrClanAnnouncementGID(e,null,t,null,0,!0)]}))}))},e.prototype.HintLoadImportantUpdates=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return 36e5,(e=Object(K.b)(36e5))==this.m_tsUpdatedAppsQueryTime?[3,2]:(this.m_tsUpdatedAppsQueryTime=e,t={page:1,numPerPage:500,includeAnnouncements:!1},n=D.c.STORE_BASE_URL+"updated/ajaxgetmyappsraw",[4,E.a.get(n,{params:t,withCredentials:!0})]);case 1:(r=o.sent()).data.apps&&r.data.apps.length>0&&Object(w.E)((function(){var e=new Map(r.data.apps.map((function(e){return[e.appid,new it(e)]})));i.m_mapUpdatedApps=e})),o.label=2;case 2:return[2,this.m_mapUpdatedApps]}}))}))},e.prototype.GetAppImportantUpdate=function(e){return this.HintLoadImportantUpdates().catch((function(e){console.log("UpdatedApps failed to load: ",e.response.data)})),this.m_mapUpdatedApps&&this.m_mapUpdatedApps.get(e)},e.prototype.LoadClanEventLocalizationFromAnnouncementGID=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=D.c.COMMUNITY_BASE_URL+"gid/"+e.ConvertTo64BitString()+"/announcements/ajaxgetlocalization/"+t,[4,E.a.get(n)];case 1:return[2,o.sent().data.localization]}}))}))},e.prototype.LoadBatchPartnerEventsByAnnouncementGID=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c,l,p,u,m,d,h,f,_=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(r=new Array,i=D.c.STORE_BASE_URL+"events/ajaxgetbatchedpartnerevent/",a=Object(Q.e)(D.c.LANGUAGE),s=""+a,0!=a&&(s+="_0"),c=void 0,l=void 0,e&&(p=new Array,e.forEach((function(e){_.m_mapExistingEvents.has(e)?r.push(_.m_mapExistingEvents.get(e)):p.push(e)})),p.sort(),c=p.join(",")),t&&(u=new Array,t.forEach((function(e){if(_.m_mapAnnouncementBodyToEvent.has(e)&&_.m_mapExistingEvents.has(_.m_mapAnnouncementBodyToEvent.get(e))){var t=_.m_mapAnnouncementBodyToEvent.get(e);r.push(_.m_mapExistingEvents.get(t))}else u.push(e)})),u.sort(),l=u.join(",")),!c&&!l)return[2,r];m={event_gids:c,announcement_gids:l,lang_list:s,origin:self.origin},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.get(i,{params:m,cancelToken:n?n.token:void 0})];case 2:return(d=o.sent())&&d.data&&d.data.events&&Object(w.E)((function(){for(var e=0,t=d.data.events;e<t.length;e++){var n=t[e],o=_.GetEventLookupKey(n);if(!_.m_mapExistingEvents.has(o)){var i=new Z.a(n.clan_steamid);_.InsertEventModelFromClanEventData(i,n)}r.push(_.m_mapExistingEvents.get(o))}})),[3,4];case 3:return h=o.sent(),f=Object(te.a)(h),console.error("LoadBatchPartnerEventsByAnnouncementGID hit error "+f.strErrorMsg,f),[3,4];case 4:return[2,r]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapExistingEvents",void 0),Object(o.c)([w.A],e.prototype,"m_mapAnnouncementBodyToEvent",void 0),Object(o.c)([w.A],e.prototype,"m_mapClanToGIDs",void 0),Object(o.c)([w.A],e.prototype,"m_mapAppIDToGIDs",void 0),Object(o.c)([w.A],e.prototype,"m_mapUpdatedApps",void 0),Object(o.c)([w.i],e.prototype,"Init",null),Object(o.c)([w.i],e.prototype,"RegisterClanEvents",null),Object(o.c)([w.i],e.prototype,"InsertEventModelFromClanEventData",null),Object(o.c)([w.i],e.prototype,"DeleteClanEvent",null),Object(o.c)([w.i],e.prototype,"RemoveGIDFromList",null),Object(o.c)([w.A],e.prototype,"GetAppImportantUpdate",null),e}(),st=new at;window.g_PartnerEventStore=st;var ct=function(){function e(e){this.appid=e.appid,this.demo_appid=e.demo_appid,this.demo_package_id=0,this.ogg_clanid=e.ogg_clanid,this.info_clan_event_gid=e.info_clan_event_gid,this.upcoming_clan_event_gid=e.upcoming_clan_event_gid,this.upcoming_clan_event_type=e.upcoming_clan_event_type,this.last_clan_event_gid=e.last_clan_event_gid,this.last_clan_event_type=e.last_clan_event_type}return e.prototype.BHasArtistStatement=function(){return Boolean(this.info_clan_event_gid)},e}(),lt=function(){function e(){this.m_mapAppToDemoInfo=new Map,this.m_mapAppIDToLoadPromise=new Map}return e.Get=function(){return e.s_DemoEventStore||(e.s_DemoEventStore=new e,e.s_DemoEventStore.Init()),e.s_DemoEventStore},e.prototype.BHasDemoEventInfo=function(e){return this.m_mapAppToDemoInfo.has(e)},e.prototype.GetDemoEventInfo=function(e){return this.m_mapAppToDemoInfo.get(e)},e.prototype.GetAllDemoInfo=function(){return this.m_mapAppToDemoInfo},e.prototype.BHasAboutDemo=function(e){var t=this.m_mapAppToDemoInfo.get(e);return t&&Boolean(t.info_clan_event_gid)},e.prototype.BHasDemoAppID=function(e){var t=this.m_mapAppToDemoInfo.get(e);return t&&Boolean(t.demo_appid)},e.prototype.GetNumDemos=function(){var e=0;return this.m_mapAppToDemoInfo.forEach((function(t){t.demo_appid>0&&(e+=1)})),e},e.prototype.SetCollectionInfo=function(e,t){this.m_sFeaturedCollection=e,this.m_sInfoCollection=t},e.prototype.Init=function(){var e=this,t=Object(D.g)("demoeventstore","application_config");this.ValidateStoreDefault(t)&&t.forEach((function(t){e.m_mapAppToDemoInfo.set(t.appid,new ct(t))}))},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].appid&&"number"==typeof t[0].demo_package_id)},e.prototype.LoadAppIDsBatch=function(e,t,n){return void 0===t&&(t=!1),Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_sFeaturedCollection&&this.m_sInfoCollection?(r=new Array,i=new Array,e.forEach((function(e){c.m_mapAppIDToLoadPromise.has(e)?i.push(c.m_mapAppIDToLoadPromise.get(e)):c.m_mapAppToDemoInfo.has(e)||r.push(e)})),r.length>0&&(a=this.InternalLoadAppIDsBatch(r,t,n),r.forEach((function(e){return c.m_mapAppIDToLoadPromise.set(e,a)})),i.push(a)),[4,Promise.all(i)]):(console.error("DemoStore: LoadAppIDsBatch no collection initialized"),[2,!1]);case 1:return s=o.sent(),[2,s.every((function(e){return e}))]}}))}))},e.prototype.InternalLoadAppIDsBatch=function(e,t,n){return void 0===t&&(t=!1),Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s=this;return Object(o.e)(this,(function(c){switch(c.label){case 0:c.trys.push([0,4,,5]),e=e.sort(),r=function(){var r,a,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:return 50,r=Math.min(50,e.length),a=e.slice(0,r),e=e.slice(r),c=D.c.STORE_BASE_URL+"saleaction/ajaxgetdemoevents",[4,E.a.get(c,{params:{appids:a,cc:D.c.COUNTRY||"US",origin:self.origin,collectionid_featured:i.m_sFeaturedCollection,collectionid_info:i.m_sInfoCollection,load_events:t},cancelToken:n?n.token:void 0})];case 1:return 1===(l=o.sent()).data.success||42===l.data.success?Object(w.E)((function(){l.data.info.forEach((function(e){s.m_mapAppToDemoInfo.set(e.appid,new ct(e))}));for(var t=0,n=e;t<n.length;t++){var o=n[t];s.m_mapAppToDemoInfo.has(o)||s.m_mapAppToDemoInfo.set(o,new ct({appid:o})),s.m_mapAppIDToLoadPromise.delete(o)}st.RegisterClanEvents(l.data.events)})):console.log("Failed to call ajaxgetdemoevents with response:"+l.data.err_msg),[2]}}))},i=this,c.label=1;case 1:return e.length>0?[5,r()]:[3,3];case 2:return c.sent(),[3,1];case 3:return[2,!0];case 4:return a=c.sent(),console.log("Failed to call ajaxgetdemoevents:"+a),[3,5];case 5:return[2,!1]}}))}))},e.prototype.EnsurePartnerEventLoadedForDemo=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=new Array,(r=this.m_mapAppToDemoInfo.get(e))?(r.info_clan_event_gid&&n.push(r.info_clan_event_gid),r.last_clan_event_gid&&n.push(r.last_clan_event_gid),r.upcoming_clan_event_gid&&n.push(r.upcoming_clan_event_gid),[4,st.LoadBatchPartnerEventsByAnnouncementGID(n,null,t)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},Object(o.c)([w.A.shallow],e.prototype,"m_mapAppToDemoInfo",void 0),Object(o.c)([w.i],e.prototype,"Init",null),Object(o.c)([w.i],e.prototype,"LoadAppIDsBatch",null),e}(),pt=n("z9WT"),ut=new(function(){function e(){this.m_mapWishList=new Map,this.m_mapOwnedPackages=new Map,this.m_mapOwnedApps=new Map,this.m_mapFollowedApps=new Map,this.m_mapExcludedTagsIds=new Map,this.m_mapExcludedContentDescriptors=new Map,this.m_mapRecommendedApps=new Map,this.m_mapIgnoredApps=new Map,this.m_mapCreatorsFollowed=new Map,this.m_mapCreatorsIgnored=new Map,this.m_bShowFilteredUserReviewScores=!0,this.m_bIsLoaded=!1}return e.prototype.BIsLoaded=function(){return this.m_bIsLoaded},e.prototype.GetCreatorsFollowed=function(){return Array.from(this.m_mapCreatorsFollowed.keys())},e.prototype.GetCreatorsIgnored=function(){return Array.from(this.m_mapCreatorsIgnored.keys())},e.prototype.BIsFollowingCreator=function(e){return this.m_mapCreatorsFollowed.has(e.GetAccountID())},e.prototype.BIsIgnoringCreator=function(e){return this.m_mapCreatorsIgnored.has(e.GetAccountID())},e.prototype.GetExcludedContentDescriptor=function(){return Array.from(this.m_mapExcludedContentDescriptors.keys())},e.prototype.BExcludesTag=function(e){var t=this;return e.some((function(e){return t.m_mapExcludedTagsIds.has(Number(e.tagid))}))},e.prototype.GetExcludedTagsSortedByID=function(){return Array.from(this.m_mapExcludedTagsIds.keys()).sort()},e.prototype.BExcludesContentDescriptor=function(e){var t=this;return e.some((function(e){return t.m_mapExcludedContentDescriptors.has(e)}))},e.prototype.BIsGameWishlisted=function(e){return this.m_mapWishList.has(Number(e))},e.prototype.BIsGameRecommended=function(e){return this.m_mapRecommendedApps.has(Number(e))},e.prototype.BIsGameIgnored=function(e){return this.m_mapIgnoredApps&&this.m_mapIgnoredApps.has(e)},e.prototype.BOwnsApp=function(e){return this.m_mapOwnedApps.has(Number(e))},e.prototype.BFollowsApp=function(e){return this.m_mapFollowedApps.has(Number(e))},e.prototype.BOwnsPackage=function(e){return this.m_mapOwnedPackages.has(Number(e))},e.prototype.BShowFilteredUserReviewScores=function(){return this.m_bShowFilteredUserReviewScores},e.prototype.HintLoad=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return this.m_promise||(this.m_promise=this.InternalLoad()),[2,this.m_promise]}))}))},e.prototype.InternalLoad=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=sessionStorage.getItem("unUserdataVersion")||"0",t={v:e,id:""+D.i.accountid},n=D.c.STORE_BASE_URL+"dynamicstore/userdata/",[4,E.a.get(n,{params:t,withCredentials:!0})];case 1:return(r=o.sent())&&200==r.status&&Object(w.E)((function(){if(i.m_bIsLoaded=!0,r.data.rgCreatorsFollowed&&(i.m_mapCreatorsFollowed=new Map(r.data.rgCreatorsFollowed.map((function(e){return[Number(e),!0]})))),r.data.rgCreatorsIgnored&&(i.m_mapCreatorsIgnored=new Map(r.data.rgCreatorsIgnored.map((function(e){return[Number(e),!0]})))),r.data.rgWishlist&&(i.m_mapWishList=new Map(r.data.rgWishlist.map((function(e){return[Number(e),!0]})))),r.data.rgFollowedApps&&(i.m_mapFollowedApps=new Map(r.data.rgFollowedApps.map((function(e){return[Number(e),!0]})))),r.data.rgOwnedApps&&(i.m_mapOwnedApps=new Map(r.data.rgOwnedApps.map((function(e){return[Number(e),!0]})))),r.data.rgOwnedPackages&&(i.m_mapOwnedPackages=new Map(r.data.rgOwnedPackages.map((function(e){return[Number(e),!0]})))),r.data.rgIgnoredApps){var e=r.data.rgIgnoredApps;for(var t in e)i.m_mapIgnoredApps.set(Number(t),Number(e[t]))}r.data.rgExcludedTags&&(i.m_mapExcludedTagsIds=new Map(r.data.rgExcludedTags.map((function(e){return[Number(e.tagid),!0]})))),r.data.rgExcludedContentDescriptorIDs&&(i.m_mapExcludedContentDescriptors=new Map(r.data.rgExcludedContentDescriptorIDs.map((function(e){return[e,!0]})))),r.data.rgRecommendedApps&&(i.m_mapRecommendedApps=new Map(r.data.rgRecommendedApps.map((function(e){return[Number(e),!0]})))),i.m_bShowFilteredUserReviewScores=!!r.data.bShowFilteredUserReviewScores})),[2,this]}}))}))},e.prototype.UpdateFollowOrIgnoreCurator=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:return r=D.c.STORE_BASE_URL+"curators/"+(t?"ajaxfollow/":"ajaxignore/"),i=e.GetAccountID(),(a=new FormData).append("authwgtoken",D.i.authwgtoken),a.append("clanid",""+i),a.append("sessionid",D.c.SESSIONID),a.append(t?"follow":"ignore",n?"1":"0"),[4,E.a.post(r,a,{withCredentials:!0})];case 1:return(s=o.sent())&&200==s.status&&(this.InvalidateCache(),c=t?this.m_mapCreatorsFollowed:this.m_mapCreatorsIgnored,n?c.set(i,!0):c.delete(i)),[2,s.data]}}))}))},e.prototype.UpdateAppIgnore=function(e,t,n){return void 0===n&&(n=0),Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:r=D.c.STORE_BASE_URL+"recommended/ignorerecommendation",(i=new FormData).append("sessionid",D.c.SESSIONID),i.append("appid",""+e),i.append("remove",t?"0":"1"),i.append("snr",D.c.SNR),i.append("ignore_reason",""+n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(r,i,{withCredentials:!0})];case 2:return(a=o.sent())&&200==a.status&&Object(w.E)((function(){c.InvalidateCache(),t?c.m_mapIgnoredApps.set(e,n):c.m_mapIgnoredApps.delete(e)})),[2,a.data];case 3:return s=o.sent(),console.error("UpdateAppIgnore",Object(te.a)(s)),[3,4];case 4:return[2,{success:2}]}}))}))},e.prototype.UpdateGameWishlist=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=D.c.STORE_BASE_URL+"api/"+(t?"addtowishlist":"removefromwishlist"),(r=new FormData).append("appid",""+e),r.append("sessionid",D.c.SESSIONID),[4,E.a.post(n,r,{withCredentials:!0})];case 1:return(i=o.sent()).data.success=1==i.data.success?1:2,1==i.data.success&&(this.InvalidateCache(),t?this.m_mapWishList.set(Number(e),!0):this.m_mapWishList.delete(Number(e))),[2,i.data]}}))}))},e.prototype.AddToCart=function(e,t,n,r,i){return Object(o.b)(this,void 0,void 0,(function(){var a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:(a=new FormData).append("action","add_to_cart"),i?a.append("bundleid",i.toString()):a.append("subid",""+t),(s=D.i.authwgtoken)?a.append("authwgtoken",s):a.append("sessionid",D.c.SESSIONID),a.append("quantity","1"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(n,a,{withCredentials:!0})];case 2:return o.sent(),c=D.c.IN_CLIENT?"steam://url/StoreCart":r,e.preventDefault(),this.InvalidateCache(),Object(pt.f)(window,c),[3,4];case 3:return l=o.sent(),console.log("HandleOnAddToCart"),console.log(l),[3,4];case 4:return[2]}}))}))},e.prototype.AddLicenseForFreeGame=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.BOwnsApp(e))return[2,1];o.label=1;case 1:return o.trys.push([1,3,,4]),(t=new FormData).append("sessionid",D.c.SESSIONID),t.append("authwgtoken",D.i.authwgtoken),t.append("appid",""+e),t.append("cc",D.c.COUNTRY),n=D.c.STORE_BASE_URL+"actions/addappformastersubscription",[4,E.a.post(n,t,{withCredentials:!0})];case 2:return(r=o.sent()).data.success&&1===r.data.success?(this.m_mapOwnedApps.set(Number(e),!0),[3,4]):[2,r.data.success?r.data.success:2];case 3:return i=o.sent(),console.log("AddLicense request failed:",Object(te.a)(i)),[2,2];case 4:return[2,1]}}))}))},e.prototype.UpdateFollowingApp=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=D.c.STORE_BASE_URL+"explore/followgame",(r=new FormData).append("appid",""+e),r.append("sessionid",D.c.SESSIONID),t||r.append("unfollow","1"),[4,E.a.post(n,r,{withCredentials:!0})];case 1:return i=o.sent(),i.data?(this.InvalidateCache(),t?this.m_mapFollowedApps.set(Number(e),!0):this.m_mapFollowedApps.delete(Number(e)),[3,3]):[2,2];case 2:return o.sent(),console.log("Follow game request failed"),[2,2];case 3:return[2,1]}}))}))},e.prototype.InvalidateCache=function(){sessionStorage.setItem("unUserdataVersion",(Number.parseInt(sessionStorage.getItem("unUserdataVersion")||"0")+1).toString())},Object(o.c)([w.A],e.prototype,"m_mapWishList",void 0),Object(o.c)([w.A],e.prototype,"m_mapOwnedPackages",void 0),Object(o.c)([w.A],e.prototype,"m_mapOwnedApps",void 0),Object(o.c)([w.A],e.prototype,"m_mapFollowedApps",void 0),Object(o.c)([w.A],e.prototype,"m_mapExcludedTagsIds",void 0),Object(o.c)([w.A],e.prototype,"m_mapExcludedContentDescriptors",void 0),Object(o.c)([w.A],e.prototype,"m_mapRecommendedApps",void 0),Object(o.c)([w.A],e.prototype,"m_mapIgnoredApps",void 0),Object(o.c)([w.A],e.prototype,"m_mapCreatorsFollowed",void 0),Object(o.c)([w.A],e.prototype,"m_mapCreatorsIgnored",void 0),Object(o.c)([w.A],e.prototype,"m_bShowFilteredUserReviewScores",void 0),Object(o.c)([w.i],e.prototype,"UpdateAppIgnore",null),e}()),mt=n("EGkk"),dt=n("TY1L"),ht=n.n(dt),ft=n("6b33").default;function _t(e,t){return e.endsWith("/")||(e+="/"),e+"login/"+t+"/"}function gt(){var e=new FormData;return e.append("donotcache",(new Date).getTime().toString()),e}function bt(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:t=gt(),n=_t(e,"refreshcaptcha"),r="",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(n,t)];case 2:return 200!=(i=o.sent()).status?[2,!1]:(r=i.data.gid,[3,4]);case 3:return o.sent(),[2,!1];case 4:return[2,r]}}))}))}function vt(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:(n=gt()).append("username",t),r=_t(e,"getrsakey"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(r,n)];case 2:return 200!=(a=o.sent()).status?[2,null]:(s=a.data)&&s.success&&s.publickey_mod&&s.publickey_exp&&s.timestamp?(i=s,[3,4]):[2,null];case 3:return o.sent(),[2,null];case 4:return[2,i]}}))}))}function yt(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a,s,c,l,p,u,m;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(i=ft.getPublicKey(r.publickey_mod,r.publickey_exp),!1===(a=ft.encrypt(n.strPassword,i)))return[2,null];(s=gt()).append("password",a),s.append("username",n.strUserName),s.append("twofactorcode",n.strTwoFactorCode||""),s.append("emailauth",n.strEmailAuthCode||""),s.append("loginfriendlyname",""),s.append("captchagid",n.gidCaptcha||""),s.append("captcha_text",n.strCaptchaText||""),s.append("emailsteamid",n.emailSteamID||""),s.append("rsatimestamp",r.timestamp),s.append("remember_login",n.bRememberLogin?"true":"false"),c={},t&&(s.append("oauth_client_id",t),s.append("mobile_chat_client","true")),l=_t(e,"dologin"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(l,s,c)];case 2:return 200!=(u=o.sent()).status?[2,null]:(m=u.data)?(m.oauth&&(m.oauth=JSON.parse(m.oauth)),p=m,[3,4]):[2,null];case 3:return o.sent(),[2,null];case 4:return[2,p]}}))}))}function St(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(n=Object.assign({},n)).strUserName&&(n.strUserName=n.strUserName.replace(/[^\x00-\x7F]/g,"")),!n.strPassword||n.strPassword.match(/[^\x00-\x7F]/)?[2,null]:n.strUserName?[4,vt(e,n.strUserName)]:[2,null];case 1:return(r=o.sent())?[4,yt(e,t,n,r)]:(console.log("Failed to get RSA key"),[2,null]);case 2:return[2,o.sent()]}}))}))}var Ct,Ot;!function(e){e[e.Invalid=0]="Invalid",e[e.AccountName=1]="AccountName",e[e.EmailCode=2]="EmailCode",e[e.TwoFactorCode=3]="TwoFactorCode",e[e.Complete=4]="Complete"}(Ct||(Ct={})),function(e){e[e.None=0]="None",e[e.InvalidCode=1]="InvalidCode"}(Ot||(Ot={}));var It=function(){function e(e,t){this.m_strBaseURL="",this.m_strOAuthClientID="",this.m_fnLoginComplete=null,this.m_bRequestInFlight=!1,this.m_eCurrentStep=Ct.AccountName,this.m_strErrorMessage="",this.m_strEmailDomain="",this.m_strCaptchaURL="",this.m_eSteamGuardCodeError=Ot.None,this.m_strBaseURL=e,this.m_strOAuthClientID=t,this.m_userFields={strUserName:"",strPassword:"",strTwoFactorCode:"",strEmailAuthCode:"",emailSteamID:"",gidCaptcha:"",strCaptchaText:"",bRememberLogin:!1}}return e.prototype.Shutdown=function(){this.m_fnLoginComplete=null},e.prototype.SetLoginCompleteCallback=function(e){this.m_fnLoginComplete=e},e.prototype.SetUserName=function(e){this.m_userFields.strUserName=e},e.prototype.GetUserName=function(){return this.m_userFields.strUserName},e.prototype.SetPassword=function(e){this.m_userFields.strPassword=e},e.prototype.GetPassword=function(){return this.m_userFields.strPassword},e.prototype.SetRememberPassword=function(e){this.m_userFields.bRememberLogin=e},e.prototype.GetRememberPassword=function(){return this.m_userFields.bRememberLogin},e.prototype.SetEmailAuthCode=function(e){this.m_userFields.strEmailAuthCode=e},e.prototype.GetEmailAuthCode=function(){return this.m_userFields.strEmailAuthCode},e.prototype.GetEmailDomain=function(){return this.m_strEmailDomain},e.prototype.SetTwoFactorCode=function(e){this.m_userFields.strTwoFactorCode=e},e.prototype.GetTwoFactorCode=function(){return this.m_userFields.strTwoFactorCode},e.prototype.SetCaptchaText=function(e){this.m_userFields.strCaptchaText=e},e.prototype.GetCaptchaText=function(){return this.m_userFields.strCaptchaText},e.prototype.IsRequestInFlight=function(){return this.m_bRequestInFlight},e.prototype.GetCurrentStep=function(){return this.m_eCurrentStep},e.prototype.GetErrorMessage=function(){return this.m_strErrorMessage},e.prototype.SetInitialErrorMessage=function(e){this.m_strErrorMessage=e},e.prototype.GetSteamGuardCodeError=function(){return this.m_eSteamGuardCodeError},e.prototype.GetCaptchaURL=function(){return this.m_strCaptchaURL},e.prototype.DoLogin=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t=this;return Object(o.e)(this,(function(n){switch(n.label){case 0:return this.m_bRequestInFlight?[2]:(Object(w.E)((function(){t.m_bRequestInFlight=!0,t.m_strErrorMessage=""})),[4,St(this.m_strBaseURL,this.m_strOAuthClientID,this.m_userFields)]);case 1:return e=n.sent(),Object(w.E)((function(){t.m_bRequestInFlight=!1,t.UpdateLoginResult(e)})),[2]}}))}))},e.prototype.UpdateLoginResult=function(e){if(!e)return console.log("Login timeout"),void(this.m_strErrorMessage=Object(k.d)("#ConnectionTrouble_FailedToConnect"));if(e.login_complete){if(this.m_eCurrentStep=Ct.Complete,this.m_fnLoginComplete){var t={steamID:e.oauth?e.oauth.steamid:"",strAccountName:e.oauth?e.oauth.account_name:"",strOAuthToken:e.oauth?e.oauth.oauth_token:""};this.m_fnLoginComplete(t)}}else this.m_strErrorMessage=e.message||"",this.m_eSteamGuardCodeError=Ot.None,e.requires_twofactor?(this.UpdateCaptchaURL("-1"),this.m_eCurrentStep!=Ct.TwoFactorCode||this.m_strErrorMessage||(this.m_strErrorMessage=Object(k.d)("#MobileLogin_IncorrectSteamGuard"),this.m_eSteamGuardCodeError=Ot.InvalidCode,this.m_userFields.strTwoFactorCode=""),this.m_eCurrentStep=Ct.TwoFactorCode):e.captcha_needed&&e.captcha_gid?(this.m_eCurrentStep=Ct.AccountName,this.UpdateCaptchaURL(e.captcha_gid)):e.emailauth_needed?(e.emaildomain&&(this.m_strEmailDomain=e.emaildomain),e.emailsteamid&&(this.m_userFields.emailSteamID=e.emailsteamid),this.m_eCurrentStep!=Ct.EmailCode||this.m_strErrorMessage||(this.m_strErrorMessage=Object(k.d)("#MobileLogin_IncorrectSteamGuard"),this.m_eSteamGuardCodeError=Ot.InvalidCode,this.m_userFields.strEmailAuthCode=""),this.m_eCurrentStep=Ct.EmailCode):console.log("Unhandled login error")},e.prototype.RefreshCaptcha=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,bt(this.m_strBaseURL)];case 1:return(e=t.sent())?(this.UpdateCaptchaURL(e),[2]):(console.log("Failed to get captcha"),[2])}}))}))},e.prototype.UpdateCaptchaURL=function(e){this.m_userFields.gidCaptcha=e,this.m_userFields.strCaptchaText="",this.m_strCaptchaURL="-1"!=e?function(e,t){return _t(e,"rendercaptcha")+"?gid="+t}(this.m_strBaseURL,e):""},Object(o.c)([w.A],e.prototype,"m_bRequestInFlight",void 0),Object(o.c)([w.A],e.prototype,"m_userFields",void 0),Object(o.c)([w.A],e.prototype,"m_eCurrentStep",void 0),Object(o.c)([w.A],e.prototype,"m_strErrorMessage",void 0),Object(o.c)([w.A],e.prototype,"m_strEmailDomain",void 0),Object(o.c)([w.A],e.prototype,"m_strCaptchaURL",void 0),Object(o.c)([w.A],e.prototype,"m_eSteamGuardCodeError",void 0),Object(o.c)([ne.a],e.prototype,"DoLogin",null),Object(o.c)([w.i.bound],e.prototype,"UpdateCaptchaURL",null),e}(),Et=function(e){function t(t){var n=e.call(this,t)||this;return n.m_manager=new It(n.props.baseURL),n.props.onLoginComplete&&n.m_manager.SetLoginCompleteCallback(n.props.onLoginComplete),n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_manager.Shutdown()},t.prototype.render=function(){var e=this.props,t=(e.baseURL,e.onLoginComplete,e.className),n=Object(o.f)(e,["baseURL","onLoginComplete","className"]),r=Object(R.a)(ht.a.LoginDialog,t),i=this.m_manager.GetCurrentStep(),s=this.m_manager.GetErrorMessage();return a.a.createElement("div",Object(o.a)({className:r},n),a.a.createElement("div",{className:ht.a.LoginPanelBackground},a.a.createElement(N.cb,null)),a.a.createElement("div",{className:ht.a.LoginPanelContent},s&&a.a.createElement(wt,{text:s}),i==Ct.AccountName&&a.a.createElement(At,{manager:this.m_manager}),i==Ct.TwoFactorCode&&a.a.createElement(Tt,{manager:this.m_manager,authtype:Ct.TwoFactorCode}),i==Ct.EmailCode&&a.a.createElement(Tt,{manager:this.m_manager,authtype:Ct.EmailCode}),i==Ct.Complete&&a.a.createElement("div",{className:ht.a.LoginComplete},a.a.createElement(ge.a,null))))},t=Object(o.c)([r.a],t)}(a.a.Component);function wt(e){return a.a.createElement("div",{className:ht.a.ErrorMessage},e.text)}var At=function(e){function t(t){var n=e.call(this,t)||this;return n.state={nNameSize:0,nPassSize:0},n}return Object(o.d)(t,e),t.prototype.OnSubmit=function(e){e.preventDefault(),this.props.manager.DoLogin()},t.prototype.OnChangeName=function(e){var t=e.target.value||"";this.props.manager.SetUserName(e.target.value),t.length>24&&t.length<39?this.setState({nNameSize:1}):t.length>38?this.setState({nNameSize:2}):this.setState({nNameSize:0})},t.prototype.OnChangePassword=function(e){var t=e.target.value||"";t=t.replace(/[^\x00-\x7F]/g,""),this.props.manager.SetPassword(t),t.length>19&&t.length<39?this.setState({nPassSize:1}):t.length>38?this.setState({nPassSize:2}):this.setState({nPassSize:0})},t.prototype.OnChangeRememberPass=function(e){this.props.manager.SetRememberPassword(e.target.checked)},t.prototype.render=function(){var e,t,n=this,o=this.props.manager;return t=1==this.state.nPassSize?ht.a.MedPass:2==this.state.nPassSize?ht.a.LargePass:ht.a.DefaultPass,e=1==this.state.nNameSize?ht.a.MedName:2==this.state.nNameSize?ht.a.LargeName:ht.a.DefaultNAme,a.a.createElement("div",{className:ht.a.AccountPasswordPanel},a.a.createElement("div",{className:ht.a.SigninTitle},Object(k.d)("#Login_SignIn")),a.a.createElement("form",{className:ht.a.AccountPasswordForm,onSubmit:this.OnSubmit},a.a.createElement(j.o,{className:Object(R.a)(ht.a.AccountNameLabel,e),label:Object(k.d)("#Login_AccountName"),type:"text",value:o.GetUserName(),focusOnMount:!0,maxLength:64,onChange:this.OnChangeName}),a.a.createElement(j.o,{bIsPassword:!0,className:Object(R.a)(ht.a.PasswordDots,t),label:Object(k.d)("#Login_Password"),type:"password",autoComplete:"off",maxLength:64,size:64,value:o.GetPassword(),onChange:this.OnChangePassword}),a.a.createElement(j.e,{classname:ht.a.RememberMeCheck,label:Object(k.d)("#Login_RememberMe"),disabled:!1,onChange:function(){return n.OnChangeRememberPass},checked:o.GetRememberPassword()}),o.GetCaptchaURL()&&a.a.createElement(Dt,{manager:o}),a.a.createElement(j.x,{disabled:this.props.manager.IsRequestInFlight()},Object(k.d)("#Login_SignIn").toLocaleUpperCase())),a.a.createElement("a",{className:ht.a.NeedHelpLink,href:"http://help.steampowered.com/"},Object(k.d)("#Login_ForgotPassword")),a.a.createElement("div",{className:ht.a.LoginCreateSeperator}),a.a.createElement("div",{className:ht.a.SteamUpsellContainer},a.a.createElement("div",{className:ht.a.SteamUpsell},Object(k.d)("#Login_NoSteamAccount")),a.a.createElement("div",{className:ht.a.CreateAccountLink},a.a.createElement("a",{href:"https://store.steampowered.com/join/"},Object(k.d)("#Login_CreateAccount")))))},Object(o.c)([ne.a],t.prototype,"OnSubmit",null),Object(o.c)([ne.a],t.prototype,"OnChangeName",null),Object(o.c)([ne.a],t.prototype,"OnChangePassword",null),Object(o.c)([ne.a],t.prototype,"OnChangeRememberPass",null),t=Object(o.c)([r.a],t)}(a.a.Component),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCaptchaText=function(e){this.props.manager.SetCaptchaText(e.target.value)},t.prototype.RefreshCaptcha=function(e){this.props.manager.RefreshCaptcha()},t.prototype.render=function(){var e=this.props.manager;return a.a.createElement("div",{className:ht.a.CaptchaContainer},a.a.createElement("div",{className:ht.a.CaptchaBlock},a.a.createElement("div",{className:ht.a.CaptchaImageAndInput},a.a.createElement("div",{className:ht.a.CaptchaImageBox},a.a.createElement("img",{className:ht.a.CaptchaImage,src:e.GetCaptchaURL()})),a.a.createElement(j.o,{className:ht.a.CaptchaInput,type:"text",autoComplete:"off",maxLength:6,value:e.GetCaptchaText(),onChange:this.OnCaptchaText})),a.a.createElement("div",{className:ht.a.ErrorMessage},Object(k.d)("#Login_CaptchaVerification"))),a.a.createElement("div",null,a.a.createElement("span",{className:ht.a.RefreshCaptchaText,onClick:this.RefreshCaptcha},Object(k.d)("#Login_RefreshCaptcha"))))},Object(o.c)([ne.a],t.prototype,"OnCaptchaText",null),Object(o.c)([ne.a],t.prototype,"RefreshCaptcha",null),t=Object(o.c)([r.a],t)}(a.a.Component),Tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnSubmit=function(e){e.preventDefault(),this.props.manager.DoLogin()},t.prototype.OnChangeAuthCode=function(e){this.props.authtype==Ct.TwoFactorCode?this.props.manager.SetTwoFactorCode(e.target.value):this.props.manager.SetEmailAuthCode(e.target.value)},t.prototype.render=function(){var e,t=this.props.manager,n="",o=null,r="",i=t.GetSteamGuardCodeError()==Ot.InvalidCode;switch(this.props.authtype){case Ct.TwoFactorCode:n=t.GetTwoFactorCode(),o=Object(k.d)("#Login_Enter2FA"),e=a.a.createElement(N.E,null),r=Object(k.d)("#Login_Enter2FAHelp");break;case Ct.EmailCode:n=t.GetEmailAuthCode(),o=Object(k.k)("#Login_SentSteamguard",a.a.createElement("span",{className:ht.a.Highlight},"@",t.GetEmailDomain())),r=Object(k.d)("#Login_EnterSteamguard"),e=a.a.createElement(N.r,null)}return a.a.createElement("div",{className:ht.a.AuthenticationPanel},a.a.createElement(j.p,null,Object(k.d)("#Login_SigningIn")),a.a.createElement("div",{className:ht.a.SigningInAccountName},t.GetUserName()),a.a.createElement(j.c,null,o),a.a.createElement("div",{className:ht.a.AuthenticatorInputcontainer},e,a.a.createElement("form",{className:ht.a.AccountPasswordForm,onSubmit:this.OnSubmit},a.a.createElement(j.o,{className:Object(R.a)(ht.a.AccountName),label:"Steam Guard Code",type:"text",autoComplete:"off",focusOnMount:!0,maxLength:64,value:n,onChange:this.OnChangeAuthCode}),a.a.createElement(j.x,{disabled:this.props.manager.IsRequestInFlight()},Object(k.d)("#Login_SteamguardSubmit").toLocaleUpperCase()))),a.a.createElement("a",{className:Object(R.a)(ht.a.NeedHelpLink,i?ht.a.NeedHelpHighlight:null),href:"http://help.steampowered.com/"},r))},Object(o.c)([ne.a],t.prototype,"OnSubmit",null),Object(o.c)([ne.a],t.prototype,"OnChangeAuthCode",null),t=Object(o.c)([r.a],t)}(a.a.Component),Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnLoginComplete=function(e){window.location.href=this.props.redirectURL&&this.props.redirectURL!==Object(D.d)()+"login"?this.props.redirectURL:D.c.COMMUNITY_BASE_URL},t.prototype.render=function(){return D.i&&D.i.logged_in?(this.OnLoginComplete(),null):a.a.createElement("div",null,a.a.createElement(Et,{baseURL:Object(D.d)(),onLoginComplete:this.OnLoginComplete}))},Object(o.c)([ne.a],t.prototype,"OnLoginComplete",null),t}(a.a.Component),jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return a.a.createElement(G.a,{onEscKeypress:this.props.closeModal,bDisableBackgroundDismiss:!0},a.a.createElement(Mt,{redirectURL:this.props.redirectURL}))},t}(a.a.Component);function Lt(){Object(G.d)(a.a.createElement(jt,{ownerWin:window,redirectURL:window.location.href}),window,Object(k.d)("#Login_SignIn"))}var Gt=n("YlSc"),Nt=new(function(){function e(){this.m_mapAppToSNRs=new Map}return e.prototype.AddImpression=function(e,t){var n=!1;if(this.m_mapAppToSNRs.has(e)?-1==this.m_mapAppToSNRs.get(e).indexOf(t)&&(this.m_mapAppToSNRs.get(e).push(t),n=!0):(this.m_mapAppToSNRs.set(e,[t]),n=!0),n){var o=Object(Gt.b)("app_impressions")||"",r=e+"@"+t;o.length+r.length+1<=3200&&(o.length>0&&(o+="|"),o+=r,Object(Gt.c)("app_impressions",o))}},e}());window.g_ImpressionTracker=Nt;var Rt,kt=n("uuth"),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnEnter=function(){Nt.AddImpression(this.props.appID,this.props.snr)},t.prototype.render=function(){return a.a.createElement(kt.a,{onEnter:this.OnEnter},this.props.children)},Object(o.c)([ne.a],t.prototype,"OnEnter",null),t}(a.a.Component),Pt=n("B7ut"),Ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.DeleteOldAnnouncement=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(n=new URLSearchParams).append("sessionid",D.c.SESSIONID),r=D.c.COMMUNITY_BASE_URL+"/gid/"+e.ConvertTo64BitString()+"/announcements/ajaxdeleteannouncement/"+t,[4,E.a.post(r,n)];case 1:if(1!=(i=o.sent()).data.success)throw i.data;return this.RemoveGIDFromList(e,"old_announce_"+t),[2,i.data]}}))}))},t.Get=function(){return t.sm_Instance||(t.sm_Instance=new t,t.sm_Instance.Init()),t.sm_Instance},t}(at),xt=n("/1MB"),Vt=n("+9/f"),Ut=n("4HGb"),Ht=function(){function e(e){this.m_setShownEvents=new Set,this.m_setReadEvents=new Set,this.m_rgPendingUpload=[],this.m_schUpload=new $.b,this.m_bUploading=!1,this.m_CMInterface=e}return e.prototype.MarkEventShown=function(e,t,n){var o=this.MakeKey(e,n);if(this.m_setShownEvents.has(o))return!1;this.m_setShownEvents.add(o);var r=new Vt.e;return r.set_event_gid(e),r.set_clanid(t),r.set_display_location(n),r.set_mark_shown(!0),this.QueueForUpload(r),!0},e.prototype.MarkEventRead=function(e,t,n){var o=this.MakeKey(e,n);if(this.m_setReadEvents.has(o))return!1;this.m_setReadEvents.add(o);var r=new Vt.e;return r.set_event_gid(e),r.set_clanid(t),r.set_display_location(n),r.set_mark_read(!0),this.QueueForUpload(r),!0},e.prototype.MakeKey=function(e,t){return e+"_"+t},e.prototype.QueueForUpload=function(e){this.m_rgPendingUpload.push(e),this.ScheduleUpload()},e.prototype.ScheduleUpload=function(){this.m_bUploading||(this.m_rgPendingUpload.length>=30?this.UploadPendingData():this.m_schUpload.IsScheduled()||this.m_schUpload.Schedule(6e4,this.UploadPendingData))},e.prototype.Flush=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return this.m_bUploading?[2]:[2,this.UploadPendingData()]}))}))},e.prototype.UploadPendingData=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,c,l,p,u,m,d;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_bUploading)return[2];if(this.m_schUpload.Cancel(),0==(e=this.m_rgPendingUpload.splice(0,30)).length)return[2];if(t=!1,!this.m_CMInterface)return[3,2];for(n=Ut.b.Init(Vt.d),r=0,i=e;r<i.length;r++)a=i[r],n.Body().add_markings(a);return this.m_bUploading=!0,[4,Vt.g.MarkPartnerEventsForUser(this.m_CMInterface.GetServiceTransport(),n)];case 1:return s=o.sent(),this.m_bUploading=!1,t=1==s.GetEResult(),[3,6];case 2:if(!D.i.logged_in)return[2];c=e.map((function(e){return e.toObject()})),l=Object(D.d)()+"actions/ajaxmarkpartnerevents",(p=new FormData).append("sessionid",D.c.SESSIONID),p.append("request",JSON.stringify(c)),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,E.a.post(l,p,{withCredentials:!0})];case 4:return u=o.sent(),t=1==u.data.success,[3,6];case 5:return m=o.sent(),d=Object(te.a)(m),console.log("CPartnerEventUserTracking.UploadPendingData error "+d.strErrorMsg,d),[3,6];case 6:return t?(this.m_rgPendingUpload.length>0&&this.ScheduleUpload(),[2]):(console.log("Saving news event state failed. Will try again soon!"),this.m_rgPendingUpload=this.m_rgPendingUpload.concat(e),this.m_schUpload.Schedule(6e4,this.UploadPendingData),[2])}}))}))},Object(o.c)([ne.a],e.prototype,"UploadPendingData",null),e}(),Wt=function(){function e(e){this.appid=0,this.can_edit=!1,this.owns_app=!1,this.follows_app=!1,this.support_user=!1,this.valve_admin=!1,this.limited_user=!1,this.event_ignored=new Array,this.event_followed=new Array,this.event_followed_flags=new Array,this.clanid=e}return Object(o.c)([w.A],e.prototype,"clanid",void 0),Object(o.c)([w.A],e.prototype,"appid",void 0),Object(o.c)([w.A],e.prototype,"can_edit",void 0),Object(o.c)([w.A],e.prototype,"owns_app",void 0),Object(o.c)([w.A],e.prototype,"follows_app",void 0),Object(o.c)([w.A],e.prototype,"support_user",void 0),Object(o.c)([w.A],e.prototype,"valve_admin",void 0),Object(o.c)([w.A],e.prototype,"limited_user",void 0),Object(o.c)([w.A],e.prototype,"event_ignored",void 0),Object(o.c)([w.A],e.prototype,"event_followed",void 0),Object(o.c)([w.A],e.prototype,"event_followed_flags",void 0),e}();!function(e){e[e.k_ENotifyFlagNone=0]="k_ENotifyFlagNone",e[e.k_ENotifyFlagByEmail=1]="k_ENotifyFlagByEmail",e[e.k_ENotifyFlagByPush=2]="k_ENotifyFlagByPush"}(Rt||(Rt={}));var zt=function(){function e(){this.m_mapClanToUserPermissions=new Map,this.m_mapAnnounceGIDToVote=new Map,this.m_setReadEventGIDs=new Set,this.m_cm=void 0}return e.Get=function(){return Object(X.a)(!!e.s_EventUserStore,"Have not yet initialized global EventUserStore"),e.s_EventUserStore},e.IsInitialized=function(){return!!e.s_EventUserStore},e.InitGlobal=function(t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return Object(X.a)(!e.s_EventUserStore,"Already initialized global EventUserStore"),[4,(n=new e).Init(t)];case 1:return o.sent(),e.s_EventUserStore=n,window.g_EventUserStore=n,[2]}}))}))},e.prototype.Init=function(t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(o.e)(this,(function(o){return this.m_cm=t,this.m_tracker=new Ht(t),Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||!document.getElementById("application_config")||(n=Object(D.g)("partnereventpermissions","application_config"),this.ValidateStoreDefault(n)&&Object(w.E)((function(){n.forEach((function(t){var n=new Wt(t.clanid),o={result:n,promise:e.RemapToPromise(n)};i.CopyFromResponseToTrack(o,t),i.m_mapClanToUserPermissions.set(t.clanid,o)}))})),(r=Object(D.g)("uservotes","application_config"))&&Object(w.E)((function(){r.forEach((function(e){var t=!!e.voted_up||!e.voted_down&&void 0;i.m_mapAnnounceGIDToVote.set(e.clanAnnouncementGID,t)}))}))),[2]}))}))},e.prototype.GetTracker=function(){return this.m_tracker},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].clanid&&"number"==typeof t[0].appid)},e.prototype.RecordEventShown=function(e,t){e&&!e.bOldAnnouncement&&this.m_tracker.MarkEventShown(e.GID,e.clanSteamID.GetAccountID(),t)},e.prototype.RecordEventRead=function(e,t){e&&!e.bOldAnnouncement&&(this.HasEventBeenRead(e.GID)||(this.SetEventAsRead(e.GID),this.m_tracker.MarkEventRead(e.GID,e.clanSteamID.GetAccountID(),t)))},e.prototype.SetEventAsRead=function(e){this.m_setReadEventGIDs.add(e)},e.prototype.HasEventBeenRead=function(e){return this.m_setReadEventGIDs.has(e)},e.RemapToPromise=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return[2,e]}))}))},e.prototype.BIsUserLoggedIn=function(){return D.i.logged_in},e.prototype.GetPartnerEventPermissions=function(e){if(!e||!e.BIsValid())return new Wt(0);var t=e.GetAccountID();return this.m_mapClanToUserPermissions.has(t)||this.LoadSingleAppEventPermissions(e),this.m_mapClanToUserPermissions.get(t).result},e.prototype.BFollowsEvent=function(e,t){return-1!=this.GetPartnerEventPermissions(e).event_followed.indexOf(t)},e.prototype.BFollowsEventAndNotifiedBy=function(e,t,n){var o=this.GetPartnerEventPermissions(e),r=o.event_followed.indexOf(t);return-1!==r&&(o.event_followed_flags[r]&n)==n},e.prototype.BIgnoresEvent=function(e,t){return-1!=this.GetPartnerEventPermissions(e).event_ignored.indexOf(t)},e.prototype.LoadSingleAppEventPermissions=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.e)(this,(function(o){return t=e.GetAccountID(),(n=this.m_mapClanToUserPermissions.get(t))||(n={promise:this.InternalLoadSingleAppEventPermissions(e),result:new Wt(t)},this.m_mapClanToUserPermissions.set(t,n)),[2,n.promise]}))}))},e.prototype.CopyFromResponseToTrack=function(e,t){e.result.appid=t.appid,e.result.can_edit=t.can_edit,e.result.clanid=t.appid,e.result.event_followed=t.event_followed,e.result.event_ignored=t.event_ignored,e.result.event_followed_flags=t.event_followed_flags,e.result.follows_app=t.follows_app,e.result.owns_app=t.owns_app,e.result.support_user=t.support_user,e.result.valve_admin=t.valve_admin,e.result.limited_user=t.limited_user},e.prototype.InternalLoadSingleAppEventPermissions=function(t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,c,l,p=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:n=null,r=t.GetAccountID(),i=!Boolean(D.i.logged_in),this.m_mapClanToUserPermissions.has(r)||(a=new Wt(t.GetAccountID()),this.m_mapClanToUserPermissions.set(r,{result:a,promise:e.RemapToPromise(a)})),o.label=1;case 1:return o.trys.push([1,4,5,6]),Boolean(D.i.logged_in)?(s=D.c.COMMUNITY_BASE_URL+"gid/"+t.ConvertTo64BitString()+"/ajaxgetpartnereventpermissions/",[4,E.a.get(s,{withCredentials:!0})]):[3,3];case 2:1!=(n=o.sent()).data.success?(console.log("Partner Events Failed Load:"+Object(te.a)(n.data).strErrorMsg),i=!0):(c=this.m_mapClanToUserPermissions.get(r),this.CopyFromResponseToTrack(c,n.data)),o.label=3;case 3:return[3,6];case 4:return l=o.sent(),n=l.response,i=!0,l&&void 0!==l.response&&void 0!==l.response.data&&void 0!==l.response.data.success&&21==l.response.data.success||console.log(Object(te.a)(l).strErrorMsg,l),[3,6];case 5:return i&&Object(w.E)((function(){var e=p.m_mapClanToUserPermissions.get(r);e.result.appid=n&&n.data?n.data.appid:0,e.result.can_edit=!1,e.result.clanid=n&&n.data?n.data.clanid:0,e.result.event_followed=new Array,e.result.event_ignored=new Array,e.result.event_followed_flags=new Array,e.result.follows_app=!1,e.result.owns_app=!1,e.result.support_user=!1,e.result.valve_admin=!1,e.result.limited_user=!1})),[7];case 6:return[2,this.m_mapClanToUserPermissions.get(r).result]}}))}))},e.prototype.SetFollowOrUnfollowEvent=function(e,t,n,r,i){return Object(o.b)(this,void 0,void 0,(function(){var a,s,c,l,p,u,m,d=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return a=this.GetPartnerEventPermissions(n),s=a.event_followed.indexOf(r),c=0,-1!==s&&(c=a.event_followed_flags[s],e?i=c&~i:i|=c),l=0==i,p=Object(D.d)()==D.c.STORE_BASE_URL,u=(p?D.c.STORE_BASE_URL+"events":D.c.COMMUNITY_BASE_URL+"/gid/"+n.ConvertTo64BitString())+(l?"/unfolloworunignoreevent":"/followorignoreevent"),(m=new URLSearchParams).append("sessionid",D.c.SESSIONID),m.append("authwgtoken",D.i.authwgtoken),m.append("ignore",""+t),m.append("gid",r),m.append("notification_flag",""+i),m.append("clan_accountid",""+n.GetAccountID()),[4,E.a.post(u,m,{withCredentials:!0})];case 1:return o.sent(),Object(w.E)((function(){var e=d.m_mapClanToUserPermissions.get(n.GetAccountID()),o=null,a=null,s=null,c=null;l?(o=t?e.result.event_ignored:e.result.event_followed,s=t?null:e.result.event_followed_flags):t?(o=e.result.event_followed,s=e.result.event_followed_flags,a=e.result.event_ignored):(o=e.result.event_ignored,a=e.result.event_followed,c=e.result.event_followed_flags);var p=o.indexOf(r);if(p>-1&&(o.splice(p,1),s&&s.splice(p,1)),a){var u=a.indexOf(r);-1==u?(a.push(r),c&&c.push(i)):c[u]=i}})),[2]}}))}))},e.prototype.Vote=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e.AnnouncementGID?(r=this.m_mapAnnounceGIDToVote.get(e.AnnouncementGID))===t?[2,!0]:(this.m_mapAnnounceGIDToVote.set(e.AnnouncementGID,t),Object(w.E)((function(){!0===r&&e.UpdateVoteCount("up",-1),!1===r&&e.UpdateVoteCount("down",-1),!0===t&&e.UpdateVoteCount("up",1),!1===t&&e.UpdateVoteCount("down",1)})),this.m_cm?((i=Ut.b.Init(Vt.f)).Body().set_announcementid(e.AnnouncementGID),i.Body().set_vote_up(!!t),i.Body().set_clan_accountid(e.clanSteamID.GetAccountID()),[4,Vt.g.RateClanAnnouncement(this.m_cm.GetServiceTransport(),i)]):[3,2]):[2,!1];case 1:return[2,1==o.sent().GetEResult()];case 2:return a=window.location.href.indexOf(D.c.COMMUNITY_BASE_URL)>=0?D.c.COMMUNITY_BASE_URL+"gid/"+e.clanSteamID.ConvertTo64BitString()+"/announcements/rate/"+e.AnnouncementGID:D.c.STORE_BASE_URL+"updated/ajaxrateupdate/"+e.AnnouncementGID,(s=new URLSearchParams).append("sessionid",D.c.SESSIONID),s.append("wgauthtoken",D.i.authwgtoken),s.append("voteup",t?"1":"0"),s.append("clanid",""+e.clanSteamID.GetAccountID()),s.append("ajax","1"),c={withCredentials:!0,cancelToken:n.token},[4,E.a.post(a,s,c)];case 3:return[2,1==o.sent().data.success]}}))}))},e.prototype.LoadMyVote=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e.AnnouncementGID?this.m_mapAnnounceGIDToVote.has(e.AnnouncementGID)?(console.log(e.AnnouncementGID,this.m_mapAnnounceGIDToVote.get(e.AnnouncementGID)),[2,this.m_mapAnnounceGIDToVote.get(e.AnnouncementGID)]):(n=void 0,this.m_cm?((r=Ut.b.Init(Vt.c)).Body().set_announcementid(e.AnnouncementGID),[4,Vt.g.GetClanAnnouncementVoteForUser(this.m_cm.GetServiceTransport(),r)]):[3,2]):[3,5];case 1:return 1==(a=o.sent()).GetEResult()&&(n=!!a.Body().voted_up()||!a.Body().voted_down()&&void 0),[3,4];case 2:return i=D.c.COMMUNITY_BASE_URL+"ogg/"+e.appid+"/announcements/ajaxgetmyvote/"+e.AnnouncementGID,[4,E.a.get(i,{withCredentials:!0,cancelToken:t.token})];case 3:a=o.sent(),n=!!a.data.voted_up||!a.data.voted_down&&void 0,o.label=4;case 4:return this.m_mapAnnounceGIDToVote.set(e.AnnouncementGID,n),[2,n];case 5:return[2,void 0]}}))}))},e.prototype.SetVote=function(e,t){this.m_mapAnnounceGIDToVote.set(e,t)},e.prototype.BHasMyVote=function(e){return!!e.AnnouncementGID&&this.m_mapAnnounceGIDToVote.has(e.AnnouncementGID)},e.prototype.GetPreviouslyLoadedVote=function(e){return e.AnnouncementGID?this.m_mapAnnounceGIDToVote.get(e.AnnouncementGID):void 0},e.prototype.BShowEmailEditorTab=function(e){if(e.BHasEmailEnabled())return!0;var t=this.GetPartnerEventPermissions(e.clanSteamID);return D.b.IS_OGG&&t.valve_admin},e.prototype.BShowSaleEditorTab=function(e){if(e.BHasSaleEnabled())return!0;var t=this.GetPartnerEventPermissions(e.clanSteamID);return!D.b.IS_OGG&&t.valve_admin},Object(o.c)([w.A],e.prototype,"m_mapClanToUserPermissions",void 0),Object(o.c)([w.A],e.prototype,"m_mapAnnounceGIDToVote",void 0),Object(o.c)([w.A],e.prototype,"m_setReadEventGIDs",void 0),Object(o.c)([w.i],e.prototype,"CopyFromResponseToTrack",null),e}(),Yt=n("efYq"),qt=n.n(Yt),Kt=n("6JoM"),Qt=n.n(Kt),Zt=n("yovy"),Jt=new(function(){function e(){this.m_mapProfiles=new Map,this.m_mapProfilesLoading=new Map}return e.prototype.LoadProfiles=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return Object(X.a)(e.length<=500,"Check LoadProfiles, requesting too many steam IDs"),0==(t=e.filter((function(e){return!a.m_mapProfiles.has(e)&&!a.m_mapProfilesLoading.has(e)}))).length?[2,this.m_mapProfilesLoading.get(e[0])]:(n=D.c.COMMUNITY_BASE_URL+"actions/ajaxresolveusers",r=E.a.get(n,{params:{steamids:t.join(",")},withCredentials:!0}),t.forEach((function(e){return a.m_mapProfilesLoading.set(e,r)})),[4,r]);case 1:return(i=o.sent()).data&&i.data.forEach((function(e){e.avatar_url_medium=Object(Zt.a)(e.avatar_url,"medium"),e.avatar_url_full=Object(Zt.a)(e.avatar_url,"full"),e.avatar_url=Object(Zt.a)(e.avatar_url),a.m_mapProfiles.set(e.steamid,e),a.m_mapProfilesLoading.delete(e.steamid)})),[2]}}))}))},e.prototype.GetProfile=function(e){return this.m_mapProfiles.get(e)},e.prototype.GetProfileByAccountID=function(e){return this.m_mapProfiles.get(Z.a.InitFromAccountID(e).ConvertTo64BitString())},e.prototype.BHasProfile=function(e){return this.m_mapProfiles.has(e)},e.prototype.BHasProfileByAccountID=function(e){return this.m_mapProfiles.has(Z.a.InitFromAccountID(e).ConvertTo64BitString())},Object(o.c)([w.A],e.prototype,"m_mapProfiles",void 0),e}());window.g_ProfileStore=Jt;var Xt,$t=n("5O1C"),en=n("tY0L"),tn=function(e){function t(t,n,o,r){var i=e.call(this,t)||this;return i.m_LinkFilter=new RegExp('((?:(?:https?:)|(?:www[.,])|(?:[!#-;=?-Z\\\\^-~]+[\\.,](?:(?:[a-zA-Z]{2,4}[\\.?]*[/\\\\?#])|(?:(?:biz|com|gallery|in|name|net|online|org|tech|trade|xyz)(?=\\W|$)))))(?:[^ː\\s"<>\\[\\]]*[^\\s"<>\\[\\],.ː:])?)'),i.m_parentNode=void 0,i.m_parentNode=n,i.m_mapHostToComponent=o,i.m_globalStoreLink=r,i}return Object(o.d)(t,e),t.prototype.AppendText=function(t,n){void 0===n&&(n=!1);var o=t;if(n&&(null==this.m_parentNode||"img"!=this.m_parentNode.tag))for(var r=this.m_LinkFilter.exec(o);r;){if(r.index>0){var a=r.input.substr(0,r.index);e.prototype.AppendText.call(this,a,n)}var s=r[0],c=!1;if(this.m_mapHostToComponent)for(var l=0;l<this.m_mapHostToComponent.length;++l)if(this.m_mapHostToComponent[l].urlRegExp.exec(s)){c=!0,e.prototype.AppendNode.call(this,this.m_mapHostToComponent[l].fnBBComponent(s,this.m_globalStoreLink));break}if(!c){var p=Object(Pt.a)(s),u=Object(Pt.a)(D.c.COMMUNITY_BASE_URL),m=Object(Pt.a)(D.c.STORE_BASE_URL),d=p!==u&&p!==m?D.c.COMMUNITY_BASE_URL+"linkfilter/?url="+s:s,h={href:(D.c.IN_CLIENT?"steam://openurl_external/":"")+d,target:D.c.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"};e.prototype.AppendNode.call(this,i.createElement("a",h,new Array(s)))}o=r.input.substr(r.index+s.length),r=this.m_LinkFilter.exec(o)}o.length>0&&e.prototype.AppendText.call(this,o,n)},t}($t.a),nn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_EmoteFilter=new RegExp("[ː:]([a-zA-Z0-9_]+)[ː:]"),t}return Object(o.d)(t,e),t.prototype.AppendText=function(t,n){void 0===n&&(n=!1);var o=t;if(t.length>=3)for(var r=this.m_EmoteFilter.exec(o);r;){if(r.index>0){var a=r.input.substr(0,r.index);e.prototype.AppendText.call(this,a,n)}var s=r[1];e.prototype.AppendNode.call(this,i.createElement(en.a,{emoticonHoverStore:ye.b,emoticon:s},[])),o=r.input.substr(r.index+s.length+2),r=this.m_EmoteFilter.exec(o)}o.length>0&&e.prototype.AppendText.call(this,o,n)},t}($t.a),on=function(e){function t(t,n){var o=e.call(this,t)||this;return o.m_parentNode=void 0,o.m_parentNode=n,o}return Object(o.d)(t,e),t.prototype.AppendText=function(t,n){void 0===n&&(n=!1);var o=t;this.m_parentNode&&"img"==this.m_parentNode.tag&&(o=Object(Pt.e)(o)),e.prototype.AppendText.call(this,o,n)},t}($t.a),rn=n("CFWN"),an=n.n(rn),sn=new(function(){function e(){this.m_mapYouTubeVideo=new Map,this.m_mapSharedFile=new Map}return e.prototype.LoadYouTubeDynamicData=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=new Array,r="",e.forEach((function(e,t){s.m_mapYouTubeVideo.has(e)?n.push(s.m_mapYouTubeVideo.get(e)):(r.length>0&&(r+=","),r+=e)})),0==r.length?[2,n]:(i={youtubevideoids:r},a=null,[4,E.a.get(D.c.STORE_BASE_URL+"/events/ajaxgetdynamiceventmetadata",{params:i,cancelToken:t.token})]);case 1:return(a=o.sent())&&a.data&&a.data.youtube&&Object(w.E)((function(){a.data.youtube.forEach((function(e,t){s.m_mapYouTubeVideo.set(e.videoid,e),n.push(e)}))})),[2,n]}}))}))},e.prototype.LoadSharedFileDynamicData=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=new Array,r="",e.forEach((function(e,t){s.m_mapSharedFile.has(e)?n.push(s.m_mapSharedFile.get(e)):(r.length>0&&(r+=","),r+=e)})),0==r.length?[2,n]:(i={sharedfileids:r},a=null,[4,E.a.get(D.c.STORE_BASE_URL+"/events/ajaxgetdynamiceventmetadata",{params:i,cancelToken:t.token})]);case 1:return(a=o.sent())&&a.data&&a.data.sharedfiles&&Object(w.E)((function(){a.data.sharedfiles.forEach((function(e,t){s.m_mapSharedFile.set(e.sharedfileid,e),n.push(e)}))})),[2,n]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapYouTubeVideo",void 0),Object(o.c)([w.A],e.prototype,"m_mapSharedFile",void 0),e}()),cn=function(e){function t(t){var n=e.call(this,t)||this;return n.m_cancelSignal=E.a.CancelToken.source(),n.state={bLoadedMetadata:!1},n.m_sharedFileInfo={sharedfileid:n.props.sharedFileID,title:Object(k.d)("#Loading"),description:"",type:"",previewurl:"",appid:0,url:D.c.COMMUNITY_BASE_URL+"sharedfiles/filedetails/?id="+n.props.sharedFileID},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this;sn.LoadSharedFileDynamicData([this.props.sharedFileID],this.m_cancelSignal).then((function(t){!e.m_cancelSignal.token.reason&&t.length>0&&(e.m_sharedFileInfo=t[0],e.setState({bLoadedMetadata:!0}))})).catch((function(e){return console.log("SharedFileSnippet: "+Object(te.a)(e).strErrorMsg)}))},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("SharedFileSnippet component unmounted")},t.prototype.render=function(){var e=void 0!==this.m_sharedFileInfo.personnaname&&this.m_sharedFileInfo.personnaname.length>0;return i.createElement("a",{href:this.m_sharedFileInfo.url,className:an.a.DynamicLinkBox,"data-modal-content-sizetofit":!!this.m_sharedFileInfo.bSizeToFit,"data-appid":this.m_sharedFileInfo.appid,"data-publishedfileid":this.props.sharedFileID},i.createElement("img",{className:an.a.DynamicLink_Preview,src:this.m_sharedFileInfo.previewurl}),i.createElement("div",{className:an.a.DynamicLink_Content},i.createElement("div",{className:an.a.DynamicLink_Name},this.m_sharedFileInfo.title),i.createElement("div",null,i.createElement("span",{className:an.a.DynamicLink_Type},this.m_sharedFileInfo.type)),e&&i.createElement("div",{className:an.a.DynamicLink_Author},Object(k.k)("#EventEditor_Author",i.createElement("span",{className:an.a.DynamicLink_AuthorName},this.m_sharedFileInfo.personnaname))),i.createElement("div",{className:an.a.DynamicLink_Description},this.m_sharedFileInfo.description)))},Object(o.c)([w.A],t.prototype,"m_sharedFileInfo",void 0),t=Object(o.c)([r.a],t)}(i.Component),ln=function(e){function t(t){var n=e.call(this,t)||this;n.m_cancelSignal=E.a.CancelToken.source();var o=!n.props.bShowVideoImmediately;return n.state={bSummaryMode:o,bLoadedMetaData:!1},n.m_youtubeInfo={title:Object(k.d)("#Loading"),description:"",videoid:t.videoID,views:"0"},n}var n;return Object(o.d)(t,e),n=t,t.prototype.componentDidMount=function(){this.state.bSummaryMode&&this.HintLoadMetadata()},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("YouTubeInlineSnippet component unmounted")},t.prototype.HintLoadMetadata=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(t){return sn.LoadYouTubeDynamicData([this.props.videoID],this.m_cancelSignal).then((function(t){!e.m_cancelSignal.token.reason&&t.length>0&&(e.m_youtubeInfo=t[0],e.setState({bLoadedMetaData:!0}))})).catch((function(e){return console.log("YouTubeInlineSnippet: "+Object(te.a)(e).strErrorMsg)})),[2]}))}))},t.prototype.OnClick=function(){this.setState({bSummaryMode:!1})},t.prototype.render=function(){var e=this.props.videoID;if(this.state.bSummaryMode){var t=this.m_youtubeInfo.title,o=this.m_youtubeInfo.views,r=this.m_youtubeInfo.description;return i.createElement("div",{className:an.a.DynamicLinkBox,onClick:this.OnClick},i.createElement("img",{className:an.a.DynamicLink_Preview,src:"https://img.youtube.com/vi/"+e+"/0.jpg"}),i.createElement("div",{className:an.a.DynamicLink_Content},i.createElement("div",{className:an.a.DynamicLink_Name},Object(k.d)("#EventEditor_YouTubeVideoTitle",t)),i.createElement("div",{className:an.a.DynamicLink_YoutubeViews},Object(k.d)("#EventEditor_YouTubeVideoViews",Number(o).toLocaleString(k.c.GetPreferredLocales()))),i.createElement("div",{className:an.a.Dynamiclink_Content},this.state.bLoadedMetaData&&r,!this.state.bLoadedMetaData&&i.createElement(ge.a,null))))}var a=this.props.classNameSize,s=this.props.classNameAlign;return i.createElement("div",{className:Object(R.a)(an.a.PreviewYouTubeVideo,a,s),id:e},i.createElement("img",{src:D.c.COMMUNITY_CDN_URL+"public/shared/images/responsive/youtube_16x9_placeholder.gif"}),i.createElement("iframe",{className:Object(R.a)(an.a.PreviewYouTubeVideo,a,s),src:"https://www.youtube.com/embed/"+e+n.m_strYouTubeOptions,allowFullScreen:!0,frameBorder:0}))},t.m_strYouTubeOptions="?fs=1&modestbranding=1&rel=0",Object(o.c)([w.A],t.prototype,"m_youtubeInfo",void 0),Object(o.c)([ne.a],t.prototype,"OnClick",null),t=n=Object(o.c)([r.a],t)}(i.Component),pn=n("MCLT"),un=n("yHFa"),mn=(i.Component,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:!1},t}return Object(o.d)(t,e),t.prototype.OnError=function(){this.setState({error:!0})},t.prototype.render=function(){var e=this.props,t=e.src,n=e.className,o=e.crossOrigin;return this.state.error?i.createElement("div",{className:un.ErrorDiv},i.createElement("p",null,Object(k.d)("#Image_ErrorTitle",this.props.src)),i.createElement("ul",null,i.createElement("li",null,Object(k.d)("#Image_Error_msg1")),i.createElement("li",null,Object(k.d)("#Image_Error_msg2")),i.createElement("li",null,Object(k.d)("#Image_Error_msg3"))),i.createElement("p",null,Object(k.d)("#Image_Error_suggestion"))):i.createElement("img",{className:n,src:t,onError:this.OnError,crossOrigin:o})},Object(o.c)([ne.a],t.prototype,"OnError",null),t}(i.Component)),dn=function(e){function t(t){var n=e.call(this,t)||this;return n.m_refImage=i.createRef(),n.state={nImage:0},n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){JSON.stringify(this.props.rgSources)!=JSON.stringify(e.rgSources)&&this.setState({nImage:0})},Object.defineProperty(t.prototype,"src",{get:function(){var e=this.props.rgSources[this.state.nImage];return e&&0!=e.length||(console.warn("MultiSourceImage created with no image src",this.props,this.state.nImage),e="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imgRef",{get:function(){return this.m_refImage},enumerable:!1,configurable:!0}),t.prototype.OnImageError=function(e){this.props.onIncrementalError&&this.props.onIncrementalError(e,this.props.rgSources[this.state.nImage],this.state.nImage);var t=this.state.nImage+1;t>=this.props.rgSources.length&&this.props.onError&&this.props.onError(e),t<this.props.rgSources.length&&this.setState({nImage:t})},t.prototype.render=function(){var e=this.props,t=(e.src,e.rgSources,e.onIncrementalError,e.onError,Object(o.f)(e,["src","rgSources","onIncrementalError","onError"])),n=this.src;return i.createElement("img",Object(o.a)({src:n,ref:this.m_refImage},t,{onError:this.OnImageError}))},Object(o.c)([ne.a],t.prototype,"OnImageError",null),t}(i.Component),hn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bLoading:t.props.announcementGID?!st.BHasClanAnnouncementGID(t.props.announcementGID):!st.BHasClanAnnouncementGID(t.props.eventGID),bFailedLoad:!1},t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.HandleLoadEventInfo()},t.prototype.HandleLoadEventInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,c,l,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:e=this.props,t=e.appid,n=e.strVanity,r=e.announcementGID,i=e.eventGID,a=e.strGroupVanity,s=this.props.clanSteamID,o.label=1;case 1:return o.trys.push([1,9,,10]),this.state.bLoading?void 0===n?[3,3]:[4,He.LoadOGGClanInfoForIdentifier(n)]:[3,8];case 2:return c=o.sent(),s=c.clanSteamID,[3,5];case 3:return void 0===a?[3,5]:[4,He.LoadOGGClanInfoForGroupVanity(a)];case 4:c=o.sent(),s=c.clanSteamID,o.label=5;case 5:return[4,st.LoadPartnerEventGeneric(s,t,i,r,0)];case 6:return l=o.sent(),[4,pe.EnsureStoreCapsuleInfoLoaded(l.appid)];case 7:o.sent(),this.setState({bFailedLoad:!1,bLoading:!1}),o.label=8;case 8:return[3,10];case 9:return p=o.sent(),this.HandleError(p),[3,10];case 10:return[2]}}))}))},t.prototype.HandleError=function(e){var t=Object(te.a)(e),n=this.props,o=n.eventGID,r=n.announcementGID,i=n.strGroupVanity,a=n.strVanity;console.log("EventSnippet hit error on announceGID "+r+" eventGID "+o+" strVanity "+a+" strGroupVanity "+i+" error: "+t.strErrorMsg),this.setState({bFailedLoad:!0})},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("component unmounted")},t.prototype.render=function(){var e=this.props,t=e.appid,n=e.announcementGID,o=e.eventGID,r=e.strURL,a=e.fnFilterImageURLsForKnownFailures,s=e.fnImageFailureCallback;if(this.state.bFailedLoad)return Ko(r);if(this.state.bLoading)return i.createElement(ge.a,null);var c=void 0!==n?st.GetClanEventFromAnnouncementGID(n):st.GetClanEventModel(o);if(null==c)return Ko(r);var l=Object(Q.e)(D.c.LANGUAGE),p=c.GetImageForSizeAsArrayWithFallback("capsule",l,z.capsule_main);a&&(p=a(p));var u=c.GetNameWithFallback(l),m=c.GetSubTitleWithSummaryFallback(l),d=pe.GetStoreCapsuleInfo(t),h=Object(k.h)(c.GetStartTimeAndDateUnixSeconds());return i.createElement("a",{href:r,className:an.a.DynamicLinkBox,"data-modal-content-sizetofit":!0,"data-appid":t},i.createElement(dn,{className:an.a.DynamicLink_Preview,rgSources:p,onIncrementalError:function(e,t,n){return s&&s(t)}}),i.createElement("div",{className:an.a.DynamicLink_Content},i.createElement("div",{className:an.a.DynamicLink_Author},Object(k.d)(28==c.type?"#EventDisplay_Share_Announcement":"#EventDisplay_Share_Event",d.GetAppStoreData().title),i.createElement("span",{className:an.a.DynamicLink_Date},h)),i.createElement("div",{className:an.a.DynamicLink_Name},i.createElement("div",{className:an.a.DynamicLink_Type},u)),i.createElement("div",{className:an.a.DynamicLink_Description},m)))},t=Object(o.c)([r.a],t)}(i.Component),fn=n("jPRw"),_n=n.n(fn),gn=n("ghI5"),bn=n.n(gn),vn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bSummaryMode:!0,bLoadedMetaData:!1},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:e="https://sketchfab.com/oembed?url=https://sketchfab.com/models/"+this.props.modelID,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.get(e)];case 2:return t=o.sent(),this.setState({bLoadedMetaData:!0,data:t.data}),[3,4];case 3:return n=o.sent(),this.setState({bError:!0}),console.log(Object(te.a)(n)),[3,4];case 4:return[2]}}))}))},t.prototype.OnSketchFabClick=function(){this.state.bLoadedMetaData&&this.setState({bSummaryMode:!1})},t.prototype.render=function(){var e=this.props.modelID;return this.state.bError?i.createElement("div",{className:bn.a.dynamiclink_box,onClick:this.OnSketchFabClick},i.createElement("span",null,e),i.createElement("span",null,Object(k.d)("#EventDisplay_SketchFab_Error_Network"))):this.state.bSummaryMode?i.createElement("div",{className:bn.a.dynamiclink_box,onClick:this.OnSketchFabClick},Boolean(this.state.bLoadedMetaData)?i.createElement(i.Fragment,null,i.createElement("img",{className:bn.a.dynamiclink_preview,src:this.state.data.thumbnail_url}),i.createElement("img",{className:bn.a.sketchfab_play_overlay_image}),i.createElement("div",{className:bn.a.dynamiclink_content},i.createElement("div",{className:bn.a.dynamiclink_name},i.createElement("span",{className:bn.a.dynamiclink_type},Object(k.d)("#EventDisplay_Sketchfab")),i.createElement("div",null,this.state.data.title," ")),i.createElement("div",{className:bn.a.dynamiclink_author},this.state.data.author_name))):i.createElement(ge.a,{size:"medium"})):i.createElement("div",{className:bn.a.sketchfabmodelembedded},i.createElement("iframe",{className:bn.a.sketchfabmodelembedded,src:"https://sketchfab.com/models/"+this.props.modelID+"/embed?autostart=1",frameBorder:0,allowFullScreen:!0}))},Object(o.c)([ne.a],t.prototype,"OnSketchFabClick",null),t=Object(o.c)([r.a],t)}(i.Component);!function(e){e[e.k_eLibrary=1]="k_eLibrary",e[e.k_eWishlist=2]="k_eWishlist",e[e.k_eFollowing=4]="k_eFollowing",e[e.k_eRecommended=8]="k_eRecommended",e[e.k_eSteam=16]="k_eSteam",e[e.k_eRequired=32]="k_eRequired",e[e.k_eFeatured=64]="k_eFeatured"}(Xt||(Xt={}));var yn,Sn,Cn=function(){function e(){}return e.prototype.GetSource=function(){return this.appInfo?this.appInfo.source:this.clanInfo.source},e.GetEntityNameForID=function(e,t){if(e)return pe.GetStoreCapsuleInfo(e).GetAppStoreData().title;if(t){var n=He.GetClanInfoByClanAccountID(t);if(n)return n.group_name}return Object(k.d)("#EventCalendar_MuteApp_Unknown")},e.BHasEntityNameForID=function(e,t){var n,o,r;return e?!!(null===(o=null===(n=pe.GetStoreCapsuleInfo(e))||void 0===n?void 0:n.GetAppStoreData())||void 0===o?void 0:o.title):!!t&&!!(null===(r=He.GetClanInfoByClanAccountID(t))||void 0===r?void 0:r.group_name)},e.prototype.GetEntityName=function(){return e.GetEntityNameForID(this.appid,this.clanid)},e.prototype.GetGameCapsule=function(){if(this.appInfo)return pe.GetStoreCapsuleInfo(this.appInfo.appid).GetAppStoreData().capsule;if(this.clanInfo){var e=He.GetClanInfoByClanAccountID(this.clanInfo.clanid);if(e)return e.avatar_full_url}return Object(k.d)("#EventCalendar_MuteApp_Unknown")},e.prototype.GetGameIcon=function(){if(this.appInfo)return pe.GetStoreCapsuleInfo(this.appInfo.appid).GetAppStoreData().icon_url;if(this.clanInfo){var e=He.GetClanInfoByClanAccountID(this.clanInfo.clanid);if(e)return e.avatar_full_url}return Object(k.d)("#EventCalendar_MuteApp_Unknown")},e}(),On=function(){return function(){}}(),In=function(){return function(){}}();!function(e){e.k_ERecent="recent",e.k_ELibrary="library",e.k_EWishist="wishlist",e.k_EFollowing="following",e.k_ERecommended="recommended",e.k_ESteam="steam",e.k_EFeatured="featured"}(yn||(yn={})),function(e){e.k_ENews="news",e.k_EEvents="events",e.k_EStreaming="streaming",e.k_EUpdates="updates",e.k_EReleases="releases",e.k_ESales="sales"}(Sn||(Sn={}));var En=new Map([[Sn.k_ENews,[28]],[Sn.k_EEvents,[9,27,22,23,24,35,25,26]],[Sn.k_EStreaming,[11]],[Sn.k_EUpdates,[12,13,14]],[Sn.k_EReleases,[10,29,16,15,32]],[Sn.k_ESales,[20,21,31,34]]]);function wn(e){return new Map(e.map((function(e){return[e,!0]})))}var An,Dn=function(){function e(){this.m_mapEventTypeGroupsAllowed=new Map,this.m_mapGameSources=new Map,this.m_eStorageType="session"}return e.prototype.GetGameSources=function(){return Array.from(this.m_mapGameSources.keys())},e.prototype.GetStorageObject=function(){return this.m_strStorageKey?"session"===this.m_eStorageType?window.sessionStorage:window.localStorage:null},e.prototype.GetPreferencesStorageKey=function(){return this.m_strStorageKey+"-event-calendar-prefs"},Object.defineProperty(e.prototype,"enabledEventTypeSet",{get:function(){for(var e=new Set,t=0,n=Array.from(this.m_mapEventTypeGroupsAllowed.keys());t<n.length;t++){var o=n[t];En.get(o).forEach((function(t){return e.add(t)}))}return e},enumerable:!1,configurable:!0}),e.prototype.MapClanEventTypeToGroup=function(e){var t=null;return En.forEach((function(n,o){-1!==n.indexOf(e)&&(t=o)})),t||Sn.k_EEvents},e.prototype.InitDefaultCheckboxes=function(e){this.m_mapEventTypeGroupsAllowed=wn([Sn.k_ENews,Sn.k_EEvents,Sn.k_EStreaming,Sn.k_EUpdates,Sn.k_EReleases,Sn.k_ESales]),this.m_mapGameSources=wn(e?[yn.k_ELibrary,yn.k_EWishist,yn.k_EFollowing,yn.k_ERecommended,yn.k_ESteam]:[yn.k_EFeatured])},e.prototype.Init=function(e,t,n){this.m_eStorageType=n,this.m_strStorageKey=t;var o=this.GetStorageObject(),r=o?o.getItem(this.GetPreferencesStorageKey()):null;if(r){var i=JSON.parse(r);if(i.rgEventTypeGroupsAllowed&&i.rgGameSources){var a=i.rgEventTypeGroupsAllowed,s=i.rgGameSources;return this.m_mapEventTypeGroupsAllowed=wn(a),void(this.m_mapGameSources=wn(s))}}this.InitDefaultCheckboxes(e)},e.prototype.SaveFilterPreferences=function(){var e=this.GetStorageObject();if(e){var t={rgEventTypeGroupsAllowed:Array.from(this.m_mapEventTypeGroupsAllowed.keys()),rgGameSources:Array.from(this.m_mapGameSources.keys())};e.setItem(this.GetPreferencesStorageKey(),JSON.stringify(t))}},e.prototype.BIsEventTypeGroupAllowed=function(e){return this.m_mapEventTypeGroupsAllowed.has(e)},e.prototype.BIsGameSourceAllowed=function(e){return this.m_mapGameSources.has(e)},e.prototype.SetEventTypeGroupAllowed=function(e,t){t?this.m_mapEventTypeGroupsAllowed.set(e,!0):this.m_mapEventTypeGroupsAllowed.delete(e),this.SaveFilterPreferences(),Tn.RecordFilterChangeEvent(this)},e.prototype.EnforceMutuallyExclusiveSources=function(e,t,n){this.BIsGameSourceAllowed(e)&&this.BIsGameSourceAllowed(t)&&this.SetGameSourceAllowed(n==e?t:e,!1)},e.prototype.SetGameSourceAllowed=function(e,t){t?(this.m_mapGameSources.set(e,!0),this.EnforceMutuallyExclusiveSources(yn.k_ERecent,yn.k_ELibrary,e)):this.m_mapGameSources.delete(e),this.SaveFilterPreferences(),Tn.RecordFilterChangeEvent(this)},e.prototype.BShouldDisplayEvent=function(e){var t=e.GetSource(),n=Boolean(e.appInfo&&e.appInfo.last_played&&e.appInfo.last_played+15552e3>=Qe.GetTimeNowWithOverride());return this.enabledEventTypeSet.has(e.event_type)&&(Boolean(t&Xt.k_eRequired)||!!(this.m_mapGameSources.has(yn.k_ERecent)&&n||this.m_mapGameSources.has(yn.k_ELibrary)&&t&Xt.k_eLibrary||this.m_mapGameSources.has(yn.k_EWishist)&&t&Xt.k_eWishlist||this.m_mapGameSources.has(yn.k_EFollowing)&&t&Xt.k_eFollowing||this.m_mapGameSources.has(yn.k_ERecommended)&&t&Xt.k_eRecommended||this.m_mapGameSources.has(yn.k_ESteam)&&t&Xt.k_eSteam||this.m_mapGameSources.has(yn.k_EFeatured)&&t&Xt.k_eFeatured))},e.prototype.BAreAllEventsHidden=function(){return 0==this.m_mapEventTypeGroupsAllowed.size||0==this.m_mapGameSources.size},Object(o.c)([w.A],e.prototype,"m_mapEventTypeGroupsAllowed",void 0),Object(o.c)([w.A],e.prototype,"m_mapGameSources",void 0),Object(o.c)([Object(w.l)({keepAlive:!0,equals:w.k.structural})],e.prototype,"enabledEventTypeSet",null),Object(o.c)([w.i],e.prototype,"SetEventTypeGroupAllowed",null),Object(o.c)([w.i],e.prototype,"SetGameSourceAllowed",null),e}();!function(e){e[e.k_eDiscussions=0]="k_eDiscussions",e[e.k_eThumbsUp=1]="k_eThumbsUp",e[e.k_eClickThrough=2]="k_eClickThrough",e[e.k_eMuted=3]="k_eMuted",e[e.k_ePlayedVideo=4]="k_ePlayedVideo",e[e.k_eReminder_Opened=5]="k_eReminder_Opened",e[e.k_eReminder_MobilePush=6]="k_eReminder_MobilePush",e[e.k_eReminder_Email=7]="k_eReminder_Email",e[e.k_eReminder_CalendarApple=8]="k_eReminder_CalendarApple",e[e.k_eReminder_CalendarGoogle=9]="k_eReminder_CalendarGoogle",e[e.k_eReminder_CalendarOutlook=10]="k_eReminder_CalendarOutlook",e[e.k_eReminder_EmailUnverified=11]="k_eReminder_EmailUnverified",e[e.k_eReminder_MobilePushMissing=12]="k_eReminder_MobilePushMissing"}(An||(An={}));var Tn=new(function(){function e(){this.m_nPastViewedIndex=0,this.m_nPastViewedDays=0,this.m_nFutureViewedIndex=0,this.m_nFutureViewableEvents=0,this.m_nLastRecordedFilter=0,this.m_sBrowserID=void 0,this.m_scheduledFilterChange=new $.b,this.m_scheduledFutureStats=new $.b,this.m_scheduledPastStats=new $.b}return e.prototype.RecordViewedEvent=function(e,t){var n=this,o=e.GetStoreInitializationTimestamp().getTime()/1e3;this.m_nFutureViewableEvents=0;for(var r=0,i=void 0,a=null,s=0,c=e.GetCurrentlyLoadedItemsForStats();s<c.length;s++){var l=c[s],p=l.start_time>o;if(l.unique_id==t&&(i=r,a=l),p)this.m_nFutureViewableEvents++;else if(void 0!==i)break;r++}if(void 0!==i)if(i<this.m_nFutureViewableEvents){var u=this.m_nFutureViewableEvents-i;if(this.m_nFutureViewedIndex<u){this.m_nFutureViewedIndex=u;this.m_scheduledFutureStats.Schedule(500,(function(){var t=Math.min(n.m_nFutureViewedIndex,4095)|Math.min(n.m_nFutureViewableEvents,255)<<12|Math.min(n.GetTimeSpentOnPageS(e),2047)<<20;Tn.SendExperimentEventToSteam(18,t)}))}}else{var m=i-this.m_nFutureViewableEvents;if(this.m_nPastViewedIndex<m){this.m_nPastViewedIndex=m,this.m_nPastViewedDays=Math.floor((o-a.start_time)/86400);this.m_scheduledPastStats.Schedule(500,(function(){var t=Math.min(n.m_nPastViewedIndex,4095)|Math.min(n.m_nPastViewedDays,255)<<12|Math.min(n.GetTimeSpentOnPageS(e),2047)<<20;Tn.SendExperimentEventToSteam(17,t)}))}}},e.prototype.RecordFilterChangeEvent=function(e){var t=this;this.m_scheduledFilterChange.Schedule(1e3,(function(){var n=0;e.BIsGameSourceAllowed(yn.k_ELibrary)&&(n|=1),e.BIsGameSourceAllowed(yn.k_EWishist)&&(n|=2),e.BIsGameSourceAllowed(yn.k_EFollowing)&&(n|=4),e.BIsGameSourceAllowed(yn.k_ERecommended)&&(n|=8),e.BIsGameSourceAllowed(yn.k_ESteam)&&(n|=16),e.BIsGameSourceAllowed(yn.k_EFeatured)&&(n|=32),e.BIsGameSourceAllowed(yn.k_ERecent)&&(n|=64),e.BIsEventTypeGroupAllowed(Sn.k_ENews)&&(n|=1024),e.BIsEventTypeGroupAllowed(Sn.k_EEvents)&&(n|=2048),e.BIsEventTypeGroupAllowed(Sn.k_EStreaming)&&(n|=4096),e.BIsEventTypeGroupAllowed(Sn.k_EUpdates)&&(n|=8192),e.BIsEventTypeGroupAllowed(Sn.k_EReleases)&&(n|=16384),e.BIsEventTypeGroupAllowed(Sn.k_ESales)&&(n|=32768),n!=t.m_nLastRecordedFilter&&(t.m_nLastRecordedFilter=n,t.SendExperimentEventToSteam(16,n))}))},e.prototype.GetTimeSpentOnPageS=function(e){var t=e.GetStoreInitializationTimestamp(),n=new Date;return Math.max(0,Math.floor((n.getTime()-t.getTime())/1e3))},e.prototype.RecordAppInteractionEvent=function(e,t){this.SendExperimentEventToSteam(19,t)},e.prototype.SendExperimentEventToSteam=function(e,t){this.InitBrowserID();var n=D.c.STORE_BASE_URL+"events/ajaxreportnewshubstats/",o=new URLSearchParams;o.append("page_action",""+e),o.append("snr",D.c.SNR),o.append("uint_data",""+t),o.append("str_data",this.m_sBrowserID),E.a.post(n,o)},e.prototype.InitBrowserID=function(){if(void 0===this.m_sBrowserID)if(D.c.IN_CLIENT)this.m_sBrowserID="steam";else{var e=navigator.userAgent;/iPhone|iPad|iPod/i.test(e)||/Macintosh/i.test(e)&&/Safari/i.test(e)?this.m_sBrowserID="ios":/Android/i.test(e)?this.m_sBrowserID="android":this.m_sBrowserID=""}},e}());window.g_EventCalendarTrackingStore=Tn;var Mn=new(function(){function e(){this.m_bValidatedEmail=!1,this.m_nMobileDeviceCount=0,this.m_bIsLoaded=!1,this.m_bLoadedFromConfig=!1}return e.prototype.LazyInit=function(){var e=this;if(!this.m_bLoadedFromConfig){var t=Object(D.g)("notificationstore","application_config");this.ValidateStoreDefault(t)&&Object(w.E)((function(){e.m_bIsLoaded=!0,e.m_bValidatedEmail=t.email_validated,e.m_nMobileDeviceCount=t.mobile_device_count})),this.m_bLoadedFromConfig=!0}},e.prototype.ValidateStoreDefault=function(e){return e&&"object"==typeof e&&"number"==typeof e.mobile_device_count},e.prototype.BIsLoaded=function(){return this.m_bIsLoaded},e.prototype.BHasValidatedEmail=function(){return this.m_bValidatedEmail},e.prototype.BHasPushNotification=function(){return this.m_nMobileDeviceCount>0},e.prototype.HintLoad=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return this.LazyInit(),this.m_bIsLoaded?[2,1]:D.i.logged_in?(this.m_promise||(this.m_promise=this.InternalLoad()),[2,this.m_promise]):[2,1]}))}))},e.prototype.InternalLoad=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=D.c.STORE_BASE_URL+"notification/ajaxusersettings",t={authwgtoken:D.i.authwgtoken},[4,E.a.get(e,{params:t,withCredentials:!0})];case 1:return 1==(n=o.sent()).data.success&&Object(w.E)((function(){r.m_bIsLoaded=!0,r.m_bValidatedEmail=n.data.email_validated,r.m_nMobileDeviceCount=n.data.mobile_device_count})),[2,n.data.success]}}))}))},Object(o.c)([w.A],e.prototype,"m_bValidatedEmail",void 0),Object(o.c)([w.A],e.prototype,"m_nMobileDeviceCount",void 0),e}()),jn=n("G+3Z"),Ln=n("hlKB"),Gn=n("8AUz"),Nn=n("EpFY"),Rn=n.n(Nn),kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.TryHide=function(){this.m_fnHide&&this.m_fnHide(),this.m_fnHide=null},t.prototype.componentWillUnmount=function(){this.TryHide()},t.prototype.render=function(){var e=this,t=this.props,n=t.toolTipContent,r=t.nDelayShowMS,a=t.bDisabled,s=t.direction,c=t.nBodyAlignment,l=t.nBodyDistance,p=t.nAllowOffscreenPx,u=t.nMaxLateralMoveOnScreen,m=t.strTooltipClassname,d=Object(o.f)(t,["toolTipContent","nDelayShowMS","bDisabled","direction","nBodyAlignment","nBodyDistance","nAllowOffscreenPx","nMaxLateralMoveOnScreen","strTooltipClassname"]),h={direction:s,nBodyAlignment:c,nBodyDistance:l,nAllowOffscreenPx:p,nMaxLateralMoveOnScreen:u,className:m},f=null;if(!a){var _=function(t){return e.m_fnHide=t};f="string"==typeof n?Bn.ForText(n,_,r,h):Bn.ForReactNode(n,_,r,h)}return i.createElement(Ln.a,Object(o.a)({navStop:!!d.onClick,onMouseEnter:f?f.ShowToolTip:null,onMouseLeave:this.TryHide},d),this.props.children)},t.defaultProps={nDelayShowMS:300},Object(o.c)([ne.a],t.prototype,"TryHide",null),t}(i.Component),Bn=(i.Component,i.Component,i.Component,function(){function e(e,t,n,o){this.m_rctContent=e,this.m_nDelayShowMS=n,this.m_hoverPositionProps=o,this.m_strKey="tooltip-"+Math.floor(1e8*Math.random()),this.m_fnOnShow=t}return e.ForReactNode=function(t,n,o,r){return new e(t,n,o,r)},e.ForText=function(t,n,o,r){return new e(i.createElement("div",{className:Rn.a.TextToolTip},Object(k.d)(t)),n,o,r)},e.prototype.ShowToolTip=function(t){var n=this,r=t.currentTarget||t,a={target:r};e.sm_embeddedElements.ShowElementDelayed(r.ownerDocument,this.m_nDelayShowMS,i.createElement(Gn.a,Object(o.a)({},a,this.m_hoverPositionProps),this.m_rctContent),this.m_strKey),this.m_fnOnShow&&this.m_fnOnShow((function(){return n.HideToolTip(r)}))},e.prototype.HideToolTip=function(t){var n=t.currentTarget||t;e.sm_embeddedElements.HideElement(n.ownerDocument,this.m_strKey)},e.sm_embeddedElements=new jn.a("ignored-id-tooltip-map"),Object(o.c)([ne.a],e.prototype,"ShowToolTip",null),Object(o.c)([ne.a],e.prototype,"HideToolTip",null),e}());var Pn=n("R/6g"),Fn=n.n(Pn),xn=n("f0Wu");function Vn(e,t){var n=xn.tz.guess(),o=xn.unix(e).tz(n),r=Object(k.a)();return r&&o.locale(r),i.createElement(i.Fragment,null,o.format("LT"),t?i.createElement("span",{"data-tooltip-text":o.format("Z")+", "+n}," ",o.zoneAbbr()):null)}var Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.dateAndTime,n=e.bSingleLine,r=e.bOnlyTime,a=!r,s=a&&Object(k.h)(t),c=this.props.stylesmodule?Object(o.a)(Object(o.a)({},Fn.a),this.props.stylesmodule):Fn.a;return n?i.createElement("span",{className:r?c.DateAndTimeInline:c.DateAndTime},a&&s,i.createElement("span",null," "),Vn(t,!0)):i.createElement("div",{className:c.DateAndTime},a&&i.createElement(i.Fragment,null,i.createElement("div",{className:c.LocalizedDate},s)," ",i.createElement("span",{className:c.At},"@")),i.createElement("div",{className:c.LocalizedTime},Vn(t,!0)))},t=Object(o.c)([r.a],t)}(i.Component),Hn=function(e){var t=i.createElement(Un,{dateAndTime:e.rtFullDate,bSingleLine:!0,stylesmodule:e.stylesmodule});return i.createElement(kn,{toolTipContent:t,direction:"top",className:e.className,strTooltipClassname:e.stylesmodule.DateToolTip},e.children)},Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.startDateAndTime,n=e.endDateAndTime,r=this.props.stylesmodule?Object(o.a)(Object(o.a)({},Fn.a),this.props.stylesmodule):Fn.a,a=this.props.bHideEndTime||null==this.props.endDateAndTime||this.props.endDateAndTime<1;if(null==t||0==t)return i.createElement("div",{className:r.DateAndTime},i.createElement("span",{className:r.RightSideTitles},Object(k.d)("#EventDisplay_TimeRange")),Object(k.d)("#EventDisplay_TimeDisplayNone"));var s=Qe.GetTimeNowWithOverride();if(a)return i.createElement("div",{className:r.StartDate},i.createElement("div",{className:r.RightSideTitles},Object(k.d)(t<s?"#EventDisplay_TimeInPast":"#EventDisplay_TimeUpcoming")," "),i.createElement(Un,{stylesmodule:r,dateAndTime:t}));var c=t<=s&&s<=n,l=Object(oe.a)(new Date(1e3*t),new Date(1e3*n));return i.createElement("div",{className:r.MultiDateAndTime},i.createElement("div",{className:r.StartDate},i.createElement("span",{className:r.RightSideTitles},Object(k.d)(t>=s?"#EventDisplay_TimeBeginsOn":n>=s?"#EventDisplay_TimeBeginsOn_Past":"#EventDisplay_TimeBeginsOn_StartAndEnd_Past")),i.createElement(Un,{stylesmodule:r,bSingleLine:!0,dateAndTime:t})),i.createElement("div",{className:r.EndDate},i.createElement("span",{className:r.RightSideTitles},Object(k.d)(n<s?"#EventDisplay_TimeEndsOn_Past":"#EventDisplay_TimeEndsOn")),i.createElement(Un,{stylesmodule:r,bSingleLine:!0,bOnlyTime:l,dateAndTime:n})),c&&i.createElement("span",{className:r.ActiveEvent},i.createElement("span",{className:Object(R.a)(r.RightSideTitles,r.ActiveEventCallOut)},Object(k.d)("#EventDisplay_TimeEventOnNow"))))},t=Object(o.c)([r.a],t)}(i.Component),zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.startDateAndTime,n=e.endDateAndTime,r=e.bHideEndTime,a=this.props.stylesmodule?Object(o.a)(Object(o.a)({},Fn.a),this.props.stylesmodule):Fn.a;if(null==t||0==t)return i.createElement("div",{className:a.DateAndTime},i.createElement("span",{className:a.RightSideTitles},Object(k.d)("#EventDisplay_TimeRange")),Object(k.d)("#EventDisplay_TimeDisplayNone"));var s=Qe.GetTimeNowWithOverrideAsDate(),c=Qe.GetTimeNowWithOverride(),l=Object(oe.b)(new Date(1e3*t),s),p=i.createElement("div",{className:a.ShortDateAndTime},Object(k.h)(t,l)),u=i.createElement(Hn,{rtFullDate:t,stylesmodule:a},i.createElement("div",{className:a.RightSideTitles},Object(k.d)(t<c?"#EventDisplay_TimeInPast":"#EventDisplay_TimeUpcoming")),p);if(c<t&&t<c+oe.d.PerWeek&&(u=i.createElement(Hn,{rtFullDate:t,stylesmodule:a},i.createElement("div",{className:a.RightSideTitles},Object(k.k)("#EventDisplay_EventUpcoming_WithDateAndTime",p,i.createElement("div",{className:a.ShortDateAndTime},Vn(t)," "))))),r||null==n||n<1)return u;var m=t<=c&&c<=n;m&&(u=i.createElement(Hn,{rtFullDate:t,className:a.ActiveEvent,stylesmodule:a},i.createElement("span",{className:a.ActiveEventCallOut},Object(k.d)("#EventDisplay_TimeEventOnNow"))));var d=null,h=m?n-c:n-t;if(h<=oe.d.PerDay){var f=i.createElement("div",{className:a.ShortDateAndTime},Object(k.m)(h,!0));d=n<c?i.createElement("div",{className:a.RightSideTitles},Object(k.d)("#EventDisplay_TimeEndsOn_Ran"),f):i.createElement("div",{className:a.RightSideTitles},Object(k.k)(m?"#EventDisplay_TimeLeft":"#EventDisplay_RunsForDuration",f))}else{var _=s.getFullYear()==new Date(1e3*n).getFullYear();d=i.createElement(i.Fragment,null,i.createElement("div",{className:a.RightSideTitles},Object(k.d)(n<c?"#EventDisplay_TimeEndsOn_Past":"#EventDisplay_TimeEndsOn")),i.createElement("div",{className:a.ShortDateAndTime},Object(k.h)(n,_)))}var g=i.createElement(Hn,{rtFullDate:n,stylesmodule:a},d);return i.createElement("div",{className:a.ShortDateRange},u,g)},t=Object(o.c)([r.a],t)}(i.Component),Yn=n("b3lP"),qn=n("7Vyq"),Kn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_elDropDownRef=i.createRef(),t.m_bLoadWasCancelled=!1,t.state={bIsOpen:!1,bIsLoadingNotificationSettings:!Mn.BIsLoaded()},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.bIsLoadingNotificationSettings&&Mn.HintLoad().catch((function(e){return console.log(Object(te.a)(e).strErrorMsg),2})).then((function(t){1!=t||e.m_bLoadWasCancelled||e.setState({bIsLoadingNotificationSettings:!1})})),!this.props.eventModel.appid&&this.props.eventModel.clanSteamID&&He.LoadOGGClanInfoForClanSteamID(this.props.eventModel.clanSteamID)},t.prototype.componentWillUnmount=function(){this.m_bLoadWasCancelled=!0},t.prototype.ToggleMenu=function(e){var t=zt.Get().BIsUserLoggedIn();t||D.c.IN_CLIENT?(!t&&D.c.IN_CLIENT&&console.log("EventReminderWidget: In Client: Cannot use login widget. We expect to be already logged in."),this.state.bIsOpen?this.HideMenu():this.ShowMenu(),e.stopPropagation(),e.preventDefault()):Object(G.d)(i.createElement(L.b,{strTitle:Object(k.d)("#EventDisplay_Share_NotLoggedIn"),strDescription:Object(k.d)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:Object(k.d)("#MobileLogin_SignIn"),onOK:function(){return Lt()}}),window)},t.prototype.ShowMenu=function(){var e=this;if(this.m_iMenuInstance)this.m_iMenuInstance.Show();else{var t=i.createElement(Zn,Object(o.a)({},this.props,{fnHasReminderSet:function(){return e.BHasSomeNotificationSetting()},fnHidePanel:this.HideMenu})),n={bOverlapHorizontal:!0,bOverlapVertical:!0,bDisablePopTop:!0,bMatchWidth:!0,strClassName:Object(R.a)(Yn.ReminderDialog,Yn.ReminderOptions,qn.contextMenu)};this.m_iMenuInstance=Object(C.a)(t,this.m_elDropDownRef.current,n),this.m_iMenuInstance.SetOnHideCallback(this.HideMenu)}this.setState({bIsOpen:!0}),Tn.RecordAppInteractionEvent(this.props.eventModel.appid,An.k_eReminder_Opened)},t.prototype.HideMenu=function(){this.m_iMenuInstance&&this.m_iMenuInstance.Hide(),this.setState({bIsOpen:!1})},t.prototype.BHasSomeNotificationSetting=function(){var e=this.props,t=e.eventModel,n=e.eventGID;return Mn.BHasValidatedEmail()&&zt.Get().BFollowsEventAndNotifiedBy(t.clanSteamID,n,Rt.k_ENotifyFlagByEmail)||Mn.BHasPushNotification()&&zt.Get().BFollowsEventAndNotifiedBy(t.clanSteamID,n,Rt.k_ENotifyFlagByPush)},t.prototype.render=function(){var e=this.props.bOnlyShowIcon&&!this.state.bIsOpen,t=this.BHasSomeNotificationSetting();return i.createElement("div",{className:Object(R.a)(Yn.ReminderCheckBox,_n.a.ReminderCtn,e?Yn.IconMode:Yn.TextMode),onClick:this.ToggleMenu,ref:this.m_elDropDownRef},t&&i.createElement("div",{className:Yn.RemindCheck},i.createElement(N.h,null)),e&&i.createElement("div",{className:Yn.RemindBell},i.createElement(N.c,null)),i.createElement("div",{className:Yn.ReminderDefault},Object(k.d)("#EventDisplay_Reminder_SetReminder")),i.createElement("div",{className:Yn.ReminderOptions}))},Object(o.c)([ne.a],t.prototype,"ToggleMenu",null),Object(o.c)([ne.a],t.prototype,"ShowMenu",null),Object(o.c)([ne.a],t.prototype,"HideMenu",null),t=Object(o.c)([r.a],t)}(i.Component);function Qn(e){return ze.unix(e).utc().format("YYYYMMDD[T]HHmmss[Z]")}var Zn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bIsRequestInFlight:!1},t}return Object(o.d)(t,e),t.prototype.OnChangeFollowOrIgnore=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,a,s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(r=this.props,a=r.eventGID,s=r.eventModel,!a||a==Q.f)return[3,5];this.setState({bIsRequestInFlight:!0}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,zt.Get().SetFollowOrUnfollowEvent(!e,t,s.clanSteamID,a,n)];case 2:return o.sent(),e&&(n===Rt.k_ENotifyFlagByEmail?this.TrackEventAction(An.k_eReminder_Email):n===Rt.k_ENotifyFlagByPush&&this.TrackEventAction(An.k_eReminder_MobilePush)),[3,4];case 3:return c=o.sent(),Object(G.c)(i.createElement(L.d,{strTitle:Object(k.d)(t?"#EventDisplay_Reminder_IgnoreEvent_Error":"#EventDisplay_Reminder_FollowEvent_Error"),strDescription:Object(k.d)(t?"#EventDisplay_Reminder_IgnoreEvent_ErrorDesc":"#EventDisplay_Reminder_FollowEvent_ErrorDesc")},Object(te.a)(c).strErrorMsg),window),[3,4];case 4:this.setState({bIsRequestInFlight:!1}),o.label=5;case 5:return[2]}}))}))},t.prototype.OnChangeFollowByEmail=function(e){this.OnChangeFollowOrIgnore(e,!1,Rt.k_ENotifyFlagByEmail)},t.prototype.OnChangeFollowByPush=function(e){this.OnChangeFollowOrIgnore(e,!1,Rt.k_ENotifyFlagByPush)},t.prototype.GetExternalCalendarEventTitle=function(){var e=this.props,t=e.eventModel,n=e.lang,o=t.GetNameWithFallback(n);return Cn.BHasEntityNameForID(t.appid,t.clanSteamID.GetAccountID())?Cn.GetEntityNameForID(t.appid,t.clanSteamID.GetAccountID())+": "+o:o},t.prototype.TrackEventAction=function(e){var t=this.props.eventModel;Tn.RecordAppInteractionEvent(t.appid,e)},t.prototype.GetExternalCalendarEventBody=function(){var e=this.props,t=e.eventModel,n=e.eventGID,o=e.lang,r=t.GetSubTitleWithLanguageFallback(o);return""+(r=r?r+"\n\n\n":"")+t.GetSummaryWithFallback(o)+"\n\n"+(D.c.STORE_BASE_URL+"newshub/"+(t.appid?"app/"+t.appid:"group/"+t.clanSteamID.GetAccountID())+"/view/"+n)},t.prototype.GetGoogleCalendarLink=function(){var e=this.props.eventModel,t=encodeURIComponent(this.GetExternalCalendarEventTitle()),n=encodeURIComponent(this.GetExternalCalendarEventBody()),o=e.GetStartTimeAndDateUnixSeconds();return"https://calendar.google.com/calendar/r/eventedit?text="+t+"&details="+n+"&dates="+Qn(o)+"/"+Qn(e.GetEndTimeAndDateUnixSeconds()||o+oe.d.PerHour)},t.prototype.GetICSDownloadLink=function(e){var t=this.props,n=t.eventModel,o=t.eventGID,r=t.lang;return(D.c.IN_CLIENT?"steam://openurl/":"")+D.c.STORE_BASE_URL+"newshub/download"+"/"+(n.appid?"app/"+n.appid:"group/"+n.clanSteamID.GetAccountID())+"/"+e+"/"+o+"?"+("l="+Object(Q.c)(r))},t.prototype.render=function(){var e=this,t=this.props,n=t.eventGID,o=t.eventModel,r=t.bShowStartTime,a=t.bExpandLeft,s=t.bOnlyShowIcon,c=t.fnHasReminderSet,l=t.fnHidePanel,p=Mn.BHasValidatedEmail(),u=Mn.BHasPushNotification(),m=r&&o.GetStartTimeAndDateUnixSeconds();return i.createElement("div",null,i.createElement("div",{className:Object(R.a)(Yn.ReminderCheckBox,s?Yn.IconMode:Yn.TextMode),onClick:l},c()&&i.createElement("div",{className:Yn.RemindCheck},i.createElement(N.h,null)),s&&i.createElement("div",{className:Yn.RemindBell},i.createElement(N.c,null)),i.createElement("div",{className:Yn.ReminderDefault},Object(k.d)("#EventDisplay_Reminder_SetReminder")),i.createElement("div",{className:Yn.ReminderOpennedOptions})),i.createElement("div",{className:Object(R.a)(Yn.FlexColumnContainer,Yn.ReminderBackground,a&&Yn.ReminderExpandsLeft)},this.state.bIsRequestInFlight&&i.createElement(ge.a,{className:Yn.RpcThrobber,size:"xlarge",position:"center"}),m&&i.createElement("div",{className:Yn.FullStartTime},Object(k.k)("#EventDisplay_EventUpcoming_WithDateAndTime",Object(k.h)(m,Object(oe.b)(new Date(1e3*m),Qe.GetTimeNowWithOverrideAsDate())),Vn(m,!0))),i.createElement("div",{className:Yn.ReminderOptionsHeader},Object(k.d)("#EventDisplay_Reminder_GetNotification_Via")),i.createElement("div",{className:Object(R.a)(Yn.ReminderOption,!p&&Yn.Unverified)},i.createElement(kn,{className:Yn.CheckboxWrapper,strTooltipClassname:Yn.ReminderOptionTooltip,toolTipContent:Object(k.d)(p?"#EventReminder_NotifyByEmail_ttip":"#EventReminder_NotifyByEmail_Missing")},i.createElement(j.e,{label:Object(k.d)("#EventDisplay_Reminder_ViaEmail"),disabled:!p,checked:zt.Get().BFollowsEventAndNotifiedBy(o.clanSteamID,n,Rt.k_ENotifyFlagByEmail),onChange:this.OnChangeFollowByEmail})),!p&&i.createElement("div",{className:be.FlexColumnContainer},i.createElement("a",{href:(D.c.IN_CLIENT?"steam://openurl/":"")+D.c.STORE_BASE_URL+"account/",target:D.c.IN_CLIENT?void 0:"_blank",onClick:function(){return e.TrackEventAction(An.k_eReminder_EmailUnverified)}},Object(k.d)("#EventReminder_NotifyByEmail_Missing_Add")))),i.createElement("div",{className:Object(R.a)(Yn.ReminderOption,!u&&Yn.Unverified)},i.createElement(kn,{className:Yn.CheckboxWrapper,strTooltipClassname:Yn.ReminderOptionTooltip,toolTipContent:Object(k.d)(u?"#EventReminder_NotifyByMobile_ttip":"#EventReminder_NotifyByMobile_Missing")},i.createElement(j.e,{label:Object(k.d)("#EventDisplay_Reminder_ViaMobileApp"),disabled:!u,checked:zt.Get().BFollowsEventAndNotifiedBy(o.clanSteamID,n,Rt.k_ENotifyFlagByPush),onChange:this.OnChangeFollowByPush})),!u&&i.createElement("div",{className:be.FlexColumnContainer},i.createElement("a",{href:(D.c.IN_CLIENT?"steam://openurl/":"")+D.c.STORE_BASE_URL+"mobile/?show=steamapp",target:D.c.IN_CLIENT?void 0:"_blank",onClick:function(){return e.TrackEventAction(An.k_eReminder_MobilePushMissing)}},Object(k.d)("#EventReminder_NotifyByMobile_Install")))),i.createElement(i.Fragment,null,i.createElement("div",{className:Yn.ReminderOptionsHeader},Object(k.d)("#EventDisplay_Reminder_AddToCalendar")),i.createElement("div",{className:Yn.ReminderCalendarOptions},i.createElement("a",{className:Yn.ReminderOption,target:D.c.IN_CLIENT?void 0:"_blank",href:this.GetICSDownloadLink("ics"),onClick:function(){return e.TrackEventAction(An.k_eReminder_CalendarApple)}},Object(k.d)("#EventDisplay_Reminder_AppleCalendar_Short")),i.createElement("a",{className:Yn.ReminderOption,target:D.c.IN_CLIENT?void 0:"_blank",href:this.GetGoogleCalendarLink(),onClick:function(){return e.TrackEventAction(An.k_eReminder_CalendarGoogle)}},Object(k.d)("#EventDisplay_Reminder_GoogleCalendar_Short")),i.createElement("a",{className:Yn.ReminderOption,target:D.c.IN_CLIENT?void 0:"_blank",href:this.GetICSDownloadLink("outlook"),onClick:function(){return e.TrackEventAction(An.k_eReminder_CalendarOutlook)}},Object(k.d)("#EventDisplay_Reminder_OutlookCalendar_Short")))),!1))},Object(o.c)([ne.a],t.prototype,"OnChangeFollowByEmail",null),Object(o.c)([ne.a],t.prototype,"OnChangeFollowByPush",null),Object(o.c)([ne.a],t.prototype,"TrackEventAction",null),t=Object(o.c)([r.a],t)}(i.Component),Jn=function(){function e(){}return e.prototype.BIsValid=function(){return void 0!==this.giveaway_id&&null!==this.giveaway_id},e.prototype.BStarted=function(){return this.BIsValid()&&(this.seconds_until_drawing>=0||this.winner_count>0)},Object(o.c)([w.A],e.prototype,"giveaway_id",void 0),Object(o.c)([w.A],e.prototype,"seconds_until_drawing",void 0),Object(o.c)([w.A],e.prototype,"rtime_start",void 0),Object(o.c)([w.A],e.prototype,"rtime_end",void 0),Object(o.c)([w.A],e.prototype,"closed",void 0),Object(o.c)([w.A],e.prototype,"winner_count",void 0),e}(),Xn=new(function(){function e(){this.m_mapGiveawayIDToNextDrawInfo=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.LazyInit=function(){if(!this.m_bLoadedFromConfig){var e=Object(D.g)("giveawaynextdraw","application_config");if(e&&e.giveaway_id){var t=new Jn;this.CopyToGiveaway(e,t),this.m_mapGiveawayIDToNextDrawInfo.set(e.giveaway_id,t)}this.m_bLoadedFromConfig=!0}},e.prototype.CopyToGiveaway=function(e,t){t.closed!=e.closed&&(t.closed=e.closed),t.giveaway_id!=e.giveaway_id&&(t.giveaway_id=e.giveaway_id),t.rtime_start!=e.rtime_start&&(t.rtime_start=e.rtime_start),t.rtime_end!=e.rtime_end&&(t.rtime_end=e.rtime_end),t.winner_count!=e.winner_count&&(t.winner_count=e.winner_count),t.seconds_until_drawing!=e.seconds_until_drawing&&(t.seconds_until_drawing=e.seconds_until_drawing)},e.prototype.FirstTimeLoadGiveaway=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return this.LazyInit(),this.m_mapGiveawayIDToNextDrawInfo.has(e)?[2,this.m_mapGiveawayIDToNextDrawInfo.get(e)]:[2,this.ReloadGiveaway(e,t)]}))}))},e.prototype.ReloadGiveaway=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=D.c.STORE_BASE_URL+"prizes/nextdraw/"+e,r=null,i={origin:self.origin},[4,E.a.get(n,{params:i,cancelToken:t.token})];case 1:return r=o.sent(),this.m_mapGiveawayIDToNextDrawInfo.has(e)||this.m_mapGiveawayIDToNextDrawInfo.set(e,new Jn),this.CopyToGiveaway(r.data,this.m_mapGiveawayIDToNextDrawInfo.get(e)),[2,this.m_mapGiveawayIDToNextDrawInfo.get(e)]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapGiveawayIDToNextDrawInfo",void 0),Object(o.c)([w.i],e.prototype,"CopyToGiveaway",null),e}());window.g_GiveawayStore=Xn;var $n,eo=n("+iD5"),to=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={info:void 0},t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("GiveawayNextDraw component unmounted"),this.ClearRefreshInterval(),this.ClearCountDown()},t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,Xn.FirstTimeLoadGiveaway(this.props.giveawayid,this.m_cancelSignal)];case 1:return e=t.sent(),this.setState({info:e}),this.SetupRefreshDataInterval(),this.SetupCountDown(),[2]}}))}))},t.prototype.SetupRefreshDataInterval=function(){this.ClearRefreshInterval();var e=this.state.info;if(!e.closed){var t=e.seconds_until_drawing<=0&&0==e.winner_count?6e4:5e3;this.m_intervalID=window.setInterval(this.RefreshData,t)}},t.prototype.ClearRefreshInterval=function(){this.m_intervalID&&(window.clearInterval(this.m_intervalID),this.m_intervalID=void 0)},t.prototype.RefreshData=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return(e=this.state.info).BIsValid()&&e.seconds_until_drawing<=0&&!e.closed?(this.ClearCountDown(),[4,Xn.ReloadGiveaway(this.props.giveawayid,this.m_cancelSignal)]):[3,2];case 1:t.sent(),this.SetupCountDown(),t.label=2;case 2:return[2]}}))}))},t.prototype.SetupCountDown=function(){this.state.info.seconds_until_drawing>0&&(this.m_intervalCountDownID=window.setInterval(this.UpdateTimer,1e3))},t.prototype.ClearCountDown=function(){this.m_intervalCountDownID&&(window.clearInterval(this.m_intervalCountDownID),this.m_intervalCountDownID=void 0)},t.prototype.UpdateTimer=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return this.state.info.seconds_until_drawing-=1,0==this.state.info.seconds_until_drawing&&this.ClearCountDown(),[2]}))}))},t.prototype.PrintTwoDigits=function(e){return e<10?"0"+e:e},t.prototype.render=function(){var e=this.state.info;if(!e||null==e.giveaway_id||!e.BStarted())return null;var t=D.c.STORE_BASE_URL+"prizes/view/"+e.giveaway_id+(D.c.SNR?"?snr="+D.c.SNR:"");return i.createElement("div",{className:eo.countdownCtn},Boolean(e.closed)&&i.createElement("div",{className:eo.Closed},e.winner_count>0?Object(k.d)("#Giveaway_Closed",e.winner_count.toLocaleString()):Object(k.d)("#Giveaway_Closed_NoWinnerInfo")),Boolean(!e.closed)&&i.createElement(i.Fragment,null,Boolean(e.seconds_until_drawing<=0)?i.createElement("div",{className:eo.Throbber},i.createElement(ge.a,{size:"small"}),i.createElement("div",null,Object(k.d)("#Giveaway_RandomDraw"))):i.createElement("div",{className:eo.CountDownCtn},i.createElement("div",{className:eo.CountDownTime},this.PrintTwoDigits(Math.floor(e.seconds_until_drawing/60))+":"+this.PrintTwoDigits(e.seconds_until_drawing%60)),i.createElement("div",{className:eo.CountDownText},Object(k.d)("#Giveaway_CountDown2")," ",Object(k.d)("#Giveaway_KeepWatching"))),Boolean(e.winner_count>0)&&i.createElement("div",{className:eo.WinnerInfo},i.createElement("div",{className:eo.WinnerCount},e.winner_count.toLocaleString()),i.createElement("div",{className:eo.WinnerText},Object(k.d)("#Giveaway_Congratulation")))),i.createElement(pt.b,{className:eo.LearnMore,href:(D.c.IN_CLIENT?"steam://openurl/":"")+t},Object(k.d)("#Giveaway_LearnMore")))},Object(o.c)([ne.a],t.prototype,"SetupRefreshDataInterval",null),Object(o.c)([ne.a],t.prototype,"ClearRefreshInterval",null),Object(o.c)([ne.a],t.prototype,"RefreshData",null),Object(o.c)([ne.a],t.prototype,"SetupCountDown",null),Object(o.c)([ne.a],t.prototype,"UpdateTimer",null),t=Object(o.c)([r.a],t)}(i.Component),no=n("Lniy");!function(e){e.k_eBlock="block",e.k_eFinal="final",e.k_eOriginal="original"}($n||($n={}));var oo=function(e){switch(e.display_style){case $n.k_eFinal:return Boolean(e.formatted_final_price)&&i.createElement("span",null,e.formatted_final_price);case $n.k_eOriginal:var t=e.formatted_orig_price||e.formatted_final_price;return Boolean(t)&&i.createElement("span",null,t)}return i.createElement("span",{className:no.StoreSalePriceWidget},Boolean(e.discount_percent)&&i.createElement("span",{className:no.StoreSaleDiscountBox},"-"+e.discount_percent+"%"),Boolean(e.formatted_final_price)&&(Boolean(e.discount_percent&&e.formatted_orig_price)?i.createElement("div",{className:no.StoreSaleDiscountedPriceCtn},i.createElement("div",{className:no.StoreOrignalPrice},e.formatted_orig_price),i.createElement("div",{className:no.StoreSalePriceBox},e.formatted_final_price)):i.createElement("div",{className:no.StoreSalePriceBox},e.formatted_final_price)))},ro=Object(r.a)((function(e){var t=W.GetPackageInfo(e.packageID);return t?i.createElement(oo,{formatted_final_price:t.formatted_final_price,formatted_orig_price:t.formatted_orig_price,discount_percent:t.discount_percent,display_style:e.display_style}):(W.LoadPackageInfo([e.packageID]),null)}));function io(e){var t=Number(e.args.packageid);if(!t)return null;var n=e.args.display;return i.createElement(ro,{packageID:t,display_style:n})}var ao=Object(r.a)((function(e){var t=W.GetPackageInfo(e.packageID),n=W.GetPackageInfo(e.compareID);if(!t||!n)return W.LoadPackageInfo([e.packageID]),W.LoadPackageInfo([e.compareID]),null;var o=function(e,t){if(e&&t&&e.final_price_cents&&t.final_price_cents){var n=1;if(e.renewal_time_units!=V.k_eNone&&t.renewal_time_units!=V.k_eNone){if(e.renewal_time_units!=t.renewal_time_units)return;if(!e.renewal_time_amount||!t.renewal_time_amount)return;n=t.renewal_time_amount/e.renewal_time_amount}return(100*(1-n*e.final_price_cents/t.final_price_cents)).toFixed(0)+"%"}}(t,n);return void 0===o?null:i.createElement("span",{className:no.StorePriceSavings},o)}));function so(e){var t=Number(e.args.packageid),n=Number(e.args.compareid);return t&&n?i.createElement(ao,{packageID:t,compareID:n}):null}var co=/(?:steampowered\.com|valve\.org\/store)\/app\/(\d+)/i,lo=/(?:steamcommunity\.com|valve\.org\/community)\/(games|app|ogg|gid|groups)\/(\w+)\/(?:announcements\/detail|partnerevents\/view_old_announcement)\/(\d+)/i,po=/(?:steamcommunity\.com|valve\.org\/community)\/(games|app|ogg|gid|groups)\/(\w+)\/partnerevents\/view\/(\d+)/i,uo=/:\/\/medal.tv\/(?:clip|clips)\/(\d+)/i,mo=/sketchfab.com\/(?:models\/(?:[^\/\s]+-)?)([a-z0-9]{32})/i,ho=function(e){function t(n){var o=e.call(this,n)||this;return o.m_parser=new y.a(t.BBCodeDictionary,o.ElementAccumulator,n.languageOverride),o}return Object(o.d)(t,e),t.prototype.ElementAccumulator=function(e){return new on(new nn(new tn(new $t.c(new $t.b,0,!0),e,t.BBCodeURLComponent,{partnerEventStore:this.props.partnerEventStore,event:this.props.event})),e)},t.prototype.render=function(){return this.m_parser.UpdateOverrideLanguage(this.props.languageOverride),this.m_parser.ParseBBCode(this.props.text,{showErrorInfo:this.props.showErrorInfo,event:this.props.event})},t.BBCodeDictionary=new Map([["b",{Constructor:go,autocloses:!1}],["i",{Constructor:bo,autocloses:!1}],["h1",{Constructor:vo,autocloses:!1,skipFollowingNewline:!0}],["h2",{Constructor:yo,autocloses:!1,skipFollowingNewline:!0}],["h3",{Constructor:So,autocloses:!1,skipFollowingNewline:!0}],["u",{Constructor:Co,autocloses:!1}],["hr",{Constructor:Oo,autocloses:!1}],["strike",{Constructor:Io,autocloses:!1}],["spoiler",{Constructor:Eo,autocloses:!1}],["noparse",{Constructor:wo,autocloses:!1}],["url",{Constructor:Do,autocloses:!1}],["quote",{Constructor:To,autocloses:!1}],["pullquote",{Constructor:Mo,autocloses:!1}],["code",{Constructor:jo,autocloses:!1}],["img",{Constructor:Lo,autocloses:!1}],["list",{Constructor:Go,autocloses:!1,skipInternalNewline:!0}],["olist",{Constructor:No,autocloses:!1,skipInternalNewline:!0}],["*",{Constructor:Ro,autocloses:!0,skipInternalNewline:!0}],["table",{Constructor:ko,autocloses:!1}],["tr",{Constructor:Bo,autocloses:!1}],["th",{Constructor:Po,autocloses:!1}],["td",{Constructor:Fo,autocloses:!1}],["previewyoutube",{Constructor:xo,autocloses:!1}],["looping_media",{Constructor:Wo,autocloses:!1}],["remindme",{Constructor:Yo,autocloses:!1}],["giveawayinfo",{Constructor:qo,autocloses:!1}],["video",{Constructor:zo,autocloses:!1}],["price",{Constructor:io,autocloses:!1}],["pricesavings",{Constructor:so,autocloses:!1}]]),t.BBCodeURLComponent=[{urlRegExp:new RegExp(/youtu.be|youtube.com/i),fnBBComponent:Qo},{urlRegExp:new RegExp(/community.+sharedfiles\/filedetails\/\?id=\d+/i),fnBBComponent:Xo},{urlRegExp:new RegExp(co),fnBBComponent:$o},{urlRegExp:new RegExp(po),fnBBComponent:tr},{urlRegExp:new RegExp(lo),fnBBComponent:er},{urlRegExp:new RegExp(uo),fnBBComponent:Zo},{urlRegExp:new RegExp(mo),fnBBComponent:Jo}],Object(o.c)([ne.a],t.prototype,"ElementAccumulator",null),t}(i.Component);function fo(e,t){return Object(pn.isNullOrUndefined)(t)?e[""]:e[t]}function _o(e,t){if(void 0!==e&&e.startsWith("{STEAM_CLAN_IMAGE}"))return(o=D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/")+e.substr("{STEAM_CLAN_IMAGE}".length+1);if(void 0!==e&&e.startsWith("{STEAM_CLAN_LOC_IMAGE}")){var n=new Array,o=D.c.MEDIA_CDN_COMMUNITY_URL+"images/clans/",r=e.substr("{STEAM_CLAN_LOC_IMAGE}".length+1),i=ie.GetHashFromHashAndExt(r),a=ie.GetExtensionStringFromHashAndExt(r);if(null!=t){var s=Object(Q.c)(t);n.push(o+i+"/"+s+a)}return n.push(o+r),n}return e}function go(e){return i.createElement("b",{className:fn.Bold},e.children)}function bo(e){return i.createElement("i",null,e.children)}function vo(e){return i.createElement("div",{className:fn.Header1},e.children)}function yo(e){return i.createElement("div",{className:fn.Header2},e.children)}function So(e){return i.createElement("div",{className:fn.Header3},e.children)}function Co(e){return i.createElement("u",null,e.children)}function Oo(e){return i.createElement("div",{className:fn.HR})}function Io(e){return i.createElement("span",{className:fn.Strike},e.children)}function Eo(e){return i.createElement("span",{className:fn.Spoiler},i.createElement("span",null,e.children))}function wo(e){return i.createElement(i.Fragment,null,e.children)}function Ao(e){switch(e){case"button":return Object(R.a)(fn.LinkButton,"LinkButton");default:return fn.Link}}function Do(e){var t=fo(e.args),n=fo(e.args,"style");if(void 0===t)return e.children;if("string"==typeof t&&t.length>0){var o=_o(t,e.language);t="string"==typeof o?o:o[1]}var r="string"==typeof e.children&&e.children.length>0&&t?Object(Pt.c)(t):void 0;return"steam://settings/account"==t?i.createElement(pt.b,{className:fn.Link,href:"steam://settings/account"},e.children):i.createElement(pt.b,{className:Ao(n),href:(D.c.IN_CLIENT?"steam://openurl_external/":"")+D.c.COMMUNITY_BASE_URL+"linkfilter/?url="+t},i.createElement("span",{"data-tooltip-text":r},e.children))}function To(e){var t=fo(e.args,"author");return i.createElement("blockquote",{className:fn.BlockQuote},t&&i.createElement("div",{className:fn.QuoteAuthor},Object(k.d)("#Bbcode_Originally_Posted_By")+" "," ",i.createElement("b",{className:Object(R.a)(fn.Bold,fn.BlockQuoteAuthor)},t+":")),e.children)}function Mo(e){return i.createElement("div",{className:fn.PullQuote},e.children)}function jo(e){return i.createElement("div",{className:fn.Code},e.children)}function Lo(e){var t=e.context.event,n=e&&e.children&&e.children.toString();if(!(null!=n&&null!=n&&0!=n.length||null!=(n=e&&e.args&&e.args[""])&&null!=n&&0!=n.length))return"";var o=_o(n,e.language);if("string"==typeof o){n=o;var r=void 0;if(t&&t.BHasTag("auto_rssfeed"))r=!1;else{var a=Object(Pt.a)(n),s=Object(Pt.a)(D.c.COMMUNITY_CDN_URL),c=Object(Pt.a)(D.c.MEDIA_CDN_URL),l=Object(Pt.a)(D.c.MEDIA_CDN_COMMUNITY_URL);r=Boolean(a!==s&&a!==c&&a!==l)}return e.context.showErrorInfo||(n=n.replace("http://","https://")),e.context.showErrorInfo?i.createElement(mn,{src:n,crossOrigin:r?"anonymous":void 0}):i.createElement("img",{src:n,crossOrigin:r?"anonymous":void 0})}return i.createElement(dn,{rgSources:o})}function Go(e){return i.createElement("ul",{className:fn.UnorderList},e.children)}function No(e){return i.createElement("ol",null,e.children)}function Ro(e){return i.createElement("li",null,e.children)}function ko(e){var t=fo(e.args,"noborder");return i.createElement("div",{className:Object(R.a)(fn.Table,t?fn.NoBorder:"")},e.children)}function Bo(e){return i.createElement("div",{className:fn.TableRow},e.children)}function Po(e){return i.createElement("div",{className:fn.TableHeader},e.children)}function Fo(e){return i.createElement("div",{className:fn.TableData},e.children)}function xo(e){var t=fo(e.args);if(t){var n=t.split(";");if(2==n.length){var o=n[0],r=n[1].toLocaleLowerCase(),a="full"==r?rn.sizeFull:rn.sizeThumb,s="full"==r?"":"leftthumb"==r?rn.floatLeft:rn.floatRight;return i.createElement(ln,{videoID:o,classNameAlign:s,classNameSize:a,bShowVideoImmediately:!0})}}return i.createElement(i.Fragment,null)}function Vo(e){if(!e)return!0;var t=Object(Pt.a)(e),n=Object(Pt.a)(D.c.COMMUNITY_CDN_URL),o=Object(Pt.a)(D.c.MEDIA_CDN_URL),r=Object(Pt.a)(D.c.MEDIA_CDN_COMMUNITY_URL);return t===n||t===o||t===r}function Uo(e,t,n,o){if(!e.rgVideoSources||!e.rgVideoSources.length)return null;var r=function(e){return!!Vo(e.sPoster)&&((!e.rgVideoSources||!e.rgVideoSources.some((function(e){return!Vo(e.sURL)})))&&(!e.rgVideoTracks||!e.rgVideoTracks.some((function(e){return!Vo(e.sURL)}))))}(e)?void 0:"anonymous",a="?origin="+Object(D.d)(),s=e.rgVideoSources.map((function(e){return i.createElement("source",{key:e.sURL,src:e.sURL+a,type:e.sFormat})})),c=e.rgVideoTracks.map((function(e){return i.createElement("track",{key:e.sURL+e.eLanguage,src:e.sURL+a,kind:e.sKind,default:e.bDefault,srcLang:Object(Q.d)(e.eLanguage),label:Object(k.d)("#language_selection_"+Object(Q.c)(e.eLanguage))})})),l=t,p=e.sPoster?e.sPoster+a:"";return i.createElement("video",{width:"100%",height:"auto",autoPlay:t,muted:l,playsInline:!0,controls:n,poster:p,loop:o,crossOrigin:r},s,c)}function Ho(e){var t=fo(e.args,"poster");t&&(t=Object(Pt.e)(t));var n=new Array,o=fo(e.args,"mp4");o&&n.push({sURL:Object(Pt.e)(o),sFormat:"video/mp4"});var r=fo(e.args,"webm");r&&n.push({sURL:Object(Pt.e)(r),sFormat:"video/webm"});for(var i=new Array,a=0;a<29;a++){var s=fo(e.args,"sub_"+Object(Q.d)(a));s&&i.push({sURL:Object(Pt.e)(s),eLanguage:a,sKind:"subtitles"});var c=fo(e.args,"cap_"+Object(Q.d)(a));c&&i.push({sURL:Object(Pt.e)(c),eLanguage:a,sKind:"caption"})}return{sPoster:t,rgVideoSources:n,rgVideoTracks:i}}function Wo(e){return Uo(Ho(e),!0,!1,!0)}function zo(e){var t=Ho(e),n=e.children?e.children.toString():void 0;n&&t.rgVideoSources.push({sURL:Object(Pt.e)(n),sFormat:"video/webm"});var o,r,i,a=(o=e.args,r=!0,void 0===(i=fo(o,"autoplay"))?r:"0"!==i);return Uo(t,a,!0,a)}function Yo(e){var t=e.context,n=t.event,o=t.language;if(n){var r=fo(e.args)||n.GID;if(r)return i.createElement(Kn,{eventModel:n,eventGID:r,lang:o})}return i.createElement(i.Fragment,null)}function qo(e){var t=fo(e.args);return t?i.createElement(to,{giveawayid:t}):i.createElement(i.Fragment,null)}function Ko(e){var t=Object(Pt.a)(e.toLocaleLowerCase()),n=Object(Pt.a)(D.c.COMMUNITY_BASE_URL),o=Object(Pt.a)(D.c.STORE_BASE_URL),r=t!==n&&t!==o?D.c.COMMUNITY_BASE_URL+"linkfilter/?url="+e:e;return r.toLocaleLowerCase().startsWith("http")||(r="http://"+r),i.createElement(pt.b,{href:r},e)}function Qo(e){var t=e.split("?"),n=void 0;if(2==t.length){var o=Ke.a.parse(t[1]);"v"in o&&(n=o.v.toString())}if(null==n&&t.length>0&&(t[0].toLocaleLowerCase().includes("youtu.be")||t[0].toLocaleLowerCase().includes("/embed/"))){var r=t[0],a=r.lastIndexOf("/");-1!=a&&a+1<r.length&&(n=r.substring(a+1))}return void 0!==n?i.createElement(ln,{videoID:n,classNameAlign:"",classNameSize:rn.sizeFull,bShowVideoImmediately:!1}):Ko(e)}function Zo(e,t){var n=new RegExp(uo).exec(e);if(n&&n.length>1){var o=Number(n[1]);if(o>0){var r="https://medal.tv/clip/"+o+"/?autoplay=0&donate=0"+(t&&t.event?"&steamappid="+t.event.appid:"");return i.createElement("iframe",{className:fn.MedalTVWidget,src:r,frameBorder:0,allow:"autoplay"})}}return Ko(e)}function Jo(e,t){var n=new RegExp(mo).exec(e);if(n&&n.length>1){var o=n[1];if(o&&o.length>1)return i.createElement(vn,{modelID:o})}return Ko(e)}function Xo(e){var t=e.split("?"),n=void 0;if(2==t.length){var o=Ke.a.parse(t[1]);"id"in o&&(n=o.id.toString())}return void 0!==n?i.createElement(cn,{sharedFileID:n}):Ko(e)}function $o(e){var t=Object(Pt.a)(e);if(t==Object(Pt.a)(D.c.STORE_BASE_URL)||t.toLocaleLowerCase().includes("steampowered.com")){var n=new RegExp(co).exec(e);if(n&&n.length>1){var o=Number(n[1]);if(o>0)return i.createElement("div",{className:fn.AppSummaryWidgetCtn},i.createElement(ba,{id:o}))}}return Ko(e)}function er(e,t){var n=Object(Pt.a)(e);if(n==Object(Pt.a)(D.c.STORE_BASE_URL)||n.toLocaleLowerCase().includes("steamcommunity.com")){var o=new RegExp(lo).exec(e);if(o&&o.length>2){var r=void 0,a=void 0,s=void 0,c=void 0;"gid"==o[1]?a=new Z.a(o[2]):"groups"==o[1]?c=o[2]:isNaN(+o[2])?s=o[2]:r=Number(o[2]);var l=o[3];if((void 0!==r&&r>0||void 0!==s||void 0!==c||void 0!==a)&&null!=l&&l.length>0)return i.createElement(hn,{appid:r,clanSteamID:a,strVanity:s,strGroupVanity:c,announcementGID:l,strURL:e})}}return Ko(e)}function tr(e,t){var n=Object(Pt.a)(e);if(n==Object(Pt.a)(D.c.STORE_BASE_URL)||n.toLocaleLowerCase().includes("steamcommunity.com")){var o=new RegExp(po).exec(e);if(o&&o.length>2){var r=void 0,a=void 0,s=void 0,c=void 0;"gid"==o[1]?a=new Z.a(o[2]):"groups"==o[1]?c=o[2]:isNaN(+o[2])?s=o[2]:r=Number(o[2]);var l=o[3];if((void 0!==r&&r>0||void 0!==s||void 0!==c||void 0!==a)&&null!=l&&l.length>0)return i.createElement(hn,{appid:r,clanSteamID:a,strVanity:s,strGroupVanity:c,eventGID:l,strURL:e})}}return Ko(e)}var nr,or,rr=n("aeOs"),ir=n("xvxV");function ar(e,t,n){var o="store"===Object(D.e)(),r="community"===Object(D.e)();switch(r&&!n&&(r=t.appid?t.appid===D.b.APPID:t.clanSteamID.GetAccountID()===D.b.CLANACCOUNTID),e){case nr.k_eView:return o||r;case nr.k_eCommunityView:case nr.k_eCommunityEdit:case nr.k_eCommunityEditBroadcast:case nr.k_eCommunityAdminPage:case nr.k_eCommunityPublish:case nr.k_eCommunityMigrate:case nr.k_eCommunityPreview:return r;case nr.k_eCommunityAllNews:return!1;case nr.k_eStoreView:case nr.k_eStoreNewsHub:case nr.k_eStoreOwnerPage:case nr.k_eStoreSalePage:case nr.k_eStoreUsersNewsHub:return o;default:return Object(X.a)(!1,"Unknown route specified for link"),!1}}function sr(e){return D.c.IN_CLIENT?"steam://openurl/"+e:e}function cr(){return D.c.IN_CLIENT?void 0:"_blank"}function lr(e,t){var n=D.c.COMMUNITY_BASE_URL+"gid/"+e.clanSteamID.ConvertTo64BitString()+"/announcements/share/"+e.AnnouncementGID+"?site="+t;return t===or.k_eFacebook?n+"&t="+Math.random():n}function pr(e){return mr(e,nr.k_eStoreView,"absolute",null)}function ur(e,t,n,o){void 0===o&&(o=!1);var r=t?"/":D.c.COMMUNITY_BASE_URL;if(t){var i=o?"/app/":"/games/",a=n||D.b.VANITY_ID;return(e.appid?i+a:"/groups/"+a)+"/"}var s=o?"app/":"ogg/";return r+(e.appid?s+e.appid:"gid/"+e.clanSteamID.ConvertTo64BitString())+"/"}function mr(e,t,n,o){var r="relative"===n,i="community"===Object(D.e)(),a=r?"/":D.c.STORE_BASE_URL,s=ur(e,r,o,!1),c=ur(e,r,o,!0);t===nr.k_eView?t=i?nr.k_eCommunityView:nr.k_eStoreView:t===nr.k_eViewWebSiteHub&&(t=i?nr.k_eCommunityAnnouncementHub:nr.k_eStoreNewsHub);var l=e.GID?e.GID:"",p=e.AnnouncementGID?e.AnnouncementGID:"";switch(t){case nr.k_eCommunityPublish:return s+(e.bOldAnnouncement?"partnerevents/migrate_announcement/"+p:"partnerevents/publish/"+l);case nr.k_eCommunityEdit:return s+(e.bOldAnnouncement?"partnerevents/migrate_announcement/"+p:"partnerevents/edit/"+l);case nr.k_eCommunityEditBroadcast:return s+(e.bOldAnnouncement?"partnerevents/migrate_announcement/"+p:"partnerevents/edit/"+l)+"?tab=broadcast";case nr.k_eCommunityMigrate:return s+"partnerevents/migrate_announcement/"+p;case nr.k_eCommunityPreview:return s+(e.bOldAnnouncement?"partnerevents/preview_old_announcement/"+p:"partnerevents/preview/"+l);case nr.k_eCommunityAdminPage:return s+"partnerevents";case nr.k_eCommunityAllNews:return c+"allnews";case nr.k_eCommunityAnnouncementHub:return s+"announcements";case nr.k_eStoreNewsHub:return a+(e.appid?"newshub/app/"+e.appid:"newshub/group/"+e.clanSteamID.GetAccountID());case nr.k_eStoreOwnerPage:return a+(e.appid?"app/"+e.appid:"curator/"+e.clanSteamID.GetAccountID());case nr.k_eStoreSalePage:return e.jsondata.bSaleEnabled?a+(e.jsondata.sale_vanity_id_valve_approved_for_sale_subpath?"sale/":"curator/"+e.clanSteamID.GetAccountID()+"/sale/")+e.jsondata.sale_vanity_id:a;case nr.k_eCommunityView:return s+"announcements/detail/"+p;case nr.k_eStoreView:return a+"newshub/"+(e.appid?"app/"+e.appid:"group/"+e.clanSteamID.GetAccountID())+"/"+(e.bOldAnnouncement?"old_view/"+p:"view/"+l);case nr.k_eStoreUsersNewsHub:return a+"newshub/";default:return Object(X.a)(!1,"Unknown route specified for link"),""}}!function(e){e.k_eView="view",e.k_eViewWebSiteHub="websitehub",e.k_eCommunityView="communityview",e.k_eCommunityEdit="edit",e.k_eCommunityEditBroadcast="editBroadcast",e.k_eCommunityAdminPage="admin",e.k_eCommunityPublish="publish",e.k_eCommunityMigrate="migrate",e.k_eCommunityPreview="preview",e.k_eCommunityAllNews="allnews",e.k_eCommunityAnnouncementHub="community_announcehub",e.k_eStoreView="storeview",e.k_eStoreNewsHub="newshub",e.k_eStoreOwnerPage="store",e.k_eStoreSalePage="sale",e.k_eStoreUsersNewsHub="usernewshub"}(nr||(nr={})),function(e){e.k_eFacebook="facebook",e.k_eTwitter="twitter",e.k_eReddit="reddit"}(or||(or={}));var dr=function(e){if(!e.eventModel)return null;var t=!e.forceAnchor&&!e.openNewWindow&&ar(e.route,e.eventModel,e.vanityID),n=mr(e.eventModel,e.route,t?"relative":"absolute",e.vanityID);if(t)return i.createElement(ir.a,{to:n,className:e.className,onClick:e.onClick},e.children);var o=e.openNewWindow?sr(n):n,r=e.openNewWindow?cr():void 0;return i.createElement("a",{href:o,target:r,className:e.className,onClick:e.onClick},e.children)},hr=function(e){function t(t){var n=e.call(this,t)||this;return n.m_cancelSignal=E.a.CancelToken.source(),n.state={bLoadedProfile:Boolean(Jt.GetProfile(D.i.steamid)),text:"",bPosting:!1,strPostingMessage:""},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:if(this.state.bLoadedProfile)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Jt.LoadProfiles([D.i.steamid])];case 2:return t.sent(),this.setState({bLoadedProfile:!0}),[3,4];case 3:return e=t.sent(),console.log("ShareEventOnFriendsActivityFeed: "+Object(te.a)(e).strErrorMsg),[3,4];case 4:return[2]}}))}))},t.prototype.OnTextChange=function(e){this.SetText(e.currentTarget.value)},t.prototype.SetText=function(e){this.setState({text:e})},t.prototype.GetCurText=function(){return this.state.text},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("component unmounted")},t.prototype.PostComment=function(){var e=this;this.setState({bPosting:!0}),this.AsyncPostComment().then((function(){return e.setState({bPostSuccess:!0,strPostingMessage:Object(k.d)("#EventDisplay_Share_Success")})})).catch((function(t){return e.setState({strPostingMessage:Object(k.d)("#EventDisplay_Share_Failure")+"\n\n"+Object(te.a)(t).strErrorMsg})}))},t.prototype.GetAnnouncementURL=function(){return pr(this.props.eventModel)},t.prototype.AsyncPostComment=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e=Z.a.InitFromAccountID(D.i.accountid),t=D.c.COMMUNITY_BASE_URL+"profiles/"+e.ConvertTo64BitString()+"/ajaxpostuserstatus",n=this.GetAnnouncementURL(),0!=(r=this.state.text).trim().length&&(r+="\n\n"),r+=n,(i=new FormData).append("appid",""+this.props.eventModel.appid),i.append("status_text",r),i.append("sessionid",D.c.SESSIONID),[4,E.a.post(t,i)];case 1:return o.sent(),[2]}}))}))},t.prototype.render=function(){var e=Jt.GetProfile(D.i.steamid),t=e?e.avatar_url:null,n=this.GetAnnouncementURL(),o=Z.a.InitFromAccountID(D.i.accountid);return this.state.bPosting?i.createElement(L.b,{strDescription:"",strTitle:Object(k.d)("#Button_Share"),onCancel:this.props.closeModal,onOK:this.props.closeModal,bAlertDialog:!0},i.createElement("div",{className:ve.a.FlexColumnContainer},i.createElement("div",null,Object(k.d)("#EventDisplay_Share_OnMyStatus_Details")),i.createElement("div",{className:Qt.a.Container},0==this.state.strPostingMessage.length?i.createElement(ge.a,{position:"center"}):i.createElement("div",null,this.state.strPostingMessage),Boolean(this.state.bPostSuccess)&&i.createElement("a",{href:(D.c.IN_CLIENT?"steam://openurl/":"")+D.c.COMMUNITY_BASE_URL+"profiles/"+o.ConvertTo64BitString()+"/home",target:D.c.IN_CLIENT?void 0:"_blank"},Object(k.d)("#EventDisplay_Share_OpenActivityFeed"))))):i.createElement(L.b,{strDescription:"",strTitle:Object(k.d)("#Button_Share"),onCancel:this.props.closeModal,onOK:this.PostComment,strOKButtonText:Object(k.d)("#Button_Post")},i.createElement("div",{className:ve.a.FlexColumnContainer},i.createElement("div",null,Object(k.d)("#EventDisplay_Share_OnMyStatus_Details")),i.createElement("div",{className:Object(R.a)(Qt.a.Container,ve.a.FlexColumnContainer)},i.createElement("div",null,i.createElement("img",{className:Qt.a.SmallAvatar,src:t}),i.createElement("div",{className:Object(R.a)(ve.a.FlexColumnContainer)},i.createElement(Ge,{strPlaceholder:Object(k.d)("#EventDisplay_Share_OnMyStatus_Placeholder"),fnGetCurText:this.GetCurText,fnOnTextChange:this.OnTextChange,fnSetText:this.SetText,emoticonStore:this.props.emoticonStore,bSupportHTMLImport:!1,showFormatHelp:"UserStatusPublished",limitBBCode:y.e,classNameForTextArea:Qt.a.ShareDescription,bEmbeddedInDialog:!0}))),i.createElement("div",null,i.createElement(ho,{text:n,partnerEventStore:this.props.partnerEventStore})))))},Object(o.c)([ne.a],t.prototype,"OnTextChange",null),Object(o.c)([ne.a],t.prototype,"SetText",null),Object(o.c)([ne.a],t.prototype,"GetCurText",null),Object(o.c)([ne.a],t.prototype,"PostComment",null),t=Object(o.c)([r.a],t)}(i.Component),fr=n("LI4v"),_r=n.n(fr),gr=n("RcxM"),br=n.n(gr),vr=n("gepX"),yr=n.n(vr),Sr=n("S8h3"),Cr=n.n(Sr),Or=n("FhW1"),Ir=n.n(Or),Er=n("JpLe"),wr=n.n(Er),Ar=n("lLes"),Dr=n.n(Ar),Tr=n("ABiV"),Mr=n.n(Tr),jr=n("PY+e"),Lr=n.n(jr),Gr=n("ehJQ"),Nr=n.n(Gr),Rr=n("2GiS"),kr=n.n(Rr),Br=n("EO5R"),Pr=n.n(Br),Fr=n("yXvU"),xr=n.n(Fr),Vr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=D.c.HELP_BASE_URL+"wizard/HelpWithLimitedAccount";return i.createElement(L.b,{strTitle:Object(k.d)("#Informational_Message"),onCancel:this.props.closeModal,onOK:this.props.closeModal,bAlertDialog:!0},i.createElement("div",null,Object(k.k)("#User_LimitedAccount",i.createElement("a",{href:(D.c.IN_CLIENT?"steam://openurl/":"")+e,target:D.c.IN_CLIENT?void 0:"_blank"},Object(k.d)("#User_LimitedAccount_UrlInfo")))))},t}(i.Component);var Ur,Hr=function(e){function t(t){var o=e.call(this,t)||this;o.m_cancelSignal=E.a.CancelToken.source();var r=zt.Get().BHasMyVote(t.eventModel),i=void 0;return r&&(i=n.ConvertMyVoteRaw(zt.Get().GetPreviouslyLoadedVote(t.eventModel))),o.state={bLoadedVote:!!r,myVote:i},o}var n;return Object(o.d)(t,e),n=t,t.prototype.HandleRefreshMyVotingInformation=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,r=this;return Object(o.e)(this,(function(o){return e=this.props,t=e.eventModel,e.partnerEventStore,zt.Get().BIsUserLoggedIn()&&(zt.Get().LoadMyVote(t,this.m_cancelSignal).then((function(e){var t=n.ConvertMyVoteRaw(e);r.setState({myVote:t,bLoadedVote:!0})})).catch((function(e){var t=Object(te.a)(e);console.log("EventDiscussionWidget = "+t.strErrorMsg)})),He.LoadOGGClanInfoForClanSteamID(t.clanSteamID).catch((function(e){var t=Object(te.a)(e);console.log("EventDiscussionWidget = "+t.strErrorMsg)}))),[2]}))}))},t.prototype.componentDidMount=function(){this.state.bLoadedVote||this.HandleRefreshMyVotingInformation()},t.prototype.componentDidUpdate=function(e){this.props.eventModel.GID!=e.eventModel.GID&&this.HandleRefreshMyVotingInformation()},t.ConvertMyVoteRaw=function(e){var t=void 0;return!0===e?t="up":!1===e&&(t="down"),t},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("EventDiscussionWidget is being unmounted")},t.prototype.OnVoteUp=function(){this.Vote("up")},t.prototype.OnVoteDown=function(){this.Vote("down")},t.prototype.Vote=function(e){var t=this,n=this.props.eventModel;(function(e,t){return t.BIsUserLoggedIn()?!t.GetPartnerEventPermissions(e.clanSteamID).limited_user||(Object(G.d)(i.createElement(Vr,null),window),!1):(D.c.IN_CLIENT?console.log("EventDiscussionWidget: In Client: Cannot use login widget. We expect to be already logged in."):Object(G.d)(i.createElement(L.b,{strTitle:Object(k.d)("#EventDisplay_Share_NotLoggedIn"),strDescription:Object(k.d)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:Object(k.d)("#MobileLogin_SignIn"),onOK:function(){return Lt()}}),window),!1)})(n,zt.Get())&&this.state.myVote!=e&&null!=e&&this.state.bLoadedVote&&this.setState({bVotingUp:"up"==e,bVotingDown:"down"==e},(function(){zt.Get().Vote(n,"up"===e,t.m_cancelSignal).catch((function(n){var o=Object(te.a)(n);console.error("EventDiscussionWidget.OnVote"+e+" "+o.strErrorMsg,o),t.setState({bVotingDown:!1,bVotingUp:!1})})),t.setState({myVote:e,bVotingDown:!1,bVotingUp:!1})}))},t.prototype.OnShareDialog=function(e){Object(G.d)(i.createElement(Wr,{eventModel:this.props.eventModel,emoticonStore:this.props.emoticonStore,partnerEventStore:this.props.partnerEventStore}),Object(ee.s)(e),Object(k.d)("#Button_Share"))},t.prototype.GotoDiscussion=function(e){Object(G.d)(i.createElement(L.d,{strDescription:Object(k.d)("#EventDisplay_Share_CommentMigrationInProcess")}),Object(ee.s)(e))},t.prototype.render=function(){var e=this.props.eventModel,t=Object(We.a)(e.nVotesUp-e.nVotesDown,0,Number.MAX_SAFE_INTEGER),n=e.GetForumTopicURL();return i.createElement("div",{className:qt.a.Container},i.createElement("div",{className:qt.a.InnerContainer},i.createElement("div",{className:qt.a.VoteContainer},i.createElement("div",{className:qt.a.VoteCount},i.createElement("img",{className:qt.a.VoteUpStaticIcon,src:br.a}),t.toLocaleString(k.c.GetPreferredLocales())),i.createElement("div",{className:Object(R.a)(ve.a.Button,ve.a.Icon,qt.a.DiscussionButton,"up"==this.state.myVote?qt.a.VoteButtonSelected:""),onClick:this.OnVoteUp},i.createElement("img",{className:"up"==this.state.myVote?qt.a.VoteUpSelectedIcon:qt.a.VoteUpIcon,src:"up"==this.state.myVote?yr.a:_r.a}),i.createElement("span",{className:qt.a.DiscussionButtonText},Object(k.d)("#Button_RateUp"))),i.createElement("div",{className:Object(R.a)(ve.a.Button,ve.a.Icon,qt.a.DiscussionButton,"down"==this.state.myVote?qt.a.VoteButtonSelected:""),onClick:this.OnVoteDown},i.createElement("img",{className:"down"==this.state.myVote?qt.a.VoteDownSelectedIcon:qt.a.VoteDownIcon,src:"down"==this.state.myVote?Cr.a:Ir.a}))),i.createElement("div",{className:qt.a.DiscussContainer},i.createElement("div",{className:qt.a.DiscussionCount},i.createElement("img",{className:qt.a.DiscussIcon,src:Nr.a}),e.nCommentCount.toLocaleString(k.c.GetPreferredLocales())),n&&i.createElement("a",{href:n},i.createElement("div",{className:Object(R.a)(ve.a.Button,ve.a.Icon,qt.a.DiscussionButton)},i.createElement("img",{className:qt.a.DiscussIcon,src:Lr.a}),i.createElement("span",{className:qt.a.DiscussionButtonText},Object(k.d)("#Button_Discuss")))),!n&&i.createElement("div",{onClick:this.GotoDiscussion,className:Object(R.a)(ve.a.Button,ve.a.Icon,qt.a.DiscussionButton)},i.createElement("img",{className:qt.a.DiscussIcon,src:Lr.a}),i.createElement("span",{className:qt.a.DiscussionButtonText},Object(k.d)("#Button_Discuss"))))),i.createElement("div",{className:qt.a.ShareContainer},i.createElement("div",{className:Object(R.a)(ve.a.Button,ve.a.Icon,qt.a.DiscussionButton),onClick:this.OnShareDialog},i.createElement("img",{className:qt.a.ShareIcon,src:kr.a}),i.createElement("span",{className:qt.a.DiscussionButtonText},Object(k.d)("#Button_Share")))))},Object(o.c)([ne.a],t.prototype,"OnVoteUp",null),Object(o.c)([ne.a],t.prototype,"OnVoteDown",null),Object(o.c)([ne.a],t.prototype,"OnShareDialog",null),Object(o.c)([ne.a],t.prototype,"GotoDiscussion",null),t=n=Object(o.c)([r.a],t)}(i.Component),Wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bShareOnSteamDialog:!1,bRequireLoginToShare:!1},t}return Object(o.d)(t,e),t.prototype.ShareOnSteamActivityFeed=function(){zt.Get().BIsUserLoggedIn()?this.setState({bShareOnSteamDialog:!0}):D.c.IN_CLIENT?console.log("ShareEventOnSocialMediaDialog: In Client: Cannot use login widget. We expect to be already logged in."):this.setState({bRequireLoginToShare:!0})},t.prototype.render=function(){var e=this.props,t=e.eventModel,n=e.closeModal,o=e.emoticonStore,r=e.partnerEventStore;return this.state.bRequireLoginToShare?i.createElement(L.b,{strTitle:Object(k.d)("#EventDisplay_Share_NotLoggedIn"),strDescription:Object(k.d)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:Object(k.d)("#MobileLogin_SignIn"),onCancel:this.props.closeModal,onOK:function(){return Lt()}}):this.state.bShareOnSteamDialog?i.createElement(hr,{eventModel:t,emoticonStore:o,partnerEventStore:r,closeModal:n}):i.createElement(L.b,{strDescription:"",strTitle:Object(k.d)("#Button_Share"),onCancel:this.props.closeModal,onOK:this.props.closeModal,bAlertDialog:!0},i.createElement(zr,{eventModel:t,fnShareOnSteamActivityFeed:this.ShareOnSteamActivityFeed}))},Object(o.c)([ne.a],t.prototype,"ShareOnSteamActivityFeed",null),t}(i.Component),zr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refInputText=i.createRef(),t}return Object(o.d)(t,e),t.prototype.CopyToClipboard=function(e){this.refInputText.current&&(this.refInputText.current.select(),document.execCommand("copy"))},t.prototype.render=function(){var e=this.props.eventModel;return i.createElement("div",{className:Object(R.a)(ve.a.FlexColumnContainer,qt.a.share_controls_ctn)},i.createElement("div",{className:ve.a.FlexRowContainer,style:{flexWrap:"wrap"}},i.createElement("div",{"data-tooltip-text":Object(k.d)("#EventDisplay_Share_OnSteam"),onClick:this.props.fnShareOnSteamActivityFeed,className:Object(R.a)(ve.a.Button,qt.a.ShareBtn)},i.createElement("img",{className:qt.a.SteamIcon,src:xr.a}),i.createElement("span",{style:{whiteSpace:"nowrap"}},Object(k.d)("#EventDisplay_Share_OnMyStatus"))),i.createElement("a",{"data-tooltip-text":Object(k.d)("#EventDisplay_Share_OnFaceBook"),href:(D.c.IN_CLIENT?"steam://openurl_external/":"")+lr(e,or.k_eFacebook),target:D.c.IN_CLIENT?void 0:"_blank",className:qt.a.ShareBtn},i.createElement("img",{className:Object(R.a)(ve.a.Button),src:wr.a})),i.createElement("a",{"data-tooltip-text":Object(k.d)("#EventDisplay_Share_OnTwitter"),href:(D.c.IN_CLIENT?"steam://openurl_external/":"")+lr(e,or.k_eTwitter),target:D.c.IN_CLIENT?void 0:"_blank",className:qt.a.ShareBtn},i.createElement("img",{className:Object(R.a)(ve.a.Button),src:Mr.a})),i.createElement("a",{"data-tooltip-text":Object(k.d)("#EventDisplay_Share_OnReddit"),href:(D.c.IN_CLIENT?"steam://openurl_external/":"")+lr(e,or.k_eReddit),target:D.c.IN_CLIENT?void 0:"_blank",className:qt.a.ShareBtn},i.createElement("img",{className:Object(R.a)(ve.a.Button),src:Dr.a}))),i.createElement("div",{className:ve.a.Divider}),i.createElement("div",{className:Object(R.a)(ve.a.FlexRowContainer,qt.a.linkField)},i.createElement("span",null,Object(k.d)("#EventDisplay_Share_Link")),i.createElement("input",{className:qt.a.LinkInput,ref:this.refInputText,type:"text",value:pr(e),readOnly:!0}),document.queryCommandSupported("copy")&&i.createElement("div",{className:ve.a.Button,onClick:this.CopyToClipboard,"data-tooltip-text":Object(k.d)("#ToolTip_CopyLinkToClipboard")},i.createElement("img",{className:qt.a.ClipboardIcon,src:Pr.a}))))},Object(o.c)([ne.a],t.prototype,"CopyToClipboard",null),t}(i.Component),Yr=n("2fJL"),qr=n.n(Yr),Kr=n("NP+6"),Qr=n.n(Kr),Zr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={eCategoryLoaded:null,nomineeAppID:null},t.m_strPreviousNomineeTitle=null,t.m_cancelSignal=E.a.CancelToken.source(),t.m_refCheckbox=i.createRef(),t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.FetchNominationState()},t.prototype.componentDidUpdate=function(){this.props.event.GetSteamAwardCategory()!=this.state.eCategoryLoaded&&(this.m_strPreviousNomineeTitle=null,this.FetchNominationState())},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("EventDisplaySteamAwardNomination is being unmounted")},t.prototype.FetchNominationState=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.props.event.GetSteamAwardCategory()==Je.k_ENone)return this.setState({eCategoryLoaded:Je.k_ENone,nomineeAppID:null}),[2];e=D.c.STORE_BASE_URL+"steamawards/ajaxgetusernominations",t={sessionid:D.c.SESSIONID,authwgtoken:D.i.authwgtoken},o.label=1;case 1:return o.trys.push([1,5,,6]),[4,E.a.get(e,{params:t,withCredentials:!0,cancelToken:this.m_cancelSignal.token})];case 2:return(n=o.sent())&&n.data&&n.data.success&&n.data.nominations?(r=this.props.event.GetSteamAwardCategory(),i=n.data.nominations[$e(r)],a=i&&i.appid,this.setState({eCategoryLoaded:r,nomineeAppID:a}),a&&a!=this.props.event.appid?[4,pe.EnsureStoreCapsuleInfoLoaded(a)]:[3,4]):[3,4];case 3:s=o.sent(),this.props.event.GetSteamAwardCategory()==r&&(this.m_strPreviousNomineeTitle=s.GetAppStoreData().title),o.label=4;case 4:return[3,6];case 5:return c=o.sent(),l=Object(te.a)(c),console.error("Could not fetch previous nominations:"+l.strErrorMsg,l),[3,6];case 6:return[2]}}))}))},t.prototype.OnNominateClick=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r=this;return Object(o.e)(this,(function(o){return(t=this.props.event.GetSteamAwardCategory())!=this.state.eCategoryLoaded||(n=this.props.event.appid,this.state.nomineeAppID&&this.state.nomineeAppID!=n?e&&this.HandleConflict((function(){return r.SaveNomination(t,n,e)})):this.SaveNomination(t,n,e)),[2]}))}))},t.prototype.HandleConflict=function(e){var t=this;Object(G.d)(i.createElement(Jr,{strLocTokenInfix:"Nomination",strNewGameTitle:this.props.event.GetGameTitle(this.props.lang),fnGetOldGameTitle:function(){return t.m_strPreviousNomineeTitle},fnOnConfirm:e,fnOnCancel:function(){return t.m_refCheckbox.current&&t.m_refCheckbox.current.checked&&t.m_refCheckbox.current.Toggle()}}),window)},t.prototype.SaveNomination=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.setState({eCategoryLoaded:e,nomineeAppID:n?t:null}),this.props.previewMode?[2]:(r=D.c.STORE_BASE_URL+"steamawards/ajaxnominategame",(i=new URLSearchParams).append("sessionid",D.c.SESSIONID),i.append("authwgtoken",D.i.authwgtoken),i.append("categoryid",$e(e).toString()),i.append("nominatedid",t.toString()),i.append("rescind",n?"0":"1"),i.append("source","4"),[4,E.a.post(r,i,{withCredentials:!0,cancelToken:this.m_cancelSignal.token})]);case 1:return(a=o.sent())&&200==a.status&&1==a.data.success||console.error("Nomination request failed.",a&&Object(te.a)(a)),[2]}}))}))},t.prototype.render=function(){var e=this.props.event.GetSteamAwardCategory(),t=!!e&&e!=Je.k_ENone,n=this.state.eCategoryLoaded==e&&this.state.nomineeAppID==this.props.event.appid,o=this.props.event.BIsEventActionEnabled(),r=t&&(o||n);return i.createElement("div",{className:Object(R.a)(Qr.a.SteamAwardContainer,t&&qr.a["Category_"+e])},i.createElement("div",{className:Qr.a.SteamAwardHeader},i.createElement("img",{className:Qr.a.SteamAwardHeaderImage,src:D.c.STORE_CDN_URL+"public/images/promo/autumn2019/event_nomination_banner_2.png"}),i.createElement("div",{className:Qr.a.SteamAwardMainCtn},i.createElement("div",{className:Qr.a.SteamAwardMainTitle}," ",Object(k.d)("#SteamAwards_EventMainTitle")," "),i.createElement("div",{className:Qr.a.SteamAwardSubTitle},Object(k.d)(o?"#SteamAwards_EventCallToAction":"#SteamAwards_EventVotingDateTeaser"),o&&i.createElement("a",{href:D.c.STORE_BASE_URL+"steamawards/nominations/",className:Qr.a.SteamAwardLearnMore},"(",Object(k.d)("#EventDisplay_CallToAction_LearnMore"),")")),i.createElement("div",{className:Qr.a.SteamAwardHeaderText},o?t?Object(k.d)("#SteamAwards_EventNominateGamePrompt_Long",this.props.event.GetGameTitle(this.props.lang)):i.createElement("a",{className:qr.a.LinkText,href:D.c.STORE_BASE_URL+"steamawards/nominations/"},Object(k.d)("#SteamAwards_EventNominateGamePrompt_NoCategory",this.props.event.GetGameTitle(this.props.lang))):Object(k.d)("#SteamAwards_Event_NominationsClosed")))),r&&i.createElement("div",{className:Qr.a.SteamAwardVoteWidget},i.createElement("div",{className:Qr.a.SteamAwardVotePrompt}," ",o&&Object(k.d)("#SteamAwards_EventNominateGamePrompt_CategoryPrefix")," "),i.createElement("div",{className:Qr.a.SteamAwardNominateButton},i.createElement(j.e,{ref:this.m_refCheckbox,classname:Qr.a.SteamAwardVoteCheckBox,checked:n,onChange:this.OnNominateClick,disabled:!o,color:"#bcf3dc",highlightColor:"white",label:i.createElement(i.Fragment,null,i.createElement("div",{className:Qr.a.SteamAwardCategoryTitle},Object(k.d)("#SteamAward_CategoryTitle_"+e)),i.createElement("span",{className:Qr.a.SteamAwardCategoryDesc},Object(k.d)("#SteamAward_CategoryDesc_"+e)))})),o&&i.createElement("div",{className:Qr.a.SteamAwardLinkToNominationPage},i.createElement("a",{href:D.c.STORE_BASE_URL+"steamawards/nominations/"}," ",Object(k.d)("#SteamAwards_EventNominationAlternativeLinkText")," "))))},Object(o.c)([w.A],t.prototype,"m_strPreviousNomineeTitle",void 0),Object(o.c)([ne.a],t.prototype,"OnNominateClick",null),Object(o.c)([ne.a],t.prototype,"SaveNomination",null),t=Object(o.c)([r.a],t)}(i.Component),Jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnConfirm=function(){this.props.fnOnConfirm(),this.props.closeModal()},t.prototype.OnCancel=function(){this.props.fnOnCancel(),this.props.closeModal&&this.props.closeModal()},t.prototype.render=function(){var e=i.createElement("span",{className:Qr.a.SteamAwardModalGameTitle},this.props.strNewGameTitle),t=this.props.fnGetOldGameTitle(),n=t?i.createElement("span",{className:Qr.a.SteamAwardModalGameTitle},t):i.createElement(ge.a,{size:"small",position:"center",string:Object(k.d)("#Loading")});return i.createElement(L.b,{bDestructiveWarning:!0,strTitle:Object(k.d)("#SteamAward_"+this.props.strLocTokenInfix+"ConflictWarning_Title"),strDescription:Object(k.k)("#SteamAward_"+this.props.strLocTokenInfix+"ConflictWarning_Explanation",n,e),onOK:this.OnConfirm,onCancel:this.OnCancel})},Object(o.c)([ne.a],t.prototype,"OnConfirm",null),Object(o.c)([ne.a],t.prototype,"OnCancel",null),t=Object(o.c)([r.a],t)}(i.Component),Xr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={eCategoryLoaded:null,votedForAppID:null},t.m_strPreviousVotedForAppTitle=null,t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.FetchVoteState()},t.prototype.componentDidUpdate=function(){this.props.event.GetSteamAwardCategory()!=this.state.eCategoryLoaded&&this.FetchVoteState()},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("EventDisplaySteamAwardVote is being unmounted")},t.prototype.FetchVoteState=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:e=D.c.STORE_BASE_URL+"steamawards/ajaxgetuservotes",t={sessionid:D.c.SESSIONID,authwgtoken:D.i.authwgtoken,year:2019},o.label=1;case 1:return o.trys.push([1,5,,6]),[4,E.a.get(e,{params:t,withCredentials:!0,cancelToken:this.m_cancelSignal.token})];case 2:return(n=o.sent())&&n.data&&n.data.success&&n.data.votes?(r=this.props.event.GetSteamAwardCategory(),i=n.data.votes[$e(r)],this.setState({eCategoryLoaded:r,votedForAppID:i}),i&&i!=this.props.event.appid?[4,pe.EnsureStoreCapsuleInfoLoaded(i)]:[3,4]):[3,4];case 3:a=o.sent(),this.props.event.GetSteamAwardCategory()==r&&(this.m_strPreviousVotedForAppTitle=a.GetAppStoreData().title),o.label=4;case 4:return[3,6];case 5:return s=o.sent(),c=Object(te.a)(s),console.error("Could not fetch previous votes:"+c.strErrorMsg,c),[3,6];case 6:return[2]}}))}))},t.prototype.OnVoteClick=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(o){return(e=this.props.event.GetSteamAwardCategory())!=this.state.eCategoryLoaded||(t=this.props.event.appid,this.state.votedForAppID&&this.state.votedForAppID!=t?this.HandleConflict((function(){return n.SaveVote(e,t)})):this.SaveVote(e,t)),[2]}))}))},t.prototype.HandleConflict=function(e){var t=this;Object(G.d)(i.createElement(Jr,{strLocTokenInfix:"Vote",strNewGameTitle:this.props.event.GetGameTitle(this.props.lang),fnGetOldGameTitle:function(){return t.m_strPreviousVotedForAppTitle},fnOnConfirm:e,fnOnCancel:function(){}}),window)},t.prototype.SaveVote=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.setState({eCategoryLoaded:e,votedForAppID:t}),this.props.previewMode?[2]:(n=D.c.STORE_BASE_URL+"steamawards/ajaxvoteforgame",(r=new URLSearchParams).append("sessionid",D.c.SESSIONID),r.append("authwgtoken",D.i.authwgtoken),r.append("categoryid",$e(e).toString()),r.append("appid",t.toString()),r.append("year","2019"),[4,E.a.post(n,r,{withCredentials:!0,cancelToken:this.m_cancelSignal.token})]);case 1:return(i=o.sent())&&200==i.status&&1==i.data.success||console.error("Vote request failed.",i&&Object(te.a)(i)),[2]}}))}))},t.prototype.render=function(){var e=this.props.event.GetSteamAwardCategory(),t=this.state.eCategoryLoaded==e&&this.state.votedForAppID==this.props.event.appid,n=this.props.event.BIsEventActionEnabled(),o=n||t;return i.createElement("div",{className:Object(R.a)(Qr.a.SteamAwardContainer,qr.a["Category_"+e])},i.createElement("div",{className:Qr.a.SteamAwardHeader},i.createElement("img",{className:Qr.a.SteamAwardHeaderImage,src:D.c.STORE_CDN_URL+"public/images/promo/autumn2019/event_nomination_banner_2.png"}),i.createElement("div",{className:Qr.a.SteamAwardMainCtn},i.createElement("div",{className:Qr.a.SteamAwardMainTitle}," ",Object(k.d)("#SteamAwards_EventMainTitle")," "),i.createElement("div",{className:Qr.a.SteamAwardMainTitle}," ",Object(k.d)("#SteamAwards_EventMainTitleSecondLine")," "),i.createElement("div",{className:Qr.a.SteamAwardHeaderText},n?i.createElement(i.Fragment,null,Object(k.d)("#SteamAwards_EventVoteForGamePrompt",this.props.event.GetGameTitle(this.props.lang)),i.createElement("a",{href:D.c.STORE_BASE_URL+"steamawards/",className:Object(R.a)(Qr.a.SteamAwardLearnMore,Qr.a.BottomRight)},Object(k.d)("#EventDisplay_CallToAction_LearnMore"))):i.createElement("a",{href:D.c.STORE_BASE_URL+"steamawards/",className:Qr.a.LinkText},Object(k.d)("#SteamAwards_Event_VotesClosed"))))),o&&i.createElement("div",{className:Qr.a.SteamAwardVoteWidget},i.createElement("div",{className:Qr.a.SteamAwardVotePrompt}),i.createElement("div",{className:Qr.a.SteamAwardVoteButtonArea},i.createElement("div",{className:Qr.a.SteamAwardCategoryTitle},Object(k.d)("#SteamAward_CategoryTitle_"+e)),i.createElement("span",{className:Qr.a.SteamAwardCategoryDesc},Object(k.d)("#SteamAward_CategoryDesc_"+e)),t?i.createElement("div",{className:Qr.a.SteamAwardVoteButtonSubmitted},Object(k.d)("#SteamAward_VoteButton_AlreadyVotedText")):i.createElement("button",{className:Qr.a.SteamAwardVoteButton,onClick:this.OnVoteClick},i.createElement("span",{className:Qr.a.SteamAwardVoteButtonText},Object(k.d)("#SteamAward_VoteButton_PromptText"))))))},Object(o.c)([w.A],t.prototype,"m_strPreviousVotedForAppTitle",void 0),Object(o.c)([ne.a],t.prototype,"OnVoteClick",null),Object(o.c)([ne.a],t.prototype,"SaveVote",null),t=Object(o.c)([r.a],t)}(i.Component),$r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){pe.EnsureStoreCapsuleInfoLoaded(this.props.appid)},t.prototype.ConstructSocialLinks=function(){var e=pe.GetStoreCapsuleInfo(this.props.appid).GetAppStoreData(),t=new Array;if(e.social)for(var n=0,o=e.social;n<o.length;n++){var r=o[n];3!=r.external_type&&t.push(i.createElement("a",{key:"app_social_link_"+e.appid+"_"+r.external_type,href:(D.c.IN_CLIENT?"steam://openurl_external/":"")+r.external_url,"data-tooltip-text":r.external_user_name,target:D.c.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"},i.createElement("img",{className:qr.a.AppSocialLink,src:D.c.IMG_URL+"social/"+Object(k.d)("#SocialMedia_Type_ShortName_"+r.external_type).toLocaleLowerCase()+"_large.png"})))}return t},t.prototype.render=function(){var e=this.ConstructSocialLinks();return 0!=e.length&&D.c.IMG_URL?i.createElement("div",{className:qr.a.AppSocialLinksCtn},i.createElement("div",{className:ve.a.EventEditorTextTitle},Object(k.d)("#EventDisplay_SocialTitle")),i.createElement("div",{className:qr.a.AppSocialLinks},e)):null},t=Object(o.c)([r.a],t)}(i.Component),ei=(i.Component,Object(r.a)((function(e){return i.createElement("div",{className:qr.a.EventDetailTimeInfo},i.createElement(zn,{startDateAndTime:e.event.GetStartTimeAndDateUnixSeconds(),endDateAndTime:e.event.GetEndTimeAndDateUnixSeconds(),bHideEndTime:!de(e.event.type)}))}))),ti=n("adxy"),ni=n("ap/q"),oi=n.n(ni),ri=n("5l92"),ii=i.lazy((function(){return n.e(3).then(n.bind(null,"f6yG"))})),ai=function(e){function t(t){var n=e.call(this,t)||this;return n.m_loader=null,n.m_refPage=i.createRef(),n.m_refContent=i.createRef(),n.m_refScroll=i.createRef(),n.m_refScrollAnchor=i.createRef(),n.m_scrollAnimation=null,n.m_nPreviousRenderCount=0,n.m_nCurrentRenderCount=0,n.props.bShowOnlyInitialEvent||(n.m_loader=new li(n.props.partnerEventStore),n.m_loader.InitAroundEvent(n.props.initialEvent)),n}return Object(o.d)(t,e),t.prototype.FindCurrentlyViewedEventIndex=function(){if(!this.m_refContent.current||!this.m_refScroll.current)return-1;for(var e=this.m_refContent.current.children,t=this.GetScrollTopForComparison(),n=0;n<e.length;n++){var o=e[n],r=o.offsetTop,i=r+o.clientHeight;if(r<=t&&i>t)return n}return-1},t.prototype.GetPaddingTop=function(){return this.props.showAppHeader?136:56},t.prototype.GetScrollTopForComparison=function(){return Math.ceil(this.m_refScroll.current.scrollTop+this.GetPaddingTop()+24)},t.prototype.ScrollToEvent=function(e){var t=this.m_refContent.current;if(t&&!(e<0||e>=t.children.length||this.m_scrollAnimation)){var n=t.children[e].offsetTop-this.GetPaddingTop();this.ScrollToOffset(n)}},t.prototype.ScrollToOffset=function(e){var t=this.m_refScroll.current;if(t){var n={msDuration:500,timing:"cubic-in-out",onComplete:this.OnScrollComplete};this.m_scrollAnimation=new ti.a(t,{scrollTop:e},n),this.m_scrollAnimation.Start()}},t.prototype.ScrollToBottom=function(){this.m_refScroll.current&&this.ScrollToOffset(this.m_refScroll.current.scrollHeight)},t.prototype.ScrollToNextEvent=function(){var e=this.m_loader.GetEvents(),t=this.FindCurrentlyViewedEventIndex()+1;t>=e.length?this.ScrollToBottom():(this.ScrollToEvent(t),t==e.length-1&&this.m_loader.LoadMoreAtEnd())},t.prototype.ScrollToPrevEvent=function(){var e=this.FindCurrentlyViewedEventIndex(),t=e-1;if(t<0)this.ScrollToOffset(0);else{var n=this.m_refContent.current;if(n){var o=n.children[e],r=o.offsetTop,i=r+o.clientHeight,a=this.GetScrollTopForComparison();r<=(a-=.3*(i-r))&&(t=e)}this.ScrollToEvent(t)}},t.prototype.OnScrollComplete=function(){this.m_scrollAnimation=null},t.prototype.Close=function(){this.props.closeModal&&this.props.closeModal()},t.prototype.OnBackgroundClick=function(e){e.currentTarget==e.target&&this.Close()},t.prototype.OnKeyDown=function(e){27==e.keyCode&&this.Close()},t.prototype.OnScroll=function(e){if(!this.props.bShowOnlyInitialEvent){var t=this.m_refScroll.current;if(t){var n=t.clientHeight;t.scrollHeight-(t.scrollTop+n)<=n&&this.m_loader.LoadMoreAtEnd(),t.scrollTop<=n&&this.m_loader.LoadMoreAtBeginning()}}},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this.m_nCurrentRenderCount!=this.m_nPreviousRenderCount;if(this.m_nPreviousRenderCount=this.m_nCurrentRenderCount,!t)return null;var n=this.m_refScroll.current;if(!n||!this.m_refScrollAnchor.current)return null;var o=this.m_refScrollAnchor.current.GetDOM();return o?o.offsetTop-n.scrollTop:null},t.prototype.OnTouchStart=function(e){1==e.touches.length&&(this.m_nTouchStartClientY=e.touches[0].clientY)},t.prototype.OnTouchMove=function(e){if(this.m_refScroll.current&&0!=e.touches.length){var t=this.m_nTouchStartClientY-e.touches[0].clientY;this.SuppressUnwantedScrollEventsBecauseSafariIsDumb(e,t)}},t.prototype.OnWheel=function(e){this.SuppressUnwantedScrollEventsBecauseSafariIsDumb(e,e.deltaY)},t.prototype.SuppressUnwantedScrollEventsBecauseSafariIsDumb=function(e,t){var n=e.target instanceof Node&&ee.e(this.m_refScroll.current,e.target),o=t<0&&this.m_refScroll.current.scrollTop<1,r=this.m_refScroll.current.scrollHeight-this.m_refScroll.current.scrollTop<=this.m_refScroll.current.clientHeight;(!n||o||t>0&&r)&&e.cancelable&&e.preventDefault()},t.prototype.SetGlobalHeaderHidden=function(e){var t=document.getElementsByClassName("responsive_header");Object(X.a)(t.length<=1,"Must have at most one responsive_header"),t.length>=1&&(t[0].style.display=e?"none":null)},t.prototype.componentDidMount=function(){var e=this.m_refScroll.current;e&&!ee.e(e,e.ownerDocument.activeElement)&&e.focus();var t=this.m_refPage.current;t&&(t.addEventListener("touchstart",this.OnTouchStart),t.addEventListener("touchmove",this.OnTouchMove,{passive:!1}),t.addEventListener("wheel",this.OnWheel,{passive:!1})),this.props.showAppHeader&&this.SetGlobalHeaderHidden(!0)},t.prototype.componentDidUpdate=function(e,t,n){if(null!==n){var o=this.m_refScroll.current;o&&!ee.e(o,o.ownerDocument.activeElement)&&o.focus();var r=this.m_refScrollAnchor.current?this.m_refScrollAnchor.current.GetDOM():null;r&&(o.scrollTop=r.offsetTop-n)}},t.prototype.componentWillUnmount=function(){var e=this.m_refPage.current;e&&(e.removeEventListener("touchstart",this.OnTouchStart),e.removeEventListener("touchmove",this.OnTouchMove),e.removeEventListener("wheel",this.OnWheel)),this.props.showAppHeader&&this.SetGlobalHeaderHidden(!1)},t.prototype.render=function(){for(var e,t,n=this.props,o=n.initialEvent,r=n.bShowOnlyInitialEvent,a=[],s=0,c=r?[o]:this.m_loader.GetEvents();s<c.length;s++){var l=c[s],p=l.GID==this.props.initialEvent.GID;a.push(i.createElement(ci,{ref:p?this.m_refScrollAnchor:null,key:l.GID,event:l,emoticonStore:this.props.emoticonStore,partnerEventStore:this.props.partnerEventStore,appStore:this.props.appInfoStore,disableReadTracking:p,fnFilterImageURLsForKnownFailures:this.props.fnFilterImageURLsForKnownFailures,fnImageFailureCallback:this.props.fnImageFailureCallback})),null==e&&(e=l.appid),null==t&&(t=l.clanSteamID.GetAccountID())}this.m_nCurrentRenderCount=a.length;var u="";if(this.props.onAppIconClick)if(e){var m=e&&this.props.appInfoStore.GetAppInfo(e);u=m?m.icon_url:""}else if(t){var d=He.GetClanInfoByClanAccountID(t);u=d?d.avatar_full_url:""}return i.createElement("div",{className:oi.a.AppPartnerEventsPage,ref:this.m_refPage},this.props.showAppHeader&&i.createElement(ui,{appInfoStore:this.props.appInfoStore,appId:e,clanId:t}),i.createElement("div",{className:oi.a.AppPartnerEventsBody,ref:this.m_refScroll,onScroll:this.OnScroll,onClick:this.OnBackgroundClick,tabIndex:-1,onKeyDown:this.OnKeyDown},i.createElement("div",{className:Object(R.a)(oi.a.ControlSection,!this.props.onAppIconClick&&oi.a.NoGameLink,r&&oi.a.NoScrollArrows)},i.createElement("div",{className:oi.a.ControlSectionWidth},i.createElement("div",{className:oi.a.ControlSectionRightSide},Boolean(this.props.closeModal)&&i.createElement("div",{className:Object(R.a)(oi.a.CloseButton,oi.a.AnimIn),onClick:this.Close},i.createElement(N.qb,null)),!r&&i.createElement("div",{className:Object(R.a)(oi.a.ScrollButton,oi.a.Up,oi.a.AnimIn),onClick:this.ScrollToPrevEvent},i.createElement(N.t,{angle:0})),!r&&i.createElement("div",{className:Object(R.a)(oi.a.ScrollButton,oi.a.Down,oi.a.AnimIn),onClick:this.ScrollToNextEvent},i.createElement(N.t,{angle:180})),this.props.onAppIconClick&&i.createElement("div",{className:Object(R.a)(oi.a.ScrollButton,oi.a.GameArt,oi.a.AnimIn),onClick:this.props.onAppIconClick},i.createElement("img",{src:u}))))),!r&&i.createElement(si,{loader:this.m_loader,location:"top"}),i.createElement("div",{ref:this.m_refContent,className:oi.a.AppPartnerEventsContainer},a),!r&&i.createElement(si,{loader:this.m_loader,location:"bottom"})))},Object(o.c)([ne.a],t.prototype,"ScrollToNextEvent",null),Object(o.c)([ne.a],t.prototype,"ScrollToPrevEvent",null),Object(o.c)([ne.a],t.prototype,"OnScrollComplete",null),Object(o.c)([ne.a],t.prototype,"Close",null),Object(o.c)([ne.a],t.prototype,"OnBackgroundClick",null),Object(o.c)([ne.a],t.prototype,"OnKeyDown",null),Object(o.c)([ne.a],t.prototype,"OnScroll",null),Object(o.c)([ne.a],t.prototype,"OnTouchStart",null),Object(o.c)([ne.a],t.prototype,"OnTouchMove",null),Object(o.c)([ne.a],t.prototype,"OnWheel",null),t=Object(o.c)([r.a],t)}(i.Component),si=Object(r.a)((function(e){var t=e.loader.GetNewerState(),n=e.loader.GetOlderState();return t==Ur.Loading&&n==Ur.Loading?null:("top"==e.location?t:n)==Ur.Loading?i.createElement("div",{className:oi.a.DirectionState},i.createElement(ge.a,{position:"center",string:Object(k.d)("#Loading")})):null})),ci=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refContent=i.createRef(),t.m_sendReadInfo=new $.b,t.m_bSentRead=!1,t}return Object(o.d)(t,e),t.prototype.OnEnterVisible=function(){var e=this;if(!this.m_bSentRead&&!this.m_sendReadInfo.IsScheduled()){this.m_sendReadInfo.Schedule(750,(function(){zt.Get().RecordEventRead(e.props.event,4),e.m_bSentRead=!0}))}},t.prototype.OnLeaveVisible=function(){this.m_sendReadInfo.Cancel()},t.prototype.GetDOM=function(){return this.m_refContent.current},t.prototype.render=function(){var e=this.props,t=e.event,n=e.langOverride,o=e.partnerEventStore,r=e.emoticonStore,a=e.appStore,s=e.fnFilterImageURLsForKnownFailures,c=e.fnImageFailureCallback,l=e.headerClassnames,p=n||Object(Q.e)(D.c.LANGUAGE),u=t.GetDescriptionWithFallback(p)||"",m=l,d=t.GetImageForSizeAsArrayWithFallback("background",p,z.background_main);s&&(d=s(d));var h=t.GetCategoryAsString(),f=t.type,_=t.BImageNeedScreenshotFallback("background",p),g="";if(t.appid){var b=a.GetAppInfo(t.appid);g=b?b.name:""}else if(t.clanSteamID){var v=He.GetClanInfoByClanAccountID(t.clanSteamID.GetAccountID());g=v?v.group_name:""}var y=Qe.GetTimeNowWithOverride(),S=28!==f&&y<t.GetStartTimeAndDateUnixSeconds();return i.createElement("div",{ref:this.m_refContent,className:Object(R.a)(oi.a.PartnerEvent,qr.a.InLibraryView,"editor"==m?qr.a.InEditor:"")},12!=f&&!_&&i.createElement(dn,{className:Object(R.a)(qr.a.EventCoverImageBackground),rgSources:d,onIncrementalError:function(e,t,n){return c&&c(t)}}),i.createElement(dn,{className:qr.a.EventBackgroundBlur,rgSources:d,onIncrementalError:function(e,t,n){return c&&c(t)}}),i.createElement("div",{className:qr.a.LibraryEventTitleContainer},i.createElement("div",{className:qr.a.EventDetailTitleContainer},i.createElement("div",{className:Object(R.a)(oi.a.EventTypeAndTimeRow,S&&oi.a.WithReminder)},i.createElement("div",{className:oi.a.TimeandPostedBy},i.createElement("span",{className:oi.a.EventType},h),i.createElement("span",{className:oi.a.PostedBy}," ",Object(k.d)("#EventDisplay_PostedBy"),g," "),i.createElement(ei,{event:t})),S&&i.createElement("div",{className:oi.a.ReminderContainer},i.createElement(Kn,{eventModel:t,eventGID:t.GID,lang:p,bExpandLeft:!0}))),!this.props.disableReadTracking&&i.createElement(kt.a,{onEnter:this.OnEnterVisible,onLeave:this.OnLeaveVisible,bottomOffset:"300px"}),i.createElement(dr,{eventModel:t,forceAnchor:!0,route:nr.k_eView,className:qr.a.EventDetailTitle},t.GetNameWithFallback(p)),t.BHasSubTitle(p)&&i.createElement("div",{className:Object(R.a)(qr.a.EventDetailsSubTitle,oi.a.LibraryViewSubtitle)},t.GetSubTitle(p)),i.createElement("div",{className:qr.a.EventDetailUserType}))),t.BHasBroadcastEnabled()&&i.createElement("div",{className:qr.a.EventBroadcastCtn},i.createElement(i.Suspense,{fallback:i.createElement("div",null)},i.createElement(ii,{event:this.props.event}))),t.BHasTag("steam_award_nomination_request")&&i.createElement(Zr,{event:t,lang:p}),t.BHasTag("steam_award_vote_request")&&i.createElement(Xr,{event:t,lang:p}),i.createElement("div",{className:qr.a.LibraryEventBodyContainer},i.createElement("div",{className:Object(R.a)(qr.a.EventDetailsBody,oi.a.EventDetailsBody),onContextMenu:D.c.IN_CLIENT?mt.i:void 0},i.createElement(ho,{text:u,partnerEventStore:o,event:t}),i.createElement("span",{className:ve.a.Clear})),Boolean(t.jsondata.read_more_link)&&i.createElement("div",{className:Object(R.a)(oi.a.ReadMoreCnt)},i.createElement(pt.b,{className:Object(R.a)(ve.a.Button),href:t.jsondata.read_more_link},Object(k.d)("#EventEmail_Button_ClickForMoreDetails"))),i.createElement($r,{appid:t.appid})),i.createElement(Hr,{eventModel:t,partnerEventStore:o,emoticonStore:r}))},Object(o.c)([ne.a],t.prototype,"OnEnterVisible",null),Object(o.c)([ne.a],t.prototype,"OnLeaveVisible",null),t=Object(o.c)([r.a],t)}(i.Component);!function(e){e[e.Idle=1]="Idle",e[e.Loading=2]="Loading",e[e.EndOfContent=3]="EndOfContent"}(Ur||(Ur={}));var li=function(){function e(e){this.k_nMaxPerDirection=3,this.m_nAppID=0,this.m_rgEvents=[],this.m_eOlderDirection=Ur.Idle,this.m_eNewerDirection=Ur.Idle,this.m_partnerEventStore=e}return e.prototype.GetEvents=function(){return this.m_rgEvents},e.prototype.GetAppID=function(){return this.m_nAppID},e.prototype.GetOlderState=function(){return this.m_eOlderDirection},e.prototype.GetNewerState=function(){return this.m_eNewerDirection},e.prototype.InitAroundEvent=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:t=this.m_partnerEventStore,this.m_nAppID=e.appid,this.m_clanSteamID=e.clanSteamID,this.m_rgEvents=[],this.m_eOlderDirection=Ur.Loading,this.m_eNewerDirection=Ur.Loading,this.m_rgEvents.push(e),n=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.LoadAdjacentPartnerEventsByEvent(e,this.m_clanSteamID,this.m_nAppID,this.k_nMaxPerDirection,this.k_nMaxPerDirection)];case 2:return n=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return Object(w.E)((function(){if(!n||0==n.length)return r.m_eOlderDirection=Ur.Idle,void(r.m_eNewerDirection=Ur.Idle);var t=n.findIndex((function(t){return t.GID==e.GID})),o=t,i=t>=0?n.length-t-1:0;r.m_eNewerDirection=o>=r.k_nMaxPerDirection?Ur.Idle:Ur.EndOfContent,r.m_eOlderDirection=i>=r.k_nMaxPerDirection?Ur.Idle:Ur.EndOfContent,r.m_rgEvents=n})),[2]}}))}))},e.prototype.LoadMoreAtEnd=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_eOlderDirection!=Ur.Idle)return[2];if(0==this.m_rgEvents.length)return[2];e=this.m_rgEvents[this.m_rgEvents.length-1],this.m_eOlderDirection=Ur.Loading,t=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.m_partnerEventStore.LoadAdjacentPartnerEventsByEvent(e,this.m_clanSteamID,this.m_nAppID,0,this.k_nMaxPerDirection)];case 2:return t=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return Object(w.E)((function(){if(t){for(var e=new Set(n.m_rgEvents.map((function(e){return e.GID}))),o=0,r=t;o<r.length;o++){var i=r[o];e.has(i.GID)||(n.m_rgEvents.push(i),e.add(i.GID))}n.m_eOlderDirection=t.length>=n.k_nMaxPerDirection?Ur.Idle:Ur.EndOfContent}else n.m_eOlderDirection=Ur.Idle})),[2]}}))}))},e.prototype.LoadMoreAtBeginning=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.m_eNewerDirection!=Ur.Idle)return[2];if(0==this.m_rgEvents.length)return[2];e=this.m_rgEvents[0],this.m_eNewerDirection=Ur.Loading,t=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.m_partnerEventStore.LoadAdjacentPartnerEventsByEvent(e,this.m_clanSteamID,this.m_nAppID,this.k_nMaxPerDirection,0)];case 2:return t=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return Object(w.E)((function(){if(t){for(var e=new Set(n.m_rgEvents.map((function(e){return e.GID}))),o=0,r=t.reverse();o<r.length;o++){var i=r[o];e.has(i.GID)||(n.m_rgEvents.unshift(i),e.add(i.GID))}n.m_eNewerDirection=t.length>=n.k_nMaxPerDirection?Ur.Idle:Ur.EndOfContent}else n.m_eNewerDirection=Ur.Idle})),[2]}}))}))},Object(o.c)([w.A.shallow],e.prototype,"m_rgEvents",void 0),Object(o.c)([w.A],e.prototype,"m_eOlderDirection",void 0),Object(o.c)([w.A],e.prototype,"m_eNewerDirection",void 0),e}(),pi=Object(r.a)((function(e){var t=D.c.IN_CLIENT&&ut.BOwnsApp(e.appId),n=null,o=null,r=null,a=null,s=null,c=null,l=null,p=Boolean(593110!==e.appId),u=function(e){return i.createElement("span",null,i.createElement("span",{className:oi.a.LongString},Object(k.d)(e)),i.createElement("span",{className:oi.a.ShortString},Object(k.d)(e+"_ExtraShort")))};if(e.appId){var m=e.appInfoStore.GetAppInfo(e.appId);if(!m||!m.is_valid)return null;o=m.header_image_url,r=m.name,t&&(n=i.createElement("a",{className:oi.a.AppBannerLink,href:"steam://nav/games/details/"+e.appId},u("#EventDisplay_ViewInLibrary"))),c=e.appId,a=D.c.STORE_BASE_URL+"app/"+e.appId+"/",s=D.c.COMMUNITY_BASE_URL+"app/"+e.appId}else if(e.clanId){var d=He.GetClanInfoByClanAccountID(e.clanId);if(!d)return null;o=d.avatar_full_url,r=d.group_name,c=e.clanId;var h=Z.a.InitFromClanID(c);a=D.c.STORE_BASE_URL+"curator/"+e.clanId+"/",s=D.c.COMMUNITY_BASE_URL+"gid/"+h.ConvertTo64BitString(),l=oi.a.ClanBanner}return i.createElement("div",{className:oi.a.AppBannerCtn},i.createElement("div",{className:oi.a.AppBannerBackground,style:{backgroundImage:"url("+o+")"}}),i.createElement("div",{className:Object(R.a)(oi.a.AppBannerGroup,l)},i.createElement(ri.a,{type:e.appId?"app":"clan",strURL:a,id:c,hoverClassName:oi.a.AppBannerLogoCtn},i.createElement("img",{className:oi.a.AppBannerLogo,src:o})),i.createElement("div",{className:oi.a.AppBannerTitle},r,i.createElement("div",{className:oi.a.NewsHubSubTitle},Object(k.d)("#EventDisplay_NewsHubSubtitle"))),p&&i.createElement("div",{className:oi.a.AppBannerLinks},n,i.createElement("a",{className:oi.a.AppBannerLink,href:Object(Pt.d)((D.c.IN_CLIENT?"steam://openurl/":"")+a),target:D.c.IN_CLIENT?void 0:"_blank"},u("#EventDisplay_ViewStorePage")),i.createElement("a",{className:oi.a.AppBannerLink,href:Object(Pt.d)((D.c.IN_CLIENT?"steam://openurl/":"")+s),target:D.c.IN_CLIENT?void 0:"_blank"},u("#EventDisplay_ViewCommunityPage")))))})),ui=Object(r.a)((function(e){return i.createElement("div",{className:oi.a.AppPartnerEventsBanner},i.createElement(pi,Object(o.a)({},e)))})),mi=n("1K16");function di(e,t){Object(G.d)(i.createElement(ai,{initialEvent:e,bShowOnlyInitialEvent:!0,partnerEventStore:st,emoticonStore:xt.b,appInfoStore:B.a,showAppHeader:!0}),t)}i.Component;var hi=n("xz03"),fi=n.n(hi),_i=n("cvk5"),gi=n.n(_i);function bi(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,l,p,u,m;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=e.filter((function(e){return Object(S.a)(e.type)})).map((function(e){return e.id})),n=e.filter((function(e){return"sub"===e.type})).map((function(e){return e.id})),(r=e.filter((function(e){return"bundle"===e.type})).map((function(e){return e.id}))).length>0?[4,M.LoadBundleInfo(r)]:[3,2];case 1:for(o.sent(),i=0,a=r;i<a.length;i++)s=a[i],(c=M.GetBundleInfo(s))&&n.push.apply(n,c.packageids);o.label=2;case 2:return n.length>0?[4,W.LoadPackageInfo(n)]:[3,4];case 3:for(o.sent(),l=0,p=n;l<p.length;l++)u=p[l],(m=W.GetPackageInfo(u))&&t.push.apply(t,m.appids);o.label=4;case 4:return t.length>0?[4,O.a.LoadAppLinkInfo(t)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2]}}))}))}function vi(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a,s,c;return Object(o.e)(this,(function(o){switch(o.label){case 0:return Object(S.a)(e.type)?[2,[e.id]]:(t=[],"bundle"!=e.type?[3,2]:[4,M.LoadBundleInfo([e.id])]);case 1:return o.sent(),(n=M.GetBundleInfo(e.id))&&t.push.apply(t,n.packageids),[3,3];case 2:"sub"==e.type&&t.push(e.id),o.label=3;case 3:return r=[],t.length>0?[4,W.LoadPackageInfo(t)]:[3,5];case 4:for(o.sent(),i=0,a=t;i<a.length;i++)s=a[i],(c=W.GetPackageInfo(s))&&r.push.apply(r,c.appids);o.label=5;case 5:return[2,r]}}))}))}function yi(e){return!e||ut.BExcludesContentDescriptor(e.content_descriptors)||ut.BExcludesTag(e.tags)||ut.BIsGameIgnored(e.appid)}var Si=new(function(){function e(){this.m_mapBlockedAppIds=new Map,this.m_mapBlockedClanIds=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.GetMutedSourceCount=function(){return this.m_mapBlockedAppIds.size+this.m_mapBlockedClanIds.size},e.prototype.LazyInit=function(){var e=this;if(!this.m_bLoadedFromConfig){var t=Object(D.g)("mutedcomminfo","application_config");this.ValidateStoreDefault(t)&&("dev"!=D.c.WEB_UNIVERSE&&"beta"!=D.c.WEB_UNIVERSE||console.log("DEV_DEBUG: CMutedCommunicationStore loading bundles payload: "+JSON.stringify(t)),t.appids&&t.appids.forEach((function(t){return e.m_mapBlockedAppIds.set(t,!0)})),t.clanids&&t.clanids.forEach((function(t){return e.m_mapBlockedClanIds.set(t,!0)}))),this.m_bLoadedFromConfig=!0}},e.prototype.ValidateStoreDefault=function(e){var t=e;return!(!t||"object"!=typeof t)&&(Array.isArray(t.appids)&&t.appids.length>0||Array.isArray(t.clanids)&&t.clanids.length>0)},e.prototype.BIsEventBlocked=function(e){return this.LazyInit(),e.appid?this.m_mapBlockedAppIds.has(e.appid):!!e.clanInfo&&this.m_mapBlockedClanIds.has(e.clanInfo.clanid)},e.prototype.BIsMutedAppID=function(e){return this.LazyInit(),this.m_mapBlockedAppIds.has(e)},e.prototype.BIsMutedClanID=function(e){return this.LazyInit(),this.m_mapBlockedClanIds.has(e)},e.prototype.UpdateCommunitionSetting=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(this.LazyInit(),r=D.c.STORE_BASE_URL+"account/optoutappcommunication/",(i=new FormData).append("sessionid",D.c.SESSIONID),i.append("allowCommunication",e?"1":"0"),t){if(!e&&this.m_mapBlockedAppIds.has(t)||e&&!this.m_mapBlockedAppIds.has(t))return[2,!0];e?this.m_mapBlockedAppIds.delete(t):this.m_mapBlockedAppIds.set(t,!0),i.append("appId",t.toString())}else{if(!n)return Object(X.a)(!1,"BlockEventsFromCalenderEvent: Invalid AppID and ClanID"),[2,!1];if(!e&&this.m_mapBlockedClanIds.has(n)||e&&!this.m_mapBlockedClanIds.has(n))return[2,!0];e?this.m_mapBlockedClanIds.delete(n):this.m_mapBlockedClanIds.set(n,!0),i.append("clanId",n.toString())}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E.a.post(r,i)];case 2:return[2,1==o.sent().data.success];case 3:return a=o.sent(),console.error("Blocking app id hit error "+Object(te.a)(a)),[2,!1];case 4:return[2]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapBlockedAppIds",void 0),Object(o.c)([w.A],e.prototype,"m_mapBlockedClanIds",void 0),e}());window.g_MutedCommunicationStore=Si;function Ci(e,t,n,o){return{strId:"section-"+t,strSectionLabel:t,rtSectionStart:n,rtSectionEnd:o,bIsFutureSection:n>=e,nRenderedHeight:3e3}}var Oi=function(){function e(e){this.m_nForwardStuckCount=0,this.m_nBackwardStuckCount=0,this.m_mapCalendarAppsByID=new Map,this.m_mapCalendarClansByID=new Map,this.m_mapCalendarEventsByGid=new Map,this.m_rgSortedCalendarEvents=new Array,this.m_visibilityStore=new Dn,this.m_currentView=w.A.box(null),this.m_bFinishedSearchingForward=!1,this.m_bFinishedSearchingBackward=!1,this.m_rgCalendarSections=[],this.m_rgFutureSections=[],this.m_key=e,ut.HintLoad()}return e.prototype.BIsGlobalCalendar=function(){return!this.m_key.appids&&!this.m_key.clanaccountids&&!this.m_key.collectionid},e.prototype.BIsSingleSourceCalendar=function(){return Boolean(this.BIsSingleGroupCalendar()?!this.BIsSingleAppCalendar():this.BIsSingleAppCalendar())},e.prototype.BIsSingleSourceMuted=function(){return!!this.BIsSingleSourceCalendar()&&(this.BIsSingleAppCalendar()?Si.BIsMutedAppID(this.GetSingleAppID()):Si.BIsMutedClanID(this.GetSingleGroupID()))},e.prototype.BIsSingleGroupCalendar=function(){return Boolean(this.m_key.clanaccountids&&1==this.m_key.clanaccountids.length)},e.prototype.GetSingleGroupID=function(){return this.m_key.clanaccountids[0]},e.prototype.BIsSingleAppCalendar=function(){return Boolean(this.m_key.appids&&1==this.m_key.appids.length)},e.prototype.GetSingleAppID=function(){return this.m_key.appids[0]},e.prototype.BIsCollectionCalendar=function(){return!!this.m_key.collectionid},e.prototype.GetCollectionID=function(){return this.m_key.collectionid},e.prototype.SetFilteredView=function(e,t){var n=this,o=this.m_currentView.get();o&&o.dispose();var r=this.BIsSingleAppCalendar(),i=new Ii((function(){return n.m_rgSortedCalendarEvents}),this.LoadAdditionalEvents,this.BHitEventHorizon,e,t,r);this.m_currentView.set(i)},e.prototype.BIsFilteredViewEmpty=function(){var e;return!!(null===(e=this.m_currentView.get())||void 0===e?void 0:e.BIsViewEmpty())},e.prototype.GetCalendarItemsInTimeRange=function(e,t){var n=this.m_currentView.get();return n?n.GetCalendarItemsInTimeRange(e,t):(console.error("calendar view not yet initialized"),{rgCalendarItems:[],bIsComplete:!1})},e.prototype.GetCurrentlyLoadedEventCount=function(e,t){var n;return null===(n=this.m_currentView.get())||void 0===n?void 0:n.GetCurrentlyLoadedEventCount(e,t)},e.prototype.GetCurrentlyLoadedItemsForStats=function(){var e;return(null===(e=this.m_currentView.get())||void 0===e?void 0:e.GetCurrentlyLoadedEvents())||[]},e.prototype.GetCalendarSections=function(e){return e?this.m_rgFutureSections:this.m_rgCalendarSections},e.prototype.GetStoreInitializationTimestamp=function(){return this.m_dtInitTime||(this.m_dtInitTime=Qe.GetTimeNowWithOverrideAsDate()),this.m_dtInitTime},e.prototype.InitCalendarSections=function(){var e=this,t=this.GetStoreInitializationTimestamp(),n=[],o=t.getTime()/1e3;n.push(Ci(o,Object(k.d)("#EventCalendar_FutureEventsHeader"),o));var r=new Date(t);r.setHours(0,0,0,1);var i=r.getTime()/1e3;n.push(Ci(o,Object(k.d)("#Time_Today"),i,o)),r.setDate(r.getDate()-1);var a=i;i=r.getTime()/1e3,n.push(Ci(o,Object(k.d)("#Time_Yesterday"),i,a));for(var s=this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1],c=!1,l=0;l<5&&!c;l++)r.setDate(r.getDate()-1),a=i,i=r.getTime()/1e3,n.push(Ci(o,Object(k.f)(r),i,a)),s&&s.start_time>i&&(c=!0);for(var p=new Date(r),u=i;p.getMonth()==t.getMonth()&&1!=p.getDate()&&!c;){p.setDate(p.getDate()-7);var m=p.getTime()/1e3;n.push(Ci(o,Object(k.e)(u-1),m,u)),s&&s.start_time>m&&(c=!0),u=m}var d=new Date(t);d.setHours(0,0,0,1),d.setDate(1);for(var h=u,f=1;f<=14&&!c;f++){var _=new Date(d);_.setMonth(t.getMonth()-f,1);var g=_.getTime()/1e3;n.push(Ci(o,Object(k.e)(h-1),g,h)),s&&s.start_time>g&&(c=!0),h=g}this.m_rgCalendarSections.length>n.length?this.m_rgCalendarSections.splice(n.length,this.m_rgCalendarSections.length):n.splice(this.m_rgCalendarSections.length,n.length).forEach((function(t){return e.m_rgCalendarSections.push(t)}))},e.prototype.InitFutureCalendarSections=function(){var e=this,t=this.GetStoreInitializationTimestamp(),n=[],o=new Date(t);o.setMonth(o.getMonth()+14);var r=o.getTime()/1e3;this.m_key.rtCalendarEnd&&this.m_key.rtCalendarEnd<r&&(r=this.m_key.rtCalendarEnd);var i=this.m_rgSortedCalendarEvents.length>0&&this.m_rgSortedCalendarEvents[0];i&&i.start_time<r&&(r=i.start_time);var a=t.getTime()/1e3,s=new Date(t);s.setHours(24,0,0,0);var c=s.getTime()/1e3;n.push(Ci(a,Object(k.d)(this.m_key.bSectionByDay?"#Time_UpNext":"#Time_Today"),a,c));var l=r<=c,p=c;s.setDate(s.getDate()+1),c=s.getTime()/1e3,l||n.push(Ci(a,Object(k.d)("#Time_Tomorrow"),p,c)),l=r<=c;for(var u=6-ze(t).weekday(),m=2;m<=u&&!l;m++){p=c;var d=Object(k.f)(s);s.setDate(s.getDate()+1),c=s.getTime()/1e3,n.push(Ci(a,d,p,c)),l=r<=c}if(this.m_key.bSectionByDay)for(;!l;){p=c;d=Object(k.g)(s);s.setDate(s.getDate()+1),c=s.getTime()/1e3,n.push(Ci(a,d,p,c)),l=r<=c}else{var h=new Date(s),f=c,_=ze(t).daysInMonth();if(h.getMonth()==t.getMonth()&&h.getDate()!=_&&!l){h.setDate(h.getDate()+7);var g=h.getTime()/1e3;n.push(Ci(a,Object(k.d)("#EventCalendar_NextWeek"),f,g)),l=r<=g,f=g}var b=new Date(t);b.setMonth(b.getMonth()+1),b.setDate(1),b.setHours(0,0,0,0);var v=void 0;if(h<b&&!l){var y=b.getTime()/1e3;n.push(Ci(a,Object(k.d)("#EventCalendar_LaterThisMonth"),f,y)),l=r<=y,v=y}else v=f;for(var S=2;S<=14&&!l;S++){var C=new Date(b);C.setMonth(t.getMonth()+S);y=C.getTime()/1e3;n.push(Ci(a,Object(k.e)(v),v,y)),l=r<=y,v=y}}this.m_rgFutureSections.length>n.length?this.m_rgFutureSections.splice(n.length,this.m_rgFutureSections.length):n.splice(this.m_rgFutureSections.length,n.length).forEach((function(t){return e.m_rgFutureSections.push(t)}))},e.prototype.RegisterCalendarEventsAndModels=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t=this;return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,ut.HintLoad()];case 1:return n.sent(),Object(w.E)((function(){t.RegisterCalendarApps(e.apps),t.RegisterCalendarClans(e.clans),t.RegisterCalendarEvents(e.documents),st.RegisterClanEvents(e.events),t.RegisterReadEvents(e.events_read),t.RegisterEventVotes(e.event_votes),e.forwardComplete&&(t.m_bFinishedSearchingForward=!0),e.backwardComplete&&(t.m_bFinishedSearchingBackward=!0),t.InitCalendarSections(),t.InitFutureCalendarSections()})),[2]}}))}))},e.prototype.RegisterCalendarApps=function(e){if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(!this.m_mapCalendarAppsByID.has(o.appid)){var r=new On;r.appid=o.appid,r.source=o.source,r.playtime=o.playtime,r.last_played=o.last_played,r.wishlist_added=o.wishlist_added,this.m_mapCalendarAppsByID.set(o.appid,r)}}},e.prototype.RegisterCalendarClans=function(e){if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(!this.m_mapCalendarClansByID.has(o.clanid)){var r=new In;r.clanid=o.clanid,r.source=o.source,this.m_mapCalendarClansByID.set(o.clanid,r)}}},e.prototype.RegisterReadEvents=function(e){if(e)for(var t=zt.Get(),n=0,o=e;n<o.length;n++){var r=o[n];t.SetEventAsRead(r)}},e.prototype.RegisterEventVotes=function(e){if(e)for(var t=zt.Get(),n=0,o=e;n<o.length;n++){var r=o[n],i=void 0===r.vote?void 0:Boolean(r.vote);t.SetVote(r.id,i)}},e.prototype.RegisterCalendarEvents=function(e){if(e){for(var t=!1,n=0,o=e;n<o.length;n++){var r=o[n];this.BInternalInsertCalendarEventItem(r)&&(t=!0)}t&&this.RebuildSortedCalendarEventList()}},e.prototype.BHitEventHorizon=function(e){return"forward"==e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward},e.prototype.GetTimeEdgeForDirection=function(e,t){return void 0===t&&(t=void 0),"forward"===e?this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[0].start_time:t:this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1].start_time:t},e.prototype.UpdateStuckCounters=function(e,t){var n="forward"===e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward,o=this.GetTimeEdgeForDirection(e,void 0);return n||o!==t?("forward"==e?this.m_nForwardStuckCount=0:this.m_nBackwardStuckCount=0,!1):("forward"==e?this.m_nForwardStuckCount++:this.m_nBackwardStuckCount++,!0)},e.prototype.GetRequestInFlight=function(e){return"forward"===e?this.m_forwardRequestInFlight:this.m_backwardRequestInFlight},e.prototype.SetRequestInFlight=function(e,t){Object(X.a)(!t||!this.GetRequestInFlight(e),"Already have a request in flight for",e),"forward"===e?this.m_forwardRequestInFlight=t:this.m_backwardRequestInFlight=t},e.prototype.LoadAdditionalEvents=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,c,l,p,u=this;return Object(o.e)(this,(function(m){return this.BHitEventHorizon(e)?[2,1]:((n=this.GetRequestInFlight(e))||(r=D.c.STORE_BASE_URL+"events/ajaxgetusereventcalendarrange/",i="forward"===e?this.m_nForwardStuckCount:this.m_nBackwardStuckCount,a=i>=3?1:0,s=50*(i<3?i+1:1),15,c=this.GetTimeEdgeForDirection(e,Qe.GetTimeNowWithOverride()),l={minTime:0,maxTime:0,ascending:!0,maxResults:s,populateEvents:15,appTypes:this.m_visibilityStore.GetGameSources().join(","),eventTypes:Array.from(this.m_visibilityStore.enabledEventTypeSet).join(","),appIdFilter:Boolean(this.m_key.appids&&this.m_key.appids.length>0)?this.m_key.appids.sort().join(","):void 0,clanIdFilter:Boolean(this.m_key.clanaccountids&&this.m_key.clanaccountids.length>0)?this.m_key.clanaccountids.sort().join(","):void 0,collectionID:this.m_key.collectionid},"forward"===e?(l.minTime=Math.floor(c+a),l.ascending=!0):(l.maxTime=Math.floor(c-a),l.ascending=!1),p=E.a.get(r,{params:l,cancelToken:t?t.token:void 0}),n=p.then((function(n){return Object(o.b)(u,void 0,void 0,(function(){return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.SetRequestInFlight(e,null),1!=n.data.success?[3,2]:[4,this.RegisterCalendarEventsAndModels(n.data)];case 1:return o.sent(),this.UpdateStuckCounters(e,c)?[2,this.LoadAdditionalEvents(e,t)]:[3,3];case 2:console.error("LoadAdditionalEvents was not successful: Msg"+n.data.msg),o.label=3;case 3:return[2,n.data.success]}}))}))})).catch((function(t){return u.SetRequestInFlight(e,null),console.error("LoadAdditionalEvents hit error "+Object(te.a)(t)),2})),this.SetRequestInFlight(e,n)),[2,n])}))}))},e.prototype.BInternalInsertCalendarEventItem=function(e){if(!e.unique_id)return Object(X.a)(!1,"Attmpted to register a calendar event item with an invalid unique id!"),!1;if(this.m_mapCalendarEventsByGid.has(e.unique_id))return!1;var t=this.m_mapCalendarAppsByID.get(e.appid),n=this.m_mapCalendarClansByID.get(e.clanid);if(!t&&!n)return console.log("No AppInfo or ClanInfo For: ",e),!1;var o=new Cn;return o.clanid=e.clanid,o.unique_id=e.unique_id,o.event_type=e.event_type,o.appid=e.appid,o.start_time=e.start_time,o.score=e.score,o.appInfo=t,o.clanInfo=n,this.m_rgSortedCalendarEvents.push(o),this.m_mapCalendarEventsByGid.set(o.unique_id,o),!0},e.prototype.RebuildSortedCalendarEventList=function(){var e=this.m_rgSortedCalendarEvents.slice();this.m_rgSortedCalendarEvents=e.sort((function(e,t){return t.start_time-e.start_time}))},e.prototype.UpdateEventBlockFromCalendarEvent=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n=e.appInfo?e.appid:void 0,r=e.clanInfo?e.clanInfo.clanid:void 0,null==n&&null==r?(Object(X.a)(!1,"Both clan id and account id are missing, cannot change communication status"),[2]):[4,Si.UpdateCommunitionSetting(t,n,r)];case 1:return o.sent(),Tn.RecordAppInteractionEvent(n,An.k_eMuted),[2]}}))}))},Object(o.c)([w.A],e.prototype,"m_mapCalendarEventsByGid",void 0),Object(o.c)([w.A],e.prototype,"m_rgSortedCalendarEvents",void 0),Object(o.c)([w.A],e.prototype,"m_bFinishedSearchingForward",void 0),Object(o.c)([w.A],e.prototype,"m_bFinishedSearchingBackward",void 0),Object(o.c)([w.A],e.prototype,"m_rgCalendarSections",void 0),Object(o.c)([w.A],e.prototype,"m_rgFutureSections",void 0),Object(o.c)([w.i],e.prototype,"InitCalendarSections",null),Object(o.c)([w.i],e.prototype,"InitFutureCalendarSections",null),Object(o.c)([w.i],e.prototype,"RegisterCalendarEventsAndModels",null),Object(o.c)([w.i],e.prototype,"RegisterCalendarApps",null),Object(o.c)([w.i],e.prototype,"RegisterCalendarClans",null),Object(o.c)([w.i],e.prototype,"RegisterReadEvents",null),Object(o.c)([w.i],e.prototype,"RegisterEventVotes",null),Object(o.c)([w.i],e.prototype,"RegisterCalendarEvents",null),Object(o.c)([ne.a],e.prototype,"BHitEventHorizon",null),Object(o.c)([w.i.bound],e.prototype,"LoadAdditionalEvents",null),Object(o.c)([w.i],e.prototype,"UpdateEventBlockFromCalendarEvent",null),e}(),Ii=function(){function e(e,t,n,r,i,a){var s=this;this.m_rgLoadedEventsBox=w.A.box([]),this.m_lastLoadLatch=null,this.m_fnGetUnfilteredEvents=e,this.m_fnLoadAdditionalEvents=t,this.m_fnBHitEventHorizon=n,this.m_fnBIsEventInView=r,this.m_bSkipStorePreferenceCheck=i,this.m_bAllowMutedAndIgnoredApps=a,this.m_rgAutorunDisposer=Object(w.j)((function(){return Object(o.b)(s,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=this.viewFilteredEvents.slice(),this.m_bSkipStorePreferenceCheck?[3,2]:(t=Array.from(new Set(e.map((function(e){return e.appid})).filter(Boolean))).sort(),this.m_lastLoadLatch=e,[4,O.a.LoadAppLinkInfo(t)]);case 1:if(n.sent(),this.m_lastLoadLatch!=e)return[2];this.m_lastLoadLatch=null,n.label=2;case 2:return this.m_rgLoadedEventsBox.set(e),[2]}}))}))}))}return e.prototype.dispose=function(){this.m_rgAutorunDisposer()},Object.defineProperty(e.prototype,"viewFilteredEvents",{get:function(){var e=this;return this.m_fnGetUnfilteredEvents().filter((function(t){return e.m_fnBIsEventInView(t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteredAndCheckedEvents",{get:function(){var e=this;return this.m_rgLoadedEventsBox.get().filter((function(t){return!t.appid||!(!e.m_bAllowMutedAndIgnoredApps&&(Si.BIsMutedAppID(t.appid)||ut.BIsGameIgnored(t.appid)))&&!(!e.m_bSkipStorePreferenceCheck&&yi(O.a.GetAppLinkInfo(t.appid)))}))},enumerable:!1,configurable:!0}),e.prototype.BIsCompleteThroughTime=function(e,t){if(this.m_fnBHitEventHorizon(e))return!0;var n=this.m_rgLoadedEventsBox.get();return"forward"===e?t&&n.length>0&&n[0].start_time>t:n.length>0&&n[n.length-1].start_time<t},e.prototype.GetCalendarItemsInTimeRange=function(e,t){var n=this.filteredAndCheckedEvents.filter((function(n){return n.start_time>=e&&(!t||n.start_time<t)})),o=this.BIsCompleteThroughTime("forward",t);o||this.m_fnLoadAdditionalEvents("forward");var r=this.BIsCompleteThroughTime("backward",e);return r||this.m_fnLoadAdditionalEvents("backward"),{rgCalendarItems:n,bIsComplete:o&&r}},e.prototype.GetCurrentlyLoadedEvents=function(){return this.filteredAndCheckedEvents},e.prototype.GetCurrentlyLoadedEventCount=function(e,t){var n=0;this.filteredAndCheckedEvents.forEach((function(o){o.start_time>=e&&(!t||o.start_time<t)&&n++}));var o=this.BIsCompleteThroughTime("forward",t),r=this.BIsCompleteThroughTime("backward",e);return{nCount:n,bIsComplete:o&&r}},e.prototype.BIsViewEmpty=function(){return this.filteredAndCheckedEvents.length>0},Object(o.c)([w.l.struct],e.prototype,"viewFilteredEvents",null),Object(o.c)([w.l.struct],e.prototype,"filteredAndCheckedEvents",null),e}(),Ei=w.A.box(null),wi=new Map;function Ai(e){var t="";return e.appids&&e.appids.length>0&&(t+="appids:"+e.appids.sort().join(",")),e.clanaccountids&&e.clanaccountids.length>0&&(t+="clanids:"+e.clanaccountids.sort().join(",")),e.collectionid&&(t+="collection:"+e.collectionid),e.bSectionByDay&&(t+="_sectionbyday"),e.rtCalendarEnd&&(t+="_end:"+e.rtCalendarEnd),Ei.get()!==t&&(Ei.set(t),wi.has(t)||wi.set(t,new Oi(e))),t}function Di(){return null==Ei.get()&&Ai({}),wi.get(Ei.get())}window.g_EventCalendarMap=wi;var Ti=function(){function e(){this.m_mapAppToTrailers=new Map}return e.Get=function(){return e.s_DemoEventStore||(e.s_DemoEventStore=new e,e.s_DemoEventStore.Init()),e.s_DemoEventStore},e.prototype.BHasTrailerForApp=function(e){return this.m_mapAppToTrailers.has(e)},e.prototype.GetTrailersForApp=function(e){return this.m_mapAppToTrailers.get(e)},e.prototype.Init=function(){},e.prototype.LoadTrailersForApp=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_mapAppToTrailers.has(e)?[2,this.m_mapAppToTrailers.get(e)]:(t=D.c.STORE_BASE_URL+"api/appdetails",n={appids:e,filters:"movies",origin:self.origin},[4,E.a.get(t,{params:n})]);case 1:return(r=o.sent())&&r.data&&r.data[e]&&1==r.data[e].success?(i=r.data[e].data.movies,this.m_mapAppToTrailers.set(e,i||[])):console.error("LoadTrailersForApp: failed for appid: "+e,r),[2,void 0]}}))}))},e}(),Mi=n("Kcgk"),ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_observer=null,t.m_refElement=i.createRef(),t.m_elTracked=null,t.m_bPreviouslyIntersecting=!1,t}return Object(o.d)(t,e),t.prototype.BTriggerOnce=function(){return"once"==(this.props.trigger||"once")},t.prototype.GetBoundingClientRect=function(){return this.m_refElement.current?this.m_refElement.current.getBoundingClientRect():null},t.prototype.DestroyObserver=function(){this.m_observer&&(this.m_observer.disconnect(),this.m_observer=null,this.m_elTracked=null)},t.prototype.componentWillUnmount=function(){this.DestroyObserver()},t.prototype.componentDidMount=function(){this.UpdateObserver(null)},t.prototype.componentDidUpdate=function(e){this.UpdateObserver(e)},t.prototype.UpdateObserver=function(e){if(!this.m_bPreviouslyIntersecting||!this.BTriggerOnce()){this.m_observer&&e&&e.rootMargin!=this.m_observer.rootMargin&&this.DestroyObserver();var t=this.m_refElement.current;if(this.m_observer&&t!=this.m_elTracked&&(this.m_observer.unobserve(this.m_elTracked),this.m_elTracked=null),!this.m_observer&&t){var n={root:ee.o(t)};this.props.rootMargin&&(n.rootMargin=this.props.rootMargin),this.m_observer=new IntersectionObserver(this.OnIntersection,n)}this.m_observer&&t&&t!=this.m_elTracked&&(this.m_observer.observe(t),this.m_elTracked=t)}},t.prototype.OnIntersection=function(e,t){for(var n=!1,o=0,r=e;o<r.length;o++){if(r[o].isIntersecting){n=!0;break}}this.m_bPreviouslyIntersecting!=n&&(this.m_bPreviouslyIntersecting=n,this.props.onVisibiltyChange&&this.props.onVisibiltyChange(n),n&&this.BTriggerOnce()&&this.DestroyObserver())},t.prototype.render=function(){var e=this.props,t=(e.onVisibiltyChange,e.rootMargin,e.trigger,Object(o.f)(e,["onVisibiltyChange","rootMargin","trigger"]));return i.createElement("div",Object(o.a)({ref:this.m_refElement},t),this.props.children)},Object(o.c)([ne.a],t.prototype,"OnIntersection",null),t}(i.Component),Li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bRenderChildren:!1,nPrevRenderHeight:0},t.m_refContainer=i.createRef(),t}return Object(o.d)(t,e),t.prototype.BLoadAndUnload=function(){return"LoadAndUnload"==(this.props.mode||"JustLoad")},t.prototype.GetRenderedHeight=function(){var e=0;if(this.m_refContainer.current){var t=this.m_refContainer.current.GetBoundingClientRect();t&&(e=t.height)}return e},t.prototype.OnVisibilityChange=function(e){var t=this.state.bRenderChildren;t!=e&&(t&&!this.BLoadAndUnload()||(this.setState({bRenderChildren:e,nPrevRenderHeight:this.GetRenderedHeight()}),e&&this.props.onRender&&this.props.onRender()))},t.prototype.render=function(){var e=this.props,t=e.placeholderHeight,n=(e.onRender,e.style),r=(e.mode,Object(o.f)(e,["placeholderHeight","onRender","style","mode"])),a=this.state.bRenderChildren,s=n;if(!a){var c=t;this.state.nPrevRenderHeight&&(c=this.state.nPrevRenderHeight),void 0!==c&&(s=Object(o.a)(Object(o.a)({},n),{minHeight:c}))}var l=this.BLoadAndUnload()?"repeated":"once";return i.createElement(ji,Object(o.a)({ref:this.m_refContainer,style:s},r,{onVisibiltyChange:this.OnVisibilityChange,trigger:l}),a&&this.props.children)},Object(o.c)([ne.a],t.prototype,"OnVisibilityChange",null),t}(i.Component),Gi=n("V45K"),Ni=function(){return function(){this.m_bHasBeenTracked=!1,this.m_fnSubmit=null}}(),Ri=new(function(){function e(){this.m_nImpressionDelayMS=500,this.m_mapEvents=new Map}return e.prototype.ShouldTrack=function(e){if(e.bOldAnnouncement)return!1;var t=this.m_mapEvents.get(e.GID);return!t||!t.m_bHasBeenTracked},e.prototype.StartTracking=function(e,t){if(!e.bOldAnnouncement){var n=this.m_mapEvents.get(e.GID);n||(n=new Ni,this.m_mapEvents.set(e.GID,n)),n.m_bHasBeenTracked||n.m_fnSubmit||(n.m_fnSubmit=new $.b,n.m_fnSubmit.Schedule(this.m_nImpressionDelayMS,this.ReportImpression.bind(this,e,t)))}},e.prototype.StopTracking=function(e){var t=this.m_mapEvents.get(e.GID);t&&t.m_fnSubmit&&(t.m_fnSubmit.Cancel(),t.m_fnSubmit=null)},e.prototype.ReportImpression=function(e,t){zt.Get().RecordEventShown(e,8),t&&Tn.RecordViewedEvent(Di(),e.GID);var n=this.m_mapEvents.get(e.GID);n&&(n.m_bHasBeenTracked=!0,n.m_fnSubmit.Cancel(),n.m_fnSubmit=null)},e}()),ki=function(e){var t=e.event;if(Ri.ShouldTrack(t)){return i.createElement(kt.a,{onEnter:function(){return Ri.StartTracking(t,e.recordNewsHubStats||!1)},onLeave:function(){return Ri.StopTracking(t)}})}return null},Bi=n("C8jb"),Pi=n.n(Bi),Fi=n("xaPu"),xi=n.n(Fi);var Vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={config:n.SetupHardcodedConfig(),bLoaded:!1,rgVisibleApps:[]},t.m_cancelSignal=E.a.CancelToken.source(),t.m_scheduledUpdate=new $.b,t}var n;return Object(o.d)(t,e),n=t,t.prototype.componentWillUnmount=function(){q.c.RemoveStreamsLoadedListener(this.OnBroadcastStreamsLoaded),this.m_cancelSignal.cancel("SaleSectionEventScheduleInner to unload"),this.m_scheduledUpdate.Cancel()},t.prototype.componentDidUpdate=function(e){var t,n,o,r,i=this;(null===(n=null===(t=e.activeTab)||void 0===t?void 0:t.GetTab())||void 0===n?void 0:n.unique_id)!=(null===(r=null===(o=this.props.activeTab)||void 0===o?void 0:o.GetTab())||void 0===r?void 0:r.unique_id)&&(zi.ClearSelection(),Di().SetFilteredView((function(e){return i.BShouldShowOnTab(e.appid)})))},t.SetupHardcodedConfig=function(){var e={sCollection:"gamefestival2020",sInfoCollection:"gamefestival2020info"};return lt.Get().SetCollectionInfo(e.sCollection,e.sInfoCollection),e},t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,r=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return q.c.AddStreamsLoadedListener(this.OnBroadcastStreamsLoaded),(e=this.GetScheduleCalendarStore()).SetFilteredView((function(e){return r.BShouldShowOnTab(e.appid)})),n.m_bInitialLoad?(t=Object(D.g)("sale_schedule_calendar","application_config"))?[4,e.RegisterCalendarEventsAndModels(t)]:[3,2]:[3,4];case 1:return o.sent(),[3,4];case 2:return[4,e.RegisterCalendarEventsAndModels({success:1})];case 3:o.sent(),o.label=4;case 4:return n.m_bInitialLoad=!1,this.setState({bLoaded:!0},this.ApplyScheduleToBroadcasts),[2]}}))}))},t.prototype.ApplyScheduleToBroadcasts=function(){var e=this;if(this.state.bLoaded&&q.c.BHasStreams()){for(var t=this.GetScheduleCalendarStore(),n=Qe.GetTimeNowWithOverride(),o=3600*Math.floor(n/3600),r=t.GetCalendarItemsInTimeRange(o,o+3599),i=function(e){var t=r.rgCalendarItems.some((function(t){return Number(t.appid)===Number(e.appid)}));t!=e.is_featured&&(e.is_featured=t)},a=0,s=q.c.GetStreams();a<s.length;a++){i(s[a])}var c=q.c.GetStreams().filter((function(t){return e.BShouldShowOnTab(t.appid)}));if(q.c.EnableAutoPlay(c),!this.m_scheduledUpdate.IsScheduled()){this.m_scheduledUpdate.Schedule(18e4,(function(){return e.ApplyScheduleToBroadcasts()}))}}},t.prototype.OnBroadcastStreamsLoaded=function(){this.state.bLoaded&&this.ApplyScheduleToBroadcasts()},t.prototype.BShouldShowOnTab=function(e){return!this.props.activeTab||this.props.activeTab.ShouldShowOnTab("game",e)},t.prototype.GetScheduleCalendarStore=function(){var e=this.props,t=e.event;e.activeTab;return Ai({collectionid:this.state.config.sCollection,bSectionByDay:!0,rtCalendarEnd:t.endTime}),Di()},t.prototype.BIsAppArrayEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},t.prototype.VisibleAppChanged=function(e){this.BIsAppArrayEqual(e,this.state.rgVisibleApps)||this.setState({rgVisibleApps:e})},t.prototype.render=function(){if(!this.state.bLoaded)return i.createElement(ge.a,{position:"center",string:Object(k.d)("#Sale_EventSchedule")});var e=this.props.promotionName,t=this.GetScheduleCalendarStore(),n=new Array;if(this.state.rgVisibleApps)for(var o=function(e){if(r.BShouldShowOnTab(e)&&(n.some((function(t){return e==t}))||n.push(e),n.length>=4))return"break"},r=this,a=0,s=this.state.rgVisibleApps;a<s.length;a++){if("break"===o(s[a]))break}return i.createElement("div",{className:Object(R.a)(Pi.a.SaleSection,xi.a.SaleSchedCtn)},i.createElement("div",{className:xi.a.ScheduleSectionHeader},Object(k.d)("#Sale_EventSchedule")),i.createElement("div",{className:xi.a.SectionCtn},i.createElement(Ui,{calendarStore:t,promotionName:e,activeTab:this.props.activeTab,config:this.state.config,fnVisibleAppChanged:this.VisibleAppChanged}),Boolean(zi.BIsSomeEventSelected())?i.createElement(Zi,{eventGID:zi.GetClanEventGID(),promotionName:e}):i.createElement(Qi,{rgAppIDs:n,promotionName:e})))},t.m_bInitialLoad=!0,Object(o.c)([ne.a],t.prototype,"OnBroadcastStreamsLoaded",null),Object(o.c)([ne.a],t.prototype,"VisibleAppChanged",null),t=n=Object(o.c)([r.a],t)}(i.Component),Ui=(Object(rr.e)(Vi),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.m_visibleAppIDs=[],t}return Object(o.d)(t,e),t.prototype.OnAppVisibilityChange=function(e,t,n,o){this.m_visibleAppIDs[n]=Object(J.g)(this.m_visibleAppIDs[n]||[],o+1,null),this.m_visibleAppIDs[n][o]=e?t:null;for(var r=[],i=0,a=this.m_visibleAppIDs.filter(Boolean);i<a.length;i++)for(var s=0,c=a[i].filter(Boolean);s<c.length;s++){var l=c[s];r.push(l)}this.props.fnVisibleAppChanged(r)},t.prototype.render=function(){var e=this,t=this.props.calendarStore,n=t.GetCalendarSections(!0),o=new Array;this.m_visibleAppIDs=Object(J.g)(this.m_visibleAppIDs,n.length,null),n.forEach((function(t,n){o.push(i.createElement(Li,{key:t.strSectionLabel,placeholderHeight:600,rootMargin:"0px 0px 100px 0px",mode:"JustLoad"},i.createElement(Hi,{strSectionLabel:t.strSectionLabel,rtSectionStart:t.rtSectionStart,rtSectionEnd:t.rtSectionEnd,fnOnAppVisibilityChange:e.OnAppVisibilityChange,indexOfSection:n})))}));var r=t.BHitEventHorizon("forward")&&t.BIsFilteredViewEmpty();return i.createElement("div",{className:xi.a.SaleSchedListCtn},i.createElement("div",{className:Object(R.a)(xi.a.SaleSchedList)},r&&i.createElement("div",{className:xi.a.NoEventsYet},Object(k.d)("#Sale_EventSchedule_NoEventsScheduled")),o),i.createElement(pt.b,{className:Object(R.a)(xi.a.NewsHubLink,ve.a.Button),bDisableContextMenu:!0,href:D.c.STORE_BASE_URL+"newshub/collection/"+this.props.config.sCollection+"?upcoming=true"+(Qe.BHasTimeOverride()?"&t="+Qe.GetTimeNowWithOverride():"")},Object(k.d)("#Sale_SeeAllUpcomingEvents")))},Object(o.c)([ne.a],t.prototype,"OnAppVisibilityChange",null),t}(i.Component)),Hi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("SaleScheduleCalendarSection to unload")},Object.defineProperty(t.prototype,"cachedCalendarItems",{get:function(){var e=this;return Di().GetCalendarItemsInTimeRange(Object(K.a)((function(){return e.props.rtSectionStart})),Object(K.a)((function(){return e.props.rtSectionEnd})))},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.strSectionLabel,n=e.fnOnAppVisibilityChange,o=e.indexOfSection,r=this.cachedCalendarItems,a=r.rgCalendarItems,s=r.bIsComplete;if(0==a.length)return null;var c=new Array;return a.slice().reverse().forEach((function(e,t){c.push(i.createElement(Wi,{key:"schedrow_"+e.unique_id,item:e,fnOnAppVisibilityChange:n,indexOfSection:o,indexInSection:t}))})),i.createElement(i.Fragment,null,i.createElement("div",{className:xi.a.SchedSectionLabel},t),c,!s&&i.createElement("div",{style:{height:100}},i.createElement(ge.a,{size:"small",string:Object(k.d)("#Loading")})))},Object(o.c)([w.l],t.prototype,"cachedCalendarItems",null),t=Object(o.c)([r.a],t)}(i.Component),Wi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.BOnVisibleChange=function(e){var t=this.props,n=t.item,o=t.fnOnAppVisibilityChange,r=t.indexOfSection,i=t.indexInSection;o(e,n.appid,r,i)},t.prototype.render=function(){var e=this,t=this.props.item;return i.createElement(Gi.a,{topOffset:"55px",bottomOffset:"50px",onEnter:function(){return e.BOnVisibleChange(!0)},onLeave:function(){return e.BOnVisibleChange(!1)}},i.createElement("div",null,i.createElement(Yi,{item:t})))},Object(o.c)([ne.a],t.prototype,"BOnVisibleChange",null),t}(i.Component),zi=new(function(){function e(){}return e.prototype.BIsSomeEventSelected=function(){return Boolean(this.m_gidClanEventSelected)},e.prototype.GetClanEventGID=function(){return this.m_gidClanEventSelected},e.prototype.BIsEventSelected=function(e){return this.m_gidClanEventSelected===e},e.prototype.ToggleClanEventGID=function(e){this.m_gidClanEventSelected===e?this.m_gidClanEventSelected=void 0:this.m_gidClanEventSelected=e},e.prototype.ClearSelection=function(){void 0!==this.m_gidClanEventSelected&&(this.m_gidClanEventSelected=void 0)},Object(o.c)([w.A],e.prototype,"m_gidClanEventSelected",void 0),e}()),Yi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={bLoaded:t.BHasLoadedRequiredData(n.props)},n}return Object(o.d)(t,e),t.BHasLoadedRequiredData=function(e){return st.BHasClanEventModel(e.item.unique_id)&&O.a.BHasAppLinkLoaded(e.item.appid)},t.prototype.componentDidMount=function(){this.DoLoad()},t.prototype.componentDidUpdate=function(){t.BHasLoadedRequiredData(this.props)?this.state.bLoaded||this.setState({bLoaded:!0}):this.DoLoad()},t.prototype.DoLoad=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.state.bLoaded?[3,2]:(e=this.props.item,t=Z.a.InitFromClanID(e.clanid),n=new Array,st.BHasClanEventModel(e.unique_id)||n.push(st.LoadPartnerEventFromClanEventGIDAndClanSteamID(t,e.unique_id,0)),O.a.BHasAppLinkLoaded(e.appid)||n.push(O.a.LoadAppLinkInfo([e.appid])),[4,Promise.all(n)]);case 1:o.sent(),this.setState({bLoaded:!0}),o.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){if(!this.state.bLoaded)return i.createElement("div",{className:xi.a.SaleSchedRowProxy},i.createElement(ge.a,{size:"small"}));var e=this.props.item,t=st.GetClanEventModel(e.unique_id),n=O.a.GetAppLinkInfo(e.appid);return t&&n?i.createElement(Ki,Object(o.a)({},this.props)):null},t}(i.Component),qi=new Set([" ","-",":"]),Ki=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return Object(o.d)(t,e),t.prototype.OnRowClick=function(){var e=this.props.item.unique_id;if(window.innerWidth>parseInt(xi.a.strMediumWidth))zi.ToggleClanEventGID(e);else if(zi.BIsEventSelected(e))zi.ClearSelection();else{zi.ClearSelection();var t=st.GetClanEventModel(e);t&&di(t,window)}},t.prototype.render=function(){var e,t=this.props,n=t.item,o=t.bMiniMode,r=st.GetClanEventModel(n.unique_id),a=O.a.GetAppLinkInfo(n.appid),s=new Date(1e3*r.startTime);s.setMinutes(s.getMinutes()<=50?0:60);var c=s.getTime()/1e3,l=r.GetNameWithFallback(Object(Q.e)(D.c.LANGUAGE));if(l.startsWith(a.title))for(l=l.slice(a.title.length);qi.has(l[0]);)l=l.slice(1);return i.createElement("div",{onClick:this.OnRowClick,className:Object(R.a)((e={},e[xi.a.SaleSchedRow]=!0,e[xi.a.SchedRowSelected]=zi.BIsEventSelected(this.props.item.unique_id),e[xi.a.MiniMode]=o,e))},i.createElement(ki,{event:r}),i.createElement("div",{className:xi.a.Time},Object(Mi.f)(c)),i.createElement("div",{className:xi.a.DetailsCtn},i.createElement("div",{className:xi.a.AppTitle},a.title),i.createElement("div",{className:xi.a.EventTitle},l)),i.createElement("div",{className:xi.a.Icon},i.createElement("img",{className:xi.a.CategoryTypeImage,width:"26",height:"26",src:D.c.IMG_URL+"events/types/type_"+(11==r.type?"11":"9")+".png"})))},Object(o.c)([ne.a],t.prototype,"OnRowClick",null),t=Object(o.c)([r.a],t)}(i.Component),Qi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bLoading:!O.a.BHasAllAppLinksLoaded(t.props.rgAppIDs)},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.DoLoadCapsules()},t.prototype.componentDidUpdate=function(e){O.a.BHasAllAppLinksLoaded(this.props.rgAppIDs)||this.state.bLoading||this.setState({bLoading:!0},this.DoLoadCapsules),lt.Get().LoadAppIDsBatch(this.props.rgAppIDs,!0)},t.prototype.DoLoadCapsules=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return this.state.bLoading?[4,O.a.LoadAppLinkInfo(this.props.rgAppIDs)]:[3,2];case 1:e.sent(),this.setState({bLoading:!1}),e.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){if(this.state.bLoading)return i.createElement(ge.a,null);var e=new Array;return this.props.rgAppIDs.forEach((function(t){if(O.a.GetAppLinkInfo(t)){var n={id:t,type:"game"},o=lt.Get().GetDemoEventInfo(t),r=void 0;o&&o.upcoming_clan_event_gid&&((r=new Cn).clanid=o.ogg_clanid,r.unique_id=o.upcoming_clan_event_gid,r.appid=t,r.event_type=o.upcoming_clan_event_type),e.push(i.createElement(Oa,{key:"democap_"+t,capsule:n,bUseDemoLayout:!0,eventToShow:r}))}})),i.createElement("div",{className:Object(R.a)(xi.a.SaleSchedGridCtn)},e)},t=Object(o.c)([r.a],t)}(i.Component),Zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.eventGID;if(!e||!st.BHasClanEventModel(e))return null;var t=st.GetClanEventModel(e),n=O.a.GetAppLinkInfo(t.appid);return i.createElement("div",{className:xi.a.SaleSchedDetailCtn},i.createElement(Ji,{appCapsule:n}),i.createElement(Xi,{appCapsule:n}),i.createElement($i,{appCapsule:n}),i.createElement(na,{event:t}))},t}(i.Component),Ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_cancelSignal=E.a.CancelToken.source(),t.state={},t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("SaleAppWideDetailWithAction to unload")},t.prototype.ToggleWishlist=function(){this.setState({bUpdatingWishlist:!0},this.DoToggleWishlist)},t.prototype.DoToggleWishlist=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=this.props.appCapsule.appid,t=ut.BIsGameWishlisted(e),[4,ut.UpdateGameWishlist(e,!t)];case 1:return n.sent(),this.setState({bUpdatingWishlist:!1}),[2]}}))}))},t.prototype.render=function(){var e=this.props.appCapsule;return i.createElement("div",{className:xi.a.SaleAppWideCtn},i.createElement(ri.a,{strURL:D.c.STORE_BASE_URL+"app/"+e.appid,type:"app",id:e.appid,hoverClassName:xi.a.SaleAppCapsule},i.createElement("img",{className:xi.a.WideHeader,src:e.capsule,alt:e.title})),i.createElement("div",{className:xi.a.WideDetailCtn},i.createElement("div",{className:xi.a.AppTitle},e.title),i.createElement("div",{className:xi.a.ReleaseDate},e.release)),i.createElement("div",{className:xi.a.GameButtons},Boolean(ut.BOwnsApp(e.appid))?i.createElement(j.d,{disabled:!0},Object(k.d)("#Sale_InLibrary")):i.createElement(j.d,{onClick:this.ToggleWishlist,disabled:this.state.bUpdatingWishlist},Boolean(this.state.bUpdatingWishlist)&&i.createElement(ge.a,{size:"small"}),Object(k.d)(ut.BIsGameWishlisted(e.appid)?"#Sale_Wishlisted":"#Sale_AddToWishlist")),i.createElement(ra,{appLinkInfo:e})))},Object(o.c)([ne.a],t.prototype,"ToggleWishlist",null),t}(i.Component),Xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.appCapsule;return i.createElement("div",{className:xi.a.SaleTagAndOS},i.createElement("div",{className:gi.a.StoreSaleWidgetTags},e.tags?e.tags.map((function(e){return i.createElement("div",{key:"tag_"+e.tagid,className:gi.a.AppTag},e.name)})):void 0),i.createElement(Da,{item:e}))},t}(i.Component),$i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.appCapsule;return i.createElement("div",{className:xi.a.StatementAndHighlights},i.createElement(ea,{appCapsule:e}),i.createElement(ta,{appCapsule:e}))},t}(i.Component),ea=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bLoadingDemoDetails:!lt.Get().BHasDemoEventInfo(t.props.appCapsule.appid)},t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.DoLoading()},t.prototype.componentDidUpdate=function(e){e.appCapsule.appid!==this.props.appCapsule.appid&&this.setState({bLoadingDemoDetails:!lt.Get().BHasDemoEventInfo(this.props.appCapsule.appid)},this.DoLoading)},t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("SaleScheduleArtistStatement to unload")},t.prototype.DoLoading=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.state.bLoadingDemoDetails||this.state.bLoadingDescription?(e=this.props.appCapsule.appid,[4,Promise.all([lt.Get().LoadAppIDsBatch([e],!0,this.m_cancelSignal),Y.a.Get().LoadShortDesc(e,this.m_cancelSignal)])]):[3,3];case 1:return t.sent(),[4,lt.Get().EnsurePartnerEventLoadedForDemo(e,this.m_cancelSignal)];case 2:t.sent(),this.setState({bLoadingDemoDetails:!1,bLoadingDescription:!1}),t.label=3;case 3:return[2]}}))}))},t.prototype.ShowEventInModal=function(e,t){di(e,ee.s(t))},t.prototype.render=function(){var e=this;if(Boolean(this.state.bLoadingDemoDetails||this.state.bLoadingDescription))return i.createElement(ge.a,null);var t=this.props.appCapsule.appid,n=lt.Get().GetDemoEventInfo(t),o=n&&n.BHasArtistStatement()?st.GetClanEventModel(n.info_clan_event_gid):void 0,r=Object(Q.e)(D.c.LANGUAGE),a=Y.a.Get().GetShortDesc(t);return i.createElement("div",{className:xi.a.StatementCtn},Boolean(o)?i.createElement("div",{className:xi.a.Statement},i.createElement("div",null,o.GetSummaryWithFallback(r)),i.createElement(j.d,{onClick:function(t){return e.ShowEventInModal(o,t)}},Object(k.d)("#EventEmail_Button_ClickForMoreDetails"))):i.createElement("div",null,a))},Object(o.c)([ne.a],t.prototype,"DoLoading",null),Object(o.c)([ne.a],t.prototype,"ShowEventInModal",null),t}(i.Component),ta=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bTrailerLoaded:Ti.Get().BHasTrailerForApp(t.props.appCapsule.appid),bPlayVideo:!1,nThumbnailedHovered:void 0},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.DoTrailerLoad()},t.prototype.componentDidUpdate=function(e){e.appCapsule.appid!==this.props.appCapsule.appid&&this.setState({bTrailerLoaded:Ti.Get().BHasTrailerForApp(this.props.appCapsule.appid)},this.DoTrailerLoad)},t.prototype.DoTrailerLoad=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return this.state.bTrailerLoaded?[3,2]:[4,Ti.Get().LoadTrailersForApp(this.props.appCapsule.appid)];case 1:e.sent(),this.setState({bTrailerLoaded:!0}),e.label=2;case 2:return[2]}}))}))},t.prototype.GetFirstHighlightTrailer=function(){var e=Ti.Get().GetTrailersForApp(this.props.appCapsule.appid),t=void 0;return e&&e.forEach((function(e){e.highlight&&!t&&(t=e)})),t},t.prototype.TogglePlayTrailer=function(){this.GetFirstHighlightTrailer()&&this.setState({bPlayVideo:!this.state.bPlayVideo})},t.prototype.OnThumbNailHovered=function(e){this.setState({nThumbnailedHovered:e})},t.prototype.render=function(){var e=this;if(!this.state.bTrailerLoaded)return i.createElement("div",{className:xi.a.MediaContainer},i.createElement(ge.a,{size:"medium"}));var t=this.props.appCapsule,n=this.GetFirstHighlightTrailer();if(!(n||t.screenshot_list&&0!==t.screenshot_list.length))return null;var o=n||void 0!==this.state.nThumbnailedHovered&&-1!==this.state.nThumbnailedHovered?this.state.nThumbnailedHovered:0,r=new Array;return t.screenshot_list.forEach((function(t,o){if((n||o>0)&&r.length<3){var a=(c=".116x65",(l=(s=t).replace(/\.[^\.]+$/g,""))+c+s.slice(l.length));a=a.replace("http://","https://"),r.push(i.createElement("img",{key:o+"_"+a,className:xi.a.ScreenshotThumbnail,src:a,onClick:function(){return e=t,void Object(G.d)(i.createElement(L.c,{bAllowFullSize:!0,bOKDisabled:!0},i.createElement("div",{className:xi.a.PopupScreenshotContainer},i.createElement("img",{className:xi.a.PopupScreenshot,src:e}))),window);var e},onMouseEnter:function(){return e.OnThumbNailHovered(o)}}))}var s,c,l})),i.createElement("div",{className:xi.a.MediaContainer},i.createElement("div",{className:xi.a.MainMediaCtn},Boolean(n)&&i.createElement("div",{className:Object(R.a)(xi.a.VideoThumbnail,this.state.bPlayVideo?xi.a.videoPlaying:null),onClick:this.TogglePlayTrailer},Boolean(-1===o||void 0===o)?i.createElement(i.Fragment,null,i.createElement("img",{src:n.thumbnail}),i.createElement("div",{className:xi.a.VideoPlayButton},i.createElement(N.Q,null))):i.createElement("img",{src:t.screenshot_list[o]})),Boolean(!n)&&i.createElement("img",{src:t.screenshot_list[o]})),Boolean(r.length>0)&&i.createElement("div",{className:xi.a.Screenshot,onMouseLeave:function(){return e.OnThumbNailHovered(-1)}},r),i.createElement("div",{className:Object(R.a)(xi.a.VideoLargeContainer,this.state.bPlayVideo?xi.a.videoPlaying:null),onClick:this.TogglePlayTrailer},this.state.bPlayVideo&&i.createElement("video",{className:xi.a.VideoLarge,src:n.webm[480].replace("http://","https://"),controls:!0,autoPlay:!0}),i.createElement("div",{onClick:this.TogglePlayTrailer},i.createElement(N.qb,null))))},Object(o.c)([ne.a],t.prototype,"DoTrailerLoad",null),Object(o.c)([ne.a],t.prototype,"TogglePlayTrailer",null),Object(o.c)([ne.a],t.prototype,"OnThumbNailHovered",null),t}(i.Component),na=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return Object(o.d)(t,e),t.prototype.ShowEventInModel=function(e,t){di(e,ee.s(t))},t.prototype.render=function(){var e=this,t=this.props.event,n=t.BIsEventInFuture(),o=Object(Q.e)(D.c.LANGUAGE);return i.createElement("div",{className:xi.a.EventWideCtn},i.createElement("div",{className:xi.a.Title},Object(k.d)("#Sale_EventSchedule")),i.createElement("hr",null),i.createElement("div",{className:xi.a.EventWideDetailCtn},i.createElement("div",{className:xi.a.EventDetails},i.createElement("div",{className:xi.a.EventIcon},i.createElement("img",{className:xi.a.CategoryTypeImage,width:"40",height:"40",src:D.c.IMG_URL+"events/types/type_"+(11==t.type?"11":"9")+".png"})),i.createElement("div",null,i.createElement("div",{className:xi.a.EventTitle},t.GetNameWithFallback(o)),i.createElement("div",{className:xi.a.EventTime},n?Object(k.j)(t.startTime)+" "+Object(k.l)(t.startTime):Object(k.m)(Date.now()/1e3-t.startTime)))),i.createElement("div",{className:xi.a.EventOptionsCtn},i.createElement(j.d,{className:xi.a.EventDetailsBtn,onClick:function(n){return e.ShowEventInModel(t,n)}},Object(k.d)("#Sale_SeeEventDetails")),n&&i.createElement(Kn,{eventModel:t,eventGID:t.GID,lang:o}))))},Object(o.c)([ne.a],t.prototype,"ShowEventInModel",null),t}(i.Component),oa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.m_refContainer=a.a.createRef(),t.m_refMoreActionsButton=a.a.createRef(),t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("DemoAppCapsule to unload: "+this.props.appCapsule.appid),this.m_moreActionsMenu&&this.m_moreActionsMenu.Hide()},t.prototype.componentDidMount=function(){ut.HintLoad(),this.DoLoadAboutAndDemoInfo(),this.m_refContainer.current&&this.m_refContainer.current.focus()},t.prototype.componentDidUpdate=function(e){e.appCapsule.appid!==this.props.appCapsule.appid&&this.DoLoadAboutAndDemoInfo()},t.prototype.DoLoadAboutAndDemoInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_cancelSignal.token.reason?[2]:(e=this.props.appCapsule.appid,lt.Get().BHasDemoEventInfo(e)?[3,2]:[4,lt.Get().LoadAppIDsBatch([e],!0,this.m_cancelSignal)]);case 1:t.sent(),t.label=2;case 2:return lt.Get().EnsurePartnerEventLoadedForDemo(e),[2]}}))}))},t.prototype.OnOtherActionsMenuClick=function(){this.m_bIsMoreActionsMenuOpen?this.HideMenu():this.ShowMenu()},t.prototype.Close=function(){this.m_bIsMoreActionsMenuOpen||this.props.fnClose&&this.props.fnClose()},t.prototype.OnBlur=function(e){var t=e.relatedTarget;t&&ee.d(this.m_refContainer.current,t)||this.Close()},t.prototype.OnKeyDown=function(e){27==e.keyCode&&(this.Close(),e.preventDefault(),e.stopPropagation())},t.prototype.ShowMenu=function(){if(this.m_bIsMoreActionsMenuOpen=!0,this.m_moreActionsMenu)this.m_moreActionsMenu.Show();else{var e=this.props.appCapsule.appid,t=a.a.createElement(ia,{appid:e,fnCloseMenu:this.HideMenu}),n={bOverlapHorizontal:!0,bMatchWidth:!0,strClassName:Object(R.a)(fi.a.MoreActionsMenu,qn.contextMenu)};this.m_moreActionsMenu=Object(C.a)(t,this.m_refMoreActionsButton.current,n),this.m_moreActionsMenu.SetOnHideCallback(this.HideMenu)}this.setState({bIsMoreActionsMenuOpen:!0})},t.prototype.HideMenu=function(){this.m_moreActionsMenu&&this.m_moreActionsMenu.Hide(),this.m_refContainer.current&&this.m_refContainer.current.focus(),this.m_bIsMoreActionsMenuOpen=!1,this.setState({bIsMoreActionsMenuOpen:!1})},t.prototype.render=function(){var e=this.props,t=e.appCapsule,n=e.eventToShow,o=this.state.bIsMoreActionsMenuOpen;return a.a.createElement("div",{className:fi.a.DemoCapsuleCtn,ref:this.m_refContainer,tabIndex:-1,onMouseLeave:this.Close,onBlur:this.OnBlur,onKeyDown:this.OnKeyDown},a.a.createElement("a",{className:fi.a.DemoCapsuleImageCtn,href:Object(Pt.d)(D.c.STORE_BASE_URL+"app/"+t.appid),target:"_blank"},a.a.createElement("img",{loading:"lazy",width:gi.a.headerCapsuleImgWidth,height:gi.a.headerCapsuleImgHeight,src:t.capsule,alt:t.title,className:Object(R.a)(fi.a.DemoCapsuleImage,gi.a.CapsuleImage)}),a.a.createElement(Ta,{appInfo:t})),n?a.a.createElement("div",{className:fi.a.DemoCapsuleEventReference},a.a.createElement(Yi,{item:n,bMiniMode:!0})):a.a.createElement("div",{className:fi.a.DemoCapsuleReleaseAndPlatform},a.a.createElement(Da,{item:t}),t.release&&a.a.createElement("div",{className:fi.a.DemoCapsuleRelease},t.coming_soon?t.release:a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:fi.a.DemoCapsuleReleasePrefix},Object(k.d)("#Sale_Released_Shorter")),t.release))),a.a.createElement("div",{className:fi.a.DemoCapsuleActionCtn},a.a.createElement("div",{onClick:this.OnOtherActionsMenuClick,className:Object(R.a)(fi.a.DemoButton,o&&fi.a.MenuOpened),ref:this.m_refMoreActionsButton},Object(k.d)("#Sale_OtherActions_MenuLabel"),a.a.createElement("div",{className:fi.a.DownArrow},a.a.createElement(N.t,{angle:180}))),a.a.createElement(ra,{appLinkInfo:t})))},Object(o.c)([ne.a],t.prototype,"OnOtherActionsMenuClick",null),Object(o.c)([ne.a],t.prototype,"Close",null),Object(o.c)([ne.a],t.prototype,"OnBlur",null),Object(o.c)([ne.a],t.prototype,"OnKeyDown",null),Object(o.c)([ne.a],t.prototype,"ShowMenu",null),Object(o.c)([ne.a],t.prototype,"HideMenu",null),t=Object(o.c)([r.a],t)}(a.a.Component),ra=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_cancelSignal=E.a.CancelToken.source(),t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_cancelSignal.cancel("InstallButton to unload: "+this.props.appLinkInfo.appid)},t.prototype.componentDidMount=function(){var e=this.props.appLinkInfo.appid;lt.Get().BHasDemoEventInfo(e)||lt.Get().LoadAppIDsBatch([e],!1,this.m_cancelSignal)},t.prototype.render=function(){var e=this.props,t=e.appLinkInfo,n=e.className,o=t.appid,r=t.title,i=lt.Get().GetDemoEventInfo(o),s=!(!i||!i.demo_appid),c=s?function(){return x(i.demo_appid)}:null,l=s?Object(k.d)("#Sale_InstallDemo_ttip",r):i?Object(k.d)("#Sale_CannotInstallDemo_ttip",r):Object(k.d)("#Loading");return a.a.createElement(kn,{toolTipContent:l,onClick:c,className:Object(R.a)(n,fi.a.DemoButton,!s&&fi.a.DisabledButton)},Object(k.d)("#Sale_InstallDemo"))},t=Object(o.c)([r.a],t)}(a.a.Component),ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.ShowQuickPitch=function(e){var t=this.props,n=t.appid,o=t.fnCloseMenu,r=lt.Get().GetDemoEventInfo(n);r&&r.info_clan_event_gid&&di(st.GetClanEventModel(r.info_clan_event_gid),ee.s(e));o()},t.prototype.ToggleWishlist=function(){var e=this.props,t=e.appid,n=e.fnCloseMenu,o=!ut.BIsGameWishlisted(t);ut.UpdateGameWishlist(t,o),n()},t.prototype.ToggleFollowed=function(){var e=this.props,t=e.appid,n=e.fnCloseMenu,o=!ut.BFollowsApp(t);ut.UpdateFollowingApp(t,o),n()},t.prototype.render=function(){var e=this.props,t=e.appid,n=e.fnCloseMenu,o=lt.Get().GetDemoEventInfo(t),r=!!(o&&o.info_clan_event_gid&&st.GetClanEventModel(o.info_clan_event_gid)),i=ut.BIsGameWishlisted(t),s=ut.BFollowsApp(t);return a.a.createElement("div",null,r&&a.a.createElement("div",{className:fi.a.MoreActionsMenuItem,onClick:this.ShowQuickPitch},Object(k.d)("#Sale_ReadDemoBlurb")),a.a.createElement("a",{className:fi.a.MoreActionsMenuItem,onClick:n,href:D.c.STORE_BASE_URL+"newshub/app/"+t+"?upcoming=true",target:"_blank"},Object(k.d)("#Sale_SeeUpcomingEvents")),a.a.createElement("div",{className:fi.a.MoreActionsMenuItem,onClick:D.i.logged_in?this.ToggleWishlist:Lt},Object(k.d)(i?"#Sale_RemoveFromWishlist":"#Sale_AddToWishlist")),a.a.createElement("div",{className:fi.a.MoreActionsMenuItem,onClick:D.i.logged_in?this.ToggleFollowed:Lt},Object(k.d)(s?"#Sale_StopFollowingGame":"#Sale_FollowGame")),a.a.createElement("a",{className:fi.a.MoreActionsMenuItem,onClick:n,href:D.c.STORE_BASE_URL+"app/"+t,target:"_blank"},Object(k.d)("#Sale_VisitStorePage")))},Object(o.c)([ne.a],t.prototype,"ShowQuickPitch",null),Object(o.c)([ne.a],t.prototype,"ToggleWishlist",null),Object(o.c)([ne.a],t.prototype,"ToggleFollowed",null),t=Object(o.c)([r.a],t)}(a.a.Component),aa=n("6Eqa"),sa=n("GgMg"),ca=n.n(sa);function la(){return window.sessionStorage&&"true"==window.sessionStorage.getItem("DEBUG_UseNewGameHover")}var pa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refAnchor=i.createRef(),t}return Object(o.d)(t,e),t.prototype.ClosePopup=function(){var e=this.props.fnHoverState;this.m_fnHidePopup&&(this.m_fnHidePopup(),this.m_fnHidePopup=null,e&&e(!0),window.removeEventListener("scroll",this.OnScroll))},t.prototype.componentWillUnmount=function(){this.ClosePopup()},t.prototype.OnScroll=function(){Math.abs(window.scrollY-this.m_nScrollPosAtHoverStart)>50&&this.ClosePopup()},t.prototype.OnHover=function(e){var n=this.props,r=n.info,a=n.eventToShow,s=n.hoverProps,c=n.fnHoverState,l=(n.children,Object(o.f)(n,["info","eventToShow","hoverProps","fnHoverState","children"]),this.m_refAnchor.current);if(l&&Object(S.a)(r.type)){var p=r,u=Object(o.a)(Object(o.a)({direction:"overlay-center",bEnablePointerEvents:!0},s),{style:Object(o.a)({minWidth:l.clientWidth,minHeight:l.clientHeight},null==s?void 0:s.style),target:l}),m="game-hover-"+Math.floor(1e8*Math.random());this.m_fnHidePopup=function(){return t.sm_embeddedElements.HideElement(l.ownerDocument,m)},window.addEventListener("scroll",this.OnScroll),this.m_nScrollPosAtHoverStart=window.scrollY,c&&c(!0);t.sm_embeddedElements.ShowElementDelayed(l.ownerDocument,150,i.createElement(Gn.a,Object(o.a)({},u),i.createElement(oa,{appCapsule:p,eventToShow:a,fnClose:this.ClosePopup})),m)}},t.prototype.render=function(){var e=this.props,t=e.info,n=(e.eventToShow,e.hoverProps,e.fnHoverState,e.children),r=Object(o.f)(e,["info","eventToShow","hoverProps","fnHoverState","children"]),a=Object(S.a)(t.type)?"app":t.type;if("app"!=a)return null;Object(Pt.d)((D.c.IN_CLIENT?"steam://openurl/":"")+D.c.STORE_BASE_URL+a+"/"+t.id),D.c.IN_CLIENT;var s=Object(o.a)({},r);return i.createElement("a",Object(o.a)({ref:this.m_refAnchor},s,{onMouseEnter:this.OnHover,onFocus:this.OnHover}),n)},t.sm_embeddedElements=new jn.a("game-hover-source-elements"),Object(o.c)([ne.a],t.prototype,"ClosePopup",null),Object(o.c)([ne.a],t.prototype,"OnScroll",null),Object(o.c)([ne.a],t.prototype,"OnHover",null),t}(i.Component),ua=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={rgImages:[],nCurrentIndex:0},t.m_imageRotationCallback=new $.b,t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){this.SetUpImageRotation()},t.prototype.componentDidUpdate=function(e){e.info.id!=this.props.info.id&&this.SetUpImageRotation()},t.prototype.componentWillUnmount=function(){this.m_imageRotationCallback.Cancel()},t.prototype.SetUpImageRotation=function(){var e=this.props.info,t=[],n=e;n.microtrailer&&t.push({rctImage:i.createElement(Ta,{appInfo:n}),nDurationMs:5500}),n.screenshot_list.forEach((function(e,n){t.push({rctImage:i.createElement("img",{key:e,className:ca.a.FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(n+1)}),nDurationMs:2e3})})),0==t.length&&t.push({rctImage:i.createElement("img",{key:"fallback",className:ca.a.FullDivImage,loading:"lazy",src:n.main_capsule,alt:n.name}),nDurationMs:1e6}),this.setState({rgImages:t,nCurrentIndex:0},this.ScheduleNextRotation)},t.prototype.RotateImages=function(){var e=this;this.setState((function(t){return{nCurrentIndex:(t.nCurrentIndex+1)%e.state.rgImages.length}}),this.ScheduleNextRotation)},t.prototype.ScheduleNextRotation=function(){var e=this.state,t=e.rgImages[e.nCurrentIndex].nDurationMs;this.m_imageRotationCallback.Schedule(t,this.RotateImages)},t.prototype.render=function(){var e=this.state,t=e.rgImages,n=e.nCurrentIndex;return t.length?i.createElement("div",{className:ca.a.TrailerCtn},t.map((function(e,t){return i.createElement("div",{key:"e-"+t,className:Object(R.a)(ca.a.FullDivImage,t!=n&&ca.a.Transparent)},e.rctImage)}))):null},Object(o.c)([ne.a],t.prototype,"RotateImages",null),Object(o.c)([ne.a],t.prototype,"ScheduleNextRotation",null),t}(i.Component),ma=function(e){var t=e.info,n=ut.BShowFilteredUserReviewScores()?t.reviews_filtered:t.reviews_unfiltered;if(!n)return null;var o="",r="";n.score>0&&n.num_reviews>0&&(o=new Intl.NumberFormat(k.c.GetPreferredLocales(),{style:"percent"}).format(n.num_positive/n.num_reviews),r=n.score<5?ca.a.ReviewScoreLow:5==n.score?ca.a.ReviewScoreMixed:ca.a.ReviewScoreHigh);return i.createElement("div",{className:ca.a.ReviewScore},i.createElement("div",{className:ca.a.ReviewScoreHeader},Object(k.d)("#GameHover_UserReviewsHeader")),i.createElement("div",{className:Object(R.a)(ca.a.ReviewScoreValue,r)},i.createElement("div",{className:ca.a.ReviewScorePercentage},o),i.createElement("div",{className:ca.a.ReviewScoreLabel},n.label)))},da=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refContainer=i.createRef(),t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){ut.HintLoad(),this.m_refContainer.current&&this.m_refContainer.current.focus()},t.prototype.Close=function(){this.props.fnClose&&this.props.fnClose()},t.prototype.OnKeyDown=function(e){27==e.keyCode&&(this.Close(),e.preventDefault(),e.stopPropagation())},t.prototype.render=function(){var e=this.props,t=e.info,n=(e.fnClose,Object(S.a)(t.type)?"app":t.type),o=""+D.c.STORE_BASE_URL+n+"/"+t.id,r=t;return i.createElement("a",{href:Object(Pt.d)(o),target:"_blank",className:ca.a.GameHoverCapsuleCtn,ref:this.m_refContainer,tabIndex:-1,onMouseLeave:this.Close,onBlur:this.Close,onKeyDown:this.OnKeyDown},i.createElement(ua,{info:t}),i.createElement("div",{className:ca.a.CapsuleImageAnchorPoint},i.createElement("div",{className:ca.a.CapsuleImageCtn},i.createElement("img",{loading:"lazy",width:parseInt(ca.a.strSmallCapsuleImgWidth),height:parseInt(ca.a.strSmallCapsuleImgHeight),src:t.header_image_url,alt:t.name}))),i.createElement("div",{className:Object(R.a)(ca.a.LowerContent,gi.a.InGameHover)},i.createElement("div",{className:ca.a.Price},i.createElement(va,{info:t})),i.createElement("div",{className:ca.a.TextContent},i.createElement("div",{className:ca.a.GameTitle},t.name),i.createElement("div",{className:ca.a.Tags},Object(k.d)("#GameHover_Tags"),r.tags.slice(0,4).map((function(e){return i.createElement("span",{className:ca.a.Tag,key:e.tagid},e.name)}))),i.createElement(ma,{info:t}),i.createElement("div",{className:ca.a.ReviewsAndRelease},i.createElement(Da,{item:r}),r.release&&i.createElement("div",{className:ca.a.ReleaseDate},r.coming_soon?r.release:i.createElement(i.Fragment,null,i.createElement("span",{className:ca.a.ReleasePrefix},Object(k.d)("#Sale_Released_Shorter")),r.release))))))},Object(o.c)([ne.a],t.prototype,"Close",null),Object(o.c)([ne.a],t.prototype,"OnKeyDown",null),t}(i.Component),ha=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refHoverSourceDiv=i.createRef(),t}return Object(o.d)(t,e),t.prototype.ClosePopup=function(){this.m_fnHidePopup&&(this.m_fnHidePopup(),this.m_fnHidePopup=null,window.removeEventListener("scroll",this.OnScroll))},t.prototype.componentWillUnmount=function(){this.ClosePopup()},t.prototype.OnScroll=function(){Math.abs(window.scrollY-this.m_nScrollYAtHoverStart)>50&&this.ClosePopup()},t.prototype.OnHover=function(e){var n=this.props,r=n.info,a=n.hoverProps,c=(n.children,Object(o.f)(n,["info","hoverProps","children"]),this.m_refHoverSourceDiv.current);if(c){var l=Object(o.a)(Object(o.a)({direction:"overlay-center",bEnablePointerEvents:!0},a),{style:Object(o.a)({minWidth:1.1*c.clientWidth,minHeight:1.1*c.clientHeight,maxWidth:1.8*c.clientWidth},null==a?void 0:a.style),target:c}),p="game-hover-"+Math.floor(1e8*Math.random());this.m_fnHidePopup=function(){return t.sm_embeddedElements.HideElement(c.ownerDocument,p)},this.m_nScrollYAtHoverStart=window.scrollY,window.addEventListener("scroll",this.OnScroll);t.sm_embeddedElements.ShowElementDelayed(c.ownerDocument,150,i.createElement(Gn.a,Object(o.a)({},l),i.createElement(s.CSSTransition,{key:p,timeout:500,in:!0,appear:!0,classNames:{appearActive:ca.a.Opening,enterDone:ca.a.Open}},i.createElement("div",{className:ca.a.GameHoverTransition},i.createElement(da,{info:r,fnClose:this.ClosePopup})))),p)}},t.prototype.render=function(){var e=this.props,t=(e.info,e.hoverProps,e.children),n=Object(o.f)(e,["info","hoverProps","children"]);return i.createElement("div",Object(o.a)({ref:this.m_refHoverSourceDiv},n,{onMouseEnter:this.OnHover,onFocus:this.OnHover}),t)},t.sm_embeddedElements=new jn.a("game-hover-source-elements"),Object(o.c)([ne.a],t.prototype,"ClosePopup",null),Object(o.c)([ne.a],t.prototype,"OnScroll",null),Object(o.c)([ne.a],t.prototype,"OnHover",null),t}(i.Component),fa=function(e){return e.appInfo&&D.c.SNR?i.createElement(Bt,{appID:e.appInfo.id,snr:D.c.SNR},i.createElement("div",null,e.children)):i.createElement(i.Fragment,null,e.children)};function _a(e){return"bundle"==e.type?M.GetBundleInfo(e.id):"sub"==e.type?W.GetPackageInfo(e.id):Object(S.a)(e.type)?O.a.GetAppLinkInfo(e.id):null}function ga(e){return"bundle"==e?"bundle":"sub"==e?"sub":Object(S.a)(e)?"app":null}var ba=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.m_myInstance=++n.instance_count,t.m_bIsMounted=!1,t}var n;return Object(o.d)(t,e),n=t,t.prototype.componentDidMount=function(){var e=this.props,t=e.id,n=e.type;this.m_bIsMounted=!0,ut.HintLoad(),this.LoadCapsule(t,n)},t.prototype.componentWillUnmount=function(){this.m_bIsMounted=!1},t.prototype.LoadCapsule=function(e,t){var n=this;void 0===t&&(t="game");var o={id:e,type:t};bi([o]).then((function(){var t=_a(o),r=ga(o.type);t&&r?(n.setState({info:t,hoverType:r}),vi(o).then((function(e){if(n.m_bIsMounted)if(1==e.length){var o=O.a.GetAppLinkInfo(e[0]);if(o){n.setState({appInfo:o});var i=Y.a.Get();i.LoadShortDesc(o.appid).then((function(e){if(e&&n.m_bIsMounted){var t=i.GetShortDesc(o.appid);t&&n.setState({strAppShortDescription:Object(y.c)(t)})}}))}}else"bundle"==r?n.setState({rgContainedInfos:t.packageids.map((function(e){return W.GetPackageInfo(e)}))}):"sub"==r&&n.setState({rgContainedInfos:t.appids.map((function(e){return O.a.GetAppLinkInfo(e)}))})}))):console.warn("Unsupported item:",o.type,e)}))},t.prototype.OnHoverStateChange=function(e){this.state.bIsHovered!=e&&this.setState({bIsHovered:e})},t.prototype.render=function(){var e=this,t=this.props,n=t.id,o=t.bUseDemoLayout,r=t.bHidePrice,a=this.state,s=a.info,c=a.hoverType,l=a.bIsHovered,p=a.rgContainedInfos,u=a.appInfo,m=a.strAppShortDescription;if(!s||!u&&!p)return null;var d,h=s.name,f=s.header_image_url,_=s.discount_percent,g=o&&u?u.appid:null,b=""+D.c.STORE_BASE_URL+c+"/"+n,v=f,y=!1;if(u){v=u.main_capsule,d=m;var S=u&&(u.full_game_appid||u.appid);y=S&&q.c.BIsAppStreaming(S)}else d=_?Object(k.d)("#Sale_BundleSave_WithDiscount",_,p.length):Object(k.d)("#Sale_BundleSave",p.length);return i.createElement(fa,{appInfo:u},i.createElement("div",{className:gi.a.StoreSaleWidgetContainer},i.createElement("div",{className:Object(R.a)(gi.a.StoreSaleWidgetLeft)},i.createElement(ri.a,{strURL:b,type:c,id:n,fnHoverState:this.OnHoverStateChange},i.createElement("div",{className:gi.a.StoreSaleWidgetImage},D.i.logged_in&&i.createElement(Ia,{appInfo:u}),y&&i.createElement("div",{className:gi.a.CapsuleDecorators},i.createElement(Ma,null)),i.createElement("div",{className:gi.a.MainCapsuleImageContainer},i.createElement("img",{loading:"lazy",width:gi.a.mainCapsuleImgWidth,height:gi.a.mainCapsuleImgHeight,className:Object(R.a)(gi.a.CapsuleImage),src:v,alt:h})),l&&i.createElement(Ta,{appInfo:u})))),i.createElement("div",{className:gi.a.StoreSaleWidgetRight},i.createElement("div",{className:gi.a.TitleCtn},i.createElement("a",{href:Object(Pt.d)(b),target:D.c.IN_CLIENT?void 0:"_blank"},i.createElement("div",{className:gi.a.StoreSaleWidgetTitle},h)),i.createElement(Da,{item:s})),i.createElement("div",{className:gi.a.StoreSaleWidgetReleaseAndTags},u&&i.createElement("div",{className:gi.a.StoreSaleWidgetRelease},u.release),u&&u.tags&&i.createElement("div",{className:gi.a.StoreSaleWidgetTags},u.tags.map((function(t){return i.createElement("div",{key:"tag_"+e.m_myInstance+"_"+t.tagid,className:gi.a.AppTag},t.name)})))),d&&i.createElement("div",{className:gi.a.StoreSaleWidgetShortDesc},d),p&&i.createElement(Ca,{rgInfo:p}),i.createElement(ya,{info:u||s,demoAppID:g,bHidePrice:r}))),p&&p.length>0&&i.createElement(Sa,{rgInfo:p}))},t.instance_count=0,Object(o.c)([ne.a],t.prototype,"OnHoverStateChange",null),t=n=Object(o.c)([r.a],t)}(i.Component),va=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.info;if(!e)return null;var t=e.type,n=e.is_free,o=e.discount_percent,r=e.formatted_orig_price,a=e.formatted_final_price,s="bundle"==t&&e.bundle_base_discount;return this.props.bShowInLibrary?i.createElement("div",{className:gi.a.StoreSalePriceBox},Object(k.d)("#EventDisplay_CallToAction_InLibrary")):n?i.createElement("div",{className:gi.a.StoreSalePriceBox},Object(k.d)("#EventDisplay_CallToAction_FreeToPlay")):a?i.createElement("div",{className:Object(R.a)(gi.a.StoreSalePriceWidgetContainer,o&&gi.a.Discounted)},Boolean(s&&o&&o>s)&&i.createElement("span",{className:Object(R.a)(gi.a.BaseDiscount)},"-"+s+"%"),Boolean(o)&&i.createElement("div",{className:gi.a.StoreSaleDiscountBox},"-"+o+"%"),o&&r?i.createElement("div",{className:gi.a.StoreSaleDiscountedPriceCtn},i.createElement("div",{className:gi.a.StoreOrignalPrice},r),i.createElement("div",{className:gi.a.StoreSalePriceBox},a)):i.createElement("div",{className:gi.a.StoreSalePriceBox},a)):null},t=Object(o.c)([r.a],t)}(i.Component),ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this.props.demoAppID;e&&(lt.Get().BHasDemoEventInfo(e)||lt.Get().LoadAppIDsBatch([e],!0).then((function(t){return t&&lt.Get().EnsurePartnerEventLoadedForDemo(e)})))},t.prototype.ShowQuickPitch=function(e){var t=this.props.demoAppID,n=t?lt.Get().GetDemoEventInfo(t):null,o=n?st.GetClanEventModel(n.info_clan_event_gid):null;o&&di(o,ee.s(e))},t.prototype.render=function(){var e=this.props,t=e.info,n=e.demoAppID,o=e.bHidePrice,r=t.type,a=n?lt.Get().GetDemoEventInfo(n):null,s=a?st.GetClanEventModel(a.info_clan_event_gid):null;return i.createElement("div",{className:gi.a.StoreActionWidgetContainer},Boolean(s)&&i.createElement("div",{className:Object(R.a)(gi.a.QuickPitch),onClick:this.ShowQuickPitch},Object(k.d)("#Sale_ReadDemoBlurb")),i.createElement(wa,{info:t}),!o&&i.createElement("div",{className:gi.a.StoreSalePriceActionWidgetContainer},i.createElement(va,{info:t}),Boolean(a&&Object(S.a)(r))?i.createElement(ra,{appLinkInfo:t,className:gi.a.Action}):i.createElement(Aa,{info:t})))},Object(o.c)([ne.a],t.prototype,"ShowQuickPitch",null),t=Object(o.c)([r.a],t)}(i.Component),Sa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bExpanded:!1},t}return Object(o.d)(t,e),t.prototype.SetExpanded=function(e){this.setState({bExpanded:e})},t.prototype.render=function(){var e=this,t=this.props.rgInfo,n=this.state.bExpanded;return i.createElement("div",{className:gi.a.ShowContentsSection},i.createElement("div",{onClick:function(){return e.SetExpanded(!n)},className:gi.a.BundleShowButton},i.createElement("button",{className:gi.a.ShowContentsButton},n?Object(k.d)("#Sale_ShowLess"):Object(k.d)("#Sale_ShowBundleContent",t.length))),i.createElement(s.CSSTransition,{in:n,mountOnEnter:!0,unmountOnExit:!0,timeout:2e3,classNames:{enterActive:gi.a.Expanding,enterDone:gi.a.Expanded,exit:gi.a.Expanded,exitActive:gi.a.Collapsing}},i.createElement("div",{className:gi.a.BundleContentsCtnTransition},i.createElement("div",{className:gi.a.BundleContentsCtn},i.createElement("div",{className:gi.a.BundleContentsTitle},Object(k.d)("#Sale_BundleContents_Title",t.length)),t.map((function(e){return i.createElement("div",{key:e.id,className:gi.a.BundleContentItem},i.createElement(ba,{id:e.id,type:e.type}))}))),t.length>10&&i.createElement("div",{onClick:function(){return e.SetExpanded(!1)},className:gi.a.BundleShowButton},i.createElement("button",{className:gi.a.ShowContentsButton},Object(k.d)("#Sale_ShowLess"))))))},Object(o.c)([ne.a],t.prototype,"SetExpanded",null),t}(i.Component),Ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.GetAppInfo=function(e){if(Object(S.a)(e.type))return e;if("sub"==e.type){var t=e;if(1==t.appids.length)return O.a.GetAppLinkInfo(t.appids[0])}return null},t.prototype.render=function(){var e=this,t=this.props.rgInfo.slice(0,6).map((function(t){var n=e.GetAppInfo(t),o=n?n.tiny_capsule:t.header_image_url,r=n||t,a=r.type,s=r.id,c=r.name,l=ga(a);return l?i.createElement(ri.a,{key:"preview-"+a+"-"+s,strURL:""+D.c.STORE_BASE_URL+l+"/"+s,type:l,id:s,hoverClassName:gi.a.PreviewItem},D.i.logged_in&&i.createElement(Ia,{appInfo:n}),i.createElement("img",{src:o,className:gi.a.PreviewImg,loading:"lazy",alt:c})):null}));return i.createElement("div",{className:gi.a.BundleContentPreview},i.createElement("div",{className:gi.a.PreviewCtn},t))},t=Object(o.c)([r.a],t)}(i.Component),Oa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bIsHovered:!1,rgAppIDs:[]},t.m_bIsMounted=!1,t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.capsule;this.m_bIsMounted=!0,ut.HintLoad(),bi([t]).then((function(){if(e.m_bIsMounted){var n=_a(t),o=ga(t.type);n&&o?e.setState({info:n,hoverType:o}):console.warn("Unsupported item:",t.type,t.id),vi(e.props.capsule).then((function(t){if(e.m_bIsMounted){var n=1==t.length?O.a.GetAppLinkInfo(t[0]):null;e.setState({rgAppIDs:t,appInfo:n})}}))}}))},t.prototype.componentWillUnmount=function(){this.m_bIsMounted=!1},t.prototype.OnHoverStateChange=function(e){this.state.bIsHovered!=e&&this.setState({bIsHovered:e})},t.prototype.render=function(){var e=this.props,t=e.capsule,n=e.bShowParentApp,r=e.bUseSubscriptionLayout,a=e.bUseDemoLayout,s=e.eventToShow,c=e.bHidePriceIfOwned,l=e.bHideStatusBanners,p=e.bHidePrice,m=this.state,h=m.info,f=m.hoverType,_=m.bIsHovered,g=m.rgAppIDs,b=m.appInfo;if(!h||0==g.length)return null;var v=b||h,y=v.name,S=v.header_image_url,C=g.every((function(e){return ut.BOwnsApp(e)})),I=!C&&g.every((function(e){return ut.BIsGameWishlisted(e)})),E=g.some((function(e){var t=O.a.GetAppLinkInfo(e),n=t&&(t.full_game_appid||t.appid);return q.c.BIsAppStreaming(n)})),w=C&&c,A=C&&!l,T=I&&!l,M=A,j=n&&b&&b.full_game_appid&&O.a.GetAppLinkInfo(b.full_game_appid),L=r&&b?i.createElement(Ea,{appid:b.appid}):s?i.createElement("div",{className:gi.a.EventRow},i.createElement(Yi,{item:s,bMiniMode:!0})):i.createElement("div",{className:Object(R.a)(gi.a.CapsuleBottomBar,M&&gi.a.Muted)},i.createElement(Da,{item:h}),!p&&i.createElement("span",{className:gi.a.BottomBarPriceInfo},i.createElement(va,{info:b,bShowInLibrary:w}))),G=i.createElement(i.Fragment,null,i.createElement("div",{className:gi.a.CapsuleDecorators},A&&i.createElement("span",{className:Object(R.a)(gi.a.Banner,gi.a.Blue)},i.createElement("img",{src:u.a,className:gi.a.LinesImg}),Object(k.d)("#Sale_InLibrary")),T&&i.createElement("span",{className:gi.a.Banner},i.createElement("img",{src:d.a,className:gi.a.LinesImg}),Object(k.d)("#Sale_OnWishlist")),E&&i.createElement(Ma,null)),D.i.logged_in&&!a&&i.createElement(Ia,{appInfo:b}),i.createElement("div",{className:gi.a.HeaderCapsuleImageContainer},i.createElement("img",{loading:"lazy",width:gi.a.headerCapsuleImgWidth,height:gi.a.headerCapsuleImgHeight,className:Object(R.a)(gi.a.CapsuleImage,M&&gi.a.Muted),src:S,alt:y})),_&&!a&&!la()&&i.createElement(Ta,{appInfo:b}),L);return i.createElement("div",{className:gi.a.OuterCapsuleContainer},i.createElement(fa,{appInfo:b},la()?i.createElement(ha,{info:h},G):a&&b?i.createElement(pa,{info:b,className:gi.a.CapsuleContainer,eventToShow:s,fnHoverState:this.OnHoverStateChange,hoverProps:{className:gi.a.DemoLayoutPopup}},G):i.createElement(ri.a,{strURL:""+D.c.STORE_BASE_URL+f+"/"+t.id,type:f,id:t.id,fnHoverState:this.OnHoverStateChange,hoverClassName:gi.a.CapsuleContainer},G)),Boolean(j)&&i.createElement("div",{className:gi.a.CapsuleParentInfo},i.createElement("div",null,Object(k.d)("music"===b.type?"#SalePage_ParentApp_SoundTrack":"#SalePage_ParentApp_DLC")),i.createElement(ri.a,{strURL:D.c.STORE_BASE_URL+"app/"+j.appid,type:"app",id:j.appid},i.createElement("img",Object(o.a)({loading:"lazy",className:aa.AppCapsuleImage,alt:j.title,src:j.tiny_capsule},j.GetTinyCapsuleDimensions())))))},Object(o.c)([ne.a],t.prototype,"OnHoverStateChange",null),t=Object(o.c)([r.a],t)}(i.Component),Ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnOpenContextMenu=function(e){var t=this.props.appInfo,n=t&&ut.BIsGameWishlisted(t.appid);Object(C.a)(i.createElement(mt.c,null,t&&i.createElement(mt.d,{onSelected:function(){return ut.UpdateGameWishlist(t.appid,!n)}},i.createElement("div",{style:{color:"white"}},Object(k.d)(n?"#Sale_RemoveFromWishlist":"#Sale_AddToWishlist"))),i.createElement(mt.d,{onSelected:function(){}},i.createElement("a",{href:D.c.STORE_BASE_URL+"account/preferences",target:"_blank"},Object(k.d)("#Sale_Preferences")))),e,{bDisablePopTop:!0})},t.prototype.render=function(){return D.i.logged_in?i.createElement("div",{className:gi.a.CapsuleMenuButton,onClick:this.OnOpenContextMenu}," ",i.createElement(N.o,{angle:-90})," "):null},Object(o.c)([ne.a],t.prototype,"OnOpenContextMenu",null),t=Object(o.c)([r.a],t)}(i.Component),Ea=Object(r.a)((function(e){var t=e.appid,n=ut.BOwnsApp(t),o=function(e){e.preventDefault(),n?x(t):ut.AddLicenseForFreeGame(t)};return n?i.createElement("div",{onClick:o,className:Object(R.a)(gi.a.CapsuleBottomBar,gi.a.PlayNowButton)}," ",Object(k.d)("#Sale_PlayNow")," "):i.createElement("div",{onClick:o,className:Object(R.a)(gi.a.CapsuleBottomBar,gi.a.AddToLibraryButton)}," ",Object(k.d)("#Sale_AddToLibrary")," ")})),wa=(i.Component,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bUpdatingWishList:!1,bLoadingUserData:!ut.BIsLoaded()},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,ut.HintLoad()];case 1:return e.sent(),this.setState({bLoadingUserData:!1}),[2]}}))}))},t.prototype.DisplayWishlistUpdateErrors=function(e){Object(G.d)(i.createElement(L.d,{strTitle:Object(k.d)("#Wishlist_Error"),strDescription:Object(k.d)("#Wishlist_Error_Desc")},i.createElement("br",null),i.createElement("br",null),e),window)},t.prototype.OnWishListClick=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!D.i.logged_in)return Lt(),[2];if(e=this.props.info.id,this.state.bUpdatingWishList)return[3,4];this.setState({bUpdatingWishList:!0}),t=!ut.BIsGameWishlisted(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ut.UpdateGameWishlist(e,t)];case 2:return n=o.sent(),this.setState({bUpdatingWishList:!1},(function(){1!=n.success&&i.DisplayWishlistUpdateErrors(Object(te.a)(n).strErrorMsg)})),[3,4];case 3:return r=o.sent(),this.setState({bUpdatingWishList:!1}),this.DisplayWishlistUpdateErrors(Object(te.a)(r).strErrorMsg),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this.state,t=e.bLoadingUserData,n=e.bUpdatingWishList,o=this.props,r=o.info,a=o.className,s=r.type,c=r.id,p=r.is_free,u=r.formatted_final_price;if(s&&!Object(S.a)(s))return null;var m=r.coming_soon;if(ut.BOwnsApp(c)||!m&&(p||""==u||"0"==u))return null;var d=ut.BIsGameWishlisted(c);return i.createElement("div",{className:Object(R.a)(gi.a.WishList,ve.a.FlexRowContainer,a),onClick:this.OnWishListClick,"data-tooltip-text":Object(k.d)("#AddToWishlist_ttip")},i.createElement("span",null,(t||n)&&i.createElement(ge.a,{size:"small"})),!n&&d&&i.createElement("img",{className:ve.a.IconImage,src:l.a}),i.createElement("span",null,Object(k.d)(n?"#Updating":t?"#Loading":d?"#Wishlisted":"#AddToWishlist")))},Object(o.c)([ne.a],t.prototype,"OnWishListClick",null),t=Object(o.c)([r.a],t)}(i.Component)),Aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){ut.HintLoad()},t.prototype.OnAddToCart=function(e){var t=this.props.info,n=t.type,o=t.id,r=t.purchasePackageId,i=D.c.STORE_BASE_URL+"cart",a=D.c.STORE_BASE_URL+"cart/addtocart";"bundle"==n?ut.AddToCart(e,null,a,i,o):ut.AddToCart(e,r,a,i)},t.prototype.OnPlay=function(){Object(pt.g)(window,"steam://run/"+this.props.info.app_to_run)},t.prototype.render=function(){var e=this.props,t=e.info,n=e.className,o=t.type,r=t.id,a=t.purchasePackageId,s=t.is_free,c=t.formatted_final_price;if(!o||Object(S.a)(o)){var l=t;if(l.coming_soon&&!a)return null;var p=ut.BOwnsApp(r);if(p||(s||""==c||"0"==c)){var u=p&&Object(k.d)("#EventDisplay_CallToAction_PlayNow")||l.button_action||Object(k.d)("#EventDisplay_CallToAction_PlayNowForFree");return i.createElement("div",{className:gi.a.Action,onClick:this.OnPlay},i.createElement("span",null,u))}}return i.createElement("div",{className:Object(R.a)(gi.a.Action,n),onClick:this.OnAddToCart},i.createElement("span",null,Object(k.d)("#Store_AddToCart")))},Object(o.c)([ne.a],t.prototype,"OnAddToCart",null),Object(o.c)([ne.a],t.prototype,"OnPlay",null),t=Object(o.c)([r.a],t)}(i.Component),Da=function(e){var t=e.item;return i.createElement("span",{className:gi.a.CapsulePlatform},t.available_windows&&i.createElement("img",{src:v.a}),t.available_mac&&i.createElement("img",{src:g.a}),t.available_linux&&i.createElement("img",{src:f.a}),t.support_vrhmd&&i.createElement(N.kb,null))},Ta=function(e){return e.appInfo&&e.appInfo.microtrailer?i.createElement("video",{className:gi.a.CapsuleMicroTrailer,loop:!0,muted:!0,autoPlay:!0,key:"mtv-"+e.appInfo.microtrailer},i.createElement("source",{src:e.appInfo.microtrailer,type:"video/webm"}),!D.c.IN_CLIENT&&i.createElement("source",{src:e.appInfo.microtrailer_mp4,type:"video/mp4"})):null},Ma=function(){return i.createElement("div",{className:gi.a.bordered_live_stream_icon},Object(k.d)("#home_page_live_broadcast"))}},EpFY:function(e,t,n){e.exports={TextToolTip:"tooltip_TextToolTip_1VIQm",ToolTipCustom:"tooltip_ToolTipCustom_3zwhg",ToolTipTitle:"tooltip_ToolTipTitle_3qfPA",Center:"tooltip_Center_r5AUM",ToolTipInsetContent:"tooltip_ToolTipInsetContent_1r-dc"}},Ezvv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var o=n("1n9R"),r={success:!0,result:1},i=function(){function e(){this.m_connection=new a,this.m_bAllowAccountMismatch=!1,this.m_mapCacheSubscribedApp=new Map}return e.prototype.FailureResult=function(e){void 0===e&&(e=2);var t={success:!1,result:e};return this.m_connection&&!this.m_connection.browser_supported&&(t.browser_unsupported=!0),this.m_connection&&!this.m_connection.connected_to_client&&(t.connect_failed=!0),7==e&&(t.call_unsupported=!0),t},e.prototype.SetAllowAccountMismatch=function(e){this.m_bAllowAccountMismatch=e},e.prototype.BClientConnected=function(){var e=this;return this.m_connection.Connect().then((function(){return r}),(function(){return e.FailureResult()}))},e.prototype.BClientSupportsMessage=function(e){return!(!this.m_connection.connected_to_client||!this.m_connection.ready)&&-1!==this.m_connection.ClientInfo.rgSupportedMessages.indexOf(e)},e.prototype.OpenFriendChatDialog=function(e){var t={message:"ShowFriendChatDialog",steamid:e};return this.GenericEResultCall(t)},e.prototype.OpenChatRoomGroupDialog=function(e,t){var n={message:"ShowChatRoomGroupDialog",chat_group_id:e};return t&&(n.chat_room_id=t),this.GenericEResultCall(n)},e.prototype.ShowChatRoomGroupInvite=function(e){var t={message:"ShowChatRoomGroupInvite",invite_code:e};return this.GenericEResultCall(t)},e.prototype.OpenJoinGameDialog=function(e){var t={message:"ShowJoinGameDialog",friend_id:e};return this.GenericEResultCall(t)},e.prototype.BIsSubscribedApp=function(e){var t=this;if(this.m_mapCacheSubscribedApp.has(e))return Promise.resolve(this.m_mapCacheSubscribedApp.get(e));var n={message:"IsSubscribedApp",appid:e};return this.GenericEResultCall(n).then((function(n){if(!n.connect_failed){var o=1==n.result;return t.m_mapCacheSubscribedApp.set(e,o),o}}))},e.prototype.ViewGameInfoForSteamID=function(e){var t={message:"ViewGameInfoForSteamID",steamid:e};return this.GenericEResultCall(t)},e.prototype.OpenFriendsDialog=function(){return this.GenericEResultCall({message:"OpenFriendsDialog"})},e.prototype.BClientAccountMatches=function(){return!o.i.logged_in||o.i.accountid==this.m_connection.ClientInfo.unAccountID},e.prototype.GenericEResultCall=function(e){var t=this;return this.m_connection.Connect().then((function(){return t.m_bAllowAccountMismatch||t.BClientAccountMatches()?t.m_connection.SendMsgAndAwaitResponse(e).then((function(e){return 1===e.success?r:t.FailureResult(e.success)})):{success:!1,result:19,account_mismatch:!0}})).catch((function(){return t.FailureResult()}))},e}(),a=function(){function e(){this.m_mapWaitingCallbacks=new Map,this.m_iCallSeq=1,this.m_bReady=!1,this.m_bClientConnectionFailed=!1,this.m_bSecurityException=!1,this.m_ClientInfo={ulVersion:"",bFriendsUIEnabled:!1,unAccountID:0,rgSupportedMessages:[]}}return Object.defineProperty(e.prototype,"ClientInfo",{get:function(){return this.m_ClientInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this.m_bReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"browser_supported",{get:function(){return!this.m_bSecurityException},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connected_to_client",{get:function(){return this.m_socket&&this.m_socket.readyState==WebSocket.OPEN},enumerable:!1,configurable:!0}),e.prototype.SendMsgAndAwaitResponse=function(e){var t=this;return new Promise((function(n,o){var r=t.m_iCallSeq++;t.BSendMsg(e,r)?t.m_mapWaitingCallbacks.set(r,{iSeq:r,fnCallback:n,fnError:o}):o()}))},e.prototype.BSendMsg=function(e,t){if(!this.m_socket||this.m_socket.readyState!=WebSocket.OPEN)return!1;var n=Object.assign({},e,{universe:o.c.EUNIVERSE,accountid:o.i.accountid});void 0!==t&&(n.sequenceid=t);try{return this.m_socket.send(JSON.stringify(n)),!0}catch(e){return!1}},e.prototype.OnSocketMessage=function(e){try{var t=JSON.parse(e.data);if(t.sequenceid){var n=this.m_mapWaitingCallbacks.get(t.sequenceid);if(n)return this.m_mapWaitingCallbacks.delete(t.sequenceid),void n.fnCallback(t)}}catch(e){console.error("exception parsing response",e)}},e.prototype.Connect=function(){var e=this;if(this.m_bReady&&this.m_socket.readyState==WebSocket.OPEN)return Promise.resolve();if(this.m_promiseConnect)return this.m_promiseConnect;var t=new Promise((function(t,n){try{e.m_socket=new WebSocket("ws://127.0.0.1:27060/clientsocket/")}catch(t){return e.m_bSecurityException=!0,void n(t)}e.m_socket.onerror=function(e){n()},e.m_socket.onmessage=e.OnSocketMessage.bind(e),e.m_socket.onopen=function(o){e.SendMsgAndAwaitResponse({message:"GetClientInfo"}).then((function(o){1==o.success?(e.m_ClientInfo.ulVersion=o.clientversion,e.m_ClientInfo.bFriendsUIEnabled=!!o.friendsui,e.m_ClientInfo.unAccountID=o.accountid,o.supported_messages&&(e.m_ClientInfo.rgSupportedMessages=o.supported_messages),t()):n()})).catch(n)}}));return this.m_promiseConnect=t,this.m_promiseConnect.then((function(){e.m_bReady=!0,e.m_promiseConnect=void 0})).catch((function(){e.m_bClientConnectionFailed=!0,e.m_promiseConnect=void 0})),this.m_promiseConnect},e}(),s=new i;window.ClientConnectionAPI=s},F2OU:function(e,t,n){e.exports={SnoozeContainer:"friendsnooze_SnoozeContainer_1OfTa",SnoozeZ:"friendsnooze_SnoozeZ_29fyi",none:"friendsnooze_none_lZX-E",Medium:"friendsnooze_Medium_2NSIM",Large:"friendsnooze_Large_2QDqq",Dim:"friendsnooze_Dim_10sPU",Z1:"friendsnooze_Z1_GU6T2",Z2:"friendsnooze_Z2_277XL",Z3:"friendsnooze_Z3_1gXQi",animating:"friendsnooze_animating_1pImE",hoverParent:"friendsnooze_hoverParent_3SgRH",Snoring:"friendsnooze_Snoring_6q8Na"}},FNBO:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEFERTQyQ0E1Q0EyMTFFNTgwMzNBQUE0RTk3QjgyMDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEFERTQyQ0I1Q0EyMTFFNTgwMzNBQUE0RTk3QjgyMDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQURFNDJDODVDQTIxMUU1ODAzM0FBQTRFOTdCODIwOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQURFNDJDOTVDQTIxMUU1ODAzM0FBQTRFOTdCODIwOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prxq/1gAAAGJSURBVHjaYvz//z/DQAImhgEG9HTASiDeiiEKigI64Pj/CLAJiBlhcvSwXPc/JjgLxIIgeUYaJ0JBIL4NxMJY5B4BcTitHXAeiA3wyL+kZSJcQMByEEimVbxn/ScM8mmVCK2IsHwhTD2104AwNHFx4VFzAYgNaVUQ7SFg+Q8gdqZVSTifiEQHsvwdvpKQGYiDyIj3HCLiPRubXnSBBVDFE2iV6PA5IAlN0woiLJcG4h8ELD+PzwwYwxiH5sNALIzHgNsELH8DxEKEHCAGxB/xGPIEiNWwaF5PRNDrEQpFEHGZCIO+ArEjksZKIvTEE5OGQEQyEP/7TxwAJThDItRNIjYRwxgGQPz2P3XAEVKyMHJRLAvEu4FYnYLC6D3UnK/ktAkfA7EeEB+kwAEOpFiOr024mIygjyWn9sQn2UOC5VPJrb4JKcglwvLDlLQfiFHkDcR/cVj+CIjZaO0AfNlUidIWFCmKZYD4GpLlgdRowpHaJGMH4v1AfBGIM6nRiqF1v2Dw944BAgwAsWqnpJAiSOIAAAAASUVORK5CYII="},FhW1:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABJtJREFUeNrcm12IVVUUx3/rOlM6mF8ogwpCTPRUzJCUWNkHmkwTSEmmkxkh1UsQJPUQJPiQQS/14EvYB4QUIxJNSU1BvQhNQxhEE2IiEWoGJmLT2Iyp/Xu4Z/De07737nM9Z99z7noYhj17nbPX/6yP/157D5KQRFFFUknSGkl7JB1TWaYlfSPpKUmlOrrlHwUHYFT15UtJXbUA6LjGl88F+oDFgew9bGanYmOjwOo6OuuBt4GtNd0gqQdIWibpXUlTCitvOday0lO3L5UQkPSApHNqjZyR1OlY0zEP3T0uAEoJv/wG4DNgYYtCfgmw1jG+30N3k6RZ8cFSAuP7ohd1tjjvDTrGPvDQ6wbuawoASXOAA8DsHCT+hyVVrcPMjgLjHrqPN+sBO4GbclL55gEPOcY/9NB9RNL1iQCQtBR4IWflf0uTeWBhVBaves9MBTCzWgD0AvcnWNwNwA5gQYYATANLzGwyttYxYFUD3SEzG8yUCUp6JUBJ3OZ47/MeepMzzFBSfQ+I4mVOQvsXAfuAOzMOgxEzG4gTNOCkR2gPmtlQQw+Q9J7yK5ckLXKs+WsP3Y8bEiFJBvTneB/UATzminEP3QFJ8xtVgV5gac43g5sdYx8BlxvoXQdsbATAgwXYDd8bxX0lKToHfOGh+2g7AGA1vMAnDO6pyQMkLQDOArMKAMJ3ZrbK0af4w4O6Wy0PWFcQ4wHukNQTC4NJ4GADvdMzmdTZeUnI/lxJ5lXg9oDUeLeDGm+qo3Ow6Y6QJxt8IiAnGHeROEl/1mGDK5w9QUndDXpsvh7wUsAwuEXSrWY2XhEGFyUNA0/G5l4ANprZCScTlPSyiim7HR+zv+LvU5L2VeYL515A0iFgDcWTX8ysJwZAJ/A+MAIMm9lf8Z5gFQAFK38uWW1mYwny1P+I0LoCGz8R9QkSSRyAgQIbv97MfkhMJSsSoAG/FWADFJcpoN/MDjVRqqs8oLeAxl8BNjdjfBUKaREhSTdLOhWw9D17jetNnwlKGglk/BsprLUqB+xKwf7lwNMBXP9zYIOZXUkTgAtAVwHi/khU7yfS8IDKJHiyAMZPRjx+Iq0HVgIwWgAAtpvZz2k+sBKAT3Ju/F4zO5B6T60iB5SA48CNOTT+KLDSzP5OuWdx1QPM7F/guZySnW1pG+/cC5jZCPBazgB43cwOZ/Z0FxGStCO6a9dq+Sl+np+27TUPR6MDh63AbSQ/IO2i3JKeV/F7d9QqSyJ3mdlolgAEuSgZ3eY8kvDrv5N1bIUEYEtC489LWtxOAHyfEIAXQ2TXIABIujuh8b/Gb4FlCUApwHu2J5y/y8ymCSVZekCD0xmXHJfUEdL2rD1gbVQKk5CeywSUEAD4yu+UDzFoJwCS3BTba2b/BCfaGZ4Oz5Z0McGNr2WtsD1LD+hJQH2Hzex0K3ZaWQKwIsHcIVokWQKw3HPeBOV/wmg7AOZ6zvs0KPEJXAV8ZKSVL88SgPOe875qVwBOeMwZN7Mz7QrAjx5zvm11/GUGgJmdBcZSAKnQSXBn3gEI0RB5pg4lnt9q20O1xHokvRk1Ri9Fxu/Pw8f/bwBW/c7FQ+vD4wAAAABJRU5ErkJggg=="},FkUk:function(e,t,n){"use strict";n.d(t,"b",(function(){return z})),n.d(t,"e",(function(){return Y})),n.d(t,"f",(function(){return Q})),n.d(t,"d",(function(){return ne})),n.d(t,"c",(function(){return ae})),n.d(t,"a",(function(){return ce}));var o=n("mrSG"),r=n("LAqV"),i=n("hReu"),a=n("okNM"),s=n("Hi0u"),c=n("q1tI"),l=n("1VtQ"),p=n("oh5H"),u=n("ljid");function m(e,t,n){Object(s.c)(c.createElement(d,{player:t}),n,"NicknameDialog",{strTitle:Object(p.d)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400},Object(i.g)(n))}var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={strCurrentNameEntry:n.props.player.nickname||""},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value})},t.prototype.HandleSubmit=function(e){var t=this;r.f.FriendStore.SetPlayerNickname(this.props.player,this.state.strCurrentNameEntry).then((function(e){1==e&&t.props.closeModal&&t.props.closeModal()}))},t.prototype.componentDidUpdate=function(e){e.player!==this.props.player&&this.setState({strCurrentNameEntry:this.props.player.nickname})},t.prototype.render=function(){var e="friend editNickname",t=this.props.player.has_nickname;return this.props.player.persona.is_ingame?e+=" ingame":this.props.player.persona.is_online&&(e+=" online"),t&&(e+=" nickNamed"),c.createElement(s.a,{className:"Dialog_EditNickName",onEscKeypress:this.props.closeModal},c.createElement(u.h,{classNameContent:"NicknameDialog",onSubmit:this.HandleSubmit},c.createElement(u.m,null,t?Object(p.d)("#Friend_Menu_ChangeNickname"):Object(p.d)("#Friend_Menu_AddNickname")),c.createElement(u.b,null,c.createElement(u.c,null,t?Object(p.d)("#Nickname_EditNickname"):Object(p.d)("#Nickname_AddANickname")),c.createElement(u.c,null,c.createElement("div",{className:e},c.createElement("img",{className:"avatarMedium",src:this.props.player.persona.avatar_url_full}),c.createElement("div",{className:"labelHolder"},c.createElement("div",{className:"mediumName"},this.props.player.secondary_display_name),c.createElement("div",{className:"nickNamedAs"},Object(p.d)("#Nickname_NickNameAsDialog")),c.createElement("div",{className:"mediumName asNickName"},c.createElement(u.o,{placeholder:t?Object(p.d)("#Nickname_PlaceHolderNickName"):Object(p.d)("#Nickname_PlaceHolderNickNameFresh"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0,bShowClearAction:!0})))))),c.createElement(u.j,null,c.createElement(u.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t=Object(o.c)([a.a],t)}(c.Component),h=n("y4mg"),f=n("s+DT"),_=n("/IDK"),g=n("bbBM"),b=n("2vnA");function v(e,t,n){var o=n?[n.accountid]:[];Object(s.c)(c.createElement(y,{browserContext:e,rgPreSelectedFriends:o}),t,"CreateFriendCategoryDialog",{strTitle:Object(p.d)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:700},Object(i.g)(t))}var y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={strNameEntry:t.group?t.group.name:"",strError:null,rgPickedFriends:t.rgPreSelectedFriends.map((function(e){return r.f.FriendStore.GetPlayer(e)}))},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strNameEntry:e.target.value,strError:null})},t.prototype.HandleSubmit=function(){var e=this,t=this.state.rgPickedFriends,n=this.state.strNameEntry;if(this.props.group){for(var o=new Set(this.props.group.GetCurrentMemberSet()),i=[],a=[],s=0,c=t;s<c.length;s++){var l=c[s];o.has(l.accountid)?o.delete(l.accountid):i.push(l.persona.m_steamid.ConvertTo64BitString())}o.forEach((function(e){a.push(f.a.InitFromAccountID(e).ConvertTo64BitString())})),r.f.FriendStore.FriendGroupStore.ManageGroup(this.props.group,n,i,a).then((function(t){t?e.props.closeModal&&e.props.closeModal():e.setState({strError:Object(p.d)("#FriendGroup_ManageGroup_ErrorFailed")})}))}else{if(!n)return void this.setState({strError:Object(p.d)("#FriendGroup_CreateGroup_ErrorNeedName")});var u=t.map((function(e){return e.persona.m_steamid.ConvertTo64BitString()}));r.f.FriendStore.FriendGroupStore.CreateGroup(n,u).then((function(t){t?e.props.closeModal&&e.props.closeModal():e.setState({strError:Object(p.d)("#FriendGroup_CreateGroup_ErrorFailed")})}))}},t.prototype.render=function(){var e=this;return c.createElement(s.a,{onEscKeypress:this.props.closeModal},c.createElement(u.h,{classNameContent:"ManageGroupDialog",onSubmit:this.HandleSubmit},c.createElement(u.m,null,this.props.group?Object(p.d)("#FriendGroup_Menu_Manage"):Object(p.d)("#FriendGroup_Menu_CreateGroup")),c.createElement(u.b,null,this.state.strError&&c.createElement(u.c,{className:"nicknameError"},this.state.strError),c.createElement(u.o,{type:"text",label:Object(p.d)("#FriendGroup_CategoryName"),className:"nicknameInput",value:this.state.strNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),c.createElement(h.a,{label:Object(p.d)("#FriendGroup_CategoryMembers"),eSort:1,rgPickedFriends:this.state.rgPickedFriends,onChange:function(t){return e.setState({rgPickedFriends:t})}})),c.createElement(u.j,null,c.createElement(u.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t}(c.Component),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_mapCategoryChecks=b.A.map(),t.state={strError:null},t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){e.friend!==this.props.friend&&this.m_mapCategoryChecks.clear()},t.prototype.HandleSubmit=function(){var e=this,t=[];r.f.FriendStore.FriendGroupStore.user_groups.forEach((function(n){if(e.m_mapCategoryChecks.has(n.unique_id)){var o=void 0,i=void 0;e.m_mapCategoryChecks.get(n.unique_id)?i=n:o=n,t.push(r.f.FriendStore.FriendGroupStore.TransferFriendFromToGroup(e.props.friend,o,i))}})),Promise.all(t).then((function(t){for(var n=!1,o=0,r=t;o<r.length;o++)for(var i=0,a=r[o];i<a.length;i++){a[i]||(n=!0)}n?e.setState({strError:Object(p.d)("#FriendGroup_ManageGroup_ErrorFailed")}):e.props.closeModal()}))},t.prototype.CreateNew=function(e){v(Object(i.e)(this,e),Object(_.s)(e),this.props.friend)},t.prototype.render=function(){return c.createElement(s.a,{onEscKeypress:this.props.closeModal},c.createElement(u.h,{classNameContent:"AssignCategoriesDialog",onSubmit:this.HandleSubmit},c.createElement(u.m,null,Object(p.d)("#FriendGroup_Categorize_Title")),c.createElement(u.b,null,this.state.strError&&c.createElement(u.c,{className:"nicknameError"},this.state.strError),c.createElement(u.D,null,c.createElement(u.f,null,c.createElement(g.c,{friend:this.props.friend,className:"AssignCategoriesDialog_Friend",noActions:!0,context:null}))),c.createElement(C,{friend:this.props.friend,mapChecks:this.m_mapCategoryChecks}),c.createElement(u.D,{className:"AssignCategoriesDialog_AddNewButton"},c.createElement(u.d,{onClick:this.CreateNew},Object(p.d)("#FriendGroup_Categorize_AddNew")))),c.createElement(u.j,null,c.createElement(u.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleSubmit",null),Object(o.c)([l.a],t.prototype,"CreateNew",null),t}(c.Component),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this,t=r.f.FriendStore.FriendGroupStore.user_groups.map((function(t){return c.createElement(O,{friend:e.props.friend,group:t,key:t.unique_id,mapChecks:e.props.mapChecks})}));return c.createElement(c.Fragment,null,c.createElement(u.p,null,Object(p.d)("#FriendGroup_Categorize_Categories")),c.createElement("div",{className:"FriendCategoryCheckboxes_List"},t))},t=Object(o.c)([a.a],t)}(c.Component),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnToggle=function(e){e!=this.props.group.HasMember(this.props.friend.accountid)?this.props.mapChecks.set(this.props.group.unique_id,e):this.props.mapChecks.delete(this.props.group.unique_id)},t.prototype.OnContextMenu=function(e){ae(Object(i.e)(this,e),this.props.group,e)},t.prototype.render=function(){var e,t=this.props.group,n=this.props.friend;return e=this.props.mapChecks.has(t.unique_id)?this.props.mapChecks.get(t.unique_id):t.HasMember(n.accountid),c.createElement("div",{onContextMenu:this.OnContextMenu},c.createElement(u.e,{label:t.name,checked:e,onChange:this.OnToggle}))},Object(o.c)([l.a],t.prototype,"OnToggle",null),Object(o.c)([l.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([a.a],t)}(c.Component),I=n("8o0Y"),E=n("EGkk"),w=n("+M9t"),A=n("geE1"),D=n("rsEv"),T=n("tkkQ"),M=n("uWOQ"),j=n("+mma"),L=n("e2SU"),G=n("VZeO"),N=n("Ezvv"),R=n("vDqi"),k=n.n(R);var B=function(e){function t(t){var n=e.call(this,t)||this,o=r.f.FriendStore.self;return n.state={strCurrentNameEntry:o.primary_display_name,strError:""},n}return Object(o.d)(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value,strError:""})},t.prototype.HandleSubmit=function(e){this.SetPersonaName(this.state.strCurrentNameEntry)},t.prototype.DisplayError=function(e){this.setState({strError:e})},t.prototype.SetPersonaName=function(e){var t=this;if(this.setState({strError:""}),T.a.IN_CLIENT&&null!=SteamClient.WebChat.SetPersonaName)SteamClient.WebChat.SetPersonaName(this.state.strCurrentNameEntry).then((function(e){t.props.eResultCallback&&t.props.eResultCallback(e.eResult),22===e.eResult?t.props.closeModal&&t.props.closeModal():e.strMessageToken?t.DisplayError(Object(p.d)(e.strMessageToken)):t.props.closeModal&&t.props.closeModal()}));else{var n=new FormData;n.append("sessionid",T.a.SESSIONID),n.append("persona",e);var o=r.f.FriendStore.self,i=T.a.CHAT_BASE_URL+"profiles/"+o.steamid64+"/ajaxsetpersonaname/";k.a.post(i,n).then((function(e){var n=e.data;if(n.success)t.props.closeModal&&t.props.closeModal();else{var o=n.message.replace("<br />","");t.DisplayError(o)}})).catch((function(e){t.DisplayError(Object(p.d)("#Friends_NameChangeFailed_Info"))}))}},t.prototype.render=function(){var e=r.f.FriendStore.self,t="friend changePersonaName";e.persona.is_ingame?t+=" ingame":e.persona.is_online&&(t+=" online");var n=!1;return this.state.strError&&(n=!0),c.createElement(s.a,{className:"Dialog_ChangePersonaName",onEscKeypress:this.props.closeModal},c.createElement(u.h,{classNameContent:"ChangePersonaNameDialog",onSubmit:this.HandleSubmit},c.createElement(u.m,null,Object(p.d)("#ChangePersona_Title")),c.createElement(u.b,null,c.createElement(u.c,null,Object(p.d)("#ChangePersona_Description")),c.createElement(u.c,null,c.createElement("div",{className:t},c.createElement("img",{className:"avatarMedium",src:e.persona.avatar_url_full}),c.createElement("div",{className:"labelHolder"},n&&c.createElement("div",{className:"error"},this.state.strError),c.createElement("div",null,c.createElement("div",null,Object(p.d)("#ChangePersona_Change")),c.createElement("div",{className:"mediumName"},c.createElement(u.o,{placeholder:Object(p.d)("#ChangePersona_PlaceHolder"),className:"changePersonaInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}))))))),c.createElement(u.j,null,c.createElement(u.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleTextEntry",null),Object(o.c)([l.a],t.prototype,"HandleSubmit",null),t=Object(o.c)([a.a],t)}(c.Component),P=n("dpJ7"),F=n("hEDq"),x=n("lqmi"),V=n("uw3m");var U=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.ComputeStateFromNotificationSettings(n.props.player.notification_settings),n}return Object(o.d)(t,e),t.prototype.ConvertENotificationSettingToBoolean=function(e){return 1==e},t.prototype.ComputeStateFromNotificationSettings=function(e){var t,n=!1,o=!1;for(var i in e){if(0!=e[i]){o=!0;break}}return o?((t=F.e()).bNotifications_ShowIngame=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowInGame),t.bNotifications_ShowMessage=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowMessage),t.bNotifications_ShowOnline=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowOnline),t.bSounds_PlayIngame=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayInGame),t.bSounds_PlayMessage=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayMessage),t.bSounds_PlayOnline=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayOnline)):(n=!0,t=r.f.SettingsStore.FriendsSettings),{settings:t,bUseDefaults:n}},t.prototype.ConvertBooleanToENotificationSetting=function(e){return e?1:2},t.prototype.FriendSettingsToNotificationSettings=function(e){var t=new w.d;return t.Notifications_SendMobile=this.props.player.notification_settings.Notifications_SendMobile,this.state.bUseDefaults||(t.Notifications_ShowInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowIngame),t.Notifications_ShowMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowMessage),t.Notifications_ShowOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowOnline),t.Sounds_PlayInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayIngame),t.Sounds_PlayMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayMessage),t.Sounds_PlayOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayOnline)),t},t.prototype.HandleSubmit=function(){var e=this;r.f.FriendStore.SetPlayerNotificationSettings(this.props.player,this.FriendSettingsToNotificationSettings(this.state.settings)).then((function(t){1==t&&e.props.closeModal&&e.props.closeModal()}))},t.prototype.componentDidUpdate=function(e){e.player!==this.props.player&&this.setState(this.ComputeStateFromNotificationSettings(this.props.player.notification_settings))},t.prototype.OnSettingToggled=function(e,t){var n;this.setState({settings:Object(o.a)(Object(o.a)({},this.state.settings),(n={},n[e]=t,n))})},t.prototype.FriendsSettingsCheckbox=function(e){var t=this;return c.createElement(u.e,{key:e.strName,disabled:this.state.bUseDefaults,onChange:function(n){t.OnSettingToggled(e.strName,n)},checked:!!this.state.settings[e.strName]})},t.prototype.NotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return c.createElement("div",null,c.createElement("div",{className:"FriendsSettingsNotificationRow"},c.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},c.createElement(t,{strName:e.strNameShow})),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},c.createElement(t,{strName:e.strNameSound}))))},t.prototype.OnDefaultToggled=function(e){e?this.setState({settings:r.f.SettingsStore.FriendsSettings,bUseDefaults:!0}):this.setState({bUseDefaults:!1})},t.prototype.render=function(){var e=this,t=this.NotificationRow,n=this.state.bUseDefaults,o="friend editFriendNotifications";return o+=Object(x.d)(this.props.player.persona),c.createElement(s.a,{className:"Dialog_FriendNotifications",onEscKeypress:this.props.closeModal},c.createElement(u.h,{classNameContent:"FriendNotificationsDialog",onSubmit:this.HandleSubmit},c.createElement(u.m,null,Object(p.d)("#Friend_Menu_NotificationsTitle")),c.createElement(u.b,{className:n?"useDefaults":""},c.createElement(u.c,null,Object(p.d)("#FriendNotifications_Instructions",this.props.player.display_name)),c.createElement(u.c,null,c.createElement("div",{className:o},c.createElement(V.c,{persona:this.props.player.persona,size:"Large"}),c.createElement("div",{className:"labelHolder"},this.props.player.primary_display_name,!this.props.player.is_display_name_nickname&&this.props.player.has_secondary_display_name&&c.createElement("span",{className:"playerNickname"}," (",this.props.player.secondary_display_name,")"),this.props.player.is_display_name_nickname&&c.createElement("span",{className:"playerNicknameBracket",title:Object(p.d)("#isNickname")},"*")))),c.createElement(u.e,{classname:"useDefaultsCheckBox",label:Object(p.d)("#FriendNotifications_UseDefaults"),onChange:function(t){e.OnDefaultToggled(t)},checked:this.state.bUseDefaults}),c.createElement("div",{className:"SettingsGroup"},c.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},c.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(p.d)("#FriendSettings_Notification_Table_Label")),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(p.d)("#FriendSettings_Notification_Table_Show")),c.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(p.d)("#FriendSettings_Notification_Table_Play"))),c.createElement(t,{strLabel:Object(p.d)("#FriendSettings_FriendNotification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),c.createElement(t,{strLabel:Object(p.d)("#FriendSettings_FriendNotification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),c.createElement(t,{strLabel:Object(p.d)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}))),c.createElement(u.j,null,c.createElement(u.s,{onCancel:this.props.closeModal}))))},Object(o.c)([l.a],t.prototype,"HandleSubmit",null),Object(o.c)([l.a],t.prototype,"OnSettingToggled",null),Object(o.c)([l.a],t.prototype,"FriendsSettingsCheckbox",null),Object(o.c)([l.a],t.prototype,"NotificationRow",null),Object(o.c)([l.a],t.prototype,"OnDefaultToggled",null),t=Object(o.c)([a.a],t)}(c.Component),H=n("z9WT"),W=n("ewzr");function z(e,t,n,o){return Object(I.a)(c.createElement(Z,{browserContext:e,context:t,friend:n,ownerWindow:o.currentTarget.ownerDocument.defaultView}),o)}function Y(e,t,n,o){return c.createElement(Z,{browserContext:e,context:t,friend:n,ownerWindow:o})}var q=Object(a.a)((function(e){var t=e.friend,n=[],o=t.persona_name_history,r=t.persona_name_history_loaded;if(r&&o.length>0)for(var i=0,a=0,s=o;a<s.length;a++){var l=s[a];n.push(c.createElement("div",{className:"recentName",key:"name_history_"+i},l)),i++}else r?n.push(c.createElement("div",{className:"recentName",key:"name_history_none"},Object(p.d)("#Friend_Menu_RecentAliases_None"))):n.push(c.createElement("div",{className:"recentName",key:"name_history_loading"},Object(p.d)("#Friend_Menu_RecentAliases_Loading")));return c.createElement(c.Fragment,null,c.createElement(E.e,{label:Object(p.d)("#Friend_Menu_RecentAliases")},n))})),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnToggle=function(e){this.props.group.ToggleMemberRoleState(this.props.friend.accountid,e)},t.prototype.render=function(){var e=this,t=this.props.group.DefaultRoleID(),n=this.props.group.GetMemberRoleIDs(this.props.friend.accountid),o=this.props.group.BIsAccountIDOwner(this.props.friend.accountid),r=this.props.group.BCanEditRoles(),i=this.props.group.GetRoles().slice().sort((function(e,n){return e.role_id==t?1:n.role_id==t?-1:parseInt(e.role_id)-parseInt(n.role_id)})).map((function(o){var i=-1!=n.findIndex((function(e){return e==o.role_id}));if(!i&&!r)return null;var a=o.name,s=e.props.group.BCanIAssignRole(o.role_id);return o.role_id==t?a=Object(p.d)("#ChatRoomRole_Member"):a.startsWith("#ChatRoomRole_")&&(a=Object(p.d)(a)),c.createElement(X,{key:o.role_id,friend:e.props.friend,group:e.props.group,roleName:a,roleID:o.role_id,bHasRole:i,bEditable:s})})),a=r&&!o?Object(p.d)("#Friend_Menu_EditRoles"):Object(p.d)("#Friend_Menu_ViewRoles");return c.createElement(c.Fragment,null,c.createElement(E.e,{label:a},o?c.createElement(E.d,{className:"FriendMenuRoleCheckbox disabled",key:"role",onSelected:function(){},bInteractableItem:!0},c.createElement(L.l,null),Object(p.d)("#ChatRoomRole_Owner")):i))},Object(o.c)([l.a],t.prototype,"OnToggle",null),t=Object(o.c)([a.a],t)}(c.Component);function Q(e,t,n,o){var r=Object(w.c)(t);if(1!=t)if(24==t){var i=c.createElement(H.b,{style:{color:"white"},href:T.a.HELP_BASE_URL+"wizard/HelpWithLimitedAccount"},Object(p.d)("#Friend_InviteError_VisitSteamSupport"));Object(j.c)(e,Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)("#Button_OK"),Object(p.k)("#Friend_InviteError_LimitedUserLink",i))}else Object(j.c)(e,Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)(r,o));else Object(j.c)(e,Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)("#Friend_InviteError",o))}var Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bCanCreateRemotePlayInvite:!1},t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,r.f.RemotePlayStore.BCanCreateInviteForGame(r.f.FriendStore.self.persona.m_gameid)];case 1:return e=t.sent(),this.setState({bCanCreateRemotePlayInvite:e}),[2]}}))}))},t.prototype.ShowFriendProfile=function(e){var t=this.props.friend.GetCommunityProfileURL();Object(M.e)(e,t),e.stopPropagation()},t.prototype.InviteFriend=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,r.f.FriendStore.SendFriendInvite(this.props.friend)];case 1:return e=o.sent(),t=e.eResult,4==(n=e.eFriendRelationship)?Object(j.c)(this.props.ownerWindow,Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)("#Friend_InviteSent")):3==n?Object(j.c)(this.props.ownerWindow,Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)("#Friend_MutualInviteSent",this.props.friend.display_name)):Q(this.props.ownerWindow,t,0,this.props.friend.display_name),[2]}}))}))},t.prototype.AcceptIncomingInvite=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,r.f.FriendStore.SendFriendInvite(this.props.friend)];case 1:return e=n.sent(),t=e.eResult,3==e.eFriendRelationship?Object(j.c)(this.props.ownerWindow,Object(p.d)("#Friend_Menu_AddToFriendsList"),Object(p.d)("#Friend_MutualInviteSent",this.props.friend.display_name)):Q(this.props.ownerWindow,t,0,this.props.friend.display_name),[2]}}))}))},t.prototype.IgnoreIncomingInvite=function(){var e=this;r.f.FriendStore.RemoveFriend(this.props.friend).then((function(t){1==t?Object(j.c)(e.props.ownerWindow,Object(p.d)("#Friend_Menu_IgnoreIncomingInvite"),Object(p.d)("#Friend_IgnoreIncomingInvite_Success",e.props.friend.display_name)):Object(j.c)(e.props.ownerWindow,Object(p.d)("#Friend_Menu_IgnoreIncomingInvite"),Object(p.d)("#Friend_IgnoreIncomingInvite_Error",e.props.friend.display_name))}))},t.prototype.RemoveFriend=function(){var e=this,t=4==this.props.friend.efriendrelationship,n=Object(p.d)(t?"#Friend_Menu_CancelInvitation":"#Friend_Menu_RemoveFromFriendsList"),o=Object(p.d)(t?"#Friend_CancelInvitation_Confirm":"#Friend_RemoveFromFriendsList_Confirm",this.props.friend.display_name),i=Object(p.d)(t?"#Button_Confirm":"#Friend_Menu_RemoveFromFriendsList"),a=Object(p.d)(t?"#Friend_CancelInvitation_Error":"#Friend_RemoveFromFriendsList_Error");Object(j.d)(this.props.ownerWindow,n,o,i,Object(p.d)("#Button_Cancel"),!0).then((function(){r.f.FriendStore.RemoveFriend(e.props.friend).then((function(t){3!=t&&6!=t||Object(j.c)(e.props.ownerWindow,n,a)}))})).catch((function(){}))},t.prototype.BlockFriend=function(){var e=this;Object(j.d)(this.props.ownerWindow,Object(p.d)("#Friend_Menu_BlockAllCommunication"),Object(p.d)("#Friend_Block_Confirm",this.props.friend.display_name),Object(p.d)("#Friend_Menu_BlockAllCommunication")).then((function(){r.f.FriendStore.BlockPlayer(e.props.friend)})).catch((function(){}))},t.prototype.UnblockFriend=function(){var e=this;Object(j.d)(this.props.ownerWindow,Object(p.d)("#Friend_Menu_UnblockAllCommunication"),Object(p.d)("#Friend_Unblock_Confirm",this.props.friend.display_name),Object(p.d)("#Friend_Menu_UnblockAllCommunication")).then((function(){r.f.FriendStore.BlockPlayer(e.props.friend,!0)})).catch((function(){}))},t.prototype.InviteToGame=function(e,t){r.f.FriendStore.InviteToGame(this.props.friend,e,t)},t.prototype.InviteToLobby=function(e,t){r.f.FriendStore.InviteToLobby(this.props.friend,e,t)},t.prototype.InviteToWatch=function(){r.f.FriendStore.InviteToWatch(this.props.friend)},t.prototype.InviteToRemotePlay=function(){var e=this.props.friend;r.f.FriendStore.self!==e&&r.f.RemotePlayStore.CreateInviteAndSession(e.accountid,r.f.FriendStore.self.persona.m_gameid,this.props.browserContext)},t.prototype.CancelRemotePlay=function(){var e=this.props.friend;r.f.RemotePlayStore.CancelInviteAndSession(e.accountid)},t.prototype.CancelAllRemotePlay=function(){r.f.RemotePlayStore.CancelAllInvitesAndSessions()},t.prototype.InviteToVoice=function(e,t){Object(P.k)({invitee:this.props.friend,invitedto:e},null,this.props.ownerWindow)},t.prototype.render=function(){var e,t=this,n=this.props,o=n.context||{},a=[],l=[],u=n.friend,d=r.f.FriendStore.FavoritesStore,h=r.f.FriendStore.self==u,f="favorites"==o.chatContext,_=o.group;!_&&o.chat instanceof D.a&&(_=o.chat.GetGroup());var g=!1,b=u.is_friend,y=2==u.efriendrelationship,C=4==u.efriendrelationship,O=y||4==u.efriendrelationship,I=r.f.FriendStore.self.persona.m_unGamePlayedAppID;u.persona.m_unGamePlayedAppID;o.chat&&(o.chat instanceof A.a?(e=o.chat).BVoiceActive()&&(g=!0):o.chat instanceof D.a&&o.chat.BVoiceActive()&&(g=!0)),b||y||h||a.push(c.createElement("div",{className:"contextMenuLabel contextMenuNotAFriend",key:"header"},Object(p.d)("#Friend_Menu_NotAFriendLabel"))),g&&!h&&a.push(c.createElement(J,{friend:this.props.friend})),o.tab&&a.push(c.createElement(E.d,{key:"closetab",onSelected:function(){r.f.UIStore.CloseTab(n.browserContext,o.tab)}},Object(p.d)("#Chat_CloseTabAction"))),e||o.tab||y||C||h||u.is_blocked||a.push(c.createElement(E.d,{key:"chat",className:b?"":"SendMessageContextNotFriends",onSelected:function(){n.friend.OpenChatDialog(n.browserContext)}},Object(p.d)("#Friend_Menu_SendMessage")));var w=u.persona.is_online&&!e&&!y&&!C&&!h&&!u.is_blocked,T=r.f.ChatStore.GetActiveVoiceChat();if(T&&T instanceof A.a&&T.accountid_partner==u.accountid?a.push(c.createElement(E.d,{key:"voicechat",onSelected:function(){T.ToggleVoiceChat()}},Object(p.d)("#Friend_Menu_StopVoiceChat"))):w&&(T instanceof D.a?a.push(c.createElement(E.d,{key:"voicechat",className:"contextVoiceInvite",onSelected:function(){t.InviteToVoice(T,o)}},c.createElement(L.nb,null),Object(p.d)("#Chat_Actions_InviteFriend_VoiceChat"))):a.push(c.createElement(E.d,{key:"voicechat",onSelected:function(){r.f.UIStore.ShowFriendChatDialogAndStartVoice(n.browserContext,u.accountid)}},Object(p.d)("#Friend_Menu_StartVoiceChat")))),a.push(c.createElement(E.d,{key:"viewprofile",onSelected:this.ShowFriendProfile},Object(p.d)("#Friend_Menu_ViewProfile"))),_&&a.push(c.createElement(te,{key:"moderationoptions",friend:u,bIsSelf:h,group:_,ownerWindow:n.ownerWindow})),!h){if(b){if(l.push(c.createElement(E.d,{key:"setnickname",onSelected:function(){m(n.browserContext,n.friend,n.ownerWindow)}},Object(p.d)(n.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),d.BIsFavorited({friend:u}))(f?a:l).push(c.createElement(E.d,{key:"quickaccess",onSelected:ie.bind(null,u)},Object(p.d)("#Friend_Menu_RemoveFromQuickAccess")));else l.push(c.createElement(E.d,{key:"quickaccess",onSelected:re.bind(null,u)},Object(p.d)("#Friend_Menu_AddToQuickAccess")));l.push(c.createElement(E.d,{key:"managecategories",onSelected:function(){!function(e,t,n){0==r.f.FriendStore.FriendGroupStore.user_groups.length?v(e,t,n):Object(s.c)(c.createElement(S,{browserContext:e,friend:n}),t,"AssignFriendCategoryDialog",{strTitle:Object(p.d)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:580},Object(i.g)(t))}(n.browserContext,n.ownerWindow,n.friend)}},Object(p.d)("#FriendGroup_Menu_Categorize"))),l.push(c.createElement(E.d,{key:"notifications",onSelected:function(){return n.browserContext,e=n.friend,t=n.ownerWindow,void Object(s.c)(c.createElement(U,{player:e}),t,"FriendNotificationsDialog",{strTitle:Object(p.d)("#Friend_Menu_Notifications"),popupWidth:640,popupHeight:520},Object(i.g)(t));var e,t}},Object(p.d)("#Friend_Menu_Notifications"))),f||l.push(c.createElement(E.d,{key:"removefriend",onSelected:this.RemoveFriend},Object(p.d)("#Friend_Menu_RemoveFromFriendsList"))),l.push(c.createElement(q,{key:"aliases",friend:u}));var M=[],j=void 0;if(0==I)j=c.createElement("div",{className:"contextMenuGameItem"},c.createElement("div",{className:"contextMenuGameName"},r.f.FriendStore.self.current_game_name));else{var G=r.f.AppInfoStore.GetAppInfo(I);j=c.createElement("div",{className:"contextMenuGameItem"},c.createElement("div",{className:"contextMenuGameIcon"},c.createElement("img",{className:"GameIcon",src:G.icon_url})),c.createElement("div",{className:"contextMenuGameName"},G.name))}if(r.f.FriendStore.self.persona.is_ingame&&r.f.BroadcastStore.is_broadcast_capable&&M.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"invitetowatch",onSelected:function(){t.InviteToWatch()}},Object(p.d)("#Friend_Menu_InviteToWatch"))),0!=I&&"0"!=r.f.FriendStore.self.persona.m_game_lobby_id)M.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"lobbyinvite",onSelected:function(){t.InviteToLobby(I,r.f.FriendStore.self.persona.m_game_lobby_id)}},Object(p.d)("#Friend_Menu_InviteToLobby")));else if(r.f.FriendStore.self.persona.connect_string){var N=r.f.FriendStore.self.persona.connect_string;M.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"gameinvite",onSelected:function(){t.InviteToGame(I,N)}},Object(p.d)("#Friend_Menu_InviteToGame")))}if(r.f.RemotePlayStore.BEnabled()){var R=this.props.friend;r.f.RemotePlayStore.HasInviteAndSession(R.accountid)?M.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"cancelremoteplay",onSelected:function(){t.CancelRemotePlay()}},Object(p.d)("#Friend_Menu_CancelRemotePlay"))):r.f.RemotePlayStore.HasInviteAndSessionForGameIDOtherThan(String(I))?M.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"cancelallremoteplay",onSelected:function(){t.CancelAllRemotePlay()}},Object(p.d)("#Friend_Menu_CancelAllRemotePlay"))):this.state.bCanCreateRemotePlayInvite&&M.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"invitetoremoteplay",onSelected:function(){t.InviteToRemotePlay()}},Object(p.d)("#Friend_Menu_InviteToRemotePlay")))}M.length>0&&a.push(c.createElement(c.Fragment,{key:"logo"},c.createElement(E.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},j),c.createElement("div",{className:"contextMenuSectionContent"},M))),a.push(c.createElement($,{key:"trading",friend:u}))}else y?(a.push(c.createElement(E.d,{key:"acceptincominginvite",onSelected:this.AcceptIncomingInvite},Object(p.d)("#Friend_Menu_AcceptIncomingInvite"))),a.push(c.createElement(E.d,{key:"ignoreincominginvite",onSelected:this.IgnoreIncomingInvite},Object(p.d)("#Friend_Menu_IgnoreIncomingInvite"))),a.push(c.createElement(q,{key:"aliases",friend:u}))):C?a.push(c.createElement(E.d,{key:"remove",onSelected:this.RemoveFriend},Object(p.d)("#Friend_Menu_CancelInvitation"))):a.push(c.createElement(E.d,{key:"invite",onSelected:this.InviteFriend},Object(p.d)("#Friend_Menu_AddToFriendsList")));O&&a.push(c.createElement(E.d,{key:"setnickname",onSelected:function(){m(n.browserContext,n.friend,n.ownerWindow)}},Object(p.d)(n.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),f&&!u.is_blocked||l.push(c.createElement(E.d,{key:"block",onSelected:u.is_blocked?this.UnblockFriend:this.BlockFriend},Object(p.d)(u.is_blocked?"#Friend_Menu_UnblockAllCommunication":"#Friend_Menu_BlockAllCommunication")))}if(!a)return null;var k=void 0;return this.props.context&&this.props.context.group&&(k=this.props.context.group.GetMemberPartyBeacon(this.props.friend.accountid)),c.createElement(E.c,{className:"friendsContextMenu"},a,1==l.length&&l,l.length>1&&c.createElement(E.e,{label:Object(p.d)("#Friend_Menu_Manage")},l),!!u.persona.m_broadcastAccountId&&!h&&c.createElement(oe,{friend:u,ownerWindow:n.ownerWindow,browserContext:n.browserContext}),!!u.persona.m_unGamePlayedAppID&&!h&&c.createElement(ne,{unAppID:u.persona.m_unGamePlayedAppID,strGameName:u.current_game_name,ulGameID:u.persona.m_gameid,friend:u,partyBeacon:k}))},Object(o.c)([l.a],t.prototype,"ShowFriendProfile",null),Object(o.c)([l.a],t.prototype,"InviteFriend",null),Object(o.c)([l.a],t.prototype,"AcceptIncomingInvite",null),Object(o.c)([l.a],t.prototype,"IgnoreIncomingInvite",null),Object(o.c)([l.a],t.prototype,"RemoveFriend",null),Object(o.c)([l.a],t.prototype,"BlockFriend",null),Object(o.c)([l.a],t.prototype,"UnblockFriend",null),Object(o.c)([l.a],t.prototype,"InviteToGame",null),Object(o.c)([l.a],t.prototype,"InviteToLobby",null),Object(o.c)([l.a],t.prototype,"InviteToWatch",null),Object(o.c)([l.a],t.prototype,"InviteToRemotePlay",null),Object(o.c)([l.a],t.prototype,"CancelRemotePlay",null),Object(o.c)([l.a],t.prototype,"CancelAllRemotePlay",null),Object(o.c)([l.a],t.prototype,"InviteToVoice",null),t}(c.PureComponent),J=function(e){function t(t){var n=e.call(this,t)||this,o=r.f.VoiceStore.ConvertGainValueToSliderValue(r.f.VoiceStore.GetPerUserGainLevel(n.props.friend.accountid),G.a.k_MaxPerUserGainMultiplier);return n.state={volumeNumber:o},n}return Object(o.d)(t,e),t.prototype.OnFriendVolumeChanged=function(e){r.f.VoiceStore.SetPerUserGainLevel(this.props.friend.accountid,r.f.VoiceStore.ConvertSliderToGainValue(e,G.a.k_MaxPerUserGainMultiplier)),this.setState({volumeNumber:e})},t.prototype.OnMutingClick=function(e){var t=r.f.VoiceStore.GetPerUserMuting(this.props.friend.accountid);r.f.VoiceStore.SetPerUserMuting(this.props.friend.accountid,!t),this.forceUpdate()},t.prototype.OnInlineVolumeClick=function(e){this.forceUpdate()},t.prototype.render=function(){var e=this.state.volumeNumber,t="VolumeIcon",n=r.f.VoiceStore.GetPerUserMuting(this.props.friend.accountid);return e>65?t+=" HighestVolume":e>45?t+=" HighVolume":e<46&&e>24?t+=" MedVolume":e<25&&(t+=" LowVolume"),c.createElement(E.d,{key:"volume",onSelected:function(){},bInteractableItem:!0},c.createElement("div",{className:"InlineVolume"+(n?" Muted":""),onClick:this.OnInlineVolumeClick},c.createElement("button",{className:t,onClick:this.OnMutingClick},c.createElement(L.ob,null)),c.createElement(u.A,{min:0,max:100,label:"",value:e,onChange:this.OnFriendVolumeChanged}),c.createElement("div",{className:"volumePercentage"},2*e,"%")))},Object(o.c)([l.a],t.prototype,"OnFriendVolumeChanged",null),Object(o.c)([l.a],t.prototype,"OnMutingClick",null),Object(o.c)([l.a],t.prototype,"OnInlineVolumeClick",null),t=Object(o.c)([a.a],t)}(c.Component),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnChange=function(e){this.props.group.SetMemberRoleState(this.props.friend.accountid,this.props.roleID,e)},t.prototype.render=function(){return c.createElement(E.d,{className:"FriendMenuRoleCheckbox"+(this.props.bEditable?"":" disabled"),key:"role",onSelected:function(){},bInteractableItem:!0},c.createElement(u.e,{label:this.props.roleName,checked:this.props.bHasRole,onChange:this.OnChange,disabled:!this.props.bEditable}))},Object(o.c)([l.a],t.prototype,"OnChange",null),t=Object(o.c)([a.a],t)}(c.Component),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.SendTradeOffer=function(e){var t="NewTradeOffer"+this.props.friend.accountid;Object(_.s)(e).open(r.f.EconomyStore.GetDefaultTradeOfferURLForFriend(this.props.friend.accountid),t,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.render=function(){var e=this.props.friend;return c.createElement(E.e,{label:Object(p.d)("#FriendMenu_Trading")},c.createElement(ee,{friend:e}),c.createElement(E.d,{onSelected:this.SendTradeOffer},Object(p.d)("#FriendMenu_SendTradeOffer")))},Object(o.c)([l.a],t.prototype,"SendTradeOffer",null),t}(c.Component);function ee(e){return c.createElement(E.d,{onSelected:function(t){Object(M.e)(t,e.friend.GetCommunityProfileURL()+"inventory/")}},Object(p.d)("#FriendMenu_ViewInventory"))}var te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.BanFriend=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,Object(j.a)(this.props.ownerWindow,Object(p.d)("#Friend_Ban"),Object(p.d)("#Friend_Ban_Confirm",this.props.friend.display_name),Object(p.d)("#Friend_Ban_Button"),Object(p.d)("#Button_Cancel"),!0)];case 1:return e.sent()&&this.props.group.SetUserBanState(this.props.friend.accountid,!0),[2]}}))}))},t.prototype.OnKickFriend=function(){var e=this,t=this.props.group,n=pe,o=this.props.ownerWindow;new Promise((function(t,r){var a=Object(j.b)(o,Object(p.d)("#Friend_Kick",e.props.friend.display_name));Object(s.c)(c.createElement(ue,{OnOK:t,OnCancel:r,OnSet:function(e){n=e}}),o,"alertdialog",a,Object(i.g)(o))})).then((function(){return t.KickUser(e.props.friend.accountid,Math.floor(Date.now()/1e3+n))})).catch((function(){}))},t.prototype.render=function(){var e=[],t=this.props.friend,n=this.props.group;return n.BHasMember(t.accountid)?(!this.props.bIsSelf&&n.BCanKick()&&e.push(c.createElement(E.d,{disabled:!n.BCanKickMember(t.accountid),key:"kick",onSelected:this.OnKickFriend},Object(p.d)("#Friend_Menu_KickFromChatRoom"))),!this.props.bIsSelf&&n.BCanBan()&&e.push(c.createElement(E.d,{disabled:!n.BCanBanMember(t.accountid),key:"ban",onSelected:this.BanFriend},Object(p.d)("#Friend_Menu_Ban"))),n&&e.push(c.createElement(K,{key:"editroles",friend:t,group:n,bEditable:n.BCanEditRoles()}))):e.push(c.createElement(E.d,{disabled:!0,key:"notmember",onSelected:null},Object(p.d)("#Friend_Menu_HasLeftChat"))),e},Object(o.c)([l.a],t.prototype,"BanFriend",null),Object(o.c)([l.a],t.prototype,"OnKickFriend",null),t}(c.Component),ne=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bShowViewGameInfo:void 0,bIsSubscribedToApp:void 0},N.b.BIsSubscribedApp(n.props.unAppID).then((function(e){n.setState({bShowViewGameInfo:N.b.BClientSupportsMessage("ViewGameInfoForSteamID"),bIsSubscribedToApp:e})})),n}return Object(o.d)(t,e),t.prototype.ShowStorePage=function(e){var t=Object(W.a)(this.props.unAppID,"friendcontextmenu");Object(M.e)(e,t),e.stopPropagation()},t.prototype.ShowCommunityHub=function(e){var t=T.a.COMMUNITY_BASE_URL+"app/"+this.props.unAppID;Object(M.e)(e,t),e.stopPropagation()},t.prototype.LaunchGame=function(e){var t="steam://rungameid/"+(this.props.ulGameID||this.props.unAppID);Object(M.e)(e,t),e.stopPropagation()},t.prototype.WatchGame=function(e){r.f.UIStore.SetFriendBroadcastVisible(this.props.friend.steamid64,!0),this.props.friend.OpenChatDialog(Object(i.e)(this,e))},t.prototype.JoinGame=function(e){var t=this,n=this.props.friend;n.persona.is_in_valid_lobby?this.JoinLobby(n,e):N.b.OpenJoinGameDialog(n.steamid64).then((function(o){o.success||t.JoinLobby(n,e)})).catch((function(){t.JoinLobby(n,e)}))},t.prototype.ViewGameInfo=function(e){var t=this.props.friend;N.b.ViewGameInfoForSteamID(t.steamid64)},t.prototype.JoinLobby=function(e,t){if(e.persona.is_in_valid_lobby){var n="steam://joinlobby/"+e.persona.m_gameid+"/"+e.persona.m_game_lobby_id+"/"+e.steamid64;Object(M.e)(t,n)}else this.LaunchGame(t)},t.prototype.ShowInSteam=function(e){var t="steam://store/"+this.props.unAppID;Object(M.e)(e,t),e.stopPropagation()},t.prototype.JoinPartyBeacon=function(e){var t="steam://joinparty/"+this.props.unAppID+"/"+this.props.partyBeacon.beacon_id;Object(M.e)(e,t),e.stopPropagation()},t.prototype.render=function(){if(!this.props.unAppID)return null;var e=[],t=void 0,n=this.props.friend,o=r.f.AppInfoStore.GetAppInfo(this.props.unAppID);if(!o.is_valid)return null;if(o.is_initialized)if(this.props.bShowLargeHeader)t=c.createElement("div",{className:"contextMenuGameHeader"},c.createElement("img",{className:"GameHeader",src:o.logo_url}));else{var i=c.createElement("span",{className:"contextMenuGameName"},Object(p.d)("#Friend_Menu_ViewGameStorePageGameName",this.props.strGameName||o.name));t=c.createElement("div",{className:"contextMenuGameItem"},c.createElement("div",{className:"contextMenuGameIcon"},c.createElement("img",{className:"GameIcon",src:o.icon_url})),i)}return void 0===this.state.bIsSubscribedToApp?e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"showinsteam",onSelected:this.ShowInSteam},c.createElement(L.Q,null),Object(p.d)("#Friend_Menu_ShowInSteam"))):this.state.bIsSubscribedToApp&&(this.props.partyBeacon?e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton contextMenuPartyBeacon",key:"joinparty",onSelected:this.JoinPartyBeacon},c.createElement(L.Q,null),Object(p.d)("#Friend_Menu_JoinFriendPartyBeacon"))):n&&(n.persona.is_in_joinable_game||n.persona.is_in_valid_lobby)&&e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"joingame",onSelected:this.JoinGame},c.createElement(L.Q,null),Object(p.d)("#Friend_Menu_JoinFriendGame"))),e.push(c.createElement(E.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"launchgame",onSelected:this.LaunchGame},c.createElement(L.Q,null),Object(p.d)("#Friend_Menu_LaunchFriendGame")))),n&&e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"watchgame",onSelected:this.WatchGame},Object(p.d)("#Friend_Menu_WatchFriendGame"))),n&&this.state.bShowViewGameInfo&&e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"viewgameinfo",onSelected:this.ViewGameInfo},Object(p.d)("#Friend_Menu_ViewGameInfo"))),e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"viewstorepage",onSelected:this.ShowStorePage},Object(p.d)("#Friend_Menu_ViewGameStorePage"))),e.push(c.createElement(E.d,{className:"contextMenuGameOptions",key:"viewcommunityhub",onSelected:this.ShowCommunityHub},Object(p.d)("#Friend_Menu_ViewCommunityHub"))),c.createElement(c.Fragment,null,c.createElement(E.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},t),c.createElement("div",{className:"contextMenuSectionContent"},e))},Object(o.c)([l.a],t.prototype,"ShowStorePage",null),Object(o.c)([l.a],t.prototype,"ShowCommunityHub",null),Object(o.c)([l.a],t.prototype,"LaunchGame",null),Object(o.c)([l.a],t.prototype,"WatchGame",null),Object(o.c)([l.a],t.prototype,"JoinGame",null),Object(o.c)([l.a],t.prototype,"ViewGameInfo",null),Object(o.c)([l.a],t.prototype,"ShowInSteam",null),Object(o.c)([l.a],t.prototype,"JoinPartyBeacon",null),t=Object(o.c)([a.a],t)}(c.Component),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.WatchStream=function(){var e=this.props.browserContext,t=this.props.friend,n=t.persona.m_broadcastAccountId;r.f.UIStore.ShowOrActivateBroadcast(e,n,!0).ShowWatchPromptDialog(t)},t.prototype.render=function(){var e=this.props.friend;return c.createElement(c.Fragment,null,c.createElement(E.d,{className:"contextMenuBroadcast contextMenuUnselectable",onSelected:null},c.createElement("div",{className:"contextMenuBroadcastTitle"},Object(p.d)("#Broadcast_Watching")),c.createElement("div",{className:"contextMenuBroadcastSubtitle"},e.GetBroadcastDescription())),c.createElement("div",{className:"contextMenuSectionContent"},c.createElement(E.d,{className:"contextMenuGameOptions",onSelected:this.WatchStream},Object(p.d)("#Broadcast_WatchStream"))))},Object(o.c)([l.a],t.prototype,"WatchStream",null),t=Object(o.c)([a.a],t)}(c.Component);function re(e){r.f.FriendStore.FavoritesStore.AddToFavorites({friend:e})}function ie(e){r.f.FriendStore.FavoritesStore.RemoveFromFavorites({friend:e})}function ae(e,t,n){return Object(I.a)(c.createElement(se,{browserContext:e,group:t,ownerWindow:n.currentTarget.ownerDocument.defaultView}),n)}function se(e){var t=[];return e.group&&e.group.modifiable&&(t.push(c.createElement(E.d,{key:"managegroup",onSelected:function(){var t,n,o;t=e.browserContext,n=e.group,o=e.ownerWindow,Object(s.c)(c.createElement(y,{browserContext:t,group:n,rgPreSelectedFriends:n.member_accountid_list}),o,"CreateFriendCategoryDialog",{strTitle:Object(p.d)("#FriendGroup_Menu_Manage"),popupWidth:664,popupHeight:700},Object(i.g)(o))}},Object(p.d)("#FriendGroup_Menu_Manage"))),t.push(c.createElement(E.d,{key:"removegroup",onSelected:function(){r.f.FriendStore.FriendGroupStore.RemoveGroup(e.group)}},Object(p.d)("#FriendGroup_Menu_Remove")))),c.createElement(E.c,{className:"friendsContextMenu"},t,c.createElement(E.d,{key:"creategroup",onSelected:function(){v(e.browserContext,e.ownerWindow)}},Object(p.d)("#FriendGroup_Menu_CreateGroup")))}function ce(e,t,n){return Object(I.a)(c.createElement(le,{browserContext:e,ownerWindow:t.currentTarget.ownerDocument.defaultView,setPersonaNameEresultCallback:n}),t)}var le=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.SetUserOnline=function(){r.f.FriendStore.SetUserPersonaState(1)},t.prototype.SetUserInvisible=function(){r.f.FriendStore.SetUserPersonaState(7)},t.prototype.SetUserAway=function(){r.f.FriendStore.SetUserPersonaState(3)},t.prototype.SetUserOffline=function(){r.f.SignOutOfFriends(this.props.browserContext)},t.prototype.ToggleUserDND=function(){r.f.FriendStore.SetUserDoNotDisturb(!r.f.FriendStore.GetUserDoNotDisturb())},t.prototype.ShowUserProfile=function(e){var t=r.f.FriendStore.self.GetCommunityProfileURL();Object(M.e)(e,t),e.stopPropagation()},t.prototype.EditProfile=function(e){var t=r.f.FriendStore.self.GetCommunityProfileURL()+"edit";Object(M.e)(e,t),e.stopPropagation()},t.prototype.EditName=function(e){var t,n;this.props.browserContext,t=this.props.ownerWindow,n=this.props.setPersonaNameEresultCallback,Object(s.c)(c.createElement(B,{eResultCallback:n}),t,"ChangePersonaDialog",{strTitle:Object(p.d)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400},Object(i.g)(t))},t.prototype.render=function(){var e=[],t=[],n=1==r.f.FriendStore.self.persona.m_ePersonaState;e.push(c.createElement(E.b,{key:"state_online",bChecked:n,onSelected:this.SetUserOnline},Object(p.d)("#PersonaStateOnline")));var o=3==r.f.FriendStore.self.persona.m_ePersonaState;e.push(c.createElement(E.b,{key:"state_away",bChecked:o,onSelected:this.SetUserAway},Object(p.d)("#PersonaStateAway")));var i=7==r.f.FriendStore.self.persona.m_ePersonaState;if(e.push(c.createElement(E.b,{key:"state_invisible",className:"personaContextMenuItem",bChecked:i,onSelected:this.SetUserInvisible},Object(p.d)("#PersonaStateInvisible"),c.createElement("div",{className:"persona_menu_descriptor"},Object(p.d)("#PersonaStateInvisibleDescriptor")))),T.a.IN_CLIENT&&r.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var a=0==r.f.FriendStore.self.persona.m_ePersonaState;e.push(c.createElement(E.b,{key:"state_offline",className:"personaContextMenuItem",bChecked:a,onSelected:this.SetUserOffline},Object(p.d)("#PersonaStateOffline"),c.createElement("div",{className:"persona_menu_descriptor"},Object(p.d)("#PersonaStateOfflineDescriptor"))))}if(r.f.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var s=r.f.FriendStore.GetUserDoNotDisturb();t.push(c.createElement(E.b,{key:"do_not_disturb",className:"personaContextMenuItem",bChecked:!1,onSelected:this.ToggleUserDND},c.createElement(u.e,{key:"dnd_checkbox",classname:"DNDCheckBox",checked:s,label:Object(p.d)("#User_ToggleDoNotDisturb")}),c.createElement("div",{className:"persona_menu_dnd_descriptor"},Object(p.d)("#PersonaStateDoNotDisturbDescriptor"))))}return t.push(c.createElement(E.d,{key:"editname",onSelected:this.EditName},Object(p.d)("#Friend_Menu_ChangeMyName"))),t?c.createElement(E.c,{className:"friendsContextMenu currentUserContextMenu"},c.createElement("div",{className:"contextMenuSectionContent"},e),t):null},Object(o.c)([l.a],t.prototype,"SetUserOnline",null),Object(o.c)([l.a],t.prototype,"SetUserInvisible",null),Object(o.c)([l.a],t.prototype,"SetUserAway",null),Object(o.c)([l.a],t.prototype,"SetUserOffline",null),Object(o.c)([l.a],t.prototype,"ToggleUserDND",null),Object(o.c)([l.a],t.prototype,"ShowUserProfile",null),Object(o.c)([l.a],t.prototype,"EditProfile",null),Object(o.c)([l.a],t.prototype,"EditName",null),t}(c.PureComponent),pe=3600,ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnCancel=function(){this.props.OnCancel(),this.props.closeModal()},t.prototype.OnOK=function(){this.props.OnOK(),this.props.closeModal()},t.prototype.OnDropDownChange=function(e,t){this.props.OnSet(e.data)},t.prototype.render=function(){var e=[{label:Object(p.d)("#Friend_Kick_Hour"),data:pe},{label:Object(p.d)("#Friend_Kick_Day"),data:86400},{label:Object(p.d)("#Friend_Kick_Week"),data:604800}];return c.createElement(s.a,{onEscKeypress:this.OnCancel},c.createElement(u.h,{classNameContent:"KickUserDialog",onSubmit:this.OnOK,bCenterVertically:!0},c.createElement(u.m,null," ",Object(p.d)("#Friend_Kick")," "),c.createElement(u.b,null,c.createElement(u.c,null,Object(p.d)("#Friend_Kick_How_Long")),c.createElement(u.i,{strDefaultLabel:Object(p.d)("#Friend_Kick_Hour"),rgOptions:e,onChange:this.OnDropDownChange,selectedOption:void 0})),c.createElement(u.j,null,c.createElement(u.s,{onCancel:this.OnCancel,strOKText:Object(p.d)("#Friend_Kick_Button"),strCancelText:Object(p.d)("#Button_Cancel")}))))},Object(o.c)([l.a],t.prototype,"OnCancel",null),Object(o.c)([l.a],t.prototype,"OnOK",null),Object(o.c)([l.a],t.prototype,"OnDropDownChange",null),t}(c.Component)},FuJV:function(e,t,n){},"G+3Z":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var o=n("i8i4"),r=n("/IDK"),i=function(){return function(e){this.instance=new s(e,!1)}}();function a(e){return new s(e.body,!0)}var s=function(){function e(e,t){void 0===t&&(t=!0),this.m_parent=e,this.m_window=e.ownerDocument.defaultView,this.m_bRemoveOnHide=t}return e.prototype.Show=function(e,t){var n=this;return this.CancelShowInterval(),t?new Promise((function(o,r){n.iIntervalShow=n.m_window.setTimeout((function(){var t=n.m_parent.ownerDocument;t.defaultView&&!t.defaultView.closed&&(n.InternalShow(e),o())}),t)})):(this.InternalShow(e),Promise.resolve())},e.prototype.InternalShow=function(e){this.m_container||(this.m_container=this.m_parent.ownerDocument.createElement("div"),this.m_parent.appendChild(this.m_container)),o.render(e,this.m_container)},e.prototype.Hide=function(e){var t=this;this.CancelShowInterval(),e?this.iIntervalShow=this.m_window.setTimeout((function(){t.InternalHide()}),e):this.InternalHide()},e.prototype.InternalHide=function(){this.m_container&&(o.unmountComponentAtNode(this.m_container),this.m_bRemoveOnHide&&(this.m_parent.removeChild(this.m_container),this.m_container=null))},e.prototype.CancelShowInterval=function(){void 0!==this.iIntervalShow&&(this.m_window.clearInterval(this.iIntervalShow),this.iIntervalShow=void 0)},e.prototype.BIsChildElement=function(e){return this.m_container&&r.e(this.m_container,e)},e}(),c=function(){function e(e){this.m_mapEmbeddedHovers=new WeakMap,this.m_strUniqueID=e}return e.prototype.ShowElementDelayed=function(e,t,n,o){var r=this.GetEmbeddedElement(e);return r.activeObject=o,r.instance.Show(n,t)},e.prototype.ShowElement=function(e,t,n){var o=this.GetEmbeddedElement(e);o.activeObject=n,o.instance.Show(t)},e.prototype.HideElement=function(e,t,n){var o=this.GetEmbeddedElement(e);o.activeObject==t&&(o.activeObject=void 0,o.instance.Hide(n))},e.prototype.GetEmbeddedElement=function(e){var t=this.m_mapEmbeddedHovers.get(e);return t||(t=new i(e.body),this.m_mapEmbeddedHovers.set(e,t)),t},e}()},G4oX:function(e,t,n){"use strict";function o(e){var t=e;return t&&Array.isArray(t)&&t.length>0&&"number"==typeof t[0]}n.d(t,"a",(function(){return o}))},GgMg:function(e,t,n){e.exports={strSmallCapsuleImgWidth:"230px",strSmallCapsuleImgHeight:"107px",GameHoverTransition:"gamehover_GameHoverTransition_22DX6",Opening:"gamehover_Opening_2l0FF",Open:"gamehover_Open_EKfmf",GameHoverCapsuleCtn:"gamehover_GameHoverCapsuleCtn_1jZFk",TrailerCtn:"gamehover_TrailerCtn_pwHs9",FullDivImage:"gamehover_FullDivImage_1Q5SP",Transparent:"gamehover_Transparent_2t6CX",CapsuleImageAnchorPoint:"gamehover_CapsuleImageAnchorPoint_2iPZ9",CapsuleImageCtn:"gamehover_CapsuleImageCtn_3uqPw",LowerContent:"gamehover_LowerContent_Okz2o",Price:"gamehover_Price_1sgLg",TextContent:"gamehover_TextContent_36RGH",GameTitle:"gamehover_GameTitle_1fbmt",Tags:"gamehover_Tags_3pSa1",Tag:"gamehover_Tag_1z1d4",ReviewScore:"gamehover_ReviewScore_1YBJE",ReviewScoreHeader:"gamehover_ReviewScoreHeader_2XLlI",ReviewScoreValue:"gamehover_ReviewScoreValue_1OiPg",ReviewScoreLow:"gamehover_ReviewScoreLow_CgC4s",ReviewScoreMixed:"gamehover_ReviewScoreMixed_Qub8N",ReviewScoreHigh:"gamehover_ReviewScoreHigh_Le33U",ReviewScorePercentage:"gamehover_ReviewScorePercentage_1dFxp",ReviewsAndRelease:"gamehover_ReviewsAndRelease_MDtOb",ReleaseDate:"gamehover_ReleaseDate_2tjFn",ReleasePrefix:"gamehover_ReleasePrefix_1neR4"}},GxRc:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("e2SU"),s=n("twdX"),c=n.n(s),l=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.AddSizeClass=function(e){"small"==this.props.size?e.push(c.a.throbber_small):"medium"==this.props.size?e.push(c.a.throbber_medium):"xlarge"==this.props.size?e.push(c.a.throbber_xlarge):"xxlarge"==this.props.size?e.push(c.a.throbber_xxlarge):e.push(c.a.throbber_large)},t.prototype.render=function(){var e=[c.a.LoadingWrapper,"SteamLogoThrobber"];this.AddSizeClass(e),void 0===this.props.string&&e.push(c.a.noString),this.props.className&&e.push(this.props.className),this.props.static&&e.push(c.a.Static);var t=i.a.createElement("div",{className:e.join(" ")},i.a.createElement("div",{className:c.a.Throbber},i.a.createElement(a.hb,{className:c.a.base}),i.a.createElement(a.hb,{className:c.a.blur})));return i.a.createElement("div",{className:"center"==this.props.position?c.a.throbber_center_wrapper:""},t,Boolean(this.props.string)&&i.a.createElement("div",{className:c.a.ThrobberText},this.props.string))},t}(i.a.PureComponent)},"H+H8":function(e,t,n){e.exports={HoverPosition:"hoverposition_HoverPosition_3gYNB",Ready:"hoverposition_Ready_3wImS",NoSpace:"hoverposition_NoSpace_2g_Ag",EnablePointerEvents:"hoverposition_EnablePointerEvents_JX-6A"}},HAz9:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return H}));var o=n("mrSG"),r=n("TS4p"),i=n.n(r),a=n("tkkQ"),s=n("8o0Y"),c=n("rsEv"),l=n("V7Fl"),p=n("geE1"),u=n("hReu"),m=n("LAqV"),d=n("Oefq"),h=n("YZlK"),f=n("gtB6"),_=n("EGkk"),g=n("FkUk"),b=n("okNM"),v=n("q1tI"),y=n("1w3K"),S=n("1VtQ"),C=n("adxy"),O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={nCalculatedHeightPx:void 0,bLeftSliderVisible:!1,bRightSliderVisible:!1},n}return Object(o.d)(t,e),t.prototype.OnRef=function(e){this.UnbindWindowHandlers(),e&&(this.m_elScroll=e,e.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.addEventListener("resize",this.CheckScrollPosition),this.CheckScrollPosition())},t.prototype.CheckScrollPosition=function(){if(!(!this.m_elScroll||this.m_animation&&this.m_animation.BIsActive())){for(var e=0,t=this.m_elScroll.firstElementChild;t;t=t.nextElementSibling)e=Math.max(e,t.getBoundingClientRect().height);e!=this.state.nCalculatedHeightPx&&this.setState({nCalculatedHeightPx:e}),this.UpdateSliderControlsForScrollOffset(this.m_elScroll.scrollLeft)}},t.prototype.UpdateSliderControlsForScrollOffset=function(e){var t=e>1,n=e+this.m_elScroll.getBoundingClientRect().width<this.m_elScroll.scrollWidth-1;t!=this.state.bLeftSliderVisible&&this.setState({bLeftSliderVisible:t}),n!=this.state.bRightSliderVisible&&this.setState({bRightSliderVisible:n})},t.prototype.AnimateScrollLeftTo=function(e){this.m_animation&&this.m_animation.Cancel(),this.m_animation=new C.a(this.m_elScroll,{scrollLeft:e},{msDuration:500,onComplete:this.CheckScrollPosition,timing:"cubic-in-out"}),this.m_animation.Start(),this.UpdateSliderControlsForScrollOffset(e)},t.prototype.OnSlideLeftClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.max(0,this.m_elScroll.scrollLeft-this.m_elScroll.getBoundingClientRect().width))},t.prototype.OnSlideRightClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.min(this.m_elScroll.scrollWidth-this.m_elScroll.getBoundingClientRect().width,this.m_elScroll.scrollLeft+this.m_elScroll.getBoundingClientRect().width))},t.prototype.OnWheel=function(e){e&&e.nativeEvent&&(e.nativeEvent.deltaY<0?this.OnSlideLeftClick():this.OnSlideRightClick())},t.prototype.GetScrollRef=function(){return this.m_elScroll},t.prototype.componentWillUnmount=function(){this.UnbindWindowHandlers(),this.m_animation&&this.m_animation.Cancel()},t.prototype.componentDidUpdate=function(){this.CheckScrollPosition()},t.prototype.UnbindWindowHandlers=function(){this.m_elScroll&&(this.m_elScroll.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.removeEventListener("resize",this.CheckScrollPosition),this.m_elScroll=void 0)},t.prototype.render=function(){var e="auto";return this.state.nCalculatedHeightPx&&(e=this.state.nCalculatedHeightPx+"px"),v.createElement("div",{onWheel:this.OnWheel,className:"HorizontalMiniSlider",style:{height:e}},v.createElement("div",{className:"HorizontalMiniSliderScroll "+this.props.className,onScroll:this.CheckScrollPosition,ref:this.OnRef},this.props.children))},Object(o.c)([S.a],t.prototype,"OnRef",null),Object(o.c)([S.a],t.prototype,"CheckScrollPosition",null),Object(o.c)([S.a],t.prototype,"OnSlideLeftClick",null),Object(o.c)([S.a],t.prototype,"OnSlideRightClick",null),Object(o.c)([S.a],t.prototype,"OnWheel",null),t}(v.Component),I=n("e2SU"),E=n("UqDm"),w=n("oh5H"),A=n("bbBM"),D=n("0wLp"),T=n("Hi0u"),M=n("ljid"),j=n("vJVb"),L=n("cLtS"),G=n("2vnA"),N=n("XCHq"),R=n("QHER"),k=function(e){function t(t){var n=e.call(this,t)||this;return n.m_mapTabs=new Map,n.m_rgOrderedRenderedTabs=[],n.m_bUsePopups=!1,n.m_nInitialTabDragOffset=-1,n.m_nTheaterTopHoverHeight=12,n.m_fnUnregisterDropComplete=void 0,n.state={tabDrag:void 0,iDragIndex:0,windowWidth:0,bTheaterModeTopHovered:!1},n}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(){this.FixScrollLocation()},t.prototype.componentDidMount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.addEventListener("resize",this.OnWindowResizeEvent),this.m_elchatTabDiv&&(this.setState({windowWidth:this.m_elchatTabDiv.clientWidth}),this.UpdateWindowIcon())},t.prototype.componentWillUnmount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.removeEventListener("resize",this.OnWindowResizeEvent)},t.prototype.OnWindowResizeEvent=function(){this.m_elchatTabDiv&&this.setState({windowWidth:this.m_elchatTabDiv.clientWidth})},t.prototype.SetDragTab=function(e){void 0!==e?this.m_fnUnregisterDropComplete=u.h.DragDropManager.RegisterForDropComplete(this.HandleDropComplete):this.m_fnUnregisterDropComplete&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0),this.setState({tabDrag:e}),this.m_nInitialTabDragOffset=-1},t.prototype.GetDragTab=function(){return this.state.tabDrag},t.prototype.HandleDropComplete=function(e){this.m_fnUnregisterDropComplete=void 0,this.setState({tabDrag:void 0})},t.prototype.FixScrollLocation=function(){if(this.m_elScroll&&this.props.activeTab){var e=this.m_mapTabs.get(this.props.activeTab.GetUniqueID());if(e){var t=e.GetChatTabRef();if(t){var n=t.offsetLeft,o=t.offsetLeft+t.offsetWidth,r=Math.ceil(this.m_elScroll.scrollLeft+this.m_elScroll.clientWidth);if(n<r&&o>r){var i=o-Math.floor(this.m_elScroll.clientWidth)+40;this.SetScrollLeft(i)}else if(n<this.m_elScroll.scrollLeft+40||o>r){0!=(i=n)&&(i-=40),this.SetScrollLeft(i)}}}}},t.prototype.SetScrollLeft=function(e){this.m_elScroll.scrollLeft!=e&&(this.m_animation&&this.m_animation.Cancel(),this.m_animation=new C.a(this.m_elScroll,{scrollLeft:e},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start())},t.prototype.UpdateDragOffset=function(e){var t,n=e.clientX;for(t=0;t<this.m_rgOrderedRenderedTabs.length;t++){var o=this.m_rgOrderedRenderedTabs[t],r=this.m_mapTabs.get(o.GetUniqueID()),i=r&&r.GetBoundingClientRect();if(r&&i&&(n-i.left<i.width&&(this.m_nInitialTabDragOffset<0&&(this.m_nInitialTabDragOffset=n-i.left),n-this.m_nInitialTabDragOffset<i.left+i.width/2)))break}this.state.iDragIndex!=t&&this.setState({iDragIndex:t})},t.prototype.OnTabRef=function(e,t){t?this.m_mapTabs.set(e,t):this.m_mapTabs.delete(e),this.UpdateWindowIcon()},t.prototype.OnScrollRef=function(e){this.m_elScroll=e?e.GetScrollRef():null},t.prototype.SelectTab=function(e){this.props.tabSet.ActivateTab(e)},t.prototype.OnDragStart=function(e){var t=u.h.DragDropManager.GetDragData();t&&"chattab"==t.type&&(t.tabSet=this.props.tabSet)},t.prototype.OnChatTabContianerRef=function(e){this.m_elchatTabDiv=e},t.prototype.OnDragEnd=function(){this.setState({tabDrag:void 0})},t.prototype.OnBackClick=function(e){this.props.ResponsiveWindowState.SetActiveView(d.c.FriendsList)},t.prototype.ShowFriendsList=function(e){m.f.UIStore.SetTheaterMode(!1),m.f.UIStore.SetFriendsListCollapsed(Object(u.e)(this,e),!1)},t.prototype.StartTopbarEventListener=function(){this.m_elchatTabDiv.ownerDocument.defaultView.addEventListener("mousemove",this.OnTopbarHovered)},t.prototype.OnTopbarHovered=function(e){var t=e.clientY;m.f.UIStore.GetTheaterMode()||this.m_elchatTabDiv.ownerDocument.defaultView.removeEventListener("mousemove",this.OnTopbarHovered),t>this.m_nTheaterTopHoverHeight?this.state.bTheaterModeTopHovered&&(this.setState({bTheaterModeTopHovered:!1}),this.m_nTheaterTopHoverHeight=12):this.state.bTheaterModeTopHovered||(this.m_nTheaterTopHoverHeight=50,this.setState({bTheaterModeTopHovered:!0}))},t.prototype.OnTabSelectorClick=function(e){var t=33*this.m_mapTabs.size+(e.currentTarget.offsetTop+e.currentTarget.clientHeight)+16>e.currentTarget.ownerDocument.defaultView.innerHeight;Object(s.a)(v.createElement(B,{tabSet:this.props.tabSet}),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!1,bPreferPopTop:!1,bForcePopup:t})},t.prototype.UpdateWindowIcon=function(){try{if(this.props.popup&&this.props.popup.window&&void 0!==this.props.popup.window.SteamClient){for(var e=!1,t=!1,n=this.props.tabSet.tabs,o=0,r=n;o<r.length;o++){var i=r[o];i.GetUnreadMessageCount()>0&&(e=!0),i.IsVoiceActive()&&(t=!0)}t?this.props.popup.window.SteamClient.Window.SetWindowIcon("voice"):e?this.props.popup.window.SteamClient.Window.SetWindowIcon("messages"):this.props.popup.window.SteamClient.Window.SetWindowIcon("steam")}}catch(e){}},t.prototype.render=function(){var e=this,t=m.f.UIStore.GetTheaterMode();if(this.UpdateWindowIcon(),this.props.tabSet.tabCount<=0&&!this.props.popup)return null;var n,o=this.props.tabSet.tabs,r=this.props.activeTab,s=!1,c=!1;r instanceof l.d?s=r.isBroadcastShown:r instanceof L.b&&(s=!0);for(var p=0,d=o;p<d.length;p++){if(d[p].GetUnreadMessageCount()>0){c=!0;break}}if(this.state.tabDrag){var h=o.indexOf(this.state.tabDrag);-1!=h?h!=this.state.iDragIndex&&(n=o.slice(),Object(E.f)(n,h,Math.min(this.state.iDragIndex,o.length-1))):this.state.iDragIndex<o.length?(n=o.slice()).splice(this.state.iDragIndex,0,this.state.tabDrag):n=o.concat(this.state.tabDrag)}o=n||o,this.m_rgOrderedRenderedTabs=o;var f,_="ChatTabs titleBarContainer";this.props.popup&&(_+=" HasWindowControls"),1==o.length?_+=" OneTab":this.state.windowWidth<180*o.length+180&&(_+=" HasTabs"),m.f.SettingsStore.FriendsSettings.bCompactFriendsList&&(_+=" compactView"),this.state.bTheaterModeTopHovered&&(_+=" TheaterTopHovered"),this.props.ResponsiveWindowState&&(f=v.createElement("div",{className:"ChatTabsBackButton",onClick:this.OnBackClick},"<<")),s&&(_+=" activeTabHasBroadcast");var g,b=!1,S=!0;this.props.popup&&(g=Object(u.f)(this.props.popup),S=m.f.UIStore.BIsFriendsListSingleWindow(g),b=g!=m.a),t&&this.m_elchatTabDiv&&this.StartTopbarEventListener();var C=this.m_elchatTabDiv&&180*this.props.tabSet.tabCount+(a.a.IN_CLIENT?168:48)>this.m_elchatTabDiv.clientWidth||!1;return v.createElement("div",{className:_,onDragStart:this.OnDragStart,ref:this.OnChatTabContianerRef},this.props.popup&&v.createElement(D.a,{hideMinMax:b,popup:this.props.popup,className:"chatTitleBar"}),f,(t&&S||this.props.showOpenFriendsList)&&v.createElement("div",{className:"chatTabOpenFriendsList",onClick:this.ShowFriendsList},v.createElement(I.x,null),Object(w.d)("#FriendsList_ExpandButton")),this.props.tabSet.tabCount>0&&v.createElement("div",{className:"chatTabSetContainer"+(C?" showTabSelector":"")},v.createElement(O,{className:"chatTabList",ref:this.OnScrollRef},v.createElement(y.TransitionGroup,{className:i.a.ChatTabTransitionGroup},o.map((function(t,n){var o=e.props.activeTab==t,r={enter:i.a.ChatTabTransition_Enter,enterActive:i.a.ChatTabTransition_EnterActive,exit:i.a.ChatTabTransition_Exit,exitActive:i.a.ChatTabTransition_ExitActive};return v.createElement(y.CSSTransition,{className:"ChatTabTranstionContainer",classNames:r,key:t.GetUniqueID(),timeout:350},v.createElement(P,{tab:t,active:o,selectTab:e.SelectTab,ref:function(n){return e.OnTabRef(t.GetUniqueID(),n)},fnOnDragEnd:e.OnDragEnd}))})))),C&&v.createElement("div",{className:"chatTabSelector"+(c?" UnreadMessages":""),onClick:this.OnTabSelectorClick},v.createElement(I.p,null),c&&v.createElement("div",{className:"ChatUnreadMessageIndicator"})),a.a.IN_CLIENT&&v.createElement(v.Fragment,null,v.createElement("div",{className:"chatTabDraggableSpace"}),v.createElement("div",{className:"chatTabDraggableSpace ChromeClearance"}))),v.createElement("div",{className:"dropTargetBox"}),t&&v.createElement("div",{className:"theaterModeHoverSpace"+(c?" hasUnreadMessages":"")},c&&v.createElement("div",{className:"ChatUnreadMessageIndicator"},v.createElement("div",{className:"chatUnreadCircle"}))))},Object(o.c)([G.A],t.prototype,"m_nTheaterTopHoverHeight",void 0),Object(o.c)([S.a],t.prototype,"OnWindowResizeEvent",null),Object(o.c)([S.a],t.prototype,"HandleDropComplete",null),Object(o.c)([S.a],t.prototype,"OnTabRef",null),Object(o.c)([S.a],t.prototype,"OnScrollRef",null),Object(o.c)([S.a],t.prototype,"SelectTab",null),Object(o.c)([S.a],t.prototype,"OnDragStart",null),Object(o.c)([S.a],t.prototype,"OnChatTabContianerRef",null),Object(o.c)([S.a],t.prototype,"OnDragEnd",null),Object(o.c)([S.a],t.prototype,"OnBackClick",null),Object(o.c)([S.a],t.prototype,"ShowFriendsList",null),Object(o.c)([S.a],t.prototype,"StartTopbarEventListener",null),Object(o.c)([S.a],t.prototype,"OnTopbarHovered",null),Object(o.c)([S.a],t.prototype,"OnTabSelectorClick",null),t=Object(o.c)([b.a],t)}(v.Component),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.SelectTab=function(e){this.props.tabSet.ActivateTab(e)},t.prototype.render=function(){for(var e=[],t=0,n=this.props.tabSet.tabs;t<n.length;t++){var o=n[t],r=v.createElement(P,{tab:o,active:!0,selectTab:this.SelectTab,fnOnDragEnd:null,bDisableContextMenu:!0});e.push(v.createElement(_.d,{key:o.GetUniqueID(),className:"ChatTabContextMenuItem",onSelected:null},r))}return v.createElement(_.c,{className:"ChatTabs ChatTabsContextMenu compactView CompactFriendsList"},e)},Object(o.c)([S.a],t.prototype,"SelectTab",null),t=Object(o.c)([b.a],t)}(v.Component),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bMiddleMouseDown=!1,t}return Object(o.d)(t,e),t.prototype.BindChatTab=function(e){this.m_elChatTab=e},t.prototype.GetBoundingClientRect=function(){return this.m_elChatTab?this.m_elChatTab.getBoundingClientRect():void 0},t.prototype.GetChatTabRef=function(){return this.m_elChatTab},t.prototype.OnDragStart=function(e){var t=e.clientX-e.currentTarget.getBoundingClientRect().left,n=e.clientY-e.currentTarget.getBoundingClientRect().top;u.h.DragDropManager.StartDrag({type:"chattab",tab:this.props.tab,offsetX:t,offsetY:n})},t.prototype.OnDragEnd=function(e){var t=u.h.DragDropManager.GetDragData();if(t&&"chattab"==t.type){var n=t,o=!1;if(n.tabSet)o=m.f.UIStore.GetPerContextChatData(n.tabSet.GetBrowserContext()).BUsePopups();if(!u.h.DragDropManager.BWasDropConsumed()&&n.tabSet&&n.tabSet.tabCount>1&&o){var r=e.currentTarget.getBoundingClientRect(),i=r.left-e.clientX,a=r.top-e.clientY;if(i*i+a*a>1e4){var s=e.currentTarget.ownerDocument.defaultView,c={left:Math.max(0,e.screenX-n.offsetX),top:Math.max(0,e.screenY-n.offsetY),width:s.innerWidth,height:s.innerHeight};if(this.props.fnOnDragEnd(),o){var l=Object(u.e)(this,e);e.currentTarget.ownerDocument.defaultView.SteamClient.Window.GetMousePositionDetails((function(e){e&&(c.left=-n.offsetX,c.top=-n.offsetY),m.f.UIStore.MoveTabToNewPopup(l,n.tab,c,e)}))}else m.f.UIStore.MoveTabToNewPopup(Object(u.e)(this,e),n.tab,c)}}}u.h.DragDropManager.EndDrag()},t.prototype.OnMouseDown=function(e){0==e.button?this.props.selectTab(this.props.tab):1==e.button&&(e.preventDefault(),this.m_bMiddleMouseDown=!0)},t.prototype.OnMouseUp=function(e){1==e.button&&this.m_bMiddleMouseDown&&(m.f.UIStore.CloseTab(Object(u.e)(this,e),this.props.tab),e.preventDefault(),this.m_bMiddleMouseDown=!1)},t.prototype.OnMouseLeave=function(e){this.m_bMiddleMouseDown=!1},t.prototype.OnCloseMouseDown=function(e){e.stopPropagation()},t.prototype.OnCloseClick=function(e){m.f.UIStore.CloseTab(Object(u.e)(this,e),this.props.tab),e.stopPropagation()},t.prototype.OnContextMenu=function(e){if(!this.props.bDisableContextMenu){var t=this.props.tab;if(t.IsChatRoom()){if(t instanceof l.d){n=t;Object(f.b)(e,n.GetGroup(),{tab:t})}}else{var n=this.props.tab.GetChatView();Object(g.b)(Object(u.e)(this,e),{tab:this.props.tab},n.chat.chat_partner,e)}}},t.prototype.render=function(){var e=this.props.tab,t=e.IsVoiceActive(),n=Object(R.a)(i.a.ChatTab,"no-drag",this.props.active&&i.a.Active,t&&i.a.VoiceActive,t&&m.f.ChatStore.VoiceChat.IsMicMuted()&&i.a.MicMuted);return v.createElement("div",{className:n,ref:this.BindChatTab,draggable:!0,onMouseDown:this.OnMouseDown,onMouseUp:this.OnMouseUp,onMouseLeave:this.OnMouseLeave,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd,onContextMenu:this.OnContextMenu},v.createElement(x,{tab:this.props.tab,active:this.props.active},v.createElement("div",{className:i.a.ChatTabRow},e.IsVoiceActive()&&v.createElement("div",{className:i.a.MicStatus,title:m.f.ChatStore.VoiceChat.IsMicMuted()?Object(w.d)("#Tooltip_MicStatus_Muted"):Object(w.d)("#Tooltip_MicStatus_Active")},v.createElement(I.J,null)),v.createElement(j.a,null,v.createElement(U,{tab:this.props.tab})),v.createElement(F,{onClick:this.OnCloseClick,onMouseDown:this.OnCloseMouseDown}),v.createElement(V,{tab:this.props.tab}))))},Object(o.c)([S.a],t.prototype,"BindChatTab",null),Object(o.c)([S.a],t.prototype,"OnDragStart",null),Object(o.c)([S.a],t.prototype,"OnDragEnd",null),Object(o.c)([S.a],t.prototype,"OnMouseDown",null),Object(o.c)([S.a],t.prototype,"OnMouseUp",null),Object(o.c)([S.a],t.prototype,"OnMouseLeave",null),Object(o.c)([S.a],t.prototype,"OnCloseMouseDown",null),Object(o.c)([S.a],t.prototype,"OnCloseClick",null),Object(o.c)([S.a],t.prototype,"OnContextMenu",null),t=Object(o.c)([b.a],t)}(v.Component);function F(e){return v.createElement("div",{title:Object(w.d)("#Chat_CloseTooltip"),className:i.a.CloseButton,onClick:e.onClick,onMouseDown:e.onMouseDown},v.createElement(I.qb,null))}var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_refFriendHover=v.createRef(),t}return Object(o.d)(t,e),t.prototype.componentDidUpdate=function(e){!e.active&&this.props.active&&this.m_refFriendHover.current&&this.m_refFriendHover.current.Hide()},t.prototype.render=function(){var e=this.props,t=e.tab.GetChatView();if(t&&t.chat instanceof p.a){var n=t.chat.chat_partner;return v.createElement(A.e,{key:n.accountid,ref:this.m_refFriendHover,friend:n,context:{},disableContextMenu:!0,direction:"bottom"},e.children)}return e.children},t}(v.Component),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.tab;if(e.IsChatRoom()&&e instanceof l.d){if(!e.GetGroup().hasUnreadChatMessage)return null}else if(!e.GetUnreadMessageCount())return null;return v.createElement("div",{className:i.a.UnreadGlow},v.createElement("div",{className:i.a.UnreadCircle}))},t=Object(o.c)([b.a],t)}(v.Component),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.tab.GetChatView();if(e&&e.chat instanceof p.a){var t=e.chat.chat_partner.persona.is_ingame;return v.createElement("div",{className:i.a.ChatTabContent_Friend},v.createElement(A.c,{friend:e.chat.chat_partner,noActions:!0,context:{chat:e.chat},bHideGameName:!t,bHideEnhancedRichPresenceLabel:!0,bHidePersona:!t,bHideSnooze:!1,avatarSize:"X-Small"}))}if(e&&e.chat instanceof c.a){var n=this.props.tab.GetGroup();return v.createElement("div",{className:i.a.ChatTabContent_ChatRoom},v.createElement(h.a,{group:n,smaller:!0,smallish:!1}),v.createElement("div",{className:i.a.ChatTabContent_ChatRoomName},this.props.tab.GetTabName()))}if(this.props.tab instanceof L.b){var o=this.props.tab.GetTabName();return v.createElement("div",{className:i.a.ChatTabContent_ChatRoom},v.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar Smaller"},v.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:N.b.tabIcon})),v.createElement("div",{className:i.a.ChatTabContent_ChatRoomName},o))}return null},t=Object(o.c)([b.a],t)}(v.Component);function H(e){u.h.UIDisplayPrefs.bDontShowVoiceAlert||e&&Object(T.c)(v.createElement(W,null),e,"ActiveVoiceAlert",{strTitle:Object(w.d)("#Chat_StillInVoiceDialog_Title"),popupWidth:650,popupHeight:340},Object(u.g)(e))}var W=function(e){function t(t){var n=e.call(this,t)||this;return n.state={bDontShowChecked:!1,strChatName:""},n.m_strChannelName="",n}return Object(o.d)(t,e),t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnSubmit=function(){u.h.SetUIDisplayPref("bDontShowVoiceAlert",this.state.bDontShowChecked),this.props.closeModal()},t.prototype.OnDialogChecked=function(){this.setState({bDontShowChecked:!this.state.bDontShowChecked})},t.prototype.OnManualVoiceChatExit=function(){m.f.VoiceStore.OnUserEndVoiceChat(),this.OnSubmit()},t.prototype.componentDidMount=function(){this.setState({strChatName:m.f.ChatStore.GetActiveVoiceChat().name})},t.prototype.render=function(){return v.createElement(T.a,{onEscKeypress:this.DismissDialog},v.createElement(M.h,{classNameContent:"CloseActiveVoiceWindowConfirmation",onSubmit:this.OnSubmit},v.createElement(M.m,null,v.createElement("div",null,Object(w.d)("#Chat_StillInVoiceDialog_Title"))),v.createElement(M.b,null,v.createElement("div",{className:"activeVoiceDetails"},Object(w.d)("#Chat_StillInVoiceDialog_Desc1")),v.createElement("div",{className:"activeVoiceDetails"},Object(w.d)("#Chat_StillInVoiceDialog_Desc2")),v.createElement("div",{className:"voiceControlsExample"},v.createElement(A.a,{name:this.state.strChatName,chat:m.f.ChatStore.GetActiveVoiceChat(),nostatus:!0}),v.createElement("div",{className:"circleHighlight voiceExit"})),!1),v.createElement(M.j,null,v.createElement("div",{className:"_DialogColLayout"},v.createElement(M.x,{onClick:this.OnSubmit},Object(w.d)("#Chat_StillInVoiceDialog_KeepChatting"))),v.createElement("div",{className:"dontShowConfirmation",onClick:this.OnDialogChecked},v.createElement(M.e,{checked:this.state.bDontShowChecked,onChange:this.OnDialogChecked}),Object(w.d)("#Dialog_DontShowMeAgain")))))},Object(o.c)([S.a],t.prototype,"DismissDialog",null),Object(o.c)([S.a],t.prototype,"OnSubmit",null),Object(o.c)([S.a],t.prototype,"OnDialogChecked",null),Object(o.c)([S.a],t.prototype,"OnManualVoiceChatExit",null),t=Object(o.c)([b.a],t)}(v.Component)},HVDT:function(e,t,n){e.exports={NewEmoticonIndicator:"emoticon_NewEmoticonIndicator_3NVON",NewEmoticonCircle:"emoticon_NewEmoticonCircle_3mNrG",EmoticonSelector:"emoticon_EmoticonSelector_177nw",emoticon:"emoticon_emoticon_9hYGN",large:"emoticon_large_p8Q42",EmoticonSelector_Emoticons:"emoticon_EmoticonSelector_Emoticons_1OTXW",EmoticonSelector_Separator:"emoticon_EmoticonSelector_Separator_1_yzI",EmoticonSelector_SeparatorBackground:"emoticon_EmoticonSelector_SeparatorBackground_13bYy",EmoticonSelector_Controls:"emoticon_EmoticonSelector_Controls_1hOWv",EmoticonSelector_Item:"emoticon_EmoticonSelector_Item_3muLb",EmoticonSelector_Item_New:"emoticon_EmoticonSelector_Item_New_spFg_",EffectHeading:"emoticon_EffectHeading_3SbjL",StickerHeading:"emoticon_StickerHeading_Tp5NO",GetFestive:"emoticon_GetFestive_1uCYo",RoomEffectButton:"emoticon_RoomEffectButton_2ztWU",TopDivider:"emoticon_TopDivider_3oUDw",BottomDivider:"emoticon_BottomDivider_3Rv7K",StickerButton:"emoticon_StickerButton_3O95u"}},Hi0u:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return h}));var o=n("mrSG"),r=n("q1tI"),i=n("i8i4"),a=n("JtU4"),s=n("EGkk"),c=n("kQil"),l=n("0wLp"),p=n("1n9R"),u=n("XaMz");function m(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(o){return[2,d(e,t,n,r,void 0,void 0,void 0,!1)]}))}))}function d(e,t,n,r,i,a,s,c){return Object(o.b)(this,void 0,void 0,(function(){var l,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,f(e,t,r)];case 1:return(l=o.sent()).height/t.innerHeight<.9&&l.width/t.innerWidth<.8?[2,h(e,t)]:(p={strTitle:n||"Steam Dialog",popupWidth:Math.max(l.width,s||0),popupHeight:Math.max(l.height,a||0),bHideMainWindowForPopups:!1!==c,closeModal:e.props.closeModal},[2,h(e,t,n,p,i)])}}))}))}function h(e,t,n,o,i,a){var s,l,u=e.props.closeModal,m=function(){s&&s.Close(),l&&l.Close(),u&&u()},d=r.cloneElement(e,{closeModal:m}),h=Object(c.e)(t);if(h.BUsePopups()&&p.c.USE_POPUPS&&o&&n){if(o.bHideMainWindowForPopups){var f=r.createElement(c.f,{className:"Hidden",onEscKeypress:!d.props.bDisableBackgroundDismiss&&m},r.createElement("div",null));l=h.ShowModal(f)}var g=new _(t,n,o,d,i,a);g.Show(),s=g}else s=h.ShowModal(d);return s}function f(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,a,s,c,l;return Object(o.e)(this,(function(o){switch(o.label){case 0:return(r=t.document.createElement("div")).style.position="absolute",r.style.visibility="hidden",t.document.body.appendChild(r),i.render(e,r),[4,n];case 1:return o.sent(),a=document,p.c.IN_LIBRARY&&a.fonts?[4,a.fonts.ready]:[3,3];case 2:o.sent(),o.label=3;case 3:return s=r.getBoundingClientRect(),c=Math.ceil(s.height),l=Math.ceil(s.width),i.unmountComponentAtNode(r),t.document.body.removeChild(r),[2,{height:c,width:l}]}}))}))}n.d(t,"a",(function(){return c.f}));var _=function(e){function t(t,n,o,r,i,a){var s=e.call(this,n,{title:o.strTitle,html_class:"client_chat_frame fullheight ModalDialogPopup",body_class:"fullheight ModalDialogBody",owner_window:void 0,replace_existing_popup:!0,target_browser:i,availscreenwidth:t.screen.availWidth,availscreenheight:t.screen.availHeight})||this;return s.m_bModalInitiatedClose=!1,s.m_windowOpener=t,s.m_modalProps=o,s.m_modalElement=r,s.m_options=a,s}return Object(o.d)(t,e),t.prototype.Close=function(){this.m_bModalInitiatedClose=!0,e.prototype.Close.call(this)},t.prototype.Update=function(e){Object(u.a)(!1,"NYI")},t.prototype.UpdateParamsBeforeShow=function(e){var t=this.m_modalProps.popupWidth||500,n=this.m_modalProps.popupHeight||400,r=this.m_windowOpener.screen,i=(r.availWidth-t)/2,a=(r.availHeight-n)/2,s=r;return void 0!==s.availLeft&&void 0!==s.availTop&&(i+=s.availLeft,a+=s.availTop),Object(o.a)(Object(o.a)({},e),{dimensions:{width:t,height:n,left:i,top:a}})},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){this.m_bModalInitiatedClose||this.m_modalProps.closeModal&&this.m_modalProps.closeModal()},t.prototype.Render=function(e,t){if(t.setAttribute("class","fullheight popup_chat_frame"),this.m_modalElement){var n=this.m_options?this.m_options.bHideActions:void 0,o=this.m_options&&"number"==typeof this.m_options.nDragAreaHeight?{height:this.m_options.nDragAreaHeight}:void 0;i.render(r.createElement("div",{className:"PopupFullWindow",onContextMenu:s.i},r.createElement(l.a,{hideMinMax:!0,popup:e,hideActions:n,style:o}),r.createElement(c.a,{ModalManager:Object(c.e)(e)}),this.m_modalElement),t)}},t}(a.a)},Hk8Z:function(e,t,n){"use strict";var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("i8i4"),s=n("2vnA"),c=n("1VtQ"),l=n("3/mw"),p=n.n(l),u=n("QHER"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.m_rgCurrentMatches=[],n.m_mapMatchByKey=new Map,n.m_hMobxSearchDisposer=Object(s.j)((function(){return Object(o.b)(n,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return[4,this.UpdateSearchResults(this.props.strSearch)];case 1:return e.sent(),this.forceUpdate(),[2]}}))}))})),n.state={selectedIndex:void 0},n}return Object(o.d)(t,e),t.prototype.OnKeyDown=function(e){this.BHandleKeyPress(e.keyCode)&&e.preventDefault()},t.prototype.BHandleKeyPress=function(e){switch(e){case 38:this.SetSelectedIndexDelta(-1);break;case 40:this.SetSelectedIndexDelta(1);break;case 36:this.SetSelectedIndex(0);break;case 33:this.SetSelectedIndexDelta(-this.GetPageSize());break;case 35:this.SetSelectedIndex(-1);break;case 34:this.SetSelectedIndexDelta(this.GetPageSize());break;case 13:case 9:if(void 0===this.state.selectedIndex)return this.props.onSuggestionSelected(this.props.strSearch),!1;this.ChooseSuggestion(this.m_rgCurrentMatches[this.state.selectedIndex]);break;case 27:this.props.onSuggestionSelected(this.props.strSearch);break;default:return!1}return!0},t.prototype.GetPageSize=function(){var e=a.findDOMNode(this),t=e&&e.firstElementChild,n=this.m_rgCurrentMatches.length;if(n>this.getMaxMatches()&&(n=this.getMaxMatches()),t&&n){var o=t.scrollHeight/n,r=t.clientHeight/o;return Math.max(1,Math.floor(r))}return 5},t.prototype.ChooseSuggestion=function(e){this.props.onSuggestionSelected(this.props.strSearch,e?this.getSelection(e):void 0)},t.prototype.SetSelectedIndexDelta=function(e){void 0!==this.state.selectedIndex?this.SetSelectedIndex(this.state.selectedIndex+e):this.SetSelectedIndex(1===e?0:e)},t.prototype.SetSelectedIndex=function(e){if(this.m_rgCurrentMatches.length){var t=this.m_rgCurrentMatches.length;t>this.getMaxMatches()&&(t=this.getMaxMatches()),(e%=t)<0&&(e+=t),this.setState({selectedIndex:e})}},t.prototype.FindKeyIndex=function(e){if(!this.m_mapMatchByKey.size&&this.m_rgCurrentMatches.length)for(var t=0;t<this.m_rgCurrentMatches.length;t++)this.m_mapMatchByKey.set(this.getKey(this.m_rgCurrentMatches[t]),t);return this.m_mapMatchByKey.get(e)},t.prototype.OnClickSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.ChooseSuggestion(this.m_rgCurrentMatches[t])},t.prototype.OnMouseOverSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.SetSelectedIndex(t)},t.prototype.BindSelectedElement=function(e){var t=a.findDOMNode(this),n=a.findDOMNode(e),o=t&&t.firstElementChild;n&&o&&(o.scrollTop+o.clientHeight<n.offsetTop||n.offsetTop<o.scrollTop)&&n.scrollIntoView()},t.prototype.UpdateSearchResults=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return t=this,[4,this.performSearch(e)];case 1:return t.m_rgCurrentMatches=n.sent(),this.m_strLastSearch=e,this.m_mapMatchByKey.clear(),this.m_rgCurrentMatches.length?this.state&&void 0!==this.state.selectedIndex?this.state.selectedIndex>=this.m_rgCurrentMatches.length&&this.setState({selectedIndex:0}):(void 0===this.props.nMinimumSearchLengthBeforeAutoSelection||e.length>=this.props.nMinimumSearchLengthBeforeAutoSelection)&&this.setState({selectedIndex:0}):this.state&&void 0!==this.state.selectedIndex&&this.setState({selectedIndex:void 0}),[2]}}))}))},t.prototype.componentWillUnmount=function(){this.m_hMobxSearchDisposer&&(this.m_hMobxSearchDisposer(),this.m_hMobxSearchDisposer=void 0)},t.prototype.componentDidUpdate=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){switch(e.label){case 0:return this.m_strLastSearch==this.props.strSearch?[3,2]:[4,this.UpdateSearchResults(this.props.strSearch)];case 1:e.sent(),this.forceUpdate(),e.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){var e=[];if(this.m_rgCurrentMatches.length){for(var t=this.getMaxMatches(),n=0;n<Math.min(t,this.m_rgCurrentMatches.length);n++){var o=this.m_rgCurrentMatches[n],r=this.getKey(o),a=n===this.state.selectedIndex;e.push(i.a.createElement(d,{key:r,matchKey:r,fnOnClick:this.OnClickSuggestion,fnOnMouseOver:this.OnMouseOverSuggestion,bIsSelected:a,ref:a?this.BindSelectedElement:void 0},this.renderMatch(o)))}this.m_rgCurrentMatches.length>t&&e.push(this.renderTooManyMatchesMessage(this.m_rgCurrentMatches.length-t))}else{var s=this.renderNoMatchMessage();if(!s)return null;e.push(s)}return i.a.createElement("div",{className:p.a.mentionDialogPosition},i.a.createElement("div",{className:p.a.mentionDialog,tabIndex:0,onKeyDown:this.OnKeyDown},this.renderHeader(),e))},Object(o.c)([c.a],t.prototype,"OnKeyDown",null),Object(o.c)([c.a],t.prototype,"OnClickSuggestion",null),Object(o.c)([c.a],t.prototype,"OnMouseOverSuggestion",null),Object(o.c)([c.a],t.prototype,"BindSelectedElement",null),t}(i.a.Component),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnMouseOver=function(e){this.props.fnOnMouseOver(this.props.matchKey)},t.prototype.OnClick=function(e){this.props.fnOnClick(this.props.matchKey)},t.prototype.render=function(){return i.a.createElement("div",{className:Object(u.a)(p.a.suggestOption,p.a.mentionSearchOption,this.props.bIsSelected?p.a.selected:""),onMouseEnter:this.OnMouseOver,onClick:this.OnClick},this.props.children)},Object(o.c)([c.a],t.prototype,"OnMouseOver",null),Object(o.c)([c.a],t.prototype,"OnClick",null),t}(i.a.PureComponent);t.a=m},HzvH:function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return K}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("9Cmb"),s=n("okNM"),c=n("Q8iO"),l=n.n(c),p=n("1n9R"),u=n("/7KC");function m(e,t,n){return p.c.COMMUNITY_CDN_ASSET_URL+e+"/roomeffects/"+t+"/"+n}var d=function(e){function t(t){var n=e.call(this,t)||this;return n.m_strSaleId=n.props.sale,n}return Object(o.d)(t,e),t.prototype.getAsset=function(e){return m(this.m_strSaleId,this.props.effect.name,e)},t}(r.Component);function h(e,t){var n,o;n=function(){return setTimeout(e,t)},(o=Object(r.useRef)({bSet:!1})).current.bSet||(o.current={bSet:!0,value:n()}),o.current.value}var f=function(e){var t=e.msDelay,n=e.children;return function(e){var t=Object(r.useState)(!1),n=t[0],o=t[1];return h((function(){return o(!0)}),e),n}(t)?i.a.createElement(i.a.Fragment,null,n):null};var _=function(e){function t(t){var n=e.call(this,t)||this;return n.m_refContainer=i.a.createRef(),n.m_rgFireworks=[],n.m_nCurrentDelay=0,n.state={bReady:!1},n}return Object(o.d)(t,e),t.prototype.CreateFireworks=function(e){this.m_nCurrentDelay=0,this.AddCluster(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.m_nCurrentDelay+=200,this.AddCluster(e),this.m_nCurrentDelay+=600,this.AddCluster(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.m_nCurrentDelay+=200,this.RenderLong(e),this.AddCluster(e),this.RenderLong(e),this.m_nCurrentDelay+=200,this.AddCluster(e)},t.prototype.TestRender=function(e){Object(u.b)(0,70),Object(u.b)(0,70);for(var t=0;t<1;t++)this.m_rgFireworks.push({x:"20%",y:"20%",nHueRotation:0,nDelay:this.m_nCurrentDelay,flScale:e,burst:g}),this.m_nCurrentDelay+=500;this.m_rgFireworks.push({x:"0%",y:"0%",nHueRotation:0,nDelay:this.m_nCurrentDelay,flScale:e,burst:b}),this.m_rgFireworks.push({x:"30%",y:"30%",nHueRotation:0,nDelay:this.m_nCurrentDelay,flScale:e,burst:v})},t.prototype.CalcHueRotation=function(){return"lny2020"==this.props.sale?360+Object(u.b)(-30,10):Object(u.b)(0,360)},t.prototype.AddCluster=function(e){var t=Object(u.b)(-5,50),n=Object(u.b)(-10,50),o=this.CalcHueRotation();this.m_rgFireworks.push({x:t+"%",y:n+"%",nHueRotation:o,nDelay:this.m_nCurrentDelay,flScale:e,burst:b});for(var r=Math.random()*Math.PI*2,i=Math.floor(64*e),a=Math.floor(60*e),s=Math.floor(10*e),c=0,l=0;l<3;l++){var p="calc( "+t+"% + "+(i+Math.cos(r+c)*a)+"px )",m="calc( "+n+"% + "+(i+(Math.sin(r+c)*a+s))+"px )";l<2&&(this.m_nCurrentDelay+=200),o=this.CalcHueRotation(),this.m_rgFireworks.push({x:p,y:m,nHueRotation:o,nDelay:this.m_nCurrentDelay,flScale:e,burst:v}),c+=2.09}},t.prototype.RenderLong=function(e){var t=Object(u.b)(20,60),n=Object(u.b)(-5,50),o=this.CalcHueRotation();this.m_rgFireworks.push({x:t+"%",y:n+"%",nHueRotation:o,nDelay:this.m_nCurrentDelay,flScale:e,burst:g})},t.prototype.componentDidMount=function(){if(this.m_refContainer.current&&!(this.m_rgFireworks.length>0)){var e=this.m_refContainer.current,t=e.offsetWidth,n=e.offsetHeight,o=Object(u.c)(t,400,1080,.5,2);o=Object(u.a)(o,.5,2),console.log(t,n,o),this.CreateFireworks(o),this.setState({bReady:!0})}},t.prototype.render=function(){var e=this,t=[];return this.state.bReady&&this.m_rgFireworks.map((function(n,o){var r=""+o,a={top:n.y,left:n.x,filter:"hue-rotate("+n.nHueRotation+"deg)"};t.push(i.a.createElement(n.burst,{key:r,style:a,msDelay:n.nDelay,scale:n.flScale,sale:e.props.sale}))})),i.a.createElement("div",{ref:this.m_refContainer,className:l.a.FireworkContainer},t)},t}(i.a.Component);function g(e){var t=m(e.sale,"fireworks","long_sheet.png"),n=e.style;return n.backgroundImage="url("+t+")",n.width=256,n.height=256,n.animation=l.a.fireworkLongX+" 0.2s steps(9) 10, "+l.a.fireworkLongY+" 2.0s steps(10) forwards",n.transformOrigin="0 0",n.transform="scale( "+e.scale+" )",i.a.createElement(f,{msDelay:e.msDelay},i.a.createElement("div",{style:e.style,className:l.a.FireworkPNG}))}function b(e){var t=m(e.sale,"fireworks","big_sheet.png"),n=e.style;return n.backgroundImage="url("+t+")",n.width=256,n.height=256,n.animation=l.a.fireworkBigX+" 0.2s steps(9) 4, "+l.a.fireworkBigY+" 0.8s steps(4) forwards",n.transformOrigin="0 0",n.transform="scale( "+e.scale+" )",i.a.createElement(f,{msDelay:e.msDelay},i.a.createElement("div",{style:e.style,className:l.a.FireworkPNG}))}function v(e){var t=m(e.sale,"fireworks","small_sheet.png"),n=e.style;return n.backgroundImage="url("+t+")",n.width=256,n.height=256,n.animation=l.a.fireworkSmallX+" 0.15s steps(10) 6, "+l.a.fireworkSmallY+" 0.9s steps(6) forwards",n.transformOrigin="0 0",n.transform="scale( "+e.scale/2+" )",i.a.createElement(f,{msDelay:e.msDelay},i.a.createElement("div",{style:e.style,className:l.a.FireworkPNG}))}var y,S=n("ZO3Q");function C(e){switch(e){case y.Gold:case y.LNY2020:return"hsl("+(51+-16*Math.random())+", 93%, 54%)";default:return"hsl("+360*Math.random()+", 100%, 40%)"}}function O(e){return e==y.LNY2020?"hue-rotate("+(360+Object(u.b)(-30,10))+"deg)":""}!function(e){e[e.Default=0]="Default",e[e.Gold=1]="Gold",e[e.LNY2020=2]="LNY2020"}(y||(y={}));var I=function(e,t){var n=Object(S.useSpring)({anim:1,from:{anim:0},config:{duration:8e3}}).anim;return Object(r.useMemo)((function(){var o=function(e,t){var n=[];if(!e)return n;for(var o=e.width,r=e.height,i=0;i<200;i++){var a=Math.random(),s=Math.random()*a,c=Math.random()*s,l=4*(Math.random()-.5)*Math.PI*20,p=Math.random()+.5,u=[Math.random()*r-r-20,r+20+Math.random()*r*p],m=p*(o<=1e3?1:o/1e3)*(t==y.Gold?2:1),d=(Math.random()-.5)*o,h=(Math.random()-.5)*o,f=[h,d+h],_=C(t),g=O(t);n.push({rotationCoefficient:l,rotationRatioY:s,rotationRatioX:a,rotationRatioZ:c,yRange:u,xRange:f,scale:m,colorHue:_,filter:g})}return n}(e,t);return{rgParticleStyles:o.map((function(e){return function(e,t,n){y.Default;var o=e.rotationCoefficient,r=e.rotationRatioY,i=e.rotationRatioX,a=e.rotationRatioZ,s=e.yRange,c=e.xRange,l=e.scale,p=e.colorHue;return{backgroundColor:p,fill:p,filter:e.filter,flRandom:0,transform:t.interpolate((function(e){var t=e*o*r,n=e*o*i,p=e*o*a,u=e*(s[1]-s[0])+s[0];return"translate("+(e*(c[1]-c[0])+c[0])+"px, "+u+"px) rotateY("+t+"rad) rotateX("+n+"rad) rotateZ("+p+"rad) scale("+l+")"}))}}(e,n)})),rgStreamerStyles:o.map((function(e){return function(e,t,n){if(Math.random()>.1)return null;var o=e.rotationCoefficient,r=e.rotationRatioZ,i=e.yRange,a=e.xRange,s=e.scale;return{backgroundColor:void 0,fill:e.colorHue,filter:e.filter,flRandom:Math.random(),transform:t.interpolate((function(e){var t=e*o/4*r,n=e*(i[1]-i[0])+i[0];return"translate("+(e*(a[1]-a[0])+a[0])+"px, "+n+"px) rotateZ("+t+"rad) scale("+s+")"}))}}(e,n)})).filter((function(e){return!!e}))}}),[e])},E={position:"absolute",left:"50%",top:0},w=Object(o.a)(Object(o.a)({},E),{width:10,height:5,borderWidth:1,borderColor:"black"}),A=function(e){var t,n=e.eType,o=(y.Gold,y.LNY2020,function(){var e=Object(r.useState)(null),t=e[0],n=e[1],o=Object(r.useCallback)((function(e){e&&"function"==typeof e.getBoundingClientRect&&n(e.getBoundingClientRect())}),[]);return[t,o]}()),a=o[0],s=o[1],c=I(a,n),l=c.rgParticleStyles,p=c.rgStreamerStyles;switch(n){case y.Gold:t=l.map((function(e,t){return i.a.createElement(T,{key:t,style:e})}));break;case y.LNY2020:t=l.map((function(e,t){return t%2?i.a.createElement(D,{key:t,style:e}):i.a.createElement(M,{key:t,style:e})}));break;case y.Default:t=l.map((function(e,t){return i.a.createElement(D,{key:t,style:e})}))}return i.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden"},ref:s},t,p.map((function(e,t){return e.flRandom>.5?i.a.createElement(L,{key:t,style:e}):i.a.createElement(j,{key:t,style:e})})))},D=function(e){var t=e.style;return i.a.createElement(S.animated.div,{style:Object(o.a)(Object(o.a)({},w),t)})},T=function(e){var t=e.style,n=Object(r.useState)(Math.floor(Math.random()*G.length))[0],a=G[n];return i.a.createElement(a,{style:Object(o.a)(Object(o.a)(Object(o.a)({},E),t),{backgroundColor:void 0})})},M=function(e){var t=e.style,n=Object(r.useState)(Math.floor(Math.random()*N.length))[0],a=N[n];return i.a.createElement(a,{style:Object(o.a)(Object(o.a)(Object(o.a)({},E),t),{backgroundColor:void 0})})},j=function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 80 620",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:70},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.53418 0.446363C4.80788 7.96949 8.99436 15.2008 13.0073 22.1324C35.0383 60.1862 51.8397 89.2071 49.1318 107.895C48.8475 101.617 47.1164 95.1506 43.6182 89.4997C22.9652 56.1375 -2.34054 7.06674 0.53418 0.446363ZM56.8207 188.805C55.1885 180.279 48.7591 170.011 41.3806 161.521C37.204 156.715 9.25983 141.889 7.31883 141.711L7.31474 141.711L7.31468 141.71L7.31452 141.71L7.11268 139.174L6.5244 131.791L6.5251 131.791L6.52505 131.79L6.52672 131.791C34.8022 129.659 47.1567 121.526 49.1318 107.895C49.6795 119.989 44.859 131.385 36.9599 134.917C33.2606 136.571 29.1329 137.843 25.1609 138.813C32.3599 142.599 44.0294 149.927 51.5956 160.751C60.8324 173.966 58.2537 184.901 56.8207 188.805ZM14.1541 214.387C28.3318 211.43 49.5183 206.914 54.7559 200.428C57.1974 197.404 57.6912 193.352 56.8207 188.805C56.4544 189.804 56.163 190.342 56.163 190.342C50.7646 194.114 26.0806 200.624 11.3908 204.497L11.3906 204.497L11.3904 204.497C7.40758 205.548 4.15949 206.404 2.22967 206.96L2.67009 212.483L3.21786 219.36C12.4021 224.467 20.8538 228.732 28.2879 232.483C70.3706 253.717 79.8458 258.498 5.02032 306.544C5.02047 306.546 5.02063 306.548 5.02078 306.55C5.01989 306.548 5.019 306.547 5.01812 306.545C5.24371 309.369 5.53845 312.547 5.79092 315.269C5.89859 316.43 5.99858 317.508 6.08223 318.44C6.15188 319.464 6.19564 320.436 6.20554 321.424C6.20464 321.331 6.23688 321.223 6.30064 321.101C6.31949 321.398 6.32799 321.609 6.32408 321.719C6.27561 321.616 6.23528 321.518 6.20333 321.425C6.28038 321.817 6.31788 321.895 6.32408 321.719C7.33553 323.874 11.894 328.285 17.8731 334.069C41.6329 357.056 87.8264 401.748 23.0228 412.886C23.5764 419.833 23.1631 419.992 23.1631 419.992C23.1631 419.992 24.3205 419.752 26.2506 419.305C34.1052 423.989 55.3095 438.589 58.8169 442.625C66.1955 451.115 72.6248 461.382 74.2571 469.909C73.8908 470.907 73.5993 471.446 73.5993 471.446C68.4367 475.053 42.2327 481.635 25.7172 485.783L25.7152 485.783L25.7147 485.784L25.7135 485.784L25.7028 485.787C20.6602 487.053 16.5222 488.093 14.1645 488.751L13.6222 488.439L13.6585 488.894L13.653 488.896L13.6602 488.916L14.4124 498.36C47.1778 516.58 73.923 535.597 77.6114 557.121C77.1891 558.457 76.6366 559.776 75.9628 561.084C62.5946 587.039 41.1874 608.612 24.1016 619.88C66.6744 596.331 80.8095 575.784 77.6114 557.121C81.823 543.801 73.0945 528.757 42.6319 505.104L26.8056 496.013C27.3301 495.908 27.8664 495.802 28.4133 495.693L28.4153 495.693C43.5756 492.685 66.9267 488.052 72.1923 481.531C74.6338 478.508 75.1275 474.456 74.2571 469.909C75.69 466.004 78.2687 455.069 69.032 441.855C57.4339 425.262 36.1944 416.886 36.1944 416.886L35.6563 416.927C41.635 415.285 48.7178 413.074 54.4334 410.519C66.4332 405.154 68.2307 384.374 57.9941 367.838C51.515 357.372 43.7231 350.194 35.4751 342.596C27.6489 335.386 19.4122 327.798 11.4967 316.664C12.7089 315.779 14.0928 314.791 15.6091 313.709C40.2963 296.086 100.082 253.407 25.4758 221.439L14.1541 214.387Z",fill:t.fill}))},L=function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 203 295",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:20},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M104.427 22.6009L104.428 22.6013C125.146 59.4015 140.687 87.0059 133.282 102.839C134.662 95.3303 133.62 86.4659 129.246 79.1843C112.124 50.6796 91.1453 8.75528 93.5285 3.10091C97.2525 9.85693 100.914 16.3611 104.427 22.6009ZM142.726 166.38C141.373 159.096 136.043 150.323 129.926 143.069C127.078 139.691 110.154 127.651 103.342 123.396C101.494 123.638 100.371 123.725 100.371 123.725C100.371 123.725 100.713 123.589 100.254 117.655C119.247 116.187 129.407 111.125 133.282 102.839C131.985 109.898 128.547 115.759 123.726 117.978C120.124 119.637 116.182 120.838 112.579 121.699C116.941 123.721 130.418 130.653 138.395 142.414C146.052 153.705 143.914 163.045 142.726 166.38ZM103.389 188.664C103.824 188.575 104.268 188.484 104.721 188.392L104.722 188.392C117.291 185.827 136.649 181.876 141.015 176.307C143.039 173.725 143.448 170.264 142.726 166.38C142.423 167.232 142.181 167.693 142.181 167.693C137.901 170.772 116.177 176.387 102.486 179.926C98.3006 181.007 94.8659 181.895 92.9093 182.457L92.4596 182.191L92.4896 182.579C92.4878 182.58 92.486 182.58 92.4842 182.581L92.4914 182.602L93.1147 190.665C120.278 206.239 142.45 222.491 145.508 240.879C145.158 242.02 144.7 243.146 144.141 244.263C133.059 266.43 115.312 284.852 101.148 294.472C136.441 274.369 148.16 256.821 145.508 240.879C149 229.501 141.764 216.649 116.509 196.435L103.389 188.664Z",fill:t.fill}))},G=[function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 102",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:5,height:10},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M45.8382 77.0734L24 0L2.16179 77.0734C0.773631 79.3013 0 81.7786 0 84.3885C0 84.4894 0.00115761 84.5902 0.00346361 84.6908L0 84.703H0.00374963C0.23239 94.2845 10.8883 102 24 102C37.1117 102 47.7676 94.2845 47.9963 84.703H48L47.9965 84.6908C47.9988 84.5902 48 84.4894 48 84.3885C48 81.7786 47.2264 79.3013 45.8382 77.0734Z",fill:"#F7D51E"}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 50 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:7},t)},i.a.createElement("path",{d:"M48.444 16.0525L32.7132 0.633915C20.0884 16.8827 7.13568 21.7989 0.597293 21.9904C7.33478 28.5984 14.1472 37.4728 14.1472 37.4728C31.6473 38.7751 44.3035 23.7352 48.444 16.0525Z",fill:"#C4C4C4"}),i.a.createElement("path",{d:"M48.444 16.0525L32.7132 0.633915C20.0884 16.8827 7.13568 21.7989 0.597293 21.9904C7.33478 28.5984 14.1472 37.4728 14.1472 37.4728C31.6473 38.7751 44.3035 23.7352 48.444 16.0525Z",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 68 69",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:10},t)},i.a.createElement("rect",{y:"34.6389",width:"48",height:"48",transform:"rotate(-45 0 34.6389)",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:10},t)},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 0L0 24L24 47.9999L48 24L24 0ZM23.7089 8.48533L8.48527 23.7089L23.7089 38.9325L38.9324 23.7089L23.7089 8.48533Z",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("ellipse",{cx:"24",cy:"15",rx:"24",ry:"15",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("ellipse",{cx:"24",cy:"15",rx:"24",ry:"15",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("ellipse",{cx:"24",cy:"15",rx:"24",ry:"15",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{viewBox:"0 0 48 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:8},t)},i.a.createElement("path",{d:"M33.8287 29.6914L24.9705 21.1201C23.199 24.5487 23.4612 24.5487 21.4282 27.9773C19.3952 31.4058 13.4557 29.6914 12.57 27.9773C7.25553 22.8344 10.7985 17.6914 12.57 15.9773C19.656 5.69155 36.5247 4.54869 48 5.69155C47.4095 4.54865 45.5199 1.92 42.6855 0.548571C39.1425 -1.16571 1.94169 0.548571 0.170191 14.2629C-1.60131 27.9771 10.7992 38.2629 21.4282 38.2629C29.9314 38.2629 33.2382 32.5486 33.8287 29.6914Z",fill:t.fill}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{width:"48",height:"35",viewBox:"0 0 48 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object(o.a)({width:10,height:7},t)},i.a.createElement("path",{d:"M48 0H0L24 35L48 0Z",fill:t.fill}))}],N=[function(e){var t=e.style;return i.a.createElement(S.animated.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 54 47.18",style:Object(o.a)({width:28,height:28},t)},i.a.createElement("polygon",{fill:"#60000e",points:"10.02 14.06 10.02 14.06 10.02 14.06 10.02 14.06"}),i.a.createElement("path",{fill:"#f93838",d:"M54,9.53A9.52,9.52,0,0,0,37.74,2.79a10.82,10.82,0,0,0-2.25,3.54,21.52,21.52,0,0,0-1.19,4.08A16.55,16.55,0,0,0,27,8.73h-.24a16.38,16.38,0,0,0-7,1.69,22.41,22.41,0,0,0-1.2-4.09,10.82,10.82,0,0,0-2.25-3.54A9.52,9.52,0,1,0,2.79,16.26h0a10.82,10.82,0,0,0,3.54,2.25,23.87,23.87,0,0,0,5,1.36,16.34,16.34,0,0,0-.94,5.48h0v0a16.57,16.57,0,0,0,4.92,11.81A7.36,7.36,0,0,1,17.05,40a10.5,10.5,0,0,0,10,7.15,10.38,10.38,0,0,0,6.17-2,10.57,10.57,0,0,0,3.77-5.11,7.48,7.48,0,0,1,1.79-2.89,16.66,16.66,0,0,0,4-17.3l.65-.12a22.44,22.44,0,0,0,4.31-1.24,10.82,10.82,0,0,0,3.54-2.25L50.9,16l.31.31A9.5,9.5,0,0,0,54,9.53ZM32.11,21.28a9.27,9.27,0,0,1,2.68-.38,9.06,9.06,0,0,1,2.87.44.44.44,0,0,1,.28.56.44.44,0,0,1-.56.27,8.4,8.4,0,0,0-2.59-.39,8.59,8.59,0,0,0-2.43.34h0a.44.44,0,1,1-.26-.84Zm-7.88,8.64a9.27,9.27,0,0,1,2.68-.38,9.06,9.06,0,0,1,2.87.44.44.44,0,0,1,.28.56.44.44,0,0,1-.56.27,8.35,8.35,0,0,0-2.59-.39,8.46,8.46,0,0,0-2.42.34h0a.44.44,0,1,1-.26-.84ZM24.31,33a.45.45,0,0,1,.54-.32l2.16.55,2.14-.55a.45.45,0,0,1,.54.32.44.44,0,0,1-.32.53l-2.25.58a.41.41,0,0,1-.22,0l-2.27-.58h0A.44.44,0,0,1,24.31,33ZM21.9,21.34a.44.44,0,0,1,.28.56.44.44,0,0,1-.56.27A8.35,8.35,0,0,0,19,21.78a8.46,8.46,0,0,0-2.42.34h0a.44.44,0,0,1-.26-.84A9.27,9.27,0,0,1,19,20.9,9.06,9.06,0,0,1,21.9,21.34Zm-1.6,8.08h0v0a.41.41,0,0,1,0-.1c0-.08-.06-.19-.12-.33a4.39,4.39,0,0,0-.47-.95,2.16,2.16,0,0,0-.43-.5,1.11,1.11,0,0,0-.24-.16.7.7,0,0,0-.25-.05.88.88,0,0,0-.29.05,1.82,1.82,0,0,0-.4.24,5,5,0,0,0-1.16,1.3.66.66,0,0,1-.92.17.65.65,0,0,1-.17-.91,7.44,7.44,0,0,1,1.1-1.32A3.45,3.45,0,0,1,18,26.13a2.21,2.21,0,0,1,.75-.14,2,2,0,0,1,.87.21,2.37,2.37,0,0,1,.66.49,4.41,4.41,0,0,1,.84,1.21,7.08,7.08,0,0,1,.3.72c.1.27.14.45.15.46h0a.67.67,0,0,1-.47.81A.66.66,0,0,1,20.3,29.42Zm12.19,8.86a4.18,4.18,0,0,1-.92.52,7.57,7.57,0,0,1-1.11,2.55A4.85,4.85,0,0,1,28.58,43a3.56,3.56,0,0,1-3.16,0,4.71,4.71,0,0,1-1.33-1,7.14,7.14,0,0,1-1.66-3.24,4.18,4.18,0,0,1-.92-.52.44.44,0,0,1-.1-.61.45.45,0,0,1,.62-.1,2.89,2.89,0,0,0,1.76.61,3,3,0,0,0,1.58-.47,4.28,4.28,0,0,0,1.26-1.31.43.43,0,0,1,.74,0,4.28,4.28,0,0,0,1.26,1.31,3,3,0,0,0,1.58.47A2.89,2.89,0,0,0,32,37.57h0a.45.45,0,0,1,.62.1A.44.44,0,0,1,32.49,38.28ZM38,29.07a.66.66,0,0,1-.92-.17,6.25,6.25,0,0,0-.9-1.09,2.25,2.25,0,0,0-.66-.45.88.88,0,0,0-.29-.05.58.58,0,0,0-.28.07,1,1,0,0,0-.31.23,3.29,3.29,0,0,0-.58.84c-.1.21-.19.42-.25.59s-.12.37-.13.38h0a.66.66,0,0,1-.8.47.67.67,0,0,1-.47-.81s.07-.25.2-.58a6.91,6.91,0,0,1,.59-1.2,3.66,3.66,0,0,1,.69-.79,2.3,2.3,0,0,1,.56-.35,1.82,1.82,0,0,1,.78-.17,2.21,2.21,0,0,1,.75.14,3,3,0,0,1,.73.41,6.6,6.6,0,0,1,1.46,1.62A.65.65,0,0,1,38,29.07Z"}),i.a.createElement("path",{fill:"#f93838",d:"M27,40.35c1.12,0,1.55-.37,1.89-1.53a4.17,4.17,0,0,1-.73-.37A5,5,0,0,1,27,37.39a5,5,0,0,1-1.16,1.06,4.17,4.17,0,0,1-.73.37C25.45,40,25.88,40.35,27,40.35Z"}))},function(e){var t=e.style;return i.a.createElement(S.animated.svg,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 14.5 22",style:Object(o.a)({width:28,height:28},t)},i.a.createElement("path",{fill:"#fc1010",d:"M1.6,10.1c0,0-0.1,0-0.4-0.1C1,10,0.8,9.9,0.8,9.9c-0.1,0-0.2-0.1-0.2-0.2c0-0.2,0.1-0.4,0.3-0.6v0L1,9c0.1-0.1,0.2-0.3,0.5-0.6C1.8,8.1,2,7.8,2.2,7.5c0-0.1,0.1-0.1,0.1-0.2s0.1-0.1,0.1-0.2C2.6,7,2.7,6.8,2.8,6.5c0-0.1,0.1-0.2,0.1-0.3C3,6.1,3,6,3,5.9c0-0.2-0.1-0.4-0.2-0.5C2.6,5.3,2.4,5.3,2.1,5.3c-0.2,0-0.4,0-0.6,0.1c-0.1,0-0.4,0.1-0.7,0.3c0,0,0,0,0,0c0,0,0-0.1,0-0.1c0-0.2,0-0.4-0.1-0.8l0-0.6l0-0.3l0-0.2V3.5l0.5-0.2C1.6,3.2,2,3.1,2.5,3c0.5-0.1,0.9-0.1,1.4-0.1c0.4,0,0.8,0,1.1,0.1c0.4,0.1,0.7,0.2,0.9,0.4c0.6,0.4,0.9,1,0.9,1.8c0,0.4-0.1,0.8-0.4,1.2C6.1,6.8,5.7,7.2,5.1,7.6h0.5h0.5c0.2,0,0.4,0,0.5,0c0.2,0.1,0.3,0.1,0.3,0.3c0,0.2,0,0.5,0,0.8V9v0.3c0,0.2,0,0.4-0.1,0.5C6.6,10,6.5,10,6.2,10c0,0-0.1,0-0.2,0c-0.1,0-0.4,0-0.9,0H4H3.6H3.1H2.6C1.9,10.1,1.6,10.1,1.6,10.1z"}),i.a.createElement("path",{fill:"#fc1010",d:"M9.8,10.3c-0.1,0-0.2,0-0.3,0l-0.6-0.1c0,0-0.1,0-0.1-0.1c0,0-0.1,0-0.1,0c0,0,0,0-0.1,0c0,0,0,0,0-0.1c-0.1,0-0.2-0.1-0.3-0.1C8.1,9.8,8,9.8,8,9.7L7.8,9.6c-0.1,0-0.1-0.1-0.2-0.1C7.4,9.3,7.2,9,7.1,8.6C7,8.3,6.9,8,6.9,7.6c0-0.2,0-0.6,0-0.9c0-0.5,0-0.8,0.1-1.1c0-0.3,0.1-0.7,0.3-1.1c0.1,0,0.1-0.2,0.3-0.5c0,0,0.1-0.1,0.1-0.1s0-0.1,0.1-0.1c0,0,0,0,0-0.1s0-0.1,0.1-0.1c0.1,0,0.2-0.1,0.3-0.2c0,0,0.1-0.1,0.2-0.1c0.1-0.1,0.1-0.1,0.2-0.1C8.5,3.1,8.8,3,9.1,2.9c0.1,0,0.1,0,0.2,0c0.1,0,0.2,0,0.2,0c0.1,0,0.2,0,0.3,0c0.1,0,0.1,0,0.2,0c0.5,0,0.9,0,1.3,0.1c0.3,0,0.7,0.1,1.1,0.2c0,0,0.1,0,0.1,0c0.3,0.1,0.5,0.2,0.6,0.2c0.1,0,0.1,0.1,0.1,0.1v0.1c0.1,0,0.2,0,0.3,0.1s0.2,0.2,0.3,0.3c0.1,0.1,0.2,0.2,0.2,0.4c0,0.1,0.1,0.2,0.1,0.3c0.1,0,0.1,0,0.1,0s0,0,0,0.1c0,0.2,0.1,0.4,0.1,0.5c0,0.1,0,0.1,0.1,0.2c0,0.1,0,0.2,0.1,0.3l0,0.1l0,0.4v0.3c0,0.6,0,1.1-0.1,1.4C14.2,8.6,14,9,13.7,9.3c-0.1,0.1-0.3,0.2-0.4,0.3l-0.4,0.3c-0.2,0.1-0.4,0.1-0.5,0.2l-0.5,0.2c-0.3,0-0.6,0-0.9,0.1c-0.3,0-0.6,0.1-0.9,0.1C9.9,10.3,9.9,10.3,9.8,10.3z M11.2,8.3c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.2,0-0.2l0-0.3c0-0.2,0-0.5,0-0.7c0-0.1,0-0.2,0-0.3c0-0.2,0-0.4-0.1-0.6c0-0.2-0.1-0.3-0.1-0.5c0-0.2-0.1-0.3-0.1-0.3c0-0.1,0-0.3-0.1-0.3c-0.1-0.1-0.1-0.1-0.3-0.1c-0.2,0-0.4,0.1-0.5,0.4c0,0.1-0.1,0.2-0.1,0.3c0,0,0,0.2,0,0.3L10,6.2C9.9,6.4,9.9,6.6,9.9,6.8c0,0.3,0,0.5,0.1,0.8c0,0.1,0,0.2,0.1,0.4s0.1,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.2c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0,0.1,0C10.9,8.6,11.1,8.5,11.2,8.3z"}),i.a.createElement("path",{fill:"#fc1010",d:"M1.6,17.5c0,0-0.1,0-0.4-0.1c-0.2,0-0.4-0.1-0.4-0.1c-0.1,0-0.2-0.1-0.2-0.2c0-0.2,0.1-0.4,0.3-0.6v0L1,16.4c0.1-0.1,0.2-0.3,0.5-0.6c0.2-0.2,0.4-0.5,0.7-0.9c0-0.1,0.1-0.1,0.1-0.2s0.1-0.1,0.1-0.2c0.1-0.1,0.2-0.3,0.3-0.6c0-0.1,0.1-0.2,0.1-0.3C3,13.5,3,13.4,3,13.3c0-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.4-0.1-0.7-0.1c-0.2,0-0.4,0-0.6,0.1c-0.1,0-0.4,0.1-0.7,0.3c0,0,0,0,0,0c0,0,0-0.1,0-0.1c0-0.2,0-0.4-0.1-0.8l0-0.6l0-0.3l0-0.2v-0.1l0.5-0.2c0.4-0.1,0.9-0.2,1.3-0.3c0.5-0.1,0.9-0.1,1.4-0.1c0.4,0,0.8,0,1.1,0.1c0.4,0.1,0.7,0.2,0.9,0.4c0.6,0.4,0.9,1,0.9,1.8c0,0.4-0.1,0.8-0.4,1.2c-0.3,0.4-0.7,0.8-1.3,1.2h0.5h0.5c0.2,0,0.4,0,0.5,0c0.2,0.1,0.3,0.1,0.3,0.3c0,0.2,0,0.5,0,0.8v0.3v0.3c0,0.2,0,0.4-0.1,0.5c-0.1,0.1-0.3,0.2-0.5,0.2c0,0-0.1,0-0.2,0c-0.1,0-0.4,0-0.9,0H4H3.6H3.1H2.6C1.9,17.5,1.6,17.5,1.6,17.5z"}),i.a.createElement("path",{fill:"#fc1010",d:"M9.8,17.7c-0.1,0-0.2,0-0.3,0l-0.6-0.1c0,0-0.1,0-0.1-0.1c0,0-0.1,0-0.1,0c0,0,0,0-0.1,0c0,0,0,0,0-0.1c-0.1,0-0.2-0.1-0.3-0.1c-0.1,0-0.2-0.1-0.3-0.1L7.8,17c-0.1,0-0.1-0.1-0.2-0.1c-0.2-0.2-0.4-0.5-0.5-0.9C7,15.7,6.9,15.4,6.9,15c0-0.2,0-0.6,0-0.9c0-0.5,0-0.8,0.1-1.1c0-0.3,0.1-0.7,0.3-1.1c0.1,0,0.1-0.2,0.3-0.5c0,0,0.1-0.1,0.1-0.1s0-0.1,0.1-0.1c0,0,0,0,0-0.1s0-0.1,0.1-0.1c0.1,0,0.2-0.1,0.3-0.2c0,0,0.1-0.1,0.2-0.1c0.1-0.1,0.1-0.1,0.2-0.1c0.2-0.1,0.5-0.2,0.8-0.3c0.1,0,0.1,0,0.2,0c0.1,0,0.2,0,0.2,0c0.1,0,0.2,0,0.3,0c0.1,0,0.1,0,0.2,0c0.5,0,0.9,0,1.3,0.1c0.3,0,0.7,0.1,1.1,0.2c0,0,0.1,0,0.1,0c0.3,0.1,0.5,0.2,0.6,0.2c0.1,0,0.1,0.1,0.1,0.1v0.1c0.1,0,0.2,0,0.3,0.1s0.2,0.2,0.3,0.3c0.1,0.1,0.2,0.2,0.2,0.4c0,0.1,0.1,0.2,0.1,0.3c0.1,0,0.1,0,0.1,0s0,0,0,0.1c0,0.2,0.1,0.4,0.1,0.5c0,0.1,0,0.1,0.1,0.2c0,0.1,0,0.2,0.1,0.3l0,0.1l0,0.4v0.3c0,0.6,0,1.1-0.1,1.4c-0.1,0.5-0.3,0.9-0.7,1.2c-0.1,0.1-0.3,0.2-0.4,0.3l-0.4,0.3c-0.2,0.1-0.4,0.1-0.5,0.2l-0.5,0.2c-0.3,0-0.6,0-0.9,0.1c-0.3,0-0.6,0.1-0.9,0.1C9.9,17.7,9.9,17.7,9.8,17.7z M11.2,15.7c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.2,0-0.2l0-0.3c0-0.2,0-0.5,0-0.7c0-0.1,0-0.2,0-0.3c0-0.2,0-0.4-0.1-0.6c0-0.2-0.1-0.3-0.1-0.5c0-0.2-0.1-0.3-0.1-0.3c0-0.1,0-0.3-0.1-0.3C10.9,12,10.8,12,10.7,12c-0.2,0-0.4,0.1-0.5,0.4c0,0.1-0.1,0.2-0.1,0.3c0,0,0,0.2,0,0.3L10,13.6c-0.1,0.2-0.1,0.4-0.1,0.6c0,0.3,0,0.5,0.1,0.8c0,0.1,0,0.2,0.1,0.4s0.1,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.2c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0,0.1,0C10.9,16,11.1,15.9,11.2,15.7z"}))}];var R=function(e){function t(n){var o=this;return(o=e.call(this,n)||this).m_x=u.b(0,70)+"%",o.m_y=u.b(0,70)+"%",o.m_nRotate=Math.floor(90*Math.random())-45,o.m_splatRots=[360*Math.random(),360*Math.random(),360*Math.random()],o.m_nPathAnimation=u.b(1,6),o.m_nKeyID=t.sm_nUnique++,o.m_strSaleId="winter2019",o}return Object(o.d)(t,e),t.prototype.fragment=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=t.map((function(e){return l.a[e]}));return o.push(l.a.snowball_fragment),r.createElement("img",{src:this.getAsset(e),className:o.join(" ")})},t.prototype.Snowball=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=e<0?l.a.SnowballImageCW:l.a.SnowballImageCCW;e>-5&&e<5&&(i="");var a=n.map((function(e){return l.a[e]}));return a.push(l.a.snowball_fragment),r.createElement("div",{style:{display:"inline-block"},className:a.join(" ")},r.createElement("img",{style:{transform:"rotation( 360deg )"},className:l.a.SnowballImage+" "+i,src:this.getAsset(t)}))},t.prototype.residue=function(){return r.createElement(r.Fragment,null,r.createElement("div",{style:{transform:"rotate("+this.m_splatRots[0]+"deg)"}},this.fragment("splat1.png","snowball-residue")),r.createElement("div",{style:{transform:"rotate("+this.m_splatRots[1]+"deg)"}},this.fragment("splat2.png","snowball-residue")),r.createElement("div",{style:{transform:"rotate("+this.m_splatRots[2]+"deg)"}},this.fragment("splat3.png","snowball-residue")))},t.prototype.render=function(){var e="snowball-path-"+this.m_nPathAnimation,t={animationName:l.a[e]};return r.createElement(r.Fragment,{key:""+this.m_nKeyID},r.createElement("div",{className:l.a["snowball-path"],style:t},r.createElement("div",{className:l.a["snowball-container"],style:{left:this.m_x,top:this.m_y,transform:"rotate( "+this.m_nRotate+"deg )"}},this.Snowball(this.m_nRotate,"snowball.png","snowball"),this.fragment("slide-out-tl.png","slide-out-tl"),this.fragment("slide-out-tr.png","slide-out-tr"),this.fragment("slide-out-bottom.png","slide-out-bottom"),this.residue(),this.fragment("snowball_1.png","snowball-chunk","snowball-chunk-1"),this.fragment("snowball_2.png","snowball-chunk","snowball-chunk-2"),this.fragment("snowball_3.png","snowball-chunk","snowball-chunk-3"),this.fragment("snowball_4.png","snowball-chunk","snowball-chunk-4"))))},t.sm_nUnique=0,t}(d),k=n("UqDm");function B(e){var t=e.data,n=m(e.sale,e.effect.name,t.strImage+".png"),o=null;if(t.SOverlay){var i=t.SOverlay?m(e.sale,e.effect.name,t.SOverlay.strImage+".png"):null,a={animationDuration:t.SOverlay.nDuration+"s"};o=r.createElement("img",{src:i,className:l.a[t.SOverlay.strClass],style:a})}var s={animationDuration:t.nDuration+"s",animationName:l.a[t.strAnimation],marginLeft:t.nOffset+"%"};return r.createElement("div",{style:s,className:l.a.balloons},r.createElement("img",{src:n,style:{maxWidth:"100%",position:"absolute"}}),o)}var P=function(e){function t(t){var n=e.call(this,t)||this;switch(n.m_rgBalloons=[],n.m_nNextImage=0,t.sale){case"lny2020":n.m_rgImages=["orange","peach","yellow"];break;default:n.m_rgImages=["balloon_blue","balloon_cyan","balloon_green","balloon_purple","balloon_red","balloon_yellow"]}return k.h(n.m_rgImages),n.GenerateBalloons(),n}return Object(o.d)(t,e),t.prototype.GetNextImage=function(){var e=this.m_rgImages[this.m_nNextImage%this.m_rgImages.length];return this.m_nNextImage++,e},t.prototype.GenerateDuration=function(){return parseFloat(l.a.balloonsDurationS)+parseFloat(l.a.balloonsDurationJitterS)*Math.random()},t.prototype.GenerateBalloons=function(){this.m_rgBalloons=[];for(var e=0,t=["balloon_small_1","balloon_small_2","balloon_small_3"];e<t.length;e++){var n=t[e],o=u.b(-10,10);this.m_rgBalloons.push(this.GenerateSingleBalloon(n,o))}var r=[70,20];k.h(r);for(var i=20==r[1],a=0,s=["balloon_big_1","balloon_big_2"];a<s.length;a++){n=s[a];var c=u.b(-10,10)+r.pop();this.m_rgBalloons.push(this.GenerateSingleBalloon(n,c))}var l=["balloon_move_left","balloon_move_right"][u.b(0,1)];i&&(l="balloon_move_left");var p=u.b(-10,10);this.m_rgBalloons.push(this.GenerateSingleBalloon(l,p))},t.prototype.GenerateSingleBalloon=function(e,t){var n=this.GetNextImage(),o={strAnimation:e,strImage:n,nDuration:this.GenerateDuration(),nOffset:t};return"lny2020"==this.props.sale&&(o.SOverlay={strImage:n+"-glow",strClass:"lantern_glow",nDuration:1+4*Math.random()}),o},t.prototype.render=function(){var e=this;return r.createElement(r.Fragment,null,this.m_rgBalloons.map((function(t,n){return r.createElement(B,{key:""+n,data:t,effect:e.props.effect,sale:e.m_strSaleId})})))},t}(d),F=n("QHER"),x=function(){function e(e){this.m_seed=e}return e.prototype.next=function(){var e=1e3*Math.sin(this.m_seed++);return e-Math.floor(e)},e}();function V(e){var t=new x(e),n=.8*t.next()+.5,o=10*(t.next()+e)+10+"px",i={opacity:n,width:o,height:o,margin:30*t.next()+15+"px",filter:"hue-rotate("+(90*t.next()-30)+"deg) saturate(100%)"},a=1+Math.floor(5*t.next()),s=p.c.COMMUNITY_CDN_ASSET_URL+"winter2019/roomeffects/96px/flake_"+a+".png";return r.createElement("img",{style:i,src:s})}var U=parseInt(l.a.balloonsDurationMaxMs),H=parseInt(l.a.snowballDurationMs);function W(e,t){return function(){var n=p.c.COMMUNITY_CDN_ASSET_URL+t+"/roomeffects/96px/"+e+".png";return r.createElement("img",{style:{width:"100%"},src:n})}}function z(e,t,n,o){return{timeout:n,renderButton:W(e,t),renderEffectIcon:W(e,t),buttonToken:"#ChatEntryButton_Send"+a.g(e),locToken:"#ChatRoom_RoomEffect"+a.g(e),render:o}}function Y(e,t,n){return z(e,"winter2019",t,n)}var q={lny2020_lanterns:z("lny2020_lanterns","lny2020",U,(function(e){return r.createElement(P,{effect:e,sale:"lny2020"})})),lny2020_firework:z("lny2020_firework","lny2020",7e3,(function(){return r.createElement(_,{sale:"lny2020"})})),lny2020_confetti:z("lny2020_confetti","lny2020",8e3,(function(){return r.createElement(A,{eType:y.LNY2020})})),snowball:Y("snowball",H,(function(e){return r.createElement(R,{effect:e,sale:"winter2019"})})),balloons:Y("balloons",U,(function(e){return r.createElement(P,{effect:e,sale:"winter2019"})})),confetti:Y("confetti",8e3,(function(){return r.createElement(A,{eType:y.Default})})),goldfetti:Y("goldfetti",8e3,(function(){return r.createElement(A,{eType:y.Gold})})),firework:Y("firework",7e3,(function(){return r.createElement(_,{sale:"winter2019"})})),snow:Y("snow",1e4,(function(e){for(var t=[],n=new x(e.timestamp),o=0;o<150;o++){var i=n.next(),a={left:100*n.next()+"%",animationDuration:3*(1-i)+4+"s",animationDelay:i+4*n.next()+"s"};t.push(r.createElement("div",{key:e.timestamp+"_"+o,style:a,className:Object(F.a)(l.a.Snowflake,l.a["Snowflake-"+o%20])},V(i),V(i+1)))}return r.createElement(r.Fragment,null," ",t," ")}))},K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return r.createElement("div",{className:l.a["animation-container"]},this.props.effectManager.m_rgRunningEffects.map((function(e){return r.createElement(r.Fragment,{key:e.timestamp},e.render())})))},t=Object(o.c)([s.a],t)}(r.Component)},J0bI:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("2vnA"),i=n("0N1H"),a=n("tkkQ"),s=function(){function e(e){this.m_bReady=!1,this.m_bValid=!1,this.m_strInviteCode=e}return e.prototype.BIsReady=function(){return this.m_bReady},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.BIsInviteLink=function(){return!!this.m_strInviteCode},e.prototype.GetInviteCode=function(){return this.m_strInviteCode},e.prototype.BNeverExpires=function(){return this.m_rtTimeExpires==i.g},e.prototype.GetChatRoomGroupID=function(){return this.m_ulChatRoomGroupID},e.prototype.BIsVoiceChatInvite=function(){return!!this.m_ulChatID},e.prototype.GetChatID=function(){return this.m_ulChatID},e.prototype.GetURL=function(){return this.m_strInviteCode?c(this.m_strInviteCode):null},e.prototype.BIsUserBanned=function(){return this.m_bIsBanned},e.prototype.GetTimeKickExpires=function(){return this.m_rtKickExpires},Object.defineProperty(e.prototype,"time_expires",{get:function(){return this.m_rtTimeExpires},enumerable:!1,configurable:!0}),e.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},e.prototype.InitDirectInvite=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=n,this.m_rtKickExpires=o,this.m_rtTimeExpires=i.g,this.m_bValid=!0,this.m_bReady=!0},Object(o.c)([r.A],e.prototype,"m_bReady",void 0),Object(o.c)([r.i],e.prototype,"InitInvalid",null),Object(o.c)([r.i],e.prototype,"InitDirectInvite",null),e}();function c(e){return"public"==a.a.WEB_UNIVERSE?"https://s.team/chat/"+e:a.a.COMMUNITY_BASE_URL+"chat/invite/"+e}},Jdiq:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return p}));var o=n("mrSG"),r=n("1n9R"),i=n("2vnA"),a=n("q1tI"),s=n("G+3Z"),c=function(){function e(){this.m_mapEmoticonHovers=new Map}return e.prototype.GetEmoticonHover=function(e){var t=this.m_mapEmoticonHovers.get(e);return t||(t=new l(e),this.m_mapEmoticonHovers.set(e,t)),t},e}(),l=function(){function e(e){this.m_bVisible=!1,this.m_strEmoticonHoverHTML=void 0,this.m_bLoadingData=!1,this.m_strEmoticonName=e}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.m_bVisible&&!!this.m_strEmoticonHoverHTML},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emoticon_html",{get:function(){return this.m_strEmoticonHoverHTML},enumerable:!1,configurable:!0}),e.prototype.Show=function(t,n){var o=this;this.EnsureEmoticonLoaded();var r=t.currentTarget,i=a.createElement(n,{hover:this,target:r});e.sm_embeddedElements.ShowElementDelayed(r.ownerDocument,50,i,this).then((function(){o.m_bVisible=!0}))},e.prototype.Hide=function(t){this.m_bVisible=!1,e.sm_embeddedElements.HideElement(t.currentTarget.ownerDocument,this,500)},e.prototype.EnsureEmoticonLoaded=function(){var e=this;if(void 0===this.m_strEmoticonHoverHTML&&!this.m_bLoadingData){this.m_bLoadingData=!0;var t="OnLoadEmoticon_"+this.m_strEmoticonName,n=r.c.COMMUNITY_CDN_URL+"economy/emoticonhover/"+encodeURIComponent(this.m_strEmoticonName)+"/jsonp.js?callback="+encodeURIComponent(t)+"&l="+encodeURIComponent(r.c.LANGUAGE),o=void 0,i=void 0,a=function(){e.m_bLoadingData=!1,delete window[t],o&&window.clearTimeout(o),i&&i.remove()};window[t]=function(t){e.m_strEmoticonHoverHTML=t,e.m_bVisible=!0,a()},o=window.setTimeout(a,5e3),(i=window.document.createElement("script")).type="text/javascript",i.async=!0,i.src=n,i.onerror=a,window.document.head.appendChild(i)}},e.sm_embeddedElements=new s.a("CEmoticonHoverContainer"),Object(o.c)([i.A],e.prototype,"m_bVisible",void 0),Object(o.c)([i.A],e.prototype,"m_strEmoticonHoverHTML",void 0),e}(),p=new c},JpLe:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAc9JREFUeNrsmz1Lw1AUhnP8qB+Qkk0pItbVxcX/IM6Cky7iFH+Jk79BwclBB3+AszgUwdVNBxFaCw1E7fW9cAep5pa0NiT3vgdeLjRJm/Ocm/NRiCilAp9tKvDcCIAACIAAsiyEzqAepCqqnvEhzHJSLGVQX7jvSKDPoYO8ADS9BUcAJNBiXgCudUjCJEgABPDLZip2v12obwIXur4DdBK+MeVrHaqJSB2KzKqT2izUgLZd2wH30CF8bFnTusgnlhdUsjmXAFxBe3Au9TEJ3hXpfNkA9M22T4v80TIBuIbzDz73ARe+9wG31pqo1DSWGNqBlgcO16oO4A3b/3XIOafQ8b9PSCWZBh8BYMMSfd3wvEPzrk6DH0OON8Z0vvLDkHAaJAACIICJJJeCy+Aa1Pnj8y+Uwa6lDOpA1S3fewSdjJJIi26EOnC0nTtKInpQalsALfn+CDQJgAA8BYDnP8IS+bwDmuNcXHQVWDURG7QUmf7ZEmV9nysZh7dcGIdbALBpAaD7h6dJDFRshQmAAAiAAAiAAAiAAAiAAAiAAAiAAAjgpyUO+ZmMAuDSIQCZvtj+E4zNuhtU98WJxDgfZ50gfHOUSZAACIAAPLZvAQYAZ32YkpymkAcAAAAASUVORK5CYII="},JtU4:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g}));var o,r=n("mrSG"),i=n("2vnA"),a=n("i8i4"),s=n("UqDm"),c=n("WpBz"),l=n("1VtQ"),p=n("hEDq"),u=n("oh5H"),m=n("1n9R");!function(e){e[e.Minimized=1]="Minimized",e[e.Hidden=2]="Hidden",e[e.Tooltip=4]="Tooltip",e[e.ContextMenu=8]="ContextMenu",e[e.Resizable=16]="Resizable"}(o||(o={}));var d=function(){function e(e,t){this.m_rgLoadingLinks=[],this.m_rgLoadingLinks=[];for(var n=e.document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o];r.addEventListener("load",this.OnLinkLoad),this.m_rgLoadingLinks.push(r)}}return e.prototype.SetTarget=function(e){this.m_fnRender=e,0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},e.prototype.OnLinkLoad=function(e){e.currentTarget.removeEventListener("load",this.OnLinkLoad),s.c(this.m_rgLoadingLinks,e.currentTarget),0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},Object(r.c)([l.a],e.prototype,"OnLinkLoad",null),e}(),h=function(){function e(e,t){this.m_bFocused=!1,this.m_strName=e,this.m_rgParams=t,this.m_rgParams.target_browser&&(this.m_strName+="_pid"+this.m_rgParams.target_browser.m_unPID),this.m_strTitle=t.title,delete this.m_rgParams.title}return e.prototype.UpdateParamsBeforeShow=function(e){return e},e.prototype.OnDrop=function(e){console.log("Ignoring drop onto toplevel window",e),e.preventDefault(),e.stopPropagation()},e.prototype.OnDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="none",e.stopPropagation()},e.prototype.OnMessage=function(e){"window_moved"==e.data&&this.OnResize()},e.prototype.Show=function(e,t){var n,r=this;void 0===e&&(e=!0),void 0===t&&(t=!1),window.SteamClient&&(this.m_rgParams.eCreationFlags|=o.Hidden),this.m_rgParams.eCreationFlags&o.Tooltip&&(e=!1),this.BIsValid()&&(this.BIsClosed()?(this.m_popup=void 0,this.m_element=void 0):e&&this.Focus(t));var i=g.GetExistingPopup(this.m_strName);if(!i||this.m_rgParams.replace_existing_popup){var a,s,c;if(this.m_rgParams=this.UpdateParamsBeforeShow(this.m_rgParams),i?(s=i.m_element,a=i.m_popup,i.ReleasePopup(),c=i.m_renderWhenReady,g.RemoveTrackedPopup(i),a.removeEventListener("beforeunload",i.OnBeforeUnloadEvent),a.removeEventListener("unload",i.OnUnload),a.removeEventListener("resize",i.OnResizeEvent),a.removeEventListener("focus",this.OnFocusInternal),a.removeEventListener("blur",this.OnBlurInternal),a.removeEventListener("drop",i.OnDrop),a.removeEventListener("dragover",i.OnDragOver),a.removeEventListener("message",this.OnMessage)):(a=(n=_.CreatePopup(this.m_strName,this.m_rgParams)).popup,s=n.element,c=new d(a,s)),a&&s){if(a.document.title=this.m_strTitle,a.addEventListener("beforeunload",this.OnBeforeUnloadEvent),a.addEventListener("unload",this.OnUnload),a.addEventListener("resize",this.OnResizeEvent),a.addEventListener("focus",this.OnFocusInternal),a.addEventListener("blur",this.OnBlurInternal),a.addEventListener("drop",this.OnDrop),a.addEventListener("dragover",this.OnDragOver),a.addEventListener("message",this.OnMessage),m.c.LANGUAGE){var l="koreana"==m.c.LANGUAGE?"korean":m.c.LANGUAGE;a.document.documentElement.setAttribute("lang",u.b[l])}this.m_popup=a,this.m_element=s,this.m_renderWhenReady=c,this.m_renderWhenReady.SetTarget((function(){return r.RenderInternal(r.m_popup,r.m_element,e)}))}g.AddTrackedPopup(this),i&&e&&this.Focus()}},e.prototype.RemoveEventListeners=function(){this.window.removeEventListener("beforeunload",this.OnBeforeUnloadEvent),this.window.removeEventListener("unload",this.OnUnload),this.window.removeEventListener("resize",this.OnResizeEvent),this.window.removeEventListener("focus",this.OnFocusInternal),this.window.removeEventListener("blur",this.OnBlurInternal),this.window.removeEventListener("drop",this.OnDrop),this.window.removeEventListener("dragover",this.OnDragOver),this.window.removeEventListener("message",this.OnMessage)},e.prototype.RenderInternal=function(e,t,n){var o;this.browser_info&&((o=this.browser_info).m_eBrowserType==p.g.EBrowserType_OpenVROverlay||o.m_eBrowserType==p.g.EBrowserType_OpenVROverlay_Dashboard)&&(t.ownerDocument.body.className+=" VR"),this.Render(e,t),this.OnLoad(),e.SteamClient&&(n?e.SteamClient.Window.BringToFront():e.SteamClient.Window.ShowWindow())},e.prototype.OnResizeEvent=function(){this.OnResize()},e.prototype.OnBeforeUnloadEvent=function(){this.OnBeforeUnload()},e.prototype.OnUnload=function(){this.RemoveEventListeners(),g.RemoveTrackedPopup(this),this.OnClose(),a.unmountComponentAtNode(this.m_element)},Object.defineProperty(e.prototype,"browser_info",{get:function(){return this.m_rgParams.target_browser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.m_popup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_element",{get:function(){return this.m_element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.m_strTitle},set:function(e){this.m_strTitle=e,this.m_popup&&(this.m_popup.document.title=this.m_strTitle)},enumerable:!1,configurable:!0}),e.prototype.Focus=function(e){void 0===e&&(e=!1),this.m_popup&&void 0!==this.m_popup.SteamClient&&void 0!==this.m_popup.SteamClient.Window?e?this.m_popup.SteamClient.Window.SetForegroundWindow():this.m_popup.SteamClient.Window.BringToFront():this.m_popup&&this.m_popup.focus()},e.prototype.Close=function(){this.m_popup&&this.m_popup.close()},e.prototype.GetName=function(){return this.m_strName},e.prototype.BIsValid=function(){return!!this.m_popup},e.prototype.BIsClosed=function(){return!this.m_popup||this.m_popup.closed},e.prototype.BIsVisible=function(){return this.m_popup&&!this.m_popup.closed&&"visible"==this.m_popup.document.visibilityState},e.prototype.BIsFocused=function(){return this.BIsVisible()&&this.m_popup.document.hasFocus()},e.prototype.OnFocusInternal=function(){this.m_bFocused=!0,this.OnFocus()},e.prototype.OnBlurInternal=function(){this.m_bFocused=!1,this.OnBlur()},Object.defineProperty(e.prototype,"focused",{get:function(){return this.m_bFocused},enumerable:!1,configurable:!0}),e.prototype.GetWindowRestoreDetails=function(){var e=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient?new Promise((function(t,n){e.m_popup.SteamClient.Window.GetWindowRestoreDetails((function(e){t(e)}))})):Promise.resolve("")},e.prototype.IsMinimized=function(){var e=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient&&this.m_popup.SteamClient.Window&&this.m_popup.SteamClient.Window.IsWindowMinimized?new Promise((function(t,n){e.m_popup.SteamClient.Window.IsWindowMinimized((function(e){t(e)}))})):Promise.resolve(!1)},e.prototype.ReleasePopup=function(){this.OnClose(),this.m_popup=null},e.prototype.OnBeforeUnload=function(){},e.prototype.OnFocus=function(){},e.prototype.OnBlur=function(){},Object(r.c)([i.A],e.prototype,"m_bFocused",void 0),Object(r.c)([l.a],e.prototype,"OnMessage",null),Object(r.c)([l.a],e.prototype,"OnResizeEvent",null),Object(r.c)([l.a],e.prototype,"OnBeforeUnloadEvent",null),Object(r.c)([l.a],e.prototype,"OnUnload",null),Object(r.c)([l.a],e.prototype,"OnFocusInternal",null),Object(r.c)([l.a],e.prototype,"OnBlurInternal",null),e}(),f=function(e){function t(t,n,o,r){var i=e.call(this,t,o)||this;return i.SetSavedDimensionsKey(n),i.m_bExpires=r,i}return Object(r.d)(t,e),t.prototype.BIsInOverlay=function(){return this.browser_info&&this.browser_info!={m_unPID:0,m_nBrowserID:-1}},t.prototype.SetSavedDimensionsKey=function(e){this.m_strSavedDimensionsKey=e},t.prototype.UpdateParamsBeforeShow=function(e){return!this.m_strSavedDimensionsKey||e.bIgnoreSavedDimensions||e.strRestoreDetails?e.strRestoreDetails&&(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),g.SetRestoreDetails(this.m_strInitialSavedDimensionsKey,e.strRestoreDetails,this.m_bExpires)):(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),e.strRestoreDetails=g.GetRestoreDetails(this.m_strInitialSavedDimensionsKey)),e},t.prototype.OnLoad=function(){var e=this;this.GetWindowRestoreDetails().then((function(t){e.m_strInitialRestoreDetails=t,e.OnResizeComplete(t)}))},t.prototype.OnResize=function(){this.QueryAndStoreWindowPosition()},t.prototype.OnResizeComplete=function(e){},t.prototype.QueryAndStoreWindowPosition=function(){var e=this;if(this.m_strInitialRestoreDetails){var t=this.GetSavedDimensionsKey();this.m_popup.setTimeout((function(){e.GetWindowRestoreDetails().then((function(n){var o=e.m_strInitialRestoreDetails==n&&t==e.m_strInitialSavedDimensionsKey;e.m_popup&&e.m_strSavedDimensionsKey&&n&&!o&&(g.SetRestoreDetails(t,n,e.m_bExpires),e.m_rgParams.strRestoreDetails=n,e.m_strInitialSavedDimensionsKey=t,e.OnResizeComplete(n))}))}),30)}},t.prototype.OnBeforeUnload=function(){this.QueryAndStoreWindowPosition(),e.prototype.OnBeforeUnload.call(this)},t.prototype.OnClose=function(){},t.prototype.SaveWindowPosition=function(e){g.SetRestoreDetails(this.GetSavedDimensionsKey(),e,!1),this.m_rgParams.strRestoreDetails=e},Object(r.c)([l.a],t.prototype,"QueryAndStoreWindowPosition",null),t}(h),_=function(){function e(){var e=this;this.m_bShuttingDown=!1,this.m_mapPopups=new Map,this.m_rgShutdownCallbacks=[],this.m_rgPopupCreatedCallbacks=[],this.m_unCurrentAccountID=0,this.m_mapRestoreDetails=new Map,this.m_bSaveRequired=!1,Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||window.addEventListener("beforeunload",(function(t){e.m_bShuttingDown=!0;for(var n=0,o=e.m_rgShutdownCallbacks;n<o.length;n++){(0,o[n])()}var r=[];e.m_mapPopups.forEach((function(e){e.BIsValid()&&!e.BIsClosed()&&r.push(e)}));for(var i=0,a=r;i<a.length;i++){a[i].Close()}e.m_bSaveRequired&&e.SaveSavedDimensionStore(),e.m_mapPopups.clear()}))}return e.prototype.SetCurrentLoggedInAccountID=function(e){this.m_unCurrentAccountID=e,e?this.LoadSavedDimensionStore():this.ClearSavedDimensionStore()},e.prototype.AddShutdownCallback=function(e){this.m_rgShutdownCallbacks.push(e)},e.prototype.AddPopupCreatedCallback=function(e){this.m_rgPopupCreatedCallbacks.push(e)},e.prototype.AddTrackedPopup=function(e){this.m_mapPopups.set(e.GetName(),e);for(var t=0,n=this.m_rgPopupCreatedCallbacks;t<n.length;t++){(0,n[t])(e)}},e.prototype.RemoveTrackedPopup=function(e){this.m_mapPopups.delete(e.GetName())},e.prototype.GetExistingPopup=function(e){return this.m_mapPopups.get(e)},e.prototype.GetPopups=function(){return this.m_mapPopups.values()},e.prototype.ClosePopupsOwnedByBrowser=function(e){this.m_mapPopups.forEach((function(t){t.browser_info&&t.browser_info.m_nBrowserID==e.m_nBrowserID&&t.browser_info.m_unPID==e.m_unPID&&t.Close()}))},e.CreatePopup=function(e,t){var n=t.dimensions||{},o=n.width||300,r=n.height||300,i=t.title,a="width="+o+",height="+r;void 0!==n.left&&(a+=",left="+n.left),void 0!==n.top&&(a+=",top="+n.top),a+=",resizeable,status=0,toolbar=0,menubar=0,location=0";var s="about:blank",c=[];c.push("createflags="+t.eCreationFlags),t.minWidth&&c.push("minwidth="+t.minWidth),t.minHeight&&c.push("minheight="+t.minHeight),t.target_browser&&(c.push("pid="+t.target_browser.m_unPID),c.push("browser="+t.target_browser.m_nBrowserID),c.push("browserType="+t.target_browser.m_eBrowserType),t.availscreenwidth&&t.availscreenheight&&(c.push("screenavailwidth="+t.availscreenwidth),c.push("screenavailheight="+t.availscreenheight))),t.strVROverlayKey&&c.push("vrOverlayKey="+t.strVROverlayKey),t.strRestoreDetails&&c.push("restoredetails="+t.strRestoreDetails),c&&(s+="?"+c.join("&"));var l=(t.owner_window||window).open(s,e,a,!0);if(!l)return console.log("Failed to create popup.. browser popup blocker enabled?"),{};var p="";t.html_class&&(p='class="'+t.html_class+'"');var u="";t.body_class&&(u='class="'+t.body_class+'"');var m="<!DOCTYPE html><html "+p+"><head><title></title></head><body "+u+'><div id="popup_target"></div></body></html>';l.document.write(m),l.document.title=i;for(var d=l.document.getElementsByTagName("head")[0],h=document.getElementsByTagName("link"),f=0;f<h.length;f++){var _=h[f];if("stylesheet"==_.rel){for(var g=l.document.createElement("link"),b=0;b<_.attributes.length;b++){var v=_.attributes.item(b);g.setAttribute(v.name,v.value)}d.appendChild(g)}}return{popup:l,element:l.document.getElementById("popup_target")}},e.prototype.BShuttingDown=function(){return this.m_bShuttingDown},e.prototype.GetLocalStorageKey=function(){return"PopupSavedDimensions_"+this.m_unCurrentAccountID},e.prototype.LoadSavedDimensionStore=function(){if(this.m_unCurrentAccountID){var e=this.GetLocalStorageKey();this.m_mapRestoreDetails=void 0;var t=window.localStorage.getItem(e);if(t)try{var n=JSON.parse(t);this.m_mapRestoreDetails=new Map(n)}catch(e){}this.m_mapRestoreDetails||(this.m_mapRestoreDetails=new Map)}},e.prototype.SaveSavedDimensionStore=function(){if(this.m_unCurrentAccountID&&this.m_bSaveRequired){var e=this.GetLocalStorageKey(),t=JSON.stringify(Array.from(this.m_mapRestoreDetails));window.localStorage.setItem(e,t),this.m_bSaveRequired=!1}},e.prototype.DebouncedSaveSavedDimensionStore=function(){this.SaveSavedDimensionStore()},e.prototype.ClearSavedDimensionStore=function(){this.m_mapRestoreDetails.clear(),this.m_bSaveRequired=!1},e.prototype.GetRestoreDetails=function(e){if(!this.m_mapRestoreDetails.has(e))return"";var t=this.m_mapRestoreDetails.get(e);return t.last_used=Date.now(),this.m_bSaveRequired=!0,t.strRestoreDetails},e.prototype.SetRestoreDetails=function(e,t,n){if(e){if(t){if(this.m_mapRestoreDetails.size>50){for(var o=null,r=Date.now(),i=0,a=Array.from(this.m_mapRestoreDetails.keys());i<a.length;i++){var s=a[i],c=this.m_mapRestoreDetails.get(s);c.last_used<r&&c.bExpires&&(r=c.last_used,o=s)}o&&this.m_mapRestoreDetails.delete(o)}var l={strRestoreDetails:t,last_used:Date.now(),bExpires:n};this.m_mapRestoreDetails.set(e,l)}else this.m_mapRestoreDetails.delete(e);this.m_bSaveRequired=!0,this.m_bShuttingDown?this.SaveSavedDimensionStore():this.DebouncedSaveSavedDimensionStore()}},Object(r.c)([l.a,Object(c.a)(100)],e.prototype,"DebouncedSaveSavedDimensionStore",null),e}(),g=new _;window.g_PopupManager=g},KbL7:function(e,t,n){e.exports={LinkRegionDragBox:"linkregionbox_LinkRegionDragBox_30gow",EdgeDown:"linkregionbox_EdgeDown_2KJWP",LinkRegionGridBox:"linkregionbox_LinkRegionGridBox_3kwxE",LinkRegionEdge:"linkregionbox_LinkRegionEdge_16X85",TopLeft:"linkregionbox_TopLeft_3J4m2",Top:"linkregionbox_Top_3RaBH",TopRight:"linkregionbox_TopRight_2e7aK",Left:"linkregionbox_Left_1iu6o",Middle:"linkregionbox_Middle_2MnJB",LinkRegionDelete:"linkregionbox_LinkRegionDelete_1XFNl",LinkRegionSettings:"linkregionbox_LinkRegionSettings_3C4OG",Right:"linkregionbox_Right_Ac7Xw",BottomLeft:"linkregionbox_BottomLeft_17zCN",Bottom:"linkregionbox_Bottom_3UG2b",BottomRight:"linkregionbox_BottomRight_2LtxP",topleft:"linkregionbox_topleft_3uA3d",top:"linkregionbox_top_3n36t",topright:"linkregionbox_topright_QhQBC",left:"linkregionbox_left_3bGAT",right:"linkregionbox_right_34G3G",bottomleft:"linkregionbox_bottomleft_33Spq",bottom:"linkregionbox_bottom_2-wfY",bottomright:"linkregionbox_bottomright_3OGuI",middle:"linkregionbox_middle_2mmT4",LinkRegionButtonContainer:"linkregionbox_LinkRegionButtonContainer_sVjOG",DialogButton:"linkregionbox_DialogButton_22RKk",LinkRegionInfo:"linkregionbox_LinkRegionInfo_kIMQQ",LinkText:"linkregionbox_LinkText_1bynV"}},Kcgk:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y}));var o=n("oh5H"),r=n("ujHl"),i=n("Gp1o");function a(e,t){void 0===t&&(t=!1);var n=t?"#TimeInterval_":"#TimeSince_";return e>=2*r.d.PerYear?Object(o.d)(n+"XYears",Math.floor(e/r.d.PerYear)):e>=r.d.PerYear?(e-=r.d.PerYear)>=2*r.d.PerMonth?Object(o.d)(n+"1YearXMonths",Math.floor(e/r.d.PerMonth)):Object(o.d)(n+"1Year"):e>=2*r.d.PerMonth?Object(o.d)(n+"XMonths",Math.floor(e/r.d.PerMonth)):e>=2*r.d.PerWeek?Object(o.d)(n+"XWeeks",Math.floor(e/r.d.PerWeek)):e>=r.d.PerWeek?Object(o.d)(n+"1Week",Math.floor(e/r.d.PerWeek)):e>=2*r.d.PerDay?Object(o.d)(n+"XDays",Math.floor(e/r.d.PerDay)):e>=r.d.PerDay?(e-=r.d.PerDay)>=2*r.d.PerHour?Object(o.d)(n+"1DayXHours",Math.floor(e/r.d.PerHour)):Object(o.d)(n+"1Day"):e>=2*r.d.PerHour?Object(o.d)(n+"XHours",Math.floor(e/r.d.PerHour)):e>=r.d.PerHour?(e-=r.d.PerHour)>=2*r.d.PerMinute?Object(o.d)(n+"1HourXMinutes",Math.floor(e/r.d.PerMinute)):Object(o.d)(n+"1Hour"):e>=2*r.d.PerMinute?Object(o.d)(n+"XMinutes",Math.floor(e/r.d.PerMinute)):e>=r.d.PerMinute?Object(o.d)(n+"1Minute"):Object(o.d)(n+"LessThanAMinute")}function s(e,t){var n={weekday:"short",month:"long",day:"numeric",year:t?void 0:"numeric"};return new Date(1e3*e).toLocaleDateString(o.c.GetPreferredLocales(),n)}function c(e){return new Date(1e3*e).toLocaleTimeString(o.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric"})}var l=new Map;function p(e){var t=new Date(1e3*e),n=o.c.GetPreferredLocales(),r=function(e){var t=l.get(e);if(!0===t||!1===t)return t;var n=new Date;return n.setHours(15),t=n.toLocaleTimeString(e,{hour:"numeric"})==n.toLocaleTimeString(e,{hour:"numeric",hour12:!1}),l.set(e,t),t}(n[0]);return t.toLocaleTimeString(n,r?{hour:"numeric",minute:"numeric"}:{hour:"numeric",hour12:!0})}var u=new Map,m=new Map;function d(e,t){var n=new Date,r=new Date(1e3*e);if(r.getFullYear()!=n.getFullYear())return function(e){var t=new Date(1e3*e),n=t.setHours(0,0,0,0),r=u.get(n);return r||(r=t.toLocaleDateString(o.c.GetPreferredLocales(),{year:"numeric",month:"short",day:"numeric"}),u.set(n,r),r)}(e);i.b((new Date).setHours(24,0,0,0)-n.getTime());var a=new Date;if(a.setHours(0,0,0,0),r>=a){if(a.setDate(a.getDate()+1),r<a)return Object(o.d)("#Time_Today");if(a.setDate(a.getDate()+1),r<a)return Object(o.d)("#Time_Tomorrow")}else if(a.setDate(a.getDate()-1),r>=a)return Object(o.d)("#Time_Yesterday");var s={month:t?"long":"short",day:"numeric"},c=r.setHours(0,0,0,0)+s.month,l=m.get(c);return l||(l=r.toLocaleDateString(o.c.GetPreferredLocales(),s),m.set(c,l),l)}function h(e){var t=new Date(1e3*e),n=new Date;if(t>n)return i.b(t.getTime()-n.getTime()),t.getFullYear()==n.getFullYear()?S(t):C(t);i.b((new Date).setHours(24,0,0,0)-n.getTime());var a=new Date;if(a.setHours(0,0,0,0),t>=a)return Object(o.d)("#Time_Today");if(a.setDate(a.getDate()-1),t>=a)return Object(o.d)("#Time_Yesterday");if(a.setDate(a.getDate()-5),t>=a)return Object(o.d)("#TimeSince_ThisWeek");var s=new Date(a);if(a.setDate(a.getDate()-21),t>=a||t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()){var c=Math.floor((s.valueOf()-t.valueOf())/(1e3*r.d.PerWeek))+1;return 1==c?Object(o.d)("#TimeSince_1Week"):Object(o.d)("#TimeSince_XWeeks",c)}return t.getFullYear()==n.getFullYear()?S(t):C(t)}var f=new Map,_=new Map,g=(new Map,new Map),b=new Map;function v(e,t){void 0===t&&(t=!1);var n=e.getDate()+31*(e.getMonth()+12*e.getFullYear()),r=b.get(n);return r||(r=e.toLocaleDateString(o.c.GetPreferredLocales(),{weekday:"long",day:"numeric",month:t?"long":"short"}),b.set(n,r),r)}function y(e){var t=f.get(e.getDay());return t||(t=e.toLocaleDateString(o.c.GetPreferredLocales(),{weekday:"long"}),f.set(e.getDay(),t),t)}function S(e){var t=_.get(e.getMonth());return t||(t=e.toLocaleDateString(o.c.GetPreferredLocales(),{month:"long"}),_.set(e.getMonth(),t),t)}function C(e){var t=e.getMonth()+12*e.getFullYear(),n=g.get(t);return n||(n=e.toLocaleDateString(o.c.GetPreferredLocales(),{month:"long",year:"numeric"}),g.set(t,n),n)}},Kqva:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var o=function(){function e(e,t,n){void 0===t&&(t=0),this.m_nOffset=t||0,e instanceof Uint8Array||e instanceof DataView?(this.m_nLength=n||e.byteLength-this.m_nOffset,this.m_nOffset+=e.byteOffset,this.m_viewPacket=new DataView(e.buffer,this.m_nOffset,this.m_nLength)):(this.m_nLength=n||e.byteLength-this.m_nOffset,this.m_viewPacket=new DataView(e,this.m_nOffset,this.m_nLength)),this.m_rgubPacket=new Uint8Array(this.m_viewPacket.buffer,this.m_viewPacket.byteOffset,this.m_viewPacket.byteLength),this.m_iGet=0,this.m_iPut=0}return e.prototype.TellGet=function(){return this.m_iGet+this.m_viewPacket.byteOffset},e.prototype.GetPacket=function(){return this.m_viewPacket.buffer},e.prototype.GetUint8=function(){return this.m_viewPacket.getUint8(this.m_iGet++)},e.prototype.GetUint32=function(e){void 0===e&&(e=!0);var t=this.m_viewPacket.getUint32(this.m_iGet,e);return this.m_iGet+=4,t},e.prototype.SeekGetHead=function(e){void 0===e&&(e=0),this.m_iGet=e||0},e.prototype.SeekGetCurrent=function(e){this.m_iGet+=e},e.prototype.TellPut=function(){return this.m_iPut+this.m_viewPacket.byteOffset},e.prototype.TellMaxPut=function(){return this.m_viewPacket.byteLength},e.prototype.PutUint8=function(e){this.m_viewPacket.setUint8(this.m_iPut++,e)},e.prototype.PutUint32=function(e,t){void 0===t&&(t=!0),this.m_viewPacket.setUint32(this.m_iPut,e,t),this.m_iPut+=4},e.prototype.PutBytes=function(e){this.m_rgubPacket.set(e,this.m_iPut),this.m_iPut+=e.length},e.prototype.SeekPut=function(e){this.m_iPut+=e},e.prototype.GetCountBytesRemaining=function(){return this.m_viewPacket.byteLength-this.m_iGet},e}(),r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(e){for(var t="",n=0;n<e.length;n++){var o=e[n];t+=r[o>>>4]+r[15&o]}return t}function a(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length-1;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}},Kwyy:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return P}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("i8i4"),s=n("1VtQ"),c=n("1n9R"),l=n("2vnA"),p=n("okNM"),u=n("D3Kh"),m=n("ljid"),d=n("e2SU"),h=n("NB6M"),f=n("hx5d"),_=n("Hi0u"),g=n("oh5H"),b=n("LAqV"),v=n("hReu"),y=n("Z578"),S=n("YZlK"),C=n("bbBM"),O=(n("cTkQ"),function(e){var t=e.group,n=e.onClick,o=t.watching_broadcast_steamid;return i.a.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:n},i.a.createElement("div",{className:"ChatRoomListGroupItem_header"},i.a.createElement(S.a,{group:t,small:!0}),i.a.createElement("div",{className:"groupNameStatusContainer"},i.a.createElement("div",{className:"chatRoomName"},t.name),o&&i.a.createElement("div",{className:"chatRoomDetails"},Object(g.d)("#Broadcast_WatchParty_Viewers_NoneActive")))))}),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.CreateWatchParty=function(e){void 0===e&&(e=!1);var t=this.props,n=t.browserContext,o=t.ownerWindow,r=t.broadcastAccountId,a=t.initialFriend;this.Close();var s=e&&a?[a.accountid]:[];!function(e,t,n,o){Object(_.c)(i.a.createElement(y.a,{browserContext:e,bHideChatNameEntry:!1,vecInvitePlayers:o,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:n},strTitle:Object(g.d)("#Broadcast_CreateWatchParty")}),t,"CreateChatDialog",{strTitle:Object(g.d)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600},Object(v.g)(t))}(n,o||window,r,s)},t.prototype.WatchAlone=function(){this.Close()},t.prototype.UpgradeExisting=function(e){var t=this.props,n=t.broadcastAccountId,o=t.browserContext,r=t.broadcastChannelID,i=t.broadcastTabId;this.Close(),r?e.SetChatRoomGroupWatchingBroadcast(void 0,r):e.SetChatRoomGroupWatchingBroadcast(n);var a=b.f.UIStore.ShowAndOrActivateChatRoomGroup(o,e,!0);i&&b.f.UIStore.CloseTabByID(i),this.props.bIsNewSteamTVDialog||a.ShowBroadcast()},t.prototype.Close=function(){var e=this.props.closeModal;e&&e()},t.prototype.render=function(){var e=this,t=this.props,n=t.closeModal,o=t.initialFriend,r=b.f.ChatStore.currentChatRoomGroups.filter((function(e){return e.BCanIAssociateBroadcast()})),a=o;return i.a.createElement("div",{className:"chatModalCover"},i.a.createElement(_.a,{onEscKeypress:n},i.a.createElement(m.g,{className:"watchPartyDialog"},i.a.createElement(m.b,null,i.a.createElement("div",{className:"watchPartyPrompt"},Object(g.d)("#Broadcast_WatchPrompt")),i.a.createElement(m.n,null,!this.props.bIsNewSteamTVDialog&&i.a.createElement(m.d,{svgicon:d.v,className:"watchHowButton",onClick:this.WatchAlone},Object(g.d)("#Broadcast_WatchAlone")),a&&i.a.createElement(m.d,{className:"watchHowButton",onClick:function(){return e.CreateWatchParty(!0)}},i.a.createElement(C.d,{friend:a,context:null,bLarge:!1}),Object(g.k)("#Broadcast_WatchWith",i.a.createElement("span",{className:"highlight"}," ",a.display_name))),0!==r.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement(m.p,null,Object(g.d)("#Broadcast_WatchWithExistingWatchParty")),r.map((function(t){return i.a.createElement(O,{key:t.unique_id,group:t,onClick:function(){return e.UpgradeExisting(t)}})}))),i.a.createElement(m.d,{className:"watchHowButton newWatchGroup",svgicon:d.M,onClick:function(){return e.CreateWatchParty(!1)}},Object(g.d)("#Broadcast_LinkBroadcastToGroup_New")))),i.a.createElement(m.j,null))))},Object(o.c)([s.a],t.prototype,"WatchAlone",null),Object(o.c)([s.a],t.prototype,"Close",null),t}(i.a.Component);var E=n("xdma"),w=n("XCHq"),A=n("/7KC"),D=n("dcQ8"),T=n.n(D),M=n("kQil");function j(){window.sessionStorage.setItem("oFriendsUIStartupParam",JSON.stringify({command:{command:"ShowWatchBroadcast",steamid:c.a.steamid}}))}var L=function(){function e(){this.m_iTimeoutLogin=void 0,this.m_eLogonState=0,this.m_bLogonDialogVisisible=!1}return e.prototype.Init=function(e){var t=this;this.m_fnLaunchChat=e,this.m_steamID=c.a.steamid,window.addEventListener("message",this.HandlePostMessage),a.render(i.a.createElement(G,{app:this}),document.getElementById("friendslist-container")),this.m_iTimeoutLogin=window.setTimeout((function(){0==t.m_eLogonState&&(t.m_eLogonState=1)}),2500)},e.prototype.LaunchChat=function(){a.unmountComponentAtNode(document.getElementById("friendslist-container")),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),j(),this.m_fnLaunchChat()},e.prototype.GetLoginURL=function(){return c.c.STORE_BASE_URL+"login/?steamtv"},e.prototype.BIsPerformingLogonCheck=function(){return 0==this.m_eLogonState||1==this.m_eLogonState},e.prototype.BIsLogonDialogVisible=function(){return this.m_bLogonDialogVisisible},e.prototype.ShowLogonDialog=function(){this.m_bLogonDialogVisisible=!0},e.prototype.BReadyToRender=function(){return 0!=this.m_eLogonState},e.prototype.DismissLogonDialog=function(){this.m_bLogonDialogVisisible=!1},e.prototype.GetSteamIDWatched=function(){return this.m_steamID},e.prototype.ExtractOrigin=function(e){return e.replace(/^(https?:\/\/[^/]*).*$/,"$1")},e.prototype.HandlePostMessage=function(e){if(e.origin==this.ExtractOrigin(c.c.STORE_BASE_URL)||e.origin==this.ExtractOrigin(c.c.CHAT_BASE_URL)){var t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()}else console.warn('Ignoring message from untrusted domain "'+e.origin+'"')},Object(o.c)([l.A],e.prototype,"m_eLogonState",void 0),Object(o.c)([l.A],e.prototype,"m_bLogonDialogVisisible",void 0),Object(o.c)([l.A],e.prototype,"m_steamID",void 0),Object(o.c)([l.i],e.prototype,"LaunchChat",null),Object(o.c)([l.i.bound],e.prototype,"HandlePostMessage",null),e}(),G=function(e){function t(t){var n=e.call(this,t)||this;return n.m_broadcastInfo=null,n.m_broadcastInfo=u.a.StartInfo(n.props.app.GetSteamIDWatched()),n.state={bChatCollapsed:!1,bTheaterMode:!1},n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_broadcastInfo&&(u.a.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)},t.prototype.OnShowLogin=function(){this.props.app.ShowLogonDialog()},t.prototype.ToggleChat=function(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})},t.prototype.ToggleTheaterMode=function(){this.setState({bTheaterMode:!this.state.bTheaterMode})},t.prototype.render=function(){var e=this.props.app,t=this.m_broadcastInfo,n=B();return i.a.createElement(i.a.Fragment,null,e.BReadyToRender()&&i.a.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},i.a.createElement(E.a,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),i.a.createElement("div",{className:"BroadcastTab"},i.a.createElement("div",{className:"StandalonePlayerHeader"},i.a.createElement("div",{className:"STV_Logo"},i.a.createElement(d.db,null)),i.a.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},i.a.createElement(R,{onClick:this.OnShowLogin}),i.a.createElement(k,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),i.a.createElement(F,{steamID:e.GetSteamIDWatched(),watchLocation:n,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},i.a.createElement(U,{app:e})))),i.a.createElement(N,{app:e}))},Object(o.c)([s.a],t.prototype,"OnShowLogin",null),Object(o.c)([s.a],t.prototype,"ToggleChat",null),Object(o.c)([s.a],t.prototype,"ToggleTheaterMode",null),t=Object(o.c)([p.a],t)}(i.a.Component),N=Object(p.a)((function(e){var t=e.app;return t.BIsPerformingLogonCheck()?i.a.createElement("div",null,i.a.createElement("iframe",{style:{display:"none"},src:t.GetLoginURL()})):null}));function R(e){return i.a.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},i.a.createElement(d.mb,null),Object(g.d)("#Broadcast_WatchWithFriends"))}function k(e){return i.a.createElement("div",{className:"ToggleBroadcastChat",title:Object(g.d)("#Broadcast_ToggleChat"),onClick:e.onClick},i.a.createElement(d.A,{showChat:e.hideIcon}))}function B(){return c.c.STEAM_TV?1:3}var P=function(e){function t(t){var n=e.call(this,t)||this;n.m_broadcastInfo=null;var o=n.props.broadcastView.GetSteamID().ConvertTo64BitString();return n.m_broadcastInfo=u.a.StartInfo(o),n.state={bChatCollapsed:!1},n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_broadcastInfo&&(u.a.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)},t.prototype.OnWatchWithFriends=function(){this.props.broadcastView.ShowWatchPromptDialog()},t.prototype.ToggleChat=function(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})},t.prototype.ToggleTheaterMode=function(){b.f.UIStore.SetTheaterMode(!b.f.UIStore.GetTheaterMode())},t.prototype.render=function(){var e=this.props,t=e.broadcastView,n=e.popup,o=e.style,r=t.GetSteamID().ConvertTo64BitString(),a=B(),s=t.m_bShowWatchPromptDialog?i.a.createElement(I,{closeModal:function(){return t.HideWatchPromptDialog()},broadcastAccountId:t.GetSteamID().GetAccountID(),broadcastTabId:t.GetUniqueID(),initialFriend:t.m_watchPromptInitialFriend,browserContext:b.a,ownerWindow:n}):null;return i.a.createElement("div",{className:"BroadcastTab",style:o},i.a.createElement(E.a,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),i.a.createElement("div",{className:"BroadcastTab_OverBackground"},i.a.createElement("div",{className:"BroadcastTabHeaderContainer"},i.a.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},i.a.createElement(R,{onClick:this.OnWatchWithFriends}),i.a.createElement(k,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),i.a.createElement(F,{steamID:r,watchLocation:a,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},s)))},Object(o.c)([s.a],t.prototype,"OnWatchWithFriends",null),Object(o.c)([s.a],t.prototype,"ToggleChat",null),Object(o.c)([s.a],t.prototype,"ToggleTheaterMode",null),t=Object(o.c)([p.a],t)}(i.a.Component),F=function(e){function t(t){var n=e.call(this,t)||this;return n.m_strLocalSteamID="",n.m_refBroadcastContainer=i.a.createRef(),n.state={info:null},n}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){w.b.stream["76561198208088121"]&&"chinese"===c.c.LANGUAGE?this.OnLocalStreamChange("76561198208088121"):w.b.stream["76561198207552741"]&&"russian"===c.c.LANGUAGE&&this.OnLocalStreamChange("76561198207552741")},t.getDerivedStateFromProps=function(e,t){return t.info&&t.info.m_steamIDBroadcast===e.steamID?null:(t.info&&u.a.StopInfo(t.info),{info:u.a.StartInfo(e.steamID)})},t.prototype.componentWillUnmount=function(){this.state.info&&u.a.StopInfo(this.state.info)},t.prototype.OnLocalStreamChange=function(e){this.m_strLocalSteamID=e},t.prototype.SetMainContentRef=function(e){this.m_elMainContent=e},t.prototype.CalculateBroadcastSectionStyles=function(e){if(this.props.bHideChat)return{width:"100%",height:"100%"};var t,n;v.h&&(t=v.h.UIDisplayPrefs.nWatchPartyBroadcastHeightPercentage,n=v.h.UIDisplayPrefs.nWatchPartyBroadcastWidthPercentage);var o={};if(e){var r=t||66;if(o.height=r+"%",this.m_elMainContent){var i=this.m_elMainContent,a=i.clientWidth,s=i.clientHeight,c=9/16*a+50,l=Object(A.a)(r,1,c/s*100);o.height=l+"%"}}else o.width=n?n+"%":"66%",o.minWidth=n?n+"%":"66%",o.maxWidth="calc( 100% - 316px )",o.overflowY="auto";return o},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})},t.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),n=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),o=t.left,r=e.clientX,i=n.width,a=Object(A.a)((r-o)/i*100,1,100);v.h.SetUIDisplayPref("nWatchPartyBroadcastWidthPercentage",a)},t.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})},t.prototype.render=function(){var e=this.props,t=e.steamID,n=e.children,o=this.m_strLocalSteamID||t,r=this.state.info.m_bIsOnline,a=null,s=this.CalculateBroadcastSectionStyles(!1);s.flexGrow=this.props.bHideChat?1:null,w.b.bValid&&(a=i.a.createElement(x,{info:w.b}));var l=new L,p=i.a.createElement("div",{className:"LoginDiv"},i.a.createElement("a",{onClick:function(){return l.ShowLogonDialog()},className:T.a.ChatLoginButton,href:"javascript:void(0);"},Object(g.d)("#BroadcastChat_Login")),i.a.createElement(U,{app:l})),m=u.a.GetBroadcast(o)?u.a.GetBroadcast(o).m_ulBroadcastID:"0";return i.a.createElement("div",{className:"BroadcastContainer"},i.a.createElement("div",{className:"BroadcastContainerSection",ref:this.m_refBroadcastContainer,style:s},i.a.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},r&&i.a.createElement(h.b,{key:o,steamIDBroadcast:o,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!r&&a,i.a.createElement("div",{className:"videoContainerSizer"})),n,i.a.createElement("div",{className:"BroadcastDetailsSection"},i.a.createElement(h.a,{steamID:o,onLocalStreamChange:this.OnLocalStreamChange,bVerticalBroadcastChat:!0}))),!this.props.bHideChat&&i.a.createElement("div",{className:"BroadcastChatDivider horizontal",onMouseDown:this.OnGrabberMouseDown}),i.a.createElement("div",{className:"BroadcastChatDiv",style:{display:this.props.bHideChat?"none":"flex",flexDirection:"column",width:"100%",minWidth:"300px"}},i.a.createElement(f.a,{emoticonStore:b.f?b.f.ChatStore.EmoticonStore:null,broadcastID:m,steamID:o,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}),c.i&&c.i.logged_in?null:p))},Object(o.c)([l.A],t.prototype,"m_strLocalSteamID",void 0),Object(o.c)([s.a],t.prototype,"OnLocalStreamChange",null),Object(o.c)([s.a],t.prototype,"SetMainContentRef",null),Object(o.c)([s.a],t.prototype,"OnGrabberMouseDown",null),Object(o.c)([s.a],t.prototype,"HandleMouseMove",null),Object(o.c)([s.a],t.prototype,"UnregisterDragEvents",null),t=Object(o.c)([p.a],t)}(i.a.Component);function x(e){var t='url( "'+(c.c.CHAT_BASE_URL+e.info.offlineImage)+'" )';return i.a.createElement("div",{style:{backgroundImage:t},className:"BroadcastOffline"})}var V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.Dismiss=function(){this.props.app.DismissLogonDialog()},t.prototype.render=function(){return i.a.createElement(M.f,{onEscKeypress:this.Dismiss},i.a.createElement(m.g,{className:"SteamTVLoginDialog"},i.a.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))},Object(o.c)([s.a],t.prototype,"Dismiss",null),t}(i.a.Component),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){if(!this.props.app.BIsLogonDialogVisible())return null;var e=i.a.createElement(V,{app:this.props.app});return i.a.createElement("div",{className:"FullModalOverlay"},i.a.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),i.a.createElement("div",{className:"ModalOverlayContent active"},e))},t=Object(o.c)([p.a],t)}(i.a.Component)},LAqV:function(e,t,n){"use strict";n.d(t,"a",(function(){return G.a})),n.d(t,"b",(function(){return G.b})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return k})),n.d(t,"c",(function(){return B})),n.d(t,"e",(function(){return P})),n.d(t,"d",(function(){return F})),n.d(t,"f",(function(){return x}));var o=n("mrSG"),r=n("OTLo"),i=n("5Nu3"),a=n("Oefq"),s=n("tkkQ"),c=n("4HGb"),l=n("rrR9"),p=function(){function e(){}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.GetTradeOfferURL=function(){var e=this;if(this.m_strTradeOfferToken)return Promise.resolve(this.GetConstructedTradeOfferURL());var t=c.b.Init(l.b);return l.c.GetTradeOfferAccessToken(this.m_CMInterface.GetServiceTransport(),t).then((function(t){if(1==t.GetEResult())return e.m_strTradeOfferToken=t.Body().trade_offer_access_token(),e.GetConstructedTradeOfferURL();throw new Error("Error getting Trade Offer token")}))},e.prototype.GetDefaultTradeOfferURLForFriend=function(e){return s.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e},e.prototype.GetConstructedTradeOfferURL=function(){var e=this.m_CMInterface.steamid.GetAccountID();return s.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e+"&token="+encodeURIComponent(this.m_strTradeOfferToken)},e}(),u=n("+M9t"),m=n("2vnA"),d=n("hEDq"),h=n("3Liw"),f=n("jELD"),_=n("OJz+"),g=n("XaMz"),b=n("ha6C"),v=function(){function e(e){var t=this;this.m_bReady=!1,this.m_unTimerUploadCommunityPreferences=void 0,this.m_rgOnReadyCallbacks=[],this.m_bFriendSettingsReady=!1,this.m_CommunityPreferencesChangedHandler=Object(_.d)(h.l.NotifyCommunityPreferencesChangedHandler,(function(e){return t.UpdateCommunityPreferences(e.Body().preferences()),1})),this.m_Storage=e,s.a.IN_CLIENT?this.m_iFriendSettingsStore=new S(this,this.OnFriendSettingsChanged.bind(this)):this.m_iFriendSettingsStore=new C(this,this.OnFriendSettingsChanged.bind(this)),this.m_CommunityPreferences=new d.d;var n=new h.b;this.m_CommunityPreferences.bBlurAdultContentViolence=n.hide_adult_content_violence(),this.m_CommunityPreferences.bBlurAdultContentSex=n.hide_adult_content_sex(),this.m_CommunityPreferences.bParenthesizeNicknames=n.parenthesize_nicknames(),this.m_ServerCommunityPreferences=void 0}return e.prototype.Init=function(e){var t=this;this.m_CM=e,this.m_CM.AddOnLogonCallback((function(){t.m_bReady||(t.m_iFriendSettingsStore.InternalInit(),t.SetReady());var e=c.b.Init(f.a);f.b.GetStorePreferences(t.m_CM.GetServiceTransport(),e).then((function(e){t.m_StorePreferences=e.Body()}));var n=c.b.Init(h.c);return h.m.GetCommunityPreferences(t.m_CM.GetServiceTransport(),n).then((function(e){return t.UpdateCommunityPreferences(e.Body().preferences())}))}))},e.prototype.BReady=function(){return this.m_bReady},Object.defineProperty(e.prototype,"FriendsSettings",{get:function(){return this.m_FriendsSettings},enumerable:!1,configurable:!0}),e.prototype.BUpdateFriendsSettings=function(e){return!!this.m_iFriendSettingsStore.BUpdateSettings(e)&&(this.m_FriendsSettings=e,!0)},e.prototype.BClientHasFeatureOrOnWeb=function(e){return!s.a.IN_CLIENT||!!this.BReady()&&("object"==typeof this.m_FriendsSettings.featuresEnabled&&(!!this.m_FriendsSettings.featuresEnabled.hasOwnProperty(e)&&this.m_FriendsSettings.featuresEnabled[e]))},e.prototype.BAlwaysShowChatsInNewWindow=function(){return this.m_FriendsSettings.bAlwaysNewChatWindow},e.prototype.BSingleWindowModeEnabled=function(){return!!this.m_FriendsSettings.bSingleWindowMode},e.prototype.BackfillSingleWindowMode=function(e){void 0===this.m_FriendsSettings.bSingleWindowMode&&(console.log("Performing single window mode backfill",e),this.SetSingleWindowMode(e))},e.prototype.SetSingleWindowMode=function(e){this.m_FriendsSettings.bSingleWindowMode=e,this.BUpdateFriendsSettings(this.m_FriendsSettings)},e.prototype.BForceAlphabeticFriendSorting=function(){return this.m_FriendsSettings.bForceAlphabeticFriendSorting},e.prototype.RunOnReady=function(e){this.m_bReady?e():this.m_rgOnReadyCallbacks.push(e)},e.prototype.GetAccountSpecificLocalStorageKey=function(e){return this.m_CM&&this.m_CM.steamid&&this.m_CM.steamid.BIsValid()?e+"_"+this.m_CM.steamid.GetAccountID():null},e.prototype.GetObjectFromLocalStorageWhenReady=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,this.WhenReady()];case 1:return n.sent(),[2,this.GetObjectFromLocalStorage(e,t)]}}))}))},e.prototype.GetObjectFromLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return n?this.m_Storage.GetObject(n).then((function(e){var n=Object.assign({},t,e);if(t&&"object"==typeof t)for(var o in t)"object"==typeof t[o]&&e&&(n[o]=Object.assign({},t[o],e[o]));return n})):Promise.reject("Storage not ready")},e.prototype.StoreObjectInLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return!!n&&(this.m_Storage.StoreObject(n,t),!0)},e.prototype.GetFlagFromLocalStorageWhenReady=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.WhenReady()];case 1:return t.sent(),[2,this.GetFlagFromLocalStorage(e)]}}))}))},e.prototype.GetFlagFromLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then((function(e){return"true"===e})):Promise.reject("Storage not ready")},e.prototype.SetFlagInLocalStorage=function(e,t){var n=this.GetAccountSpecificLocalStorageKey(e);return!!n&&(t?this.m_Storage.StoreString(n,"true"):this.m_Storage.RemoveObject(n),!0)},e.prototype.BFlagExistsInLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then((function(e){return null!==e})):Promise.reject("Storage not ready")},e.prototype.WhenReady=function(){var e=this;return this.m_bReady?Promise.resolve():new Promise((function(t){return e.RunOnReady(t)}))},e.prototype.SetReady=function(){if(this.m_bFriendSettingsReady&&this.m_CM.steamid.BIsValid()){this.m_bReady=!0;for(var e=0,t=this.m_rgOnReadyCallbacks;e<t.length;e++){(0,t[e])()}this.m_rgOnReadyCallbacks=[]}},e.prototype.OnFriendSettingsChanged=function(e){this.m_FriendsSettings=e,this.m_bFriendSettingsReady=!0,this.SetReady()},Object.defineProperty(e.prototype,"CommunityPreferences",{get:function(){return this.m_CommunityPreferences},enumerable:!1,configurable:!0}),e.prototype.UpdateCommunityPreferences=function(e){var t=Object(o.a)({},this.m_CommunityPreferences);void 0!==e.hide_adult_content_violence()&&(t.bBlurAdultContentViolence=e.hide_adult_content_violence()),void 0!==e.hide_adult_content_sex()&&(t.bBlurAdultContentSex=e.hide_adult_content_sex()),void 0!==e.parenthesize_nicknames()&&(t.bParenthesizeNicknames=e.parenthesize_nicknames()),this.m_ServerCommunityPreferences=Object(o.a)({},t),this.m_CommunityPreferences=t},e.prototype.CommunityPreferencesToMessage=function(e){var t=new h.b;return t.set_hide_adult_content_violence(e.bBlurAdultContentViolence),t.set_hide_adult_content_sex(e.bBlurAdultContentSex),t.set_parenthesize_nicknames(e.bParenthesizeNicknames),t},e.prototype.SetCommunityPreferences=function(e){var t=this;this.m_CommunityPreferences=e,Object(b.a)("Messaging.PostMessage")&&SteamClient.Messaging.PostMessage("Settings","CommunityPreferences",JSON.stringify(e)),this.m_unTimerUploadCommunityPreferences&&clearTimeout(this.m_unTimerUploadCommunityPreferences),this.m_unTimerUploadCommunityPreferences=SetBackgroundTimeout((function(){t.m_unTimerUploadCommunityPreferences=void 0,t.UploadCommunityPreferences()}),5e3)},e.prototype.UploadCommunityPreferences=function(){var e=!1;if(void 0===this.m_ServerCommunityPreferences)e=!0;else for(var t=0,n=Object.keys(this.m_ServerCommunityPreferences);t<n.length;t++){var o=n[t];if(this.m_ServerCommunityPreferences[o]!==this.CommunityPreferences[o]){e=!0;break}}if(e){var r=c.b.Init(h.j);r.Body().set_preferences(this.CommunityPreferencesToMessage(this.CommunityPreferences)),h.m.SetCommunityPreferences(this.m_CM.GetServiceTransport(),r).then((function(e){}))}},Object.defineProperty(e.prototype,"StorePreferences",{get:function(){return this.m_StorePreferences},enumerable:!1,configurable:!0}),e.prototype.FillInChatUsabilityMetrics=function(e){var t=e.settings(),n=this.FriendsSettings;t.set_notifications_show_ingame(n.bNotifications_ShowIngame),t.set_notifications_show_online(n.bNotifications_ShowOnline),t.set_notifications_show_message(n.bNotifications_ShowMessage),t.set_notifications_events_and_announcements(n.bNotifications_EventsAndAnnouncements),t.set_sounds_play_ingame(n.bSounds_PlayIngame),t.set_sounds_play_online(n.bSounds_PlayOnline),t.set_sounds_play_message(n.bSounds_PlayMessage),t.set_sounds_events_and_announcements(n.bSounds_EventsAndAnnouncements),t.set_always_new_chat_window(n.bAlwaysNewChatWindow),t.set_force_alphabetic_friend_sorting(n.bForceAlphabeticFriendSorting),t.set_chat_flash_mode(n.nChatFlashMode),t.set_remember_open_chats(n.bRememberOpenChats),t.set_compact_quick_access(n.bCompactQuickAccess),t.set_compact_friends_list(n.bCompactFriendsList),t.set_notifications_show_chat_room_notification(n.bNotifications_ShowChatRoomNotification),t.set_sounds_play_chat_room_notification(n.bSounds_PlayChatRoomNotification),t.set_hide_offline_friends_in_tag_groups(n.bHideOfflineFriendsInTagGroups),t.set_hide_categorized_friends(n.bHideCategorizedFriends),t.set_categorize_in_game_friends_by_game(n.bCategorizeInGameFriendsByGame),t.set_chat_font_size(n.nChatFontSize),t.set_use24hour_clock(n.b24HourClock),t.set_do_not_disturb_mode(n.bDoNotDisturbMode),t.set_disable_embed_inlining(n.bDisableEmbedInlining),t.set_sign_into_friends(n.bSignIntoFriends),t.set_animated_avatars(n.bAnimatedAvatars)},Object(o.c)([m.A],e.prototype,"m_bReady",void 0),Object(o.c)([m.A],e.prototype,"m_FriendsSettings",void 0),Object(o.c)([m.A],e.prototype,"m_CommunityPreferences",void 0),Object(o.c)([m.A],e.prototype,"m_StorePreferences",void 0),Object(o.c)([m.i],e.prototype,"BUpdateFriendsSettings",null),Object(o.c)([m.i],e.prototype,"UpdateCommunityPreferences",null),Object(o.c)([m.i],e.prototype,"SetCommunityPreferences",null),e}(),y=function(){return function(e,t){this.m_SettingsStore=e,this.m_fnFriendSettingsChanged=t}}(),S=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.m_bClientInitComplete=!1,o.InternalInit(),o}return Object(o.d)(t,e),t.prototype.InternalInit=function(){this.m_bClientInitComplete||(SteamClient&&SteamClient.FriendSettings&&SteamClient.FriendSettings.RegisterForSettingsChanges?(SteamClient.FriendSettings.RegisterForSettingsChanges(this.OnClientSettingsChange.bind(this)),this.m_bClientInitComplete=!0):Object(g.a)(!1,"Can't initialize settings from client"))},t.prototype.OnClientSettingsChange=function(e){var t,n=d.e();if("string"!=typeof e){if(t=e.FriendsSettings,SteamClient.FriendSettings&&SteamClient.FriendSettings.SetFriendSettings)return void this.BUpdateSettings(t)}else t=JSON.parse(e,(function(e,t){return"b"==e.substring(0,1)&&"number"==typeof t?0!=t:t}));Object.assign(n,t),this.m_fnFriendSettingsChanged(n)},t.prototype.BUpdateSettings=function(e){var t=JSON.stringify(e);return SteamClient.FriendSettings.SetFriendSettings(t),!0},t}(y),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.InternalInit=function(){var e=this;this.m_SettingsStore.GetObjectFromLocalStorage(t.k_strLocalStorageKeyPrefix,this.GetDefaultSettings()).then((function(t){e.m_fnFriendSettingsChanged(t.friendsSettings)}))},t.prototype.GetDefaultSettings=function(){return{friendsSettings:d.e()}},t.prototype.BUpdateSettings=function(e){var n={friendsSettings:e};return this.m_SettingsStore.StoreObjectInLocalStorage(t.k_strLocalStorageKeyPrefix,n)},t.k_strLocalStorageKeyPrefix="LocalStorageFriendsSettings",t}(y),O=function(){function e(){var e=this;this.m_PrivacySettings={privacy_state:0,privacy_state_inventory:0,privacy_state_gifts:0,privacy_state_ownedgames:0,privacy_state_playtime:0,privacy_state_friendslist:0},this.m_IncomingPrivacySettingsHandler=Object(_.d)(h.l.NotifyPrivacyPrivacySettingsChangedHandler,(function(t){return e.ReadPrivacySettings(t.Body().privacy_settings()),1}))}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn((function(){return Object(o.b)(t,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=c.b.Init(h.f),[4,h.m.GetPrivacySettings(this.m_CMInterface.GetServiceTransport(),e)];case 1:return 1==(t=n.sent()).GetEResult()&&this.ReadPrivacySettings(t.Body().privacy_settings()),[2]}}))}))}))},Object.defineProperty(e.prototype,"PrivacySettings",{get:function(){return this.m_PrivacySettings},enumerable:!1,configurable:!0}),e.prototype.ReadPrivacySettings=function(e){Object.assign(this.m_PrivacySettings,e.toObject())},Object(o.c)([m.A],e.prototype,"m_PrivacySettings",void 0),e}(),I=n("VZeO"),E=n("a6nX"),w=n("0N1H"),A=function(){function e(){var e=this;this.m_ParentalState=new d.l,this.m_ParentalLockHandler=Object(_.d)(E.d.NotifyLockHandler,(function(t){return s.a.SESSIONID==t.Body().sessionid()&&e.SetLockState(!0),1})),this.m_ParentalUnlockHandler=Object(_.d)(E.d.NotifyUnlockHandler,(function(t){return s.a.SESSIONID==t.Body().sessionid()&&e.SetLockState(!1),1})),this.m_ParentalSettingsChangeHandler=Object(_.d)(E.d.NotifySettingsChangeHandler,(function(e){return 1}))}return e.prototype.SetParentalState=function(e){this.m_ParentalState=e},e.prototype.SetLockState=function(e){this.m_ParentalState.locked=e},e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn((function(){var e=c.b.Init(E.a);e.Body().set_steamid(t.m_CMInterface.steamid.ConvertTo64BitString()),s.a.IN_CLIENT?SteamClient.Parental.RegisterForParentalSettingsChanges((function(e){return t.UpdateParentalState(e)})):E.e.GetParentalSettings(t.m_CMInterface.GetServiceTransport(),e).then((function(e){e.Body().settings().enabled_features();var n=e.Body().settings(),o=t.MsgParentalSettingsToParentalState(n);o.enabled?t.ValidateWebToken().then((function(e){o.locked=e,t.SetParentalState(o)})):(o.locked=!1,t.SetParentalState(o))}))}))},e.prototype.MsgParentalSettingsToParentalState=function(e){var t=new d.l;t.enabled=e.is_enabled(),t.features=e.enabled_features(),t.baselist={};for(var n=0,o=e.applist_base();n<o.length;n++){var r=o[n];t.baselist["App_"+r.appid()]=r.is_allowed()}t.customlist={};for(var i=0,a=e.applist_custom();i<a.length;i++){r=a[i];t.customlist["App_"+r.appid()]=r.is_allowed()}return t.locked=!0,t},e.prototype.UpdateParentalState=function(e){this.SetParentalState(e)},e.prototype.BIsFeatureBlocked=function(e){return this.m_ParentalState.locked&&0!=e&&0==(this.m_ParentalState.features&1<<e)},e.prototype.BIsAppBlocked=function(e){return!!this.isLocked&&(!this.m_ParentalState.allowallapps&&(0!=e&&(!(e>=w.i&&e<=w.j)&&(-1===[w.o,w.k,w.l,w.n,w.m].indexOf(e)&&(null!=this.m_ParentalState.customlist&&null!=this.m_ParentalState.customlist["App_"+e]?!this.m_ParentalState.customlist["App_"+e]:null==this.m_ParentalState.baselist||null==this.m_ParentalState.baselist["App_"+e]||!this.m_ParentalState.baselist["App_"+e])))))},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.m_ParentalState.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.m_ParentalState.locked},enumerable:!1,configurable:!0}),e.prototype.ValidateWebToken=function(){var e=this,t=s.a.SESSIONID,n=document.cookie.match("(^|; )steamparental=([^;]*)");if(!n||!n[2])return Promise.resolve(!1);var o=n[2],r=o.split("||");o=2==r.length?r[1]:r[0];var i=c.b.Init(E.c);return i.Body().set_unlock_token(t+"||"+o),new Promise((function(t,n){E.e.ValidateToken(e.m_CMInterface.GetServiceTransport(),i).then((function(e){1==e.GetEResult()?t(!0):t(!1)}))}))},Object.defineProperty(e.prototype,"locked",{get:function(){return console.log("ParentalState.locked",this.m_ParentalState.locked),this.m_ParentalState.locked},enumerable:!1,configurable:!0}),e.prototype.BIsFriendsBlocked=function(){return this.BIsFeatureBlocked(4)},e.prototype.Unlock=function(e){var t=this;if(s.a.IN_CLIENT)return new Promise((function(t,n){SteamClient.Parental.UnlockParentalLock(e,!1).then((function(e){t(e)}))}));var n=c.b.Init(E.b);return n.Body().set_password(e),n.Body().set_session(s.a.SESSIONID),n.Body().set_send_unlock_on_success(!0),new Promise((function(e,o){E.e.ValidatePassword(t.m_CMInterface.GetServiceTransport(),n).then((function(t){if(1==t.GetEResult()){var n=Date.now().toString()+"||"+t.Body().token();document.cookie="steamparental="+encodeURIComponent(n)+"; path=/"}e(t.GetEResult())}))}))},Object(o.c)([m.A],e.prototype,"m_ParentalState",void 0),Object(o.c)([m.i],e.prototype,"UpdateParentalState",null),Object(o.c)([m.l],e.prototype,"isEnabled",null),Object(o.c)([m.l],e.prototype,"isLocked",null),Object(o.c)([m.l],e.prototype,"locked",null),e}(),D=n("cLtS"),T=n("oh5H"),M=n("s+DT"),j=function(){function e(){this.m_bEnabled=!1,this.m_sessions=m.A.map(),this.m_controllerSlotPlayers=[],this.m_contextsWaitingForResults=m.A.map(),this.m_bIsShowingPlaceholder=!1}return e.prototype.Init=function(e){var t=this;this.m_controllerSlotPlayers.length=20,this.ClearControllerSlotPlayers(),this.m_CMInterface=e,Object(b.a)("RemotePlay.RegisterForSessionStarted")&&SteamClient.RemotePlay.RegisterForSessionStarted((function(e,n){return t.SessionStarted(e,n)})),Object(b.a)("RemotePlay.RegisterForSessionStopped")&&SteamClient.RemotePlay.RegisterForSessionStopped((function(e){return t.SessionStopped(e)})),Object(b.a)("RemotePlay.RegisterForSessionJoined")&&SteamClient.RemotePlay.RegisterForSessionJoined((function(e){return t.SessionJoined(e)})),Object(b.a)("RemotePlay.RegisterForInputUsed")&&SteamClient.RemotePlay.RegisterForInputUsed((function(e,n){t.PlayerUsedInput(e,n)})),Object(b.a)("RemotePlay.RegisterForPlayerInputSettingsChanged")&&SteamClient.RemotePlay.RegisterForPlayerInputSettingsChanged((function(e,n){t.PlayerInputSettingsChanged(e,n)})),Object(b.a)("RemotePlay.RegisterForPlaceholderStateChanged")&&SteamClient.RemotePlay.RegisterForPlaceholderStateChanged((function(e){t.m_bIsShowingPlaceholder=e})),Object(b.a)("RemotePlay.RegisterForClearControllers")&&SteamClient.RemotePlay.RegisterForClearControllers((function(){t.ClearControllerSlotPlayers()})),Object(b.a)("RemotePlay.RegisterForControllerIndexSet")&&SteamClient.RemotePlay.RegisterForControllerIndexSet((function(e,n){t.ControllerIndexSet(e,n)})),Object(b.a)("RemotePlay.BEnabled")&&SteamClient.RemotePlay.BEnabled().then((function(e){t.m_bEnabled=e})).catch()},e.prototype.BEnabled=function(){return this.m_bEnabled},e.prototype.BCanCreateInviteForGame=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return Object(b.a)("RemotePlay.BCanCreateInviteForGame")?[2,SteamClient.RemotePlay.BCanCreateInviteForGame(e)]:[2,!1]}))}))},e.prototype.BCanAcceptInviteForGame=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return Object(b.a)("RemotePlay.BCanAcceptInviteForGame")?[2,SteamClient.RemotePlay.BCanAcceptInviteForGame(e,t)]:s.a.COUNTRY&&-1!==t.indexOf(s.a.COUNTRY)?[2,!1]:[2,!0]}))}))},e.prototype.BCanHostIsolatedGameAudio=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return Object(b.a)("RemotePlay.BCanHostIsolatedGameAudio")?[2,SteamClient.RemotePlay.BCanHostIsolatedGameAudio()]:[2,!1]}))}))},e.prototype.HasInviteAndSession=function(e){var t=M.a.InitFromAccountID(e).ConvertTo64BitString();return this.m_sessions.has(t)&&this.m_sessions.get(t).bSession},e.prototype.HasInviteAndSessionForGameIDOtherThan=function(e){var t=!1;return this.m_sessions.forEach((function(n){n.bSession&&n.gameID!==e&&void 0!==n.gameID&&(t=!0)})),t},e.prototype.GetPlayerPropsIndexOf=function(e){var t=M.a.InitFromAccountID(e).ConvertTo64BitString(),n=this.m_sessions.get(t),o=-1,r=0;return this.m_sessions.forEach((function(e){e===n&&(o=r),r++})),o},e.prototype.GetPlayerProps=function(e){var t=M.a.InitFromAccountID(e).ConvertTo64BitString();return this.m_sessions.get(t)},e.prototype.GetPlayerPropsByIndex=function(e){return Array.from(this.m_sessions.values())[e]},Object.defineProperty(e.prototype,"player_props_count",{get:function(){return this.m_sessions.size},enumerable:!1,configurable:!0}),e.prototype.ClearControllerSlotPlayers=function(){for(var e=0;e<this.m_controllerSlotPlayers.length;++e)this.m_controllerSlotPlayers[e]=-1},e.prototype.ClearControllerSlotsWithPlayer=function(e){for(var t=0;t<this.m_controllerSlotPlayers.length;++t)this.m_controllerSlotPlayers[t]===e&&(this.m_controllerSlotPlayers[t]=-1)},e.prototype.SetPlayerInControllerSlot=function(e,t){e<0||e>=this.m_controllerSlotPlayers.length||(this.m_controllerSlotPlayers[e]=t)},e.prototype.GetPlayerInControllerSlot=function(e){return e<0||e>=this.m_controllerSlotPlayers.length?-1:this.m_controllerSlotPlayers[e]},Object.defineProperty(e.prototype,"bIsShowingPlaceholder",{get:function(){return this.m_bIsShowingPlaceholder},enumerable:!1,configurable:!0}),e.prototype.HasAnyContextWaitingForResults=function(){return this.m_contextsWaitingForResults.size>0},e.prototype.HasContextWaitingForResults=function(e){return this.m_contextsWaitingForResults.has(e)&&this.m_contextsWaitingForResults.get(e)},e.prototype.ClearContextsWaitingForResults=function(){return this.m_contextsWaitingForResults.clear()},e.prototype.CreateInviteAndSession=function(e,t,n){this.m_contextsWaitingForResults.has(n),this.m_contextsWaitingForResults.set(n,!0);var o=M.a.InitFromAccountID(e);return SteamClient.RemotePlay.CreateInviteAndSession(o.ConvertTo64BitString(),t)},e.prototype.CancelInviteAndSession=function(e){var t=M.a.InitFromAccountID(e);return SteamClient.RemotePlay.CancelInviteAndSession(t.ConvertTo64BitString())},e.prototype.CancelAllInvitesAndSessions=function(){var e=this;this.m_sessions.forEach((function(t){e.CancelInviteAndSession(t.friend.accountid)})),this.m_sessions.clear()},e.prototype.StopStreamingClient=function(){Object(b.a)("RemotePlay.StopStreamingClient")&&SteamClient.RemotePlay.StopStreamingClient()},e.prototype.SetStreamingDesktopToRemotePlayTogetherEnabled=function(e){return SteamClient.RemotePlay.SetStreamingDesktopToRemotePlayTogetherEnabled(e)},e.prototype.SetPerUserKeyboardInputEnabled=function(e,t){var n=M.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserKeyboardInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.SetPerUserMouseInputEnabled=function(e,t){var n=M.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserMouseInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.SetPerUserControllerInputEnabled=function(e,t){var n=M.a.InitFromAccountID(e);return SteamClient.RemotePlay.SetPerUserControllerInputEnabled(n.ConvertTo64BitString(),t)},e.prototype.GetPerUserInputSettings=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return t=M.a.InitFromAccountID(e),[4,SteamClient.RemotePlay.GetPerUserInputSettings(t.ConvertTo64BitString())];case 1:return[2,n.sent()]}}))}))},e.prototype.SessionStarted=function(e,t){var n=this,o=this.m_sessions.get(e);if(void 0===o){var r=new M.a(e).GetAccountID();o={friend:x.FriendStore.GetPlayer(r),gameID:t,bSession:!0,bJoined:!1,bKeyboardEnabled:!0,bMouseEnabled:!0,bControllerEnabled:!0,nKeyboardUsedTime:0,nMouseUsedTime:0,nControllerUsedTime:0},this.GetPerUserInputSettings(r).then((function(t){n.PlayerInputSettingsChanged(e,t)})).catch(),o.friend.LoadIfNecessary(),this.m_sessions.set(e,o)}else o.bSession=!0},e.prototype.SessionStopped=function(e){var t=this.m_sessions.get(e);void 0!==t&&t.bSession&&(t.bSession=!1,x.AudioPlaybackManager.PlayAudioURL(s.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_rpt_leave.m4a"));var n=new M.a(e).GetAccountID();this.ClearControllerSlotsWithPlayer(n)},e.prototype.SessionJoined=function(e){var t=this.m_sessions.get(e);if(void 0!==t&&!0!==t.bJoined){t.bJoined=!0;var n=new M.a(e).GetAccountID();if(0!=n&&n!==x.FriendStore.self.accountid&&(x.AudioPlaybackManager.PlayAudioURL(s.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_rpt_join.m4a"),x.NotificationManager.BNotificationsPermitted())){var o=x.FriendStore.GetPlayer(n);x.NotificationManager.DisplayNotificationFromFriend(o,{title:o.display_name,body:Object(T.d)("#RemotePlay_FriendJoinedSession"),tag:"message_"+n,steamid:e})}}},e.prototype.PlayerUsedInput=function(e,t){var n=this.m_sessions.get(e);if(void 0!==n)switch(t){case d.i.k_EClientUsedInputTypeKeyboard:n.nKeyboardUsedTime=performance.now();break;case d.i.k_EClientUsedInputTypeMouse:n.nMouseUsedTime=performance.now();break;case d.i.k_EClientUsedInputTypeController:n.nControllerUsedTime=performance.now()}},e.prototype.PlayerInputSettingsChanged=function(e,t){var n=this.m_sessions.get(e);void 0!==n&&(n.bKeyboardEnabled=t.bKeyboardEnabled,n.bMouseEnabled=t.bMouseEnabled,n.bControllerEnabled=t.bControllerEnabled)},e.prototype.ControllerIndexSet=function(e,t){var n=new M.a(e).GetAccountID();0==n&&(n=x.FriendStore.self.accountid),this.SetPlayerInControllerSlot(t,n)},Object(o.c)([m.A],e.prototype,"m_controllerSlotPlayers",void 0),Object(o.c)([m.A],e.prototype,"m_bIsShowingPlaceholder",void 0),Object(o.c)([m.i],e.prototype,"Init",null),Object(o.c)([m.l],e.prototype,"player_props_count",null),Object(o.c)([m.l],e.prototype,"bIsShowingPlaceholder",null),e}(),L=n("SEab"),G=n("8JTq");function N(e,t){return function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];x.ready_to_render?e.apply(this,n):Object(m.J)((function(){return x.ready_to_render}),(function(){e.apply(t,n)}))}}function R(e,t,n){return{value:N(n.value)}}function k(e){return N(e,e.name)}var B=function(){return function(){}}(),P=function(){return function(){}}(),F=function(){function e(e,t){void 0===t&&(t={}),this.m_BrowserContextDefaultTarget=G.a,this.m_AppInfoStore=r.a,this.m_EconomyStore=new p,this.m_UserStore=new O,this.m_ParentalStore=new A,this.m_BroadcastStore=new D.a,this.m_GroupMemberStore=new L.b,this.m_RemotePlayStore=new j,this.m_bReadyToRender=!1,this.m_bShuttingDown=!1,Object(g.a)(!x,"FriendsUIApp already initialized"),x=this,window.g_FriendsUIApp=this,this.m_Storage=e,this.m_SettingsStore=t.SettingsStore||new v(e),this.m_FriendStore=t.FriendStore||new u.a,this.m_ChatStore=t.ChatStore||new i.b(this.m_FriendStore),this.m_UIStore=t.UIStore||new a.b(this.m_ChatStore),this.m_VoiceChatStore=new I.a(this.m_SettingsStore)}return e.prototype.InitInternal=function(e,t,n){var r=this;void 0===n&&(n=[]),this.m_CMInterface=e,this.m_NotificationManager=t;var i=this.m_FriendStore.Init(e),a=this.m_ChatStore.Init(e,this.m_VoiceChatStore),s=this.InitAdjustClockDriftFromServer();this.m_VoiceChatStore.Init(e),this.m_SettingsStore.Init(e),this.m_AppInfoStore.Init(e),this.m_UIStore.Init(),this.m_EconomyStore.Init(e),this.m_ParentalStore.Init(e),this.m_BroadcastStore.Init(e),this.m_RemotePlayStore.Init(e),this.m_GroupMemberStore.Init(),this.m_UserStore.Init(e);Promise.all(Object(o.g)([i,a,s],n)).then((function(){console.log("Ready To Render promises succeeded"),r.SetReadyToRender()}),(function(e){console.error("Ready To Render promise failed: ",e),r.SetReadyToRender()}))},e.prototype.GetChatRoomBBCodeParser=function(){return this.m_ChatRoomBBCodeParser},e.prototype.GetFriendChatBBCodeParser=function(){return this.m_FriendChatBBCodeParser},e.prototype.GetNotificationBBCodeParser=function(){return this.m_NotificationBBCodeParser},e.prototype.GetChatRoomEffectSettings=function(){return this.m_ChatRoomEffectSettings},Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VoiceStore",{get:function(){return this.m_VoiceChatStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UIStore",{get:function(){return this.m_UIStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SettingsStore",{get:function(){return this.m_SettingsStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AppInfoStore",{get:function(){return this.m_AppInfoStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Storage",{get:function(){return this.m_Storage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NotificationManager",{get:function(){return this.m_NotificationManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EconomyStore",{get:function(){return this.m_EconomyStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UserStore",{get:function(){return this.m_UserStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ParentalStore",{get:function(){return this.m_ParentalStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BroadcastStore",{get:function(){return this.m_BroadcastStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RemotePlayStore",{get:function(){return this.m_RemotePlayStore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GroupMemberStore",{get:function(){return this.m_GroupMemberStore},enumerable:!1,configurable:!0}),e.prototype.SetReadyToRender=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.m_bReadyToRender?[3,2]:(console.log("FriendsUI ready to render after "+(performance.now()-e.sm_msStartup)+"ms"),this.m_bReadyToRender=!0,[4,this.OnReadyToRender()]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Object.defineProperty(e.prototype,"ready_to_render",{get:function(){return this.m_bReadyToRender},enumerable:!1,configurable:!0}),e.prototype.GetStartupTime=function(){return e.sm_msStartup},e.prototype.ShowFriendChatDialog=function(e,t,n){return void 0===n&&(n=!0),this.UIStore.ShowFriendChatDialog(e,t,n,n)},e.prototype.GetDefaultBrowserContext=function(){return this.m_BrowserContextDefaultTarget},e.prototype.SetDefaultPopupContext=function(e){console.log("Set default popup context: "+e.m_unPID),this.m_BrowserContextDefaultTarget=e},e.prototype.InitAdjustClockDriftFromServer=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(t){return[2,new Promise((function(t,n){e.m_CMInterface.RunWhenLoggedOn((function(){return Object(o.b)(e,void 0,void 0,(function(){var e=this;return Object(o.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Object(m.J)((function(){return e.m_CMInterface.BPerformedInitialClockAdjustment()}),{timeout:1e3})];case 1:return o.sent(),t(),[3,3];case 2:return o.sent(),console.warn("Timed out waiting for initial server clock drift adjustment"),n(),[3,3];case 3:return[2]}}))}))}))}))]}))}))},e.prototype.GetServerTimeMS=function(){return this.m_CMInterface.GetServerTimeMS()},e.prototype.GetServerRTime32=function(){return this.m_CMInterface.GetServerRTime32()},e.prototype.RTime32ToDate=function(e){return this.m_CMInterface.RTime32ToDate(e)},e.prototype.GetLocalMidnightInRTime32=function(t){void 0===e.sm_tzOffset&&(e.sm_tzOffset=60*(new Date).getTimezoneOffset(),Object(g.a)(e.sm_tzOffset||0===e.sm_tzOffset,"Computed invalid timezone offset "+e.sm_tzOffset));var n=e.sm_tzOffset||0,o=(t||this.m_CMInterface.GetServerRTime32())-n;return 86400*Math.floor(o/86400)+n},e.prototype.IsInBeta=function(){return s.a.FRIENDSUI_BETA},e.prototype.BIsValidBrowserContext=function(e){return Object(G.b)(e,G.a)},e.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){},e.prototype.UpdatePersonaState=function(e){},e.prototype.BShowChatRoomNotification=function(){return this.SettingsStore.FriendsSettings.bNotifications_ShowChatRoomNotification},e.prototype.BShowDirectChatNotification=function(){return this.SettingsStore.FriendsSettings.bNotifications_ShowMessage},e.sm_msStartup=performance.now(),Object(o.c)([m.A],e.prototype,"m_bReadyToRender",void 0),Object(o.c)([m.l],e.prototype,"ready_to_render",null),e}(),x=void 0},LGkA:function(e,t,n){"use strict";function o(e,t){return e+"economy/sticker/"+t}n.d(t,"a",(function(){return o}))},LI4v:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABHtJREFUeNrkm1toXFUUhr81TRpJbVMvGERaQyjWC7aNYrxQKS30JbVYFalVRCv44AVEBJ8FEZ9EwZeKUKiX1pg+KG2tGCuKra0Xij5IIBGsrSBWSyppo5LL78PsyHA8M2efyewzZ44/TAKTvWf2+s+6rx0kIYmQkLRS0iuSRiRNqYxBmgxJ5R8hCZD0RIXQUSwtNAGSBlQb65pNQCnwdzyf8PdVzTaDUkB2u4EbEpatLiwBnsKtLTIByzzWrJS0rKgELPZct7GoBPhiU1EJOOu57g5JXUUk4GfPdQuBu4tIwMkUax9sajYUIhOUtEDShPxxXaEyQTObAY6m2PJkEaPAkTRmIOnSohFwMMXaRU3RgsDVoEn6KYUfOJtliRy8GjQzAW+k2NIFPFMYDXCf3yNpOoUWTEq6ohANkYovGlI67CoaAX0pCZiV1J8FAW0+jszZZlosBS5wry7gW2CNr/sAdkjqN7PpzH2ApHZJj0v6StLfah6eDi27zQlvZnNvdgMHgBtzUCqfB/rMbCyTMCipExjOifBzydFOScHCdfSDnwOuJ19YGzI3sAr77wZOAe3kD1PAbWb2TUgT2J5T4XHnGpS0OKQJbCDf6AV2ubAchIDV5B93Ac+G8gEz5KNLnIRZ4E4z25+7VFjSckknMkiQzkla0wgCGvrEzewkMJaBFiwC9km6vJEmsKIBHZkrgS0ZmsNxYIOZ/THvVJjyKOtMjkNhNXwGDJjZ5LxMwMwmgMO0HtYB70pa2IhUeD+tiU3A3npIiBJwkNbFZuoYtJYiXnwE+LFFCTjvKtmona+X1OGrAQAftCgB+8zsXET4q4FPgNOS3pK0MZpKx7XE3gQubECc3gx0ZEjA2zHvbXO/lwAPuNchSdvM7Ld/Q0Gg4ehTGbbOzkhqjznDWJX1xyV1BBuMODW7JsOnP2RmU5Ez3OSSuzj0zSV9bVUE2A68PM/6vbPJ6n9/wp6HgZf+0xR1BPS0UDQ4BfSY2WzF+UuUb6jUqhVmgLZSlaLmBDDSIgTsqRTeYX2C8DXDYKuFw911qD/A10kEHGgB4UfM7LuI/+oA7vHY+14SAYeBiZwTEOf8Bkge5QnYU5MAF1aG827/NZKfWjjimjfERoEKdboKuDbloTqBF4CewMIfM7NbI+ddAvxKeSBbC4+Z2Y7E6bCZjQKjdSRCy4EXm+D8tngIPw3srVULxAnTm+JglwCPBhZ+Fhis0/t/ZGa/exPgCpuPgQU5sv1hMzsdeVCX4XfzfLdvHlDZI9jZArF/q4c8k8D7URVPrAYlXSTpF+UDf8bNCCUd9dj7TlR2r2rQzMZdeJnJSeNjIiJIL3BLPXmDdzlsZp8CD7kkIm/qf5/HvnHgwzj1TtUQkbTVjaaagfG4/p6k7z32vhYne10dIUkr3N2/qYwJeD3mLKs8994cR0BbPTpoZj8A90q6GOinfLvEMlD/z+uM/UNm9mW1pxn8omRISDqW8OQPVfufpMxuigYmoCTpdkmvShp1Qv8l6QtJj9S6YRYdjv4v8c8AuBvL53i+hZMAAAAASUVORK5CYII="},Lniy:function(e,t,n){e.exports={StoreSalePriceWidget:"packagepricewidget_StoreSalePriceWidget_3Lub2",StoreSaleDiscountedPriceCtn:"packagepricewidget_StoreSaleDiscountedPriceCtn__lUGP",StoreSalePriceBox:"packagepricewidget_StoreSalePriceBox_nzzUD",StoreSaleDiscountBox:"packagepricewidget_StoreSaleDiscountBox_3reL-",StoreOrignalPrice:"packagepricewidget_StoreOrignalPrice_2KdCA"}},MB4Y:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return g}));var o=n("mrSG"),r=n("rWGG"),i=n("q1tI"),a=n("2vnA"),s=n("tkkQ"),c=n("G+3Z"),l=n("1VtQ"),p=n("FkUk"),u=n("UqDm"),m=n("hReu"),d=n("LAqV"),h=n("eMko"),f=function(){function e(){this.m_mapHovers=new WeakMap}return e.prototype.GetHover=function(e){var t=this.m_mapHovers.get(e);return t||(t=new g(e),this.m_mapHovers.set(e,t)),t},e}(),_=function(){function e(){}return Object(o.c)([a.A],e.prototype,"visible",void 0),e}(),g=function(e){function t(t){var n=e.call(this,t.accountid)||this;return n.m_friend=t,n}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"friend",{get:function(){return this.m_friend},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"persona",{get:function(){return this.m_friend.persona},enumerable:!1,configurable:!0}),t.prototype.GetInstance=function(e,t){if(void 0===t&&(t=!1),this.m_rgInstances)for(var n=0,o=this.m_rgInstances;n<o.length;n++){if((r=o[n]).m_OwningElement==e)return r}var r;return t?((r=new _).m_OwningElement=e,r.visible=!1,r.hover=this,this.m_rgInstances?this.m_rgInstances.push(r):this.m_rgInstances=[r],r):null},t.prototype.ShowPopup=function(e,t,n){var o=this;t.visible=!0,t.m_OwningElement.ownerDocument.defaultView.setTimeout((function(){t.visible&&(t.popupWindow||(t.popupWindow=new r.a(e,t,n)),t.popupWindow.Show())}),250),t.m_BlurHandler=function(){o.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.defaultView.addEventListener("blur",t.m_BlurHandler),t.m_VisibilityHandler=function(e){"hidden"===e.target.visibilityState&&o.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.addEventListener("visibilitychange",t.m_VisibilityHandler)},t.prototype.Show=function(e,n,o){var a=this,c=e.currentTarget.ownerDocument.defaultView.innerWidth<500;if((!c||s.a.IN_CLIENT)&&!m.h.DragDropManager.BInDrag()){this.EnsureCommunityDataLoaded();var l=e.currentTarget,p=Object(m.e)(null,e),u=this.GetInstance(l,!0);u.context=n;var h=!1;if(s.a.IN_CLIENT){var f=d.f.UIStore.GetPerContextChatData(p);h=f.BUsePopups()}if(c&&h)this.ShowPopup(l,u,p);else{var _=i.createElement(r.b,{hoverInstance:u,target:l,direction:o,onNoSpace:function(){h&&a.ShowPopup(l,u,p)}});t.m_embeddedElements.ShowElementDelayed(l.ownerDocument,250,_,u).then((function(){u.visible=!0}))}}},t.prototype.Hide=function(e){this.HideByElement(e.currentTarget)},t.prototype.HideByElement=function(e){var n=this.GetInstance(e);if(n){if(n.visible=!1,n.m_BlurHandler&&(e.ownerDocument.defaultView.removeEventListener("blur",n.m_BlurHandler),n.m_BlurHandler=null),n.m_VisibilityHandler&&(e.ownerDocument.removeEventListener("visibilitychange",n.m_VisibilityHandler),n.m_VisibilityHandler=null),n.popupWindow&&!n.popupWindow.BIsClosed()){var o=n.popupWindow,r=function(){o.BIsClosed()||o.Close()};e.ownerDocument.defaultView.addEventListener("unload",r),e.ownerDocument.defaultView.setTimeout((function(){e.ownerDocument.defaultView.removeEventListener("unload",r),r()}),100)}else t.m_embeddedElements.HideElement(n.m_OwningElement.ownerDocument,n,500);u.c(this.m_rgInstances,n)}},t.prototype.OnContextMenu=function(e,t){var n=Object(p.b)(Object(m.e)(null,t),e,this.m_friend,t);return this.Hide(t),n},t.prototype.HideAllInstances=function(){if(this.m_rgInstances)for(var e=0,t=this.m_rgInstances.slice();e<t.length;e++){var n=t[e];this.HideByElement(n.m_OwningElement)}},t.m_embeddedElements=new c.a("CFriendHoverContainer"),Object(o.c)([l.a],t.prototype,"Show",null),Object(o.c)([l.a],t.prototype,"Hide",null),Object(o.c)([l.a],t.prototype,"OnContextMenu",null),t}(h.a)},MfD9:function(e,t,n){e.exports={ChatMessageSteamStore_Failed:"bbcode_ChatMessageSteamStore_Failed_2wa0X",ChatMessageSteamStore:"bbcode_ChatMessageSteamStore_gwzSZ",ChatMessagesSteamStore_FilteredContent:"bbcode_ChatMessagesSteamStore_FilteredContent_34k3I",senderName:"bbcode_senderName_1_tWd",URLSent:"bbcode_URLSent_2yalT",SteamURL:"bbcode_SteamURL_2VXfO",ChatMessageSteamStore_Name:"bbcode_ChatMessageSteamStore_Name_2-b92",ChatMessageSteamStore_GameNameAndIcon:"bbcode_ChatMessageSteamStore_GameNameAndIcon_qa-O1",ChatMessageSteamStore_Header:"bbcode_ChatMessageSteamStore_Header_3X7hC",ChatMessageSteamStore_HeaderImage:"bbcode_ChatMessageSteamStore_HeaderImage_2s811",Blurred:"bbcode_Blurred_3BKMl",ChatMessageSteamStore_HeaderImageFiltered:"bbcode_ChatMessageSteamStore_HeaderImageFiltered_2GO7-",ChatMessageSteamStore_GameDetails:"bbcode_ChatMessageSteamStore_GameDetails_99hwV",ChatMessageSteamStore_Description:"bbcode_ChatMessageSteamStore_Description_17PwS",ChatMessageSteamStore_FilteredDescription:"bbcode_ChatMessageSteamStore_FilteredDescription_3Iqni",ChatMessageSteamStore_GameIcon:"bbcode_ChatMessageSteamStore_GameIcon_1EeOf",ChatMessageSteamStore_Body:"bbcode_ChatMessageSteamStore_Body_1L1hB",ChatMessageSteamStore_DetailsContainer:"bbcode_ChatMessageSteamStore_DetailsContainer_2d12m",ChatMessageSteamStore_MediaContainer:"bbcode_ChatMessageSteamStore_MediaContainer_2i_00",ChatMessageSteamStore_MainMedia:"bbcode_ChatMessageSteamStore_MainMedia_28eQq",ChatMessageSteamStore_VideoThumbnail:"bbcode_ChatMessageSteamStore_VideoThumbnail_2c-FU",ChatMessageSteamStore_ThumbnailsContainer:"bbcode_ChatMessageSteamStore_ThumbnailsContainer_246HV",ChatMessageSteamStore_Screenshot:"bbcode_ChatMessageSteamStore_Screenshot_3XVGb",ChatMessageSteamStore_ScreenshotThumbnail:"bbcode_ChatMessageSteamStore_ScreenshotThumbnail_3R0VG",videoPlaying:"bbcode_videoPlaying_1UpDR",ChatMessageSteamStore_VideoPlayButton:"bbcode_ChatMessageSteamStore_VideoPlayButton_2oeMy",ChatMessageSteamStore_VideoLargeContainer:"bbcode_ChatMessageSteamStore_VideoLargeContainer_2pzdG",ChatMessageSteamStore_VideoLarge:"bbcode_ChatMessageSteamStore_VideoLarge_2Dj_u",ChatMessageSteamStore_Footer:"bbcode_ChatMessageSteamStore_Footer_1mXJd",ChatMessageSteamStore_PricingContainer:"bbcode_ChatMessageSteamStore_PricingContainer_fYTQK",ChatMessageSteamStore_Pricing:"bbcode_ChatMessageSteamStore_Pricing_bKeQr",ChatMessageSteamStore_Pricing_Discount:"bbcode_ChatMessageSteamStore_Pricing_Discount_1BAfb",ChatMessageSteamStore_Pricing_FinalContainer:"bbcode_ChatMessageSteamStore_Pricing_FinalContainer_3piGx",ChatMessageSteamStore_Pricing_Final:"bbcode_ChatMessageSteamStore_Pricing_Final_2TCu5",hasDiscount:"bbcode_hasDiscount_2DoYC",ChatMessageSteamStore_Pricing_Initial:"bbcode_ChatMessageSteamStore_Pricing_Initial_1Jm7h",ChatMessageSteamStore_ViewStore:"bbcode_ChatMessageSteamStore_ViewStore_1_czf",ChatMessageSteamStore_Free:"bbcode_ChatMessageSteamStore_Free_3Zq0f",ChatMessageSteamStore_CopyURL:"bbcode_ChatMessageSteamStore_CopyURL_23S5M",ChatMessageTweet:"bbcode_ChatMessageTweet_1R69m",ChatMessageTweet_Header:"bbcode_ChatMessageTweet_Header_gpcGy",ChatMessageTweet_ProfileImage:"bbcode_ChatMessageTweet_ProfileImage_wRcpO",ChatMessageTweet_NameSection:"bbcode_ChatMessageTweet_NameSection_3c-Qw",ChatMessageTweet_NameGroup:"bbcode_ChatMessageTweet_NameGroup_3VNx1",ChatMessageTweet_Name:"bbcode_ChatMessageTweet_Name_1_swN",ChatMessageTweet_Logo:"bbcode_ChatMessageTweet_Logo_1ex2E",ChatMessageTweet_Verified:"bbcode_ChatMessageTweet_Verified_2roaO",ChatMessageTweet_ScreenName:"bbcode_ChatMessageTweet_ScreenName_3pM50",ChatMessageTweet_Body:"bbcode_ChatMessageTweet_Body_2mh_n",ChatMessageTweet_Footer:"bbcode_ChatMessageTweet_Footer_11DrN",ChatMessageTweet_Created:"bbcode_ChatMessageTweet_Created_1qrLY",numberCounterContainer:"bbcode_numberCounterContainer_mswnK",numberColumn:"bbcode_numberColumn_2SFVv",randomNumberLabel:"bbcode_randomNumberLabel_6Nz3l",randomActual:"bbcode_randomActual_1KvCn",randomNumberShadow:"bbcode_randomNumberShadow_3OoiC",startingZero:"bbcode_startingZero_20MSk",randomMsg:"bbcode_randomMsg_2x8Cn",MsgAnimating:"bbcode_MsgAnimating_3a9nR",none:"bbcode_none_3qH01",randomValues:"bbcode_randomValues_Vpi5G",coinLabel:"bbcode_coinLabel_1GhxZ",CoinModel:"bbcode_CoinModel_JExHJ",flipCoinContainer:"bbcode_flipCoinContainer_2PyUD",coinFade:"bbcode_coinFade_3vycN",flipCoinAndResult:"bbcode_flipCoinAndResult_1FjLD",coin:"bbcode_coin_AlQa_",front:"bbcode_front_h-0pm",back:"bbcode_back_22p29",coinFlipBottom:"bbcode_coinFlipBottom_38MhH",coinFlipTop:"bbcode_coinFlipTop_BnEA6",front_b:"bbcode_front_b_2ugtx",back_b:"bbcode_back_b_3YNs8",mid:"bbcode_mid_10JhA",coinFace:"bbcode_coinFace_3OmQy",flipCoinWinningSide:"bbcode_flipCoinWinningSide_17gzn",flipCoinLosingSide:"bbcode_flipCoinLosingSide_g63r6",coinFlip:"bbcode_coinFlip_3klbs",resultLabel:"bbcode_resultLabel_3Lefr",coinFlipResult:"bbcode_coinFlipResult_2a-5i",plusOne:"bbcode_plusOne_3mCUi",ImageModalBackground:"bbcode_ImageModalBackground_XfE_W",ImageModalContent:"bbcode_ImageModalContent_1jjqt",RoomEffectContainer:"bbcode_RoomEffectContainer_25cnP",RoomEffectIcon:"bbcode_RoomEffectIcon_MkqM8",randomNumbers:"bbcode_randomNumbers_2IGPW",randomNumbers0:"bbcode_randomNumbers0_1UWWl",randomNumbers1:"bbcode_randomNumbers1_2b7O2",randomNumbers2:"bbcode_randomNumbers2_TxzW6",randomNumbers3:"bbcode_randomNumbers3_1v-a7",randomNumbers4:"bbcode_randomNumbers4_2J19q",randomNumbers5:"bbcode_randomNumbers5_2tjCM",randomNumbers6:"bbcode_randomNumbers6_behC6",randomNumbers7:"bbcode_randomNumbers7_CGn78",randomNumbers8:"bbcode_randomNumbers8_261Uj",randomNumbers9:"bbcode_randomNumbers9_1orHm",randomNumbers10:"bbcode_randomNumbers10_2bRjg",randomNumbersZero:"bbcode_randomNumbersZero_OKABV",coinSpin:"bbcode_coinSpin_3_X1R"}},MsQV:function(e,t,n){"use strict";var o,r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.Hover=0]="Hover",e[e.ClickPopup=1]="ClickPopup",e[e.ClickSurroundingRegion=2]="ClickSurroundingRegion"}(o||(o={})),function(e){e[e.Chat=0]="Chat",e[e.Notification=1]="Notification",e[e.Error=2]="Error"}(r||(r={}));var i=function(){return function(){}}()},"N/w2":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("LAqV"),r=n("oh5H"),i={TimeOfDay:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric"}),TimeOfDayWithSecs:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric"}),TimeInWeek:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric"}),FullTimestamp:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),FullTimestampNoWeekday:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},a={TimeOfDay:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric",hour12:!1}),TimeOfDayWithSecs:new Intl.DateTimeFormat(r.c.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),TimeInWeek:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestamp:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestampNoWeekday:Intl.DateTimeFormat(r.c.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})};function s(e,t){null==t.bIncludeWeekday&&(t.bIncludeWeekday=!0),null==t.bRelativeDate&&(t.bRelativeDate=!0);var n,s=o.f.RTime32ToDate(e),c=o.f.GetLocalMidnightInRTime32(),l=o.f.SettingsStore.FriendsSettings.b24HourClock?a:i,p=t.Format;null==p&&(p=t.bTimeOnly||e>=c-86400?t.bIncludeSeconds?l.TimeOfDayWithSecs:l.TimeOfDay:t.bRelativeDate&&e>=c-432e3?l.TimeInWeek:t.bIncludeWeekday?l.FullTimestamp:l.FullTimestampNoWeekday);try{n=p.format(s)}catch(e){n=Object(r.d)("#ChatRoom_Timestamp_InvalidDate")}return!t.bTimeOnly&&t.bRelativeDate&&e>=c-86400&&e<c&&(n=Object(r.d)("#ChatRoom_Timestamp_Yesterday",n)),n}},NB6M:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var o=n("mrSG"),r=n("q1tI"),i=n("e2SU"),a=n("/7KC"),s=(n("FuJV"),n("2vnA")),c=n("okNM"),l=n("1VtQ"),p=n("1n9R"),u=n("D3Kh"),m=n("E7zH"),d=n("Y3w+"),h=n("oh5H"),f=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.HideStats=function(){this.props.closeStats&&this.props.closeStats()},t.prototype.render=function(){var e=this.props.stats;return r.createElement("div",{className:"dash_video_stats"},r.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},r.createElement(i.qb,null)),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_BufferingResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_PlaybackResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_HtmlResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_ContentServer")," ",r.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_StallEvents")," ",r.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_FailedDownloads")," ",r.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_TimeToFirstFrame")," ",r.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_PlaybackRate")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),r.createElement(_,{stats:e}))},Object(o.c)([l.a],t.prototype,"HideStats",null),t=Object(o.c)([c.a],t)}(r.Component),_=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.createBufferedRange=function(e){var t=this.props.stats,n=[],o=e?"vidbuf":"audbuf",i=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(i>0)for(var a=0;a<i;++a){var s=Object(h.d)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",a),c=e?t.GetBufferedVideoSegmentForDisplay(a):t.GetBufferedAudioSegmentForDisplay(a);n.push(r.createElement("div",{key:o+a},s," ",r.createElement("span",{className:"videoStatsValue"},c)))}else{s=Object(h.d)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");n.push(r.createElement("div",{key:o+"none"},s))}return n},t.prototype.render=function(){var e=this.props.stats;return r.createElement("div",{className:"dash_video_quick_stats"},r.createElement("div",null,Object(h.d)("#DASHPlayerStats_BytesReceived")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&r.createElement("div",null,Object(h.d)("#DASHPlayerStats_DroppedFrames")," ",r.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_VideoBuffered")," ",r.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_AudioBuffered")," ",r.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_BandwidthRequired")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_BandwidthVideo")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_BandwidthNums")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_DownloadNums")," ",r.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_ActiveDownloads")," ",r.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_VideoDownloadProgress")," ",r.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_DroppingFrames")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),r.createElement("div",null,Object(h.d)("#DASHPlayerStats_CurrentFPS")," ",r.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))},t=Object(o.c)([c.a],t)}(r.Component),g=n("/IDK"),b=n("EGkk"),v=n("8o0Y"),y=n("XCHq"),S=n("xdma"),C=n("EcbU"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_schUpdate=new m.b,t.m_bSetupComplete=!1,t}return Object(o.d)(t,e),t.prototype.componentDidMount=function(){0==this.props.updateRate&&this.updateCanvas()},t.prototype.componentWillUnmount=function(){this.m_schUpdate.Cancel()},t.prototype.componentDidUpdate=function(){this.updateCanvas()},t.prototype.BindCanvasRef=function(e){this.m_elCanvas=e},t.prototype.updateCanvas=function(){var e=this;if(null!=this.props.elementRef&&null!=this.m_elCanvas&&!this.m_bSetupComplete){var t=this.props.scaleFactor||[1,1],n=this.props.elementRef,o=this.props.updateRate;this.m_Context=this.m_elCanvas.getContext("2d");var r=Math.floor(this.m_elCanvas.clientWidth/this.props.reductionFactor),i=Math.floor(this.m_elCanvas.clientHeight/this.props.reductionFactor);this.m_elCanvas.width=r,this.m_elCanvas.height=i,this.props.blurAmount>0&&(this.m_Context.filter="blur("+this.props.blurAmount+"px)");var a=function(){e.m_Context.drawImage(n,0,0,r*t[0],i*t[1]),o>0&&e.m_schUpdate.Schedule(o,a)};a(),this.m_bSetupComplete=!0}},t.prototype.render=function(){return r.createElement("canvas",{id:this.props.id,className:this.props.className,ref:this.BindCanvasRef,width:this.props.width,height:this.props.height})},Object(o.c)([l.a],t.prototype,"BindCanvasRef",null),Object(o.c)([l.a],t.prototype,"updateCanvas",null),t}(r.Component),I=n("GxRc");function E(){return r.createElement("div",{className:"STV_ReplayBanner"},Object(h.d)("#DASHPlayerControls_IsReplay"))}var w,A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.video,t=u.b.Loading,n="";if(e){t=e.GetBroadcastState(),n=e.GetBroadcastStateDescription();var o=e.IsBuffering();t==u.b.Ready&&o&&(t=u.b.Loading,n="")}if(e&&t!=u.b.Error&&e.GetUserInputNeeded())return null;if(t==u.b.Ready)return null;var i=t==u.b.Loading;return r.createElement("div",{className:"BroadcastVideoWatchState",style:{filter:"hue-rotate(40deg)"}},i&&r.createElement(I.a,null),!i&&r.createElement("div",{className:"BroadcastVideoWatchState_Text"},n))},t=Object(o.c)([c.a],t)}(r.Component),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnClick=function(){u.a.UserInputClickVideo(this.props.video)},t.prototype.render=function(){return r.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},r.createElement(i.Q,null),r.createElement("span",null,Object(h.d)("#DASHPlayerControls_ClickToPlay")))},Object(o.c)([l.a],t.prototype,"OnClick",null),t}(r.Component),T=n("ljid"),M=n("KbL7"),j=n.n(M);!function(e){e.topleft="topleft",e.top="top",e.topright="topright",e.left="left",e.middle="middle",e.right="right",e.bottomleft="bottomleft",e.bottom="bottom",e.bottomright="bottomright"}(w||(w={}));var L=function(e){function t(t){var n=e.call(this,t)||this;return n.m_fnMouseUp=null,n.m_fnMouseMove=null,n.m_listeners=new m.c,n.m_strDescription="",n.m_aspectRatio=1,n.state={curLeftPosPct:n.props.xPosPct,curTopPosPct:n.props.yPosPct,curRightPosPct:100-(n.props.widthPct+n.props.xPosPct),curBottomPosPct:100-(n.props.yPosPct+n.props.heightPct),curWidthPct:n.props.widthPct,curHeightPct:n.props.heightPct,EdgeDown:null,text_link_url:n.props.link_url,text_link_description:n.props.link_description,bEditingLink:!1,valid_link:n.validateUrl(n.props.link_url)},n.m_strDescription=n.props.link_description,n.m_aspectRatio=n.props.heightPct>0&&n.props.widthPct>0?n.props.widthPct/n.props.heightPct:1,n}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_listeners.Unregister()},t.prototype.LinkRegionBoxRef=function(e){this.m_elLinkRegionBox=e},t.prototype.OnMouseDown=function(e,t){var n=this;this.m_fnMouseUp=function(e){n.OnMouseUp(e,t)},this.m_fnMouseMove=function(e){n.OnMouseMove(e,t)},this.setState({EdgeDown:t}),this.m_rectLinkRegion=this.m_elLinkRegionBox.parentElement.getBoundingClientRect(),this.m_nLocalOffsetXPct=(e.clientX-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.state.curLeftPosPct,this.m_nLocalOffsetYPct=(e.clientY-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.state.curTopPosPct,this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mousemove",this.m_fnMouseMove),this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mouseup",this.m_fnMouseUp),e.preventDefault(),e.stopPropagation()},t.prototype.OnMouseMove=function(e,t){if(void 0!==this.state.EdgeDown){switch(e.shiftKey&&this.m_fnMouseUp(),t){case w.left:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case w.right:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX)});break;case w.top:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY)});break;case w.bottom:this.UpdateState({curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case w.topleft:this.UpdateState({curTopPosPct:this.CalcBottomEdge(e.clientY),curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case w.topright:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.CalcRightEdge(e.clientX)});break;case w.bottomleft:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case w.bottomright:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case w.middle:var n=Object(a.a)(this.CalcLeftEdge(e.clientX),0,100-this.state.curWidthPct),o=100-(n+this.state.curWidthPct),r=Object(a.a)(this.CalcTopEdge(e.clientY),0,100-this.state.curHeightPct),i={curLeftPosPct:n,curRightPosPct:o,curTopPosPct:r,curBottomPosPct:100-(r+this.state.curHeightPct)};this.setState(i)}e.preventDefault(),e.stopPropagation()}},t.prototype.IsValidPct=function(e){return e>=0&&e<=100},t.prototype.UpdateState=function(e){var t=void 0!==e.curTopPosPct?e.curTopPosPct:this.state.curTopPosPct,n=void 0!==e.curBottomPosPct?e.curBottomPosPct:this.state.curBottomPosPct,o=void 0!==e.curLeftPosPct?e.curLeftPosPct:this.state.curLeftPosPct,r=void 0!==e.curRightPosPct?e.curRightPosPct:this.state.curRightPosPct,i=Object(a.a)(100-r-o,this.props.widthMinPct||0,this.props.widthMaxPct||100),s=Object(a.a)(100-n-t,this.props.heightMinPct||0,this.props.heightMaxPct||100);this.props.bLockAspectRatio&&(void 0!==e.curLeftPosPct||void 0!==e.curRightPosPct?s=i/this.m_aspectRatio:i=s*this.m_aspectRatio),void 0!==e.curLeftPosPct?o=100-r-i:r=100-(o+i),void 0!==e.curTopPosPct?t=100-n-s:n=100-(t+s);var c=100-r-o,l=100-n-t;this.IsValidPct(o)&&this.IsValidPct(r)&&this.IsValidPct(t)&&this.IsValidPct(n)&&this.IsValidPct(c)&&this.IsValidPct(l)&&this.setState({curLeftPosPct:o,curRightPosPct:r,curTopPosPct:t,curBottomPosPct:n})},t.prototype.GetXPercent=function(e){return(e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.m_nLocalOffsetXPct},t.prototype.GetYPercent=function(e){return(e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.m_nLocalOffsetYPct},t.prototype.CalcLeftEdge=function(e){return Object(a.a)(this.GetXPercent(e),0,100)},t.prototype.CalcRightEdge=function(e){return Object(a.a)(100-(this.GetXPercent(e)+this.state.curWidthPct),0,100)},t.prototype.CalcTopEdge=function(e){return Object(a.a)(this.GetYPercent(e),0,100)},t.prototype.CalcBottomEdge=function(e){return Object(a.a)(100-(this.GetYPercent(e)+this.state.curHeightPct),0,100)},t.prototype.OnMouseUp=function(e,t){this.setState({curWidthPct:100-this.state.curRightPosPct-this.state.curLeftPosPct}),this.setState({curHeightPct:100-this.state.curBottomPosPct-this.state.curTopPosPct}),this.setState({EdgeDown:void 0}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description}),this.m_listeners.Unregister()},t.prototype.HandleDelete=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(e){return this.props.deleteFn&&this.props.deleteFn(this.props.index),[2]}))}))},t.prototype.OnSetLinkURLChange=function(e){this.setState({text_link_url:e.target.value,valid_link:this.validateUrl(e.target.value)})},t.prototype.OnSetLinkDescriptionChange=function(e){this.setState({text_link_description:e.target.value})},t.prototype.validateUrl=function(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},t.prototype.OnSaveLink=function(){this.m_strDescription=this.state.text_link_description,this.setState({bEditingLink:!this.state.bEditingLink}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description})},t.prototype.OnEditLink=function(){this.setState({bEditingLink:!this.state.bEditingLink})},t.prototype.render=function(){var e=this,t={left:this.state.curLeftPosPct+"%",top:this.state.curTopPosPct+"%",right:this.state.curRightPosPct+"%",bottom:this.state.curBottomPosPct+"%"},n=j.a.LinkRegionDragBox;return null!==this.state.EdgeDown&&(n+=" "+j.a.EdgeDown+" "+j.a[this.state.EdgeDown]),r.createElement("div",{className:n,style:t,ref:this.LinkRegionBoxRef,draggable:!1},r.createElement("div",{className:j.a.LinkRegionGridBox},r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.TopLeft,onMouseDown:function(t){e.OnMouseDown(t,w.topleft)},draggable:!1}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.Top,onMouseDown:function(t){e.OnMouseDown(t,w.top)}}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.TopRight,onMouseDown:function(t){e.OnMouseDown(t,w.topright)},draggable:!1}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.Left,onMouseDown:function(t){e.OnMouseDown(t,w.left)},draggable:!1}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.Middle,onMouseDown:function(t){e.OnMouseDown(t,w.middle)},draggable:!1},this.props.deleteFn&&r.createElement("div",{className:j.a.LinkRegionDelete,onClick:this.HandleDelete},r.createElement(i.qb,null)),!this.props.bDisableLink&&r.createElement("div",{className:j.a.LinkRegionSettings,onClick:this.OnEditLink},r.createElement(i.N,null)),r.createElement("div",{className:j.a.LinkText}," ",this.m_strDescription," ")),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.Right,onMouseDown:function(t){e.OnMouseDown(t,w.right)},draggable:!1}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.BottomLeft,onMouseDown:function(t){e.OnMouseDown(t,w.bottomleft)},draggable:!1}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.Bottom,onMouseDown:function(t){e.OnMouseDown(t,w.bottom)},draggable:!1}),r.createElement("div",{className:j.a.LinkRegionEdge+" "+j.a.BottomRight,onMouseDown:function(t){e.OnMouseDown(t,w.bottomright)},draggable:!1})),this.state.bEditingLink&&r.createElement("div",{className:j.a.LinkRegionInfo},r.createElement(T.o,{className:j.a.LinkRegionInput,type:"text",name:"link_url",value:this.state.text_link_url,label:Object(h.d)("#SteamTV_LinkURL"),placeholder:"https://www.example.com",onChange:this.OnSetLinkURLChange,mustBeURL:!0}),r.createElement(T.o,{className:j.a.LinkRegionInput,type:"text",name:"link_description",value:this.state.text_link_description,label:Object(h.d)("#SteamTV_LinkDescription"),placeholder:Object(h.d)("#SteamTV_LinkDescription_Placeholder"),onChange:this.OnSetLinkDescriptionChange}),r.createElement("div",{className:j.a.LinkRegionButtonContainer},r.createElement(T.d,{disabled:!this.state.valid_link,onClick:this.OnSaveLink}," ",Object(h.d)("#Button_OK")," "),r.createElement(T.d,{onClick:this.OnEditLink}," ",Object(h.d)("#Button_Cancel")))))},Object(o.c)([l.a],t.prototype,"LinkRegionBoxRef",null),Object(o.c)([l.a],t.prototype,"OnMouseDown",null),Object(o.c)([l.a],t.prototype,"OnMouseMove",null),Object(o.c)([l.a],t.prototype,"OnMouseUp",null),Object(o.c)([l.a],t.prototype,"HandleDelete",null),Object(o.c)([l.a],t.prototype,"OnSetLinkURLChange",null),Object(o.c)([l.a],t.prototype,"OnSetLinkDescriptionChange",null),Object(o.c)([l.a],t.prototype,"OnSaveLink",null),Object(o.c)([l.a],t.prototype,"OnEditLink",null),t=Object(o.c)([c.a],t)}(r.Component),G=n("D/sW"),N=n.n(G),R=function(e){function t(t){var n=e.call(this,t)||this;return n.m_schHideControls=new m.b,n.m_schUnmountControls=new m.b,n.m_elBroadcastPlayer=null,n.m_bMouseDown=!1,n.m_elMouseDown=null,n.m_listeners=new m.c,n.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1},n}return Object(o.d)(t,e),t.prototype.StopVideo=function(){var e=this.state.video;e&&(u.a.StopVideo(e),this.setState({video:null}))},t.prototype.IsMuted=function(){var e=this.state.video;return!e||e.IsMuted()},t.prototype.StopPlaybackTillUserInput=function(){var e=this.state.video;e&&e.StopPlaybackTillUserInput()},t.prototype.componentDidUpdate=function(e,t){var n=this;!t.bMountControls&&this.state.bMountControls?setTimeout((function(){n.setState((function(e){return{bControlsVisible:e.bMountControls}}))}),15):t.bControlsVisible&&!this.state.bControlsVisible&&this.state.video&&!this.state.video.IsPaused()&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls),this.props.steamIDBroadcast!==e.steamIDBroadcast&&this.BindVideoRef(this.m_elVideo)},t.prototype.componentWillUnmount=function(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()},t.prototype.BindBroadcastPlayerRef=function(e){this.m_listeners.Unregister(),this.m_elBroadcastPlayer=e,e&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))},t.prototype.BindVideoRef=function(e){var t=void 0;this.StopVideo(),this.props.steamIDBroadcast?e&&(t=u.a.CreateBroadcastVideo(e,this.props.steamIDBroadcast,this.props.watchLocation,this.props.bWebRTC)):this.props.broadcastClipID&&e&&(t=u.a.CreateClipVideo(e,this.props.broadcastClipID,this.props.watchLocation)),t&&(this.props.bStartMuted&&t.SetMute(!0),this.props.bStartPaused?t.StopPlaybackTillUserInput():t.Play()),this.setState({video:t}),this.m_elVideo=e},t.prototype.OnMouseDown=function(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},t.prototype.OnMouseUp=function(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls)},t.prototype.OnMouseMove=function(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)},t.prototype.OnMouseLeave=function(e){this.HideControls()},t.prototype.HideControls=function(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1})},t.prototype.UmountControls=function(){this.setState((function(e){if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}}))},t.prototype.ShowStatsView=function(){var e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))},t.prototype.OnContextMenu=function(e){this.state.bFullscreen||(Object(v.a)(r.createElement(b.c,null,this.GetContextMenuItems()),e),e.preventDefault())},t.prototype.ToggleStatsView=function(e){var t=!this.state.bShowStats;this.setState({bShowStats:t});var n=this.state.video;n&&n.SetStatsViewIsVisible(t)},t.prototype.ShowStorePage=function(e){var t=this.state.video;if(t&&this.props.onOpenLinkInNewWindow){var n=t.GetBroadcastInfo();if(n){var o=p.c.STORE_BASE_URL+"app/"+n.m_strAppId;this.props.onOpenLinkInNewWindow(e,o),e.stopPropagation()}}},t.prototype.GetContextMenuItems=function(){var e=this,t=[],n=this.state.video;if(!n)return t;var o=n.GetBroadcastInfo();return t.push(r.createElement(b.b,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:function(t){e.ToggleStatsView(t)}},Object(h.d)("#Broadcast_VideoContext_ToggleStats"))),o&&"0"!=o.m_strAppId&&"7"!=o.m_strAppId&&t.push(r.createElement(b.d,{key:"visitstore",onSelected:function(t){e.ShowStorePage(t)}},Object(h.d)("#Broadcast_VideoContext_OpenStore"))),t},t.prototype.CloseStats=function(){var e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))},t.prototype.OnToggleFullscreen=function(){this.m_elBroadcastPlayer&&(Object(g.b)(this.m_elBroadcastPlayer)?Object(g.h)(this.m_elBroadcastPlayer):Object(g.t)(this.m_elBroadcastPlayer,this.m_elVideo))},t.prototype.OnFullscreenChange=function(e){if(this.m_elBroadcastPlayer){var t=Object(g.b)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}},t.prototype.BHideVideoControls=function(){var e=this.state.video;return!e||(!!e.GetUserInputNeeded()||u.a.GetBroadcastState(e)==u.b.Error)},t.prototype.render=function(){var e=this.state.video,t=e&&e.IsPaused(),n=e&&e.BHasDASHStats()&&this.state.bShowStats,o=Boolean(e&&e.IsReplay()),i=this.state.bMountControls,a=this.state.bControlsVisible||t,s=e&&e.GetUserInputNeeded(),c="videoContainer";a||(c+=" HidePlayerControls"),t&&(c+=" VideoPaused"),this.state.bFullscreen&&(c+=" fullscreenVideo"),this.props.classes&&(c+=" "+this.props.classes);var l=[];!this.state.bFullscreen&&this.props.actions&&(l=l.concat(this.props.actions)),!this.state.bFullscreen&&this.props.onTheaterMode&&l.push(r.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:Object(h.d)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),l.push(r.createElement("div",{key:"FullscreenToggle",title:Object(h.d)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));var p=i&&!this.BHideVideoControls(),u=i&&!this.state.bFullscreen,m=this.props.fnRenderBroadcastContext&&this.props.fnRenderBroadcastContext();return r.createElement("div",{ref:this.BindBroadcastPlayerRef,className:c,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},m&&r.createElement("div",{className:N.a.BroadcastContext},m),o&&r.createElement(E,null),this.props.showVideoBackgroundBlur&&r.createElement(O,{className:"videoBlur",elementRef:this.m_elVideo,updateRate:33,width:320,height:180,reductionFactor:10,blurAmount:5}),r.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:!0,autoPlay:!0,playsInline:!0,controls:!1}),this.props.linkRegions?r.createElement(J,{linkRegions:this.props.linkRegions,editMode:this.props.editMode,onSaveLinkRegions:this.props.onSaveLinkRegions}):null,this.props.linkElement,p&&r.createElement(k,{video:e,actions:l,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow,onShowStats:this.ToggleStatsView,bIncludeClipEditor:this.props.bIncludeClipEditor}),u&&r.createElement(B,{onClick:this.props.onRequestClose}),n&&r.createElement(f,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),r.createElement(A,{video:e}),s&&r.createElement(D,{video:e}))},Object(o.c)([l.a],t.prototype,"BindBroadcastPlayerRef",null),Object(o.c)([l.a],t.prototype,"BindVideoRef",null),Object(o.c)([l.a],t.prototype,"OnMouseDown",null),Object(o.c)([l.a],t.prototype,"OnMouseUp",null),Object(o.c)([l.a],t.prototype,"OnMouseMove",null),Object(o.c)([l.a],t.prototype,"OnMouseLeave",null),Object(o.c)([l.a],t.prototype,"HideControls",null),Object(o.c)([l.a],t.prototype,"UmountControls",null),Object(o.c)([l.a],t.prototype,"ShowStatsView",null),Object(o.c)([l.a],t.prototype,"OnContextMenu",null),Object(o.c)([l.a],t.prototype,"ToggleStatsView",null),Object(o.c)([l.a],t.prototype,"ShowStorePage",null),Object(o.c)([l.a],t.prototype,"CloseStats",null),Object(o.c)([l.a],t.prototype,"OnToggleFullscreen",null),Object(o.c)([l.a],t.prototype,"OnFullscreenChange",null),t=Object(o.c)([c.a],t)}(r.Component),k=(t.b=R,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props.video;if(!e)return null;var t=e.has_segments;return r.createElement("div",{className:"videoControls"},r.createElement(Q,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0,bVerticalBroadcastChat:!0,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow}),r.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},r.createElement(K,{video:e,bIncludeClipEditor:this.props.bIncludeClipEditor}),r.createElement("div",{className:"STV_BroadcastController"},r.createElement("div",{className:"videoControlsButtons LeftSpacer"}),r.createElement(P,{video:e}),r.createElement(F,{video:e}),r.createElement(H,{video:e,actions:this.props.actions,onShowStats:this.props.onShowStats}))))},t=Object(o.c)([c.a],t)}(r.Component)),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.render=function(){return this.props.onClick?r.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},r.createElement(i.qb,null)):null},t}(r.PureComponent),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnJumpBackward=function(){this.props.video.JumpTime(-15)},t.prototype.OnJumpForward=function(){this.props.video.JumpTime(15)},t.prototype.render=function(){var e=this.props.video,t=e.CanSeek();return r.createElement("div",{className:"videoControlsButtons PlayControls"},r.createElement(V,{video:e}),t&&r.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},r.createElement(i.I,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),r.createElement("div",{className:"jumpAheadValue"},15)),r.createElement(x,{video:e}),t&&r.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},r.createElement(i.I,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),r.createElement("div",{className:"jumpAheadValue"},15)),t&&r.createElement(U,{video:e}))},Object(o.c)([l.a],t.prototype,"OnJumpBackward",null),Object(o.c)([l.a],t.prototype,"OnJumpForward",null),t}(r.Component),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnGoLiveClicked=function(e){this.props.video.JumpToLiveEdge()},t.prototype.render=function(){var e=this.props.video.IsOnLiveEdge();return r.createElement("div",{className:"videoControlsButtons GoLive"},r.createElement("div",{className:"videoControlButton videoControlGoLive"+(e?" isLiveEdge":""),onClick:e?null:this.OnGoLiveClicked},r.createElement(i.I,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),r.createElement("div",{className:"jumpGoLive"},e?Object(h.d)("#DASHPlayerControls_IsLive"):Object(h.d)("#DASHPlayerControls_GoLive"))))},Object(o.c)([l.a],t.prototype,"OnGoLiveClicked",null),t=Object(o.c)([c.a],t)}(r.Component),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnTogglePlayPause=function(){this.props.video.TogglePlayPause()},t.prototype.render=function(){var e=this.props.video.IsPaused();return r.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},e?r.createElement(i.Q,null):r.createElement(i.O,null))},Object(o.c)([l.a],t.prototype,"OnTogglePlayPause",null),t=Object(o.c)([c.a],t)}(r.Component),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"has_previous_marker",{get:function(){return void 0!==this.GetPreviousMarkerTime()},enumerable:!1,configurable:!0}),t.prototype.GetPreviousMarkerTime=function(){if(this.props.video.has_markers)for(var e=this.props.video.GetTimelineMarkers(),t=this.props.video.GetPlaybackTime(),n=e.length-1;n>=0;n--)if(!(e[n].nTime>=t))return e[n].nTime},t.prototype.OnJumpToPreviousMarkerClicked=function(e){var t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)},t.prototype.render=function(){var e=this.props.video.BHasMarkersOrSegments();return r.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},r.createElement(i.I,{bHidePostArrow:!0,bFlipHorizontal:!0}))},Object(o.c)([s.l],t.prototype,"has_previous_marker",null),Object(o.c)([l.a],t.prototype,"OnJumpToPreviousMarkerClicked",null),t=Object(o.c)([c.a],t)}(r.Component),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"has_next_marker",{get:function(){return void 0!==this.GetNextMarkerTime()},enumerable:!1,configurable:!0}),t.prototype.GetNextMarkerTime=function(){if(this.props.video.has_markers)for(var e=this.props.video.GetTimelineMarkers(),t=this.props.video.GetPlaybackTime(),n=0;n<e.length;n++)if(!(e[n].nTime<=t))return e[n].nTime},t.prototype.OnJumpToNextMarkerClicked=function(e){var t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)},t.prototype.render=function(){var e=this.props.video.BHasMarkersOrSegments();return r.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},r.createElement(i.I,{bHidePostArrow:!0,bFlipHorizontal:!1}))},Object(o.c)([s.l],t.prototype,"has_next_marker",null),Object(o.c)([l.a],t.prototype,"OnJumpToNextMarkerClicked",null),t=Object(o.c)([c.a],t)}(r.Component),H=function(e){function t(t){var n=e.call(this,t)||this;return n.m_elSubtitlesButton=r.createRef(),n.m_elSubtitlesPanel=r.createRef(),n.state={bSettingsOpen:!1,bSubtitlesOpen:!1},n}return Object(o.d)(t,e),t.prototype.OnVideoControlClick=function(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)},t.prototype.OnSubtitlesClick=function(e){this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen}),this.m_SubtitlesButtonPos=[this.m_elSubtitlesButton.current.offsetLeft,this.m_elSubtitlesButton.current.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)},t.prototype.OnMouseUp=function(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),Object(g.e)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1}),Object(g.e)(this.m_elSubtitlesPanel.current,e.target)||this.setState({bSubtitlesOpen:!1})},t.prototype.bindSettingsButton=function(e){this.m_elSettingsButton=e},t.prototype.BindSettingsPanel=function(e){this.m_elSettingsPanel=e},t.prototype.OnShowStats=function(e){this.props.onShowStats(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})},t.prototype.render=function(){var e,t,n=this,o=!1,a=!1,s=this.props,c=s.video,l=s.actions,p=0,u=r.createElement("div",{key:"separator",className:"settingsMenuSeparator"});if(this.state.bSettingsOpen&&(o=!0,e=this.props.video.GetVideoRepresentations(),(t=e.map((function(e){return r.createElement(b.b,{key:e.id,onSelected:function(){n.props.video.SetVideoRepresentation(e),n.setState({bSettingsOpen:!n.state.bSettingsOpen})},bChecked:e.selected},e.displayName)}))).push(u),t.push(r.createElement(b.d,{key:"statsToggle",onSelected:this.OnShowStats},Object(h.d)("#Broadcast_VideoContext_ToggleStats"),"\t")),p=0-(21*t.length+32)),this.state.bSubtitlesOpen){a=!0,(t=[]).push(r.createElement(b.b,{key:"none",onSelected:function(){n.props.video.SetSubtitles(null),n.setState({bSubtitlesOpen:!n.state.bSubtitlesOpen})},className:"NoSubtitles",bChecked:!1},Object(h.d)("#Broadcast_None")));for(var m=function(e){var o=d.props.video.ListSubtitles()[e];t.push(r.createElement(b.b,{key:o.language,onSelected:function(){n.props.video.SetSubtitles(o.language),n.setState({bSubtitlesOpen:!n.state.bSubtitlesOpen})},bChecked:"showing"===o.mode},o.label))},d=this,f=0;f<this.props.video.ListSubtitles().length;f++)m(f);p=-352}var _=this.props.video.GetSubtitles()||!1;return r.createElement("div",{className:"STV_BroadcastSettings"},this.props.video.ListSubtitles().length?r.createElement("div",{className:"videoControlButton"+(_?" ClosedCaptionsActive":""),onClick:this.OnSubtitlesClick,ref:this.m_elSubtitlesButton},r.createElement(i.j,null)):null,r.createElement("div",{className:"videoControlButton VideoSettings "+(o?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},r.createElement(i.Z,null)),r.createElement(W,{video:c}),l&&l.map((function(e){return r.createElement("div",{key:e.key,className:"videoControlButton videoControlFitWidth"},e)})),o&&r.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:p}},r.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},t)),a&&r.createElement("div",{ref:this.m_elSubtitlesPanel,className:"STV_BroadcastSettingsPanel SubtitlesMenu",style:{maxHeight:"320px",left:this.m_SubtitlesButtonPos[0],top:this.m_SubtitlesButtonPos[1],marginTop:p}},r.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},t)))},Object(o.c)([l.a],t.prototype,"OnVideoControlClick",null),Object(o.c)([l.a],t.prototype,"OnSubtitlesClick",null),Object(o.c)([l.a],t.prototype,"OnMouseUp",null),Object(o.c)([l.a],t.prototype,"bindSettingsButton",null),Object(o.c)([l.a],t.prototype,"BindSettingsPanel",null),Object(o.c)([l.a],t.prototype,"OnShowStats",null),t}(r.Component),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.k_nHideSliderTimeout=1500,t.m_bShowSlider=!0,t.m_schHideSlider=new m.b,t.m_bChildDragging=!1,t.m_bMouseOver=!1,t}return Object(o.d)(t,e),t.prototype.componentWillUnmount=function(){this.m_schHideSlider.Cancel()},t.prototype.ToggleMute=function(){var e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)},t.prototype.OnMouseEnter=function(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()},t.prototype.OnMouseLeave=function(e){this.m_bMouseOver=!1,this.ScheduleHide()},t.prototype.OnChildDrag=function(e){this.m_bChildDragging=e,this.ScheduleHide()},t.prototype.ScheduleHide=function(){var e=this;this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,(function(){return e.m_bShowSlider=!0}))},t.prototype.render=function(){var e=this.props.video,t=e.IsMuted(),n=100*e.GetVolume(),o="videoControlButton";n>65?o+=" HighestVolume":n>45?o+=" HighVolume":n<46&&n>24?o+=" MedVolume":n<25&&(o+=" LowVolume");var a="BroadcastVolumeControl";return this.m_bShowSlider&&(a+=" ShowVolumeSlider"),t&&(a+=" muted"),r.createElement("div",{className:a,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},r.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},r.createElement("div",{className:o,onClick:this.ToggleMute},r.createElement(i.ob,null)),r.createElement(z,{video:e,onDrag:this.OnChildDrag})))},Object(o.c)([s.A],t.prototype,"m_bShowSlider",void 0),Object(o.c)([l.a],t.prototype,"ToggleMute",null),Object(o.c)([l.a],t.prototype,"OnMouseEnter",null),Object(o.c)([l.a],t.prototype,"OnMouseLeave",null),Object(o.c)([l.a],t.prototype,"OnChildDrag",null),t=Object(o.c)([c.a],t)}(r.Component),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_elSlider=null,t.m_nVolumeStartOfDrag=0,t}return Object(o.d)(t,e),t.prototype.OnMouseDown=function(e){var t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)},t.prototype.OnMouseMove=function(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)},t.prototype.OnMouseUp=function(e){if(this.m_elSlider){this.SetVolumeWithCoord(this.m_elSlider,e.clientX);var t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}},t.prototype.SetVolumeWithCoord=function(e,t){var n=e.getBoundingClientRect(),o=a.c(t,n.left,n.right,0,1),r=a.a(o,0,1),i=this.props.video;i.SetMute(o<.01),i.SetVolume(r)},t.prototype.render=function(){var e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);var n={left:t+"%"},o={width:t+"%"};return r.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},r.createElement("div",{className:"BroadcastVolumeSlider_Track"}),r.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:o}),r.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:n}))},Object(o.c)([l.a],t.prototype,"OnMouseDown",null),Object(o.c)([l.a],t.prototype,"OnMouseMove",null),Object(o.c)([l.a],t.prototype,"OnMouseUp",null),Object(o.c)([s.i],t.prototype,"SetVolumeWithCoord",null),t=Object(o.c)([c.a],t)}(r.Component),Y=function(e){return r.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:function(){return e.onMouseEnter(e.pos)},onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown?e.onMouseDown:void 0},r.createElement("div",{className:"timelineMarkerIcon"},r.createElement(i.X,null)))};function q(e){var t=e.startPos,n=e.endPos,o="",i=1;return t<0&&(i=(n-t)/10,t=0,o=" hideFront"),r.createElement("div",{className:"STV_timelineSegment"+o,style:{left:t+"%",width:n-t+"%",opacity:i},onClick:e.onClick},r.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),r.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),r.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}var K=function(e){function t(t){var n=e.call(this,t)||this;return n.m_elSlider=r.createRef(),n.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0,hoverX:0,bStartMouseDown:!1,bEndMouseDown:!1,thumbnailURL:""},n}return Object(o.d)(t,e),t.prototype.OnMouseDown=function(e,t){var n=this;if(this.m_elSlider){e.persist(),this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();var o={};"start"===t?(o={bStartMouseDown:!0},e.stopPropagation()):"end"===t?(o={bEndMouseDown:!0},e.stopPropagation()):o={bGrabberMouseDown:!0},this.setState(o,(function(){return n.AdjustSliderForClientX(e.clientX)})),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}},t.prototype.OnMouseMove=function(e){this.AdjustSliderForClientX(e.clientX)},t.prototype.OnMouseUp=function(e){this.state.bStartMouseDown?this.setState({bStartMouseDown:!1}):this.state.bEndMouseDown?this.setState({bEndMouseDown:!1}):(this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nGrabberMouseDownTime:0})),this.m_elSlider.current&&(this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp))},t.prototype.OnKeyDown=function(e){37==e.keyCode?(this.props.video.JumpTime(-15),e.preventDefault()):39==e.keyCode&&(this.props.video.JumpTime(15),e.preventDefault())},t.prototype.AdjustSliderForClientX=function(e){var t=this.props.video,n=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration(),r=t.GetTimeAtMousePosition(e,this.m_rectSlider,n,o);if(this.state.bStartMouseDown){var i=a.a(r,n,t.m_editorEndTime-5);t.m_editorStartTime=i}else if(this.state.bEndMouseDown){var s=a.a(r,t.m_editorStartTime+5,o);t.m_editorEndTime=s}else r!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:r})},t.prototype.OnMouseHoverMove=function(e){this.AdjustHoverForClientX(e.clientX)},t.prototype.OnMouseHoverLeave=function(e){this.setState({hoverX:0})},t.prototype.AdjustHoverForClientX=function(e){var t=this.props.video,n=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration();this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();t.GetTimeAtMousePosition(e,this.m_rectSlider,n,o)},t.prototype.OnSegmentClick=function(e){this.props.video.Seek(e)},t.prototype.OnMarkerMouseEnter=function(e){this.setState({nHoverValue:e})},t.prototype.OnMarkerMouseLeave=function(){this.setState({nHoverValue:void 0})},t.prototype.render=function(){var e=this,t=this.props.video,n=this.state.bGrabberMouseDown,o=t.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,u.c.Timeline),s=t.GetPercentOffsetFromTime(t.GetPlaybackTime(),u.c.Timeline),c=t.GetPercentOffsetFromTime(t.GetVideoAvailableStartTime(),u.c.Timeline);c<.05&&(c=0);var l=a.a(o,0,100).toFixed(1)+"%",p=a.a(s,0,100).toFixed(1)+"%",m=a.a(c,0,100).toFixed(1)+"%",f={},_={},g={},b={};n?(b.left=l,f.width=l,_.width=p,g.width=m):(b.left=p,_.width=p,g.width=m);var v=Object(d.d)(t.GetPlaybackTime()),y=Object(d.d)(this.state.nHoverValue),S="STV_timelineContainer";this.state.bGrabberMouseDown&&(S+=" grabberDown"),t.IsTimelineMapActive()&&(S+=" minimapActive");var C="";(o=n?o:s)>100?C=" grabberOffScreenRight grabberOffscreen":o<0&&(C=" grabberOffScreenLeft grabberOffscreen");var O=[];t.GetTimelineMarkers().forEach((function(n,o){var i=t.GetPercentOffsetFromTime(n.nTime,u.c.Timeline);i<0||i>100||O.push(r.createElement(Y,{key:o,pos:i,label:n.strTemplateName,onMouseEnter:e.OnMarkerMouseEnter,onMouseLeave:e.OnMarkerMouseLeave}))}));var I=[];t.GetTimelineSegments().forEach((function(n,o){var i=t.GetPercentOffsetFromTime(n.nTimeStart,u.c.Timeline);if(!(i>100)){var a=t.GetPercentOffsetFromTime(n.nTimeEnd,u.c.Timeline);a<0||I.push(r.createElement(q,{key:o,startPos:i,endPos:a,label:n.strTemplateName,color:n.color,onClick:function(t){return e.OnSegmentClick(n.nTimeStart)}}))}}));var E=t.GetPercentOffsetFromTime(t.m_editorStartTime,u.c.Timeline),w=t.GetPercentOffsetFromTime(t.m_editorEndTime,u.c.Timeline),A=this.props.bIncludeClipEditor?[r.createElement(Y,{key:"start",pos:E,label:Object(h.d)("#DASHPlayerControls_Start"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:function(t){return e.OnMouseDown(t,"start")}}),r.createElement(Y,{key:"end",pos:w,label:Object(h.d)("#DASHPlayerControls_End"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:function(t){return e.OnMouseDown(t,"end")}})]:[];return r.createElement("div",{className:"videoTimelineMain",tabIndex:0,onKeyDown:this.OnKeyDown},r.createElement("div",{className:S},r.createElement("div",{className:"DialogLabel"},v),r.createElement("div",{className:"STV_timelineSegmentsContainer"},I),r.createElement("div",{onMouseDown:this.OnMouseDown,onMouseMove:this.OnMouseHoverMove,onMouseLeave:this.OnMouseHoverLeave,ref:this.m_elSlider},r.createElement("div",{className:"VideoTimelineSlider"},r.createElement("div",{className:"STV_timelineValue",style:f}),r.createElement("div",{className:"STV_timelineGhostValue",style:_}),r.createElement("div",{className:"STV_timelineNoVideo",style:g}),O,A,Boolean(this.state.hoverX)&&r.createElement("div",{key:"grabbertime",style:{position:"absolute",left:this.state.hoverX-75,bottom:"30px"}},r.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center"}},this.state.thumbnailURL&&r.createElement("img",{style:{width:"150px"},src:this.state.thumbnailURL}),r.createElement("span",{className:"STV_timelineGrabberValue",style:{position:"absolute",bottom:"4px"}},y))),r.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:b},r.createElement("div",{className:"STV_timelineGrabber"+C},r.createElement("div",{className:"STV_timelineGrabberArrow"},r.createElement(i.W,null))))))))},Object(o.c)([l.a],t.prototype,"OnMouseDown",null),Object(o.c)([l.a],t.prototype,"OnMouseMove",null),Object(o.c)([l.a],t.prototype,"OnMouseUp",null),Object(o.c)([l.a],t.prototype,"OnKeyDown",null),Object(o.c)([l.a],t.prototype,"OnMouseHoverMove",null),Object(o.c)([l.a],t.prototype,"OnMouseHoverLeave",null),Object(o.c)([l.a],t.prototype,"AdjustHoverForClientX",null),Object(o.c)([l.a],t.prototype,"OnSegmentClick",null),Object(o.c)([l.a],t.prototype,"OnMarkerMouseEnter",null),Object(o.c)([l.a],t.prototype,"OnMarkerMouseLeave",null),t=Object(o.c)([c.a],t)}(r.Component),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={info:null},t}return Object(o.d)(t,e),t.getDerivedStateFromProps=function(e,t){if((!t.info||t.info.m_steamIDBroadcast!==e.steamID)&&(t.info&&(u.a.StopInfo(t.info),t.info=null),e.steamID))return{info:u.a.StartInfo(e.steamID)};return null},t.prototype.componentWillUnmount=function(){this.state.info&&u.a.StopInfo(this.state.info)},t.prototype.RenderStreamSwitcher=function(){var e=this.props.steamID;return y.b.stream[e]?r.createElement(Z,{value:e,options:y.b.stream,onChange:this.props.onLocalStreamChange}):null},t.prototype.render=function(){var e=this,t=this.state.info;if(!t)return null;var n="";t.m_nViewerCount&&(n=t.m_nViewerCount.toLocaleString(h.c.GetPreferredLocales()));var o=y.b.bValid&&y.b.stream&&y.b.stream[t.m_steamIDBroadcast],a=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&(parseInt(t.m_strAppId)>0||o);return r.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&r.createElement(S.a,{className:"broadcastDetailsThumbBlur",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastDetailsHeader"},t&&t.m_strAppTitle&&r.createElement("div",{className:"displayColumn"},r.createElement("div",{className:"Info"},r.createElement("span",{className:"AppTitle"},t.m_strAppTitle),t.m_strTitle&&r.createElement("span",{className:"BroadcastTitle"}," - ",t.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),n&&r.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},r.createElement(i.mb,null),Object(h.d)("#Broadcast_ViewerCount",n))),o&&this.props.onOpenLinkInNewWindow&&r.createElement("div",{className:"Actions"},r.createElement("div",{onClick:function(t){return e.props.onOpenLinkInNewWindow(t,y.b.link)},className:"BroadcastLink"},y.b.linkName))),a&&r.createElement(C.f,{id:y.b.bValid&&y.b.stream&&y.b.stream[t.m_steamIDBroadcast]?y.b.appID:parseInt(t.m_strAppId)}))},t=Object(o.c)([c.a],t)}(r.Component),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.showContextMenu=function(e){var t=this.props,n=t.options,o=t.value,i=t.onChange,a=Object.keys(n).map((function(e){return r.createElement(b.b,{key:e,onSelected:function(){return i(e)},bChecked:e===o},Object(h.d)(n[e]))}));Object(v.a)(r.createElement(b.c,null,a),e)},t.prototype.render=function(){var e=this.props,t=e.value,n=e.options[t];return r.createElement("div",{className:"BroadcastLanguage",onClick:this.showContextMenu},r.createElement("span",null," - ",Object(h.d)(n)),r.createElement("div",{className:"ContextMenuButton"},r.createElement(i.p,null)))},Object(o.c)([l.a],t.prototype,"showContextMenu",null),t}(r.Component),J=function(e){function t(t){var n=e.call(this,t)||this;return n.state={sizableRegion:[]},n}return Object(o.d)(t,e),t.prototype.AddLinkRegion=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t=this;return Object(o.e)(this,(function(n){return e=this.state.sizableRegion.length,this.state.sizableRegion.push({xPosPct:2.5+e,yPosPct:2.5+e,widthPct:20,heightPct:15}),this.setState({sizableRegion:this.state.sizableRegion},(function(){return t.OnSaveRegions()})),[2]}))}))},t.prototype.componentDidUpdate=function(e){var t=this;0==e.linkRegions.length&&this.props.linkRegions.forEach((function(e,n){t.LoadLinkRegion(e,n)}))},t.prototype.LoadLinkRegion=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.state.sizableRegion.length,this.state.sizableRegion.push({xPosPct:e.left,yPosPct:e.top,widthPct:e.width,heightPct:e.height,link_url:e.url,link_description:e.link_description,link_index:e.link_index}),[4,this.setState({sizableRegion:this.state.sizableRegion})];case 1:return t.sent(),[2]}}))}))},t.prototype.OnSaveRegions=function(){var e;e={links:[]};for(var t=0;t<this.state.sizableRegion.length;t++){var n;n={left:Math.floor(100*this.state.sizableRegion[t].xPosPct),top:Math.floor(100*this.state.sizableRegion[t].yPosPct),width:Math.floor(100*this.state.sizableRegion[t].widthPct),height:Math.floor(100*this.state.sizableRegion[t].heightPct),url:this.state.sizableRegion[t].link_url,link_description:this.state.sizableRegion[t].link_description,link_index:t},e.links.push(n)}this.props.onSaveLinkRegions(e)},t.prototype.DeleteRegion=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t=this;return Object(o.e)(this,(function(n){return this.state.sizableRegion.splice(e,1),console.log("keys: ",this.state.sizableRegion.keys),this.setState({sizableRegion:this.state.sizableRegion},(function(){return t.OnSaveRegions()})),[2]}))}))},t.prototype.UpdatePanel=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n=this;return Object(o.e)(this,(function(o){return this.state.sizableRegion[e]=t,this.setState({sizableRegion:this.state.sizableRegion},(function(){return n.OnSaveRegions()})),[2]}))}))},t.prototype.render=function(){var e=this;return r.createElement("div",{className:"LinkOverlayContainer"},r.createElement("div",{className:"LinkOverlayValidRegion"},!this.props.editMode&&this.props.linkRegions?this.props.linkRegions.map((function(e){return r.createElement("a",{key:e.link_index,href:p.c.STEAMTV_BASE_URL+"linkfilter/"+e.url,target:"_blank",rel:"noopener noreferrer"},r.createElement("div",{className:"LinkRegion",style:{left:e.left+"%",top:e.top+"%",width:e.width+"%",height:e.height+"%"}},r.createElement("div",{className:"LinkRegionText"},e.link_description," ")))})):null,this.props.editMode&&this.state.sizableRegion.map((function(t,n){return r.createElement(L,{key:100*n+t.xPosPct,index:n,deleteFn:e.DeleteRegion,updateFn:e.UpdatePanel,xPosPct:t.xPosPct,yPosPct:t.yPosPct,widthPct:t.widthPct,heightPct:t.heightPct,link_url:t.link_url,link_description:t.link_description})})),this.props.editMode&&r.createElement("div",{className:"AddLinkRegion",onClick:this.AddLinkRegion},Object(h.d)("#SteamTV_AddLinkRegion"))),r.createElement("div",{className:"LinkOverlayInvalidRegion"},r.createElement("div",null,Object(h.d)("#SteamTV_LinkRegionReserved"))))},Object(o.c)([l.a],t.prototype,"AddLinkRegion",null),Object(o.c)([l.a],t.prototype,"LoadLinkRegion",null),Object(o.c)([l.a],t.prototype,"OnSaveRegions",null),Object(o.c)([l.a],t.prototype,"DeleteRegion",null),Object(o.c)([l.a],t.prototype,"UpdatePanel",null),t=Object(o.c)([c.a],t)}(r.Component)},"NP+6":function(e,t,n){e.exports={SteamAwardContainer:"nominationandvote_SteamAwardContainer_3-613",InLibraryView:"nominationandvote_InLibraryView_5UGSe",Category_love:"nominationandvote_Category_love_3GsTV",Category_goty:"nominationandvote_Category_goty_1L0VW",Category_vrgoty:"nominationandvote_Category_vrgoty_3kTQ_",Category_friends:"nominationandvote_Category_friends_1DwhQ",Category_gameplay:"nominationandvote_Category_gameplay_1NLlZ",Category_storyrich:"nominationandvote_Category_storyrich_28kWP",Category_yousuck:"nominationandvote_Category_yousuck_y4XZ7",Category_visual:"nominationandvote_Category_visual_1U2mn",SteamAwardHeader:"nominationandvote_SteamAwardHeader_1zbuL",SteamAwardHeaderImage:"nominationandvote_SteamAwardHeaderImage_2bSbU",SteamAwardMainCtn:"nominationandvote_SteamAwardMainCtn_246T-",SteamAwardMainTitle:"nominationandvote_SteamAwardMainTitle_iAiOu",SteamAwardSubTitle:"nominationandvote_SteamAwardSubTitle_3ej13",SteamAwardLearnMore:"nominationandvote_SteamAwardLearnMore__d8oA",BottomRight:"nominationandvote_BottomRight_Th2vg",SteamAwardHeaderText:"nominationandvote_SteamAwardHeaderText_2UOOM",LinkText:"nominationandvote_LinkText_Z59_l",SteamAwardVoteWidget:"nominationandvote_SteamAwardVoteWidget_2-z4R",SteamAwardVotePrompt:"nominationandvote_SteamAwardVotePrompt_2LnnJ",SteamAwardCategoryTitle:"nominationandvote_SteamAwardCategoryTitle_SdjlJ",SteamAwardCategoryDesc:"nominationandvote_SteamAwardCategoryDesc_2NmMc",SteamAwardVoteButtonArea:"nominationandvote_SteamAwardVoteButtonArea_3haOY",SteamAwardVoteButton:"nominationandvote_SteamAwardVoteButton_2_to5",SteamAwardVoteButtonText:"nominationandvote_SteamAwardVoteButtonText_Cs099",SteamAwardVoteButtonSubmitted:"nominationandvote_SteamAwardVoteButtonSubmitted_1v_9m",SteamAwardNominateButton:"nominationandvote_SteamAwardNominateButton_ix_q-",SteamAwardLinkToNominationPage:"nominationandvote_SteamAwardLinkToNominationPage_25oMO",SteamAwardModalGameTitle:"nominationandvote_SteamAwardModalGameTitle_2ptvr"}},OAU9:function(e,t,n){e.exports={RecommendedNote:"voicesettings_RecommendedNote_3NFIb",TransmissionTypeSettings:"voicesettings_TransmissionTypeSettings_2wcxX",HotkeySettingRow:"voicesettings_HotkeySettingRow_2wDL4",HotkeyButton:"voicesettings_HotkeyButton_1bV2N",Capturing:"voicesettings_Capturing_2ZH0Q",WalkDashedOutline:"voicesettings_WalkDashedOutline_3xlIG",HotkeyClearButton:"voicesettings_HotkeyClearButton_3Us-N",HotkeySettingDescription:"voicesettings_HotkeySettingDescription_2zgmL",VoiceSettings:"voicesettings_VoiceSettings_1BDD0",AdvancedSettingsButton:"voicesettings_AdvancedSettingsButton_MjZeH",ToggleRow:"voicesettings_ToggleRow_3W79i"}},"OJz+":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return p}));var o=n("mrSG"),r=n("4HGb"),i=(n("qeMu"),n("2vnA")),a=(n("ywG3"),new(function(){function e(){this.m_mapCallbacks=new Map,this.m_rgRegisteredEMsgs=[],this.m_mapServiceMethodHandlers=new Map,this.m_rgRegisteredServiceMethodHandlers=[]}return e.prototype.DispatchMsgToHandlers=function(e,t){var n=e.GetEMsg();if(146==n){var o=e.Hdr().target_job_name();if(o)if(a=this.m_mapServiceMethodHandlers.get(o)){this.DEBUG_LogMessageDispatch(e,a[0]);for(var r=0,i=a;r<i.length;r++){i[r].invoke(e,t)}return!0}}else{var a;if(a=this.m_mapCallbacks.get(n)){this.DEBUG_LogMessageDispatch(e,a[0]);for(var s=0,c=a;s<c.length;s++){c[s].invoke(e)}return!0}}return!1},e.prototype.DEBUG_LogMessageDispatch=function(e,t){},Object.defineProperty(e.prototype,"emsg_list",{get:function(){return this.m_rgRegisteredEMsgs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servicemethod_list",{get:function(){return this.m_rgRegisteredServiceMethodHandlers},enumerable:!1,configurable:!0}),e.prototype.AddCallback=function(e,t,n){var o=this,r=this.m_mapCallbacks.get(e);return r||(r=[],this.m_mapCallbacks.set(e,r),this.m_rgRegisteredEMsgs.push(e)),r.push({invoke:n,msgClass:t}),{invoke:n,unregister:function(){var t=o.m_mapCallbacks.get(e);if(t)for(var r=0;r<t.length;r++)t[r].invoke==n&&(t.splice(r,1),r--)}}},e.prototype.AddServiceMethodHandler=function(e,t){var n=this,o=function(n,o){var i=r.b.InitFromMsg(e.request,n),a=r.b.Init(e.response,147),s=t(i,a),c=function(e){a.Hdr().set_eresult(e),o(a)};s instanceof Promise?s.then(c).catch((function(){c(2)})):c(s)};return this.m_mapServiceMethodHandlers.has(e.name)?console.error("Duplicate registration for method "+e.name):(this.m_mapServiceMethodHandlers.set(e.name,[{invoke:o,msgClass:e.request}]),this.m_rgRegisteredServiceMethodHandlers.push(e.name)),{invoke:o,unregister:function(){var t=n.m_mapServiceMethodHandlers.get(e.name);if(t)for(var r=0;r<t.length;r++)t[r].invoke==o&&(t.splice(r,1),r--)}}},e.prototype.AddServiceNotificationHandler=function(e,t){var n=this,o=function(n,o){var i=r.b.InitFromMsg(e.request,n);t(i)},i=this.m_mapServiceMethodHandlers.get(e.name);return i||(i=[],this.m_mapServiceMethodHandlers.set(e.name,i),this.m_rgRegisteredServiceMethodHandlers.push(e.name)),i.push({invoke:o,msgClass:e.request}),{invoke:o,unregister:function(){var t=n.m_mapServiceMethodHandlers.get(e.name);if(t)for(var r=0;r<t.length;r++)t[r].invoke==o&&(t.splice(r,1),r--)}}},Object(o.c)([i.A],e.prototype,"m_rgRegisteredEMsgs",void 0),Object(o.c)([i.A],e.prototype,"m_rgRegisteredServiceMethodHandlers",void 0),e}()));function s(e,t,n){return a.AddCallback(e,t,(function(e){n(r.b.InitFromMsg(t,e))}))}function c(e,t,n){return a.AddCallback(e,t,(function(e){Object(i.E)((function(){n(r.b.InitFromMsg(t,e))}))}))}function l(e,t){return a.AddServiceNotificationHandler(e,t)}function p(e,t){return a.AddServiceNotificationHandler(e,(function(e){var n;return Object(i.E)((function(){n=t(e)})),n}))}},OTLo:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n("mrSG"),r=n("2vnA"),i=n("hEDq"),a=n("4HGb"),s=n("CKJp"),c=n("1n9R"),l=function(){function e(e){this.m_nLastUpdated=0,this.m_mapLanguages=r.A.map(),this.m_fetching=null,this.m_appid=e}return e.prototype.GetAppID=function(){return this.m_appid},e.prototype.GetTokenList=function(e){return this.m_mapLanguages.has(e)?this.m_mapLanguages.get(e):null},e.prototype.Localize=function(e,t){var n=c.c.LANGUAGE;return p(e,this.GetTokenList(n),"english"!=n?this.GetTokenList("english"):null,this.m_appid,t)},e.prototype.SubstituteParams=function(e,t){var n=c.c.LANGUAGE;return u(e,this.GetTokenList(n),"english"!=n?this.GetTokenList("english"):null,this.m_appid,t)},e}();function p(e,t,n,o,r){if(!e.startsWith("#"))return console.log("Token doesn't start with #:",e),"";var i=e;e=e.toLowerCase();var a="";if(t&&t.has(e)&&(a=t.get(e)),!a&&n&&n.has(e)&&(a=n.get(e)),a)a=u(a,t,n,o,r);else if((t||n)&&console.log("No loc found for appid",o,i,"Tokens:",t,"Fallback:",n),t&&1!=c.c.EUNIVERSE)return e;return a}function u(e,t,n,o,r){var i=e.match(/{[A-za-z0-9_%#:]+}/g);if(i)for(var a=0,s=i;a<s.length;a++){var c=s[a],l=p(m(c.slice(1,-1),r),t,n,o,r);if(!l)return"";e=e.replace(c,l)}return e=m(e,r)}function m(e,t){var n=e.match(/%[A-Za-z0-9_:]+%/g);if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o],a=i.slice(1,-1).toLowerCase(),s=t.get(a);null==s?console.log("No rich presence found for",a):e=e.replace(i,s)}return e}var d=n("+9/f"),h=n("XaMz"),f=n("E7zH"),_=new(function(){function e(){this.m_mapAppInfo=r.A.map(),this.m_mapRichPresenceLoc=r.A.map(),this.m_cAppInfoRequestsInFlight=0,this.m_setPendingAppInfo=new Set,this.m_CacheStorage=null,this.m_fnCallbackOnAppInfoLoaded=new f.a}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.BHavePendingAppInfoRequests=function(){return this.m_setPendingAppInfo.size>0||this.m_cAppInfoRequestsInFlight>0},Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!1,configurable:!0}),e.prototype.RegisterCallbackOnLoad=function(e){if(!this.BHavePendingAppInfoRequests())return Object(h.a)(!1,"Registering for callback on appinfo load, but nothing queued"),void e();this.m_fnCallbackOnAppInfoLoaded.Register(e)},e.prototype.IsLoadingAppID=function(e){return this.m_setPendingAppInfo.has(e)},e.prototype.GetAppInfo=function(e){if(Object(h.a)(this.m_CMInterface,"CAppInfoStore.GetAppInfo called before Init"),Object(h.a)(e,"Requesting App ID 0, which won't ever exist"),!this.m_mapAppInfo.has(e)){var t=new s.a(e);this.m_mapAppInfo.set(e,t),this.QueueAppInfoRequest(e)}return this.m_mapAppInfo.get(e)},e.prototype.QueueAppInfoRequest=function(e){var t=this;return e?(this.m_setPendingAppInfo.size||(this.m_PendingAppInfoPromise=new Promise((function(e){return t.m_PendingAppInfoResolve=e})),window.setTimeout((function(){return t.FlushPendingAppInfo()}),25)),this.m_setPendingAppInfo.add(e),this.m_PendingAppInfoPromise):Promise.resolve()},e.prototype.FlushPendingAppInfo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.e)(this,(function(n){switch(n.label){case 0:return e=this.m_PendingAppInfoResolve,t=Array.from(this.m_setPendingAppInfo),this.m_PendingAppInfoPromise=void 0,this.m_PendingAppInfoResolve=void 0,this.m_setPendingAppInfo.clear(),[4,this.LoadAppInfoBatch(t)];case 1:return n.sent(),e(),[2]}}))}))},e.prototype.LoadAppInfoBatch=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,l,p;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.m_cAppInfoRequestsInFlight++,[4,this.LoadAppInfoBatchFromLocalCache(e)];case 1:return(t=o.sent()).length?(console.log("Loading batch of App Info from Steam: ",t),[4,this.m_CMInterface.WaitUntilLoggedOn()]):[3,5];case 2:o.sent(),(n=a.b.Init(d.b)).Body().set_language(Object(i.m)(c.c.LANGUAGE)),r=50,o.label=3;case 3:return t.length>0?(s=Math.min(r,t.length),l=t.slice(0,s),t=t.slice(s),n.Body().set_appids(l),[4,d.g.GetApps(this.m_CMInterface.GetServiceTransport(),n)]):[3,5];case 4:return 1==(p=o.sent()).GetEResult()?this.OnGetAppsResponse(p):console.error("Error when calling CommunityService.GetApps: EResult="+p.GetEResult()+", AppIDs:",l),[3,3];case 5:return 0==--this.m_cAppInfoRequestsInFlight&&0==this.m_setPendingAppInfo.size&&(this.m_fnCallbackOnAppInfoLoaded.Dispatch(),this.m_fnCallbackOnAppInfoLoaded.ClearAllCallbacks()),[2]}}))}))},e.prototype.OnGetAppsResponse=function(e){for(var t=[],n=0,o=e.Body().apps();n<o.length;n++){var r=o[n],i=this.m_mapAppInfo.get(r.appid());Object(h.a)(i,"Got AppInfo response for unrequested AppID: "+r.appid()),i&&((i=new s.a(r.appid())).DeserializeFromMessage(r),this.m_mapAppInfo.set(r.appid(),i),t.push(i))}this.SaveAppInfoBatchToLocalCache(t)},e.prototype.OnAppOverviewChange=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t],r=new s.a(o.appid());r.DeserializeFromAppOverview(o),this.m_mapAppInfo.set(o.appid(),r)}},e.prototype.EnsureAppInfoForAppIDs=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.e)(this,(function(o){return t=!1,e.forEach((function(e){var o=n.m_mapAppInfo.get(e);o?o.is_valid||(t=!0):(o=new s.a(e),n.m_mapAppInfo.set(e,o),n.QueueAppInfoRequest(e),t=!0)})),t&&void 0!==this.m_PendingAppInfoPromise?[2,this.m_PendingAppInfoPromise]:[2,Promise.resolve()]}))}))},e.prototype.SetCacheStorage=function(e){this.m_CacheStorage=e},e.prototype.GetCacheKeyForAppID=function(e){return"APPINFO_"+e},e.prototype.LoadAppInfoBatchFromLocalCache=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Object(o.e)(this,(function(c){switch(c.label){case 0:return this.m_CacheStorage?(console.log("Loading batch of App Info from Local Cache: ",e),t=new Date((new Date).getTime()-12096e5),n=function(e){return Object(o.b)(a,void 0,void 0,(function(){var n,r;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,this.m_CacheStorage.GetObject(this.GetCacheKeyForAppID(e))];case 1:return(n=o.sent())?(r=this.m_mapAppInfo.get(e),Object(h.a)(r,"Didn't find AppInfo in our map when loading from cache but it should've been there?"),r?((r=new s.a(e)).DeserializeFromCacheObject(n),r.is_initialized?(this.m_mapAppInfo.set(e,r),r.time_updated_from_server<t?[2,e]:[2,null]):(console.warn("Failed to deserialize cached App Info: ",e,n),[2,e])):[2,e]):[2,e]}}))}))},r=e.map((function(e){return n(e)})),[4,Promise.all(r)]):[2,e];case 1:return i=c.sent(),[2,i.filter((function(e){return null!==e}))]}}))}))},e.prototype.SaveAppInfoBatchToLocalCache=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.e)(this,(function(o){if(!this.m_CacheStorage)return[2];for(console.log("Saving batch of App Info to Local Cache: ",e.map((function(e){return e.appid}))),t=0,n=e;t<n.length;t++)r=n[t],(i=r.SerializeToCacheObject())&&this.m_CacheStorage.StoreObject(this.GetCacheKeyForAppID(r.appid),i);return[2]}))}))},e.prototype.Localize=function(e,t,n){var o=this.GetRichPresenceLoc(e);return o?o.Localize(t,n):1!=c.c.EUNIVERSE?(console.log("Unable to find app localization information for app "+e+" token "+t+", this may not have had a chance to load yet"),t):""},e.prototype.GetRichPresenceLoc=function(e){if(this.m_mapRichPresenceLoc.has(e.toString())){var t=this.m_mapRichPresenceLoc.get(e.toString());return t.m_nLastUpdated+6e4*s.b<Date.now()&&this.QueueRichPresenceLocRequest(t),t}var n=new l(e);return this.m_mapRichPresenceLoc.set(e.toString(),n),this.QueueRichPresenceLocRequest(n),n},e.prototype.GetRichPresenceLocAsync=function(e){var t=this.GetRichPresenceLoc(e);return t.m_nLastUpdated?Promise.resolve(t):t.m_fetching},e.prototype.OnRichPresenceLocUpdate=function(e,t){e.m_nLastUpdated=Date.now();for(var n=0,o=t;n<o.length;n++){var r=o[n],i=r.language(),a=e.m_mapLanguages.get(i);a?a.clear():(e.m_mapLanguages.set(i,new Map),a=e.m_mapLanguages.get(i));for(var s=0,c=r.tokens();s<c.length;s++){var l=c[s];a.set(l.name().toLowerCase(),l.value())}}},e.prototype.QueueRichPresenceLocRequest=function(e){var t=this;return e.m_fetching||(e.m_fetching=this.m_CMInterface.WaitUntilLoggedOn().then((function(){var n=a.b.Init(d.a);return n.Body().set_appid(e.GetAppID()),n.Body().set_language(c.c.LANGUAGE),d.g.GetAppRichPresenceLocalization(t.m_CMInterface.GetServiceTransport(),n)})).then((function(n){return e.m_fetching=null,1!=n.GetEResult()?Promise.reject():(t.OnRichPresenceLocUpdate(e,n.Body().token_lists()),Promise.resolve(e))})),e.m_fetching.catch((function(){e.m_fetching=null}))),e.m_fetching},Object(o.c)([r.i],e.prototype,"OnGetAppsResponse",null),Object(o.c)([r.i],e.prototype,"OnRichPresenceLocUpdate",null),e}())},Oefq:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return o}));var o,r=n("mrSG"),i=n("UqDm"),a=n("tkkQ"),s=n("3zHc"),c=n("rsEv"),l=n("V7Fl"),p=n("LAqV"),u=n("2vnA"),m=n("oh5H"),d=n("1VtQ"),h=n("5Nu3"),f=n("cLtS"),_=n("XaMz"),g=n("hEDq"),b=function(){function e(e){this.m_bRestoredPopupState=!1,this.m_vecShowGroupsAfterRestorePopup=[],this.m_iLastChatPopupID=0,this.m_mapChatBrowserContexts=new Map,this.m_bSuppressBrowserContextBroadcasting=!1,this.m_bParentalLocked=void 0,this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,this.m_bShuttingDown=!1,this.m_bTheaterMode=!1,this.m_mapFriendChatBroadcastVisible=new Map,this.m_nTabActivationCount=0,this.m_bShowWinterSaleUI=!1,this.m_chatStore=e}return e.prototype.GetRootChatPerContextData=function(){return this.GetPerContextChatData(p.a)},e.prototype.Init=function(){var e=this;p.f.AddPopupManagerShutdownCallback((function(){e.SerializePopupState(),e.m_bShuttingDown=!0})),Object(u.j)((function(){var t=p.f.ParentalStore.BIsFriendsBlocked();e.OnFriendsParentalLockChanged(t)})),this.StartWinterSaleCountdown()},e.prototype.OnFriendsParentalLockChanged=function(e){!1===this.m_bParentalLocked&&e?(this.SerializePopupState(!0),this.m_mapChatBrowserContexts.forEach((function(e){e.CloseAllPopups()})),this.m_bRestoredPopupState=!1):!0!==this.m_bParentalLocked||e||this.RestorePopupState(),this.m_bParentalLocked=e},e.prototype.ShowFriendChatDialog=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var r=this.m_chatStore.GetFriendChat(t);return n&&r&&this.ShowAndOrActivateChat(e,r,o),r},e.prototype.ShowFriendChatDialogWhenReady=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.ShowFriendChatDialog(e,t,n,o)},e.prototype.ShowFriendChatDialogAndStartVoice=function(e,t){var n=this.ShowFriendChatDialog(e,t,!0,!0);return n.BVoiceActive()||n.ToggleVoiceChat(),n},e.prototype.ShowAndOrActivateChat=function(e,t,n){if(t instanceof c.a){var o=this.m_chatStore.GetChatRoomGroup(t.GetParentGroupID());if(!o)return void Object(_.a)(!1,"Can't find group for chat room ");var r=this.ShowAndOrActivateChatRoomGroup(e,o,n);r&&r.SelectChat(t.GetRoomID())}else this.ShowAndOrActivateTabByID(e,t.unique_id,n)},e.prototype.ShowAndOrActivateChatForTabset=function(e,t,n){var o=e.GetTabForChat(t);o||this.CreateNewTabFromUniqueID(e,t.unique_id,!1),n&&e.ActivateTab(o)},e.prototype.IsChatRoomGroupActive=function(e,t){var n=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(n,t.unique_id);return!!o&&o.tabSet.activeTab==o.tab},e.prototype.SetTheaterMode=function(e){this.m_bTheaterMode=e},e.prototype.GetTheaterMode=function(){return this.m_bTheaterMode},e.prototype.SetFriendBroadcastVisible=function(e,t){this.m_mapFriendChatBroadcastVisible.set(e,t)},e.prototype.IsFriendBroadcastVisible=function(e){return this.m_mapFriendChatBroadcastVisible.get(e)},e.prototype.ShowAndOrActivateChatRoomGroup=function(e,t,n){return t.BIsCurrentUserAMember()?this.ShowAndOrActivateTabByID(e,t.unique_id,n):(console.log("Failed to activate",t,"- user is not a member."),null)},e.prototype.ShowAndOrActivateChatRoomGroupWhenReady=function(e,t,n){this.ShowAndOrActivateChatRoomGroup(e,t,n)},e.prototype.ShowUnackedGroup=function(e){this.m_bRestoredPopupState?this.ShowAndOrActivateChatRoomGroup(p.a,e,!1):this.m_vecShowGroupsAfterRestorePopup.push(e)},e.prototype.ShowOrActivateBroadcast=function(e,t,n){var o="br"+t;return this.ShowAndOrActivateTabByID(e,o,n)},e.prototype.CloseTabByID=function(e,t){var n=this;t?this.CloseTabByIDInContext(t,e):this.m_mapChatBrowserContexts.forEach((function(t){n.CloseTabByIDInContext(t.browser_context,e)}))},e.prototype.ReplaceFriendChatWithGroup=function(e,t,n){var o=this.GetPerContextChatData(e),r=this.GetTabSetByUniqueID(o,n.unique_id);r||(this.ShowAndOrActivateChatRoomGroup(e,n,!0),r=this.GetTabSetByUniqueID(o,n.unique_id)),Object(_.a)(r,"Failed to find group tab");var i=this.GetTabSetByUniqueID(o,t.chat.unique_id);if(i){var a=r.tab,s=i.tabSet;r.tabSet!=s&&(r.tabSet.RemoveTab(a),s.AddTab(a)),s.MoveTabAfter(a,t),this.CloseTab(e,t),this.ShowAndOrActivateChatRoomGroup(e,n,!0)}},e.prototype.ForEachTabSet=function(e,t){e.IsFriendsListSingleWindow()&&e.default_tabset.tabCount>0&&t(e.default_tabset);for(var n=0,o=Array.from(e.popup_list);n<o.length;n++){t(o[n].tab_set)}},e.prototype.CloseTab=function(e,t,n){void 0===n&&(n=!1);var r=this.GetPerContextChatData(e);this.ForEachTabSet(r,(function(o){o.BHasTab(t)&&(n||o.RemoveTab(t),t.IsVoiceActive()&&p.f.ShowCloseActiveVoiceConfirmation(e,r.GetPopupForTabSet(o)))})),this.BroadcastCloseTabToAllBrowserContexts(e,t.GetUniqueID()),t.OnTabClosed(),r.IsFriendsListSingleWindow()&&0==r.default_tabset.tabCount&&(r.responsive_window_state.SetActiveView(o.FriendsList),this.SetTheaterMode(!1),r.SetFriendsListCollapsed(!1)),p.f.UIStore.SerializePopupState()},e.prototype.GetResponsiveWindowState=function(e){return this.GetPerContextChatData(e).responsive_window_state},e.prototype.CloseTabByIDInContext=function(e,t){var n=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(n,t);o&&(o.tabSet.RemoveTab(o.tab),o.tab.OnTabClosed(),this.BroadcastCloseTabToAllBrowserContexts(e,t))},e.prototype.ShowAndOrActivateTabByID=function(e,t,n){void 0===n&&(n=!0);var r,i=this.GetPerContextChatData(e),a=this.GetTabSetByUniqueID(i,t);if(a)n&&a.tabSet.ActivateTab(a.tab),r=a.tab;else{var c=p.f.SettingsStore.BAlwaysShowChatsInNewWindow();if(!i.BUsePopups()||!c&&i.default_tabset.is_popup_active)r=this.CreateNewTabFromUniqueID(i.default_tabset,t,n);else{var l=void 0;if(l=c&&0!=i.default_tabset.tabCount?new s.a(e):i.default_tabset,!(r=this.CreateNewTabFromUniqueID(l,t,n)))return null;var u=l==i.default_tabset;if(u&&i.IsFriendsListSingleWindow())p.f.ShowPopupFriendsList(e,!n,n);else if(!u||!i.IsFriendsListSingleWindow()&&!l.is_popup_active){var m=p.f.CreateChatPopup(e,this.GetNextChatPopupID(),l,void 0,void 0,!n);m.Show(n),i.AddPopup(l,m),this.SerializePopupState()}}}return r&&n&&i.responsive_window_state.SetActiveView(o.Chat),p.f.UIStore.SerializePopupState(),n&&this.m_nTabActivationCount++,r},e.prototype.GetTabSetByUniqueID=function(e,t){if(!e)return null;var n=e.GetTabSetForId(t);return n?{tabSet:n,tab:n.GetTabByUniqueID(t)}:null},e.prototype.BIsTabSetActive=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetActive(e)},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetVisible(e)},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetFocused(e)},e.prototype.GetAppContainerForChat=function(e){var t=this.GetRootChatPerContextData(),n=null;if(e instanceof c.a){var o=this.m_chatStore.GetChatRoomGroup(e.GetParentGroupID());o&&(n=this.GetTabSetByUniqueID(t,o.unique_id))}else n=this.GetTabSetByUniqueID(t,e.unique_id);if(!n||!n.tabSet)return null;var r=t.GetPopupForTabSet(n.tabSet);return r?r.popup?r.popup.container:null:t.IsTabSetInFriendListWindow(n.tabSet)?t.friends_list_window:null},e.prototype.FlashChatWindow=function(e,t){var n=this.GetAppContainerForChat(e);n&&!n.BIsClosed()&&n.FlashWindow(t)},e.prototype.GetPerContextChatData=function(e){Object(_.a)(p.f.ready_to_render||this.m_bRestoringPopups,"GetPerContextChatData called before ready",e);var t=this.m_mapChatBrowserContexts.get(e.m_unPID);if(!t){var n=p.f.BIsValidBrowserContext(e);t=new S(e),n&&this.m_mapChatBrowserContexts.set(e.m_unPID,t)}return t},e.prototype.GetAllBrowserContexts=function(){var e=[];return this.m_mapChatBrowserContexts.forEach((function(t){return e.push(t.browser_context)})),e},e.prototype.GetDefaultTabSetForContext=function(e){return this.GetPerContextChatData(e).default_tabset},e.prototype.OnOverlayBrowserCreated=function(e,t,n){var o=this,r=this.GetPerContextChatData(e);if(r){r.SetScreenInfo(t,n),r.SetFriendsListSingleWindowMode(p.f.SettingsStore.BSingleWindowModeEnabled());var i=this.GetRootChatPerContextData();i&&(r.IsFriendsListSingleWindow()||this.ForEachTabSet(i,(function(e){var t=new s.a(r.browser_context);e.tabs.forEach((function(n){var r=e.activeTab==n;o.CreateNewTabFromUniqueID(t,n.GetUniqueID(),r)}));var n=p.f.CreateChatPopup(r.browser_context,o.GetNextChatPopupID(),t,void 0,void 0,!1);n.Show(!1),r.AddPopup(t,n)})))}},e.prototype.OnOverlayBrowserChanged=function(e,t,n){var o=this.GetPerContextChatData(e);o&&o.SetScreenInfo(t,n)},e.prototype.OnOverlayBrowserClosed=function(e){var t=this.m_mapChatBrowserContexts.get(e.m_unPID);t&&(Object(_.a)(e.m_nBrowserID==t.browser_context.m_nBrowserID,"Mismatch found in OnOverlayBrowserClosed"),this.m_mapChatBrowserContexts.delete(e.m_unPID))},e.prototype.SetSuppressBrowserContextBroadcasting=function(e){this.m_bSuppressBrowserContextBroadcasting=e},e.prototype.BroadcastNewTabToAllBrowserContexts=function(e,t){var n=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach((function(o){if(!Object(p.b)(o.browser_context,e)){var r=o.browser_context!=p.a;n.ShowAndOrActivateTabByID(o.browser_context,t,r)}})),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.BroadcastCloseTabToAllBrowserContexts=function(e,t){if(!this.m_bSuppressBrowserContextBroadcasting)if(Object(p.b)(e,p.a))this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t);else{var n=this.m_mapChatBrowserContexts.get(e.m_unPID);n&&Object(p.b)(e,n.browser_context)&&this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t)}},e.prototype.BroadcastCloseTabToAllBrowserContexts_Internal=function(e,t){var n=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach((function(o){Object(p.b)(o.browser_context,e)||n.CloseTabByIDInContext(o.browser_context,t)})),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.CreateNewTabFromUniqueID=function(e,t,n,o){void 0===o&&(o=!1);var r=null,i=t.match(/^f(\d+)$/);if(i&&i[1]){var a=parseInt(i[1]),s=p.f.FriendStore.GetPlayer(a);if(s&&!s.is_blocked){var c=this.m_chatStore.GetFriendChat(a);c&&(r=new h.c(e,c),!o||s.is_friend||p.f.FriendStore.BApprovedNonFriendMessages(a)||c.SetShowNonFriendWarning(!0))}}if(!r){var u=t.match(/^cg(\d+)$/);if(u&&u[1]){var m=this.m_chatStore.GetChatRoomGroup(u[1]);m&&(this.m_chatStore.IncRefActiveChatRoomGroup(m.GetGroupID(),!this.m_bRestoringPopups),r=new l.d(e,m))}}if(!r){var d=t.match(/^br(\d+)$/);if(d&&d[1]){var _=parseInt(d[1]);r=new f.b(e,_)}}return r?(e.AddTab(r),this.BroadcastNewTabToAllBrowserContexts(e.GetBrowserContext(),t),n&&e.ActivateTab(r),r):null},e.prototype.GetNextChatPopupID=function(){return"ChatWindow_"+this.m_iLastChatPopupID++},e.prototype.BIsFriendsListSingleWindow=function(e){var t=this.GetPerContextChatData(e);return!t.BUsePopups()||t.IsFriendsListSingleWindow()},e.prototype.BIsFriendsListCollapsed=function(e){var t=this.GetPerContextChatData(e);return t.IsFriendsListSingleWindow()&&t.IsFriendsListCollapsed()},e.prototype.SetFriendsListCollapsed=function(e,t){this.GetPerContextChatData(e).SetFriendsListCollapsed(t)},e.prototype.ConvertDefaultTabSetToPopup=function(e){var t=this.GetPerContextChatData(e);if(t.default_tabset.tabCount){var n=t.GetPopupForTabSet(t.default_tabset);return n||((n=p.f.CreateChatPopup(e,this.GetNextChatPopupID(),t.default_tabset,t.cached_popup_window_restore_details,void 0,!1)).Show(!0),t.AddPopup(t.default_tabset,n),this.SerializePopupState(),t.friends_list_window&&(t.friends_list_window.BringToFront(),t.friends_list_window.title=Object(m.d)("#WindowTitle_FriendsList")),n)}return null},e.prototype.ConvertDefaultTabSetToEmbedded=function(e){var t=this.GetPerContextChatData(e),n=t.GetPopupForTabSet(t.default_tabset);n&&(n.popup.GetWindowRestoreDetails().then((function(e){t.SetCachedDefaultPopupDimensions(e)})),t.RemovePopupForTabSet(t.default_tabset),this.SerializePopupState(),n.ClearTabSet(),n.popup.Close())},e.prototype.MergeTabSets=function(e){var t=this.GetPerContextChatData(e);this.ForEachTabSet(t,(function(e){e!==t.default_tabset&&e.tabs.forEach((function(n){e.RemoveTab(n),t.default_tabset.AddTab(n)}))}))},e.prototype.OnTabSetResized=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(e==t.default_tabset&&!t.IsFriendsListSingleWindow()){var n=t.GetPopupForTabSet(e);n&&n.popup.GetWindowRestoreDetails().then((function(e){t.SetCachedDefaultPopupDimensions(e)}))}},e.prototype.CloseTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),n=t.GetPopupForTabSet(e);n&&n.popup.Close(),t.RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.OnTabSetClosed=function(e){this.GetPerContextChatData(e.GetBrowserContext()).RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.FocusTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),n=t.GetPopupForTabSet(e);n&&n.popup&&!n.popup.container.BIsClosed()?n.popup.container.BringToFront():t.IsTabSetInFriendListWindow(e)&&t.IsFriendsListSingleWindow()&&(t.BUsePopups()?p.f.ShowPopupFriendsList(t.browser_context,!1,!0):t.friends_list_window&&t.friends_list_window.BringToFront())},e.prototype.MoveTabToNewPopup=function(e,t,n,o){Object(_.a)(e,"browserContext");var r=this.GetPerContextChatData(e);this.ForEachTabSet(r,(function(e){return e.RemoveTab(t)}));var i=new s.a(e);i.AddTab(t);var a=p.f.CreateChatPopup(e,this.GetNextChatPopupID(),i,o,n,!1);if(a.Show(!0),o){var c=a.popup.GetWindow();try{c.SteamClient.Window.PositionWindowRelative(o,n.left,n.top,n.width,n.height)}catch(e){console.error(e)}}r.AddPopup(i,a),this.SerializePopupState()},e.prototype.SerializePopupState=function(e){if(void 0===e&&(e=!1),this.m_bRestoredPopupState&&p.f.SettingsStore.BReady()&&!this.m_bShuttingDown){var t=this.SerializePopupStateToObject(e);p.f.SettingsStore.StoreObjectInLocalStorage("ChatStorePopupState",t)}},e.prototype.SerializePopupStateToObject=function(e){var t=this.GetPerContextChatData(p.a),n={window_restore_details:t.cached_popup_window_restore_details,defaultTabs:void 0,popupTabs:void 0,bFriendsListVisible:!1,always_restore:e,bFriendsListCollapsed:t.IsFriendsListCollapsed()};t.default_tabset&&t.default_tabset.tabCount>0&&(n.defaultTabs=t.default_tabset.Serialize());for(var o=[],r=0,i=Array.from(t.popup_list);r<i.length;r++){var a=i[r];a.tab_set!=t.default_tabset&&o.push(a.tab_set.Serialize())}return o.length>0&&(n.popupTabs=o),n.bFriendsListVisible=!!t.friends_list_window,n},e.prototype.BRestorePopups=function(){return p.f.SettingsStore.BAlwaysShowChatsInNewWindow()},e.prototype.BRestoreOpenChats=function(){return p.f.SettingsStore.FriendsSettings.bRememberOpenChats},e.prototype.DeserializeIntoTabSet=function(e,t){if(t.tabs&&Array.isArray(t.tabs))for(var n=0,o=t.tabs;n<o.length;n++){var r=o[n];r.startsWith("br")||this.CreateNewTabFromUniqueID(e,r,r==t.active_tab,!0)}},e.prototype.SetStateToRestoreFrom=function(e){this.m_stateToRestoreFrom=e},e.prototype.RestorePopupState=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return Object(_.a)(!this.m_bRestoredPopupState,"Second restore popup state"),Object(_.a)(!this.m_bRestoringPopups,"RestorePopupState called while already restoring"),p.f.ParentalStore.BIsFriendsBlocked()?[2]:(this.m_bRestoringPopups=!0,this.m_stateToRestoreFrom?(this.RestoreFromStateObject(this.m_stateToRestoreFrom,!1),this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,[2]):[4,p.f.SettingsStore.GetObjectFromLocalStorageWhenReady("ChatStorePopupState")]);case 1:return e=n.sent(),t=!1,"undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.BSuppressPopupsInRestore?[4,SteamClient.WebChat.BSuppressPopupsInRestore()]:[3,3];case 2:t=n.sent(),n.label=3;case 3:return this.RestoreFromStateObject(e,t),this.m_bRestoringPopups=!1,[2]}}))}))},e.prototype.RestoreFromStateObject=function(e,t){var n=this.GetPerContextChatData(p.a);if(Object(_.a)(n.BIsEmpty(),"Restoring to non-empty context",n),n.BIsEmpty()){if(e.window_restore_details&&n.SetCachedDefaultPopupDimensions(e.window_restore_details),void 0!==e.bFriendsListSingleWindow&&p.f.SettingsStore.BackfillSingleWindowMode(e.bFriendsListSingleWindow),n.SetFriendsListSingleWindowMode(p.f.SettingsStore.BSingleWindowModeEnabled()),n.SetFriendsListCollapsed(!!e.bFriendsListCollapsed),!t&&(e.always_restore||this.BRestoreOpenChats())){if(e.defaultTabs){var o=n.default_tabset;if(this.DeserializeIntoTabSet(o,e.defaultTabs),o.tabCount>0&&!n.IsFriendsListSingleWindow()){var r=p.f.CreateChatPopup(p.f.GetDefaultBrowserContext(),this.GetNextChatPopupID(),o,void 0,void 0,!1);n.AddPopup(o,r),r.Show(!1)}}if(e.popupTabs)for(var i=0,a=e.popupTabs;i<a.length;i++){var c=a[i];o=new s.a(p.a);if(this.DeserializeIntoTabSet(o,c),o.tabCount>0){r=p.f.CreateChatPopup(p.f.GetDefaultBrowserContext(),this.GetNextChatPopupID(),o,void 0,void 0,!1);n.AddPopup(o,r),r.Show(!1)}}}if(!t){var l=!e||void 0===e.bFriendsListVisible||e.bFriendsListVisible;n.BUsePopups()&&p.f.ShowPopupFriendsListAtStartup(l);for(var u=0,m=this.m_vecShowGroupsAfterRestorePopup;u<m.length;u++){var d=m[u];this.ShowAndOrActivateChatRoomGroup(p.a,d,!1)}}this.m_vecShowGroupsAfterRestorePopup=[],this.m_bRestoredPopupState=!0,this.m_chatStore.OnRestorePopupsComplete()}},e.prototype.RestorePopupStateForMobile=function(){this.m_bRestoringPopups=!0,this.GetPerContextChatData(p.a).SetFriendsListSingleWindowMode(!0),this.m_bRestoringPopups=!1},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this.GetPerContextChatData(p.a);e.ui_state().set_friends_list_docked(t.IsFriendsListSingleWindow()),e.ui_state().set_friends_list_visible(t.friends_list_window&&!t.friends_list_window.BIsClosed()),e.ui_state().set_chat_popups_opened(Array.from(t.popup_list).length),e.ui_state().set_friends_list_collapsed(t.IsFriendsListCollapsed());var n=0,o=0;n+=i.b(t.default_tabset.tabs,(function(e){return e.IsChatRoom()})),o+=i.b(t.default_tabset.tabs,(function(e){return e.IsFriendChat()}));for(var r=0,a=Array.from(t.popup_list);r<a.length;r++){var s=a[r];s.tab_set!=t.default_tabset&&(n+=i.b(s.tab_set.tabs,(function(e){return e.IsChatRoom()})),o+=i.b(s.tab_set.tabs,(function(e){return e.IsFriendChat()})))}e.ui_state().set_group_chat_tabs_opened(n),e.ui_state().set_friend_chat_tabs_opened(o)},Object.defineProperty(e.prototype,"show_winter_sale_ui",{get:function(){return this.m_bShowWinterSaleUI},enumerable:!1,configurable:!0}),e.prototype.StartWinterSaleCountdown=function(){var e=this;Date.now()>=15767784e5?this.m_bShowWinterSaleUI=!0:setTimeout((function(){return e.StartWinterSaleCountdown()}),15767784e5-Date.now())},Object(r.c)([u.A],e.prototype,"m_bTheaterMode",void 0),Object(r.c)([u.A],e.prototype,"m_mapFriendChatBroadcastVisible",void 0),Object(r.c)([u.A],e.prototype,"m_nTabActivationCount",void 0),Object(r.c)([u.A],e.prototype,"m_bShowWinterSaleUI",void 0),Object(r.c)([u.i],e.prototype,"OnFriendsParentalLockChanged",null),Object(r.c)([p.g],e.prototype,"ShowFriendChatDialogWhenReady",null),Object(r.c)([p.g],e.prototype,"ShowAndOrActivateChatRoomGroupWhenReady",null),Object(r.c)([d.a],e.prototype,"SerializePopupState",null),e}(),v=function(){function e(e,t){this.m_bShown=!1,this.m_popup=e,this.m_chatPopup=t}return e.prototype.Show=function(e){this.m_popup.Show(e),this.m_bShown||(this.m_bShown=!0)},Object.defineProperty(e.prototype,"popup",{get:function(){return this.m_popup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tab_set",{get:function(){return this.m_chatPopup.tab_set},enumerable:!1,configurable:!0}),e.prototype.ClearTabSet=function(){this.m_chatPopup.ClearTabSet()},e.prototype.IsSameBrowserContext=function(e){var t=this.m_popup.GetBrowserContext()||p.a;return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},e}();!function(e){e[e.FriendsList=0]="FriendsList",e[e.Chat=1]="Chat"}(o||(o={}));var y=function(){function e(){this.m_eActiveView=o.FriendsList}return e.prototype.GetActiveView=function(){return this.m_eActiveView},e.prototype.SetActiveView=function(e){this.m_eActiveView=e},Object(r.c)([u.A],e.prototype,"m_eActiveView",void 0),e}(),S=function(){function e(e){this.m_browserContext=e,this.m_DefaultTabSet=new s.a(e),this.m_FriendsListWindow=void 0,this.m_PopupWindowRestoreDetails=void 0,this.m_mapTabSetToPopup=new Map,this.m_ResponsiveWindowState=new y,this.SetFriendsListSingleWindowMode(!1),this.m_bFriendsListCollapsed=a.a.STEAM_TV}return e.prototype.BIsEmpty=function(){return 0==this.m_DefaultTabSet.tabCount&&(!a.a.IN_CLIENT||null==this.m_FriendsListWindow)&&0==this.m_mapTabSetToPopup.size},e.prototype.BUsePopups=function(){return a.a.USE_POPUPS&&!Object(g.b)(this.m_browserContext.m_eBrowserType)},e.prototype.IsFriendsListSingleWindow=function(){return this.m_bFriendsListSingleWindow},e.prototype.SetFriendsListSingleWindowMode=function(e){this.BUsePopups()?this.m_bFriendsListSingleWindow=e:this.m_bFriendsListSingleWindow=!0},e.prototype.IsFriendsListCollapsed=function(){return this.m_bFriendsListCollapsed},e.prototype.SetFriendsListCollapsed=function(e){this.m_bFriendsListCollapsed=e},Object.defineProperty(e.prototype,"browser_context",{get:function(){return this.m_browserContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"default_tabset",{get:function(){return Object(_.a)(this.m_DefaultTabSet,"Context has no default chat target"),this.m_DefaultTabSet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_window",{get:function(){return this.m_FriendsListWindow},enumerable:!1,configurable:!0}),e.prototype.SetFriendsListWindow=function(e){this.m_FriendsListWindow=e||void 0,!e&&this.IsFriendsListSingleWindow()&&this.m_DefaultTabSet.CloseAllTabs()},Object.defineProperty(e.prototype,"popup_list",{get:function(){return this.m_mapTabSetToPopup.values()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responsive_window_state",{get:function(){return this.m_ResponsiveWindowState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cached_popup_window_restore_details",{get:function(){return this.m_PopupWindowRestoreDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen_info",{get:function(){return this.m_ScreenInfo},enumerable:!1,configurable:!0}),e.prototype.SetScreenInfo=function(e,t){this.m_ScreenInfo={width:e,height:t}},e.prototype.SetCachedDefaultPopupDimensions=function(e){this.m_PopupWindowRestoreDetails=e},e.prototype.GetTabSetForId=function(e){if(this.m_DefaultTabSet.GetTabByUniqueID(e))return this.m_DefaultTabSet;for(var t=0,n=Array.from(this.m_mapTabSetToPopup.keys());t<n.length;t++){var o=n[t];if(o.GetTabByUniqueID(e))return o}return null},e.prototype.RemovePopupForTabSet=function(e){this.m_mapTabSetToPopup.delete(e)},e.prototype.AddPopup=function(e,t){Object(_.a)(!this.m_mapTabSetToPopup.has(e),"Added popup for tabset twice"),this.m_mapTabSetToPopup.set(e,t)},e.prototype.GetPopupForTabSet=function(e){return this.m_mapTabSetToPopup.get(e)},e.prototype.IsTabSetInFriendListWindow=function(e){return e==this.default_tabset&&this.IsFriendsListSingleWindow()},e.prototype.BIsTabSetActive=function(e){var t,n=this.GetPopupForTabSet(e);return(null===(t=null==n?void 0:n.popup)||void 0===t?void 0:t.container)?!n.popup.container.BIsClosed():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&!this.friends_list_window.BIsClosed()},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsVisible():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsVisible()},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsFocused():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsFocused()},e.prototype.CloseAllPopups=function(){for(var e=0,t=Array.from(this.popup_list);e<t.length;e++){t[e].popup.Close()}this.m_mapTabSetToPopup.clear(),this.friends_list_window&&this.m_FriendsListWindow.Close(),this.m_DefaultTabSet=new s.a(this.m_browserContext)},Object(r.c)([u.A],e.prototype,"m_DefaultTabSet",void 0),Object(r.c)([u.A],e.prototype,"m_bFriendsListSingleWindow",void 0),Object(r.c)([u.A],e.prototype,"m_bFriendsListCollapsed",void 0),e}()},PJQb:function(e,t,n){e.exports={Container:"pagedcontent_Container_3P-nO",Nav:"pagedcontent_Nav_2NEs2",NavTitle:"pagedcontent_NavTitle_2u4uE",NavItems:"pagedcontent_NavItems_ay0LT",NavItem:"pagedcontent_NavItem_V9sAC",Active:"pagedcontent_Active_310MQ",Content:"pagedcontent_Content_7oxxA"}},"PY+e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkEyODBFQkREMDA5MTFFOTk1RkJEMjNCODFENTVDNzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkEyODBFQkVEMDA5MTFFOTk1RkJEMjNCODFENTVDNzciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTI4MEVCQkQwMDkxMUU5OTVGQkQyM0I4MUQ1NUM3NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTI4MEVCQ0QwMDkxMUU5OTVGQkQyM0I4MUQ1NUM3NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqJtXjIAAAQZSURBVHja7JtPSBRRHMdnR6E/9kc9RF3yEFgpHsxL2B9Xq5WgwLrmQUgiKE8udezQIW+JdZKgQrpHJplUZG7qJYqKcq0OnpIgTfujkLl9X/6mph/vjTvr7O7M2/3BB5zZmfX9vvPem/f7/d6GEomEkctmGjluOS9A4QrvLwF1RBUoB6WgKE3t/Q6mwDh4BQaJ6VS/MJTCHCB6TRNoAYc9EHGltgDugRvgNlh0dbcQIEmEWM0gnvCvjVEbQ8n6lWwPqADdYE9AhvZTcAq88WIItIIrYLXi80nwADwBY2ACzKbJsQ2gDGwH+8EhsFlx7TxoA9dSHQJCnE6H7tYHGkGBi2HkNQXUhrsO7bzsNCScnO9RfOEoqMmi0ypEm0YUbb6pEkH1ZbIn/xOcA6YPnbcQbYtSW2U9ISkBWiU3z4B6HzvOqac2c2tdToBKMCdxviZAzlvskoggfKtQCSDGSEzS7esD6LxFWDIcYvb5wH5xs6TLRAPsvEVU4lczF8CUrPBGfD7huVnB8rdD3PLNigabKJCx21nX62p/WoJ8sVs5+fxXgBZ2QR94plHUK3zpZedarKWwCGk/saiuEQxoFvpHwH0WRW4yKZYvZGv7hxrmPkS88pHlQuosAewmnvwvDQVYlPTqPwJUsZNDGmfAYuy4ypTM/mMaC/CWvw1MyuHZbUJjAbhvpaYkgflVYwG+seOifF2AUkd2W6+xv+t4mt2kRZDdyjQWYCs7nhICfGAnd2gsQAU7HhcCvGAn92kswF52/FoIMCxZMxdoOt9F2LnHJq2RF2wnRZ79gIYCHARbWDA0KAT4QiLYrU1DAXhOoB9MW+uAbvbhEVCjkfPCl6Ps3HUrH2DQmI+DbbYLRkGtsZRRCbKFaJ7bbTv3jt52i1YPEOHvBXajuKFdg6ffzpwXdtGw0n2sqjIsSYuHcyUtblDRYF5SGKkOoPPVisJI5XKlsZMalMbCqZbGLLoUxdGom90XWaoBqIqjnW7L47cUpeaRAJbHe9yWxy0Ruhw2HvSCiA82SESoLSrrdOq1yW6RuQpWKT6fpGzrkPFvi4zIKs14uIYQ7/KNlKsoo3e4CGwajTRukbGz06F7qazYxZPs8Hi3WIzP9m63yKh2X5wA7z0WwEvn4263yaU67o6BfsVs60YAL5wXbbgDjqdSzU5lp+h/aWXQAMLgDPushCJNlXWA8y7/n9gq+5nW8i+Npa15K9oq69VsXOyyB8ie/A/QkOk3STbS4rInP0ch+KNspIly1vlMC+A75zMpgC+dz5QAvnU+EwL42nlh6fy1xyVw2s/O25OiXgQrovS81uEa3znv5RBISCpMvnfeyx4grNpY+qnKmqA47/Uk+Jxi9AEqOy3Q37V+dd7rHhBIy2+RyQuQFyC37bcAAwCWTwvXBm8jOgAAAABJRU5ErkJggg=="},Q8iO:function(e,t,n){e.exports={confettiDurationMs:"7000s/s",goldfettiDurationMs:"7000s/s",goldfettiColorsNum:"3",goldfettiEmojiNum:"4",crackerDurationMs:"300s/s",balloonsDurationMs:"4000s/s",balloonsDurationS:"4s/s",balloonsDurationJitterS:"1s/s",balloonsDurationMaxMs:"5000s/s",snowballDurationMs:"3010s/s",snowballSpeed:"1s","animation-container":"chatroomeffects_animation-container_1PTrD",Snowflake:"chatroomeffects_Snowflake_aoFWZ","Snowflake-0":"chatroomeffects_Snowflake-0_2O8fB","snowflake-0":"chatroomeffects_snowflake-0_30tPn","Snowflake-1":"chatroomeffects_Snowflake-1_1V9Hw","snowflake-1":"chatroomeffects_snowflake-1_3m9UI","Snowflake-2":"chatroomeffects_Snowflake-2_Zf0dx","snowflake-2":"chatroomeffects_snowflake-2_1R-Nx","Snowflake-3":"chatroomeffects_Snowflake-3_2pvie","snowflake-3":"chatroomeffects_snowflake-3_1yqJU","Snowflake-4":"chatroomeffects_Snowflake-4_3-k2Z","snowflake-4":"chatroomeffects_snowflake-4_3I-Zz","Snowflake-5":"chatroomeffects_Snowflake-5_26vNm","snowflake-5":"chatroomeffects_snowflake-5_2zXei","Snowflake-6":"chatroomeffects_Snowflake-6_hXlKB","snowflake-6":"chatroomeffects_snowflake-6_24IuH","Snowflake-7":"chatroomeffects_Snowflake-7_1qo33","snowflake-7":"chatroomeffects_snowflake-7_1lDP2","Snowflake-8":"chatroomeffects_Snowflake-8_2tBVf","snowflake-8":"chatroomeffects_snowflake-8_2bssC","Snowflake-9":"chatroomeffects_Snowflake-9_2FSmF","snowflake-9":"chatroomeffects_snowflake-9_3aKmJ","Snowflake-10":"chatroomeffects_Snowflake-10_1-IwG","snowflake-10":"chatroomeffects_snowflake-10_2uX53","Snowflake-11":"chatroomeffects_Snowflake-11_3QUh4","snowflake-11":"chatroomeffects_snowflake-11_XehvX","Snowflake-12":"chatroomeffects_Snowflake-12_88fjm","snowflake-12":"chatroomeffects_snowflake-12_Bm1M7","Snowflake-13":"chatroomeffects_Snowflake-13_gNVZT","snowflake-13":"chatroomeffects_snowflake-13_3D5LS","Snowflake-14":"chatroomeffects_Snowflake-14_15TAT","snowflake-14":"chatroomeffects_snowflake-14_35TG1","Snowflake-15":"chatroomeffects_Snowflake-15_1WPlw","snowflake-15":"chatroomeffects_snowflake-15_29ZkS","Snowflake-16":"chatroomeffects_Snowflake-16_2yae0","snowflake-16":"chatroomeffects_snowflake-16_13TgF","Snowflake-17":"chatroomeffects_Snowflake-17_28v5b","snowflake-17":"chatroomeffects_snowflake-17_peNL_","Snowflake-18":"chatroomeffects_Snowflake-18_3by0S","snowflake-18":"chatroomeffects_snowflake-18_2NR9A","Snowflake-19":"chatroomeffects_Snowflake-19_I6DR9","snowflake-19":"chatroomeffects_snowflake-19_2-HH_","Snowflake-20":"chatroomeffects_Snowflake-20_1YTf-","snowflake-20":"chatroomeffects_snowflake-20_xzmzB",confetti:"chatroomeffects_confetti_xBcJ8","confetti-0":"chatroomeffects_confetti-0_2F-oM","drop-0":"chatroomeffects_drop-0_1W9pG","confetti-1":"chatroomeffects_confetti-1_3Fmhc","drop-1":"chatroomeffects_drop-1_3XOOX","confetti-2":"chatroomeffects_confetti-2_1_1xd","drop-2":"chatroomeffects_drop-2_1Dvco","confetti-3":"chatroomeffects_confetti-3_10_aJ","drop-3":"chatroomeffects_drop-3_1rzLI","confetti-4":"chatroomeffects_confetti-4_29B0B","drop-4":"chatroomeffects_drop-4_2Cr4h","confetti-5":"chatroomeffects_confetti-5_bEirD","drop-5":"chatroomeffects_drop-5_1N6Aj","confetti-6":"chatroomeffects_confetti-6_XSnHt","drop-6":"chatroomeffects_drop-6_Kq9Zc","confetti-7":"chatroomeffects_confetti-7_1DuD_","drop-7":"chatroomeffects_drop-7_1LxHl","confetti-8":"chatroomeffects_confetti-8_3Cr1a","drop-8":"chatroomeffects_drop-8_2ngUs","confetti-9":"chatroomeffects_confetti-9_FgZVZ","drop-9":"chatroomeffects_drop-9_1TgvT","confetti-10":"chatroomeffects_confetti-10_3yAHZ","drop-10":"chatroomeffects_drop-10_nzMAv","confetti-11":"chatroomeffects_confetti-11_29QZR","drop-11":"chatroomeffects_drop-11_20tsQ","confetti-12":"chatroomeffects_confetti-12_1CisS","drop-12":"chatroomeffects_drop-12_1e8Hg","confetti-13":"chatroomeffects_confetti-13_3mYsu","drop-13":"chatroomeffects_drop-13_2NyAt","confetti-14":"chatroomeffects_confetti-14_1Irfx","drop-14":"chatroomeffects_drop-14_1WaXA","confetti-15":"chatroomeffects_confetti-15_3A1TP","drop-15":"chatroomeffects_drop-15_MvVcE","confetti-16":"chatroomeffects_confetti-16_2knki","drop-16":"chatroomeffects_drop-16_3SXnD","confetti-17":"chatroomeffects_confetti-17_2jbjN","drop-17":"chatroomeffects_drop-17_2Pd0j","confetti-18":"chatroomeffects_confetti-18_1CYGW","drop-18":"chatroomeffects_drop-18_3wODP","confetti-19":"chatroomeffects_confetti-19_2q68o","drop-19":"chatroomeffects_drop-19_2Gwlj","confetti-20":"chatroomeffects_confetti-20_26ULU","drop-20":"chatroomeffects_drop-20_1-T_W","confetti-21":"chatroomeffects_confetti-21_3A3te","drop-21":"chatroomeffects_drop-21_G8MLf","confetti-22":"chatroomeffects_confetti-22_3pQ9h","drop-22":"chatroomeffects_drop-22_2Ehak","confetti-23":"chatroomeffects_confetti-23_3_ehR","drop-23":"chatroomeffects_drop-23_2Sysf","confetti-24":"chatroomeffects_confetti-24_1xw0l","drop-24":"chatroomeffects_drop-24_3m8Uu","confetti-25":"chatroomeffects_confetti-25_2Hjhb","drop-25":"chatroomeffects_drop-25_39w79","confetti-26":"chatroomeffects_confetti-26_3CQ5O","drop-26":"chatroomeffects_drop-26_7u4KH","confetti-27":"chatroomeffects_confetti-27_1qGrW","drop-27":"chatroomeffects_drop-27_ARiKf","confetti-28":"chatroomeffects_confetti-28_VvrP_","drop-28":"chatroomeffects_drop-28_2r-kr","confetti-29":"chatroomeffects_confetti-29_27yoO","drop-29":"chatroomeffects_drop-29_36ts_","confetti-30":"chatroomeffects_confetti-30_35KJJ","drop-30":"chatroomeffects_drop-30_FSEAN","confetti-31":"chatroomeffects_confetti-31_xfOuc","drop-31":"chatroomeffects_drop-31_117A8","confetti-32":"chatroomeffects_confetti-32_3oB1Q","drop-32":"chatroomeffects_drop-32_3d-5w","confetti-33":"chatroomeffects_confetti-33_2GQ8X","drop-33":"chatroomeffects_drop-33_2McHh","confetti-34":"chatroomeffects_confetti-34_2cxZi","drop-34":"chatroomeffects_drop-34_v5OOo","confetti-35":"chatroomeffects_confetti-35_18Xj3","drop-35":"chatroomeffects_drop-35_2HJ6r","confetti-36":"chatroomeffects_confetti-36_160B4","drop-36":"chatroomeffects_drop-36_1pmmZ","confetti-37":"chatroomeffects_confetti-37_lV1lT","drop-37":"chatroomeffects_drop-37_9BWaH","confetti-38":"chatroomeffects_confetti-38_10VGf","drop-38":"chatroomeffects_drop-38_24S4k","confetti-39":"chatroomeffects_confetti-39_TLnN1","drop-39":"chatroomeffects_drop-39_256KJ","confetti-40":"chatroomeffects_confetti-40_tilKd","drop-40":"chatroomeffects_drop-40_2Ni2Z","confetti-41":"chatroomeffects_confetti-41_2Efi5","drop-41":"chatroomeffects_drop-41_Lsk2P","confetti-42":"chatroomeffects_confetti-42_3bVPd","drop-42":"chatroomeffects_drop-42_22u-9","confetti-43":"chatroomeffects_confetti-43_1IRJJ","drop-43":"chatroomeffects_drop-43_2Hj1F","confetti-44":"chatroomeffects_confetti-44_3yunT","drop-44":"chatroomeffects_drop-44_1KWVx","confetti-45":"chatroomeffects_confetti-45_2ZNp_","drop-45":"chatroomeffects_drop-45_2odi4","confetti-46":"chatroomeffects_confetti-46_1RSJV","drop-46":"chatroomeffects_drop-46_cOJFG","confetti-47":"chatroomeffects_confetti-47_26ps7","drop-47":"chatroomeffects_drop-47_TnJCO","confetti-48":"chatroomeffects_confetti-48_r6QAl","drop-48":"chatroomeffects_drop-48__Kyg4","confetti-49":"chatroomeffects_confetti-49_1UOP6","drop-49":"chatroomeffects_drop-49_d5ECV","confetti-50":"chatroomeffects_confetti-50_1pxIz","drop-50":"chatroomeffects_drop-50__gmkT","confetti-51":"chatroomeffects_confetti-51_1S-2Z","drop-51":"chatroomeffects_drop-51_o0Cab","confetti-52":"chatroomeffects_confetti-52_1X63X","drop-52":"chatroomeffects_drop-52_3RgGH","confetti-53":"chatroomeffects_confetti-53_3_lQV","drop-53":"chatroomeffects_drop-53_3pj6j","confetti-54":"chatroomeffects_confetti-54_8uNQ7","drop-54":"chatroomeffects_drop-54_3O0xH","confetti-55":"chatroomeffects_confetti-55_iDjUQ","drop-55":"chatroomeffects_drop-55_ulKDw","confetti-56":"chatroomeffects_confetti-56_1SWO1","drop-56":"chatroomeffects_drop-56_3TLY-","confetti-57":"chatroomeffects_confetti-57_2L1qw","drop-57":"chatroomeffects_drop-57_2SlUH","confetti-58":"chatroomeffects_confetti-58_2VUcK","drop-58":"chatroomeffects_drop-58_3Sm6B","confetti-59":"chatroomeffects_confetti-59__Lqss","drop-59":"chatroomeffects_drop-59_XLkcN","confetti-60":"chatroomeffects_confetti-60_2JKQ5","drop-60":"chatroomeffects_drop-60_yV0os","confetti-61":"chatroomeffects_confetti-61_3rVuN","drop-61":"chatroomeffects_drop-61__NqSc","confetti-62":"chatroomeffects_confetti-62_2rpoF","drop-62":"chatroomeffects_drop-62_1FDCV","confetti-63":"chatroomeffects_confetti-63_3198h","drop-63":"chatroomeffects_drop-63_1zZ-Y","confetti-64":"chatroomeffects_confetti-64_3OK0y","drop-64":"chatroomeffects_drop-64_lNsSV","confetti-65":"chatroomeffects_confetti-65_VmehB","drop-65":"chatroomeffects_drop-65_1NvQE","confetti-66":"chatroomeffects_confetti-66_3QLBl","drop-66":"chatroomeffects_drop-66_p72jM","confetti-67":"chatroomeffects_confetti-67_3o-7O","drop-67":"chatroomeffects_drop-67_1oTTl","confetti-68":"chatroomeffects_confetti-68_3jyKO","drop-68":"chatroomeffects_drop-68_1_tiE","confetti-69":"chatroomeffects_confetti-69_3kU59","drop-69":"chatroomeffects_drop-69_3phaK","confetti-70":"chatroomeffects_confetti-70_1hU6u","drop-70":"chatroomeffects_drop-70_DNtpd","confetti-71":"chatroomeffects_confetti-71_WsoNj","drop-71":"chatroomeffects_drop-71_Uy1vN","confetti-72":"chatroomeffects_confetti-72_2_6hF","drop-72":"chatroomeffects_drop-72_1rGGz","confetti-73":"chatroomeffects_confetti-73_3JGM4","drop-73":"chatroomeffects_drop-73_3D0xh","confetti-74":"chatroomeffects_confetti-74_TEwzu","drop-74":"chatroomeffects_drop-74_1V64l","confetti-75":"chatroomeffects_confetti-75_3FJ-J","drop-75":"chatroomeffects_drop-75_3TKfF","confetti-76":"chatroomeffects_confetti-76_3O4-7","drop-76":"chatroomeffects_drop-76_pAbUN","confetti-77":"chatroomeffects_confetti-77_36qDl","drop-77":"chatroomeffects_drop-77_3YEWs","confetti-78":"chatroomeffects_confetti-78_2Cduh","drop-78":"chatroomeffects_drop-78_U6rKn","confetti-79":"chatroomeffects_confetti-79_2yo7J","drop-79":"chatroomeffects_drop-79_IlFOy","confetti-80":"chatroomeffects_confetti-80_1qzcm","drop-80":"chatroomeffects_drop-80_lvPWU","confetti-81":"chatroomeffects_confetti-81_1Z0zS","drop-81":"chatroomeffects_drop-81_2Y9tP","confetti-82":"chatroomeffects_confetti-82_1yyK6","drop-82":"chatroomeffects_drop-82_110Dq","confetti-83":"chatroomeffects_confetti-83_uGuyr","drop-83":"chatroomeffects_drop-83_1uGH6","confetti-84":"chatroomeffects_confetti-84_2H7gi","drop-84":"chatroomeffects_drop-84_2E38H","confetti-85":"chatroomeffects_confetti-85_X_KES","drop-85":"chatroomeffects_drop-85_3iBnQ","confetti-86":"chatroomeffects_confetti-86_1pK17","drop-86":"chatroomeffects_drop-86_3vgAf","confetti-87":"chatroomeffects_confetti-87_2YGan","drop-87":"chatroomeffects_drop-87_3-UwQ","confetti-88":"chatroomeffects_confetti-88_QE13h","drop-88":"chatroomeffects_drop-88_L7KWP","confetti-89":"chatroomeffects_confetti-89_3Ifdp","drop-89":"chatroomeffects_drop-89_20o_P","confetti-90":"chatroomeffects_confetti-90_1UuuG","drop-90":"chatroomeffects_drop-90_3Gftj","confetti-91":"chatroomeffects_confetti-91_2gAfr","drop-91":"chatroomeffects_drop-91_30C4q","confetti-92":"chatroomeffects_confetti-92_DP0t2","drop-92":"chatroomeffects_drop-92_faGzG","confetti-93":"chatroomeffects_confetti-93_25s5z","drop-93":"chatroomeffects_drop-93_11JA9","confetti-94":"chatroomeffects_confetti-94_3vlxE","drop-94":"chatroomeffects_drop-94_2QK9y","confetti-95":"chatroomeffects_confetti-95_CxrYj","drop-95":"chatroomeffects_drop-95_3z0ru","confetti-96":"chatroomeffects_confetti-96_ItjuO","drop-96":"chatroomeffects_drop-96_1Kyjs","confetti-97":"chatroomeffects_confetti-97_13B6G","drop-97":"chatroomeffects_drop-97__bMmq","confetti-98":"chatroomeffects_confetti-98_RpTo3","drop-98":"chatroomeffects_drop-98_fvQ8c","confetti-99":"chatroomeffects_confetti-99_3P9qj","drop-99":"chatroomeffects_drop-99_19pOX",cracker:"chatroomeffects_cracker_oaRMS","cracker-left":"chatroomeffects_cracker-left_1fOu2","cracker-right":"chatroomeffects_cracker-right_1yrZw",goldfetti:"chatroomeffects_goldfetti_2N-hZ","goldfetti-fragment":"chatroomeffects_goldfetti-fragment__oU55","goldfetti-color-1":"chatroomeffects_goldfetti-color-1_2v7rd","goldfetti-color-2":"chatroomeffects_goldfetti-color-2_1Xn8e","goldfetti-color-3":"chatroomeffects_goldfetti-color-3_1Otq0","goldfetti-emoji-1":"chatroomeffects_goldfetti-emoji-1_1NsOL","goldfetti-emoji-2":"chatroomeffects_goldfetti-emoji-2_2V-pZ","goldfetti-emoji-3":"chatroomeffects_goldfetti-emoji-3_2i3Rg","goldfetti-emoji-4":"chatroomeffects_goldfetti-emoji-4_3F3Wd",balloons:"chatroomeffects_balloons_2g-SX",lantern_glow:"chatroomeffects_lantern_glow_Gvv_o",snowball_fragment:"chatroomeffects_snowball_fragment_33iZq","snowball-container":"chatroomeffects_snowball-container_3X2Cm",snowball:"chatroomeffects_snowball_3Rfb2",SnowballImage:"chatroomeffects_SnowballImage_3FZFr",SnowballImageCW:"chatroomeffects_SnowballImageCW_qavl3","snowball-rotate-cw":"chatroomeffects_snowball-rotate-cw_2jluI",SnowballImageCCW:"chatroomeffects_SnowballImageCCW_10qMc","snowball-rotate-ccw":"chatroomeffects_snowball-rotate-ccw_1Y7B9","snowball-path":"chatroomeffects_snowball-path_U8ITP","snowball-residue":"chatroomeffects_snowball-residue_3FQ2j","snowball-chunk":"chatroomeffects_snowball-chunk_jpRWi","snowball-chunk-1":"chatroomeffects_snowball-chunk-1_2i2kn","snowball-chunk-2":"chatroomeffects_snowball-chunk-2_320_J","snowball-chunk-3":"chatroomeffects_snowball-chunk-3_2SoU9","snowball-chunk-4":"chatroomeffects_snowball-chunk-4_j-iRi","slide-out-tl":"chatroomeffects_slide-out-tl_2ZyG5","slide-out-tr":"chatroomeffects_slide-out-tr_lpKmJ","slide-out-bottom":"chatroomeffects_slide-out-bottom_2q-wo",pyro:"chatroomeffects_pyro_3L3vU",before:"chatroomeffects_before_1btDM",after:"chatroomeffects_after_3Bch7",bang:"chatroomeffects_bang_KjYNV",gravity:"chatroomeffects_gravity_273Ze",position:"chatroomeffects_position_1yKwq",pyroBodyShake:"chatroomeffects_pyroBodyShake_hWbMH","pyro-body-shake":"chatroomeffects_pyro-body-shake_5Rwz2",pyroBodyShake2:"chatroomeffects_pyroBodyShake2_1ZG2z","pyro-body-shake2":"chatroomeffects_pyro-body-shake2_3puVJ",FireworkPath:"chatroomeffects_FireworkPath_1CKy_","firework-path-animation":"chatroomeffects_firework-path-animation_2mwFy",FireworkContainer:"chatroomeffects_FireworkContainer_1QThW",FireworkPNG:"chatroomeffects_FireworkPNG_30yej",balloon_small_1:"chatroomeffects_balloon_small_1_SWgYi",balloon_move_right:"chatroomeffects_balloon_move_right_1LR6D",balloon_move_left:"chatroomeffects_balloon_move_left_2VfWa",balloon_big_1:"chatroomeffects_balloon_big_1_vpSsn",balloon_big_2:"chatroomeffects_balloon_big_2_3MWqR",balloon_small_2:"chatroomeffects_balloon_small_2_1Jic8",balloon_small_3:"chatroomeffects_balloon_small_3_3V1sE","snowball-path-1":"chatroomeffects_snowball-path-1_15h1p","snowball-path-2":"chatroomeffects_snowball-path-2_1smZg","snowball-path-3":"chatroomeffects_snowball-path-3_30WlX","snowball-path-4":"chatroomeffects_snowball-path-4_2q7hD","snowball-path-5":"chatroomeffects_snowball-path-5_bC2vt","snowball-path-6":"chatroomeffects_snowball-path-6_3QbxJ",fireworkBigX:"chatroomeffects_fireworkBigX_2uUzq",fireworkBigY:"chatroomeffects_fireworkBigY_b5rq3",fireworkSmallX:"chatroomeffects_fireworkSmallX_1rFga",fireworkSmallY:"chatroomeffects_fireworkSmallY_2iqGt",fireworkLongX:"chatroomeffects_fireworkLongX_inXay",fireworkLongY:"chatroomeffects_fireworkLongY_aUUPZ"}},QAot:function(e,t,n){"use strict";var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("tY0L"),s=n("Hk8Z"),c=n("dXEH"),l=n.n(c),p=n("QHER"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.performSearch=function(e){return this.props.emoticonStore.SearchEmoticons(e,10,!1)},t.prototype.getSelection=function(e){return e.name},t.prototype.getKey=function(e){return e.name},t.prototype.renderMatch=function(e){return i.a.createElement("div",{className:Object(p.a)(l.a.EmoticonSuggestion,e.recent?"Recent":"")},i.a.createElement("div",{className:l.a.Emoticon},i.a.createElement(a.a,{emoticon:e.name,emoticonHoverStore:this.props.emoticonHoverStore}),e.new&&i.a.createElement(a.c,null)),":",e.name,":")},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(s.a);t.a=u},QHER:function(e,t,n){"use strict";function o(e){return Object.keys(e).reduce((function(t,n){return e[n]?t?t+" "+n:n:t}),"")}t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return t?"string"==typeof t?e?e+" "+t:t:"object"==typeof t?e?e+" "+o(t):o(t):e:e}),"")}},QxgC:function(e,t,n){"use strict";var o=n("mrSG"),r=n("q1tI"),i=n.n(r),a=n("okNM"),s=n("1VtQ"),c=n("8o0Y"),l=n("tY0L"),p=n("e2SU"),u=n("oh5H"),m=n("QHER"),d=n("UDpV"),h=n.n(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.OnEmoticonClick=function(e){var t=this.props,n=(t.emoticonStore,t.SetUIDisplayPref),o=t.contextOptions;if(Object(c.a)(i.a.createElement(l.b,{emoticonStore:this.props.emoticonStore,emoticonHoverStore:this.props.emoticonHoverStore,strFlairGroupID:this.props.strFlairGroupID,OnSelected:this.props.OnEmoticonSelected,onRoomEffectSelected:this.props.onRoomEffectSelected,onStickerSelected:this.props.onStickerSelected,roomEffectSettings:this.props.roomEffectSettings,bShowStickers:this.props.bShowStickers,bShowEffects:this.props.bShowEffects}),e,o||{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0}),this.BHaveUnseenEmoticons()&&n){var r=this.GetNewestIndicatorTime();(!r||r<1576780700)&&(r=1576780700),n("rtLastAckedNewEmoticons",r)}},t.prototype.GetNewestIndicatorTime=function(){var e=this.props.emoticonStore,t=Number.MIN_SAFE_INTEGER,n=e.GetTimeReceivedNewestEmoticon();n&&(t=n);var o=e.GetTimeReceivedForStickerOrEffect();return(t=Math.max(o,t))>Number.MIN_SAFE_INTEGER?t:void 0},t.prototype.BHaveUnseenEmoticons=function(){var e=this.props.rtLastAckedNewEmoticons,t=this.GetNewestIndicatorTime();return!e||e<1576780700||t&&(!e||e<t)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.className,o=e.ttip,r=e.useImg,a=[n],s=!1;return t?a.push("disabled"):this.BHaveUnseenEmoticons()&&(s=!0),o&&a.push("ttip"),r?i.a.createElement("span",{onClick:this.OnEmoticonClick},i.a.createElement("img",{src:this.props.useImg,className:m.a.apply(void 0,a),title:this.props.title||Object(u.d)("#ChatEntryButton_Emoticon"),"data-tooltip-text":o})):(a.push(h.a.chatSubmitButton,h.a.EmoticonPickerButton),i.a.createElement("button",{className:m.a.apply(void 0,a),type:"button",onClick:this.OnEmoticonClick,title:this.props.title||Object(u.d)("#ChatEntryButton_Emoticon"),disabled:t,"data-tooltip-text":o},this.props.buttonIcon||i.a.createElement(p.q,null),s&&i.a.createElement(l.c,null)))},Object(o.c)([s.a],t.prototype,"OnEmoticonClick",null),t=Object(o.c)([a.a],t)}(i.a.Component);t.a=f},"R+Pm":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("q1tI"),r=n.n(o),i=n("QHER"),a=n("pjYD"),s=n.n(a),c=function(e){var t=e.value,n=e.onChange,o=e.disabled;return r.a.createElement("div",{className:Object(i.a)(s.a.Toggle,o&&s.a.Disabled),onClick:function(){return!o&&n(!t)}},r.a.createElement("div",{className:s.a.ToggleRail}),r.a.createElement("div",{className:Object(i.a)(s.a.ToggleRail,s.a.Highlight,t?s.a.On:s.a.Off)}),r.a.createElement("div",{className:Object(i.a)(s.a.ToggleSwitch,t?s.a.On:s.a.Off)}))},l=function(e){var t=e.label,n=e.value,o=e.onChange,a=e.disabled,l=e.className;return r.a.createElement("div",{className:Object(i.a)(s.a.ToggleRow,l)},r.a.createElement("div",{className:Object(i.a)(s.a.Label,a&&s.a.Disabled)},t),r.a.createElement(c,{value:n,onChange:o,disabled:a}))}},"R/6g":function(e,t,n){e.exports={DateAndTime:"localdateandtime_DateAndTime_1MmOb",DateAndTimeInline:"localdateandtime_DateAndTimeInline_1R94f",At:"localdateandtime_At_1I9oR",ActiveEvent:"localdateandtime_ActiveEvent_Yoj2-",ActiveEventCallOut:"localdateandtime_ActiveEventCallOut_3PbtB",RightSideTitles:"localdateandtime_RightSideTitles_27B04",DateToolTip:"localdateandtime_DateToolTip_1Nsbs",ShortDateAndTime:"localdateandtime_ShortDateAndTime_2mXx4",ShortDateRange:"localdateandtime_ShortDateRange_1GLFZ"}},RcxM:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABKhJREFUeNrkm22IVUUYx393WbO2XLcaWqNywYq0UtNInE3CjZXATcgKzAphwwkiwYgo+hiRfbOgvo1JZalsG71sZWRa1NYYRdYXy9JI7UNsY1rqki/b7cMd7Xa4L3PO3nPuOac/HC6c88y98/zPM8/bzC0Ui0UACoUCcUFqexXwAHALcAXQCgwYJZbRRBSLRQpxEyC1XQU845QOosMo8UczCWiJ8wektouB56ooD3AdTUZLzN//ZJ3ns3JLgNS2E5hbR2x2ni3Ax7xvzDMBl3rITJfaXpZXAiZ5yvXm2Qn64Na8EnDYU65Pajs5jwT84ik3EViaRwL2h5BdkUcC9gJHPWV7pLbX5IoAo8QYYEIMeTCPUeCzMMtAant+3gjYEkL2XGB13gj4MqQzfEhq25EbAowSReClEEMmAw/nLRNcD4yFkH9EantJbggwSvwMvBFiyDnAU3mrBdaElF8htZ2XxMTq9gSltgW3NsOiAzjbXR3AWmBOiPE7gXlGiVNxKV8sFiv36qS2E4D7gX5gJnBWE3KUOcAq4NlELUBqOwV4B7g+BaXyMWC2UWJvXBbQEnjzbcDWlCh/Ojl6UWobm68KfvETwLWkCwvizA3OLIHudQc7gQPABNKHk0C3UeKrOJdAf0qVx81rs9R2UpxLoJd043LnDwpxETCT9ON24NG4CBBkA2uktg3rJDd0d1hq2wV8AkxNID9YYJT4pqF5QAMKn33ADwnlB0NS24sbGQavZPx9uS7gtgSXw9fAzVHPGPzngET3uoPtgE1xKKyGj4E+o8TouJaAUeJPYJjsYSEwILWNVLAFfcC7ZBN9wGAUEoIEvEd2scQREZ0Ao8R3wL6MEnDMVbLB0NwjtZ3oawG4XkAW8bZR4mhA+enAdmBEartBatsbTKUrdYReAc5rQJxeQmnnNylsrHBvuftsB+511zap7XKjxG8NzwQD7K8m5nZWGX4HphglTgbm8COlg5lB7ATmf77ywhOxdFqcmc1I8O2/VkH5G6ooD//2G6s2Re+j1MUdT/3eliABr1a4d3edMf3A2tYa2VXTjq2ExIFgAud6iPXOIc+oFgUwSvwEfJ8RAja5Pchy9ABehVItH7AlIwRsjGD+UNq5rklAFvKBXUaJbwPmPxG4w2Psm/UIGAaOZPDtL/b0X5tqEmCUOAF8mPb1XyP5qYVho8T+qmGwDI8DL4ecVBul3eCumJXf4Zx1ufm3uwzUO2zWJMAosRvYHSERmgo83YTYv5TSbnQtnAIGvQgoU2ZaiIldAKiYlf8bGIho/h8YJaw3Aa4w2kY6DlafxlajxEjgRV0ELArrOOsqZZTYBbyQAe+/zEOfUeCtUAQ4PAb8mhLl/6LymSOf5Gco2DPwIsAoccj9wFgKCBgyShwJmP80YH4Ux+m9ro0SH7kKKo3mf5fHuEPA+5EJcCRscJ52tEnKH65So9wTpWcQmgBHwmZKf3d73cXUJDFolDgeMP9ZwNUeY9dXutkaZRZGiT3AnS70zAU6gUICBHwa0fkNGiW+aBgBZUSMVFpXCWNhnefbgZVR+gFZQTdwE/A8sMfdOw7scIovqrV5eqYr/H/FPwMAiwZjDiFc2KAAAAAASUVORK5CYII="},RnhZ:function(e,t,n){var o={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id="RnhZ"},"S+nL":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUNDNzBFNTUyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUNDNzBFNTYyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Q0M3MEU1MzIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0M3MEU1NDIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv3vUKAAAAAlSURBVHjaYvz//z8DsYARpFhISAivjnfv3jGSp3jUGeQ4AyDAADZHNe2nyOBrAAAAAElFTkSuQmCC"},S8h3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABQRJREFUeNrkm1+IFVUcxz971VanzVSyRQVfrKAeVBoqzOgPpqmR5JbuH6mHnaigXiqkQOTsryyQHuwhiFaGsH9aFphWG2ERErYPO5CtlRVLZrVBSOW2TSrq7WHn0t1xdubMvXfmzly/sLD3cH5n7vnu7/c7399vzjYVi0Wqwfw1T1IvKKUKwFJgPXAHcCVwCnCA7cCrlmmcC1ujQL7xOXAAeNTbPEAzcCPwCtBnO64RtsDkSp9sO24LsFgpdVlKmx0QkV98YweBJSE2KzxP2FAzAmzHnQs8A3QBU1P8a78MPOwb2wk8EWHXZTvu85ZpfFl1CNiOuxw4DHSnvHmANqXUlPIBEXGAHzRsrapzgO24a4APgJl1ivfZwLKA8bc0bNfZjjupYgJsx13sPWhKnZNeZ8DYGxp2rcCtFRFgO+40YHcdXD4Idyulxn0PyzSOAIMatl2VesBm4IqMHHvTgTsDxt/UsF1rO25zLAJsx50DPJaxs7+jwjww0zsWx6EpTAnajrsIuC3Gl7sEeByYkSABJ4HZIjIKcGzv1tJ37QduiLDdZZlGp7YOsEzjEHAojhRWShU9nZAUpgJrgdcCwiCKgLtsxzUs03AjCfDiZZqGHi//OAtYldJp4CfgHWBbRFhfDKwBdunkgJeAP2P+DHk6PGksV0rN8nnrMPCZhm17ZBK0HbcJWJnhImiyVwGeF+Matqttx700ygMWAXMyXgm2B4y9C5yJsLsIaIsiYBXZxy1Kqbm+MPgD+EjD9t5GIKBpAi/QCYObJyTAdtwZKSWypETRe55WCENLmAfcDkzKCQHX2467wBcGo8C+CLvhMB0wEFP9BSWZLcB1KXrBswHSeF2Izb4JCbBM4yhwVPfpQU1RpdTlAUIlTQLeB0a84smPf4DnAmsB23FbCe+x6XrAJmBhiqGw0DKNQV8u2wHcH7D5Nss0Pp7IA7rL2ckROgJ6AjvLCDjpSeUeyzSGwoqhVeQTHZ7XleMTj4Q+YI9lGn8HnqWlEPCOv+M5OgH8WGKZRn9co0JOjz8/RjTO/kgCVud48ysm6vtHyslisViq/n7NQQHkx7/ASss0DlS6QCFH1Z8fZ4H2ajZ/ng6oBCUhpJS6CvgUmJcSAQ+JSG+pJ1itB1QNEfkevf58LbBNRHpr1VnBdtyeShco6wnOI50u0ofAxlotVhJCGwEjB3H/DdApImdrtWApBH7OweZHgTYRGanloiUCDuaAgG4R+a7WixbKuihZRq+I7E5i4UJZg+DHjG7+CAm+nyx4TZBzwCMZFTv3iYibKAEeCX0Z7AVsFZGBJB8wTghZprGJsUtHpzKw+a+Bp5N+SKAU9m6CbQCuReMFqQ8GY29wp5f93spYqywOlopI5OlUrRRuSvqmqHeb8zBwdYxlbRF5QGdiZmqBEKyPufkTwFNpxVkaBMTV7VtE5HhDEKCUusnLI7r4CXgxzUybtAd0x5zfIyInG4IApVQzcE8MkyHg9bTP2iQ9YBnBr6bCRM+ZRiNAF78BO+qhtpIkIM4dg14ROd0wBHj3eXWz/xmglzohKQ9YEEP67hGR4UYjYH6MubuoI5IiQPfdwAhj/4TRcAS0aM7bm7bwqUctEIa+ejcdkiLgL815+xuVgGMacwZF5PdGJeArjTlfkAEkQoBXz/fXgKRcJ8HNFzQBIrIfeBA4faF6ACKyHbgGeAH4lv/v8r8tIieyQMB/AwCUnmfJpwPnQwAAAABJRU5ErkJggg=="},SEab:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return _}));var o=n("mrSG"),r=n("UqDm"),i=n("1VtQ"),a=n("+M9t"),s=n("LAqV"),c=n("oh5H"),l=n("/SYB"),p=n("5FJe"),u=n("2vnA"),m=n("XaMz"),d=-1,h=function(){function e(e,t,n){this.m_id=e,this.m_rgMembers=[],this.m_fnSort=t,this.m_fnOnUpdate=n}return Object.defineProperty(e.prototype,"id",{get:function(){return this.m_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return-2==this.m_id?1==this.m_rgMembers.length?Object(c.d)("#FriendGroup_InGame"):Object(c.d)("#FriendGroup_InGame_Others"):0==this.m_id?Object(c.d)("#Chat_MemberGroup_Online"):this.m_id==d?Object(c.d)("#Chat_MemberGroup_PartyBeacon"):this.m_strName?this.m_strName:s.f.AppInfoStore.GetAppInfo(this.m_id).is_initialized?(this.m_strName=s.f.AppInfoStore.GetAppInfo(this.m_id).name,this.m_strName):(s.f.AppInfoStore.RegisterCallbackOnLoad(this.OnAppInfoLoaded),"")},enumerable:!1,configurable:!0}),e.prototype.OnAppInfoLoaded=function(){this.m_strName=s.f.AppInfoStore.GetAppInfo(this.m_id).name,this.m_fnOnUpdate()},Object.defineProperty(e.prototype,"member_list",{get:function(){return this.m_rgMembers},enumerable:!1,configurable:!0}),e.prototype.BReadyToDisplay=function(){return!this.BIsGameGroup()||!!this.name},e.prototype.BIsGameGroup=function(){return this.m_id>0},e.prototype.ClearMemberList=function(){this.m_rgMembers=[]},e.prototype.BHasMember=function(e){return this.m_rgMembers.findIndex((function(t){return t.accountid===e}))>=0},e.prototype.SetMembers=function(e){this.m_rgMembers=e,this.Sort()},e.prototype.SortedInsert=function(e){Object(m.a)(!this.BHasMember(e.accountid),"Double insert into bucket for accountid",e.accountid),r.j(this.m_rgMembers,e,this.m_fnSort)},e.prototype.Remove=function(e){return r.d(this.m_rgMembers,(function(t){return t.accountid===e}))},e.prototype.Sort=function(){this.m_rgMembers.sort(this.m_fnSort)},Object(o.c)([i.a],e.prototype,"OnAppInfoLoaded",null),e}(),f=function(){return function(e,t){this.rgRegistered=[],this.bFlatList=void 0,this.mapBuckets=new Map,this.nLastUpdate=0,this.msSpentSorting=0,this.groupSingletons=new h(-2,e,t)}}(),_=function(){function e(){this.m_mapGroupBuckets=new Map,this.m_mapGroupBeacons=new Map,this.m_bShowMembersInGameGroups=void 0,this.LOG=l.b.create((function(){return"CGroupMemberStore"}),!1)}return e.prototype.Init=function(){var e=this;this.m_disposePersonaStateChanged=s.f.FriendStore.AddPersonaStateChangedCallback(this.OnPersonaStateChanged),this.m_disposePlayerGameChanged=s.f.FriendStore.AddPlayerGameChangedCallback(this.OnPlayerGameChanged),s.f.SettingsStore.RunOnReady(this.ListenForSettingsChanges),s.f.CMInterface.AddOnDisconnectCallback((function(){e.Reset()}),102)},e.prototype.ListenForSettingsChanges=function(){var e=this;this.m_bShowMembersInGameGroups=s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame,Object(u.J)((function(){return s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame!==e.m_bShowMembersInGameGroups}),(function(){e.Reset(),e.ListenForSettingsChanges()}))},e.prototype.Reset=function(){var e=this;this.m_mapGroupBuckets.forEach((function(t,n){t.bFlatList=void 0,e.PerformInitialPopulate(n),e.FireMemberListChanged(t)}))},e.prototype.RegisterForGroupMemberList=function(e,t){var n=this;return this.m_mapGroupBuckets.has(t)||(this.m_mapGroupBuckets.set(t,new f(this.FriendSortFunc,(function(){n.OnGroupUpdate(t)}))),this.PerformInitialPopulate(t)),this.m_mapGroupBuckets.get(t).rgRegistered.push(e),{unregister:function(){return n.UnregisterForGroupMemberList(e,t)}}},e.prototype.OnGroupUpdate=function(e){var t=this.m_mapGroupBuckets.get(e);t&&this.FireMemberListChanged(t)},e.prototype.UnregisterForGroupMemberList=function(e,t){var n=this.m_mapGroupBuckets.get(t);n&&(r.c(n.rgRegistered,e),0==n.rgRegistered.length&&this.m_mapGroupBuckets.delete(t))},e.prototype.GroupSortFunc=function(e,t){return t.id==d&&e.id!=d?1:e.id==d&&t.id!=d?-1:e.id<=0&&t.id<=0?e.id-t.id:e.id<=0&&t.id>0?1:t.id<=0&&e.id>0?-1:t.member_list.length==e.member_list.length&&t.name&&e.name?t.name.localeCompare(e.name):t.member_list.length-e.member_list.length},e.prototype.GetGroupMemberList=function(e){var t=this,n=this.m_mapGroupBuckets.get(e);if(n.bFlatList)return Object(m.a)(1==n.mapBuckets.size,"Flat list has too many buckets"),[n.mapBuckets.get(0)];var o=[];return n.mapBuckets.forEach((function(e){e.BReadyToDisplay()&&(e.member_list.length>1||!t.BucketCanBeSingleton(e))&&o.push(e)})),n.groupSingletons.member_list.length>0&&(n.groupSingletons.Sort(),o.push(n.groupSingletons)),o.sort(this.GroupSortFunc)},e.prototype.SetGroupListFlat=function(e,t){var n=this.m_mapGroupBuckets.get(e);n&&n.bFlatList!=t&&(n.bFlatList=t,this.PerformInitialPopulate(e),this.FireMemberListChanged(n))},e.prototype.ScheduledFireMemberListChanged=function(e){e.hDelayUpdate=void 0,this.FireMemberListChanged(e)},e.prototype.FireMemberListChanged=function(e){var t=this;if(!e.hDelayUpdate){var n=performance.now();if(n-e.nLastUpdate<1e3)return e.hDelayUpdate=SetBackgroundTimeout((function(){return t.ScheduledFireMemberListChanged(e)}),1e3),void this.LOG("DELAY UPDATE");e.nLastUpdate=n;for(var o=0,r=e.rgRegistered;o<r.length;o++){(0,r[o])()}}},e.prototype.OnPlayerGameChanged=function(e,t,n){var o=this;this.m_mapGroupBuckets.forEach((function(r,i){var a=s.f.ChatStore.GetChatRoomGroup(i);if(!a.GetMemberPartyBeacon(e)&&a.BHasMember(e)){var c=s.f.FriendStore.GetPlayer(e);if(c.is_appinfo_ready(),o.LOG("OnPlayerGameChanged",c.display_name,t,n),r.bFlatList)return r.mapBuckets.get(0).Remove(e),r.mapBuckets.get(0).SortedInsert(s.f.FriendStore.GetPlayer(e)),void o.FireMemberListChanged(r);if(t==n){var l=n==p.d?r.groupSingletons:r.mapBuckets.get(n);if(l&&l.BHasMember(e))return void o.UpdatePersonaForGroup(i,c)}o.RemoveMemberFromBucket(r,t,e),o.AddMemberToBucketID(r,n,s.f.FriendStore.GetPlayer(e)),o.FireMemberListChanged(r)}}))},e.prototype.OnPersonaStateChanged=function(e){var t=this;this.m_mapGroupBuckets.forEach((function(n,o){var r=s.f.ChatStore.GetChatRoomGroup(o);if(r.BHasMember(e.accountid)){if(t.LOG("CGroupMemberStore - persona state",o,e.display_name),n.bReSortPending)return t.LOG(e.display_name,"not ready"),void e.is_appinfo_ready();e.is_appinfo_ready()?t.UpdatePersonaForGroup(r.GetGroupID(),e):(t.LOG("Delay sorting player "+e.accountid),s.f.AppInfoStore.RegisterCallbackOnLoad(t.UpdatePersonaForGroup.bind(t,o,e)))}}))},e.prototype.UpdatePersonaForGroup=function(e,t){var n=this.m_mapGroupBuckets.get(e);if(n){var o=performance.now(),r=!1;if(n.bFlatList)Object(m.a)(1==n.mapBuckets.size,"Flat map is too large"),n.mapBuckets.get(0).Remove(t.accountid),n.mapBuckets.get(0).SortedInsert(t),r=!0;else{var i=this.FindCurrentBucketForMember(n,t.accountid);if(void 0!==i){var a=void 0;(-2==i||1==(a=n.mapBuckets.get(i)).member_list.length&&this.BucketCanBeSingleton(a))&&(a=n.groupSingletons),(a.member_list.length>1||!this.BucketCanBeSingleton(a))&&(this.LOG("Resorting user",t.display_name,"in bucket",i),a.Remove(t.accountid),a.SortedInsert(t),r=!0)}}var s=performance.now();n.msSpentSorting+=s-o,this.LOG(e+": Resort user "+t.display_name+" took "+(s-o)+"ms (total "+n.msSpentSorting+"ms)"),r&&this.FireMemberListChanged(n)}},e.prototype.OnPartyBeaconsUpdated=function(e,t){this.m_mapGroupBeacons.set(e,t);var n=this.m_mapGroupBuckets.get(e),o=[],r=!1;if(n){for(var i=0,a=t;i<a.length;i++){var c=a[i];o.push(c.account_id);var l=this.FindCurrentBucketForMember(n,c.account_id);if(l!=d)(h=s.f.FriendStore.GetPlayer(c.account_id)).is_appinfo_ready(),r=!0,this.RemoveMemberFromBucket(n,l,c.account_id),this.AddMemberToBucketID(n,d,h)}var p=n.mapBuckets.get(d);if(p)for(var u=0,m=p.member_list;u<m.length;u++){var h=m[u];if(-1==o.indexOf(h.accountid)){r=!0;var f=this.GetBucketIdForPlayer(n,h,e);this.RemoveMemberFromBucket(n,d,h.accountid),this.AddMemberToBucketID(n,f,h)}}r&&this.ReSortGroup(e)}},e.prototype.ReSortGroup=function(e){var t=this.m_mapGroupBuckets.get(e);if(t){if(t.bFlatList){Object(m.a)(1==t.mapBuckets.size,"Flat list has too many buckets");var n=performance.now(),o=t.mapBuckets.get(0);o.Sort();var r=performance.now();t.msSpentSorting+=r-n,this.LOG(e+": List ReSort took "+(r-n)+"ms (total "+t.msSpentSorting+"ms) for "+o.member_list.length+" members")}else t.mapBuckets.get(0).Sort(),t.groupSingletons.Sort();t.bReSortPending=!1,this.FireMemberListChanged(t)}},e.prototype.FriendSortFunc=function(e,t){var n=a.b.FriendSortStatusComparator(e,t);if(0!=n)return n;if(e.persona.is_ingame&&t.persona.is_ingame){if(e.persona.is_in_nonsteam_game){if(!t.persona.is_in_nonsteam_game)return 1}else if(t.persona.is_in_nonsteam_game)return-1;var o=e.current_game_name,r=t.current_game_name;if(o){if(!r)return-1;if(o!=r)return o<r?-1:1}else if(r)return 1}return e.display_name.localeCompare(t.display_name)},e.prototype.PerformInitialPopulate=function(e){var t=this,n=this.m_mapGroupBuckets.get(e);n.mapBuckets.clear(),n.groupSingletons.ClearMemberList(),Object(m.a)(n,"PerformInitialPopulate didn't find group");var o=performance.now(),r=s.f.ChatStore.GetChatRoomGroup(e).memberList.member_list_unsorted.slice();if(void 0===n.bFlatList&&(n.bFlatList=r.length>100||!s.f.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame),n.bFlatList){r.forEach((function(e){e.is_appinfo_ready()}));var i=new h(0,this.FriendSortFunc,(function(){t.FireMemberListChanged(n)}));i.SetMembers(r),n.mapBuckets.set(0,i)}else for(var a=0,c=r;a<c.length;a++){var l=c[a],p=this.GetBucketIdForPlayer(n,l,e);this.AddMemberToBucketID(n,p,l)}s.f.AppInfoStore.BHavePendingAppInfoRequests()&&(n.bReSortPending=!0,s.f.AppInfoStore.RegisterCallbackOnLoad(this.ReSortGroup.bind(this,e)));var u=performance.now();n.msSpentSorting+=u-o,this.LOG("List sort took "+(u-o)+" ms for "+r.length+" members of group "+e)},e.prototype.FindCurrentBucketForMember=function(e,t){var n=void 0;return e.mapBuckets.forEach((function(e){e.BHasMember(t)&&(n=e.id)})),void 0!==n?n:e.groupSingletons.BHasMember(t)?-2:void 0},e.prototype.BIsMemberInAnyBucket=function(e,t){return void 0!==this.FindCurrentBucketForMember(e,t)},e.prototype.AddMemberToBucketID=function(e,t,n){var o=this;if(Object(m.a)(!this.BIsMemberInAnyBucket(e,n.accountid),"Trying to double add accountid",n.accountid,"which is already in bucket",this.FindCurrentBucketForMember(e,n.accountid)),Object(m.a)(!e.bFlatList||0==t,"Trying to add to non-default bucket in flat list"),-2!=t)if(e.mapBuckets.has(t)){if(!e.bFlatList)1==(r=e.mapBuckets.get(t)).member_list.length&&this.BucketCanBeSingleton(r)&&this.RemoveFromSingletons(e,r.member_list[0].accountid);e.mapBuckets.get(t).SortedInsert(n)}else{var r;(r=new h(t,this.FriendSortFunc,(function(){o.FireMemberListChanged(e)}))).SortedInsert(n),e.mapBuckets.set(t,r),!e.bFlatList&&this.BucketCanBeSingleton(r)&&this.AddToSingletons(e,n)}else this.AddToSingletons(e,n)},e.prototype.BucketCanBeSingleton=function(e){return e.id!=d&&0!=e.id},e.prototype.AddToSingletons=function(e,t){Object(m.a)(!e.bFlatList,"Adding to singletons in flat list"),e.groupSingletons.SortedInsert(t)},e.prototype.RemoveFromSingletons=function(e,t){return Object(m.a)(!e.bFlatList,"Removing from singletons in flat list"),e.groupSingletons.Remove(t)},e.prototype.GetBucketIdForPlayer=function(e,t,n){if(e.bFlatList)return 0;var o=this.m_mapGroupBeacons.get(n);if(o&&o.find((function(e){return e.account_id==t.accountid})))return d;return t.persona.is_ingame?t.persona.is_in_nonsteam_game?-2:t.persona.m_unGamePlayedAppID:t.persona.m_broadcastAppId?t.persona.m_broadcastAppId:0},e.prototype.RemoveMemberFromBucket=function(e,t,n){if(-2==t)return this.RemoveFromSingletons(e,n),!0;var o=e.mapBuckets.get(t);return!(!o||!o.Remove(n))&&(0==o.member_list.length?(this.RemoveFromSingletons(e,n),this.LOG("Deleting bucket",t),e.mapBuckets.delete(t)):1==o.member_list.length&&!e.bFlatList&&this.BucketCanBeSingleton(o)&&(this.LOG("Removing member, adding",o.member_list[0].accountid,"to singletons"),this.AddToSingletons(e,o.member_list[0])),!0)},e.prototype.AddUserAndFireCallback=function(e,t,n){var o=s.f.FriendStore.GetPlayer(t),r=this.GetBucketIdForPlayer(e,o,n);this.AddMemberToBucketID(e,r,o),this.FireMemberListChanged(e)},e.prototype.OnMemberAdded=function(e,t){var n=this.m_mapGroupBuckets.get(e);n&&this.AddUserAndFireCallback(n,t,e)},e.prototype.OnMemberRemoved=function(e,t){var n=this.m_mapGroupBuckets.get(e);if(n){for(var o=0,r=Array.from(n.mapBuckets.keys());o<r.length;o++){var i=r[o];if(this.RemoveMemberFromBucket(n,i,t))return void this.FireMemberListChanged(n)}this.RemoveMemberFromBucket(n,-2,t)&&this.FireMemberListChanged(n)}},Object(o.c)([i.a],e.prototype,"ListenForSettingsChanges",null),Object(o.c)([i.a],e.prototype,"OnPlayerGameChanged",null),Object(o.c)([i.a],e.prototype,"OnPersonaStateChanged",null),Object(o.c)([i.a],e.prototype,"OnPartyBeaconsUpdated",null),e}()},SNN4:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n("mrSG"),r=n("vDqi"),i=n.n(r),a=n("2vnA"),s=n("1n9R"),c=function(){function e(e){this.m_appidList=new Array,this.m_socialList=new Array,this.m_strName="",this.m_strAvatarURLFullSize="",this.m_strTagLineLoc="",this.m_nFollowers=0,this.m_strVanity="",this.m_webLink=void 0,this.m_bIsLoaded=!1,this.m_bIsHidden=!1,this.m_clanSteamID=e}return e.prototype.Initialize=function(e){var t=this;this.m_strName=e.name||"",this.m_strAvatarURLFullSize=e.avatar_url_full_size||"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/fe/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg",e.social&&e.social.forEach((function(e){return t.m_socialList.push(e)})),this.m_strTagLineLoc=e.tag_line_localized||"",this.m_nFollowers=e.followers||0,this.m_strVanity=e.vanity||void 0,this.m_webLink=e.weblink,this.m_bIsHidden=e.hidden||!1,e.appids&&e.appids.forEach((function(e){return t.m_appidList.push(e)})),this.m_bIsLoaded=!0},e.prototype.BIsLoaded=function(){return this.m_bIsLoaded},e.prototype.GetClanSteamID=function(){return this.m_clanSteamID},e.prototype.GetClanAccountID=function(){return this.m_clanSteamID.GetAccountID()},e.prototype.GetAppIDList=function(){return this.m_appidList},e.prototype.GetSocialList=function(){return this.m_socialList},e.prototype.GetName=function(){return this.m_strName},e.prototype.GetAvatarURLFullSize=function(){return this.m_strAvatarURLFullSize},e.prototype.GetTagLine=function(){return this.m_strTagLineLoc},e.prototype.GetNumFollowers=function(){return this.m_nFollowers},e.prototype.BIsHidden=function(){return this.m_bIsHidden},e.prototype.GetURL=function(e){if(this.m_strVanity){switch(e){case"publisher":return s.c.STORE_BASE_URL+"publisher/"+this.m_strVanity+"/";case"franchise":return s.c.STORE_BASE_URL+"franchise/"+this.m_strVanity+"/"}return s.c.STORE_BASE_URL+"developer/"+this.m_strVanity+"/"}return s.c.STORE_BASE_URL+"curator/"+this.m_clanSteamID.GetAccountID()+"/"},e.prototype.BHasWebLink=function(){return void 0!==this.m_webLink},e.prototype.GetWebLink=function(){return this.m_webLink},e.prototype.GetVanityString=function(){return this.m_strVanity},e.prototype.AdjustFollower=function(e){this.m_nFollowers+=e},Object(o.c)([a.A],e.prototype,"m_appidList",void 0),Object(o.c)([a.A],e.prototype,"m_nFollowers",void 0),e}(),l=n("s+DT"),p=new(function(){function e(){this.m_mapClanToCreatorHome=new Map,this.m_mapAppToCreatorIDList=new Map,this.m_bLoadedFromConfig=!1}return e.prototype.LazyInit=function(){var t=this;if(!this.m_bLoadedFromConfig){var n=Object(s.g)("creatorhome","application_config");this.ValidateStoreDefault(n)&&n.forEach((function(n){var o=Number(n.creator_clan_id),r=l.a.InitFromClanID(o),i=new c(r);i.Initialize(n),i.m_promise=e.GetAsPromise(i),t.m_mapClanToCreatorHome.set(o,i)}));var o=Object(s.g)("creatorhomeforapp","application_config");this.ValidateStoreDefaultAppList(o)&&o.forEach((function(e){t.m_mapAppToCreatorIDList.has(e.appid)||t.m_mapAppToCreatorIDList.set(e.appid,new Array),t.m_mapAppToCreatorIDList.get(e.appid).push(e)})),this.m_bLoadedFromConfig=!0}},e.GetAsPromise=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return[2,e]}))}))},e.prototype.ValidateStoreDefault=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("string"==typeof t[0].name&&("string"==typeof t[0].creator_clan_id||"number"==typeof t[0].creator_clan_id))},e.prototype.ValidateStoreDefaultAppList=function(e){var t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&("number"==typeof t[0].clan_account_id&&t[0].clan_account_id>0&&"number"==typeof t[0].appid&&t[0].appid>0)},e.prototype.BHasCreatorHomeLoaded=function(e){return this.m_mapClanToCreatorHome.has(e.GetAccountID())&&this.m_mapClanToCreatorHome.get(e.GetAccountID()).BIsLoaded()},e.prototype.GetCreatorHome=function(e){return this.m_mapClanToCreatorHome.get(e.GetAccountID())},e.prototype.GetCreatorHomeByID=function(e){return this.m_mapClanToCreatorHome.get(e.clan_account_id)},e.prototype.LoadCreatorHome=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.LazyInit(),this.m_mapClanToCreatorHome.has(e.GetAccountID())?[3,2]:((n=new c(e)).m_promise=this.InternalCreatorHome(n,t),[4,n.m_promise]);case 1:o.sent(),this.m_mapClanToCreatorHome.set(e.GetAccountID(),n),o.label=2;case 2:return[2,this.m_mapClanToCreatorHome.get(e.GetAccountID()).m_promise]}}))}))},e.prototype.InternalCreatorHome=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return n={get_appids:!0,l:s.c.LANGUAGE,origin:self.origin},r=s.c.STORE_BASE_URL+"curator/"+e.GetClanAccountID()+"/ajaxgetcreatorhomeinfo",[4,i.a.get(r,{params:n,cancelToken:t&&t.token})];case 1:return a=o.sent(),e.Initialize(a.data),[2,e]}}))}))},e.prototype.LoadCreatorHomeListForAppIncludeHiddden=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,a;return Object(o.e)(this,(function(o){switch(o.label){case 0:return this.LazyInit(),this.m_mapAppToCreatorIDList.has(e)?[3,2]:(n={appid:e},r=s.c.STORE_BASE_URL+"events/ajaxgetcreatorhomeidforapp",[4,i.a.get(r,{params:n,cancelToken:t&&t.token,withCredentials:!0})]);case 1:a=o.sent(),this.m_mapAppToCreatorIDList.set(e,a.data.creator_list),o.label=2;case 2:return[2,this.m_mapAppToCreatorIDList.get(e)]}}))}))},e.prototype.GetCreatorHomeListForAppIncludeHidden=function(e){return this.m_mapAppToCreatorIDList.has(e)?this.m_mapAppToCreatorIDList.get(e):[]},Object(o.c)([a.A],e.prototype,"m_mapClanToCreatorHome",void 0),Object(o.c)([a.A],e.prototype,"m_mapAppToCreatorIDList",void 0),Object(o.c)([a.i],e.prototype,"LazyInit",null),e}());window.g_CreatorHomeStore=p},SOfK:function(e,t,n){e.exports={PreMessage:"messages_PreMessage_1jeo-",CodeMessage:"messages_CodeMessage_1Fe4I",QuoteMessage:"messages_QuoteMessage_33jrq"}},TA9H:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m}));var o=n("mrSG"),r=n("4HGb"),i=n("OJz+"),a=n("HxRt"),s=n("LAqV"),c=n("2vnA"),l=n("UqDm"),p=n("XaMz");function u(e,t){return e==t||e&&t&&e.friend==t.friend&&e.clan==t.clan&&e.chat==t.chat}var m=function(){function e(e){var t=this;this.m_rgFavorites=c.A.array(),this.m_IncomingFavoritesHandler=Object(i.d)(a.e.FavoritesChangedHandler,(function(e){return t.RecvFavoritesList(e.Body().favorites()),1})),this.m_FriendStore=e,this.m_ClanStore=e.ClanStore}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_ChatStore=s.f.ChatStore,this.m_CMInterface.AddOnLogonCallback((function(){var e=r.b.Init(a.b);a.f.GetFavorites(t.m_CMInterface.GetServiceTransport(),e).then((function(e){1==e.GetEResult()&&t.RecvFavoritesList(e.Body().favorites())}))}),47)},e.prototype.BIsFavorited=function(e){for(var t=0,n=this.m_rgFavorites;t<n.length;t++){if(u(n[t],e))return!0}return!1},Object.defineProperty(e.prototype,"favorites",{get:function(){return this.m_rgFavorites},enumerable:!1,configurable:!0}),e.prototype.AddToFavorites=function(e,t){var n=this.m_rgFavorites.findIndex((function(t){return u(t,e)}));return-1===n||void 0!==t&&n!==t?(-1!==n?l.f(this.m_rgFavorites,n,t>n?t-1:t):void 0!==t?this.m_rgFavorites.splice(t,0,e):this.m_rgFavorites.push(e),this.SaveFavorites()):Promise.resolve(!0)},e.prototype.RemoveFromFavorites=function(e){return l.d(this.m_rgFavorites,(function(t){return u(t,e)}))?this.SaveFavorites():Promise.resolve(!0)},e.prototype.OnFriendRemoved=function(e){var t=this.m_FriendStore.GetPlayer(e);this.RemoveFromFavorites({friend:t})},e.prototype.SaveFavorites=function(){for(var e=r.b.Init(a.d),t=0,n=this.m_rgFavorites;t<n.length;t++){var o=n[t],i=e.Body().add_favorites();o.friend?i.set_accountid(o.friend.accountid):o.clan?i.set_clanid(o.clan.clanid):o.chat?i.set_chat_group_id(o.chat.GetGroupID()):Object(p.a)(!1,"empty favorite struct")}return a.f.SetFavorites(this.m_CMInterface.GetServiceTransport(),e).then((function(e){return 1==e.GetEResult()}))},e.prototype.ReadFavorites=function(e){this.m_rgFavorites.clear();for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o.accountid()){var r=this.m_FriendStore.GetFriend(o.accountid());r&&this.m_rgFavorites.push({friend:r})}else if(o.clanid()){var i=this.m_ClanStore.GetClan(o.clanid());i&&this.m_rgFavorites.push({clan:i})}else if(o.chat_group_id()){var a=this.m_ChatStore.GetChatRoomGroup(o.chat_group_id());a&&this.m_rgFavorites.push({chat:a})}}},e.prototype.RecvFavoritesList=function(e){var t=this;Object(c.J)((function(){return t.m_FriendStore.friends_list_ready&&t.m_ChatStore.chat_group_list_ready}),this.ReadFavorites.bind(this,e))},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_friends_favorite_count(l.b(this.m_rgFavorites,(function(e){return!!e.friend}))),e.metrics().set_group_chat_favorite_count(l.b(this.m_rgFavorites,(function(e){return!!e.chat||!!e.clan})))},Object(o.c)([c.i],e.prototype,"AddToFavorites",null),Object(o.c)([c.i],e.prototype,"RemoveFromFavorites",null),Object(o.c)([c.i],e.prototype,"OnFriendRemoved",null),Object(o.c)([c.i],e.prototype,"ReadFavorites",null),e}()},TS4p:function(e,t,n){e.exports={ChatTabTransitionGroup:"chattabs_ChatTabTransitionGroup_2eqy8",ChatTab:"chattabs_ChatTab_1WfqA",Active:"chattabs_Active_3sMSI",ChatTabTransition_Enter:"chattabs_ChatTabTransition_Enter_3eAH3",ChatTabTransition_EnterActive:"chattabs_ChatTabTransition_EnterActive_5RU5n",ChatTabTransition_Exit:"chattabs_ChatTabTransition_Exit_1y02w",TabBounce:"chattabs_TabBounce_16Mga",ChatTabTransition_ExitActive:"chattabs_ChatTabTransition_ExitActive_3f6Ai",VoiceActive:"chattabs_VoiceActive_3FFuI",MicStatus:"chattabs_MicStatus_1cEht",MicMuted:"chattabs_MicMuted_3sBKY",ChatTabRow:"chattabs_ChatTabRow_OdWLp",CloseButton:"chattabs_CloseButton_SzByZ",ChatTabContent_Friend:"chattabs_ChatTabContent_Friend_3m7Ps",ChatTabContent_ChatRoom:"chattabs_ChatTabContent_ChatRoom_1AI14",ChatTabContent_ChatRoomName:"chattabs_ChatTabContent_ChatRoomName_2avXT",UnreadGlow:"chattabs_UnreadGlow_30PFd",UnreadCircle:"chattabs_UnreadCircle_2goOD"}},TY1L:function(e,t,n){e.exports={LoginDialog:"login_LoginDialog_1AiEN",AccountPasswordPanel:"login_AccountPasswordPanel_qEDoX",LoginPanelBackground:"login_LoginPanelBackground_1OIQT",LoginPanelContent:"login_LoginPanelContent_2f9PO",ErrorMessage:"login_ErrorMessage_1iM0s",AccountPasswordForm:"login_AccountPasswordForm_1Qq0T",AuthenticationPanel:"login_AuthenticationPanel_1-8sv",AccountNameLabel:"login_AccountNameLabel_2bgVa",MedName:"login_MedName_13-91",LargeName:"login_LargeName_tfWYS",PasswordDots:"login_PasswordDots_at615",MedPass:"login_MedPass_3k9SP",LargePass:"login_LargePass_1xBFu",AccountFieldHeader:"login_AccountFieldHeader_iW_Im",PasswordFieldHeader:"login_PasswordFieldHeader_2XPUQ",NeedHelpLink:"login_NeedHelpLink_TXivN",NeedHelpHighlight:"login_NeedHelpHighlight_w-u5P",CreateAccountLink:"login_CreateAccountLink_210gd",LoginCreateSeperator:"login_LoginCreateSeperator_1jJwP",RefreshCaptchaText:"login_RefreshCaptchaText_uH2zO",SigningInAccountName:"login_SigningInAccountName_3PzFM",SigninTitle:"login_SigninTitle_wNkza",RememberMeCheck:"login_RememberMeCheck_1GhRU",SteamUpsellContainer:"login_SteamUpsellContainer_ACnPK",SteamUpsell:"login_SteamUpsell_3bePc",CaptchaContainer:"login_CaptchaContainer_1W85e",CaptchaBlock:"login_CaptchaBlock_2NMvn",CaptchaImageAndInput:"login_CaptchaImageAndInput_3u7iL",CaptchaImageBox:"login_CaptchaImageBox_we1G3",CaptchaImage:"login_CaptchaImage_16f5d",CaptchaInput:"login_CaptchaInput_1y9KG",AuthenticatorInputcontainer:"login_AuthenticatorInputcontainer_1emeo",Highlight:"login_Highlight_2FzBS",LoginComplete:"login_LoginComplete_CDuZt"}},UDpV:function(e,t,n){e.exports={chatEntryControls:"chatentry_chatEntryControls_2O_X7",chatTextarea:"chatentry_chatTextarea_3e__5",chatEntryActionsGroup:"chatentry_chatEntryActionsGroup_15mWd",chatEntryActionsContainer:"chatentry_chatEntryActionsContainer_WZNUD",minHeightZero:"chatentry_minHeightZero_NcZQ_",chatSubmitButton:"chatentry_chatSubmitButton_3VRfL",EmbedButton:"chatentry_EmbedButton_1vvRh",EmoticonPickerButton:"chatentry_EmoticonPickerButton_3fgX0",disabled:"chatentry_disabled_2p2vW",Inactive:"chatentry_Inactive_gFWg4",AudioLines:"chatentry_AudioLines_3fUht",Active:"chatentry_Active_224Fj"}},UMCL:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("q1tI"),i=n("/IDK"),a=function(e){function t(t){return e.call(this,t)||this}return Object(o.d)(t,e),t.prototype.render=function(){if(null==this.props.text)return r.createElement(r.Fragment,null,this.props.children);var e;if(e=this.props.text instanceof Array?this.props.text.map((function(e){return e?e.toString():""})).filter((function(e){return e.length>0})).join("\n"):this.props.text.toString(),1==r.Children.count(this.props.children)){var t=r.Children.only(this.props.children);return r.cloneElement(t,{"data-copystyle":this.props.style,"data-copytext":e})}return console.log("Error: CopyableText must be the parent of exactly one child:\n\tcopystyle="+this.props.style+" copytext="+e),r.createElement(r.Fragment,null,this.props.children)},t.defaultProps={text:""},t}(r.Component);function s(e){for(var t=e.cloneContents(),n="",o="",r=!1,a=(t.querySelector("[data-activechat=true]")||t).querySelectorAll("[data-copytext]"),s=Array.from(a).map((function(e){return e.getAttribute("data-copystyle")||"msg"})),c=0;c<a.length;++c){var l=a[c],p=s[c];if(!(c+1<a.length&&i.d(l,a[c+1]))){var u=l.tagName.toLowerCase(),m=p.includes("block"),d=p.includes("timestamp"),h=p.includes("server"),f=p.includes("invite"),_=p.includes("emote"),g=p.includes("no-prefix"),b=p.includes("no-suffix"),v=p.includes("allow-embedded-newlines"),y=p.includes("block-continue"),S=p.includes("merge-adjacent"),C=p.includes("force-display"),O=p.includes("prepend-innertext"),I=p.includes("append-innertext"),E=p.includes("prepend-newline"),w=p.includes("append-newline"),A=p.includes("speaker");if(!C){var D=null!=u.match(/img|iframe/),T=null!=l.querySelector("img,iframe");if(!l.innerText&&!D&&!T)continue}S&&(c>0&&s[c-1].includes("merge-adjacent")&&(g=!0),c+1<s.length&&s[c+1].includes("merge-adjacent")&&(b=!0)),A&&(r=!0);var M="";d||A||h||f||_?(0!=n.length&&(M+="\n"),(h||f)&&(M+="\t\t")):(r&&(M+="\t"),o.includes("msg")&&m&&(E=!0),o.includes("block")&&!y&&(E=!0));var j=l.getAttribute("data-copytext");0==j.length?j=l.innerText:O&&l.innerText.length>0?j=l.innerText+(p.includes("-with-newline")?"\n":" ")+j:I&&l.innerText.length>0&&(j+=(p.includes("-with-newline")?"\n":" ")+l.innerText),0!=j.length&&(E&&(n+="\n"),g||(n+=M),n+=v?j:j.replace(/\n/g,"\n"+M),b||(n+="\n"),w&&(n+="\n")),o=p}}if(0!=n.length)return n}function c(e){var t=document.createRange();t.selectNode(e),function(e){var t=s(e);i.j(t)}(t)}},UqDm:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return m}));n("XaMz");function o(e){for(var t=e.length;0!==t;){var n=Math.floor(Math.random()*t),o=e[t-=1];e[t]=e[n],e[n]=o}}function r(e,t,n){t<0||n<0||(n>=e.length&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]))}function i(e,t){return a(e,(function(e){return t==e}))}function a(e,t){var n=e.findIndex(t);return n>=0&&(e.splice(n,1),!0)}function s(e,t){return e.reduce((function(e,n,o,r){return e+(t(n,o,r)?1:0)}),0)}function c(e,t){return e.filter((function(e){return t!==e}))}function l(e,t,n){for(var o=0,r=e.length-1;o<=r;){var i=Math.floor((o+r)/2),a=n(e[i],t);if(a<0)o=i+1;else if(a>0)r=i-1;else{if(r==i)return i;if(i==o)return r>i&&n(t,e[i+1])<0?i:i+1;o=i}}return r}function p(e,t,n){var o=l(e,t,n);e.splice(o+1,0,t)}function u(e,t,n){return e||console.error("array should be defined for us to fill in the missing indexes"),e.length<t?e.concat(Array(t-e.length).fill(n)):e}function m(e,t){if(t)for(var n=e.length-1;n>=0;--n){var o=e[n];if(t(o,n,e))return o}}},V45K:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("mrSG"),r=n("q1tI"),i=n("uuth"),a=function(e){return r.createElement(i.a,Object(o.a)({},e,{onPositionChange:function(t){return void 0===t.previousPosition&&t.currentPosition===i.a.above&&e.onLeave?e.onLeave(t):e.onPositionChange&&e.onPositionChange(t)}}))}},V7Fl:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return w})),n.d(t,"a",(function(){return A})),n.d(t,"c",(function(){return T}));var o=n("mrSG"),r=n("UqDm"),i=n("2lpH"),a=n.n(i),s=n("/SYB"),c=n("5Nu3"),l=n("rsEv"),p=n("s+DT"),u=n("3zHc"),m=n("2vnA"),d=n("oh5H"),h=n("4HGb"),f=n("RBVV"),_=n("+M9t"),g=n("LAqV"),b=n("Kqva"),v=n("tkkQ"),y=n("XaMz"),S=function(){function e(t){this.m_mapMembers=m.A.map(),this.m_mapPersonaStates=m.A.map(),this.m_mapPersonaSubscriptions=new Map,this.m_setQueuedPersonaSubscriptions=new Set,this.m_setQueuedPersonaUnsubscriptions=new Set,this.m_ulChatRoomGroupID=t,this.m_nClientChangenumber=0,this.m_ulViewID=""+e.sm_ulNextViewID++}return e.prototype.GetViewID=function(){return this.m_ulViewID},e.prototype.OnServerUpdate=function(e){for(var t=e.view().client_changenumber()!=this.m_nClientChangenumber,n=0,o=e.members();n<o.length;n++){var r=o[n];t||this.m_mapMembers.set(r.rank(),r.accountid()),r.persona()&&this.UpdatePersonaState(r.accountid(),e.status_flags(),r.persona())}var i=e.member_summary(!1);i&&(this.m_cMemberSummaryTotal=i.offline()+i.online()+i.ingame(),this.m_cMemberSummaryOnline=i.online()+i.ingame(),this.m_cMemberSummaryInGame=i.ingame());for(var a=0,s=e.subscribed_personas();a<s.length;a++){var c=s[a],l=new p.a(c.friendid()).GetAccountID();this.UpdatePersonaState(l,e.status_flags(),c)}},e.prototype.GetAccountIDAt=function(e){return this.m_mapMembers.has(e)?this.m_mapMembers.get(e):null},e.prototype.GetMember=function(e){return this.m_mapPersonaStates.has(e)?this.m_mapPersonaStates.get(e):g.f.FriendStore.GetPlayer(e)},e.prototype.GetMemberCountTotal=function(){return this.m_cMemberSummaryTotal},e.prototype.GetMemberCountOnline=function(){return this.m_cMemberSummaryOnline},e.prototype.GetMemberCountInGame=function(){return this.m_cMemberSummaryInGame},e.prototype.UpdatePersonaState=function(e,t,n){if(n&&n.player_name())if(this.m_mapPersonaStates.has(e))this.m_mapPersonaStates.get(e).mutable_persona.UpdateFromMessage(t,n);else{var o=g.f.FriendStore.GetPlayer(e);o.mutable_persona.UpdateFromMessage(t,n),this.m_mapPersonaStates.set(e,o)}},e.prototype.SetViewExtents=function(e,t){if(e!=this.m_iStartIndex||t!=this.m_iEndIndex){this.m_iStartIndex=e,this.m_iEndIndex=t,this.m_nClientChangenumber++;var n=h.b.Init(f.R);n.Body().set_chat_group_id(this.m_ulChatRoomGroupID),n.Body().set_view_id(this.m_ulViewID),n.Body().set_client_changenumber(this.m_nClientChangenumber),n.Body().set_start(this.m_iStartIndex),n.Body().set_end(this.m_iEndIndex),f.X.UpdateMemberListView(g.f.CMInterface.GetServiceTransport(),n)}},e.prototype.SubscribeToPersona=function(e){var t=this.m_mapPersonaSubscriptions.get(e);t?this.m_mapPersonaSubscriptions.set(e,t+1):(this.m_mapPersonaSubscriptions.set(e,1),this.m_setQueuedPersonaSubscriptions.add(e),this.ScheduleSubscriptionUpdate())},e.prototype.UnsubscribeFromPersona=function(e){var t=this.m_mapPersonaSubscriptions.get(e);t?t>1?this.m_mapPersonaSubscriptions.set(e,t-1):(this.m_mapPersonaSubscriptions.delete(e),this.m_setQueuedPersonaUnsubscriptions.add(e),this.ScheduleSubscriptionUpdate()):console.warn("Attempting to unsubscribe from a persona that we are not subscribed to. Chat: "+this.m_ulChatRoomGroupID+", Account: "+e)},e.prototype.ScheduleSubscriptionUpdate=function(){var e=this;this.m_nPersonaSubscriptionTimer||(this.m_nPersonaSubscriptionTimer=window.setTimeout((function(){e.m_nClientChangenumber++;var t=h.b.Init(f.R);t.Body().set_chat_group_id(e.m_ulChatRoomGroupID),t.Body().set_view_id(e.m_ulViewID),t.Body().set_client_changenumber(e.m_nClientChangenumber),t.Body().set_start(e.m_iStartIndex),t.Body().set_end(e.m_iEndIndex),e.m_setQueuedPersonaSubscriptions.size&&(t.Body().set_persona_subscribe_accountids(Array.from(e.m_setQueuedPersonaSubscriptions)),e.m_setQueuedPersonaSubscriptions.clear()),e.m_setQueuedPersonaUnsubscriptions.size&&(t.Body().set_persona_unsubscribe_accountids(Array.from(e.m_setQueuedPersonaUnsubscriptions)),e.m_setQueuedPersonaUnsubscriptions.clear()),f.X.UpdateMemberListView(g.f.CMInterface.GetServiceTransport(),t),e.m_nPersonaSubscriptionTimer=void 0}),50))},e.prototype.UnregisterFromServer=function(){var e=h.b.Init(f.R);e.Body().set_chat_group_id(this.m_ulChatRoomGroupID),e.Body().set_view_id(this.m_ulViewID),e.Body().set_delete_view(!0),f.X.UpdateMemberListView(g.f.CMInterface.GetServiceTransport(),e)},e.prototype.PerformSearch=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var e,r,i=this;return Object(o.e)(this,(function(o){return e=n.toLocaleLowerCase(),(r=h.b.Init(f.J)).Body().set_chat_group_id(this.m_ulChatRoomGroupID),r.Body().set_search_id(t),r.Body().set_search_text(e),[2,f.X.SearchMembers(g.f.CMInterface.GetServiceTransport(),r).then((function(t){for(var n=[],o=0,r=t.Body().matching_members();o<r.length;o++){var a=r[o];a.persona()&&i.UpdatePersonaState(a.accountid(),t.Body().status_flags(),a.persona());var s=i.m_mapPersonaStates.get(a.accountid());if(Object(y.a)(s,"Missing persona in member matches"),s){var c=s.MatchSearchString(e);n.push({friend:s,iMatchOffset:c.iOffset,bNicknameMatch:2==c.match})}}return n}))]}))}))},e.prototype.GetAllKnownPersonas=function(){return Array.from(this.m_mapPersonaStates.values())},e.sm_ulNextViewID=1,Object(o.c)([m.A],e.prototype,"m_iStartIndex",void 0),Object(o.c)([m.A],e.prototype,"m_iEndIndex",void 0),Object(o.c)([m.A],e.prototype,"m_cMemberSummaryTotal",void 0),Object(o.c)([m.A],e.prototype,"m_cMemberSummaryOnline",void 0),Object(o.c)([m.A],e.prototype,"m_cMemberSummaryInGame",void 0),Object(o.c)([m.i],e.prototype,"OnServerUpdate",null),e}(),C=n("7sd/");var O=function(){function e(e,t){void 0===e&&(e=20),this.m_rank=e,this.m_role_ids=t}return e.prototype.BHasRole=function(e){return-1!=this.m_role_ids.findIndex((function(t){return t==e}))},Object(o.c)([m.A],e.prototype,"m_rank",void 0),Object(o.c)([m.A],e.prototype,"m_role_ids",void 0),e}(),I=function(){function e(e){this.m_roleActions=new f.a,this.m_roleActions=e}return e.prototype.BCanPerformAction=function(e){switch(e){case 1:return this.m_roleActions.can_create_rename_delete_channel();case 2:return this.m_roleActions.can_kick();case 3:return this.m_roleActions.can_ban();case 4:return this.m_roleActions.can_invite();case 5:return this.m_roleActions.can_change_tagline_avatar_name();case 6:return this.m_roleActions.can_chat();case 8:return this.m_roleActions.can_change_group_roles();case 9:return this.m_roleActions.can_change_user_roles();case 10:return this.m_roleActions.can_mention_all();case 11:return this.m_roleActions.can_set_watching_broadcast();default:return!1}},e.prototype.SetCanPerformAction=function(e,t){switch(e){case 1:this.m_roleActions.set_can_create_rename_delete_channel(t);break;case 2:this.m_roleActions.set_can_kick(t);break;case 3:this.m_roleActions.set_can_ban(t);break;case 4:this.m_roleActions.set_can_invite(t);break;case 5:this.m_roleActions.set_can_change_tagline_avatar_name(t);break;case 6:this.m_roleActions.set_can_chat(t);break;case 8:this.m_roleActions.set_can_change_group_roles(t);break;case 9:this.m_roleActions.set_can_change_user_roles(t);break;case 10:this.m_roleActions.set_can_mention_all(t);break;case 11:this.m_roleActions.set_can_set_watching_broadcast(t)}},e.prototype.toString=function(){var e=this.role_id;return this.m_roleActions.can_create_rename_delete_channel()&&(e+=" CreateRenameDeleteChannel"),this.m_roleActions.can_kick()&&(e+=" Kick"),this.m_roleActions.can_ban()&&(e+=" Ban"),this.m_roleActions.can_invite()&&(e+=" Invite"),this.m_roleActions.can_change_tagline_avatar_name()&&(e+=" ChangeTaglineAvatarName"),this.m_roleActions.can_chat()&&(e+=" Chat"),this.m_roleActions.can_change_group_roles()&&(e+=" ChangeGroupRoles"),this.m_roleActions.can_change_user_roles()&&(e+=" ChangeUserRoles"),e},Object.defineProperty(e.prototype,"role_id",{get:function(){return this.m_roleActions.role_id()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roleActions",{get:function(){return this.m_roleActions},enumerable:!1,configurable:!0}),e}(),E=function(){function e(e,t){var n=this;this.LOG=s.b.create((function(){return n.unique_id}),!1),this.m_chatStore=null,this.m_ulGroupID="",this.m_ulDefaultChatID="",this.m_rtTimeJoined=0,this.m_rtLastAck=0,this.m_bFullStateLoaded=!1,this.m_strName="",this.m_strTagLine="",this.m_strAvatarSHA="",this.m_strAvatarUGCURL="",this.m_strWatchingBroadcastChannelID="",this.m_mapRooms=m.A.map(null,{deep:!1}),this.m_rgPartyBeacons=[],this.m_eUserDesktopNotificationLevel=4,this.m_eUserMobileNotificationLevel=4,this.m_bUnreadIndicatorMuted=!1,this.m_roles=[],this.m_roleActions=[],this.m_groupMembers=new M,this.m_cMemberSummaryCount=0,this.m_bMemberListVirtualized=!1,this.m_chatStore=e,this.m_ulGroupID=t}return e.prototype.BIsValid=function(){return this.m_mapRooms.size>0},e.prototype.IsNamedGroupChat=function(){return!!this.m_strName||this.BIsClanChatRoom()},e.prototype.GetOwnerAccountID=function(){return this.m_unOwnerAccountID},e.prototype.BIsAccountIDOwner=function(e){return this.BIsClanChatRoom()?50==this.GetMemberRankIfPresent(e):this.GetOwnerAccountID()==e},e.prototype.SetOwnerAppID=function(e){e||(e=0),this.m_unAppID!=e&&(this.m_unAppID=e,this.m_unAppID&&(g.f.AppInfoStore.GetAppInfo(this.m_unAppID),g.f.AppInfoStore.GetRichPresenceLoc(this.m_unAppID)))},e.prototype.GetOwnerAppID=function(){return this.m_unAppID},Object.defineProperty(e.prototype,"name",{get:function(){if(this.m_strName||this.BIsClanChatRoom())return this.m_strName;var e=this.members_to_highlight_name,t=e.members;if(!t.length)return e.remaining_count?Object(d.d)("#ChatRoom_GenericWithOthers",e.remaining_count):Object(d.d)("#ChatRoom_GenericEmpty");switch(t.length){case 1:return e.remaining_count>0?Object(d.d)("#ChatRoom_OneFriendPlusMore",t[0].display_name,e.remaining_count):Object(d.d)("#ChatRoom_OneFriend",t[0].display_name);case 2:return e.remaining_count>0?Object(d.d)("#ChatRoom_TwoPlusMore",t[0].display_name,t[1].display_name,e.remaining_count):Object(d.d)("#ChatRoom_TwoFriends",t[0].display_name,t[1].display_name);case 3:return Object(d.d)("#ChatRoom_ThreeFriends",t[0].display_name,t[1].display_name,t[2].display_name);default:return Object(y.a)(!1,"unexpected number of friends: "+t.length),""}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagline",{get:function(){return this.m_strTagLine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarSHA",{get:function(){return this.m_strAvatarSHA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarUGCURL",{get:function(){return this.m_strAvatarUGCURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_steamid",{get:function(){return this.m_unWatchingBroadcastAccountID?p.a.InitFromAccountID(this.m_unWatchingBroadcastAccountID):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_channel_id",{get:function(){return this.m_strWatchingBroadcastChannelID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAvatarSHA",{get:function(){return this.m_strAvatarSHA.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasIcon",{get:function(){return this.hasAvatarSHA||0!=this.m_unAppID},enumerable:!1,configurable:!0}),e.prototype.GetAvatarOrAppIconURL=function(e){if(this.m_strAvatarUGCURL)return this.m_strAvatarUGCURL;if(!this.m_strAvatarSHA&&this.m_unAppID){var t=g.f.AppInfoStore.GetAppInfo(this.m_unAppID);if(t.is_valid&&t.icon_url)return t.icon_url}return function(e,t){return t=t<=32?32:t<=64?64:256,v.a.MEDIA_CDN_COMMUNITY_URL+"images/chaticons/"+e.substr(0,2)+"/"+e.substr(2,2)+"/"+e.substr(4,2)+"/"+e+"_"+t+".jpg"}(this.m_strAvatarSHA,e)},Object.defineProperty(e.prototype,"avatar_url_small",{get:function(){return this.GetAvatarOrAppIconURL(32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.GetAvatarOrAppIconURL(64)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.GetAvatarOrAppIconURL(256)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberCountTotal",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readyToRender",{get:function(){return this.m_bFullStateLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberCountOnline",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.member_counts.online:this.memberCountTotal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberCountInGame",{get:function(){return this.m_groupMembers.member_counts.ingame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"memberList",{get:function(){return this.m_groupMembers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"cg"+this.m_ulGroupID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeJoined",{get:function(){return this.m_rtTimeJoined},enumerable:!1,configurable:!0}),e.prototype.GetGroupID=function(){return this.m_ulGroupID},e.prototype.GetDefaultChatID=function(){return this.m_ulDefaultChatID},e.prototype.BIsClanChatRoom=function(){return!!this.m_unClanID},e.prototype.BIsVoiceChannel=function(e){var t=this.GetChatRoom(e);return null!=t&&(t.GetVoiceAllowed()&&t.GetRoomID()!=this.GetDefaultChatID())},e.prototype.BIsTempVoiceChannel=function(e){var t=this.GetChatRoom(e);return t&&t.IsTempVoiceRoom()},e.prototype.GetClanID=function(){return this.m_unClanID},Object.defineProperty(e.prototype,"chatRoomList",{get:function(){var e=Array.from(this.m_mapRooms.values());return e.sort((function(e,t){if(e.GetSortOrder()<t.GetSortOrder())return-1;if(e.GetSortOrder()>t.GetSortOrder())return 1;var n=a.a.fromString(e.GetRoomID()),o=a.a.fromString(t.GetRoomID());return n.lessThan(o)?-1:n.greaterThan(o)?1:0})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textRoomList",{get:function(){var e=this;return this.chatRoomList.filter((function(t){return!t.GetVoiceAllowed()||t.GetRoomID()==e.GetDefaultChatID()}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voiceRoomList",{get:function(){return this.chatRoomList.filter((function(e){return e.GetVoiceAllowed()}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasVoiceRoom",{get:function(){for(var e,t=this.m_mapRooms.values();(e=t.next())&&!e.done;)if(e.value.GetVoiceAllowed())return!0;return!1},enumerable:!1,configurable:!0}),e.prototype.GetDesktopNotificationLevel=function(e){return void 0===e&&(e=!1),0==this.m_eUserDesktopNotificationLevel?this.BIsClanChatRoom()?3:4:this.m_eUserDesktopNotificationLevel},e.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eUserMobileNotificationLevel?3:this.m_eUserMobileNotificationLevel},e.prototype.BIsUnreadIndicatorMuted=function(){return this.m_bUnreadIndicatorMuted},Object.defineProperty(e.prototype,"hasUnreadChatMessage",{get:function(){for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){var n=t[e];if((this.m_bUnreadIndicatorMuted?n.has_unread_messages:n.has_any_unread_messages)&&(n.BIsDefaultRoom()||n.time_last_ack>=this.m_rtLastAck||n.time_last_mention>this.m_rtLastAck))return!0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HasUnreadMention",{get:function(){for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){if(t[e].has_unread_mention)return!0}return!1},enumerable:!1,configurable:!0}),e.prototype.GetChatRoomsWithUnreadPriorityMessages=function(e){this.m_mapRooms.forEach((function(t){t.has_unread_priority_messages&&e.push(t)}))},Object.defineProperty(e.prototype,"time_last_activity",{get:function(){var e=this,t=0,n=0;this.m_mapRooms.forEach((function(o){if(o.BShouldTrackUnreadMessages()){var r=o.time_last_activity;r>e.m_rtLastAck?n=0==n?r:Math.min(r,n):t=Math.max(r,t)}}));var o=n;return o||(o=t),this.m_rtTimeJoined>o&&(o=this.m_rtTimeJoined),o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_with_last_message",{get:function(){var e,t=0;return this.m_mapRooms.forEach((function(n){t<n.time_last_message&&(e=n,t=n.time_last_message)})),e},enumerable:!1,configurable:!0}),e.prototype.BHasEverBeenAcked=function(){if(this.m_rtLastAck)return!0;for(var e=0,t=Array.from(this.m_mapRooms.values());e<t.length;e++){if(t[e].time_last_ack)return!0}return!1},e.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastAck<e&&(this.m_rtLastAck=e)},e.prototype.IsInRoom=function(e){return Object(y.a)(this.m_bFullStateLoaded,"Group state not fully loaded"),this.m_groupMembers.HasMember(e)},e.prototype.BRoomContainsJustTheseFriendsAndSelf=function(e){if(!this.BIsCurrentUserAMember())return!1;if(this.memberCountTotal!=e.length+1)return!1;for(var t=!0,n=0,o=e;n<o.length;n++){var r=o[n];if(this.m_rgGroupMembersSummary.indexOf(r)<0){t=!1;break}}return t},e.prototype.GetMyRank=function(){return this.GetMemberRank(this.m_chatStore.CMInterface.steamid.GetAccountID())},e.prototype.ChangeMemberRank=function(e,t){Object(y.a)(this.m_groupMembers.HasMember(e),"ChangeMemberRank: missing member"),this.m_groupMembers.GetExtra(e).m_rank=t},e.prototype.GetMemberRank=function(e){Object(y.a)(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var t=this.m_groupMembers.GetExtra(e);return t&&0!=t.m_rank?t.m_rank:this.BIsClanChatRoom()?0:20},e.prototype.GetMemberRankIfPresent=function(e){var t=this.m_groupMembers.GetExtra(e);return t?t.m_rank:0},e.prototype.GetMemberPartyBeacon=function(e){return this.m_rgPartyBeacons.find((function(t){return t.account_id==e}))},e.prototype.ChangeMemberRoles=function(e,t){Object(y.a)(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var n=this.m_groupMembers.GetExtra(e);n&&(n.m_role_ids=t)},e.prototype.GetMemberRankString=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return Object(d.d)("#Chat_rank_owner");case 40:return Object(d.d)("#Chat_rank_officer");case 30:return Object(d.d)("#Chat_rank_moderator");case 20:return Object(d.d)("#Chat_rank_member");case 15:return Object(d.d)("#Chat_rank_guest");case 10:return Object(d.d)("#Chat_rank_viewer");case 0:return"";default:return Object(d.d)("#Chat_rank_unknown")}},e.prototype.GetMemberRankStringUnlocalized=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return"Owner";case 40:return"Officer";case 30:return"Moderator";case 20:return"Member";case 15:return"Guest";case 10:return"Viewer";case 0:return"DefaultRank";default:return Object(d.d)("UnknownRank")}},e.prototype.GetMember=function(e){if(this.IsInRoom(e))return this.m_chatStore.FriendStore.GetPlayer(e);this.m_bFullStateLoaded},e.prototype.SetInitialGroupState=function(e){Object(y.a)(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateGroupStateFromSummary(e),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.UpdateGroupStateFromSummary=function(e){this.m_strTagLine=e.chat_group_tagline(),null!=e.chat_group_avatar_sha()&&(this.m_strAvatarSHA=Object(b.a)(e.chat_group_avatar_sha())),this.m_strAvatarUGCURL=e.avatar_ugc_url()||"",this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_strWatchingBroadcastChannelID=e.watching_broadcast_channel_id(),this.m_cMemberSummaryCount=e.active_member_count(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_rgGroupMembersSummary=e.top_members(),this.m_defaultRoleID=e.default_role_id(),this.m_roleActions=e.role_actions().map((function(e){return new I(e)})),this.m_groupMembers.AddMember(g.f.CMInterface.steamid.GetAccountID(),new O(e.rank(),e.role_ids())),this.SetOwnerAppID(e.appid()),this.SetNameCheckingForAppLocalization(e.chat_group_name()),this.m_rgPartyBeacons=e.party_beacons().map((function(e){return{account_id:new p.a(e.steamid_owner()).GetAccountID(),app_id:e.app_id(),beacon_id:e.beacon_id(),game_metadata:e.game_metadata()}})),g.f.GroupMemberStore.OnPartyBeaconsUpdated(this.m_ulGroupID,this.m_rgPartyBeacons)},e.prototype.SetNameCheckingForAppLocalization=function(e){var t=this,n=null;!this.m_unOwnerAccountID&&this.GetOwnerAppID()&&("#"==e[0]?n={tok:e}:"{"==e[0]&&(n=JSON.parse(e))),n&&n.tok?(this.m_strName="...",g.f.AppInfoStore.GetRichPresenceLocAsync(this.GetOwnerAppID()).then((function(e){var o=new Map;if(n.params)for(var r in n.params)o.set(r.toString(),n.params[r].toString());t.m_strName=e.Localize(n.tok,o)}))):this.m_strName=e},e.prototype.UpdateGroupState=function(e){Object(y.a)(e.header_state().chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateChatRoomHeaderState(e.header_state()),this.m_groupMembers.Clear();for(var t=[],n=0,o=e.members();n<o.length;n++){var r=o[n],i=r.accountid();this.m_groupMembers.AddMember(i,new O(r.rank(),r.role_ids())),t.length<10&&t.push(i)}(!this.m_rgGroupMembersSummary||this.m_rgGroupMembersSummary.length<t.length)&&(this.m_rgGroupMembersSummary=t),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms()),this.m_bFullStateLoaded=!0},e.prototype.SetMemberListVirtualized=function(e){this.m_bMemberListVirtualized=e,this.m_groupMembers.SetMemberDataVirtualized(e)},e.prototype.BIsMemberListVirtualized=function(){return this.m_bMemberListVirtualized},e.prototype.UnloadActiveGroupState=function(){this.UnloadGroupState(),this.m_mapRooms.forEach((function(e){e.UnloadActiveChatState()}))},e.prototype.UnloadGroupState=function(){this.m_bFullStateLoaded=!1,this.m_bMemberListVirtualized=!1,this.m_groupMembers.Clear()},e.prototype.UnloadAndResetGroupState=function(){this.UnloadGroupState(),this.UpdateUserState(new f.V),this.m_mapRooms.forEach((function(e){e.UnloadChatState()}))},e.prototype.OnUserStateChange=function(e,t){var n=e.accountid();1==t?(this.LOG("new member "+n+" roles ["+e.role_ids().toString()+"]"),this.m_groupMembers.AddMember(n,new O(e.rank(),e.role_ids())),g.f.GroupMemberStore.OnMemberAdded(this.m_ulGroupID,n),this.m_rgGroupMembersSummary.length<10&&-1==this.m_rgGroupMembersSummary.indexOf(n)&&(this.m_rgGroupMembersSummary=Object(o.g)(this.m_rgGroupMembersSummary,[n]))):2==t||3==t||10==t?(this.m_groupMembers.RemoveMember(n),g.f.GroupMemberStore.OnMemberRemoved(this.m_ulGroupID,n),-1!==this.m_rgGroupMembersSummary.indexOf(n)&&(this.m_rgGroupMembersSummary=r.a(this.m_rgGroupMembersSummary,n))):7==t?this.ChangeMemberRank(n,e.rank()):12==t&&this.ChangeMemberRoles(n,e.role_ids())},e.prototype.UpdateChatRoomState=function(e,t){var n=this;this.m_ulDefaultChatID=e;var o=new Set;this.m_mapRooms.forEach((function(e,t){return o.add(t)}));for(var r=0,i=t;r<i.length;r++){var a=i[r],s=a.chat_id();o.delete(s);var c=this.m_mapRooms.get(s);c||(c=new l.a(this.m_chatStore,this,s,s==e),this.m_mapRooms.set(s,c)),c.UpdateChatState(a)}o.forEach((function(e){return n.m_mapRooms.delete(e)}))},e.prototype.UpdateUserState=function(e){for(var t=0,n=e.user_chat_room_state();t<n.length;t++){var o=n[t],r=o.chat_id(),i=this.m_mapRooms.get(r);i&&i.UpdateUserState(o)}this.m_rtTimeJoined=e.time_joined(),this.m_rtLastAck=e.time_last_group_ack(),this.m_eUserDesktopNotificationLevel=e.desktop_notification_level(),this.m_eUserMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted()},e.prototype.UpdateChatRoomHeaderState=function(e){Object(y.a)(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.m_strTagLine=e.tagline(),null!=e.avatar_sha()&&(this.m_strAvatarSHA=Object(b.a)(e.avatar_sha())),this.m_strAvatarUGCURL=e.avatar_ugc_url()||"",this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_defaultRoleID=e.default_role_id(),this.m_roles=e.roles().map((function(e){return{role_id:e.role_id(),name:e.name(),ordinal:e.ordinal()}}));for(var t=0,n=this.m_roles;t<n.length;t++){var o=n[t];this.LOG("role "+o.role_id+" "+o.name)}this.m_roleActions=e.role_actions().map((function(e){return new I(e)}));for(var r=0,i=this.m_roleActions;r<i.length;r++){var a=i[r];this.LOG("role/action "+a.toString())}this.SetOwnerAppID(e.appid()),this.SetNameCheckingForAppLocalization(e.chat_name()),this.m_rgPartyBeacons=e.party_beacons().map((function(e){return{account_id:new p.a(e.steamid_owner()).GetAccountID(),app_id:e.app_id(),beacon_id:e.beacon_id(),game_metadata:e.game_metadata()}})),g.f.GroupMemberStore.OnPartyBeaconsUpdated(this.m_ulGroupID,this.m_rgPartyBeacons)},e.prototype.BIsCurrentUserAMember=function(){return!!this.m_rtTimeJoined},e.prototype.DefaultRoleID=function(){return this.m_defaultRoleID},e.prototype.GetRoleActions=function(e){for(var t=0,n=this.m_roleActions;t<n.length;t++){var o=n[t];if(o.role_id==e)return o}},e.prototype.GetRoles=function(){return this.m_roles},e.prototype.GetRoleOrdinal=function(e){for(var t=0,n=this.m_roles;t<n.length;t++){var o=n[t];if(o.role_id==e)return o.ordinal}},e.prototype.BIsUserGroupMember=function(e){for(var t=0,n=this.m_rgGroupMembersSummary;t<n.length;t++){if(n[t]==e.accountid)return!0}return!1},e.prototype.GetMemberRoleIDs=function(e){return null==this.m_groupMembers.GetExtra(e)?[]:this.m_groupMembers.GetExtra(e).m_role_ids},e.prototype.ToggleMemberRoleState=function(e,t){var n=this.BMemberHasRole(e,t);return this.SetMemberRoleState(e,t,!n)},e.prototype.SetMemberRoleState=function(e,t,n){if(n==this.BMemberHasRole(e,t))return Promise.resolve(!0);if(!this.BCanIAssignRole(t))return Promise.resolve(!1);var o,r=p.a.InitFromAccountID(e);return n?((o=h.b.Init(f.d)).Body().set_chat_group_id(this.GetGroupID()),o.Body().set_steamid(r.ConvertTo64BitString()),o.Body().set_role_id(t),f.X.AddRoleToUser(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then((function(e){return e.GetEResult(),1==e.GetEResult()}))):((o=h.b.Init(f.l)).Body().set_chat_group_id(this.GetGroupID()),o.Body().set_steamid(r.ConvertTo64BitString()),o.Body().set_role_id(t),f.X.DeleteRoleFromUser(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then((function(e){return e.GetEResult(),1==e.GetEResult()})))},e.prototype.BDoesRoleAllowAction=function(e,t){for(var n=0,o=this.m_roleActions;n<o.length;n++){var r=o[n];if(r.role_id==e&&r.BCanPerformAction(t))return!0}return!1},e.prototype.BCanIPerformActionOnUser=function(e,t,n){return void 0===n&&(n=!1),!(!n&&!this.BHasMember(e))&&(!this.BIsAccountIDOwner(e)&&this.BCanIPerformAction(t))},e.prototype.BHasMember=function(e){return void 0!==this.m_groupMembers.GetExtra(e)},e.prototype.BMemberHasRole=function(e,t){var n=this.m_groupMembers.GetExtra(e);return!!n&&n.BHasRole(t)},e.prototype.BCanIPerformAction=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;var t=this.m_chatStore.CMInterface.steamid.GetAccountID(),n=this.m_groupMembers.GetExtra(t);if(n)for(var o=0,r=n.m_role_ids;o<r.length;o++){var i=r[o];if(this.BDoesRoleAllowAction(i,e))return!0}return!1},e.prototype.BCanKickMember=function(e){return this.BCanIPerformActionOnUser(e,2)},e.prototype.BCanBanMember=function(e){return this.BCanIPerformActionOnUser(e,3)},e.prototype.BCanDeleteMemberMessages=function(e){if(g.f.FriendStore.self.accountid==e&&this.BIsAccountIDOwner(e))return!0;return this.BCanIPerformActionOnUser(e,2,!0)||this.BCanIPerformActionOnUser(e,3,!0)},e.prototype.BCanICreateRoles=function(){return this.BCanIPerformAction(8)},e.prototype.BCanIModifyRole=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(8))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(null==t)return!1;var n=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),8),o=this.GetRoleOrdinal(n);return null!=o&&o<t},e.prototype.BCanIAssignRoles=function(){return this.BCanIPerformAction(9)},e.prototype.BCanIAssignRole=function(e){if(this.BIsClanChatRoom())return!1;if(e==this.DefaultRoleID())return!1;if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(9))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(null==t)return!1;var n=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),9),o=this.GetRoleOrdinal(n);return null!=o&&o<t},e.prototype.BCanIMentionAll=function(){return this.BCanIPerformAction(10)},e.prototype.BCanIAssociateBroadcast=function(){return this.BCanIPerformAction(11)},e.prototype.GetHighestRankRoleIDForPermission=function(e,t){var n=void 0,o=Number.MAX_VALUE,r=this.m_groupMembers.GetExtra(e);if(r){for(var i=0,a=r.m_role_ids;i<a.length;i++){var s=a[i];if(this.BDoesRoleAllowAction(s,t)){var c=this.GetRoleOrdinal(s);c<o&&(n=s,o=c)}}return n}},e.prototype.GetDefaultChatRoom=function(){return this.m_mapRooms.get(this.m_ulDefaultChatID)},e.prototype.GetChatRoom=function(e){return this.m_mapRooms.get(e)},e.prototype.OnConnectionRestored=function(e){e&&this.UnloadGroupState(),this.m_mapRooms.forEach((function(e){return e.OnConnectionRestored()}))},e.prototype.OnRoomStateChange=function(e){this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.OnActivate=function(){if(!this.m_rtLastAck||this.hasUnreadChatMessage){var e=0;this.m_mapRooms.forEach((function(t){t.time_last_message&&(e=Math.max(e,t.time_last_message))})),this.m_rtLastAck=e||g.f.GetServerRTime32();var t=h.b.Init(f.c);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_timestamp(this.m_rtLastAck),f.X.AckChatMessage(g.f.CMInterface.GetServiceTransport(),t)}},e.prototype.InviteFriend=function(e,t){var n=p.a.InitFromAccountID(e),o=h.b.Init(f.u);o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n.ConvertTo64BitString()),t&&o.Body().set_chat_id(t.GetRoomID()),f.X.InviteFriendToChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){e.GetEResult()}))},e.prototype.SaveChatRoomGroup=function(e){var t=h.b.Init(f.I);return t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_name(e),f.X.SaveChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),t).then((function(e){var t=e.GetEResult();if(1!=t)throw t}))},e.prototype.RenameChatRoomGroup=function(e){var t=this;if(!e)return Promise.resolve(2);var n=this.m_strName;this.m_strName=e;var o=h.b.Init(f.B);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_name(e),f.X.RenameChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){return 1!=e.GetEResult()&&(t.m_strName=n),e.GetEResult()}))},e.prototype.SetChatRoomGroupTagline=function(e){var t=this,n=this.m_strTagLine;if(e.length>255&&(e=e.substring(0,255)),e==this.m_strTagLine)return Promise.resolve();this.m_strTagLine=e;var o=h.b.Init(f.M);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_tagline(e),f.X.SetChatRoomGroupTagline(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){1!=e.GetEResult()&&(t.m_strTagLine=n)}))},e.prototype.SetChatRoomGroupWatchingBroadcast=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.e)(this,(function(o){switch(o.label){case 0:return e!=this.m_unWatchingBroadcastAccountID||t?((n=h.b.Init(f.N)).Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_watching_broadcast_accountid(e),t&&n.Body().set_watching_broadcast_channel_id(t),[4,f.X.SetChatRoomGroupWatchingBroadcast(this.m_chatStore.CMInterface.GetServiceTransport(),n)]):[2,Promise.resolve()];case 1:if(r=o.sent(),1!==(i=r.GetEResult()))throw i;return this.m_unWatchingBroadcastAccountID=e,this.m_strWatchingBroadcastChannelID=t,[2]}}))}))},e.prototype.SetChatRoomGroupAvatar=function(e){var t=this;if(e==this.m_strAvatarSHA)return Promise.resolve();var n=h.b.Init(f.L);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_avatar_sha(Object(b.c)(e)),f.X.SetChatRoomGroupAvatar(this.m_chatStore.CMInterface.GetServiceTransport(),n).then((function(n){var o=n.GetEResult();if(1!=o)throw o;t.m_strAvatarSHA=e}))},e.prototype.BCanInvite=function(){return this.BCanIPerformAction(4)},e.prototype.BCanBan=function(){return this.BCanIPerformAction(3)},e.prototype.BCanKick=function(){return this.BCanIPerformAction(2)},e.prototype.BCanAdminChannel=function(){return this.BCanIPerformAction(1)},e.prototype.BCanAdminGroup=function(){return this.BCanIPerformAction(5)},e.prototype.BCanChat=function(){return this.BCanIPerformAction(6)},e.prototype.BCanEditRoles=function(){return!this.BIsClanChatRoom()&&this.BCanIPerformAction(9)},Object.defineProperty(e.prototype,"members_to_highlight_name",{get:function(){return this.InternalGetMembersToHighlight(3,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"members_to_highlight",{get:function(){return this.InternalGetMembersToHighlight(4,!1)},enumerable:!1,configurable:!0}),e.prototype.InternalGetMembersToHighlight=function(e,t){var n=!t,o=!!this.m_rtTimeJoined,r=this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount;var i=r>e?e-1:e,a=g.f.FriendStore,s=a.self,c=[],l=a.GetPlayer(this.GetOwnerAccountID());if(l&&l.accountid!=s.accountid&&c.push(l),this.m_rgGroupMembersSummary){for(var p=0,u=this.m_rgGroupMembersSummary;p<u.length;p++){if((f=u[p])!=s.accountid&&!this.BIsAccountIDOwner(f)){var m=a.GetFriendIfCached(f);if(m&&(t||m.persona.BHasAvatarSet())&&(c.push(m),c.length>=i))break}}if(n&&c.length<i)for(var d=0,h=this.m_rgGroupMembersSummary;d<h.length;d++){var f;if((f=h[d])!=s.accountid&&!this.BIsAccountIDOwner(f)){var _=a.GetPlayer(f);if(_&&!_.is_friend&&(t||_.persona.BHasAvatarSet())&&(c.push(_),c.length>=i))break}}}return o&&c.length<i&&c.push(s),{members:c,remaining_count:r-c.length}},e.prototype.SetUserBanState=function(e,t){var n=p.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.P);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),o.Body().set_ban_state(t),f.X.SetUserBanState(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var t=e.GetEResult();if(1!=t&&29!=t)throw Object(y.a)(!1,"Failed to change ban state "+t),t}))},e.prototype.MuteUser=function(e,t){var n=p.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.A);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),o.Body().set_expiration(t),f.X.MuteUserInGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var t=e.GetEResult();if(1!=t)throw Object(y.a)(!1,"Failed to change muteexpiration "+t),t}))},e.prototype.KickUser=function(e,t){var n=this,o=p.a.InitFromAccountID(e).ConvertTo64BitString(),r=h.b.Init(f.x);return r.Body().set_chat_group_id(this.m_ulGroupID),r.Body().set_steamid(o),r.Body().set_expiration(t),f.X.KickUserFromGroup(this.m_chatStore.CMInterface.GetServiceTransport(),r).then((function(e){var t=e.GetEResult();if(1!=t)throw n.LOG("Kick returned "+t),t}))},e.prototype.RevokeInvite=function(e){var t=this,n=p.a.InitFromAccountID(e).ConvertTo64BitString(),o=h.b.Init(f.H);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_steamid(n),f.X.RevokeInviteToGroup(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var n=e.GetEResult();if(1!=n)throw t.LOG("RevokeInvite returned "+n),n}))},e.prototype.CreateChatRoom=function(e,t){var n=this,o=h.b.Init(f.f);return o.Body().set_chat_group_id(this.m_ulGroupID),o.Body().set_name(e),o.Body().set_allow_voice(t),f.X.CreateChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),o).then((function(e){var t=e.Body().chat_room().chat_id();if(1!=e.GetEResult()||""==t||"0"==t)throw Object(y.a)(!1,"Failed to create chat room"),new Error("Failed to create chat room");return n.AddCreatedRoom(t,e.Body().chat_room())}))},e.prototype.CreateAndJoinTempVoiceRoom=function(){this.CreateChatRoom("",!0).then((function(e){e.StartVoiceChat()})).catch((function(){}))},e.prototype.AddCreatedRoom=function(e,t){var n=this.m_mapRooms.get(e);return n||(n=new l.a(this.m_chatStore,this,e,!1),this.m_mapRooms.set(e,n)),n.UpdateChatState(t),n},e.prototype.RenameRoom=function(e,t){if(e!=this.m_ulDefaultChatID&&t){var n=this.GetChatRoom(e);if(n){var o=n.name;n.ChangeNameWhileWaitingForRenameRequest(t);var r=h.b.Init(f.C);r.Body().set_chat_group_id(this.m_ulGroupID),r.Body().set_chat_id(e),r.Body().set_name(t),f.X.RenameChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),r).then((function(e){1==e.GetEResult()||(Object(y.a)(!1,"Failed to change room name"),n.ChangeNameWhileWaitingForRenameRequest(o))}))}}},e.prototype.ReorderRoom=function(e,t){var n=h.b.Init(f.E);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(e),n.Body().set_move_after_chat_id(t),f.X.ReorderChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),n).then((function(e){1==e.GetEResult()||Object(y.a)(!1,"Failed to reorder room")}))},e.prototype.DeleteChatRoom=function(e){var t=this,n=h.b.Init(f.j);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(e),f.X.DeleteChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),n).then((function(n){1==n.GetEResult()?t.RemoveRoom(e):Object(y.a)(!1,"Failed to delete chat room")}))},e.prototype.RemoveRoom=function(e){this.m_mapRooms.delete(e)},e.prototype.LeaveChatRoomGroup=function(e){this.m_chatStore.LeaveChatRoomGroup(e,this.m_ulGroupID).catch((function(){}))},e.prototype.GetInviteLinksForGroup=function(){var e=h.b.Init(f.q);return e.Body().set_chat_group_id(this.GetGroupID()),f.X.GetInviteLinksForGroup(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then((function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInviteLinks:null}:{loadingState:"loaded",rgInviteLinks:e.Body().invite_links()}}))},e.prototype.GetInvitedUsersForGroup=function(){var e=h.b.Init(f.r);return e.Body().set_chat_group_id(this.GetGroupID()),f.X.GetInviteList(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then((function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInvitedUsers:null}:{loadingState:"loaded",rgInvitedUsers:e.Body().invites()}}))},e.prototype.GetBanList=function(){var e=h.b.Init(f.n);return e.Body().set_chat_group_id(this.GetGroupID()),f.X.GetBanList(g.f.ChatStore.CMInterface.GetServiceTransport(),e).then((function(e){var t=new A;return 15==e.GetEResult()?t.loadingState="denied":1==e.GetEResult()?(t.rgBans=e.Body().bans(),t.loadingState="loaded"):t.loadingState="failed",t}))},e.prototype.GetRoleName=function(e){var t=this.m_roles.findIndex((function(t){return t.role_id==e}));if(t>=0)return this.m_roles[t].name},e.prototype.CreateRole=function(e){var t=this;if(0==(e=e.trim()).length)return Promise.resolve();var n=h.b.Init(f.h);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_name(e),this.m_roles.push({role_id:"-1",name:e,ordinal:Number.MAX_VALUE}),f.X.CreateRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(n){var o=n.GetEResult();if(1!=o){var r=t.m_roles.findIndex((function(e){return"-1"==e.role_id}));throw r>=0&&t.m_roles.splice(r,1),new Error("unable to create role, error "+o)}t.LOG("created role "+e)}))},e.prototype.DeleteRole=function(e){var t=this,n=h.b.Init(f.m);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_role_id(e),f.X.DeleteRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(n){if(1!=n.GetEResult())throw new Error("unable to delete role "+e);var o=t.m_roles.findIndex((function(t){return t.role_id==e}));o>=0&&t.m_roles.splice(o,1)}))},e.prototype.RenameRole=function(e,t){var n=this;if(0==(t=t.trim()).length)return Promise.resolve();var o=h.b.Init(f.D);return o.Body().set_chat_group_id(this.GetGroupID()),o.Body().set_role_id(e),o.Body().set_name(t),f.X.RenameRole(g.f.ChatStore.CMInterface.GetServiceTransport(),o).then((function(o){var r=o.GetEResult();if(1!=r)throw new Error("unable to rename role "+e+" "+r);var i=n.m_roles.findIndex((function(t){return t.role_id==e}));i>=0&&(n.m_roles[i].name=t)}))},e.prototype.ReorderRole=function(e,t){var n=h.b.Init(f.F);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_role_id(e),n.Body().set_ordinal(t),f.X.ReorderRole(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(e){return 1==e.GetEResult()}))},e.prototype.SetRoleAction=function(e,t,n){var o=this,r=this.GetRoleActions(e);if(r){if(n==r.BCanPerformAction(t))return;var i=r.BCanPerformAction(t);r.SetCanPerformAction(t,n);var a=h.b.Init(f.G);return a.Body().set_chat_group_id(this.GetGroupID()),a.Body().set_role_id(e),a.Body().set_actions(r.roleActions),f.X.ReplaceRoleActions(g.f.ChatStore.CMInterface.GetServiceTransport(),a).then((function(e){1!=e.GetEResult()&&(r.SetCanPerformAction(t,i),o.LOG("SetRoleAction error, restoring "+t+" to "+i))}))}},e.prototype.DeleteInviteLink=function(e,t){var n=h.b.Init(f.k);if(n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_invite_code(e),t&&"loaded"==t.loadingState){var o=t.rgInviteLinks.findIndex((function(t){return t.invite_code()==e}));o>=0&&(t.rgInviteLinks.splice(o,1),this.LOG("removed link "+t.rgInviteLinks))}return f.X.DeleteInviteLink(g.f.ChatStore.CMInterface.GetServiceTransport(),n).then((function(e){return 1==e.GetEResult()}))},e.prototype.SetNotificationPreferences=function(e,t,n){var o=h.b.Init(f.Q);return o.Body().set_chat_group_id(this.m_ulGroupID),void 0!==e&&(this.m_eUserDesktopNotificationLevel=e,o.Body().chat_group_preferences().set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(n=!1)),void 0!==t&&(this.m_eUserMobileNotificationLevel=t,o.Body().chat_group_preferences().set_mobile_notification_level(t)),void 0!==n&&(this.m_bUnreadIndicatorMuted=n,o.Body().chat_group_preferences().set_unread_indicator_muted(n)),f.X.SetUserChatGroupPreferences(g.f.CMInterface.GetServiceTransport(),o).then((function(e){return 1==e.GetEResult()}))},e.prototype.AddMetaMentionsToResults=function(e,t){var n=this.BCanIMentionAll()?"":Object(d.d)("#ChatMentionSuggest_NoPermission");"online".startsWith(e)&&t.unshift({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"online",strNotSelectable:n}),"all".startsWith(e)&&t.unshift({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"all",strNotSelectable:n})},e.prototype.SearchMembers=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=!1);for(var o=[],r=e.toLocaleLowerCase(),i=this.m_chatStore.CMInterface.steamid.GetAccountID(),a=[],s=[],c=0,l=this.memberList.member_list;c<l.length;c++){var p=l[c];if(p.accountid!=i){if(r.length){var u=p.MatchSearchString(r),m=0===u.iOffset;if(0==u.match||n&&!m)continue;var d={friend:p,iMatchOffset:u.iOffset,bNicknameMatch:2==u.match};m?u.bFullMatch?a.unshift(d):a.push(d):s.push(d)}else o.push({friend:p,iMatchOffset:0,bNicknameMatch:!1});if(o.length+a.length>=t)break}}for(var h=0;h<a.length&&o.length<t;h++)o.push(a[h]);for(h=0;h<s.length&&o.length<t;h++)o.push(s[h]);return o},e.prototype.BNameMatchesSearch=function(e){return-1!=this.name.toLocaleLowerCase().indexOf(e)},Object(o.c)([m.A],e.prototype,"m_rtTimeJoined",void 0),Object(o.c)([m.A],e.prototype,"m_rtLastAck",void 0),Object(o.c)([m.A],e.prototype,"m_unOwnerAccountID",void 0),Object(o.c)([m.A],e.prototype,"m_bFullStateLoaded",void 0),Object(o.c)([m.A],e.prototype,"m_strName",void 0),Object(o.c)([m.A],e.prototype,"m_strTagLine",void 0),Object(o.c)([m.A],e.prototype,"m_strAvatarSHA",void 0),Object(o.c)([m.A],e.prototype,"m_strAvatarUGCURL",void 0),Object(o.c)([m.A],e.prototype,"m_unWatchingBroadcastAccountID",void 0),Object(o.c)([m.A],e.prototype,"m_strWatchingBroadcastChannelID",void 0),Object(o.c)([m.A],e.prototype,"m_rgPartyBeacons",void 0),Object(o.c)([m.A],e.prototype,"m_eUserDesktopNotificationLevel",void 0),Object(o.c)([m.A],e.prototype,"m_eUserMobileNotificationLevel",void 0),Object(o.c)([m.A],e.prototype,"m_bUnreadIndicatorMuted",void 0),Object(o.c)([m.A],e.prototype,"m_roles",void 0),Object(o.c)([m.A],e.prototype,"m_rgGroupMembersSummary",void 0),Object(o.c)([m.A],e.prototype,"m_cMemberSummaryCount",void 0),Object(o.c)([m.A],e.prototype,"m_bMemberListVirtualized",void 0),Object(o.c)([m.l],e.prototype,"name",null),Object(o.c)([m.l],e.prototype,"hasAvatarSHA",null),Object(o.c)([m.l],e.prototype,"hasIcon",null),Object(o.c)([m.l],e.prototype,"avatar_url_small",null),Object(o.c)([m.l],e.prototype,"avatar_url_medium",null),Object(o.c)([m.l],e.prototype,"avatar_url_full",null),Object(o.c)([m.l],e.prototype,"chatRoomList",null),Object(o.c)([m.l],e.prototype,"textRoomList",null),Object(o.c)([m.l],e.prototype,"voiceRoomList",null),Object(o.c)([m.l],e.prototype,"hasVoiceRoom",null),Object(o.c)([m.l],e.prototype,"hasUnreadChatMessage",null),Object(o.c)([m.l],e.prototype,"HasUnreadMention",null),Object(o.c)([m.l],e.prototype,"time_last_activity",null),Object(o.c)([m.l],e.prototype,"room_with_last_message",null),Object(o.c)([m.i],e.prototype,"ChangeMemberRank",null),Object(o.c)([m.i],e.prototype,"ChangeMemberRoles",null),Object(o.c)([m.i],e.prototype,"SetInitialGroupState",null),Object(o.c)([m.i],e.prototype,"UpdateGroupStateFromSummary",null),Object(o.c)([m.i],e.prototype,"SetNameCheckingForAppLocalization",null),Object(o.c)([m.i],e.prototype,"UpdateGroupState",null),Object(o.c)([m.i],e.prototype,"UnloadActiveGroupState",null),Object(o.c)([m.i],e.prototype,"UnloadGroupState",null),Object(o.c)([m.i],e.prototype,"UnloadAndResetGroupState",null),Object(o.c)([m.i],e.prototype,"UpdateChatRoomState",null),Object(o.c)([m.i],e.prototype,"UpdateUserState",null),Object(o.c)([m.i],e.prototype,"UpdateChatRoomHeaderState",null),Object(o.c)([m.i],e.prototype,"OnActivate",null),Object(o.c)([m.l],e.prototype,"members_to_highlight_name",null),Object(o.c)([m.l],e.prototype,"members_to_highlight",null),Object(o.c)([m.i],e.prototype,"AddCreatedRoom",null),Object(o.c)([m.i],e.prototype,"RemoveRoom",null),e}(),w=function(e){function t(t,n){var o=e.call(this)||this;return o.LOG=s.b.create((function(){return o.GetUniqueID()}),!1),o.m_mapChatViews=new Map,o.m_bShowSettingsDialog=!1,o.m_bShowBroadcast=!1,o.m_bChatHidden=!1,o.m_bShowGlobalChat=!1,o.m_bMemberSearchActive=!1,o.m_strMemberSearchString="",o.m_bSearchError=!1,o.m_tabset=t,o.m_group=n,o.m_group.BIsValid()&&o.SelectChat(o.m_group.GetDefaultChatID()),o.m_disposeChatRooms=Object(m.j)((function(){var e=o.m_group.chatRoomList;o.m_selectedChatView&&e.length&&e.indexOf(o.m_selectedChatView.chat)<0&&o.SelectChat(o.m_group.GetDefaultChatID())})),o}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"search_results",{get:function(){return this.m_rgSearchResults},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"has_search_error",{get:function(){return this.m_bSearchError},enumerable:!1,configurable:!0}),t.prototype.GetGroup=function(){return this.m_group},t.prototype.GetSelectedChatView=function(){return this.m_selectedChatView},t.prototype.GetActiveChatView=function(){return this.GetPopoverChatView()||this.GetSelectedChatView()},t.prototype.GetPopoverChatView=function(){return this.m_popoverChatView},Object.defineProperty(t.prototype,"isBroadcastShown",{get:function(){return this.m_bShowBroadcast},enumerable:!1,configurable:!0}),t.prototype.ShowBroadcast=function(){this.m_bShowBroadcast=!0,this.SetLayoutForBroadcast()},t.prototype.SetLayoutForBroadcast=function(){var e=this;this.SetChannelListCollapsed(!0,!1),this.SetMemberListCollapsed(!0,!1),SetBackgroundTimeout((function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()}),30)},t.prototype.HideBroadcast=function(){this.m_bShowBroadcast=!1,this.SetLayoutForHiddenBroadcast()},t.prototype.SetLayoutForHiddenBroadcast=function(){var e=this;g.f.UIStore.SetTheaterMode(!1),SetBackgroundTimeout((function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()}),30)},t.prototype.SetVerticalBroadcastChat=function(e){this.m_bShowVerticalBroadcastChat=e},t.prototype.ToggleTheaterModeBroadcastChat=function(){g.f.UIStore.SetTheaterMode(!g.f.UIStore.GetTheaterMode())},t.prototype.SetChatHidden=function(e){this.m_bChatHidden=e},t.prototype.SetGlobalBroadcastChatShown=function(e){this.m_bShowGlobalChat=e,this.GetActiveChatView()&&this.GetActiveChatView().OnChatFrameChanged()},t.prototype.SetLocalBroadcastId=function(e){this.m_strLocalBroadcastId=e},t.prototype.SetMemberListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bMemberListCollapsedOverride=void 0;var n=this.GetGroup();g.f.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(n.GetGroupID(),"bMemberListCollapsed",e)}else this.m_bMemberListCollapsedOverride=e},t.prototype.SetChannelListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bChannelListCollapsedOverride=void 0;var n=this.GetGroup();g.f.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(n.GetGroupID(),"bChannelListCollapsed",e)}else this.m_bChannelListCollapsedOverride=e},t.prototype.ClosePopoverChat=function(){this.m_popoverChatView&&(this.m_popoverChatView.OnViewClosed(),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_popoverChatView=null)},t.prototype.SelectChat=function(e){var t=this,n=this.m_group.GetChatRoom(e);if(n){if(n.GetVoiceAllowed()&&n!=this.m_group.GetDefaultChatRoom()){if(this.m_popoverChatView&&this.m_popoverChatView.chat==n)return}else if(this.ClosePopoverChat(),this.m_selectedChatView&&this.m_selectedChatView.chat==n)return;n.GetVoiceAllowed()&&this.m_group.GetDefaultChatRoom()!=n?(this.ClosePopoverChat(),this.m_popoverChatView=this.GetChatViewForRoom(n),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeActiveVoice=Object(m.J)((function(){return!n.BVoiceActive()}),(function(){t.m_popoverChatView&&t.m_popoverChatView.chat==n&&t.ClosePopoverChat()}))):(this.m_selectedChatView&&this.m_selectedChatView.OnViewClosed(),this.m_selectedChatView=this.GetChatViewForRoom(n)),this.m_tabset.activeTab==this&&this.m_tabset.is_popup_focused&&this.OnTabActivate()}},t.prototype.SelectNextChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,n=e>=t.length-1?0:e+1;this.SelectChat(t[n].GetRoomID())},t.prototype.SelectPreviousChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,n=e<=0?t.length-1:e-1;this.SelectChat(t[n].GetRoomID())},t.prototype.GetSelectedChannelIndex=function(){var e=this.GetSelectedChatView().chat.GetRoomID();return this.GetGroup().textRoomList.findIndex((function(t){return t.GetRoomID()===e}))},t.prototype.GetChatViewForRoom=function(e){var t=e.GetRoomID(),n=this.m_mapChatViews.get(t);return n?this.LOG("reusing chat for "+t):n=new c.a(this.m_tabset,e,this),n},t.prototype.StartRoomRename=function(e){this.m_ulRenameChatRoomID=e},t.prototype.EndRoomRename=function(){this.m_ulRenameChatRoomID=""},t.prototype.IsRoomRenameActive=function(e){return""!=this.m_ulRenameChatRoomID&&this.m_ulRenameChatRoomID==e},t.prototype.GetRenameRoomID=function(){return this.m_ulRenameChatRoomID},t.prototype.OnTabClosed=function(){this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeChatRooms&&this.m_disposeChatRooms(),this.m_VirtualizedMemberList&&g.f.ChatStore.UnregisterVirtualizedMemberListView(this.m_VirtualizedMemberList),this.ClosePopoverChat(),this.GetSelectedChatView().OnViewClosed(),g.f.ChatStore.DecRefActiveChatRoomGroup(this.GetGroup().GetGroupID())},t.prototype.IsVoiceActive=function(){return g.f.ChatStore.VoiceChat.GetActiveChatRoomGroupID()==this.m_group.GetGroupID()},t.prototype.IsTabForChat=function(e){if(!(e instanceof l.a))return!1;var t=e;return!!this.m_group.GetChatRoom(t.GetRoomID())},t.prototype.GetUnreadMessageCount=function(){return this.m_group.hasUnreadChatMessage?1:0},t.prototype.UpdateMemberSearch=function(e){var t=this;this.m_bMemberSearchActive&&this.m_strMemberSearchString==e||(this.m_bMemberSearchActive=!0,this.m_strMemberSearchString=e||"",e?this.SearchMembers(e,200).then((function(e){t.m_rgSearchResults=e,t.m_bSearchError=!1}),(function(e){console.warn("Failed to filter members: "+e),t.m_bSearchError=!0})):this.m_rgSearchResults=void 0)},t.prototype.ClearMemberSearch=function(){this.m_bMemberSearchActive=!1,this.m_strMemberSearchString="",this.m_rgSearchResults=void 0},t.prototype.IsMemberSearchActive=function(){return this.m_bMemberSearchActive},t.prototype.GetMemberSearch=function(){return this.m_strMemberSearchString},Object.defineProperty(t.prototype,"normalizedMemberSearch",{get:function(){return this.m_strMemberSearchString.trim().toLocaleLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMemberListExpanded",{get:function(){if(this.m_bMemberSearchActive)return!0;if(void 0===this.m_bMemberListCollapsedOverride){var e=this.GetGroup();return!g.f.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bMemberListCollapsed")}return!this.m_bMemberListCollapsedOverride},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChannelListCollapsed",{get:function(){if(void 0===this.m_bChannelListCollapsedOverride){var e=this.GetGroup();return g.f.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bChannelListCollapsed")}return this.m_bChannelListCollapsedOverride},enumerable:!1,configurable:!0}),t.prototype.GetTabName=function(){return this.m_group.name},t.prototype.GetUniqueID=function(){return this.m_group.unique_id},t.prototype.OnTabFocus=function(){var e=this.GetActiveChatView();e&&e.OnFocus()},t.prototype.InternalOnTabActivate=function(){var e=this.GetActiveChatView();e&&e.OnActivate()},t.prototype.OnTabDeactivate=function(){var e=this.GetActiveChatView();e&&e.OnDeactivate()},t.prototype.IsChatRoom=function(){return!0},t.prototype.GetChatView=function(){return this.GetActiveChatView()},t.prototype.GetMemberCountTotal=function(){return this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetMemberCountTotal():this.m_group.memberCountTotal},t.prototype.GetMemberCountOnline=function(){return this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetMemberCountOnline():this.m_group.memberCountOnline},t.prototype.GetMemberCountInGame=function(){return this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetMemberCountInGame():this.m_group.memberCountInGame},t.prototype.GetVirtualizedMemberListView=function(){return this.m_VirtualizedMemberList||(this.m_VirtualizedMemberList=new S(this.m_group.GetGroupID()),g.f.ChatStore.RegisterVirtualizedMemberListView(this.m_VirtualizedMemberList)),this.m_VirtualizedMemberList},t.prototype.SearchMembers=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(n){return this.m_group.BIsMemberListVirtualized()?[2,this.GetVirtualizedMemberListView().PerformSearch(this.m_group,"1",e)]:[2,this.m_group.SearchMembers(e,t)]}))}))},t.prototype.BIsMemberNameAmbiguous=function(e){return!!this.m_group.BIsMemberListVirtualized()||this.m_group.SearchMembers(e,2,!0).length>=2},t.prototype.ProcessMentions=function(e){e.replace(/＠/g,"@");for(var t=e.indexOf("@");-1!==t;){for(var n=e.indexOf("@",t+1),o=e.indexOf(" ",t+1),r=Math.min(-1===n?e.length:n,-1===o?e.length:o),i=e.substr(t+1,r-t-1).toLocaleLowerCase(),a=void 0,s=void 0,c=0,l=this.m_group.BIsMemberListVirtualized()?this.GetVirtualizedMemberListView().GetAllKnownPersonas():this.m_group.memberList.member_list_unsorted;c<l.length;c++){var p=l[c],u=Object(C.f)(p.player_name_normalized),m=u+"#"+p.accountid.toString(36);if(m.startsWith(i)){var d=void 0,h=m.length===i.length,f=h||u.length===i.length;(f||h)&&(d=i.length),!h&&e.length-t-1>=m.length&&e.substr(t+1,m.length).toLocaleLowerCase()===m&&(f=h=!0,d=m.length),!f&&e.length-t-1>=u.length&&e.substr(t+1,u.length).toLocaleLowerCase()===u&&(d=u.length),d&&(void 0===s||d>=s)&&(a=p,s=d)}}var _=!1;this.m_group.BCanIMentionAll()&&(_="online"==i||"online#0"==i||"all"==i||"all#0"==i);var g=void 0,b=void 0,v=void 0;if(_&&(void 0===s||s<=i.length)){var y=i;-1!==i.indexOf("#")&&(y=i.substr(0,i.indexOf("#"))),g=y,b=y,v=i.length,"online"==g&&(g="here")}else a&&void 0!==s&&(g=""+a.accountid,b=a.persona.m_strPlayerName,v=s);if(b&&void 0!==v){var S=e.substr(0,t),O=e.substr(t+1+v),I="[mention="+g+"]@"+Object(C.f)(b)+"[/mention]";n=(e=S+I+O).indexOf("@",S.length+I.length)}t=n}return e},Object(o.c)([m.A],t.prototype,"m_selectedChatView",void 0),Object(o.c)([m.A],t.prototype,"m_popoverChatView",void 0),Object(o.c)([m.A],t.prototype,"m_bShowSettingsDialog",void 0),Object(o.c)([m.A],t.prototype,"m_ulRenameChatRoomID",void 0),Object(o.c)([m.A],t.prototype,"m_bShowBroadcast",void 0),Object(o.c)([m.A],t.prototype,"m_bShowVerticalBroadcastChat",void 0),Object(o.c)([m.A],t.prototype,"m_strLocalBroadcastId",void 0),Object(o.c)([m.A],t.prototype,"m_bChatHidden",void 0),Object(o.c)([m.A],t.prototype,"m_bShowGlobalChat",void 0),Object(o.c)([m.A],t.prototype,"m_bMemberSearchActive",void 0),Object(o.c)([m.A],t.prototype,"m_strMemberSearchString",void 0),Object(o.c)([m.A.ref],t.prototype,"m_rgSearchResults",void 0),Object(o.c)([m.A],t.prototype,"m_bSearchError",void 0),Object(o.c)([m.A],t.prototype,"m_bMemberListCollapsedOverride",void 0),Object(o.c)([m.A],t.prototype,"m_bChannelListCollapsedOverride",void 0),Object(o.c)([m.i],t.prototype,"ShowBroadcast",null),Object(o.c)([m.i.bound],t.prototype,"HideBroadcast",null),Object(o.c)([m.i.bound],t.prototype,"SetVerticalBroadcastChat",null),Object(o.c)([m.i],t.prototype,"ToggleTheaterModeBroadcastChat",null),Object(o.c)([m.i],t.prototype,"SetChatHidden",null),Object(o.c)([m.i],t.prototype,"SetGlobalBroadcastChatShown",null),Object(o.c)([m.i],t.prototype,"SetLocalBroadcastId",null),Object(o.c)([m.i],t.prototype,"SetMemberListCollapsed",null),Object(o.c)([m.i],t.prototype,"SetChannelListCollapsed",null),Object(o.c)([m.i],t.prototype,"ClosePopoverChat",null),Object(o.c)([m.i],t.prototype,"SelectChat",null),Object(o.c)([m.i],t.prototype,"SelectNextChannel",null),Object(o.c)([m.i],t.prototype,"SelectPreviousChannel",null),Object(o.c)([m.i],t.prototype,"StartRoomRename",null),Object(o.c)([m.i],t.prototype,"EndRoomRename",null),Object(o.c)([m.i],t.prototype,"OnTabClosed",null),Object(o.c)([m.i],t.prototype,"UpdateMemberSearch",null),Object(o.c)([m.i],t.prototype,"ClearMemberSearch",null),Object(o.c)([m.l],t.prototype,"isMemberListExpanded",null),Object(o.c)([m.l],t.prototype,"isChannelListCollapsed",null),t}(u.b),A=function(){function e(){this.loadingState="pending"}return Object(o.c)([m.A],e.prototype,"loadingState",void 0),Object(o.c)([m.A],e.prototype,"rgBans",void 0),e}(),D={bMemberListCollapsed:void 0,bChannelListCollapsed:void 0},T=function(){function e(){this.m_mapDisplayPrefs=m.A.map()}return e.prototype.Init=function(e){var t=this;this.m_SettingsStore=e,this.m_SettingsStore.GetObjectFromLocalStorageWhenReady("ChatRoomGroupDisplayPrefs").then((function(e){for(var n in t.m_mapDisplayPrefs.clear(),e.chatRoomGroups)t.m_mapDisplayPrefs.set(n,e.chatRoomGroups[n])}))},e.prototype.GetChatRoomDisplayPref=function(e,t){return(this.m_mapDisplayPrefs.get(e)||D)[t]},e.prototype.ToggleChatRoomDisplayPref=function(e,t){var n=this.GetChatRoomDisplayPref(e,t);this.SetChatRoomDisplayPref(e,t,!n)},e.prototype.SetChatRoomDisplayPref=function(e,t,n){var o=this.m_mapDisplayPrefs.get(e);o&&o[t]===n||(o||(this.m_mapDisplayPrefs.set(e,Object.assign({},D)),o=this.m_mapDisplayPrefs.get(e)),o[t]=n,this.WritePrefs())},e.prototype.WritePrefs=function(){this.m_SettingsStore.StoreObjectInLocalStorage("ChatRoomGroupDisplayPrefs",{chatRoomGroups:this.m_mapDisplayPrefs.toJSON()})},e.prototype.FillInChatUsabilityMetrics=function(e){var t=Array.from(this.m_mapDisplayPrefs.values());e.ui_state().set_group_chat_left_col_collapsed(r.b(t,(function(e){return e.bChannelListCollapsed}))),e.ui_state().set_group_chat_right_col_collapsed(r.b(t,(function(e){return e.bMemberListCollapsed})))},Object(o.c)([m.i],e.prototype,"SetChatRoomDisplayPref",null),e}(),M=function(){function e(){this.m_mapAccountToExtra=m.A.map(),this.m_bMemberDataVirtualized=!1}return e.prototype.GetCurrentMemberSet=function(){var e=new Set;return this.m_mapAccountToExtra.forEach((function(t,n){e.add(n)})),e},e.prototype.SetMemberDataVirtualized=function(e){this.m_bMemberDataVirtualized=e},Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.m_mapAccountToExtra.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,n=0,o=this.member_list_unsorted;n<o.length;n++){var r=o[n];r.persona.is_online&&(e++,r.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!1,configurable:!0}),e.prototype.Clear=function(){this.m_mapAccountToExtra.clear(),this.m_bMemberDataVirtualized=!1},e.prototype.AddMember=function(e,t){void 0===t&&(t=void 0),this.HasMember(e)||this.m_mapAccountToExtra.set(e,t)},e.prototype.RemoveMember=function(e){this.HasMember(e)&&this.m_mapAccountToExtra.delete(e)},e.prototype.GetExtra=function(e){return this.m_mapAccountToExtra.get(e)},e.prototype.HasMember=function(e){return this.m_mapAccountToExtra.has(e)},Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(_.b.DefaultFriendSortComparator),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){Object(y.a)(!this.m_bMemberDataVirtualized,"Shouldn't be accessing member_list when virtualized");var e=[];return this.m_bMemberDataVirtualized||this.m_mapAccountToExtra.forEach((function(t,n){e.push(g.f.FriendStore.GetPlayer(n))})),e},enumerable:!1,configurable:!0}),Object(o.c)([m.l],e.prototype,"unfiltered_count",null),Object(o.c)([m.l],e.prototype,"member_counts",null),Object(o.c)([m.i],e.prototype,"Clear",null),Object(o.c)([m.i],e.prototype,"AddMember",null),Object(o.c)([m.i],e.prototype,"RemoveMember",null),Object(o.c)([m.l],e.prototype,"member_list",null),Object(o.c)([m.l],e.prototype,"member_list_unsorted",null),e}()},VZeO:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return j}));var o,r=n("mrSG"),i=n("tkkQ"),a=n("4HGb"),s=n("Ezvv"),c=n("RBVV"),l=n("7t13"),p=n("48Gm"),u=n("LAqV"),m=function(){function e(e,t){if(!(e instanceof BaseAudioContext))throw"Not a valid audio context.";t||(t={});var n=t.numberOfChannels||1;if(n>2)throw"The maximum supported number of channels is two.";this.context_=e;var o=t.bufferSize||0;this.attack=t.attack||0,this.release=t.release||0;var r=void 0===t.timeConstant?.0025:t.timeConstant;this.threshold=void 0===t.threshold?-100:t.threshold,this.alpha_=this.getAlphaFromTimeConstant_(r,this.context_.sampleRate),this.noiseGateKernel_=this.context_.createScriptProcessor(o,n,n),this.noiseGateKernel_.onaudioprocess=this.onaudioprocess_.bind(this),this.input=new GainNode(this.context_),this.output=new GainNode(this.context_),this.input.connect(this.noiseGateKernel_).connect(this.output),this.previousLevel_=0,this.previousWeight_=1,this.channel_=new Float32Array(this.noiseGateKernel_.bufferSize),this.envelope_=new Float32Array(this.noiseGateKernel_.bufferSize),this.weights_=new Float32Array(this.noiseGateKernel_.bufferSize)}return e.prototype.onaudioprocess_=function(e){var t=e.inputBuffer,n=t.getChannelData(0);if(2===t.numberOfChannels)for(var o=t.getChannelData(1),r=0;r<o.length;r++)this.channel_[r]=(n[r]+o[r])/2;else this.channel_=n;var i=this.detectLevel_(this.channel_),a=this.computeWeights_(i);for(r=0;r<t.numberOfChannels;r++)for(var s=t.getChannelData(r),c=e.outputBuffer.getChannelData(r),l=0;l<s.length;l++)c[l]=a[l]*s[l]},e.prototype.detectLevel_=function(e){this.envelope_[0]=this.alpha_*this.previousLevel_+(1-this.alpha_)*Math.pow(e[0],2);for(var t=1;t<e.length;t++)this.envelope_[t]=this.alpha_*this.envelope_[t-1]+(1-this.alpha_)*Math.pow(e[t],2);return this.previousLevel_=this.envelope_[this.envelope_.length-1],this.envelope_},e.prototype.computeWeights_=function(t){var n=1,o=1;this.attack>0&&(n=1/Math.ceil(this.context_.sampleRate*this.attack)),this.release>0&&(o=1/Math.ceil(this.context_.sampleRate*this.release));for(var r=0;r<t.length;r++){if(e.toDecibel(2*t[r])<this.threshold){var i=this.previousWeight_-n;this.weights_[r]=Math.max(i,0)}else{i=this.previousWeight_+o;this.weights_[r]=Math.min(i,1)}this.previousWeight_=this.weights_[r]}return this.weights_},e.prototype.getAlphaFromTimeConstant_=function(e,t){return Math.exp(-1/(t*e))},e.toDecibel=function(e){return 10*Math.log10(e)},e}(),d=n("2vnA"),h=function(){function e(e,t){this.m_Analyser=void 0,this.m_rgInputNode=[],this.m_hUpdateInterval=0,this.m_buffer=void 0,this.m_lastTimeNonZero=0,this.m_flVolume=0,this.m_flRoundedVolume=0,this.m_flAveraging=.6,this.m_Analyser=t.createAnalyser(),this.m_Analyser.fftSize=128,this.m_buffer=new Float32Array(this.m_Analyser.fftSize),this.m_rgInputNode.push(e),e.connect(this.m_Analyser),this.StartUpdating()}return e.prototype.GetLastTimeNonZero=function(){return this.m_lastTimeNonZero},e.prototype.StartUpdating=function(){this.StopUpdating(),this.m_hUpdateInterval=SetBackgroundInterval(this.UpdateVolume,60)},e.prototype.StopUpdating=function(){0!=this.m_hUpdateInterval&&ClearBackgroundInterval(this.m_hUpdateInterval),this.m_hUpdateInterval=0},e.prototype.UpdateVolume=function(){this.m_Analyser.getFloatTimeDomainData(this.m_buffer);for(var e=0,t=0;t<this.m_buffer.length;++t){var n=this.m_buffer[t];e+=n*n}var o=Math.sqrt(e/this.m_buffer.length);this.m_flVolume=1.2*Math.max(o,this.m_flVolume*this.m_flAveraging);var r=Math.round(100*this.m_flVolume)/100;r!=this.m_flRoundedVolume&&(this.m_flRoundedVolume=r),this.m_flRoundedVolume>0&&(this.m_lastTimeNonZero=performance.now())},e.prototype.stop=function(){this.StopUpdating(),this.DisconnectAll()},e.prototype.Connect=function(e){this.m_rgInputNode.push(e),null!=this.m_Analyser&&e.connect(this.m_Analyser)},e.prototype.DisconnectAll=function(){for(var e=0;e<this.m_rgInputNode.length;++e){if(this.m_Analyser)try{this.m_rgInputNode[e].disconnect(this.m_Analyser)}catch(e){}this.m_rgInputNode[e]=void 0}this.m_rgInputNode=[]},Object.defineProperty(e.prototype,"rounded_volume",{get:function(){return this.m_flRoundedVolume},enumerable:!1,configurable:!0}),Object(r.c)([d.A],e.prototype,"m_lastTimeNonZero",void 0),Object(r.c)([d.A],e.prototype,"m_flVolume",void 0),Object(r.c)([d.A],e.prototype,"m_flRoundedVolume",void 0),Object(r.c)([d.i.bound],e.prototype,"UpdateVolume",null),Object(r.c)([d.i.bound],e.prototype,"stop",null),e}(),f=n("s+DT"),_=n("WpBz"),g=n("oh5H"),b=n("K4CH"),v=n("OJz+"),y=n("XaMz");!function(e){e[e.k_EAudioStreamType_Microphone=1]="k_EAudioStreamType_Microphone",e[e.k_EAudioStreamType_IncomingStream=2]="k_EAudioStreamType_IncomingStream"}(o||(o={}));var S,C,O=function(){function e(){this.destination_node=void 0,this.source_node=void 0,this.elem=void 0,this.output_gain_node=void 0,this.muted=!1,this.volume_meter=void 0}return Object(r.c)([d.A],e.prototype,"accountid",void 0),Object(r.c)([d.A],e.prototype,"muted",void 0),Object(r.c)([d.A],e.prototype,"volume_meter",void 0),e}();function I(e){switch(e){case C.k_EVoiceCallState_None:return"None";case C.k_EVoiceCallState_ScheduledInitiate:return"ScheduledInitiate";case C.k_EVoiceCallState_RequestedMicAccess:return"RequestedMicAccess";case C.k_EVoiceCallState_LocalMicOnly:return"LocalMicOnly";case C.k_EVoiceCallState_CreatePeerConnection:return"CreatePeerConnection";case C.k_EVoiceCallState_InitatedWebRTCSession:return"InitiatedWebRTCSession";case C.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected:return"WaitingOnICEConnected";case C.k_EVoiceCallState_RequestedPermission:return"RequestedPermission";case C.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession:return"NotifyingVoiceChatOfWebRTCSession";case C.k_EVoiceCallState_Connected:return"Connected"}}!function(e){e[e.k_ENoiseGateLevel_Off=0]="k_ENoiseGateLevel_Off",e[e.k_ENoiseGateLevel_Low=1]="k_ENoiseGateLevel_Low",e[e.k_ENoiseGateLevel_Medium=2]="k_ENoiseGateLevel_Medium",e[e.k_ENoiseGateLevel_High=3]="k_ENoiseGateLevel_High"}(S||(S={})),function(e){e[e.k_EVoiceCallState_None=0]="k_EVoiceCallState_None",e[e.k_EVoiceCallState_ScheduledInitiate=1]="k_EVoiceCallState_ScheduledInitiate",e[e.k_EVoiceCallState_RequestedMicAccess=2]="k_EVoiceCallState_RequestedMicAccess",e[e.k_EVoiceCallState_LocalMicOnly=3]="k_EVoiceCallState_LocalMicOnly",e[e.k_EVoiceCallState_CreatePeerConnection=4]="k_EVoiceCallState_CreatePeerConnection",e[e.k_EVoiceCallState_InitatedWebRTCSession=5]="k_EVoiceCallState_InitatedWebRTCSession",e[e.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected=6]="k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected",e[e.k_EVoiceCallState_RequestedPermission=7]="k_EVoiceCallState_RequestedPermission",e[e.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession=8]="k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession",e[e.k_EVoiceCallState_Connected=9]="k_EVoiceCallState_Connected"}(C||(C={}));var E=function(){function e(){this.m_eState=C.k_EVoiceCallState_None,this.m_targetAccountID=0,this.m_bInitiatedOneOnOneCall=!1,this.m_bWaitingOnOneOnOneRejoin=!1,this.m_bPostedOneOnOneEndedMsg=!1,this.m_voiceChatID="",this.m_webRTCConnectedNotification=void 0,this.m_webRTCServerIP=0,this.m_webRTCServerPort=0,this.m_webRTCClientIP=0,this.m_webRTCClientPort=0,this.m_nFailuresThisInitiate=0,this.m_bOfferUpdateInProgress=!1,this.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_nMostRecentRemoteDescriptionVersion="0"}return e.prototype.BMatchingCall=function(e,t){return 0!=e&&this.m_targetAccountID==e||!(!this.m_chatRoom||!t||this.m_chatRoom.chatID!=t.chatID||this.m_chatRoom.groupID!=t.groupID)},e.prototype.BCallActiveForGroup=function(e){return this.m_chatRoom&&this.m_chatRoom.groupID==e},Object(r.c)([d.A],e.prototype,"m_eState",void 0),Object(r.c)([d.A],e.prototype,"m_targetAccountID",void 0),Object(r.c)([d.A],e.prototype,"m_bInitiatedOneOnOneCall",void 0),Object(r.c)([d.A],e.prototype,"m_bWaitingOnOneOnOneRejoin",void 0),Object(r.c)([d.A],e.prototype,"m_bPostedOneOnOneEndedMsg",void 0),Object(r.c)([d.A],e.prototype,"m_chatRoom",void 0),Object(r.c)([d.A],e.prototype,"m_voiceChatID",void 0),Object(r.c)([d.A],e.prototype,"m_nFailuresThisInitiate",void 0),Object(r.c)([d.A],e.prototype,"m_bIsConnectionAttemptOverTwoSeconds",void 0),e}(),w=function(){return function(){this.m_SSRC=0,this.m_MostRecentDelayEstimateMs=0,this.m_MostRecentJitterReceivedMs=0,this.m_CurrentJitterBufferMs=0,this.m_PacketsReceived=0,this.m_PacketsLost=0,this.m_PacketsSent=0,this.m_BytesSent=0,this.m_googRTT=0,this.m_BytesReceived=0,this.m_DecodingThroughNetEQ=0,this.m_DecodingPacketLossCorrection=0,this.m_DecodingPacketLossFadeNoiseGeneration=0,this.m_DecodingComfortNoiseGeneration=0,this.m_DecodingNormal=0,this.m_DecodingSilenceGenerator=0,this.m_DecodingMuted=0}}(),A=function(){function e(e){this.m_VoiceInputGain=1,this.m_VoiceOutputGain=1,this.m_NoiseGateLevel=S.k_ENoiseGateLevel_Medium,this.m_VoiceUseEchoCancellation=!0,this.m_VoiceUseNoiseCancellation=!0,this.m_VoiceUseAutoGainControl=!0,this.m_SelectedMicID="default",this.m_SelectedOutputID="default",this.m_bPlayPTTSounds=!0,this.m_bSettingsLoaded=!1,this.m_bHasResetOpenMicHotkey=!1,this.m_SettingsStore=e}return e.prototype.SaveToLocalStorage=function(){this.m_SettingsStore.StoreObjectInLocalStorage("SteamVoiceSettings",{inputGain:this.m_VoiceInputGain,outputGain:this.m_VoiceOutputGain,noiseGateLevel:this.m_NoiseGateLevel,noiseCancellation:this.m_VoiceUseNoiseCancellation,echoCancellation:this.m_VoiceUseEchoCancellation,autoGainControl:this.m_VoiceUseAutoGainControl,selectedMic:this.m_SelectedMicID,selectedOutput:this.m_SelectedOutputID,pttSoundsEnabled:this.m_bPlayPTTSounds,hasResetOpenMicHotKey:this.m_bHasResetOpenMicHotkey})},e.prototype.LoadFromLocalStorage=function(e){var t=this;this.m_SettingsStore.GetObjectFromLocalStorageWhenReady("SteamVoiceSettings",void 0).then((function(n){null!=n&&(null!=n.inputGain&&(t.m_VoiceInputGain=n.inputGain),null!=n.outputGain&&(t.m_VoiceOutputGain=n.outputGain),null!=n.noiseGateLevel&&(t.m_NoiseGateLevel=n.noiseGateLevel),null!=n.noiseCancellation&&(t.m_VoiceUseNoiseCancellation=n.noiseCancellation),null!=n.autoGainControl&&(t.m_VoiceUseAutoGainControl=n.autoGainControl),null!=n.echoCancellation&&(t.m_VoiceUseEchoCancellation=n.echoCancellation),null!=n.selectedMic&&(t.m_SelectedMicID=n.selectedMic),null!=n.selectedOutput&&(t.m_SelectedOutputID=n.selectedOutput),null!=n.pttSoundsEnabled&&(t.m_bPlayPTTSounds=n.pttSoundsEnabled),null!=n.hasResetOpenMicHotKey&&(t.m_bHasResetOpenMicHotkey=n.hasResetOpenMicHotKey)),t.m_bSettingsLoaded=!0,e.LogMsg("(VoiceChat) Settings loaded from local storage"),e.RefreshPushToTalkKeySettings()}))},Object(r.c)([d.A],e.prototype,"m_VoiceInputGain",void 0),Object(r.c)([d.A],e.prototype,"m_VoiceOutputGain",void 0),Object(r.c)([d.A],e.prototype,"m_NoiseGateLevel",void 0),Object(r.c)([d.A],e.prototype,"m_VoiceUseEchoCancellation",void 0),Object(r.c)([d.A],e.prototype,"m_VoiceUseNoiseCancellation",void 0),Object(r.c)([d.A],e.prototype,"m_VoiceUseAutoGainControl",void 0),Object(r.c)([d.A],e.prototype,"m_SelectedMicID",void 0),Object(r.c)([d.A],e.prototype,"m_SelectedOutputID",void 0),Object(r.c)([d.A],e.prototype,"m_bPlayPTTSounds",void 0),Object(r.c)([d.A],e.prototype,"m_bSettingsLoaded",void 0),Object(r.c)([d.A],e.prototype,"m_bHasResetOpenMicHotkey",void 0),e}(),D=function(){function e(){this.muted=!1,this.gain=1}return Object(r.c)([d.A],e.prototype,"muted",void 0),Object(r.c)([d.A],e.prototype,"gain",void 0),e}(),T=function(){function e(){this.mic_muted_locally=!1,this.output_muted_locally=!1,this.has_no_mic_for_session=!1}return Object(r.c)([d.A],e.prototype,"mic_muted_locally",void 0),Object(r.c)([d.A],e.prototype,"output_muted_locally",void 0),Object(r.c)([d.A],e.prototype,"has_no_mic_for_session",void 0),e}(),M=function(){function e(){this.partner_accountid=0,this.voice_chatid="",this.previously_joined=!1,this.audio_repeat=0,this.audio_buffer=void 0}return e.prototype.ClearAudioRepeats=function(){0!=this.audio_repeat&&(ClearBackgroundTimeout(this.audio_repeat),this.audio_repeat=0),null!=this.audio_buffer&&(this.audio_buffer.StopPlayback(),this.audio_buffer=void 0)},Object(r.c)([d.A],e.prototype,"partner_accountid",void 0),Object(r.c)([d.A],e.prototype,"voice_chatid",void 0),Object(r.c)([d.A],e.prototype,"previously_joined