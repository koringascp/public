/*! This file includes third-party software, governed by the licenses described here: https://steamcommunity.com/public/javascript/webui/friends.licenses.txt */










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
webpackJsonp([1],{"1PJo":function(e,t,i){"use strict";function n(){return le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Hyperlink","data-name":"Layer 1",viewBox:"0 0 100 100",x:"0px",y:"0px"},le.createElement("g",{"data-name":"Group"},le.createElement("path",{"data-name":"Path",d:"M50.86,20.23l-9,9,4.24,4.24,9-9c6.35-6.35,16.09-6.93,21.73-1.3s5,15.38-1.3,21.73l-9,9,4.24,4.24,9-9c8.69-8.69,9.27-22.24,1.3-30.21S59.55,11.55,50.86,20.23Z"}),le.createElement("path",{"data-name":"Path",d:"M44.89,75.53a17.22,17.22,0,0,1-11.28,5.13A13.23,13.23,0,0,1,19.34,66.39a17.22,17.22,0,0,1,5.13-11.28l9-9-4.24-4.24-9,9a23.21,23.21,0,0,0-6.88,15.22c0,.37,0,.74,0,1.11A19.19,19.19,0,0,0,33.91,86.66a23.21,23.21,0,0,0,15.22-6.88l9-9-4.24-4.24Z"}),le.createElement("rect",{"data-name":"Path",className:"Link1",x:"28.75",y:"47",width:"42.48",height:"6",transform:"translate(-20.71 50) rotate(-45)"})))}function r(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Settings",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-305.5 396.5 256 256",enableBackground:"new -305.5 396.5 256 256"},le.createElement("path",{d:"M-232.755,589.942l3.103,2.408c5.78,4.492,11.973,8.18,18.409,10.959l3.581,1.547l2.276,33.783 c0.089,1.33,1.385,2.54,2.715,2.54h48.62c1.355,0,2.745-1.273,2.852-2.621l2.74-33.284l3.602-1.496 c6.406-2.656,12.646-6.262,18.554-10.707l3.137-2.366l30.578,15.009c1.155,0.571,2.924,0.017,3.563-1.087l24.303-42.1 c0.674-1.173,0.265-3.014-0.852-3.785l-27.872-19.309l0.469-3.832c0.495-4.032,0.725-7.395,0.725-10.57 c0-3.129-0.227-6.5-0.687-10.307l-0.469-3.896l28.699-19.253c1.112-0.741,1.509-2.473,0.84-3.627l-24.3-42.104 c-0.657-1.139-2.502-1.727-3.7-1.155l-31.208,14.748l-3.091-2.341c-5.571-4.224-11.466-7.688-17.522-10.306l-3.58-1.548 l-2.34-34.887c-0.089-1.33-1.381-2.536-2.715-2.536h-48.617c-1.355,0-2.74,1.274-2.851,2.626l-2.834,34.371l-3.593,1.501 c-6.082,2.535-12.028,5.924-17.667,10.071l-3.124,2.302l-31.392-15.413c-1.168-0.575-2.924-0.025-3.559,1.074l-24.309,42.107 c-0.678,1.172-0.264,3.014,0.848,3.781l28.068,19.444l-0.524,3.883c-0.592,4.378-0.865,8.018-0.865,11.462 c0,2.988,0.179,6.065,0.55,9.403l0.431,3.853l-28.528,19.125c-1.108,0.742-1.509,2.468-0.84,3.632l24.308,42.1 c0.656,1.142,2.489,1.726,3.7,1.154L-232.755,589.942z M-177.498,560.051c-19.311,0-35.02-15.709-35.02-35.02 s15.709-35.02,35.02-35.02s35.02,15.709,35.02,35.02S-158.188,560.051-177.498,560.051z"}))}function o(){return le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ChatSettings",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 600 600"},le.createElement("g",null,le.createElement("path",{d:"M256,0C126.6,0,21.3,104.7,21.3,233.7c0,65.9,26.5,125.4,74.7,168.3v99.3c0,3.8,2,7.4,5.3,9.2c1.7,1,3.5,1.5,5.3,1.5   c1.8,0,3.7-0.5,5.4-1.5l85.8-50.3c18.9,4.8,38.4,7.3,58.1,7.3c129.4,0,234.7-104.9,234.7-233.7C490.7,104.7,385.4,0,256,0z    M405.3,254.1L370,260c-3,13.5-8.3,26-15.5,37.3l20.8,29.2L347.8,354l-29.2-20.8c-11.3,7.2-23.8,12.5-37.3,15.5l-5.9,35.3h-39   l-5.9-35.3c-13.5-3-26-8.3-37.3-15.5L164.2,354l-27.5-27.5l20.8-29.2C150.3,286,145,273.5,142,260l-35.3-5.9v-39l35.3-5.9   c3-13.5,8.3-26,15.5-37.3l-20.8-29.2l27.5-27.5l29.2,20.8c11.3-7.2,23.8-12.5,37.3-15.5l5.9-35.3h39l5.9,35.3   c13.5,3,26,8.3,37.3,15.5l29.2-20.8l27.5,27.5L354.5,172c7.2,11.3,12.5,23.8,15.5,37.3l35.3,5.9V254.1z"}),le.createElement("circle",{cx:"256",cy:"234.6",r:"45.9"})))}function a(){return le.createElement("svg",{version:"1.1",className:"SVGIcon_Button SVGIcon_CopyToClipboard",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"178.25,197.25 247,197.25 247,82.5 175,10.25 111.5,10.25 111.5,56 "}),le.createElement("polygon",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"155,133 83,60.75 11,60.75 11,247.75 155,247.75 "}),le.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"83,60.75 83,133 155,133 "}),le.createElement("polyline",{fill:"none",className:"line",strokeWidth:"12",strokeLinejoin:"round",strokeMiterlimit:"10",points:"175,10.25 175,82.5 247,82.5 "}))}function s(){return le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DownArrowContextMenu","data-name":"Layer 1",viewBox:"0 0 128 128",x:"0px",y:"0px"},le.createElement("polygon",{points:"50 59.49 13.21 22.89 4.74 31.39 50 76.41 95.26 31.39 86.79 22.89 50 59.49"}))}function c(){return le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_MagnifyingGlass",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"},le.createElement("g",{transform:"translate(0,-952.36218)"},le.createElement("path",{className:"ColorSelector",d:"m 40.99855,964.36216 c -15.9798,0 -28.9986,13.01864 -28.9986,28.99862 0,15.97992 13.0188,28.99862 28.9986,28.99862 6.9189,0 13.2881,-2.4349 18.2803,-6.4997 l 23.5927,23.6239 c 1.1714,1.1714 3.0784,1.1715 4.2498,0 1.1716,-1.1715 1.1716,-3.0783 0,-4.2498 l -23.6239,-23.5926 c 4.0649,-4.9923 6.4997,-11.3615 6.4997,-18.28042 0,-15.97998 -13.0187,-28.99862 -28.9986,-28.99862 z m 0,5.99972 c 12.7374,0 22.9989,10.26145 22.9989,22.9989 0,12.73732 -10.2615,22.99892 -22.9989,22.99892 -12.7374,0 -22.9989,-10.2616 -22.9989,-22.99892 0,-12.73745 10.2615,-22.9989 22.9989,-22.9989 z",fill:"#ffffff",fillOpacity:"1",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"})))}function l(e){var t="SVGIcon_Button SVGIcon_Microphone";return e.className&&(t+=" "+e.className),le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-127.5 664.5 256 256"},le.createElement("g",{className:"MicBase"},le.createElement("g",null,le.createElement("g",null,le.createElement("path",{d:"M-64.7,826.3c-0.5-2.9-0.8-5.8-0.8-8.7v-38.2h11.2v36.5L-64.7,826.3z"}),le.createElement("path",{d:"M-54.8,779.9v35.8l-9.6,9.6c-0.4-2.6-0.6-5.1-0.6-7.6v-37.7H-54.8 M-53.8,778.9H-66v38.7c0,3.3,0.4,6.5,1,9.7l11.2-11.2 V778.9L-53.8,778.9z"})),le.createElement("g",null,le.createElement("path",{d:"M56.8,817.6c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1h-35.2 c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6v-38.7H56.8V817.6z"}),le.createElement("path",{d:"M69,778.9H56.8v38.7c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1 h-35.2c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6V778.9L69,778.9z"}))),le.createElement("g",null,le.createElement("path",{d:"M40.6,712.5c0-21.6-17.5-39.1-39.1-39.1c-21.6,0-39.1,17.5-39.1,39.1v87.4l10-10v-72.4h0v-5c0-16.1,13.1-29.1,29.1-29.1 c16.1,0,29.1,13.1,29.1,29.1v5v14.1l10-10V712.5z"})),le.createElement("g",null,le.createElement("path",{d:"M-4.7,835.4c-2.2-0.5-4.4-1.2-6.4-2.2C-9.1,834.2-6.9,834.9-4.7,835.4z"}),le.createElement("path",{d:"M-0.1,836c-0.2,0-0.4,0-0.6,0C-0.6,836-0.4,836-0.1,836z"}),le.createElement("path",{d:"M30.6,806.9C30.6,806.9,30.6,806.9,30.6,806.9v-16.6"}),le.createElement("path",{d:"M-11.9,832.8c0.2,0.1,0.5,0.2,0.7,0.3C-11.4,833-11.7,832.9-11.9,832.8L-11.9,832.8z"}),le.createElement("path",{d:"M-1.7,835.9c-0.3,0-0.5-0.1-0.8-0.1C-2.3,835.8-2,835.8-1.7,835.9z"}),le.createElement("path",{d:"M-3.3,835.7c-0.3-0.1-0.6-0.1-1-0.2C-3.9,835.6-3.6,835.6-3.3,835.7z"}),le.createElement("path",{d:"M30.6,776.1v14.1v16.6c0,0,0,0,0,0s0,0,0,0c0,16.1-13,29.1-29.1,29.1c-0.5,0-1.1,0-1.6,0c-0.2,0-0.4,0-0.6,0 c-0.3,0-0.6,0-1-0.1c-0.3,0-0.5-0.1-0.8-0.1c-0.2,0-0.5-0.1-0.7-0.1c-0.3-0.1-0.6-0.1-1-0.2c-0.2,0-0.3-0.1-0.5-0.1 c-2.2-0.5-4.4-1.2-6.4-2.2c0,0-0.1,0-0.1,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-3-1.6-5.7-3.6-8-6.1l-7.1,7.1 c7.1,7.6,17.3,12.3,28.5,12.3c21.6,0,39.1-17.5,39.1-39.1v-40.8L30.6,776.1z"}),le.createElement("path",{d:"M-0.8,836c-0.3,0-0.6-0.1-1-0.1C-1.4,835.9-1.1,835.9-0.8,836z"}),le.createElement("path",{d:"M1.5,836.1c-0.5,0-1.1,0-1.6,0C0.4,836,0.9,836.1,1.5,836.1z"}),le.createElement("path",{d:"M-2.6,835.8c-0.2,0-0.5-0.1-0.7-0.1C-3,835.7-2.8,835.7-2.6,835.8z"}),le.createElement("path",{d:"M1.5,836.1c16.1,0,29.1-13,29.1-29.1c0,0,0,0,0,0C30.6,823,17.6,836.1,1.5,836.1z"}),le.createElement("path",{d:"M-4.2,835.5c-0.2,0-0.3-0.1-0.5-0.1C-4.5,835.4-4.4,835.5-4.2,835.5z"}),le.createElement("path",{d:"M-11.1,833.2C-11.1,833.2-11.2,833.2-11.1,833.2C-11.2,833.2-11.1,833.2-11.1,833.2z"}))),le.createElement("g",{className:"MicFill"},le.createElement("g",null,le.createElement("path",{d:"M-53.8,816.1L-65,827.3c2.2,10.8,7.9,20.5,16.2,28.3l8.6-8.6c-8.5-7.9-13.6-18.2-13.6-29.4V816.1L-53.8,816.1z"})),le.createElement("g",null,le.createElement("path",{d:"M1.5,834.6c-15.2,0-27.6-12.4-27.6-27.6v-94.5c0-15.2,12.4-27.6,27.6-27.6c15.2,0,27.6,12.4,27.6,27.6v94.5 C29.1,822.2,16.7,834.6,1.5,834.6z"}),le.createElement("path",{d:"M1.5,696.3c8.9,0,16.1,7.2,16.1,16.1v94.5c0,8.9-7.2,16.1-16.1,16.1c-8.9,0-16.1-7.2-16.1-16.1v-94.5 C-14.6,703.6-7.4,696.3,1.5,696.3 M1.5,673.3c-21.6,0-39.1,17.5-39.1,39.1v94.5c0,21.6,17.5,39.1,39.1,39.1s39.1-17.5,39.1-39.1 v-94.5C40.6,690.8,23.1,673.3,1.5,673.3L1.5,673.3z"}))),le.createElement("g",{className:"MicStrike",fill:"none",strokeWidth:"1"},le.createElement("line",{x1:"-82.5",y1:"866.5",x2:"83.5",y2:"700.4"})))}function u(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Emoticon",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeMiterlimit:"10",cx:"128",cy:"128",r:"107.5"}),le.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",d:"M74.484,145.945 c0,0,12.996,37.533,53.514,37.533c38.084,0,53.499-37.533,53.499-37.533"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",x1:"94.5",y1:"97.5",x2:"94.5",y2:"109.5"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"12",strokeLinecap:"round",strokeMiterlimit:"10",x1:"160.5",y1:"97.5",x2:"160.5",y2:"109.5"}))}function d(){return le.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Submit",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"},le.createElement("g",{transform:"translate(0,-952.36218)"},le.createElement("path",{d:"m 92.115057,974.14842 a 2.0001999,2.0001999 0 0 0 -1.96764,2.02965 l 0.0376,31.19553 -77.475501,0 16.161909,-15.73013 a 2.0002746,2.0002746 0 1 0 -2.790355,-2.8667 L 6.3913393,1007.9405 a 2.0001999,2.0001999 0 0 0 -0.0011,2.8646 l 19.6896957,19.2036 a 2.0002671,2.0002671 0 1 0 2.792551,-2.8646 l -16.170767,-15.771 79.153048,0 a 2.0001999,2.0001999 0 0 0 1.72959,-0.5437 2.0001999,2.0001999 0 0 0 0.0598,-0.058 2.0001999,2.0001999 0 0 0 0.54259,-1.7218 l -0.0388,-32.87638 a 2.0001999,2.0001999 0 0 0 -2.03297,-2.02522 z",fill:"#FFFFFF",fillOpacity:"1",fillRule:"evenodd",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"})))}function p(){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ResizeIcon",x:"0px",y:"0px",viewBox:"0 0 256 256"},le.createElement("g",null,le.createElement("path",{fill:"#020202",d:"M115.512,137.263l21.6-21.6c0,0,25.5,25.5,45.8,45.8l35-35v91.6h-91.6l35-35 C141.012,162.763,115.512,137.263,115.512,137.263z"}),le.createElement("path",{fill:"#020202",d:"M108.312,129.763c-20.3-20.3-35.8-35.8-35.8-35.8l21.6-21.601c0,0,15.5,15.5,35.8,35.801L108.312,129.763z"}),le.createElement("path",{fill:"#020202",d:"M54.312,75.763c-20.3-20.3-15.8-15.8-15.8-15.8l21.6-21.601c0,0-4.5-4.5,15.8,15.801L54.312,75.763z"})))}function m(){return le.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Popout",viewBox:"0 0 8 8",x:"0px",y:"0px"},le.createElement("path",{d:"M0 0v8h8v-2h-1v1h-6v-6h1v-1h-2zm4 0l1.5 1.5-2.5 2.5 1 1 2.5-2.5 1.5 1.5v-4h-4z"}))}function h(){return le.createElement("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_X",version:"1.1",x:"0px",y:"0px",viewBox:"-165 95 100 100"},le.createElement("g",null,le.createElement("polygon",{points:"-74.9,117.2 -102.2,145 -74.9,172.8 -89.1,186.8 -116.2,159.3 -143.2,186.8 -157.5,172.8 -130.2,145 -157.5,117.2 -143.2,103.2 -116.2,130.7 -89.1,103.2"})))}function g(){return le.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_X_Line",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"45",strokeMiterlimit:"10",x1:"212",y1:"212",x2:"44",y2:"44"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"45",strokeMiterlimit:"10",x1:"44",y1:"212",x2:"212",y2:"44"}))}function f(e){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_VoiceRoom",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64"},!e.exitOnly&&le.createElement("g",null,le.createElement("path",{className:"Bubble",fill:"none",strokeMiterlimit:"1",strokeWidth:"2.5px",d:"M60.1,32.3c0,15.1-12.3,27.3-27.4,27.3 c-5,0-9.7-1.4-13.8-3.7c-1.8-1.1-15,5.4-13.8,3.4c1.7-2.9,5.9-10.3,4.7-12C7,43,5.3,37.8,5.3,32.3C5.3,17.2,17.6,5,32.7,5 C47.8,5,60.1,17.2,60.1,32.3z"})),!e.exitOnly&&le.createElement("g",null,le.createElement("path",{className:"AudioLines",opacity:"0",strokeWidth:"1px",d:"M37.2,51.1c-0.5,0-1-0.1-1.3-0.4c-0.7-0.5-0.7-1.3,0-1.8c6.3-4.4,9.8-10.2,9.8-16.4c0-6.2-3.5-12-9.8-16.4 c-0.7-0.5-0.7-1.3,0-1.8s1.9-0.5,2.6,0c7.1,4.9,10.9,11.4,10.9,18.3c0,6.9-3.9,13.4-10.9,18.3C38.2,51,37.7,51.1,37.2,51.1 M21.4,40.2c0.5,0,0.9-0.1,1.3-0.4c2.8-2,4.3-4.6,4.3-7.3s-1.5-5.4-4.3-7.3c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c2.1,1.5,3.3,3.4,3.3,5.5c0,2.1-1.2,4-3.3,5.5c-0.7,0.5-0.7,1.3,0,1.8C20.4,40.1,20.9,40.2,21.4,40.2 M29.3,45.7 c0.5,0,1-0.1,1.3-0.4c4.9-3.4,7.7-7.9,7.7-12.7c0-4.8-2.7-9.3-7.7-12.7c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c4.2,2.9,6.6,6.8,6.6,10.9c0,4.1-2.3,8-6.6,10.9c-0.7,0.5-0.7,1.3,0,1.8C28.4,45.5,28.8,45.7,29.3,45.7"})),le.createElement("g",{className:"Arrow",opacity:e.exitOnly?1:0},le.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,19.4 "}),le.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,42 "})),le.createElement("g",null,le.createElement("polyline",{className:"ExitDoor",opacity:e.exitOnly?1:0,strokeLinecap:"round",strokeMiterlimit:"1",strokeWidth:"2px",fill:"none",points:"32.5,22.1 32.5,17.7 47.7,17.7 47.7,43.8 32.5,43.8 32.5,39.5"})),!e.exitOnly&&le.createElement("g",{className:"Microphone"},le.createElement("path",{d:"M40.971,28.593v6.278c0,4.007-4.023,7.284-8.971,7.284c-2.693,0-5.126-0.974-6.765-2.516 c-1.379-1.28-2.207-2.952-2.207-4.769v-6.278l0,0H21.05v6.278c0,0.536,0.064,1.055,0.162,1.573 c0.357,1.752,1.281,3.325,2.627,4.592c1.801,1.702,4.332,2.839,7.17,3.049v4.072H25.3c-0.341,0-0.616,0.438-0.616,0.989 c0,0.552,0.275,0.99,0.616,0.99h5.759h1.882H38.7c0.341,0,0.616-0.438,0.616-0.99c0-0.551-0.275-0.989-0.616-0.989h-5.71v-4.072 c5.58-0.422,9.96-4.396,9.96-9.214v-6.278H40.971z"}),le.createElement("g",null,le.createElement("path",{d:"M32,39.841c-3.493,0-6.343-2.344-6.343-5.213v-17.85c0-2.871,2.85-5.213,6.343-5.213s6.343,2.342,6.343,5.213v17.85,C38.343,37.497,35.493,39.841,32,39.841z"}))))}function _(){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ExitIcon",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64"},le.createElement("g",{className:"Arrow"},le.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,19.4 "}),le.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"41,30.7 14.5,30.7 23.5,42 "})),le.createElement("g",null,le.createElement("polyline",{className:"ExitDoor",strokeLinecap:"round",strokeMiterlimit:"1",strokeWidth:"2px",fill:"none",points:"32.5,22.1 32.5,17.7 47.7,17.7 47.7,43.8 32.5,43.8 32.5,39.5"})))}function y(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_TextRoom",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256",stroke:"#000",strokeWidth:"10px"},le.createElement("g",{className:"ScratchPad"},le.createElement("path",{fill:"none",strokeWidth:"0",strokeMiterlimit:"10",d:"M179.751,40.994h14.869 c8.388,0,15.25,6.862,15.25,15.25v141.193c0,8.388-6.862,15.25-15.25,15.25H57.37c-8.388,0-15.25-6.862-15.25-15.25V56.244 c0-8.388,6.862-15.25,15.25-15.25h14.869H179.751z"}),le.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"74.495",y1:"27.313",x2:"74.495",y2:"54.063"}),le.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"124.495",y1:"27.313",x2:"124.495",y2:"54.063"}),le.createElement("line",{fill:"none",strokeWidth:"0",strokeLinecap:"round",strokeMiterlimit:"10",x1:"174.745",y1:"27.313",x2:"174.745",y2:"54.063"})),le.createElement("line",{className:"TextLines",x1:"71.6",y1:"115.4",x2:"179.4",y2:"115.4"}),le.createElement("line",{className:"TextLines",x1:"71.6",y1:"145.8",x2:"143.3",y2:"145.8"}),le.createElement("line",{className:"TextLines",x1:"71.6",y1:"175.9",x2:"179.4",y2:"175.9"}),le.createElement("line",{className:"TextLines",x1:"73.7",y1:"82.7",x2:"166.8",y2:"82.7"}))}function v(e){var t="SVGIcon_Button SVGIcon_Headphones";return e.className&&(t+=" "+e.className),le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"-305.5 396.5 256 256"},le.createElement("g",{className:"HeadPhonesBase"},le.createElement("g",null,le.createElement("path",{fill:"none",d:"M-176.5,418.7c-37,0-69.5,30.2-69.5,64.5v25.3c11.3,2.3,19.9,12.3,19.9,24.3v8.6l100.9-100.9 C-138.2,427.3-156.7,418.7-176.5,418.7z"}),le.createElement("path",{d:"M-226.2,532.9c0-12-8.5-22-19.9-24.3v-25.3c0-34.4,32.5-64.5,69.5-64.5c19.8,0,38.3,8.6,51.2,21.9l6.9-6.9 c-14.8-15.1-35.7-24.9-58.2-24.9c-42.3,0-79.4,34.8-79.4,74.5v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8c0,7.8,3.6,14.7,9.2,19.3 l40.5-40.5V532.9z"}),le.createElement("path",{d:"M-97.1,508.6v-25.3c0-7.5-1.3-14.8-3.8-21.8l-7.9,7.9c1.2,4.5,1.8,9.1,1.8,13.9v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8 c0,13.7,11.1,24.8,24.8,24.8c13.7,0,24.8-11.1,24.8-24.8v-29.8C-77.2,520.9-85.8,510.9-97.1,508.6z"}))),le.createElement("g",{className:"HeadphonesStrike"},le.createElement("line",{fill:"none",x1:"-260.5",y1:"598.5",x2:"-94.5",y2:"432.4"})),le.createElement("g",{className:"HeadPhonesFill"},le.createElement("path",{d:"M-226.2,562.7v-21.2l-40.5,40.5c4.3,3.5,9.7,5.6,15.6,5.6C-237.3,587.5-226.2,576.4-226.2,562.7z"}),le.createElement("path",{d:"M-118.3,433.7l-6.9,6.9c7.9,8.1,13.7,18,16.5,28.8l7.9-7.9C-104.5,451.1-110.5,441.6-118.3,433.7z"})))}function b(){return le.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Group",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{transform:"translate(0,-952.36218)"},le.createElement("path",{d:"M58.6,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1\tC86.7,983,74,970.4,58.6,970.4z M202.1,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C230.2,983,217.6,970.4,202.1,970.4z M130.4,986c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C158.5,998.6,145.8,986,130.4,986z M242.8,1110.6c0-0.1,0-17.9,0-18l-0.1-16.1c0-22.4-18.2-40.6-40.6-40.6 c-17.8,0-30,7.7-36.3,18.8c-2,3.5-3.4,7.3-4.5,11.1c-7.5-8.7-18.6-14.3-31-14.3s-23.5,5.6-31,14.3c-1.1-3.9-2.5-7.6-4.5-11.1 c-6.3-11.1-18.4-18.8-36.3-18.8c-22.4,0-40.6,18.2-40.6,40.6v46.8c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2 c3.4,0,6.2-2.8,6.2-6.2v-31.2h9.4v9.4c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2H146c3.4,0,6.2-2.8,6.2-6.2v-31.2 h12.5c3.4,0,6.2-2.8,6.2-6.2v-9.4h9.4v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2c3.4,0,6.2-2.8,6.2-6.2v-31.2h12.5c3.4,0,6.3-2.7,6.3-6.2\tV1110.6z"})))}function C(){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_PlusCircle",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("circle",{fill:"none",strokeWidth:"10",strokeMiterlimit:"10",cx:"128",cy:"128",r:"95.333"}),le.createElement("line",{className:"horizontalLine",fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"73.333",y1:"128",x2:"183.333",y2:"128"}),le.createElement("line",{className:"verticalLine",fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"128.333",y1:"73.335",x2:"128.333",y2:"183.333"}))}function S(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_AddFriend",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"friendHead",transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},le.createElement("circle",{cx:"86.296",cy:"47.419",r:"33.526"})),le.createElement("path",{className:"friendBody",d:"M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"}),le.createElement("path",{className:"plusCircle",d:"M179.01,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.989,66.99,66.989c36.997,0,66.99-29.991,66.99-66.989 S216.008,103.892,179.01,103.892z M217.893,175.882h-33.647v33.882c0,2.762-2.239,5-5,5s-5-2.238-5-5v-33.882h-33.647 c-2.762,0-5-2.238-5-5c0-2.763,2.238-5,5-5h33.647V132.47c0-2.762,2.239-5,5-5s5,2.238,5,5v33.412h33.647c2.762,0,5,2.237,5,5 C222.893,173.643,220.654,175.882,217.893,175.882z"}))}function M(){return le.createElement("svg",{version:"1.1",id:"Layer_4",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FriendRequest",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"friendHead",transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},le.createElement("circle",{cx:"85.923",cy:"47.419",r:"33.526"})),le.createElement("path",{className:"friendBody",d:"M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"}),le.createElement("path",{className:"friendBodyFull",d:"M176.504,217.922v-42.624c0-35.443-17.002-64.217-57.483-64.217H106.96h-1.017H94.898 c-40.48,0.001-57.484,28.774-57.484,64.217v42.624c0,0,0,22.197,69.544,22.197C177.521,240.121,176.504,217.922,176.504,217.922z"}),le.createElement("path",{className:"friendArm",d:"M18.167,63.833c6.53-0.734,39.348,39.127,50.007,47.647s21.327,16.686,15.16,25.353s-20.646,16.74-36.167,2.5 S-1.349,90.532,0,85.333S8.599,64.909,18.167,63.833z"}),le.createElement("path",{className:"redCircle",d:"M178.51,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.99,66.99,66.99c36.997,0,66.99-29.992,66.99-66.99 S215.508,103.892,178.51,103.892z"}))}function F(){return le.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Invite",x:"0px",y:"0px",width:"256px",height:"255.999px",viewBox:"0 0 256 255.999"},le.createElement("path",{d:"M165.678,20.535c-17.251,0-31.386,14.135-31.386,31.386c0,17.252,14.135,31.386,31.386,31.386 c17.251,0,31.386-14.134,31.386-31.386C197.063,34.67,182.929,20.535,165.678,20.535z"}),le.createElement("path",{d:"M165.678,93.121c24.995,0,45.335,20.34,45.335,45.335v52.31c0,3.853-3.123,6.975-6.975,6.975h-13.95v34.874 c0,3.852-3.123,6.974-6.974,6.975h-34.874c-3.852-0.001-6.974-3.123-6.975-6.975v-34.874h-13.95c-3.852,0-6.974-3.123-6.974-6.975 v-52.31C120.343,113.461,140.683,93.121,165.678,93.121z"}),le.createElement("g",{className:"invitePlus"},le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",x1:"14",y1:"128",x2:"101.5",y2:"128"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",x1:"57.75",y1:"84.25",x2:"57.75",y2:"171.75"})))}function w(){return le.createElement("svg",{version:"1.1",id:"Layer_5",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Paperclip",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",d:"M167.768,62.647 l-0.012,123.052c0,24.729-19.334,44.856-43.096,44.866c-23.765-0.006-43.099-20.134-43.096-44.872L81.557,48.851 c0-15.345,14.483-27.827,29.83-27.83c15.342,0.003,27.827,12.488,27.833,27.833l-0.002,139.245 c0.003,6.376-8.546,12.925-14.925,12.925c0,0-13.929-0.166-13.929-12.928l0.003-124.839"}))}function B(){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Volume",x:"0px",y:"0px",width:"256px",height:"255.999px",viewBox:"0 0 256 255.999"},le.createElement("g",{className:"Speaker"},le.createElement("path",{d:"M93.785,52.265c-0.946,0-2.357,0.63-3.304,1.577L40.284,98.022c-0.947,0.789-2.831,1.578-4.093,1.578H9.367 C8.104,99.6,7,100.706,7,101.967v52.069c0,1.264,1.104,2.367,2.367,2.367H36.19c1.262,0,3.146,0.632,4.093,1.578l50.197,44.181 c0.947,0.789,2.516,1.578,3.304,1.578s1.578-1.104,1.578-2.367V54.631C95.363,53.369,94.731,52.265,93.785,52.265z"})),le.createElement("g",{className:"SoundWaves"},le.createElement("path",{className:"SoundWavesHighest",d:"M193.826,30.402c24.959,24.958,40.349,59.403,40.349,97.604c0,38.199-15.388,72.645-40.349,97.603l9.916,9.916 c28.067-28.067,44.263-64.673,44.263-107.521c0-42.847-16.196-79.455-44.263-107.521"}),le.createElement("path",{className:"SoundWavesHigh",d:"M175.737,47.628l-8.924,8.924c18.271,18.27,29.536,43.484,29.536,71.448s-11.264,53.178-29.536,71.448l8.924,8.924 c20.546-20.546,33.234-49.008,33.234-80.374c0-31.366-12.688-59.829-33.234-80.374V47.628z"}),le.createElement("path",{className:"SoundWavesMed",d:"M148.913,74.454l-8.925,8.925c11.488,11.488,18.491,27.236,18.491,44.624c0,17.388-7.054,33.281-18.491,44.575l8.875,8.975 c13.811-13.635,22.239-32.753,22.239-53.55c0-20.797-8.432-39.793-22.189-53.55V74.454z"}),le.createElement("path",{className:"SoundWavesLow",d:"M121.989,101.229l-8.778,9.073c4.641,4.516,7.397,10.706,7.397,17.702c0,6.995-2.755,13.186-7.397,17.702l8.778,9.073 c7.035-6.844,11.243-16.413,11.243-26.775C133.232,117.643,129.024,108.075,121.989,101.229z"})),le.createElement("g",{className:"SoundX"},le.createElement("line",{fill:"none",strokeWidth:"0",strokeMiterlimit:"10",x1:"137",y1:"170.667",x2:"223.167",y2:"84.5"}),le.createElement("line",{fill:"none",strokeWidth:"0",strokeMiterlimit:"10",x1:"137",y1:"84.5",x2:"223.167",y2:"170.667"})))}function O(){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_NewChatGroup",x:"0px",y:"0px",viewBox:"0 0 256 256"},le.createElement("path",{className:"Bubble",strokeWidth:"12",strokeMiterlimit:"10",d:"M127.393,10.833 c64.854,0,117.46,52.609,117.46,117.013c0,24.035-7.254,45.804-19.5,63.943c-4.99,7.711,13.15,39.457,20.408,51.705 c4.989,8.612-51.701-19.05-59.412-14.514c-17.233,9.979-37.188,15.872-58.957,15.872c-64.859,0-117.465-52.607-117.465-117.008 C9.928,63.442,62.534,10.833,127.393,10.833z"}),le.createElement("line",{strokeWidth:"22",strokeLinecap:"round",strokeMiterlimit:"10",x1:"83.5",y1:"128.886",x2:"176.184",y2:"128.886"}),le.createElement("line",{strokeWidth:"22",strokeLinecap:"round",strokeMiterlimit:"10",x1:"129.842",y1:"82.544",x2:"129.842",y2:"175.228"}))}function I(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Crown",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",null,le.createElement("path",{d:"M239.874,94.963l-31.115,21.325c-18.18,12.586-43.351,5.594-52.44-14.333l-23.772-50.692c-2.099-4.194-8.041-4.194-9.789,0 l-23.074,50.343c-9.439,20.627-35.31,27.27-53.49,13.983L16.128,93.565c-4.195-3.147-10.139,1.049-8.391,6.293l31.464,106.628 c0.35,1.049,1.398,1.397,2.098,1.397h173.752c1.049,0,1.749-0.698,2.098-1.397l31.115-104.53 C250.012,96.36,244.068,91.816,239.874,94.963z"})))}function R(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Play",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{className:"playTriangle",d:"M65.321,33.521c-11.274-6.615-20.342-1.471-20.342,11.52V210.96c0,12.989,9.068,18.135,20.342,11.521l137.244-82.348 c11.274-6.618,11.274-17.646,0-24.509L65.321,33.521z"}))}function E(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Pause",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{d:"M44.979,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6H50.979c-3.3,0-6,2.7-6,6V219.364z"}),le.createElement("path",{d:"M149.267,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6h-49.753c-3.3,0-6,2.7-6,6V219.364z"}))}function T(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_SortBy",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"time"},le.createElement("circle",{fill:"none",strokeWidth:"10",strokeMiterlimit:"10",cx:"91.735",cy:"128.014",r:"64"}),le.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"91.735,90.833 91.735,128.014 116.58,152.086 \t"})),le.createElement("g",{className:"arrow"},le.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"199.735,63.66 199.735,192.366 171.207,163.675"}),le.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"199.735,63.66 199.735,192.366 228.266,163.675"})),le.createElement("g",{className:"alphabet"},le.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"70.268,109.934 94.483,63.635 119.77,109.934"}),le.createElement("line",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",x1:"77.458",y1:"97.861",x2:"112.135",y2:"97.861"}),le.createElement("polyline",{fill:"none",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"70.045,145.379 119.547,145.379 70.045,192.032 119.547,192.032"})))}function k(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Check",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polyline",{fill:"none",stroke:"#fff",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"49.5,147.75 95,210.75 206.5,45.25 "}))}function D(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DialogCheck",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("defs",null,le.createElement("linearGradient",{id:"linear",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},le.createElement("stop",{id:"stop0",offset:"0%",stopColor:"#00ccff"}),le.createElement("stop",{id:"stop1",offset:"100%",stopColor:"#2d73ff"})),le.createElement("filter",{id:"f1",x:"0",y:"0",width:"200%",height:"200%"},le.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"20",dy:"20"}),le.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"10"}),le.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}))),le.createElement("path",{fill:"none",stroke:"url(#linear)",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"10",d:"M206.5,45.25L95,210.75l-45.5-63",strokeDasharray:"365.19 365.19",strokeDashoffset:"0.00"}),le.createElement("path",{fill:"none",opacity:".2",filter:"url(#f1)",stroke:"url(#linear)",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"10",d:"M206.5,45.25L95,210.75l-45.5-63",strokeDasharray:"365.19 365.19",strokeDashoffset:"0.00"}))}function G(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Caution",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"triangle"},le.createElement("path",{stroke:"#020202",strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",d:"M127.9,76.632"}),le.createElement("path",{fill:"none",stroke:"#020202",strokeWidth:"11",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"5",d:"M128.001,226.606c42.507,0,81.538,0,87.756,0c31.222,0,36.95-14.974,24.045-34.771c-6.921-10.617-78.297-122.962-89.163-140.254\tC141.859,37.613,138.542,29.393,128,29.393l0,0c-10.543,0-13.86,8.222-22.639,22.189C94.495,68.874,23.119,181.219,16.198,191.836 c-12.905,19.797-7.175,34.771,24.045,34.771C46.463,226.606,85.494,226.606,128.001,226.606"}),le.createElement("path",{fill:"#020202",d:"M127.9,208.12"})),le.createElement("g",{className:"exclamation"},le.createElement("line",{fill:"none",stroke:"#020202",strokeWidth:"16",strokeLinecap:"round",strokeMiterlimit:"10",x1:"127.9",y1:"76.632",x2:"127.9",y2:"160.07"}),le.createElement("path",{fill:"#020202",d:"M127.9,208.12c-6.377,0-11.548-5.17-11.548-11.548c0-6.377,5.17-11.547,11.548-11.547 c6.377,0,11.547,5.17,11.547,11.547C139.447,202.95,134.277,208.12,127.9,208.12"})))}function N(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Lock",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{className:"topLock",d:"M203.553,197.794c0,21.929-17.778,39.706-39.706,39.706H92.154c-21.929,0-39.706-17.777-39.706-39.706v-71.693 c0-21.928,17.778-39.706,39.706-39.706h71.692c21.928,0,39.706,17.778,39.706,39.706V197.794z M128.001,129.664 c-8.941,0-16.19,7.248-16.19,16.189c0,5.589,2.833,10.518,7.137,13.427c2.066,1.395,0.318,23.508,0.318,32.842 c0,2.292-0.078,3.65,8.734,3.65c8.676,0,8.75-1.221,8.75-3.654c0-9.348-1.708-31.469,0.368-32.886 c4.269-2.916,7.071-7.821,7.071-13.38C144.191,136.912,136.941,129.664,128.001,129.664z"}),le.createElement("path",{className:"baseLock",fill:"none",stroke:"#ffffff",strokeWidth:"22",strokeMiterlimit:"10",d:"M84.813,172.74V73.688l0,0 c0-23.85,19.335-43.188,43.187-43.188l0,0c23.852,0,43.188,19.337,43.188,43.188l0,0v23.885"}))}function L(e){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Throbber "+(e.className&&e.className),x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{id:"partCircle"},le.createElement("path",{className:"roundOuter",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895"}),le.createElement("path",{className:"roundOuter",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M201.432,101.166"}),le.createElement("path",{className:"roundOuter",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754"})),le.createElement("g",{id:"mainOutline"},le.createElement("path",{className:"roundFill",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundOuterOutline",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber01",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber02",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber03",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber04",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber05",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber06",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber07",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber08",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber09",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber10",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber11",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber12",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber13",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber14",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"}),le.createElement("path",{className:"roundThrobber15",strokeLinecap:"butt",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",d:"M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"})),le.createElement("g",{id:"bottomCircle"},le.createElement("path",{fill:"#ffffff",d:"M89.226,181.579L76.5,176.321c2.256,4.696,6.159,8.628,11.339,10.786 c11.197,4.668,24.11-0.647,28.779-11.854c2.259-5.425,2.274-11.405,0.033-16.841c-2.237-5.436-6.46-9.675-11.886-11.938 c-5.384-2.24-11.151-2.156-16.22-0.244l13.146,5.436c8.261,3.443,12.166,12.93,8.725,21.189 C106.976,181.115,97.486,185.022,89.226,181.579"})),le.createElement("g",{id:"topCircle"},le.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",cx:"161.731",cy:"101.274",r:"23.019"})))}function A(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Video",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{className:"videoPlayButton",d:"M165.399,124.063L109.118,92.06c-1.399-0.797-3.118-0.787-4.508,0.026c-1.39,0.805-2.25,2.295-2.25,3.905v64.008 c0,1.609,0.86,3.1,2.25,3.913c0.705,0.412,1.491,0.613,2.277,0.613c0.768,0,1.546-0.191,2.241-0.596l56.283-32.003 c1.416-0.806,2.285-2.306,2.285-3.934C167.694,126.368,166.816,124.869,165.399,124.063z"}),le.createElement("path",{d:"M238.069,40.646H214.25h-28.82h-28.82h-28.458h-0.36H99.333H70.536H41.727h-23.82c-3.184,0-5.773,2.59-5.773,5.772v23.856 v120.441v18.867c0,3.184,2.589,5.771,5.773,5.771h2.415h21.394h28.82h28.82h28.459h0.361h28.457h28.82h28.82h23.82 c3.184,0,5.773-2.589,5.773-5.771v-18.867V70.274V46.418C243.844,43.223,241.254,40.646,238.069,40.646z M191.215,47.181h17.273  V64.5h-17.273V47.181L191.215,47.181z M162.396,47.181h17.272V64.5h-17.272V47.181z M133.938,47.181h16.912V64.5h-16.912V47.181z\tM105.128,47.181h16.912V64.5h-16.912V47.181z M76.309,47.181h17.273V64.5H76.309V47.181z M47.488,47.181h17.273V64.5H47.488V47.181 z M18.681,47.181h17.273V64.5H18.681V47.181z M35.954,208.811H18.681v-17.319h17.273V208.811z M64.763,208.811H47.489v-17.319 h17.273V208.811L64.763,208.811z M93.583,208.811H76.31v-17.319h17.273V208.811z M122.041,208.811h-16.912v-17.319h16.912V208.811z M150.849,208.811h-16.912v-17.319h16.912V208.811z M179.668,208.811h-17.272v-17.319h17.272V208.811z M208.488,208.811h-17.273 v-17.319h17.273V208.811z M237.297,208.811h-17.273v-17.319h17.273V208.811L237.297,208.811z M237.297,184.943H214.25h-28.819 h-28.82h-28.458h-0.361H99.333H70.537H41.728H18.682V71.047h23.046h28.82h28.82h28.458h0.36h28.458h28.82h28.82h23.045v113.896 H237.297z M237.297,64.5h-17.273V47.181h17.273V64.5L237.297,64.5z"}))}function P(){return le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"SVGIcon_Button SVGIcon_Image",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},le.createElement("path",{stroke:"#ffffff",fill:"#ffffff",d:"M83.086,12.091H16.913C10.344,12.091,5,17.435,5,24.004v51.992l0.005,0.102c0.056,6.514,5.396,11.813,11.908,11.813h66.173  c6.531,0,11.874-5.314,11.906-11.764L95,24.004C95,17.435,89.654,12.091,83.086,12.091z M83.086,82.989H16.913  c-3.516,0-6.488-2.653-6.93-6.106l18.899-20.615c1.226-1.34,2.85-2.076,4.574-2.076c1.723,0,3.347,0.736,4.574,2.078l19.611,21.393  c0.885,0.961,2.508,1.029,3.473,0.148c1-0.916,1.068-2.476,0.152-3.478l-4.113-4.485l8.406-8.918  c1.258-1.332,2.926-2.064,4.696-2.064c1.772,0,3.44,0.732,4.696,2.064l15.061,15.973C89.564,80.346,86.594,82.989,83.086,82.989z   M90.08,69.801L78.532,57.555c-2.194-2.328-5.132-3.609-8.275-3.609c-3.142,0-6.08,1.281-8.272,3.609l-8.164,8.656l-12.162-13.27  c-2.171-2.366-5.084-3.67-8.201-3.67c-3.119,0-6.031,1.304-8.202,3.67L9.92,69.673V24.004c0-3.856,3.137-6.994,6.993-6.994h66.173  c3.857,0,6.994,3.137,6.994,6.994V69.801z"}),le.createElement("path",{stroke:"#ffffff",fill:"#ffffff",d:"M68.907,22.489c-6.569,0-11.914,5.344-11.914,11.914c0,6.569,5.345,11.913,11.914,11.913  c6.567,0,11.913-5.344,11.913-11.913C80.82,27.833,75.477,22.489,68.907,22.489z M68.907,41.396c-3.856,0-6.993-3.137-6.993-6.993  s3.137-6.994,6.993-6.994c3.854,0,6.991,3.138,6.991,6.994S72.764,41.396,68.907,41.396z"}))}function x(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Bell",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{d:"M107.785,33.965c-34.875,8.972-60.644,40.618-60.644,78.308v53.903c0,4.965-4.035,8.99-8.975,8.99 c-9.929,0-17.978,8.066-17.978,17.971c0,9.924,8.059,17.969,18.013,17.969h179.598c9.948,0,18.014-8.066,18.014-17.969 c0-9.926-8.087-17.971-17.979-17.971c-4.956,0-8.975-3.993-8.975-8.99v-53.903c0-37.676-25.763-69.333-60.644-78.308v-9.281 c0-11.193-9.052-20.219-20.215-20.219c-11.143,0-20.215,9.052-20.215,20.219V33.965L107.785,33.965z M96.554,220.09h62.891 c0,17.366-14.079,31.445-31.445,31.445C110.633,251.535,96.554,237.458,96.554,220.09z"}))}function z(e){return le.createElement("svg",{version:"1.1",transform:"rotate("+e.angle+")",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Arrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"128,247.688 128,8.313 181.061,61.674 "}),le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"128,247.688 128,8.313 74.939,61.674 "}))}function U(e){var t="";return e.angle&&(t="rotate("+e.angle+")"),le.createElement("svg",{transform:t,version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoubleArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polyline",{className:"Arrow1",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"135.65,21.667 30.081,127.235 137.18,234.333 "}),le.createElement("polyline",{className:"Arrow2",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"224.389,21.667 118.821,127.235 225.92,234.333 "}))}function V(){return le.createElement("svg",{version:"1.1",id:"arrowBase",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoubleArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polyline",{className:"Arrow1",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"135.65,21.667 30.081,127.235 137.18,234.333 "}),le.createElement("polyline",{className:"Arrow2",fill:"none",stroke:"#ffffff",strokeWidth:"23",strokeLinecap:"round",strokeMiterlimit:"10",points:"224.389,21.667 118.821,127.235 225.92,234.333 "}))}function j(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Maximize",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("rect",{x:"24",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"208",height:"171.667"}),le.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"24",y1:"54.01",x2:"232",y2:"54.01"}))}function W(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Minimize",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",x1:"24",y1:"209.01",x2:"232",y2:"209.01"}))}function H(){return le.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Restore",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polyline",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"12",strokeMiterlimit:"10",points:"83,90.861 83,42.167 232,42.167 232,165.14 173,165.14 "}),le.createElement("rect",{x:"24",y:"90.861",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"149",height:"122.973"}))}function q(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_SingleWindowToggle",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"mainBox"},le.createElement("rect",{x:"90",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"142",height:"171.667"}),le.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"90",y1:"54.01",x2:"232",y2:"54.01"})),le.createElement("g",{className:"leftBox"},le.createElement("rect",{x:"28",y:"42.167",fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"18",strokeMiterlimit:"10",width:"62",height:"171.667"}),le.createElement("line",{fill:"none",stroke:"rgb(120, 138, 146)",strokeWidth:"42",strokeMiterlimit:"10",x1:"28",y1:"54.01",x2:"90",y2:"54.01"})))}function K(){return le.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Reload",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"30",strokeLinecap:"round",strokeMiterlimit:"10",d:"M229.809,147.639 c-9.178,47.863-51.27,84.027-101.809,84.027c-57.253,0-103.667-46.412-103.667-103.666S70.747,24.334,128,24.334 c34.107,0,64.368,16.472,83.261,41.895"}),le.createElement("polygon",{points:"147.639,108.361 245.755,10.166 245.834,108.361 "}))}function J(){return le.createElement("svg",{version:"1.1",id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Trade",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{d:"M132.025,162.943h40.246c0,0,3.219,56.879-31.303,79.599c-12.298,8.094,71.103-6.708,75.574-79.599h35.775l-60.146-74.681 L132.025,162.943z"}),le.createElement("path",{d:"M123.975,93.056H83.729c0,0-3.219-56.879,31.303-79.599c12.298-8.094-71.103,6.708-75.574,79.599H3.682l60.146,74.681 L123.975,93.056z"}))}function Y(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Trash",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"base"},le.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M216.773,43.909 l-7.399,177.589c-0.37,8.893-7.919,16.1-16.812,16.1H63.437c-8.914,0-16.442-7.24-16.812-16.1L39.226,43.909"})),le.createElement("g",{className:"lines"},le.createElement("path",{className:"line1",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M128,68.12v137.197"}),le.createElement("path",{className:"line2",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M83.613,68.12 l4.035,137.197"}),le.createElement("path",{className:"line3",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M172.387,68.12 l-4.035,137.197"})),le.createElement("g",{className:"lid"},le.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.121,38.577H228.88"}),le.createElement("path",{fill:"none",stroke:"#ffffff",strokeWidth:"10",d:"M87.648,38.577l4.319-10.796c2.072-5.181,8.292-9.379,13.84-9.379h44.386 c5.572,0,11.761,4.18,13.841,9.379l4.319,10.796"})))}function X(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Scroll",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{transform:"translate(0,-952.36215)"},le.createElement("path",{d:"M49.624,963.362c-20.72,0-37.667,14.78-37.667,32.806c0,3.589,3.353,6.499,7.486,6.499l52.407-0.305v162.5 c0,18.134,17.404,32.5,38.018,32.5h96.508c20.612,0,37.667-14.475,37.667-32.5c0-3.59-3.354-6.499-7.486-6.5H217.84V996.168 c0-18.024-16.947-32.806-37.667-32.806H49.624z M49.624,976.362h2.223c0.569,0.162,1.158,0.265,1.754,0.306 c8.159,1.274,14.426,6.085,16.962,12.694l-42.112,0.306C31.513,981.897,39.656,976.362,49.624,976.362z M79.337,976.362h100.836 c12.587,0,22.694,8.77,22.694,19.806v162.194H139.23c-4.135,0.001-7.486,2.91-7.488,6.5c0,4.609-1.43,7.796-4.21,10.765 c-2.78,2.972-7.203,5.757-13.686,7.923c-0.624,0.201-1.214,0.476-1.755,0.813h-2.223c-12.695,0-23.044-8.573-23.044-19.5v-169 C86.824,988.529,84.023,981.812,79.337,976.362z M108.582,1005.611c-4.135,0.169-7.33,3.216-7.135,6.807 c0.193,3.59,3.702,6.363,7.837,6.194h71.123c4.135,0.051,7.535-2.817,7.592-6.407c0.059-3.591-3.246-6.542-7.381-6.594 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1005.603,108.816,1005.603,108.582,1005.611z M108.582,1044.612 c-4.135,0.169-7.33,3.215-7.135,6.807c0.193,3.588,3.702,6.362,7.837,6.192h71.123c4.135,0.051,7.535-2.816,7.592-6.407 c0.059-3.59-3.246-6.542-7.381-6.592c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1044.603,108.816,1044.603,108.582,1044.612z M108.582,1083.612c-4.135,0.169-7.33,3.216-7.135,6.806c0.193,3.589,3.702,6.363,7.837,6.193h71.123 c4.135,0.052,7.535-2.816,7.592-6.407c0.059-3.59-3.246-6.541-7.381-6.592c-0.069-0.001-0.141-0.001-0.211,0h-71.123 C109.05,1083.602,108.816,1083.602,108.582,1083.612z M108.582,1122.611c-4.135,0.17-7.33,3.216-7.135,6.806 c0.193,3.591,3.702,6.364,7.837,6.195h71.123c4.135,0.05,7.535-2.818,7.592-6.408c0.059-3.591-3.246-6.541-7.381-6.593 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1122.602,108.816,1122.602,108.582,1122.611z M145.547,1171.363h82.002 c-3.09,7.604-11.189,12.999-21.173,12.999h-67.849c0.196-0.197,0.512-0.306,0.703-0.509 C142.576,1180.277,144.436,1175.973,145.547,1171.363z"})))}function Z(e){return le.createElement("svg",{transform:"rotate("+e.angle+")",version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FlatArrow",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polygon",{points:"13.913,141 128,59 242.087,141 ",fill:"#ffffff"}))}function Q(e){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_FriendIcon"+(e.bPending?" SVGIcon_FriendIcon_Pending":""),x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"outline"},le.createElement("g",{transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},le.createElement("path",{d:"M102.239,90.394c-22.556,0-40.906-18.351-40.906-40.906c0-22.556,18.35-40.906,40.906-40.906s40.906,18.35,40.906,40.906 C143.145,72.043,124.795,90.394,102.239,90.394z"})),le.createElement("path",{d:"M127.453,250.212c-30.208,0-52.086-4.188-65.028-12.45c-12.507-7.983-13.141-17.484-13.141-19.308v-41.781 c0-20.554,5.356-38.104,15.489-50.754c11.63-14.519,29.216-22.193,50.858-22.194h23.646c21.643,0,39.229,7.674,50.858,22.193 c10.133,12.65,15.488,30.201,15.488,50.754v41.751c0.011,2.202-0.586,8.058-6.43,14.175 c-11.164,11.687-35.301,17.613-71.732,17.613C127.458,250.212,127.458,250.212,127.453,250.212z"}),le.createElement("path",{className:"WavingArm",opacity:e.bPending?"1":"0",d:"M87.625,170.102c-5.877,0-14.85-1.804-24.219-10.4c-8.677-7.961-20.959-20.438-30.563-31.048 c-18.766-20.732-21.125-26.658-19.522-32.832c1.463-5.64,10.288-27.077,26.729-28.926c0.429-0.048,0.867-0.072,1.303-0.072 c7.609,0,14.543,6.335,38.063,31.516c7.141,7.645,14.524,15.549,18.002,18.33l0.803,0.641c5.551,4.432,11.291,9.015,15.104,14.136 c8.477,11.383,3.634,20.705,1.158,24.185C108.034,164.692,97.995,170.102,87.625,170.102z"})),le.createElement("g",{className:"foreground"},le.createElement("g",{transform:"matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"},le.createElement("circle",{fill:"#FFFFFF",cx:"102.239",cy:"49.488",r:"33.446"})),le.createElement("path",{fill:"#FFFFFF",d:"M195.624,218.454v-41.781c0-34.743-16.666-62.948-56.347-62.948h-11.822h-0.997h-10.826 c-39.68,0.001-56.348,28.205-56.348,62.948v41.781c0,0,0,21.758,68.169,21.758C196.62,240.214,195.624,218.454,195.624,218.454z"}),le.createElement("path",{className:"WavingArm",opacity:e.bPending?"1":"0",d:"M41.167,76.833c6.53-0.734,39.348,39.127,50.007,47.647c10.659,8.52,21.327,16.686,15.16,25.353 s-20.646,16.74-36.167,2.5 s-48.516-48.801-47.167-54S31.599,77.909,41.167,76.833z"})))}function $(){return le.createElement("svg",{version:"1.1",id:"base",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_YouTube",x:"0px",y:"0px",width:"71.412px",height:"50px",viewBox:"0 0 71.412 50"},le.createElement("g",{id:"g5",transform:"scale(0.58823529,0.58823529)"},le.createElement("path",{id:"path7",fill:"#ff0000",d:"M118.9,13.3c-1.4-5.2-5.5-9.3-10.7-10.701C98.7,0,60.7,0,60.7,0 s-38,0-47.5,2.5C8.1,3.9,3.9,8.1,2.5,13.3C0,22.8,0,42.5,0,42.5s0,19.799,2.5,29.199C3.9,76.9,8,80.999,13.2,82.4 C22.8,85,60.7,85,60.7,85s37.999,0,47.5-2.5c5.2-1.399,9.3-5.5,10.7-10.7c2.499-9.501,2.499-29.201,2.499-29.201 S121.5,22.8,118.9,13.3z"}),le.createElement("polygon",{id:"polygon9",fill:"#ffffff",points:"80.201,42.5 48.6,24.3 48.6,60.7"})))}function ee(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_DoNotDisturb",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("circle",{fill:"none",stroke:"#ffffff",strokeWidth:"24",strokeMiterlimit:"10",cx:"128",cy:"128",r:"101.5"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"24",strokeMiterlimit:"10",x1:"73",y1:"128",x2:"183",y2:"128"}))}function te(e){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",transform:e.bFlipHorizontal?"scale(-1 1)":"scale(1 1)",className:"SVGIcon_Button SVGIcon_MediaControls",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{className:"Arrow",d:"M77.003,54.763h32.784c3.794,0,9.113,2.181,11.814,4.848l63.604,62.773c2.703,2.667,2.727,7.054,0.05,9.748 l-63.705,64.206c-2.674,2.693-7.968,4.898-11.763,4.898H77.003"}),le.createElement("polyline",{className:"preArrowBox",opacity:e.bHidePreArrow?"0":"1",points:"6.833,54.763 46.71,54.763 46.71,201.236 6.833,201.236 \t"}),le.createElement("polyline",{className:"jumpAheadBox",opacity:e.bShowJumpAheadBox?"1":"0",points:"6.833,54.764 86.386,54.764 86.386,201.236 6.833,201.236 \t"}),le.createElement("polyline",{className:"postArrowBox",opacity:e.bHidePostArrow?"0":"1",points:"209.29,54.763 249.167,54.763 249.167,201.236 209.29,201.236 \t"}))}function ie(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_SteamTV",x:"0px",y:"0px",width:"1024px",height:"256px",viewBox:"0 0 1024 256"},le.createElement("defs",null,le.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},le.createElement("stop",{offset:"0%",stopColor:"rgb(55, 102, 251)"}),le.createElement("stop",{offset:"100%",stopColor:"rgb(91, 106, 219)"})),le.createElement("linearGradient",{id:"gradientText",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},le.createElement("stop",{offset:"0%",stopColor:"rgb(91, 106, 219)"}),le.createElement("stop",{offset:"100%",stopColor:"rgb(125, 110, 188)"}))),le.createElement("circle",{className:"logoBG",opacity:"0",fill:"#000000",cx:"156.586",cy:"128",r:"125.914"}),le.createElement("g",{id:"logo"},le.createElement("path",{fill:"url(#gradient)",d:"M156.374,5.355c-64.404,0-117.167,49.661-122.18,112.77l65.712,27.171 c5.567-3.808,12.293-6.032,19.53-6.032c0.649,0,1.294,0.016,1.934,0.051l29.226-42.355c0-0.202-0.005-0.399-0.005-0.598 c0-25.496,20.74-46.241,46.237-46.241c25.498,0,46.239,20.745,46.239,46.241c0,25.494-20.741,46.241-46.239,46.241 c-0.352,0-0.698-0.01-1.047-0.021l-41.68,29.741c0.022,0.546,0.041,1.095,0.041,1.644c0,19.14-15.569,34.707-34.706,34.707 c-16.796,0-30.843-11.991-34.026-27.87l-46.993-19.429c14.55,51.464,61.831,89.19,117.957,89.19 c67.713,0,122.605-54.893,122.605-122.604C278.978,60.244,224.086,5.355,156.374,5.355"}),le.createElement("path",{fill:"rgb(67, 104, 241)",d:"M111.026,191.387l-15.061-6.22c2.67,5.56,7.285,10.208,13.418,12.767 c13.25,5.521,28.531-0.771,34.054-14.028c2.674-6.416,2.694-13.5,0.04-19.929c-2.646-6.431-7.64-11.451-14.063-14.129 c-6.371-2.648-13.196-2.552-19.198-0.291l15.561,6.436c9.776,4.074,14.396,15.299,10.324,25.072 C132.031,190.841,120.801,195.464,111.026,191.387"}),le.createElement("path",{fill:"rgb(79, 105, 230)",d:"M227.639,96.359c0-16.987-13.82-30.809-30.809-30.809c-16.987,0-30.812,13.821-30.812,30.809 c0,16.988,13.824,30.806,30.812,30.806C213.818,127.165,227.639,113.347,227.639,96.359 M173.736,96.306 c0-12.783,10.364-23.142,23.145-23.142c12.783,0,23.145,10.359,23.145,23.142c0,12.783-10.361,23.142-23.145,23.142 C184.1,119.447,173.736,109.089,173.736,96.306"})),le.createElement("g",{id:"steam"},le.createElement("path",{fill:"rgb(92, 106, 218)",d:"M404.52,91.9l-7.968,14.006c-6.138-4.287-14.455-6.862-21.717-6.862c-8.299,0-13.437,3.43-13.437,9.586 c0,7.473,9.124,9.212,22.682,14.082c14.574,5.149,22.948,11.21,22.948,24.558c0,18.264-14.359,28.519-34.998,28.519 c-10.063,0-22.195-2.595-31.53-8.265l5.815-15.539c7.579,4.008,16.644,6.381,24.722,6.381c10.897,0,16.071-4.021,16.071-9.96 c0-6.802-7.893-8.843-20.641-13.06c-14.521-4.856-24.586-11.213-24.586-25.992c0-16.658,13.34-26.225,32.538-26.225 C387.797,83.128,398.551,87.367,404.52,91.9"}),le.createElement("polygon",{fill:"rgb(99, 107, 211)",points:"468.163,100.753 468.163,174.252 449.402,174.252 449.402,100.753 422.166,100.753 422.166,84.663 495.315,84.663 495.315,100.753 \t"}),le.createElement("polygon",{fill:"rgb(108, 108, 203)",points:"533.512,100.706 533.512,120.896 569.417,120.896 569.417,136.982 533.512,136.982 533.512,158.014 575.173,158.014 575.173,174.253 514.757,174.253 514.757,84.665 575.173,84.665 575.173,100.706"}),le.createElement("path",{fill:"rgb(117, 109, 195)",d:"M617.054,156.857l-5.932,17.396h-19.67l33.593-89.594h18.888l34.539,89.594h-20.336l-6.061-17.396H617.054z M634.378,106.035l-12.23,35.87h24.723L634.378,106.035z"}),le.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"773.403,119.291 748.888,171.645 738.302,171.645 714.182,119.758 714.182,174.253 696.212,174.253 696.212,84.665 714.138,84.665 744.251,149.33 773.285,84.665 791.374,84.665 791.374,174.253 773.406,174.253"})),le.createElement("g",{id:"tv"},le.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"853.961,92.664 823.506,92.664 823.506,84.147 893.835,84.147 893.835,92.664 863.51,92.664 863.51,174.479 853.961,174.479"}),le.createElement("polygon",{fill:"rgb(125, 110, 188)",points:"909.835,84.147 920.286,84.147 950.612,165.831 980.033,84.147 990.487,84.147 956.421,174.479 944.159,174.479"})))}function ne(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_Viewers",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("path",{className:"frontGuy",fill:"#666666",d:"M181.732,53.151c-17.255,0-31.321,13.316-31.321,32.634v25.132 c0,18.005,24.006,21.006,24.382,21.381c-10.691,2.813-30.947,8.252-40.888,15.566c-8.252,6.003-11.44,18.005-13.128,22.882 c-0.75,2.063-1.688,5.064-1.688,7.127c0,0,0,9.94,0,19.881s12.941,16.505,18.005,16.505h89.65c4.877,0,18.006-5.627,18.006-16.505 s0-19.881,0-19.881c0-2.251-0.938-5.627-1.688-7.689c-4.313-10.878-4.688-16.316-13.315-22.319 c-9.941-6.939-30.009-12.19-40.512-15.004c0.374-0.563,24.193-4.127,24.193-22.131V85.785 C213.053,66.467,198.986,53.151,181.732,53.151L181.732,53.151z"}),le.createElement("path",{className:"backGuy",fill:"rgb(144, 153, 161)",d:"M84.204,34.396c-20.068,0-36.385,15.38-36.385,38.074v29.258c0,20.818,27.945,24.382,28.32,24.944 c-12.378,3.189-36.01,9.565-47.638,18.006c-9.753,7.127-13.504,21.006-15.379,26.632c-0.75,2.251-1.876,6.002-1.876,8.253  c0,0,0,11.44,0,23.257c0,11.815,15.004,19.13,20.819,19.13h104.279c5.814,0,20.818-6.564,20.818-19.13c0-12.566,0-23.257,0-23.257 c0-2.438-1.125-6.564-2.063-8.815c-5.063-12.566-5.438-18.942-15.566-26.069c-11.628-8.065-34.885-14.067-47.076-17.443 c0.375-0.563,28.133-4.876,28.133-25.695V72.469C120.59,49.775,104.272,34.396,84.204,34.396L84.204,34.396z"}))}function re(){return le.createElement("svg",{version:"1.1",id:"Layer_5",className:"SVGIcon_Button SVGIcon_Globe",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 64 64"},le.createElement("g",null,le.createElement("path",{d:"M32.5,5C17.9,5,6,16.9,6,31.5C6,46.1,17.9,58,32.5,58S59,46.1,59,31.5C59,16.9,47.1,5,32.5,5 M32.5,54.7c-1.2,0-2.5-0.1-3.7-0.3c-1.1-1.1-2.1-2.8-3-4.8c-0.8-1.8-1.4-3.8-2-6c2.7-0.3,5.6-0.5,8.6-0.5c3,0,5.9,0.2,8.6,0.5c-0.5,2.2-1.2,4.2-2,6c-0.9,2-1.9,3.7-3,4.8C35,54.6,33.7,54.7,32.5,54.7 M32.5,41.4c-3.2,0-6.2,0.2-9,0.5c-0.6-3-0.9-6.2-1-9.6h19.9c0,3.4-0.4,6.6-1,9.6C38.7,41.6,35.7,41.4,32.5,41.4 M32.5,8.3c1.2,0,2.5,0.1,3.7,0.3c1.1,1.1,2.1,2.8,3,4.8c0.8,1.8,1.4,3.8,2,6c-2.7,0.3-5.6,0.5-8.6,0.5c-3,0-5.9-0.2-8.6-0.5c0.5-2.2,1.2-4.2,2-6c0.9-2,1.9-3.7,3-4.8C30,8.4,31.3,8.3,32.5,8.3 M32.5,21.6c3.2,0,6.2-0.2,9-0.5c0.6,3,0.9,6.2,1,9.6H22.6c0-3.4,0.4-6.6,1-9.6C26.3,21.4,29.3,21.6,32.5,21.6 M44.1,30.7c0-3.5-0.4-6.8-1-9.8c3.4-0.5,6.4-1.1,8.8-2c2.3,3.5,3.6,7.5,3.7,11.8H44.1z M20.9,30.7H9.3c0.1-4.2,1.4-8.3,3.7-11.8c2.5,0.8,5.5,1.5,8.8,2C21.3,23.9,21,27.2,20.9,30.7 M20.9,32.3c0,3.5,0.4,6.8,1,9.8c-3.4,0.5-6.4,1.1-8.8,2c-2.3-3.5-3.6-7.5-3.7-11.8H20.9z M44.1,32.3h11.6c-0.1,4.2-1.4,8.3-3.7,11.8c-2.5-0.8-5.5-1.5-8.8-2C43.7,39.1,44,35.8,44.1,32.3 M51,17.5c-0.1,0-0.2,0.1-0.3,0.1c-2.3,0.7-5,1.3-7.9,1.7c-0.9-4.1-2.3-7.6-4-10.1c3.8,1.1,7.3,3.1,10.2,5.9C49.6,15.9,50.3,16.6,51,17.5 M26.3,9.2c-1.7,2.5-3.1,6-4,10.1c-2.9-0.4-5.6-1-7.9-1.7c-0.1,0-0.2-0.1-0.3-0.1c0.6-0.8,1.3-1.6,2.1-2.4C19,12.2,22.5,10.2,26.3,9.2 M14,45.5c0.1,0,0.2-0.1,0.3-0.1c2.3-0.7,5-1.3,7.9-1.7c0.9,4.1,2.3,7.6,4,10.1c-3.8-1.1-7.3-3.1-10.2-5.9C15.4,47.1,14.7,46.4,14,45.5 M38.7,53.8c1.7-2.5,3.1-6,4-10.1c2.9,0.4,5.6,1,7.9,1.7c0.1,0,0.2,0.1,0.3,0.1c-0.6,0.8-1.3,1.6-2.1,2.4C46,50.8,42.5,52.8,38.7,53.8"})))}function oe(){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_STVTimelineGrabber",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{className:"leftarrow",opacity:"0"},le.createElement("polygon",{points:"127.817,4.403 4,128 127.817,251.598"})),le.createElement("g",{className:"rightarrow",opacity:"0"},le.createElement("polygon",{points:"127.816,4.403 251.633,128 127.816,251.598"})),le.createElement("g",{className:"grabber"},le.createElement("polygon",{points:"145.692,22.132 145.692,234.361 127.817,251.598 110.307,234.361 110.307,22.132 127.817,4.403"})))}function ae(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_STVTimelineMarker",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("polygon",{className:"pointer",points:"128,154.979 46.374,230.548 46.374,253.333 209.626,253.333 209.626,230.548 \t"}),le.createElement("rect",{className:"line",x:"116.271",y:"3.168",width:"23.459",height:"137.332"}))}function se(e){return le.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_HideShowChat",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("g",{id:"hidechat",opacity:e.showChat?"0":"1"},">",le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011"}),le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",x1:"49.786",y1:"15.012",x2:"214.409",y2:"233.723"})),le.createElement("g",{id:"showchat",opacity:e.showChat?"1":"0"},le.createElement("polygon",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 225.299,59.011 225.299,189.834"})),le.createElement("g",{id:"textlines",opacity:e.showChat?"1":"0"},le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"124.75",x2:"194.167",y2:"124.75"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"155.75",x2:"194.167",y2:"155.75"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeMiterlimit:"10",x1:"72.333",y1:"93.75",x2:"179.926",y2:"93.75"}),le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011 "}),le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"})))}function ce(){return le.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",className:"SVGIcon_Button SVGIcon_ShowBothChats",x:"0px",y:"0px",width:"256px",height:"256px",viewBox:"0 0 256 256"},le.createElement("circle",{opacity:"0",fill:"#FFFFFF",strokeWidth:"0",cx:"166.241",cy:"161.906",r:"75.259"}),le.createElement("polyline",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeLinecap:"round",strokeMiterlimit:"10",points:"92.367,155.634 51.311,183 51.311,150.296 23.834,150.296 23.834,19.473 140.5,19.473 140.5,91.5"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"82.167",x2:"113.379",y2:"82.167"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"113.167",x2:"113.379",y2:"113.167"}),le.createElement("line",{fill:"none",stroke:"#ffffff",strokeWidth:"8",strokeMiterlimit:"10",x1:"48.529",y1:"51.167",x2:"99.138",y2:"51.167"}),le.createElement("path",{d:"M166.241,82.167c-43.933,0-79.74,35.807-79.74,79.74c0,43.932,35.808,79.739,79.74,79.739 c43.932,0,79.739-35.808,79.739-79.739C245.98,117.975,210.173,82.167,166.241,82.167 M166.241,231.717 c-3.611,0-7.522-0.301-11.134-0.902c-3.31-3.311-6.318-8.426-9.027-14.444c-2.407-5.416-4.212-11.434-6.018-18.054  8.124-0.902,16.851-1.505,25.878-1.505c9.026,0,17.753,0.603,25.877,1.505c-1.504,6.62-3.61,12.638-6.018,18.054 c-2.708,6.019-5.718,11.134-9.027,14.444C173.764,231.416,169.852,231.717,166.241,231.717 M166.241,191.696 c-9.629,0-18.656,0.602-27.082,1.505c-1.805-9.027-2.708-18.656-3.009-28.887h59.88c0,10.23-1.203,19.859-3.009,28.887 C184.896,192.298,175.87,191.696,166.241,191.696 M166.241,92.097c3.61,0,7.522,0.301,11.133,0.903 c3.311,3.31,6.319,8.425,9.027,14.443c2.407,5.416,4.213,11.435,6.019,18.055c-8.125,0.902-16.851,1.504-25.878,1.504  s-17.753-0.602-25.878-1.504c1.505-6.62,3.611-12.639,6.019-18.055c2.708-6.018,5.717-11.133,9.026-14.443 \tC158.719,92.398,162.63,92.097,166.241,92.097 M166.241,132.117c9.629,0,18.655-0.602,27.081-1.504 \tc1.806,9.026,2.708,18.655,3.009,28.887h-59.88c0-10.231,1.204-19.86,3.01-28.887 \tC147.585,131.516,156.612,132.117,166.241,132.117 M201.146,159.5c0-10.532-1.203-20.462-3.009-29.488 c10.23-1.505,19.258-3.311,26.479-6.019c6.921,10.531,10.833,22.567,11.134,35.507H201.146z M131.336,159.5H96.432 c0.301-12.639,4.212-24.976,11.133-35.507c7.522,2.407,16.55,4.514,26.479,6.019C132.54,139.038,131.637,148.968,131.336,159.5 M131.336,164.314c0,10.531,1.204,20.461,3.01,29.488c-10.231,1.505-19.259,3.31-26.48,6.018 c-6.921-10.531-10.832-22.567-11.133-35.506H131.336z M201.146,164.314h34.905c-0.301,12.638-4.213,24.975-11.134,35.506 c-7.522-2.406-16.55-4.513-26.479-6.018C199.942,184.775,200.845,174.846,201.146,164.314 M221.908,119.78 c-0.301,0-0.602,0.301-0.903,0.301c-6.92,2.106-15.045,3.912-23.771,5.115c-2.708-12.337-6.921-22.868-12.036-30.391 c11.434,3.31,21.966,9.328,30.691,17.753C217.695,114.966,219.802,117.072,221.908,119.78 M147.585,94.806 c-5.115,7.522-9.328,18.054-12.036,30.391c-8.727-1.203-16.851-3.009-23.771-5.115c-0.301,0-0.602-0.301-0.902-0.301 c1.805-2.407,3.911-4.814,6.318-7.222C125.619,103.833,136.15,97.814,147.585,94.806 M110.574,204.033 c0.301,0,0.602-0.301,0.902-0.301c6.921-2.106,15.045-3.912,23.771-5.115c2.708,12.337,6.921,22.869,12.036,30.392 c-11.435-3.311-21.966-9.328-30.692-17.754C114.786,208.848,112.68,206.742,110.574,204.033 M184.896,229.009 c5.116-7.522,9.329-18.055,12.036-30.392c8.727,1.203,16.852,3.009,23.771,5.115c0.301,0,0.603,0.301,0.903,0.301 c-1.806,2.407-3.912,4.814-6.319,7.222C206.863,219.981,196.331,226,184.896,229.009"}))}t.v=n,t.Q=r,t.e=o,t.g=a,t.l=s,t.z=c,t.C=l,t.m=u,t.V=d,t.L=p,t.J=m,t._5=h,t._6=g,t._3=f,t.n=_,t.X=y,t.t=v,t.s=b,t.I=C,t.a=S,t.q=M,t.x=F,t.F=w,t._4=B,t.E=O,t.h=I,t.H=R,t.G=E,t.T=T,t.f=k,t.i=D,t.d=G,t.y=N,t.Y=L,t._1=A,t.w=P,t.c=x,t.b=z,t.k=U,t.W=V,t.A=j,t.D=W,t.M=H,t.S=q,t.K=K,t.Z=J,t._0=Y,t.P=X,t.o=Z,t.p=Q,t._7=$,t.j=ee,t.B=te,t.U=ie,t._2=ne,t.r=re,t.N=oe,t.O=ae,t.u=se,t.R=ce;var le=i("Jmof");i.n(le)},"1zkO":function(e,t,i){"use strict";i.d(t,"k",function(){return n}),i.d(t,"l",function(){return r}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return a}),i.d(t,"j",function(){return s}),i.d(t,"f",function(){return c}),i.d(t,"g",function(){return l}),i.d(t,"i",function(){return u}),i.d(t,"h",function(){return d}),i.d(t,"a",function(){return p}),i.d(t,"c",function(){return m}),i.d(t,"b",function(){return h});var n=1,r=4,o=750,a=799,s=7,c=250820,l=330050,u=358510,d=366490,p="18446744073709551615",m=0,h=2147483647},"3e1Q":function(e,t,i){"use strict";function n(e){return"public"==s.a.WEB_UNIVERSE?"https://s.team/chat/"+e:s.a.COMMUNITY_BASE_URL+"chat/invite/"+e}i.d(t,"b",function(){return c}),t.a=n;var r=i("TToO"),o=i("y986"),a=i("1zkO"),s=i("m5yx"),c=function(){function e(e){this.m_bReady=!1,this.m_bValid=!1,this.m_strInviteCode=e}return e.prototype.BIsReady=function(){return this.m_bReady},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.BIsInviteLink=function(){return!!this.m_strInviteCode},e.prototype.GetInviteCode=function(){return this.m_strInviteCode},e.prototype.BNeverExpires=function(){return this.m_rtTimeExpires==a.b},e.prototype.GetChatRoomGroupID=function(){return this.m_ulChatRoomGroupID},e.prototype.BIsVoiceChatInvite=function(){return!!this.m_ulChatID},e.prototype.GetChatID=function(){return this.m_ulChatID},e.prototype.GetURL=function(){return this.m_strInviteCode?n(this.m_strInviteCode):null},e.prototype.BIsUserBanned=function(){return this.m_bIsBanned},e.prototype.GetTimeKickExpires=function(){return this.m_rtKickExpires},Object.defineProperty(e.prototype,"time_expires",{get:function(){return this.m_rtTimeExpires},enumerable:!0,configurable:!0}),e.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},e.prototype.InitDirectInvite=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=i,this.m_rtKickExpires=n,this.m_rtTimeExpires=a.b,this.m_bValid=!0,this.m_bReady=!0},r.c([o.observable],e.prototype,"m_bReady",void 0),r.c([o.action],e.prototype,"InitInvalid",null),r.c([o.action],e.prototype,"InitDirectInvite",null),e}()},"8MbF":function(e,t,i){"use strict";function n(e){return c.createElement("div",{className:"ContextMenuMouseOverlay"})}function r(){return window.sessionStorage&&"true"==window.sessionStorage.getItem(C)}function o(e){e?window.sessionStorage.setItem(C,"true"):window.sessionStorage.removeItem(C)}i.d(t,"c",function(){return g}),i.d(t,"d",function(){return f}),i.d(t,"b",function(){return _}),i.d(t,"e",function(){return y}),i.d(t,"g",function(){return v}),i.d(t,"a",function(){return b}),t.f=n,t.h=r,t.i=o;var a=i("TToO"),s=i("Mn8c"),c=i("Jmof"),l=(i.n(c),i("wLXD")),u=(i.n(l),i("V/Vt")),d=i("EQHU"),p=i("Bp66"),m=i("1PJo"),h=i("x0X8"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.render=function(){var e=this.props,t=e.children,i=e.className,n=a.f(e,["children","className"]),r=this.context.contextMenuInstance&&this.context.contextMenuInstance.options.bUseWebStyles,o=r?"popup_menu popup_body":"contextMenuContents";return i&&(o+=" "+i),c.createElement("div",a.a({},n,{className:o}),t)},t.contextTypes={contextMenuInstance:function(){return null}},t}(c.PureComponent),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.OnClick=function(e){this.props.disabled||(this.props.onClick&&this.props.onClick(e),this.props.bInteractableItem||(this.props.onSelected&&this.props.onSelected(e),this.context.contextMenuInstance&&this.context.contextMenuInstance.Hide()))},t.prototype.OnMouseEnter=function(e){this.context.contextMenuInstance&&this.context.contextMenuInstance.HideSubMenu()},t.prototype.render=function(){var e=this.props,t=(e.onSelected,e.bInteractableItem,a.f(e,["onSelected","bInteractableItem"])),i=this.context.contextMenuInstance&&this.context.contextMenuInstance.options.bUseWebStyles,n=[i?"popup_menu_item":"contextMenuItem"];return this.props.className&&n.push(this.props.className),this.props.disabled&&n.push("disabled"),c.createElement("div",a.a({onMouseEnter:this.OnMouseEnter},t,{onClick:this.OnClick,unselectable:this.props.unselectable,className:n.join(" ")}),this.props.children)},t.contextTypes={contextMenuInstance:function(){return null}},a.c([p.a],t.prototype,"OnClick",null),a.c([p.a],t.prototype,"OnMouseEnter",null),t}(c.PureComponent),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.render=function(){var e=this.props,t=e.bChecked,i=e.children,n=a.f(e,["bChecked","children"]);return c.createElement(f,a.a({},n,{className:t&&"menuChecked"}),c.createElement("div",{className:"contextMenuCheckMark"}),i)},t}(c.PureComponent),y=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bActive:!1},i}return a.d(t,e),t.prototype.OnSubMenuMouseEnter=function(){this.context.contextMenuInstance.CancelHideSubMenuTimer()},t.prototype.RenderSubMenu=function(){return c.createElement(g,{onMouseEnter:this.OnSubMenuMouseEnter},this.props.children)},t.prototype.OnMouseEnter=function(e){var t=this;if(this.context.contextMenuInstance){var i=this.context.contextMenuInstance.ShowSubMenu(e.currentTarget,this.RenderSubMenu);i&&(this.setState({bActive:!0}),i.SetOnHideCallback(function(){t.setState({bActive:!1})}))}},t.prototype.OnClick=function(e){this.OnMouseEnter(e),this.props.onClick&&this.props.onClick(e)},t.prototype.render=function(){var e=this.props,t=e.label,i=(e.children,e.className),n=a.f(e,["label","children","className"]);return this.state.bActive&&(i=(i||"")+" active"),c.createElement(f,a.a({},n,{onClick:this.OnClick,className:i,onMouseEnter:this.OnMouseEnter,onSelected:null,bInteractableItem:!0}),t," ",c.createElement(m.l,null))},t.contextTypes={contextMenuInstance:function(){return null}},a.c([p.a],t.prototype,"OnSubMenuMouseEnter",null),a.c([p.a],t.prototype,"RenderSubMenu",null),a.c([p.a],t.prototype,"OnMouseEnter",null),a.c([p.a],t.prototype,"OnClick",null),t}(c.PureComponent),v=function(e){function t(t){var i=e.call(this,t)||this;return i.m_elMenu=void 0,i.m_cReenteranceGuard=1,i.state={ready:!1,menuLeft:void 0,menuTop:void 0,menuRight:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},i.m_mutationObserver=new MutationObserver(i.OnMenuMutation),i}return a.d(t,e),t.prototype.BindMenuElement=function(e){var t=this;this.m_elMenu&&(this.m_mutationObserver.disconnect(),this.props.popup||this.m_elMenu.ownerDocument.defaultView.removeEventListener("resize",this.OnWindowResize)),e&&(this.m_mutationObserver.observe(e,{childList:!0,subtree:!0}),this.props.popup||e.ownerDocument.defaultView.addEventListener("resize",this.OnWindowResize)),this.m_elMenu=e||void 0,this.PositionMenu(),this.state.ready||(this.props.instance.SetTakeFocus(this.TakeFocus.bind(this)),this.setState({ready:!0},function(){t.TakeFocus()}))},t.prototype.OnMenuMutation=function(e,t){this.PositionMenu()},t.prototype.OnWindowResize=function(){this.PositionMenu()},t.prototype.OnBlur=function(e){e.relatedTarget&&d.e(e.currentTarget,e.relatedTarget)||e.relatedTarget&&this.props.instance.BIsElementInMenuHierarchy(e.relatedTarget)||this.props.instance.BIsSubMenuVisible()||this.state.ready&&this.props.instance.visible&&this.props.instance.Hide()},t.prototype.OnKeyDown=function(e){27==e.keyCode&&this.state.ready&&(this.props.instance.Hide(),e.preventDefault(),e.stopPropagation())},t.prototype.getChildContext=function(){return{contextMenuInstance:this.props.instance}},t.prototype.componentDidUpdate=function(){this.m_cReenteranceGuard-- >0?this.PositionMenu():this.m_cReenteranceGuard=2},t.prototype.TakeFocus=function(){if(this.m_elMenu&&this.state.ready&&this.props.instance.visible&&(this.props.popup||!d.e(this.m_elMenu,this.m_elMenu.ownerDocument.activeElement))){var e=this.m_elMenu.querySelector(".ContextMenuAutoFocus");e&&e.focus?e.focus():this.m_elMenu.focus()}},t.prototype.PositionMenu=function(){var e=this.m_elMenu,t=this.props.element;if(e&&t){var i=t.ownerDocument.defaultView;e.ownerDocument.defaultView.CtxUpdate=this.PositionMenu.bind(this);var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=null!=this.props.popup,a=this.props.options,s={menuLeft:void 0,menuRight:void 0,menuTop:void 0,menuBottom:void 0,menuWidth:void 0,menuHeight:void 0},c=this.props.clientX,l=this.props.clientY,u=i.innerWidth,p=i.innerHeight;if(o){c+=i.screenLeft,l+=i.screenTop,n=d.h(i,n);var m=i.screen,h=0,g=0;m.availLeft&&(h=m.availLeft),m.availTop&&(g=m.availTop),u=h+m.availWidth,p=g+m.availHeight}(a.bOverlapHorizontal||a.bOverlapVertical)&&(c=l=void 0);var f=c||n.left,_=c||n.right,y=r.width;a.bMatchWidth&&(y=_-f,s.menuWidth=y);var v=(a.bOverlapHorizontal?_:f)-y,b=v>0,C=u-(a.bOverlapHorizontal?f:_)-y,S=C>0,M=(a.bPreferPopLeft||!S)&&b;b||S||(M=b>S,a.bFitToWindow&&(y+=(M?v:C)-8,s.menuWidth=y)),!a.bPreferPopLeft&&S||!b?s.menuLeft=a.bOverlapHorizontal?f:_:s.menuRight=u-(a.bOverlapHorizontal?_:f);var F=l||n.top,w=l||n.bottom,B=r.height;a.bMatchHeight&&(B=w-F,s.menuHeight=B);var O=(a.bOverlapVertical?w:F)-B,I=O>0,R=p-(a.bOverlapVertical?F:w)-B,E=R>0,T=(a.bPreferPopTop||!E)&&I;I||E||(T=O>R,a.bFitToWindow&&(B+=(T?O:R)-8,s.menuHeight=B)),T?s.menuBottom=p-(a.bOverlapVertical?w:F):s.menuTop=a.bOverlapVertical?F:w,o?(s.menuHeight||(s.menuHeight=r.height),s.menuWidth||(s.menuWidth=r.width),s.menuBottom&&!s.menuTop&&(s.menuTop=p-s.menuBottom-s.menuHeight,s.menuBottom=void 0),s.menuRight&&!s.menuLeft&&(s.menuLeft=u-s.menuRight-s.menuWidth,s.menuRight=void 0)):(s.menuLeft&&(s.menuLeft+=i.scrollX),s.menuTop&&(s.menuTop+=i.scrollY),s.menuBottom&&(s.menuBottom+=i.document.body.scrollHeight-i.scrollY-i.innerHeight),s.menuRight&&(s.menuRight+=i.document.body.scrollWidth-i.scrollX-i.innerWidth)),s.menuLeft===this.state.menuLeft&&s.menuRight===this.state.menuRight&&s.menuTop===this.state.menuTop&&s.menuBottom===this.state.menuBottom&&s.menuWidth===this.state.menuWidth&&s.menuHeight===this.state.menuHeight||this.setState(s)}},t.prototype.render=function(){var e=this,t={visibility:this.state.ready?"visible":"hidden"};if(this.props.popup){var i=this.props.element.ownerDocument.defaultView;void 0!==this.state.menuLeft&&void 0!==this.state.menuTop&&void 0!==this.state.menuWidth&&void 0!==this.state.menuHeight&&i.SteamClient.Window.GetWindowRestoreDetails(function(t){var n=e.props.popup.window,r=e.state.menuLeft-i.screenX,o=e.state.menuTop-i.screenY;try{n.SteamClient.Window.PositionWindowRelative(t,r,o,e.state.menuWidth,e.state.menuHeight)}catch(e){console.error(e)}})}else void 0!==this.state.menuTop?t.top=this.state.menuTop:void 0!==this.state.menuBottom&&(t.bottom=this.state.menuBottom),void 0!==this.state.menuLeft?t.left=this.state.menuLeft:void 0!==this.state.menuRight&&(t.right=this.state.menuRight),void 0!==this.state.menuHeight&&(t.height=this.state.menuHeight),void 0!==this.state.menuWidth&&(t.width=this.state.menuWidth);var n=this.props.options.strClassName||(this.props.options.bUseWebStyles?"popup_block_new popup_block_hidden_until_visible":"contextMenu");return this.props.instance.visible&&this.state.ready&&(n+=" visible"),n+=" ContextMenuFocusContainer",c.createElement("div",{className:n,ref:this.BindMenuElement,style:t,onBlur:this.OnBlur,onKeyDown:this.OnKeyDown,tabIndex:0},this.props.children)},t.childContextTypes={contextMenuInstance:function(){return null},context:function(){return null}},a.c([p.a],t.prototype,"BindMenuElement",null),a.c([p.a,Object(h.a)(100)],t.prototype,"OnMenuMutation",null),a.c([p.a],t.prototype,"OnWindowResize",null),a.c([p.a],t.prototype,"OnBlur",null),a.c([p.a],t.prototype,"OnKeyDown",null),t=a.c([s.observer],t)}(c.Component),b=function(e){function t(i,n,r){var o=e.call(this,"contextmenu_"+t.sm_iContextMenuInstance++,{title:"Menu",html_class:"ContextMenuPopup client_chat_frame",body_class:"ContextMenuPopupBody",replace_existing_popup:!1,target_browser:r,eCreationFlags:u.c.ContextMenu})||this;return o.m_menuProps=i,o.m_children=n,o}return a.d(t,e),t.prototype.UpdateParamsBeforeShow=function(e){var t=d.h(this.m_menuProps.element.ownerDocument.defaultView,this.m_menuProps.element.getBoundingClientRect());return e.dimensions={left:t.right,top:t.top,width:350,height:1},e.availscreenwidth=this.m_menuProps.element.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_menuProps.element.ownerDocument.defaultView.screen.availHeight,e},t.prototype.Render=function(e,t){l.render(c.createElement(v,a.a({},this.m_menuProps,{popup:this}),this.m_children),t)},t.prototype.OnBlur=function(){},t.prototype.OnFocus=function(){},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){},t.sm_iContextMenuInstance=0,t}(u.a),C="DEBUG_StickyContextMenus"},BE2g:function(e,t,i){"use strict";function n(e){return new s(e.body,!0)}t.b=n,i.d(t,"a",function(){return c});var r=i("wLXD"),o=(i.n(r),i("EQHU")),a=function(){function e(e){this.instance=new s(e,!1)}return e}(),s=function(){function e(e,t){void 0===t&&(t=!0),this.m_parent=e,this.m_window=e.ownerDocument.defaultView,this.m_bRemoveOnHide=t}return e.prototype.Show=function(e,t){var i=this;return this.CancelShowInterval(),t?new Promise(function(n,r){i.iIntervalShow=i.m_window.setTimeout(function(){var t=i.m_parent.ownerDocument;t.defaultView&&!t.defaultView.closed&&(i.InternalShow(e),n())},t)}):(this.InternalShow(e),Promise.resolve())},e.prototype.InternalShow=function(e){this.m_container?r.unmountComponentAtNode(this.m_container):(this.m_container=this.m_parent.ownerDocument.createElement("div"),this.m_parent.appendChild(this.m_container)),r.render(e,this.m_container)},e.prototype.Hide=function(e){var t=this;this.CancelShowInterval(),e?this.iIntervalShow=this.m_window.setTimeout(function(){t.InternalHide()},e):this.InternalHide()},e.prototype.InternalHide=function(){this.m_container&&(r.unmountComponentAtNode(this.m_container),this.m_bRemoveOnHide&&(this.m_parent.removeChild(this.m_container),this.m_container=null))},e.prototype.CancelShowInterval=function(){void 0!==this.iIntervalShow&&(this.m_window.clearInterval(this.iIntervalShow),this.iIntervalShow=void 0)},e.prototype.BIsChildElement=function(e){return this.m_container&&o.e(this.m_container,e)},e}(),c=function(){function e(e){this.m_mapEmbeddedHovers=new WeakMap,this.m_strUniqueID=e}return e.prototype.ShowElementDelayed=function(e,t,i,n){var r=this.GetEmbeddedElement(e);return r.activeObject=n,r.instance.Show(i,t)},e.prototype.ShowElement=function(e,t,i){var n=this.GetEmbeddedElement(e);n.activeObject=i,n.instance.Show(t)},e.prototype.HideElement=function(e,t,i){var n=this.GetEmbeddedElement(e);n.activeObject==t&&(n.activeObject=void 0,n.instance.Hide(i))},e.prototype.GetEmbeddedElement=function(e){var t=this.m_mapEmbeddedHovers.get(e);return t||(t=new a(e.body),this.m_mapEmbeddedHovers.set(e,t)),t},e}()},Bp66:function(e,t,i){"use strict";function n(e,t,i){return{get:function(){var e=i.value.bind(this);return this.hasOwnProperty(t)||Object.defineProperty(this,t,{value:e}),e}}}function r(e,t,i){return[e,t,i]}t.a=n,t.b=r},EQHU:function(e,t,i){"use strict";function n(e){if(!(e.clientX||e.clientY||e.screenX||e.screenY))return!0;if(e.relatedTarget)return!r(e.currentTarget,e.relatedTarget);var t=e.currentTarget.getBoundingClientRect();return(e.clientX<=t.left||e.clientX>=t.right||e.clientY<=t.top||e.clientY>=t.bottom)&&(console.log(e.clientX+" <= "+t.left+" || "+e.clientX+" >= "+t.right+" ||\n\t\t\t\t"+e.clientY+" <= "+t.top+" || "+e.clientY+" >= "+t.bottom),!0)}function r(e,t){for(;t;){if(t.parentNode.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(t=t.parentNode.host),t==e)return!0;t=t.parentElement}return!1}function o(e,t){for(;t;)if((t=t.parentElement)==e)return!0;return!1}function a(e){if(!window.getSelection)return!1;for(var t=window.getSelection(),i=0,n=0;n<t.rangeCount;n++){var o=t.getRangeAt(n);o.startOffset!=o.endOffset&&r(e,o.commonAncestorContainer)&&i++}return t.rangeCount>0&&t.rangeCount==i}function s(e,t){var i=e.offsetTop;e.offsetParent!=t&&(i-=t.offsetTop),i<t.scrollTop?e.scrollIntoView(!0):i+e.offsetHeight>t.scrollTop+t.offsetHeight&&e.scrollIntoView(!1)}function c(e,t,i){var n=0,r=0;return t<e.left?n=e.left-t:t>e.right&&(n=t-e.right),i<e.top?r=e.top-i:i>e.bottom&&(r=i-e.bottom),Math.sqrt(n*n+r*r)}function l(e,t){return{width:t.width,height:t.height,top:e.screenTop+t.top,bottom:e.screenTop+t.bottom,left:e.screenLeft+t.left,right:e.screenLeft+t.right}}function u(e){var t=void 0;return e&&(t=e.ownerDocument.defaultView),t}function d(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{document.body.removeChild(t)}}function p(e){e.startsWith("steam://openurl/")&&(e=e.slice("steam://openurl/".length)),d(e)}function m(e){var t=e.ownerDocument;return t.fullscreen||t.webkitIsFullScreen||t.mozFullScreen||t.msFullscreenElement}function h(e){var t=e;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function g(e){var t=e.ownerDocument;t.cancelFullscreen?t.cancelFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()}t.c=n,t.e=r,t.d=o,t.a=a,t.m=s,t.j=c,t.h=l,t.k=u,t.i=p,t.b=m,t.l=h,t.g=g,i.d(t,"f",function(){return _});var f=i("lEUG"),_=function(){function e(e){var t=this;this.m_bNeedSort=!1,this.m_bOffsetsInvalidated=!1,this.m_rgChildren=[],this.RecomputeVisibility=function(){var e=t.m_elParent.scrollTop-t.m_nBufferPx,i=t.m_elParent.scrollTop+t.m_elParent.clientHeight+t.m_nBufferPx;t.EnsureSort();for(var n=0,r=t.m_rgChildren;n<r.length;n++){var o=r[n];if(!(o.yOffset<e)){if(o.yOffset>i)break;o.fnCallback(!0)}}t.m_nLastYMin=e,t.m_nLastYMax=i},this.m_nBufferPx=e}return e.prototype.SetParent=function(e){this.m_elParent&&this.m_elParent.ownerDocument.defaultView.removeEventListener("resize",this.RecomputeVisibility),this.m_elParent=e,this.m_elParent&&this.m_elParent.ownerDocument.defaultView.addEventListener("resize",this.RecomputeVisibility)},e.prototype.InvalidateOffsetsAndRecompute=function(){this.m_bOffsetsInvalidated=!0,this.RecomputeVisibility()},e.prototype.EnsureSort=function(){if(this.m_bOffsetsInvalidated){for(var e=0;e<this.m_rgChildren.length;e++)this.m_rgChildren[e].yOffset=this.m_rgChildren[e].element.offsetTop;this.m_bOffsetsInvalidated=!1}this.m_bNeedSort&&(this.m_rgChildren.sort(function(e,t){return e.yOffset-t.yOffset}),this.m_bNeedSort=!1)},e.prototype.RegisterChild=function(e,t){this.m_rgChildren.push({element:e,yOffset:e.offsetTop,fnCallback:t}),this.m_bNeedSort=!0,void 0!==this.m_nLastYMin&&void 0!==this.m_nLastYMax&&e.offsetTop>=this.m_nLastYMin&&e.offsetTop<=this.m_nLastYMax&&t(!0)},e.prototype.UnregisterChild=function(e){f.d(this.m_rgChildren,function(t){return t.element==e})},e}()},FHUK:function(e,t,i){!function(t,n){e.exports=function(e,t,i){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogEnabled=t.setGraphEnabled=t.setUpdatesEnabled=t.configureDevtool=t.UpdatesControl=t.LogControl=t.GraphControl=t.default=void 0;var r=i(1);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}});var o=i(19);Object.defineProperty(t,"GraphControl",{enumerable:!0,get:function(){return n(o).default}});var a=i(20);Object.defineProperty(t,"LogControl",{enumerable:!0,get:function(){return n(a).default}});var s=i(21);Object.defineProperty(t,"UpdatesControl",{enumerable:!0,get:function(){return n(s).default}});var c=i(37),l=n(c),u=i(12);l.default.polyfill();var d=t.configureDevtool=function(e){var t=e.logEnabled,i=e.updatesEnabled,n=e.graphEnabled,r=e.logFilter,o={};void 0!==t&&(o.logEnabled=Boolean(t)),void 0!==i&&(o.updatesEnabled=Boolean(i)),void 0!==n&&(o.graphEnabled=Boolean(n)),"function"==typeof r&&(o.logFilter=r),(0,u.setGlobalState)(o)};t.setUpdatesEnabled=function(e){return d({updatesEnabled:e})},t.setGraphEnabled=function(e){return d({graphEnabled:e})},t.setLogEnabled=function(e){return d({logEnabled:e})}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(2),l=n(c),u=i(3),d=n(u),p=i(12),m=i(18),h=n(m),g=i(31),f=n(g),_=i(33),y=n(_),v=function(e){function t(){var e,i,n,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.handleUpdate=function(){return n.setState((0,p.getGlobalState)())},n.handleToggleGraph=function(){n.setState({hoverBoxes:[],graphEnabled:!n.state.graphEnabled})},a=i,o(n,a)}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.setState((0,p.getGlobalState)())}},{key:"componentDidMount",value:function(){p.eventEmitter.on("update",this.handleUpdate)}},{key:"componentWillUnmount",value:function(){p.eventEmitter.removeListener("update",this.handleUpdate)}},{key:"render",value:function(){var e=this.props,t=e.noPanel,i=e.highlightTimeout,n=this.state,r=n.renderingBoxes,o=n.hoverBoxes;return l.default.createElement("div",null,!0!==t&&l.default.createElement(h.default,{position:this.props.position,highlightTimeout:i}),l.default.createElement(f.default,{boxes:r.concat(o)}),l.default.createElement(y.default,null))}}]),t}(c.Component);v.propTypes={highlightTimeout:d.default.number,position:d.default.object,noPanel:d.default.bool},v.defaultProps={noPanel:!1},t.default=v},function(t,i){t.exports=e},function(e,t,i){(function(t){if("production"!==t.env.NODE_ENV){var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,r=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n};e.exports=i(5)(r,!0)}else e.exports=i(11)()}).call(t,i(4))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&m&&(g=!1,m.length?h=m.concat(h):f=-1,h.length&&s())}function s(){if(!g){var e=r(a);g=!0;for(var t=h.length;t;){for(m=h,h=[];++f<t;)m&&m[f].run();f=-1,t=h.length}m=null,g=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var m,h=[],g=!1,f=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new c(e,t)),1!==h.length||g||r(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,i){(function(t){"use strict";var n=i(6),r=i(7),o=i(8),a=i(9),s=i(10);e.exports=function(e,i){function c(e){var t=e&&(w&&e[w]||e[B]);if("function"==typeof t)return t}function l(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function d(e){function n(n,l,d,p,m,h,g){if(p=p||O,h=h||d,g!==a)if(i)r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var f=p+":"+d;!s[f]&&c<3&&(o(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",h,p),s[f]=!0,c++)}return null==l[d]?n?new u(null===l[d]?"The "+m+" `"+h+"` is marked as required in `"+p+"`, but its value is `null`.":"The "+m+" `"+h+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(l,d,p,m,h)}if("production"!==t.env.NODE_ENV)var s={},c=0;var l=n.bind(null,!1);return l.isRequired=n.bind(null,!0),l}function p(e){function t(t,i,n,r,o,a){var s=t[i];return C(s)!==e?new u("Invalid "+r+" `"+o+"` of type `"+S(s)+"` supplied to `"+n+"`, expected `"+e+"`."):null}return d(t)}function m(e){function t(t,i,n,r,o){if("function"!=typeof e)return new u("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var s=t[i];if(!Array.isArray(s))return new u("Invalid "+r+" `"+o+"` of type `"+C(s)+"` supplied to `"+n+"`, expected an array.");for(var c=0;c<s.length;c++){var l=e(s,c,n,r,o+"["+c+"]",a);if(l instanceof Error)return l}return null}return d(t)}function h(e){function t(t,i,n,r,o){if(!(t[i]instanceof e)){var a=e.name||O;return new u("Invalid "+r+" `"+o+"` of type `"+F(t[i])+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null}return d(t)}function g(e){function i(t,i,n,r,o){for(var a=t[i],s=0;s<e.length;s++)if(l(a,e[s]))return null;return new u("Invalid "+r+" `"+o+"` of value `"+a+"` supplied to `"+n+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?d(i):("production"!==t.env.NODE_ENV&&o(!1,"Invalid argument supplied to oneOf, expected an instance of array."),n.thatReturnsNull)}function f(e){function t(t,i,n,r,o){if("function"!=typeof e)return new u("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var s=t[i],c=C(s);if("object"!==c)return new u("Invalid "+r+" `"+o+"` of type `"+c+"` supplied to `"+n+"`, expected an object.");for(var l in s)if(s.hasOwnProperty(l)){var d=e(s,l,n,r,o+"."+l,a);if(d instanceof Error)return d}return null}return d(t)}function _(e){function i(t,i,n,r,o){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,i,n,r,o,a))return null;return new u("Invalid "+r+" `"+o+"` supplied to `"+n+"`.")}if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&o(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),n.thatReturnsNull;for(var r=0;r<e.length;r++){var s=e[r];if("function"!=typeof s)return o(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",M(s),r),n.thatReturnsNull}return d(i)}function y(e){function t(t,i,n,r,o){var s=t[i],c=C(s);if("object"!==c)return new u("Invalid "+r+" `"+o+"` of type `"+c+"` supplied to `"+n+"`, expected `object`.");for(var l in e){var d=e[l];if(d){var p=d(s,l,n,r,o+"."+l,a);if(p)return p}}return null}return d(t)}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||e(t))return!0;var i=c(t);if(!i)return!1;var n,r=i.call(t);if(i!==t.entries){for(;!(n=r.next()).done;)if(!v(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!v(o[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}function C(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function S(e){if(void 0===e||null===e)return""+e;var t=C(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function M(e){var t=S(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function F(e){return e.constructor&&e.constructor.name?e.constructor.name:O}var w="function"==typeof Symbol&&Symbol.iterator,B="@@iterator",O="<<anonymous>>",I={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return d(n.thatReturnsNull)}(),arrayOf:m,element:function(){function t(t,i,n,r,o){var a=t[i];return e(a)?null:new u("Invalid "+r+" `"+o+"` of type `"+C(a)+"` supplied to `"+n+"`, expected a single ReactElement.")}return d(t)}(),instanceOf:h,node:function(){function e(e,t,i,n,r){return v(e[t])?null:new u("Invalid "+n+" `"+r+"` supplied to `"+i+"`, expected a ReactNode.")}return d(e)}(),objectOf:f,oneOf:g,oneOfType:_,shape:y};return u.prototype=Error.prototype,I.checkPropTypes=s,I.PropTypes=I,I}}).call(t,i(4))},function(e,t){"use strict";function i(e){return function(){return e}}var n=function(){};n.thatReturns=i,n.thatReturnsFalse=i(!1),n.thatReturnsTrue=i(!0),n.thatReturnsNull=i(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},function(e,t,i){(function(t){"use strict";function i(e,t,i,r,o,a,s,c){if(n(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[i,r,o,a,s,c],d=0;l=new Error(t.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var n=function(e){};"production"!==t.env.NODE_ENV&&(n=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=i}).call(t,i(4))},function(e,t,i){(function(t){"use strict";var n=i(6),r=n;if("production"!==t.env.NODE_ENV){var o=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=0,o="Warning: "+e.replace(/%s/g,function(){return i[r++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}};r=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var i=arguments.length,n=Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];o.apply(void 0,[t].concat(n))}}}e.exports=r}).call(t,i(4))},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,i){(function(t){"use strict";function n(e,i,n,c,l){if("production"!==t.env.NODE_ENV)for(var u in e)if(e.hasOwnProperty(u)){var d;try{r("function"==typeof e[u],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",c||"React class",n,u),d=e[u](i,u,c,n,null,a)}catch(e){d=e}if(o(!d||d instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",c||"React class",n,u,typeof d),d instanceof Error&&!(d.message in s)){s[d.message]=!0;var p=l?l():"";o(!1,"Failed %s type: %s%s",n,d.message,null!=p?p:"")}}}if("production"!==t.env.NODE_ENV)var r=i(7),o=i(8),a=i(9),s={};e.exports=n}).call(t,i(4))},function(e,t,i){"use strict";var n=i(6),r=i(7),o=i(9);e.exports=function(){function e(e,t,i,n,a,s){s!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return i.checkPropTypes=n,i.PropTypes=i,i}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t._handleClick=t._handleMouseMove=t.restoreLogFromLocalstorage=t.restoreUpdatesFromLocalstorage=t.getGlobalState=t.setGlobalState=t.eventEmitter=void 0;var r=i(13),o=i(14),a=i(15),s=n(a),c=i(16),l=n(c),u=i(17),d=n(u),p="mobx-react-devtool__updatesEnabled",m="mobx-react-devtool__logEnabled",h={updatesEnabled:!1,graphEnabled:!1,logEnabled:!1,hoverBoxes:[],renderingBoxes:[],logFilter:function(){return!0}},g=t.eventEmitter=new s.default;g.setMaxListeners(1/0);var f=void 0,_=t.setGlobalState=function(e){h.logEnabled!==e.logEnabled&&(!0===e.logEnabled?(f&&f(),f=(0,r.spy)(function(e){return(0,d.default)(e,h.logFilter)})):!1===e.logEnabled&&f&&f()),"undefined"!=typeof window&&window.localStorage&&(!0===e.updatesEnabled?window.localStorage.setItem(p,"YES"):!1===e.updatesEnabled&&window.localStorage.removeItem(p),!0===e.logEnabled?window.localStorage.setItem(m,"YES"):!1===e.logEnabled&&window.localStorage.removeItem(m)),!1===e.graphEnabled&&(e.hoverBoxes=[]),h=Object.assign({},h,e),g.emit("update")},y=(t.getGlobalState=function(){return h},t.restoreUpdatesFromLocalstorage=function(){if("undefined"!=typeof window&&window.localStorage){var e="YES"===window.localStorage.getItem(p);_({updatesEnabled:e})}},t.restoreLogFromLocalstorage=function(){if("undefined"!=typeof window&&window.localStorage){var e="YES"===window.localStorage.getItem(m);_({logEnabled:e})}},function(e){for(var t=e,i=void 0;t;){if(i=o.componentByNodeRegistery.get(t))return{component:i,node:t};t=t.parentNode}return{component:void 0,node:void 0}});t._handleMouseMove=function(e){if(h.graphEnabled){var t=e.target,i=y(t).node;if(i){var n=i.getBoundingClientRect();_({hoverBoxes:[{id:"the hovered node",type:"hover",x:n.left,y:n.top,width:n.width,height:n.height,lifeTime:1/0}]})}}},t._handleClick=function(e){if(h.graphEnabled){var t=e.target,i=y(t).component;if(i){e.stopPropagation(),e.preventDefault();var n=(0,r.getDependencyTree)(i.render.$mobx);(0,l.default)(n),_({dependencyTree:n,hoverBoxes:[],graphEnabled:!1})}}}},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,r,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(i=this._events[e],a(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(o(i))for(s=Array.prototype.slice.call(arguments,1),l=i.slice(),r=l.length,c=0;c<r;c++)l[c].apply(this,s);return!0},i.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var r=!1;return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var i,r,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],a=i.length,r=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(i)){for(s=a;s-- >0;)if(i[s]===t||i[s].listener&&i[s].listener===t){r=s;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],n(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){if(t.dependencies){for(var i=t.dependencies.length-1;i>=0;i--)for(var n=t.dependencies[i].name,r=i-1;r>=0;r--)if(t.dependencies[r].name===n){t.dependencies[r].dependencies=[].concat(t.dependencies[r].dependencies||[],t.dependencies[i].dependencies||[]),t.dependencies.splice(i,1);break}t.dependencies.forEach(e)}};t.default=i},function(e,t,i){"use strict";function n(e,t){!1===_&&"undefined"!=typeof navigator&&-1===navigator.userAgent.indexOf("Chrome")&&(console.warn("The output of the MobX logger is optimized for Chrome"),_=!0);var i=!0===e.spyReportStart,n=!0===e.spyReportEnd,h=void 0;if(0===y?(h=t(e),i&&!h&&(v=!0)):n&&v&&1===y?(h=!1,v=!1):h=!0!==v,h&&n)o(e.time);else if(h){var g=i?r:a;switch(e.type){case"action":g("%caction '%s' %s","color:dodgerblue",e.name,u("(",m(e.target))),a(e.arguments),c();break;case"transaction":g("%ctransaction '%s' %s","color:gray",e.name,u("(",m(e.target)));break;case"scheduled-reaction":g("%cscheduled async reaction '%s'","color:#10a210",d(e.object));break;case"reaction":g("%creaction '%s'","color:#10a210",d(e.object)),c();break;case"compute":r("%ccomputed '%s' %s","color:#10a210",d(e.object),u("(",m(e.target))),o();break;case"error":g("%cerror: %s","color:tomato",e.message),c(),l();break;case"update":(0,f.isObservableArray)(e.object)?g("updated '%s[%s]': %s (was: %s)",d(e.object),e.index,p(e.newValue),p(e.oldValue)):(0,f.isObservableObject)(e.object)?g("updated '%s.%s': %s (was: %s)",d(e.object),e.name,p(e.newValue),p(e.oldValue)):g("updated '%s': %s (was: %s)",d(e.object),p(e.newValue),p(e.oldValue)),s({newValue:e.newValue,oldValue:e.oldValue}),c();break;case"splice":g("spliced '%s': index %d, added %d, removed %d",d(e.object),e.index,e.addedCount,e.removedCount),s({added:e.added,removed:e.removed}),c();break;case"add":g("set '%s.%s': %s",d(e.object),e.name,p(e.newValue)),s({newValue:e.newValue}),c();break;case"delete":g("removed '%s.%s' (was %s)",d(e.object),e.name,p(e.oldValue)),s({oldValue:e.oldValue}),c();break;case"create":g("set '%s': %s",d(e.object),p(e.newValue)),s({newValue:e.newValue}),c();break;default:g(e.type),s(e)}}i&&y++,n&&y--}function r(){console[b?"groupCollapsed":"log"].apply(console,arguments),C++}function o(e){C--,"number"==typeof e&&a("%ctotal time: %sms","color:gray",e),b&&console.groupEnd()}function a(){console.log.apply(console,arguments)}function s(){console.dir.apply(console,arguments)}function c(){console.trace("stack")}function l(){for(var e=0,t=C;e<t;e++)o()}function u(e,t){return t?(e||"")+t+(S[e]||""):""}function d(e){return e?(0,f.getDebugName)(e):String(e)}function p(e){return h(e)?"string"==typeof e&&e.length>100?e.substr(0,97)+"...":e:u("(",m(e))}function m(e){if(null===e||void 0===e)return"";if(e&&"object"===(void 0===e?"undefined":g(e))){if(e&&e.$mobx)return e.$mobx.name;if(e.constructor)return e.constructor.name||"object"}return""+(void 0===e?"undefined":g(e))}function h(e){return null===e||void 0===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e}Object.defineProperty(t,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n;var f=i(13),_=!1,y=0,v=!1,b="function"==typeof console.groupCollapsed,C=0,S={'"':'"',"'":"'","(":")","[":"]","<":"]","#":""}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(2),l=n(c),u=i(3),d=n(u),p=i(12),m=i(19),h=n(m),g=i(20),f=n(g),_=i(21),y=n(_),v=i(23),b=n(v),C=i(24),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(C),M=function(e){function t(){var e,i,n,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.handleUpdate=function(){return n.setState({})},a=i,o(n,a)}return a(t,e),s(t,[{key:"componentDidMount",value:function(){p.eventEmitter.on("update",this.handleUpdate)}},{key:"componentWillUnmount",value:function(){p.eventEmitter.removeListener("update",this.handleUpdate)}},{key:"render",value:function(){var e=this.props,t=e.position,i=e.highlightTimeout,n={};return t?(n.top=t.top,n.right=t.right,n.bottom=t.bottom,n.left=t.left):(n.top="0px",n.right="20px"),l.default.createElement("div",null,l.default.createElement("div",{style:Object.assign({},S.panel,n)},l.default.createElement(y.default,{highlightTimeout:i},l.default.createElement(b.default,{id:"buttonUpdates"})),l.default.createElement(h.default,null,l.default.createElement(b.default,{id:"buttonGraph"})),l.default.createElement(f.default,null,l.default.createElement(b.default,{id:"buttonLog"}))))}}]),t}(c.Component);M.propTypes={highlightTimeout:d.default.number},t.default=M},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=i(14),u=i(12),d=function(e){function t(){var e,i,o,a;n(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.handleUpdate=function(){return o.setState({})},o.handleToggleGraph=function(){var e=(0,u.getGlobalState)(),t=e.graphEnabled;(0,u.setGlobalState)({hoverBoxes:[],graphEnabled:!t})},a=i,r(o,a)}return o(t,e),a(t,[{key:"componentWillMount",value:function(){this.setState({})}},{key:"componentDidMount",value:function(){(0,l.trackComponents)(),u.eventEmitter.on("update",this.handleUpdate),"undefined"!=typeof window&&"undefined"!=typeof document&&(document.body.addEventListener("mousemove",u._handleMouseMove,!0),document.body.addEventListener("click",u._handleClick,!0))}},{key:"componentWillUnmount",value:function(){u.eventEmitter.removeListener("update",this.handleUpdate),"undefined"!=typeof document&&(document.body.removeEventListener("mousemove",u._handleMouseMove,!0),document.body.removeEventListener("click",u._handleMouseMove,!0))}},{key:"render",value:function(){var e=(0,u.getGlobalState)(),t=e.graphEnabled,i=this.props.children;return c.default.cloneElement(i,{onToggle:this.handleToggleGraph,active:t})}}]),t}(s.Component);t.default=d},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=i(12),u=function(e){function t(){var e,i,o,a;n(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return i=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.handleUpdate=function(){o.setState({})},o.handleToggleLog=function(){var e=(0,l.getGlobalState)(),t=e.logEnabled;(0,l.setGlobalState)({logEnabled:!t})},a=i,r(o,a)}return o(t,e),a(t,[{key:"componentDidMount",value:function(){l.eventEmitter.on("update",this.handleUpdate),(0,l.restoreLogFromLocalstorage)()}},{key:"componentWillUnmount",value:function(){l.eventEmitter.removeListener("update",this.handleUpdate)}},{key:"render",value:function(){var e=(0,l.getGlobalState)(),t=e.logEnabled,i=this.props.children;return c.default.cloneElement(i,{onToggle:this.handleToggleLog,active:t})}}]),t}(s.Component);t.default=u},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(2),l=n(c),u=i(3),d=n(u),p=i(22),m=n(p),h=i(12),g=function(e){function t(){var e,i,n,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.handleUpdate=function(){return n.setState({})},n.handleToggleUpdates=function(){var e=(0,h.getGlobalState)(),t=e.updatesEnabled;(0,h.setGlobalState)({updatesEnabled:!t})},a=i,o(n,a)}return a(t,e),s(t,[{key:"componentDidMount",value:function(){h.eventEmitter.on("update",this.handleUpdate);var e=this.props.highlightTimeout;this.renderingMonitor=new m.default({highlightTimeout:e}),(0,h.restoreUpdatesFromLocalstorage)()}},{key:"componentWillUnmount",value:function(){h.eventEmitter.removeListener("update",this.handleUpdate),this.renderingMonitor.dispose()}},{key:"render",value:function(){var e=(0,h.getGlobalState)(),t=e.updatesEnabled,i=this.props.children;return l.default.cloneElement(i,{onToggle:this.handleToggleUpdates,active:t})}}]),t}(c.Component);g.propTypes={highlightTimeout:d.default.number},g.defaultProps={highlightTimeout:1500},t.default=g},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(14),a=i(12),s=function(e){switch(!0){case e<25:return"cheap";case e<100:return"acceptable";default:return"expensive"}},c=function(){function e(t){var i=this,r=t.highlightTimeout;n(this,e),this._boxesRegistry="undefined"!=typeof WeakMap?new WeakMap:new Map,this._renderReporterDisposer=o.renderReporter.on(function(e){if(!0===(0,a.getGlobalState)().updatesEnabled)switch(e.event){case"render":if(!e.node||isNaN(e.renderTime))return;var t=e.node.getBoundingClientRect(),n=i.getBoxForNode(e.node);n.type="rendering",n.y=t.top,n.x=t.left,n.width=t.width,n.height=t.height,n.renderInfo={count:n.renderInfo&&++n.renderInfo.count||1,renderTime:e.renderTime,totalTime:e.totalTime,cost:s(e.renderTime)},n.lifeTime=r;var o=(0,a.getGlobalState)().renderingBoxes;return-1===o.indexOf(n)&&(o=o.concat([n])),(0,a.setGlobalState)({renderingBoxes:o}),n._timeout&&clearTimeout(n._timeout),void(n._timeout=setTimeout(function(){return i.removeBox(e.node,!0)},r));case"destroy":return i.removeBox(e.node),void i._boxesRegistry.delete(e.node);default:return}})}return r(e,[{key:"getBoxForNode",value:function(e){if(this._boxesRegistry.has(e))return this._boxesRegistry.get(e);var t={id:Math.random().toString(32).substr(2)};return this._boxesRegistry.set(e,t),t}},{key:"dispose",value:function(){this._renderReporterDisposer()}},{key:"removeBox",value:function(e){if(!1!==this._boxesRegistry.has(e)){var t=(0,a.getGlobalState)().renderingBoxes,i=t.indexOf(this._boxesRegistry.get(e));-1!==i&&(t=t.slice(0,i).concat(t.slice(i+1)),(0,a.setGlobalState)({renderingBoxes:t}))}}}]),e}();t.default=c},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(2),l=n(c),u=i(3),d=n(u),p=i(24),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(p),h=function(e){function t(){var e,i,n,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.state={hovered:!1},n.handleMouseOver=function(){return n.setState({hovered:!0})},n.handleMouseOut=function(){return n.setState({hovered:!1})},a=i,o(n,a)}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.active,i=e.id,n=e.onToggle,r=this.state.hovered,o=function(){switch(i){case"buttonUpdates":return t?m.buttonUpdatesActive:m.buttonUpdates;case"buttonGraph":return t?m.buttonGraphActive:m.buttonGraph;case"buttonLog":return t?m.buttonLogActive:m.buttonLog}}(),a=function(){switch(i){case"buttonUpdates":return"Visualize component re-renders";case"buttonGraph":return"Select a component and show its dependency tree";case"buttonLog":return"Log all MobX state changes and reactions to the browser console (use F12 to show / hide the console). Use Chrome / Chromium for an optimal experience"}}(),s=Object.assign({},m.button,o,t&&m.button.active,r&&m.button.hover);return l.default.createElement("button",{type:"button",onClick:n,title:a,style:s,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})}}]),t}(c.Component);h.props={onToggle:d.default.bool.isRequired,active:d.default.bool.isRequired,name:d.default.oneOf(["buttonUpdates","buttonGraph","buttonLog"]).isRequired},t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.panel={position:"fixed",height:"26px",backgroundColor:"#fff",color:"rgba(0, 0, 0, 0.8)",borderRadius:"0 0 2px 2px",borderStyle:"solid",borderWidth:"0 1px 1px",borderColor:"rgba(0, 0, 0, 0.1)",zIndex:"65000",fontFamily:"Helvetica, sans-serif",display:"flex",padding:"0 5px"},t.button={opacity:.45,background:"transparent none center / 16px 16px no-repeat",width:"26px",margin:"0 10px",cursor:"pointer",border:"none",hover:{opacity:.7},active:{opacity:1,":hover":{opacity:1}}},t.buttonLog={backgroundImage:"url("+i(25)+")"},t.buttonLogActive={backgroundImage:"url("+i(26)+")"},t.buttonUpdates={backgroundImage:"url("+i(27)+")"},t.buttonUpdatesActive={backgroundImage:"url("+i(28)+")"},t.buttonGraph={backgroundImage:"url("+i(29)+")"},t.buttonGraphActive={backgroundImage:"url("+i(30)+")"}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iYmFzaWMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2IiBoZWlnaHQ9IjE2IiB3aWR0aD0iMTYiPgogICAgPGcgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPgogICAgICAgIDxwYXRoIGQ9Ik0xMi41IDMuNWgtOGMtMS4xIDAtMiAuOS0yIDJ2NWMwIDEuMS45IDIgMiAyaDF2Mmw1LTJoMmMxLjEgMCAyLS45IDItMnYtNWMwLTEuMS0uOS0yLTItMnoiLz4KICAgICAgICA8cGF0aCBkPSJNNSA2LjVoNyIvPgogICAgICAgIDxwYXRoIGQ9Ik01IDkuNWg3Ii8+CiAgICA8L2c+Cjwvc3ZnPgo="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iYmFzaWMiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij4KICAgIDxnIHN0cm9rZT0iIzE3ODBmYSIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxLjI1Ij4KICAgICAgICA8cGF0aCBkPSJNMTIuNSAzLjVoLThjLTEuMSAwLTIgLjktMiAydjVjMCAxLjEuOSAyIDIgMmgxdjJsNS0yaDJjMS4xIDAgMi0uOSAyLTJ2LTVjMC0xLjEtLjktMi0yLTJ6Ii8+CiAgICAgICAgPHBhdGggZD0iTTUgNi41aDciLz4KICAgICAgICA8cGF0aCBkPSJNNSA5LjVoNyIvPgogICAgPC9nPgo8L3N2Zz4K"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iYmFzaWMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2IiBoZWlnaHQ9IjE2IiB3aWR0aD0iMTYiPgogICAgPGcgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPgogICAgICAgIDxjaXJjbGUgY3g9IjguNSIgY3k9IjguNSIgcj0iNiIvPgogICAgICAgIDxwYXRoIGQ9Ik04LjUgMTBWNCIvPgogICAgPC9nPgogICAgPGcgc3Ryb2tlPSJub25lIiBmaWxsPSIjMDAwIj4KICAgICAgICA8Y2lyY2xlIGN4PSI4LjUiIGN5PSI4LjUiIHI9IjEiLz4KICAgICAgICA8cGF0aCBkPSJNNy41IDFoMnYxLjVoLTJ6Ii8+CiAgICAgICAgPHBhdGggZD0iTTE0IDEuNmwtLjcuNy4zLjMtLjcuOC43LjcuOC0uNy4zLjMuNy0uN3oiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iYmFzaWMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2IiBoZWlnaHQ9IjE2IiB3aWR0aD0iMTYiPgogICAgPGcgc3Ryb2tlPSIjMTc4MGZhIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjEuMjUiPgogICAgICAgIDxjaXJjbGUgY3g9IjguNSIgY3k9IjguNSIgcj0iNiIvPgogICAgICAgIDxwYXRoIGQ9Ik04LjUgMTBWNCIvPgogICAgPC9nPgogICAgPGcgc3Ryb2tlPSJub25lIiBmaWxsPSIjMTc4MGZhIj4KICAgICAgICA8Y2lyY2xlIGN4PSI4LjUiIGN5PSI4LjUiIHI9IjEiLz4KICAgICAgICA8cGF0aCBkPSJNNy41IDFoMnYxLjVoLTJ6Ii8+CiAgICAgICAgPHBhdGggZD0iTTE0IDEuNmwtLjcuNy4zLjMtLjcuOC43LjcuOC0uNy4zLjMuNy0uN3oiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iYmFzaWMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2IiBoZWlnaHQ9IjE2IiB3aWR0aD0iMTYiPgogICAgPGcgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPgogICAgICAgIDxwYXRoIGQ9Ik0yLjUgMi41aDl2MmgtOXoiLz4KICAgICAgICA8cGF0aCBkPSJNNy41IDcuNWg3djJoLTd6Ii8+CiAgICAgICAgPHBhdGggZD0iTTcuNSAxMi41aDd2MmgtN3oiLz4KICAgICAgICA8cGF0aCBkPSJNNC41IDQuNXY5aDMiLz4KICAgICAgICA8cGF0aCBkPSJNNy41IDguNWgtMyIvPgogICAgPC9nPgo8L3N2Zz4K"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iYmFzaWMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2IiBoZWlnaHQ9IjE2IiB3aWR0aD0iMTYiPgogICAgPGcgc3Ryb2tlPSIjMTc4MGZhIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjEuMjUiPgogICAgICAgIDxwYXRoIGQ9Ik0yLjUgMi41aDl2MmgtOXoiLz4KICAgICAgICA8cGF0aCBkPSJNNy41IDcuNWg3djJoLTd6Ii8+CiAgICAgICAgPHBhdGggZD0iTTcuNSAxMi41aDd2MmgtN3oiLz4KICAgICAgICA8cGF0aCBkPSJNNC41IDQuNXY5aDMiLz4KICAgICAgICA8cGF0aCBkPSJNNy41IDguNWgtMyIvPgogICAgPC9nPgo8L3N2Zz4K"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(2),l=n(c),u=i(3),d=n(u),p=i(32),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(p),h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"renderBox",value:function(e){switch(e.type){case"rendering":var t=m.rendering[e.renderInfo.cost]||{};return l.default.createElement("div",{key:e.id,ref:function(t){return setTimeout(function(){t&&(t.style.opacity=0)},e.lifeTime-500)},style:Object.assign({},m.box,m.rendering,t,{left:e.x,top:e.y,width:e.width,height:e.height})},l.default.createElement("span",{style:Object.assign({},m.text,t.text)},e.renderInfo.count,"x | ",e.renderInfo.renderTime," /"," ",e.renderInfo.totalTime," ms"));case"hover":return l.default.createElement("div",{key:e.id,style:Object.assign({},m.box,m.hover,{left:e.x,top:e.y,width:e.width,height:e.height})});default:throw new Error}}},{key:"render",value:function(){var e=this,t=this.props.boxes;return l.default.createElement("div",null,t.map(function(t){return e.renderBox(t)}))}}]),t}(c.Component);h.propTypes={boxes:d.default.arrayOf(d.default.shape({type:d.default.oneOf(["rendering","hover"]).isRequired,x:d.default.number.isRequired,y:d.default.number.isRequired,width:d.default.number.isRequired,height:d.default.number.isRequired,renderInfo:d.default.shape({count:d.default.number.isRequired,renderTime:d.default.number.isRequired,totalTime:d.default.number.isRequired,cost:d.default.oneOf(["cheap","acceptable","expensive"]).isRequired}),lifeTime:d.default.number.isRequired})).isRequired},t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.box={display:"block",position:"fixed",zIndex:"64998",minWidth:"60px",outline:"3px solid",pointerEvents:"none",transition:"opacity 500ms ease-in"},t.text={fontFamily:"verdana, sans-serif",padding:"0 4px 2px",color:"rgba(0, 0, 0, 0.6)",fontSize:"10px",lineHeight:"12px",pointerEvents:"none",float:"right",borderBottomRightRadius:"2px",maxWidth:"100%",maxHeight:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},t.rendering={cheap:{outlineColor:"rgba(182, 218, 146, 0.75)",text:{backgroundColor:"rgba(182, 218, 146, 0.75)"}},acceptable:{outlineColor:"rgba(228, 195, 66, 0.85)",text:{backgroundColor:"rgba(228, 195, 66, 0.85)"}},expensive:{outlineColor:"rgba(228, 171, 171, 0.95)",text:{backgroundColor:"rgba(228, 171, 171, 0.95)"}}},t.hover={outlineColor:"rgba(128, 128, 255, 0.5)"}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(2),l=n(c),u=i(34),d=n(u),p=i(12),m=i(36),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(m),g=function(e){function t(){var e,i,n,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.handleUpdate=function(){return n.setState({})},n.handleClose=function(){return(0,p.setGlobalState)({dependencyTree:void 0})},a=i,o(n,a)}return a(t,e),s(t,[{key:"componentDidMount",value:function(){p.eventEmitter.on("update",this.handleUpdate)}},{key:"componentWillUnmount",value:function(){p.eventEmitter.removeListener("update",this.handleUpdate)}},{key:"renderTreeItem",value:function(e,t,i){var n=e.name,r=e.dependencies,o=this;return l.default.createElement("div",{style:h.item,key:n},l.default.createElement("span",{style:Object.assign({},h.box,i&&h.box.root)},n),r&&l.default.createElement("div",{style:h.tree},r.map(function(e,t){return o.renderTreeItem(e,t==r.length-1)})),!i&&l.default.createElement("span",{style:h.itemHorisontalDash}),!i&&l.default.createElement("span",{style:Object.assign({},h.itemVericalStick,t&&h.itemVericalStick.short)}))}},{key:"render",value:function(){var e=(0,p.getGlobalState)(),t=e.dependencyTree;return l.default.createElement(d.default,{onOverlayClick:this.handleClose},t&&l.default.createElement("div",{style:h.graph},l.default.createElement("span",{style:h.close,onClick:this.handleClose},"×"),l.default.createElement("div",{style:h.tree},this.renderTreeItem(t,!0,!0))))}}]),t}(c.Component);t.default=g},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(3),l=n(c),u=i(2),d=n(u),p=i(35),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(p),h=function(e){function t(){var e,i,n,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.stopPropagation=function(e){return e.stopPropagation()},a=i,o(n,a)}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(e){var t=document.body.parentNode;if(e.children&&!this.props.children)t.style.borderRight=null,t.style.overflow=null;else if(!e.children&&this.props.children){var i=t.offsetWidth;t.style.overflow="hidden";var n=t.offsetWidth,r=Math.max(0,n-i);t.style.borderRight=r+"px solid transparent"}}},{key:"render",value:function(){var e=this.props,t=e.children,i=e.onOverlayClick;return t?d.default.createElement("div",{style:m.overlay,onClick:i},d.default.createElement("div",{key:"content",style:m.modal,onClick:this.stopPropagation},t)):null}}]),t}(u.Component);h.propTypes={children:l.default.node,onOverlayClick:l.default.func.isRequired},t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overlay={position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:66e3,overflow:"auto",WebkitOverflowScrolling:"touch",outline:0,backgroundColor:"rgba(40, 40, 50, 0.5)",transformOrigin:"50% 25%"},t.modal={position:"relative",width:"auto",margin:"5% 10%",zIndex:1060}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graph={background:"white",padding:"40px"},t.close={color:"rgba(0, 0, 0, 0.2)",fontSize:"36px",position:"absolute",top:"5px",right:"5px",width:"40px",height:"40px",lineHeight:"34px",textAlign:"center",cursor:"pointer",":hover":{color:"rgba(0, 0, 0, 0.5)"}},t.tree={position:"relative",paddingLeft:"25px"},t.item={position:"relative"},t.box={padding:"4px 10px",background:"rgba(0, 0, 0, 0.05)",display:"inline-block",marginBottom:"8px",color:"#000",root:{fontSize:"15px",fontWeight:"bold",padding:"6px 13px"}},t.itemHorisontalDash={position:"absolute",left:"-12px",borderTop:"1px solid rgba(0, 0, 0, 0.2)",top:"14px",width:"12px",height:"0"},t.itemVericalStick={position:"absolute",left:"-12px",borderLeft:"1px solid rgba(0, 0, 0, 0.2)",height:"100%",width:0,top:"-8px",short:{height:"23px"}}},function(e,t){"use strict";function i(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o=Object.keys(Object(r)),a=0,s=o.length;a<s;a++){var c=o[a],l=Object.getOwnPropertyDescriptor(r,c);void 0!==l&&l.enumerable&&(i[c]=r[c])}}return i}function n(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}e.exports={assign:i,polyfill:n}}])}(i("Jmof"),i("y986"),i("Mn8c"))}()},GCDA:function(e,t,i){var n;/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
!function(r,o){"use strict";var a="model",s="name",c="type",l="vendor",u="version",d="mobile",p="tablet",m={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(e,t){for(var i,n,r,o,a,s,c=0;c<t.length&&!a;){var l=t[c],u=t[c+1];for(i=n=0;i<l.length&&!a;)if(a=l[i++].exec(e))for(r=0;r<u.length;r++)s=a[++n],o=u[r],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;c+=2}},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(m.has(t[i][n],e))return"?"===i?void 0:i}else if(m.has(t[i],e))return"?"===i?void 0:i;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},f={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[s,u],[/(QQ)\/([\d\.]+)/i],[s,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,h.str,g.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",m.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,l,[c,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[c,p]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[c,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[l,"Amazon"],[c,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,h.str,g.device.amazon.model],[l,"Amazon"],[c,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[c,d]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[c,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[c,d]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[c,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[l,"Asus"],[c,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[c,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[l,"Sony"],[c,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[l,h.str,g.device.sprint.vendor],[a,h.str,g.device.sprint.model],[c,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,a,[c,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[a,/_/g," "],[c,d]],[/(nexus\s9)/i],[a,[l,"HTC"],[c,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[l,"Huawei"],[c,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[c,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[c,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[c,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[c,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,m.trim],[a,m.trim],[c,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[c,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[c,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[c,p]],[/smart-tv.+(samsung)/i],[l,[c,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[c,d]],[/sie-(\w*)/i],[a,[l,"Siemens"],[c,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],a,[c,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[l,"Acer"],[c,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[c,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[c,p]],[/(lg) netcast\.tv/i],[l,a,[c,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[c,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[c,p]],[/linux;.+((jolla));/i],[l,a,[c,d]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[c,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[c,d]],[/crkey/i],[[a,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[c,"wearable"]],[/android.+;\s(pixel c)\s/i],[a,[l,"Google"],[c,p]],[/android.+;\s(pixel xl|pixel)\s/i],[a,[l,"Google"],[c,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[c,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[c,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[c,p]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[l,"OnePlus"],[c,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[c,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[l,"Dell"],[c,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[c,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[c,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[c,p]],[/android.+;\s(k88)\sbuild/i],[a,[l,"ZTE"],[c,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[c,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[c,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[c,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],a,[c,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[l,"Insignia"],[c,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[l,"NextBook"],[c,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[c,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],a,[c,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[c,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,a,[c,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[c,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[c,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[c,p]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[c,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,a,[c,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,m.lowerize],l,a],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,h.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,h.str,g.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[s,u]]},_=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof _))return new _(e,t).getResult();var i=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?m.extend(f,t):f;return this.getBrowser=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,i,n.browser),e.major=m.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return h.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return h.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};_.VERSION="0.7.18",_.BROWSER={NAME:s,MAJOR:"major",VERSION:u},_.CPU={ARCHITECTURE:"architecture"},_.DEVICE={MODEL:a,VENDOR:l,TYPE:c,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},_.ENGINE={NAME:s,VERSION:u},_.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=_),t.UAParser=_):i("nErl")?void 0!==(n=function(){return _}.call(t,i,t,e))&&(e.exports=n):r&&(r.UAParser=_);var y=r&&(r.jQuery||r.Zepto);if(void 0!==y){var v=new _;y.ua=v.getResult(),y.ua.get=function(){return v.getUA()},y.ua.set=function(e){v.setUA(e);var t=v.getResult();for(var i in t)y.ua[i]=t[i]}}}("object"==typeof window?window:this)},Jea8:function(e,t,i){"use strict";function n(e,t,i){var n,r=void 0,o=void 0,a=t;if(a.preventDefault&&a.stopPropagation){if(a.shiftKey)return null;a.preventDefault(),a.stopPropagation(),n=a.currentTarget,r=a.clientX,o=a.clientY}else n=t;var s=new p(e,n,r,o,i);return s.Show(),s}i.d(t,"b",function(){return u}),t.a=n;var r=i("TToO"),o=i("Jmof"),a=(i.n(o),i("EQHU")),s=i("8MbF"),c=i("BE2g"),l=i("y986"),u=function(){function e(){}return e.GetBrowserInfoForPopup=function(e){return null},e.prototype.SetTakeFocus=function(e){this.m_fnTakeFocus=e},e}(),d=function(e){function t(t){var i=e.call(this)||this;return i.m_bVisible=!1,i.m_elSubmenuItem=null,i.m_timerHideSubMenu=0,i.m_ownerWindow=t,i}return r.d(t,e),t.prototype.Init=function(e,t){(e.options.bForcePopup||this.m_ownerWindow.innerWidth)<400&&this.m_ownerWindow.SteamClient&&this.m_ownerWindow.SteamClient.Window?this.m_popupContextMenu=new s.a(e,t,u.GetBrowserInfoForPopup(this.m_ownerWindow)):(this.m_embeddedElementInstance=Object(c.b)(this.m_ownerWindow.document),this.m_rctElement=o.createElement(s.g,e,t))},t.prototype.SetOnHideCallback=function(e){this.m_fnOnHideCallback=e},t.prototype.Show=function(){this.m_rctElement?this.m_embeddedElementInstance.Show(this.m_rctElement):this.m_popupContextMenu.Show(),this.m_bVisible=!0},t.prototype.Hide=function(){this.InternalHide()},t.prototype.HideIfNotInFocus=function(){this.BHasFocus()||this.BIsFocusInChildHierarchy()||this.Hide()},t.prototype.InternalHide=function(){this.m_bVisible&&(this.m_bVisible=!1,this.InternalHideSubMenu(),this.m_fnOnHideCallback&&this.m_fnOnHideCallback(),this.m_embeddedElementInstance?this.m_embeddedElementInstance.Hide(300):this.m_popupContextMenu.Close())},Object.defineProperty(t.prototype,"visible",{get:function(){return this.m_bVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.m_options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner_window",{get:function(){return this.m_ownerWindow},enumerable:!0,configurable:!0}),t.prototype.ShowSubMenu=function(e,t){return this.m_elSubmenuItem==e?(this.CancelHideSubMenuTimer(),this.m_submenu.TakeFocus(),null):(this.InternalHideSubMenu(),this.m_elSubmenuItem=e,this.m_submenu=new m(this,t(),e),this.m_submenu.Show(),this.m_submenu)},t.prototype.CancelHideSubMenuTimer=function(){this.m_timerHideSubMenu>0&&(clearTimeout(this.m_timerHideSubMenu),this.m_timerHideSubMenu=0)},t.prototype.HideSubMenu=function(){var e=this;if(!this.m_submenu)return void this.CancelHideSubMenuTimer();this.m_timerHideSubMenu>0||(this.m_timerHideSubMenu=window.setTimeout(function(){e.InternalHideSubMenu(),e.m_timerHideSubMenu=0},500))},t.prototype.InternalHideSubMenu=function(){this.CancelHideSubMenuTimer(),this.m_submenu&&(this.BIsFocusInChildHierarchy()&&this.TakeFocus(),this.m_elSubmenuItem=null,this.m_submenu.InternalHide(),this.m_submenu=null)},t.prototype.TakeFocus=function(){this.m_popupContextMenu&&this.m_popupContextMenu.Focus(),this.m_fnTakeFocus&&this.m_fnTakeFocus()},t.prototype.BInternalElementInParentHierarchy=function(e){return this.m_parentInstance&&(this.m_parentInstance.BIsChildElement(e)||this.m_parentInstance.BInternalElementInParentHierarchy(e))},t.prototype.BInternalElementInChildHierarchy=function(e){return this.m_submenu&&(this.m_submenu.BIsChildElement(e)||this.m_submenu.BInternalElementInChildHierarchy(e))},t.prototype.BIsChildElement=function(e){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(e):a.e(this.m_popupContextMenu.root_element,e)},t.prototype.BHasFocus=function(){return this.m_embeddedElementInstance?this.m_embeddedElementInstance.BIsChildElement(this.m_ownerWindow.document.activeElement):this.m_popupContextMenu.focused},t.prototype.BIsFocusInChildHierarchy=function(){return this.m_submenu&&(this.m_submenu.BHasFocus()||this.m_submenu.BIsFocusInChildHierarchy())},t.prototype.BIsElementInMenuHierarchy=function(e){return this.BInternalElementInParentHierarchy(e)||this.BInternalElementInChildHierarchy(e)},t.prototype.BIsSubMenuVisible=function(){return!!this.m_submenu},r.c([l.observable],t.prototype,"m_bVisible",void 0),t}(u),p=function(e){function t(i,n,r,o,a){var s=e.call(this,n.ownerDocument.defaultView)||this;t.sm_iActiveContextMenuInstance&&t.sm_iActiveContextMenuInstance.Hide(),t.sm_iActiveContextMenuInstance=s,s.m_options=a||{};var c={element:n,clientX:r,clientY:o,instance:s,options:s.m_options,fnOnMenuItemSelected:function(){s.Hide()}};return s.Init(c,i),s}return r.d(t,e),t.prototype.Show=function(){t.sm_mapEmbeddedMouseOverlays.ShowElement(this.m_ownerWindow.document,o.createElement(s.f),this),e.prototype.Show.call(this)},t.prototype.Hide=function(){t.sm_mapEmbeddedMouseOverlays.HideElement(this.m_ownerWindow.document,this),e.prototype.Hide.call(this)},t.sm_mapEmbeddedMouseOverlays=new c.a("ContextMenuMouseOverlay"),t}(d),m=function(e){function t(t,i,n){var r=e.call(this,n.ownerDocument.defaultView)||this;r.m_parentInstance=t,r.m_options={bOverlapVertical:!0,bUseWebStyles:t.options.bUseWebStyles};var o={element:n,clientX:null,clientY:null,instance:r,options:r.m_options,fnOnMenuItemSelected:function(){r.Hide()},bSubmenu:!0};return r.Init(o,i),r}return r.d(t,e),t.prototype.Hide=function(){var e=this;this.m_popupContextMenu?window.setTimeout(function(){e.m_parentInstance.HideIfNotInFocus()},10):this.m_parentInstance.Hide()},t}(d)},PVtO:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s});var n=i("m5yx"),r={success:!0,result:1},o=function(){function e(){this.m_connection=new a,this.m_bAllowAccountMismatch=!1,this.m_mapCacheSubscribedApp=new Map}return e.prototype.FailureResult=function(e){void 0===e&&(e=2);var t={success:!1,result:e};return this.m_connection&&!this.m_connection.browser_supported&&(t.browser_unsupported=!0),this.m_connection&&!this.m_connection.connected_to_client&&(t.connect_failed=!0),7==e&&(t.call_unsupported=!0),t},e.prototype.SetAllowAccountMismatch=function(e){this.m_bAllowAccountMismatch=e},e.prototype.BClientConnected=function(){var e=this;return this.m_connection.Connect().then(function(){return r},function(){return e.FailureResult()})},e.prototype.BClientSupportsMessage=function(e){return!(!this.m_connection.connected_to_client||!this.m_connection.ready)&&-1!==this.m_connection.ClientInfo.rgSupportedMessages.indexOf(e)},e.prototype.OpenFriendChatDialog=function(e){var t={message:"ShowFriendChatDialog",steamid:e};return this.GenericEResultCall(t)},e.prototype.OpenChatRoomGroupDialog=function(e,t){var i={message:"ShowChatRoomGroupDialog",chat_group_id:e};return t&&(i.chat_room_id=t),this.GenericEResultCall(i)},e.prototype.ShowChatRoomGroupInvite=function(e){var t={message:"ShowChatRoomGroupInvite",invite_code:e};return this.GenericEResultCall(t)},e.prototype.OpenJoinGameDialog=function(e){var t={message:"ShowJoinGameDialog",friend_id:e};return this.GenericEResultCall(t)},e.prototype.BIsSubscribedApp=function(e){var t=this;if(this.m_mapCacheSubscribedApp.has(e))return Promise.resolve(this.m_mapCacheSubscribedApp.get(e));var i={message:"IsSubscribedApp",appid:e};return this.GenericEResultCall(i).then(function(i){if(!i.connect_failed){var n=1==i.result;return t.m_mapCacheSubscribedApp.set(e,n),n}})},e.prototype.ViewGameInfoForSteamID=function(e){var t={message:"ViewGameInfoForSteamID",steamid:e};return this.GenericEResultCall(t)},e.prototype.BClientAccountMatches=function(){return!n.d.logged_in||n.d.accountid==this.m_connection.ClientInfo.unAccountID},e.prototype.GenericEResultCall=function(e){var t=this;return this.m_connection.Connect().then(function(){return t.m_bAllowAccountMismatch||t.BClientAccountMatches()?t.m_connection.SendMsgAndAwaitResponse(e).then(function(e){return 1===e.success?r:t.FailureResult(e.success)}):{success:!1,result:19,account_mismatch:!0}}).catch(function(){return t.FailureResult()})},e}(),a=function(){function e(){this.m_mapWaitingCallbacks=new Map,this.m_iCallSeq=1,this.m_bReady=!1,this.m_bClientConnectionFailed=!1,this.m_bSecurityException=!1,this.m_ClientInfo={ulVersion:"",bFriendsUIEnabled:!1,unAccountID:0,rgSupportedMessages:[]}}return Object.defineProperty(e.prototype,"ClientInfo",{get:function(){return this.m_ClientInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this.m_bReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browser_supported",{get:function(){return!this.m_bSecurityException},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected_to_client",{get:function(){return this.m_socket&&this.m_socket.readyState==WebSocket.OPEN},enumerable:!0,configurable:!0}),e.prototype.SendMsgAndAwaitResponse=function(e){var t=this;return new Promise(function(i,n){var r=t.m_iCallSeq++;t.BSendMsg(e,r)?t.m_mapWaitingCallbacks.set(r,{iSeq:r,fnCallback:i,fnError:n}):n()})},e.prototype.BSendMsg=function(e,t){if(!this.m_socket||this.m_socket.readyState!=WebSocket.OPEN)return!1;var i=Object.assign({},e,{universe:n.a.EUNIVERSE,accountid:n.d.accountid});void 0!==t&&(i.sequenceid=t);try{return this.m_socket.send(JSON.stringify(i)),!0}catch(e){return!1}},e.prototype.OnSocketMessage=function(e){try{var t=JSON.parse(e.data);if(t.sequenceid){var i=this.m_mapWaitingCallbacks.get(t.sequenceid);if(i)return this.m_mapWaitingCallbacks.delete(t.sequenceid),void i.fnCallback(t)}}catch(e){console.error("exception parsing response",e)}},e.prototype.Connect=function(){var e=this;if(this.m_bReady&&this.m_socket.readyState==WebSocket.OPEN)return Promise.resolve();if(this.m_promiseConnect)return this.m_promiseConnect;var t=new Promise(function(t,i){try{e.m_socket=new WebSocket("ws://127.0.0.1:27060/clientsocket/")}catch(t){return e.m_bSecurityException=!0,void i(t)}e.m_socket.onerror=function(e){i()},e.m_socket.onmessage=e.OnSocketMessage.bind(e),e.m_socket.onopen=function(n){var r={message:"GetClientInfo"};e.SendMsgAndAwaitResponse(r).then(function(n){1==n.success?(e.m_ClientInfo.ulVersion=n.clientversion,e.m_ClientInfo.bFriendsUIEnabled=!!n.friendsui,e.m_ClientInfo.unAccountID=n.accountid,n.supported_messages&&(e.m_ClientInfo.rgSupportedMessages=n.supported_messages),t()):i()}).catch(i)}});return this.m_promiseConnect=t,this.m_promiseConnect.then(function(){e.m_bReady=!0,e.m_promiseConnect=void 0}).catch(function(){e.m_bClientConnectionFailed=!0,e.m_promiseConnect=void 0}),this.m_promiseConnect},e}(),s=new o;window.ClientConnectionAPI=s},TToO:function(e,t,i){"use strict";function n(e,t){function i(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function r(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(i[n[r]]=e[n[r]]);return i}function o(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a}function a(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}c((n=n.apply(e,t||[])).next())})}function s(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}t.d=n,i.d(t,"a",function(){return l}),t.f=r,t.c=o,t.b=a,t.e=s;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},l=function(){return l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l.apply(this,arguments)}},U3bN:function(e,t,i){"use strict";function n(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];console.assert?0==i.length?console.assert(!!e,t):console.assert.apply(console,[!!e,t].concat(i)):e||console.warn.apply(console,[t].concat(i))}t.a=n},"V/Vt":function(e,t,i){"use strict";i.d(t,"c",function(){return n}),i.d(t,"a",function(){return d}),i.d(t,"b",function(){return p}),i.d(t,"d",function(){return h});var n,r=i("TToO"),o=i("y986"),a=i("wLXD"),s=(i.n(a),i("lEUG")),c=i("x0X8"),l=i("Bp66");!function(e){e[e.Minimized=1]="Minimized",e[e.Hidden=2]="Hidden",e[e.Tooltip=4]="Tooltip",e[e.ContextMenu=8]="ContextMenu",e[e.Resizable=16]="Resizable"}(n||(n={}));var u=function(){function e(e,t){this.m_rgLoadingLinks=[],this.m_rgLoadingLinks=[];for(var i=e.document.getElementsByTagName("link"),n=0;n<i.length;n++){var r=i[n];r.addEventListener("load",this.OnLinkLoad),this.m_rgLoadingLinks.push(r)}}return e.prototype.SetTarget=function(e){this.m_fnRender=e,0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},e.prototype.OnLinkLoad=function(e){e.currentTarget.removeEventListener("load",this.OnLinkLoad),s.c(this.m_rgLoadingLinks,e.currentTarget),0==this.m_rgLoadingLinks.length&&(this.m_fnRender(),this.m_fnRender=void 0)},r.c([l.a],e.prototype,"OnLinkLoad",null),e}(),d=function(){function e(e,t){this.m_bFocused=!1,this.m_strName=e,this.m_rgParams=t,this.m_rgParams.target_browser&&(this.m_strName+="_pid"+this.m_rgParams.target_browser.m_unPID),this.m_strTitle=t.title,delete this.m_rgParams.title}return e.prototype.UpdateParamsBeforeShow=function(e){return e},e.prototype.OnDrop=function(e){console.log("Ignoring drop onto toplevel window",e),e.preventDefault(),e.stopPropagation()},e.prototype.OnDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="none",e.stopPropagation()},e.prototype.OnMessage=function(e){"window_moved"==e.data&&this.OnResize()},e.prototype.Show=function(e){var t=this;void 0===e&&(e=!0);var i;window.SteamClient&&(this.m_rgParams.eCreationFlags|=n.Hidden),this.m_rgParams.eCreationFlags&n.Tooltip&&(e=!1),this.BIsValid()&&(this.BIsClosed()?(this.m_popup=void 0,this.m_element=void 0):e&&this.Focus());var r=h.GetExistingPopup(this.m_strName);if(!r||this.m_rgParams.replace_existing_popup){this.m_rgParams=this.UpdateParamsBeforeShow(this.m_rgParams);var o,a,s;r?(a=r.m_element,o=r.m_popup,r.ReleasePopup(),s=r.m_renderWhenReady,h.RemoveTrackedPopup(r),o.removeEventListener("beforeunload",r.OnBeforeUnloadEvent),o.removeEventListener("unload",r.OnUnload),o.removeEventListener("resize",r.OnResizeEvent),o.removeEventListener("focus",this.OnFocusInternal),o.removeEventListener("blur",this.OnBlurInternal),o.removeEventListener("drop",r.OnDrop),o.removeEventListener("dragover",r.OnDragOver),o.removeEventListener("message",this.OnMessage)):(i=m.CreatePopup(this.m_strName,this.m_rgParams),o=i.popup,a=i.element,s=new u(o,a)),o&&a&&(o.document.title=this.m_strTitle,o.addEventListener("beforeunload",this.OnBeforeUnloadEvent),o.addEventListener("unload",this.OnUnload),o.addEventListener("resize",this.OnResizeEvent),o.addEventListener("focus",this.OnFocusInternal),o.addEventListener("blur",this.OnBlurInternal),o.addEventListener("drop",this.OnDrop),o.addEventListener("dragover",this.OnDragOver),o.addEventListener("message",this.OnMessage),this.m_popup=o,this.m_element=a,this.m_renderWhenReady=s,this.m_renderWhenReady.SetTarget(function(){return t.RenderInternal(t.m_popup,t.m_element,e)})),h.AddTrackedPopup(this),r&&e&&this.Focus()}},e.prototype.RemoveEventListeners=function(){this.window.removeEventListener("beforeunload",this.OnBeforeUnloadEvent),this.window.removeEventListener("unload",this.OnUnload),this.window.removeEventListener("resize",this.OnResizeEvent),this.window.removeEventListener("focus",this.OnFocusInternal),this.window.removeEventListener("blur",this.OnBlurInternal),this.window.removeEventListener("drop",this.OnDrop),this.window.removeEventListener("dragover",this.OnDragOver),this.window.removeEventListener("message",this.OnMessage)},e.prototype.RenderInternal=function(e,t,i){this.Render(e,t),this.OnLoad(),e.SteamClient&&(i?e.SteamClient.Window.BringToFront():e.SteamClient.Window.ShowWindow())},e.prototype.OnResizeEvent=function(){this.OnResize()},e.prototype.OnBeforeUnloadEvent=function(){this.OnBeforeUnload()},e.prototype.OnUnload=function(){this.RemoveEventListeners(),h.RemoveTrackedPopup(this),this.OnClose(),a.unmountComponentAtNode(this.m_element)},Object.defineProperty(e.prototype,"browser_info",{get:function(){return this.m_rgParams.target_browser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.m_popup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root_element",{get:function(){return this.m_element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.m_strTitle},set:function(e){this.m_strTitle=e,this.m_popup&&(this.m_popup.document.title=this.m_strTitle)},enumerable:!0,configurable:!0}),e.prototype.Focus=function(){this.m_popup&&void 0!==this.m_popup.SteamClient&&void 0!==this.m_popup.SteamClient.Window?this.m_popup.SteamClient.Window.BringToFront():this.m_popup&&this.m_popup.focus()},e.prototype.Close=function(){this.m_popup&&this.m_popup.close()},e.prototype.GetName=function(){return this.m_strName},e.prototype.BIsValid=function(){return!!this.m_popup},e.prototype.BIsClosed=function(){return!this.m_popup||this.m_popup.closed},e.prototype.BIsVisible=function(){return this.m_popup&&!this.m_popup.closed&&"visible"==this.m_popup.document.visibilityState},e.prototype.BIsFocused=function(){return this.BIsVisible()&&this.m_popup.document.hasFocus()},e.prototype.OnFocusInternal=function(){this.m_bFocused=!0,this.OnFocus()},e.prototype.OnBlurInternal=function(){this.m_bFocused=!1,this.OnBlur()},Object.defineProperty(e.prototype,"focused",{get:function(){return this.m_bFocused},enumerable:!0,configurable:!0}),e.prototype.GetWindowRestoreDetails=function(){var e=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient?new Promise(function(t,i){e.m_popup.SteamClient.Window.GetWindowRestoreDetails(function(e){t(e)})}):Promise.resolve("")},e.prototype.IsMinimized=function(){var e=this;return this.m_popup&&!this.m_popup.closed&&this.m_popup.SteamClient&&this.m_popup.SteamClient.Window&&this.m_popup.SteamClient.Window.IsWindowMinimized?new Promise(function(t,i){e.m_popup.SteamClient.Window.IsWindowMinimized(function(e){t(e)})}):Promise.resolve(!1)},e.prototype.ReleasePopup=function(){this.OnClose(),this.m_popup=null},e.prototype.OnBeforeUnload=function(){},e.prototype.OnFocus=function(){},e.prototype.OnBlur=function(){},r.c([o.observable],e.prototype,"m_bFocused",void 0),r.c([l.a],e.prototype,"OnMessage",null),r.c([l.a],e.prototype,"OnResizeEvent",null),r.c([l.a],e.prototype,"OnBeforeUnloadEvent",null),r.c([l.a],e.prototype,"OnUnload",null),r.c([l.a],e.prototype,"OnFocusInternal",null),r.c([l.a],e.prototype,"OnBlurInternal",null),r.c([o.computed],e.prototype,"focused",null),e}(),p=function(e){function t(t,i,n,r){var o=e.call(this,t,n)||this;return o.SetSavedDimensionsKey(i),o.m_bExpires=r,o}return r.d(t,e),t.prototype.BIsInOverlay=function(){return this.browser_info&&this.browser_info!={m_unPID:0,m_nBrowserID:-1}},t.prototype.SetSavedDimensionsKey=function(e){this.m_strSavedDimensionsKey=e},t.prototype.UpdateParamsBeforeShow=function(e){return!this.m_strSavedDimensionsKey||e.bIgnoreSavedDimensions||e.strRestoreDetails?e.strRestoreDetails&&(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),h.SetRestoreDetails(this.m_strInitialSavedDimensionsKey,e.strRestoreDetails,this.m_bExpires)):(this.m_strInitialSavedDimensionsKey=this.GetSavedDimensionsKey(),e.strRestoreDetails=h.GetRestoreDetails(this.m_strInitialSavedDimensionsKey)),e},t.prototype.OnLoad=function(){var e=this;this.GetWindowRestoreDetails().then(function(t){e.m_strInitialRestoreDetails=t,e.OnResizeComplete(t)})},t.prototype.OnResize=function(){this.QueryAndStoreWindowPosition()},t.prototype.OnResizeComplete=function(e){},t.prototype.QueryAndStoreWindowPosition=function(){var e=this;if(this.m_strInitialRestoreDetails){var t=this.GetSavedDimensionsKey();this.m_popup.setTimeout(function(){e.GetWindowRestoreDetails().then(function(i){var n=e.m_strInitialRestoreDetails==i&&t==e.m_strInitialSavedDimensionsKey;e.m_popup&&e.m_strSavedDimensionsKey&&i&&!n&&(h.SetRestoreDetails(t,i,e.m_bExpires),e.m_rgParams.strRestoreDetails=i,e.m_strInitialSavedDimensionsKey=t,e.OnResizeComplete(i))})},30)}},t.prototype.OnBeforeUnload=function(){this.QueryAndStoreWindowPosition(),e.prototype.OnBeforeUnload.call(this)},t.prototype.OnClose=function(){},t.prototype.SaveWindowPosition=function(e){h.SetRestoreDetails(this.GetSavedDimensionsKey(),e,!1),this.m_rgParams.strRestoreDetails=e},r.c([l.a],t.prototype,"QueryAndStoreWindowPosition",null),t}(d),m=function(){function e(){var e=this;this.m_bShuttingDown=!1,this.m_mapPopups=new Map,this.m_rgShutdownCallbacks=[],this.m_rgPopupCreatedCallbacks=[],this.m_unCurrentAccountID=0,this.m_mapRestoreDetails=new Map,this.m_bSaveRequired=!1,Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||window.addEventListener("beforeunload",function(t){e.m_bShuttingDown=!0;for(var i=0,n=e.m_rgShutdownCallbacks;i<n.length;i++)(0,n[i])();var r=[];e.m_mapPopups.forEach(function(e){e.BIsValid()&&!e.BIsClosed()&&r.push(e)});for(var o=0,a=r;o<a.length;o++)a[o].Close();e.m_bSaveRequired&&e.SaveSavedDimensionStore(),e.m_mapPopups.clear()})}return e.prototype.SetCurrentLoggedInAccountID=function(e){this.m_unCurrentAccountID=e,e?this.LoadSavedDimensionStore():this.ClearSavedDimensionStore()},e.prototype.AddShutdownCallback=function(e){this.m_rgShutdownCallbacks.push(e)},e.prototype.AddPopupCreatedCallback=function(e){this.m_rgPopupCreatedCallbacks.push(e)},e.prototype.AddTrackedPopup=function(e){this.m_mapPopups.set(e.GetName(),e);for(var t=0,i=this.m_rgPopupCreatedCallbacks;t<i.length;t++)(0,i[t])(e)},e.prototype.RemoveTrackedPopup=function(e){this.m_mapPopups.delete(e.GetName())},e.prototype.GetExistingPopup=function(e){return this.m_mapPopups.get(e)},e.prototype.GetPopups=function(){return this.m_mapPopups.values()},e.prototype.ClosePopupsOwnedByBrowser=function(e){this.m_mapPopups.forEach(function(t){t.browser_info&&t.browser_info.m_nBrowserID==e.m_nBrowserID&&t.browser_info.m_unPID==e.m_unPID&&t.Close()})},e.CreatePopup=function(e,t){var i=t.dimensions||{},n=i.width||300,r=i.height||300,o=t.title,a="width="+n+",height="+r;void 0!==i.left&&(a+=",left="+i.left),void 0!==i.top&&(a+=",top="+i.top),a+=",resizeable,status=0,toolbar=0,menubar=0,location=0";var s="about:blank",c=[];c.push("createflags="+t.eCreationFlags),t.minWidth&&c.push("minwidth="+t.minWidth),t.minHeight&&c.push("minheight="+t.minHeight),t.target_browser&&(c.push("pid="+t.target_browser.m_unPID),c.push("browser="+t.target_browser.m_nBrowserID),t.availscreenwidth&&t.availscreenheight&&(c.push("screenavailwidth="+t.availscreenwidth),c.push("screenavailheight="+t.availscreenheight))),t.strRestoreDetails&&c.push("restoredetails="+t.strRestoreDetails),c&&(s+="?"+c.join("&"));var l=t.owner_window||window,u=l.open(s,e,a,!0);if(!u)return console.log("Failed to create popup.. browser popup blocker enabled?"),{};var d="";t.html_class&&(d='class="'+t.html_class+'"');var p="";t.body_class&&(p='class="'+t.body_class+'"');var m="<!DOCTYPE html><html "+d+"><head><title></title></head><body "+p+'><div id="popup_target"></div></body></html>';u.document.write(m),u.document.title=o;for(var h=u.document.getElementsByTagName("head")[0],g=document.getElementsByTagName("link"),f=0;f<g.length;f++){var _=g[f];if("stylesheet"==_.rel){for(var y=u.document.createElement("link"),v=0;v<_.attributes.length;v++){var b=_.attributes.item(v);y.setAttribute(b.name,b.value)}h.appendChild(y)}}return{popup:u,element:u.document.getElementById("popup_target")}},e.prototype.BShuttingDown=function(){return this.m_bShuttingDown},e.prototype.GetLocalStorageKey=function(){return"PopupSavedDimensions_"+this.m_unCurrentAccountID},e.prototype.LoadSavedDimensionStore=function(){if(this.m_unCurrentAccountID){var e=this.GetLocalStorageKey();this.m_mapRestoreDetails=void 0;var t=window.localStorage.getItem(e);if(t)try{var i=JSON.parse(t);this.m_mapRestoreDetails=new Map(i)}catch(e){}this.m_mapRestoreDetails||(this.m_mapRestoreDetails=new Map)}},e.prototype.SaveSavedDimensionStore=function(){if(this.m_unCurrentAccountID&&this.m_bSaveRequired){var e=this.GetLocalStorageKey(),t=JSON.stringify(Array.from(this.m_mapRestoreDetails));window.localStorage.setItem(e,t),this.m_bSaveRequired=!1}},e.prototype.DebouncedSaveSavedDimensionStore=function(){this.SaveSavedDimensionStore()},e.prototype.ClearSavedDimensionStore=function(){this.m_mapRestoreDetails.clear(),this.m_bSaveRequired=!1},e.prototype.GetRestoreDetails=function(e){if(!this.m_mapRestoreDetails.has(e))return"";var t=this.m_mapRestoreDetails.get(e);return t.last_used=Date.now(),this.m_bSaveRequired=!0,t.strRestoreDetails},e.prototype.SetRestoreDetails=function(e,t,i){if(e){if(t){if(this.m_mapRestoreDetails.size>50){for(var n=null,r=Date.now(),o=0,a=Array.from(this.m_mapRestoreDetails.keys());o<a.length;o++){var s=a[o],c=this.m_mapRestoreDetails.get(s);c.last_used<r&&c.bExpires&&(r=c.last_used,n=s)}n&&this.m_mapRestoreDetails.delete(n)}var l={strRestoreDetails:t,last_used:Date.now(),bExpires:i};this.m_mapRestoreDetails.set(e,l)}else this.m_mapRestoreDetails.delete(e);this.m_bSaveRequired=!0,this.m_bShuttingDown?this.SaveSavedDimensionStore():this.DebouncedSaveSavedDimensionStore()}},r.c([l.a,Object(c.a)(100)],e.prototype,"DebouncedSaveSavedDimensionStore",null),e}(),h=new m},cVBm:function(e,t,i){"use strict";function n(e){return"unknown EMsg ( "+e+" )"}function r(e){for(var t="",i=0;i<e.length;i++){var n=e[i];t+=li[n>>>4]+li[15&n]}return t}function o(e){for(var t=new Uint8Array(e.length/2),i=0;i<e.length-1;i+=2)t[i/2]=parseInt(e.substr(i,2),16);return t}function a(e,t,i){return vi.AddCallback(e,t,function(e){i(fi.InitFromMsg(t,e))})}function s(e,t,i){return vi.AddCallback(e,t,function(e){Object(_i.runInAction)(function(){i(fi.InitFromMsg(t,e))})})}function c(e,t){return vi.AddServiceNotificationHandler(e,t)}function l(e,t){return vi.AddServiceNotificationHandler(e,function(e){var i;return Object(_i.runInAction)(function(){i=t(e)}),i})}function u(e,t){return function(){try{e()}catch(e){console.error("Error in "+t+" callback:",e)}}}function d(e,t){return function(i){try{e(i)}catch(e){console.error("Error in "+t+" callback:",e)}}}function p(e,t,i,n,r){if(!e.startsWith("#"))return console.log("Token doesn't start with #:",e),"";var o=e;e=e.toLowerCase();var a="";if(t&&t.has(e)&&(a=t.get(e)),!a&&i&&i.has(e)&&(a=i.get(e)),a){var s=/{[A-za-z0-9_%#:]+}/g,c=a.match(s);if(c)for(var l=0,u=c;l<u.length;l++){var d=u[l],h=d.slice(1,-1),g=m(h,r),f=p(g,t,i,n,r);if(!f)return"";a=a.replace(d,f)}a=m(a,r)}else if((t||i)&&console.log("No loc found for appid",n,o,"Tokens:",t,"Fallback:",i),t&&1!=ai.a.EUNIVERSE)return e;return a}function m(e,t){var i=/%[A-Za-z0-9_:]+%/g,n=e.match(i);if(n)for(var r=0,o=n;r<o.length;r++){var a=o[r],s=a.slice(1,-1).toLowerCase(),c=t.get(s);if(!c)return console.log("No rich presence found for",s),"";e=e.replace(a,c)}return e}function h(e,t){var i=".jpg";44==e.length&&(i=e.substr(-4),e=e.substr(0,40));var n=ai.a.MEDIA_CDN_COMMUNITY_URL+"images/avatars/";return n+=e.substr(0,2)+"/"+e,t&&(n+=t),n+=i}function g(e){return"unknown EChatRoomMemberStateChange ( "+e+" )"}function f(e,t,i){var n=wd.FriendStore.GetPlayer(i),r=n.display_name,o=wd.FriendStore.GetPlayer(t),a=o.display_name,s=t==wd.FriendStore.self.accountid;switch(e.result){case 1:return Object(ua.b)("#friends_trade_declined",r);case 14:return Object(ua.b)("#friends_trade_you_are_cafe",r);case 15:return Object(ua.b)("#friends_trade_they_are_cafe",r);case 16:return Object(ua.b)("#friends_trade_you_are_school",r);case 17:return Object(ua.b)("#friends_trade_they_are_school",r);case 2:return Object(ua.b)("#friends_trade_you_are_banned",r);case 3:return Object(ua.b)("#friends_trade_they_are_banned",r);case 4:return Object(ua.b)("#friends_trade_they_are_trading",r);case 5:return Object(ua.b)("#friends_trade_disabled");case 6:return Object(ua.b)("#friends_trade_not_logged_in",r);case 7:return Object(ua.b)("#friends_trade_cancelled");case 8:return Object(ua.b)("#friends_trade_too_soon",r);case 9:return Object(ua.b)("#friends_trade_too_soon_penalty",r);case 10:return Object(ua.b)("#friends_trade_connection_failed",r);case 11:return Object(ua.b)("#friends_trade_you_are_already_trading");case 12:return Object(ua.b)("#friends_trade_you_are_already_requesting_trade");case 13:return s?Object(ua.b)("#friends_trade_no_respond",r):Object(ua.b)("#friends_trade_you_didnt_respond",a);case 18:return Object(ua.b)("#friends_trade_they_are_blocked",r);case 20:return Object(ua.b)("#friends_trade_you_need_verified_email");case 21:return Object(ua.b)("#friends_trade_you_have_steam_guard_disabled");case 22:return Object(ua.b)("#friends_trade_their_account_cannot_trade",r,r);case 23:return Object(ua.b)("#friends_trade_you_havent_had_steam_guard_enabled_long_enough",e.steamguard_required_days);case 24:return e.default_password_reset_probation_days>0&&e.password_reset_probation_days>0?e.password_reset_probation_days>e.default_password_reset_probation_days?Object(ua.b)("#friends_trade_you_recently_reset_password_long",e.password_reset_probation_days):1==e.password_reset_probation_days?Object(ua.b)("#friends_trade_you_recently_reset_password_oneday"):Object(ua.b)("#friends_trade_you_recently_reset_password_short",e.password_reset_probation_days):Object(ua.b)("#friends_trade_you_recently_reset_password");case 28:return e.email_change_probation_days>0?1==e.email_change_probation_days?Object(ua.b)("#friends_trade_you_recently_changed_email_oneday"):Object(ua.b)("#friends_trade_you_recently_changed_email_days",e.email_change_probation_days):Object(ua.b)("#friends_trade_you_recently_changed_email");case 25:return Object(ua.b)("#friends_trade_you_are_using_new_device",e.new_device_cooldown_days);case 30:return Object(ua.b)("#friends_trade_trade_hold_for_cleared_trades_initiator",r);case 31:return Object(ua.b)("#friends_trade_would_exceed_max_asset_count");case 32:return Object(ua.b)("#friends_trade_disabled_in_your_country");case 33:return Object(ua.b)("#friends_trade_disabled_in_other_country");default:return Object(ua.b)("#friends_trade_generic_failure",r)}}function _(e){if(!e)return null;var t=e.split(/\s/),i=t[0],n=t.slice(1);if(Ka[i]){var r=Ka[i].unExpectedArguments;if(void 0===r||("number"==typeof r?r===n.length:r.indexOf(n.length)>-1))return i}return null}function y(){return Object.keys(Ka)}function v(e){return Ka[e]}function b(e){switch(e){case 1:case 5:case 2:case 3:case 3:case 4:case 9:case 10:return!0}return!1}function C(e,t){return e==t||e&&t&&e.friend==t.friend&&e.clan==t.clan&&e.chat==t.chat}function S(e,t){if(!e||!t)return[];for(var i=[],n=e.values(),r=n.next();!r.done;)t(r.value)&&i.push(r.value),r=n.next();return i}function M(e,t){return t=t<=32?32:t<=64?64:256,ai.a.MEDIA_CDN_COMMUNITY_URL+"images/chaticons/"+e.substr(0,2)+"/"+e.substr(2,2)+"/"+e.substr(4,2)+"/"+e+"_"+t+".jpg"}function F(e,t,i){return Math.max(t,Math.min(i,e))}function w(e,t,i,n,r){return n+(r-n)*(e-t)/(i-t)}function B(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function O(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,n=Math.floor(e)%60,r=n.toString();n<10&&(r="0"+r);var o=i.toString();return i<10&&t>0&&(o="0"+o),(t>0?t+":":"")+o+":"+r}function I(){var e=!1;try{e=MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d4032,mp4a.40.2"')}catch(e){}return e}function R(){var e=document.createElement("video"),t=e.canPlayType('application/vnd.apple.mpegurl;codecs="avc1.64001f,mp4a.40.02"');return"probably"===t||"maybe"===t}function E(e,t){var i=e.getElementsByTagName("MPD");return i&&1==i.length?i[0]:null}function T(e,t){for(var i=0;i<e.children.length;i++){var n=e.children[i];if(n.tagName==t)return n}return null}function k(e,t){var i=e.getAttribute(t);if(!i)return null;var n=new Date(i);return"[object Date]"===Object.prototype.toString.call(n)?n:null}function D(e,t){var i=e.getAttribute(t);if(!i)return null;var n=0,r=i.match(/(\d*)H/);return r&&(n+=60*parseFloat(r[1])*60),r=i.match(/(\d*)M/),r&&(n+=60*parseFloat(r[1])),r=i.match(/(\d*\.?\d*)S/),r&&(n+=parseFloat(r[1])),n}function G(e,t){var i=e.getAttribute(t);return i?"true"==(i=i.toLowerCase())||"false"!=i&&null:null}function N(e,t){var i=e.getAttribute(t);return i?parseInt(i):null}function L(e,t){return e.getAttribute(t)||""}function A(e,t,i){return e=e.replace("$RepresentationID$",t),e=e.replace("$Number$",i.toString())}function P(e){return 0==e.rgRoles.length||e.rgRoles.findIndex(function(e){return"main"==e})>=0}function x(e){return e?e.segmentTemplate.nDuration/e.segmentTemplate.nTimeScale*1e3:0}function z(e,t){var i=x(e);return Math.floor(t/i)+1}function U(e,t,i){return A(e+t.segmentTemplate.strInitialization,i.strID,0)}function V(e,t,i,n){return A(e+t.segmentTemplate.strMedia,i.strID,n)}function j(e,t,i){if("dynamic"!=e.GetType())return 0;var n=x(t);return(i-t.segmentTemplate.nStartNumber)*n-(performance.now()-e.GetLiveContentStart())}function W(e,t,i,n){void 0===t&&(t=2),void 0===i&&(i=!0),void 0===n&&(n=!1);var r,o,a=i?1024:1e3,s=a*a,c=s*a,l=c*a;return e>l?(r=e/l,o=n?"Tbps":"TB"):e>c?(r=e/c,o=n?"Gbps":"GB"):e>s?(r=e/s,o=n?"Mbps":"MB"):e>a?(r=e/a,o=n?"Kbps":"KB"):(r=e,o=n?"bps":"bytes"),r.toLocaleString(ua.a.GetPreferredLocales(),{minimumFractionDigits:0,maximumFractionDigits:t})+" "+o}function H(e){for(var t=!1,i=!1,n=!0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(n&&o>=48&&o<=57||35==o||42==o||10==o?i=!0:(o>=55356&&o<=57343||o>=8205&&o<=11093||12953==o||12349==o||12336==o||65039==o||12951==o||169==o||o>=48&&o<=57||35==o||42==o||10==o||174==o)&&(i=!0,n=!1),i&&0==r)t=!0,i=!1;else if(i&&t)t=!0,i=!1;else if(!i)return t=!1,!1;if(r>20)return!1}return!n&&t}function q(e){var t=e.charCodeAt(0);return t>=65&&t<=90}function K(e){if(e.length<=2)return e;for(var t=e.charAt(1),i=q(t),n=2;n<e.length;n++){var r=e.charAt(n);if(i||!q(r)){if(" "==r){r=e.charAt(n+1),r.length>0&&(t=r);break}}else i=!0,t=r}return e.charAt(0)+t}function J(e){return e<360?480:e<480?720:4320}function Y(e){return new Promise(function(t){return setTimeout(t,e)})}function X(e){switch(e){case Vu.k_EVoiceCallState_None:return"None";case Vu.k_EVoiceCallState_ScheduledInitiate:return"ScheduledInitiate";case Vu.k_EVoiceCallState_RequestedMicAccess:return"RequestedMicAccess";case Vu.k_EVoiceCallState_CreatePeerConnection:return"CreatePeerConnection";case Vu.k_EVoiceCallState_InitatedWebRTCSession:return"InitiatedWebRTCSession";case Vu.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected:return"WaitingOnICEConnected";case Vu.k_EVoiceCallState_RequestedPermission:return"RequestedPermission";case Vu.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession:return"NotifyingVoiceChatOfWebRTCSession";case Vu.k_EVoiceCallState_Connected:return"Connected"}}function Z(e,t){return function(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];wd.ready_to_render?e.apply(this,i):Object(_i.when)(function(){return wd.ready_to_render},function(){e.apply(t,i)})}}function Q(e,t,i){return{value:Z(i.value,t)}}function $(e){return Z(e,e.name)}function ee(e,t){return e.m_unPID==t.m_unPID&&e.m_nBrowserID==t.m_nBrowserID}function te(e){if("touches"in e){var t=e;return[t.touches[0].clientX,t.touches[0].clientY]}var i=e;return[i.clientX,i.clientY]}function ie(e){var t=e.children,i=e.bCenterVertically,n=si.f(e,["children","bCenterVertically"]),r="DialogContent _DialogLayout"+(e.className?" "+e.className:"");return i&&(r+=" _DialogCenterVertically"),Sa.createElement("div",si.a({},n,{className:r}),Sa.createElement("div",{className:"DialogContent_InnerWidth"},t))}function ne(e){var t=e.classNameContent,i=e.bCenterVertically,n=si.f(e,["classNameContent","bCenterVertically"]);return Sa.createElement(ie,{className:t,bCenterVertically:i},Sa.createElement(Zd,si.a({},n)))}function re(e){var t,i=(e.svgicon,si.f(e,["svgicon"])),n="DialogButton _DialogLayout Primary"+(e.className?" "+e.className:""),r=void 0!==e.svgicon;return r&&(n+=" hasSVGIcon",t=e.svgicon),Sa.createElement("button",si.a({type:e.onClick?"button":"submit"},i,{className:n}),r&&Sa.createElement(t,null),e.children)}function oe(e){var t,i=(e.svgicon,si.f(e,["svgicon"])),n="DialogButton _DialogLayout Secondary"+(e.className?" "+e.className:""),r=void 0!==e.svgicon;return r&&(n+=" hasSVGIcon",t=e.svgicon),Sa.createElement("button",si.a({type:"button"},i,{className:n}),r&&Sa.createElement(t,null),e.children)}function ae(e){var t,i=(e.svgicon,si.f(e,["svgicon"])),n="TextButton"+(e.className?" "+e.className:""),r=void 0!==e.svgicon;return r&&(n+=" hasSVGIcon",t=e.svgicon),Sa.createElement("button",si.a({type:"button"},i,{className:n}),r&&Sa.createElement(t,null),e.children)}function se(e){var t="DialogHBar"+(e.className?" "+e.className:"");return Sa.createElement("div",si.a({},e,{className:t}))}function ce(e){return Sa.createElement(Jd,null,Sa.createElement(re,{onClick:e.onOK,disabled:e.bOKDisabled},e.strOKText||Object(ua.b)("#Button_Confirm")," "),Sa.createElement(oe,{onClick:e.onCancel},e.strCancelText||Object(ua.b)("#Button_Cancel")))}function le(e){return function(t){var i=e+(t.className?" "+t.className:"");return Sa.createElement("div",si.a({},t,{className:i}))}}function ue(e,t,i,n,r,o,a){return new Promise(function(s,c){e(Sa.createElement(hp,{strTitle:t,strDescription:i,strOKButtonText:n,strCancelButtonText:r,onOK:s,onCancel:c,bDestructiveWarning:o,children:a}))})}function de(e,t,i,n){return new Promise(function(r,o){e(Sa.createElement(hp,{bAlertDialog:!0,strTitle:t,strDescription:i,strOKButtonText:n,onOK:r,onCancel:r}))})}function pe(e){var t,i={};e.onEscKeypress&&(i.tabIndex=0,i.onKeyDown=function(t){27==t.keyCode&&e.onEscKeypress()},i.onClick=function(t){t.currentTarget===t.target&&e.onEscKeypress()},t=function(e){e&&(Ad.e(e,e.ownerDocument.activeElement)||e.focus())});var n=["ModalPosition"];return e.className&&n.push(e.className),e.bDestructiveWarning&&n.push("Destructive"),Sa.createElement("div",si.a({className:n.join(" ")},i,{ref:t}),Sa.createElement("div",{className:"ModalPosition_Content"},Sa.createElement("div",{className:"ModalPosition_TopBar"}),e.onEscKeypress&&Sa.createElement("div",{className:"ModalPosition_Dismiss"},Sa.createElement("div",{className:"closeButton",onClick:e.onEscKeypress},Sa.createElement(Id._6,null))),Sa.createElement(mp,null,e.children)))}function me(e,t,i,n){var r,o=e.props.closeModal,a=Sa.cloneElement(e,{closeModal:function(){r&&r.Close(),o&&o()}});if(wd.UIStore.GetPerContextChatData(Zt(t)).BUsePopups()&&n&&i){var s=new gp(t,Zt(t),i,n,a);s.Show(),r=s}else r=gy.GetModalManager(t).ShowModal(a);return r}function he(e){return Sa.createElement("div",{className:"PopupFullWindow",onContextMenu:Et},Sa.createElement(pp,{hideMinMax:!0,popup:e.popup}),Sa.createElement(Ff,{ModalManager:gy.GetModalManager(e.popup)}),e.children)}function ge(e,t,i,n,r,o,a){return void 0===r&&(r=Object(ua.b)("#Button_Cancel")),ue(function(i){var n=ye(e,t);me(i,e,"alertdialog",n)},t,i,n,r,o,a)}function fe(e,t,i,n,r,o,a){return void 0===r&&(r=Object(ua.b)("#Button_Cancel")),ge(e,t,i,n,r,o,a).then(function(){return Promise.resolve(!0)}).catch(function(){return Promise.resolve(!1)})}function _e(e,t,i,n){return void 0===n&&(n=Object(ua.b)("#Button_OK")),de(function(i){var n=ye(e,t);me(i,e,"alertdialog",n)},t,i,n)}function ye(e,t){return wd.UIStore.GetPerContextChatData(Zt(e)).BUsePopups()&&e.innerWidth<600?{strTitle:t,popupWidth:638,popupHeight:300}:null}function ve(e,t,i){me(Sa.createElement(fp,{player:t}),i,"NicknameDialog",{strTitle:Object(ua.b)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400})}function be(e){return Sa.createElement(Bh,{friend:e.friend,context:null},Sa.createElement("div",{className:"FriendPicker_ChosenFriend",onClick:function(){e.onClick(e.friend)}},Sa.createElement("span",null,e.friend.display_name),Sa.createElement(Id._6,null)))}function Ce(e,t,i){var n=i?[i.accountid]:[];me(Sa.createElement(vp,{browserContext:e,rgPreSelectedFriends:n}),t,"CreateFriendCategoryDialog",{strTitle:Object(ua.b)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:700})}function Se(e,t,i){me(Sa.createElement(vp,{browserContext:e,group:t,rgPreSelectedFriends:t.member_accountid_list}),i,"CreateFriendCategoryDialog",{strTitle:Object(ua.b)("#FriendGroup_Menu_Manage"),popupWidth:664,popupHeight:700})}function Me(e,t,i){0==wd.FriendStore.FriendGroupStore.user_groups.length?Ce(e,t,i):me(Sa.createElement(bp,{browserContext:e,friend:i}),t,"AssignFriendCategoryDialog",{strTitle:Object(ua.b)("#FriendGroup_Menu_CreateGroup"),popupWidth:664,popupHeight:580})}function Fe(e,t){void 0==t.bIncludeWeekday&&(t.bIncludeWeekday=!0),void 0==t.bRelativeDate&&(t.bRelativeDate=!0);var i=wd.RTime32ToDate(e),n=wd.GetLocalMidnightInRTime32(),r=wd.SettingsStore.FriendsSettings.b24HourClock?wp:Fp,o=t.Format;void 0==o&&(o=t.bTimeOnly||e>=n-86400?t.bIncludeSeconds?r.TimeOfDayWithSecs:r.TimeOfDay:t.bRelativeDate&&e>=n-432e3?r.TimeInWeek:t.bIncludeWeekday?r.FullTimestamp:r.FullTimestampNoWeekday);var a;try{a=o.format(i)}catch(e){a=Object(ua.b)("#ChatRoom_Timestamp_InvalidDate")}return!t.bTimeOnly&&t.bRelativeDate&&e>=n-86400&&e<n&&(a=Object(ua.b)("#ChatRoom_Timestamp_Yesterday",a)),a}function we(e){var t="undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection,i=e.bDisableContextMenu,n=e.href,r=si.f(e,["bDisableContextMenu","href"]);return t&&!n.startsWith("steam://")&&(n="steam://openurl/"+n),Sa.createElement("a",si.a({},r,{href:n,target:"_blank",rel:"noopener noreferrer",onContextMenu:i?null:Oe}),e.children)}function Be(e){return Sa.createElement(Sa.Fragment,null,Sa.createElement(Mp.d,{onSelected:function(){Ad.i(e.strURL)}},Object(ua.b)("#ContextMenu_CopyLinkURL")),Sa.createElement(Mp.d,{onSelected:function(t){Ee(t,e.strURL)}},Object(ua.b)("#ContextMenu_OpenLinkInNewWindow")))}function Oe(e){var t=e.currentTarget;return Object(Rd.a)(Sa.createElement(Mp.c,null,Sa.createElement(Be,{strURL:t.href})),e)}function Ie(e,t){return Re(e,e.currentTarget.src,t)}function Re(e,t,i){return Object(Rd.a)(Sa.createElement(Mp.c,null,i&&Sa.createElement(Be,{strURL:i}),Sa.createElement(Mp.d,{onSelected:function(){Ad.i(t)}},Object(ua.b)("#ContextMenu_CopyImageURL")),Sa.createElement(Mp.d,{onSelected:function(e){Ee(e,t)}},Object(ua.b)("#ContextMenu_OpenImageInNewWindow"))),e)}function Ee(e,t){var i;if(i="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,"undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection){var n=Zt(i);return void SteamClient.WebChat.OpenURLInClient(t,n.m_unPID)}0==t.indexOf("steam://")?i.location.href=t:i.open(t,null,"menubar,location,resizable,scrollbars,status,noopener")}function Te(e,t){me(Sa.createElement(Op,null),t,"ChangePersonaDialog",{strTitle:Object(ua.b)("#Friend_Menu_AddNickname"),popupWidth:640,popupHeight:400})}function ke(e,t,i){me(Sa.createElement(Ip,{player:t}),i,"FriendNotificationsDialog",{strTitle:Object(ua.b)("#Friend_Menu_Notifications"),popupWidth:640,popupHeight:490})}function De(e,t,i,n){return Object(Rd.a)(Sa.createElement(Tp,{browserContext:e,context:t,friend:i,ownerWindow:n.currentTarget.ownerDocument.defaultView}),n)}function Ge(e){return Sa.createElement(Mp.d,{onSelected:function(t){Ee(t,e.friend.GetCommunityProfileURL()+"inventory/")}},Object(ua.b)("#FriendMenu_ViewInventory"))}function Ne(e){wd.FriendStore.FavoritesStore.AddToFavorites({friend:e})}function Le(e){wd.FriendStore.FavoritesStore.RemoveFromFavorites({friend:e})}function Ae(e,t,i){return Object(Rd.a)(Sa.createElement(Pe,{browserContext:e,group:t,ownerWindow:i.currentTarget.ownerDocument.defaultView}),i)}function Pe(e){var t=[];return e.group&&e.group.modifiable&&(t.push(Sa.createElement(Mp.d,{key:"managegroup",onSelected:function(){Se(e.browserContext,e.group,e.ownerWindow)}},Object(ua.b)("#FriendGroup_Menu_Manage"))),t.push(Sa.createElement(Mp.d,{key:"removegroup",onSelected:function(){wd.FriendStore.FriendGroupStore.RemoveGroup(e.group)}},Object(ua.b)("#FriendGroup_Menu_Remove")))),Sa.createElement(Mp.c,{className:"friendsContextMenu"},t,Sa.createElement(Mp.d,{key:"creategroup",onSelected:function(){Ce(e.browserContext,e.ownerWindow)}},Object(ua.b)("#FriendGroup_Menu_CreateGroup")))}function xe(e,t){return Object(Rd.a)(Sa.createElement(Pp,{browserContext:e,ownerWindow:t.currentTarget.ownerDocument.defaultView}),t)}function ze(e,t,i,n,r){Ue(e,t,i,n,!1,r)}function Ue(e,t,i,n,r,o){me(Sa.createElement(jp,{browserContext:e,chatRoomGroup:i,chatRoom:n,bIsDropInvite:r,vecInvitePlayers:o}),t,"ChatRoomGroupInviteDialog",{strTitle:Object(ua.b)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:680})}function Ve(){return Sa.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(ua.b)(wd.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}function je(e,t,i){var n,r=Xt(null,e);return t.BIsClanChatRoom()&&(n=wd.FriendStore.ClanStore.GetClan(t.GetClanID())),Object(Rd.a)(Sa.createElement(Hp,{browserContext:r,group:t,clan:n,context:i,ownerWindow:e.currentTarget.ownerDocument.defaultView}),e)}function We(e,t,i){var n,r=Xt(null,e);return t.GetChatGroupIDIfLoaded()&&(n=wd.ChatStore.GetChatRoomGroup(t.GetChatGroupIDIfLoaded())),Object(Rd.a)(Sa.createElement(Hp,{browserContext:r,group:n,clan:t,context:i,ownerWindow:e.currentTarget.ownerDocument.defaultView}),e)}function He(e,t,i,n,r){return t.GetDefaultChatID()==i?null:qp.BIsMenuEmpty(t,i,!!r)?null:Object(Rd.a)(Sa.createElement(qp,{browserContext:e,group:t,roomID:i,ownerWindow:n.currentTarget.ownerDocument.defaultView,onStartRoomRename:r}),n)}function qe(e,t,i){me(Sa.createElement(Kp,{group:t,roomID:i}),e,"SaveVoiceRoomDialog",{strTitle:Object(ua.b)("#Chat_SaveVoiceRoom"),popupWidth:664,popupHeight:380})}function Ke(e){var t=e.expanded?Object(ua.b)("#Chat_ChatRoomListO_OpenGroupCollapse"):Object(ua.b)("#Chat_ChatRoomListO_OpenGroupExpand");return Sa.createElement("div",{className:"openGroupButton",title:t,onClick:e.onClick},Sa.createElement(Id.k,null))}function Je(e,t){return e.filter(function(e){return e.BMatchesSearchString(t,!1)})}function Ye(e,t,i){me(Sa.createElement(lm,{ownerWin:e,groupView:t,bVoiceChannel:i,bJoinChannel:!0}),e,"CreateChatChannelDialog",{strTitle:Object(ua.b)("#GroupSettings_Channels_CreateText"),popupWidth:664,popupHeight:280})}function Xe(e,t){me(Sa.createElement(ym,{groupView:t}),e,"ChatRoomGroupSettings",{strTitle:Object(ua.b)("#GroupSettings"),popupWidth:842,popupHeight:600})}function Ze(e,t){me(Sa.createElement(Nm,{browserContext:e}),t,Object(ua.b)("#Settings"),{strTitle:Object(ua.b)("#Settings"),popupWidth:842,popupHeight:720})}function Qe(e,t){var i=t.GetGroup().textRoomList.length;i>7&&(i=7);var n=60*i;i<2&&(n-=32),me(Sa.createElement(Am,{group:t.GetGroup()}),e,"ChatRoomGroupNotificationSettings",{strTitle:Object(ua.b)("#NotificationSettings_Title"),popupWidth:600,popupHeight:348+n})}function $e(e){void 0===e&&(e=!0);var t=[];return e&&(t=t.concat([{label:Sa.createElement("span",{className:"ChannelSpecificNotificationSettings_Inherit"},Object(ua.b)("#NotificationSetting_Inherit")),data:0}])),t=t.concat([{label:Object(ua.b)("#NotificationSetting_AllMessages"),data:4},{label:Object(ua.b)("#NotificationSetting_AnyMention",wd.FriendStore.self.display_name),data:3},{label:Object(ua.b)("#NotificationSetting_DirectMention",wd.FriendStore.self.display_name),data:2},{label:Object(ua.b)("#NotificationSetting_None"),data:1}])}function et(e){return Object.keys(e).reduce(function(t,i){return e[i]?t?t+" "+i:i:t},"")}function tt(e,t){return si.b(this,void 0,void 0,function(){var i,n,r;return si.e(this,function(o){switch(o.label){case 0:return i=Zt(e),n=t.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":t.BIsAccountIDOwner(wd.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm",[4,fe(e,Object(ua.b)("#Chat_Actions_LeaveChatRoomGroup"),Object(ua.b)(n,t.name),Object(ua.b)("#Chat_Actions_LeaveChatRoomGroup"))];case 1:return(r=o.sent())?(t.LeaveChatRoomGroup(i),[2]):[2]}})})}function it(e,t,i,n,r){void 0===n&&(n=!1),me(Sa.createElement(eh,{browserContext:e,chatViewToReplace:i,bHideChatNameEntry:n,vecInvitePlayers:r}),t,"CreateChatDialog",{strTitle:Object(ua.b)("#Chat_CreateChatRoom"),popupWidth:664,popupHeight:580})}function nt(e,t,i,n){var r=Zt(e),o=wd.ChatStore.FindNamelessChatGroupWithFriends(i);if(o)return void wd.UIStore.ReplaceFriendChatWithGroup(r,t,o);wd.ChatStore.CreateChatRoomGroup(r,"",i,n).then(function(e){var i=(wd.UIStore.GetPerContextChatData(r),wd.ChatStore.GetChatRoomGroup(e));i&&wd.UIStore.ReplaceFriendChatWithGroup(r,t,i)}).catch(function(){_e(e,Object(ua.b)("#Generic_Error"),Object(ua.b)("#Chat_CreateChatRoom_GenericError"))})}function rt(){return Sa.createElement("div",{className:"FriendPicker_InvitedFriend_NotInBetaWarning",title:Object(ua.b)(wd.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")},"!")}function ot(e){var t="offline";return e.is_ingame?t="ingame":e.m_broadcastAccountId&&IsFeatureBroadcastEnabled()?t="watchingbroadcast":e.is_online&&(t="online"),e.is_awayOrSnooze&&(t+=" awayOrSnooze"),t}function at(e){me(Sa.createElement(ah,null),e,"ChangeLog",{strTitle:Object(ua.b)("#changeLog_Title"),popupWidth:640,popupHeight:680})}function st(){return Sa.createElement("div",{className:"SnoozeContainer"},Sa.createElement("div",{className:"SnoozeBackground"}),Sa.createElement("div",{"data-text":"Z",className:"SnoozeZ Z1"},"Z"),Sa.createElement("div",{"data-text":"Z",className:"SnoozeZ Z2"},"Z"),Sa.createElement("div",{"data-text":"Z",className:"SnoozeZ Z3"},"Z"))}function ct(e,t,i){return Object(Rd.a)(Sa.createElement(Mh,{browserContext:e,appid:t,ownerWindow:i.currentTarget.ownerDocument.defaultView}),i)}function lt(e){return Sa.createElement(Dh,{target:e.target,className:"friendHover miniProfileHover",visibilityObserver:e.hoverInstance,onNoSpace:e.onNoSpace},Sa.createElement(Gh,{hoverInstance:e.hoverInstance}))}function ut(){return Sa.createElement("div",{className:"NewEmoticonIndicator"},Sa.createElement("div",{className:"NewEmoticonCircle"}))}function dt(e){var t=[];e.refFileInput&&t.push(Sa.createElement(Mp.d,{key:"upload",onSelected:function(){e.refFileInput.click()}},Object(ua.b)("#ChatEntry_UploadImage")));var i=function(){wd.EconomyStore.GetTradeOfferURL().then(function(t){e.fnInsertText(t)})};return t.push(Sa.createElement(Mp.d,{key:"tradeoffer",onSelected:i},Object(ua.b)("#ChatEntry_SendTradeURL"))),Sa.createElement(Mp.c,null,t)}function pt(e){var t=e.group.GetGroupID(),i=e.group.voiceRoomList.map(function(e){var i=function(){wd.VoiceStore.InitiateRoomChat(t,e.GetRoomID())};return Sa.createElement(Mp.d,{key:e.GetRoomID(),onSelected:i},e.name)});return Sa.createElement(Mp.c,null,i)}function mt(e){gy.UIDisplayPrefs.bDontShowVoiceAlert||e&&me(Sa.createElement(og,null),e,"ActiveVoiceAlert",{strTitle:Object(ua.b)("#Chat_StillInVoiceDialog_Title"),popupWidth:650,popupHeight:340})}function ht(e,t){var i;if(i="currentTarget"in e?e.currentTarget.ownerDocument.defaultView:e,"undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection){var n=Zt(i);return void SteamClient.WebChat.OpenURLInClient(t,n.m_unPID)}0==t.indexOf("steam://")?i.location.href=t:i.open(t,null,"menubar,location,resizable,scrollbars,status,noopener")}function gt(e){var t=function(){return e.onMouseEnter(e.pos)};return Sa.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:t,onMouseLeave:e.onMouseLeave},Sa.createElement("div",{className:"timelineMarkerIcon"},Sa.createElement(Id.O,null)))}function ft(e){var t=e.startPos,i=e.endPos,n="",r=1;return t<0&&(r=(i-t)/10,t=0,n=" hideFront"),Sa.createElement("div",{className:"STV_timelineSegment"+n,style:{left:t+"%",width:i-t+"%",opacity:r},onClick:e.onClick},Sa.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),Sa.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),Sa.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}function _t(e,t,i,n){me(Ma.a.createElement(eh,{browserContext:e,bHideChatNameEntry:!1,vecInvitePlayers:n,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:i},strTitle:Object(ua.b)("#Broadcast_CreateWatchParty")}),t,"CreateChatDialog",{strTitle:Object(ua.b)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600})}function yt(){return ai.a.STEAM_TV?1:3}function vt(e){return Ma.a.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},Ma.a.createElement(Id._2,null),Object(ua.b)("#Broadcast_WatchWithFriends"))}function bt(e){return Ma.a.createElement("div",{className:"ToggleBroadcastChat",title:Object(ua.b)("#Broadcast_ToggleChat"),onClick:e.onClick},Ma.a.createElement(Id.u,{showChat:e.hideIcon}))}function Ct(e){return Ma.a.createElement("div",{className:"BroadcastCSGOLondonOffline"},Ma.a.createElement("div",{className:"BroadcastCSGOLondonOffline_Schedule"},Ma.a.createElement("div",{className:"BroadcastCSGOLondonOffline_Prelims"},"CHALLENGERS STAGE – SEPTEMBER 5-9"),Ma.a.createElement("div",{className:"BroadcastCSGOLondonOffline_Group"},"LEGENDS STAGE – SEPTEMBER 12-16"),Ma.a.createElement("div",{className:"BroadcastCSGOLondonOffline_Playoffs"},"CHAMPIONS STAGE – SEPTEMBER 20-23")))}function St(e){switch(e.eServerMsgType){case 1:var t=wd.FriendStore.GetPlayer(e.unAccountID);return{strToken:"#ChatRoom_ServerMessage_RenameChatRoom",parts:[e.strServerMsgParam,t]};case 2:var i=wd.FriendStore.GetPlayer(e.unServerMsgParamAccountID);return{strToken:"#ChatRoom_ServerMessage_Joined",parts:[i]};case 3:var i=wd.FriendStore.GetPlayer(e.unServerMsgParamAccountID);return{strToken:"#ChatRoom_ServerMessage_Parted",parts:[i]};case 4:var n=wd.FriendStore.GetPlayer(e.unAccountID),i=wd.FriendStore.GetPlayer(e.unServerMsgParamAccountID);return{strToken:"#ChatRoom_ServerMessage_Kicked",parts:[i,n]};case 9:var t=wd.FriendStore.GetPlayer(e.unAccountID);return e.strServerMsgParam.length?{strToken:"#ChatRoom_ServerMessage_ChatRoomTaglineChanged",parts:[e.strServerMsgParam,t]}:{strToken:"#ChatRoom_ServerMessage_ChatRoomTaglineRemoved",parts:[t]};case 10:var t=wd.FriendStore.GetPlayer(e.unAccountID);return{strToken:"#ChatRoom_ServerMessage_ChatRoomAvatarChanged",parts:[t]};case 5:return{strToken:"#ChatRoom_ServerMessage_Invited",parts:[wd.FriendStore.GetPlayer(e.unServerMsgParamAccountID),wd.FriendStore.GetPlayer(e.unAccountID)]};default:return{strToken:"#ChatRoom_ServerMessage_Unhandled",parts:[]}}}function Mt(e){return Sa.createElement("div",{className:"msg"},Sa.createElement("div",{className:"msgText MessageFromBlockedUser"},Object(ua.b)("#Friend_Chat_Blocked")))}function Ft(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var r=[],o=0,a=i;o<a.length;o++){var s=a[o];s instanceof Nc?r.push(Sa.createElement(Dg,{context:e,player:s})):r.push(s)}return ua.d.apply(void 0,[t].concat(r))}function wt(e){return e.msg.rtTimestamp<wd.GetLocalMidnightInRTime32()?Sa.createElement(Jg,{rtTimestamp:e.msg.rtTimestamp}):null}function Bt(e,t,i){return si.b(this,void 0,void 0,function(){var n,r,o,a,s,c,l;return si.e(this,function(u){switch(u.label){case 0:return 0==i.length?[2]:(n=i[0].unAccountID,r=wd.FriendStore.GetPlayer(n).primary_display_name,o=Object(ua.b)("#Chat_Actions_DeleteChatMessages"),a=Object(ua.b)("#Chat_Actions_DeleteChatMessages_Confirm",r),s=Object(ua.b)("#Chat_Actions_Delete"),[4,fe(e,o,a,s)]);case 1:return u.sent()?[4,t.DeleteChatMessges(i)]:[2];case 2:return 1==(c=u.sent())?[2]:(l=15==c?"#Chat_Actions_DeleteChatMessage_FailAccess":"#Chat_Actions_DeleteChatMessage_Fail",a=Object(ua.b)(l,r),_e(e,o,a),[2])}})})}function Ot(e){var t=e.friendRenderContext,i=[],n=[],r=[],o=function(){n.length&&(i.push(Sa.createElement(Ng,{key:n[0].UniqueKey(),messages:n,friendRenderContext:t,tokenPrefix:"#ChatRoom_ServerMessage_Joined"})),n=[])},a=function(){r.length&&(i.push(Sa.createElement(Ng,{key:r[0].UniqueKey(),messages:r,friendRenderContext:t,tokenPrefix:"#ChatRoom_ServerMessage_Parted"})),r=[])};return e.block.messages.forEach(function(e){2==e.eServerMsgType?(a(),n.push(e),4==n.length&&o()):3==e.eServerMsgType?(o(),r.push(e),4==r.length&&a()):(o(),a(),i.push(Sa.createElement(Ug,{key:e.UniqueKey(),msg:e,friendRenderContext:t})))}),o(),a(),Sa.createElement(Sa.Fragment,null,i)}function It(e,t,i){var n,r=!1,o=!0;if(e.invitedto instanceof Nc)n=300;else if(e.invitedto instanceof el){n=340;var a=e.invitedto;a.BCanInvite()||a.BHasMember(e.invitee.accountid)||(o=!1)}else if(e.invitedto instanceof Xc){r=!0,n=340;var a=e.invitedto.GetGroup();a.BCanInvite()||a.BHasMember(e.invitee.accountid)||(o=!1)}o?me(Sa.createElement(tf,si.a({},e)),i,"InviteDialog",{strTitle:r?Object(ua.b)("#Chat_Actions_InviteFriend_VoiceChat"):Object(ua.b)("#Chat_Actions_DropGroupInvite_Title"),popupWidth:650,popupHeight:n}):_e(i,Object(ua.b)("#Chat_Actions_DropGroupInvite_Denied"),Object(ua.b)("#Chat_Actions_DropGroupInvite_Denied_Description"))}function Rt(e,t,i,n,r){if(r);else{var o=new ly(n.ownerDocument.defaultView),a=wd.UIStore.GetDefaultTabSetForContext(e);wd.UIStore.GetPerContextChatData(e).SetFriendsListWindow(o),On.render(Sa.createElement(Cf,{friends:t,chats:i,tabset:a,container:o}),n)}}function Et(e){var t=[],i=$t(e),n=i.getSelection(),r=n&&n.rangeCount>0&&n.toString().length>0,o=e.target,a=!1;if(o&&"tagName"in o&&("INPUT"!=o.tagName&&"TEXTAREA"!=o.tagName||(a=!0)),(i.document.queryCommandEnabled("cut")||r&&a)&&t.push(Sa.createElement(Mp.d,{key:"cut",onSelected:function(){i.document.execCommand("cut")}},Object(ua.b)("#ContextMenu_Cut"))),(document.queryCommandEnabled("copy")||r)&&t.push(Sa.createElement(Mp.d,{key:"copy",onSelected:function(){i.document.execCommand("copy")}},Object(ua.b)("#ContextMenu_Copy"))),ai.a.IN_CLIENT&&a&&t.push(Sa.createElement(Mp.d,{key:"paste",onSelected:function(){o.focus(),i.SteamClient._internal.Paste()}},Object(ua.b)("#ContextMenu_Paste"))),t.length)Object(Rd.a)(Sa.createElement(Mp.c,null,t),e);else{if(e.shiftKey)return;e.preventDefault(),e.stopPropagation()}}function Tt(e,t,i){me(Sa.createElement(Ef,si.a({},e,{bIsInviteDialog:!0})),i,"InviteDialog",{strTitle:"Invite",popupWidth:540,popupHeight:260})}function kt(e){if(c_==n_.Loaded)return void e();if(c_==n_.NotLoaded){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),window.onYouTubeIframeAPIReady=Gt}l_.findIndex(function(t){return e==t})<0&&l_.push(e)}function Dt(e){_n.c(l_,e)}function Gt(){c_=n_.Loaded;for(var e=0,t=l_;e<t.length;e++)(0,t[e])();l_=[]}function Nt(e){var t=new RegExp("^(steam://openurl(_external)?/)?(f|ht)tps?://([^@/?#]*@)?([^/#?]+)","im");return e.match(t)[5].toString()}function Lt(e){var t=Nt(e);return t.startsWith("www.")&&(t=t.slice(4)),t}function At(e){var t=document.createElement("a");return t.href=e,t.hostname.indexOf("xn--")>=0?t.href:e}function Pt(){return Object.assign(zt(),{mention:j_})}function xt(){return Object.assign(zt(),{invite:k_,gameinvite:D_,lobbyinvite:G_,tradeoffer:x_,broadcastinvite:N_,broadcastviewrequest:L_})}function zt(){return{url:g_,youtube:__,filteredurl:V_,emoticon:W_,img:y_,video:v_,og:C_,tweet:S_,inviteurl:T_,publishedfile:A_,tradeofferlink:P_,econitem:U_,steamstore:H_,broadcast:z_,oembed:M_,spoiler:F_,plusone:w_,flip:B_,random:O_,quote:I_,pre:R_,code:E_}}function Ut(){return{gameinvite:Ht,lobbyinvite:qt,invite:Kt,tradeoffer:Jt,spoiler:Yt}}function Vt(e){var t=e.copyText;return null==t&&(t=e.href),Sa.createElement(Ph,{text:t},Sa.createElement("div",{className:"NonInlinedEmbed"},Sa.createElement(we,{href:e.href,title:e.href},e.children)))}function jt(e){var t=e.context,i=e.width,n=e.height,r=e.src,o=si.f(e,["context","width","height","src"]),a=r+"?s="+i+"x"+n,s=a+"dpx2x";return Sa.createElement(b_,si.a({context:t},o,{src:a,srcSet:a+" 1x, "+s+" 2x"}))}function Wt(e){var t=e.strProviderName,i=JSON.parse(e.strIFrameJSON),n={width:i.width,height:i.height},r=i.src;return"SoundCloud"==t&&(r=r.replace("visual=true","visual=false")),"Vimeo"==t&&(n.allowFullScreen=!0),Sa.createElement("iframe",si.a({},n,{src:r,scrolling:"no",frameBorder:0,sandbox:"allow-scripts allow-same-origin"}))}function Ht(e){if(e.context.chat instanceof ll){var t=e.args.appid,i=wd.AppInfoStore.GetAppInfo(parseInt(t)).m_strName;return{title:"",body:Object(ua.b)("#Friend_Notification_GameInvite",e.context.chat.chat_partner.display_name,i)}}return null}function qt(e){if(e.context.chat instanceof ll){var t=e.args.appid,i=wd.AppInfoStore.GetAppInfo(parseInt(t)).m_strName;return{title:"",body:Object(ua.b)("#Friend_Notification_GameInvite",e.context.chat.chat_partner.display_name,i)}}return null}function Kt(e){return e.context.chat instanceof ll?void 0!=e.args.chatid?{title:"",body:Object(ua.b)("#Friend_Notification_InviteVoice",e.context.chat.chat_partner.display_name,e.args.chatname)}:{title:"",body:Object(ua.b)("#Friend_Notification_Invite",e.context.chat.chat_partner.display_name,e.args.chatgroupname)}:null}function Jt(e){var t=e.context.chat;return t instanceof ll?{title:Object(ua.b)("#TradeOffer_FriendSentYou",t.chat_partner.display_name),body:e.text}:null}function Yt(e){return{body:Object(ua.b)("#Notification_Spoiler")}}function Xt(e,t){var i=$t(t);if(!i&&e){var n=On.findDOMNode(e);n&&n.ownerDocument&&(i=n.ownerDocument.defaultView)}return AssertMsg(i,"Couldn't find owning window to determine browser context"),Zt(i)}function Zt(e){var t=Md;return e&&(AssertMsg(e.__FriendsUIBrowserContext,"FriendsUI Browser context missing from owner window"),e.__FriendsUIBrowserContext&&(t=e.__FriendsUIBrowserContext)),t}function Qt(e){var t=Zt(e);return t&&t.m_unPID!=Md.m_unPID&&t.m_nBrowserID!=Md.m_nBrowserID?t:null}function $t(e){var t=void 0;return e&&e.currentTarget&&(t=e.currentTarget.ownerDocument.defaultView),t}function ei(){window.sessionStorage.setItem("oFriendsUIStartupParam",JSON.stringify({command:{command:"ShowWatchBroadcast",steamid:fy.steamid}}))}function ti(){return!0}function ii(){var e,t=new my,i=null,n=!1;if(ai.a.IN_CLIENT){var r={message:"ChatJavascriptInitialized",data:ai.a.BUILD_TIMESTAMP};window.parent.postMessage(r,"https://steamloopback.host"),window.parent.postMessage("ChatJavascriptIntialized","https://steamloopback.host"),e=Mn.ConstructClientCMInterface(),n=!0,e.Connect()}else e=Mn.ConstructWebCMInterface(t.Storage),i=new Bn(e),i.PerformInitialLogon(ai.d);t.Init(e,n,i)}function ni(){(new _y).Init(function(){window.location=window.location})}function ri(e,t,i){if("english"!==t)"friendsui"==e?vy=i:"shared"==e&&(by=i);else if("shared"==e)Cy=i;else{var n=void 0,r=null,o=void 0,a=null;void 0!==vy?(n=vy,r=i):n=i,void 0!==by?(o=by,a=Cy):o=Cy,ua.a.InitFromObjects(n,r,o,a),vy=void 0,by=void 0,Cy=void 0}}Object.defineProperty(t,"__esModule",{value:!0});var oi,ai=i("m5yx"),si=i("TToO"),ci=function(){function e(e,t,i){void 0===t&&(t=0),this.m_nOffset=t||0,e instanceof Uint8Array||e instanceof DataView?(this.m_nLength=i||e.byteLength-this.m_nOffset,this.m_nOffset+=e.byteOffset,this.m_viewPacket=new DataView(e.buffer,this.m_nOffset,this.m_nLength)):(this.m_nLength=i||e.byteLength-this.m_nOffset,this.m_viewPacket=new DataView(e,this.m_nOffset,this.m_nLength)),this.m_rgubPacket=new Uint8Array(this.m_viewPacket.buffer,this.m_viewPacket.byteOffset,this.m_viewPacket.byteLength),this.m_iGet=0,this.m_iPut=0}return e.prototype.TellGet=function(){return this.m_iGet+this.m_viewPacket.byteOffset},e.prototype.GetPacket=function(){return this.m_viewPacket.buffer},e.prototype.GetUint8=function(){return this.m_viewPacket.getUint8(this.m_iGet++)},e.prototype.GetUint32=function(e){void 0===e&&(e=!0);var t=this.m_viewPacket.getUint32(this.m_iGet,e);return this.m_iGet+=4,t},e.prototype.SeekGetHead=function(e){void 0===e&&(e=0),this.m_iGet=e||0},e.prototype.SeekGetCurrent=function(e){this.m_iGet+=e},e.prototype.TellPut=function(){return this.m_iPut+this.m_viewPacket.byteOffset},e.prototype.TellMaxPut=function(){return this.m_viewPacket.byteLength},e.prototype.PutUint8=function(e){this.m_viewPacket.setUint8(this.m_iPut++,e)},e.prototype.PutUint32=function(e,t){void 0===t&&(t=!0),this.m_viewPacket.setUint32(this.m_iPut,e,t),this.m_iPut+=4},e.prototype.PutBytes=function(e){this.m_rgubPacket.set(e,this.m_iPut),this.m_iPut+=e.length},e.prototype.SeekPut=function(e){this.m_iPut+=e},e.prototype.GetCountBytesRemaining=function(){return this.m_viewPacket.byteLength-this.m_iGet},e}(),li=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],ui=i("LkYP"),di=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[27],null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.client_sessionid=function(){return ui.Message.getField(this,2)},t.prototype.set_client_sessionid=function(e){ui.Message.setField(this,2,e)},t.prototype.routing_appid=function(){return ui.Message.getField(this,3)},t.prototype.set_routing_appid=function(e){ui.Message.setField(this,3,e)},t.prototype.jobid_source=function(){return ui.Message.getFieldWithDefault(this,10,"18446744073709551615")},t.prototype.set_jobid_source=function(e){ui.Message.setField(this,10,e)},t.prototype.jobid_target=function(){return ui.Message.getFieldWithDefault(this,11,"18446744073709551615")},t.prototype.set_jobid_target=function(e){ui.Message.setField(this,11,e)},t.prototype.target_job_name=function(){return ui.Message.getField(this,12)},t.prototype.set_target_job_name=function(e){ui.Message.setField(this,12,e)},t.prototype.seq_num=function(){return ui.Message.getField(this,24)},t.prototype.set_seq_num=function(e){ui.Message.setField(this,24,e)},t.prototype.eresult=function(){return ui.Message.getFieldWithDefault(this,13,2)},t.prototype.set_eresult=function(e){ui.Message.setField(this,13,e)},t.prototype.error_message=function(){return ui.Message.getField(this,14)},t.prototype.set_error_message=function(e){ui.Message.setField(this,14,e)},t.prototype.ip=function(){return ui.Message.getField(this,15)},t.prototype.set_ip=function(e){ui.Message.setField(this,15,e)},t.prototype.auth_account_flags=function(){return ui.Message.getField(this,16)},t.prototype.set_auth_account_flags=function(e){ui.Message.setField(this,16,e)},t.prototype.token_source=function(){return ui.Message.getField(this,22)},t.prototype.set_token_source=function(e){ui.Message.setField(this,22,e)},t.prototype.admin_spoofing_user=function(){return ui.Message.getField(this,23)},t.prototype.set_admin_spoofing_user=function(e){ui.Message.setField(this,23,e)},t.prototype.transport_error=function(){return ui.Message.getFieldWithDefault(this,17,1)},t.prototype.set_transport_error=function(e){ui.Message.setField(this,17,e)},t.prototype.messageid=function(){return ui.Message.getFieldWithDefault(this,18,"18446744073709551615")},t.prototype.set_messageid=function(e){ui.Message.setField(this,18,e)},t.prototype.publisher_group_id=function(){return ui.Message.getField(this,19)},t.prototype.set_publisher_group_id=function(e){ui.Message.setField(this,19,e)},t.prototype.sysid=function(){return ui.Message.getField(this,20)},t.prototype.set_sysid=function(e){ui.Message.setField(this,20,e)},t.prototype.trace_tag=function(){return ui.Message.getField(this,21)},t.prototype.set_trace_tag=function(e){ui.Message.setField(this,21,e)},t.prototype.webapi_key_id=function(){return ui.Message.getField(this,25)},t.prototype.set_webapi_key_id=function(e){ui.Message.setField(this,25,e)},t.prototype.is_from_external_source=function(){return ui.Message.getField(this,26)},t.prototype.set_is_from_external_source=function(e){ui.Message.setField(this,26,e)},t.prototype.forward_to_sysid=function(){return ui.Message.getField(this,27)},t.prototype.set_forward_to_sysid=function(e){ui.Message.setField(this,27,e)},t.prototype.add_forward_to_sysid=function(e,t){ui.Message.addToRepeatedField(this,27,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_client_sessionid(t.readInt32());break;case 3:e.set_routing_appid(t.readUint32());break;case 10:e.set_jobid_source(t.readFixed64String());break;case 11:e.set_jobid_target(t.readFixed64String());break;case 12:e.set_target_job_name(t.readString());break;case 24:e.set_seq_num(t.readInt32());break;case 13:e.set_eresult(t.readInt32());break;case 14:e.set_error_message(t.readString());break;case 15:e.set_ip(t.readUint32());break;case 16:e.set_auth_account_flags(t.readUint32());break;case 22:e.set_token_source(t.readUint32());break;case 23:e.set_admin_spoofing_user(t.readBool());break;case 17:e.set_transport_error(t.readInt32());break;case 18:e.set_messageid(t.readUint64String());break;case 19:e.set_publisher_group_id(t.readUint32());break;case 20:e.set_sysid(t.readUint32());break;case 21:e.set_trace_tag(t.readUint64String());break;case 25:e.set_webapi_key_id(t.readUint32());break;case 26:e.set_is_from_external_source(t.readBool());break;case 27:e.add_forward_to_sysid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeFixed64String(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeFixed64String(11,i),i=ui.Message.getField(e,12),void 0!==i&&t.writeString(12,i),i=ui.Message.getField(e,24),void 0!==i&&t.writeInt32(24,i),i=ui.Message.getField(e,13),void 0!==i&&t.writeInt32(13,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeString(14,i),i=ui.Message.getField(e,15),void 0!==i&&t.writeUint32(15,i),i=ui.Message.getField(e,16),void 0!==i&&t.writeUint32(16,i),i=ui.Message.getField(e,22),void 0!==i&&t.writeUint32(22,i),i=ui.Message.getField(e,23),void 0!==i&&t.writeBool(23,i),i=ui.Message.getField(e,17),void 0!==i&&t.writeInt32(17,i),i=ui.Message.getField(e,18),void 0!==i&&t.writeUint64String(18,i),i=ui.Message.getField(e,19),void 0!==i&&t.writeUint32(19,i),i=ui.Message.getField(e,20),void 0!==i&&t.writeUint32(20,i),i=ui.Message.getField(e,21),void 0!==i&&t.writeUint64String(21,i),i=ui.Message.getField(e,25),void 0!==i&&t.writeUint32(25,i),i=ui.Message.getField(e,26),void 0!==i&&t.writeBool(26,i),void 0!==(i=ui.Message.getField(e,27))&&t.writeRepeatedUint32(27,i)},t.prototype.getClassName=function(){return"CMsgProtoBufHeader"},t}(ui.Message),pi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.size_unzipped=function(){return ui.Message.getField(this,1)},t.prototype.set_size_unzipped=function(e){ui.Message.setField(this,1,e)},t.prototype.message_body=function(){return ui.Message.getField(this,2)},t.prototype.set_message_body=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_size_unzipped(t.readUint32());break;case 2:e.set_message_body(t.readBytes());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBytes(2,i)},t.prototype.getClassName=function(){return"CMsgMulti"},t}(ui.Message),mi=(ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.icon=function(){return ui.Message.getField(this,3)},t.prototype.set_icon=function(e){ui.Message.setField(this,3,e)},t.prototype.logo=function(){return ui.Message.getField(this,4)},t.prototype.set_logo=function(e){ui.Message.setField(this,4,e)},t.prototype.logo_small=function(){return ui.Message.getField(this,5)},t.prototype.set_logo_small=function(e){ui.Message.setField(this,5,e)},t.prototype.tool=function(){return ui.Message.getField(this,6)},t.prototype.set_tool=function(e){ui.Message.setField(this,6,e)},t.prototype.demo=function(){return ui.Message.getField(this,7)},t.prototype.set_demo=function(e){ui.Message.setField(this,7,e)},t.prototype.media=function(){return ui.Message.getField(this,8)},t.prototype.set_media=function(e){ui.Message.setField(this,8,e)},t.prototype.community_visible_stats=function(){return ui.Message.getField(this,9)},t.prototype.set_community_visible_stats=function(e){ui.Message.setField(this,9,e)},t.prototype.friendly_name=function(){return ui.Message.getField(this,10)},t.prototype.set_friendly_name=function(e){ui.Message.setField(this,10,e)},t.prototype.propagation=function(){return ui.Message.getField(this,11)},t.prototype.set_propagation=function(e){ui.Message.setField(this,11,e)},t.prototype.has_adult_content=function(){return ui.Message.getField(this,12)},t.prototype.set_has_adult_content=function(e){ui.Message.setField(this,12,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readUint32());break;case 2:e.set_name(t.readString());break;case 3:e.set_icon(t.readString());break;case 4:e.set_logo(t.readString());break;case 5:e.set_logo_small(t.readString());break;case 6:e.set_tool(t.readBool());break;case 7:e.set_demo(t.readBool());break;case 8:e.set_media(t.readBool());break;case 9:e.set_community_visible_stats(t.readBool());break;case 10:e.set_friendly_name(t.readString());break;case 11:e.set_propagation(t.readString());break;case 12:e.set_has_adult_content(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeString(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeString(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeBool(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBool(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBool(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeBool(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeString(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeString(11,i),void 0!==(i=ui.Message.getField(e,12))&&t.writeBool(12,i)},t.prototype.getClassName=function(){return"CCDDBAppDetailCommon"},t}(ui.Message)),hi=(ui.Message,ui.Message,i("edqd")),gi=function(){function e(e,t,i,n,r){if(n)this.m_eMsg=n.m_eMsg,this.m_bValid=n.m_bValid,this.m_bValid&&(this.m_netPacket=n.m_netPacket,this.m_cubHeader=n.m_cubHeader,this.m_header=n.m_header,this.InitForType(i));else{if(this.m_header=new di(null),this.m_bValid=!0,t)if(this.m_netPacket=t,this.m_netPacket.SeekGetHead(),this.m_eMsg=this.m_netPacket.GetUint32(),2147483648&this.m_eMsg){this.m_eMsg=2147483647&this.m_eMsg,this.m_cubHeader=this.m_netPacket.GetUint32();try{di.deserializeBinaryFromReader(this.m_header,new ui.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_cubHeader)),this.m_netPacket.SeekGetCurrent(this.m_cubHeader),i&&this.InitForType(i)}catch(e){console.error("Exception deserializing protobuf",e),this.m_bValid=!1}}else this.m_bValid=!1;else e&&(this.m_eMsg=e),i&&(this.m_body=new i);r&&this.m_header.set_jobid_target(r.Hdr().jobid_target())}}return e.InitHeaderFromPacket=function(t){return new e(void 0,t)},e.prototype.InitForType=function(e){if(this.m_body=new e,this.m_netPacket){this.m_netPacket.SeekGetHead(8+this.m_cubHeader);try{e.deserializeBinaryFromReader(this.m_body,new ui.BinaryReader(this.m_netPacket.GetPacket(),this.m_netPacket.TellGet(),this.m_netPacket.GetCountBytesRemaining()))}catch(e){this.m_bValid=!1,console.error("Exception parsing protobuf message body.  Definitions may be out of sync with server version."),console.log(e.stack||e)}}},e.prototype.BIsValid=function(){return this.m_bValid},e.prototype.Body=function(){return this.m_body},e.prototype.Hdr=function(){return this.m_header},e.prototype.GetEMsg=function(){return this.m_eMsg},e.prototype.SetEMsg=function(e){this.m_eMsg=e},e.prototype.GetEResult=function(){return this.Hdr().eresult()},e.prototype.Serialize=function(){var e=this.m_header.serializeBinary(),t=this.m_body.serializeBinary(),i=2147483648|this.m_eMsg,n=new Uint8Array(8+e.length+t.length),r=new ci(n);return r.PutUint32(i),r.PutUint32(e.length),r.PutBytes(e),r.PutBytes(t),n},e.prototype.DEBUG_ToObject=function(){return{}},e.prototype.DEBUG_LogToConsole=function(){},e}(),fi=function(e){function t(t,i,n,r){return void 0===i&&(i=0),e.call(this,i,n,t,r)||this}return si.d(t,e),t.InitFromPacket=function(e,i){return new t(e,0,i)},t.InitFromMsg=function(e,i){return new t(e,void 0,void 0,i)},t.Init=function(e,i){return new t(e,i)},t.prototype.Body=function(){return e.prototype.Body.call(this)},t}(gi),_i=i("y986"),yi=function(){function e(){this.m_mapCallbacks=new Map,this.m_rgRegisteredEMsgs=[],this.m_mapServiceMethodHandlers=new Map,this.m_rgRegisteredServiceMethodHandlers=[]}return e.prototype.DispatchMsgToHandlers=function(e,t){var i=e.GetEMsg();if(146==i){var n=e.Hdr().target_job_name();if(n){var r=this.m_mapServiceMethodHandlers.get(n);if(r){this.DEBUG_LogMessageDispatch(e,r[0]);for(var o=0,a=r;o<a.length;o++){var s=a[o];s.invoke(e,t)}return!0}}}else{var r=this.m_mapCallbacks.get(i);if(r){this.DEBUG_LogMessageDispatch(e,r[0]);for(var c=0,l=r;c<l.length;c++){var s=l[c];s.invoke(e)}return!0}}return!1},e.prototype.DEBUG_LogMessageDispatch=function(e,t){},Object.defineProperty(e.prototype,"emsg_list",{get:function(){return this.m_rgRegisteredEMsgs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicemethod_list",{get:function(){return this.m_rgRegisteredServiceMethodHandlers},enumerable:!0,configurable:!0}),e.prototype.AddCallback=function(e,t,i){var n=this,r=this.m_mapCallbacks.get(e);return r||(r=[],this.m_mapCallbacks.set(e,r),this.m_rgRegisteredEMsgs.push(e)),r.push({invoke:i,msgClass:t}),{invoke:i,unregister:function(){var t=n.m_mapCallbacks.get(e);if(t)for(var r=0;r<t.length;r++)t[r].invoke==i&&(t.splice(r,1),r--)}}},e.prototype.AddServiceMethodHandler=function(e,t){var i=this,n=function(i,n){var r=fi.InitFromMsg(e.request,i),o=fi.Init(e.response,147),a=t(r,o),s=function(e){o.Hdr().set_eresult(e),n(o)};a instanceof Promise?a.then(s).catch(function(){s(2)}):s(a)};return this.m_mapServiceMethodHandlers.has(e.name)?console.error("Duplicate registration for method "+e.name):(this.m_mapServiceMethodHandlers.set(e.name,[{invoke:n,msgClass:e.request}]),this.m_rgRegisteredServiceMethodHandlers.push(e.name)),{invoke:n,unregister:function(){var t=i.m_mapServiceMethodHandlers.get(e.name);if(t)for(var r=0;r<t.length;r++)t[r].invoke==n&&(t.splice(r,1),r--)}}},e.prototype.AddServiceNotificationHandler=function(e,t){var i=this,n=function(i,n){var r=fi.InitFromMsg(e.request,i);t(r)},r=this.m_mapServiceMethodHandlers.get(e.name);return r||(r=[],this.m_mapServiceMethodHandlers.set(e.name,r),this.m_rgRegisteredServiceMethodHandlers.push(e.name)),r.push({invoke:n,msgClass:e.request}),{invoke:n,unregister:function(){var t=i.m_mapServiceMethodHandlers.get(e.name);if(t)for(var r=0;r<t.length;r++)t[r].invoke==n&&(t.splice(r,1),r--)}}},si.c([_i.observable],e.prototype,"m_rgRegisteredEMsgs",void 0),si.c([_i.observable],e.prototype,"m_rgRegisteredServiceMethodHandlers",void 0),e}(),vi=new yi,bi=i("EKta"),Ci=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.bincremental=function(){return ui.Message.getField(this,1)},t.prototype.set_bincremental=function(e){ui.Message.setField(this,1,e)},t.prototype.friends=function(){return ui.Message.getRepeatedWrapperField(this,Si,2)},t.prototype.set_friends=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_friends=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,Si,t)},t.prototype.max_friend_count=function(){return ui.Message.getField(this,3)},t.prototype.set_max_friend_count=function(e){ui.Message.setField(this,3,e)},t.prototype.active_friend_count=function(){return ui.Message.getField(this,4)},t.prototype.set_active_friend_count=function(e){ui.Message.setField(this,4,e)},t.prototype.friends_limit_hit=function(){return ui.Message.getField(this,5)},t.prototype.set_friends_limit_hit=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_bincremental(t.readBool());break;case 2:var i=new Si;t.readMessage(i,Si.deserializeBinaryFromReader),e.add_friends(i);break;case 3:e.set_max_friend_count(t.readUint32());break;case 4:e.set_active_friend_count(t.readUint32());break;case 5:e.set_friends_limit_hit(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),i=e.friends(),i.length>0&&t.writeRepeatedMessage(2,i,Si.serializeBinaryToWriter),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeBool(5,i)},t.prototype.getClassName=function(){return"CMsgClientFriendsList"},t}(ui.Message)),Si=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.ulfriendid=function(){return ui.Message.getField(this,1)},t.prototype.set_ulfriendid=function(e){ui.Message.setField(this,1,e)},t.prototype.efriendrelationship=function(){return ui.Message.getField(this,2)},t.prototype.set_efriendrelationship=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_ulfriendid(t.readFixed64String());break;case 2:e.set_efriendrelationship(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CMsgClientFriendsList_Friend"},t}(ui.Message),Mi=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.persona_state_requested=function(){return ui.Message.getField(this,1)},t.prototype.set_persona_state_requested=function(e){ui.Message.setField(this,1,e)},t.prototype.friends=function(){return ui.Message.getField(this,2)},t.prototype.set_friends=function(e){ui.Message.setField(this,2,e)},t.prototype.add_friends=function(e,t){ui.Message.addToRepeatedField(this,2,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_persona_state_requested(t.readUint32());break;case 2:e.add_friends(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeRepeatedFixed64String(2,i)},t.prototype.getClassName=function(){return"CMsgClientRequestFriendData"},t}(ui.Message)),Fi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.persona_state=function(){return ui.Message.getField(this,1)},t.prototype.set_persona_state=function(e){ui.Message.setField(this,1,e)},t.prototype.player_name=function(){return ui.Message.getField(this,2)},t.prototype.set_player_name=function(e){ui.Message.setField(this,2,e)},t.prototype.is_auto_generated_name=function(){return ui.Message.getField(this,3)},t.prototype.set_is_auto_generated_name=function(e){ui.Message.setField(this,3,e)},t.prototype.high_priority=function(){return ui.Message.getField(this,4)},t.prototype.set_high_priority=function(e){ui.Message.setField(this,4,e)},t.prototype.persona_set_by_user=function(){return ui.Message.getField(this,5)},t.prototype.set_persona_set_by_user=function(e){ui.Message.setField(this,5,e)},t.prototype.persona_state_flags=function(){return ui.Message.getFieldWithDefault(this,6,0)},t.prototype.set_persona_state_flags=function(e){ui.Message.setField(this,6,e)},t.prototype.need_persona_response=function(){return ui.Message.getField(this,7)},t.prototype.set_need_persona_response=function(e){ui.Message.setField(this,7,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_persona_state(t.readUint32());break;case 2:e.set_player_name(t.readString());break;case 3:e.set_is_auto_generated_name(t.readBool());break;case 4:e.set_high_priority(t.readBool());break;case 5:e.set_persona_set_by_user(t.readBool());break;case 6:e.set_persona_state_flags(t.readUint32());break;case 7:e.set_need_persona_response(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeBool(7,i)},t.prototype.getClassName=function(){return"CMsgClientChangeStatus"},t}(ui.Message),wi=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.status_flags=function(){return ui.Message.getField(this,1)},t.prototype.set_status_flags=function(e){ui.Message.setField(this,1,e)},t.prototype.friends=function(){return ui.Message.getRepeatedWrapperField(this,Bi,2)},t.prototype.set_friends=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_friends=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,Bi,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_status_flags(t.readUint32());break;case 2:var i=new Bi;t.readMessage(i,Bi.deserializeBinaryFromReader),e.add_friends(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=e.friends(),i.length>0&&t.writeRepeatedMessage(2,i,Bi.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgClientPersonaState"},t}(ui.Message)),Bi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[71],null),i}return si.d(t,e),t.prototype.friendid=function(){return ui.Message.getField(this,1)},t.prototype.set_friendid=function(e){ui.Message.setField(this,1,e)},t.prototype.persona_state=function(){return ui.Message.getField(this,2)},t.prototype.set_persona_state=function(e){ui.Message.setField(this,2,e)},t.prototype.game_played_app_id=function(){return ui.Message.getField(this,3)},t.prototype.set_game_played_app_id=function(e){ui.Message.setField(this,3,e)},t.prototype.game_server_ip=function(){return ui.Message.getField(this,4)},t.prototype.set_game_server_ip=function(e){ui.Message.setField(this,4,e)},t.prototype.game_server_port=function(){return ui.Message.getField(this,5)},t.prototype.set_game_server_port=function(e){ui.Message.setField(this,5,e)},t.prototype.persona_state_flags=function(){return ui.Message.getField(this,6)},t.prototype.set_persona_state_flags=function(e){ui.Message.setField(this,6,e)},t.prototype.online_session_instances=function(){return ui.Message.getField(this,7)},t.prototype.set_online_session_instances=function(e){ui.Message.setField(this,7,e)},t.prototype.published_instance_id=function(){return ui.Message.getField(this,8)},t.prototype.set_published_instance_id=function(e){ui.Message.setField(this,8,e)},t.prototype.persona_set_by_user=function(){return ui.Message.getField(this,10)},t.prototype.set_persona_set_by_user=function(e){ui.Message.setField(this,10,e)},t.prototype.player_name=function(){return ui.Message.getField(this,15)},t.prototype.set_player_name=function(e){ui.Message.setField(this,15,e)},t.prototype.query_port=function(){return ui.Message.getField(this,20)},t.prototype.set_query_port=function(e){ui.Message.setField(this,20,e)},t.prototype.steamid_source=function(){return ui.Message.getField(this,25)},t.prototype.set_steamid_source=function(e){ui.Message.setField(this,25,e)},t.prototype.avatar_hash=function(){return ui.Message.getField(this,31)},t.prototype.set_avatar_hash=function(e){ui.Message.setField(this,31,e)},t.prototype.last_logoff=function(){return ui.Message.getField(this,45)},t.prototype.set_last_logoff=function(e){ui.Message.setField(this,45,e)},t.prototype.last_logon=function(){return ui.Message.getField(this,46)},t.prototype.set_last_logon=function(e){ui.Message.setField(this,46,e)},t.prototype.last_seen_online=function(){return ui.Message.getField(this,47)},t.prototype.set_last_seen_online=function(e){ui.Message.setField(this,47,e)},t.prototype.clan_rank=function(){return ui.Message.getField(this,50)},t.prototype.set_clan_rank=function(e){ui.Message.setField(this,50,e)},t.prototype.game_name=function(){return ui.Message.getField(this,55)},t.prototype.set_game_name=function(e){ui.Message.setField(this,55,e)},t.prototype.gameid=function(){return ui.Message.getField(this,56)},t.prototype.set_gameid=function(e){ui.Message.setField(this,56,e)},t.prototype.game_data_blob=function(){return ui.Message.getField(this,60)},t.prototype.set_game_data_blob=function(e){ui.Message.setField(this,60,e)},t.prototype.clan_data=function(){return ui.Message.getWrapperField(this,Oi,64,1)},t.prototype.set_clan_data=function(e){ui.Message.setWrapperField(this,64,e)},t.prototype.clan_tag=function(){return ui.Message.getField(this,65)},t.prototype.set_clan_tag=function(e){ui.Message.setField(this,65,e)},t.prototype.rich_presence=function(){return ui.Message.getRepeatedWrapperField(this,Ii,71)},t.prototype.set_rich_presence=function(e){ui.Message.setRepeatedWrapperField(this,71,e)},t.prototype.add_rich_presence=function(e,t){return ui.Message.addToRepeatedWrapperField(this,71,e,Ii,t)},t.prototype.broadcast_id=function(){return ui.Message.getField(this,72)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,72,e)},t.prototype.game_lobby_id=function(){return ui.Message.getField(this,73)},t.prototype.set_game_lobby_id=function(e){ui.Message.setField(this,73,e)},t.prototype.watching_broadcast_accountid=function(){return ui.Message.getField(this,74)},t.prototype.set_watching_broadcast_accountid=function(e){ui.Message.setField(this,74,e)},t.prototype.watching_broadcast_appid=function(){return ui.Message.getField(this,75)},t.prototype.set_watching_broadcast_appid=function(e){ui.Message.setField(this,75,e)},t.prototype.watching_broadcast_viewers=function(){return ui.Message.getField(this,76)},t.prototype.set_watching_broadcast_viewers=function(e){ui.Message.setField(this,76,e)},t.prototype.watching_broadcast_title=function(){return ui.Message.getField(this,77)},t.prototype.set_watching_broadcast_title=function(e){ui.Message.setField(this,77,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_friendid(t.readFixed64String());break;case 2:e.set_persona_state(t.readUint32());break;case 3:e.set_game_played_app_id(t.readUint32());break;case 4:e.set_game_server_ip(t.readUint32());break;case 5:e.set_game_server_port(t.readUint32());break;case 6:e.set_persona_state_flags(t.readUint32());break;case 7:e.set_online_session_instances(t.readUint32());break;case 8:e.set_published_instance_id(t.readUint32());break;case 10:e.set_persona_set_by_user(t.readBool());break;case 15:e.set_player_name(t.readString());break;case 20:e.set_query_port(t.readUint32());break;case 25:e.set_steamid_source(t.readFixed64String());break;case 31:e.set_avatar_hash(t.readBytes());break;case 45:e.set_last_logoff(t.readUint32());break;case 46:e.set_last_logon(t.readUint32());break;case 47:e.set_last_seen_online(t.readUint32());break;case 50:e.set_clan_rank(t.readUint32());break;case 55:e.set_game_name(t.readString());break;case 56:e.set_gameid(t.readFixed64String());break;case 60:e.set_game_data_blob(t.readBytes());break;case 64:var i=new Oi;t.readMessage(i,Oi.deserializeBinaryFromReader),e.set_clan_data(i);break;case 65:e.set_clan_tag(t.readString());break;case 71:var i=new Ii;t.readMessage(i,Ii.deserializeBinaryFromReader),e.add_rich_presence(i);break;case 72:e.set_broadcast_id(t.readFixed64String());break;case 73:e.set_game_lobby_id(t.readFixed64String());break;case 74:e.set_watching_broadcast_accountid(t.readUint32());break;case 75:e.set_watching_broadcast_appid(t.readUint32());break;case 76:e.set_watching_broadcast_viewers(t.readUint32());break;case 77:e.set_watching_broadcast_title(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeUint32(8,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeBool(10,i),i=ui.Message.getField(e,15),void 0!==i&&t.writeString(15,i),i=ui.Message.getField(e,20),void 0!==i&&t.writeUint32(20,i),i=ui.Message.getField(e,25),void 0!==i&&t.writeFixed64String(25,i),i=ui.Message.getField(e,31),void 0!==i&&t.writeBytes(31,i),i=ui.Message.getField(e,45),void 0!==i&&t.writeUint32(45,i),i=ui.Message.getField(e,46),void 0!==i&&t.writeUint32(46,i),i=ui.Message.getField(e,47),void 0!==i&&t.writeUint32(47,i),i=ui.Message.getField(e,50),void 0!==i&&t.writeUint32(50,i),i=ui.Message.getField(e,55),void 0!==i&&t.writeString(55,i),i=ui.Message.getField(e,56),void 0!==i&&t.writeFixed64String(56,i),i=ui.Message.getField(e,60),void 0!==i&&t.writeBytes(60,i),i=e.clan_data(),null!=i&&t.writeMessage(64,i,Oi.serializeBinaryToWriter),i=ui.Message.getField(e,65),void 0!==i&&t.writeString(65,i),i=e.rich_presence(),i.length>0&&t.writeRepeatedMessage(71,i,Ii.serializeBinaryToWriter),i=ui.Message.getField(e,72),void 0!==i&&t.writeFixed64String(72,i),i=ui.Message.getField(e,73),void 0!==i&&t.writeFixed64String(73,i),i=ui.Message.getField(e,74),void 0!==i&&t.writeUint32(74,i),i=ui.Message.getField(e,75),void 0!==i&&t.writeUint32(75,i),i=ui.Message.getField(e,76),void 0!==i&&t.writeUint32(76,i),void 0!==(i=ui.Message.getField(e,77))&&t.writeString(77,i)},t.prototype.getClassName=function(){return"CMsgClientPersonaState_Friend"},t}(ui.Message),Oi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.ogg_app_id=function(){return ui.Message.getField(this,1)},t.prototype.set_ogg_app_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_ogg_app_id(t.readUint32());break;case 2:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CMsgClientPersonaState_Friend_ClanData"},t}(ui.Message),Ii=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.key=function(){return ui.Message.getField(this,1)},t.prototype.set_key=function(e){ui.Message.setField(this,1,e)},t.prototype.value=function(){return ui.Message.getField(this,2)},t.prototype.set_value=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_key(t.readString());break;case 2:e.set_value(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CMsgClientPersonaState_Friend_KV"},t}(ui.Message),Ri=(ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.groupname=function(){return ui.Message.getField(this,2)},t.prototype.set_groupname=function(e){ui.Message.setField(this,2,e)},t.prototype.steamid_friends=function(){return ui.Message.getField(this,3)},t.prototype.set_steamid_friends=function(e){ui.Message.setField(this,3,e)},t.prototype.add_steamid_friends=function(e,t){ui.Message.addToRepeatedField(this,3,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_groupname(t.readString());break;case 3:e.add_steamid_friends(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeRepeatedFixed64String(3,i)},t.prototype.getClassName=function(){return"CMsgClientCreateFriendsGroup"},t}(ui.Message)),Ei=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getField(this,1)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.groupid=function(){return ui.Message.getField(this,2)},t.prototype.set_groupid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readUint32());break;case 2:e.set_groupid(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeInt32(2,i)},t.prototype.getClassName=function(){return"CMsgClientCreateFriendsGroupResponse"},t}(ui.Message),Ti=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.groupid=function(){return ui.Message.getField(this,2)},t.prototype.set_groupid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_groupid(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeInt32(2,i)},t.prototype.getClassName=function(){return"CMsgClientDeleteFriendsGroup"},t}(ui.Message),ki=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getField(this,1)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CMsgClientDeleteFriendsGroupResponse"},t}(ui.Message),Di=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3,4],null),i}return si.d(t,e),t.prototype.groupid=function(){return ui.Message.getField(this,1)},t.prototype.set_groupid=function(e){ui.Message.setField(this,1,e)},t.prototype.groupname=function(){return ui.Message.getField(this,2)},t.prototype.set_groupname=function(e){ui.Message.setField(this,2,e)},t.prototype.steamid_friends_added=function(){return ui.Message.getField(this,3)},t.prototype.set_steamid_friends_added=function(e){ui.Message.setField(this,3,e)},t.prototype.add_steamid_friends_added=function(e,t){ui.Message.addToRepeatedField(this,3,e,t)},t.prototype.steamid_friends_removed=function(){return ui.Message.getField(this,4)},t.prototype.set_steamid_friends_removed=function(e){ui.Message.setField(this,4,e)},t.prototype.add_steamid_friends_removed=function(e,t){ui.Message.addToRepeatedField(this,4,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_groupid(t.readInt32());break;case 2:e.set_groupname(t.readString());break;case 3:e.add_steamid_friends_added(t.readFixed64String());break;case 4:e.add_steamid_friends_removed(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeRepeatedFixed64String(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeRepeatedFixed64String(4,i)},t.prototype.getClassName=function(){return"CMsgClientManageFriendsGroup"},t}(ui.Message),Gi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getField(this,1)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CMsgClientManageFriendsGroupResponse"},t}(ui.Message),Ni=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.groupid=function(){return ui.Message.getField(this,1)},t.prototype.set_groupid=function(e){ui.Message.setField(this,1,e)},t.prototype.steamiduser=function(){return ui.Message.getField(this,2)},t.prototype.set_steamiduser=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_groupid(t.readInt32());break;case 2:e.set_steamiduser(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CMsgClientAddFriendToGroup"},t}(ui.Message),Li=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getField(this,1)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CMsgClientAddFriendToGroupResponse"},t}(ui.Message),Ai=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.groupid=function(){return ui.Message.getField(this,1)},t.prototype.set_groupid=function(e){ui.Message.setField(this,1,e)},t.prototype.steamiduser=function(){return ui.Message.getField(this,2)},t.prototype.set_steamiduser=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_groupid(t.readInt32());break;case 2:e.set_steamiduser(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CMsgClientRemoveFriendFromGroup"},t}(ui.Message),Pi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getField(this,1)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CMsgClientRemoveFriendFromGroupResponse"},t}(ui.Message),xi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CMsgClientGetEmoticonList"},t}(ui.Message),zi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.emoticons=function(){return ui.Message.getRepeatedWrapperField(this,Ui,1)},t.prototype.set_emoticons=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_emoticons=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Ui,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Ui;t.readMessage(i,Ui.deserializeBinaryFromReader),e.add_emoticons(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.emoticons(),i.length>0&&t.writeRepeatedMessage(1,i,Ui.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgClientEmoticonList"},t}(ui.Message),Ui=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.name=function(){return ui.Message.getField(this,1)},t.prototype.set_name=function(e){ui.Message.setField(this,1,e)},t.prototype.count=function(){return ui.Message.getField(this,2)},t.prototype.set_count=function(e){ui.Message.setField(this,2,e)},t.prototype.time_last_used=function(){return ui.Message.getField(this,3)},t.prototype.set_time_last_used=function(e){ui.Message.setField(this,3,e)},t.prototype.use_count=function(){return ui.Message.getField(this,4)},t.prototype.set_use_count=function(e){ui.Message.setField(this,4,e)},t.prototype.time_received=function(){return ui.Message.getField(this,5)},t.prototype.set_time_received=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_name(t.readString());break;case 2:e.set_count(t.readInt32());break;case 3:e.set_time_last_used(t.readUint32());break;case 4:e.set_use_count(t.readUint32());break;case 5:e.set_time_received(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CMsgClientEmoticonList_Emoticon"},t}(ui.Message),Vi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CMsgClientHeartBeat"},t}(ui.Message),ji=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.client_request_timestamp=function(){return ui.Message.getField(this,1)},t.prototype.set_client_request_timestamp=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_client_request_timestamp(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CMsgClientServerTimestampRequest"},t}(ui.Message),Wi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.client_request_timestamp=function(){return ui.Message.getField(this,1)},t.prototype.set_client_request_timestamp=function(e){ui.Message.setField(this,1,e)},t.prototype.server_timestamp_ms=function(){return ui.Message.getField(this,2)},t.prototype.set_server_timestamp_ms=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_client_request_timestamp(t.readUint64String());break;case 2:e.set_server_timestamp_ms(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CMsgClientServerTimestampResponse"},t}(ui.Message),Hi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.protocol_version=function(){return ui.Message.getField(this,1)},t.prototype.set_protocol_version=function(e){ui.Message.setField(this,1,e)},t.prototype.obfustucated_private_ip=function(){return ui.Message.getField(this,2)},t.prototype.set_obfustucated_private_ip=function(e){ui.Message.setField(this,2,e)},t.prototype.cell_id=function(){return ui.Message.getField(this,3)},t.prototype.set_cell_id=function(e){ui.Message.setField(this,3,e)},t.prototype.last_session_id=function(){return ui.Message.getField(this,4)},t.prototype.set_last_session_id=function(e){ui.Message.setField(this,4,e)},t.prototype.client_package_version=function(){return ui.Message.getField(this,5)},t.prototype.set_client_package_version=function(e){ui.Message.setField(this,5,e)},t.prototype.client_language=function(){return ui.Message.getField(this,6)},t.prototype.set_client_language=function(e){ui.Message.setField(this,6,e)},t.prototype.client_os_type=function(){return ui.Message.getField(this,7)},t.prototype.set_client_os_type=function(e){ui.Message.setField(this,7,e)},t.prototype.should_remember_password=function(){return ui.Message.getFieldWithDefault(this,8,!1)},t.prototype.set_should_remember_password=function(e){ui.Message.setField(this,8,e)},t.prototype.wine_version=function(){return ui.Message.getField(this,9)},t.prototype.set_wine_version=function(e){ui.Message.setField(this,9,e)},t.prototype.ping_ms_from_cell_search=function(){return ui.Message.getField(this,10)},t.prototype.set_ping_ms_from_cell_search=function(e){ui.Message.setField(this,10,e)},t.prototype.public_ip=function(){return ui.Message.getField(this,20)},t.prototype.set_public_ip=function(e){ui.Message.setField(this,20,e)},t.prototype.qos_level=function(){return ui.Message.getField(this,21)},t.prototype.set_qos_level=function(e){ui.Message.setField(this,21,e)},t.prototype.client_supplied_steam_id=function(){return ui.Message.getField(this,22)},t.prototype.set_client_supplied_steam_id=function(e){ui.Message.setField(this,22,e)},t.prototype.machine_id=function(){return ui.Message.getField(this,30)},t.prototype.set_machine_id=function(e){ui.Message.setField(this,30,e)},t.prototype.launcher_type=function(){return ui.Message.getFieldWithDefault(this,31,0)},t.prototype.set_launcher_type=function(e){ui.Message.setField(this,31,e)},t.prototype.ui_mode=function(){return ui.Message.getFieldWithDefault(this,32,0)},t.prototype.set_ui_mode=function(e){ui.Message.setField(this,32,e)},t.prototype.chat_mode=function(){return ui.Message.getFieldWithDefault(this,33,0)},t.prototype.set_chat_mode=function(e){ui.Message.setField(this,33,e)},t.prototype.steam2_auth_ticket=function(){return ui.Message.getField(this,41)},t.prototype.set_steam2_auth_ticket=function(e){ui.Message.setField(this,41,e)},t.prototype.email_address=function(){return ui.Message.getField(this,42)},t.prototype.set_email_address=function(e){ui.Message.setField(this,42,e)},t.prototype.rtime32_account_creation=function(){return ui.Message.getField(this,43)},t.prototype.set_rtime32_account_creation=function(e){ui.Message.setField(this,43,e)},t.prototype.account_name=function(){return ui.Message.getField(this,50)},t.prototype.set_account_name=function(e){ui.Message.setField(this,50,e)},t.prototype.password=function(){return ui.Message.getField(this,51)},t.prototype.set_password=function(e){ui.Message.setField(this,51,e)},t.prototype.game_server_token=function(){return ui.Message.getField(this,52)},t.prototype.set_game_server_token=function(e){ui.Message.setField(this,52,e)},t.prototype.login_key=function(){return ui.Message.getField(this,60)},t.prototype.set_login_key=function(e){ui.Message.setField(this,60,e)},t.prototype.was_converted_deprecated_msg=function(){return ui.Message.getFieldWithDefault(this,70,!1)},t.prototype.set_was_converted_deprecated_msg=function(e){ui.Message.setField(this,70,e)},t.prototype.anon_user_target_account_name=function(){return ui.Message.getField(this,80)},t.prototype.set_anon_user_target_account_name=function(e){ui.Message.setField(this,80,e)},t.prototype.resolved_user_steam_id=function(){return ui.Message.getField(this,81)},t.prototype.set_resolved_user_steam_id=function(e){ui.Message.setField(this,81,e)},t.prototype.eresult_sentryfile=function(){return ui.Message.getField(this,82)},t.prototype.set_eresult_sentryfile=function(e){ui.Message.setField(this,82,e)},t.prototype.sha_sentryfile=function(){return ui.Message.getField(this,83)},t.prototype.set_sha_sentryfile=function(e){ui.Message.setField(this,83,e)},t.prototype.auth_code=function(){return ui.Message.getField(this,84)},t.prototype.set_auth_code=function(e){ui.Message.setField(this,84,e)},t.prototype.otp_type=function(){return ui.Message.getField(this,85)},t.prototype.set_otp_type=function(e){ui.Message.setField(this,85,e)},t.prototype.otp_value=function(){return ui.Message.getField(this,86)},t.prototype.set_otp_value=function(e){ui.Message.setField(this,86,e)},t.prototype.otp_identifier=function(){return ui.Message.getField(this,87)},t.prototype.set_otp_identifier=function(e){ui.Message.setField(this,87,e)},t.prototype.steam2_ticket_request=function(){return ui.Message.getField(this,88)},t.prototype.set_steam2_ticket_request=function(e){ui.Message.setField(this,88,e)},t.prototype.sony_psn_ticket=function(){return ui.Message.getField(this,90)},t.prototype.set_sony_psn_ticket=function(e){ui.Message.setField(this,90,e)},t.prototype.sony_psn_service_id=function(){return ui.Message.getField(this,91)},t.prototype.set_sony_psn_service_id=function(e){ui.Message.setField(this,91,e)},t.prototype.create_new_psn_linked_account_if_needed=function(){return ui.Message.getFieldWithDefault(this,92,!1)},t.prototype.set_create_new_psn_linked_account_if_needed=function(e){ui.Message.setField(this,92,e)},t.prototype.sony_psn_name=function(){return ui.Message.getField(this,93)},t.prototype.set_sony_psn_name=function(e){ui.Message.setField(this,93,e)},t.prototype.game_server_app_id=function(){return ui.Message.getField(this,94)},t.prototype.set_game_server_app_id=function(e){ui.Message.setField(this,94,e)},t.prototype.steamguard_dont_remember_computer=function(){return ui.Message.getField(this,95)},t.prototype.set_steamguard_dont_remember_computer=function(e){ui.Message.setField(this,95,e)},t.prototype.machine_name=function(){return ui.Message.getField(this,96)},t.prototype.set_machine_name=function(e){ui.Message.setField(this,96,e)},t.prototype.machine_name_userchosen=function(){return ui.Message.getField(this,97)},t.prototype.set_machine_name_userchosen=function(e){ui.Message.setField(this,97,e)},t.prototype.country_override=function(){return ui.Message.getField(this,98)},t.prototype.set_country_override=function(e){ui.Message.setField(this,98,e)},t.prototype.is_steam_box=function(){return ui.Message.getField(this,99)},t.prototype.set_is_steam_box=function(e){ui.Message.setField(this,99,e)},t.prototype.client_instance_id=function(){return ui.Message.getField(this,100)},t.prototype.set_client_instance_id=function(e){ui.Message.setField(this,100,e)},t.prototype.two_factor_code=function(){return ui.Message.getField(this,101)},t.prototype.set_two_factor_code=function(e){ui.Message.setField(this,101,e)},t.prototype.supports_rate_limit_response=function(){return ui.Message.getField(this,102)},t.prototype.set_supports_rate_limit_response=function(e){ui.Message.setField(this,102,e)},t.prototype.web_logon_nonce=function(){return ui.Message.getField(this,103)},t.prototype.set_web_logon_nonce=function(e){ui.Message.setField(this,103,e)},t.prototype.priority_reason=function(){return ui.Message.getField(this,104)},t.prototype.set_priority_reason=function(e){ui.Message.setField(this,104,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_protocol_version(t.readUint32());break;case 2:e.set_obfustucated_private_ip(t.readUint32());break;case 3:e.set_cell_id(t.readUint32());break;case 4:e.set_last_session_id(t.readUint32());break;case 5:e.set_client_package_version(t.readUint32());break;case 6:e.set_client_language(t.readString());break;case 7:e.set_client_os_type(t.readUint32());break;case 8:e.set_should_remember_password(t.readBool());break;case 9:e.set_wine_version(t.readString());break;case 10:e.set_ping_ms_from_cell_search(t.readUint32());break;case 20:e.set_public_ip(t.readUint32());break;case 21:e.set_qos_level(t.readUint32());break;case 22:e.set_client_supplied_steam_id(t.readFixed64String());break;case 30:e.set_machine_id(t.readBytes());break;case 31:e.set_launcher_type(t.readUint32());break;case 32:e.set_ui_mode(t.readUint32());break;case 33:e.set_chat_mode(t.readUint32());break;case 41:e.set_steam2_auth_ticket(t.readBytes());break;case 42:e.set_email_address(t.readString());break;case 43:e.set_rtime32_account_creation(t.readFixed32());break;case 50:e.set_account_name(t.readString());break;case 51:e.set_password(t.readString());break;case 52:e.set_game_server_token(t.readString());break;case 60:e.set_login_key(t.readString());break;case 70:e.set_was_converted_deprecated_msg(t.readBool());break;case 80:e.set_anon_user_target_account_name(t.readString());break;case 81:e.set_resolved_user_steam_id(t.readFixed64String());break;case 82:e.set_eresult_sentryfile(t.readInt32());break;case 83:e.set_sha_sentryfile(t.readBytes());break;case 84:e.set_auth_code(t.readString());break;case 85:e.set_otp_type(t.readInt32());break;case 86:e.set_otp_value(t.readUint32());break;case 87:e.set_otp_identifier(t.readString());break;case 88:e.set_steam2_ticket_request(t.readBool());break;case 90:e.set_sony_psn_ticket(t.readBytes());break;case 91:e.set_sony_psn_service_id(t.readString());break;case 92:e.set_create_new_psn_linked_account_if_needed(t.readBool());break;case 93:e.set_sony_psn_name(t.readString());break;case 94:e.set_game_server_app_id(t.readInt32());break;case 95:e.set_steamguard_dont_remember_computer(t.readBool());break;case 96:e.set_machine_name(t.readString());break;case 97:e.set_machine_name_userchosen(t.readString());break;case 98:e.set_country_override(t.readString());break;case 99:e.set_is_steam_box(t.readBool());break;case 100:e.set_client_instance_id(t.readUint64String());break;case 101:e.set_two_factor_code(t.readString());break;case 102:e.set_supports_rate_limit_response(t.readBool());break;case 103:e.set_web_logon_nonce(t.readString());break;case 104:e.set_priority_reason(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeString(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBool(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeString(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeUint32(10,i),i=ui.Message.getField(e,20),void 0!==i&&t.writeUint32(20,i),i=ui.Message.getField(e,21),void 0!==i&&t.writeUint32(21,i),i=ui.Message.getField(e,22),void 0!==i&&t.writeFixed64String(22,i),i=ui.Message.getField(e,30),void 0!==i&&t.writeBytes(30,i),i=ui.Message.getField(e,31),void 0!==i&&t.writeUint32(31,i),i=ui.Message.getField(e,32),void 0!==i&&t.writeUint32(32,i),i=ui.Message.getField(e,33),void 0!==i&&t.writeUint32(33,i),i=ui.Message.getField(e,41),void 0!==i&&t.writeBytes(41,i),i=ui.Message.getField(e,42),void 0!==i&&t.writeString(42,i),i=ui.Message.getField(e,43),void 0!==i&&t.writeFixed32(43,i),i=ui.Message.getField(e,50),void 0!==i&&t.writeString(50,i),i=ui.Message.getField(e,51),void 0!==i&&t.writeString(51,i),i=ui.Message.getField(e,52),void 0!==i&&t.writeString(52,i),i=ui.Message.getField(e,60),void 0!==i&&t.writeString(60,i),i=ui.Message.getField(e,70),void 0!==i&&t.writeBool(70,i),i=ui.Message.getField(e,80),void 0!==i&&t.writeString(80,i),i=ui.Message.getField(e,81),void 0!==i&&t.writeFixed64String(81,i),i=ui.Message.getField(e,82),void 0!==i&&t.writeInt32(82,i),i=ui.Message.getField(e,83),void 0!==i&&t.writeBytes(83,i),i=ui.Message.getField(e,84),void 0!==i&&t.writeString(84,i),i=ui.Message.getField(e,85),void 0!==i&&t.writeInt32(85,i),i=ui.Message.getField(e,86),void 0!==i&&t.writeUint32(86,i),i=ui.Message.getField(e,87),void 0!==i&&t.writeString(87,i),i=ui.Message.getField(e,88),void 0!==i&&t.writeBool(88,i),i=ui.Message.getField(e,90),void 0!==i&&t.writeBytes(90,i),i=ui.Message.getField(e,91),void 0!==i&&t.writeString(91,i),i=ui.Message.getField(e,92),void 0!==i&&t.writeBool(92,i),i=ui.Message.getField(e,93),void 0!==i&&t.writeString(93,i),i=ui.Message.getField(e,94),void 0!==i&&t.writeInt32(94,i),i=ui.Message.getField(e,95),void 0!==i&&t.writeBool(95,i),i=ui.Message.getField(e,96),void 0!==i&&t.writeString(96,i),i=ui.Message.getField(e,97),void 0!==i&&t.writeString(97,i),i=ui.Message.getField(e,98),void 0!==i&&t.writeString(98,i),i=ui.Message.getField(e,99),void 0!==i&&t.writeBool(99,i),i=ui.Message.getField(e,100),void 0!==i&&t.writeUint64String(100,i),i=ui.Message.getField(e,101),void 0!==i&&t.writeString(101,i),i=ui.Message.getField(e,102),void 0!==i&&t.writeBool(102,i),i=ui.Message.getField(e,103),void 0!==i&&t.writeString(103,i),void 0!==(i=ui.Message.getField(e,104))&&t.writeInt32(104,i)},t.prototype.getClassName=function(){return"CMsgClientLogon"},t}(ui.Message),qi=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getFieldWithDefault(this,1,2)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.out_of_game_heartbeat_seconds=function(){return ui.Message.getField(this,2)},t.prototype.set_out_of_game_heartbeat_seconds=function(e){ui.Message.setField(this,2,e)},t.prototype.in_game_heartbeat_seconds=function(){return ui.Message.getField(this,3)},t.prototype.set_in_game_heartbeat_seconds=function(e){ui.Message.setField(this,3,e)},t.prototype.public_ip=function(){return ui.Message.getField(this,4)},t.prototype.set_public_ip=function(e){ui.Message.setField(this,4,e)},t.prototype.rtime32_server_time=function(){return ui.Message.getField(this,5)},t.prototype.set_rtime32_server_time=function(e){ui.Message.setField(this,5,e)},t.prototype.account_flags=function(){return ui.Message.getField(this,6)},t.prototype.set_account_flags=function(e){ui.Message.setField(this,6,e)},t.prototype.cell_id=function(){return ui.Message.getField(this,7)},t.prototype.set_cell_id=function(e){ui.Message.setField(this,7,e)},t.prototype.email_domain=function(){return ui.Message.getField(this,8)},t.prototype.set_email_domain=function(e){ui.Message.setField(this,8,e)},t.prototype.steam2_ticket=function(){return ui.Message.getField(this,9)},t.prototype.set_steam2_ticket=function(e){ui.Message.setField(this,9,e)},t.prototype.eresult_extended=function(){return ui.Message.getField(this,10)},t.prototype.set_eresult_extended=function(e){ui.Message.setField(this,10,e)},t.prototype.webapi_authenticate_user_nonce=function(){return ui.Message.getField(this,11)},t.prototype.set_webapi_authenticate_user_nonce=function(e){ui.Message.setField(this,11,e)},t.prototype.cell_id_ping_threshold=function(){return ui.Message.getField(this,12)},t.prototype.set_cell_id_ping_threshold=function(e){ui.Message.setField(this,12,e)},t.prototype.use_pics=function(){return ui.Message.getField(this,13)},t.prototype.set_use_pics=function(e){ui.Message.setField(this,13,e)},t.prototype.vanity_url=function(){return ui.Message.getField(this,14)},t.prototype.set_vanity_url=function(e){ui.Message.setField(this,14,e)},t.prototype.client_supplied_steamid=function(){return ui.Message.getField(this,20)},t.prototype.set_client_supplied_steamid=function(e){ui.Message.setField(this,20,e)},t.prototype.ip_country_code=function(){return ui.Message.getField(this,21)},t.prototype.set_ip_country_code=function(e){ui.Message.setField(this,21,e)},t.prototype.parental_settings=function(){return ui.Message.getField(this,22)},t.prototype.set_parental_settings=function(e){ui.Message.setField(this,22,e)},t.prototype.parental_setting_signature=function(){return ui.Message.getField(this,23)},t.prototype.set_parental_setting_signature=function(e){ui.Message.setField(this,23,e)},t.prototype.count_loginfailures_to_migrate=function(){return ui.Message.getField(this,24)},t.prototype.set_count_loginfailures_to_migrate=function(e){ui.Message.setField(this,24,e)},t.prototype.count_disconnects_to_migrate=function(){return ui.Message.getField(this,25)},t.prototype.set_count_disconnects_to_migrate=function(e){ui.Message.setField(this,25,e)},t.prototype.ogs_data_report_time_window=function(){return ui.Message.getField(this,26)},t.prototype.set_ogs_data_report_time_window=function(e){ui.Message.setField(this,26,e)},t.prototype.client_instance_id=function(){return ui.Message.getField(this,27)},t.prototype.set_client_instance_id=function(e){ui.Message.setField(this,27,e)},t.prototype.force_client_update_check=function(){return ui.Message.getField(this,28)},t.prototype.set_force_client_update_check=function(e){ui.Message.setField(this,28,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readInt32());break;case 2:e.set_out_of_game_heartbeat_seconds(t.readInt32());break;case 3:e.set_in_game_heartbeat_seconds(t.readInt32());break;case 4:e.set_public_ip(t.readUint32());break;case 5:e.set_rtime32_server_time(t.readFixed32());break;case 6:e.set_account_flags(t.readUint32());break;case 7:e.set_cell_id(t.readUint32());break;case 8:e.set_email_domain(t.readString());break;case 9:e.set_steam2_ticket(t.readBytes());break;case 10:e.set_eresult_extended(t.readInt32());break;case 11:e.set_webapi_authenticate_user_nonce(t.readString());break;case 12:e.set_cell_id_ping_threshold(t.readUint32());break;case 13:e.set_use_pics(t.readBool());break;case 14:e.set_vanity_url(t.readString());break;case 20:e.set_client_supplied_steamid(t.readFixed64String());break;case 21:e.set_ip_country_code(t.readString());break;case 22:e.set_parental_settings(t.readBytes());break;case 23:e.set_parental_setting_signature(t.readBytes());break;case 24:e.set_count_loginfailures_to_migrate(t.readInt32());break;case 25:e.set_count_disconnects_to_migrate(t.readInt32());break;case 26:e.set_ogs_data_report_time_window(t.readInt32());break;case 27:e.set_client_instance_id(t.readUint64String());break;case 28:e.set_force_client_update_check(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeInt32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeFixed32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeString(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeBytes(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeInt32(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeString(11,i),i=ui.Message.getField(e,12),void 0!==i&&t.writeUint32(12,i),i=ui.Message.getField(e,13),void 0!==i&&t.writeBool(13,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeString(14,i),i=ui.Message.getField(e,20),void 0!==i&&t.writeFixed64String(20,i),i=ui.Message.getField(e,21),void 0!==i&&t.writeString(21,i),i=ui.Message.getField(e,22),void 0!==i&&t.writeBytes(22,i),i=ui.Message.getField(e,23),void 0!==i&&t.writeBytes(23,i),i=ui.Message.getField(e,24),void 0!==i&&t.writeInt32(24,i),i=ui.Message.getField(e,25),void 0!==i&&t.writeInt32(25,i),i=ui.Message.getField(e,26),void 0!==i&&t.writeInt32(26,i),i=ui.Message.getField(e,27),void 0!==i&&t.writeUint64String(27,i),void 0!==(i=ui.Message.getField(e,28))&&t.writeBool(28,i)},t.prototype.getClassName=function(){return"CMsgClientLogonResponse"},t}(ui.Message),Ki=(ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getFieldWithDefault(this,1,2)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeInt32(1,i)},t.prototype.getClassName=function(){return"CMsgClientLoggedOff"},t}(ui.Message)),Ji=(ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.persona_name=function(){return ui.Message.getField(this,1)},t.prototype.set_persona_name=function(e){ui.Message.setField(this,1,e)},t.prototype.ip_country=function(){return ui.Message.getField(this,2)},t.prototype.set_ip_country=function(e){ui.Message.setField(this,2,e)},t.prototype.count_authed_computers=function(){return ui.Message.getField(this,5)},t.prototype.set_count_authed_computers=function(e){ui.Message.setField(this,5,e)},t.prototype.account_flags=function(){return ui.Message.getField(this,7)},t.prototype.set_account_flags=function(e){ui.Message.setField(this,7,e)},t.prototype.facebook_id=function(){return ui.Message.getField(this,8)},t.prototype.set_facebook_id=function(e){ui.Message.setField(this,8,e)},t.prototype.facebook_name=function(){return ui.Message.getField(this,9)},t.prototype.set_facebook_name=function(e){ui.Message.setField(this,9,e)},t.prototype.steamguard_notify_newmachines=function(){return ui.Message.getField(this,14)},t.prototype.set_steamguard_notify_newmachines=function(e){ui.Message.setField(this,14,e)},t.prototype.steamguard_machine_name_user_chosen=function(){return ui.Message.getField(this,15)},t.prototype.set_steamguard_machine_name_user_chosen=function(e){ui.Message.setField(this,15,e)},t.prototype.is_phone_verified=function(){return ui.Message.getField(this,16)},t.prototype.set_is_phone_verified=function(e){ui.Message.setField(this,16,e)},t.prototype.two_factor_state=function(){return ui.Message.getField(this,17)},t.prototype.set_two_factor_state=function(e){ui.Message.setField(this,17,e)},t.prototype.is_phone_identifying=function(){return ui.Message.getField(this,18)},t.prototype.set_is_phone_identifying=function(e){ui.Message.setField(this,18,e)},t.prototype.is_phone_needing_reverify=function(){return ui.Message.getField(this,19)},t.prototype.set_is_phone_needing_reverify=function(e){ui.Message.setField(this,19,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_persona_name(t.readString());break;case 2:e.set_ip_country(t.readString());break;case 5:e.set_count_authed_computers(t.readInt32());break;case 7:e.set_account_flags(t.readUint32());break;case 8:e.set_facebook_id(t.readUint64String());break;case 9:e.set_facebook_name(t.readString());break;case 14:e.set_steamguard_notify_newmachines(t.readBool());break;case 15:e.set_steamguard_machine_name_user_chosen(t.readString());break;case 16:e.set_is_phone_verified(t.readBool());break;case 17:e.set_two_factor_state(t.readUint32());break;case 18:e.set_is_phone_identifying(t.readBool());break;case 19:e.set_is_phone_needing_reverify(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeInt32(5,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeUint64String(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeString(9,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeBool(14,i),i=ui.Message.getField(e,15),void 0!==i&&t.writeString(15,i),i=ui.Message.getField(e,16),void 0!==i&&t.writeBool(16,i),i=ui.Message.getField(e,17),void 0!==i&&t.writeUint32(17,i),i=ui.Message.getField(e,18),void 0!==i&&t.writeBool(18,i),void 0!==(i=ui.Message.getField(e,19))&&t.writeBool(19,i)},t.prototype.getClassName=function(){return"CMsgClientAccountInfo"},t}(ui.Message)),Yi=i("xe4/"),Xi=i("1zkO"),Zi=i("mtWM"),Qi=i.n(Zi),$i=function(){function e(){this.m_CMList={rgCMList:[],rtLastLoaded:0}}return e.prototype.Init=function(e){var t=this;this.m_Storage=e,this.m_promiseLoadFromStorage=this.m_Storage.GetObject(this.GetLocalStorageKey()).then(function(e){return e&&e.rgCMList&&e.rgCMList.length&&e.rgCMList[0].strHost&&Object.assign(t.m_CMList,e),null}).catch(function(){return null})},e.prototype.GetBestCMToConnectTo=function(){var e=this;return this.m_promiseLoadFromStorage.then(function(){var t=(new Date).getTime()/1e3;return!e.m_CMList.rgCMList.length||t-e.m_CMList.rtLastLoaded>604800?e.GetCMListFromWebAPI():e.PingCMs()})},e.prototype.LogCMDisconnected=function(e,t){t||(e.nConnectFailures=(e.nConnectFailures||0)+1,this.WriteCMListToLocalStorage())},e.prototype.BuildCMWebSocketURL=function(e){return"wss://"+this.FixDevHost(e)+"/cmsocket/"},e.prototype.FixDevHost=function(e){if(4==ai.a.EUNIVERSE&&"dev"==ai.a.WEB_UNIVERSE&&e.match(/^127\.0\.0\.1/)){var t=ai.a.WEBAPI_BASE_URL.match(/https?:\/\/([^\/:]*)/);if(t&&t[1])return e.replace(/^127\.0\.0\.1/,t[1])}return e},e.prototype.GetLocalStorageKey=function(){return"CCMList_"+ai.a.EUNIVERSE},e.prototype.WriteCMListToLocalStorage=function(){this.m_Storage.StoreObject(this.GetLocalStorageKey(),this.m_CMList)},e.prototype.GetCMListFromWebAPI=function(){var e=this,t=ai.a.WEBAPI_BASE_URL+"ISteamDirectory/GetCMList/v1/",i="GetCMList_JSONP_"+(new Date).getTime();return t+="?cellid=0",ai.a.IN_MOBILE||(t+="&jsonp="+encodeURIComponent(i)),new Promise(function(n,r){var o=!1,a=window.setTimeout(function(){o=!0,e.m_CMList.rgCMList.length?e.PingCMs().then(n,r):r("Request to load CM list timed out")},1e4),s=function(t){delete window[i];var s=0;t&&t.response&&t.response.serverlist_websockets&&(s=t.response.serverlist_websockets.length||0),s>0&&e.OnCMListResponse(t),o||(window.clearInterval(a),e.PingCMs().then(n,r))};if(ai.a.IN_MOBILE)Qi.a.get(t).then(function(e){console.log(e),s(e.data)});else{window[i]=s;var c=window.document.createElement("script");c.type="text/javascript",c.async=!0,c.src=t,c.onerror=r,window.document.head.appendChild(c)}})},e.prototype.OnCMListResponse=function(e){for(var t=new Map,i=0,n=this.m_CMList.rgCMList;i<n.length;i++){var r=n[i];t.set(r.strHost,r)}if(this.m_CMList={rgCMList:[],rtLastLoaded:(new Date).getTime()/1e3},e.response&&e.response.serverlist_websockets)for(var o=0,a=0,s=e.response.serverlist_websockets;a<s.length;a++){var c=s[a],l=t.get(c)||{};this.m_CMList.rgCMList.push(Object.assign(l,{strHost:c,nPriority:o++}))}},e.prototype.PingCMs=function(){for(var e=this,t=(new Date).getTime()/1e3-18e3,i=[],n=void 0,r=1e4,o=0,a=this.m_CMList.rgCMList;o<a.length;o++){var s=a[o],c=(s.msPing||0)+(s.nCMLoad||0);!c||s.rtLastCheck<t||c>1e4?i.length<20&&i.push(s):c<r&&(n=s,r=c)}if(0==i.length)return n||(n=this.GetCMWithFewestDisconnects()),n?Promise.resolve(n):Promise.reject("No CMs available");var l=!1;return new Promise(function(t,o){var a,s,c="immediate",u=function(i){l||(l=!0,e.WriteCMListToLocalStorage(),a&&window.clearTimeout(a),s&&window.clearTimeout(s),i?t(i):e.m_CMList.rgCMList.length?t(e.GetCMWithFewestDisconnects()):o("No CMs available"))};n&&(e.BCMOkToUse(n,c)||0==i.length)&&u(n),l||(a=window.setTimeout(function(){c="timeout",!l&&n&&e.BCMOkToUse(n,c)&&u(n)},400),s=window.setTimeout(function(){c="seriouslytimeout",u(e.BCMOkToUse(n,c)?n:void 0)},12e3));var d,p=0,m=0,h=function(t){var i=(t.msPing||0)+(t.nCMLoad||0);i<r&&(n=t,r=i,!l&&e.BCMOkToUse(n,c)&&u(n)),!l&&d()||0==--m&&(l||u(e.BCMOkToUse(n,"seriouslytimeout")?n:void 0))};d=function(){if(p<i.length){var t=i[p++];return e.PingCM(t).then(function(){h(t)}),!0}return!1};for(var g=0;g<4;g++)d()&&m++})},e.prototype.GetCMWithFewestDisconnects=function(){if(this.m_CMList.rgCMList.length){for(var e=this.m_CMList.rgCMList[0],t=1;e.nConnectFailures>0&&t<this.m_CMList.rgCMList.length;){var i=this.m_CMList.rgCMList[t++];(!i.nConnectFailures||i.nConnectFailures<e.nConnectFailures)&&(e=i)}return e}},e.prototype.BCMOkToUse=function(e,t){if(!e)return!1;var i=e.msPing+e.nCMLoad;return i<80&&e.msPing<60||"immediate"!=t&&(i<140&&e.msPing<100||"timeout"!=t&&i<350&&e.msPing<275)},e.prototype.PingCM=function(e){var t="https://"+this.FixDevHost(e.strHost)+"/cmping/",i=performance.now();return new Promise(function(n,r){Qi.a.head(t).then(function(t){var r=performance.now()-i,o=t.headers["x-steam-cmload"]?parseInt(t.headers["x-steam-cmload"]):void 0;e.msPing=r,e.nCMLoad=o,e.rtLastCheck=(new Date).getTime()/1e3,n(r)}).catch(function(){e.msPing=1e4,e.nCMLoad=0,e.rtLastCheck=(new Date).getTime()/1e3,n(1e4)})})},e}(),en=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.app_id=function(){return ui.Message.getField(this,1)},t.prototype.set_app_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steam_id_lobby=function(){return ui.Message.getField(this,2)},t.prototype.set_steam_id_lobby=function(e){ui.Message.setField(this,2,e)},t.prototype.steam_id_user_invited=function(){return ui.Message.getField(this,3)},t.prototype.set_steam_id_user_invited=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_app_id(t.readUint32());break;case 2:e.set_steam_id_lobby(t.readFixed64String());break;case 3:e.set_steam_id_user_invited(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeFixed64String(3,i)},t.prototype.getClassName=function(){return"CMsgClientMMSInviteToLobby"},t}(ui.Message)),tn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steam_id_dest=function(){return ui.Message.getField(this,1)},t.prototype.set_steam_id_dest=function(e){ui.Message.setField(this,1,e)},t.prototype.steam_id_src=function(){return ui.Message.getField(this,2)},t.prototype.set_steam_id_src=function(e){ui.Message.setField(this,2,e)},t.prototype.connect_string=function(){return ui.Message.getField(this,3)},t.prototype.set_connect_string=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steam_id_dest(t.readFixed64String());break;case 2:e.set_steam_id_src(t.readFixed64String());break;case 3:e.set_connect_string(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeString(3,i)},t.prototype.getClassName=function(){return"CMsgClientInviteToGame"},t}(ui.Message),nn=(ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.pkts_sent=function(){return ui.Message.getField(this,1)},t.prototype.set_pkts_sent=function(e){ui.Message.setField(this,1,e)},t.prototype.bytes_sent=function(){return ui.Message.getField(this,2)},t.prototype.set_bytes_sent=function(e){ui.Message.setField(this,2,e)},t.prototype.pkts_recv=function(){return ui.Message.getField(this,3)},t.prototype.set_pkts_recv=function(e){ui.Message.setField(this,3,e)},t.prototype.pkts_processed=function(){return ui.Message.getField(this,4)},t.prototype.set_pkts_processed=function(e){ui.Message.setField(this,4,e)},t.prototype.bytes_recv=function(){return ui.Message.getField(this,5)},t.prototype.set_bytes_recv=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_pkts_sent(t.readUint64String());break;case 2:e.set_bytes_sent(t.readUint64String());break;case 3:e.set_pkts_recv(t.readUint64String());break;case 4:e.set_pkts_processed(t.readUint64String());break;case 5:e.set_bytes_recv(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint64String(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint64String(5,i)},t.prototype.getClassName=function(){return"CMsgClientConnectionStats_Stats_UDP"},t}(ui.Message)),rn=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.server_types_available=function(){return ui.Message.getRepeatedWrapperField(this,on,1)},t.prototype.set_server_types_available=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_server_types_available=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,on,t)},t.prototype.server_type_for_auth_services=function(){return ui.Message.getField(this,2)},t.prototype.set_server_type_for_auth_services=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new on;t.readMessage(i,on.deserializeBinaryFromReader),e.add_server_types_available(i);break;case 2:e.set_server_type_for_auth_services(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.server_types_available(),i.length>0&&t.writeRepeatedMessage(1,i,on.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CMsgClientServersAvailable"},t}(ui.Message)),on=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.server=function(){return ui.Message.getField(this,1)},t.prototype.set_server=function(e){ui.Message.setField(this,1,e)},t.prototype.changed=function(){return ui.Message.getField(this,2)},t.prototype.set_changed=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_server(t.readUint32());break;case 2:e.set_changed(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CMsgClientServersAvailable_Server_Types_Available"},t}(ui.Message),an=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.installed=function(){return ui.Message.getField(this,2)},t.prototype.set_installed=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readUint32());break;case 2:e.set_installed(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CMsgClientGetClientAppListResponse_App_DLC"},t}(ui.Message)),sn=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.section_id=function(){return ui.Message.getField(this,1)},t.prototype.set_section_id=function(e){ui.Message.setField(this,1,e)},t.prototype.section_kv=function(){return ui.Message.getField(this,2)},t.prototype.set_section_kv=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_section_id(t.readUint32());break;case 2:e.set_section_kv(t.readBytes());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBytes(2,i)},t.prototype.getClassName=function(){return"CMsgClientAppInfoResponse_App_Section"},t}(ui.Message)),cn=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.id_count=function(){return ui.Message.getField(this,1)},t.prototype.set_id_count=function(e){ui.Message.setField(this,1,e)},t.prototype.Ids=function(){return ui.Message.getRepeatedWrapperField(this,ln,2)},t.prototype.set_Ids=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_Ids=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,ln,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_id_count(t.readInt32());break;case 2:var i=new ln;t.readMessage(i,ln.deserializeBinaryFromReader),e.add_Ids(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=e.Ids(),i.length>0&&t.writeRepeatedMessage(2,i,ln.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgClientAMGetPersonaNameHistory"},t}(ui.Message)),ln=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CMsgClientAMGetPersonaNameHistory_IdInstance"},t}(ui.Message),un=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.responses=function(){return ui.Message.getRepeatedWrapperField(this,dn,2)},t.prototype.set_responses=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_responses=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,dn,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 2:var i=new dn;t.readMessage(i,dn.deserializeBinaryFromReader),e.add_responses(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.responses(),i.length>0&&t.writeRepeatedMessage(2,i,dn.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgClientAMGetPersonaNameHistoryResponse"},t}(ui.Message),dn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getFieldWithDefault(this,1,2)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.names=function(){return ui.Message.getRepeatedWrapperField(this,pn,3)},t.prototype.set_names=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_names=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,pn,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readInt32());break;case 2:e.set_steamid(t.readFixed64String());break;case 3:var i=new pn;t.readMessage(i,pn.deserializeBinaryFromReader),e.add_names(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=e.names(),i.length>0&&t.writeRepeatedMessage(3,i,pn.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgClientAMGetPersonaNameHistoryResponse_NameTableInstance"},t}(ui.Message),pn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.name_since=function(){return ui.Message.getField(this,1)},t.prototype.set_name_since=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_name_since(t.readFixed32());break;case 2:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CMsgClientAMGetPersonaNameHistoryResponse_NameTableInstance_NameInstance"},t}(ui.Message),mn=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[6,7],null),i}return si.d(t,e),t.prototype.steamid_clan=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_clan=function(e){ui.Message.setField(this,1,e)},t.prototype.clan_account_flags=function(){return ui.Message.getField(this,3)},t.prototype.set_clan_account_flags=function(e){ui.Message.setField(this,3,e)},t.prototype.name_info=function(){return ui.Message.getWrapperField(this,hn,4,1)},t.prototype.set_name_info=function(e){ui.Message.setWrapperField(this,4,e)},t.prototype.user_counts=function(){return ui.Message.getWrapperField(this,gn,5,1)},t.prototype.set_user_counts=function(e){ui.Message.setWrapperField(this,5,e)},t.prototype.events=function(){return ui.Message.getRepeatedWrapperField(this,fn,6)},t.prototype.set_events=function(e){ui.Message.setRepeatedWrapperField(this,6,e)},t.prototype.add_events=function(e,t){return ui.Message.addToRepeatedWrapperField(this,6,e,fn,t)},t.prototype.announcements=function(){return ui.Message.getRepeatedWrapperField(this,fn,7)},t.prototype.set_announcements=function(e){ui.Message.setRepeatedWrapperField(this,7,e)},t.prototype.add_announcements=function(e,t){return ui.Message.addToRepeatedWrapperField(this,7,e,fn,t)},t.prototype.chat_room_private=function(){return ui.Message.getField(this,8)},t.prototype.set_chat_room_private=function(e){ui.Message.setField(this,8,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_clan(t.readFixed64String());break;case 3:e.set_clan_account_flags(t.readUint32());break;case 4:var i=new hn;t.readMessage(i,hn.deserializeBinaryFromReader),e.set_name_info(i);break;case 5:var i=new gn;t.readMessage(i,gn.deserializeBinaryFromReader),e.set_user_counts(i);break;case 6:var i=new fn;t.readMessage(i,fn.deserializeBinaryFromReader),e.add_events(i);break;case 7:var i=new fn;t.readMessage(i,fn.deserializeBinaryFromReader),e.add_announcements(i);break;case 8:e.set_chat_room_private(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=e.name_info(),null!=i&&t.writeMessage(4,i,hn.serializeBinaryToWriter),i=e.user_counts(),null!=i&&t.writeMessage(5,i,gn.serializeBinaryToWriter),i=e.events(),i.length>0&&t.writeRepeatedMessage(6,i,fn.serializeBinaryToWriter),i=e.announcements(),i.length>0&&t.writeRepeatedMessage(7,i,fn.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,8))&&t.writeBool(8,i)},t.prototype.getClassName=function(){return"CMsgClientClanState"},t}(ui.Message)),hn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.clan_name=function(){return ui.Message.getField(this,1)},t.prototype.set_clan_name=function(e){ui.Message.setField(this,1,e)},t.prototype.sha_avatar=function(){return ui.Message.getField(this,2)},t.prototype.set_sha_avatar=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_clan_name(t.readString());break;case 2:e.set_sha_avatar(t.readBytes());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBytes(2,i)},t.prototype.getClassName=function(){return"CMsgClientClanState_NameInfo"},t}(ui.Message),gn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.members=function(){return ui.Message.getField(this,1)},t.prototype.set_members=function(e){ui.Message.setField(this,1,e)},t.prototype.online=function(){return ui.Message.getField(this,2)},t.prototype.set_online=function(e){ui.Message.setField(this,2,e)},t.prototype.chatting=function(){return ui.Message.getField(this,3)},t.prototype.set_chatting=function(e){ui.Message.setField(this,3,e)},t.prototype.in_game=function(){return ui.Message.getField(this,4)},t.prototype.set_in_game=function(e){ui.Message.setField(this,4,e)},t.prototype.chat_room_members=function(){return ui.Message.getField(this,5)},t.prototype.set_chat_room_members=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_members(t.readUint32());break;case 2:e.set_online(t.readUint32());break;case 3:e.set_chatting(t.readUint32());break;case 4:e.set_in_game(t.readUint32());break;case 5:e.set_chat_room_members(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CMsgClientClanState_UserCounts"},t}(ui.Message),fn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.gid=function(){return ui.Message.getField(this,1)},t.prototype.set_gid=function(e){ui.Message.setField(this,1,e)},t.prototype.event_time=function(){return ui.Message.getField(this,2)},t.prototype.set_event_time=function(e){ui.Message.setField(this,2,e)},t.prototype.headline=function(){return ui.Message.getField(this,3)},t.prototype.set_headline=function(e){ui.Message.setField(this,3,e)},t.prototype.game_id=function(){return ui.Message.getField(this,4)},t.prototype.set_game_id=function(e){ui.Message.setField(this,4,e)},t.prototype.just_posted=function(){return ui.Message.getField(this,5)},t.prototype.set_just_posted=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_gid(t.readFixed64String());break;case 2:e.set_event_time(t.readUint32());break;case 3:e.set_headline(t.readString());break;case 4:e.set_game_id(t.readFixed64String());break;case 5:e.set_just_posted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeFixed64String(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeBool(5,i)},t.prototype.getClassName=function(){return"CMsgClientClanState_Event"},t}(ui.Message),_n=i("lEUG"),yn=i("Bp66"),vn=function(){function e(){this.m_vecCallbacks=[]}return e.prototype.Register=function(e){var t=this;return this.m_vecCallbacks.push(e),{Unregister:function(){_n.c(t.m_vecCallbacks,e)}}},e.prototype.Dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=this.m_vecCallbacks;i<n.length;i++)n[i].apply(void 0,e)},e.prototype.ClearAllCallbacks=function(){this.m_vecCallbacks=[]},e}(),bn=function(){function e(){}return e.prototype.Schedule=function(e,t){this.IsScheduled()&&this.Cancel(),this.m_fnCallback=t,this.m_schTimer=window.setTimeout(this.ScheduledInternal,e)},e.prototype.IsScheduled=function(){return void 0!==this.m_schTimer},e.prototype.Cancel=function(){this.m_schTimer&&(clearTimeout(this.m_schTimer),this.m_schTimer=void 0)},e.prototype.ScheduledInternal=function(){this.m_schTimer=void 0;var e=this.m_fnCallback;this.m_fnCallback=void 0,e()},si.c([yn.a],e.prototype,"ScheduledInternal",null),e}(),Cn=function(){function e(){this.m_rgListeners=[]}return e.prototype.AddEventListener=function(e,t,i){e.addEventListener(t,i),this.m_rgListeners.push({element:e,type:t,listener:i})},e.prototype.Unregister=function(){for(var e=0,t=this.m_rgListeners;e<t.length;e++){var i=t[e];i.element.removeEventListener(i.type,i.listener)}this.m_rgListeners=[]},e}(),Sn=function(){function e(e){void 0===e&&(e=!1),this.m_bRunOnce=!1,this.m_ClientConnectionCallbacks=new vn,this.m_mapServerTypeCallbacks=new Map,this.m_bRunOnce=e}return e.prototype.RunCallbacks=function(e,t){void 0===e?(this.m_ClientConnectionCallbacks.Dispatch(t),this.m_bRunOnce&&this.m_ClientConnectionCallbacks.ClearAllCallbacks()):this.m_mapServerTypeCallbacks.has(e)&&(this.m_mapServerTypeCallbacks.get(e).Dispatch(),this.m_bRunOnce&&this.m_mapServerTypeCallbacks.delete(e))},e.prototype.RunAllCallbacks=function(e,t){var i=this;this.RunCallbacks(void 0,t),e.forEach(function(e){return i.RunCallbacks(e,t)})},e.prototype.AddCallback=function(e,t){var i=this.m_ClientConnectionCallbacks;return void 0!==t&&(this.m_mapServerTypeCallbacks.has(t)||this.m_mapServerTypeCallbacks.set(t,new vn),i=this.m_mapServerTypeCallbacks.get(t)),i.Register(e)},e}(),Mn=function(){function e(){var e=this;this.m_steamid=new hi.a,this.m_bLoggedOn=!1,this.m_bCompletedInitialConnect=!1,this.m_unAccountFlags=0,this.m_strIPCountry="",this.m_strPersonaName="",this.m_steamidLastLoggedOn=new hi.a,this.m_bConnected=!1,this.m_bConnectionFailed=!1,this.m_setConnectedServers=new Set,this.m_callbacksOnConnectOneTime=new Sn(!0),this.m_callbacksOnConnect=new Sn,this.m_callbacksOnDisconnect=new Sn,this.m_bForceDisconnect=!1,this.m_bPerformedInitialClockAdjustment=!1,this.m_nWallClockDriftMS=0,this.m_nPerfClockServerMSOffset=(new Date).getTime()-performance.now(),this.ClientServersAvailableHandler=s(5501,rn,function(t){for(var i=new Set(e.m_setConnectedServers),n=0,r=t.Body().server_types_available();n<r.length;n++){var o=r[n],a=o.server();void 0!==a&&(e.m_bLoggedOn&&(e.m_setConnectedServers.has(a)&&!o.changed()||(o.changed()&&e.m_setConnectedServers.has(a)&&e.m_callbacksOnDisconnect.RunCallbacks(a),e.m_callbacksOnConnect.RunCallbacks(a),e.m_callbacksOnConnectOneTime.RunCallbacks(a))),e.m_setConnectedServers.add(a),i.delete(a))}i.forEach(function(t){e.m_setConnectedServers.delete(t),e.m_bLoggedOn&&e.m_callbacksOnDisconnect.RunCallbacks(t)})}),this.m_ServiceTransport={SendMsg:function(t,i,n){return i.SetEMsg(151),i.Hdr().set_target_job_name(t),e.SendMsgAndAwaitResponse(i,n)},SendNotification:function(t,i){return i.SetEMsg(151),i.Hdr().set_target_job_name(t),e.Send(i)}},window&&window.addEventListener&&window.addEventListener("unload",function(t){e.ForceDisconnect()})}return e.ConstructClientCMInterface=function(){return new wn},e.ConstructWebCMInterface=function(e){return new Fn(e)},Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamidLastLoggedOn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logged_on",{get:function(){return this.m_bLoggedOn},enumerable:!0,configurable:!0}),e.prototype.BDisconnected=function(){return!this.logged_on&&this.m_steamidLastLoggedOn.BIsValid()},e.prototype.BConnectedToServer=function(e){return void 0===e?this.m_bLoggedOn:this.m_setConnectedServers.has(e)},Object.defineProperty(e.prototype,"has_completed_initial_connect",{get:function(){return this.m_bCompletedInitialConnect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"account_flags",{get:function(){return this.m_unAccountFlags},enumerable:!0,configurable:!0}),e.prototype.GetServiceTransport=function(){return this.m_ServiceTransport},e.prototype.RunWhenLoggedOn=function(e,t){var i=u(e,"RunWhenLoggedOn");this.BConnectedToServer(t)?i():this.m_callbacksOnConnectOneTime.AddCallback(i,t)},e.prototype.AddOnLogonCallback=function(e,t){var i=u(e,"AddOnLogonCallback");return this.BConnectedToServer(t)&&i(),this.m_callbacksOnConnect.AddCallback(i,t)},e.prototype.AddOnDisconnectCallback=function(e,t){var i=d(e,"AddOnDisconnectCallback");this.m_callbacksOnDisconnect.AddCallback(i,t)},e.prototype.ForceDisconnect=function(){this.m_bForceDisconnect=!0,this.Disconnect()},Object.defineProperty(e.prototype,"session",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.Send=function(e){return!!this.BIsConnected()&&(this.DEBUG_LogCMInterfaceActivity(e,"send"),this.SendInternal(e))},e.prototype.BInternalShouldDispatchMessage=function(e){return!0},e.prototype.ResolveAwaitWithTransportError=function(e,t,i,n){var r=fi.Init(t);r.Hdr().set_eresult(2),r.Hdr().set_transport_error(i),n&&r.Hdr().set_error_message(n),e(r)},e.prototype.DispatchMessage=function(e){var t=this;try{if(!this.BInternalShouldDispatchMessage(e))return;if(e.BIsValid()){var i=function(i){i.Hdr().set_jobid_target(e.Hdr().jobid_source()),t.Send(i)};vi.DispatchMsgToHandlers(e,i)||this.DEBUG_LogCMInterfaceActivity(e,"receive",!1)}else console.error("CMInterface RECV could not parse message of type "+n(e.GetEMsg())+" "+e.GetEMsg())}catch(t){console.error("CMInterface RECV exception thrown while processing message of type "+n(e.GetEMsg()),t),e.DEBUG_LogToConsole()}},e.prototype.BIsConnected=function(){return this.m_bConnected},e.prototype.OnConnect=function(){this.m_bConnected=!0,this.m_bConnectionFailed=!1,this.m_bForceDisconnect=!1},e.prototype.OnLoggedOn=function(){this.m_bCompletedInitialConnect=!0,this.InternalAdjustClock(),this.m_callbacksOnConnect.RunAllCallbacks(this.m_setConnectedServers),this.m_callbacksOnConnectOneTime.RunAllCallbacks(this.m_setConnectedServers)},e.prototype.OnDisconnect=function(){this.m_bConnected,this.m_bConnected=!1,this.m_bConnectionFailed=!0,this.m_onConnect=void 0,this.m_steamid=new hi.a,this.m_bLoggedOn=!1,this.m_unAccountFlags=0,this.m_strIPCountry="",this.m_strPersonaName="",this.m_callbacksOnDisconnect.RunAllCallbacks(this.m_setConnectedServers,this.m_bForceDisconnect),this.m_setConnectedServers.clear()},e.prototype.DEBUG_LogCMInterfaceActivity=function(e,t,i){void 0===i&&(i=!0)},e.prototype.DEBUG_LogMessage=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i]},e.prototype.InternalAdjustClock=function(){return si.b(this,void 0,void 0,function(){var e,t=this;return si.e(this,function(i){return e=fi.Init(ji,9802),e.Body().set_client_request_timestamp(Math.floor(performance.now()).toString()),[2,this.SendMsgAndAwaitResponse(e,Wi).then(function(e){var i=performance.now(),n=new Date,r=parseInt(e.Body().client_request_timestamp()),o=parseInt(e.Body().server_timestamp_ms())-(i-r>>1);return o&&!isNaN(o)&&i&&!isNaN(i)?(t.m_bPerformedInitialClockAdjustment=!0,t.m_nPerfClockServerMSOffset=o-i,t.m_nWallClockDriftMS=n.getTime()-o):AssertMsg(!1,"Error computing server time, server echo: "+r+" server time "+o),!0})]})})},e.prototype.BPerformedInitialClockAdjustment=function(){return this.m_bPerformedInitialClockAdjustment},e.prototype.GetServerTimeMS=function(){return performance.now()+this.m_nPerfClockServerMSOffset},e.prototype.GetServerRTime32=function(){return Math.floor((performance.now()+this.m_nPerfClockServerMSOffset)/1e3)},e.prototype.RTime32ToDate=function(e){return new Date(1e3*e+this.m_nWallClockDriftMS)},si.c([_i.observable],e.prototype,"m_steamid",void 0),si.c([_i.observable],e.prototype,"m_bLoggedOn",void 0),si.c([_i.observable],e.prototype,"m_bCompletedInitialConnect",void 0),si.c([_i.observable],e.prototype,"m_unAccountFlags",void 0),si.c([_i.observable],e.prototype,"m_strIPCountry",void 0),si.c([_i.observable],e.prototype,"m_strPersonaName",void 0),si.c([_i.observable],e.prototype,"m_steamidLastLoggedOn",void 0),si.c([_i.observable],e.prototype,"m_bPerformedInitialClockAdjustment",void 0),si.c([_i.action],e.prototype,"DispatchMessage",null),si.c([_i.action],e.prototype,"OnDisconnect",null),e}(),Fn=function(e){function t(t){var i=e.call(this)||this;return i.m_Session={m_bWaitingForLogonResponse:!1,m_nSessionID:0,m_eResultLogonSuccess:2,m_nSessionIDLast:0,m_nClientInstanceID:"0"},i.m_bLoadingCMList=!1,i.m_iCallSeq=1,i.m_mapWaitingCallbacks=new Map,i.m_CMList=new $i,i.LogOnResponseHandler=s(751,qi,function(e){i.m_Session.m_bWaitingForLogonResponse=!1,i.m_Session.m_eResultLogonSuccess=e.Body().eresult(),1==e.Body().eresult()?(i.m_steamid=new hi.a(e.Body().client_supplied_steamid()),i.m_steamidLastLoggedOn=i.m_steamid,i.m_bLoggedOn=!0,i.m_Session.m_nSessionID=e.Hdr().client_sessionid(),i.m_Session.m_nSessionIDLast=i.m_Session.m_nSessionID,i.m_Session.m_nClientInstanceID=e.Body().client_instance_id(),i.OnLoggedOn()):i.Disconnect()}),i.ClientAccountInfoHandler=s(768,Ji,function(e){i.m_unAccountFlags=e.Body().account_flags()||0,i.m_strIPCountry=e.Body().ip_country()||"",i.m_strPersonaName=e.Body().persona_name()||""}),i.m_CMList.Init(t),i}return si.d(t,e),t.prototype.BIsConnected=function(){return this.m_Socket&&this.m_Socket.readyState==WebSocket.OPEN},t.prototype.Connect=function(){var e=this;return this.m_Socket||this.m_bLoadingCMList?this.m_onConnect||(this.m_onConnect=Promise.resolve()):(console.log("Loading CM List"),this.m_bConnected=!1,this.m_bLoggedOn=!1,this.m_Session.m_bWaitingForLogonResponse=!0,this.m_bLoadingCMList=!0,this.m_onConnect=this.m_CMList.GetBestCMToConnectTo().then(function(t){console.log("Connecting socket to host "+t.strHost),e.m_bLoadingCMList=!1;var i=e.m_Socket=new WebSocket(e.m_CMList.BuildCMWebSocketURL(t.strHost));return i.binaryType="arraybuffer",i.onmessage=function(t){var i=new ci(t.data),n=gi.InitHeaderFromPacket(i);1==n.GetEMsg()?e.DecodeAndDispatchMultiMsg(fi.InitFromMsg(pi,n)):e.DispatchMessage(n)},new Promise(function(n,r){i.onopen=function(t){i==e.m_Socket?(e.m_bConnected=!0,e.OnConnect(),n()):r()},i.onerror=function(n){AssertMsg(!1,"Socket connect failed",n),e.m_CMList.LogCMDisconnected(t,e.m_bLoggedOn),i==e.m_Socket&&e.OnDisconnect(),r()}})}).catch(function(){e.m_bLoadingCMList=!1,e.OnDisconnect()})),this.m_onConnect},Object.defineProperty(t.prototype,"session",{get:function(){return this.m_Session},enumerable:!0,configurable:!0}),t.prototype.ClearHeartbeatInterval=function(){this.m_iIntervalHeartbeat&&(window.clearInterval(this.m_iIntervalHeartbeat),this.m_iIntervalHeartbeat=void 0)},t.prototype.ResetHeartbeatInterval=function(){var e=this;this.ClearHeartbeatInterval(),this.m_iIntervalHeartbeat=window.setInterval(function(){var t=fi.Init(Vi,703);e.Send(t)},27e3)},t.prototype.OnConnect=function(){var t=this;e.prototype.OnConnect.call(this),this.m_Socket&&(this.m_Socket.onerror=function(e){},this.ResetHeartbeatInterval(),this.m_Socket.onclose=function(e){t.OnDisconnect()})},t.prototype.Disconnect=function(){this.m_Socket&&this.m_Socket.close()},t.prototype.OnDisconnect=function(){e.prototype.OnDisconnect.call(this),this.m_Socket=void 0,this.ClearHeartbeatInterval()},t.prototype.SendMsgAndAwaitResponse=function(e,t){var i=this;return new Promise(function(n,r){var o=i.m_iCallSeq++;e.Hdr().set_jobid_source(""+o),i.Send(e)?i.m_mapWaitingCallbacks.set(o,{iSeq:o,msgClass:t,fnCallback:n}):i.ResolveAwaitWithTransportError(n,t,2,"Web socket not connected")})},t.prototype.SendInternal=function(e){return!!this.m_Socket&&(this.m_steamid.BIsValid()&&e.Hdr().set_steamid(this.m_steamid.ConvertTo64BitString()),this.m_Session.m_nSessionID&&e.Hdr().set_client_sessionid(this.m_Session.m_nSessionID),this.m_Socket.send(e.Serialize()),300!=e.GetEMsg()&&this.ResetHeartbeatInterval(),!0)},t.prototype.BInternalShouldDispatchMessage=function(e){if(e.BIsValid()&&e.Hdr().jobid_target()&&e.Hdr().jobid_target()!==Xi.a){var t=parseInt(e.Hdr().jobid_target());if(this.m_mapWaitingCallbacks.has(t)){var i=this.m_mapWaitingCallbacks.get(t);if(i){var n=fi.InitFromMsg(i.msgClass,e);this.DEBUG_LogCMInterfaceActivity(n,"receive",!0),n.BIsValid()?i.fnCallback(n):this.ResolveAwaitWithTransportError(i.fnCallback,i.msgClass,102,"Failed to parse response from server"),this.m_mapWaitingCallbacks.delete(t)}return!1}this.DEBUG_LogCMInterfaceActivity(e,"receive",!1)}return!0},t.prototype.DecodeAndDispatchMultiMsg=function(e){var t=e.Body().message_body();if(t){e.Body().size_unzipped()&&(t=Yi.inflate(t));for(var i=new ci(t);i.GetCountBytesRemaining()>0;){var n=i.GetUint32(),r=gi.InitHeaderFromPacket(new ci(i.GetPacket(),i.TellGet(),n));this.DispatchMessage(r),i.SeekGetCurrent(n)}}},si.c([_i.action],t.prototype,"DecodeAndDispatchMultiMsg",null),t}(Mn),wn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_setEMsgHandlers=new Set,t.m_setServiceMethodHandlers=new Set,t}return si.d(t,e),t.prototype.SendMsgAndAwaitResponse=function(e,t){var i=this;return new Promise(function(n,r){if(i.m_hSharedConnection){i.DEBUG_LogCMInterfaceActivity(e,"send");var o=bi.fromByteArray(e.Serialize());SteamClient.SharedConnection.SendMsgAndAwaitResponse(i.m_hSharedConnection,o).then(function(e){var r=new ci(bi.toByteArray(e)),o=fi.InitFromPacket(t,r);i.DEBUG_LogCMInterfaceActivity(o,"receive",!0),o.BIsValid()?n(o):i.ResolveAwaitWithTransportError(n,t,102,"Failed to parse response from server")}).catch(function(e){i.ResolveAwaitWithTransportError(n,t,2,e)})}})},t.prototype.SendInternal=function(e){var t=bi.fromByteArray(e.Serialize());return SteamClient.SharedConnection.SendMsg(this.m_hSharedConnection,t),!0},t.prototype.OnMsgRecvd=function(e){var t=new ci(bi.toByteArray(e)),i=gi.InitHeaderFromPacket(t);this.DispatchMessage(i)},t.prototype.OnLogonInfoChanged=function(e){this.DEBUG_LogMessage("Login info from client: ",e),this.m_bLoggedOn=e.bLoggedOn,ai.a.EUNIVERSE=e.eUniverse,ai.a.MEDIA_CDN_COMMUNITY_URL=e.strCommunityImagesURL,e.strSteamid?(this.m_steamid=new hi.a(e.strSteamid),this.m_steamidLastLoggedOn=this.m_steamid,ai.d.logged_in=!0,ai.d.steamid=e.strSteamid,ai.d.accountid=this.m_steamid.GetAccountID(),ai.d.account_name=e.strAccountName):0!=this.m_steamid.GetAccountID()&&(this.m_steamid=new hi.a),this.m_bLoggedOn?(this.m_bConnected||this.OnConnect(),this.OnLoggedOn()):this.OnDisconnect()},t.prototype.Connect=function(){var e=this;return this.m_hSharedConnection?Promise.resolve():this.m_onConnect=new Promise(function(t,i){SteamClient.SharedConnection.AllocateSharedConnection().then(function(n){n?(e.OnSharedConnectionEstablished(n),e.DEBUG_LogMessage("obtained handle ",e.m_hSharedConnection),e.OnConnect(),t()):i()}).catch(i)})},t.prototype.OnSharedConnectionEstablished=function(e){var t=this;this.m_hSharedConnection=e,this.m_setEMsgHandlers.clear(),this.m_setServiceMethodHandlers.clear(),this.m_hEMsgRegistrationObserver&&this.m_hEMsgRegistrationObserver(),this.m_hEMsgRegistrationObserver=Object(_i.autorun)(function(){if(t.m_hSharedConnection){for(var e=0,i=vi.emsg_list;e<i.length;e++){var n=i[e];t.m_setEMsgHandlers.has(n)||(t.m_setEMsgHandlers.add(n),SteamClient.SharedConnection.SubscribeToEMsg(t.m_hSharedConnection,n))}for(var r=0,o=vi.servicemethod_list;r<o.length;r++){var a=o[r];t.m_setServiceMethodHandlers.has(a)||(t.m_setServiceMethodHandlers.add(a),SteamClient.SharedConnection.SubscribeToClientServiceMethod(t.m_hSharedConnection,a))}}});var i=!1;SteamClient.SharedConnection.RegisterOnLogonInfoChanged(this.m_hSharedConnection,function(e){t.OnLogonInfoChanged(e),i||(i=!0,SteamClient.SharedConnection.RegisterOnMessageReceived(t.m_hSharedConnection,t.OnMsgRecvd.bind(t)))})},t.prototype.OnConnect=function(){e.prototype.OnConnect.call(this)},t.prototype.Disconnect=function(){if(this.m_hSharedConnection){var e=fi.Init(Fi,716);e.Body().set_persona_state(0),e.Body().set_persona_set_by_user(!1),this.Send(e),SteamClient.SharedConnection.Close(this.m_hSharedConnection),this.OnSharedConnectionClosed()}},t.prototype.OnSharedConnectionClosed=function(){e.prototype.OnDisconnect.call(this),this.m_hSharedConnection=void 0,this.m_setEMsgHandlers.clear(),this.m_hEMsgRegistrationObserver&&(this.m_hEMsgRegistrationObserver(),this.m_hEMsgRegistrationObserver=void 0)},si.c([_i.action],t.prototype,"OnLogonInfoChanged",null),t}(Mn),Bn=function(){function e(e){var t=this;this.m_bLogonFailed=!1,this.m_bForcedDisconnect=!1,this.m_bConnectSucceeded=!1,this.m_bEverConnected=!1,this.m_bEverLoggedOn=!1,this.m_cConsecutiveConnectionFailures=0,this.m_bWaitingToReconnect=!1,this.m_rgdtRecentFailures=[],this.m_eWebLogonState=0,this.m_ClientLogoffHandler=a(757,Ki,function(e){34==e.Body().eresult()&&(t.m_eWebLogonState=15,t.m_bWaitingToReconnect=!0)}),this.m_CMInterface=e,this.m_CMInterface.AddOnDisconnectCallback(this.OnCMDisconnected),this.m_CMInterface.AddOnLogonCallback(this.OnCMLoggedOn)}return Object.defineProperty(e.prototype,"web_logon_state",{get:function(){return this.m_eWebLogonState},enumerable:!0,configurable:!0}),e.prototype.BIsInInitialConnect=function(){return 1==this.m_eWebLogonState||5==this.m_eWebLogonState},e.prototype.BIsWaitingToReconnect=function(){return this.m_bWaitingToReconnect},e.prototype.BWillAutoReconnect=function(){return void 0!==this.m_iTimeoutRetryLogon},e.prototype.ClearRetryTimeout=function(){this.m_iTimeoutRetryLogon&&(window.clearTimeout(this.m_iTimeoutRetryLogon),this.m_iTimeoutRetryLogon=void 0)},e.prototype.GetMSUntilNextReconnectAttempt=function(){return this.m_dtNextLogonAttempt?Math.max(0,this.m_dtNextLogonAttempt.getTime()-(new Date).getTime()):0},e.prototype.ReconnectNow=function(){this.m_bWaitingToReconnect&&(this.m_rgdtRecentFailures=[],this.RetryLogin())},e.prototype.OnCMDisconnected=function(e){if(13!=this.m_eWebLogonState&&14!=this.m_eWebLogonState&&15!=this.m_eWebLogonState){if(this.m_bForcedDisconnect)return void this.RetryLogin();for(;this.m_rgdtRecentFailures.length>=24;)this.m_rgdtRecentFailures.shift();if(this.m_rgdtRecentFailures.push(new Date),this.m_bConnectSucceeded&&!this.m_CMInterface.session.m_bWaitingForLogonResponse){var t=this.m_CMInterface.session.m_eResultLogonSuccess;this.m_eWebLogonState=1!=t?this.m_bEverLoggedOn?6:8:10}else this.m_eWebLogonState=this.m_bEverConnected?10:2;this.m_cConsecutiveConnectionFailures++,e||this.RescheduleLogin()}},e.prototype.OnCMLoggedOn=function(){this.m_eWebLogonState=9,this.m_bEverLoggedOn=!0,this.m_cConsecutiveConnectionFailures=0},e.prototype.PerformInitialLogon=function(e){e.token_use_id&&(window.sessionStorage.getItem("token_use_id")==e.token_use_id?(console.log("In-page token has already been consumed, requesting a new token."),e=null):window.sessionStorage.setItem("token_use_id",e.token_use_id)),this.PerformWebLogOn(e)},e.prototype.PerformWebLogOn=function(e){var t=this;if(this.m_bConnectSucceeded=!1,this.m_eWebLogonState=this.m_bEverConnected?3:1,!(e&&e.steamid&&e.token&&e.account_name))return void this.RetryLogin();ai.d.steamid=e.steamid,ai.d.accountid=new hi.a(e.steamid).GetAccountID(),ai.d.account_name=e.account_name;var i=fi.Init(Hi,5514);i.Body().set_account_name(e.account_name),i.Body().set_protocol_version(65580),i.Body().set_qos_level(2),i.Body().set_client_os_type(4294966596),i.Body().set_ui_mode(4),i.Body().set_chat_mode(2),i.Body().set_web_logon_nonce(e.token),i.Hdr().set_steamid(e.steamid),this.m_CMInterface.session.m_nSessionIDLast&&i.Body().set_last_session_id(this.m_CMInterface.session.m_nSessionIDLast>>>0),i.Body().set_client_instance_id(this.m_CMInterface.session.m_nClientInstanceID),this.m_CMInterface.Connect().then(function(){ai.d.logged_in=!0,t.m_bConnectSucceeded=!0,t.m_bEverConnected=!0,t.m_eWebLogonState=t.m_bEverLoggedOn?7:5,t.m_CMInterface.Send(i)})},e.prototype.RetryLogin=function(){var e=this;if(this.m_bWaitingToReconnect=!1,this.ClearRetryTimeout(),this.m_CMInterface.BIsConnected()&&this.m_bConnectSucceeded)return this.m_bForcedDisconnect=!0,void this.m_CMInterface.ForceDisconnect();AssertMsg(11!=this.m_eWebLogonState,"RetryLogin called while request in flight"),11!=this.m_eWebLogonState&&(this.m_eWebLogonState=11,this.m_CMInterface.Connect(),Qi.a.get(ai.a.TOKEN_URL,{method:"POST"}).then(function(t){var i=t.data;if(i.logged_in&&i.steamid&&i.token&&i.account_name){var n=new hi.a(i.steamid);e.m_bEverLoggedOn&&e.m_CMInterface.steamid.GetAccountID()!=n.GetAccountID()?(e.m_eWebLogonState=14,e.m_CMInterface.ForceDisconnect()):e.PerformWebLogOn(i)}else e.m_eWebLogonState=13,e.m_CMInterface.ForceDisconnect()}).catch(function(t){e.m_eWebLogonState=12,e.RescheduleLogin()}))},e.prototype.RescheduleLogin=function(){for(var e=this,t=0,i=0,n=new Date,r=0,o=this.m_rgdtRecentFailures;r<o.length;r++){var a=o[r];a.getTime()>=n.getTime()-6e4?t++:a.getTime()>=n.getTime()-36e5&&i++}i+=t;var s=this.m_cConsecutiveConnectionFailures+t;if(s<=2)this.RetryLogin();else if(s<=10&&i<=10){var c=5e3*(s-2);this.m_dtNextLogonAttempt=new Date((new Date).getTime()+c),this.m_bWaitingToReconnect=!0,this.ClearRetryTimeout(),this.m_iTimeoutRetryLogon=window.setTimeout(function(){e.m_dtNextLogonAttempt=void 0,e.RetryLogin()},c)}else this.m_bWaitingToReconnect=!0},si.c([_i.observable],e.prototype,"m_eWebLogonState",void 0),si.c([yn.a],e.prototype,"OnCMDisconnected",null),si.c([yn.a],e.prototype,"OnCMLoggedOn",null),e}(),On=i("wLXD"),In=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.appids=function(){return ui.Message.getField(this,1)},t.prototype.set_appids=function(e){ui.Message.setField(this,1,e)},t.prototype.add_appids=function(e,t){ui.Message.addToRepeatedField(this,1,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.add_appids(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeRepeatedInt32(1,i)},t.prototype.getClassName=function(){return"CCommunity_GetApps_Request"},t}(ui.Message),Rn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.apps=function(){return ui.Message.getRepeatedWrapperField(this,mi,1)},t.prototype.set_apps=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_apps=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,mi,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new mi;t.readMessage(i,mi.deserializeBinaryFromReader),e.add_apps(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.apps(),i.length>0&&t.writeRepeatedMessage(1,i,mi.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CCommunity_GetApps_Response"},t}(ui.Message),En=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.language=function(){return ui.Message.getField(this,2)},t.prototype.set_language=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readInt32());break;case 2:e.set_language(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CCommunity_GetAppRichPresenceLocalization_Request"},t}(ui.Message),Tn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.token_lists=function(){return ui.Message.getRepeatedWrapperField(this,Dn,2)},t.prototype.set_token_lists=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_token_lists=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,Dn,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readInt32());break;case 2:var i=new Dn;t.readMessage(i,Dn.deserializeBinaryFromReader),e.add_token_lists(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=e.token_lists(),i.length>0&&t.writeRepeatedMessage(2,i,Dn.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CCommunity_GetAppRichPresenceLocalization_Response"},t}(ui.Message),kn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.name=function(){return ui.Message.getField(this,1)},t.prototype.set_name=function(e){ui.Message.setField(this,1,e)},t.prototype.value=function(){return ui.Message.getField(this,2)},t.prototype.set_value=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_name(t.readString());break;case 2:e.set_value(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CCommunity_GetAppRichPresenceLocalization_Response_Token"},t}(ui.Message),Dn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.language=function(){return ui.Message.getField(this,1)},t.prototype.set_language=function(e){ui.Message.setField(this,1,e)},t.prototype.tokens=function(){return ui.Message.getRepeatedWrapperField(this,kn,2)},t.prototype.set_tokens=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_tokens=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,kn,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_language(t.readString());break;case 2:var i=new kn;t.readMessage(i,kn.deserializeBinaryFromReader),e.add_tokens(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=e.tokens(),i.length>0&&t.writeRepeatedMessage(2,i,kn.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CCommunity_GetAppRichPresenceLocalization_Response_TokenList"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Community.GetApps#1",t,Rn)}function i(e,t){return e.SendMsg("Community.GetAppRichPresenceLocalization#1",t,Tn)}e.GetApps=t,e.GetAppRichPresenceLocalization=i}(oi||(oi={}));var Gn,Nn=function(){function e(){}return e}(),Ln={"76561198846304683":"#Broadcast_EnglishMain"},An=730;!function(e){e[e.Terminator=0]="Terminator",e[e.MatchStarted=1]="MatchStarted",e[e.GameStateChanged=2]="GameStateChanged",e[e.TowerDeath=3]="TowerDeath",e[e.BarracksDeath=4]="BarracksDeath",e[e.AncientDeath=5]="AncientDeath",e[e.RoshanDeath=6]="RoshanDeath",e[e.HeroDeath=7]="HeroDeath",e[e.TeamFight=8]="TeamFight",e[e.FirstBlood=9]="FirstBlood"}(Gn||(Gn={}));var Pn;!function(e){e[e.INIT=0]="INIT",e[e.WAIT_FOR_PLAYERS_TO_LOAD=1]="WAIT_FOR_PLAYERS_TO_LOAD",e[e.HERO_SELECTION=2]="HERO_SELECTION",e[e.STRATEGY_TIME=3]="STRATEGY_TIME",e[e.PRE_GAME=4]="PRE_GAME",e[e.GAME_IN_PROGRESS=5]="GAME_IN_PROGRESS",e[e.POST_GAME=6]="POST_GAME",e[e.DISCONNECT=7]="DISCONNECT",e[e.TEAM_SHOWCASE=8]="TEAM_SHOWCASE",e[e.CUSTOM_GAME_SETUP=9]="CUSTOM_GAME_SETUP",e[e.WAIT_FOR_MAP_TO_LOAD=10]="WAIT_FOR_MAP_TO_LOAD",e[e.LAST=11]="LAST"}(Pn||(Pn={}));var xn,zn=function(){function e(){this.m_nLastUpdated=Date.now(),this.m_mapLanguages=_i.observable.map()}return e.prototype.GetTokenList=function(e){return this.m_mapLanguages.has(e)?this.m_mapLanguages.get(e):null},e}(),Un="fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb",Vn=function(){function e(e){this.m_bInitialized=!1,this.m_ePersonaState=0,this.m_unGamePlayedAppID=0,this.m_gameid="0",this.m_unPersonaStateFlags=0,this.m_strPlayerName="",this.m_strAvatarHash=Un,this.m_rtLastSeenOnline=0,this.m_strGameExtraInfo="",this.m_unGameServerIP=0,this.m_unGameServerPort=0,this.m_game_lobby_id="",this.m_mapRichPresence=_i.observable.map(),this.m_bNameInitialized=!1,this.m_bStatusInitialized=!1,this.m_steamid=e}return e.prototype.Reset=function(){this.m_ePersonaState=0,this.m_unGamePlayedAppID=0,this.m_gameid="0",this.m_strGameExtraInfo="",this.m_unGameServerIP=0,this.m_unGameServerPort=0,this.m_game_lobby_id="",this.m_mapRichPresence.clear(),this.m_broadcastId=void 0,this.m_broadcastAccountId=void 0,this.m_broadcastAppId=void 0,this.m_broadcastViewerCount=void 0,this.m_strBroadcastTitle=void 0},e.prototype.UpdateFromMessage=function(e,t){if(0!=(1&e)&&(this.m_bStatusInitialized=!0,this.m_ePersonaState=t.persona_state()||0,0!=this.m_ePersonaState?(this.m_unGamePlayedAppID=t.game_played_app_id()||0,this.m_gameid=t.gameid()||"0",this.m_strGameExtraInfo=t.game_name()||"",this.m_unGameServerIP=t.game_server_ip()||0,this.m_unGameServerPort=t.game_server_port()||0,this.m_game_lobby_id=t.game_lobby_id()||""):this.Reset()),0!=(2&e)&&(this.m_bNameInitialized=!0,this.m_strPlayerName=t.player_name()||""),0!=(64&e)&&(this.m_rtLastSeenOnline=t.last_seen_online()||t.last_logoff()||0),0!=(16&e)){var i=t.avatar_hash(),n=!0;if(i){for(var o=0;o<i.length&&n;o++)n=!i[o];this.m_strAvatarHash=n?Un:r(i)}}if(t.persona_state_flags()&&(this.m_unPersonaStateFlags=t.persona_state_flags()),0!=(4096&e)){this.m_mapRichPresence.clear();for(var a=0,s=t.rich_presence();a<s.length;a++){var c=s[a];this.m_mapRichPresence.set(c.key().toLowerCase(),c.value())}}if(0!=(8192&e)&&(this.m_broadcastId=t.broadcast_id()),0!=(16384&e)){var l=hi.a.InitFromAccountID(t.watching_broadcast_accountid()),u=l.ConvertTo64BitString();"public"!=ai.a.WEB_UNIVERSE||Ln[u]?(this.m_broadcastAccountId=t.watching_broadcast_accountid(),this.m_broadcastAppId=t.watching_broadcast_appid(),this.m_broadcastViewerCount=t.watching_broadcast_viewers(),this.m_strBroadcastTitle=t.watching_broadcast_title(),l.BIsValid()&&(this.m_broadcastAppId||(this.m_broadcastAppId=An),this.m_strBroadcastTitle="CS:GO Major 2018")):(this.m_broadcastAccountId=0,this.m_broadcastAppId=0,this.m_broadcastViewerCount=0,this.m_strBroadcastTitle="")}this.m_bNameInitialized&&this.m_bStatusInitialized&&(this.m_bInitialized=!0)},e.prototype.GetAccountID=function(){return this.m_steamid.GetAccountID()},Object.defineProperty(e.prototype,"is_online",{get:function(){return 0!=this.m_ePersonaState&&7!=this.m_ePersonaState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_ingame",{get:function(){return this.is_online&&(0!=this.m_unGamePlayedAppID||"0"!=this.m_gameid)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_in_nonsteam_game",{get:function(){return 0==this.m_unGamePlayedAppID&&"0"!=this.m_gameid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_in_joinable_game",{get:function(){return this.has_joinable_game_flag||this.is_in_valid_lobby||this.has_server_ip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_joinable_game_flag",{get:function(){return 0!=(2&this.m_unPersonaStateFlags)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_in_valid_lobby",{get:function(){return this.m_game_lobby_id&&"0"!=this.m_game_lobby_id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_server_ip",{get:function(){return 0!=this.m_unGameServerIP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_awayOrSnooze",{get:function(){return 3==this.m_ePersonaState||4==this.m_ePersonaState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last_seen_online",{get:function(){return this.m_rtLastSeenOnline},enumerable:!0,configurable:!0}),e.prototype.ClearStateOnDisconnect=function(){0!=this.m_ePersonaState&&this.Reset()},Object.defineProperty(e.prototype,"current_game_name",{get:function(){return this.m_strGameExtraInfo?this.m_strGameExtraInfo:this.m_unGamePlayedAppID?wd.AppInfoStore.GetAppInfo(this.m_unGamePlayedAppID).m_strName:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current_game_icon_url",{get:function(){return this.m_unGamePlayedAppID?wd.AppInfoStore.GetAppInfo(this.m_unGamePlayedAppID).icon_url:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_appinfo_ready",{get:function(){return!this.m_unGamePlayedAppID||wd.AppInfoStore.GetAppInfo(this.m_unGamePlayedAppID).m_bInitialized},enumerable:!0,configurable:!0}),e.prototype.GetLocalizedRichPresenceDisplayString=function(e){var t=this.m_mapRichPresence.get("steam_display"),i=ai.a.LANGUAGE;return p(t,e.GetTokenList(i),"english"!=i?e.GetTokenList("english"):null,this.m_unGamePlayedAppID,this.m_mapRichPresence)},Object.defineProperty(e.prototype,"current_game_rich_presence",{get:function(){if(this.m_mapRichPresence.has("steam_display")){var e=wd.AppInfoStore.GetRichPresenceLoc(this.m_unGamePlayedAppID);if(e)return this.GetLocalizedRichPresenceDisplayString(e)}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_group",{get:function(){return this.m_mapRichPresence.has("steam_player_group")?this.m_mapRichPresence.get("steam_player_group"):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_group_size",{get:function(){return this.m_mapRichPresence.has("steam_player_group_size")?Number.parseInt(this.m_mapRichPresence.get("steam_player_group_size")):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"online_state",{get:function(){return this.is_online?this.is_ingame?"in-game":IsFeatureBroadcastEnabled()&&this.m_broadcastAccountId?"watchingbroadcast":"online":"offline"},enumerable:!0,configurable:!0}),e.prototype.BHasAvatarSet=function(){return this.m_strAvatarHash!=Un},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return h(this.m_strAvatarHash)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return h(this.m_strAvatarHash,"_medium")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return h(this.m_strAvatarHash,"_full")},enumerable:!0,configurable:!0}),si.c([_i.observable],e.prototype,"m_bInitialized",void 0),si.c([_i.observable],e.prototype,"m_ePersonaState",void 0),si.c([_i.observable],e.prototype,"m_unGamePlayedAppID",void 0),si.c([_i.observable],e.prototype,"m_gameid",void 0),si.c([_i.observable],e.prototype,"m_unPersonaStateFlags",void 0),si.c([_i.observable],e.prototype,"m_strPlayerName",void 0),si.c([_i.observable],e.prototype,"m_strAvatarHash",void 0),si.c([_i.observable],e.prototype,"m_rtLastSeenOnline",void 0),si.c([_i.observable],e.prototype,"m_strGameExtraInfo",void 0),si.c([_i.observable],e.prototype,"m_unGameServerIP",void 0),si.c([_i.observable],e.prototype,"m_unGameServerPort",void 0),si.c([_i.observable],e.prototype,"m_game_lobby_id",void 0),si.c([_i.observable],e.prototype,"m_broadcastId",void 0),si.c([_i.observable],e.prototype,"m_broadcastAccountId",void 0),si.c([_i.observable],e.prototype,"m_broadcastAppId",void 0),si.c([_i.observable],e.prototype,"m_broadcastViewerCount",void 0),si.c([_i.observable],e.prototype,"m_strBroadcastTitle",void 0),si.c([_i.computed],e.prototype,"current_game_name",null),si.c([_i.computed],e.prototype,"current_game_icon_url",null),si.c([_i.computed],e.prototype,"current_game_rich_presence",null),si.c([_i.computed],e.prototype,"online_state",null),si.c([_i.computed],e.prototype,"avatar_url",null),si.c([_i.computed],e.prototype,"avatar_url_medium",null),si.c([_i.computed],e.prototype,"avatar_url_full",null),e}(),jn=function(){function e(e){this.m_bInitialized=!1,this.m_bLocalUserOwnsApp=void 0,this.m_unAppID=e}return Object.defineProperty(e.prototype,"appid",{get:function(){return this.m_unAppID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_valid",{get:function(){return this.m_bInitialized&&!!this.m_strName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header_image_url",{get:function(){return ai.a.MEDIA_CDN_URL+"steam/apps/"+this.m_unAppID+"/header.jpg"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return this.BuildAppURL(this.m_strIconURL,"061818254b2c99ac49e6626adb128ed1282a392f")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logo_url",{get:function(){return this.BuildAppURL(this.m_strLogoURL,"338200c5d6c4d9bdcf6632642a2aeb591fb8a5c2.gif")},enumerable:!0,configurable:!0}),e.prototype.BuildAppURL=function(e,t){return e?ai.a.MEDIA_CDN_COMMUNITY_URL+"images/apps/"+this.appid+"/"+e+".jpg":h(t)},si.c([_i.observable],e.prototype,"m_bInitialized",void 0),si.c([_i.observable],e.prototype,"m_strName",void 0),si.c([_i.observable],e.prototype,"m_strIconURL",void 0),si.c([_i.observable],e.prototype,"m_strLogoURL",void 0),si.c([_i.observable],e.prototype,"m_bLocalUserOwnsApp",void 0),si.c([_i.computed],e.prototype,"icon_url",null),si.c([_i.computed],e.prototype,"logo_url",null),e}(),Wn=function(){function e(){this.m_mapAppInfo=new Map,this.m_mapRichPresenceLoc=_i.observable.map(),this.m_cAppInfoRequestsInFlight=0,this.m_setPendingAppInfo=new Set,this.m_fnCallbackOnAppInfoLoaded=new vn,ai.a.IN_CLIENT}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.BHavePendingAppInfoRequests=function(){return this.m_setPendingAppInfo.size>0||this.m_cAppInfoRequestsInFlight>0},e.prototype.RegisterCallbackOnLoad=function(e){if(!this.BHavePendingAppInfoRequests())return AssertMsg(!1,"Registering for callback on appinfo load, but nothing queued"),void e();this.m_fnCallbackOnAppInfoLoaded.Register(e)},e.prototype.GetAppInfo=function(e){AssertMsg(this.m_CMInterface,"CAppInfoStore.GetAppInfo called before Init");var t=this.m_mapAppInfo.get(e);return t||(t=new jn(e),this.m_mapAppInfo.set(e,t),this.QueueAppInfoRequest(t)),t},e.prototype.QueueAppInfoRequest=function(e){this.m_setPendingAppInfo.add(e.appid),void 0===this.m_iDelayLoadAppInfo&&(this.m_iDelayLoadAppInfo=SetBackgroundTimeout(this.LoadAppInfo.bind(this),25))},e.prototype.LoadAppInfo=function(){var e=this;this.m_iDelayLoadAppInfo=void 0,this.m_CMInterface.RunWhenLoggedOn(function(){var t=Array.from(e.m_setPendingAppInfo);if(e.m_setPendingAppInfo.clear(),t.length){e.m_cAppInfoRequestsInFlight++;var i=fi.Init(In);i.Body().set_appids(t),oi.GetApps(e.m_CMInterface.GetServiceTransport(),i).then(function(t){if(1==t.GetEResult())for(var i=0,n=t.Body().apps();i<n.length;i++){var r=n[i],o=e.m_mapAppInfo.get(r.appid());AssertMsg(o,"Got appinfo response for unrequest appid "+r.appid()),o&&e.OnAppInfoUpdate(o,r)}0==--e.m_cAppInfoRequestsInFlight&&0==e.m_setPendingAppInfo.size&&(e.m_fnCallbackOnAppInfoLoaded.Dispatch(),e.m_fnCallbackOnAppInfoLoaded.ClearAllCallbacks())})}})},e.prototype.OnAppInfoUpdate=function(e,t){e.m_bInitialized=!0,e.m_strName=t.name(),e.m_strIconURL=t.icon(),e.m_strLogoURL=t.logo()},e.prototype.GetRichPresenceLoc=function(e){if(this.m_mapRichPresenceLoc.has(e.toString())){var t=this.m_mapRichPresenceLoc.get(e.toString());return t.m_nLastUpdated+72e5<Date.now()&&this.QueueRichPresenceLocRequest(t,e),this.m_mapRichPresenceLoc.get(e.toString())}var i=new zn;return this.m_mapRichPresenceLoc.set(e.toString(),i),this.QueueRichPresenceLocRequest(i,e),i},e.prototype.OnRichPresenceLocUpdate=function(e,t,i){e.m_nLastUpdated=Date.now();for(var n=0,r=i;n<r.length;n++){var o=r[n],a=o.language(),s=e.m_mapLanguages.get(a);s?s.clear():(e.m_mapLanguages.set(a,new Map),s=e.m_mapLanguages.get(a));for(var c=0,l=o.tokens();c<l.length;c++){var u=l[c];s.set(u.name().toLowerCase(),u.value())}}},e.prototype.QueueRichPresenceLocRequest=function(e,t){var i=this;this.m_CMInterface.RunWhenLoggedOn(function(){var n=fi.Init(En);n.Body().set_appid(t),n.Body().set_language(ai.a.LANGUAGE),oi.GetAppRichPresenceLocalization(i.m_CMInterface.GetServiceTransport(),n).then(function(n){1==n.GetEResult()&&i.OnRichPresenceLocUpdate(e,t,n.Body().token_lists())})})},si.c([_i.action],e.prototype,"OnAppInfoUpdate",null),si.c([_i.action],e.prototype,"OnRichPresenceLocUpdate",null),e}(),Hn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChat_RequestFriendPersonaStates_Request"},t}(ui.Message),qn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChat_RequestFriendPersonaStates_Response"},t}(ui.Message),Kn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.message=function(){return ui.Message.getField(this,1)},t.prototype.set_message=function(e){ui.Message.setField(this,1,e)},t.prototype.string_param=function(){return ui.Message.getField(this,2)},t.prototype.set_string_param=function(e){ui.Message.setField(this,2,e)},t.prototype.accountid_param=function(){return ui.Message.getField(this,3)},t.prototype.set_accountid_param=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_message(t.readEnum());break;case 2:e.set_string_param(t.readString());break;case 3:e.set_accountid_param(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeEnum(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"ServerMessage"},t}(ui.Message),Jn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[4],null),i}return si.d(t,e),t.prototype.steamid_partner=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid_invited=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid_invited=function(e){ui.Message.setField(this,2,e)},t.prototype.name=function(){return ui.Message.getField(this,3)},t.prototype.set_name=function(e){ui.Message.setField(this,3,e)},t.prototype.steamid_invitees=function(){return ui.Message.getField(this,4)},t.prototype.set_steamid_invitees=function(e){ui.Message.setField(this,4,e)},t.prototype.add_steamid_invitees=function(e,t){ui.Message.addToRepeatedField(this,4,e,t)},t.prototype.watching_broadcast_accountid=function(){return ui.Message.getField(this,6)},t.prototype.set_watching_broadcast_accountid=function(e){ui.Message.setField(this,6,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_partner(t.readFixed64String());break;case 2:e.set_steamid_invited(t.readFixed64String());break;case 3:e.set_name(t.readString());break;case 4:e.add_steamid_invitees(t.readFixed64String());break;case 6:e.set_watching_broadcast_accountid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeRepeatedFixed64String(4,i),void 0!==(i=ui.Message.getField(e,6))&&t.writeUint32(6,i)},t.prototype.getClassName=function(){return"CChatRoom_CreateChatRoomGroup_Request"},t}(ui.Message),Yn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.state=function(){return ui.Message.getWrapperField(this,Pr,2,1)},t.prototype.set_state=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.user_chat_state=function(){return ui.Message.getWrapperField(this,xr,3,1)},t.prototype.set_user_chat_state=function(e){ui.Message.setWrapperField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:var i=new Pr;t.readMessage(i,Pr.deserializeBinaryFromReader),e.set_state(i);break;case 3:var i=new xr;t.readMessage(i,xr.deserializeBinaryFromReader),e.set_user_chat_state(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=e.state(),null!=i&&t.writeMessage(2,i,Pr.serializeBinaryToWriter),null!=(i=e.user_chat_state())&&t.writeMessage(3,i,xr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_CreateChatRoomGroup_Response"},t}(ui.Message),Xn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CChatRoom_RenameChatRoomGroup_Request"},t}(ui.Message),Zn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.name=function(){return ui.Message.getField(this,1)},t.prototype.set_name=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CChatRoom_RenameChatRoomGroup_Response"},t}(ui.Message),Qn=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CChatRoom_SaveChatRoomGroup_Request"},t}(ui.Message),$n=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_SaveChatRoomGroup_Response"},t}(ui.Message),er=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.tagline=function(){return ui.Message.getField(this,2)},t.prototype.set_tagline=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_tagline(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CChatRoom_SetChatRoomGroupTagline_Request"},t}(ui.Message),tr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_SetChatRoomGroupTagline_Response"},t}(ui.Message),ir=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.avatar_sha=function(){return ui.Message.getField(this,2)},t.prototype.set_avatar_sha=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_avatar_sha(t.readBytes());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBytes(2,i)},t.prototype.getClassName=function(){return"CChatRoom_SetChatRoomGroupAvatar_Request"},t}(ui.Message),nr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_SetChatRoomGroupAvatar_Response"},t}(ui.Message),rr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.watching_broadcast_accountid=function(){return ui.Message.getField(this,2)},t.prototype.set_watching_broadcast_accountid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_watching_broadcast_accountid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CChatRoom_SetChatRoomGroupWatchingBroadcast_Request"},t}(ui.Message),or=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_SetChatRoomGroupWatchingBroadcast_Response"},t}(ui.Message),ar=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.expiration=function(){return ui.Message.getField(this,3)},t.prototype.set_expiration=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_steamid(t.readFixed64String());break;case 3:e.set_expiration(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeInt32(3,i)},t.prototype.getClassName=function(){return"CChatRoom_MuteUser_Request"},t}(ui.Message),sr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_MuteUser_Response"},t}(ui.Message),cr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.expiration=function(){return ui.Message.getField(this,3)},t.prototype.set_expiration=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_steamid(t.readFixed64String());break;case 3:e.set_expiration(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeInt32(3,i)},t.prototype.getClassName=function(){return"CChatRoom_KickUser_Request"},t}(ui.Message),lr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_KickUser_Response"},t}(ui.Message),ur=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.ban_state=function(){return ui.Message.getField(this,3)},t.prototype.set_ban_state=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_steamid(t.readFixed64String());break;case 3:e.set_ban_state(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CChatRoom_SetUserBanState_Request"},t}(ui.Message),dr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_SetUserBanState_Response"},t}(ui.Message),pr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_RevokeInvite_Request"},t}(ui.Message),mr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_RevokeInvite_Response"},t}(ui.Message),hr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.role_id=function(){return ui.Message.getField(this,1)},t.prototype.set_role_id=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,3)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_role_id(t.readUint64String());break;case 2:e.set_name(t.readString());break;case 3:e.set_ordinal(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CChatRole"},t}(ui.Message),gr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.role_id=function(){return ui.Message.getField(this,1)},t.prototype.set_role_id=function(e){ui.Message.setField(this,1,e)},t.prototype.can_create_rename_delete_channel=function(){return ui.Message.getField(this,2)},t.prototype.set_can_create_rename_delete_channel=function(e){ui.Message.setField(this,2,e)},t.prototype.can_kick=function(){return ui.Message.getField(this,3)},t.prototype.set_can_kick=function(e){ui.Message.setField(this,3,e)},t.prototype.can_ban=function(){return ui.Message.getField(this,4)},t.prototype.set_can_ban=function(e){ui.Message.setField(this,4,e)},t.prototype.can_invite=function(){return ui.Message.getField(this,5)},t.prototype.set_can_invite=function(e){ui.Message.setField(this,5,e)},t.prototype.can_change_tagline_avatar_name=function(){return ui.Message.getField(this,6)},t.prototype.set_can_change_tagline_avatar_name=function(e){ui.Message.setField(this,6,e)},t.prototype.can_chat=function(){return ui.Message.getField(this,7)},t.prototype.set_can_chat=function(e){ui.Message.setField(this,7,e)},t.prototype.can_view_history=function(){return ui.Message.getField(this,8)},t.prototype.set_can_view_history=function(e){ui.Message.setField(this,8,e)},t.prototype.can_change_group_roles=function(){return ui.Message.getField(this,9)},t.prototype.set_can_change_group_roles=function(e){ui.Message.setField(this,9,e)},t.prototype.can_change_user_roles=function(){return ui.Message.getField(this,10)},t.prototype.set_can_change_user_roles=function(e){ui.Message.setField(this,10,e)},t.prototype.can_mention_all=function(){return ui.Message.getField(this,11)},t.prototype.set_can_mention_all=function(e){ui.Message.setField(this,11,e)},t.prototype.can_set_watching_broadcast=function(){return ui.Message.getField(this,12)},t.prototype.set_can_set_watching_broadcast=function(e){ui.Message.setField(this,12,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_role_id(t.readUint64String());break;case 2:e.set_can_create_rename_delete_channel(t.readBool());break;case 3:e.set_can_kick(t.readBool());break;case 4:e.set_can_ban(t.readBool());break;case 5:e.set_can_invite(t.readBool());break;case 6:e.set_can_change_tagline_avatar_name(t.readBool());break;case 7:e.set_can_chat(t.readBool());break;case 8:e.set_can_view_history(t.readBool());break;case 9:e.set_can_change_group_roles(t.readBool());break;case 10:e.set_can_change_user_roles(t.readBool());break;case 11:e.set_can_mention_all(t.readBool());break;case 12:e.set_can_set_watching_broadcast(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBool(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeBool(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBool(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBool(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeBool(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeBool(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeBool(11,i),void 0!==(i=ui.Message.getField(e,12))&&t.writeBool(12,i)},t.prototype.getClassName=function(){return"CChatRoleActions"},t}(ui.Message),fr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CChatRoom_CreateRole_Request"},t}(ui.Message),_r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.actions=function(){return ui.Message.getWrapperField(this,gr,2,1)},t.prototype.set_actions=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 2:var i=new gr;t.readMessage(i,gr.deserializeBinaryFromReader),e.set_actions(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.actions())&&t.writeMessage(2,i,gr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_CreateRole_Response"},t}(ui.Message),yr=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.roles=function(){return ui.Message.getRepeatedWrapperField(this,hr,1)},t.prototype.set_roles=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_roles=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,hr,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new hr;t.readMessage(i,hr.deserializeBinaryFromReader),e.add_roles(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.roles(),i.length>0&&t.writeRepeatedMessage(1,i,hr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetRoles_Response"},t}(ui.Message)),vr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.role_id=function(){return ui.Message.getField(this,2)},t.prototype.set_role_id=function(e){ui.Message.setField(this,2,e)},t.prototype.name=function(){return ui.Message.getField(this,3)},t.prototype.set_name=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_role_id(t.readUint64String());break;case 3:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeString(3,i)},t.prototype.getClassName=function(){return"CChatRoom_RenameRole_Request"},t}(ui.Message),br=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_RenameRole_Response"},t}(ui.Message),Cr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.role_id=function(){return ui.Message.getField(this,2)},t.prototype.set_role_id=function(e){ui.Message.setField(this,2,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,3)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_role_id(t.readUint64String());break;case 3:e.set_ordinal(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CChatRoom_ReorderRole_Request"},t}(ui.Message),Sr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_ReorderRole_Response"},t}(ui.Message),Mr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.role_id=function(){return ui.Message.getField(this,2)},t.prototype.set_role_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_role_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_DeleteRole_Request"},t}(ui.Message),Fr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_DeleteRole_Response"},t}(ui.Message),wr=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.actions=function(){return ui.Message.getRepeatedWrapperField(this,gr,1)},t.prototype.set_actions=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_actions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,gr,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new gr;t.readMessage(i,gr.deserializeBinaryFromReader),e.add_actions(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.actions(),i.length>0&&t.writeRepeatedMessage(1,i,gr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetRoleActions_Response"},t}(ui.Message)),Br=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.role_id=function(){return ui.Message.getField(this,2)},t.prototype.set_role_id=function(e){ui.Message.setField(this,2,e)},t.prototype.actions=function(){return ui.Message.getWrapperField(this,gr,4,1)},t.prototype.set_actions=function(e){ui.Message.setWrapperField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_role_id(t.readUint64String());break;case 4:var i=new gr;t.readMessage(i,gr.deserializeBinaryFromReader),e.set_actions(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),null!=(i=e.actions())&&t.writeMessage(4,i,gr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_ReplaceRoleActions_Request"},t}(ui.Message),Or=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_ReplaceRoleActions_Response"},t}(ui.Message),Ir=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.role_id=function(){return ui.Message.getField(this,3)},t.prototype.set_role_id=function(e){ui.Message.setField(this,3,e)},t.prototype.steamid=function(){return ui.Message.getField(this,4)},t.prototype.set_steamid=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 3:e.set_role_id(t.readUint64String());break;case 4:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeFixed64String(4,i)},t.prototype.getClassName=function(){return"CChatRoom_AddRoleToUser_Request"},t}(ui.Message),Rr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_AddRoleToUser_Response"},t}(ui.Message),Er=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.role_ids=function(){return ui.Message.getField(this,1)},t.prototype.set_role_ids=function(e){ui.Message.setField(this,1,e)},t.prototype.add_role_ids=function(e,t){ui.Message.addToRepeatedField(this,1,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.add_role_ids(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeRepeatedUint64String(1,i)},t.prototype.getClassName=function(){return"CChatRoom_GetRolesForUser_Response"},t}(ui.Message)),Tr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.role_id=function(){return ui.Message.getField(this,3)},t.prototype.set_role_id=function(e){ui.Message.setField(this,3,e)},t.prototype.steamid=function(){return ui.Message.getField(this,4)},t.prototype.set_steamid=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 3:e.set_role_id(t.readUint64String());break;case 4:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeFixed64String(4,i)},t.prototype.getClassName=function(){return"CChatRoom_DeleteRoleFromUser_Request"},t}(ui.Message),kr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_DeleteRoleFromUser_Response"},t}(ui.Message),Dr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.header_state=function(){return ui.Message.getWrapperField(this,Ar,1,1)},t.prototype.set_header_state=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Ar;t.readMessage(i,Ar.deserializeBinaryFromReader),e.set_header_state(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.header_state())&&t.writeMessage(1,i,Ar.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_ChatRoomHeaderState_Notification"},t}(ui.Message),Gr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[7],null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.state=function(){return ui.Message.getField(this,3)},t.prototype.set_state=function(e){ui.Message.setField(this,3,e)},t.prototype.rank=function(){return ui.Message.getField(this,4)},t.prototype.set_rank=function(e){ui.Message.setField(this,4,e)},t.prototype.time_kick_expire=function(){return ui.Message.getField(this,6)},t.prototype.set_time_kick_expire=function(e){ui.Message.setField(this,6,e)},t.prototype.role_ids=function(){return ui.Message.getField(this,7)},t.prototype.set_role_ids=function(e){ui.Message.setField(this,7,e)},t.prototype.add_role_ids=function(e,t){ui.Message.addToRepeatedField(this,7,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readUint32());break;case 3:e.set_state(t.readEnum());break;case 4:e.set_rank(t.readEnum());break;case 6:e.set_time_kick_expire(t.readUint32());break;case 7:e.add_role_ids(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeEnum(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeEnum(4,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeRepeatedUint64String(7,i)},t.prototype.getClassName=function(){return"CChatRoomMember"},t}(ui.Message),Nr=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[6,10,14,15],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_group_name=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_group_name=function(e){ui.Message.setField(this,2,e)},t.prototype.active_member_count=function(){return ui.Message.getField(this,3)},t.prototype.set_active_member_count=function(e){ui.Message.setField(this,3,e)},t.prototype.active_voice_member_count=function(){return ui.Message.getField(this,4)},t.prototype.set_active_voice_member_count=function(e){ui.Message.setField(this,4,e)},t.prototype.default_chat_id=function(){return ui.Message.getField(this,5)},t.prototype.set_default_chat_id=function(e){ui.Message.setField(this,5,e)},t.prototype.chat_rooms=function(){return ui.Message.getRepeatedWrapperField(this,Lr,6)},t.prototype.set_chat_rooms=function(e){ui.Message.setRepeatedWrapperField(this,6,e)},t.prototype.add_chat_rooms=function(e,t){return ui.Message.addToRepeatedWrapperField(this,6,e,Lr,t)},t.prototype.clanid=function(){return ui.Message.getField(this,7)},t.prototype.set_clanid=function(e){ui.Message.setField(this,7,e)},t.prototype.chat_group_tagline=function(){return ui.Message.getField(this,8)},t.prototype.set_chat_group_tagline=function(e){ui.Message.setField(this,8,e)},t.prototype.accountid_owner=function(){return ui.Message.getField(this,9)},t.prototype.set_accountid_owner=function(e){ui.Message.setField(this,9,e)},t.prototype.top_members=function(){return ui.Message.getField(this,10)},t.prototype.set_top_members=function(e){ui.Message.setField(this,10,e)},t.prototype.add_top_members=function(e,t){ui.Message.addToRepeatedField(this,10,e,t)},t.prototype.chat_group_avatar_sha=function(){return ui.Message.getField(this,11)},t.prototype.set_chat_group_avatar_sha=function(e){ui.Message.setField(this,11,e)},t.prototype.rank=function(){return ui.Message.getField(this,12)},t.prototype.set_rank=function(e){ui.Message.setField(this,12,e)},t.prototype.default_role_id=function(){return ui.Message.getField(this,13)},t.prototype.set_default_role_id=function(e){ui.Message.setField(this,13,e)},t.prototype.role_ids=function(){return ui.Message.getField(this,14)},t.prototype.set_role_ids=function(e){ui.Message.setField(this,14,e)},t.prototype.add_role_ids=function(e,t){ui.Message.addToRepeatedField(this,14,e,t)},t.prototype.role_actions=function(){return ui.Message.getRepeatedWrapperField(this,gr,15)},t.prototype.set_role_actions=function(e){ui.Message.setRepeatedWrapperField(this,15,e)},t.prototype.add_role_actions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,15,e,gr,t)},t.prototype.watching_broadcast_accountid=function(){return ui.Message.getField(this,16)},t.prototype.set_watching_broadcast_accountid=function(e){ui.Message.setField(this,16,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_group_name(t.readString());break;case 3:e.set_active_member_count(t.readUint32());break;case 4:e.set_active_voice_member_count(t.readUint32());break;case 5:e.set_default_chat_id(t.readUint64String());break;case 6:var i=new Lr;t.readMessage(i,Lr.deserializeBinaryFromReader),e.add_chat_rooms(i);break;case 7:e.set_clanid(t.readUint32());break;case 8:e.set_chat_group_tagline(t.readString());break;case 9:e.set_accountid_owner(t.readUint32());break;case 10:e.add_top_members(t.readUint32());break;case 11:e.set_chat_group_avatar_sha(t.readBytes());break;case 12:e.set_rank(t.readEnum());break;case 13:e.set_default_role_id(t.readUint64String());break;case 14:e.add_role_ids(t.readUint64String());break;case 15:var i=new gr;t.readMessage(i,gr.deserializeBinaryFromReader),e.add_role_actions(i);break;case 16:e.set_watching_broadcast_accountid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint64String(5,i),i=e.chat_rooms(),i.length>0&&t.writeRepeatedMessage(6,i,Lr.serializeBinaryToWriter),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeString(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeUint32(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeRepeatedUint32(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeBytes(11,i),i=ui.Message.getField(e,12),void 0!==i&&t.writeEnum(12,i),i=ui.Message.getField(e,13),void 0!==i&&t.writeUint64String(13,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeRepeatedUint64String(14,i),i=e.role_actions(),i.length>0&&t.writeRepeatedMessage(15,i,gr.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,16))&&t.writeUint32(16,i)},t.prototype.getClassName=function(){return"CChatRoom_GetChatRoomGroupSummary_Response"},t}(ui.Message)),Lr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[4],null),i}return si.d(t,e),t.prototype.chat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_name=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_name=function(e){ui.Message.setField(this,2,e)},t.prototype.voice_allowed=function(){return ui.Message.getField(this,3)},t.prototype.set_voice_allowed=function(e){ui.Message.setField(this,3,e)},t.prototype.members_in_voice=function(){return ui.Message.getField(this,4)},t.prototype.set_members_in_voice=function(e){ui.Message.setField(this,4,e)},t.prototype.add_members_in_voice=function(e,t){ui.Message.addToRepeatedField(this,4,e,t)},t.prototype.time_last_message=function(){return ui.Message.getField(this,5)},t.prototype.set_time_last_message=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_id(t.readUint64String());break;case 2:e.set_chat_name(t.readString());break;case 3:e.set_voice_allowed(t.readBool());break;case 4:e.add_members_in_voice(t.readUint32());break;case 5:e.set_time_last_message(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeRepeatedUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CChatRoomState"},t}(ui.Message),Ar=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[18,19],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_name=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_name=function(e){ui.Message.setField(this,2,e)},t.prototype.clanid=function(){return ui.Message.getField(this,13)},t.prototype.set_clanid=function(e){ui.Message.setField(this,13,e)},t.prototype.accountid_owner=function(){return ui.Message.getField(this,14)},t.prototype.set_accountid_owner=function(e){ui.Message.setField(this,14,e)},t.prototype.tagline=function(){return ui.Message.getField(this,15)},t.prototype.set_tagline=function(e){ui.Message.setField(this,15,e)},t.prototype.avatar_sha=function(){return ui.Message.getField(this,16)},t.prototype.set_avatar_sha=function(e){ui.Message.setField(this,16,e)},t.prototype.default_role_id=function(){return ui.Message.getField(this,17)},t.prototype.set_default_role_id=function(e){ui.Message.setField(this,17,e)},t.prototype.roles=function(){return ui.Message.getRepeatedWrapperField(this,hr,18)},t.prototype.set_roles=function(e){ui.Message.setRepeatedWrapperField(this,18,e)},t.prototype.add_roles=function(e,t){return ui.Message.addToRepeatedWrapperField(this,18,e,hr,t)},t.prototype.role_actions=function(){return ui.Message.getRepeatedWrapperField(this,gr,19)},t.prototype.set_role_actions=function(e){ui.Message.setRepeatedWrapperField(this,19,e)},t.prototype.add_role_actions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,19,e,gr,t)},t.prototype.watching_broadcast_accountid=function(){return ui.Message.getField(this,20)},t.prototype.set_watching_broadcast_accountid=function(e){ui.Message.setField(this,20,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_name(t.readString());break;case 13:e.set_clanid(t.readUint32());break;case 14:e.set_accountid_owner(t.readUint32());break;case 15:e.set_tagline(t.readString());break;case 16:e.set_avatar_sha(t.readBytes());break;case 17:e.set_default_role_id(t.readUint64String());break;case 18:var i=new hr;t.readMessage(i,hr.deserializeBinaryFromReader),e.add_roles(i);break;case 19:var i=new gr;t.readMessage(i,gr.deserializeBinaryFromReader),e.add_role_actions(i);break;case 20:e.set_watching_broadcast_accountid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,13),void 0!==i&&t.writeUint32(13,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeUint32(14,i),i=ui.Message.getField(e,15),void 0!==i&&t.writeString(15,i),i=ui.Message.getField(e,16),void 0!==i&&t.writeBytes(16,i),i=ui.Message.getField(e,17),void 0!==i&&t.writeUint64String(17,i),i=e.roles(),i.length>0&&t.writeRepeatedMessage(18,i,hr.serializeBinaryToWriter),i=e.role_actions(),i.length>0&&t.writeRepeatedMessage(19,i,gr.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,20))&&t.writeUint32(20,i)},t.prototype.getClassName=function(){return"CChatRoomGroupHeaderState"},t}(ui.Message),Pr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2,5,7],null),i}return si.d(t,e),t.prototype.header_state=function(){return ui.Message.getWrapperField(this,Ar,1,1)},t.prototype.set_header_state=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.members=function(){return ui.Message.getRepeatedWrapperField(this,Gr,2)},t.prototype.set_members=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_members=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,Gr,t)},t.prototype.default_chat_id=function(){return ui.Message.getField(this,4)},t.prototype.set_default_chat_id=function(e){ui.Message.setField(this,4,e)},t.prototype.chat_rooms=function(){return ui.Message.getRepeatedWrapperField(this,Lr,5)},t.prototype.set_chat_rooms=function(e){ui.Message.setRepeatedWrapperField(this,5,e)},t.prototype.add_chat_rooms=function(e,t){return ui.Message.addToRepeatedWrapperField(this,5,e,Lr,t)},t.prototype.kicked=function(){return ui.Message.getRepeatedWrapperField(this,Gr,7)},t.prototype.set_kicked=function(e){ui.Message.setRepeatedWrapperField(this,7,e)},t.prototype.add_kicked=function(e,t){return ui.Message.addToRepeatedWrapperField(this,7,e,Gr,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Ar;t.readMessage(i,Ar.deserializeBinaryFromReader),e.set_header_state(i);break;case 2:var i=new Gr;t.readMessage(i,Gr.deserializeBinaryFromReader),e.add_members(i);break;case 4:e.set_default_chat_id(t.readUint64String());break;case 5:var i=new Lr;t.readMessage(i,Lr.deserializeBinaryFromReader),e.add_chat_rooms(i);break;case 7:var i=new Gr;t.readMessage(i,Gr.deserializeBinaryFromReader),e.add_kicked(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.header_state(),null!=i&&t.writeMessage(1,i,Ar.serializeBinaryToWriter),i=e.members(),i.length>0&&t.writeRepeatedMessage(2,i,Gr.serializeBinaryToWriter),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint64String(4,i),i=e.chat_rooms(),i.length>0&&t.writeRepeatedMessage(5,i,Lr.serializeBinaryToWriter),i=e.kicked(),i.length>0&&t.writeRepeatedMessage(7,i,Gr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoomGroupState"},t}(ui.Message),xr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.time_joined=function(){return ui.Message.getField(this,2)},t.prototype.set_time_joined=function(e){ui.Message.setField(this,2,e)},t.prototype.user_chat_room_state=function(){return ui.Message.getRepeatedWrapperField(this,zr,3)},t.prototype.set_user_chat_room_state=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_user_chat_room_state=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,zr,t)},t.prototype.desktop_notification_level=function(){return ui.Message.getFieldWithDefault(this,4,0)},t.prototype.set_desktop_notification_level=function(e){ui.Message.setField(this,4,e)},t.prototype.mobile_notification_level=function(){return ui.Message.getFieldWithDefault(this,5,0)},t.prototype.set_mobile_notification_level=function(e){ui.Message.setField(this,5,e)},t.prototype.time_last_group_ack=function(){return ui.Message.getField(this,6)},t.prototype.set_time_last_group_ack=function(e){ui.Message.setField(this,6,e)},t.prototype.unread_indicator_muted=function(){return ui.Message.getFieldWithDefault(this,7,!1)},t.prototype.set_unread_indicator_muted=function(e){ui.Message.setField(this,7,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_time_joined(t.readUint32());break;case 3:var i=new zr;t.readMessage(i,zr.deserializeBinaryFromReader),e.add_user_chat_room_state(i);break;case 4:e.set_desktop_notification_level(t.readEnum());break;case 5:e.set_mobile_notification_level(t.readEnum());break;case 6:e.set_time_last_group_ack(t.readUint32());break;case 7:e.set_unread_indicator_muted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=e.user_chat_room_state(),i.length>0&&t.writeRepeatedMessage(3,i,zr.serializeBinaryToWriter),i=ui.Message.getField(e,4),void 0!==i&&t.writeEnum(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeEnum(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeBool(7,i)},t.prototype.getClassName=function(){return"CUserChatRoomGroupState"},t}(ui.Message),zr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.time_joined=function(){return ui.Message.getField(this,2)},t.prototype.set_time_joined=function(e){ui.Message.setField(this,2,e)},t.prototype.time_last_ack=function(){return ui.Message.getField(this,3)},t.prototype.set_time_last_ack=function(e){ui.Message.setField(this,3,e)},t.prototype.desktop_notification_level=function(){return ui.Message.getFieldWithDefault(this,4,0)},t.prototype.set_desktop_notification_level=function(e){ui.Message.setField(this,4,e)},t.prototype.mobile_notification_level=function(){return ui.Message.getFieldWithDefault(this,5,0)},t.prototype.set_mobile_notification_level=function(e){ui.Message.setField(this,5,e)},t.prototype.time_last_mention=function(){return ui.Message.getField(this,6)},t.prototype.set_time_last_mention=function(e){ui.Message.setField(this,6,e)},t.prototype.unread_indicator_muted=function(){return ui.Message.getFieldWithDefault(this,7,!1)},t.prototype.set_unread_indicator_muted=function(e){ui.Message.setField(this,7,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_id(t.readUint64String());break;case 2:e.set_time_joined(t.readUint32());break;case 3:e.set_time_last_ack(t.readUint32());break;case 4:e.set_desktop_notification_level(t.readEnum());break;case 5:e.set_mobile_notification_level(t.readEnum());break;case 6:e.set_time_last_mention(t.readUint32());break;case 7:e.set_unread_indicator_muted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeEnum(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeEnum(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeBool(7,i)},t.prototype.getClassName=function(){return"CUserChatRoomState"},t}(ui.Message),Ur=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.user_chat_group_state=function(){return ui.Message.getWrapperField(this,xr,1,1)},t.prototype.set_user_chat_group_state=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.group_summary=function(){return ui.Message.getWrapperField(this,Nr,2,1)},t.prototype.set_group_summary=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new xr;t.readMessage(i,xr.deserializeBinaryFromReader),e.set_user_chat_group_state(i);break;case 2:var i=new Nr;t.readMessage(i,Nr.deserializeBinaryFromReader),e.set_group_summary(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.user_chat_group_state(),null!=i&&t.writeMessage(1,i,xr.serializeBinaryToWriter),null!=(i=e.group_summary())&&t.writeMessage(2,i,Nr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoomSummaryPair"},t}(ui.Message),Vr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.allow_voice=function(){return ui.Message.getField(this,3)},t.prototype.set_allow_voice=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_name(t.readString());break;case 3:e.set_allow_voice(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CChatRoom_CreateChatRoom_Request"},t}(ui.Message),jr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_room=function(){return ui.Message.getWrapperField(this,Lr,1,1)},t.prototype.set_chat_room=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Lr;t.readMessage(i,Lr.deserializeBinaryFromReader),e.set_chat_room(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.chat_room())&&t.writeMessage(1,i,Lr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_CreateChatRoom_Response"},t}(ui.Message),Wr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_DeleteChatRoom_Request"},t}(ui.Message),Hr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_DeleteChatRoom_Response"},t}(ui.Message),qr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.name=function(){return ui.Message.getField(this,3)},t.prototype.set_name=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeString(3,i)},t.prototype.getClassName=function(){return"CChatRoom_RenameChatRoom_Request"},t}(ui.Message),Kr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_RenameChatRoom_Response"},t}(ui.Message),Jr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.mention_all=function(){return ui.Message.getField(this,1)},t.prototype.set_mention_all=function(e){ui.Message.setField(this,1,e)},t.prototype.mention_here=function(){return ui.Message.getField(this,2)},t.prototype.set_mention_here=function(e){ui.Message.setField(this,2,e)},t.prototype.mention_accountids=function(){return ui.Message.getField(this,3)},t.prototype.set_mention_accountids=function(e){ui.Message.setField(this,3,e)},t.prototype.add_mention_accountids=function(e,t){ui.Message.addToRepeatedField(this,3,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_mention_all(t.readBool());break;case 2:e.set_mention_here(t.readBool());break;case 3:e.add_mention_accountids(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBool(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeRepeatedUint32(3,i)},t.prototype.getClassName=function(){return"CChatMentions"},t}(ui.Message),Yr=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.state=function(){return ui.Message.getWrapperField(this,Pr,1,1)},t.prototype.set_state=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Pr;t.readMessage(i,Pr.deserializeBinaryFromReader),e.set_state(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.state())&&t.writeMessage(1,i,Pr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetChatRoomGroupState_Response"},t}(ui.Message)),Xr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_GetMyChatRoomGroups_Request"},t}(ui.Message),Zr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.chat_room_groups=function(){return ui.Message.getRepeatedWrapperField(this,Ur,1)},t.prototype.set_chat_room_groups=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_chat_room_groups=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Ur,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Ur;t.readMessage(i,Ur.deserializeBinaryFromReader),e.add_chat_room_groups(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.chat_room_groups(),i.length>0&&t.writeRepeatedMessage(1,i,Ur.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetMyChatRoomGroups_Response"},t}(ui.Message),Qr=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.invite_code=function(){return ui.Message.getField(this,2)},t.prototype.set_invite_code=function(e){ui.Message.setField(this,2,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,3)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_invite_code(t.readString());break;case 3:e.set_chat_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint64String(3,i)},t.prototype.getClassName=function(){return"CChatRoom_JoinChatRoomGroup_Request"},t}(ui.Message),$r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.state=function(){return ui.Message.getWrapperField(this,Pr,1,1)},t.prototype.set_state=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.user_chat_state=function(){return ui.Message.getWrapperField(this,xr,3,1)},t.prototype.set_user_chat_state=function(e){ui.Message.setWrapperField(this,3,e)},t.prototype.join_chat_id=function(){return ui.Message.getField(this,4)},t.prototype.set_join_chat_id=function(e){ui.Message.setField(this,4,e)},t.prototype.time_expire=function(){return ui.Message.getField(this,5)},t.prototype.set_time_expire=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Pr;t.readMessage(i,Pr.deserializeBinaryFromReader),e.set_state(i);break;case 3:var i=new xr;t.readMessage(i,xr.deserializeBinaryFromReader),e.set_user_chat_state(i);break;case 4:e.set_join_chat_id(t.readUint64String());break;case 5:e.set_time_expire(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.state(),null!=i&&t.writeMessage(1,i,Pr.serializeBinaryToWriter),i=e.user_chat_state(),null!=i&&t.writeMessage(3,i,xr.serializeBinaryToWriter),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint64String(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CChatRoom_JoinChatRoomGroup_Response"},t}(ui.Message),eo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,3)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,3,e)},t.prototype.skip_friendsui_check=function(){return ui.Message.getField(this,4)},t.prototype.set_skip_friendsui_check=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_steamid(t.readFixed64String());break;case 3:e.set_chat_id(t.readUint64String());break;case 4:e.set_skip_friendsui_check(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeBool(4,i)},t.prototype.getClassName=function(){return"CChatRoom_InviteFriendToChatRoomGroup_Request"},t}(ui.Message),to=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_InviteFriendToChatRoomGroup_Response"},t}(ui.Message),io=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CChatRoom_LeaveChatRoomGroup_Request"},t}(ui.Message),no=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_LeaveChatRoomGroup_Response"},t}(ui.Message),ro=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_JoinVoiceChat_Request"},t}(ui.Message),oo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CChatRoom_JoinVoiceChat_Response"},t}(ui.Message),ao=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_LeaveVoiceChat_Request"},t}(ui.Message),so=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_LeaveVoiceChat_Response"},t}(ui.Message),co=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_id(t.readUint64String());break;case 2:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_NotifyShouldRejoinChatRoomVoiceChat_Notification"},t}(ui.Message),lo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.message=function(){return ui.Message.getField(this,3)},t.prototype.set_message=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:e.set_message(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeString(3,i)},t.prototype.getClassName=function(){return"CChatRoom_SendChatMessage_Request"},t}(ui.Message),uo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.modified_message=function(){return ui.Message.getField(this,1)},t.prototype.set_modified_message=function(e){ui.Message.setField(this,1,e)},t.prototype.server_timestamp=function(){return ui.Message.getField(this,2)},t.prototype.set_server_timestamp=function(e){ui.Message.setField(this,2,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,3)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_modified_message(t.readString());break;case 2:e.set_server_timestamp(t.readUint32());break;case 3:e.set_ordinal(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CChatRoom_SendChatMessage_Response"},t}(ui.Message),po=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.steamid_sender=function(){return ui.Message.getField(this,3)},t.prototype.set_steamid_sender=function(e){ui.Message.setField(this,3,e)},t.prototype.message=function(){return ui.Message.getField(this,4)},t.prototype.set_message=function(e){ui.Message.setField(this,4,e)},t.prototype.timestamp=function(){return ui.Message.getField(this,5)},t.prototype.set_timestamp=function(e){ui.Message.setField(this,5,e)},t.prototype.mentions=function(){return ui.Message.getWrapperField(this,Jr,6,1)},t.prototype.set_mentions=function(e){ui.Message.setWrapperField(this,6,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,7)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,7,e)},t.prototype.server_message=function(){return ui.Message.getWrapperField(this,Kn,8,1)},t.prototype.set_server_message=function(e){ui.Message.setWrapperField(this,8,e)},t.prototype.message_no_bbcode=function(){return ui.Message.getField(this,9)},t.prototype.set_message_no_bbcode=function(e){ui.Message.setField(this,9,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:e.set_steamid_sender(t.readFixed64String());break;case 4:e.set_message(t.readString());break;case 5:e.set_timestamp(t.readUint32());break;case 6:var i=new Jr;t.readMessage(i,Jr.deserializeBinaryFromReader),e.set_mentions(i);break;case 7:e.set_ordinal(t.readUint32());break;case 8:var i=new Kn;t.readMessage(i,Kn.deserializeBinaryFromReader),e.set_server_message(i);break;case 9:e.set_message_no_bbcode(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeFixed64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeString(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint32(5,i),i=e.mentions(),null!=i&&t.writeMessage(6,i,Jr.serializeBinaryToWriter),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=e.server_message(),null!=i&&t.writeMessage(8,i,Kn.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,9))&&t.writeString(9,i)},t.prototype.getClassName=function(){return"CChatRoom_IncomingChatMessage_Notification"},t}(ui.Message),mo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.messages=function(){return ui.Message.getRepeatedWrapperField(this,ho,3)},t.prototype.set_messages=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_messages=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,ho,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:var i=new ho;t.readMessage(i,ho.deserializeBinaryFromReader),e.add_messages(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=e.messages(),i.length>0&&t.writeRepeatedMessage(3,i,ho.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_ChatMessageModified_Notification"},t}(ui.Message),ho=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.server_timestamp=function(){return ui.Message.getField(this,1)},t.prototype.set_server_timestamp=function(e){ui.Message.setField(this,1,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,2)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,2,e)},t.prototype.deleted=function(){return ui.Message.getField(this,3)},t.prototype.set_deleted=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_server_timestamp(t.readUint32());break;case 2:e.set_ordinal(t.readUint32());break;case 3:e.set_deleted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CChatRoom_ChatMessageModified_Notification_ChatMessage"},t}(ui.Message),go=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.last_time=function(){return ui.Message.getField(this,3)},t.prototype.set_last_time=function(e){ui.Message.setField(this,3,e)},t.prototype.last_ordinal=function(){return ui.Message.getField(this,4)},t.prototype.set_last_ordinal=function(e){ui.Message.setField(this,4,e)},t.prototype.start_time=function(){return ui.Message.getField(this,5)},t.prototype.set_start_time=function(e){ui.Message.setField(this,5,e)},t.prototype.start_ordinal=function(){return ui.Message.getField(this,6)},t.prototype.set_start_ordinal=function(e){ui.Message.setField(this,6,e)},t.prototype.max_count=function(){return ui.Message.getField(this,7)},t.prototype.set_max_count=function(e){ui.Message.setField(this,7,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:e.set_last_time(t.readUint32());break;case 4:e.set_last_ordinal(t.readUint32());break;case 5:e.set_start_time(t.readUint32());break;case 6:e.set_start_ordinal(t.readUint32());break;case 7:e.set_max_count(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeUint32(7,i)},t.prototype.getClassName=function(){return"CChatRoom_GetMessageHistory_Request"},t}(ui.Message),fo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.messages=function(){return ui.Message.getRepeatedWrapperField(this,_o,1)},t.prototype.set_messages=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_messages=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,_o,t)},t.prototype.more_available=function(){return ui.Message.getField(this,4)},t.prototype.set_more_available=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new _o;t.readMessage(i,_o.deserializeBinaryFromReader),e.add_messages(i);break;case 4:e.set_more_available(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.messages(),i.length>0&&t.writeRepeatedMessage(1,i,_o.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,4))&&t.writeBool(4,i)},t.prototype.getClassName=function(){return"CChatRoom_GetMessageHistory_Response"},t}(ui.Message),_o=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.sender=function(){return ui.Message.getField(this,1)},t.prototype.set_sender=function(e){ui.Message.setField(this,1,e)},t.prototype.server_timestamp=function(){return ui.Message.getField(this,2)},t.prototype.set_server_timestamp=function(e){ui.Message.setField(this,2,e)},t.prototype.message=function(){return ui.Message.getField(this,3)},t.prototype.set_message=function(e){ui.Message.setField(this,3,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,4)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,4,e)},t.prototype.server_message=function(){return ui.Message.getWrapperField(this,Kn,5,1)},t.prototype.set_server_message=function(e){ui.Message.setWrapperField(this,5,e)},t.prototype.deleted=function(){return ui.Message.getField(this,6)},t.prototype.set_deleted=function(e){ui.Message.setField(this,6,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_sender(t.readUint32());break;case 2:e.set_server_timestamp(t.readUint32());break;case 3:e.set_message(t.readString());break;case 4:e.set_ordinal(t.readUint32());break;case 5:var i=new Kn;t.readMessage(i,Kn.deserializeBinaryFromReader),e.set_server_message(i);break;case 6:e.set_deleted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=e.server_message(),null!=i&&t.writeMessage(5,i,Kn.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,6))&&t.writeBool(6,i)},t.prototype.getClassName=function(){return"CChatRoom_GetMessageHistory_Response_ChatMessage"},t}(ui.Message),yo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.member=function(){return ui.Message.getWrapperField(this,Gr,2,1)},t.prototype.set_member=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.change=function(){return ui.Message.getField(this,3)},t.prototype.set_change=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:var i=new Gr;t.readMessage(i,Gr.deserializeBinaryFromReader),e.set_member(i);break;case 3:e.set_change(t.readEnum());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=e.member(),null!=i&&t.writeMessage(2,i,Gr.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,3))&&t.writeEnum(3,i)},t.prototype.getClassName=function(){return"CChatRoom_MemberStateChange_Notification"},t}(ui.Message),vo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.default_chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_default_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.chat_rooms=function(){return ui.Message.getRepeatedWrapperField(this,Lr,3)},t.prototype.set_chat_rooms=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_chat_rooms=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,Lr,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_default_chat_id(t.readUint64String());break;case 3:var i=new Lr;t.readMessage(i,Lr.deserializeBinaryFromReader),e.add_chat_rooms(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=e.chat_rooms(),i.length>0&&t.writeRepeatedMessage(3,i,Lr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_ChatRoomGroupRoomsChange_Notification"},t}(ui.Message),bo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.timestamp=function(){return ui.Message.getField(this,3)},t.prototype.set_timestamp=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:e.set_timestamp(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CChatRoom_AckChatMessage_Notification"},t}(ui.Message),Co=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.seconds_valid=function(){return ui.Message.getField(this,2)},t.prototype.set_seconds_valid=function(e){ui.Message.setField(this,2,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,3)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_seconds_valid(t.readUint32());break;case 3:e.set_chat_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint64String(3,i)},t.prototype.getClassName=function(){return"CChatRoom_CreateInviteLink_Request"},t}(ui.Message),So=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.invite_code=function(){return ui.Message.getField(this,1)},t.prototype.set_invite_code=function(e){ui.Message.setField(this,1,e)},t.prototype.seconds_valid=function(){return ui.Message.getField(this,2)},t.prototype.set_seconds_valid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_invite_code(t.readString());break;case 2:e.set_seconds_valid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CChatRoom_CreateInviteLink_Response"},t}(ui.Message),Mo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.invite_code=function(){return ui.Message.getField(this,1)},t.prototype.set_invite_code=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_invite_code(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteLinkInfo_Request"},t}(ui.Message),Fo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_sender=function(){return ui.Message.getField(this,3)},t.prototype.set_steamid_sender=function(e){ui.Message.setField(this,3,e)},t.prototype.time_expires=function(){return ui.Message.getField(this,4)},t.prototype.set_time_expires=function(e){ui.Message.setField(this,4,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,6)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,6,e)},t.prototype.group_summary=function(){return ui.Message.getWrapperField(this,Nr,8,1)},t.prototype.set_group_summary=function(e){ui.Message.setWrapperField(this,8,e)},t.prototype.user_chat_group_state=function(){return ui.Message.getWrapperField(this,xr,9,1)},t.prototype.set_user_chat_group_state=function(e){ui.Message.setWrapperField(this,9,e)},t.prototype.time_kick_expire=function(){return ui.Message.getField(this,10)},t.prototype.set_time_kick_expire=function(e){ui.Message.setField(this,10,e)},t.prototype.banned=function(){return ui.Message.getField(this,11)},t.prototype.set_banned=function(e){ui.Message.setField(this,11,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 3:e.set_steamid_sender(t.readFixed64String());break;case 4:e.set_time_expires(t.readUint32());break;case 6:e.set_chat_id(t.readUint64String());break;case 8:var i=new Nr;t.readMessage(i,Nr.deserializeBinaryFromReader),e.set_group_summary(i);break;case 9:var i=new xr;t.readMessage(i,xr.deserializeBinaryFromReader),e.set_user_chat_group_state(i);break;case 10:e.set_time_kick_expire(t.readUint32());break;case 11:e.set_banned(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,3),void 0!==i&&t.writeFixed64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint64String(6,i),i=e.group_summary(),null!=i&&t.writeMessage(8,i,Nr.serializeBinaryToWriter),i=e.user_chat_group_state(),null!=i&&t.writeMessage(9,i,xr.serializeBinaryToWriter),i=ui.Message.getField(e,10),void 0!==i&&t.writeUint32(10,i),void 0!==(i=ui.Message.getField(e,11))&&t.writeBool(11,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteLinkInfo_Response"},t}(ui.Message),wo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_invitee=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_invitee=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,2,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,3)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,3,e)},t.prototype.invite_code=function(){return ui.Message.getField(this,4)},t.prototype.set_invite_code=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_invitee(t.readFixed64String());break;case 2:e.set_chat_group_id(t.readUint64String());break;case 3:e.set_chat_id(t.readUint64String());break;case 4:e.set_invite_code(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeString(4,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteInfo_Request"},t}(ui.Message),Bo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.group_summary=function(){return ui.Message.getWrapperField(this,Nr,1,1)},t.prototype.set_group_summary=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.time_kick_expire=function(){return ui.Message.getField(this,2)},t.prototype.set_time_kick_expire=function(e){ui.Message.setField(this,2,e)},t.prototype.banned=function(){return ui.Message.getField(this,3)},t.prototype.set_banned=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Nr;t.readMessage(i,Nr.deserializeBinaryFromReader),e.set_group_summary(i);break;case 2:e.set_time_kick_expire(t.readUint32());break;case 3:e.set_banned(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.group_summary(),null!=i&&t.writeMessage(1,i,Nr.serializeBinaryToWriter),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteInfo_Response"},t}(ui.Message),Oo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteLinksForGroup_Request"},t}(ui.Message),Io=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.invite_links=function(){return ui.Message.getRepeatedWrapperField(this,Ro,1)},t.prototype.set_invite_links=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_invite_links=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Ro,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Ro;t.readMessage(i,Ro.deserializeBinaryFromReader),e.add_invite_links(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.invite_links(),i.length>0&&t.writeRepeatedMessage(1,i,Ro.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteLinksForGroup_Response"},t}(ui.Message),Ro=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.invite_code=function(){return ui.Message.getField(this,1)},t.prototype.set_invite_code=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid_creator=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid_creator=function(e){ui.Message.setField(this,2,e)},t.prototype.time_expires=function(){return ui.Message.getField(this,3)},t.prototype.set_time_expires=function(e){ui.Message.setField(this,3,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,4)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_invite_code(t.readString());break;case 2:e.set_steamid_creator(t.readFixed64String());break;case 3:e.set_time_expires(t.readUint32());break;case 4:e.set_chat_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeUint64String(4,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteLinksForGroup_Response_LinkInfo"},t}(ui.Message),Eo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.invite_code=function(){return ui.Message.getField(this,2)},t.prototype.set_invite_code=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_invite_code(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CChatRoom_DeleteInviteLink_Request"},t}(ui.Message),To=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_DeleteInviteLink_Response"},t}(ui.Message),ko=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CChatRoom_GetBanList_Request"},t}(ui.Message),Do=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.bans=function(){return ui.Message.getRepeatedWrapperField(this,Go,1)},t.prototype.set_bans=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_bans=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Go,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Go;t.readMessage(i,Go.deserializeBinaryFromReader),e.add_bans(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.bans(),i.length>0&&t.writeRepeatedMessage(1,i,Go.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetBanList_Response"},t}(ui.Message),Go=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.accountid_actor=function(){return ui.Message.getField(this,2)},t.prototype.set_accountid_actor=function(e){ui.Message.setField(this,2,e)},t.prototype.time_banned=function(){return ui.Message.getField(this,3)},t.prototype.set_time_banned=function(e){ui.Message.setField(this,3,e)},t.prototype.ban_reason=function(){return ui.Message.getField(this,4)},t.prototype.set_ban_reason=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readUint32());break;case 2:e.set_accountid_actor(t.readUint32());break;case 3:e.set_time_banned(t.readUint32());break;case 4:e.set_ban_reason(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeString(4,i)},t.prototype.getClassName=function(){return"CChatRoom_GetBanList_Response_BanInfo"},t}(ui.Message),No=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.accountid_actor=function(){return ui.Message.getField(this,2)},t.prototype.set_accountid_actor=function(e){ui.Message.setField(this,2,e)},t.prototype.time_invited=function(){return ui.Message.getField(this,3)},t.prototype.set_time_invited=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readUint32());break;case 2:e.set_accountid_actor(t.readUint32());break;case 3:e.set_time_invited(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CChatRoomGroupInvite"},t}(ui.Message),Lo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteList_Request"},t}(ui.Message),Ao=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.invites=function(){return ui.Message.getRepeatedWrapperField(this,No,1)},t.prototype.set_invites=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_invites=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,No,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new No;t.readMessage(i,No.deserializeBinaryFromReader),e.add_invites(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.invites(),i.length>0&&t.writeRepeatedMessage(1,i,No.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_GetInviteList_Response"},t}(ui.Message),Po=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1,2],null),i}return si.d(t,e),t.prototype.chat_group_ids=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_ids=function(e){ui.Message.setField(this,1,e)},t.prototype.add_chat_group_ids=function(e,t){ui.Message.addToRepeatedField(this,1,e,t)},t.prototype.chat_groups_data_requested=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_groups_data_requested=function(e){ui.Message.setField(this,2,e)},t.prototype.add_chat_groups_data_requested=function(e,t){ui.Message.addToRepeatedField(this,2,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.add_chat_group_ids(t.readUint64String());break;case 2:e.add_chat_groups_data_requested(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeRepeatedUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeRepeatedUint64String(2,i)},t.prototype.getClassName=function(){return"CChatRoom_SetSessionActiveChatRoomGroups_Request"},t}(ui.Message),xo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.chat_states=function(){return ui.Message.getRepeatedWrapperField(this,Pr,1)},t.prototype.set_chat_states=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_chat_states=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Pr,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Pr;t.readMessage(i,Pr.deserializeBinaryFromReader),e.add_chat_states(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.chat_states(),i.length>0&&t.writeRepeatedMessage(1,i,Pr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_SetSessionActiveChatRoomGroups_Response"},t}(ui.Message),zo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_group_preferences=function(){return ui.Message.getWrapperField(this,Uo,2,1)},t.prototype.set_chat_group_preferences=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.chat_room_preferences=function(){return ui.Message.getRepeatedWrapperField(this,Vo,3)},t.prototype.set_chat_room_preferences=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_chat_room_preferences=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,Vo,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:var i=new Uo;t.readMessage(i,Uo.deserializeBinaryFromReader),e.set_chat_group_preferences(i);break;case 3:var i=new Vo;t.readMessage(i,Vo.deserializeBinaryFromReader),e.add_chat_room_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=e.chat_group_preferences(),null!=i&&t.writeMessage(2,i,Uo.serializeBinaryToWriter),i=e.chat_room_preferences(),i.length>0&&t.writeRepeatedMessage(3,i,Vo.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_SetUserChatGroupPreferences_Request"},t}(ui.Message),Uo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.desktop_notification_level=function(){return ui.Message.getField(this,1)},t.prototype.set_desktop_notification_level=function(e){ui.Message.setField(this,1,e)},t.prototype.mobile_notification_level=function(){return ui.Message.getField(this,2)},t.prototype.set_mobile_notification_level=function(e){ui.Message.setField(this,2,e)},t.prototype.unread_indicator_muted=function(){return ui.Message.getField(this,3)},t.prototype.set_unread_indicator_muted=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_desktop_notification_level(t.readEnum());break;case 2:e.set_mobile_notification_level(t.readEnum());break;case 3:e.set_unread_indicator_muted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeEnum(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeEnum(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CChatRoom_SetUserChatGroupPreferences_Request_ChatGroupPreferences"},t}(ui.Message),Vo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.desktop_notification_level=function(){return ui.Message.getField(this,2)},t.prototype.set_desktop_notification_level=function(e){ui.Message.setField(this,2,e)},t.prototype.mobile_notification_level=function(){return ui.Message.getField(this,3)},t.prototype.set_mobile_notification_level=function(e){ui.Message.setField(this,3,e)},t.prototype.unread_indicator_muted=function(){return ui.Message.getField(this,4)},t.prototype.set_unread_indicator_muted=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_id(t.readUint64String());break;case 2:e.set_desktop_notification_level(t.readEnum());break;case 3:e.set_mobile_notification_level(t.readEnum());break;case 4:e.set_unread_indicator_muted(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeEnum(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeEnum(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeBool(4,i)},t.prototype.getClassName=function(){return"CChatRoom_SetUserChatGroupPreferences_Request_ChatRoomPreferences"},t}(ui.Message),jo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_SetUserChatGroupPreferences_Response"},t}(ui.Message),Wo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_id=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,2,e)},t.prototype.messages=function(){return ui.Message.getRepeatedWrapperField(this,Ho,3)},t.prototype.set_messages=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_messages=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,Ho,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:e.set_chat_id(t.readUint64String());break;case 3:var i=new Ho;t.readMessage(i,Ho.deserializeBinaryFromReader),e.add_messages(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=e.messages(),i.length>0&&t.writeRepeatedMessage(3,i,Ho.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatRoom_DeleteChatMessages_Request"},t}(ui.Message),Ho=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.server_timestamp=function(){return ui.Message.getField(this,1)},t.prototype.set_server_timestamp=function(e){ui.Message.setField(this,1,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,2)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_server_timestamp(t.readUint32());break;case 2:e.set_ordinal(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CChatRoom_DeleteChatMessages_Request_Message"},t}(ui.Message),qo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CChatRoom_DeleteChatMessages_Response"},t}(ui.Message),Ko=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.autocreate=function(){return ui.Message.getFieldWithDefault(this,2,!0)},t.prototype.set_autocreate=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_autocreate(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CClanChatRooms_GetClanChatRoomInfo_Request"},t}(ui.Message),Jo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_summary=function(){return ui.Message.getWrapperField(this,Nr,1,1)},t.prototype.set_chat_group_summary=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Nr;t.readMessage(i,Nr.deserializeBinaryFromReader),e.set_chat_group_summary(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.chat_group_summary())&&t.writeMessage(1,i,Nr.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CClanChatRooms_GetClanChatRoomInfo_Response"},t}(ui.Message),Yo=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_room_private=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_room_private=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_room_private(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeBool(1,i)},t.prototype.getClassName=function(){return"CClanChatRooms_SetClanChatRoomPrivate_Response"},t}(ui.Message)),Xo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_group_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,1,e)},t.prototype.user_chat_group_state=function(){return ui.Message.getWrapperField(this,xr,2,1)},t.prototype.set_user_chat_group_state=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.group_summary=function(){return ui.Message.getWrapperField(this,Nr,3,1)},t.prototype.set_group_summary=function(e){ui.Message.setWrapperField(this,3,e)},t.prototype.user_action=function(){return ui.Message.getField(this,4)},t.prototype.set_user_action=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_group_id(t.readUint64String());break;case 2:var i=new xr;t.readMessage(i,xr.deserializeBinaryFromReader),e.set_user_chat_group_state(i);break;case 3:var i=new Nr;t.readMessage(i,Nr.deserializeBinaryFromReader),e.set_group_summary(i);break;case 4:e.set_user_action(t.readEnum());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=e.user_chat_group_state(),null!=i&&t.writeMessage(2,i,xr.serializeBinaryToWriter),i=e.group_summary(),null!=i&&t.writeMessage(3,i,Nr.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,4))&&t.writeEnum(4,i)},t.prototype.getClassName=function(){return"ChatRoomClient_NotifyChatGroupUserStateChanged_Notification"},t}(ui.Message),Zo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.metrics_run_id=function(){return ui.Message.getField(this,1)},t.prototype.set_metrics_run_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_metrics_run_id(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CChatUsability_RequestClientUsabilityMetrics_Notification"},t}(ui.Message),Qo=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.metrics_run_id=function(){return ui.Message.getField(this,1)},t.prototype.set_metrics_run_id=function(e){ui.Message.setField(this,1,e)},t.prototype.client_build=function(){return ui.Message.getField(this,2)},t.prototype.set_client_build=function(e){ui.Message.setField(this,2,e)},t.prototype.metrics_version=function(){return ui.Message.getField(this,3)},t.prototype.set_metrics_version=function(e){ui.Message.setField(this,3,e)},t.prototype.in_web=function(){return ui.Message.getField(this,4)},t.prototype.set_in_web=function(e){ui.Message.setField(this,4,e)},t.prototype.settings=function(){return ui.Message.getWrapperField(this,$o,10,1)},t.prototype.set_settings=function(e){ui.Message.setWrapperField(this,10,e)},t.prototype.voice_settings=function(){return ui.Message.getWrapperField(this,ea,11,1)},t.prototype.set_voice_settings=function(e){ui.Message.setWrapperField(this,11,e)},t.prototype.ui_state=function(){return ui.Message.getWrapperField(this,ta,12,1)},t.prototype.set_ui_state=function(e){ui.Message.setWrapperField(this,12,e)},t.prototype.metrics=function(){return ui.Message.getWrapperField(this,na,13,1)},t.prototype.set_metrics=function(e){ui.Message.setWrapperField(this,13,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_metrics_run_id(t.readUint32());break;case 2:e.set_client_build(t.readUint32());break;case 3:e.set_metrics_version(t.readUint32());break;case 4:e.set_in_web(t.readBool());break;case 10:var i=new $o;t.readMessage(i,$o.deserializeBinaryFromReader),e.set_settings(i);break;case 11:var i=new ea;t.readMessage(i,ea.deserializeBinaryFromReader),e.set_voice_settings(i);break;case 12:var i=new ta;t.readMessage(i,ta.deserializeBinaryFromReader),e.set_ui_state(i);break;case 13:var i=new na;t.readMessage(i,na.deserializeBinaryFromReader),e.set_metrics(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=e.settings(),null!=i&&t.writeMessage(10,i,$o.serializeBinaryToWriter),i=e.voice_settings(),null!=i&&t.writeMessage(11,i,ea.serializeBinaryToWriter),i=e.ui_state(),null!=i&&t.writeMessage(12,i,ta.serializeBinaryToWriter),null!=(i=e.metrics())&&t.writeMessage(13,i,na.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CChatUsability_ClientUsabilityMetrics_Notification"},t}(ui.Message),$o=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.notifications_show_ingame=function(){return ui.Message.getField(this,1)},t.prototype.set_notifications_show_ingame=function(e){ui.Message.setField(this,1,e)},t.prototype.notifications_show_online=function(){return ui.Message.getField(this,2)},t.prototype.set_notifications_show_online=function(e){ui.Message.setField(this,2,e)},t.prototype.notifications_show_message=function(){return ui.Message.getField(this,3)},t.prototype.set_notifications_show_message=function(e){ui.Message.setField(this,3,e)},t.prototype.notifications_events_and_announcements=function(){return ui.Message.getField(this,4)},t.prototype.set_notifications_events_and_announcements=function(e){ui.Message.setField(this,4,e)},t.prototype.sounds_play_ingame=function(){return ui.Message.getField(this,5)},t.prototype.set_sounds_play_ingame=function(e){ui.Message.setField(this,5,e)},t.prototype.sounds_play_online=function(){return ui.Message.getField(this,6)},t.prototype.set_sounds_play_online=function(e){ui.Message.setField(this,6,e)},t.prototype.sounds_play_message=function(){return ui.Message.getField(this,7)},t.prototype.set_sounds_play_message=function(e){ui.Message.setField(this,7,e)},t.prototype.sounds_events_and_announcements=function(){return ui.Message.getField(this,8)},t.prototype.set_sounds_events_and_announcements=function(e){ui.Message.setField(this,8,e)},t.prototype.always_new_chat_window=function(){return ui.Message.getField(this,9)},t.prototype.set_always_new_chat_window=function(e){ui.Message.setField(this,9,e)},t.prototype.force_alphabetic_friend_sorting=function(){return ui.Message.getField(this,10)},t.prototype.set_force_alphabetic_friend_sorting=function(e){ui.Message.setField(this,10,e)},t.prototype.chat_flash_mode=function(){return ui.Message.getField(this,11)},t.prototype.set_chat_flash_mode=function(e){ui.Message.setField(this,11,e)},t.prototype.remember_open_chats=function(){return ui.Message.getField(this,12)},t.prototype.set_remember_open_chats=function(e){ui.Message.setField(this,12,e)},t.prototype.compact_quick_access=function(){return ui.Message.getField(this,13)},t.prototype.set_compact_quick_access=function(e){ui.Message.setField(this,13,e)},t.prototype.compact_friends_list=function(){return ui.Message.getField(this,14)},t.prototype.set_compact_friends_list=function(e){ui.Message.setField(this,14,e)},t.prototype.notifications_show_chat_room_notification=function(){return ui.Message.getField(this,15)},t.prototype.set_notifications_show_chat_room_notification=function(e){ui.Message.setField(this,15,e)},t.prototype.sounds_play_chat_room_notification=function(){return ui.Message.getField(this,16)},t.prototype.set_sounds_play_chat_room_notification=function(e){ui.Message.setField(this,16,e)},t.prototype.hide_offline_friends_in_tag_groups=function(){return ui.Message.getField(this,17)},t.prototype.set_hide_offline_friends_in_tag_groups=function(e){ui.Message.setField(this,17,e)},t.prototype.hide_categorized_friends=function(){return ui.Message.getField(this,18)},t.prototype.set_hide_categorized_friends=function(e){ui.Message.setField(this,18,e)},t.prototype.categorize_in_game_friends_by_game=function(){return ui.Message.getField(this,19)},t.prototype.set_categorize_in_game_friends_by_game=function(e){ui.Message.setField(this,19,e)},t.prototype.chat_font_size=function(){return ui.Message.getField(this,20)},t.prototype.set_chat_font_size=function(e){ui.Message.setField(this,20,e)},t.prototype.use24hour_clock=function(){return ui.Message.getField(this,21)},t.prototype.set_use24hour_clock=function(e){ui.Message.setField(this,21,e)},t.prototype.do_not_disturb_mode=function(){return ui.Message.getField(this,22)},t.prototype.set_do_not_disturb_mode=function(e){ui.Message.setField(this,22,e)},t.prototype.disable_embed_inlining=function(){return ui.Message.getField(this,23)},t.prototype.set_disable_embed_inlining=function(e){ui.Message.setField(this,23,e)},t.prototype.sign_into_friends=function(){return ui.Message.getField(this,24)},t.prototype.set_sign_into_friends=function(e){ui.Message.setField(this,24,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_notifications_show_ingame(t.readBool());break;case 2:e.set_notifications_show_online(t.readBool());break;case 3:e.set_notifications_show_message(t.readBool());break;case 4:e.set_notifications_events_and_announcements(t.readBool());break;case 5:e.set_sounds_play_ingame(t.readBool());break;case 6:e.set_sounds_play_online(t.readBool());break;case 7:e.set_sounds_play_message(t.readBool());break;case 8:e.set_sounds_events_and_announcements(t.readBool());break;case 9:e.set_always_new_chat_window(t.readBool());break;case 10:e.set_force_alphabetic_friend_sorting(t.readBool());break;case 11:e.set_chat_flash_mode(t.readInt32());break;case 12:e.set_remember_open_chats(t.readBool());break;case 13:e.set_compact_quick_access(t.readBool());break;case 14:e.set_compact_friends_list(t.readBool());break;case 15:e.set_notifications_show_chat_room_notification(t.readBool());break;case 16:e.set_sounds_play_chat_room_notification(t.readBool());break;case 17:e.set_hide_offline_friends_in_tag_groups(t.readBool());break;case 18:e.set_hide_categorized_friends(t.readBool());break;case 19:e.set_categorize_in_game_friends_by_game(t.readBool());break;case 20:e.set_chat_font_size(t.readInt32());break;case 21:e.set_use24hour_clock(t.readBool());break;case 22:e.set_do_not_disturb_mode(t.readBool());break;case 23:e.set_disable_embed_inlining(t.readBool());break;case 24:e.set_sign_into_friends(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBool(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeBool(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBool(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBool(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeBool(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeBool(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeInt32(11,i),i=ui.Message.getField(e,12),void 0!==i&&t.writeBool(12,i),i=ui.Message.getField(e,13),void 0!==i&&t.writeBool(13,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeBool(14,i),i=ui.Message.getField(e,15),void 0!==i&&t.writeBool(15,i),i=ui.Message.getField(e,16),void 0!==i&&t.writeBool(16,i),i=ui.Message.getField(e,17),void 0!==i&&t.writeBool(17,i),i=ui.Message.getField(e,18),void 0!==i&&t.writeBool(18,i),i=ui.Message.getField(e,19),void 0!==i&&t.writeBool(19,i),i=ui.Message.getField(e,20),void 0!==i&&t.writeInt32(20,i),i=ui.Message.getField(e,21),void 0!==i&&t.writeBool(21,i),i=ui.Message.getField(e,22),void 0!==i&&t.writeBool(22,i),i=ui.Message.getField(e,23),void 0!==i&&t.writeBool(23,i),void 0!==(i=ui.Message.getField(e,24))&&t.writeBool(24,i)},t.prototype.getClassName=function(){return"CChatUsability_ClientUsabilityMetrics_Notification_Settings"},t}(ui.Message),ea=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_input_gain=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_input_gain=function(e){ui.Message.setField(this,1,e)},t.prototype.voice_output_gain=function(){return ui.Message.getField(this,2)},t.prototype.set_voice_output_gain=function(e){ui.Message.setField(this,2,e)},t.prototype.noise_gate_level=function(){return ui.Message.getField(this,3)},t.prototype.set_noise_gate_level=function(e){ui.Message.setField(this,3,e)},t.prototype.voice_use_echo_cancellation=function(){return ui.Message.getField(this,4)},t.prototype.set_voice_use_echo_cancellation=function(e){ui.Message.setField(this,4,e)},t.prototype.voice_use_noise_cancellation=function(){return ui.Message.getField(this,5)},t.prototype.set_voice_use_noise_cancellation=function(e){ui.Message.setField(this,5,e)},t.prototype.voice_use_auto_gain_control=function(){return ui.Message.getField(this,6)},t.prototype.set_voice_use_auto_gain_control=function(e){ui.Message.setField(this,6,e)},t.prototype.selected_non_default_mic=function(){return ui.Message.getField(this,7)},t.prototype.set_selected_non_default_mic=function(e){ui.Message.setField(this,7,e)},t.prototype.selected_non_default_output=function(){return ui.Message.getField(this,8)},t.prototype.set_selected_non_default_output=function(e){ui.Message.setField(this,8,e)},t.prototype.push_to_talk_enabled=function(){return ui.Message.getField(this,9)},t.prototype.set_push_to_talk_enabled=function(e){ui.Message.setField(this,9,e)},t.prototype.push_to_mute_enabled=function(){return ui.Message.getField(this,10)},t.prototype.set_push_to_mute_enabled=function(e){ui.Message.setField(this,10,e)},t.prototype.play_ptt_sounds=function(){return ui.Message.getField(this,11)},t.prototype.set_play_ptt_sounds=function(e){ui.Message.setField(this,11,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_input_gain(t.readFloat());break;case 2:e.set_voice_output_gain(t.readFloat());break;case 3:e.set_noise_gate_level(t.readInt32());break;case 4:e.set_voice_use_echo_cancellation(t.readBool());break;case 5:e.set_voice_use_noise_cancellation(t.readBool());break;case 6:e.set_voice_use_auto_gain_control(t.readBool());break;case 7:e.set_selected_non_default_mic(t.readBool());break;case 8:e.set_selected_non_default_output(t.readBool());break;case 9:e.set_push_to_talk_enabled(t.readBool());break;case 10:e.set_push_to_mute_enabled(t.readBool());break;case 11:e.set_play_ptt_sounds(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFloat(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFloat(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeInt32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeBool(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBool(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBool(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeBool(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeBool(10,i),void 0!==(i=ui.Message.getField(e,11))&&t.writeBool(11,i)},t.prototype.getClassName=function(){return"CChatUsability_ClientUsabilityMetrics_Notification_VoiceSettings"},t}(ui.Message),ta=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.friends_list_height=function(){return ui.Message.getField(this,1)},t.prototype.set_friends_list_height=function(e){ui.Message.setField(this,1,e)},t.prototype.friends_list_width=function(){return ui.Message.getField(this,2)},t.prototype.set_friends_list_width=function(e){ui.Message.setField(this,2,e)},t.prototype.friends_list_docked=function(){return ui.Message.getField(this,3)},t.prototype.set_friends_list_docked=function(e){ui.Message.setField(this,3,e)},t.prototype.friends_list_collapsed=function(){return ui.Message.getField(this,4)},t.prototype.set_friends_list_collapsed=function(e){ui.Message.setField(this,4,e)},t.prototype.friends_list_group_chats_height=function(){return ui.Message.getField(this,5)},t.prototype.set_friends_list_group_chats_height=function(e){ui.Message.setField(this,5,e)},t.prototype.friends_list_visible=function(){return ui.Message.getField(this,6)},t.prototype.set_friends_list_visible=function(e){ui.Message.setField(this,6,e)},t.prototype.chat_popups_opened=function(){return ui.Message.getField(this,7)},t.prototype.set_chat_popups_opened=function(e){ui.Message.setField(this,7,e)},t.prototype.group_chat_tabs_opened=function(){return ui.Message.getField(this,8)},t.prototype.set_group_chat_tabs_opened=function(e){ui.Message.setField(this,8,e)},t.prototype.friend_chat_tabs_opened=function(){return ui.Message.getField(this,9)},t.prototype.set_friend_chat_tabs_opened=function(e){ui.Message.setField(this,9,e)},t.prototype.chat_window_width=function(){return ui.Message.getField(this,10)},t.prototype.set_chat_window_width=function(e){ui.Message.setField(this,10,e)},t.prototype.chat_window_height=function(){return ui.Message.getField(this,11)},t.prototype.set_chat_window_height=function(e){ui.Message.setField(this,11,e)},t.prototype.category_collapse=function(){return ui.Message.getWrapperField(this,ia,12,1)},t.prototype.set_category_collapse=function(e){ui.Message.setWrapperField(this,12,e)},t.prototype.group_chat_left_col_collapsed=function(){return ui.Message.getField(this,13)},t.prototype.set_group_chat_left_col_collapsed=function(e){ui.Message.setField(this,13,e)},t.prototype.group_chat_right_col_collapsed=function(){return ui.Message.getField(this,14)},t.prototype.set_group_chat_right_col_collapsed=function(e){ui.Message.setField(this,14,e)},t.prototype.in_one_on_one_voice_chat=function(){return ui.Message.getField(this,15)},t.prototype.set_in_one_on_one_voice_chat=function(e){ui.Message.setField(this,15,e)},t.prototype.in_group_voice_chat=function(){return ui.Message.getField(this,16)},t.prototype.set_in_group_voice_chat=function(e){ui.Message.setField(this,16,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_friends_list_height(t.readInt32());break;case 2:e.set_friends_list_width(t.readInt32());break;case 3:e.set_friends_list_docked(t.readBool());break;case 4:e.set_friends_list_collapsed(t.readBool());break;case 5:e.set_friends_list_group_chats_height(t.readInt32());break;case 6:e.set_friends_list_visible(t.readBool());break;case 7:e.set_chat_popups_opened(t.readInt32());break;case 8:e.set_group_chat_tabs_opened(t.readInt32());break;case 9:e.set_friend_chat_tabs_opened(t.readInt32());break;case 10:e.set_chat_window_width(t.readInt32());break;case 11:e.set_chat_window_height(t.readInt32());break;case 12:var i=new ia;t.readMessage(i,ia.deserializeBinaryFromReader),e.set_category_collapse(i);break;case 13:e.set_group_chat_left_col_collapsed(t.readInt32());break;case 14:e.set_group_chat_right_col_collapsed(t.readInt32());break;case 15:e.set_in_one_on_one_voice_chat(t.readBool());break;case 16:e.set_in_group_voice_chat(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeInt32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeBool(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeInt32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeInt32(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeInt32(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeInt32(10,i),i=ui.Message.getField(e,11),void 0!==i&&t.writeInt32(11,i),i=e.category_collapse(),null!=i&&t.writeMessage(12,i,ia.serializeBinaryToWriter),i=ui.Message.getField(e,13),void 0!==i&&t.writeInt32(13,i),i=ui.Message.getField(e,14),void 0!==i&&t.writeInt32(14,i),i=ui.Message.getField(e,15),void 0!==i&&t.writeBool(15,i),void 0!==(i=ui.Message.getField(e,16))&&t.writeBool(16,i)},t.prototype.getClassName=function(){return"CChatUsability_ClientUsabilityMetrics_Notification_UIState"},t}(ui.Message),ia=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.in_game_collapsed=function(){return ui.Message.getField(this,1)},t.prototype.set_in_game_collapsed=function(e){ui.Message.setField(this,1,e)},t.prototype.online_collapsed=function(){return ui.Message.getField(this,2)},t.prototype.set_online_collapsed=function(e){ui.Message.setField(this,2,e)},t.prototype.offline_collapsed=function(){return ui.Message.getField(this,3)},t.prototype.set_offline_collapsed=function(e){ui.Message.setField(this,3,e)},t.prototype.game_groups_collapsed=function(){return ui.Message.getField(this,4)},t.prototype.set_game_groups_collapsed=function(e){ui.Message.setField(this,4,e)},t.prototype.categories_collapsed=function(){return ui.Message.getField(this,5)},t.prototype.set_categories_collapsed=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_in_game_collapsed(t.readBool());break;case 2:e.set_online_collapsed(t.readBool());break;case 3:e.set_offline_collapsed(t.readBool());break;case 4:e.set_game_groups_collapsed(t.readInt32());break;case 5:e.set_categories_collapsed(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBool(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeInt32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeInt32(5,i)},t.prototype.getClassName=function(){return"CChatUsability_ClientUsabilityMetrics_Notification_UIState_CategoryCollapseState"},t}(ui.Message),na=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.friends_count=function(){return ui.Message.getField(this,1)},t.prototype.set_friends_count=function(e){ui.Message.setField(this,1,e)},t.prototype.friends_category_count=function(){return ui.Message.getField(this,2)},t.prototype.set_friends_category_count=function(e){ui.Message.setField(this,2,e)},t.prototype.friends_categorized_count=function(){return ui.Message.getField(this,3)},t.prototype.set_friends_categorized_count=function(e){ui.Message.setField(this,3,e)},t.prototype.friends_online_count=function(){return ui.Message.getField(this,4)},t.prototype.set_friends_online_count=function(e){ui.Message.setField(this,4,e)},t.prototype.friends_in_game_count=function(){return ui.Message.getField(this,5)},t.prototype.set_friends_in_game_count=function(e){ui.Message.setField(this,5,e)},t.prototype.friends_in_game_singleton_count=function(){return ui.Message.getField(this,6)},t.prototype.set_friends_in_game_singleton_count=function(e){ui.Message.setField(this,6,e)},t.prototype.game_group_count=function(){return ui.Message.getField(this,7)},t.prototype.set_game_group_count=function(e){ui.Message.setField(this,7,e)},t.prototype.friends_favorite_count=function(){return ui.Message.getField(this,8)},t.prototype.set_friends_favorite_count=function(e){ui.Message.setField(this,8,e)},t.prototype.group_chat_count=function(){return ui.Message.getField(this,9)},t.prototype.set_group_chat_count=function(e){ui.Message.setField(this,9,e)},t.prototype.group_chat_favorite_count=function(){return ui.Message.getField(this,10)},t.prototype.set_group_chat_favorite_count=function(e){ui.Message.setField(this,10,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_friends_count(t.readInt32());break;case 2:e.set_friends_category_count(t.readInt32());break;case 3:e.set_friends_categorized_count(t.readInt32());break;case 4:e.set_friends_online_count(t.readInt32());break;case 5:e.set_friends_in_game_count(t.readInt32());break;case 6:e.set_friends_in_game_singleton_count(t.readInt32());break;case 7:e.set_game_group_count(t.readInt32());break;case 8:e.set_friends_favorite_count(t.readInt32());break;case 9:e.set_group_chat_count(t.readInt32());break;case 10:e.set_group_chat_favorite_count(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeInt32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeInt32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeInt32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeInt32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeInt32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeInt32(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeInt32(9,i),void 0!==(i=ui.Message.getField(e,10))&&t.writeInt32(10,i)},t.prototype.getClassName=function(){return"CChatUsability_ClientUsabilityMetrics_Notification_Metrics"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Chat.RequestFriendPersonaStates#1",t,qn)}e.RequestFriendPersonaStates=t}(xn||(xn={}));var ra;!function(e){function t(e,t){return e.SendMsg("ChatRoom.CreateChatRoomGroup#1",t,Yn)}function i(e,t){return e.SendMsg("ChatRoom.SaveChatRoomGroup#1",t,$n)}function n(e,t){return e.SendMsg("ChatRoom.RenameChatRoomGroup#1",t,Zn)}function r(e,t){return e.SendMsg("ChatRoom.SetChatRoomGroupTagline#1",t,tr)}function o(e,t){return e.SendMsg("ChatRoom.SetChatRoomGroupAvatar#1",t,nr)}function a(e,t){return e.SendMsg("ChatRoom.SetChatRoomGroupWatchingBroadcast#1",t,or)}function s(e,t){return e.SendMsg("ChatRoom.MuteUserInGroup#1",t,sr)}function c(e,t){return e.SendMsg("ChatRoom.KickUserFromGroup#1",t,lr)}function l(e,t){return e.SendMsg("ChatRoom.SetUserBanState#1",t,dr)}function u(e,t){return e.SendMsg("ChatRoom.RevokeInviteToGroup#1",t,mr)}function d(e,t){return e.SendMsg("ChatRoom.CreateRole#1",t,_r)}function p(e,t){return e.SendMsg("ChatRoom.GetRoles#1",t,yr)}function m(e,t){return e.SendMsg("ChatRoom.RenameRole#1",t,br)}function h(e,t){return e.SendMsg("ChatRoom.ReorderRole#1",t,Sr)}function g(e,t){return e.SendMsg("ChatRoom.DeleteRole#1",t,Fr)}function f(e,t){return e.SendMsg("ChatRoom.GetRoleActions#1",t,wr)}function _(e,t){return e.SendMsg("ChatRoom.ReplaceRoleActions#1",t,Or)}function y(e,t){return e.SendMsg("ChatRoom.AddRoleToUser#1",t,Rr)}function v(e,t){return e.SendMsg("ChatRoom.GetRolesForUser#1",t,Er)}function b(e,t){return e.SendMsg("ChatRoom.DeleteRoleFromUser#1",t,kr)}function C(e,t){return e.SendMsg("ChatRoom.JoinChatRoomGroup#1",t,$r)}function S(e,t){return e.SendMsg("ChatRoom.InviteFriendToChatRoomGroup#1",t,to)}function M(e,t){return e.SendMsg("ChatRoom.LeaveChatRoomGroup#1",t,no)}function F(e,t){return e.SendMsg("ChatRoom.CreateChatRoom#1",t,jr)}function w(e,t){return e.SendMsg("ChatRoom.DeleteChatRoom#1",t,Hr)}function B(e,t){return e.SendMsg("ChatRoom.RenameChatRoom#1",t,Kr)}function O(e,t){return e.SendMsg("ChatRoom.SendChatMessage#1",t,uo)}function I(e,t){return e.SendMsg("ChatRoom.JoinVoiceChat#1",t,oo)}function R(e,t){return e.SendMsg("ChatRoom.LeaveVoiceChat#1",t,so)}function E(e,t){return e.SendMsg("ChatRoom.GetMessageHistory#1",t,fo)}function T(e,t){return e.SendMsg("ChatRoom.GetMyChatRoomGroups#1",t,Zr)}function k(e,t){return e.SendMsg("ChatRoom.GetChatRoomGroupState#1",t,Yr)}function D(e,t){return e.SendMsg("ChatRoom.GetChatRoomGroupSummary#1",t,Nr)}function G(e,t){return e.SendNotification("ChatRoom.AckChatMessage#1",t)}function N(e,t){return e.SendMsg("ChatRoom.CreateInviteLink#1",t,So)}function L(e,t){return e.SendMsg("ChatRoom.GetInviteLinkInfo#1",t,Fo)}function A(e,t){return e.SendMsg("ChatRoom.GetInviteInfo#1",t,Bo)}function P(e,t){return e.SendMsg("ChatRoom.GetInviteLinksForGroup#1",t,Io)}function x(e,t){return e.SendMsg("ChatRoom.GetBanList#1",t,Do)}function z(e,t){return e.SendMsg("ChatRoom.GetInviteList#1",t,Ao)}function U(e,t){return e.SendMsg("ChatRoom.DeleteInviteLink#1",t,To)}function V(e,t){return e.SendMsg("ChatRoom.SetSessionActiveChatRoomGroups#1",t,xo)}function j(e,t){return e.SendMsg("ChatRoom.SetUserChatGroupPreferences#1",t,jo)}function W(e,t){return e.SendMsg("ChatRoom.DeleteChatMessages#1",t,qo)}e.CreateChatRoomGroup=t,e.SaveChatRoomGroup=i,e.RenameChatRoomGroup=n,e.SetChatRoomGroupTagline=r,e.SetChatRoomGroupAvatar=o,e.SetChatRoomGroupWatchingBroadcast=a,e.MuteUserInGroup=s,e.KickUserFromGroup=c,e.SetUserBanState=l,e.RevokeInviteToGroup=u,e.CreateRole=d,e.GetRoles=p,e.RenameRole=m,e.ReorderRole=h,e.DeleteRole=g,e.GetRoleActions=f,e.ReplaceRoleActions=_,e.AddRoleToUser=y,e.GetRolesForUser=v,e.DeleteRoleFromUser=b,e.JoinChatRoomGroup=C,e.InviteFriendToChatRoomGroup=S,e.LeaveChatRoomGroup=M,e.CreateChatRoom=F,e.DeleteChatRoom=w,e.RenameChatRoom=B,e.SendChatMessage=O,e.JoinVoiceChat=I,e.LeaveVoiceChat=R,e.GetMessageHistory=E,e.GetMyChatRoomGroups=T,e.GetChatRoomGroupState=k,e.GetChatRoomGroupSummary=D,e.AckChatMessage=G,e.CreateInviteLink=N,e.GetInviteLinkInfo=L,e.GetInviteInfo=A,e.GetInviteLinksForGroup=P,e.GetBanList=x,e.GetInviteList=z,e.DeleteInviteLink=U,e.SetSessionActiveChatRoomGroups=V,e.SetUserChatGroupPreferences=j,e.DeleteChatMessages=W}(ra||(ra={}));var oa;!function(e){function t(e,t){return e.SendMsg("ClanChatRooms.GetClanChatRoomInfo#1",t,Jo)}function i(e,t){return e.SendMsg("ClanChatRooms.SetClanChatRoomPrivate#1",t,Yo)}e.GetClanChatRoomInfo=t,e.SetClanChatRoomPrivate=i}(oa||(oa={}));var aa;!function(e){e.NotifyIncomingChatMessageHandler={name:"ChatRoomClient.NotifyIncomingChatMessage#1",request:po},e.NotifyChatMessageModifiedHandler={name:"ChatRoomClient.NotifyChatMessageModified#1",request:mo},e.NotifyMemberStateChangeHandler={name:"ChatRoomClient.NotifyMemberStateChange#1",request:yo},e.NotifyChatRoomHeaderStateChangeHandler={name:"ChatRoomClient.NotifyChatRoomHeaderStateChange#1",request:Dr},e.NotifyChatRoomGroupRoomsChangeHandler={name:"ChatRoomClient.NotifyChatRoomGroupRoomsChange#1",request:vo},e.NotifyShouldRejoinChatRoomVoiceChatHandler={name:"ChatRoomClient.NotifyShouldRejoinChatRoomVoiceChat#1",request:co},e.NotifyChatGroupUserStateChangedHandler={name:"ChatRoomClient.NotifyChatGroupUserStateChanged#1",request:Xo},e.NotifyAckChatMessageEchoHandler={name:"ChatRoomClient.NotifyAckChatMessageEcho#1",request:bo}}(aa||(aa={}));var sa;!function(e){function t(e,t){return e.SendNotification("ChatUsability.NotifyClientUsabilityMetrics#1",t)}e.NotifyClientUsabilityMetrics=t}(sa||(sa={}));var ca;!function(e){e.NotifyRequestClientUsabilityMetricsHandler={name:"ChatUsabilityClient.NotifyRequestClientUsabilityMetrics#1",request:Zo}}(ca||(ca={}));var la,ua=i("rZel"),da=function(){function e(){}return e.prototype.OnTabActivate=function(){this.m_msLastActive=performance.now(),this.InternalOnTabActivate()},e.prototype.GetTimeLastActivate=function(){return this.m_msLastActive||0},e.prototype.IsChatRoom=function(){return!1},e.prototype.IsFriendChat=function(){return!1},e}(),pa=0,ma=function(){function e(e){this.m_vecTabs=_i.observable.array(null,{deep:!1}),this.m_id=pa++,this.m_browserContext=e}return e.prototype.GetBrowserContext=function(){return this.m_browserContext},e.prototype.GetTitle=function(){return this.m_activeTab?2==this.tabCount?Object(ua.b)("#WindowTitle_ChatTabTitle",this.m_activeTab.GetTabName()):this.tabCount>2?Object(ua.b)("#WindowTitle_ChatTabTitlePlural",this.m_activeTab.GetTabName(),this.tabCount-1):this.m_activeTab.GetTabName():""},e.prototype.OnWindowFocus=function(){this.m_activeTab&&this.m_activeTab.OnTabFocus()},Object.defineProperty(e.prototype,"tabs",{get:function(){return this.m_vecTabs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabCount",{get:function(){return this.m_vecTabs.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTab",{get:function(){return this.m_activeTab},enumerable:!0,configurable:!0}),e.prototype.GetTabSetIdentifier=function(){return this.m_vecTabs.map(function(e){return e.GetUniqueID()}).join("_")},e.prototype.GetTabForChat=function(e){for(var t=0,i=this.m_vecTabs;t<i.length;t++){var n=i[t];if(n.IsTabForChat(e))return n}return null},e.prototype.GetTabByUniqueID=function(e){for(var t=0,i=this.m_vecTabs;t<i.length;t++){var n=i[t];if(n.GetUniqueID()==e)return n}return null},e.prototype.BHasTab=function(e){return-1!==this.m_vecTabs.indexOf(e)},e.prototype.AddTab=function(e){-1==this.m_vecTabs.indexOf(e)&&(this.m_vecTabs.push(e),!this.m_activeTab&&this.m_vecTabs.length>0&&(this.m_activeTab=this.m_vecTabs[0]))},e.prototype.ActivateTab=function(e){if(-1==this.m_vecTabs.indexOf(e))return void console.log("Tab not found");this.activeTab&&this.activeTab!=e&&this.activeTab.OnTabDeactivate(),this.m_activeTab=e,e.OnTabActivate(),this.Focus()},e.prototype.ActivateNextTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.ActivatePreviousTab=function(){var e=this.m_vecTabs.indexOf(this.m_activeTab);e=(e+this.m_vecTabs.length-1)%this.m_vecTabs.length,this.ActivateTab(this.m_vecTabs[e])},e.prototype.RemoveTab=function(e){var t=this.m_vecTabs.indexOf(e);if(-1==t)return!1;var i=e&&e==this.m_activeTab;if(this.m_vecTabs.splice(t,1),i)if(this.m_vecTabs.length){for(var n=void 0,r=0,o=this.m_vecTabs;r<o.length;r++){var a=o[r];(!n||a.GetTimeLastActivate()>n.GetTimeLastActivate())&&(n=a)}this.m_activeTab=n||this.m_vecTabs[Math.max(t-1,0)]}else this.m_activeTab=void 0;return 0==this.m_vecTabs.length&&wd.UIStore.CloseTabSet(this),!0},e.prototype.MoveTabAfter=function(e,t){var i=this.m_vecTabs.indexOf(t);-1!=i&&this.MoveTabToIndex(e,i+1)},e.prototype.MoveTabToIndex=function(e,t){var i=this.m_vecTabs.indexOf(e);-1!=i&&_n.e(this.m_vecTabs,i,Math.min(t,this.m_vecTabs.length-1))},e.prototype.Focus=function(){wd.UIStore.FocusTabSet(this)},e.prototype.OnPopupClosed=function(e){e&&wd.UIStore.SetSuppressBrowserContextBroadcasting(!0),wd.UIStore.OnTabSetClosed(this),this.CloseAllTabs(),e&&wd.UIStore.SetSuppressBrowserContextBroadcasting(!1)},e.prototype.CloseAllTabs=function(){this.m_activeTab=void 0;for(var e=0,t=this.m_vecTabs;e<t.length;e++){var i=t[e];wd.UIStore.CloseTab(this.m_browserContext,i,!0)}this.m_vecTabs.clear()},Object.defineProperty(e.prototype,"is_popup_active",{get:function(){return wd.UIStore.BIsTabSetActive(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_visible",{get:function(){return wd.UIStore.BIsTabSetVisible(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_popup_focused",{get:function(){return wd.UIStore.BIsTabSetFocused(this)},enumerable:!0,configurable:!0}),e.prototype.Serialize=function(){for(var e=[],t=0,i=this.m_vecTabs;t<i.length;t++){var n=i[t];n.GetUniqueID().startsWith("br")||e.push(n.GetUniqueID())}return{tabs:e,active_tab:this.activeTab&&this.activeTab.GetUniqueID()}},si.c([_i.observable],e.prototype,"m_id",void 0),si.c([_i.observable],e.prototype,"m_activeTab",void 0),si.c([_i.action],e.prototype,"AddTab",null),si.c([_i.action],e.prototype,"ActivateTab",null),si.c([_i.action],e.prototype,"ActivateNextTab",null),si.c([_i.action],e.prototype,"ActivatePreviousTab",null),si.c([_i.action],e.prototype,"RemoveTab",null),si.c([_i.action],e.prototype,"OnPopupClosed",null),si.c([_i.action],e.prototype,"CloseAllTabs",null),e}(),ha=i("3e1Q"),ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.BIsExpired=function(){return wd.GetServerRTime32()>=this.m_rtTimeExpires},t.prototype.InitFromInviteLinkInfo=function(e){this.m_ulChatRoomGroupID=e.group_summary().chat_group_id(),this.m_ulChatID=e.chat_id();var t=new hi.a(e.steamid_sender());t.BIsIndividualAccount()&&(this.m_unAccountIDInviter=t.GetAccountID()),this.m_rtTimeExpires=e.time_expires(),this.m_bIsBanned=e.banned(),this.m_rtKickExpires=e.time_kick_expire(),this.m_bValid=!0,this.m_bReady=!0},t.prototype.InitInvalid=function(){this.m_bValid=!1,this.m_bReady=!0},t.prototype.InitDirectInvite=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=void 0),this.m_ulChatRoomGroupID=e,this.m_ulChatID=t,this.m_bIsBanned=i,this.m_rtKickExpires=n,this.m_rtTimeExpires=Xi.b,this.m_bValid=!0,this.m_bReady=!0},si.c([_i.action],t.prototype,"InitFromInviteLinkInfo",null),si.c([_i.action],t.prototype,"InitInvalid",null),si.c([_i.action],t.prototype,"InitDirectInvite",null),t}(ha.b),fa=function(){function e(e){this.m_mapInviteByCode=new Map,this.m_ChatStore=e}return e.prototype.JoinChatGroup=function(e,t,i){var n=new ga;return n.InitDirectInvite(e,t),this.AcceptInvite(n,i)},e.prototype.AcceptInvite=function(e,t){var i=this;null==t&&(t=wd.GetDefaultBrowserContext());var n=fi.Init(Qr);return n.Body().set_chat_group_id(e.GetChatRoomGroupID()),e.BIsInviteLink()&&n.Body().set_invite_code(e.GetInviteCode()),e.GetChatID()&&n.Body().set_chat_id(e.GetChatID()),ra.JoinChatRoomGroup(this.m_ChatStore.CMInterface.GetServiceTransport(),n).then(function(e){var n={result:e.GetEResult()};if(1==n.result){var r=i.m_ChatStore.AddJoinedChatRoomGroup(e.Body().state(),e.Body().user_chat_state());wd.UIStore.ShowAndOrActivateChatRoomGroup(t,r,!0);var o=e.Body().join_chat_id();if(r){var a=r.GetChatRoom(o);a&&a.StartVoiceChat()}}else 15==n.result&&(n.time=e.Body().time_expire());return n})},e.prototype.GetInviteFromCode=function(e){var t=this,i=this.m_mapInviteByCode.get(e);if(i||(i=new ga(e),this.m_mapInviteByCode.set(e,i)),!i.BIsReady()||!this.m_ChatStore.GetChatRoomGroup(i.GetChatRoomGroupID())){var n=fi.Init(Mo);n.Body().set_invite_code(e),ra.GetInviteLinkInfo(this.m_ChatStore.CMInterface.GetServiceTransport(),n).then(function(e){1==e.GetEResult()?(t.m_ChatStore.AddKnownChatRoomGroup(e.Body().group_summary(),e.Body().user_chat_group_state()),i.InitFromInviteLinkInfo(e.Body())):i.InitInvalid()})}return i},e.prototype.GetDirectInviteInfo=function(e,t,i){var n=this,r=new ga,o=this.m_ChatStore.GetChatRoomGroup(e);if(o&&o.GetChatRoom(t))r.InitDirectInvite(e,t);else{var a=fi.Init(wo);a.Body().set_steamid_invitee(hi.a.InitFromAccountID(i).ConvertTo64BitString()),a.Body().set_chat_group_id(e),a.Body().set_chat_id(t),ra.GetInviteInfo(this.m_ChatStore.CMInterface.GetServiceTransport(),a).then(function(i){if(1!=i.GetEResult()||!i.Body().group_summary().chat_group_id())return console.log("GetDirectInviteInfo: respose EResult "+i.GetEResult()),void r.InitInvalid();n.m_ChatStore.AddKnownChatRoomGroup(i.Body().group_summary(),null),r.InitDirectInvite(e,t,i.Body().banned(),i.Body().time_kick_expire())})}return r},e}(),_a=function(){function e(e,t,i,n,r,o){this.unAccountIDInviter=e,this.rtTimestamp=t,this.appID=i,this.connectString=n,this.lobbyID=o,this.bDismissed=r,this.bAccepted=!1}return e.prototype.AcceptGameInvite=function(){var e,t=hi.a.InitFromAccountID(this.unAccountIDInviter);void 0!=this.lobbyID?e="steam://joinlobby/"+this.appID+"/"+this.lobbyID+"/"+t.ConvertTo64BitString():(e="steam://rungame/"+this.appID+"/"+t.ConvertTo64BitString(),void 0!==this.connectString&&(e+="/"+encodeURIComponent(this.connectString))),wd.OpenURLInBrowser(e,Md),this.bAccepted=!0,wd.ChatStore.GameInviteStore.RecordDismissTime(this)},e.prototype.DismissInvite=function(){this.bDismissed=!0,wd.ChatStore.GameInviteStore.RecordDismissTime(this)},si.c([_i.observable],e.prototype,"bDismissed",void 0),si.c([_i.observable],e.prototype,"bAccepted",void 0),si.c([_i.action],e.prototype,"AcceptGameInvite",null),si.c([_i.action],e.prototype,"DismissInvite",null),e}(),ya={dismisstimes:{}},va=function(){function e(){this.m_mapGameInvites=new Map,this.m_mapDismissedInvites=_i.observable.map(),this.m_mapInviteByCode=new Map}return e.prototype.Init=function(){var e=this;wd.SettingsStore.GetObjectFromLocalStorageWhenReady("GameInvites",ya).then(function(t){var i=new Date;i.setDate(i.getDate()-14),e.m_mapDismissedInvites.clear();for(var n in t.dismisstimes){var r=parseInt(n),o=t.dismisstimes[n];new Date(1e3*o)<i||e.m_mapDismissedInvites.set(r,o)}})},e.prototype.RegisterGameInvite=function(e,t,i,n,r){var o=this.m_mapGameInvites.get(e);o||(o=new Map,this.m_mapGameInvites.set(e,o));var a=o.get(t);if(!a){var s=!1,c=this.m_mapDismissedInvites.get(e);c&&(s=t<=c),a=new _a(e,t,i,n,s,r),o.set(t,a),o.forEach(function(e){e.rtTimestamp<t&&e.DismissInvite()})}return a},e.prototype.RecordDismissTime=function(e){var t=this.m_mapDismissedInvites.get(e.unAccountIDInviter);t&&t>e.rtTimestamp||(this.m_mapDismissedInvites.set(e.unAccountIDInviter,e.rtTimestamp),this.WriteToLocalStorage())},e.prototype.WriteToLocalStorage=function(){wd.SettingsStore.StoreObjectInLocalStorage("GameInvites",{dismisstimes:this.m_mapDismissedInvites})},e}(),ba=function(){function e(){this.bCollapsed=!1}return e.prototype.IsEmpty=function(){return!this.bCollapsed&&void 0===this.nDefaultWidth&&void 0===this.nDesiredWidth},e}(),Ca=function(){function e(){this.m_mapEmbed=new _i.ObservableMap}return e.prototype.Init=function(){var e=this;wd.SettingsStore.GetObjectFromLocalStorageWhenReady("ChatEmbeds",{}).then(function(t){e.m_mapEmbed.clear();for(var i in t){var n=new ba;Object.assign(n,t[i]),e.m_mapEmbed.set(i,n)}})},e.prototype.GetKey=function(e,t){return t+"_"+e},e.prototype.EvictOldestIfNecessary=function(){if(this.m_mapEmbed.size>100){var e=Array.from(this.m_mapEmbed.keys()).sort()[0];this.m_mapEmbed.delete(e)}},e.prototype.GetOrCreateEmbedData=function(e,t){var i=this.GetKey(e,t),n=this.m_mapEmbed.get(i);return n||(n=new ba,n.bCollapsed=!1),n},e.prototype.SaveEmbedData=function(e,t,i){i.IsEmpty()?this.m_mapEmbed.delete(this.GetKey(e,t)):this.m_mapEmbed.set(this.GetKey(e,t),i),this.EvictOldestIfNecessary(),this.WriteToLocalStorage()},e.prototype.WriteToLocalStorage=function(){wd.SettingsStore.StoreObjectInLocalStorage("ChatEmbeds",this.m_mapEmbed)},e.prototype.GetCollapsedState=function(e,t){var i=this.m_mapEmbed.get(this.GetKey(e,t));return!(!i||!i.bCollapsed)},e.prototype.SetCollapsedState=function(e,t,i){var n=this.GetOrCreateEmbedData(e,t);n.bCollapsed=i,this.SaveEmbedData(e,t,n)},e.prototype.GetWidths=function(e,t){var i=this.m_mapEmbed.get(this.GetKey(e,t));if(i&&i.nDesiredWidth&&i.nDefaultWidth)return{nDesiredWidth:i.nDesiredWidth,nDefaultWidth:i.nDefaultWidth}},e.prototype.SetWidths=function(e,t,i,n){var r=this.GetOrCreateEmbedData(e,t);i==n?(delete r.nDefaultWidth,delete r.nDesiredWidth):(r.nDesiredWidth=i,r.nDefaultWidth=n),this.SaveEmbedData(e,t,r)},e}(),Sa=i("Jmof"),Ma=i.n(Sa),Fa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.GetArgument=function(e,t){return void 0===t&&(t=!1),!e||t&&void 0===this.props.args[e]?this.props.args[""]:this.props.args[e]},t}(Sa.Component),wa=function(e){function t(t){var i=e.call(this,t)||this;return i.state={failedToRender:!1},i}return si.d(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({failedToRender:!0})},t.prototype.render=function(){if(this.state.failedToRender)return this.props.bbcode;var e=this.props.bbcode;return!0!==this.props.bSkipTrimInput&&(e=e.trim()),this.props.parser.ParseBBCode(e,this.props.context)},t}(Sa.PureComponent),Ba=function(){function e(e){this.m_dictComponents=e}return e.prototype.dictComponents=function(){return this.m_dictComponents},e.EscapeBBCode=function(e){return e.replace(/[\[\\]/g,"\\$&")},e.prototype.StripBBCode=function(e,t){for(var i="",n=this.Parse_FindBBCodeNodes(e.trim()),r=0,o=n;r<o.length;r++){var a=o[r];1==a.type&&(i+=a.text)}return i},e.prototype.EndAndStartNewNode=function(e,t,i){void 0===i&&(i=0),e.push(t);var n=new ka;return n.type=i,n},e.prototype.Parse_FindBBCodeNodes=function(e){for(var t=[],i=new ka,n=!1,r=!1,o=0;o<e.length;o++){var a=e[o];switch(i.type){case 0:"["==a?(i.type=2,r=!0):(i.type=1,"\\"==a?n=!n:i.text+=a);break;case 2:case 3:"/"==a&&r?(i.type=3,i.text="",r=!1):"["!=a||n?"]"!=a||n?"\\"==a?(i.text+=a,n=!n,r=!1):(i.text+=a,n=!1,r=!1):(r&&i.ConvertMalformedNodeToText(),i=this.EndAndStartNewNode(t,i),r=!1):(i.ConvertMalformedNodeToText(),i=this.EndAndStartNewNode(t,i,2),r=!0);break;case 1:"["!=a||n?"\\"==a?(n&&(i.text+=a),n=!n):(i.text+=a,n=!1):(i=this.EndAndStartNewNode(t,i,2),r=!0)}}return 0!=i.type&&(2!=i.type&&3!=i.type||i.ConvertMalformedNodeToText(),t.push(i)),t},e.prototype.ParseTagArguments=function(e){if(!e||e.length<1)return{};var t={},i="",n="",r=0,o=0;"="==e[0]&&(r=2);var a=!1;for(o++;o<e.length;o++){var s=e[o],c=!0,l=!1;switch(r){case 0:if("="==s)return{};if(" "==s)continue;r=1;break;case 1:"="!=s&&" "!=s||a||(r=" "==s?0:2,c=!1);break;case 2:" "==s?(r=0,c=!1,l=!0):'"'==s?(r=4,c=!1):r=3;break;case 3:case 4:(" "==s&&4!=r&&!a||'"'==s&&4==r&&!a)&&(r=0,c=!1,l=!0)}c&&("\\"!=s||a?(a=!1,1==r?i+=s:3==r||4==r?n+=s:AssertMsg(!1,"Not expecting to accumulate buffer in state %u",r)):a=!0),l&&(t[i]=n,i="",n="")}return 0!=r&&(t[i]=n),t},e}(),Oa=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.ParseBBCode=function(e,t){var i=this.Parse_FindBBCodeNodes(e);return this.Parse_NotificationHandlers(i,t)},t.prototype.Parse_NotificationHandlers=function(e,t){for(var i=void 0,n=this.dictComponents(),r=0,o=e;r<o.length;r++){var a=o[r];if(2==a.type){var s=a.text.indexOf("="),c=a.text.indexOf(" ");-1!=c&&(-1==s||c<s)&&(s=c);var l=a.text,u=void 0;s>0&&(u=l.substr(s),l=l.substr(0,s)),i||(i=[]),i.push({tagname:l,argumentstring:u,text:""})}else if(3==a.type){var d=i&&i.pop();if(d&&d.tagname==a.text&&n[d.tagname])return n[d.tagname]({context:t,tagname:d.tagname,args:this.ParseTagArguments(d.argumentstring),text:d.text})}else 1==a.type&&i&&i.length&&(i[i.length-1].text+=a.text)}},t}(Ba),Ia=function(){function e(){this.m_rctElements=[]}return e.prototype.AppendText=function(e){e.length&&this.m_rctElements.push(e)},e.prototype.AppendNodes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i;(i=this.m_rctElements).push.apply(i,e)},Object.defineProperty(e.prototype,"elements",{get:function(){return this.m_rctElements},enumerable:!0,configurable:!0}),e}(),Ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.AppendText=function(e){for(var t=e.indexOf("\n");-1!==t;t=e.indexOf("\n"))this.m_rctElements.push(this.BuildTextComponent(e.substr(0,t))),this.m_rctElements.push(this.BuildNewlineComponent()),e=e.substr(t+1);e.length&&this.m_rctElements.push(this.BuildTextComponent(e))},t}(Ia),Ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.BuildTextComponent=function(e){return e},t.prototype.BuildNewlineComponent=function(){return Sa.createElement("br")},t}(Ra),Ta=function(e){function t(t,i){void 0===i&&(i=Ia);var n=e.call(this,t)||this;return n.m_accumulatorType=i,n}return si.d(t,e),t.prototype.ParseBBCode=function(e,t){var i=this.Parse_FindBBCodeNodes(e);return this.Parse_BuildReactComponents(i,t)},t.prototype.Parse_BuildReactComponents=function(e,t){for(var i=new this.m_accumulatorType,n=void 0,r=this.dictComponents(),o=0,a=e;o<a.length;o++){var s=a[o];if(1==s.type)i.AppendText(s.text);else if(2==s.type){var c=s.text.indexOf("="),l=s.text.indexOf(" ");-1!=l&&(-1==c||l<c)&&(c=l);var u=s.text,d=void 0;c>0&&(d=u.substr(c),u=u.substr(0,c)),n||(n=[]),n.push({accumulator:i,tagname:u,argumentstring:d}),i=new this.m_accumulatorType}else if(3==s.type){var p=n&&n.pop();if(p&&p.tagname==s.text&&r[p.tagname]){var m=r[p.tagname],h=n.map(function(e){return e.tagname}),g=Sa.createElement.apply(Sa,[m,{context:t,tagname:p.tagname,parentTags:h,args:this.ParseTagArguments(p.argumentstring)}].concat(i.elements));i=p.accumulator,i.AppendNodes(g)}else if(p){var f=p.accumulator;f.AppendText("["+p.tagname+(p.argumentstring?p.argumentstring:"")+"]"),f.AppendNodes.apply(f,i.elements),f.AppendText("[/"+s.text+"]"),i=f}}}for(;n&&n.length;){var _=n.pop(),f=_.accumulator;f.AppendText("["+_.tagname+(_.argumentstring?"="+_.argumentstring:"")+"]"),f.AppendNodes.apply(f,i.elements),i=f}var y=i.elements;return y.length>1?Sa.createElement.apply(Sa,[Sa.Fragment,null].concat(y)):1==y.length?y[0]:null},t}(Ba),ka=function(){function e(){this.type=0,this.text=""}return e.prototype.ConvertMalformedNodeToText=function(){3==this.type?this.text="[/"+this.text:2==this.type&&(this.text="["+this.text),this.type=1},e}(),Da=function(){function e(e){this.idGenerator=e||function(){return""}}return e.prototype.LOG=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&console.log.apply(console,[this.idGenerator()+":"].concat(e))},e.create=function(t,i){void 0===i&&(i=!1);var n=new e(t);return n.enabled=i,n.LOG.bind(n)},e}(),Ga=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.type=function(){return ui.Message.getField(this,1)},t.prototype.set_type=function(e){ui.Message.setField(this,1,e)},t.prototype.value=function(){return ui.Message.getField(this,2)},t.prototype.set_value=function(e){ui.Message.setField(this,2,e)},t.prototype.color=function(){return ui.Message.getField(this,3)},t.prototype.set_color=function(e){ui.Message.setField(this,3,e)},t.prototype.label=function(){return ui.Message.getField(this,4)},t.prototype.set_label=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_type(t.readString());break;case 2:e.set_value(t.readString());break;case 3:e.set_color(t.readString());break;case 4:e.set_label(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeString(4,i)},t.prototype.getClassName=function(){return"CEconItem_DescriptionLine"},t}(ui.Message),Na=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.link=function(){return ui.Message.getField(this,1)},t.prototype.set_link=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_link(t.readString());break;case 2:e.set_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CEconItem_Action"},t}(ui.Message),La=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.category=function(){return ui.Message.getField(this,2)},t.prototype.set_category=function(e){ui.Message.setField(this,2,e)},t.prototype.internal_name=function(){return ui.Message.getField(this,3)},t.prototype.set_internal_name=function(e){ui.Message.setField(this,3,e)},t.prototype.localized_category_name=function(){return ui.Message.getField(this,4)},t.prototype.set_localized_category_name=function(e){ui.Message.setField(this,4,e)},t.prototype.localized_tag_name=function(){return ui.Message.getField(this,5)},t.prototype.set_localized_tag_name=function(e){ui.Message.setField(this,5,e)},t.prototype.color=function(){return ui.Message.getField(this,6)},t.prototype.set_color=function(e){ui.Message.setField(this,6,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readUint32());break;case 2:e.set_category(t.readString());break;case 3:e.set_internal_name(t.readString());break;case 4:e.set_localized_category_name(t.readString());break;case 5:e.set_localized_tag_name(t.readString());break;case 6:e.set_color(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeString(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeString(5,i),void 0!==(i=ui.Message.getField(e,6))&&t.writeString(6,i)},t.prototype.getClassName=function(){return"CEconItem_Tag"},t}(ui.Message),Aa=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[8,10,11,12,13,21,26],null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.classid=function(){return ui.Message.getField(this,2)},t.prototype.set_classid=function(e){ui.Message.setField(this,2,e)},t.prototype.instanceid=function(){return ui.Message.getField(this,3)},t.prototype.set_instanceid=function(e){ui.Message.setField(this,3,e)},t.prototype.currency=function(){return ui.Message.getField(this,4)},t.prototype.set_currency=function(e){ui.Message.setField(this,4,e)},t.prototype.background_color=function(){return ui.Message.getField(this,5)},t.prototype.set_background_color=function(e){ui.Message.setField(this,5,e)},t.prototype.icon_url=function(){return ui.Message.getField(this,6)},t.prototype.set_icon_url=function(e){ui.Message.setField(this,6,e)},t.prototype.icon_url_large=function(){return ui.Message.getField(this,7)},t.prototype.set_icon_url_large=function(e){ui.Message.setField(this,7,e)},t.prototype.descriptions=function(){return ui.Message.getRepeatedWrapperField(this,Ga,8)},t.prototype.set_descriptions=function(e){ui.Message.setRepeatedWrapperField(this,8,e)},t.prototype.add_descriptions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,8,e,Ga,t)},t.prototype.tradable=function(){return ui.Message.getField(this,9)},t.prototype.set_tradable=function(e){ui.Message.setField(this,9,e)},t.prototype.actions=function(){return ui.Message.getRepeatedWrapperField(this,Na,10)},t.prototype.set_actions=function(e){ui.Message.setRepeatedWrapperField(this,10,e)},t.prototype.add_actions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,10,e,Na,t)},t.prototype.owner_descriptions=function(){return ui.Message.getRepeatedWrapperField(this,Ga,11)},t.prototype.set_owner_descriptions=function(e){ui.Message.setRepeatedWrapperField(this,11,e)},t.prototype.add_owner_descriptions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,11,e,Ga,t)},t.prototype.owner_actions=function(){return ui.Message.getRepeatedWrapperField(this,Na,12)},t.prototype.set_owner_actions=function(e){ui.Message.setRepeatedWrapperField(this,12,e)},t.prototype.add_owner_actions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,12,e,Na,t)},t.prototype.fraudwarnings=function(){return ui.Message.getField(this,13)},t.prototype.set_fraudwarnings=function(e){ui.Message.setField(this,13,e)},t.prototype.add_fraudwarnings=function(e,t){ui.Message.addToRepeatedField(this,13,e,t)},t.prototype.name=function(){return ui.Message.getField(this,14)},t.prototype.set_name=function(e){ui.Message.setField(this,14,e)},t.prototype.name_color=function(){return ui.Message.getField(this,15)},t.prototype.set_name_color=function(e){ui.Message.setField(this,15,e)},t.prototype.type=function(){return ui.Message.getField(this,16)},t.prototype.set_type=function(e){ui.Message.setField(this,16,e)},t.prototype.market_name=function(){return ui.Message.getField(this,17)},t.prototype.set_market_name=function(e){ui.Message.setField(this,17,e)},t.prototype.market_hash_name=function(){return ui.Message.getField(this,18)},t.prototype.set_market_hash_name=function(e){ui.Message.setField(this,18,e)},t.prototype.market_fee=function(){return ui.Message.getField(this,19)},t.prototype.set_market_fee=function(e){ui.Message.setField(this,19,e)},t.prototype.market_fee_app=function(){return ui.Message.getField(this,28)},t.prototype.set_market_fee_app=function(e){ui.Message.setField(this,28,e)},t.prototype.contained_item=function(){return ui.Message.getWrapperField(this,t,20,1)},t.prototype.set_contained_item=function(e){ui.Message.setWrapperField(this,20,e)},t.prototype.market_actions=function(){return ui.Message.getRepeatedWrapperField(this,Na,21)},t.prototype.set_market_actions=function(e){ui.Message.setRepeatedWrapperField(this,21,e)},t.prototype.add_market_actions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,21,e,Na,t)},t.prototype.commodity=function(){return ui.Message.getField(this,22)},t.prototype.set_commodity=function(e){ui.Message.setField(this,22,e)},t.prototype.market_tradable_restriction=function(){return ui.Message.getField(this,23)},t.prototype.set_market_tradable_restriction=function(e){ui.Message.setField(this,23,e)},t.prototype.market_marketable_restriction=function(){return ui.Message.getField(this,24)},t.prototype.set_market_marketable_restriction=function(e){ui.Message.setField(this,24,e)},t.prototype.marketable=function(){return ui.Message.getField(this,25)},t.prototype.set_marketable=function(e){ui.Message.setField(this,25,e)},t.prototype.tags=function(){return ui.Message.getRepeatedWrapperField(this,La,26)},t.prototype.set_tags=function(e){ui.Message.setRepeatedWrapperField(this,26,e)},t.prototype.add_tags=function(e,t){return ui.Message.addToRepeatedWrapperField(this,26,e,La,t)},t.prototype.item_expiration=function(){return ui.Message.getField(this,27)},t.prototype.set_item_expiration=function(e){ui.Message.setField(this,27,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:e.set_appid(i.readInt32());break;case 2:e.set_classid(i.readUint64String());break;case 3:e.set_instanceid(i.readUint64String());break;case 4:e.set_currency(i.readBool());break;case 5:e.set_background_color(i.readString());break;case 6:e.set_icon_url(i.readString());break;case 7:e.set_icon_url_large(i.readString());break;case 8:var n=new Ga;i.readMessage(n,Ga.deserializeBinaryFromReader),e.add_descriptions(n);break;case 9:e.set_tradable(i.readBool());break;case 10:var n=new Na;i.readMessage(n,Na.deserializeBinaryFromReader),e.add_actions(n);break;case 11:var n=new Ga;i.readMessage(n,Ga.deserializeBinaryFromReader),e.add_owner_descriptions(n);break;case 12:var n=new Na;i.readMessage(n,Na.deserializeBinaryFromReader),e.add_owner_actions(n);break;case 13:e.add_fraudwarnings(i.readString());break;case 14:e.set_name(i.readString());break;case 15:e.set_name_color(i.readString());break;case 16:e.set_type(i.readString());break;case 17:e.set_market_name(i.readString());break;case 18:e.set_market_hash_name(i.readString());break;case 19:e.set_market_fee(i.readString());break;case 28:e.set_market_fee_app(i.readInt32());break;case 20:var n=new t;i.readMessage(n,t.deserializeBinaryFromReader),e.set_contained_item(n);break;case 21:var n=new Na;i.readMessage(n,Na.deserializeBinaryFromReader),e.add_market_actions(n);break;case 22:e.set_commodity(i.readBool());break;case 23:e.set_market_tradable_restriction(i.readInt32());break;case 24:e.set_market_marketable_restriction(i.readInt32());break;case 25:e.set_marketable(i.readBool());break;case 26:var n=new La;i.readMessage(n,La.deserializeBinaryFromReader),e.add_tags(n);break;case 27:e.set_item_expiration(i.readString());break;default:i.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,i){var n;n=ui.Message.getField(e,1),void 0!==n&&i.writeInt32(1,n),n=ui.Message.getField(e,2),void 0!==n&&i.writeUint64String(2,n),n=ui.Message.getField(e,3),void 0!==n&&i.writeUint64String(3,n),n=ui.Message.getField(e,4),void 0!==n&&i.writeBool(4,n),n=ui.Message.getField(e,5),void 0!==n&&i.writeString(5,n),n=ui.Message.getField(e,6),void 0!==n&&i.writeString(6,n),n=ui.Message.getField(e,7),void 0!==n&&i.writeString(7,n),n=e.descriptions(),n.length>0&&i.writeRepeatedMessage(8,n,Ga.serializeBinaryToWriter),n=ui.Message.getField(e,9),void 0!==n&&i.writeBool(9,n),n=e.actions(),n.length>0&&i.writeRepeatedMessage(10,n,Na.serializeBinaryToWriter),n=e.owner_descriptions(),n.length>0&&i.writeRepeatedMessage(11,n,Ga.serializeBinaryToWriter),n=e.owner_actions(),n.length>0&&i.writeRepeatedMessage(12,n,Na.serializeBinaryToWriter),n=ui.Message.getField(e,13),void 0!==n&&i.writeRepeatedString(13,n),n=ui.Message.getField(e,14),void 0!==n&&i.writeString(14,n),n=ui.Message.getField(e,15),void 0!==n&&i.writeString(15,n),n=ui.Message.getField(e,16),void 0!==n&&i.writeString(16,n),n=ui.Message.getField(e,17),void 0!==n&&i.writeString(17,n),n=ui.Message.getField(e,18),void 0!==n&&i.writeString(18,n),n=ui.Message.getField(e,19),void 0!==n&&i.writeString(19,n),n=ui.Message.getField(e,28),void 0!==n&&i.writeInt32(28,n),n=e.contained_item(),null!=n&&i.writeMessage(20,n,t.serializeBinaryToWriter),n=e.market_actions(),n.length>0&&i.writeRepeatedMessage(21,n,Na.serializeBinaryToWriter),n=ui.Message.getField(e,22),void 0!==n&&i.writeBool(22,n),n=ui.Message.getField(e,23),void 0!==n&&i.writeInt32(23,n),n=ui.Message.getField(e,24),void 0!==n&&i.writeInt32(24,n),n=ui.Message.getField(e,25),void 0!==n&&i.writeBool(25,n),n=e.tags(),n.length>0&&i.writeRepeatedMessage(26,n,La.serializeBinaryToWriter),void 0!==(n=ui.Message.getField(e,27))&&i.writeString(27,n)},t.prototype.getClassName=function(){return"CEconItem_Description"},t}(ui.Message),Pa=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.generate_new_token=function(){return ui.Message.getField(this,1)},t.prototype.set_generate_new_token=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_generate_new_token(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeBool(1,i)},t.prototype.getClassName=function(){return"CEcon_GetTradeOfferAccessToken_Request"},t}(ui.Message),xa=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.trade_offer_access_token=function(){return ui.Message.getField(this,1)},t.prototype.set_trade_offer_access_token=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_trade_offer_access_token(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CEcon_GetTradeOfferAccessToken_Response"},t}(ui.Message),za=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.url=function(){return ui.Message.getField(this,1)},t.prototype.set_url=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_url(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CEcon_ClientGetItemShopOverlayAuthURL_Response"},t}(ui.Message)),Ua=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.language=function(){return ui.Message.getField(this,1)},t.prototype.set_language=function(e){ui.Message.setField(this,1,e)},t.prototype.appid=function(){return ui.Message.getField(this,2)},t.prototype.set_appid=function(e){ui.Message.setField(this,2,e)},t.prototype.classes=function(){return ui.Message.getRepeatedWrapperField(this,Va,3)},t.prototype.set_classes=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_classes=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,Va,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_language(t.readString());break;case 2:e.set_appid(t.readUint32());break;case 3:var i=new Va;t.readMessage(i,Va.deserializeBinaryFromReader),e.add_classes(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=e.classes(),i.length>0&&t.writeRepeatedMessage(3,i,Va.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CEcon_GetAssetClassInfo_Request"},t}(ui.Message),Va=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.classid=function(){return ui.Message.getField(this,1)},t.prototype.set_classid=function(e){ui.Message.setField(this,1,e)},t.prototype.instanceid=function(){return ui.Message.getField(this,2)},t.prototype.set_instanceid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_classid(t.readUint64String());break;case 2:e.set_instanceid(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint64String(2,i)},t.prototype.getClassName=function(){return"CEcon_GetAssetClassInfo_Request_Class"},t}(ui.Message),ja=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.descriptions=function(){return ui.Message.getRepeatedWrapperField(this,Aa,1)},t.prototype.set_descriptions=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_descriptions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Aa,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Aa;t.readMessage(i,Aa.deserializeBinaryFromReader),e.add_descriptions(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.descriptions(),i.length>0&&t.writeRepeatedMessage(1,i,Aa.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CEcon_GetAssetClassInfo_Response"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Econ.GetTradeOfferAccessToken#1",t,xa)}function i(e,t){return e.SendMsg("Econ.ClientGetItemShopOverlayAuthURL#1",t,za)}function n(e,t){return e.SendMsg("Econ.GetAssetClassInfo#1",t,ja)}e.GetTradeOfferAccessToken=t,e.ClientGetItemShopOverlayAuthURL=i,e.GetAssetClassInfo=n}(la||(la={}));var Wa,Ha=function(){function e(){}return e.prototype.Init=function(e){this.m_CMInterface=e},e.prototype.GetTradeOfferURL=function(){var e=this;if(this.m_strTradeOfferToken)return Promise.resolve(this.GetConstructedTradeOfferURL());var t=fi.Init(Pa);return la.GetTradeOfferAccessToken(this.m_CMInterface.GetServiceTransport(),t).then(function(t){if(1==t.GetEResult())return e.m_strTradeOfferToken=t.Body().trade_offer_access_token(),e.GetConstructedTradeOfferURL();throw new Error("Error getting Trade Offer token")})},e.prototype.GetDefaultTradeOfferURLForFriend=function(e){return ai.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e},e.prototype.GetConstructedTradeOfferURL=function(){var e=this.m_CMInterface.steamid.GetAccountID();return ai.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+e+"&token="+encodeURIComponent(this.m_strTradeOfferToken)},e}(),qa=function(){function e(e){this.result=50,this.steamguard_required_days=0,this.new_device_cooldown_days=0,this.default_password_reset_probation_days=0,this.password_reset_probation_days=0,this.default_email_change_probation_days=0,this.email_change_probation_days=0,this.result=e}return e}(),Ka={"/me":{strDescriptionToken:"#SlashCommandDescription_Me"},"/code":{strDescriptionToken:"#SlashCommandDescription_Code",bOptimisticBBCode:!0},"/pre":{strDescriptionToken:"#SlashCommandDescription_Pre",bOptimisticBBCode:!0},"/giphy":{strDescriptionToken:"#SlashCommandDescription_Giphy"},"/spoiler":{strDescriptionToken:"#SlashCommandDescription_Spoiler",bOptimisticBBCode:!0},"/quote":{strDescriptionToken:"#SlashCommandDescription_Quote",bOptimisticBBCode:!0},"/random":{strDescriptionToken:"#SlashCommandDescription_Random",unExpectedArguments:[1,2]},"/flip":{strDescriptionToken:"#SlashCommandDescription_Flip",unExpectedArguments:0}};!function(e){e[e.None=0]="None",e[e.Deleting=1]="Deleting",e[e.Deleted=2]="Deleted"}(Wa||(Wa={}));var Ja;!function(e){e[e.None=0]="None",e[e.Animating=1]="Animating"}(Ja||(Ja={}));var Ya;!function(e){e[e.None=0]="None",e[e.Generic=1]="Generic",e[e.NotFriends=2]="NotFriends",e[e.NoChatPermissionInGroup=3]="NoChatPermissionInGroup",e[e.RateLimitExceeded=4]="RateLimitExceeded"}(Ya||(Ya={}));var Xa,Za=function(){function e(e,t,i,n,r,o,a){this.unOrdinal=0,this.eDeleteState=Wa.None,this.eAnimationState=Ja.None,this.unAccountID=e,this.rtTimestamp=t,this.unOrdinal=i||0,n.length>13e3?this.strMessage=n.substr(0,13e3):this.strMessage=n,this.m_strSlashCommand=_(n),this.strMessage=this.HandleSpecialMessage(this.strMessage),void 0!==r&&(this.eServerMsgType=r,this.strServerMsgParam=o,this.unServerMsgParamAccountID=a)}return e.prototype.UniqueKey=function(){return this.unOrdinal?this.rtTimestamp+"_"+this.unOrdinal:this.rtTimestamp},Object.defineProperty(e.prototype,"Mentions",{get:function(){return this.m_mentions||{}},set:function(e){this.m_mentions=e},enumerable:!0,configurable:!0}),e.prototype.BIsLocalEcho=function(){return!1},e.prototype.BHasServerAcknowledged=function(){return!0},Object.defineProperty(e.prototype,"eErrorSending",{get:function(){return Ya.None},enumerable:!0,configurable:!0}),e.prototype.BIsServerMessage=function(){return void 0!=this.eServerMsgType&&0!=this.eServerMsgType},e.prototype.BIsInvite=function(){return 5==this.eServerMsgType},e.prototype.GetSlashCommand=function(){return this.m_strSlashCommand},e.prototype.BIsOlderThan=function(e){return this.rtTimestamp<e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal<e.unOrdinal},e.prototype.BIsNewerThan=function(e){return this.rtTimestamp>e.rtTimestamp||this.rtTimestamp==e.rtTimestamp&&this.unOrdinal>e.unOrdinal},e.prototype.HasUserContent=function(){return!this.m_bNoUserContent},e.prototype.HandleSpecialMessage=function(e){if("+1"==e)return this.m_bNoUserContent=!0,"[plusone][/plusone]";if(this.m_strSlashCommand&&v(this.m_strSlashCommand).bOptimisticBBCode){var t=this.m_strSlashCommand.slice(1);return"["+t+"]"+e.slice(this.m_strSlashCommand.length+1)+"[/"+t+"]"}return e},e.prototype.OnAnimationEnd=function(){this.eAnimationState=Ja.None},si.c([_i.observable],e.prototype,"rtTimestamp",void 0),si.c([_i.observable],e.prototype,"unOrdinal",void 0),si.c([_i.observable],e.prototype,"eDeleteState",void 0),si.c([_i.observable],e.prototype,"eAnimationState",void 0),e}(),Qa=function(e){function t(i,n,r){var o=e.call(this,i,n,-1,r)||this;return o.eErrorSending=Ya.None,o.m_bServerAcknowledged=!1,o.strMessageObservable=o.HandleSpecialMessage(r),o.m_iLocalEchoID=t.sm_iLocalEchoID++,o}return si.d(t,e),Object.defineProperty(t.prototype,"strMessage",{get:function(){return this.strMessageObservable},set:function(e){this.strMessageObservable=this.HandleSpecialMessage(e)},enumerable:!0,configurable:!0}),t.prototype.BIsLocalEcho=function(){return!0},t.prototype.UniqueKey=function(){return this.m_bServerAcknowledged?e.prototype.UniqueKey.call(this):"localecho_"+this.m_iLocalEchoID},t.prototype.BHasServerAcknowledged=function(){return this.m_bServerAcknowledged},t.prototype.OnServerAcknowledged=function(){this.m_bServerAcknowledged=!0},t.sm_iLocalEchoID=0,si.c([_i.observable],t.prototype,"eErrorSending",void 0),si.c([_i.observable],t.prototype,"strMessageObservable",void 0),si.c([_i.observable],t.prototype,"m_bServerAcknowledged",void 0),si.c([_i.action],t.prototype,"OnServerAcknowledged",null),t}(Za),$a=function(e){function t(i,n,r){return e.call(this,i,n,++t.m_nOrdinal,r)||this}return si.d(t,e),t.m_nOrdinal=0,t}(Za),es=function(e){function t(t,i,n,r){var o=e.call(this,t,i,0,"")||this;return o.m_targetSteamID=n,o.m_tradeRequestID=r,o.m_bCancelled=!1,o.m_bDeclined=!1,o.m_bAccepted=!1,o.m_bPopupBlocked=!1,o.m_ErrorDetails=new qa(50),o}return si.d(t,e),t.prototype.TargetSteamID=function(){return this.m_targetSteamID},t.prototype.TradeRequestID=function(){return this.m_tradeRequestID},t.prototype.MarkAsCancelled=function(e){this.m_bCancelled=!0,this.m_ErrorDetails=e||new qa(7)},t.prototype.MarkAsDeclined=function(){this.m_bDeclined=!0},t.prototype.MarkAsAccepted=function(e){this.m_bAccepted=!0,e||this.ShowPopupBlockedWarning()},t.prototype.ShowPopupBlockedWarning=function(){this.m_bPopupBlocked=!0},si.c([_i.observable],t.prototype,"m_bCancelled",void 0),si.c([_i.observable],t.prototype,"m_bDeclined",void 0),si.c([_i.observable],t.prototype,"m_bAccepted",void 0),si.c([_i.observable],t.prototype,"m_bPopupBlocked",void 0),si.c([_i.action],t.prototype,"MarkAsCancelled",null),si.c([_i.action],t.prototype,"MarkAsDeclined",null),si.c([_i.action],t.prototype,"MarkAsAccepted",null),si.c([_i.action],t.prototype,"ShowPopupBlockedWarning",null),t}(Za),ts=function(){function e(){this.m_rgMessageBlocks=_i.observable.array([],{deep:!1}),this.Clear()}return Object.defineProperty(e.prototype,"message_blocks",{get:function(){return this.m_rgMessageBlocks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_passes_index",{get:function(){return this.m_iIndexLastTimePassesGap},enumerable:!0,configurable:!0}),e.prototype.Clear=function(){this.m_rgMessageBlocks.clear(),this.m_rgMessageBlocks.push(new is),this.m_iIndexLastTimePassesGap=void 0},e.prototype.AppendMessage=function(e){var t=this.m_rgMessageBlocks[this.m_rgMessageBlocks.length-1];if(!t.BCanAccumulateMessage(e)){var i=t;t=new is,this.m_rgMessageBlocks.push(t),i.SetNextBlock(t),e.rtTimestamp-i.GetRTimeLastMessage()>=3600&&(i.GetRTimeMidnightBeforeBlock()==wd.GetLocalMidnightInRTime32(e.rtTimestamp)?this.m_iIndexLastTimePassesGap=this.m_rgMessageBlocks.length-1:this.m_iIndexLastTimePassesGap=void 0)}t.AppendMessage(e)},e.prototype.BuildMessageBlocks=function(e){this.Clear();for(var t=0,i=e;t<i.length;t++){var n=i[t];this.AppendMessage(n)}},e.prototype.AppendNewMessage=function(e){this.AppendMessage(e)},e.prototype.RemoveOldestMessages=function(e){for(var t=0;e>0&&!(t>=this.m_rgMessageBlocks.length);){var i=this.m_rgMessageBlocks[t].messages;if(i.length>e)break;e-=i.length,t++}if(0==t)return null;for(var n=null,r=t-1;r>=0;r--){var i=this.m_rgMessageBlocks[r].messages;if(0!=i.length){n=i[i.length-1];break}}return this.m_rgMessageBlocks.splice(0,t),n},si.c([_i.observable],e.prototype,"m_iIndexLastTimePassesGap",void 0),si.c([_i.action],e.prototype,"BuildMessageBlocks",null),si.c([_i.action],e.prototype,"AppendNewMessage",null),si.c([_i.action],e.prototype,"RemoveOldestMessages",null),e}(),is=function(){function e(){this.m_rgMessages=[],this.m_bMessageBlockIsOnlyEmotes=!0}return e.prototype.CreateVirtualSplitOnTimestamp=function(t){var i=new e,n=new e;i.SetNextBlock(n),n.SetNextBlock(this.m_nextBlock);for(var r=0,o=this.m_rgMessages;r<o.length;r++){var a=o[r];a.rtTimestamp<t?i.AppendMessage(a):n.AppendMessage(a)}return[i,n]},e.prototype.UniqueKey=function(){return this.m_rgMessages.length?this.m_rgMessages[0].UniqueKey():"EmptyBlock"},Object.defineProperty(e.prototype,"messages",{get:function(){return this.m_rgMessages},enumerable:!0,configurable:!0}),e.prototype.SetNextBlock=function(e){this.m_nextBlock=e},Object.defineProperty(e.prototype,"is_last_block",{get:function(){return void 0===this.m_nextBlock},enumerable:!0,configurable:!0}),e.prototype.GetRTimeMidnightBeforeBlock=function(){return this.m_rtMidnightBeforeBlock},e.prototype.GetRTimeMidnightBeforeNextBlock=function(){return this.m_nextBlock?this.m_nextBlock.GetRTimeMidnightBeforeBlock():wd.GetLocalMidnightInRTime32()},e.prototype.GetRTimeLastMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp:Xi.b},e.prototype.GetRTimeFirstMessage=function(){return this.m_rgMessages.length?this.m_rgMessages[0].rtTimestamp:0},e.prototype.AppendMessage=function(e){"/me"===e.GetSlashCommand()||(this.m_bMessageBlockIsOnlyEmotes=!1),this.m_rgMessages.length||(this.m_rtMidnightBeforeBlock=wd.GetLocalMidnightInRTime32(e.rtTimestamp)),this.m_rgMessages.push(e)},e.prototype.BCanAccumulateMessage=function(e){if(!this.m_rgMessages.length)return!0;var t=this.m_rgMessages[0].unAccountID,i=this.m_rgMessages[this.m_rgMessages.length-1].rtTimestamp,n=this.m_rgMessages[this.m_rgMessages.length-1];return!(e.BIsServerMessage()!=this.m_rgMessages[0].BIsServerMessage()||(!e.BIsServerMessage()||e.BIsInvite()||this.m_rgMessages[0].BIsInvite())&&(!t||t!=e.unAccountID||e.BIsInvite()!=this.m_rgMessages[0].BIsInvite()||e.rtTimestamp-i>300||this.m_bMessageBlockIsOnlyEmotes&&"/me"!==e.GetSlashCommand()||e instanceof $a||n instanceof $a||wd.GetLocalMidnightInRTime32(e.rtTimestamp)>this.m_rtMidnightBeforeBlock))},e.prototype.BIsInvite=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0].BIsInvite()},e.prototype.BIsServerMsg=function(){return this.m_rgMessages.length>0&&this.m_rgMessages[0].BIsServerMessage()&&!this.m_rgMessages[0].BIsInvite()},si.c([_i.observable.shallow],e.prototype,"m_rgMessages",void 0),si.c([_i.observable.shallow],e.prototype,"m_nextBlock",void 0),si.c([_i.action],e.prototype,"CreateVirtualSplitOnTimestamp",null),e}(),ns=!1,rs=function(){function e(){this.timestamp=0,this.imageWidth=0,this.imageHeight=0,this.spoilerTag=!1,this.eUploadState=0,this.uploadProgress=0}return si.c([_i.observable],e.prototype,"eUploadState",void 0),si.c([_i.observable],e.prototype,"uploadProgress",void 0),si.c([_i.observable],e.prototype,"strErrorDescription",void 0),e}(),os=function(){function e(e,t,i){var n=this;this.BASELOG=Da.create(function(){return"CChat-"+n.unique_id},ns),this.m_rgChatViews=[],this.m_bChatLogsLoaded=!1,this.m_bMoreAvailable=!1,this.m_nLoadingHistoryInProgressCount=0,this.m_rgChatMessages=[],this.m_ChatMessageBlockList=new ts,this.m_cUnreadChatMessages=0,this.m_rtFirstUnreadChatMsg=0,this.m_rtLastAckedChatMsg=0,this.m_rtLastServerAckedChatMsg=0,this.m_rtLastMessageReceived=0,this.m_rtLastServerMessageReceived=0,this.m_bPrepended=!1,this.m_FriendStore=e,this.m_ChatStore=t,this.m_CMInterface=i,this.m_fileUploadProps=new rs}return e.prototype.UnloadChatState=function(){this.UnloadActiveChatState(),this.m_rtLastMessageReceived=0,this.m_rtLastServerMessageReceived=0},e.prototype.UnloadActiveChatState=function(){this.m_rgChatMessages=[],this.m_ChatMessageBlockList.Clear(),this.m_bChatLogsLoaded=!1},Object.defineProperty(e.prototype,"BIsPrepend",{get:function(){return this.m_bPrepended},enumerable:!0,configurable:!0}),e.prototype.ResetPrepended=function(){this.m_bPrepended=!1},e.prototype.OnTyping=function(){},Object.defineProperty(e.prototype,"is_friend_typing",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.OnReceivedNewMessage=function(e,t,i,n){},e.prototype.BShouldTrackUnreadMessages=function(){return!0},e.prototype.BIsVoiceAllowed=function(){return!0},e.prototype.GetVoiceNotAllowedReason=function(){return null},e.prototype.InitUnreadMessageCountFromServer=function(e,t,i){this.m_cUnreadChatMessages=e,this.m_rtLastAckedChatMsg=this.m_rtLastServerAckedChatMsg=t,this.m_rtLastMessageReceived=i,this.m_rtLastAckedChatMsg<this.m_rtLastMessageReceived&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastAckedChatMsg+1)},e.prototype.AddChatView=function(e){this.m_rgChatViews.push(e)},e.prototype.RemoveChatView=function(e){var t=this.m_rgChatViews.indexOf(e);-1!=t&&this.m_rgChatViews.splice(t,1)},e.prototype.IsMoreHistoryAvailable=function(){return this.m_bMoreAvailable},e.prototype.InternalLoadChatLogs=function(t){var i=this;void 0===t&&(t=!1);var n,r,o,a;if(t){var s=this.GetMostRecentChatMsg();s?(n=s.rtTimestamp,r=s.unOrdinal):(n=Xi.c,r=0)}else n=Xi.c,r=0;o=Xi.b,a=0,this.m_nLoadingHistoryInProgressCount+=1,this.GetMessagesFromTimeRange(n,r,o,a,e.k_InitialMessageCount).then(function(e){var t=e.messages,n=e.moreAvailable;i.AddMessagesToHistory(t,n),i.m_nLoadingHistoryInProgressCount-=1}).catch(function(e){return i.m_nLoadingHistoryInProgressCount-=1,Promise.reject(e)})},e.prototype.LoadMoreHistory=function(){var t=this;return 0!=this.m_nLoadingHistoryInProgressCount?Promise.resolve(!0):(this.m_nLoadingHistoryInProgressCount+=1,this.GetMessagesFromTimeRange(Xi.c,0,this.m_oldestMessageTime,this.m_oldestMessageOrdinal,e.k_LoadMoreMessageCount).then(function(e){var i=e.messages,n=e.moreAvailable;return t.AddMessagesToHistory(i,n),t.m_nLoadingHistoryInProgressCount-=1,!0}).catch(function(e){return t.m_nLoadingHistoryInProgressCount-=1,Promise.reject(e)}))},e.prototype.AddMessagesToHistory=function(e,t){this.BASELOG("merging "+e.length+" messages"),this.MergeChatHistoryChunk(e),this.BASELOG(this.m_rgChatMessages.length+" total messages"),this.m_bMoreAvailable=t,this.BASELOG("friend chat oldest time "+this.m_oldestMessageTime+" oldest ordinal "+this.m_oldestMessageOrdinal+" bMoreAvailable "+this.m_bMoreAvailable)},Object.defineProperty(e.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!0,configurable:!0}),e.prototype.OnActivate=function(){this.m_cUnreadChatMessages&&(this.m_cUnreadChatMessages=0,this.m_rtLastMessageReceived&&(this.m_rtLastAckedChatMsg=this.m_rtLastMessageReceived,this.AckChatMsg(this.m_rtLastMessageReceived)))},e.prototype.OnDeactivate=function(){this.m_rtFirstUnreadChatMsg=0},Object.defineProperty(e.prototype,"self",{get:function(){return this.m_FriendStore.self},enumerable:!0,configurable:!0}),e.prototype.InternalAppendChatMsg=function(e){(0!=this.m_rgChatViews.length||this.m_bChatLogsLoaded)&&(this.m_rgChatMessages.push(e),this.m_ChatMessageBlockList.AppendNewMessage(e),this.TrimLogsIfPossible())},e.prototype.TrimLogsIfPossible=function(){var t=this.m_rgChatMessages.length-e.k_KeepLoadedWhenAtScrollBottom;if(!(t<=0)){for(var i=0,n=this.m_rgChatViews;i<n.length;i++)if(!n[i].is_scrolled_to_bottom)return;var r=this.m_ChatMessageBlockList.RemoveOldestMessages(t);if(r){var o=this.m_rgChatMessages.indexOf(r);if(o<0)return void AssertMsg(!1,"Failed to find message being removed");this.m_rgChatMessages.splice(0,o+1)}}},e.prototype.AppendChatMsg=function(e,t,i,n){var r=new Za(e,t,i,n);return r.eAnimationState=Ja.Animating,this.InternalAppendChatMsg(r),r},e.prototype.AppendLocalEchoChatMsg=function(e){var t=new Qa(this.self.accountid,wd.GetServerRTime32(),e);return t.eAnimationState=Ja.Animating,this.InternalAppendChatMsg(t),t},e.prototype.AddNewChatMsgAndNotify=function(e,t,i,n,r,o){var a=this.AppendChatMsg(e,t,i,n);a.Mentions=o;var s=void 0!==r;this.CheckShouldNotify(a,s?r:n,n)},e.prototype.UpdateChatMessageDeletedState=function(e,t){for(var i=0,n=this.m_rgChatMessages;i<n.length;i++)for(var r=n[i],o=0,a=e;o<a.length;o++){var s=a[o];r.rtTimestamp==s.rtTimestamp&&r.unOrdinal==s.unOrdinal&&r.eDeleteState!=Wa.Deleted&&(r.eDeleteState=t)}},e.prototype.BShouldSilentlyAddMessage=function(e){return!1},e.prototype.DecorateNotification=function(e,t,i,n){if(n!==i){var r=this.m_ChatStore.NotificationBBCodeParser,o={chat:this,unAccountIDSender:e.unAccountID,key:e.UniqueKey(),rtTimestamp:e.rtTimestamp,onLoad:function(){}},a=r.ParseBBCode(n,o);if(a)return si.a({},t,a)}return t},e.prototype.CheckShouldNotify=function(e,t,i){var n=this,r=this.self.accountid==e.unAccountID,o=!1,a=!1,s=this.GetVisibilityState(),c=this.BShouldSilentlyAddMessage(e);if(e.BIsServerMessage())return void(this.m_rtLastServerMessageReceived=e.rtTimestamp);r?(o=!0,a=!0):c&&0==this.m_cUnreadChatMessages?o=!0:4==s?o=!0:3==s&&0==this.m_cUnreadChatMessages&&wd.IdleTracker.AddOnNextActivityCallback(function(){4==n.GetVisibilityState()&&n.OnActivate()}),this.m_rtLastMessageReceived=e.rtTimestamp,this.BShouldTrackUnreadMessages()&&(o?(this.m_rtLastAckedChatMsg=e.rtTimestamp,this.m_cUnreadChatMessages=0,a||this.AckChatMsg(e.rtTimestamp)):(0==this.m_rtFirstUnreadChatMsg&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastMessageReceived),this.m_cUnreadChatMessages++)),c||this.OnReceivedNewMessage(e,s,t,i)},e.prototype.AddVoiceChannelInviteMsg=function(e,t,i){this.InternalAppendChatMsg(new $a(e,t,i))},e.prototype.AddNewServerMsg=function(e,t,i,n,r,o){b(n)&&this.InternalAppendChatMsg(new Za(e,t,i,"",n,r,o))},e.prototype.AckChatMsg=function(e){this.m_rtLastServerAckedChatMsg!=e&&(this.AckChatMsgOnServer(e),this.m_rtLastServerAckedChatMsg=e)},e.prototype.OnUserChatEcho=function(e,t){e>=this.m_rtLastAckedChatMsg&&(this.m_rtLastMessageReceived=e,this.UpdateLastAckTimeFromServer(e))},e.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastServerAckedChatMsg<=e&&(this.m_rtLastServerAckedChatMsg=e,this.m_rtLastAckedChatMsg=e,this.m_rtLastMessageReceived<=e&&(this.m_cUnreadChatMessages=0))},e.prototype.GetMostRecentChatMsg=function(){for(var e=this.m_rgChatMessages.length-1;e>=0;e--)if(-1!=this.m_rgChatMessages[e].unOrdinal)return this.m_rgChatMessages[e];return null},e.prototype.MergeChatHistoryChunk=function(e){var t;if(e.length){var i,n=e[0],r=e[e.length-1],o=0;for(i=this.m_rgChatMessages.length-1;i>=0;i--)if(-1!=this.m_rgChatMessages[i].unOrdinal){if(this.m_rgChatMessages[i].BIsOlderThan(n))break;this.m_rgChatMessages[i].BIsNewerThan(r)&&o++}for(i++,(t=this.m_rgChatMessages).splice.apply(t,[i,this.m_rgChatMessages.length-i-o].concat(e)),i=0;i<this.m_rgChatMessages.length&&-1==this.m_rgChatMessages[i].unOrdinal;i++);i>=this.m_rgChatMessages.length?(this.m_oldestMessageTime=Xi.b,this.m_oldestMessageOrdinal=0):(this.m_oldestMessageTime=this.m_rgChatMessages[i].rtTimestamp,this.m_oldestMessageOrdinal=this.m_rgChatMessages[i].unOrdinal),this.m_ChatMessageBlockList.BuildMessageBlocks(this.m_rgChatMessages),this.m_bPrepended=!0}},e.prototype.SetUploadFileError=function(e,t){this.m_fileUploadProps.eUploadState=e,this.m_fileUploadProps.strErrorDescription=t,this.m_fileUploadProps.displayFileName=null},e.prototype.BeginFileUpload=function(e,t,i,n){for(var r=this,o="";o.length<40;)o+=Math.floor(16*Math.random()).toString(16);this.ClearFileUploadError(),this.m_fileUploadProps.file=e,this.m_fileUploadProps.displayFileName=e.name,this.m_fileUploadProps.uploadFileName=window.performance.now()+"_"+e.name,this.m_fileUploadProps.sha1=o,this.m_fileUploadProps.hmac="",this.m_fileUploadProps.timestamp=0,this.m_fileUploadProps.imageWidth=t,this.m_fileUploadProps.imageHeight=i,this.m_fileUploadProps.eUploadState=1,this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.spoilerTag=n;var a=new FormData;a.set("sessionid",ai.a.SESSIONID),a.set("file_size",e.size.toString()),a.set("file_name",this.m_fileUploadProps.uploadFileName),a.set("file_sha",o),a.set("file_image_width",t.toString()),a.set("file_image_height",i.toString()),a.set("file_type",e.type),Qi.a.post(ai.a.CHAT_BASE_URL+"chat/beginfileupload/",a).then(function(e){r.m_fileUploadProps.timestamp=e.data.timestamp,r.m_fileUploadProps.hmac=e.data.hmac,r.DoFileUpload(e.data.result)}).catch(function(e){Object(_i.runInAction)(function(){r.m_fileUploadProps.eUploadState=2,r.BASELOG(e.response);var t=null;if(e.response){var i=e.response.data,n=e.response.status,o=i&&i.success;401==n?21==o?t=Object(ua.b)("#Chat_Settings_Error_NotLoggedOn"):112==o?t=Object(ua.b)("#Chat_Settings_Error_LimitedUser"):15==o&&(t=Object(ua.b)("#Chat_Settings_Error_FailedToUpload")):t=400==n?8==o?Object(ua.b)("#Chat_Settings_Error_InvalidImage"):Object(ua.b)("#Chat_Settings_Error_ServerError")+" ("+o+")":Object(ua.b)("#Chat_Settings_Error_ServerError")}else t=Object(ua.b)("#ConnectionTrouble_FailedToConnect");r.m_fileUploadProps.strErrorDescription=Object(ua.b)("#Chat_Upload_ErrorStart",t)})})},e.prototype.DoFileUpload=function(e){var t=this,i=this.m_fileUploadProps.file,n=e.use_https?"https://":"http://";n+=e.url_host+e.url_path;for(var r={onUploadProgress:function(e){var i=e.loaded/e.total*100;Object(_i.runInAction)(function(){t.m_fileUploadProps.uploadProgress=i})},headers:{}},o=0;o<e.request_headers.length;++o){var a=e.request_headers[o];"Content-Length"!=a.name&&"Host"!=a.name&&(r.headers[a.name]=a.value)}Qi.a.put(n,i,r).then(function(i){t.CommitFileUpload(!0,e.ugcid)}).catch(function(i){t.BASELOG(i.response),Object(_i.runInAction)(function(){t.m_fileUploadProps.strErrorDescription=Object(ua.b)("#Chat_Upload_ErrorCloud"),t.m_fileUploadProps.eUploadState=2,t.m_fileUploadProps.uploadProgress=0}),t.CommitFileUpload(!1,e.ugcid)})},e.prototype.CommitFileUpload=function(e,t){var i=this,n=(this.m_fileUploadProps.file,this.m_fileUploadProps.sha1),r=new FormData;r.set("sessionid",ai.a.SESSIONID),r.set("file_name",this.m_fileUploadProps.uploadFileName),r.set("file_sha",n),r.set("success",e?"1":"0"),r.set("ugcid",t),r.set("file_type",this.m_fileUploadProps.file.type),r.set("file_image_width",this.m_fileUploadProps.imageWidth.toString()),r.set("file_image_height",this.m_fileUploadProps.imageHeight.toString()),r.set("timestamp",this.m_fileUploadProps.timestamp.toString()),r.set("hmac",this.m_fileUploadProps.hmac),r.set("spoiler",this.m_fileUploadProps.spoilerTag?"1":"0"),this.PopulateCommitFileUploadFormData(r),Qi.a.post(ai.a.CHAT_BASE_URL+"chat/commitfileupload/",r).then(function(t){e?(i.m_fileUploadProps.uploadProgress=0,i.m_fileUploadProps.file=null,i.m_fileUploadProps.eUploadState=0):i.m_fileUploadProps.eUploadState=2}).catch(function(t){e&&Object(_i.runInAction)(function(){i.BASELOG(t),i.m_fileUploadProps.uploadProgress=0,i.m_fileUploadProps.eUploadState=2;var e=null;if(t.response){var n=t.response.data,r=t.response.status,o=n&&n.success;400==r?e=Object(ua.b)("#Chat_Settings_Error_AccessDenied"):401==r?21==o?e=Object(ua.b)("#Chat_Settings_Error_NotLoggedOn"):112==o?e=Object(ua.b)("#Chat_Settings_Error_LimitedUser"):15==o&&(e=Object(ua.b)("#Chat_Settings_Error_AccessDenied")):e=500==r?Object(ua.b)("#Chat_Settings_Error_ServerError")+" ("+o+")":Object(ua.b)("#Chat_Settings_Error_ServerError")}else e=Object(ua.b)("#ConnectionTrouble_FailedToConnect");i.m_fileUploadProps.strErrorDescription="Failed to commit upload: "+e})})},e.prototype.ClearFileUploadError=function(){2!=this.m_fileUploadProps.eUploadState&&3!=this.m_fileUploadProps.eUploadState&&4!=this.m_fileUploadProps.eUploadState||(this.m_fileUploadProps.uploadProgress=0,this.m_fileUploadProps.file=null,this.m_fileUploadProps.eUploadState=0)},e.prototype.GetVisibilityState=function(e){for(var t=0,i=0,n=this.m_rgChatViews;i<n.length;i++){var r=n[i];if(!e||r.BIsInBrowserContext(e)){var o=r.GetVisibilityState();o>t&&(t=o)}}return t},Object.defineProperty(e.prototype,"unread_message_count",{get:function(){return this.m_cUnreadChatMessages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first_unread_msg_time",{get:function(){return this.m_rtFirstUnreadChatMsg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_last_message",{get:function(){return this.m_rtLastMessageReceived},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time_last_ack",{get:function(){return this.m_rtLastAckedChatMsg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file_upload_props",{get:function(){return this.m_fileUploadProps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chat_messages",{get:function(){return this.m_rgChatMessages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chat_message_blocks",{get:function(){return this.m_ChatMessageBlockList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last_voice_participation_time",{get:function(){return this.m_rtLastAckedChatMsg},enumerable:!0,configurable:!0}),e.prototype.LoadChatLogs=function(){this.m_bChatLogsLoaded||(this.m_bChatLogsLoaded=!0,this.InternalLoadChatLogs(!1))},e.prototype.OnConnectionRestored=function(){this.m_bChatLogsLoaded&&this.InternalLoadChatLogs(!0)},e.k_InitialMessageCount=100,e.k_KeepLoadedWhenAtScrollBottom=2*e.k_InitialMessageCount,e.k_LoadMoreMessageCount=50,si.c([_i.observable],e.prototype,"m_bMoreAvailable",void 0),si.c([_i.observable.shallow],e.prototype,"m_rgChatMessages",void 0),si.c([_i.observable],e.prototype,"m_cUnreadChatMessages",void 0),si.c([_i.observable],e.prototype,"m_rtFirstUnreadChatMsg",void 0),si.c([_i.observable],e.prototype,"m_rtLastAckedChatMsg",void 0),si.c([_i.observable],e.prototype,"m_rtLastMessageReceived",void 0),si.c([_i.observable],e.prototype,"m_rtLastServerMessageReceived",void 0),si.c([_i.observable],e.prototype,"m_fileUploadProps",void 0),si.c([_i.action],e.prototype,"AddMessagesToHistory",null),si.c([_i.action],e.prototype,"OnActivate",null),si.c([_i.action],e.prototype,"OnDeactivate",null),si.c([_i.action],e.prototype,"AppendChatMsg",null),si.c([_i.action],e.prototype,"AppendLocalEchoChatMsg",null),si.c([_i.action],e.prototype,"AddNewChatMsgAndNotify",null),si.c([_i.action],e.prototype,"UpdateChatMessageDeletedState",null),si.c([_i.action],e.prototype,"AddVoiceChannelInviteMsg",null),si.c([_i.action],e.prototype,"AddNewServerMsg",null),si.c([_i.action],e.prototype,"SetUploadFileError",null),si.c([_i.action],e.prototype,"BeginFileUpload",null),si.c([_i.action],e.prototype,"DoFileUpload",null),si.c([_i.action],e.prototype,"CommitFileUpload",null),si.c([_i.action],e.prototype,"ClearFileUploadError",null),e}(),as=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.games=function(){return ui.Message.getRepeatedWrapperField(this,ss,1)},t.prototype.set_games=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_games=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,ss,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new ss;t.readMessage(i,ss.deserializeBinaryFromReader),e.add_games(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.games(),i.length>0&&t.writeRepeatedMessage(1,i,ss.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_GetLastPlayedTimes_Response"},t}(ui.Message)),ss=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.last_playtime=function(){return ui.Message.getField(this,2)},t.prototype.set_last_playtime=function(e){ui.Message.setField(this,2,e)},t.prototype.playtime_2weeks=function(){return ui.Message.getField(this,3)},t.prototype.set_playtime_2weeks=function(e){ui.Message.setField(this,3,e)},t.prototype.playtime_forever=function(){return ui.Message.getField(this,4)},t.prototype.set_playtime_forever=function(e){ui.Message.setField(this,4,e)},t.prototype.first_playtime=function(){return ui.Message.getField(this,5)},t.prototype.set_first_playtime=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readInt32());break;case 2:e.set_last_playtime(t.readUint32());break;case 3:e.set_playtime_2weeks(t.readInt32());break;case 4:e.set_playtime_forever(t.readInt32());break;case 5:e.set_first_playtime(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeInt32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeInt32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CPlayer_GetLastPlayedTimes_Response_Game"},t}(ui.Message),cs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_GetMutualFriendsForIncomingInvites_Request"},t}(ui.Message),ls=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.mutual_friend_account_ids=function(){return ui.Message.getField(this,2)},t.prototype.set_mutual_friend_account_ids=function(e){ui.Message.setField(this,2,e)},t.prototype.add_mutual_friend_account_ids=function(e,t){ui.Message.addToRepeatedField(this,2,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.add_mutual_friend_account_ids(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeRepeatedUint32(2,i)},t.prototype.getClassName=function(){return"CPlayer_IncomingInviteMutualFriendList"},t}(ui.Message),us=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.incoming_invite_mutual_friends_lists=function(){return ui.Message.getRepeatedWrapperField(this,ls,1)},t.prototype.set_incoming_invite_mutual_friends_lists=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_incoming_invite_mutual_friends_lists=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,ls,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new ls;t.readMessage(i,ls.deserializeBinaryFromReader),e.add_incoming_invite_mutual_friends_lists(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.incoming_invite_mutual_friends_lists(),i.length>0&&t.writeRepeatedMessage(1,i,ls.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_GetMutualFriendsForIncomingInvites_Response"},t}(ui.Message),ds=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.player_level=function(){return ui.Message.getField(this,1)},t.prototype.set_player_level=function(e){ui.Message.setField(this,1,e)},t.prototype.badges=function(){return ui.Message.getRepeatedWrapperField(this,ps,2)},t.prototype.set_badges=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_badges=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,ps,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_player_level(t.readUint32());break;case 2:var i=new ps;t.readMessage(i,ps.deserializeBinaryFromReader),e.add_badges(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=e.badges(),i.length>0&&t.writeRepeatedMessage(2,i,ps.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_GetGameBadgeLevels_Response"},t}(ui.Message)),ps=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.level=function(){return ui.Message.getField(this,1)},t.prototype.set_level=function(e){ui.Message.setField(this,1,e)},t.prototype.series=function(){return ui.Message.getField(this,2)},t.prototype.set_series=function(e){ui.Message.setField(this,2,e)},t.prototype.border_color=function(){return ui.Message.getField(this,3)},t.prototype.set_border_color=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_level(t.readInt32());break;case 2:e.set_series(t.readInt32());break;case 3:e.set_border_color(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CPlayer_GetGameBadgeLevels_Response_Badge"},t}(ui.Message),ms=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_AcceptSSA_Response"},t}(ui.Message)),hs=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.nicknames=function(){return ui.Message.getRepeatedWrapperField(this,gs,1)},t.prototype.set_nicknames=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_nicknames=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,gs,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new gs;t.readMessage(i,gs.deserializeBinaryFromReader),e.add_nicknames(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.nicknames(),i.length>0&&t.writeRepeatedMessage(1,i,gs.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_GetNicknameList_Response"},t}(ui.Message)),gs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.nickname=function(){return ui.Message.getField(this,2)},t.prototype.set_nickname=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readFixed32());break;case 2:e.set_nickname(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CPlayer_GetNicknameList_Response_PlayerNickname"},t}(ui.Message),fs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.nickname=function(){return ui.Message.getField(this,2)},t.prototype.set_nickname=function(e){ui.Message.setField(this,2,e)},t.prototype.notifications_showingame=function(){return ui.Message.getField(this,3)},t.prototype.set_notifications_showingame=function(e){ui.Message.setField(this,3,e)},t.prototype.notifications_showonline=function(){return ui.Message.getField(this,4)},t.prototype.set_notifications_showonline=function(e){ui.Message.setField(this,4,e)},t.prototype.notifications_showmessages=function(){return ui.Message.getField(this,5)},t.prototype.set_notifications_showmessages=function(e){ui.Message.setField(this,5,e)},t.prototype.sounds_showingame=function(){return ui.Message.getField(this,6)},t.prototype.set_sounds_showingame=function(e){ui.Message.setField(this,6,e)},t.prototype.sounds_showonline=function(){return ui.Message.getField(this,7)},t.prototype.set_sounds_showonline=function(e){ui.Message.setField(this,7,e)},t.prototype.sounds_showmessages=function(){return ui.Message.getField(this,8)},t.prototype.set_sounds_showmessages=function(e){ui.Message.setField(this,8,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readFixed32());break;case 2:e.set_nickname(t.readString());break;case 3:e.set_notifications_showingame(t.readEnum());break;case 4:e.set_notifications_showonline(t.readEnum());break;case 5:e.set_notifications_showmessages(t.readEnum());break;case 6:e.set_sounds_showingame(t.readEnum());break;case 7:e.set_sounds_showonline(t.readEnum());break;case 8:e.set_sounds_showmessages(t.readEnum());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeEnum(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeEnum(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeEnum(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeEnum(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeEnum(7,i),void 0!==(i=ui.Message.getField(e,8))&&t.writeEnum(8,i)},t.prototype.getClassName=function(){return"PerFriendPreferences"},t}(ui.Message),_s=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_GetPerFriendPreferences_Request"},t}(ui.Message),ys=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.preferences=function(){return ui.Message.getRepeatedWrapperField(this,fs,1)},t.prototype.set_preferences=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_preferences=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,fs,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new fs;t.readMessage(i,fs.deserializeBinaryFromReader),e.add_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.preferences(),i.length>0&&t.writeRepeatedMessage(1,i,fs.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_GetPerFriendPreferences_Response"},t}(ui.Message),vs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.preferences=function(){return ui.Message.getWrapperField(this,fs,1,1)},t.prototype.set_preferences=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new fs;t.readMessage(i,fs.deserializeBinaryFromReader),e.set_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.preferences())&&t.writeMessage(1,i,fs.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_SetPerFriendPreferences_Request"},t}(ui.Message),bs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_SetPerFriendPreferences_Response"},t}(ui.Message),Cs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CPlayer_AddFriend_Request"},t}(ui.Message),Ss=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.invite_sent=function(){return ui.Message.getField(this,1)},t.prototype.set_invite_sent=function(e){ui.Message.setField(this,1,e)},t.prototype.friend_relationship=function(){return ui.Message.getField(this,2)},t.prototype.set_friend_relationship=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_invite_sent(t.readBool());break;case 2:e.set_friend_relationship(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CPlayer_AddFriend_Response"},t}(ui.Message),Ms=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CPlayer_RemoveFriend_Request"},t}(ui.Message),Fs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.friend_relationship=function(){return ui.Message.getField(this,1)},t.prototype.set_friend_relationship=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_friend_relationship(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CPlayer_RemoveFriend_Response"},t}(ui.Message),ws=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.unignore=function(){return ui.Message.getField(this,2)},t.prototype.set_unignore=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_unignore(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CPlayer_IgnoreFriend_Request"},t}(ui.Message),Bs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.friend_relationship=function(){return ui.Message.getField(this,1)},t.prototype.set_friend_relationship=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_friend_relationship(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CPlayer_IgnoreFriend_Response"},t}(ui.Message),Os=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.hide_adult_content_violence=function(){return ui.Message.getFieldWithDefault(this,1,!0)},t.prototype.set_hide_adult_content_violence=function(e){ui.Message.setField(this,1,e)},t.prototype.hide_adult_content_sex=function(){return ui.Message.getFieldWithDefault(this,2,!0)},t.prototype.set_hide_adult_content_sex=function(e){ui.Message.setField(this,2,e)},t.prototype.parenthesize_nicknames=function(){return ui.Message.getFieldWithDefault(this,4,!1)},t.prototype.set_parenthesize_nicknames=function(e){ui.Message.setField(this,4,e)},t.prototype.timestamp_updated=function(){return ui.Message.getField(this,3)},t.prototype.set_timestamp_updated=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_hide_adult_content_violence(t.readBool());break;case 2:e.set_hide_adult_content_sex(t.readBool());break;case 4:e.set_parenthesize_nicknames(t.readBool());break;case 3:e.set_timestamp_updated(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBool(2,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CPlayer_CommunityPreferences"},t}(ui.Message),Is=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_GetCommunityPreferences_Request"},t}(ui.Message),Rs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.preferences=function(){return ui.Message.getWrapperField(this,Os,1,1)},t.prototype.set_preferences=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Os;t.readMessage(i,Os.deserializeBinaryFromReader),e.set_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.preferences())&&t.writeMessage(1,i,Os.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_GetCommunityPreferences_Response"},t}(ui.Message),Es=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.preferences=function(){return ui.Message.getWrapperField(this,Os,1,1)},t.prototype.set_preferences=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Os;t.readMessage(i,Os.deserializeBinaryFromReader),e.set_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.preferences())&&t.writeMessage(1,i,Os.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_SetCommunityPreferences_Request"},t}(ui.Message),Ts=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_SetCommunityPreferences_Response"},t}(ui.Message),ks=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.state=function(){return ui.Message.getField(this,1)},t.prototype.set_state=function(e){ui.Message.setField(this,1,e)},t.prototype.announcement_headline=function(){return ui.Message.getField(this,2)},t.prototype.set_announcement_headline=function(e){ui.Message.setField(this,2,e)},t.prototype.announcement_url=function(){return ui.Message.getField(this,3)},t.prototype.set_announcement_url=function(e){ui.Message.setField(this,3,e)},t.prototype.time_posted=function(){return ui.Message.getField(this,4)},t.prototype.set_time_posted=function(e){ui.Message.setField(this,4,e)},t.prototype.announcement_gid=function(){return ui.Message.getField(this,5)},t.prototype.set_announcement_gid=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_state(t.readInt32());break;case 2:e.set_announcement_headline(t.readString());break;case 3:e.set_announcement_url(t.readString());break;case 4:e.set_time_posted(t.readUint32());break;case 5:e.set_announcement_gid(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint64String(5,i)},t.prototype.getClassName=function(){return"CPlayer_GetNewSteamAnnouncementState_Response"},t}(ui.Message)),Ds=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CPlayer_UpdateSteamAnnouncementLastRead_Response"},t}(ui.Message)),Gs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.games=function(){return ui.Message.getRepeatedWrapperField(this,ss,1)},t.prototype.set_games=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_games=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,ss,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new ss;t.readMessage(i,ss.deserializeBinaryFromReader),e.add_games(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.games(),i.length>0&&t.writeRepeatedMessage(1,i,ss.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_LastPlayedTimes_Notification"},t}(ui.Message),Ns=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.nickname=function(){return ui.Message.getField(this,2)},t.prototype.set_nickname=function(e){ui.Message.setField(this,2,e)},t.prototype.is_echo_to_self=function(){return ui.Message.getField(this,3)},t.prototype.set_is_echo_to_self=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readFixed32());break;case 2:e.set_nickname(t.readString());break;case 3:e.set_is_echo_to_self(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CPlayer_FriendNicknameChanged_Notification"},t}(ui.Message),Ls=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.state=function(){return ui.Message.getField(this,1)},t.prototype.set_state=function(e){ui.Message.setField(this,1,e)},t.prototype.announcement_headline=function(){return ui.Message.getField(this,2)},t.prototype.set_announcement_headline=function(e){ui.Message.setField(this,2,e)},t.prototype.announcement_url=function(){return ui.Message.getField(this,3)},t.prototype.set_announcement_url=function(e){ui.Message.setField(this,3,e)},t.prototype.time_posted=function(){return ui.Message.getField(this,4)},t.prototype.set_time_posted=function(e){ui.Message.setField(this,4,e)},t.prototype.announcement_gid=function(){return ui.Message.getField(this,5)},t.prototype.set_announcement_gid=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_state(t.readInt32());break;case 2:e.set_announcement_headline(t.readString());break;case 3:e.set_announcement_url(t.readString());break;case 4:e.set_time_posted(t.readUint32());break;case 5:e.set_announcement_gid(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint64String(5,i)},t.prototype.getClassName=function(){return"CPlayer_NewSteamAnnouncementState_Notification"},t}(ui.Message),As=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.preferences=function(){return ui.Message.getWrapperField(this,Os,1,1)},t.prototype.set_preferences=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Os;t.readMessage(i,Os.deserializeBinaryFromReader),e.set_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.preferences())&&t.writeMessage(1,i,Os.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_CommunityPreferencesChanged_Notification"},t}(ui.Message),Ps=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.preferences=function(){return ui.Message.getWrapperField(this,fs,2,1)},t.prototype.set_preferences=function(e){ui.Message.setWrapperField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readFixed32());break;case 2:var i=new fs;t.readMessage(i,fs.deserializeBinaryFromReader),e.set_preferences(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed32(1,i),null!=(i=e.preferences())&&t.writeMessage(2,i,fs.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CPlayer_PerFriendPreferencesChanged_Notification"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Player.GetMutualFriendsForIncomingInvites#1",t,us)}function i(e,t){return e.SendMsg("Player.GetGameBadgeLevels#1",t,ds)}function n(e,t){return e.SendMsg("Player.ClientGetLastPlayedTimes#1",t,as)}function r(e,t){return e.SendMsg("Player.AcceptSSA#1",t,ms)}function o(e,t){return e.SendMsg("Player.GetNicknameList#1",t,hs)}function a(e,t){return e.SendMsg("Player.GetPerFriendPreferences#1",t,ys)}function s(e,t){return e.SendMsg("Player.SetPerFriendPreferences#1",t,bs)}function c(e,t){return e.SendMsg("Player.AddFriend#1",t,Ss)}function l(e,t){return e.SendMsg("Player.RemoveFriend#1",t,Fs)}function u(e,t){return e.SendMsg("Player.IgnoreFriend#1",t,Bs)}function d(e,t){return e.SendMsg("Player.GetCommunityPreferences#1",t,Rs)}function p(e,t){return e.SendMsg("Player.SetCommunityPreferences#1",t,Ts)}function m(e,t){return e.SendMsg("Player.GetNewSteamAnnouncementState#1",t,ks)}function h(e,t){return e.SendMsg("Player.UpdateSteamAnnouncementLastRead#1",t,Ds)}e.GetMutualFriendsForIncomingInvites=t,e.GetGameBadgeLevels=i,e.ClientGetLastPlayedTimes=n,e.AcceptSSA=r,e.GetNicknameList=o,e.GetPerFriendPreferences=a,e.SetPerFriendPreferences=s,e.AddFriend=c,e.RemoveFriend=l,e.IgnoreFriend=u,e.GetCommunityPreferences=d,e.SetCommunityPreferences=p,e.GetNewSteamAnnouncementState=m,e.UpdateSteamAnnouncementLastRead=h}(Xa||(Xa={}));var xs;!function(e){e.NotifyLastPlayedTimesHandler={name:"PlayerClient.NotifyLastPlayedTimes#1",request:Gs},e.NotifyFriendNicknameChangedHandler={name:"PlayerClient.NotifyFriendNicknameChanged#1",request:Ns},e.NotifyNewSteamAnnouncementStateHandler={name:"PlayerClient.NotifyNewSteamAnnouncementState#1",request:Ls},e.NotifyCommunityPreferencesChangedHandler={name:"PlayerClient.NotifyCommunityPreferencesChanged#1",request:As},e.NotifyPerFriendPreferencesChangedHandler={name:"PlayerClient.NotifyPerFriendPreferencesChanged#1",request:Ps}}(xs||(xs={}));var zs,Us=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.trade_request_id=function(){return ui.Message.getField(this,1)},t.prototype.set_trade_request_id=function(e){ui.Message.setField(this,1,e)},t.prototype.other_steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_other_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.other_name=function(){return ui.Message.getField(this,3)},t.prototype.set_other_name=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_trade_request_id(t.readUint32());break;case 2:e.set_other_steamid(t.readUint64String());break;case 3:e.set_other_name(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeString(3,i)},t.prototype.getClassName=function(){return"CMsgTrading_InitiateTradeRequest"},t}(ui.Message)),Vs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.response=function(){return ui.Message.getField(this,1)},t.prototype.set_response=function(e){ui.Message.setField(this,1,e)},t.prototype.trade_request_id=function(){return ui.Message.getField(this,2)},t.prototype.set_trade_request_id=function(e){ui.Message.setField(this,2,e)},t.prototype.other_steamid=function(){return ui.Message.getField(this,3)},t.prototype.set_other_steamid=function(e){ui.Message.setField(this,3,e)},t.prototype.steamguard_required_days=function(){return ui.Message.getField(this,4)},t.prototype.set_steamguard_required_days=function(e){ui.Message.setField(this,4,e)},t.prototype.new_device_cooldown_days=function(){return ui.Message.getField(this,5)},t.prototype.set_new_device_cooldown_days=function(e){ui.Message.setField(this,5,e)},t.prototype.default_password_reset_probation_days=function(){return ui.Message.getField(this,6)},t.prototype.set_default_password_reset_probation_days=function(e){ui.Message.setField(this,6,e)},t.prototype.password_reset_probation_days=function(){return ui.Message.getField(this,7)},t.prototype.set_password_reset_probation_days=function(e){ui.Message.setField(this,7,e)},t.prototype.default_email_change_probation_days=function(){return ui.Message.getField(this,8)},t.prototype.set_default_email_change_probation_days=function(e){ui.Message.setField(this,8,e)},t.prototype.email_change_probation_days=function(){return ui.Message.getField(this,9)},t.prototype.set_email_change_probation_days=function(e){ui.Message.setField(this,9,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_response(t.readUint32());break;case 2:e.set_trade_request_id(t.readUint32());break;case 3:e.set_other_steamid(t.readUint64String());break;case 4:e.set_steamguard_required_days(t.readUint32());break;case 5:e.set_new_device_cooldown_days(t.readUint32());break;case 6:e.set_default_password_reset_probation_days(t.readUint32());break;case 7:e.set_password_reset_probation_days(t.readUint32());break;case 8:e.set_default_email_change_probation_days(t.readUint32());break;case 9:e.set_email_change_probation_days(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeUint32(8,i),void 0!==(i=ui.Message.getField(e,9))&&t.writeUint32(9,i)},t.prototype.getClassName=function(){return"CMsgTrading_InitiateTradeResponse"},t}(ui.Message),js=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.other_steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_other_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_other_steamid(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CMsgTrading_CancelTradeRequest"},t}(ui.Message),Ws=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.other_steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_other_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_other_steamid(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint64String(1,i)},t.prototype.getClassName=function(){return"CMsgTrading_StartSession"},t}(ui.Message),Hs=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.stat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_stat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.data=function(){return ui.Message.getField(this,2)},t.prototype.set_data=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_stat_id(t.readInt32());break;case 2:e.set_data(t.readInt64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeInt64String(2,i)},t.prototype.getClassName=function(){return"CMsgClientUGSGetGlobalStatsResponse_Day_Stat"},t}(ui.Message)),qs=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.steamid_clans=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_clans=function(e){ui.Message.setField(this,1,e)},t.prototype.add_steamid_clans=function(e,t){ui.Message.addToRepeatedField(this,1,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.add_steamid_clans(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeRepeatedUint64String(1,i)},t.prototype.getClassName=function(){return"CMsgClientGetClanActivityCounts"},t}(ui.Message)),Ks=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.published_file_id=function(){return ui.Message.getField(this,1)},t.prototype.set_published_file_id=function(e){ui.Message.setField(this,1,e)},t.prototype.vote_up=function(){return ui.Message.getField(this,2)},t.prototype.set_vote_up=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_published_file_id(t.readFixed64String());break;case 2:e.set_vote_up(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CMsgCREUpdateUserPublishedItemVote"},t}(ui.Message)),Js=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getFieldWithDefault(this,1,2)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeInt32(1,i)},t.prototype.getClassName=function(){return"CMsgCREUpdateUserPublishedItemVoteResponse"},t}(ui.Message),Ys=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.published_file_ids=function(){return ui.Message.getRepeatedWrapperField(this,Xs,1)},t.prototype.set_published_file_ids=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_published_file_ids=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,Xs,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Xs;t.readMessage(i,Xs.deserializeBinaryFromReader),e.add_published_file_ids(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.published_file_ids(),i.length>0&&t.writeRepeatedMessage(1,i,Xs.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgCREGetUserPublishedItemVoteDetails"},t}(ui.Message),Xs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.published_file_id=function(){return ui.Message.getField(this,1)},t.prototype.set_published_file_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_published_file_id(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CMsgCREGetUserPublishedItemVoteDetails_PublishedFileId"},t}(ui.Message),Zs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.eresult=function(){return ui.Message.getFieldWithDefault(this,1,2)},t.prototype.set_eresult=function(e){ui.Message.setField(this,1,e)},t.prototype.user_item_vote_details=function(){return ui.Message.getRepeatedWrapperField(this,Qs,2)},t.prototype.set_user_item_vote_details=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_user_item_vote_details=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,Qs,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_eresult(t.readInt32());break;case 2:var i=new Qs;t.readMessage(i,Qs.deserializeBinaryFromReader),e.add_user_item_vote_details(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeInt32(1,i),i=e.user_item_vote_details(),i.length>0&&t.writeRepeatedMessage(2,i,Qs.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CMsgCREGetUserPublishedItemVoteDetailsResponse"},t}(ui.Message),Qs=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.published_file_id=function(){return ui.Message.getField(this,1)},t.prototype.set_published_file_id=function(e){ui.Message.setField(this,1,e)},t.prototype.vote=function(){return ui.Message.getFieldWithDefault(this,2,0)},t.prototype.set_vote=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_published_file_id(t.readFixed64String());break;case 2:e.set_vote(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeInt32(2,i)},t.prototype.getClassName=function(){return"CMsgCREGetUserPublishedItemVoteDetailsResponse_UserItemVoteDetail"},t}(ui.Message),$s=(ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid1=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid1=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid2=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid2=function(e){ui.Message.setField(this,2,e)},t.prototype.count=function(){return ui.Message.getField(this,3)},t.prototype.set_count=function(e){ui.Message.setField(this,3,e)},t.prototype.most_recent_conversation=function(){return ui.Message.getField(this,4)},t.prototype.set_most_recent_conversation=function(e){ui.Message.setField(this,4,e)},t.prototype.rtime32_start_time=function(){return ui.Message.getField(this,5)},t.prototype.set_rtime32_start_time=function(e){ui.Message.setField(this,5,e)},t.prototype.bbcode_format=function(){return ui.Message.getField(this,6)},t.prototype.set_bbcode_format=function(e){ui.Message.setField(this,6,e)},t.prototype.start_ordinal=function(){return ui.Message.getField(this,7)},t.prototype.set_start_ordinal=function(e){ui.Message.setField(this,7,e)},t.prototype.time_last=function(){return ui.Message.getField(this,8)},t.prototype.set_time_last=function(e){ui.Message.setField(this,8,e)},t.prototype.ordinal_last=function(){return ui.Message.getField(this,9)},t.prototype.set_ordinal_last=function(e){ui.Message.setField(this,9,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid1(t.readFixed64String());break;case 2:e.set_steamid2(t.readFixed64String());break;case 3:e.set_count(t.readUint32());break;case 4:e.set_most_recent_conversation(t.readBool());break;case 5:e.set_rtime32_start_time(t.readFixed32());break;case 6:e.set_bbcode_format(t.readBool());break;case 7:e.set_start_ordinal(t.readUint32());break;case 8:e.set_time_last(t.readUint32());break;case 9:e.set_ordinal_last(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeFixed32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeBool(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeUint32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeUint32(8,i),void 0!==(i=ui.Message.getField(e,9))&&t.writeUint32(9,i)},t.prototype.getClassName=function(){return"CFriendMessages_GetRecentMessages_Request"},t}(ui.Message)),ec=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.messages=function(){return ui.Message.getRepeatedWrapperField(this,tc,1)},t.prototype.set_messages=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_messages=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,tc,t)},t.prototype.more_available=function(){return ui.Message.getField(this,4)},t.prototype.set_more_available=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new tc;t.readMessage(i,tc.deserializeBinaryFromReader),e.add_messages(i);break;case 4:e.set_more_available(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.messages(),i.length>0&&t.writeRepeatedMessage(1,i,tc.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,4))&&t.writeBool(4,i)},t.prototype.getClassName=function(){return"CFriendMessages_GetRecentMessages_Response"},t}(ui.Message),tc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.timestamp=function(){return ui.Message.getField(this,2)},t.prototype.set_timestamp=function(e){ui.Message.setField(this,2,e)},t.prototype.message=function(){return ui.Message.getField(this,3)},t.prototype.set_message=function(e){ui.Message.setField(this,3,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,4)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readUint32());break;case 2:e.set_timestamp(t.readUint32());break;case 3:e.set_message(t.readString());break;case 4:e.set_ordinal(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeUint32(4,i)},t.prototype.getClassName=function(){return"CFriendMessages_GetRecentMessages_Response_FriendMessage"},t}(ui.Message),ic=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.lastmessage_since=function(){return ui.Message.getField(this,1)},t.prototype.set_lastmessage_since=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_lastmessage_since(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeUint32(1,i)},t.prototype.getClassName=function(){return"CFriendsMessages_GetActiveMessageSessions_Request"},t}(ui.Message),nc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.message_sessions=function(){return ui.Message.getRepeatedWrapperField(this,rc,1)},t.prototype.set_message_sessions=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_message_sessions=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,rc,t)},t.prototype.timestamp=function(){return ui.Message.getField(this,2)},t.prototype.set_timestamp=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new rc;t.readMessage(i,rc.deserializeBinaryFromReader),e.add_message_sessions(i);break;case 2:e.set_timestamp(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.message_sessions(),i.length>0&&t.writeRepeatedMessage(1,i,rc.serializeBinaryToWriter),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CFriendsMessages_GetActiveMessageSessions_Response"},t}(ui.Message),rc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid_friend=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid_friend=function(e){ui.Message.setField(this,1,e)},t.prototype.last_message=function(){return ui.Message.getField(this,2)},t.prototype.set_last_message=function(e){ui.Message.setField(this,2,e)},t.prototype.last_view=function(){return ui.Message.getField(this,3)},t.prototype.set_last_view=function(e){ui.Message.setField(this,3,e)},t.prototype.unread_message_count=function(){return ui.Message.getField(this,4)},t.prototype.set_unread_message_count=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid_friend(t.readUint32());break;case 2:e.set_last_message(t.readUint32());break;case 3:e.set_last_view(t.readUint32());break;case 4:e.set_unread_message_count(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeUint32(4,i)},t.prototype.getClassName=function(){return"CFriendsMessages_GetActiveMessageSessions_Response_FriendMessageSession"},t}(ui.Message),oc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_entry_type=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_entry_type=function(e){ui.Message.setField(this,2,e)},t.prototype.message=function(){return ui.Message.getField(this,3)},t.prototype.set_message=function(e){ui.Message.setField(this,3,e)},t.prototype.contains_bbcode=function(){return ui.Message.getField(this,4)},t.prototype.set_contains_bbcode=function(e){ui.Message.setField(this,4,e)},t.prototype.echo_to_sender=function(){return ui.Message.getField(this,5)},t.prototype.set_echo_to_sender=function(e){ui.Message.setField(this,5,e)},t.prototype.low_priority=function(){return ui.Message.getField(this,6)},t.prototype.set_low_priority=function(e){ui.Message.setField(this,6,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_chat_entry_type(t.readInt32());break;case 3:e.set_message(t.readString());break;case 4:e.set_contains_bbcode(t.readBool());break;case 5:e.set_echo_to_sender(t.readBool());break;case 6:e.set_low_priority(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),void 0!==(i=ui.Message.getField(e,6))&&t.writeBool(6,i)},t.prototype.getClassName=function(){return"CFriendMessages_SendMessage_Request"},t}(ui.Message),ac=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.modified_message=function(){return ui.Message.getField(this,1)},t.prototype.set_modified_message=function(e){ui.Message.setField(this,1,e)},t.prototype.server_timestamp=function(){return ui.Message.getField(this,2)},t.prototype.set_server_timestamp=function(e){ui.Message.setField(this,2,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,3)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_modified_message(t.readString());break;case 2:e.set_server_timestamp(t.readUint32());break;case 3:e.set_ordinal(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint32(3,i)},t.prototype.getClassName=function(){return"CFriendMessages_SendMessage_Response"},t}(ui.Message),sc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_friend=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_friend=function(e){ui.Message.setField(this,1,e)},t.prototype.chat_entry_type=function(){return ui.Message.getField(this,2)},t.prototype.set_chat_entry_type=function(e){ui.Message.setField(this,2,e)},t.prototype.from_limited_account=function(){return ui.Message.getField(this,3)},t.prototype.set_from_limited_account=function(e){ui.Message.setField(this,3,e)},t.prototype.message=function(){return ui.Message.getField(this,4)},t.prototype.set_message=function(e){ui.Message.setField(this,4,e)},t.prototype.rtime32_server_timestamp=function(){return ui.Message.getField(this,5)},t.prototype.set_rtime32_server_timestamp=function(e){ui.Message.setField(this,5,e)},t.prototype.ordinal=function(){return ui.Message.getField(this,6)},t.prototype.set_ordinal=function(e){ui.Message.setField(this,6,e)},t.prototype.local_echo=function(){return ui.Message.getField(this,7)},t.prototype.set_local_echo=function(e){ui.Message.setField(this,7,e)},t.prototype.message_no_bbcode=function(){return ui.Message.getField(this,8)},t.prototype.set_message_no_bbcode=function(e){ui.Message.setField(this,8,e)},t.prototype.low_priority=function(){return ui.Message.getField(this,9)},t.prototype.set_low_priority=function(e){ui.Message.setField(this,9,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_friend(t.readFixed64String());break;case 2:e.set_chat_entry_type(t.readInt32());break;case 3:e.set_from_limited_account(t.readBool());break;case 4:e.set_message(t.readString());break;case 5:e.set_rtime32_server_timestamp(t.readFixed32());break;case 6:e.set_ordinal(t.readUint32());break;case 7:e.set_local_echo(t.readBool());break;case 8:e.set_message_no_bbcode(t.readString());break;case 9:e.set_low_priority(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeString(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeFixed32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBool(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeString(8,i),void 0!==(i=ui.Message.getField(e,9))&&t.writeBool(9,i)},t.prototype.getClassName=function(){return"CFriendMessages_IncomingMessage_Notification"},t}(ui.Message),cc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_partner=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,1,e)},t.prototype.timestamp=function(){return ui.Message.getField(this,2)},t.prototype.set_timestamp=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_partner(t.readFixed64String());break;case 2:e.set_timestamp(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CFriendMessages_AckMessage_Notification"},t}(ui.Message),lc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CFriendMessages_IsInFriendsUIBeta_Request"},t}(ui.Message),uc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.online_in_friendsui=function(){return ui.Message.getField(this,1)},t.prototype.set_online_in_friendsui=function(e){ui.Message.setField(this,1,e)},t.prototype.has_used_friendsui=function(){return ui.Message.getField(this,2)},t.prototype.set_has_used_friendsui=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_online_in_friendsui(t.readBool());break;case 2:e.set_has_used_friendsui(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBool(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CFriendMessages_IsInFriendsUIBeta_Response"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("FriendMessages.GetRecentMessages#1",t,ec)}function i(e,t){return e.SendMsg("FriendMessages.GetActiveMessageSessions#1",t,nc)}function n(e,t){return e.SendMsg("FriendMessages.SendMessage#1",t,ac)}function r(e,t){return e.SendNotification("FriendMessages.AckMessage#1",t)}function o(e,t){return e.SendMsg("FriendMessages.IsInFriendsUIBeta#1",t,uc)}e.GetRecentMessages=t,e.GetActiveMessageSessions=i,e.SendMessage=n,e.AckMessage=r,e.IsInFriendsUIBeta=o}(zs||(zs={}));var dc;!function(e){e.IncomingMessageHandler={name:"FriendMessagesClient.IncomingMessage#1",request:sc},e.NotifyAckMessageEchoHandler={name:"FriendMessagesClient.NotifyAckMessageEcho#1",request:cc}}(dc||(dc={}));var pc,mc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.groupid=function(){return ui.Message.getField(this,1)},t.prototype.set_groupid=function(e){ui.Message.setField(this,1,e)},t.prototype.name=function(){return ui.Message.getField(this,2)},t.prototype.set_name=function(e){ui.Message.setField(this,2,e)},t.prototype.accountid_members=function(){return ui.Message.getField(this,3)},t.prototype.set_accountid_members=function(e){ui.Message.setField(this,3,e)},t.prototype.add_accountid_members=function(e,t){ui.Message.addToRepeatedField(this,3,e,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_groupid(t.readUint32());break;case 2:e.set_name(t.readString());break;case 3:e.add_accountid_members(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeRepeatedUint32(3,i)},t.prototype.getClassName=function(){return"CFriendsListCategory"},t}(ui.Message),hc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CFriendsList_GetCategories_Request"},t}(ui.Message),gc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.categories=function(){return ui.Message.getRepeatedWrapperField(this,mc,1)},t.prototype.set_categories=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_categories=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,mc,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new mc;t.readMessage(i,mc.deserializeBinaryFromReader),e.add_categories(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.categories(),i.length>0&&t.writeRepeatedMessage(1,i,mc.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CFriendsList_GetCategories_Response"},t}(ui.Message),fc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.accountid=function(){return ui.Message.getField(this,1)},t.prototype.set_accountid=function(e){ui.Message.setField(this,1,e)},t.prototype.clanid=function(){return ui.Message.getField(this,2)},t.prototype.set_clanid=function(e){ui.Message.setField(this,2,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,3)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_accountid(t.readUint32());break;case 2:e.set_clanid(t.readUint32());break;case 3:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeUint64String(3,i)},t.prototype.getClassName=function(){return"CFriendsListFavoriteEntry"},t}(ui.Message),_c=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CFriendsList_GetFavorites_Request"},t}(ui.Message),yc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.favorites=function(){return ui.Message.getRepeatedWrapperField(this,fc,1)},t.prototype.set_favorites=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_favorites=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,fc,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new fc;t.readMessage(i,fc.deserializeBinaryFromReader),e.add_favorites(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.favorites(),i.length>0&&t.writeRepeatedMessage(1,i,fc.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CFriendsList_GetFavorites_Response"},t}(ui.Message),vc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.favorites=function(){return ui.Message.getRepeatedWrapperField(this,fc,1)},t.prototype.set_favorites=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_favorites=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,fc,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new fc;t.readMessage(i,fc.deserializeBinaryFromReader),e.add_favorites(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.favorites(),i.length>0&&t.writeRepeatedMessage(1,i,fc.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CFriendsList_SetFavorites_Request"},t}(ui.Message),bc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CFriendsList_SetFavorites_Response"},t}(ui.Message),Cc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.favorites=function(){return ui.Message.getRepeatedWrapperField(this,fc,1)},t.prototype.set_favorites=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_favorites=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,fc,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new fc;t.readMessage(i,fc.deserializeBinaryFromReader),e.add_favorites(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.favorites(),i.length>0&&t.writeRepeatedMessage(1,i,fc.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CFriendsList_FavoritesChanged_Notification"},t}(ui.Message),Sc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CFriendsList_GetFriendsList_Request"},t}(ui.Message),Mc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.friendslist=function(){return ui.Message.getWrapperField(this,Ci,1,1)},t.prototype.set_friendslist=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Ci;t.readMessage(i,Ci.deserializeBinaryFromReader),e.set_friendslist(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.friendslist())&&t.writeMessage(1,i,Ci.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CFriendsList_GetFriendsList_Response"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("FriendsList.GetCategories#1",t,gc)}function i(e,t){return e.SendMsg("FriendsList.GetFriendsList#1",t,Mc)}function n(e,t){return e.SendMsg("FriendsList.GetFavorites#1",t,yc)}function r(e,t){return e.SendMsg("FriendsList.SetFavorites#1",t,bc)}e.GetCategories=t,e.GetFriendsList=i,e.GetFavorites=n,e.SetFavorites=r}(pc||(pc={}));var Fc;!function(e){e.FavoritesChangedHandler={name:"FriendsListClient.FavoritesChanged#1",request:Cc}}(Fc||(Fc={}));var wc,Bc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.accept=function(){return ui.Message.getField(this,2)},t.prototype.set_accept=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_accept(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"CClan_RespondToClanInvite_Request"},t}(ui.Message),Oc=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CClan_RespondToClanInvite_Response"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Clan.RespondToClanInvite#1",t,Oc)}e.RespondToClanInvite=t}(wc||(wc={}));var Ic,Rc=function(){function e(e,t){this.m_bInitialized=!1,this.m_bGotInitialState=!1,this.m_strClanName="",this.m_strClanTag="",this.m_strAvatarHash=Un,this.m_eClanAccountFlags=0,this.m_cMemberCount=0,this.m_cUsersOnline=0,this.m_cUsersInGame=0,this.m_cChatRoomMembers=0,this.m_bPersonaStateLoadRequested=!1,this.m_steamid=e,this.m_eClanRelationship=t}return e.prototype.BNeedsPersonaData=function(){return!this.m_bInitialized&&!this.m_bPersonaStateLoadRequested},e.prototype.SetPersonaStateLoadRequested=function(){this.m_bPersonaStateLoadRequested=!0},Object.defineProperty(e.prototype,"name",{get:function(){return this.m_bInitialized?this.m_strClanName:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_steamid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clanid",{get:function(){return this.m_steamid.GetAccountID()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_count",{get:function(){return this.m_cMemberCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"users_online",{get:function(){return this.m_cUsersOnline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"users_ingame",{get:function(){return this.m_cUsersInGame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count_chat_room_members",{get:function(){return this.m_cChatRoomMembers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chat_room_private",{get:function(){return this.m_bChatRoomPrivate},enumerable:!0,configurable:!0}),e.prototype.BIsMember=function(){return 3==this.m_eClanRelationship},e.prototype.BIsInvite=function(){return 2==this.m_eClanRelationship},e.prototype.SetRelationship=function(e){this.m_eClanRelationship=e},e.prototype.BIsOGG=function(){return!!this.m_unOGGAppID||this.m_bGotInitialState&&0!=(16&this.m_eClanAccountFlags)},e.prototype.GetOGGAppID=function(){return this.m_unOGGAppID},e.prototype.BMatchesSearchString=function(e){return-1!==this.m_strClanName.toLocaleLowerCase().indexOf(e)},Object.defineProperty(e.prototype,"avatar_url",{get:function(){return h(this.m_strAvatarHash)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return this.BIsOGG()?this.avatar_url:h(this.m_strAvatarHash,"_medium")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return this.BIsOGG()?this.avatar_url:h(this.m_strAvatarHash,"_full")},enumerable:!0,configurable:!0}),e.prototype.OpenChatDialog=function(e,t){return void 0===t&&(t=!0),this.GetChatRoomGroupID().then(function(i){return wd.ChatStore.JoinAndShowChatRoomGroup(e,i,t),i})},e.prototype.ReadPersonaStateUpdate=function(e,t){if(this.m_bInitialized=!0,0!=(2&e)&&(this.m_strClanName=t.player_name()),0!=(1024&e)&&(this.m_strClanTag=t.clan_tag(),t.clan_data().chat_group_id()&&(this.m_ulChatRoomGroupID=t.clan_data().chat_group_id()),t.clan_data().ogg_app_id()&&(this.m_unOGGAppID=t.clan_data().ogg_app_id())),0!=(16&e)){var i=t.avatar_hash(),n=!0;if(i){for(var o=0;o<i.length&&n;o++)n=!i[o];this.m_strAvatarHash=n?Un:r(i)}}},e.prototype.ReadStateUpdate=function(e){if(this.m_bGotInitialState=!0,this.m_eClanAccountFlags=e.clan_account_flags(),this.m_bChatRoomPrivate=e.chat_room_private(),void 0!==e.user_counts()&&e.user_counts().members()){var t=e.user_counts();this.m_cMemberCount=t.members(),this.m_cUsersOnline=t.online(),this.m_cUsersInGame=t.in_game(),this.m_cChatRoomMembers=t.chat_room_members()}},e.prototype.GetChatGroupIDIfLoaded=function(){return this.m_ulChatRoomGroupID},e.prototype.GetChatRoomGroupID=function(){var e=this;if(this.m_ulChatRoomGroupID)return Promise.resolve(this.m_ulChatRoomGroupID);var t=fi.Init(Ko);return t.Body().set_steamid(this.steamid.ConvertTo64BitString()),t.Body().set_autocreate(!0),oa.GetClanChatRoomInfo(wd.CMInterface.GetServiceTransport(),t).then(function(t){return 1==t.GetEResult()&&t.Body().chat_group_summary().chat_group_id()?(e.m_ulChatRoomGroupID=t.Body().chat_group_summary().chat_group_id(),e.m_ulChatRoomGroupID):null})},e.prototype.SetChatGroupID=function(e){this.m_ulChatRoomGroupID=e},si.c([_i.observable],e.prototype,"m_bInitialized",void 0),si.c([_i.observable],e.prototype,"m_bGotInitialState",void 0),si.c([_i.observable],e.prototype,"m_eClanRelationship",void 0),si.c([_i.observable],e.prototype,"m_strAvatarHash",void 0),si.c([_i.observable],e.prototype,"m_ulChatRoomGroupID",void 0),si.c([_i.observable],e.prototype,"m_cMemberCount",void 0),si.c([_i.observable],e.prototype,"m_cUsersOnline",void 0),si.c([_i.observable],e.prototype,"m_cUsersInGame",void 0),si.c([_i.observable],e.prototype,"m_cChatRoomMembers",void 0),si.c([_i.observable],e.prototype,"m_bChatRoomPrivate",void 0),si.c([_i.computed],e.prototype,"avatar_url",null),si.c([_i.computed],e.prototype,"avatar_url_medium",null),si.c([_i.computed],e.prototype,"avatar_url_full",null),e}(),Ec=function(){function e(e){var t=this;this.m_mapClans=_i.observable.map(),this.m_eClanStateHandler=s(822,mn,function(e){var i=new hi.a(e.Body().steamid_clan());t.GetOrCreateClan(i).ReadStateUpdate(e.Body())}),this.m_FriendStore=e}return e.prototype.Init=function(e){this.m_CMInterface=e,this.m_CMInterface.AddOnLogonCallback(this.OnLogOn.bind(this))},e.prototype.OnLogOn=function(){},Object.defineProperty(e.prototype,"clan_invites",{get:function(){var e=[];return this.m_mapClans.forEach(function(t){t.m_bInitialized&&t.BIsInvite()&&e.push(t)}),e.sort(function(e,t){return e.name.localeCompare(t.name)}),e},enumerable:!0,configurable:!0}),e.prototype.GetClan=function(e){var t;return e instanceof hi.a?(AssertMsg(e.BIsClanAccount(),"expected clan steamid in GetClan()"),t=e.GetAccountID()):t=e,this.m_mapClans.get(t)},e.prototype.JoinClanChatRoom=function(e,t){var i=this.GetOrCreateClan(t);i.OpenChatDialog(e,!0),i.BNeedsPersonaData()&&this.LoadMissingClanPersonas()},e.prototype.ClearClanMembershipData=function(){this.m_mapClans.forEach(function(e){e.SetRelationship(0)})},e.prototype.SetClanChatGroupID=function(e,t){var i=this.GetOrCreateClan(e);i.SetChatGroupID(t),i.BNeedsPersonaData()&&this.ScheduleLoadMissingClanPersonas()},e.prototype.GetOrCreateClan=function(e,t){var i;i=e instanceof hi.a?e:hi.a.InitFromClanID(e);var n=this.m_mapClans.get(i.GetAccountID());return n?void 0!==t&&n.SetRelationship(t):(n=new Rc(i,t||0),this.m_mapClans.set(i.GetAccountID(),n)),n},e.prototype.OnClanRelationshipChanged=function(e,t){this.GetOrCreateClan(e,t)},e.prototype.RespondToClanInvite=function(e,t){var i=fi.Init(Bc);return i.Body().set_steamid(e.ConvertTo64BitString()),i.Body().set_accept(t),wc.RespondToClanInvite(this.m_CMInterface.GetServiceTransport(),i).then(function(e){return 1==e.GetEResult()})},e.prototype.EnsureInitialStateForClanInvites=function(){var e=fi.Init(qs,5554);this.clan_invites.forEach(function(t){t.m_bGotInitialState||e.Body().add_steamid_clans(t.steamid.ConvertTo64BitString())}),e.Body().steamid_clans().length<=0||this.m_CMInterface.Send(e)},e.prototype.ScheduleLoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData||(this.m_iIntervalLoadClanData=SetBackgroundTimeout(this.LoadMissingClanPersonas.bind(this),100))},e.prototype.LoadMissingClanPersonas=function(){this.m_iIntervalLoadClanData&&(ClearBackgroundTimeout(this.m_iIntervalLoadClanData),this.m_iIntervalLoadClanData=void 0);var e=fi.Init(Mi,815);e.Body().set_persona_state_requested(1042),this.m_mapClans.forEach(function(t){t.BNeedsPersonaData()&&(e.Body().add_friends(t.steamid.ConvertTo64BitString()),t.SetPersonaStateLoadRequested())}),e.Body().friends().length&&this.m_CMInterface.Send(e)},e.prototype.OnClanPersonaStateUpdate=function(e,t){var i=new hi.a(t.friendid());this.GetOrCreateClan(i).ReadPersonaStateUpdate(e,t)},si.c([_i.computed],e.prototype,"clan_invites",null),e}(),Tc=function(){function e(e){var t=this;this.m_rgFavorites=_i.observable.array(),this.m_IncomingFavoritesHandler=l(Fc.FavoritesChangedHandler,function(e){return t.RecvFavoritesList(e.Body().favorites()),1}),this.m_FriendStore=e,this.m_ClanStore=e.ClanStore}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_ChatStore=wd.ChatStore,this.m_CMInterface.AddOnLogonCallback(function(){var e=fi.Init(_c);pc.GetFavorites(t.m_CMInterface.GetServiceTransport(),e).then(function(e){1==e.GetEResult()&&t.RecvFavoritesList(e.Body().favorites())})},47)},e.prototype.BIsFavorited=function(e){for(var t=0,i=this.m_rgFavorites;t<i.length;t++)if(C(i[t],e))return!0;return!1},Object.defineProperty(e.prototype,"favorites",{get:function(){return this.m_rgFavorites},enumerable:!0,configurable:!0}),e.prototype.AddToFavorites=function(e,t){var i=this.m_rgFavorites.findIndex(function(t){return C(t,e)});return-1===i||void 0!==t&&i!==t?(-1!==i?_n.e(this.m_rgFavorites,i,t>i?t-1:t):void 0!==t?this.m_rgFavorites.splice(t,0,e):this.m_rgFavorites.push(e),this.SaveFavorites()):Promise.resolve(!0)},e.prototype.RemoveFromFavorites=function(e){return _n.d(this.m_rgFavorites,function(t){return C(t,e)})?this.SaveFavorites():Promise.resolve(!0)},e.prototype.OnFriendRemoved=function(e){var t=this.m_FriendStore.GetPlayer(e);this.RemoveFromFavorites({friend:t})},e.prototype.SaveFavorites=function(){for(var e=fi.Init(vc),t=0,i=this.m_rgFavorites;t<i.length;t++){var n=i[t],r=e.Body().add_favorites();n.friend?r.set_accountid(n.friend.accountid):n.clan?r.set_clanid(n.clan.clanid):n.chat?r.set_chat_group_id(n.chat.GetGroupID()):AssertMsg(!1,"empty favorite struct")}return pc.SetFavorites(this.m_CMInterface.GetServiceTransport(),e).then(function(e){return 1==e.GetEResult()})},e.prototype.ReadFavorites=function(e){this.m_rgFavorites.clear();for(var t=0,i=e;t<i.length;t++){var n=i[t];if(n.accountid()){var r=this.m_FriendStore.GetFriend(n.accountid());r&&this.m_rgFavorites.push({friend:r})}else if(n.clanid()){var o=this.m_ClanStore.GetClan(n.clanid());o&&this.m_rgFavorites.push({clan:o})}else if(n.chat_group_id()){var a=this.m_ChatStore.GetChatRoomGroup(n.chat_group_id());a&&this.m_rgFavorites.push({chat:a})}}},e.prototype.RecvFavoritesList=function(e){var t=this;Object(_i.when)(function(){return t.m_FriendStore.friends_list_ready&&t.m_ChatStore.chat_group_list_ready},this.ReadFavorites.bind(this,e))},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_friends_favorite_count(_n.b(this.m_rgFavorites,function(e){return!!e.friend})),e.metrics().set_group_chat_favorite_count(_n.b(this.m_rgFavorites,function(e){return!!e.chat||!!e.clan}))},si.c([_i.action],e.prototype,"AddToFavorites",null),si.c([_i.action],e.prototype,"RemoveFromFavorites",null),si.c([_i.action],e.prototype,"OnFriendRemoved",null),si.c([_i.action],e.prototype,"ReadFavorites",null),e}(),kc=i("Q5FY"),Dc=i("x0X8"),Gc=function(){function e(){this.Notifications_ShowInGame=0,this.Notifications_ShowOnline=0,this.Notifications_ShowMessage=0,this.Sounds_PlayInGame=0,this.Sounds_PlayOnline=0,this.Sounds_PlayMessage=0}return e}(),Nc=function(){function e(e){this.m_eFriendRelationship=0,this.m_bPersonaStateLoadRequested=!1,this.m_bPersonaStateReady=!1,this.m_bPersonaNameHistoryLoaded=void 0,this.m_rgPersonaNameHistory=[],this.m_bBetaStatusLoading=!1,this.m_bBetaStatusStale=!0,this.m_bIsOnlineInBeta=void 0,this.m_bIsInBeta=void 0,this.m_unAccountID=e,this.m_persona=new Vn(hi.a.InitFromAccountID(e)),0==e&&(AssertMsg(!1,"unset accountid"),this.m_bPersonaStateReady=!0,this.m_persona.m_bInitialized=!0)}return e.prototype.LoadIfNecessary=function(){this.m_persona.m_bInitialized||this.m_bPersonaStateLoadRequested||(this.m_bPersonaStateLoadRequested=!0,wd.FriendStore.QueueFriendPersonaStateLoad(this))},Object.defineProperty(e.prototype,"is_ready",{get:function(){return!(!this.m_persona.m_bInitialized&&!this.m_bPersonaStateReady||(Object.defineProperty(this,"is_ready",{value:!0}),0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persona",{get:function(){return this.LoadIfNecessary(),Object.defineProperty(this,"persona",{value:this.m_persona}),this.m_persona},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accountid",{get:function(){return this.m_unAccountID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"steamid",{get:function(){return this.m_persona.m_steamid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"steamid64",{get:function(){return this.m_persona.m_steamid.ConvertTo64BitString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"efriendrelationship",{get:function(){return this.m_eFriendRelationship},set:function(e){this.m_eFriendRelationship=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_friend",{get:function(){return 3==this.m_eFriendRelationship||6==this.m_eFriendRelationship},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_blocked",{get:function(){return 5==this.m_eFriendRelationship||6==this.m_eFriendRelationship},enumerable:!0,configurable:!0}),e.prototype.GetCommunityProfileURL=function(){return ai.a.COMMUNITY_BASE_URL+"profiles/"+this.steamid64+"/"},Object.defineProperty(e.prototype,"has_nickname",{get:function(){return!!this.m_strNickname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.m_strNickname},set:function(t){this.m_strNickname=t,this.m_strPlayerNicknameNormalized=t?e.NormalizeNameForSearch(t):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notification_settings",{get:function(){return this.m_NotificationSettings||(this.m_NotificationSettings=new Gc),this.m_NotificationSettings},set:function(e){this.m_NotificationSettings=e},enumerable:!0,configurable:!0}),e.prototype.BShowInGameNotification=function(){return 1==this.notification_settings.Notifications_ShowInGame||wd.SettingsStore.FriendsSettings.bNotifications_ShowIngame&&2!=this.notification_settings.Notifications_ShowInGame},e.prototype.BShowMessageNotification=function(){return 1==this.notification_settings.Notifications_ShowMessage||wd.SettingsStore.FriendsSettings.bNotifications_ShowMessage&&2!=this.notification_settings.Notifications_ShowMessage},e.prototype.BShowOnlineNotification=function(){return 1==this.notification_settings.Notifications_ShowOnline||wd.SettingsStore.FriendsSettings.bNotifications_ShowOnline&&2!=this.notification_settings.Notifications_ShowOnline},e.prototype.BPlayInGameSound=function(){return 1==this.notification_settings.Sounds_PlayInGame||wd.SettingsStore.FriendsSettings.bSounds_PlayIngame&&2!=this.notification_settings.Sounds_PlayInGame},e.prototype.BPlayMessageSound=function(){return 1==this.notification_settings.Sounds_PlayMessage||wd.SettingsStore.FriendsSettings.bSounds_PlayMessage&&2!=this.notification_settings.Sounds_PlayMessage},e.prototype.BPlayOnlineSound=function(){return 1==this.notification_settings.Sounds_PlayOnline||wd.SettingsStore.FriendsSettings.bSounds_PlayOnline&&2!=this.notification_settings.Sounds_PlayOnline},Object.defineProperty(e.prototype,"display_name",{get:function(){if(this.has_nickname){var e=this.primary_display_name;return this.showing_secondary_display_name&&(e+=" ("+this.secondary_display_name+")"),e}return this.persona.m_strPlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primary_display_name",{get:function(){return this.has_nickname&&!wd.SettingsStore.CommunityPreferences.bParenthesizeNicknames?this.nickname:this.persona.m_strPlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_secondary_display_name",{get:function(){return this.has_nickname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showing_secondary_display_name",{get:function(){return!!wd.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_secondary_display_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondary_display_name",{get:function(){return wd.SettingsStore.CommunityPreferences.bParenthesizeNicknames&&this.has_nickname?this.nickname:this.persona.m_strPlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_display_name_nickname",{get:function(){return this.has_nickname&&!wd.SettingsStore.CommunityPreferences.bParenthesizeNicknames},enumerable:!0,configurable:!0}),e.NormalizeNameForSearch=function(e){return e.toLocaleLowerCase()},Object.defineProperty(e.prototype,"player_name_normalized",{get:function(){var t=this;if(void 0===this.m_strPlayerNameNormalized){if(!this.is_ready)return"";var i=function(){t.m_strPlayerNameNormalized=e.NormalizeNameForSearch(t.m_persona.m_strPlayerName)};Object(_i.autorun)(i),void 0===this.m_strPlayerNameNormalized&&i()}return this.m_persona.m_strPlayerName,this.m_strPlayerNameNormalized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"game_name_normalized",{get:function(){var t=this;if(void 0===this.m_strGameNameNormalized){if(!this.is_ready)return"";var i=function(){t.m_strGameNameNormalized=e.NormalizeNameForSearch(t.m_persona.current_game_name)};Object(_i.autorun)(i),void 0===this.m_strGameNameNormalized&&i()}return this.m_persona.current_game_name,this.m_strGameNameNormalized},enumerable:!0,configurable:!0}),e.prototype.MatchSearchString=function(e){var t=this.player_name_normalized.indexOf(e);return-1!==t?{match:1,iOffset:t,bFullMatch:0===t&&this.player_name_normalized.length===e.length}:this.has_nickname&&-1!==(t=this.m_strPlayerNicknameNormalized.indexOf(e))?{match:2,iOffset:t,bFullMatch:0===t&&this.m_strPlayerNicknameNormalized.length===e.length}:{match:0}},e.prototype.BMatchesSearchString=function(e,t){if(-1!==this.player_name_normalized.indexOf(e))return!0;if(this.has_nickname){if(-1!==this.m_strPlayerNicknameNormalized.indexOf(e))return!0}else if(t&&this.m_persona.is_ingame&&-1!==this.game_name_normalized.indexOf(e))return!0;return!1},Object.defineProperty(e.prototype,"persona_name_history",{get:function(){var e=this;if(void 0===this.m_bPersonaNameHistoryLoaded){var t=fi.Init(cn,5570);t.Body().add_Ids().set_steamid(this.steamid64),t.Body().set_id_count(1),wd.CMInterface.SendMsgAndAwaitResponse(t,un).then(function(t){if(AssertMsg(1==t.Body().responses().length,"Got an invalid number of responses to CMsgClientAMGetPersonaNameHistory"),1==t.Body().responses().length){var i=t.Body().responses()[0];AssertMsg(i.steamid()==e.steamid64,"Got a response for the wrong user from CMsgClientAMGetPersonaNameHistory"),i.steamid()==e.steamid64&&(AssertMsg(0==e.m_rgPersonaNameHistory.length,"Got persona name history response for same user twice."),Object(_i.runInAction)(function(){for(var t=0,n=i.names();t<n.length;t++){var r=n[t];e.m_rgPersonaNameHistory.push(r.name())}e.m_bPersonaNameHistoryLoaded=!0}))}}),this.m_bPersonaNameHistoryLoaded=!1}return this.m_rgPersonaNameHistory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persona_name_history_loaded",{get:function(){return!0===this.m_bPersonaNameHistoryLoaded},enumerable:!0,configurable:!0}),e.prototype.OpenChatDialog=function(e){return this.is_blocked?(wd.OpenURLInBrowser(this.GetCommunityProfileURL(),e),null):wd.ShowFriendChatDialog(e,this.m_unAccountID,!0)},Object.defineProperty(e,"FriendSortStatusComparator",{get:function(){var t=wd.SettingsStore.BForceAlphabeticFriendSorting();return e.FriendSortStatusComparatorInternal.bind(null,t)},enumerable:!0,configurable:!0}),e.FriendSortStatusComparatorInternal=function(e,t,i){var n=t.persona,r=i.persona;if(n.is_ingame){if(!r.is_ingame)return-1;if(e)return 0;if(n.is_awayOrSnooze){if(!r.is_awayOrSnooze)return 1}else if(r.is_awayOrSnooze)return-1}else if(r.is_ingame)return 1;if(n.is_online){if(!r.is_online)return-1}else if(r.is_online)return 1;if(!e)if(n.is_awayOrSnooze){if(!r.is_awayOrSnooze)return 1}else if(r.is_awayOrSnooze)return-1;return 0},Object.defineProperty(e,"DefaultFriendSortComparator",{get:function(){var t=wd.SettingsStore.BForceAlphabeticFriendSorting();return function(i,n){var r=e.FriendSortStatusComparatorInternal(t,i,n);return 0!=r?r:i.display_name.localeCompare(n.display_name)}},enumerable:!0,configurable:!0}),e.FriendSortByLastSeenComparator=function(e,t){var i=e.persona,n=t.persona;if(!i.is_online&&!n.is_online){var r=wd.GetServerRTime32()-i.last_seen_online,o=wd.GetServerRTime32()-n.last_seen_online;if(r>o)return 1;if(o>r)return-1}return e.display_name.localeCompare(t.display_name)},e.FriendSortByFriendOrNotComparator=function(e,t){return e.is_friend&&!t.is_friend||!e.is_friend&&t.is_friend?e.is_friend?-1:1:e.display_name.localeCompare(t.display_name)},e.prototype.GetOfflineStatusUpdateRate=function(){if(0==this.persona.last_seen_online)return 3e4;var e=1e3,t=wd.GetServerRTime32()-this.persona.last_seen_online;return e*=t>86400?3600:t>7200?60:15},e.prototype.GetOfflineStatusTime=function(){if(0==this.persona.last_seen_online)return Object(ua.b)("#PersonaStateOffline");var e=this.GetOfflineStatusUpdateRate();(!ai.a.IN_MOBILE||e<=60)&&Object(kc.now)(e);var t=wd.GetServerRTime32()-this.persona.last_seen_online;return t<60?Object(ua.b)("#PersonaStateLastSeen_JustNow"):Object(ua.b)("#PersonaStateLastSeen",Object(ua.e)(t))},Object.defineProperty(e.prototype,"localized_online_status",{get:function(){switch(this.persona.m_ePersonaState){case 0:case 7:return this.GetOfflineStatusTime();case 1:return Object(ua.b)("#PersonaStateOnline");case 2:return Object(ua.b)("#PersonaStateBusy");case 3:return Object(ua.b)("#PersonaStateAway");case 4:return Object(ua.b)("#PersonaStateSnooze");case 5:return Object(ua.b)("#PersonaStateLookingToTrade");case 6:return Object(ua.b)("#PersonaStateLookingToPlay");default:return""}},enumerable:!0,configurable:!0}),e.prototype.GetBroadcastDescription=function(){if(this.persona.m_strBroadcastTitle)return this.persona.m_strBroadcastTitle;if(this.persona.m_broadcastAccountId){var e=wd.FriendStore.GetPlayer(this.persona.m_broadcastAccountId),t=this.persona.m_broadcastAppId?wd.AppInfoStore.GetAppInfo(this.persona.m_broadcastAppId):null;if(e.is_ready)return t&&t.is_valid?Object(ua.b)("#PersonaStateWatchingBroadcast_PlayerGame",e.display_name,t.name):Object(ua.b)("#PersonaStateWatchingBroadcast_Player",e.display_name)}return null},e.prototype.LoadFriendsUIBetaStatus=function(){var e=this;if(this.is_friend&&this.m_bBetaStatusStale&&!this.m_bBetaStatusLoading){this.m_bBetaStatusLoading=!0;var t=this.persona.is_online,i=fi.Init(lc);i.Body().set_steamid(this.steamid64),zs.IsInFriendsUIBeta(wd.CMInterface.GetServiceTransport(),i).then(function(i){e.m_bBetaStatusLoading=!1,e.m_bBetaStatusStale=!1,e.m_bIsOnlineInBeta=i.Body().online_in_friendsui()||!1,e.m_bIsInBeta=i.Body().has_used_friendsui()||!1,Object(_i.when)(function(){return e.persona.is_online!=t}).then(function(){e.m_bBetaStatusStale=!0})})}},Object.defineProperty(e.prototype,"is_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsInBeta},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_online_in_beta",{get:function(){return this.LoadFriendsUIBetaStatus(),this.m_bIsOnlineInBeta},enumerable:!0,configurable:!0}),si.c([_i.observable],e.prototype,"m_eFriendRelationship",void 0),si.c([_i.observable],e.prototype,"m_bPersonaStateReady",void 0),si.c([_i.observable],e.prototype,"m_bPersonaNameHistoryLoaded",void 0),si.c([_i.observable],e.prototype,"m_rgPersonaNameHistory",void 0),si.c([_i.observable],e.prototype,"m_strPlayerNicknameNormalized",void 0),si.c([_i.observable],e.prototype,"m_strNickname",void 0),si.c([_i.observable],e.prototype,"m_bBetaStatusStale",void 0),si.c([_i.observable],e.prototype,"m_bIsOnlineInBeta",void 0),si.c([_i.observable],e.prototype,"m_bIsInBeta",void 0),si.c([_i.computed],e.prototype,"display_name",null),si.c([_i.computed],e.prototype,"secondary_display_name",null),si.c([_i.computed],e.prototype,"persona_name_history",null),si.c([_i.computed],e.prototype,"persona_name_history_loaded",null),si.c([_i.computed],e.prototype,"localized_online_status",null),e}(),Lc=function(){function e(){var e=this;this.m_FriendGroupStore=new Jc(this),this.m_ClanStore=new Ec(this),this.m_FavoritesStore=new Tc(this),this.m_mapPlayerCache=new Map,this.m_mapApprovedNonFriendMessages=_i.observable.map(),this.m_setFriendsNeedingPersonaStateLoad=new Set,this.m_iIntervalSubscribeToPersonaStateUpdates=0,this.m_setFriendAccountIDs=new Set,this.m_setIncomingInviteAccountIDs=new Set,this.m_bUserSetPersonaState=!1,this.m_eUserPersonaState=0,this.m_FriendStorePrefs={ePersonaState:1,strNonFriendsAllowedToMsg:""},this.m_cPersonaStateUpdatesReceived=0,this.m_bReadyToRender=!1,this.m_bPerFriendPreferencesLoaded=!1,this.m_bReceivedFriendsList=!1,this.m_bInitialPersonaStatesLoaded=!1,this.m_bParentalLocked=void 0,this.m_eUserPersonaStateParental=1,this.m_rgPersonaStateChangeCallbacks=new vn,this.m_nMissingPersonaStateRetryCount=0,this.m_nMissingPersonaStateMaxRetries=5,this.m_bSnoozeCallbackFired=!0,this.m_bAwayCallbackFired=!0,this.m_bNextActivityCallbackRegistered=!1,this.fnRecvMsgClientFriendsList=s(767,Ci,function(t){t.Body().bincremental()&&e.SetFriendsList(t.Body())}),this.fnRecvMsgClientPersonaState=s(766,wi,function(t){for(var i=t.Body().status_flags(),n=0,r=t.Body().friends();n<r.length;n++){var o=r[n],a=new hi.a(o.friendid());if(a.BIsClanAccount())e.m_ClanStore.OnClanPersonaStateUpdate(i,o);else if(a.BIsIndividualAccount()){var s=e.GetPlayerIfCached(a.GetAccountID());s||(s=e.GetPlayer(a.GetAccountID()));var c=s.persona,l=c.m_ePersonaState,u=c.m_strPlayerName,d=c.m_unGamePlayedAppID,p=c.m_strGameExtraInfo,m=c.is_in_nonsteam_game,h=c.m_broadcastAppId,g=c.m_bInitialized;c.m_bInitialized||e.m_cPersonaStateUpdatesReceived++,c.UpdateFromMessage(i,o);var f=0!=(1&i);if(a.GetAccountID()==e.self.accountid&&f){var _=!!o.persona_set_by_user(),y=c.m_ePersonaState;e.UpdateUserPersonaStateInternal(y,_,!0),1==y&&1!=(y=e.AdjustPersonaStateForIdleTime(y))&&e.UpdateUserPersonaStateInternal(y,!1)}var v=!1,b=c.m_unGamePlayedAppID,C=c.m_broadcastAppId;if(!h||IsFeatureBroadcastEnabled()&&h==An||(h=void 0),!C||IsFeatureBroadcastEnabled()&&C==An||(C=void 0),b||d||m||c.is_in_nonsteam_game||C||h){if(v=d!=b,c.GetAccountID()!=e.m_self.accountid&&s.is_friend){var S=d,M=b;0==c.m_ePersonaState&&(M=0),m&&(S=e.m_FriendGroupStore.non_steam_game_id),c.is_in_nonsteam_game&&(M=e.m_FriendGroupStore.non_steam_game_id),!S&&h&&(S=h),!M&&C&&(M=C),e.m_FriendGroupStore.OnFriendGameChanged(a.GetAccountID(),S,M)}}else c.m_strGameExtraInfo&&(v=p!=c.m_strGameExtraInfo);g&&s.is_friend&&s.accountid!=e.m_self.accountid&&(l!=c.m_ePersonaState||v)&&(s.BPlayInGameSound()&&v&&s.persona.is_ingame?e.PlayJoinGameSound():s.BPlayOnlineSound()&&l!=c.m_ePersonaState&&1==c.m_ePersonaState&&e.PlayFriendOnlineSound(),e.OnFriendPersonaStateChanged(s,l,c.m_ePersonaState,v)),c.m_ePersonaState==l&&c.m_unGamePlayedAppID==d&&c.m_strGameExtraInfo==p&&c.m_strPlayerName==u||e.m_rgPersonaStateChangeCallbacks.Dispatch(s)}}e.m_cPersonaStateUpdatesReceived>=e.m_setFriendAccountIDs.size&&e.m_bReceivedFriendsList&&(e.m_bInitialPersonaStatesLoaded=!0,e.UpdateReadyToRenderState())}),this.m_PerFriendPreferencesChangedHandler=l(xs.NotifyPerFriendPreferencesChangedHandler,function(t){var i=e.GetPlayer(t.Body().accountid());if(i){var n=t.Body().preferences();i.nickname=n.nickname()||void 0;var r=new Gc;e.FillPerFriendNotificationSettingsFromMessage(r,n),i.notification_settings=r}return 1}),this.m_InitiateTradeResult=s(7704,Vs,function(e){var t=e.Body().response(),i=(e.Body().trade_request_id(),new hi.a(e.Body().other_steamid()));switch(t){case 0:case 50:break;case 1:var n=wd.ShowFriendChatDialog(wd.GetDefaultBrowserContext(),i.GetAccountID(),!1);n&&n.MarkTradeRequestDeclined();break;case 11:case 4:case 12:case 9:case 8:case 13:case 7:case 26:case 22:var r=new qa(e.Body().response());r.steamguard_required_days=e.Body().steamguard_required_days(),r.new_device_cooldown_days=e.Body().new_device_cooldown_days(),r.default_password_reset_probation_days=e.Body().default_password_reset_probation_days(),r.password_reset_probation_days=e.Body().password_reset_probation_days(),r.default_email_change_probation_days=e.Body().default_email_change_probation_days(),r.email_change_probation_days=e.Body().email_change_probation_days();var n=wd.ShowFriendChatDialog(wd.GetDefaultBrowserContext(),i.GetAccountID(),!1);n&&n.CancelTradeRequest(r)}}),this.m_InitiateTradeProposed=s(7702,Us,function(t){var i=new hi.a(t.Body().other_steamid()),n=e.GetFriend(i.GetAccountID());if(n){var r=t.Body().trade_request_id(),o=wd.ShowFriendChatDialog(wd.GetDefaultBrowserContext(),n.accountid,!1);o&&o.AddNewTradeRequestAndNotify(i.GetAccountID(),wd.GetServerRTime32(),t.Body().other_steamid(),r)}}),this.m_StartTradingSession=s(7705,Ws,function(t){var i=new hi.a(t.Body().other_steamid()),n=e.OpenTradeWindow(t.Body().other_steamid()),r=wd.ShowFriendChatDialog(wd.GetDefaultBrowserContext(),i.GetAccountID(),!1);r&&r.MarkTradeRequestAccepted(n)})}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupStore.Init(e),this.m_ClanStore.Init(e),this.m_FavoritesStore.Init(e);var i=!1;return this.m_CMInterface.AddOnLogonCallback(function(){i?t.SendPersonaStateToServer(!0):(i=!0,t.m_self=t.AddPlayerToCache(t.m_CMInterface.steamid.GetAccountID(),1),wd.SettingsStore.GetObjectFromLocalStorage("FriendStoreLocalPrefs",t.m_FriendStorePrefs).then(function(e){if(t.m_FriendStorePrefs=e,void 0!=e.strNonFriendsAllowedToMsg&&""!=e.strNonFriendsAllowedToMsg)for(var i=new Date,n=i.getTime(),r=e.strNonFriendsAllowedToMsg.split(","),o=0;o<r.length;++o){var a=r[o].split("=");if(2==a.length){var s=Number(a[0]),c=Number(a[1]);c>n&&t.m_mapApprovedNonFriendMessages.set(s,c)}}t.m_eUserPersonaState=e.ePersonaState,t.m_bUserSetPersonaState=!1,t.SendPersonaStateToServer(!0)}),t.m_bReadyToRender||SetBackgroundTimeout(t.ForceReadyToRender.bind(t),1e3)),t.GetFriendsList()}),this.m_CMInterface.AddOnDisconnectCallback(function(){t.SetPersonasOffline(!1),t.m_FriendGroupStore.OnPersonaStateCacheReset()}),this.m_CMInterface.AddOnDisconnectCallback(function(){t.SetPersonasOffline(!0)},102),Object(_i.autorun)(function(){var e=wd.ParentalStore.BIsFriendsBlocked();t.OnParentalLockChanged(e)}),this.InitializeIdleTracking(),this.m_bReadyToRender?Promise.resolve():new Promise(function(e,i){t.m_fnOnReadyToRender=e})},e.prototype.GetFriendsList=function(){return si.b(this,void 0,void 0,function(){var e,t,i;return si.e(this,function(n){switch(n.label){case 0:return e=fi.Init(Sc),[4,pc.GetFriendsList(this.m_CMInterface.GetServiceTransport(),e)];case 1:return t=n.sent(),1==t.GetEResult()?this.SetFriendsList(t.Body().friendslist()):(i={message:"ShowFriendsErrorRetryDialog"},window.parent.postMessage(i,"https://steamloopback.host"),AssertMsg(!1,"GetFriendsList returned",t.GetEResult())),[2]}})})},e.prototype.UpdateReadyToRenderState=function(){this.m_bReadyToRender||this.m_bReceivedFriendsList&&this.m_bInitialPersonaStatesLoaded&&this.m_bPerFriendPreferencesLoaded&&(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.ForceReadyToRender=function(){AssertMsg(this.m_bReadyToRender,"FriendStore: Forcing ready to render, was not ready in time."),this.m_bInitialPersonaStatesLoaded=!0,this.m_bPerFriendPreferencesLoaded=!0,this.UpdateReadyToRenderState()},e.prototype.AddPersonaStateChangedCallback=function(e){return this.m_rgPersonaStateChangeCallbacks.Register(e)},e.prototype.BIsInvisibleMode=function(){return 7==this.m_eUserPersonaState},e.prototype.GetUserDoNotDisturb=function(){return wd.SettingsStore.FriendsSettings.bDoNotDisturbMode},e.prototype.SetUserDoNotDisturb=function(e){wd.SettingsStore.FriendsSettings.bDoNotDisturbMode=e,wd.SettingsStore.BUpdateFriendsSettings(wd.SettingsStore.FriendsSettings)},e.prototype.SetUserPersonaState=function(e){this.UpdateUserPersonaStateInternal(e,!0)},e.prototype.BApprovedNonFriendMessages=function(e){var t=new Date,i=this.m_mapApprovedNonFriendMessages.get(e);return void 0!=i&&i>t.getTime()},e.prototype.SetApprovedNonFriendMessages=function(e){var t=new Date,i=t.getTime();this.m_mapApprovedNonFriendMessages.set(e,i+864e5);var n="";this.m_mapApprovedNonFriendMessages.forEach(function(e,t,r){e>i&&(0!=n.length&&(n+=","),n+=t.toString()+"="+e.toString())}),this.m_FriendStorePrefs.strNonFriendsAllowedToMsg=n,wd.SettingsStore.StoreObjectInLocalStorage("FriendStoreLocalPrefs",this.m_FriendStorePrefs)},e.prototype.OnParentalLockChanged=function(e){!this.m_bParentalLocked&&e?(this.m_eUserPersonaStateParental=this.m_eUserPersonaState,this.UpdateUserPersonaStateInternal(0,!1),this.m_bParentalLocked=e):this.m_bParentalLocked&&!e&&(this.m_bParentalLocked=e,this.UpdateUserPersonaStateInternal(this.m_eUserPersonaStateParental,!1))},e.prototype.UpdateUserPersonaStateInternal=function(e,t,i){if(void 0===i&&(i=!1),!this.m_bParentalLocked&&(e!=this.m_eUserPersonaState||this.m_bUserSetPersonaState!=t)){if(0==e&&t)return void wd.SignOutOfFriends(void 0);this.m_eUserPersonaState=e,this.m_bUserSetPersonaState=t,i||this.SendPersonaStateToServer(),(t||1==this.m_eUserPersonaState)&&(this.m_FriendStorePrefs.ePersonaState=e,wd.SettingsStore.StoreObjectInLocalStorage("FriendStoreLocalPrefs",this.m_FriendStorePrefs))}},e.prototype.SendPersonaStateToServer=function(e){void 0===e&&(e=!1);var t=fi.Init(Fi,716);t.Body().set_persona_state(this.m_eUserPersonaState),t.Body().set_persona_set_by_user(this.m_bUserSetPersonaState),t.Body().set_need_persona_response(e),this.m_CMInterface.Send(t)},e.prototype.AdjustPersonaStateForIdleTime=function(e){return(1==e||3==e)&&wd.IdleTracker.GetUserIdleTime()>=7200?4:1==e&&wd.IdleTracker.GetUserIdleTime()>=300?3:e},Object.defineProperty(e.prototype,"FriendGroupStore",{get:function(){return this.m_FriendGroupStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClanStore",{get:function(){return this.m_ClanStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FavoritesStore",{get:function(){return this.m_FavoritesStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all_friends",{get:function(){var e=this,t=[];return this.m_setFriendAccountIDs.forEach(function(i){t.push(e.GetFriend(i))}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all_friends_accountids",{get:function(){return this.m_setFriendAccountIDs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_ready",{get:function(){return this.m_bReceivedFriendsList},enumerable:!0,configurable:!0}),e.prototype.GetFriend=function(e){var t=this.m_mapPlayerCache.get(e);if(t){if(!t.is_friend)return null}else AssertMsg(!1,"Friend missing from cache: "+e);return t},e.prototype.GetPlayer=function(e){var t=this.m_mapPlayerCache.get(e);return t||(t=this.AddPlayerToCache(e,3)),t},e.prototype.AddPlayerToCache=function(e,t,i){if(void 0===i&&(i=!0),this.m_mapPlayerCache.has(e))return this.m_mapPlayerCache.get(e);var n=new Nc(e);return this.m_mapPlayerCache.set(e,n),n},e.prototype.GetPlayerIfCached=function(e){return this.m_mapPlayerCache.get(e)},e.prototype.GetFriendIfCached=function(e){var t=this.m_mapPlayerCache.get(e);return t&&t.is_friend?t:null},e.prototype.SetPersonasOffline=function(e){var t=this;this.m_mapPlayerCache.forEach(function(i){e&&(i.is_friend||i.accountid==t.self.accountid)||i.persona.is_online&&i.persona.ClearStateOnDisconnect()})},e.prototype.QueueFriendPersonaStateLoad=function(e){this.m_setFriendsNeedingPersonaStateLoad.add(e.accountid),this.m_iIntervalSubscribeToPersonaStateUpdates||(this.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(this.SubscribeToMissingPersonaStates.bind(this),50))},Object.defineProperty(e.prototype,"self",{get:function(){return this.m_self},enumerable:!0,configurable:!0}),e.prototype.SubscribeToMissingPersonaStates=function(){var e=this;this.m_iIntervalSubscribeToPersonaStateUpdates&&(ClearBackgroundTimeout(this.m_iIntervalSubscribeToPersonaStateUpdates),this.m_iIntervalSubscribeToPersonaStateUpdates=0);var t=[];if(this.m_setFriendsNeedingPersonaStateLoad.forEach(function(i){var n=e.m_mapPlayerCache.get(i);n&&!n.persona.m_bInitialized&&t.push(n.accountid)}),this.m_setFriendsNeedingPersonaStateLoad.clear(),t.length){var i=fi.Init(Mi,815);i.Body().set_persona_state_requested(1106);for(var n=0,r=t;n<r.length;n++){var o=r[n];i.Body().add_friends(hi.a.InitFromAccountID(o).ConvertTo64BitString())}this.m_CMInterface.Send(i),SetBackgroundTimeout(function(){for(var i=0,n=0,r=t;n<r.length;n++){var o=r[n],a=e.GetPlayer(o);a&&!a.persona.m_bInitialized&&(a.m_bPersonaStateReady=!0,a.persona.m_bNameInitialized||(AssertMsg(a.m_bPersonaStateLoadRequested,"PersonaStateLoadRequested not set"),e.m_setFriendsNeedingPersonaStateLoad.add(o)),i++)}i>0?e.m_nMissingPersonaStateRetryCount<e.m_nMissingPersonaStateMaxRetries?(e.m_nMissingPersonaStateRetryCount++,e.m_iIntervalSubscribeToPersonaStateUpdates||(e.m_iIntervalSubscribeToPersonaStateUpdates=SetBackgroundTimeout(e.SubscribeToMissingPersonaStates.bind(e),1e3))):console.log("Giving up persona state retries with",i,"still not filled",e.m_setFriendsNeedingPersonaStateLoad):e.m_nMissingPersonaStateRetryCount=0},500)}},e.prototype.InitializeIdleTracking=function(){this.m_bAwayCallbackFired&&(this.m_bAwayCallbackFired=!1,wd.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,3),300)),this.m_bSnoozeCallbackFired&&(this.m_bSnoozeCallbackFired=!1,wd.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this,4),7200))},e.prototype.ResetIdleState=function(){this.m_bUserSetPersonaState||3!=this.m_eUserPersonaState&&4!=this.m_eUserPersonaState||this.UpdateUserPersonaStateInternal(1,!1),this.m_bNextActivityCallbackRegistered=!1,this.InitializeIdleTracking()},e.prototype.OnIdle=function(e){3==e?(this.m_bAwayCallbackFired=!0,this.m_bUserSetPersonaState||4==this.m_eUserPersonaState||this.UpdateUserPersonaStateInternal(e,!1)):4==e&&(this.m_bSnoozeCallbackFired=!0,this.m_bUserSetPersonaState||this.UpdateUserPersonaStateInternal(e,!1)),this.m_bNextActivityCallbackRegistered||(this.m_bNextActivityCallbackRegistered=!0,wd.IdleTracker.AddOnNextActivityCallback(this.ResetIdleState.bind(this)))},e.prototype.SendFriendInvite=function(e){var t=fi.Init(Cs);return t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),Xa.AddFriend(this.m_CMInterface.GetServiceTransport(),t).then(function(e){return e.Body().friend_relationship()})},e.prototype.RemoveFriend=function(e){var t=fi.Init(Ms);return t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),Xa.RemoveFriend(this.m_CMInterface.GetServiceTransport(),t).then(function(e){return e.Body().friend_relationship()})},e.prototype.BlockPlayer=function(e,t){void 0===t&&(t=!1);var i=fi.Init(ws);return i.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),t&&i.Body().set_unignore(!0),Xa.IgnoreFriend(this.m_CMInterface.GetServiceTransport(),i).then(function(e){return e.Body().friend_relationship()})},e.prototype.AddFriend=function(e,t){var i=new hi.a(e),n=i.GetAccountID(),r=this.m_setIncomingInviteAccountIDs.has(n);if(2==t){if(!r){var o=this.AddPlayerToCache(n,3,!1);o.efriendrelationship=t,o.LoadIfNecessary(),this.m_setIncomingInviteAccountIDs.add(n),this.m_FriendGroupStore.OnIncomingInviteAdded(n)}}else if(r){var o=this.AddPlayerToCache(n,3,!1);o.efriendrelationship=t,this.m_setIncomingInviteAccountIDs.delete(n),this.m_FriendGroupStore.OnIncomingInviteRemoved(n)}if(4==t){var o=this.AddPlayerToCache(n,3,!1);o.efriendrelationship=t,o.LoadIfNecessary(),this.m_FriendGroupStore.OnOutgoingInviteAdded(n)}else this.m_FriendGroupStore.OnOutgoingInviteRemoved(n);var a=this.m_setFriendAccountIDs.has(n);if(3==t||6==t){var s=void 0;a?s=this.GetFriend(n):(this.m_setFriendAccountIDs.add(n),s=this.AddPlayerToCache(n,2,!1),s.LoadIfNecessary(),this.m_FriendGroupStore.OnFriendAdded(n)),s.efriendrelationship=t}else{a&&(this.m_FriendGroupStore.OnFriendRemoved(n),this.m_FavoritesStore.OnFriendRemoved(n),this.m_setFriendAccountIDs.delete(n));var o=this.AddPlayerToCache(n,3,!1);o.efriendrelationship=t}},e.prototype.SetFriendsList=function(e){var t=e.friends();if(!e.bincremental()){for(var i=0,n=this.all_friends;i<n.length;i++)n[i].efriendrelationship=0;this.m_setFriendAccountIDs.clear(),this.m_setIncomingInviteAccountIDs.clear(),this.m_FriendGroupStore.OnFullFriendsListUpdateStart(),this.m_ClanStore.ClearClanMembershipData()}for(var r=0,o=t;r<o.length;r++){var a=o[r],s=new hi.a(a.ulfriendid());if(s.BIsIndividualAccount()){var c=a.efriendrelationship();this.AddFriend(s.ConvertTo64BitString(),c)}else s.BIsClanAccount()&&this.m_ClanStore.OnClanRelationshipChanged(s,a.efriendrelationship())}if(!e.bincremental()){this.m_FriendGroupStore.OnFullFriendsListUpdateComplete(),this.m_ClanStore.LoadMissingClanPersonas(),this.m_bReceivedFriendsList=!0;var l=fi.Init(Hn);xn.RequestFriendPersonaStates(this.m_CMInterface.GetServiceTransport(),l),this.RequestPerFriendPreferences(),0==this.m_setFriendAccountIDs.size?(this.m_bInitialPersonaStatesLoaded=!0,this.UpdateReadyToRenderState()):this.SubscribeToMissingPersonaStates()}},e.prototype.OnFriendPersonaStateChanged=function(e,t,i,n){if(wd.NotificationManager.BNotificationsPermitted()&&wd.SettingsStore.BReady()&&!wd.FriendStore.GetUserDoNotDisturb()){if(n&&e.persona.is_ingame&&e.BShowInGameNotification()){var r=e.persona.current_game_name;return void(r&&wd.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(ua.b)("#Friend_StateChange_InGame",r),tag:"state_"+e.accountid,steamid:e.persona.m_steamid.ConvertTo64BitString()}))}return 0==t&&0!=i&&e.BShowOnlineNotification()?void wd.NotificationManager.DisplayNotificationFromFriend(e,{title:e.display_name,body:Object(ua.b)("#Friend_StateChange_Online"),tag:"state_"+e.accountid,steamid:e.persona.m_steamid.ConvertTo64BitString()}):void 0}},e.prototype.PlayJoinGameSound=function(){wd.FriendStore.GetUserDoNotDisturb()||wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_join.m4a")},e.prototype.PlayFriendOnlineSound=function(){wd.FriendStore.GetUserDoNotDisturb()||wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_smoother_friend_online.m4a")},e.prototype.FillPerFriendNotificationSettingsFromMessage=function(e,t){e.Notifications_ShowInGame=t.notifications_showingame(),e.Notifications_ShowMessage=t.notifications_showmessages(),e.Notifications_ShowOnline=t.notifications_showonline(),e.Sounds_PlayInGame=t.sounds_showingame(),e.Sounds_PlayMessage=t.sounds_showmessages(),e.Sounds_PlayOnline=t.sounds_showonline()},e.prototype.RequestPerFriendPreferences=function(){var e=this,t=fi.Init(_s);Xa.GetPerFriendPreferences(this.m_CMInterface.GetServiceTransport(),t).then(function(t){Object(_i.runInAction)(function(){for(var i=0,n=t.Body().preferences();i<n.length;i++){var r=n[i],o=e.GetPlayer(r.accountid());if(o){o.nickname=r.nickname()||void 0;var a=new Gc;e.FillPerFriendNotificationSettingsFromMessage(a,r),o.notification_settings=a}else console.log("Got per-friend preferences back for a user we don't have a Player for:",r)}e.m_bPerFriendPreferencesLoaded=!0,e.UpdateReadyToRenderState()})})},e.prototype.FillMessageFromPerFriendNotificationSettings=function(e,t){e.set_notifications_showingame(t.Notifications_ShowInGame),e.set_notifications_showmessages(t.Notifications_ShowMessage),e.set_notifications_showonline(t.Notifications_ShowOnline),e.set_sounds_showingame(t.Sounds_PlayInGame),e.set_sounds_showmessages(t.Sounds_PlayMessage),e.set_sounds_showonline(t.Notifications_ShowOnline)},e.prototype.SetPlayerNickname=function(e,t){return this.SetPlayerPerFriendPreferences(e,t,e.notification_settings)},e.prototype.SetPlayerNotificationSettings=function(e,t){return this.SetPlayerPerFriendPreferences(e,e.nickname,t)},e.prototype.SetPlayerPerFriendPreferences=function(e,t,i){var n=fi.Init(vs),r=n.Body().preferences();return r.set_accountid(e.accountid),r.set_nickname(t),this.FillMessageFromPerFriendNotificationSettings(r,i),Xa.SetPerFriendPreferences(wd.CMInterface.GetServiceTransport(),n).then(function(e){return e.GetEResult()})},e.prototype.InviteToGame=function(e,t){var i=fi.Init(tn,7005);i.Hdr().set_routing_appid(t),i.Body().set_steam_id_src(this.m_CMInterface.steamid.ConvertTo64BitString()),i.Body().set_steam_id_dest(hi.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),this.m_CMInterface.Send(i)},e.prototype.InviteToLobby=function(e,t,i){var n=fi.Init(en,6621);n.Hdr().set_routing_appid(t),n.Body().set_steam_id_lobby(i),n.Body().set_steam_id_user_invited(hi.a.InitFromAccountID(e.accountid).ConvertTo64BitString()),this.m_CMInterface.Send(n)},e.prototype.InviteToWatch=function(e){wd.ShowFriendChatDialog(wd.GetDefaultBrowserContext(),e.accountid,!0),wd.BroadcastStore.InviteToWatch(e.accountid).then(function(e){})},e.prototype.InviteToTrade=function(e){var t=fi.Init(Us,7701);t.Body().set_other_steamid(e.persona.m_steamid.ConvertTo64BitString());var i=wd.ShowFriendChatDialog(wd.GetDefaultBrowserContext(),e.accountid,!0);i&&i.AddNewTradeRequestAndNotify(wd.FriendStore.self.accountid,wd.GetServerRTime32(),e.persona.m_steamid.ConvertTo64BitString(),0),this.m_CMInterface.Send(t)},e.prototype.CancelTradeRequest=function(e){var t=fi.Init(js,7706);t.Body().set_other_steamid(e),this.m_CMInterface.Send(t)},e.prototype.RespondToTradeRequest=function(e,t){var i=fi.Init(Vs,7703);i.Body().set_trade_request_id(e),i.Body().set_response(t?0:1),this.m_CMInterface.Send(i)},e.prototype.OpenTradeWindow=function(e){var t="Trade"+e,i=ai.a.COMMUNITY_BASE_URL+"trade/"+e,n=window.open(i,t,"height=1120,width=1028,resize=yes,scrollbars=yes");return!!n&&(n.focus(),!0)},e.prototype.FillInChatUsabilityMetrics=function(e){for(var t=0,i=0,n=0,r=0,o=this.all_friends;r<o.length;r++){var a=o[r];3==a.efriendrelationship&&(t++,a.persona.is_online&&i++,a.persona.is_ingame&&n++)}e.metrics().set_friends_count(t),e.metrics().set_friends_online_count(i),e.metrics().set_friends_in_game_count(n),this.m_FriendGroupStore.FillInChatUsabilityMetrics(e),this.m_FavoritesStore.FillInChatUsabilityMetrics(e)},si.c([_i.observable],e.prototype,"m_bReceivedFriendsList",void 0),si.c([_i.action],e.prototype,"OnParentalLockChanged",null),si.c([_i.action],e.prototype,"SetPersonasOffline",null),si.c([yn.a,Object(Dc.a)(100)],e.prototype,"PlayJoinGameSound",null),si.c([yn.a,Object(Dc.a)(100)],e.prototype,"PlayFriendOnlineSound",null),si.c([_i.action],e.prototype,"SetPlayerNickname",null),si.c([_i.action],e.prototype,"SetPlayerNotificationSettings",null),si.c([_i.action],e.prototype,"SetPlayerPerFriendPreferences",null),si.c([_i.action],e.prototype,"InviteToGame",null),si.c([_i.action],e.prototype,"InviteToLobby",null),si.c([_i.action],e.prototype,"InviteToWatch",null),si.c([_i.action],e.prototype,"InviteToTrade",null),si.c([_i.action],e.prototype,"CancelTradeRequest",null),si.c([_i.action],e.prototype,"RespondToTradeRequest",null),si.c([_i.action],e.prototype,"OpenTradeWindow",null),e}();!function(e){e[e.eOnlineOnly=0]="eOnlineOnly",e[e.eOnlineOnlyNotInGame=1]="eOnlineOnlyNotInGame",e[e.eOfflineOnly=2]="eOfflineOnly",e[e.eIncomingInvites=3]="eIncomingInvites",e[e.eAll=4]="eAll"}(Ic||(Ic={}));var Ac=function(){function e(e){this.m_eDisplayType=Ic.eAll,this.m_strName="",this.m_bCollapsed=!1,this.m_OnHeaderClick=void 0,this.m_rgAccountIDMembers=_i.observable.array(),this.m_setMembers=new Set,this.m_strName=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.m_strName},set:function(e){this.m_strName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon_url",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display_type",{get:function(){return this.m_eDisplayType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onheaderclick",{get:function(){return this.m_OnHeaderClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this.m_bCollapsed},set:function(e){this.m_bCollapsed=e},enumerable:!0,configurable:!0}),e.prototype.GetCurrentMemberSet=function(){return this.m_setMembers},Object.defineProperty(e.prototype,"member_count",{get:function(){return this.display_type==Ic.eAll?this.unfiltered_count:this.member_list.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.member_accountid_list.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,i=0,n=this.member_list_unsorted;i<n.length;i++){var r=n[i];r.persona.is_online&&(e++,r.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!0,configurable:!0}),e.prototype.SetOnHeaderClick=function(e){this.m_OnHeaderClick=e},e.prototype.Clear=function(){this.m_rgAccountIDMembers.clear(),this.m_setMembers.clear()},e.prototype.AddMember=function(e){this.HasMember(e)||(this.m_setMembers.add(e),this.m_rgAccountIDMembers.push(e))},e.prototype.RemoveMember=function(e){this.HasMember(e)&&(this.m_setMembers.delete(e),_n.c(this.m_rgAccountIDMembers,e))},e.prototype.HasMember=function(e){return this.m_setMembers.has(e)},Object.defineProperty(e.prototype,"GetRawMemberList",{get:function(){return this.m_rgAccountIDMembers.map(function(e){return wd.FriendStore.GetPlayer(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(Nc.DefaultFriendSortComparator),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){for(var e=[],t=0,i=this.GetRawMemberList;t<i.length;t++){var n=i[t];if((this.display_type!=Ic.eOnlineOnly||n.persona.is_online)&&(this.display_type!=Ic.eOfflineOnly||!n.persona.is_online)){if(this.display_type==Ic.eOnlineOnlyNotInGame){if(!n.persona.is_online||n.persona.is_ingame)continue;if(IsFeatureBroadcastEnabled()&&n.persona.m_broadcastAppId==An)continue}e.push(n)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_accountid_list",{get:function(){return this.m_rgAccountIDMembers},enumerable:!0,configurable:!0}),si.c([_i.observable],e.prototype,"m_strName",void 0),si.c([_i.observable],e.prototype,"m_bCollapsed",void 0),si.c([_i.computed],e.prototype,"member_count",null),si.c([_i.computed],e.prototype,"unfiltered_count",null),si.c([_i.computed],e.prototype,"member_counts",null),si.c([_i.action],e.prototype,"SetOnHeaderClick",null),si.c([_i.action],e.prototype,"Clear",null),si.c([_i.action],e.prototype,"AddMember",null),si.c([_i.action],e.prototype,"RemoveMember",null),si.c([_i.computed],e.prototype,"member_list",null),si.c([_i.computed],e.prototype,"member_list_unsorted",null),e}(),Pc=function(e){function t(t,i,n,r){void 0===i&&(i=-1),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.m_bModifiable=!1,o.m_bAcceptsGroupRemovals=!1,o.m_iGroupID=i,o.m_bModifiable=n,o.m_bAcceptsGroupRemovals=r,o}return si.d(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.m_iGroupID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return""+this.m_iGroupID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifiable",{get:function(){return this.m_bModifiable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accepts_group_removals",{get:function(){return this.m_bAcceptsGroupRemovals},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GetRawMemberList",{get:function(){return this.member_accountid_list.map(function(e){return wd.FriendStore.GetPlayer(e)})},enumerable:!0,configurable:!0}),t.prototype.GetMembersMatchingSearch=function(e){for(var t=[],i=0,n=this.GetRawMemberList;i<n.length;i++){var r=n[i];r.BMatchesSearchString(e,!1)&&t.push(r)}return t.sort(Nc.DefaultFriendSortComparator),t},si.c([_i.computed],t.prototype,"GetRawMemberList",null),t}(Ac),xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),Object.defineProperty(t.prototype,"display_type",{get:function(){return wd.SettingsStore.FriendsSettings.bHideOfflineFriendsInTagGroups?Ic.eOnlineOnly:Ic.eAll},enumerable:!0,configurable:!0}),t}(Pc),zc=function(e){function t(t,i){var n=e.call(this,t,i,!1,!0)||this;return n.m_eDisplayType=Ic.eOnlineOnlyNotInGame,n}return si.d(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"all"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"display_type",{get:function(){return wd.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame?Ic.eOnlineOnlyNotInGame:Ic.eOnlineOnly},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){return wd.SettingsStore.FriendsSettings.bHideCategorizedFriends},enumerable:!0,configurable:!0}),t}(Pc),Uc=function(e){function t(t,i){return e.call(this,t,i,!1,!0)||this}return si.d(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"offline"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"should_filter_categorized_friends",{get:function(){var e=wd.SettingsStore.FriendsSettings;return e.bHideCategorizedFriends&&!e.bHideOfflineFriendsInTagGroups},enumerable:!0,configurable:!0}),t}(Pc),Vc=function(e){function t(t,i){return e.call(this,t,i,!1,!0)||this}return si.d(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"outgoing"},enumerable:!0,configurable:!0}),t}(Pc),jc=function(e){function t(t,i){return e.call(this,t,i,!1,!0)||this}return si.d(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"ingame"},enumerable:!0,configurable:!0}),t}(Pc),Wc=function(e){function t(t,i){var n=e.call(this,t,i,!1,!0)||this;return n.m_mapSteamIDToMutualFriends=_i.observable.map(),n.m_unMutualFriendsCacheHash=0,n.m_eDisplayType=Ic.eIncomingInvites,n}return si.d(t,e),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"incominginvites"},enumerable:!0,configurable:!0}),t.prototype.GetMutualFriendsCacheHash=function(){return this.m_unMutualFriendsCacheHash},t.prototype.SetMutualFriendsCacheHash=function(e){this.m_unMutualFriendsCacheHash=e},t.prototype.SetMutualFriends=function(e){this.m_mapSteamIDToMutualFriends.replace(e)},Object.defineProperty(t.prototype,"map_steamid_to_mutual_friends",{get:function(){return this.m_mapSteamIDToMutualFriends},enumerable:!0,configurable:!0}),t}(Pc),Hc=function(e){function t(t){return e.call(this,"",t,!1,!1)||this}return si.d(t,e),Object.defineProperty(t.prototype,"is_initialized",{get:function(){return 0!=this.id&&wd.AppInfoStore.GetAppInfo(this.id).is_initialized},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"game_"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return!this.is_initialized||this.id<0?"":wd.AppInfoStore.GetAppInfo(this.id).name},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon_url",{get:function(){return!this.is_initialized||this.id<0?"":wd.AppInfoStore.GetAppInfo(this.id).icon_url},enumerable:!0,configurable:!0}),t.prototype.PlayerGroupSortComparator=function(e,t,i,n){var r=e.persona.player_group,o=t.persona.player_group;if(r&&!o)return-1;if(o&&!r)return 1;if(r&&o){var a=e.persona.player_group_size||i.get(r),s=t.persona.player_group_size||i.get(o);if(a!=s)return s-a;if(r!=o)return r.localeCompare(o)}return n(e,t)},Object.defineProperty(t.prototype,"member_list",{get:function(){for(var e=this,t=[],i=new Map,n=0,r=this.GetRawMemberList;n<r.length;n++){var o=r[n];if(t.push(o),o.persona.player_group){var a=i.get(o.persona.player_group);i.set(o.persona.player_group,a?a+1:1)}}var s=Nc.DefaultFriendSortComparator;return 0==this.id?t.sort(s):t.sort(function(t,n){return e.PlayerGroupSortComparator(t,n,i,s)}),t},enumerable:!0,configurable:!0}),si.c([_i.computed],t.prototype,"member_list",null),t}(Pc),qc={groups:{offline:!0,outgoing:!0}},Kc=function(){function e(){this.m_mapCollapsePrefs=_i.observable.map()}return e.prototype.Init=function(){var e=this;wd.SettingsStore.GetObjectFromLocalStorageWhenReady("FriendGroupCollapse",qc).then(function(t){e.m_mapCollapsePrefs.clear();for(var i in t.groups)e.m_mapCollapsePrefs.set(i,t.groups[i])})},e.prototype.GetUserGroupCollapsed=function(e){return!!this.m_mapCollapsePrefs.get(e)},e.prototype.SetUserGroupCollapsed=function(e,t){!!this.m_mapCollapsePrefs.get(e)!=t&&(t?this.m_mapCollapsePrefs.set(e,t):this.m_mapCollapsePrefs.delete(e),this.WritePrefs())},e.prototype.ToggleUserGroupCollapsed=function(e){this.SetUserGroupCollapsed(e,!this.GetUserGroupCollapsed(e))},e.prototype.WritePrefs=function(){wd.SettingsStore.StoreObjectInLocalStorage("FriendGroupCollapse",{groups:this.m_mapCollapsePrefs.toJSON()})},si.c([_i.action],e.prototype,"SetUserGroupCollapsed",null),si.c([_i.action],e.prototype,"ToggleUserGroupCollapsed",null),e}(),Jc=function(){function e(e){this.m_FriendGroupDisplayPrefs=new Kc,this.m_mapGroups=_i.observable.map(),this.m_mapGameGroups=_i.observable.map(),this.m_singletonGameGroup=new Hc(0),this.m_groupAllFriends=new zc(Object(ua.b)("#FriendGroup_Online"),-1),this.m_groupOfflineFriends=new Uc(Object(ua.b)("#FriendGroup_Offline"),-3),this.m_groupIngameFriends=new jc(Object(ua.b)("#FriendGroup_InGame"),-4),this.m_groupIncomingInvites=new Wc(Object(ua.b)("#FriendGroup_IncomingInvites"),-5),this.m_groupOutgoingInvites=new Vc(Object(ua.b)("#FriendGroup_Outgoing"),-6),this.m_FriendStore=e,this.m_groupOfflineFriends.m_eDisplayType=Ic.eOfflineOnly}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_FriendGroupDisplayPrefs.Init(),this.m_CMInterface.AddOnLogonCallback(function(){return si.b(t,void 0,void 0,function(){var e,t;return si.e(this,function(i){switch(i.label){case 0:return e=fi.Init(hc),[4,pc.GetCategories(this.m_CMInterface.GetServiceTransport(),e)];case 1:return t=i.sent(),1==t.GetEResult()&&this.RecvCategoriesList(t.Body()),[2]}})})},47)},Object.defineProperty(e.prototype,"all_friends",{get:function(){return this.m_groupAllFriends},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ingame_group",{get:function(){return this.m_groupIngameFriends},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incoming_invites_group",{get:function(){return this.m_groupIncomingInvites},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoing_invites_group",{get:function(){return this.m_groupOutgoingInvites},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friend_groups",{get:function(){return this.game_groups.concat(this.user_groups,this.default_groups)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupDisplayPrefs",{get:function(){return this.m_FriendGroupDisplayPrefs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user_groups",{get:function(){var e=[];return this.m_mapGroups.forEach(function(t){e.push(t)}),e.sort(function(e,t){return e.name.localeCompare(t.name)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"game_groups",{get:function(){var e=[],t=2;return 1==this.m_singletonGameGroup.unfiltered_count&&(t=1),this.m_mapGameGroups.forEach(function(i){i.name&&i.member_count>=t&&e.push(i)}),e.sort(function(e,t){return e.member_count==t.member_count?e.name.localeCompare(t.name):t.member_count-e.member_count}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleton_game_group",{get:function(){if(1==this.m_singletonGameGroup.unfiltered_count){var e=this.m_singletonGameGroup.member_accountid_list[0];if(!wd.FriendStore.GetPlayer(e).persona.is_in_nonsteam_game)return}return this.m_singletonGameGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"non_steam_game_id",{get:function(){return-6},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"default_groups",{get:function(){return[this.m_groupAllFriends,this.m_groupOfflineFriends]},enumerable:!0,configurable:!0}),e.prototype.OnFullFriendsListUpdateStart=function(){this.m_groupOfflineFriends.Clear(),this.m_groupAllFriends.Clear(),this.m_groupIncomingInvites.Clear(),this.m_groupOutgoingInvites.Clear()},e.prototype.OnFullFriendsListUpdateComplete=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear();for(var e=0,t=this.m_FriendStore.all_friends;e<t.length;e++){var i=t[e];if(i.persona.is_ingame){var n=i.persona.is_in_nonsteam_game?this.non_steam_game_id:i.persona.m_unGamePlayedAppID;this.OnFriendGameChanged(i.accountid,0,n)}}},e.prototype.OnPersonaStateCacheReset=function(){this.m_mapGameGroups.clear(),this.m_singletonGameGroup.Clear(),this.m_groupIngameFriends.Clear()},e.prototype.OnFriendAdded=function(e){this.m_groupAllFriends.AddMember(e),this.m_groupOfflineFriends.AddMember(e)},e.prototype.OnFriendRemoved=function(e){this.m_groupAllFriends.RemoveMember(e),this.m_groupOfflineFriends.RemoveMember(e),this.m_groupIngameFriends.RemoveMember(e),this.m_singletonGameGroup.RemoveMember(e),this.m_mapGroups.forEach(function(t){t.RemoveMember(e)}),this.m_mapGameGroups.forEach(function(t){t.RemoveMember(e)})},e.prototype.OnFriendGameChanged=function(e,t,i){var n=t==this.non_steam_game_id?this.m_singletonGameGroup:0!=t?this.m_mapGameGroups.get(t):null,r=i==this.non_steam_game_id?this.m_singletonGameGroup:0!=i?this.m_mapGameGroups.get(i):null;if(!(n&&r&&t==i||r&&r.HasMember(e))){if(n&&n.HasMember(e)&&(n.RemoveMember(e),n!=this.m_singletonGameGroup&&(0==n.unfiltered_count?this.m_singletonGameGroup.RemoveMember(e):1==n.unfiltered_count&&this.m_singletonGameGroup.AddMember(n.member_accountid_list[0]))),r)r!=this.m_singletonGameGroup&&(1==r.unfiltered_count?this.m_singletonGameGroup.RemoveMember(r.member_accountid_list[0]):0==r.unfiltered_count&&this.m_singletonGameGroup.AddMember(e)),r.AddMember(e);else if(0!=i){var o=new Hc(i);o.AddMember(e),this.m_singletonGameGroup.AddMember(e),this.m_mapGameGroups.set(i,o)}0!=i?this.m_groupIngameFriends.AddMember(e):this.m_groupIngameFriends.RemoveMember(e)}},e.prototype.OnIncomingInviteAdded=function(e){this.m_groupIncomingInvites.AddMember(e)},e.prototype.OnIncomingInviteRemoved=function(e){this.m_groupIncomingInvites.RemoveMember(e)},e.prototype.OnOutgoingInviteAdded=function(e){this.m_groupOutgoingInvites.AddMember(e)},e.prototype.OnOutgoingInviteRemoved=function(e){this.m_groupOutgoingInvites.RemoveMember(e)},e.prototype.EnsureMutualFriendsForIncomingInvites=function(){for(var e=this,t=0,i=0,n=this.m_groupIncomingInvites.member_list;i<n.length;i++){var r=n[i];t^=function(e){for(var t=2166136261,i=0;i<e.length;++i)t^=e.charCodeAt(i),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(""+r.accountid)}if(this.m_groupIncomingInvites.GetMutualFriendsCacheHash()!=t){this.m_groupIncomingInvites.SetMutualFriendsCacheHash(t);var o=fi.Init(cs);Xa.GetMutualFriendsForIncomingInvites(this.m_CMInterface.GetServiceTransport(),o).then(function(i){if(1==i.GetEResult()&&e.m_groupIncomingInvites.GetMutualFriendsCacheHash()==t){for(var n=_i.observable.map(),r=0,o=i.Body().incoming_invite_mutual_friends_lists();r<o.length;r++){for(var a=o[r],s=new Set,c=0,l=a.mutual_friend_account_ids();c<l.length;c++){var u=l[c];s.add(u)}n.set(a.steamid(),s)}e.m_groupIncomingInvites.SetMutualFriends(n)}})}},e.prototype.CreateGroup=function(e,t){var i=this,n=fi.Init(Ri,5560);return n.Body().set_groupname(e),t&&n.Body().set_steamid_friends(t),new Promise(function(r,o){i.m_CMInterface.SendMsgAndAwaitResponse(n,Ei).then(function(n){1==n.Body().eresult()&&Object(_i.runInAction)(function(){var r=n.Body().groupid(),o=new xc(e,n.Body().groupid(),!0);if(t)for(var a=0,s=t;a<s.length;a++){var c=s[a];o.AddMember(new hi.a(c).GetAccountID())}i.m_mapGroups.set(r,o)}),r(1==n.Body().eresult())}).catch(function(){r(!1)})})},e.prototype.ManageGroup=function(e,t,i,n){var r=this;if(t==e.name&&!i&&!n)return Promise.resolve(!0);var o=fi.Init(Di,5564);return o.Body().set_groupid(e.id),t&&t!=e.name&&o.Body().set_groupname(t),i&&o.Body().set_steamid_friends_added(i),n&&o.Body().set_steamid_friends_removed(n),new Promise(function(a,s){r.m_CMInterface.SendMsgAndAwaitResponse(o,Gi).then(function(r){if(1==r.Body().eresult()){e.name=t;for(var o=0,s=i;o<s.length;o++){var c=s[o];e.AddMember(new hi.a(c).GetAccountID())}for(var l=0,u=n;l<u.length;l++){var c=u[l];e.RemoveMember(new hi.a(c).GetAccountID())}}a(1==r.Body().eresult())}).catch(function(){a(!1)})})},e.prototype.RemoveGroup=function(e){var t=this,i=fi.Init(Ti,5562);i.Body().set_groupid(e.id),this.m_CMInterface.SendMsgAndAwaitResponse(i,ki).then(function(i){1==i.Body().eresult()&&t.HandleGroupRemoval(e)})},e.prototype.HandleGroupRemoval=function(e){this.m_mapGroups.delete(e.id)},Object.defineProperty(e.prototype,"categorized_friend_set",{get:function(){var e=new Set;return this.m_mapGroups.forEach(function(t){t.member_accountid_list.forEach(e.add.bind(e))}),e},enumerable:!0,configurable:!0}),e.prototype.RecvCategoriesList=function(e){this.m_mapGroups.clear();for(var t=0,i=e.categories();t<i.length;t++){var n=i[t],r=n.groupid(),o=new xc(n.name()||"",n.groupid(),!0);o.m_eDisplayType=Ic.eAll,this.m_mapGroups.set(r,o);for(var a=0,s=n.accountid_members();a<s.length;a++){var c=s[a];o.AddMember(c)}}},e.prototype.TransferFriendFromToGroup=function(e,t,i){var n=this,r=i&&i.modifiable,o=t&&t.modifiable,a=[];if(r){var s=fi.Init(Ni,5566);s.Body().set_groupid(i.id),s.Body().set_steamiduser(e.persona.m_steamid.ConvertTo64BitString()),a.push(this.m_CMInterface.SendMsgAndAwaitResponse(s,Li).then(function(t){return 1==t.Body().eresult()&&(i.AddMember(e.accountid),!0)}))}if(o){var s=fi.Init(Ai,5568);s.Body().set_groupid(t.id),s.Body().set_steamiduser(e.persona.m_steamid.ConvertTo64BitString()),a.push(this.m_CMInterface.SendMsgAndAwaitResponse(s,Pi).then(function(i){return 1==i.Body().eresult()&&(t.RemoveMember(e.accountid),0==t.unfiltered_count&&n.HandleGroupRemoval(t),!0)}))}return Promise.all(a)},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this;e.metrics().set_friends_category_count(this.m_mapGroups.size),e.metrics().set_friends_categorized_count(this.categorized_friend_set.size),this.singleton_game_group&&e.metrics().set_friends_in_game_singleton_count(this.singleton_game_group.unfiltered_count),e.metrics().set_game_group_count(this.game_groups.length);var i=function(e){return t.m_FriendGroupDisplayPrefs.GetUserGroupCollapsed(e.unique_id)},n=e.ui_state().category_collapse();n.set_in_game_collapsed(i(this.m_singletonGameGroup)),n.set_online_collapsed(i(this.m_groupAllFriends)),n.set_offline_collapsed(i(this.m_groupOfflineFriends)),n.set_categories_collapsed(_n.b(Array.from(this.m_mapGroups.values()),i)),n.set_game_groups_collapsed(_n.b(Array.from(this.m_mapGameGroups.values()),i))},si.c([_i.computed],e.prototype,"friend_groups",null),si.c([_i.computed],e.prototype,"user_groups",null),si.c([_i.computed],e.prototype,"game_groups",null),si.c([_i.computed],e.prototype,"singleton_game_group",null),si.c([_i.computed],e.prototype,"default_groups",null),si.c([_i.action],e.prototype,"OnFullFriendsListUpdateComplete",null),si.c([_i.action],e.prototype,"OnPersonaStateCacheReset",null),si.c([_i.action],e.prototype,"HandleGroupRemoval",null),si.c([_i.computed],e.prototype,"categorized_friend_set",null),si.c([_i.action],e.prototype,"RecvCategoriesList",null),si.c([_i.action],e.prototype,"TransferFriendFromToGroup",null),e}(),Yc=!1,Xc=function(e){function t(t,i,n,r){var o=e.call(this,t.FriendStore,t,t.CMInterface)||this;return o.LOG=Da.create(function(){return o.unique_id},Yc),o.m_lastChatLink=null,o.m_groupVoiceActiveMembers=new Ac(Object(ua.b)("#Chat_MemberGroup_VoiceChatting")),o.m_eDesktopNotificationLevel=0,o.m_eMobileNotificationLevel=0,o.m_bUnreadIndicatorMuted=!1,o.m_group=i,o.m_ulGroupID=i.GetGroupID(),o.m_ulChatID=n,o.m_bIsDefaultForGroup=r,o.m_groupVoiceActiveMembers.SetOnHeaderClick(o.StartVoiceChat),o}return si.d(t,e),Object.defineProperty(t.prototype,"VoiceChatStore",{get:function(){return this.ChatStore.VoiceChat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unread_message_count",{get:function(){switch(this.GetDesktopNotificationLevel()){case 4:return this.m_cUnreadChatMessages;case 3:case 2:return this.has_unread_mention?1:0;case 1:case 0:default:return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time_last_activity",{get:function(){var e=this.GetDesktopNotificationLevel(),t=0;switch(this.time_last_ack&&(t=Math.max(this.time_last_ack,t)),e){case 4:t=Math.max(this.time_last_message||0,t);break;case 3:case 2:t=Math.max(this.time_last_mention||0,t);break;case 1:case 0:break;default:AssertMsg(!1,"unhandled EChatRoomNotificationLevel: "+e)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"has_unread_messages",{get:function(){return this.BIsUnreadIndicatorMuted()?this.unread_message_count>0:this.has_any_unread_messages},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"has_any_unread_messages",{get:function(){return this.m_cUnreadChatMessages>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"has_unread_mention",{get:function(){return this.m_rtLastMention>this.m_rtLastAckedChatMsg},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time_last_mention",{get:function(){return this.m_rtLastMention},enumerable:!0,configurable:!0}),t.prototype.BHasAckedChatMsg=function(){return this.m_rtLastAckedChatMsg&&0!=this.m_rtLastAckedChatMsg},t.prototype.LoadChatLogs=function(){e.prototype.LoadChatLogs.call(this)},t.prototype.GetMessagesFromTimeRange=function(e,t,i,n,r){var o=this,a=fi.Init(go);return a.Body().set_chat_group_id(this.m_ulGroupID),a.Body().set_chat_id(this.m_ulChatID),a.Body().set_max_count(r),a.Body().set_start_time(e),a.Body().set_start_ordinal(t),a.Body().set_last_time(i),a.Body().set_last_ordinal(n),this.LOG("trying to load "+r+" messages in range "+e+":"+t+" - "+i+":"+n),ra.GetMessageHistory(this.m_ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){var t=e.GetEResult();if(1!=t)throw t;return{messages:o.GetMessagesFromResponse(e),moreAvailable:e.Body().more_available()}})},t.prototype.GetMessagesFromResponse=function(e){var t=e.Body().messages(),i=[];if(Yc){var n=t[0],r=t[t.length-1];this.LOG("received "+t.length+" messages in range "+r.server_timestamp()+":"+r.ordinal()+" to "+n.server_timestamp()+":"+n.ordinal())}for(var o=t.length-1;o>=0;o--){var a=t[o],s=a.server_message().message()||0,c=void 0,l=void 0;if(0!=s){if(s=a.server_message().message(),c=a.server_message().string_param(),l=a.server_message().accountid_param(),!b(s)){this.LOG("unrenderable message "+s);continue}}else if(!a.message()||0==a.message().trim().length)continue;var u=new Za(a.sender(),a.server_timestamp(),a.ordinal()||0,a.message(),s,c,l);a.deleted()&&(u.eDeleteState=Wa.Deleted),i.push(u)}return i},t.prototype.GetBBCodeParser=function(){return this.m_ChatStore.ChatRoomBBCodeParser},t.prototype.AckChatMsgOnServer=function(e){var t=fi.Init(bo);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_chat_id(this.m_ulChatID),t.Body().set_timestamp(e),ra.AckChatMessage(this.m_CMInterface.GetServiceTransport(),t)},t.prototype.GetDesktopNotificationLevel=function(){return 0==this.m_eDesktopNotificationLevel?this.m_group.GetDesktopNotificationLevel():this.m_eDesktopNotificationLevel},t.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eMobileNotificationLevel?this.GetDesktopNotificationLevel():this.m_eMobileNotificationLevel},t.prototype.BIsUnreadIndicatorMuted=function(){return this.m_group.BIsUnreadIndicatorMuted()},t.prototype.GetDesktopNotificationLevelSetting=function(){return this.m_eDesktopNotificationLevel},t.prototype.GetMobileNotificationLevelsetting=function(){return this.m_eMobileNotificationLevel},t.prototype.UpdateUserState=function(e){this.m_rtLastAckedChatMsg=e.time_last_ack(),this.m_rtLastMention=e.time_last_mention(),this.m_eDesktopNotificationLevel=e.desktop_notification_level(),this.m_eMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted(),(this.m_rtLastAckedChatMsg||0)<this.m_rtLastMessageReceived&&(this.m_cUnreadChatMessages=1,this.m_rtLastAckedChatMsg&&(this.m_rtFirstUnreadChatMsg=this.m_rtLastAckedChatMsg+1))},t.prototype.UpdateChatState=function(e){var t=this;AssertMsg(this.m_ulChatID==e.chat_id(),"State for different chat room"),this.m_strName=e.chat_name(),this.m_bVoiceAllowed=e.voice_allowed();for(var i=!1,n=!1,r=this.m_FriendStore.self.accountid,o=new Set(this.m_groupVoiceActiveMembers.GetCurrentMemberSet()),a=0,s=e.members_in_voice();a<s.length;a++){var c=s[a];o.delete(c)||(this.m_groupVoiceActiveMembers.AddMember(c),c!=r&&(i=!0))}o.forEach(function(e){t.m_groupVoiceActiveMembers.RemoveMember(e);var i=t.m_groupVoiceActiveMembers.HasMember(e);t.VoiceChatStore.OnUserLeftChatRoomVoiceChat(t.m_ulGroupID,t.m_ulChatID,e,i),e!=r&&(n=!0)}),this.BVoiceActive()&&(i?wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_enter.m4a?v=1"):n&&wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1")),this.m_rtLastMessageReceived=e.time_last_message()},Object.defineProperty(t.prototype,"voice_active_member_list",{get:function(){return this.m_groupVoiceActiveMembers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"voice_active_contains_friends",{get:function(){for(var e=0;e<this.m_groupVoiceActiveMembers.member_list.length;e++)if(this.m_groupVoiceActiveMembers.member_list[e].is_friend||this.m_groupVoiceActiveMembers.member_list[e]==wd.FriendStore.self)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"voice_active_contains_self",{get:function(){for(var e=0;e<this.m_groupVoiceActiveMembers.member_list.length;e++)if(this.m_groupVoiceActiveMembers.member_list[e]==wd.FriendStore.self)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"voice_active_contains_only_self",{get:function(){return 1==this.m_groupVoiceActiveMembers.member_list.length&&this.m_groupVoiceActiveMembers.member_list[0]==wd.FriendStore.self},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.IsDefaultRoomForGroup()?"Home":this.IsUnsavedVoiceChannel()?Object(ua.b)("#Chat_CreateChatChannel_DefaultName"):this.m_strName},enumerable:!0,configurable:!0}),t.prototype.IsUnsavedVoiceChannel=function(){return!(0!=this.m_strName.length||!this.m_bVoiceAllowed)},t.prototype.GetParentGroupID=function(){return this.m_ulGroupID},t.prototype.GetGroup=function(){return this.m_group},t.prototype.IsDefaultRoomForGroup=function(){return this.m_bIsDefaultForGroup},t.prototype.GetRoomID=function(){return this.m_ulChatID},t.prototype.BIsDefaultRoom=function(){return this.m_bIsDefaultForGroup},Object.defineProperty(t.prototype,"unique_id",{get:function(){return"cr"+this.m_ulChatID},enumerable:!0,configurable:!0}),t.prototype.GetVoiceAllowed=function(){return this.m_bVoiceAllowed},t.prototype.IsTempVoiceRoom=function(){return!(!this.GetVoiceAllowed()||this.m_strName&&0!=this.m_strName.length)},t.prototype.InsertBBCodeMarkup=function(e){e=Ta.EscapeBBCode(e),e.replace(/＠/g,"@");for(var t=e.indexOf("@");-1!==t;){for(var i=e.indexOf("@",t+1),n=e.indexOf(" ",t+1),r=Math.min(-1===i?e.length:i,-1===n?e.length:n),o=e.substr(t+1,r-t-1).toLocaleLowerCase(),a=void 0,s=void 0,c=0,l=this.GetChatRoomGroup().memberList.member_list_unsorted;c<l.length;c++){var u=l[c],d=Ta.EscapeBBCode(u.player_name_normalized),p=d+"#"+u.accountid.toString(36);if(p.startsWith(o)){var m=void 0,h=p.length===o.length,g=h||d.length===o.length;(g||h)&&(m=o.length),!h&&e.length-t-1>=p.length&&e.substr(t+1,d.length).toLocaleLowerCase()===p&&(g=h=!0,m=p.length),!g&&e.length-t-1>=d.length&&e.substr(t+1,d.length).toLocaleLowerCase()===d&&(m=d.length),m&&(void 0===s||m>=s)&&(a=u,s=m)}}var f=!1;this.GetChatRoomGroup().BCanIMentionAll()&&(f="online"==o||"online#0"==o||"all"==o||"all#0"==o);var _=void 0,y=void 0,v=void 0;if(f&&(void 0===s||s<=o.length)){var b=o;-1!==o.indexOf("#")&&(b=o.substr(0,o.indexOf("#"))),_=b,y=b,v=o.length,"online"==_&&(_="here")}else a&&void 0!==s&&(_=""+a.accountid,y=a.persona.m_strPlayerName,v=s);if(y&&void 0!==v){var C=e.substr(0,t),S=e.substr(t+1+v),M="[mention="+_+"]@"+Ta.EscapeBBCode(y)+"[/mention]";e=C+M+S,i=e.indexOf("@",C.length+M.length)}t=i}return e},t.prototype.StartVoiceChat=function(){this.BVoiceActive()||this.ChatStore.VoiceChat.InitiateRoomChat(this.m_ulGroupID,this.m_ulChatID)},t.prototype.ToggleVoiceChat=function(){this.BVoiceActive()?this.ChatStore.VoiceChat.OnUserEndVoiceChat():this.StartVoiceChat()},t.prototype.BVoiceActive=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForRoom(this.m_ulGroupID,this.m_ulChatID)},t.prototype.SendChatMessage=function(e){var t=this;if(!this.GetChatRoomGroup().BCanChat())return this.AppendLocalEchoChatMsg("").eErrorSending=Ya.NoChatPermissionInGroup,!0;var i=this.InsertBBCodeMarkup(e),n=fi.Init(lo);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_chat_id(this.m_ulChatID),n.Body().set_message(i);var r=this.AppendLocalEchoChatMsg(i);return ra.SendChatMessage(this.m_ChatStore.CMInterface.GetServiceTransport(),n).then(function(e){Object(_i.runInAction)(function(){if(1==e.GetEResult()){r.rtTimestamp=e.Body().server_timestamp(),r.unOrdinal=e.Body().ordinal(),t.OnUserChatEcho(r.rtTimestamp,r.unOrdinal);var i=e.Body().modified_message();i&&(t.m_ChatStore.EmoticonStore.TrackEmoticonUsage(i,r.rtTimestamp),r.strMessage=i),r.OnServerAcknowledged()}else switch(e.GetEResult()){case 84:r.eErrorSending=Ya.RateLimitExceeded;break;default:r.eErrorSending=Ya.Generic}})}).catch(function(){r.eErrorSending=Ya.Generic}),!0},t.prototype.DeleteChatMessges=function(e){return si.b(this,void 0,void 0,function(){var t,i,n,r,o,a,s,c;return si.e(this,function(l){switch(l.label){case 0:for(t=e.map(function(e){return{rtTimestamp:e.rtTimestamp,unOrdinal:e.unOrdinal}}),this.UpdateChatMessageDeletedState(t,Wa.Deleting),i=fi.Init(Wo),i.Body().set_chat_group_id(this.m_ulGroupID),i.Body().set_chat_id(this.m_ulChatID),n=0,r=e;n<r.length;n++)o=r[n],a=i.Body().add_messages(),a.set_server_timestamp(o.rtTimestamp),a.set_ordinal(o.unOrdinal);return[4,ra.DeleteChatMessages(this.m_ChatStore.CMInterface.GetServiceTransport(),i)];case 1:return s=l.sent(),1!=(c=s.GetEResult())?(this.UpdateChatMessageDeletedState(t,Wa.None),[2,c]):(this.UpdateChatMessageDeletedState(t,Wa.Deleted),[2,1])}})})},t.prototype.PopulateCommitFileUploadFormData=function(e){e.set("chat_group_id",this.m_ulGroupID),e.set("chat_id",this.m_ulChatID)},t.prototype.BShouldTrackUnreadMessages=function(){return this.m_bIsDefaultForGroup||!this.m_bVoiceAllowed||this.BVoiceActive()},t.prototype.BShouldSilentlyAddMessage=function(e){return wd.FriendStore.GetPlayer(e.unAccountID).is_blocked},t.prototype.PlayChatRoomNotificationSound=function(){wd.FriendStore.GetUserDoNotDisturb()||wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_chatroom_notification.m4a?v=1")},t.prototype.PlayAtMentionSound=function(){wd.FriendStore.GetUserDoNotDisturb()||wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_at_mention.m4a?v=1")},t.prototype.OnReceivedNewMessage=function(e,t,i,n){var r=this;if(this.BShouldTrackUnreadMessages()&&!e.BIsLocalEcho()&&e.unAccountID!=this.self.accountid){(e.Mentions.mention_all||e.Mentions.mention_here||e.Mentions.mention_user)&&(this.m_rtLastMention=e.rtTimestamp);var o=void 0;switch(this.GetDesktopNotificationLevel()){case 1:o=!1;break;case 2:o=e.Mentions.mention_user;break;case 3:o=e.Mentions.mention_user||e.Mentions.mention_here||e.Mentions.mention_all;break;case 4:default:o=!0}if(o&&!wd.FriendStore.GetUserDoNotDisturb()){if(wd.SettingsStore.FriendsSettings.bSounds_PlayChatRoomNotification&&(e.Mentions.mention_all||e.Mentions.mention_here||e.Mentions.mention_user)?this.PlayAtMentionSound():wd.SettingsStore.FriendsSettings.bSounds_PlayChatRoomNotification&&t<4&&this.PlayChatRoomNotificationSound(),wd.NotificationManager.BNotificationsPermitted()&&t<4&&wd.SettingsStore.FriendsSettings.bNotifications_ShowChatRoomNotification){var a=wd.FriendStore.GetPlayer(e.unAccountID);a.LoadIfNecessary();var s=function(){var t={title:r.m_bIsDefaultForGroup?r.GetGroup().name:r.name,body:a.display_name+': "'+i+'"',icon:a.persona.avatar_url_medium,rawbody:i,tag:"groupmsg_"+a.accountid,steamid:a.persona.m_steamid.ConvertTo64BitString()};t=r.DecorateNotification(e,t,i,n),t.body&&wd.NotificationManager.DisplayNotification(t,function(e){return wd.UIStore.ShowAndOrActivateChat(e,r,!0)})};Object(_i.when)(function(){return a.is_ready},s,{timeout:1e3})}0==wd.SettingsStore.FriendsSettings.nChatFlashMode&&t<4&&wd.UIStore.FlashChatWindow(this)}}},t.prototype.GetChatRoomGroup=function(){return this.m_ChatStore.GetChatRoomGroup(this.m_ulGroupID)},t.prototype.GetMember=function(e){return this.GetChatRoomGroup().GetMember(e)},t.prototype.SearchMembers=function(e,t,i){void 0===t&&(t=5),void 0===i&&(i=!1);var n=[],r=e.toLocaleLowerCase(),o=this.GetChatRoomGroup().BCanIMentionAll()?"":Object(ua.b)("#ChatMentionSuggest_NoPermission");"online".startsWith(r)&&n.push({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"online",strNotSelectable:o}),"all".startsWith(r)&&n.push({friend:null,iMatchOffset:0,bNicknameMatch:!1,meta_mention:"all",strNotSelectable:o});for(var a=[],s=[],c=0,l=this.GetChatRoomGroup().memberList.member_list;c<l.length;c++){var u=l[c];if(u!=this.self){if(r.length){var d=u.MatchSearchString(r),p=0===d.iOffset;if(0==d.match||i&&!p)continue;var m={friend:u,iMatchOffset:d.iOffset,bNicknameMatch:2==d.match};p?d.bFullMatch?a.unshift(m):a.push(m):s.push(m)}else n.push({friend:u,iMatchOffset:0,bNicknameMatch:!1});if(n.length+a.length>=t)break}}for(var h=0;h<a.length&&n.length<t;h++)n.push(a[h]);for(var h=0;h<s.length&&n.length<t;h++)n.push(s[h]);return n},t.prototype.BNameMatchesSearch=function(e){return-1!=this.name.toLocaleLowerCase().indexOf(e)},t.prototype.CreateInviteLink=function(e){var t=this,i=fi.Init(Co);i.Body().set_chat_group_id(this.m_ulGroupID),i.Body().set_seconds_valid(e),i.Body().set_chat_id(this.m_ulChatID),ra.CreateInviteLink(this.m_ChatStore.CMInterface.GetServiceTransport(),i).then(function(e){var i=e.Body().invite_code(),n=Object(ha.a)(i),r=e.Body().seconds_valid();0!=r&&(r+=Math.floor(Date.now()/1e3)),t.m_lastChatLink={strInviteURL:n,rtExpires:r}})},t.prototype.OnActivate=function(){e.prototype.OnActivate.call(this),this.m_ChatStore.OnChatRoomActivated(this)},Object.defineProperty(t.prototype,"lastChatLinkInfo",{get:function(){return this.m_lastChatLink},enumerable:!0,configurable:!0}),t.prototype.BCanDeleteMemberMessages=function(e){return this.GetChatRoomGroup().BCanDeleteMemberMessages(e)},t.prototype.ChangeNameWhileWaitingForRenameRequest=function(e){this.m_strName=e},t.prototype.SetNotificationPreferences=function(e,t,i){var n=fi.Init(zo);n.Body().set_chat_group_id(this.m_ulGroupID);var r=n.Body().add_chat_room_preferences();return r.set_chat_id(this.m_ulChatID),void 0!==e&&(this.m_eDesktopNotificationLevel=e,r.set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(i=!1)),void 0!==t&&(this.m_eMobileNotificationLevel=t,r.set_mobile_notification_level(t)),void 0!==i&&(this.m_bUnreadIndicatorMuted=i,r.set_unread_indicator_muted(i)),ra.SetUserChatGroupPreferences(wd.CMInterface.GetServiceTransport(),n).then(function(e){return 1==e.GetEResult()})},si.c([_i.observable],t.prototype,"m_strName",void 0),si.c([_i.observable],t.prototype,"m_lastChatLink",void 0),si.c([_i.observable],t.prototype,"m_rtLastMention",void 0),si.c([_i.observable],t.prototype,"m_eDesktopNotificationLevel",void 0),si.c([_i.observable],t.prototype,"m_eMobileNotificationLevel",void 0),si.c([_i.observable],t.prototype,"m_bUnreadIndicatorMuted",void 0),si.c([_i.action],t.prototype,"UpdateUserState",null),si.c([_i.action],t.prototype,"UpdateChatState",null),si.c([_i.computed],t.prototype,"name",null),si.c([yn.a],t.prototype,"StartVoiceChat",null),si.c([_i.action],t.prototype,"SendChatMessage",null),si.c([yn.a,Object(Dc.a)(100)],t.prototype,"PlayChatRoomNotificationSound",null),si.c([yn.a,Object(Dc.a)(100)],t.prototype,"PlayAtMentionSound",null),si.c([_i.action],t.prototype,"CreateInviteLink",null),si.c([_i.action],t.prototype,"OnActivate",null),si.c([_i.action],t.prototype,"ChangeNameWhileWaitingForRenameRequest",null),t}(os),Zc=!1,Qc=function(){function e(e,t){void 0===e&&(e=20),this.m_rank=e,this.m_role_ids=t}return e.prototype.BHasRole=function(e){return-1!=this.m_role_ids.findIndex(function(t){return t==e})},si.c([_i.observable],e.prototype,"m_rank",void 0),si.c([_i.observable],e.prototype,"m_role_ids",void 0),e}(),$c=function(){function e(e){this.m_roleActions=new gr,this.m_roleActions=e}return e.prototype.BCanPerformAction=function(e){switch(e){case 1:return this.m_roleActions.can_create_rename_delete_channel();case 2:return this.m_roleActions.can_kick();case 3:return this.m_roleActions.can_ban();case 4:return this.m_roleActions.can_invite();case 5:return this.m_roleActions.can_change_tagline_avatar_name();case 6:return this.m_roleActions.can_chat();case 8:return this.m_roleActions.can_change_group_roles();case 9:return this.m_roleActions.can_change_user_roles();case 10:return this.m_roleActions.can_mention_all();case 11:return this.m_roleActions.can_set_watching_broadcast();default:return!1}},e.prototype.SetCanPerformAction=function(e,t){switch(e){case 1:this.m_roleActions.set_can_create_rename_delete_channel(t);break;case 2:this.m_roleActions.set_can_kick(t);break;case 3:this.m_roleActions.set_can_ban(t);break;case 4:this.m_roleActions.set_can_invite(t);break;case 5:this.m_roleActions.set_can_change_tagline_avatar_name(t);break;case 6:this.m_roleActions.set_can_chat(t);break;case 8:this.m_roleActions.set_can_change_group_roles(t);break;case 9:this.m_roleActions.set_can_change_user_roles(t);break;case 10:this.m_roleActions.set_can_mention_all(t);break;case 11:this.m_roleActions.set_can_set_watching_broadcast(t)}},e.prototype.toString=function(){var e=this.role_id;return this.m_roleActions.can_create_rename_delete_channel()&&(e+=" CreateRenameDeleteChannel"),this.m_roleActions.can_kick()&&(e+=" Kick"),this.m_roleActions.can_ban()&&(e+=" Ban"),this.m_roleActions.can_invite()&&(e+=" Invite"),this.m_roleActions.can_change_tagline_avatar_name()&&(e+=" ChangeTaglineAvatarName"),this.m_roleActions.can_chat()&&(e+=" Chat"),this.m_roleActions.can_change_group_roles()&&(e+=" ChangeGroupRoles"),this.m_roleActions.can_change_user_roles()&&(e+=" ChangeUserRoles"),e},Object.defineProperty(e.prototype,"role_id",{get:function(){return this.m_roleActions.role_id()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roleActions",{get:function(){return this.m_roleActions},enumerable:!0,configurable:!0}),e}(),el=function(){function e(e,t){var i=this;this.LOG=Da.create(function(){return i.unique_id},Zc),this.m_chatStore=null,this.m_ulGroupID="",this.m_ulDefaultChatID="",this.m_rtTimeJoined=0,this.m_rtLastAck=0,this.m_bFullStateLoaded=!1,this.m_strName="",this.m_strTagLine="",this.m_strAvatarSHA="",this.m_mapRooms=_i.observable.map(null,{deep:!1}),this.m_eUserDesktopNotificationLevel=4,this.m_eUserMobileNotificationLevel=4,this.m_bUnreadIndicatorMuted=!1,this.m_roles=[],this.m_roleActions=[],this.m_groupMembers=new ol,this.m_cMemberSummaryCount=0,this.m_chatStore=e,this.m_ulGroupID=t}return e.prototype.BIsValid=function(){return this.m_mapRooms.size>0},e.prototype.IsNamedGroupChat=function(){return!!this.m_strName},e.prototype.GetOwnerAccountID=function(){return this.m_unOwnerAccountID},e.prototype.BIsAccountIDOwner=function(e){return this.BIsClanChatRoom()?50==this.GetMemberRankIfPresent(e):this.GetOwnerAccountID()==e},Object.defineProperty(e.prototype,"name",{get:function(){if(this.m_strName)return this.m_strName;var e=this.members_to_highlight_name,t=e.members;if(!t.length)return e.remaining_count?Object(ua.b)("#ChatRoom_GenericWithOthers",e.remaining_count):Object(ua.b)("#ChatRoom_GenericEmpty");switch(t.length){case 1:return e.remaining_count>0?Object(ua.b)("#ChatRoom_OneFriendPlusMore",t[0].display_name,e.remaining_count):Object(ua.b)("#ChatRoom_OneFriend",t[0].display_name);case 2:return e.remaining_count>0?Object(ua.b)("#ChatRoom_TwoPlusMore",t[0].display_name,t[1].display_name,e.remaining_count):Object(ua.b)("#ChatRoom_TwoFriends",t[0].display_name,t[1].display_name);case 3:return Object(ua.b)("#ChatRoom_ThreeFriends",t[0].display_name,t[1].display_name,t[2].display_name);default:return AssertMsg(!1,"unexpected number of friends: "+t.length),""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagline",{get:function(){return this.m_strTagLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatarSHA",{get:function(){return this.m_strAvatarSHA},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watching_broadcast_steamid",{get:function(){return this.m_unWatchingBroadcastAccountID?hi.a.InitFromAccountID(this.m_unWatchingBroadcastAccountID):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAvatar",{get:function(){return this.m_strAvatarSHA.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_small",{get:function(){return M(this.m_strAvatarSHA,32)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_medium",{get:function(){return M(this.m_strAvatarSHA,64)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar_url_full",{get:function(){return M(this.m_strAvatarSHA,256)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCountTotal",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyToRender",{get:function(){return this.m_bFullStateLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCountOnline",{get:function(){return this.m_bFullStateLoaded?this.m_groupMembers.member_counts.online:this.memberCountTotal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberCountInGame",{get:function(){return this.m_groupMembers.member_counts.ingame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"memberList",{get:function(){return this.m_groupMembers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unique_id",{get:function(){return"cg"+this.m_ulGroupID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeJoined",{get:function(){return this.m_rtTimeJoined},enumerable:!0,configurable:!0}),e.prototype.GetGroupID=function(){return this.m_ulGroupID},e.prototype.GetDefaultChatID=function(){return this.m_ulDefaultChatID},e.prototype.BIsClanChatRoom=function(){return!!this.m_unClanID},e.prototype.BIsVoiceChannel=function(e){var t=this.GetChatRoom(e);return null!=t&&t.GetVoiceAllowed()&&t.GetRoomID()!=this.GetDefaultChatID()},e.prototype.BIsTempVoiceChannel=function(e){var t=this.GetChatRoom(e);return t&&t.IsTempVoiceRoom()},e.prototype.GetClanID=function(){return this.m_unClanID},Object.defineProperty(e.prototype,"textRoomList",{get:function(){var e=this;return S(this.m_mapRooms,function(t){return!t.GetVoiceAllowed()||t.GetRoomID()==e.GetDefaultChatID()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceRoomList",{get:function(){return S(this.m_mapRooms,function(e){return e.GetVoiceAllowed()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasVoiceRoom",{get:function(){for(var e,t=this.m_mapRooms.values();(e=t.next())&&!e.done;)if(e.value.GetVoiceAllowed())return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chatRoomList",{get:function(){return Array.from(this.m_mapRooms.values())},enumerable:!0,configurable:!0}),e.prototype.GetDesktopNotificationLevel=function(e){return void 0===e&&(e=!1),0==this.m_eUserDesktopNotificationLevel?this.BIsClanChatRoom()?3:4:this.m_eUserDesktopNotificationLevel},e.prototype.GetMobileNotificationLevel=function(){return 0===this.m_eUserMobileNotificationLevel?this.GetDesktopNotificationLevel():this.m_eUserMobileNotificationLevel},e.prototype.BIsUnreadIndicatorMuted=function(){return this.m_bUnreadIndicatorMuted},Object.defineProperty(e.prototype,"HasUnreadChatMessage",{get:function(){for(var e=Array.from(this.m_mapRooms.values()),t=0,i=e;t<i.length;t++){var n=i[t];if((this.m_bUnreadIndicatorMuted?n.has_unread_messages:n.has_any_unread_messages)&&(n.BIsDefaultRoom()||n.time_last_ack>=this.m_rtLastAck||n.time_last_mention>this.m_rtLastAck))return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HasUnreadMention",{get:function(){for(var e=Array.from(this.m_mapRooms.values()),t=0,i=e;t<i.length;t++)if(i[t].has_unread_mention)return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.GetMostRecentChatAck=function(){var e=0;return this.m_mapRooms.forEach(function(t){t.time_last_ack>e&&(e=t.time_last_ack)}),this.m_rtLastAck>e&&(e=this.m_rtLastAck),e},Object.defineProperty(e.prototype,"time_last_activity",{get:function(){var e=0;return this.m_mapRooms.forEach(function(t){t.BShouldTrackUnreadMessages()&&(e=Math.max(t.time_last_activity,e))}),this.m_rtLastAck>e&&(e=this.m_rtLastAck),this.m_rtTimeJoined>e&&(e=this.m_rtTimeJoined),e},enumerable:!0,configurable:!0}),e.prototype.BHasEverBeenAcked=function(){if(this.m_rtLastAck)return!0;for(var e=Array.from(this.m_mapRooms.values()),t=0,i=e;t<i.length;t++)if(i[t].time_last_ack)return!0;return!1},e.prototype.UpdateLastAckTimeFromServer=function(e){this.m_rtLastAck<e&&(this.m_rtLastAck=e)},e.prototype.IsInRoom=function(e){return AssertMsg(this.m_bFullStateLoaded,"Group state not fully loaded"),this.m_groupMembers.HasMember(e)},e.prototype.BRoomContainsJustTheseFriendsAndSelf=function(e){if(!this.BIsCurrentUserAMember())return!1;if(this.memberCountTotal!=e.length+1)return!1;for(var t=!0,i=0,n=e;i<n.length;i++){var r=n[i];if(this.m_rgGroupMembersSummary.indexOf(r)<0){t=!1;break}}return t},e.prototype.GetMyRank=function(){return this.GetMemberRank(this.m_chatStore.CMInterface.steamid.GetAccountID())},e.prototype.ChangeMemberRank=function(e,t){AssertMsg(this.m_groupMembers.HasMember(e),"ChangeMemberRank: missing member"),this.m_groupMembers.GetExtra(e).m_rank=t},e.prototype.GetMemberRank=function(e){AssertMsg(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var t=this.m_groupMembers.GetExtra(e);return t&&0!=t.m_rank?t.m_rank:this.BIsClanChatRoom()?0:20},e.prototype.GetMemberRankIfPresent=function(e){var t=this.m_groupMembers.GetExtra(e);return t?t.m_rank:0},e.prototype.ChangeMemberRoles=function(e,t){AssertMsg(this.m_groupMembers.HasMember(e),"GetMemberRank: missing member");var i=this.m_groupMembers.GetExtra(e);i&&(i.m_role_ids=t)},e.prototype.GetMemberRankString=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return Object(ua.b)("#Chat_rank_owner");case 40:return Object(ua.b)("#Chat_rank_officer");case 30:return Object(ua.b)("#Chat_rank_moderator");case 20:return Object(ua.b)("#Chat_rank_member");case 15:return Object(ua.b)("#Chat_rank_guest");case 10:return Object(ua.b)("#Chat_rank_viewer");case 0:return"";default:return Object(ua.b)("#Chat_rank_unknown")}},e.prototype.GetMemberRankStringUnlocalized=function(e){if(!this.IsInRoom(e))return"";switch(this.GetMemberRank(e)){case 50:return"Owner";case 40:return"Officer";case 30:return"Moderator";case 20:return"Member";case 15:return"Guest";case 10:return"Viewer";case 0:return"DefaultRank";default:return Object(ua.b)("UnknownRank")}},e.prototype.GetMember=function(e){if(this.IsInRoom(e))return this.m_chatStore.FriendStore.GetPlayer(e);this.m_bFullStateLoaded},e.prototype.SetInitialGroupState=function(e){AssertMsg(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateGroupStateFromSummary(e),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.UpdateGroupStateFromSummary=function(e){this.m_strName=e.chat_group_name(),this.m_strTagLine=e.chat_group_tagline(),void 0!=e.chat_group_avatar_sha()&&(this.m_strAvatarSHA=r(e.chat_group_avatar_sha())),this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_cMemberSummaryCount=e.active_member_count(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_rgGroupMembersSummary=e.top_members(),this.m_defaultRoleID=e.default_role_id(),this.m_roleActions=e.role_actions().map(function(e){return new $c(e)}),this.m_groupMembers.AddMember(wd.CMInterface.steamid.GetAccountID(),new Qc(e.rank(),e.role_ids()))},e.prototype.UpdateGroupState=function(e){AssertMsg(e.header_state().chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.UpdateChatRoomHeaderState(e.header_state()),this.m_groupMembers.Clear();for(var t=[],i=0,n=e.members();i<n.length;i++){var r=n[i],o=r.accountid();this.m_groupMembers.AddMember(o,new Qc(r.rank(),r.role_ids())),t.length<10&&t.push(o)}(!this.m_rgGroupMembersSummary||this.m_rgGroupMembersSummary.length<t.length)&&(this.m_rgGroupMembersSummary=t),this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms()),this.m_bFullStateLoaded=!0},e.prototype.UnloadActiveGroupState=function(){this.UnloadGroupState(),this.m_mapRooms.forEach(function(e){e.UnloadActiveChatState()})},e.prototype.UnloadGroupState=function(){this.m_bFullStateLoaded=!1,this.m_groupMembers.Clear()},e.prototype.UnloadAndResetGroupState=function(){this.UnloadGroupState(),this.UpdateUserState(new xr),this.m_mapRooms.forEach(function(e){e.UnloadChatState()})},e.prototype.OnUserStateChange=function(e,t){var i=e.accountid();1==t?(this.LOG("new member "+i+" roles ["+e.role_ids().toString()+"]"),this.m_groupMembers.AddMember(i,new Qc(e.rank(),e.role_ids())),wd.GroupMemberStore.OnMemberAdded(this.m_ulGroupID,i),this.m_rgGroupMembersSummary.length<10&&-1==this.m_rgGroupMembersSummary.indexOf(i)&&(this.m_rgGroupMembersSummary=this.m_rgGroupMembersSummary.concat([i]))):2==t||3==t||10==t?(this.m_groupMembers.RemoveMember(i),wd.GroupMemberStore.OnMemberRemoved(this.m_ulGroupID,i),-1!==this.m_rgGroupMembersSummary.indexOf(i)&&(this.m_rgGroupMembersSummary=_n.a(this.m_rgGroupMembersSummary,i))):7==t?this.ChangeMemberRank(i,e.rank()):12==t&&this.ChangeMemberRoles(i,e.role_ids())},e.prototype.UpdateChatRoomState=function(e,t){var i=this;this.m_ulDefaultChatID=e;var n=new Set;this.m_mapRooms.forEach(function(e,t){return n.add(t)});for(var r=0,o=t;r<o.length;r++){var a=o[r],s=a.chat_id();n.delete(s);var c=this.m_mapRooms.get(s);c||(c=new Xc(this.m_chatStore,this,s,s==e),this.m_mapRooms.set(s,c)),c.UpdateChatState(a)}n.forEach(function(e){return i.m_mapRooms.delete(e)})},e.prototype.UpdateUserState=function(e){for(var t=0,i=e.user_chat_room_state();t<i.length;t++){var n=i[t],r=n.chat_id(),o=this.m_mapRooms.get(r);o&&o.UpdateUserState(n)}this.m_rtTimeJoined=e.time_joined(),this.m_rtLastAck=e.time_last_group_ack(),this.m_eUserDesktopNotificationLevel=e.desktop_notification_level(),this.m_eUserMobileNotificationLevel=e.mobile_notification_level(),this.m_bUnreadIndicatorMuted=e.unread_indicator_muted()},e.prototype.UpdateChatRoomHeaderState=function(e){AssertMsg(e.chat_group_id()==this.m_ulGroupID,"Chat group id doesn't match header"),this.m_strName=e.chat_name(),this.m_strTagLine=e.tagline(),void 0!=e.avatar_sha()&&(this.m_strAvatarSHA=r(e.avatar_sha())),this.m_unWatchingBroadcastAccountID=e.watching_broadcast_accountid(),this.m_unClanID=e.clanid(),this.m_unOwnerAccountID=e.accountid_owner(),this.m_defaultRoleID=e.default_role_id(),this.m_roles=e.roles().map(function(e){return{role_id:e.role_id(),name:e.name(),ordinal:e.ordinal()}});for(var t=0,i=this.m_roles;t<i.length;t++){var n=i[t];this.LOG("role "+n.role_id+" "+n.name)}this.m_roleActions=e.role_actions().map(function(e){return new $c(e)});for(var o=0,a=this.m_roleActions;o<a.length;o++){var s=a[o];this.LOG("role/action "+s.toString())}},e.prototype.BIsCurrentUserAMember=function(){return!!this.m_rtTimeJoined},e.prototype.DefaultRoleID=function(){return this.m_defaultRoleID},e.prototype.GetRoleActions=function(e){for(var t=0,i=this.m_roleActions;t<i.length;t++){var n=i[t];if(n.role_id==e)return n}},e.prototype.GetRoles=function(){return this.m_roles},e.prototype.GetRoleOrdinal=function(e){for(var t=0,i=this.m_roles;t<i.length;t++){var n=i[t];if(n.role_id==e)return n.ordinal}},e.prototype.BIsUserGroupMember=function(e){for(var t=0,i=this.m_rgGroupMembersSummary;t<i.length;t++)if(i[t]==e.accountid)return!0;return!1},e.prototype.GetMemberRoleIDs=function(e){return void 0==this.m_groupMembers.GetExtra(e)?[]:this.m_groupMembers.GetExtra(e).m_role_ids},e.prototype.ToggleMemberRoleState=function(e,t){var i=this.BMemberHasRole(e,t);return this.SetMemberRoleState(e,t,!i)},e.prototype.SetMemberRoleState=function(e,t,i){if(i==this.BMemberHasRole(e,t))return Promise.resolve(!0);if(!this.BCanIAssignRole(t))return Promise.resolve(!1);var n=hi.a.InitFromAccountID(e);if(i){var r=fi.Init(Ir);return r.Body().set_chat_group_id(this.GetGroupID()),r.Body().set_steamid(n.ConvertTo64BitString()),r.Body().set_role_id(t),ra.AddRoleToUser(wd.ChatStore.CMInterface.GetServiceTransport(),r).then(function(e){return e.GetEResult(),1==e.GetEResult()})}var r=fi.Init(Tr);return r.Body().set_chat_group_id(this.GetGroupID()),r.Body().set_steamid(n.ConvertTo64BitString()),r.Body().set_role_id(t),ra.DeleteRoleFromUser(wd.ChatStore.CMInterface.GetServiceTransport(),r).then(function(e){return e.GetEResult(),1==e.GetEResult()})},e.prototype.BDoesRoleAllowAction=function(e,t){for(var i=0,n=this.m_roleActions;i<n.length;i++){var r=n[i];if(r.role_id==e&&r.BCanPerformAction(t))return!0}return!1},e.prototype.BCanIPerformActionOnUser=function(e,t,i){return void 0===i&&(i=!1),!(!i&&!this.BHasMember(e))&&!this.BIsAccountIDOwner(e)&&this.BCanIPerformAction(t)},e.prototype.BHasMember=function(e){return void 0!==this.m_groupMembers.GetExtra(e)},e.prototype.BMemberHasRole=function(e,t){var i=this.m_groupMembers.GetExtra(e);return!!i&&i.BHasRole(t)},e.prototype.BCanIPerformAction=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;var t=this.m_chatStore.CMInterface.steamid.GetAccountID(),i=this.m_groupMembers.GetExtra(t);if(i)for(var n=0,r=i.m_role_ids;n<r.length;n++){var o=r[n];if(this.BDoesRoleAllowAction(o,e))return!0}return!1},e.prototype.BCanKickMember=function(e){return this.BCanIPerformActionOnUser(e,2)},e.prototype.BCanBanMember=function(e){return this.BCanIPerformActionOnUser(e,3)},e.prototype.BCanDeleteMemberMessages=function(e){return!(wd.FriendStore.self.accountid!=e||!this.BIsAccountIDOwner(e))||(this.BCanIPerformActionOnUser(e,2,!0)||this.BCanIPerformActionOnUser(e,3,!0))},e.prototype.BCanICreateRoles=function(){return this.BCanIPerformAction(8)},e.prototype.BCanIModifyRole=function(e){if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(8))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(void 0==t)return!1;var i=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),8),n=this.GetRoleOrdinal(i);return void 0!=n&&n<t},e.prototype.BCanIAssignRoles=function(){return this.BCanIPerformAction(9)},e.prototype.BCanIAssignRole=function(e){if(this.BIsClanChatRoom())return!1;if(e==this.DefaultRoleID())return!1;if(this.BIsAccountIDOwner(this.m_chatStore.CMInterface.steamid.GetAccountID()))return!0;if(!this.BCanIPerformAction(9))return!1;if(!this.GetRoleActions(e))return!1;var t=this.GetRoleOrdinal(e);if(void 0==t)return!1;var i=this.GetHighestRankRoleIDForPermission(this.m_chatStore.CMInterface.steamid.GetAccountID(),9),n=this.GetRoleOrdinal(i);return void 0!=n&&n<t},e.prototype.BCanIMentionAll=function(){return this.BCanIPerformAction(10)},e.prototype.BCanIAssociateBroadcast=function(){return this.BCanIPerformAction(11)},e.prototype.GetHighestRankRoleIDForPermission=function(e,t){var i=void 0,n=Number.MAX_VALUE,r=this.m_groupMembers.GetExtra(e);if(r){for(var o=0,a=r.m_role_ids;o<a.length;o++){var s=a[o];if(this.BDoesRoleAllowAction(s,t)){var c=this.GetRoleOrdinal(s);c<n&&(i=s,n=c)}}return i}},e.prototype.GetDefaultChatRoom=function(){return this.m_mapRooms.get(this.m_ulDefaultChatID)},e.prototype.GetChatRoom=function(e){return this.m_mapRooms.get(e)},e.prototype.OnConnectionRestored=function(){this.UnloadGroupState(),this.m_mapRooms.forEach(function(e){return e.OnConnectionRestored()})},e.prototype.OnRoomStateChange=function(e){this.UpdateChatRoomState(e.default_chat_id(),e.chat_rooms())},e.prototype.OnActivate=function(){if(!this.m_rtLastAck||this.HasUnreadChatMessage&&!this.GetDefaultChatRoom().has_unread_messages){var e=0;this.m_mapRooms.forEach(function(t){t.time_last_message&&(e=Math.max(e,t.time_last_message))}),this.m_rtLastAck=e||wd.GetServerRTime32();var t=fi.Init(bo);t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_timestamp(this.m_rtLastAck),ra.AckChatMessage(wd.CMInterface.GetServiceTransport(),t)}},e.prototype.InviteFriend=function(e,t){var i=hi.a.InitFromAccountID(e),n=fi.Init(eo);n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_steamid(i.ConvertTo64BitString()),t&&n.Body().set_chat_id(t.GetRoomID()),ra.InviteFriendToChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){e.GetEResult()})},e.prototype.SaveChatRoomGroup=function(e){var t=fi.Init(Qn);return t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_name(e),ra.SaveChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),t).then(function(e){var t=e.GetEResult();if(1!=t)throw t})},e.prototype.RenameChatRoomGroup=function(e){var t=this,i=this.m_strName;this.m_strName=e;var n=fi.Init(Xn);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_name(e),ra.RenameChatRoomGroup(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){return 1!=e.GetEResult()&&(t.m_strName=i),e.GetEResult()})},e.prototype.SetChatRoomGroupTagline=function(e){var t=this,i=this.m_strTagLine;if(e.length>255&&(e=e.substring(0,255)),e==this.m_strTagLine)return Promise.resolve();this.m_strTagLine=e;var n=fi.Init(er);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_tagline(e),ra.SetChatRoomGroupTagline(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){1!=e.GetEResult()&&(t.m_strTagLine=i)})},e.prototype.SetChatRoomGroupWatchingBroadcast=function(e){return si.b(this,void 0,void 0,function(){var t,i,n;return si.e(this,function(r){switch(r.label){case 0:return e==this.m_unWatchingBroadcastAccountID?[2,Promise.resolve()]:(t=fi.Init(rr),t.Body().set_chat_group_id(this.m_ulGroupID),t.Body().set_watching_broadcast_accountid(e),[4,ra.SetChatRoomGroupWatchingBroadcast(this.m_chatStore.CMInterface.GetServiceTransport(),t)]);case 1:if(i=r.sent(),1!==(n=i.GetEResult()))throw n;return this.m_unWatchingBroadcastAccountID=e,[2]}})})},e.prototype.SetChatRoomGroupAvatar=function(e){var t=this;if(e==this.m_strAvatarSHA)return Promise.resolve();var i=fi.Init(ir);return i.Body().set_chat_group_id(this.m_ulGroupID),i.Body().set_avatar_sha(o(e)),ra.SetChatRoomGroupAvatar(this.m_chatStore.CMInterface.GetServiceTransport(),i).then(function(i){var n=i.GetEResult();if(1!=n)throw n;t.m_strAvatarSHA=e})},e.prototype.BCanInvite=function(){return this.BCanIPerformAction(4)},e.prototype.BCanBan=function(){return this.BCanIPerformAction(3)},e.prototype.BCanKick=function(){return this.BCanIPerformAction(2)},e.prototype.BCanAdminChannel=function(){return this.BCanIPerformAction(1)},e.prototype.BCanAdminGroup=function(){return this.BCanIPerformAction(5)},e.prototype.BCanChat=function(){return this.BCanIPerformAction(6)},e.prototype.BCanEditRoles=function(){return!this.BIsClanChatRoom()&&this.BCanIPerformAction(9)},Object.defineProperty(e.prototype,"members_to_highlight_name",{get:function(){return this.InternalGetMembersToHighlight(3,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"members_to_highlight",{get:function(){return this.InternalGetMembersToHighlight(4,!1)},enumerable:!0,configurable:!0}),e.prototype.InternalGetMembersToHighlight=function(e,t){var i=!t,n=!!this.m_rtTimeJoined,r=this.m_bFullStateLoaded?this.m_groupMembers.unfiltered_count:this.m_cMemberSummaryCount,o=r>e?e-1:e,a=wd.FriendStore,s=a.self,c=[],l=a.GetPlayer(this.GetOwnerAccountID());if(l&&l.accountid!=s.accountid&&c.push(l),this.m_rgGroupMembersSummary){for(var u=0,d=this.m_rgGroupMembersSummary;u<d.length;u++){var p=d[u];if(p!=s.accountid&&!this.BIsAccountIDOwner(p)){var m=a.GetFriendIfCached(p);if(m&&(t||m.persona.BHasAvatarSet())&&(m.persona.avatar_url,c.push(m),c.length>=o))break}}if(i&&c.length<o)for(var h=0,g=this.m_rgGroupMembersSummary;h<g.length;h++){var p=g[h];if(p!=s.accountid&&!this.BIsAccountIDOwner(p)){var f=a.GetPlayer(p);if(f&&!f.is_friend&&(t||f.persona.BHasAvatarSet())&&(c.push(f),c.length>=o))break}}}return n&&c.length<o&&c.push(s),{members:c,remaining_count:r-c.length}},e.prototype.SetUserBanState=function(e,t){var i=hi.a.InitFromAccountID(e).ConvertTo64BitString(),n=fi.Init(ur);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_steamid(i),n.Body().set_ban_state(t),ra.SetUserBanState(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){var t=e.GetEResult();if(1!=t&&29!=t)throw AssertMsg(!1,"Failed to change ban state "+t),t})},e.prototype.MuteUser=function(e,t){var i=hi.a.InitFromAccountID(e).ConvertTo64BitString(),n=fi.Init(ar);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_steamid(i),n.Body().set_expiration(t),ra.MuteUserInGroup(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){var t=e.GetEResult();if(1!=t)throw AssertMsg(!1,"Failed to change muteexpiration "+t),t})},e.prototype.KickUser=function(e,t){var i=this,n=hi.a.InitFromAccountID(e).ConvertTo64BitString(),r=fi.Init(cr);return r.Body().set_chat_group_id(this.m_ulGroupID),r.Body().set_steamid(n),r.Body().set_expiration(t),ra.KickUserFromGroup(this.m_chatStore.CMInterface.GetServiceTransport(),r).then(function(e){var t=e.GetEResult();if(1!=t)throw i.LOG("Kick returned "+t),t})},e.prototype.RevokeInvite=function(e){var t=this,i=hi.a.InitFromAccountID(e).ConvertTo64BitString(),n=fi.Init(pr);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_steamid(i),ra.RevokeInviteToGroup(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){var i=e.GetEResult();if(1!=i)throw t.LOG("RevokeInvite returned "+i),i})},e.prototype.CreateChatRoom=function(e,t){var i=this,n=fi.Init(Vr);return n.Body().set_chat_group_id(this.m_ulGroupID),n.Body().set_name(e),n.Body().set_allow_voice(t),ra.CreateChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),n).then(function(e){var t=e.Body().chat_room().chat_id();if(1!=e.GetEResult()||""==t||"0"==t)throw AssertMsg(!1,"Failed to create chat room"),new Error("Failed to create chat room");return i.AddCreatedRoom(t,e.Body().chat_room())})},e.prototype.CreateAndJoinTempVoiceRoom=function(){this.CreateChatRoom("",!0).then(function(e){e.StartVoiceChat()}).catch(function(){})},e.prototype.AddCreatedRoom=function(e,t){var i=this.m_mapRooms.get(e);return i||(i=new Xc(this.m_chatStore,this,e,!1),this.m_mapRooms.set(e,i)),i.UpdateChatState(t),i},e.prototype.RenameRoom=function(e,t){if(e!=this.m_ulDefaultChatID&&t){var i=this.GetChatRoom(e);if(i){var n=i.name;i.ChangeNameWhileWaitingForRenameRequest(t);var r=fi.Init(qr);r.Body().set_chat_group_id(this.m_ulGroupID),r.Body().set_chat_id(e),r.Body().set_name(t),ra.RenameChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),r).then(function(e){1==e.GetEResult()||(AssertMsg(!1,"Failed to change room name"),i.ChangeNameWhileWaitingForRenameRequest(n))})}}},e.prototype.DeleteChatRoom=function(e){var t=this,i=fi.Init(Wr);i.Body().set_chat_group_id(this.m_ulGroupID),i.Body().set_chat_id(e),ra.DeleteChatRoom(this.m_chatStore.CMInterface.GetServiceTransport(),i).then(function(i){1==i.GetEResult()?t.RemoveRoom(e):AssertMsg(!1,"Failed to delete chat room")})},e.prototype.RemoveRoom=function(e){this.m_mapRooms.delete(e)},e.prototype.LeaveChatRoomGroup=function(e){this.m_chatStore.LeaveChatRoomGroup(e,this.m_ulGroupID).catch(function(){})},e.prototype.GetInviteLinksForGroup=function(){var e=fi.Init(Oo);return e.Body().set_chat_group_id(this.GetGroupID()),ra.GetInviteLinksForGroup(wd.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInviteLinks:null}:{loadingState:"loaded",rgInviteLinks:e.Body().invite_links()}})},e.prototype.GetInvitedUsersForGroup=function(){var e=fi.Init(Lo);return e.Body().set_chat_group_id(this.GetGroupID()),ra.GetInviteList(wd.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){return 1!=e.GetEResult()?{loadingState:"failed",rgInvitedUsers:null}:{loadingState:"loaded",rgInvitedUsers:e.Body().invites()}})},e.prototype.GetBanList=function(){var e=fi.Init(ko);return e.Body().set_chat_group_id(this.GetGroupID()),ra.GetBanList(wd.ChatStore.CMInterface.GetServiceTransport(),e).then(function(e){var t=new il;return 15==e.GetEResult()?t.loadingState="denied":1==e.GetEResult()?(t.rgBans=e.Body().bans(),t.loadingState="loaded"):t.loadingState="failed",t})},e.prototype.GetRoleName=function(e){var t=this.m_roles.findIndex(function(t){return t.role_id==e});if(t>=0)return this.m_roles[t].name},e.prototype.CreateRole=function(e){var t=this;if(e=e.trim(),0==e.length)return Promise.resolve();var i=fi.Init(fr);return i.Body().set_chat_group_id(this.GetGroupID()),i.Body().set_name(e),this.m_roles.push({role_id:"-1",name:e,ordinal:Number.MAX_VALUE}),ra.CreateRole(wd.ChatStore.CMInterface.GetServiceTransport(),i).then(function(i){var n=i.GetEResult();if(1!=n){var r=t.m_roles.findIndex(function(e){return"-1"==e.role_id});throw r>=0&&t.m_roles.splice(r,1),new Error("unable to create role, error "+n)}t.LOG("created role "+e)})},e.prototype.DeleteRole=function(e){var t=this,i=fi.Init(Mr);return i.Body().set_chat_group_id(this.GetGroupID()),i.Body().set_role_id(e),ra.DeleteRole(wd.ChatStore.CMInterface.GetServiceTransport(),i).then(function(i){if(1!=i.GetEResult())throw new Error("unable to delete role "+e);var n=t.m_roles.findIndex(function(t){return t.role_id==e});n>=0&&t.m_roles.splice(n,1)})},e.prototype.RenameRole=function(e,t){var i=this;if(t=t.trim(),0==t.length)return Promise.resolve();var n=fi.Init(vr);return n.Body().set_chat_group_id(this.GetGroupID()),n.Body().set_role_id(e),n.Body().set_name(t),ra.RenameRole(wd.ChatStore.CMInterface.GetServiceTransport(),n).then(function(n){var r=n.GetEResult();if(1!=r)throw new Error("unable to rename role "+e+" "+r);var o=i.m_roles.findIndex(function(t){return t.role_id==e});o>=0&&(i.m_roles[o].name=t)})},e.prototype.ReorderRole=function(e,t){var i=fi.Init(Cr);return i.Body().set_chat_group_id(this.GetGroupID()),i.Body().set_role_id(e),i.Body().set_ordinal(t),ra.ReorderRole(wd.ChatStore.CMInterface.GetServiceTransport(),i).then(function(e){return 1==e.GetEResult()})},e.prototype.SetRoleAction=function(e,t,i){var n=this,r=this.GetRoleActions(e);if(r){if(i==r.BCanPerformAction(t))return;var o=r.BCanPerformAction(t);r.SetCanPerformAction(t,i);var a=fi.Init(Br);return a.Body().set_chat_group_id(this.GetGroupID()),a.Body().set_role_id(e),a.Body().set_actions(r.roleActions),ra.ReplaceRoleActions(wd.ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){1!=e.GetEResult()&&(r.SetCanPerformAction(t,o),n.LOG("SetRoleAction error, restoring "+t+" to "+o))})}},e.prototype.DeleteInviteLink=function(e,t){var i=fi.Init(Eo);if(i.Body().set_chat_group_id(this.GetGroupID()),i.Body().set_invite_code(e),t&&"loaded"==t.loadingState){var n=t.rgInviteLinks.findIndex(function(t){return t.invite_code()==e});n>=0&&(t.rgInviteLinks.splice(n,1),this.LOG("removed link "+t.rgInviteLinks))}return ra.DeleteInviteLink(wd.ChatStore.CMInterface.GetServiceTransport(),i).then(function(e){return 1==e.GetEResult()})},e.prototype.SetNotificationPreferences=function(e,t,i){var n=fi.Init(zo);return n.Body().set_chat_group_id(this.m_ulGroupID),void 0!==e&&(this.m_eUserDesktopNotificationLevel=e,n.Body().chat_group_preferences().set_desktop_notification_level(e),4==e&&this.m_bUnreadIndicatorMuted&&(i=!1)),void 0!==t&&(this.m_eUserMobileNotificationLevel=t,n.Body().chat_group_preferences().set_mobile_notification_level(t)),void 0!==i&&(this.m_bUnreadIndicatorMuted=i,n.Body().chat_group_preferences().set_unread_indicator_muted(i)),ra.SetUserChatGroupPreferences(wd.CMInterface.GetServiceTransport(),n).then(function(e){return 1==e.GetEResult()})},si.c([_i.observable],e.prototype,"m_rtTimeJoined",void 0),si.c([_i.observable],e.prototype,"m_rtLastAck",void 0),si.c([_i.observable],e.prototype,"m_unOwnerAccountID",void 0),si.c([_i.observable],e.prototype,"m_bFullStateLoaded",void 0),si.c([_i.observable],e.prototype,"m_strName",void 0),si.c([_i.observable],e.prototype,"m_strTagLine",void 0),si.c([_i.observable],e.prototype,"m_strAvatarSHA",void 0),si.c([_i.observable],e.prototype,"m_unWatchingBroadcastAccountID",void 0),si.c([_i.observable],e.prototype,"m_eUserDesktopNotificationLevel",void 0),si.c([_i.observable],e.prototype,"m_eUserMobileNotificationLevel",void 0),si.c([_i.observable],e.prototype,"m_bUnreadIndicatorMuted",void 0),si.c([_i.observable],e.prototype,"m_roles",void 0),si.c([_i.observable],e.prototype,"m_rgGroupMembersSummary",void 0),si.c([_i.observable],e.prototype,"m_cMemberSummaryCount",void 0),si.c([_i.computed],e.prototype,"name",null),si.c([_i.computed],e.prototype,"hasAvatar",null),si.c([_i.computed],e.prototype,"avatar_url_small",null),si.c([_i.computed],e.prototype,"avatar_url_medium",null),si.c([_i.computed],e.prototype,"avatar_url_full",null),si.c([_i.computed],e.prototype,"textRoomList",null),si.c([_i.computed],e.prototype,"voiceRoomList",null),si.c([_i.computed],e.prototype,"hasVoiceRoom",null),si.c([_i.computed],e.prototype,"HasUnreadChatMessage",null),si.c([_i.computed],e.prototype,"HasUnreadMention",null),si.c([_i.computed],e.prototype,"time_last_activity",null),si.c([_i.action],e.prototype,"ChangeMemberRank",null),si.c([_i.action],e.prototype,"ChangeMemberRoles",null),si.c([_i.action],e.prototype,"SetInitialGroupState",null),si.c([_i.action],e.prototype,"UpdateGroupStateFromSummary",null),si.c([_i.action],e.prototype,"UpdateGroupState",null),si.c([_i.action],e.prototype,"UnloadActiveGroupState",null),si.c([_i.action],e.prototype,"UnloadGroupState",null),si.c([_i.action],e.prototype,"UnloadAndResetGroupState",null),si.c([_i.action],e.prototype,"UpdateChatRoomState",null),si.c([_i.action],e.prototype,"UpdateUserState",null),si.c([_i.action],e.prototype,"UpdateChatRoomHeaderState",null),si.c([_i.action],e.prototype,"OnActivate",null),si.c([_i.computed],e.prototype,"members_to_highlight_name",null),si.c([_i.computed],e.prototype,"members_to_highlight",null),si.c([_i.action],e.prototype,"AddCreatedRoom",null),si.c([_i.action],e.prototype,"RemoveRoom",null),e}(),tl=function(e){function t(t,i){var n=e.call(this)||this;return n.LOG=Da.create(function(){return n.GetUniqueID()},Zc),n.m_mapChatViews=new Map,n.m_bShowSettingsDialog=!1,n.m_bShowBroadcast=!1,n.m_bChatHidden=!1,n.m_bShowGlobalChat=!1,n.m_bMemberSearchActive=!1,n.m_strMemberSearchString="",n.m_tabset=t,n.m_group=i,n.m_group.BIsValid()&&n.SelectChat(n.m_group.GetDefaultChatID()),n.m_disposeChatRooms=Object(_i.autorun)(function(){var e=n.m_group.chatRoomList;n.m_selectedChatView&&e.length&&e.indexOf(n.m_selectedChatView.chat)<0&&n.SelectChat(n.m_group.GetDefaultChatID())}),n}return si.d(t,e),t.prototype.GetGroup=function(){return this.m_group},t.prototype.GetSelectedChatView=function(){return this.m_selectedChatView},t.prototype.GetActiveChatView=function(){return this.GetPopoverChatView()||this.GetSelectedChatView()},t.prototype.GetPopoverChatView=function(){return this.m_popoverChatView},Object.defineProperty(t.prototype,"isBroadcastShown",{get:function(){return this.m_bShowBroadcast},enumerable:!0,configurable:!0}),t.prototype.ShowBroadcast=function(){var e=this;this.SetChannelListCollapsed(!0,!1),this.SetMemberListCollapsed(!0,!1),this.m_bShowBroadcast=!0,SetBackgroundTimeout(function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()},30)},t.prototype.HideBroadcast=function(){var e=this;this.m_bShowBroadcast=!1,wd.UIStore.SetTheaterMode(!1),SetBackgroundTimeout(function(){e.GetActiveChatView()&&e.GetActiveChatView().OnChatFrameChanged()},30)},t.prototype.SetVerticalBroadcastChat=function(e){this.m_bShowVerticalBroadcastChat=e},t.prototype.ToggleTheaterModeBroadcastChat=function(){wd.UIStore.SetTheaterMode(!wd.UIStore.GetTheaterMode())},t.prototype.SetChatHidden=function(e){this.m_bChatHidden=e},t.prototype.SetGlobalBroadcastChatShown=function(e){this.m_bShowGlobalChat=e,this.GetActiveChatView()&&this.GetActiveChatView().OnChatFrameChanged()},t.prototype.SetLocalBroadcastId=function(e){this.m_strLocalBroadcastId=e},t.prototype.SetMemberListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bMemberListCollapsedOverride=void 0;var i=this.GetGroup();wd.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(i.GetGroupID(),"bMemberListCollapsed",e)}else this.m_bMemberListCollapsedOverride=e},t.prototype.SetChannelListCollapsed=function(e,t){if(void 0===t&&(t=!0),t){this.m_bChannelListCollapsedOverride=void 0;var i=this.GetGroup();wd.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(i.GetGroupID(),"bChannelListCollapsed",e)}else this.m_bChannelListCollapsedOverride=e},t.prototype.ClosePopoverChat=function(){this.m_popoverChatView&&(this.m_popoverChatView.OnViewClosed(),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_popoverChatView=null)},t.prototype.SelectChat=function(e){var t=this,i=this.m_group.GetChatRoom(e);if(i){if(i.GetVoiceAllowed()&&i!=this.m_group.GetDefaultChatRoom()){if(this.m_popoverChatView&&this.m_popoverChatView.chat==i)return}else if(this.ClosePopoverChat(),this.m_selectedChatView&&this.m_selectedChatView.chat==i)return;i.GetVoiceAllowed()&&this.m_group.GetDefaultChatRoom()!=i?(this.ClosePopoverChat(),this.m_popoverChatView=this.GetChatViewForRoom(i),this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeActiveVoice=Object(_i.when)(function(){return!i.BVoiceActive()},function(){t.m_popoverChatView&&t.m_popoverChatView.chat==i&&t.ClosePopoverChat()})):(this.m_selectedChatView&&this.m_selectedChatView.OnViewClosed(),this.m_selectedChatView=this.GetChatViewForRoom(i)),this.m_tabset.activeTab==this&&this.m_tabset.is_popup_focused&&this.OnTabActivate()}},t.prototype.SelectNextChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,i=e>=t.length-1?0:e+1;this.SelectChat(t[i].GetRoomID())},t.prototype.SelectPreviousChannel=function(){var e=this.GetSelectedChannelIndex(),t=this.GetGroup().textRoomList,i=e<=0?t.length-1:e-1;this.SelectChat(t[i].GetRoomID())},t.prototype.GetSelectedChannelIndex=function(){var e=this.GetSelectedChatView().chat.GetRoomID();return this.GetGroup().textRoomList.findIndex(function(t){return t.GetRoomID()===e})},t.prototype.GetChatViewForRoom=function(e){var t=e.GetRoomID(),i=this.m_mapChatViews.get(t);return i?this.LOG("reusing chat for "+t):i=new pl(this.m_tabset,e),i},t.prototype.StartRoomRename=function(e){this.m_ulRenameChatRoomID=e},t.prototype.EndRoomRename=function(){this.m_ulRenameChatRoomID=""},t.prototype.IsRoomRenameActive=function(e){return""!=this.m_ulRenameChatRoomID&&this.m_ulRenameChatRoomID==e},t.prototype.GetRenameRoomID=function(){return this.m_ulRenameChatRoomID},t.prototype.OnTabClosed=function(){this.m_disposeActiveVoice&&this.m_disposeActiveVoice(),this.m_disposeChatRooms&&this.m_disposeChatRooms(),this.ClosePopoverChat(),this.GetSelectedChatView().OnViewClosed(),wd.ChatStore.DecRefActiveChatRoomGroup(this.GetGroup().GetGroupID())},t.prototype.IsVoiceActive=function(){return wd.ChatStore.VoiceChat.GetActiveChatRoomGroupID()==this.m_group.GetGroupID()},t.prototype.IsTabForChat=function(e){if(!(e instanceof Xc))return!1;var t=e;return!!this.m_group.GetChatRoom(t.GetRoomID())},t.prototype.GetUnreadMessageCount=function(){return this.m_group.HasUnreadChatMessage?1:0},t.prototype.SetMemberSearchEnabled=function(e){this.m_bMemberSearchActive&&this.m_strMemberSearchString==e||(this.m_bMemberSearchActive=!0,this.m_strMemberSearchString=e||"")},t.prototype.ClearMemberSearch=function(){this.m_bMemberSearchActive=!1,this.m_strMemberSearchString=""},t.prototype.IsMemberSearchActive=function(){return this.m_bMemberSearchActive},t.prototype.GetMemberSearch=function(){return this.m_strMemberSearchString},Object.defineProperty(t.prototype,"normalizedMemberSearch",{get:function(){return this.m_strMemberSearchString.trim().toLocaleLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMemberListExpanded",{get:function(){if(this.m_bMemberSearchActive)return!0;if(void 0===this.m_bMemberListCollapsedOverride){var e=this.GetGroup();return!wd.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bMemberListCollapsed")}return!this.m_bMemberListCollapsedOverride},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChannelListCollapsed",{get:function(){if(void 0===this.m_bChannelListCollapsedOverride){var e=this.GetGroup();return wd.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(e.GetGroupID(),"bChannelListCollapsed")}return this.m_bChannelListCollapsedOverride},enumerable:!0,configurable:!0}),t.prototype.GetTabName=function(){return this.m_group.name},t.prototype.GetUniqueID=function(){return this.m_group.unique_id},t.prototype.OnTabFocus=function(){var e=this.GetActiveChatView();e&&e.OnFocus()},t.prototype.InternalOnTabActivate=function(){var e=this.GetActiveChatView();e&&e.OnActivate()},t.prototype.OnTabDeactivate=function(){var e=this.GetActiveChatView();e&&e.OnDeactivate()},t.prototype.IsChatRoom=function(){return!0},t.prototype.GetChatView=function(){return this.GetActiveChatView()},si.c([_i.observable],t.prototype,"m_selectedChatView",void 0),si.c([_i.observable],t.prototype,"m_popoverChatView",void 0),si.c([_i.observable],t.prototype,"m_bShowSettingsDialog",void 0),si.c([_i.observable],t.prototype,"m_ulRenameChatRoomID",void 0),si.c([_i.observable],t.prototype,"m_bShowBroadcast",void 0),si.c([_i.observable],t.prototype,"m_bShowVerticalBroadcastChat",void 0),si.c([_i.observable],t.prototype,"m_strLocalBroadcastId",void 0),si.c([_i.observable],t.prototype,"m_bChatHidden",void 0),si.c([_i.observable],t.prototype,"m_bShowGlobalChat",void 0),si.c([_i.observable],t.prototype,"m_bMemberSearchActive",void 0),si.c([_i.observable],t.prototype,"m_strMemberSearchString",void 0),si.c([_i.observable],t.prototype,"m_bMemberListCollapsedOverride",void 0),si.c([_i.observable],t.prototype,"m_bChannelListCollapsedOverride",void 0),si.c([_i.action],t.prototype,"ShowBroadcast",null),si.c([_i.action.bound],t.prototype,"HideBroadcast",null),si.c([_i.action.bound],t.prototype,"SetVerticalBroadcastChat",null),si.c([_i.action],t.prototype,"ToggleTheaterModeBroadcastChat",null),si.c([_i.action],t.prototype,"SetChatHidden",null),si.c([_i.action],t.prototype,"SetGlobalBroadcastChatShown",null),si.c([_i.action],t.prototype,"SetLocalBroadcastId",null),si.c([_i.action],t.prototype,"SetMemberListCollapsed",null),si.c([_i.action],t.prototype,"SetChannelListCollapsed",null),si.c([_i.action],t.prototype,"ClosePopoverChat",null),si.c([_i.action],t.prototype,"SelectChat",null),si.c([_i.action],t.prototype,"SelectNextChannel",null),si.c([_i.action],t.prototype,"SelectPreviousChannel",null),si.c([_i.action],t.prototype,"StartRoomRename",null),si.c([_i.action],t.prototype,"EndRoomRename",null),si.c([_i.action],t.prototype,"OnTabClosed",null),si.c([_i.action],t.prototype,"SetMemberSearchEnabled",null),si.c([_i.action],t.prototype,"ClearMemberSearch",null),si.c([_i.computed],t.prototype,"normalizedMemberSearch",null),si.c([_i.computed],t.prototype,"isMemberListExpanded",null),si.c([_i.computed],t.prototype,"isChannelListCollapsed",null),t}(da),il=function(){function e(){this.loadingState="pending"}return si.c([_i.observable],e.prototype,"loadingState",void 0),si.c([_i.observable],e.prototype,"rgBans",void 0),e}(),nl={bMemberListCollapsed:void 0,bChannelListCollapsed:void 0},rl=function(){function e(){this.m_mapDisplayPrefs=_i.observable.map()}return e.prototype.Init=function(e){var t=this;this.m_SettingsStore=e,this.m_SettingsStore.GetObjectFromLocalStorageWhenReady("ChatRoomGroupDisplayPrefs").then(function(e){t.m_mapDisplayPrefs.clear();for(var i in e.chatRoomGroups)t.m_mapDisplayPrefs.set(i,e.chatRoomGroups[i])})},e.prototype.GetChatRoomDisplayPref=function(e,t){return(this.m_mapDisplayPrefs.get(e)||nl)[t]},e.prototype.ToggleChatRoomDisplayPref=function(e,t){var i=this.GetChatRoomDisplayPref(e,t);this.SetChatRoomDisplayPref(e,t,!i)},e.prototype.SetChatRoomDisplayPref=function(e,t,i){var n=this.m_mapDisplayPrefs.get(e);n&&n[t]===i||(n||(this.m_mapDisplayPrefs.set(e,Object.assign({},nl)),n=this.m_mapDisplayPrefs.get(e)),n[t]=i,this.WritePrefs())},e.prototype.WritePrefs=function(){this.m_SettingsStore.StoreObjectInLocalStorage("ChatRoomGroupDisplayPrefs",{chatRoomGroups:this.m_mapDisplayPrefs.toJSON()})},e.prototype.FillInChatUsabilityMetrics=function(e){var t=Array.from(this.m_mapDisplayPrefs.values());e.ui_state().set_group_chat_left_col_collapsed(_n.b(t,function(e){return e.bChannelListCollapsed})),e.ui_state().set_group_chat_right_col_collapsed(_n.b(t,function(e){return e.bMemberListCollapsed}))},si.c([_i.action],e.prototype,"SetChatRoomDisplayPref",null),e}(),ol=function(){function e(){this.m_mapAccountToExtra=_i.observable.map()}return e.prototype.GetCurrentMemberSet=function(){var e=new Set;return this.m_mapAccountToExtra.forEach(function(t,i){e.add(i)}),e},Object.defineProperty(e.prototype,"unfiltered_count",{get:function(){return this.m_mapAccountToExtra.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_counts",{get:function(){for(var e=0,t=0,i=0,n=this.member_list_unsorted;i<n.length;i++){var r=n[i];r.persona.is_online&&(e++,r.persona.is_ingame&&t++)}return{online:e,ingame:t}},enumerable:!0,configurable:!0}),e.prototype.Clear=function(){this.m_mapAccountToExtra.clear()},e.prototype.AddMember=function(e,t){void 0===t&&(t=void 0),this.HasMember(e)||this.m_mapAccountToExtra.set(e,t)},e.prototype.RemoveMember=function(e){this.HasMember(e)&&this.m_mapAccountToExtra.delete(e)},e.prototype.GetExtra=function(e){return this.m_mapAccountToExtra.get(e)},e.prototype.HasMember=function(e){return this.m_mapAccountToExtra.has(e)},Object.defineProperty(e.prototype,"member_list",{get:function(){var e=this.member_list_unsorted.slice();return e.sort(Nc.DefaultFriendSortComparator),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"member_list_unsorted",{get:function(){var e=[];return this.m_mapAccountToExtra.forEach(function(t,i){e.push(wd.FriendStore.GetPlayer(i))}),e},enumerable:!0,configurable:!0}),si.c([_i.computed],e.prototype,"unfiltered_count",null),si.c([_i.computed],e.prototype,"member_counts",null),si.c([_i.action],e.prototype,"Clear",null),si.c([_i.action],e.prototype,"AddMember",null),si.c([_i.action],e.prototype,"RemoveMember",null),si.c([_i.computed],e.prototype,"member_list",null),si.c([_i.computed],e.prototype,"member_list_unsorted",null),e}(),al=604800,sl=function(){function e(){var e=this;this.m_bEmoticonListRequested=!1,this.m_bInitialized=!1,this.m_rgEmoticons=[],this.m_rgRecentEmoticons=void 0,this.fnRecvEmoticonList=s(9331,zi,function(t){e.m_rgEmoticons=[],e.m_rgRecentEmoticons=void 0,e.m_rtMostRecentEmoticon=void 0;for(var i=e.m_CMInterface.GetServerRTime32()-al,n=0,r=t.Body().emoticons();n<r.length;n++){var o=r[n],a=o.name(),s={name:a.substr(1,a.length-2)},c=s.name.toLowerCase();c!=s.name&&(s.name_normalized=c),o.time_last_used()&&(s.last_used=o.time_last_used()),o.use_count()&&(s.use_count=o.use_count()),s.last_used||o.time_received()&&o.time_received()>i&&(s.time_received=o.time_received(),(!e.m_rtMostRecentEmoticon||s.time_received>e.m_rtMostRecentEmoticon)&&(e.m_rtMostRecentEmoticon=s.time_received)),e.m_rgEmoticons.push(s)}e.m_bInitialized=!0,e.m_bEmoticonListRequested=!1})}return e.prototype.Init=function(e){this.m_CMInterface=e},e.GetEmoticonURL=function(e,t){return t?ai.a.COMMUNITY_CDN_URL+"economy/emoticonlarge/"+e:ai.a.COMMUNITY_CDN_URL+"economy/emoticon/"+e},e.GetEmoticonReplaceRegex=function(){return e.sm_EmoticonRegex},e.prototype.SearchEmoticons=function(e,t,i){void 0===t&&(t=25),void 0===i&&(i=!0),this.m_bInitialized||this.RequestEmoticonList();var n,r=[];e=e.toLocaleLowerCase();for(var o=0,a=this.recent_emoticons;o<a.length;o++){var s=a[o],c=s.name_normalized||s.name;if((!e||i&&c.startsWith(e)||!i&&-1!==c.indexOf(e))&&(r.push({name:s.name,recent:!0,new:!(s.last_used||!s.time_received)}),n||(n=new Set),n.add(s.name),r.length>=t))break}if(r.length<t)for(var l=0,u=this.m_rgEmoticons;l<u.length;l++){var s=u[l],c=s.name_normalized||s.name,d=!e||i&&c.startsWith(e)||!i&&-1!==c.indexOf(e);if(d&&(!n||!n.has(s.name))&&(r.push({name:s.name,recent:!1,new:!1}),r.length>=t))break}return r},Object.defineProperty(e.prototype,"is_initialized",{get:function(){return this.m_bInitialized},enumerable:!0,configurable:!0}),e.prototype.GetTimeReceivedNewestEmoticon=function(){return this.m_bInitialized||this.RequestEmoticonList(),this.m_rtMostRecentEmoticon},Object.defineProperty(e.prototype,"emoticon_list",{get:function(){return this.m_bInitialized||this.RequestEmoticonList(),this.m_rgEmoticons},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recent_emoticons",{get:function(){return void 0===this.m_rgRecentEmoticons&&this.BuildRecentEmoticonList(),this.m_rgRecentEmoticons},enumerable:!0,configurable:!0}),e.prototype.TrackEmoticonUsage=function(e,t){if(this.m_bInitialized){for(var i,n=new Map,r=/\[emoticon\]([^[]*)/g;i=r.exec(e);){var o=n.get(i[1])||0;n.set(i[1],o+1)}var a=!1;if(n.size){if(void 0!==this.m_rgRecentEmoticons)for(var s=0,c=this.m_rgRecentEmoticons;s<c.length;s++){var l=c[s];n.has(l.name)&&(l.last_used=t,l.use_count+=n.get(l.name),n.delete(l.name),l.time_received&&(a=!0,delete l.time_received))}if(n.size)for(var u=0,d=this.m_rgEmoticons;u<d.length;u++){var l=d[u];n.has(l.name)&&(l.last_used=t,l.use_count+=n.get(l.name),delete l.time_received,void 0!==this.m_rgRecentEmoticons&&this.m_rgRecentEmoticons.push(l))}if(void 0!==this.m_rgRecentEmoticons&&(this.SortRecentEmoticons(),a)){this.m_rtMostRecentEmoticon=void 0;for(var p=0,m=this.m_rgRecentEmoticons;p<m.length;p++){var l=m[p];!l.last_used&&l.time_received&&(!this.m_rtMostRecentEmoticon||l.time_received>this.m_rtMostRecentEmoticon)&&(this.m_rtMostRecentEmoticon=l.time_received)}}}}},e.prototype.RequestEmoticonList=function(){var e=this;!this.m_bEmoticonListRequested&&this.m_CMInterface&&(this.m_bEmoticonListRequested=!0,this.m_CMInterface.RunWhenLoggedOn(function(){var t=fi.Init(xi,9330);e.m_CMInterface.Send(t)}))},e.prototype.BuildRecentEmoticonList=function(){this.m_rgRecentEmoticons=[];for(var e=this.m_CMInterface.GetServerRTime32()-al,t=0,i=this.m_rgEmoticons;t<i.length;t++){var n=i[t];(n.last_used||n.time_received&&n.time_received>e)&&this.m_rgRecentEmoticons.push(n)}this.SortRecentEmoticons()},e.prototype.SortRecentEmoticons=function(){this.m_rgRecentEmoticons.sort(function(e,t){return(t.last_used||t.time_received)-(e.last_used||e.time_received)}),this.m_rgRecentEmoticons=this.m_rgRecentEmoticons.slice(0,50)},e.sm_EmoticonRegex=new RegExp("ː([a-zA-Z0-9_\\-]+)ː","g"),si.c([_i.observable],e.prototype,"m_bInitialized",void 0),si.c([_i.observable],e.prototype,"m_rtMostRecentEmoticon",void 0),si.c([_i.action],e.prototype,"TrackEmoticonUsage",null),e}(),cl=function(){function e(e){var t=this;this.m_rgFriendChats=[],this.m_rtLastSessionUpdate=0,this.m_mapLastChatTimeByFriend=_i.observable.map(),this.m_mapRecentIgnoreTimeBeforeByFriend=_i.observable.map(),this.m_IncomingFriendMessageHandler=l(dc.IncomingMessageHandler,function(e){var i=new hi.a(e.Body().steamid_friend()),n=wd.FriendStore.GetPlayerIfCached(i.GetAccountID());if(!n){if(e.Body().low_priority())return 41;n=wd.FriendStore.GetPlayer(i.GetAccountID())}if(1==e.Body().chat_entry_type()){var r=e.Body().local_echo(),o=n.is_blocked||e.Body().low_priority()&&!n.is_friend,a=r?t.m_ChatStore.FriendStore.self.persona.m_steamid:i,s=t.GetFriendChat(i.GetAccountID(),!o),c=s.GetVisibilityState();!(o||r||wd.FriendStore.BIsInvisibleMode()||wd.FriendStore.GetUserDoNotDisturb())&&wd.UIStore.ShowAndOrActivateChat(wd.GetDefaultBrowserContext(),s,!1),s&&(n.is_friend||0!=c||s.SetShowNonFriendWarning(!0),s.AddNewChatMsgAndNotify(a.GetAccountID(),e.Body().rtime32_server_timestamp(),e.Body().ordinal(),e.Body().message(),e.Body().message_no_bbcode())),t.m_mapLastChatTimeByFriend.set(i.GetAccountID(),e.Body().rtime32_server_timestamp())}else if(2==e.Body().chat_entry_type()&&!e.Body().local_echo()){var s=t.GetFriendChat(i.GetAccountID(),!1);s&&s.OnFriendTypingNotification()}return 1}),this.m_AckMessageEchoHandler=l(dc.NotifyAckMessageEchoHandler,function(e){var i=new hi.a(e.Body().steamid_partner()),n=t.GetFriendChat(i.GetAccountID());return n&&n.UpdateLastAckTimeFromServer(e.Body().timestamp()),1}),this.m_ChatStore=e}return e.prototype.GetFriendChat=function(e,t){void 0===t&&(t=!0);for(var i=0,n=this.m_rgFriendChats;i<n.length;i++){var r=n[i];if(r.accountid_partner==e)return r}if(!t)return null;var o=new ll(e,this.m_ChatStore,this.m_ChatStore.CMInterface);return this.m_rgFriendChats.push(o),o},e.prototype.OnLogon=function(){var e=this;this.LoadFriendMessageSessions(),wd.SettingsStore.GetObjectFromLocalStorageWhenReady("FriendRecentChats").then(function(t){e.m_mapRecentIgnoreTimeBeforeByFriend.clear();for(var i in t.ignoretimes){var n=parseInt(i,10);e.m_mapRecentIgnoreTimeBeforeByFriend.set(n,t.ignoretimes[i])}})},e.prototype.RestoreStatePostDisconnect=function(){this.LoadFriendMessageSessions();for(var e=0,t=this.m_rgFriendChats;e<t.length;e++)t[e].OnConnectionRestored()},e.prototype.GetServiceTransport=function(){return this.m_ChatStore.CMInterface.GetServiceTransport()},e.prototype.LoadFriendMessageSessions=function(){var e=this,t=fi.Init(ic);t.Body().set_lastmessage_since(this.m_rtLastSessionUpdate),zs.GetActiveMessageSessions(this.GetServiceTransport(),t).then(function(t){e.m_rtLastSessionUpdate=t.Body().timestamp();for(var i=0,n=t.Body().message_sessions();i<n.length;i++){var r=n[i];if(e.m_mapLastChatTimeByFriend.set(r.accountid_friend(),r.last_view()),r.unread_message_count()>0){var o=e.GetFriendChat(r.accountid_friend(),!0);o&&o.InitUnreadMessageCountFromServer(r.unread_message_count(),r.last_view(),r.last_message())}}})},e.prototype.GetFriendsWithUnreadMessages=function(e){for(var t=[],i=0,n=this.m_rgFriendChats;i<n.length;i++){var r=n[i];r.unread_message_count>0&&(!e||r.GetVisibilityState(e)<2)&&!r.is_blocked_friend&&t.push(r)}return t.sort(function(e,t){return e.time_last_message-t.time_last_message}),t},e.prototype.GetUnfilteredFriendsWithUnreadMessages=function(){for(var e=[],t=0,i=this.m_rgFriendChats;t<i.length;t++){var n=i[t];n.unread_message_count>0&&!n.is_blocked_friend&&e.push(n)}return e.sort(function(e,t){return e.time_last_message-t.time_last_message}),e},Object.defineProperty(e.prototype,"RecentChatCutoffDuration",{get:function(){return 3600},enumerable:!0,configurable:!0}),e.prototype.ClearRecentChatsForFriend=function(e){this.m_mapRecentIgnoreTimeBeforeByFriend.set(e,wd.GetServerRTime32()),this.WriteRecentChatsPrefs()},e.prototype.WriteRecentChatsPrefs=function(){var e=this,t=wd.GetServerRTime32()-this.RecentChatCutoffDuration;this.m_mapRecentIgnoreTimeBeforeByFriend.forEach(function(i,n){i<t&&e.m_mapRecentIgnoreTimeBeforeByFriend.delete(n)}),wd.SettingsStore.StoreObjectInLocalStorage("FriendRecentChats",{ignoretimes:this.m_mapRecentIgnoreTimeBeforeByFriend.toJS()})},Object.defineProperty(e.prototype,"GetRecentlyChattingFriends",{get:function(){var e=this,t=[],i=wd.GetServerRTime32()-this.RecentChatCutoffDuration;return this.m_mapLastChatTimeByFriend.forEach(function(n,r){if(n>=i){var o=e.m_mapRecentIgnoreTimeBeforeByFriend.get(r);if(!o||o<n){var a=wd.FriendStore.GetFriend(r);a&&t.push(a)}}}),t.sort(Nc.DefaultFriendSortComparator),t},enumerable:!0,configurable:!0}),e.prototype.GetUnreadFriendMessageCount=function(e){for(var t=0,i=0,n=this.m_rgFriendChats;i<n.length;i++){var r=n[i];r.unread_message_count>0&&(!e||r.GetVisibilityState(e)<2)&&!r.is_blocked_friend&&(t+=r.unread_message_count)}return t},e.prototype.GetFriendLastChatTime=function(e){return this.m_mapLastChatTimeByFriend.get(e)||0},si.c([_i.observable],e.prototype,"m_rgFriendChats",void 0),si.c([_i.action],e.prototype,"ClearRecentChatsForFriend",null),si.c([_i.computed],e.prototype,"GetRecentlyChattingFriends",null),e}(),ll=function(e){function t(t,i,n){var r=e.call(this,i.FriendStore,i,n)||this;return r.m_iClearFriendIsTypingInterval=void 0,r.m_bFriendIsTyping=!1,r.m_ChatMsgTradeRequest=null,r.m_bNeedsNonFriendWarning=!1,r.m_unAccountIDFriend=t,r}return si.d(t,e),Object.defineProperty(t.prototype,"unread_message_count",{get:function(){var e=this.m_ChatStore.VoiceChat.BPartnerHasRequestedAndIsInOneOnOneChat(this.m_unAccountIDFriend);return e=e&&!this.BVoiceActive(),this.m_cUnreadChatMessages+(e?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VoiceChatStore",{get:function(){return this.m_ChatStore.VoiceChat},enumerable:!0,configurable:!0}),t.prototype.SetShowNonFriendWarning=function(e){this.m_bNeedsNonFriendWarning=e},t.prototype.GetShowNonFriendWarning=function(){var e=this.m_bNeedsNonFriendWarning,t=e&&!wd.FriendStore.BApprovedNonFriendMessages(this.accountid_partner);if(t){var i=wd.FriendStore.GetFriend(this.accountid_partner);t=!i||!i.is_friend}return t},t.prototype.GetMessagesFromTimeRange=function(e,t,i,n,r){var o=this,a=fi.Init($s);return a.Body().set_steamid1(this.m_CMInterface.steamid.ConvertTo64BitString()),a.Body().set_steamid2(hi.a.InitFromAccountID(this.m_unAccountIDFriend).ConvertTo64BitString()),a.Body().set_count(os.k_LoadMoreMessageCount),a.Body().set_bbcode_format(!0),a.Body().set_rtime32_start_time(e),a.Body().set_start_ordinal(t),a.Body().set_time_last(i),a.Body().set_ordinal_last(n),console.log(this.unique_id+" friend trying to load "+r+" messages in range "+e+":"+t+" - "+i+":"+n),zs.GetRecentMessages(this.m_ChatStore.CMInterface.GetServiceTransport(),a).then(function(e){var t=e.GetEResult();if(1!=t)throw t;return{messages:o.GetMessagesFromResponse(e),moreAvailable:e.Body().more_available()}})},t.prototype.GetMessagesFromResponse=function(e){for(var t=e.Body().messages(),i=[],n=t.length-1;n>=0;n--){var r=t[n],o=r.accountid();i.push(new Za(o,r.timestamp(),r.ordinal(),r.message()||""))}return i},t.prototype.GetBBCodeParser=function(){return this.m_ChatStore.FriendChatBBCodeParser},t.prototype.AckChatMsgOnServer=function(e){var t=fi.Init(cc);t.Body().set_steamid_partner(hi.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),t.Body().set_timestamp(e),zs.AckMessage(this.m_CMInterface.GetServiceTransport(),t)},Object.defineProperty(t.prototype,"name",{get:function(){var e=this.chat_partner;return e?e.display_name:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unique_id",{get:function(){return"f"+this.accountid_partner},enumerable:!0,configurable:!0}),t.prototype.BIsVoiceAllowed=function(){return!!this.chat_partner.is_friend&&0!=this.chat_partner.persona.m_ePersonaState&&!!this.chat_partner.is_online_in_beta},t.prototype.GetVoiceNotAllowedReason=function(){return this.chat_partner.is_friend?0==this.chat_partner.persona.m_ePersonaState?Object(ua.b)("#VoiceChat_Unavailable_NotOnline",this.chat_partner.display_name):this.chat_partner.is_online_in_beta?null:Object(ua.b)("#VoiceChat_Unavailable_NotInBeta",this.chat_partner.display_name):Object(ua.b)("#VoiceChat_Unavailable_NotFriend",this.chat_partner.display_name)},t.prototype.ToggleVoiceChat=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(this.accountid_partner)?this.ChatStore.VoiceChat.OnUserEndVoiceChat():this.ChatStore.VoiceChat.InitiateFriendChat(this.accountid_partner),!0},t.prototype.BVoiceActive=function(){return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(this.accountid_partner)},Object.defineProperty(t.prototype,"is_blocked_friend",{get:function(){return this.chat_partner.is_blocked},enumerable:!0,configurable:!0}),t.prototype.SendChatMessage=function(e){var t=this;if(!this.m_CMInterface.logged_on)return!1;this.chat_partner.is_friend||wd.FriendStore.SetApprovedNonFriendMessages(this.chat_partner.accountid);var i=Ta.EscapeBBCode(e),n=this.AppendLocalEchoChatMsg(i),r=fi.Init(oc);return r.Body().set_chat_entry_type(1),r.Body().set_message(i),r.Body().set_steamid(hi.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),r.Body().set_contains_bbcode(!0),zs.SendMessage(this.m_CMInterface.GetServiceTransport(),r).then(function(e){if(1==e.GetEResult()){n.rtTimestamp=e.Body().server_timestamp(),n.unOrdinal=e.Body().ordinal(),t.OnUserChatEcho(n.rtTimestamp,n.unOrdinal);var i=e.Body().modified_message();i&&Object(_i.runInAction)(function(){t.m_ChatStore.EmoticonStore.TrackEmoticonUsage(i,n.rtTimestamp),n.strMessage=i}),n.OnServerAcknowledged()}else switch(e.GetEResult()){case 15:n.eErrorSending=Ya.NotFriends;break;case 84:n.eErrorSending=Ya.RateLimitExceeded;break;default:n.eErrorSending=Ya.Generic}}).catch(function(){n.eErrorSending=Ya.Generic}),this.m_tsLastSentTypingNotification=void 0,!0},t.prototype.OnTyping=function(){if(!this.m_tsLastSentTypingNotification||performance.now()-this.m_tsLastSentTypingNotification>1e4){this.m_tsLastSentTypingNotification=performance.now();var e=fi.Init(oc);e.Body().set_chat_entry_type(2),e.Body().set_steamid(hi.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString()),zs.SendMessage(this.m_CMInterface.GetServiceTransport(),e)}},Object.defineProperty(t.prototype,"is_friend_typing",{get:function(){return this.m_bFriendIsTyping},enumerable:!0,configurable:!0}),t.prototype.OnFriendTypingNotification=function(){var e=this;this.m_bFriendIsTyping||(this.m_bFriendIsTyping=!0),void 0!==this.m_iClearFriendIsTypingInterval&&window.clearInterval(this.m_iClearFriendIsTypingInterval),this.m_iClearFriendIsTypingInterval=window.setTimeout(function(){e.m_iClearFriendIsTypingInterval=void 0,e.ClearFriendIsTypingState()},11e3)},t.prototype.PlayFriendMessageSound=function(){wd.FriendStore.GetUserDoNotDisturb()||wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/ui_steam_message_old.m4a")},t.prototype.OnReceivedNewMessage=function(e,t,i,n){if(!e.BIsLocalEcho()&&e.unAccountID!=this.self.accountid){if(this.ClearFriendIsTypingState(),t<2&&(this.is_blocked_friend||wd.FriendStore.BIsInvisibleMode()))return;if(wd.NotificationManager.BNotificationsPermitted()&&this.chat_partner.BShowMessageNotification()&&t<4&&!wd.FriendStore.GetUserDoNotDisturb()){var r={title:Object(ua.b)("#Friend_Chat_SentMessage",this.chat_partner.display_name),body:i,tag:"message_"+this.chat_partner.accountid,steamid:this.chat_partner.persona.m_steamid.ConvertTo64BitString()};r=this.DecorateNotification(e,r,i,n),r.body&&(this.GetShowNonFriendWarning()&&wd.SettingsStore.BClientHasFeatureOrOnWeb("NonFriendMessageHandling")&&(r.body=""),wd.NotificationManager.DisplayNotificationFromFriend(this.chat_partner,r))}this.chat_partner.BPlayMessageSound()&&t<4&&this.PlayFriendMessageSound(),0==wd.SettingsStore.FriendsSettings.nChatFlashMode&&t<4&&!wd.FriendStore.GetUserDoNotDisturb()&&wd.UIStore.FlashChatWindow(this)}},t.prototype.ClearFriendIsTypingState=function(){void 0!==this.m_iClearFriendIsTypingInterval&&(window.clearInterval(this.m_iClearFriendIsTypingInterval),this.m_iClearFriendIsTypingInterval=void 0),this.m_bFriendIsTyping=!1},t.prototype.PopulateCommitFileUploadFormData=function(e){e.set("friend_steamid",hi.a.InitFromAccountID(this.accountid_partner).ConvertTo64BitString())},t.prototype.GetMember=function(e){return e==this.m_unAccountIDFriend?this.chat_partner:e==this.self.accountid?this.self:void 0},Object.defineProperty(t.prototype,"accountid_partner",{get:function(){return this.m_unAccountIDFriend},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chat_partner",{get:function(){return wd.FriendStore.GetPlayer(this.m_unAccountIDFriend)},enumerable:!0,configurable:!0}),t.prototype.AddNewTradeRequestAndNotify=function(e,t,i,n){var r=new es(e,t,i,n);this.InternalAppendChatMsg(r),this.m_ChatMsgTradeRequest=r;var o=Object(ua.b)("#ChatRoom_TradeRequest_Recipient_Pending",this.chat_partner.display_name);this.CheckShouldNotify(r,o,o)},t.prototype.GetTradeRequest=function(){return this.m_ChatMsgTradeRequest},t.prototype.CancelTradeRequest=function(e){this.m_ChatMsgTradeRequest&&this.m_ChatMsgTradeRequest.MarkAsCancelled(e)},t.prototype.MarkTradeRequestDeclined=function(){this.m_ChatMsgTradeRequest&&this.m_ChatMsgTradeRequest.MarkAsDeclined()},t.prototype.MarkTradeRequestAccepted=function(e){this.m_ChatMsgTradeRequest&&this.m_ChatMsgTradeRequest.MarkAsAccepted(e)},t.prototype.ViewerNeedsApproval=function(e){var t='[broadcastviewrequest requestid="'+e+'"][/broadcastviewrequest]';this.InternalAppendChatMsg(new Za(this.chat_partner.accountid,wd.GetServerRTime32(),0,t)),wd.FriendStore.GetUserDoNotDisturb()||wd.NotificationManager.DisplayNotificationFromFriend(this.chat_partner,{title:"",body:Object(ua.b)("#Chat_BroadcastViewRequest_Notification"),tag:"message_"+this.chat_partner.accountid,steamid:this.chat_partner.persona.m_steamid.ConvertTo64BitString()})},si.c([_i.observable],t.prototype,"m_bFriendIsTyping",void 0),si.c([_i.observable],t.prototype,"m_bNeedsNonFriendWarning",void 0),si.c([_i.action],t.prototype,"ToggleVoiceChat",null),si.c([_i.action],t.prototype,"SendChatMessage",null),si.c([yn.a,Object(Dc.a)(100)],t.prototype,"PlayFriendMessageSound",null),si.c([_i.action],t.prototype,"ClearFriendIsTypingState",null),si.c([_i.action],t.prototype,"AddNewTradeRequestAndNotify",null),si.c([_i.action],t.prototype,"CancelTradeRequest",null),si.c([_i.action],t.prototype,"MarkTradeRequestDeclined",null),si.c([_i.action],t.prototype,"MarkTradeRequestAccepted",null),si.c([_i.action],t.prototype,"ViewerNeedsApproval",null),t}(os),ul=!1,dl=function(){function e(e){var t=this;this.LOG=Da.create(function(){return"chatstore"},ul),this.m_EmoticonStore=new sl,this.m_FriendChatStore=new cl(this),this.m_InviteStore=new fa(this),this.m_GameInviteStore=new va,this.m_ChatRoomGroupDisplayPrefs=new rl,this.m_EmbedStore=new Ca,this.m_mapChatGroups=_i.observable.map(),this.m_mapActiveChatGroupsToRefCount=_i.observable.map(),this.m_mapClanChatsByClanID=new Map,this.m_bReceivedChatGroupList=!1,this.m_bReadyToRender=!1,this.m_bSendingActiveGroups=!1,this.m_bSendActiveGroupsQueued=!1,this.m_IncomingChatRoomMessageHandler=l(aa.NotifyIncomingChatMessageHandler,function(e){var i=e.Body(),n=t.FindChatRoom(i.chat_group_id(),i.chat_id());if(!n)return 2;var r=new hi.a(i.steamid_sender());if(0!=(i.server_message().message()||0))n.AddNewServerMsg(r.GetAccountID(),i.timestamp(),i.ordinal(),i.server_message().message(),i.server_message().string_param(),i.server_message().accountid_param());else{var o=i.mentions(),a=null;o&&(a={},o.mention_all()&&(a.mention_all=!0),o.mention_here()&&(a.mention_here=!0),o.mention_accountids()&&-1!==o.mention_accountids().indexOf(t.m_FriendStore.self.accountid)&&(a.mention_user=!0)),n.AddNewChatMsgAndNotify(r.GetAccountID(),i.timestamp(),i.ordinal(),i.message(),i.message_no_bbcode(),a)}return 1}),this.m_ChatMessageModifiedHandler=l(aa.NotifyChatMessageModifiedHandler,function(e){var i=e.Body(),n=t.FindChatRoom(i.chat_group_id(),i.chat_id());if(!n)return 2;for(var r=[],o=0,a=e.Body().messages();o<a.length;o++){var s=a[o];s.deleted&&r.push({rtTimestamp:s.server_timestamp(),unOrdinal:s.ordinal()})}return n.UpdateChatMessageDeletedState(r,Wa.Deleting),1}),this.m_IncomingChatRoomHeaderStateChangeHandler=c(aa.NotifyChatRoomHeaderStateChangeHandler,function(e){var i=e.Body().header_state().chat_group_id(),n=t.m_mapChatGroups.get(i);return n&&n.UpdateChatRoomHeaderState(e.Body().header_state()),1}),this.m_IncomingStateChangeHandler=c(aa.NotifyMemberStateChangeHandler,function(e){var i=e.Body().chat_group_id(),n=t.m_mapChatGroups.get(i);return n&&n.OnUserStateChange(e.Body().member(),e.Body().change()),1}),this.m_IncomingChatRoomGroupRoomsChangeHandler=c(aa.NotifyChatRoomGroupRoomsChangeHandler,function(e){var i=e.Body(),n=t.m_mapChatGroups.get(i.chat_group_id());return n&&n.OnRoomStateChange(i),1}),this.m_IncomingChatGroupUserStateChangedHandler=c(aa.NotifyChatGroupUserStateChangedHandler,function(e){var i=e.Body(),n=i.chat_group_id(),r=i.user_action();switch(r){case 1:var o=t.AddJoinedChatRoomGroup(i.group_summary(),i.user_chat_group_state());wd.UIStore.ShowAndOrActivateChatRoomGroup(Md,o,!1);break;case 2:case 3:case 10:wd.VoiceStore.GetActiveChatRoomGroupID()==n&&wd.VoiceStore.OnUserEndVoiceChat();var o=t.GetChatRoomGroup(n),a=o?o.name:void 0;t.RemoveChatRoomGroup(n),a&&(3==r?wd.ShowAlert(Object(ua.b)("#Alert_YouWereKickedTitle"),Object(ua.b)("#Alert_YouWereKickedDescription",a)):10==r&&wd.ShowAlert(Object(ua.b)("#Alert_YouWereBannedTitle"),Object(ua.b)("#Alert_YouWereBannedDescription",a)));break;case 7:case 0:var o=t.GetChatRoomGroup(n);AssertMsg(o,"Got state change for ChatRoomGroup we don't know about"),o&&o.UpdateUserState(i.user_chat_group_state());break;case 4:break;default:AssertMsg(!1,"Don't know how to handle state change of type "+g(r)+" ")}return 1}),this.m_AckChatMessageEchoHandler=l(aa.NotifyAckChatMessageEchoHandler,function(e){var i=e.Body().chat_group_id(),n=e.Body().chat_id(),r=e.Body().timestamp(),o=t.GetChatRoomGroup(i);if(!o)return 2;if(n){var a=o.GetChatRoom(n);if(!a)return 11;a.UpdateLastAckTimeFromServer(r)}else o.UpdateLastAckTimeFromServer(r);return 1}),this.m_FriendStore=e}return e.prototype.Init=function(e,t){var i=this;this.m_CMInterface=e,this.m_EmoticonStore.Init(e),this.m_VoiceChat=t,this.m_ChatRoomBBCodeParser=new Ta(wd.GetChatRoomBBCodeDictionary(),ai.a.IN_MOBILE?void 0:Ea),this.m_FriendChatBBCodeParser=new Ta(wd.GetFriendChatBBCodeDictionary(),ai.a.IN_MOBILE?void 0:Ea),this.m_NotificationBBCodeParser=new Oa(wd.GetNotificationBBCodeDictionary()),this.m_ChatRoomGroupDisplayPrefs.Init(wd.SettingsStore),this.m_EmbedStore.Init();var n=!1;return this.m_CMInterface.AddOnLogonCallback(function(){i.LoadMyChatRooms(),n?i.RestoreStatePostDisconnect():(i.m_FriendChatStore.OnLogon(),n=!0),i.m_GameInviteStore.Init()},102),new Promise(function(e,t){i.m_fnOnReadyToRender=e})},e.prototype.SetReadyToRender=function(){this.m_bReadyToRender||(this.m_bReadyToRender=!0,this.m_fnOnReadyToRender&&(this.m_fnOnReadyToRender(),this.m_fnOnReadyToRender=void 0))},e.prototype.RestoreStatePostDisconnect=function(){this.m_FriendChatStore.RestoreStatePostDisconnect(),this.m_mapChatGroups.forEach(function(e){return e.OnConnectionRestored()}),this.SendActiveChatRoomGroupsToServer()},e.prototype.LoadMyChatRooms=function(){var e=this,t=!1,i=fi.Init(Xr);ra.GetMyChatRoomGroups(this.m_CMInterface.GetServiceTransport(),i).then(function(i){Object(_i.runInAction)(function(){1!=i.GetEResult()&&(t=!0);for(var n=i.Body().chat_room_groups(),r=0,o=n;r<o.length;r++){var a=o[r],s=a.group_summary().chat_group_id();if(s){var c=e.m_mapChatGroups.get(s);c||(c=new el(e,s),e.m_mapChatGroups.set(s,c)),c.SetInitialGroupState(a.group_summary()),c.UpdateUserState(a.user_chat_group_state()),e.OnGroupAdded(c),c.BHasEverBeenAcked()||wd.UIStore.ShowUnackedGroup(c)}else t=!0}e.BuildInitialRecentGroupList(),e.SetReadyToRender(),e.m_bReceivedChatGroupList=!0})}).catch(function(t){console.error("Failed to load chat rooms from server",t),e.SetReadyToRender()})},e.prototype.OnGroupAdded=function(e){e.GetClanID()&&(this.m_mapClanChatsByClanID.set(e.GetClanID(),e.GetGroupID()),this.m_FriendStore.ClanStore.SetClanChatGroupID(e.GetClanID(),e.GetGroupID()))},e.prototype.BuildInitialRecentGroupList=function(){var e=[],t=wd.GetServerRTime32()-1296e3;this.m_mapChatGroups.forEach(function(i){for(var n=0,r=i.chatRoomList;n<r.length;n++){var o=r[n],a=o.time_last_ack;if(a&&a>t){e.push(i);break}}})},e.prototype.OnChatRoomActivated=function(e){e.GetGroup().OnActivate()},e.prototype.JoinAndShowChatRoomGroup=function(e,t,i){var n=this.GetChatRoomGroup(t);n&&n.BIsCurrentUserAMember()?wd.UIStore.ShowAndOrActivateChatRoomGroup(e,n,i):this.m_InviteStore.JoinChatGroup(t,null,e)},e.prototype.AddCreatedChatRoomGroup=function(e,t,i,n){if(!this.m_mapChatGroups.has(t)){var r=new el(this,t);this.m_mapChatGroups.set(t,r),r.UpdateGroupState(i),r.UpdateUserState(n),this.OnGroupAdded(r),wd.UIStore.ShowAndOrActivateChatRoomGroup(e,r,!0)}},e.prototype.AddKnownChatRoomGroup=function(e,t){var i=e.chat_group_id();if(this.m_mapChatGroups.has(i)){var n=this.m_mapChatGroups.get(i);n.SetInitialGroupState(e)}else{var n=new el(this,i);this.m_mapChatGroups.set(i,n),n.SetInitialGroupState(e),t&&n.UpdateUserState(t),this.OnGroupAdded(n)}},e.prototype.AddJoinedChatRoomGroup=function(e,t){var i=t.chat_group_id(),n=this.m_mapChatGroups.get(i);return n||(n=new el(this,i),this.m_mapChatGroups.set(i,n)),e instanceof Pr?n.UpdateGroupState(e):n.SetInitialGroupState(e),this.OnGroupAdded(n),n.UpdateUserState(t),n},e.prototype.RemoveChatRoomGroup=function(e){var t=this.m_mapChatGroups.get(e);if(t){var i=this.m_mapChatGroups.get(e);i&&wd.UIStore.CloseTabByID(i.unique_id),this.GetRefCountActiveChatRoomGroup(e)<=0&&t.UnloadAndResetGroupState()}},e.prototype.FindChatRoom_Deprecated=function(e){var t=null;return this.m_mapChatGroups.forEach(function(i){var n=i.GetChatRoom(e);n&&(t=n)}),t},e.prototype.FindChatRoom=function(e,t){var i=this.m_mapChatGroups.get(e);return i?i.GetChatRoom(t):null},Object.defineProperty(e.prototype,"chat_group_list_ready",{get:function(){return this.m_bReceivedChatGroupList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VoiceChat",{get:function(){return this.m_VoiceChat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomBBCodeParser",{get:function(){return this.m_ChatRoomBBCodeParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatBBCodeParser",{get:function(){return this.m_FriendChatBBCodeParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NotificationBBCodeParser",{get:function(){return this.m_NotificationBBCodeParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendChatStore",{get:function(){return this.m_FriendChatStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EmoticonStore",{get:function(){return this.m_EmoticonStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InviteStore",{get:function(){return this.m_InviteStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameInviteStore",{get:function(){return this.m_GameInviteStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EmbedStore",{get:function(){return this.m_EmbedStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ChatRoomGroupDisplayPrefs",{get:function(){return this.m_ChatRoomGroupDisplayPrefs},enumerable:!0,configurable:!0}),e.prototype.GetActiveVoiceChat=function(){var e=this.m_VoiceChat.GetActiveVoiceChatID();if(""!=e){var t=this.FindChatRoom_Deprecated(e);if(t)return t}else{var i=this.m_VoiceChat.GetActiveOneOnOneVoiceChatAccountID();if(0!=i){var t=this.GetFriendChat(i,!1);if(t)return t}}},e.prototype.GetActiveVoiceChannelName=function(){var e=this.GetActiveVoiceChat();return void 0!=e?e.name:""},e.prototype.GetFriendChat=function(e,t){return void 0===t&&(t=!0),e==this.FriendStore.self.accountid?null:this.m_FriendChatStore.GetFriendChat(e,t)},e.prototype.GetChatRoomGroup=function(e){return this.m_mapChatGroups.get(e)},Object.defineProperty(e.prototype,"currentChatRoomGroups",{get:function(){return S(this.m_mapChatGroups,function(e){return e.BIsCurrentUserAMember()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClanChatRooms",{get:function(){return S(this.m_mapChatGroups,function(e){return e.BIsClanChatRoom()})},enumerable:!0,configurable:!0}),e.prototype.GetRefCountActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===t&&(t=0),t},e.prototype.IncRefActiveChatRoomGroup=function(e,t){var i=this.m_mapActiveChatGroupsToRefCount.get(e);return void 0===i&&(i=0),i+=1,this.m_mapActiveChatGroupsToRefCount.set(e,i),1==i&&t&&this.SendActiveChatRoomGroupsToServer(),i},e.prototype.DecRefActiveChatRoomGroup=function(e){var t=this.m_mapActiveChatGroupsToRefCount.get(e),i=void 0!==t&&t>0;if(AssertMsg(i,"Attempting to DecRef a Chat Group that has no existing references. Doing nothing."),!i)return 0;if((t-=1)<=0){this.m_mapActiveChatGroupsToRefCount.delete(e);var n=this.m_mapChatGroups.get(e);n&&n.UnloadActiveGroupState(),this.SendActiveChatRoomGroupsToServer()}else this.m_mapActiveChatGroupsToRefCount.set(e,t);return t},e.prototype.OnRestorePopupsComplete=function(){this.m_mapActiveChatGroupsToRefCount.size>0&&this.SendActiveChatRoomGroupsToServer()},e.prototype.SendActiveChatRoomGroupsToServer=function(){var e=this;if(this.m_bSendingActiveGroups)return void(this.m_bSendActiveGroupsQueued=!0);var t=[],i=fi.Init(Po);this.m_mapActiveChatGroupsToRefCount.forEach(function(n,r){if(AssertMsg(n>0,"SendActiveChatRoomGroupsToServer found invalid ref count for chat group."),!(n<=0)){i.Body().add_chat_group_ids(r);var o=e.m_mapChatGroups.get(r);o&&o.readyToRender||i.Body().add_chat_groups_data_requested(r),o&&o.BIsClanChatRoom()&&t.push(o.GetClanID())}});var n=void 0,r=function(i){ai.a.IN_CLIENT&&SteamClient.WebChat.SetActiveClanChatIDs(t),i&&void 0!==n&&ClearBackgroundTimeout(n),e.m_bSendingActiveGroups=!1,e.m_bSendActiveGroupsQueued&&e.SendActiveChatRoomGroupsToServer()};this.m_bSendActiveGroupsQueued=!1,this.m_bSendingActiveGroups=!0,ra.SetSessionActiveChatRoomGroups(this.m_CMInterface.GetServiceTransport(),i).then(function(i){if(1==i.GetEResult()){for(var n=!1,o=0,a=i.Body().chat_states();o<a.length;o++){var s=a[o],c=e.m_mapChatGroups.get(s.header_state().chat_group_id());if(c)try{c.UpdateGroupState(s),c.BIsClanChatRoom()&&-1===t.indexOf(c.GetClanID())&&t.push(c.GetClanID())}catch(e){n=!0,console.error("exception processing group update for group "+c.GetGroupID(),e)}}r(!n)}}),n=SetBackgroundTimeout(function(){e.m_bSendActiveGroupsQueued=!0,r(!0)},1e4)},e.prototype.CreateChatRoomGroup=function(e,t,i,n){var r=this;void 0===n&&(n={});var o=n.unBroadcastAccountId,a=fi.Init(Jn);a.Body().set_name(t);for(var s=0,c=i;s<c.length;s++){var l=c[s];a.Body().add_steamid_invitees(l)}return o&&a.Body().set_watching_broadcast_accountid(o),ra.CreateChatRoomGroup(this.m_CMInterface.GetServiceTransport(),a).then(function(t){var i=t.GetEResult();if(1!=i)throw i;return r.AddCreatedChatRoomGroup(e,t.Body().chat_group_id(),t.Body().state(),t.Body().user_chat_state()),t.Body().chat_group_id()})},e.prototype.LeaveChatRoomGroup=function(e,t){var i=this,n=fi.Init(io);return n.Body().set_chat_group_id(t),ra.LeaveChatRoomGroup(this.m_CMInterface.GetServiceTransport(),n).then(function(e){var n=e.GetEResult();if(1!=n)throw n;i.RemoveChatRoomGroup(t)})},e.prototype.FindNamelessChatGroupWithFriends=function(e){if(0==e.length)return null;for(var t=e.map(function(e){return new hi.a(e).GetAccountID()}),i=Array.from(this.m_mapChatGroups.values()),n=0,r=i;n<r.length;n++){var o=r[n];if(!o.IsNamedGroupChat()&&o.BRoomContainsJustTheseFriendsAndSelf(t))return o}return null},e.prototype.FillInChatUsabilityMetrics=function(e){e.metrics().set_group_chat_count(_n.b(Array.from(this.m_mapChatGroups.values()),function(e){return e.BIsCurrentUserAMember()})),this.m_ChatRoomGroupDisplayPrefs.FillInChatUsabilityMetrics(e)},si.c([_i.observable],e.prototype,"m_bReceivedChatGroupList",void 0),si.c([Q],e.prototype,"JoinAndShowChatRoomGroup",null),si.c([_i.action],e.prototype,"AddCreatedChatRoomGroup",null),si.c([_i.action],e.prototype,"AddKnownChatRoomGroup",null),si.c([_i.action],e.prototype,"AddJoinedChatRoomGroup",null),si.c([_i.action],e.prototype,"RemoveChatRoomGroup",null),si.c([_i.computed],e.prototype,"currentChatRoomGroups",null),si.c([_i.computed],e.prototype,"ClanChatRooms",null),e}(),pl=function(e){function t(t,i){var n=e.call(this)||this;return n.m_rgOnChatFrameChangedCallbacks=[],n.m_bScrolledToBottom=!0,n.m_scrollTop=-1,n.m_scrollHeight=-1,n.m_clientHeight=1,n.m_textEntryFocusCallbacks=new vn,n.m_fileUploadImageWidth=0,n.m_fileUploadImageHeight=0,n.m_tabset=t,n.m_chat=i,n.m_tabset&&n.m_chat.AddChatView(n),n.m_strTextEntry="",n}return si.d(t,e),t.prototype.GetTabName=function(){return this.m_chat.name},t.prototype.GetUniqueID=function(){return this.m_chat.unique_id},t.prototype.OnTabFocus=function(){this.OnFocus()},t.prototype.InternalOnTabActivate=function(){this.OnActivate()},t.prototype.OnTabDeactivate=function(){this.OnDeactivate()},t.prototype.OnTabClosed=function(){this.OnViewClosed()},t.prototype.IsChatRoom=function(){return this.m_chat instanceof Xc},t.prototype.IsFriendChat=function(){return this.m_chat instanceof ll},t.prototype.IsVoiceActive=function(){return this.m_chat.BVoiceActive()},t.prototype.GetUnreadMessageCount=function(){return this.m_chat.unread_message_count},t.prototype.IsTabForChat=function(e){return this.m_chat==e},t.prototype.GetChatView=function(){return this},t.prototype.OnViewClosed=function(){this.m_chat.RemoveChatView(this)},Object.defineProperty(t.prototype,"chat",{get:function(){return this.m_chat},enumerable:!0,configurable:!0}),t.prototype.BIsInBrowserContext=function(e){var t=this.m_tabset.GetBrowserContext();return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},t.prototype.GetVisibilityState=function(){if(!this.m_tabset||!this.m_tabset.is_popup_active)return 0;var e=void 0;return this.m_tabset.activeTab&&(e=this.m_tabset.activeTab.GetChatView()),e==this&&this.m_tabset.is_popup_visible?this.m_tabset.is_popup_focused?this.m_bScrolledToBottom&&!wd.IdleTracker.BIsUserIdle(60)?4:3:2:1},Object.defineProperty(t.prototype,"lastScrollHeight",{get:function(){return this.m_scrollHeight},set:function(e){this.m_scrollHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastScrollTop",{get:function(){return this.m_scrollTop},set:function(e){this.m_scrollTop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastClientHeight",{get:function(){return this.m_clientHeight},set:function(e){this.m_clientHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"is_scrolled_to_bottom",{get:function(){return this.m_bScrolledToBottom},set:function(e){!this.m_bScrolledToBottom&&e&&this.m_chat.OnActivate(),this.m_bScrolledToBottom=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text_entry",{get:function(){return this.m_strTextEntry},set:function(e){this.m_strTextEntry=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"file_upload",{get:function(){return this.m_fileUpload},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"file_upload_data_url",{get:function(){return this.m_fileUploadDataURL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"file_image_width",{get:function(){return this.m_fileUploadImageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"file_image_height",{get:function(){return this.m_fileUploadImageHeight},enumerable:!0,configurable:!0}),t.prototype.CheckActivationAndNotifyChat=function(){this.m_bScrolledToBottom&&this.m_chat.OnActivate()},t.prototype.OnActivate=function(){this.CheckActivationAndNotifyChat(),this.FocusTextInput()},t.prototype.OnDeactivate=function(){this.m_chat.OnDeactivate()},t.prototype.OnFocus=function(){this.CheckActivationAndNotifyChat()},t.prototype.FocusTextInput=function(){this.m_textEntryFocusCallbacks.Dispatch()},t.prototype.AddOnChatFrameChangedCallback=function(e){this.m_rgOnChatFrameChangedCallbacks.push(e)},t.prototype.RemoveOnChatFrameChangedCallback=function(e){_n.c(this.m_rgOnChatFrameChangedCallbacks,e)},t.prototype.OnChatFrameChanged=function(){for(var e=0,t=this.m_rgOnChatFrameChangedCallbacks;e<t.length;e++)(0,t[e])()},t.prototype.StripExifMetadata=function(e,t){var i=new DataView(e),n=0,r=0,o=[],a=0;if(65496==i.getUint16(n)){n+=2;var s=i.getUint16(n);for(n+=2;n<i.byteLength&&n<131072;){if(65505==s)o[a]={recess:r,offset:n-2},r=n+i.getUint16(n),a++;else if(65498==s)break;n+=i.getUint16(n),s=i.getUint16(n),n+=2}if(o.length>0){var c=new Array;return o.forEach(function(t){c.push(e.slice(t.recess,t.offset))},this),c.push(e.slice(r)),new Blob(c,{type:t})}}return null},t.prototype.SetFileToUpload=function(e){var t=this;if(!e)return this.m_fileUpload=null,this.m_fileUploadDataURL=null,this.m_fileUploadImageWidth=0,void(this.m_fileUploadImageHeight=0);if(e.size>10485760)return void this.chat.SetUploadFileError(3,Object(ua.b)("#Chat_Settings_Error_ChatFileTooLarge",e.name));var i=["jpg","jpeg","png","gif","webm","mpg","mp4","mpeg","ogv"],n=e.name.split(".").pop().toLowerCase();if(-1==i.indexOf(n))return void this.chat.SetUploadFileError(4,Object(ua.b)("#Chat_Settings_Error_ChatFileTypeNotSupported",e.name));var r=new FileReader;r.onload=function(i){var n=e,o=r.result,a=t.StripExifMetadata(o,e.type);if(a){var s=a;s.lastModifiedDate=e.lastModifiedDate,s.name=e.name,n=s}if(t.m_fileUpload=n,t.m_fileUploadDataURL=URL.createObjectURL(n),t.m_fileUploadImageWidth=0,t.m_fileUploadImageHeight=0,0==e.type.indexOf("image")){var c=new Image;c.src=t.m_fileUploadDataURL,c.onload=function(e){t.m_fileUploadImageWidth=c.width,t.m_fileUploadImageHeight=c.height}}},r.readAsArrayBuffer(e)},t.prototype.UploadFile=function(e){var t=this.m_fileUpload,i=this.m_fileUploadImageWidth,n=this.m_fileUploadImageHeight;this.chat.BeginFileUpload(t,i,n,e),this.SetFileToUpload(null)},t.prototype.RegisterForTextEntryFocus=function(e){return this.m_textEntryFocusCallbacks.Register(e)},t.prototype.BVoiceActive=function(){return this.m_chat.BVoiceActive()},si.c([_i.observable],t.prototype,"m_bScrolledToBottom",void 0),si.c([_i.observable],t.prototype,"m_fileUpload",void 0),si.c([_i.observable],t.prototype,"m_fileUploadDataURL",void 0),t}(da),ml=function(){function e(){this.enabled=!1,this.locked=!1,this.features=0,this.allowallapps=!1,this.baselist=void 0,this.customlist=void 0}return si.c([_i.observable],e.prototype,"enabled",void 0),si.c([_i.observable],e.prototype,"locked",void 0),si.c([_i.observable],e.prototype,"features",void 0),si.c([_i.observable],e.prototype,"allowallapps",void 0),si.c([_i.observable],e.prototype,"baselist",void 0),si.c([_i.observable],e.prototype,"customlist",void 0),e}(),hl=function(){function e(){this.broadcastid="0",this.nViewers=0,this.nRequests=0,this.bIsBroadcasting=!1,this.bIsRecordingDesktop=!1,this.bBroadcastCapable=!1}return e}(),gl=function(){function e(){this.nKeyCode=0,this.bAltKey=!1,this.bShiftKey=!1,this.bCtrlKey=!1,this.bMetaKey=!1}return e}(),fl=function(){function e(){this.InGameOverlayScreenshotHotKey=new gl,this.InGameOverlayShortcutKey=new gl}return e}();!function(e){function t(){return{bNotifications_ShowIngame:!0,bNotifications_ShowOnline:!1,bNotifications_ShowMessage:!0,bNotifications_EventsAndAnnouncements:!0,bSounds_PlayIngame:!1,bSounds_PlayOnline:!1,bSounds_PlayMessage:!0,bSounds_EventsAndAnnouncements:!1,bAlwaysNewChatWindow:!1,bForceAlphabeticFriendSorting:!1,nChatFlashMode:0,bRememberOpenChats:!0,bCompactQuickAccess:!1,bCompactFriendsList:!1,bNotifications_ShowChatRoomNotification:!0,bSounds_PlayChatRoomNotification:!0,bHideOfflineFriendsInTagGroups:!1,bHideCategorizedFriends:!1,bCategorizeInGameFriendsByGame:!0,nChatFontSize:2,b24HourClock:!1,bDoNotDisturbMode:!1,bDisableEmbedInlining:!1,bSignIntoFriends:!0,featuresEnabled:{}}}var i=function(){function e(){}return e}();e.FriendsSettings=i,e.DefaultFriendsSettings=t}(fl||(fl={}));var _l;!function(e){e[e.k_EClientUINotificationGroupChatMessage=1]="k_EClientUINotificationGroupChatMessage",e[e.k_EClientUINotificationFriendChatMessage=2]="k_EClientUINotificationFriendChatMessage"}(_l||(_l={}));var yl;!function(e){e[e.k_EComputerActiveStateInvalid=0]="k_EComputerActiveStateInvalid",e[e.k_EComputerActiveStateActive=1]="k_EComputerActiveStateActive",e[e.k_EComputerActiveStateIdle=2]="k_EComputerActiveStateIdle"}(yl||(yl={}));var vl,bl=function(){function e(){}return e}();!function(e){e[e.k_EPending=0]="k_EPending",e[e.k_EAccepted=1]="k_EAccepted",e[e.k_ERejected=2]="k_ERejected"}(vl||(vl={}));var Cl,Sl=function(){function e(){this.m_nMinBufferTime=0,this.m_bHasProtectedRepresentations=!1,this.m_dtAvailabilityStartTime=null,this.m_dtPublishTime=null,this.m_nMinimumUpdatePeriod=0,this.m_nTimeShiftBufferDepth=0,this.m_dtMediaPresentationDuration=null,this.m_strBaseURL="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_rgPeriods=null,this.m_tsLiveContentStart=0}return e.prototype.GetType=function(){return this.m_strType},e.prototype.GetMinimumUpdatePeriod=function(){return this.m_nMinimumUpdatePeriod},e.prototype.GetAvailabilityStartTime=function(){return this.m_dtAvailabilityStartTime},e.prototype.GetPeriods=function(){return this.m_rgPeriods},e.prototype.GetBaseURL=function(){return this.m_strBaseURL},e.prototype.GetLiveContentStart=function(){return this.m_tsLiveContentStart},e.prototype.GetTimeShiftBufferDepth=function(){return this.m_nTimeShiftBufferDepth},e.prototype.GetMinBufferTime=function(){return this.m_nMinBufferTime},e.prototype.GetAdaptationByTrackID=function(e){if(!this.m_rgPeriods||0==this.m_rgPeriods.length)return null;for(var t=this.m_rgPeriods[0],i=0,n=t.rgAdaptationSets;i<n.length;i++){var r=n[i];if(e==r.strID)return r}return null},e.prototype.GetVideoAdaption=function(){for(var e=this.m_rgPeriods[0],t=0,i=e.rgAdaptationSets;t<i.length;t++){var n=i[t];if(n.bContainsVideo)return n}return null},e.prototype.GetPeriodDuration=function(e){return e<this.m_rgPeriods.length&&this.m_rgPeriods[e].nDuration?this.m_rgPeriods[e].nDuration:0},e.prototype.GetLowestRepresentation=function(e){var t=this.GetAdaptationByTrackID(e);if(!t)return null;for(var i=t.rgRepresentations[0],n=0,r=t.rgRepresentations;n<r.length;n++){var o=r[n];o.nBandwidth<i.nBandwidth&&(i=o)}return i},e.prototype.GetStatsLink=function(){return this.m_strStatsLink},e.prototype.GetStalledLink=function(){return this.m_strStalledLink},e.prototype.GetEventLink=function(){return this.m_strEventLogLink},e.prototype.SetLiveContentStart=function(e){this.m_tsLiveContentStart=e},e.prototype.ParseRepresentation=function(e,t){var i=t,n={strID:L(e,"id"),strMimeType:L(e,"mimeType"),strCodecs:L(e,"codecs"),nBandwidth:N(e,"bandwidth")};if(i.bContainsVideo){if(n.nWidth=N(e,"width"),n.nHeight=N(e,"height"),n.nFrameRate=N(e,"frameRate"),!(n.strID&&n.strMimeType&&n.strCodecs&&n.nBandwidth))return B("MPD - Representation Video Data Missing"),null}else if(i.bContainsAudio){n.nAudioSamplingRate=N(e,"audioSamplingRate");var r=T(e,"AudioChannelConfiguration");if(r&&(n.nAudioChannels=N(r,"value")),n.nAudioChannels||(n.nAudioChannels=2),!(n.strID&&n.strMimeType&&n.strCodecs&&n.nBandwidth&&n.nAudioSamplingRate&&n.nAudioChannels))return B("MPD - Representation Audio Data Missing"),null}return n},e.prototype.BParse=function(e){var t=new DOMParser,i=t.parseFromString(e,"application/xml"),n=E(i,"MPD");if(!n)return!1;var r=n.getAttribute("type");if(this.m_nMinBufferTime=D(n,"minBufferTime"),this.m_bHasProtectedRepresentations=!1,"dynamic"==r){if(this.m_strType="dynamic",this.m_dtAvailabilityStartTime=k(n,"availabilityStartTime"),this.m_dtPublishTime=k(n,"publishTime"),this.m_nMinimumUpdatePeriod=D(n,"minimumUpdatePeriod"),this.m_nTimeShiftBufferDepth=D(n,"timeShiftBufferDepth"),!(this.m_dtAvailabilityStartTime&&this.m_dtPublishTime&&this.m_nMinimumUpdatePeriod&&this.m_nMinBufferTime&&this.m_nTimeShiftBufferDepth))return!1}else{if("static"!=r)return B("MPD - Unknown type"),!1;if(this.m_strType="static",this.m_dtMediaPresentationDuration=k(n,"mediaPresentationDuration"),!this.m_nMinBufferTime||!this.m_dtMediaPresentationDuration)return B("MPD - Missing Buffer Time or Presentation Duration"),!1}var o=T(n,"BASEURL");o&&(this.m_strBaseURL=o.textContent);var a=T(n,"Analytics");a&&(this.m_strStatsLink=L(a,"statslink"),this.m_strStalledLink=L(a,"stalledlink"),this.m_strEventLogLink=L(a,"eventlink"));var s=i.getElementsByTagName("Period");if(0==s.length)return!1;var c=s[0],l={strID:L(c,"id"),nStart:D(c,"start"),nDuration:D(c,"duration"),rgAdaptationSets:[]};if(!l.strID||null===l.nStart)return B("MPD - Missing Period Information."),!1;this.m_rgPeriods=[],this.m_rgPeriods.push(l);for(var u=c.getElementsByTagName("AdaptationSet"),d=0;d<u.length;d++){var p=u[d],m=L(p,"description"),h=L(p,"lang"),g={bSegmentAlignment:G(p,"segmentAlignment"),bIsClosedCaption:"text/vtt"==L(p,"mimeType"),strLanguage:L(p,"lang"),bContainsVideo:!1,bContainsAudio:!1,bContainsGame:!1,strDescription:m||h,strForceSub:L(p,"forceSub"),strID:L(p,"id"),rgRoles:[],rgRepresentations:[],thumbnails:null,segmentTemplate:null};if(l.rgAdaptationSets.push(g),g.bIsClosedCaption){g.rgRoles.push("subtitle");for(var f=p.getElementsByTagName("Role"),_=0;_<f.length;_++){var y=L(f[_],"value");y&&g.rgRoles.push(y)}for(var v=p.getElementsByTagName("Representation"),b=0;b<v.length;b++){var C=v[b],S={strID:L(C,"id"),nBandwidth:N(C,"bandwidth"),strClosedCaptionFile:""},M=T(C,"BaseURL"),F=M?M.textContent:"";if(!F)return B("Closed Caption File has no BaseURL for (id): "+S.strID),!1;S.strClosedCaptionFile=this.m_strBaseURL+A(F,S.strID,0),g.rgRepresentations.push(S)}}else{if(!g.bSegmentAlignment)return B("MPD - Segment Alignment Missing"),!1;for(var w=p.getElementsByTagName("ContentComponent"),O=0;O<w.length;O++){var I=L(w[O],"contentType");"video"==I&&(g.bContainsVideo=!0),"audio"==I&&(g.bContainsAudio=!0),"game"==I&&(g.bContainsGame=!0)}if(g.bContainsVideo){var R=T(p,"Thumbnails");if(R){var P=N(R,"sheet"),x=N(R,"period");g.thumbnails={nPeriod:x,strTemplate:L(R,"template"),nSheet:P,nSheetSeconds:P*x}}}for(var z=p.getElementsByTagName("Role"),O=0;O<z.length;O++){var y=L(z[O],"value");y&&g.rgRoles.push(y)}var U=p.getElementsByTagName("SegmentTemplate");if(0==U.length)return B("MPD - Segment Template Missing"),!1;var V=U[0];g.segmentTemplate={nTimeScale:N(V,"timescale"),nDuration:N(V,"duration"),nStartNumber:N(V,"startNumber"),strMedia:L(V,"media"),strInitialization:""};var j=g.segmentTemplate;if(g.bContainsGame?j.strInitialization=j.strMedia:j.strInitialization=L(V,"initialization"),!(j.nTimeScale&&j.nDuration&&j.nStartNumber&&j.strMedia&&j.strInitialization))return B("MPD - Segment Template Data Missing"),!1;for(var W=p.getElementsByTagName("Representation"),O=0;O<W.length;O++){var C=W[O],S=this.ParseRepresentation(C,g);if(!S)return!1;g.rgRepresentations.push(S)}}}return!0},e.prototype.BUpdate=function(e){var t=new DOMParser,i=t.parseFromString(e,"application/xml"),n=E(i,"MPD");if(!n)return!1;if("dynamic"==this.m_strType){var r=i.getElementsByTagName("Period");if(0==r.length)return!1;for(var o=r[0],a=o.getElementsByTagName("AdaptationSet"),s=0;s<a.length;s++){var c=a[s],l=L(c,"id"),u=this.GetAdaptationByTrackID(l);if(u){var d=c.getElementsByTagName("Representation");if(d.length>1)for(var p=0;p<d.length;p++){for(var m=d[p],h=this.ParseRepresentation(m,u),g=!0,f=0,_=u.rgRepresentations;f<_.length;f++){var y=_[f];if(h.strID==y.strID){g=!1;break}}g&&u.rgRepresentations.push(h)}break}}}var v=T(n,"Analytics");return v&&(this.m_strStatsLink=L(v,"statslink"),this.m_strStalledLink=L(v,"stalledlink"),this.m_strEventLogLink=L(v,"eventlink")),!0},e}();!function(e){e[e.None=0]="None",e[e.Append=1]="Append",e[e.Remove=2]="Remove"}(Cl||(Cl={}));var Ml,Fl=function(){function e(e,t,i,n){this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_sourceBuffer=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_eBufferUpdate=Cl.None,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bRemoveBufferState=!1,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_schNextDownload=new bn,this.m_xhrDownload=null,this.m_listeners=new Cn,this.m_rgDownloadLog=[],this.m_nCurDownloadProgress=0,this.m_nCurDownloadBitrate=0,this.m_nNumConsecutiveDownloadGones=0,this.m_statsGameData=null,this.m_callbacks=e,this.m_mpd=t,this.m_adaptation=i,this.m_stats=n}return e.prototype.SetMediaSource=function(e){this.m_mediaSource=e},e.prototype.SetBufferMS=function(e){this.m_nTrackBufferMS=e},e.prototype.GetRepresentationsCount=function(){return this.m_adaptation.rgRepresentations.length},e.prototype.GetRepresentationByID=function(e){for(var t=0,i=this.m_adaptation.rgRepresentations;t<i.length;t++){var n=i[t];if(n.strID==e)return n}return null},e.prototype.GetNumConsecutiveDownloadGones=function(){return this.m_nNumConsecutiveDownloadGones},e.prototype.ContainsVideo=function(){return this.m_adaptation.bContainsVideo},e.prototype.ContainsAudio=function(){return this.m_adaptation.bContainsAudio},e.prototype.ContainsGame=function(){return this.m_adaptation.bContainsGame},e.prototype.GetAdaptation=function(){return this.m_adaptation},e.prototype.GetBandwidthRequired=function(){return this.m_representation.nBandwidth},e.prototype.BIsCurrentRepresentation=function(e){return e&&e.strID==this.m_representation.strID},e.prototype.GetSourceBufferTimeRanges=function(){return this.m_sourceBuffer.buffered},e.prototype.GetEstimatedAudioRate=function(){return this.m_representation&&this.ContainsAudio()?this.m_representation.nBandwidth:0},e.prototype.GetDebugName=function(){var e=[];return this.ContainsVideo()?e.push("Video"):this.ContainsAudio()?e.push("Audio"):this.ContainsGame()&&e.push("Game"),e.join(" & ")},e.prototype.GetMaxSegment=function(){var e=this.m_mpd.GetPeriodDuration(0);return e?z(this.m_adaptation,1e3*e):Number.MAX_VALUE},e.prototype.GetAmountBufferedInPlayerMS=function(e){if(!this.m_sourceBuffer)return 0;var t=this.m_sourceBuffer.buffered;if(0==t.length)return 0;e<t.start(0)&&(e=t.start(0)),e>t.end(0)&&(e=t.end(0));var i=t.end(0)-e;return Math.floor(1e3*i)},e.prototype.GetAmountBufferedMS=function(e){for(var t=this.GetAmountBufferedInPlayerMS(e),i=0,n=this.m_rgBufferedSegments;i<n.length;i++)t+=n[i].nDurationMS;return t},e.prototype.ChangeRepresentation=function(e){if(this.m_adaptation.rgRepresentations.indexOf(e)<0)return null;if(this.m_representation==e)return null;if(this.ContainsVideo()&&B(this.GetDebugName()+" changing representation to "+(e.nHeight||0)+"p at "+Math.ceil(e.nBandwidth/1e3)+"KB for segment "+this.m_nNextSegment),this.m_representation=e,this.m_bNeedInitSegment=!this.ContainsGame(),this.m_stats.SetRepresentation(e),this.ContainsGame())return e;if(!this.m_sourceBuffer){var t=e.strMimeType+";codecs="+e.strCodecs;this.m_sourceBuffer=this.m_mediaSource.addSourceBuffer(t),B(t),this.m_listeners.AddEventListener(this.m_sourceBuffer,"updateend",this.OnSourceBufferUpdateEnd),this.m_listeners.AddEventListener(this.m_sourceBuffer,"error",this.OnSourceBufferError),this.m_listeners.AddEventListener(this.m_sourceBuffer,"abort",this.OnSourceBufferAbort)}return e},e.prototype.Close=function(){this.m_listeners.Unregister(),this.m_sourceBuffer=null,this.ForceStopDownloads(),this.m_eBufferUpdate=Cl.None,this.m_bRemoveBufferState=!1,this.m_callbacks=null,this.m_mpd=null,this.m_adaptation=null,this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_representation=null,this.m_rgBufferedSegments=[],this.m_bNeedInitSegment=!0,this.m_nNextSegment=0,this.m_bSeekInProgress=!1,this.m_tsLastBufferRemove=0,this.m_rgDownloadLog=[],this.m_stats=null,this.m_rgGameDataFrames=[],this.m_statsGameData=null},e.prototype.GetActiveDownloads=function(){return this.m_xhrDownload?1:0},e.prototype.GetActiveDownloadProgress=function(){return this.GetActiveDownloads()?this.m_nCurDownloadProgress:0},e.prototype.OnSourceBufferUpdateEnd=function(e){var t=this.m_callbacks.GetCurrentPlayTime(),i=this.GetAmountBufferedInPlayerMS(t);B(this.GetDebugName()+" OnSourceBufferUpdateEnd: [playback="+t+"][buffered="+i+"][start="+this.GetBufferedStart()+"][end="+this.GetBufferedEnd()+"]");var n=this.m_eBufferUpdate;this.m_eBufferUpdate=Cl.None,n==Cl.Append&&this.m_callbacks.OnSegmentDownloaded(this),this.m_bSeekInProgress&&n==Cl.Remove&&!this.m_bRemoveBufferState&&this.ContinueSeek(),this.UpdateBuffer()},e.prototype.OnSourceBufferError=function(e){console.log("OnSourceBufferError")},e.prototype.OnSourceBufferAbort=function(e){console.log("OnSourceBufferAbort")},e.prototype.ScheduleNextDownload=function(){if(this.m_bNeedInitSegment)return void this.DownloadNextSegment();if(this.m_schNextDownload.Cancel(),this.m_xhrDownload)return void B(this.GetDebugName()+" ScheduleNextDownload - download already going");if(this.m_bSeekInProgress)return void B(this.GetDebugName()+" ScheduleNextDownload - seeking");var e=this.m_callbacks.GetCurrentPlayTime(),t=this.m_callbacks.GetPlaybackRate(),i=j(this.m_mpd,this.m_adaptation,this.m_nNextSegment);if(i>0)return B(this.GetDebugName()+" ScheduleNextDownload - segment in future"),void this.m_schNextDownload.Schedule(i,this.ScheduleNextDownload);var n=this.GetAmountBufferedMS(e);if(t>1&&(n/=t),n<4e4)return B(this.GetDebugName()+" ScheduleNextDownload - download now"),void this.DownloadNextSegment();var r=1.1*x(this.m_adaptation),o=this.GetAmountBufferedInPlayerMS(this.m_callbacks.GetCurrentPlayTime());B(this.GetDebugName()+" ScheduleNextDownload - buffered, schedule later [sleep="+r+"ms][buffer="+o+"]"),this.m_schNextDownload.Schedule(r,this.ScheduleNextDownload)},e.prototype.DownloadNextSegment=function(){this.m_schNextDownload.Cancel();var e="",t=0;this.m_bNeedInitSegment?(this.m_bNeedInitSegment=!1,e=U(this.m_mpd.GetBaseURL(),this.m_adaptation,this.m_representation),t=0):(e=V(this.m_mpd.GetBaseURL(),this.m_adaptation,this.m_representation,this.m_nNextSegment),t=x(this.m_adaptation),this.m_nNextSegment++),this.DownloadSegment(this.m_representation.strID,e,t)},e.prototype.DownloadSegment=function(e,t,i,n){return void 0===n&&(n=performance.now()),si.b(this,void 0,void 0,function(){var r,o,a,s,c,l,u,d,p,m,h,g,f,_,y,v=this;return si.e(this,function(b){switch(b.label){case 0:AssertMsg(null===this.m_xhrDownload,"Trying to download another segment while a download is already in flight"),this.m_schNextDownload.Cancel(),B("Downloading: "+t),r=null,o=performance.now(),a=Qi.a.CancelToken.source(),b.label=1;case 1:return b.trys.push([1,3,,4]),this.m_nCurDownloadProgress=0,this.m_xhrDownload=a,s={cancelToken:this.m_xhrDownload.token,timeout:15e3,responseType:"arraybuffer",onDownloadProgress:function(e){v.m_nCurDownloadProgress=e.loaded/e.total,v.m_nCurDownloadBitrate=8*e.loaded*1e3/Math.max(1,performance.now()-o)}},this.ContainsGame()&&(s.responseType="json"),[4,Qi.a.get(t,s)];case 2:return r=b.sent(),[3,4];case 3:return c=b.sent(),B("Failed to download segment: "+c),r=c.response,[3,4];case 4:if(!this.m_xhrDownload||this.m_xhrDownload!=a)return[2];if(l=performance.now(),u=Math.floor(performance.now()-o),d=r?r.status:0,this.m_xhrDownload=null,this.m_bSeekInProgress)return this.ContinueSeek(),[2];if(!r||200!=r.status)return this.ContainsGame()?(this.ScheduleNextDownload(),[2]):(this.m_stats.LogSegmentDownloadFailure(u,r?r.status:444),l-n>9e3?(B(this.GetDebugName()+" HTTP download failed.. stopping loader: "+(l-n)+"ms"),this.DownloadFailed(),[2]):410==d?(this.m_nNumConsecutiveDownloadGones+=1,B(this.GetDebugName()+" HTTP download gone.. informing the player: "+(l-n)+"ms"),this.DownloadGone(),[2]):(this.m_schNextDownload.Schedule(500,function(){return v.DownloadSegment(e,t,i,n)}),[2]));if(this.m_nNumConsecutiveDownloadGones=0,this.ContainsGame()){for(h=r.data,this.m_rgGameDataFrames||(this.m_rgGameDataFrames=[]),g=Number.MIN_VALUE,this.m_rgGameDataFrames.length&&(g=this.m_rgGameDataFrames[this.m_rgGameDataFrames.length-1].pts),f=0,_=h.frames;f<_.length;f++)y=_[f],y.pts&&y.gamedata?y.pts<=g?B("Invalide game pts"):(this.m_rgGameDataFrames.push(y),g=y.pts):B("Invalide game data");this.TrimGameDataIfNecessary(),this.m_statsGameData={nAppID:h.appid,ulBroadcastRelayID:h.broadcastrelayid,nSegmentID:h.segmentid}}else p=new Uint8Array(r.data),this.m_rgBufferedSegments.push({nDurationMS:i,data:p,representationStrID:e}),this.LogDownload(o,p.length),this.UpdateBuffer(),m=p.length/1e3,B("HTTP "+d+" ("+u+"ms, "+Math.floor(m)+"k): "+t);return this.ScheduleNextDownload(),[2]}})})},e.prototype.DownloadFailed=function(){this.m_callbacks.OnSegmentDownloadFailed(this)},e.prototype.DownloadGone=function(){this.m_callbacks.OnSegmentDownloadGone(this)},e.prototype.TrimGameDataIfNecessary=function(){var e=this.m_callbacks.GetCurrentPlayTime()-40,t={pts:1e3*e,gamedata:null},i=function(e,t){return e.pts-t.pts},n=_n.g(this.m_rgGameDataFrames,t,i);n>=0&&(this.m_rgGameDataFrames=this.m_rgGameDataFrames.slice(n+1))},e.prototype.UpdateBuffer=function(){if(this.m_eBufferUpdate==Cl.None){if(this.m_bRemoveBufferState)return void this.RemoveAllBuffers();if(!this.m_sourceBuffer)return void B("No source buffer?");if(this.m_rgBufferedSegments.length>0)try{this.m_eBufferUpdate=Cl.Append;var e=this.m_rgBufferedSegments[0];this.m_sourceBuffer.appendBuffer(e.data),this.m_rgBufferedSegments.splice(0,1)}catch(e){"QuotaExceededError"===e.name?(this.m_eBufferUpdate=Cl.None,B(this.GetDebugName()+" Buffer - QuotaExceededError")):B(this.GetDebugName()+" Buffer - Exception",e)}else{var t=performance.now();if(!this.m_bSeekInProgress&&t-this.m_tsLastBufferRemove>1e4){var i=this.GetBufferedStart(),n=this.m_callbacks.GetCurrentPlayTime()-40;if(i<n){var r=Math.min(this.GetBufferedEnd(),n);return void(r!=i&&(this.m_eBufferUpdate=Cl.Remove,this.m_sourceBuffer.remove(i,r),this.m_tsLastBufferRemove=t))}}}}},e.prototype.RemoveAllBuffers=function(){this.m_rgBufferedSegments=[];var e=0;if(this.m_sourceBuffer)for(var t=this.m_sourceBuffer.buffered,i=0;i<t.length;i++)e<t.end(i)&&(e=t.end(i));this.m_bRemoveBufferState=!1,this.m_eBufferUpdate=Cl.Remove,0!=e?this.m_sourceBuffer.remove(0,e+1):this.OnSourceBufferUpdateEnd(null)},e.prototype.GetBufferedStart=function(){return this.m_sourceBuffer&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.start(0):0},e.prototype.GetBufferedEnd=function(){return this.m_sourceBuffer&&0!=this.m_sourceBuffer.buffered.length?this.m_sourceBuffer.buffered.end(0):0},e.prototype.ForceStopDownloads=function(){this.m_schNextDownload.Cancel(),this.m_xhrDownload&&(this.m_xhrDownload.cancel(),this.m_xhrDownload=null)},e.prototype.ForceRestartDownload=function(){this.ForceStopDownloads(),this.ScheduleNextDownload()},e.prototype.Seek=function(e){var t=this.GetBufferedStart(),i=this.GetBufferedEnd(),n=e<t||e>i;if(0==t&&0==i&&(n=!0),B(this.GetDebugName()+" making an "+(n?"unbuffered":"buffered")+" seek to "+e),!this.m_bSeekInProgress&&!n&&!this.m_bNeedInitSegment)return void this.ScheduleNextDownload();this.m_bSeekInProgress=!0,this.ForceStopDownloads();var r=z(this.m_adaptation,1e3*e);if(this.m_nNextSegment=F(r,this.m_adaptation.segmentTemplate.nStartNumber,this.GetMaxSegment()-1),B("Seek To Next Segment: "+this.m_nNextSegment+" at approx. "+O((this.m_nNextSegment-1)*x(this.m_adaptation)/1e3)+" seconds."),this.ContainsGame())return this.m_bSeekInProgress=!1,this.m_rgGameDataFrames=[],void this.ScheduleNextDownload();this.m_bRemoveBufferState=!0,this.UpdateBuffer()},e.prototype.ContinueSeek=function(){this.m_bSeekInProgress&&(this.m_eBufferUpdate==Cl.Remove||this.m_bRemoveBufferState||(this.m_bSeekInProgress=!1,this.ScheduleNextDownload()))},e.prototype.BHasEnoughBuffered=function(e){return!this.m_bSeekInProgress&&(!!this.ContainsGame()||this.GetAmountBufferedInPlayerMS(e)>=this.m_nTrackBufferMS||this.m_nNextSegment>this.GetMaxSegment())},e.prototype.LogDownload=function(e,t){this.m_rgDownloadLog.length>=4&&this.m_rgDownloadLog.shift();var i=performance.now()-e;i<=0||(this.m_rgDownloadLog.push({cubData:t,nDownloadMS:i}),this.m_stats.LogDownload(t,i))},e.prototype.GetDownloadHistory=function(){return this.m_rgDownloadLog},e.prototype.GetAvgDownloadRate=function(){for(var e=0,t=0,i=0,n=this.m_rgDownloadLog;i<n.length;i++){var r=n[i];e+=r.nDownloadMS,t+=r.cubData}return e<=0?this.m_nCurDownloadBitrate&&this.GetActiveDownloads()>0?this.m_nCurDownloadBitrate:0:8*t*1e3/e},e.prototype.GetGameDataFrames=function(){return this.m_rgGameDataFrames},e.prototype.GetLatestGameDataFrameAppID=function(){return this.m_statsGameData&&this.m_statsGameData.nAppID?this.m_statsGameData.nAppID:0},si.c([yn.a],e.prototype,"OnSourceBufferUpdateEnd",null),si.c([yn.a],e.prototype,"OnSourceBufferError",null),si.c([yn.a],e.prototype,"OnSourceBufferAbort",null),si.c([yn.a],e.prototype,"ScheduleNextDownload",null),si.c([yn.a],e.prototype,"DownloadNextSegment",null),si.c([yn.a],e.prototype,"DownloadFailed",null),si.c([yn.a],e.prototype,"DownloadGone",null),e}(),wl=-1,Bl=function(){function e(){this.playback_speed=1}return e}(),Ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t}(Bl),Il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t}(Bl),Rl=function(){function e(){this.m_steamIDBroadcast="",this.m_steamIDViewer="",this.m_broadcastID="",this.m_ulViewerToken="",this.m_host="",this.m_strStatsLink="",this.m_strStalledLink="",this.m_strEventLogLink="",this.m_allTimeSnapshot=new El(0),this.m_rgSnapShots=new Array(new El(0)),this.m_videoResolution=0,this.m_audioRate=0,this.m_audioChannel=0,this.m_frameRate=0,this.m_strBufferingVideoResolution="0x0@0",this.m_nPlaybackVideoResolution=0,this.m_strPlaybackVideoResolution="0x0",this.m_htmlVideoResolution=0,this.m_strHtmlVideoDisplay="",this.m_nAudioBandwidth=0,this.m_nVideoBandwidth=0,this.m_nBandwidthRequired=0,this.m_nCurBandwidthVideo=0,this.m_nAudioBufferedMS=0,this.m_nVideoBufferedMS=0,this.m_nActiveDownloads=0,this.m_nVideoDownloadProgress=0,this.m_videoBufferedRanges=null,this.m_audioBufferedRanges=null,this.m_nSegmentDurationMS=0,this.m_nPlaybackRate=0,this.m_nTimeToFirstFrameMS=wl,this.m_fpsMonitor=new kl}return e.prototype.GetBytesReceivedToDisplay=function(){return W(this.m_allTimeSnapshot.m_nBytesReceived,1)},e.prototype.GetBufferingResolutionToDisplay=function(){return this.m_strBufferingVideoResolution},e.prototype.GetPlaybackResolutionToDisplay=function(){return this.m_strPlaybackVideoResolution},e.prototype.GetHTMLVideoResolutionToDisplay=function(){return this.m_strHtmlVideoDisplay},e.prototype.GetDroppedFramesToDisplay=function(){return this.m_allTimeSnapshot.m_nFramesDropped+"/"+this.m_allTimeSnapshot.m_nFramesDecoded},e.prototype.GetStalledEventsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nStallEvents)},e.prototype.GetFailedDownloadsToDisplay=function(){return String(this.m_allTimeSnapshot.m_nFailedSegments)},e.prototype.GetNumBufferedVideoRanges=function(){return this.m_videoBufferedRanges?this.m_videoBufferedRanges.length:0},e.prototype.GetNumBufferedAudioRanges=function(){return this.m_audioBufferedRanges?this.m_audioBufferedRanges.length:0},e.prototype.GetBufferedVideoSegmentForDisplay=function(e){return this.m_videoBufferedRanges&&e<this.m_videoBufferedRanges.length?O(this.m_videoBufferedRanges.start(e))+" - "+O(this.m_videoBufferedRanges.end(e)):Object(ua.b)("#DASHPlayerStats_VideoNoRangeInformation")},e.prototype.GetBufferedAudioSegmentForDisplay=function(e){return this.m_audioBufferedRanges&&e<this.m_audioBufferedRanges.length?O(this.m_audioBufferedRanges.start(e))+" - "+O(this.m_audioBufferedRanges.end(e)):Object(ua.b)("#DASHPlayerStats_AudioNoRangeInformation")},e.prototype.GetBandwidthStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nBandwidthMin/1e6).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nBandwidthMax/1e6).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageBandwidth()/1e6).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nBandwidthMin?e.m_nBandwidthMin:Math.min(e.m_nBandwidthMin,t.m_nBandwidthMin))/1e6).toFixed(3)+" / "+(Math.max(e.m_nBandwidthMax,t.m_nBandwidthMax)/1e6).toFixed(3)+" / "+(e.GetAverageBandwidthFromTwo(t)/1e6).toFixed(3)},e.prototype.GetDownloadTimeStatsToDisplay=function(){if(this.m_rgSnapShots.length<2)return(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMinMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.m_nSegmentDownloadTimeMaxMS/1e3).toFixed(3)+" / "+(this.m_allTimeSnapshot.GetAverageDownloadTime()/1e3).toFixed(3);var e=this.m_rgSnapShots[this.m_rgSnapShots.length-2],t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];return((0==t.m_nSegmentDownloadTimeMinMS?e.m_nSegmentDownloadTimeMinMS:Math.min(e.m_nSegmentDownloadTimeMinMS,t.m_nSegmentDownloadTimeMinMS))/1e3).toFixed(3)+" / "+(Math.max(e.m_nSegmentDownloadTimeMaxMS,t.m_nSegmentDownloadTimeMaxMS)/1e3).toFixed(3)+" / "+(e.GetAverageDownloadTimeFromTwo(t)/1e3).toFixed(3)},e.prototype.BHasFrameInformation=function(){return this.m_allTimeSnapshot.m_nFramesDecoded>0},e.prototype.GetBandwidthRequiredToDisplay=function(){return(this.m_nBandwidthRequired/1e6).toFixed(3)},e.prototype.GetBandwithVideoToDisplay=function(){return(this.m_nCurBandwidthVideo/1e6).toFixed(3)},e.prototype.GetContentServerToDisplay=function(){return this.m_host},e.prototype.GetVideoBufferedToDisplay=function(){return(this.m_nVideoBufferedMS/1e3).toFixed(3)},e.prototype.GetAudioBufferedToDisplay=function(){return(this.m_nAudioBufferedMS/1e3).toFixed(3)},e.prototype.GetActiveDownloadsToDisplay=function(){return String(this.m_nActiveDownloads)},e.prototype.GetVideoDownloadProgressToDisplay=function(){return this.m_nVideoDownloadProgress?String(Math.round(100*this.m_nVideoDownloadProgress))+"%":"100%"},e.prototype.GetTimeToFirstFrameToDisplay=function(){return this.m_nTimeToFirstFrameMS==wl?"Unknown":String(this.m_nTimeToFirstFrameMS)},e.prototype.GetPersistentFrameDropsForDisplay=function(){return String(this.m_fpsMonitor.BIsDroppingFrames())},e.prototype.GetCurrentFPSForDisplay=function(){return this.m_fpsMonitor.BHasCurrentFPS()?this.m_fpsMonitor.GetCurrentFPS().toFixed(1):Object(ua.b)("#DASHPlayerStats_Tracking")},e.prototype.GetPlaybackRateForDisplay=function(){return this.m_nPlaybackRate.toFixed(1)+"x"},e.prototype.GetFPSMonitor=function(){return this.m_fpsMonitor},e.prototype.SetHTMLVideoPlayerDisplay=function(e,t,i,n){this.m_htmlVideoResolution!=n&&(this.m_htmlVideoResolution=n,this.m_strHtmlVideoDisplay=i+"x"+n),this.m_nPlaybackVideoResolution!=t&&(this.m_nPlaybackVideoResolution=t,this.m_strPlaybackVideoResolution=e+"x"+t)},e.prototype.SetVideoPlaybackResolution=function(e,t,i){0==this.m_videoResolution&&(this.m_allTimeSnapshot.m_nInitialVideoResolution=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nInitialVideoResolution=t),this.m_strBufferingVideoResolution=e+"x"+t+"@"+i,this.m_videoResolution=t,this.m_frameRate=i},e.prototype.SetRepresentation=function(e){e&&(e.nAudioSamplingRate?(this.m_audioRate=Math.round(e.nBandwidth/1e3),this.m_audioChannel=e.nAudioChannels,this.m_nAudioBandwidth=e.nBandwidth):e.nFrameRate&&(this.SetVideoPlaybackResolution(e.nWidth,e.nHeight,e.nFrameRate),this.m_nVideoBandwidth=e.nBandwidth),this.m_nBandwidthRequired=this.m_nAudioBandwidth+this.m_nVideoBandwidth)},e.prototype.SetCurrentVideoBandwidth=function(e){this.m_nCurBandwidthVideo=e},e.prototype.SetSegmentDurationMS=function(e){this.m_nSegmentDurationMS=e},e.prototype.SetBroadcasterAndViewerInfo=function(e,t,i,n){this.m_steamIDBroadcast=e,this.m_steamIDViewer=t,this.m_broadcastID=i,this.m_ulViewerToken=n},e.prototype.SetAnalyticLinks=function(e,t,i){this.m_strStatsLink=e,this.m_strStalledLink=t,this.m_strEventLogLink=i},e.prototype.SetVideoInitializationURL=function(e){var t=new URL(e);this.m_host=t.hostname},e.prototype.SetAudioRate=function(e){this.m_audioRate=e},e.prototype.CaptureFrequentlyUpdatingInformation=function(e,t){var i=this.ExtractFrameInfo(e);this.LogFrameInfo(i),this.LogBufferDuration(t,e)},e.prototype.LogDownload=function(e,t){this.m_allTimeSnapshot.SegmentReceived(e,t),this.m_rgSnapShots[this.m_rgSnapShots.length-1].SegmentReceived(e,t)},e.prototype.LogSegmentDownloadFailure=function(e,t){this.m_allTimeSnapshot.m_nFailedSegments+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nFailedSegments+=1,this.m_allTimeSnapshot.m_nLastSegementDownloadStatus=t,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus=t,this.LogDownload(0,e)},e.prototype.LogVideoError=function(e){},e.prototype.LogVideoOnCanPlay=function(e){this.m_nTimeToFirstFrameMS===wl&&(this.m_nTimeToFirstFrameMS=Date.now()-this.m_allTimeSnapshot.m_timeMS)},e.prototype.LogErrorEvent=function(e,t){},e.prototype.ReportVideoStalled=function(e,t){if(0!=this.m_strStalledLink.length){var i=this.FindBehindSegmentLoader(e,t);if(!i)return void B("DASHStats: Did not find any audio or video loaders");this.m_allTimeSnapshot.m_nStallEvents+=1,this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nStallEvents+=1;var n=new Il;this.GatherCommonStats(n,t,i.GetBandwidthRequired(),i.GetAvgDownloadRate()),n.last_segment_response=this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nLastSegementDownloadStatus,n.audio_stalled=i.ContainsAudio(),this.CaptureActiveDownloads(e),n.active_downloads=this.m_nActiveDownloads,n.vid_down_progress=this.m_nVideoDownloadProgress;for(var r=i.GetDownloadHistory(),o=0,a=r.length-1;a>=0&&o<3;--a)++o,n["segment"+o+"_bytes"]=r[a].cubData,n["segment"+o+"_time"]=Math.round(r[a].nDownloadMS)/1e3;this.SendReportToServer(n,this.m_strStalledLink)}},e.prototype.FindBehindSegmentLoader=function(e,t){for(var i=!1,n=!1,r=t.currentTime,o=null,a=null,s=0,c=e;s<c.length;s++){var l=c[s];a=l.ContainsAudio()?l:a,o=l.ContainsVideo()?l:a,l.BHasEnoughBuffered(r)&&(n=n||l.ContainsAudio(),i=i||l.ContainsVideo())}return n=n||null==a,!i||i&&n?o:a},e.prototype.ExtractFrameInfo=function(e){var t=0,i=0;if(e.getVideoPlaybackQuality)try{var n=e.getVideoPlaybackQuality();i=n.totalVideoFrames,t=n.droppedVideoFrames}catch(e){B("Browser does not support HTMLVideoElement.getVideoPlaybackQuality()",e.message)}else e.webkitDecodedFrames?(i=e.webkitDecodedFrames,t=e.webkitDroppedFrames):e.webkitDecodedFrameCount&&(i=e.webkitDecodedFrameCount,t=e.webkitDroppedFrameCount);return{framesDecoded:i,framesDropped:t}},e.prototype.LogFrameInfo=function(e){this.m_allTimeSnapshot.m_nFramesDecoded=e.framesDecoded,this.m_allTimeSnapshot.m_nFramesDropped=e.framesDropped;var t=this.m_rgSnapShots[this.m_rgSnapShots.length-1];if(1==this.m_rgSnapShots.length)t.m_nFramesDecoded=e.framesDecoded,t.m_nFramesDropped=e.framesDropped;else{var i=this.m_rgSnapShots[this.m_rgSnapShots.length-2];t.m_nFramesDecoded=e.framesDecoded-i.m_nFramesDecoded,t.m_nFramesDropped=e.framesDropped-i.m_nFramesDropped}},e.prototype.LogBufferDuration=function(e,t){this.m_nActiveDownloads=0;for(var i=0,n=e;i<n.length;i++){var r=n[i];r.ContainsAudio()?(this.m_nAudioBufferedMS=r.GetAmountBufferedMS(t.currentTime),this.m_audioBufferedRanges=r.GetSourceBufferTimeRanges()):r.ContainsVideo()&&(this.m_nVideoBufferedMS=r.GetAmountBufferedMS(t.currentTime),this.m_videoBufferedRanges=r.GetSourceBufferTimeRanges()),this.m_nActiveDownloads+=r.GetActiveDownloads(),r.ContainsVideo()&&(this.m_nVideoDownloadProgress=r.GetActiveDownloadProgress())}this.m_nPlaybackRate=t.playbackRate},e.prototype.CaptureActiveDownloads=function(e){this.m_nActiveDownloads=0;for(var t=0,i=e;t<i.length;t++){var n=i[t];this.m_nActiveDownloads+=n.GetActiveDownloads(),n.ContainsVideo()&&(this.m_nVideoDownloadProgress=n.GetActiveDownloadProgress())}},e.prototype.ReportPlayerStats=function(e,t){if(0!=this.m_strStatsLink.length){var i=this.ExtractFrameInfo(t);if(i.framesDecoded==this.m_allTimeSnapshot.m_nFramesDecoded&&0==this.m_rgSnapShots[this.m_rgSnapShots.length-1].m_nBytesReceived)return void this.CreateNewEmptySnapshot(t.videoHeight);this.LogFrameInfo(i),this.LogBufferDuration(e,t);var n=new Ol,r=this.m_rgSnapShots[this.m_rgSnapShots.length-1];n.frames_decoded=r.m_nFramesDecoded,n.frames_dropped=r.m_nFramesDropped,n.bytes_received=r.m_nBytesReceived,n.seconds_delta=Math.round((Date.now()-r.m_timeMS)/1e3),n.failed_segments=r.m_nFailedSegments,n.bw_min=r.m_nBandwidthMin,n.bw_max=r.m_nBandwidthMax,n.audio_buffer=Math.round(this.m_nAudioBufferedMS/1e3),n.video_buffer=Math.round(this.m_nVideoBufferedMS/1e3),n.seg_time_avg=Math.round(r.GetAverageDownloadTime())/1e3,n.seg_time_min=Math.round(r.m_nSegmentDownloadTimeMinMS)/1e3,n.seg_time_max=Math.round(r.m_nSegmentDownloadTimeMaxMS)/1e3,n.initial_vid_res=r.m_nInitialVideoResolution,n.ttff=this.m_nTimeToFirstFrameMS,n.seg_duration=this.m_nSegmentDurationMS,this.GatherCommonStats(n,t,this.m_nBandwidthRequired,r.GetAverageBandwidth()),this.CreateNewEmptySnapshot(t.videoHeight),this.SendReportToServer(n,this.m_strStatsLink)}},e.prototype.SendReportToServer=function(e,t){return si.b(this,void 0,void 0,function(){var i,n,r,o,a;return si.e(this,function(s){for(i=new URL(t),n=new FormData,r=0,o=Object.keys(e);r<o.length;r++)a=o[r],n.append(a,e[a]);return n.append("l",i.searchParams.get("l")),n.append("e",i.searchParams.get("e")),n.append("h",i.searchParams.get("h")),B("CDASHStats Sending Report to Server",e),Qi.a.post(t,n).catch(function(e){B("Failed to upload stats: ",e)}),[2]})})},e.prototype.CreateNewEmptySnapshot=function(e){this.m_rgSnapShots.length>=5&&this.m_rgSnapShots.shift(),this.m_rgSnapShots.push(new El(e))},e.prototype.GatherCommonStats=function(e,t,i,n){e.steamid=this.m_steamIDViewer,e.host=this.m_host,e.playback_position=Math.round(t.currentTime),e.video_res=this.m_videoResolution,e.audio_rate=this.m_audioRate,e.audio_ch=this.m_audioChannel,e.bw_required=i,e.bw_avg=Math.round(n),e.broadcast_accountid=new hi.a(this.m_steamIDBroadcast).GetAccountID(),e.useragent=window.navigator.userAgent,e.sessionid=ai.a.SESSIONID},si.c([_i.observable],e.prototype,"m_allTimeSnapshot",void 0),si.c([_i.observable],e.prototype,"m_strBufferingVideoResolution",void 0),si.c([_i.observable],e.prototype,"m_strPlaybackVideoResolution",void 0),si.c([_i.observable],e.prototype,"m_strHtmlVideoDisplay",void 0),si.c([_i.observable],e.prototype,"m_nBandwidthRequired",void 0),si.c([_i.observable],e.prototype,"m_nCurBandwidthVideo",void 0),si.c([_i.observable],e.prototype,"m_nAudioBufferedMS",void 0),si.c([_i.observable],e.prototype,"m_nVideoBufferedMS",void 0),si.c([_i.observable],e.prototype,"m_nActiveDownloads",void 0),si.c([_i.observable],e.prototype,"m_nVideoDownloadProgress",void 0),si.c([_i.observable],e.prototype,"m_videoBufferedRanges",void 0),si.c([_i.observable],e.prototype,"m_audioBufferedRanges",void 0),si.c([_i.observable],e.prototype,"m_nPlaybackRate",void 0),si.c([_i.action],e.prototype,"SetVideoPlaybackResolution",null),si.c([_i.action],e.prototype,"SetRepresentation",null),si.c([_i.action],e.prototype,"SetCurrentVideoBandwidth",null),si.c([_i.action],e.prototype,"CaptureFrequentlyUpdatingInformation",null),si.c([_i.action],e.prototype,"LogDownload",null),si.c([_i.action],e.prototype,"LogSegmentDownloadFailure",null),si.c([_i.action],e.prototype,"LogFrameInfo",null),si.c([_i.action],e.prototype,"LogBufferDuration",null),e}(),El=function(){function e(e){this.m_timeMS=Date.now(),this.m_nBytesReceived=0,this.m_nInitialVideoResolution=0,this.m_nFailedSegments=0,this.m_nStallEvents=0,this.m_nEntries=0,this.m_nSegmentDownloadTimeTotalMS=0,this.m_nSegmentDownloadTimeMaxMS=0,this.m_nSegmentDownloadTimeMinMS=0,this.m_nBandwidthTotal=0,this.m_nBandwidthMin=0,this.m_nBandwidthMax=0,this.m_nLastSegementDownloadStatus=200,this.m_nFramesDecoded=0,this.m_nFramesDropped=0,this.m_nInitialVideoResolution=e}return e.prototype.GetAverageBandwidth=function(){return this.m_nBandwidthTotal/Math.max(1,this.m_nEntries)},e.prototype.GetAverageDownloadTime=function(){return this.m_nSegmentDownloadTimeTotalMS/Math.max(1,this.m_nEntries)},e.prototype.GetAverageBandwidthFromTwo=function(e){return(e.m_nBandwidthTotal+this.m_nBandwidthTotal)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.GetAverageDownloadTimeFromTwo=function(e){return(e.m_nSegmentDownloadTimeTotalMS+this.m_nSegmentDownloadTimeTotalMS)/Math.max(1,e.m_nEntries+this.m_nEntries)},e.prototype.SegmentReceived=function(e,t){if(this.m_nBytesReceived+=e,!(e<1024)){var i=Math.round(8*e*1e3/Math.max(t,1));0==this.m_nEntries?(this.m_nSegmentDownloadTimeMinMS=t,this.m_nBandwidthMin=i):(this.m_nSegmentDownloadTimeMinMS=Math.min(t,this.m_nSegmentDownloadTimeMinMS),this.m_nBandwidthMin=Math.min(i,this.m_nBandwidthMin)),this.m_nBandwidthMax=Math.max(i,this.m_nBandwidthMax),this.m_nSegmentDownloadTimeMaxMS=Math.max(t,this.m_nSegmentDownloadTimeMaxMS),this.m_nBandwidthTotal+=i,this.m_nSegmentDownloadTimeTotalMS+=t,this.m_nEntries+=1}},si.c([_i.observable],e.prototype,"m_nBytesReceived",void 0),si.c([_i.observable],e.prototype,"m_nFailedSegments",void 0),si.c([_i.observable],e.prototype,"m_nStallEvents",void 0),si.c([_i.observable],e.prototype,"m_nSegmentDownloadTimeMaxMS",void 0),si.c([_i.observable],e.prototype,"m_nSegmentDownloadTimeMinMS",void 0),si.c([_i.observable],e.prototype,"m_nBandwidthMin",void 0),si.c([_i.observable],e.prototype,"m_nBandwidthMax",void 0),si.c([_i.observable],e.prototype,"m_nFramesDecoded",void 0),si.c([_i.observable],e.prototype,"m_nFramesDropped",void 0),si.c([_i.action],e.prototype,"SegmentReceived",null),e}(),Tl=function(){function e(){}return e.prototype.reset=function(e,t){this.bDropReading=e,this.nTotalDecodedFrames=t},e}(),kl=function(){function e(){this.k_nTestFrequencyMS=1e3,this.k_nSlidingWindow=6,this.k_nDroppedFramesThreshold=1,this.k_nFailThreshold=3,this.k_nIgnoreReadingAroundResizeMS=2e3,this.m_schTracker=new bn,this.m_rgResultsWindow=[],this.m_nLastResizeMS=0,this.m_bDroppingFrameDetected=!1,this.m_nCurrentFPS=0}return e.prototype.StartTracking=function(e){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading),this.m_fnRequestDecoded=e,this.m_lastFrameInfo=this.m_fnRequestDecoded(),this.m_bDroppingFrameDetected=!1},e.prototype.BHasCurrentFPS=function(){return 0!=this.m_nCurrentFPS},e.prototype.GetCurrentFPS=function(){return this.m_nCurrentFPS},e.prototype.BIsDroppingFrames=function(){return this.m_bDroppingFrameDetected},e.prototype.SetWindowResized=function(){this.m_nLastResizeMS=Date.now()},e.prototype.BIsInResizeTimeWindow=function(){return this.m_nLastResizeMS&&Date.now()-this.m_nLastResizeMS<this.k_nIgnoreReadingAroundResizeMS},e.prototype.Close=function(){this.m_schTracker.Cancel(),this.m_rgResultsWindow=[],this.m_bDroppingFrameDetected=!1},e.prototype.LogResizeAction=function(){this.m_nLastResizeMS=Date.now()},e.prototype.TakeReading=function(){this.m_schTracker.Schedule(this.k_nTestFrequencyMS,this.TakeReading);var e=!1,t=this.m_fnRequestDecoded();this.BIsInResizeTimeWindow()||(e=this.m_lastFrameInfo.framesDropped>0&&t.framesDropped-this.m_lastFrameInfo.framesDropped>this.k_nDroppedFramesThreshold),this.AppendReading(e,t.framesDecoded),this.m_bDroppingFrameDetected=this.ComputeDroppingFrames(),this.m_nCurrentFPS=t.framesDecoded-this.m_lastFrameInfo.framesDecoded-(t.framesDropped-this.m_lastFrameInfo.framesDropped),this.m_lastFrameInfo=t},e.prototype.ComputeDroppingFrames=function(){return this.m_rgResultsWindow.length==this.k_nSlidingWindow&&this.m_rgResultsWindow.filter(function(e){return e.bDropReading}).length>=this.k_nFailThreshold},e.prototype.AppendReading=function(e,t){var i;i=this.m_rgResultsWindow.length>=this.k_nSlidingWindow?this.m_rgResultsWindow.shift():new Tl,i.reset(e,t),this.m_rgResultsWindow.push(i)},si.c([_i.observable],e.prototype,"m_bDroppingFrameDetected",void 0),si.c([_i.observable],e.prototype,"m_nCurrentFPS",void 0),si.c([_i.action.bound],e.prototype,"TakeReading",null),e}(),Dl=30;!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(Ml||(Ml={}));var Gl,Nl=function(){function e(e){this.m_elVideo=null,this.m_strMPD="",this.m_schUpdateMPD=new bn,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_rgLoaders=[],this.m_mediaSource=null,this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_bIsBuffering=!0,this.m_nSeekingToTime=-1,this.m_listeners=new Cn,this.m_bFirstPlay=!0,this.m_schGameDataEventTrigger=new bn,this.m_schReportPlayerTrigger=new bn,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_schCaptureDisplayStatsTrigger=new bn,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats=new Rl,this.m_bClosing=!1,this.m_bUserPlayChoice=!0,this.m_bUserLiveEdgeChoice=!0,this.m_schFirstFrameThrottler=new bn,this.m_elVideo=e,this.m_schReportPlayerTrigger.Schedule(1e3*Dl,this.ReportPlayerStats)}return e.prototype.CalcVideoStartRelativeToSystemClock=function(e){var t=e?new Date(e).getTime():Date.now(),i=performance.now()-(t-this.m_mpd.GetAvailabilityStartTime().getTime());this.m_mpd.SetLiveContentStart(i),B("server time: "+e)},e.prototype.PlayMPD=function(e){return si.b(this,void 0,void 0,function(){var t;return si.e(this,function(i){switch(i.label){case 0:return this.m_strMPD=e,[4,this.DownloadMPD()];case 1:return(t=i.sent())?(this.m_mpd=new Sl,this.m_mpd.BParse(t.data)?this.IsLiveContent()?(this.IsLiveContent()&&(this.m_mpd.GetMinimumUpdatePeriod()>0&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),this.CalcVideoStartRelativeToSystemClock(t.headers.date)),this.m_bUseHLSManifest?(this.CloseWithError("playbackerror","HLS manifest not yet supported"),[2]):this.BCreateLoaders()?(this.m_stats.SetSegmentDurationMS(x(this.GetCurrentVideoAdaptation())),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_stats.SetVideoInitializationURL(this.GetCurrentVideoAdaptation().segmentTemplate.strInitialization),this.InitVideoControl(),[2]):(this.CloseWithError("playbackerror","Failed to create segment loaders"),[2])):(this.CloseWithError("playbackerror","Only live content is currently supported",this.m_strMPD),[2]):(this.CloseWithError("playbackerror","Failed to parse MPD file",this.m_strMPD),[2])):[2]}})})},e.prototype.Close=function(){if(this.m_bClosing=!0,this.m_listeners.Unregister(),this.StopDownloads(),this.m_elVideo.pause(),this.m_mediaSource){try{"closed"!=this.m_mediaSource.readyState&&this.m_mediaSource.endOfStream()}catch(e){}this.m_mediaSource=null}this.m_bIsBuffering=!0,this.m_elVideo=null,this.m_strMPD="",this.m_mpd=null,this.m_bUseHLSManifest=!1,this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="",this.m_nTrackBufferMS=0,this.m_nLimitFPS=0,this.m_nSeekingToTime=-1,this.m_nGameDataLastFramePTS=-1,this.m_bStatsViewVisible=!1,this.m_videoRepSelected=null,this.m_nAudioRepresentationIndex=0,this.m_stats&&this.m_stats.GetFPSMonitor().Close(),this.m_stats=null,this.m_bFirstPlay=!0},e.prototype.StopDownloads=function(){this.m_xhrUpdateMPD&&(this.m_xhrUpdateMPD.cancel(),this.m_xhrUpdateMPD=null),this.m_schUpdateMPD.Cancel(),this.m_schGameDataEventTrigger.Cancel(),this.m_schReportPlayerTrigger.Cancel(),this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_schFirstFrameThrottler.Cancel(),1!=this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1);for(var e=0,t=this.m_rgLoaders;e<t.length;e++)t[e].Close();this.m_bIsBuffering=!0},e.prototype.IsBuffering=function(){return this.m_bIsBuffering},e.prototype.IsLiveContent=function(){return!!this.m_mpd&&"dynamic"==this.m_mpd.GetType()},e.prototype.DownloadMPD=function(){return si.b(this,void 0,void 0,function(){var e,t,i;return si.e(this,function(n){switch(n.label){case 0:if(this.m_xhrUpdateMPD)return AssertMsg(!1,"Multiple MPD download requests"),[2,null];e=performance.now(),n.label=1;case 1:if(!(performance.now()-e<3e4))return[3,7];t=null,n.label=2;case 2:return n.trys.push([2,4,,5]),this.m_xhrUpdateMPD=Qi.a.CancelToken.source(),[4,Qi.a.get(this.m_strMPD,{cancelToken:this.m_xhrUpdateMPD.token})];case 3:return t=n.sent(),[3,5];case 4:return i=n.sent(),[3,5];case 5:return this.m_xhrUpdateMPD=null,this.m_bClosing?[2,null]:t&&200==t.status?[2,t]:(B("Failed to download, will retry: "+this.m_strMPD),[4,Y(200)]);case 6:return n.sent(),[3,1];case 7:return B("Failed to download: "+this.m_strMPD),[2,null]}})})},e.prototype.UpdateMPD=function(){return si.b(this,void 0,void 0,function(){var e;return si.e(this,function(t){switch(t.label){case 0:return[4,this.DownloadMPD()];case 1:return(e=t.sent())?this.m_mpd.BUpdate(e.data)?(this.CalcVideoStartRelativeToSystemClock(e.headers.date),this.m_stats.SetAnalyticLinks(this.m_mpd.GetStatsLink(),this.m_mpd.GetStalledLink(),this.m_mpd.GetEventLink()),this.m_mpd.GetMinimumUpdatePeriod()>0&&this.m_schUpdateMPD.Schedule(1e3*this.m_mpd.GetMinimumUpdatePeriod(),this.UpdateMPD),[2]):(this.CloseWithError("playbackerror","Failed to parse on Update the MPD file"),[2]):[2]}})})},e.prototype.CloseWithError=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.Close(),B.apply(void 0,t)},e.prototype.BCreateLoaders=function(){var e=this.m_mpd.GetPeriods();if(0==e.length)return!1;var t=e[0];this.m_strVideoAdaptationID="",this.m_strAudioAdaptationID="",this.m_strGameAdaptationID="";for(var i=0,n=t.rgAdaptationSets;i<n.length;i++){var r=n[i],o=null;if(!this.m_strVideoAdaptationID&&r.bContainsVideo&&P(r)&&(o=r,this.m_strVideoAdaptationID=r.strID),!this.m_strAudioAdaptationID&&r.bContainsAudio&&P(r)&&(o=r,this.m_strAudioAdaptationID=r.strID),!this.m_strGameAdaptationID&&r.bContainsGame&&(o=r,this.m_strGameAdaptationID=r.strID),o){var a=new Fl(this,this.m_mpd,o,this.m_stats);this.m_rgLoaders.push(a)}}return this.m_strVideoAdaptationID.length>0},e.prototype.InitVideoControl=function(){var e=new MediaSource,t=URL.createObjectURL(e);this.m_elVideo.pause(),this.m_elVideo.src=t,this.m_mediaSource=e,this.m_listeners.AddEventListener(e,"sourceopen",this.OnMediaSourceOpen),this.m_listeners.AddEventListener(e,"sourceended",this.OnMediaSourceEnded),this.m_listeners.AddEventListener(e,"sourceclose",this.OnMediaSourceClose),this.m_listeners.AddEventListener(this.m_elVideo,"waiting",this.OnVideoWaiting),this.m_listeners.AddEventListener(this.m_elVideo,"error",this.OnVideoError),this.m_listeners.AddEventListener(this.m_elVideo,"canplay",this.OnVideoCanPlay),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"resize",this.OnVideoResize),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate)},e.prototype.OnMediaSourceOpen=function(e){B("OnMediaSourceOpen");for(var t=0,i=this.m_rgLoaders;t<i.length;t++)i[t].SetMediaSource(this.m_mediaSource);this.BeginPlayback()},e.prototype.OnMediaSourceEnded=function(e){B("OnMediaSourceEnded")},e.prototype.OnMediaSourceClose=function(e){B("OnMediaSourceClose")},e.prototype.OnVideoWaiting=function(e){if(!this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,this.m_elVideo.currentTime+.5)){if(this.m_elVideo&&this.m_elVideo.buffered.length>1)for(var t=this.m_elVideo.currentTime,i=this.m_elVideo.buffered,n=0;n<i.length;++n)if(B("OnVideoWaiting buffer "+n+" start:"+i.start(n)+" end: "+i.end(n)+" playerTime: "+t),i.start(n)<=t&&t<=i.end(n))return B("OnVideoWaiting - time splitting, jumping to buffer "+n),void this.Seek(i.start(n));if(this.m_stats.ReportVideoStalled(this.m_rgLoaders,this.m_elVideo),null===this.m_videoRepSelected){var r=!0,o=this.GetVideoLoader();if(o){var a=this.m_mpd.GetLowestRepresentation(this.GetCurrentVideoAdaptation().strID);a&&!o.BIsCurrentRepresentation(a)&&(o.ChangeRepresentation(a),B("OnVideoWaiting - Stalled, forced restart download at resolution: "+a.nWidth+"x"+a.nHeight+"@"+a.nFrameRate+" instead"),r=!1),this.Seek(this.m_elVideo.currentTime)}r&&B("OnVideoWaiting - Stalled, already at lowest resolution. No action taken. BHasLoader: "+(null!=o))}else B("OnVideoWaiting - Stalled, user explicitly chose a resolution: "+this.m_videoRepSelected.nWidth+"x"+this.m_videoRepSelected.nHeight+"@"+this.m_videoRepSelected.nFrameRate)}},e.prototype.OnVideoPause=function(e){this.OnVideoBufferProgress(),this.m_stats.GetFPSMonitor().Close()},e.prototype.OnVideoResize=function(e){this.m_stats.GetFPSMonitor().SetWindowResized()},e.prototype.OnDebugPrintEventInfoAndAvailableBuffer=function(e){var t=-1,i=this.GetVideoLoader();this.m_elVideo&&i&&(t=i.GetAmountBufferedInPlayerMS(this.m_elVideo.currentTime)),B("DebugMessage - Stats: "+e.type+" BufferedMS: "+t)},e.prototype.OnVideoError=function(e){B("OnVideoError")},e.prototype.OnVideoCanPlay=function(e){this.m_bIsBuffering||(this.m_bUserPlayChoice&&this.PlayOnElement(),this.m_stats.LogVideoOnCanPlay(e))},e.prototype.GetCurrentPlayTime=function(){return-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:this.m_elVideo.currentTime},e.prototype.OnVideoTimeUpdate=function(){if(this.m_bUserLiveEdgeChoice&&this.IsLiveContent()){var e=this.GetBufferedLiveEdgeTime();if(1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime<=e-4.5&&this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime,e)){var t=e-this.m_elVideo.currentTime;this.m_elVideo.playbackRate=1.1,B("User is behind by "+t.toFixed(2)+" seconds, increasing playback speed to catch-up to live edge.")}else 1.1==this.m_elVideo.playbackRate&&this.m_elVideo.currentTime>=e-1&&(this.m_elVideo.playbackRate=1,B("User is caught up, returning to normal playrate"))}},e.prototype.BIsPlayerBufferedBetween=function(e,t){return this.m_elVideo.buffered.length>0&&e>=this.m_elVideo.buffered.start(0)&&t<=this.m_elVideo.buffered.end(0)},e.prototype.GetLiveContentStartTime=function(){return this.m_mpd.GetAvailabilityStartTime()},e.prototype.GetAvailableVideoStartTime=function(){if(!this.IsLiveContent())return 0;var e=Math.floor((performance.now()-this.m_mpd.GetLiveContentStart())/1e3),t=this.GetBufferedLiveEdgeTime();return F(e-this.m_mpd.GetTimeShiftBufferDepth()+10,0,t)},e.prototype.GetBufferedLiveEdgeTime=function(){return this.IsLiveContent()?Math.floor((performance.now()-this.m_mpd.GetLiveContentStart()-this.m_nTrackBufferMS)/1e3):this.m_mpd.GetPeriodDuration(0)-1},e.prototype.IsPaused=function(){return this.m_elVideo.paused},e.prototype.Play=function(){this.m_bUserPlayChoice=!0,this.Seek(this.m_elVideo.currentTime)},e.prototype.Pause=function(){this.m_bUserLiveEdgeChoice=!1,1.1==this.m_elVideo.playbackRate&&(this.m_elVideo.playbackRate=1),this.m_bUserPlayChoice=!1,this.m_elVideo.pause()},e.prototype.GetPlaybackRate=function(){return this.m_elVideo.paused?0:this.m_elVideo.playbackRate},e.prototype.OnSegmentDownloaded=function(e){B(e.GetDebugName()+" OnSegmentDownloaded"),this.UpdateVideoRepresentation(this.m_videoRepSelected),this.OnVideoBufferProgress(),e==this.GetVideoLoader()&&this.m_stats.SetCurrentVideoBandwidth(e.GetAvgDownloadRate())},e.prototype.PlayOnElement=function(){var e=this,t=this.m_bFirstPlay;this.m_bFirstPlay=!1;var i=this.m_elVideo.play();i||this.m_stats.GetFPSMonitor().StartTracking(function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)}),i.then(function(){e.m_stats.GetFPSMonitor().StartTracking(function(){return e.m_stats.ExtractFrameInfo(e.m_elVideo)})}).catch(function(i){if(t)return void e.DispatchEvent("valve-userinputneeded")})},e.prototype.OnVideoBufferProgress=function(){if(this.IsBuffering()){for(var e=this.m_rgLoaders.length>0,t=-1!=this.m_nSeekingToTime?this.m_nSeekingToTime:0,i=0,n=this.m_rgLoaders;i<n.length;i++){var r=n[i];if(!r.BHasEnoughBuffered(t)){e=!1;break}t=Math.max(t,r.GetBufferedStart())}e&&(this.m_bIsBuffering=!1,this.m_nSeekingToTime=-1,this.m_elVideo.currentTime!=t?this.m_elVideo.currentTime=t:this.m_elVideo.paused&&this.m_bUserPlayChoice&&this.PlayOnElement(),this.DispatchEvent("valve-bufferupdate"))}},e.prototype.OnSegmentDownloadFailed=function(e){this.StopDownloads(),this.DispatchEvent("valve-downloadfailed")},e.prototype.OnSegmentDownloadGone=function(e){this.m_bIsBuffering&&e.GetNumConsecutiveDownloadGones()<=3?this.Seek(this.GetCurrentPlayTime()+x(this.GetCurrentVideoAdaptation())/1e3):(B("OnSegmentDownloadGone: too many consecutive 'gone', erroring the download: "+e.GetNumConsecutiveDownloadGones()),this.OnSegmentDownloadFailed(e))},e.prototype.GetCurrentAudioAdaptationfunction=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strAudioAdaptationID):null},e.prototype.GetCurrentVideoAdaptation=function(){return this.m_mpd?this.m_mpd.GetAdaptationByTrackID(this.m_strVideoAdaptationID):null},e.prototype.GetVideoLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var i=t[e];if(i.ContainsVideo())return i}return null},e.prototype.GetAudioLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var i=t[e];if(i.ContainsAudio())return i}return null},e.prototype.GetGameLoader=function(){for(var e=0,t=this.m_rgLoaders;e<t.length;e++){var i=t[e];if(i.ContainsGame())return i}return null},e.prototype.SetTrackBufferMS=function(e){this.m_nTrackBufferMS=e;for(var t=0,i=this.m_rgLoaders;t<i.length;t++)i[t].SetBufferMS(e)},e.prototype.BeginPlayback=function(){var e=0;if(this.IsLiveContent()){var t=x(this.GetCurrentVideoAdaptation()),i=1e3*this.m_mpd.GetMinBufferTime(),n=Math.max(t,i);this.SetTrackBufferMS(n),e=this.GetBufferedLiveEdgeTime(),B("Begin playback [this.buffer="+this.m_nTrackBufferMS+"][nStartTime="+e+"]")}else this.SetTrackBufferMS(8e3),e=0;B("Starting playback at "+e);for(var r=this.PickStartingVideoRepresentation(),o=0,a=this.m_rgLoaders;o<a.length;o++){var s=a[o];if(s.ContainsVideo()){s.ChangeRepresentation(r);var t=x(s.GetAdaptation());this.m_schFirstFrameThrottler.Schedule(t/2,this.VerifyFirstSegementDownloadProgress)}else if(s.ContainsAudio()||s.ContainsGame()){var c=s.GetAdaptation().rgRepresentations.length>0?s.GetAdaptation().rgRepresentations[0]:null;s.ChangeRepresentation(c)}}this.Seek(e),this.GetGameLoader()&&this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)},e.prototype.VerifyFirstSegementDownloadProgress=function(){var e=this.GetVideoLoader();if(null===this.m_videoRepSelected&&e&&e.GetDownloadHistory().length<=1&&e.GetActiveDownloads()>0&&e.GetActiveDownloadProgress()<.55){var t=this.DetermineBestVideoRepresentation();t&&!e.BIsCurrentRepresentation(t)&&(e.ChangeRepresentation(t),e.ForceRestartDownload(),B("Video download progressing too slowly, choosing "+t.nWidth+"x"+t.nHeight+"@"+t.nFrameRate+" instead"))}},e.prototype.PickStartingVideoRepresentation=function(){var e=this.GetVideoLoader();if(!e)return null;for(var t=e.GetAdaptation(),i=e.GetRepresentationsCount()-1,n=null,r=i;r>=0;r--){var o=t.rgRepresentations[r],a=o.nFrameRate?o.nFrameRate:0;if(!(this.m_nLimitFPS>0&&a>this.m_nLimitFPS)&&(n=o,this.GetVideoPlayerHeight()<=o.nHeight))break}return n},e.prototype.DetermineBestVideoRepresentation=function(){for(var e=this.GetVideoLoader(),t=this.GetAudioLoader(),i=t&&t!=e?t.GetEstimatedAudioRate():0,n=this.GetAvgLoaderDownloadRate(),r=e.GetRepresentationsCount()-1,o=e.GetAdaptation().rgRepresentations[r],a=r-1;a>=0;a--){var s=e.GetAdaptation().rgRepresentations[a],c=(s.nBandwidth+i)*this.m_elVideo.playbackRate*1.15;if(n<c)B("Video select: Skipping "+a+" due to rate: [avg="+n+"][required="+c+"]");else{var l=s.nFrameRate||0;if(this.IsLiveContent()&&l>30){var u=this.m_stats.GetFPSMonitor();if(u.BIsDroppingFrames()||u.BHasCurrentFPS()&&Math.ceil(u.GetCurrentFPS())<29){B("Video select: Skipping "+a+" due to dropping frames and high FPS representation: [fps:"+l+"]");continue}}if(this.m_nLimitFPS>0&&l>this.m_nLimitFPS)B("Video select: Skipping "+a+" due to frame rate limit");else{var d=o.nHeight||0,p=s.nHeight||0,m=this.GetVideoPlayerHeight();if(m>0&&d>0&&p>J(m))break;o=s}}}return o},e.prototype.UpdateVideoRepresentation=function(e){if(e&&this.m_videoRepSelected==e)return null;var t=this.GetVideoLoader();if(!t)return null;if(this.IsBuffering())return null;var i=this.DetermineBestVideoRepresentation();return this.m_videoRepSelected=null,t.ChangeRepresentation(i)},e.prototype.SeekAndPlay=function(e){return this.m_bUserPlayChoice=!0,this.Seek(e)},e.prototype.Seek=function(e){var t=this.GetAvailableVideoStartTime(),i=this.GetBufferedLiveEdgeTime();e=F(e,t,i),this.m_bUserLiveEdgeChoice=e>=i-5;var n=this.m_elVideo.paused;n||this.m_elVideo.pause(),this.m_bIsBuffering=!0,this.m_nSeekingToTime=e;for(var r=0,o=this.m_rgLoaders;r<o.length;r++){var a=o[r];a.ContainsGame()&&(e=this.GetBufferedLiveEdgeTime()),a.Seek(e)}return this.DispatchEvent("valve-bufferupdate"),n&&this.OnVideoBufferProgress(),e},e.prototype.JumpTime=function(e){return e+=this.GetCurrentPlayTime(),this.Seek(e)},e.prototype.GetVideoPlayerHeight=function(){return this.m_elVideo.clientHeight},e.prototype.GetAvgLoaderDownloadRate=function(){for(var e=0,t=0,i=[this.GetVideoLoader()],n=0,r=i;n<r.length;n++){var o=r[n];o&&(e+=o.GetAvgDownloadRate(),t++)}return 0==t?0:e/t},e.prototype.GameDataEventTrigger=function(){var e=this.GetGameLoader();if(e){var t=e.GetGameDataFrames(),i=-1;if((i=t.length-1)>=0){var n=t[i];n.pts!=this.m_nGameDataLastFramePTS&&(this.m_nGameDataLastFramePTS=n.pts,n.gamedata.appid=e.GetLatestGameDataFrameAppID(),this.DispatchEvent("valve-gamedataupdate",n))}this.m_schGameDataEventTrigger.Schedule(500,this.GameDataEventTrigger)}},e.prototype.DispatchEvent=function(e,t){void 0===t&&(t=null);var i=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});this.m_elVideo.dispatchEvent(i)},e.prototype.IsMuted=function(){return this.m_elVideo.muted},e.prototype.SetMuted=function(e){this.m_elVideo.muted=e},e.prototype.SetVolume=function(e){e=F(e,0,1),this.m_elVideo.volume=e},e.prototype.GetVolume=function(){return this.m_elVideo.volume},e.prototype.GetDASHPlayerStats=function(){return this.m_stats},e.prototype.ReportPlayerStats=function(){this.m_stats.ReportPlayerStats(this.m_rgLoaders,this.m_elVideo),this.m_schReportPlayerTrigger.Schedule(3e5,this.ReportPlayerStats)},e.prototype.SetStatsViewIsVisible=function(e){e&&!this.m_bStatsViewVisible?(this.CaptureStatsForDisplay(),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)):!e&&this.m_bStatsViewVisible&&this.m_schCaptureDisplayStatsTrigger.Cancel(),this.m_bStatsViewVisible=e},e.prototype.CaptureStatsForDisplay=function(){this.m_stats.SetHTMLVideoPlayerDisplay(this.m_elVideo.videoWidth,this.m_elVideo.videoHeight,this.m_elVideo.clientWidth,this.m_elVideo.clientHeight),this.m_stats.CaptureFrequentlyUpdatingInformation(this.m_elVideo,this.m_rgLoaders),this.m_schCaptureDisplayStatsTrigger.Schedule(250,this.CaptureStatsForDisplay)},e.prototype.GetVideoRepresentations=function(){var e=[];e.push({id:"auto",displayName:"Auto",selected:null===this.m_videoRepSelected});var t=this.GetCurrentVideoAdaptation();if(t)for(var i=0,n=t.rgRepresentations;i<n.length;i++){var r=n[i],o=this.m_videoRepSelected&&this.m_videoRepSelected.strID==r.strID,a=r.nFrameRate;a>50&&r.nFrameRate<70?a=60:a>25&&a<35&&(a=30);var s=r.nWidth+"x"+r.nHeight+" @ "+a+"fps";e.push({id:r.strID,displayName:s,selected:o})}return e},e.prototype.SetVideoRepresentation=function(e){var t=!0,i=this.GetVideoLoader();if(e&&"auto"!=e.id){var n=i.GetRepresentationByID(e.id);n&&(t=!1,null!==this.m_videoRepSelected&&this.m_videoRepSelected.strID==n.strID||(this.m_videoRepSelected=n,i.ChangeRepresentation(n),this.Seek(this.m_elVideo.currentTime)))}t&&(this.m_videoRepSelected=null)},si.c([yn.a],e.prototype,"UpdateMPD",null),si.c([yn.a],e.prototype,"OnMediaSourceOpen",null),si.c([yn.a],e.prototype,"OnMediaSourceEnded",null),si.c([yn.a],e.prototype,"OnMediaSourceClose",null),si.c([yn.a],e.prototype,"OnVideoWaiting",null),si.c([yn.a],e.prototype,"OnVideoPause",null),si.c([yn.a],e.prototype,"OnVideoResize",null),si.c([yn.a],e.prototype,"OnDebugPrintEventInfoAndAvailableBuffer",null),si.c([yn.a],e.prototype,"OnVideoError",null),si.c([yn.a],e.prototype,"OnVideoCanPlay",null),si.c([yn.a],e.prototype,"GetCurrentPlayTime",null),si.c([yn.a],e.prototype,"OnVideoTimeUpdate",null),si.c([yn.a],e.prototype,"GetPlaybackRate",null),si.c([yn.a],e.prototype,"OnSegmentDownloaded",null),si.c([yn.a],e.prototype,"PlayOnElement",null),si.c([yn.a],e.prototype,"OnSegmentDownloadFailed",null),si.c([yn.a],e.prototype,"OnSegmentDownloadGone",null),si.c([yn.a],e.prototype,"VerifyFirstSegementDownloadProgress",null),si.c([yn.a],e.prototype,"GameDataEventTrigger",null),si.c([yn.a],e.prototype,"ReportPlayerStats",null),si.c([_i.action.bound],e.prototype,"CaptureStatsForDisplay",null),e}(),Ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t}(Error),Al=function(e){function t(t){var i=e.call(this)||this;return i.m_appid=t||0,i.m_appLocalizationMap=0!=t?wd.AppInfoStore.GetRichPresenceLoc(i.m_appid):null,i}return si.d(t,e),t.prototype.parseColor=function(e){if("string"!=typeof e||!e.match(/^#[0-9a-fA-F]{6}$/))throw new Ll("expected color string");return[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)]},t.prototype.parseString=function(e){if("string"==typeof e)return e;throw new Ll("expected string")},t.prototype.parseNumber=function(e){if("number"==typeof e)return e;throw new Ll("expected number")},t.prototype.parseDate=function(e){if("number"==typeof e)return new Date(e);throw new Ll("expected timestamp")},t.prototype.parseArray=function(e,t){var i=[];if("object"!=typeof e||!Array.isArray(e))throw new Ll("expected array");for(var n=e.length,r=0;r<n;++r)try{i.push(t(e[r]))}catch(e){throw e.message+="\n...while parsing array element "+r,e}return i},t.prototype.parseDict=function(e,t){var i=new Map;if("object"!=typeof e||Array.isArray(e))throw new Ll("expected object");for(var n in e)try{i.set(n,t(e[n]))}catch(e){throw e.message+="\n...while parsing dictionary element "+n,e}return i},t.prototype.parseBracket=function(e){var t={name:this.parseString(e.name),start:this.parseDate(e.start),color:[255,0,255]};return"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"end"in e&&(t.end=this.parseDate(e.end)),"color"in e&&(t.color=this.parseColor(e.color)),t},t.prototype.parseMarker=function(e){var t={time:this.parseDate(e.time),color:[0,255,255]};return"name"in e&&(t.name=this.parseString(e.name)),"params"in e&&(t.params=this.parseDict(e.params,this.parseString.bind(this))),"color"in e&&(t.color=this.parseColor(e.color)),t},t.prototype.parseBroadcastGameData=function(e){var t={appid:0,brackets:[],markers:[]};return"appid"in e&&(t.appid=this.parseNumber(e.appid)),"brackets"in e&&(t.brackets=this.parseArray(e.brackets,this.parseBracket.bind(this))),"markers"in e&&(t.markers=this.parseArray(e.markers,this.parseMarker.bind(this))),t},t.prototype.convertTime=function(e,t){return e.getTime()/1e3-t},t.prototype.LocalizeTokenIfPossible=function(e,t){if(null==this.m_appLocalizationMap)return e;var i=ai.a.LANGUAGE;return p(e,this.m_appLocalizationMap.GetTokenList(i),"english"!=i?this.m_appLocalizationMap.GetTokenList("english"):null,this.m_appid,t)},t.prototype.UpdateMarkers=function(e,t){var i;try{i=this.parseBroadcastGameData(e)}catch(t){return console.log("failed to parse game data: "+t),console.log(e),null}i.markers.sort(function(e,t){return e.time.getTime()-t.time.getTime()}),i.brackets.sort(function(e,t){return e.start.getTime()-t.start.getTime()});for(var n=0;n<i.brackets.length;++n){var r=i.brackets[n];void 0===r.end?n<i.brackets.length-1?r.end=i.brackets[n+1].start:r.end=new Date(Date.now()+36e5):r.start.getTime()>r.end.getTime()&&(r.end=r.start)}for(var o=[],a=[],s=t/1e3,n=0;n<i.markers.length;++n){var c=i.markers[n];o.push({nTime:this.convertTime(c.time,s),strLabel:this.LocalizeTokenIfPossible(c.name,c.params),color:Object(yn.b)(c.color[0],c.color[1],c.color[2])})}for(var n=0;n<i.brackets.length;++n){var r=i.brackets[n];a.push({nTimeStart:this.convertTime(r.start,s),nTimeEnd:this.convertTime(r.end,s),strLabel:this.LocalizeTokenIfPossible(r.name,r.params),color:Object(yn.b)(r.color[0],r.color[1],r.color[2])})}return{rgMarkers:o,rgSegments:a}},t}(Nn),Pl=1800;!function(e){e[e.None=0]="None",e[e.Loading=1]="Loading",e[e.Ready=2]="Ready",e[e.Error=3]="Error"}(Gl||(Gl={}));var xl,zl=function(){function e(){this.m_steamIDBroadcast="",this.m_ulBroadcastID="",this.m_strMPD="",this.m_eWatchState=Gl.None,this.m_strStateDescription="",this.m_rgVideos=[],this.m_rgChats=[],this.m_schTimeout=new bn}return e.prototype.SetState=function(e,t){void 0===t&&(t=""),this.m_eWatchState=e,this.m_strStateDescription=t,e==Gl.Error&&console.log(this.m_strStateDescription)},e.prototype.GetVideoData=function(e){return this.m_rgVideos.find(function(t){return t.video==e})},si.c([_i.observable],e.prototype,"m_eWatchState",void 0),si.c([_i.observable],e.prototype,"m_strStateDescription",void 0),si.c([_i.action],e.prototype,"SetState",null),e}(),Ul=function(){function e(e){this.m_steamIDBroadcast="",this.m_strTitle="",this.m_strAppId="",this.m_strAppTitle="",this.m_strThumbnailUrl="",this.m_nViewerCount=0,this.m_bIsOnline=!1,this.m_schTimeout=new bn,this.m_nRefCount=0,this.m_steamIDBroadcast=e}return si.c([_i.observable],e.prototype,"m_strTitle",void 0),si.c([_i.observable],e.prototype,"m_strAppId",void 0),si.c([_i.observable],e.prototype,"m_strAppTitle",void 0),si.c([_i.observable],e.prototype,"m_strThumbnailUrl",void 0),si.c([_i.observable],e.prototype,"m_nViewerCount",void 0),si.c([_i.observable],e.prototype,"m_bIsOnline",void 0),e}(),Vl=function(){function e(){this.m_mapBroadcasts=new Map,this.m_activeVideo=null,this.m_activeChat=null,this.m_broadcastSettings={nVolume:1,bMuted:!1,ulViewerToken:"0"},this.m_schSaveSettings=new bn,this.m_broadcastInfos={},this.LoadBroadcastSettings()}return e.prototype.GetBroadcastState=function(e){var t=this.m_mapBroadcasts.get(e);return t?t.m_eWatchState:Gl.None},e.prototype.GetBroadcastStateDescription=function(e){var t=this.m_mapBroadcasts.get(e);return t?t.m_strStateDescription:""},e.prototype.StartVideo=function(e,t,i){console.log("Starting video for "+t),this.PauseAllVideo();var n=this.GetOrCreateBroadcast(t),r=this.m_broadcastSettings,o=r.nVolume,a=r.bMuted,s=new jl(this,t,e,o,a);return n.m_rgVideos.push({video:s,eWatchLocation:i}),this.m_activeVideo=s,I()||R()?(n.m_eWatchState==Gl.None?this.GetBroadcastManifest(n,i):n.m_eWatchState==Gl.Ready&&s.Start(n.m_strMPD,n.m_ulBroadcastID,this.m_broadcastSettings.ulViewerToken),s):(n.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_MinBrowser")),null)},e.prototype.PauseAllVideo=function(){this.m_mapBroadcasts.forEach(function(e){for(var t=0,i=e.m_rgVideos;t<i.length;t++)i[t].video.StopPlaybackTillUserInput()})},e.prototype.StopVideo=function(e){var t=e.GetBroadcastSteamID(),i=this.m_mapBroadcasts.get(t);if(e.Stop(),i){var n=new FormData;n.append("steamid",t),n.append("token",this.m_broadcastSettings.ulViewerToken),Qi.a.post(ai.a.CHAT_BASE_URL+"broadcast/stopwatching",n),_n.d(i.m_rgVideos,function(t){return t.video==e}),this.RemoveBroadcastIfUnused(i)}},e.prototype.StartChat=function(e,t,i){var n=this.GetOrCreateBroadcast(t),r=new Wl(t,e);return n.m_rgChats.push(r),this.m_activeChat=r,r.Start("0"),r},e.prototype.StopChat=function(e){var t=e.GetBroadcastSteamID(),i=this.m_mapBroadcasts.get(t);i&&(_n.c(i.m_rgChats,e),this.RemoveBroadcastIfUnused(i))},e.prototype.StartInfo=function(e){var t=this.GetOrCreateBroadcastInfo(e);return t.m_nRefCount++,1===t.m_nRefCount&&this.LoadBroadcastInfo(t),t},e.prototype.StopInfo=function(e){0==--e.m_nRefCount&&(e.m_schTimeout.Cancel(),delete this.m_broadcastInfos[e.m_steamIDBroadcast])},e.prototype.GetOrCreateBroadcastInfo=function(e){if(!this.m_broadcastInfos[e]){var t=new Ul(e);this.m_broadcastInfos[e]=t}return this.m_broadcastInfos[e]},e.prototype.GetOrCreateBroadcast=function(e){var t=this.m_mapBroadcasts.get(e);return t||(t=new zl,t.m_steamIDBroadcast=e,t.m_eWatchState=Gl.None,this.m_mapBroadcasts.set(e,t),t)},e.prototype.RemoveBroadcastIfUnused=function(e){e.m_rgVideos.length||e.m_rgChats.length||(e.m_schTimeout.Cancel(),this.m_mapBroadcasts.delete(e.m_steamIDBroadcast))},e.prototype.LoadBroadcastInfo=function(e){return si.b(this,void 0,void 0,function(){var t,i,n,r,o,a=this;return si.e(this,function(s){switch(s.label){case 0:t={steamid:e.m_steamIDBroadcast,sessionid:ai.a.SESSIONID},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Qi.a.get(ai.a.CHAT_BASE_URL+"/broadcast/getbroadcastinfo/",{params:t})];case 2:return(i=s.sent())&&i.data?(n=i.data,e.m_strTitle=n.title,e.m_strAppId=n.appid,e.m_strAppTitle=n.app_title,e.m_strThumbnailUrl=n.thumbnail_url,e.m_nViewerCount=n.viewer_count,e.m_bIsOnline=n.is_online,r=n.update_interval,r&&"number"==typeof r&&e.m_schTimeout.Schedule(1e3*r,function(){return a.LoadBroadcastInfo(e)}),[3,4]):[2];case 3:return o=s.sent(),[3,4];case 4:return[2]}})})},e.prototype.GetBroadcastManifest=function(e,t,i){return void 0===i&&(i=Date.now()),si.b(this,void 0,void 0,function(){var n,r,o,a,s,c,l=this;return si.e(this,function(u){switch(u.label){case 0:e.SetState(Gl.Loading,""),n={steamid:e.m_steamIDBroadcast,broadcastid:0,viewertoken:this.m_broadcastSettings.ulViewerToken,watchlocation:t,sessionid:ai.a.SESSIONID},r=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Qi.a.get(ai.a.CHAT_BASE_URL+"/broadcast/getbroadcastmpd/",{params:n})];case 2:return r=u.sent(),[3,4];case 3:return o=u.sent(),[3,4];case 4:if(!r||200!=r.status)return e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_RequestFailed")),[2];if(a=r.data,this.SetBroadcastStateFromManifestResponse(e,a),"waiting"==a.success){if((s=Date.now()-i)>6e4)return e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_NotAvailable")),[2];c=s>3e4?a.retry:5e3,e.m_schTimeout.Schedule(c,function(){return l.GetBroadcastManifest(e,i)})}else"waiting_for_start"==a.success?e.m_schTimeout.Schedule(a.retry,function(){return l.GetBroadcastManifest(e,i)}):"waiting_for_reconnect"==a.success?e.m_schTimeout.Schedule(a.retry,function(){return l.GetBroadcastManifest(e,i)}):"ready"==a.success&&(this.SetViewerToken(a.viewertoken),this.LoadBroadcast(e,a.broadcastid,a.url));return[2]}})})},e.prototype.SetBroadcastStateFromManifestResponse=function(e,t){var i=t.success;"waiting"==i?e.SetState(Gl.Loading,Object(ua.b)("#BroadcastWatch_WaitingForResponse")):"waiting_for_start"==i?e.SetState(Gl.Loading,Object(ua.b)("#BroadcastWatch_WaitingForStart")):"waiting_for_reconnect"==i?e.SetState(Gl.Loading,Object(ua.b)("#BroadcastWatch_WaitingForReconnect")):"ready"==i?e.SetState(Gl.Ready):"end"==i?e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_NotAvailable")):"noservers"==i?e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_ServerLoad")):"system_not_supported"==i?e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_SystemNotSupported")):"user_restricted"==i?e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_UserRestricted")):"poor_upload_quality"==i?e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_PoorUploadQuality")):"request_failed"==i?e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_RequestFailed")):e.SetState(Gl.Error,Object(ua.b)("#BroadcastWatch_NotAvailable"))},e.prototype.LoadBroadcast=function(e,t,i){var n=this;e.m_ulBroadcastID=t,e.m_strMPD=i,e.m_rgVideos.findIndex(function(e){return e.video==n.m_activeVideo})>=0&&this.m_activeVideo.Start(i,t,this.m_broadcastSettings.ulViewerToken),e.m_rgChats.findIndex(function(e){return e==n.m_activeChat})>=0&&this.m_activeChat.Start(t)},e.prototype.BroadcastDownloadFailed=function(e){e.Stop();var t=this.m_mapBroadcasts.get(e.GetBroadcastSteamID());if(t&&t.m_eWatchState!=Gl.Loading){var i=t.GetVideoData(e);this.GetBroadcastManifest(t,i.eWatchLocation)}},e.prototype.UserInputClickVideo=function(e){if(this.m_activeVideo!=e){this.PauseAllVideo();var t=this.m_mapBroadcasts.get(e.GetBroadcastSteamID()),i=t.GetVideoData(e);return this.m_activeVideo=e,void this.GetBroadcastManifest(t,i.eWatchLocation)}e.UserInputClick()},e.prototype.LoadBroadcastSettings=function(){if(window.localStorage){var e=window.localStorage.getItem("broadcastSettings");if(e){var t=JSON.parse(e);if(t){Object.assign(this.m_broadcastSettings,t);var i=this.m_broadcastSettings;i.bMuted=!!i.bMuted,i.nVolume=F(i.nVolume,0,1),"string"!=typeof i.ulViewerToken&&(i.ulViewerToken="0")}}}},e.prototype.SaveBroadcastSettings=function(){var e=this;window.localStorage&&this.m_schSaveSettings.Schedule(1e3,function(){try{window.localStorage.setItem("broadcastSettings",JSON.stringify(e.m_broadcastSettings))}catch(e){}})},e.prototype.SetViewerToken=function(e){this.m_broadcastSettings.ulViewerToken!=e&&(this.m_broadcastSettings.ulViewerToken=e,this.SaveBroadcastSettings())},e.prototype.SaveVolumeChange=function(e,t){this.m_broadcastSettings.nVolume==e&&this.m_broadcastSettings.bMuted==t||(this.m_broadcastSettings.nVolume=e,this.m_broadcastSettings.bMuted=t,this.SaveBroadcastSettings())},e}();!function(e){e[e.Timeline=1]="Timeline",e[e.Minimap=2]="Minimap"}(xl||(xl={}));var jl=function(){function e(e,t,i,n,r){this.m_store=null,this.m_steamID=null,this.m_elVideo=null,this.m_player=null,this.m_listeners=new Cn,this.m_gameDataParser=null,this.m_info=null,this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_bOnLiveEdge=!1,this.m_nVolume=0,this.m_bMuted=!1,this.m_bUserInputNeeded=!1,this.m_nTimelineDuration=Pl,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_rgMarkers=_i.observable.array(),this.m_rgSegments=_i.observable.array(),this.m_store=e,this.m_steamID=t,this.m_elVideo=i,this.m_nVolume=n,this.m_bMuted=r}return e.prototype.GetBroadcastSteamID=function(){return this.m_steamID},e.prototype.IsPaused=function(){return this.m_bPaused},e.prototype.GetPlaybackTime=function(){return this.m_nPlaybackTime},e.prototype.SetStatsViewIsVisible=function(e){this.m_player&&this.m_player.SetStatsViewIsVisible(e)},e.prototype.GetDASHPlayerStats=function(){return this.m_player.GetDASHPlayerStats()},e.prototype.BHasDASHStats=function(){return null!=this.m_player},e.prototype.IsTimelineMapActive=function(){return!1},e.prototype.IsBuffering=function(){return this.m_bBuffering},e.prototype.IsOnLiveEdge=function(){return this.m_bOnLiveEdge},e.prototype.GetVideoAvailableStartTime=function(){return this.m_nVideoStartPos},e.prototype.GetVolume=function(){return this.m_nVolume},e.prototype.GetUserInputNeeded=function(){return this.m_bUserInputNeeded},e.prototype.GetVideoRepresentations=function(){return this.m_player.GetVideoRepresentations()},e.prototype.SetVideoRepresentation=function(e){this.m_player.SetVideoRepresentation(e)},e.prototype.GetBroadcastInfo=function(){return this.m_info},e.prototype.Start=function(e,t,i){AssertMsg(!this.m_player,"Initialized twice?"),this.m_listeners.AddEventListener(this.m_elVideo,"playing",this.OnVideoPlaying),this.m_listeners.AddEventListener(this.m_elVideo,"pause",this.OnVideoPause),this.m_listeners.AddEventListener(this.m_elVideo,"timeupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-bufferupdate",this.OnVideoTimeUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-gamedataupdate",this.OnGameDataUpdate),this.m_listeners.AddEventListener(this.m_elVideo,"valve-downloadfailed",this.OnDownloadFailed),this.m_listeners.AddEventListener(this.m_elVideo,"valve-userinputneeded",this.OnUserInputNeeded),this.m_bPaused=!1,this.m_nPlaybackTime=0,this.m_bBuffering=!1,this.m_nTimelineDuration=Pl,this.m_nVideoStartPos=0,this.m_nVideoEndPos=0,this.m_rgMarkers.clear(),this.m_rgSegments.clear(),this.m_bUserInputNeeded=!1,this.m_player=new Nl(this.m_elVideo),this.m_player.PlayMPD(e),this.m_player.GetDASHPlayerStats().SetBroadcasterAndViewerInfo(this.m_steamID,ai.d.steamid,t,i),B("DASH Stat Object",this.m_player.GetDASHPlayerStats()),this.SetVolume(this.m_nVolume),this.m_player.SetMuted(this.m_bMuted),this.m_info=this.m_store.StartInfo(this.m_steamID)},e.prototype.Stop=function(){this.m_listeners.Unregister(),this.m_info&&(this.m_store.StopInfo(this.m_info),this.m_info=null),this.m_gameDataParser=null,this.m_player&&(this.m_player.Close(),this.m_player=null)},e.prototype.TogglePlayPause=function(){this.m_player.IsPaused()?this.m_player.Play():this.m_player.Pause()},e.prototype.JumpTime=function(e){this.m_player.JumpTime(e)},e.prototype.Seek=function(e){this.m_player.Seek(e)},e.prototype.SeekAndPlay=function(e){this.m_player.SeekAndPlay(e)},e.prototype.JumpToLiveEdge=function(){this.SeekAndPlay(this.m_player.GetBufferedLiveEdgeTime())},e.prototype.SetVolume=function(e){this.m_player.SetVolume(e),this.m_nVolume=this.m_player.GetVolume(),this.m_store.SaveVolumeChange(e,this.m_bMuted)},e.prototype.SetMute=function(e){this.m_player.SetMuted(e),this.m_bMuted=e,this.m_store.SaveVolumeChange(this.m_nVolume,e)},e.prototype.IsMuted=function(){return this.m_bMuted},e.prototype.OnVideoPlaying=function(){this.m_bPaused=!1},e.prototype.OnVideoPause=function(){this.m_bPaused=!0},e.prototype.OnVideoTimeUpdate=function(){this.m_nPlaybackTime=this.m_player.GetCurrentPlayTime(),this.m_nVideoStartPos=this.m_player.GetAvailableVideoStartTime(),this.m_nVideoEndPos=Math.max(this.m_player.GetBufferedLiveEdgeTime(),this.m_nPlaybackTime),this.m_bBuffering=this.m_player.IsBuffering(),this.m_bOnLiveEdge=this.m_nVideoEndPos-this.m_nPlaybackTime<5,this.m_player.IsPaused()&&(this.m_bOnLiveEdge=!1)},e.prototype.OnGameDataUpdate=function(e){var t=e.detail;if(t&&"object"==typeof t.gamedata){this.m_gameDataParser||(this.m_gameDataParser=new Al(t.gamedata.appid));var i=this.m_player.GetLiveContentStartTime().getTime(),n=this.m_gameDataParser.UpdateMarkers(t.gamedata,i);n&&(this.m_rgMarkers.replace(n.rgMarkers||[]),this.m_rgSegments.replace(n.rgSegments||[]))}},e.prototype.OnDownloadFailed=function(){this.m_store.BroadcastDownloadFailed(this)},e.prototype.OnUserInputNeeded=function(){this.m_bUserInputNeeded=!0},e.prototype.UserInputClick=function(){this.m_bUserInputNeeded=!1,this.JumpToLiveEdge()},e.prototype.StopPlaybackTillUserInput=function(){this.Stop(),this.OnUserInputNeeded()},e.prototype.GetTimelineStartPos=function(){return this.m_nVideoEndPos-this.m_nTimelineDuration},e.prototype.GetTimelineDuration=function(){return this.m_nTimelineDuration},e.prototype.GetTimeAtMousePosition=function(e,t,i,n){var r=w(e,t.left,t.right,i,n);return Math.floor(r+.5)},e.prototype.GetPercentOffsetFromTime=function(e,t){var i=0,n=0;return t==xl.Timeline?(n=this.m_nVideoEndPos,i=n-this.m_nTimelineDuration):(i=0,n=0),w(e,i,n,0,100)},e.prototype.GetTimelineMarkers=function(){return this.m_rgMarkers},e.prototype.GetTimelineSegments=function(){return this.m_rgSegments},e.prototype.BHasMarkersOrSegments=function(){return this.has_segments||this.has_markers},Object.defineProperty(e.prototype,"has_markers",{get:function(){return this.m_rgMarkers.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"has_segments",{get:function(){return this.m_rgSegments.length>0},enumerable:!0,configurable:!0}),si.c([_i.observable],e.prototype,"m_bPaused",void 0),si.c([_i.observable],e.prototype,"m_nPlaybackTime",void 0),si.c([_i.observable],e.prototype,"m_bBuffering",void 0),si.c([_i.observable],e.prototype,"m_bOnLiveEdge",void 0),si.c([_i.observable],e.prototype,"m_nVolume",void 0),si.c([_i.observable],e.prototype,"m_bMuted",void 0),si.c([_i.observable],e.prototype,"m_bUserInputNeeded",void 0),si.c([_i.observable],e.prototype,"m_nTimelineDuration",void 0),si.c([_i.observable],e.prototype,"m_nVideoStartPos",void 0),si.c([_i.observable],e.prototype,"m_nVideoEndPos",void 0),si.c([_i.action.bound],e.prototype,"Start",null),si.c([yn.a],e.prototype,"OnVideoPlaying",null),si.c([yn.a],e.prototype,"OnVideoPause",null),si.c([_i.action.bound],e.prototype,"OnVideoTimeUpdate",null),si.c([_i.action.bound],e.prototype,"OnGameDataUpdate",null),si.c([yn.a],e.prototype,"OnDownloadFailed",null),si.c([yn.a],e.prototype,"OnUserInputNeeded",null),si.c([_i.computed],e.prototype,"has_markers",null),si.c([_i.computed],e.prototype,"has_segments",null),e}(),Wl=function(){function e(e,t){this.m_steamID="",this.m_iframe=null,this.m_bIframeLoaded=!1,this.m_ulBroadcastID="",this.m_steamID=e,this.m_iframe=t;var i=ai.a.CHAT_BASE_URL;i.endsWith("/community/")&&(i=i.slice(0,-"/community/".length));var n=ai.a.CHAT_BASE_URL+"broadcast/watch/"+e;n+="?iframe=1&origin="+i+"&muted=1&steamtv=1&enablechat=1&enablevideo=0",t.src=n,t.onload=this.OnIframeLoaded}return e.prototype.GetBroadcastSteamID=function(){return this.m_steamID},e.prototype.Start=function(e){this.m_ulBroadcastID=e,this.m_bIframeLoaded&&this.PostMessageToIframe()},e.prototype.OnIframeLoaded=function(){this.m_bIframeLoaded=!0,this.m_ulBroadcastID&&this.PostMessageToIframe()},e.prototype.PostMessageToIframe=function(){var e={msg:"OnVideoIFrameBroadcastIDChanged",broadcastid:this.m_ulBroadcastID};this.m_iframe.contentWindow.postMessage(e,ai.a.CHAT_BASE_URL)},si.c([yn.a],e.prototype,"OnIframeLoaded",null),si.c([yn.a],e.prototype,"PostMessageToIframe",null),e}(),Hl=new Vl;window.uiBroadcastWatchStore=Hl;var ql,Kl=function(){function e(){this.m_status=new hl,this.m_mapPendingRequests=new _i.ObservableMap,this.m_nRequestID=1}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn(function(){ai.a.IN_CLIENT&&(SteamClient&&SteamClient.Broadcast&&SteamClient.Broadcast.RegisterForBroadcastStatus&&SteamClient.Broadcast.RegisterForBroadcastStatus(t.OnBroadcastStatus),SteamClient&&SteamClient.Broadcast&&SteamClient.Broadcast.RegisterForViewerRequests&&SteamClient.Broadcast.RegisterForViewerRequests(t.OnViewerRequest))})},e.prototype.MakeKey=function(e,t){return e+"_"+t},Object.defineProperty(e.prototype,"status",{get:function(){return this.m_status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_broadcasting",{get:function(){return this.m_status.bIsBroadcasting},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"broadcastid",{get:function(){return this.m_status.broadcastid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is_broadcast_capable",{get:function(){return this.m_status.bBroadcastCapable},enumerable:!0,configurable:!0}),e.prototype.OnBroadcastStatus=function(e){(this.m_status.bIsBroadcasting&&!e.bIsBroadcasting||"0"!=this.m_status.broadcastid&&"0"==e.broadcastid)&&this.m_mapPendingRequests.forEach(function(e,t,i){e==vl.k_EPending&&i.delete(t)}),this.m_status=e},e.prototype.OnViewerRequest=function(e,t,i){if(i==vl.k_EPending){var n=this.m_nRequestID++;this.m_mapPendingRequests.set(this.MakeKey(e,n),i);var r=wd.GetDefaultBrowserContext(),o=wd.ShowFriendChatDialog(r,e);o&&o.ViewerNeedsApproval(n)}else this.m_mapPendingRequests.set(this.MakeKey(e,t),i)},e.prototype.ApproveViewerRequest=function(e,t){var i=hi.a.InitFromAccountID(e);SteamClient.Broadcast.ApproveViewerRequest(i.ConvertTo64BitString(),Number(t))},e.prototype.RejectViewerRequest=function(e,t){var i=hi.a.InitFromAccountID(e);SteamClient.Broadcast.RejectViewerRequest(i.ConvertTo64BitString(),Number(t))},e.prototype.GetRequestState=function(e,t){return this.m_mapPendingRequests.get(this.MakeKey(e,t))},e.prototype.InviteToWatch=function(e){var t=hi.a.InitFromAccountID(e);return SteamClient.Broadcast.InviteToWatch(t.ConvertTo64BitString())},si.c([_i.observable],e.prototype,"m_status",void 0),si.c([_i.observable],e.prototype,"m_mapPendingRequests",void 0),si.c([_i.computed],e.prototype,"status",null),si.c([_i.computed],e.prototype,"is_broadcasting",null),si.c([_i.computed],e.prototype,"broadcastid",null),si.c([_i.computed],e.prototype,"is_broadcast_capable",null),si.c([yn.a,_i.action],e.prototype,"OnBroadcastStatus",null),si.c([yn.a,_i.action],e.prototype,"OnViewerRequest",null),si.c([_i.action],e.prototype,"ApproveViewerRequest",null),si.c([_i.action],e.prototype,"RejectViewerRequest",null),si.c([_i.action],e.prototype,"InviteToWatch",null),e}(),Jl=function(e){function t(t,i){var n=e.call(this)||this;return n.m_bShowWatchPromptDialog=!1,n.m_steamID=hi.a.InitFromAccountID(i),n.m_tabset=t,n.m_info=Hl.StartInfo(n.m_steamID.ConvertTo64BitString()),n}return si.d(t,e),t.prototype.GetSteamID=function(){return this.m_steamID},t.prototype.GetTabName=function(){return this.m_info&&this.m_info.m_strTitle||"CS:GO Major 2018"},t.prototype.GetUniqueID=function(){return"br"+this.m_steamID.GetAccountID()},t.prototype.OnTabFocus=function(){},t.prototype.InternalOnTabActivate=function(){},t.prototype.OnTabDeactivate=function(){},t.prototype.OnTabClosed=function(){Hl.StopInfo(this.m_info)},t.prototype.IsVoiceActive=function(){return!1},t.prototype.GetUnreadMessageCount=function(){return 0},t.prototype.IsTabForChat=function(e){return!1},t.prototype.GetChatView=function(){return null},t.prototype.ShowWatchPromptDialog=function(e){this.m_bShowWatchPromptDialog=!0,this.m_watchPromptInitialFriend=e},t.prototype.HideWatchPromptDialog=function(){this.m_bShowWatchPromptDialog=!1,this.m_watchPromptInitialFriend=void 0},si.c([_i.observable],t.prototype,"m_bShowWatchPromptDialog",void 0),si.c([_i.observable],t.prototype,"m_watchPromptInitialFriend",void 0),si.c([_i.action],t.prototype,"ShowWatchPromptDialog",null),si.c([_i.action],t.prototype,"HideWatchPromptDialog",null),t}(da),Yl=function(){function e(e){this.m_bRestoredPopupState=!1,this.m_vecShowGroupsAfterRestorePopup=[],this.m_iLastChatPopupID=0,this.m_mapChatBrowserContexts=new Map,this.m_bSuppressBrowserContextBroadcasting=!1,this.m_bParentalLocked=void 0,this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,this.m_bShuttingDown=!1,this.m_bTheaterMode=!1,this.m_chatStore=e}return e.prototype.GetRootChatPerContextData=function(){return this.GetPerContextChatData(Md)},e.prototype.Init=function(){var e=this;wd.AddPopupManagerShutdownCallback(function(){e.SerializePopupState(),e.m_bShuttingDown=!0}),Object(_i.autorun)(function(){var t=wd.ParentalStore.BIsFriendsBlocked();e.OnFriendsParentalLockChanged(t)})},e.prototype.OnFriendsParentalLockChanged=function(e){!1===this.m_bParentalLocked&&e?(this.SerializePopupState(!0),this.m_mapChatBrowserContexts.forEach(function(e){e.CloseAllPopups()}),this.m_bRestoredPopupState=!1):!0!==this.m_bParentalLocked||e||this.RestorePopupState(),this.m_bParentalLocked=e},e.prototype.ShowFriendChatDialog=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0);var r=this.m_chatStore.GetFriendChat(t);return i&&r&&this.ShowAndOrActivateChat(e,r,n),r},e.prototype.ShowFriendChatDialogWhenReady=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.ShowFriendChatDialog(e,t,i,n)},e.prototype.ShowAndOrActivateChat=function(e,t,i){if(t instanceof Xc){var n=this.m_chatStore.GetChatRoomGroup(t.GetParentGroupID());if(!n)return void AssertMsg(!1,"Can't find group for chat room ");var r=this.ShowAndOrActivateChatRoomGroup(e,n,i);return void(r&&r.SelectChat(t.GetRoomID()))}this.ShowAndOrActivateTabByID(e,t.unique_id,i)},e.prototype.ShowAndOrActivateChatForTabset=function(e,t,i){var n=e.GetTabForChat(t);n||this.CreateNewTabFromUniqueID(e,t.unique_id,!1),i&&e.ActivateTab(n)},e.prototype.IsChatRoomGroupActive=function(e,t){var i=this.GetPerContextChatData(e),n=this.GetTabSetByUniqueID(i,t.unique_id);return!!n&&n.tabSet.activeTab==n.tab},e.prototype.SetTheaterMode=function(e){this.m_bTheaterMode=e},e.prototype.GetTheaterMode=function(){return this.m_bTheaterMode},e.prototype.ShowAndOrActivateChatRoomGroup=function(e,t,i){return t.BIsCurrentUserAMember()?this.ShowAndOrActivateTabByID(e,t.unique_id,i):(console.log("Failed to activate",t,"- user is not a member."),null)},e.prototype.ShowAndOrActivateChatRoomGroupWhenReady=function(e,t,i){this.ShowAndOrActivateChatRoomGroup(e,t,i)},e.prototype.ShowUnackedGroup=function(e){this.m_bRestoredPopupState?this.ShowAndOrActivateChatRoomGroup(Md,e,!1):this.m_vecShowGroupsAfterRestorePopup.push(e)},e.prototype.ShowOrActivateBroadcast=function(e,t,i){var n="br"+t;return this.ShowAndOrActivateTabByID(e,n,i)},e.prototype.CloseTabByID=function(e,t){var i=this;t?this.CloseTabByIDInContext(t,e):this.m_mapChatBrowserContexts.forEach(function(t){i.CloseTabByIDInContext(t.browser_context,e)})},e.prototype.ReplaceFriendChatWithGroup=function(e,t,i){var n=this.GetPerContextChatData(e),r=this.GetTabSetByUniqueID(n,i.unique_id);r||(this.ShowAndOrActivateChatRoomGroup(e,i,!0),r=this.GetTabSetByUniqueID(n,i.unique_id)),AssertMsg(r,"Failed to find group tab");var o=this.GetTabSetByUniqueID(n,t.chat.unique_id);if(o){var a=r.tab,s=o.tabSet;r.tabSet!=s&&(r.tabSet.RemoveTab(a),s.AddTab(a)),s.MoveTabAfter(a,t),this.CloseTab(e,t),this.ShowAndOrActivateChatRoomGroup(e,i,!0)}},e.prototype.ForEachTabSet=function(e,t){e.IsFriendsListSingleWindow()&&e.default_tabset.tabCount>0&&t(e.default_tabset);for(var i=0,n=Array.from(e.popup_list);i<n.length;i++)t(n[i].tab_set)},e.prototype.CloseTab=function(e,t,i){void 0===i&&(i=!1);var n=this.GetPerContextChatData(e);this.ForEachTabSet(n,function(r){r.BHasTab(t)&&(i||r.RemoveTab(t),t.IsVoiceActive()&&wd.ShowCloseActiveVoiceConfirmation(e,n.GetPopupForTabSet(r)))}),this.BroadcastCloseTabToAllBrowserContexts(e,t.GetUniqueID()),t.OnTabClosed(),n.IsFriendsListSingleWindow()&&0==n.default_tabset.tabCount&&(n.responsive_window_state.SetActiveView(ql.FriendsList),this.SetTheaterMode(!1),n.SetFriendsListCollapsed(!1))},e.prototype.GetResponsiveWindowState=function(e){return this.GetPerContextChatData(e).responsive_window_state},e.prototype.CloseTabByIDInContext=function(e,t){var i=this.GetPerContextChatData(e),n=this.GetTabSetByUniqueID(i,t);n&&(n.tabSet.RemoveTab(n.tab),n.tab.OnTabClosed(),this.BroadcastCloseTabToAllBrowserContexts(e,t))},e.prototype.ShowAndOrActivateTabByID=function(e,t,i){void 0===i&&(i=!0);var n,r=this.GetPerContextChatData(e),o=this.GetTabSetByUniqueID(r,t);if(o)i&&o.tabSet.ActivateTab(o.tab),n=o.tab;else{var a=wd.SettingsStore.BAlwaysShowChatsInNewWindow();if(!r.BUsePopups()||!a&&r.default_tabset.is_popup_active)n=this.CreateNewTabFromUniqueID(r.default_tabset,t,i);else{var s=void 0;if(s=a&&0!=r.default_tabset.tabCount?new ma(e):r.default_tabset,!(n=this.CreateNewTabFromUniqueID(s,t,i)))return null;var c=s==r.default_tabset;if(c&&r.IsFriendsListSingleWindow())wd.ShowPopupFriendsList(e,!i,i);else if(!c||!r.IsFriendsListSingleWindow()&&!s.is_popup_active){var l=wd.CreateChatPopup(e,this.GetNextChatPopupID(),s,void 0,void 0,!i);l.Show(i),r.AddPopup(s,l),this.SerializePopupState()}}}return n&&i&&r.responsive_window_state.SetActiveView(ql.Chat),n},e.prototype.GetTabSetByUniqueID=function(e,t){if(!e)return null;var i=e.GetTabSetForId(t);return i?{tabSet:i,tab:i.GetTabByUniqueID(t)}:null},e.prototype.BIsTabSetActive=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetActive(e)},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetVisible(e)},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(t)return t.BIsTabSetFocused(e)},e.prototype.GetAppContainerForChat=function(e){var t=this.GetRootChatPerContextData(),i=null;if(e instanceof Xc){var n=this.m_chatStore.GetChatRoomGroup(e.GetParentGroupID());n&&(i=this.GetTabSetByUniqueID(t,n.unique_id))}else i=this.GetTabSetByUniqueID(t,e.unique_id);if(!i||!i.tabSet)return null;var r=t.GetPopupForTabSet(i.tabSet);return r?r.popup?r.popup.container:null:t.IsTabSetInFriendListWindow(i.tabSet)?t.friends_list_window:null},e.prototype.FlashChatWindow=function(e){var t=this.GetAppContainerForChat(e);t&&!t.BIsClosed()&&t.FlashWindow()},e.prototype.GetPerContextChatData=function(e){AssertMsg(wd.ready_to_render||this.m_bRestoringPopups,"GetPerContextChatData called before ready",e);var t=this.m_mapChatBrowserContexts.get(e.m_unPID);if(!t){var i=wd.BIsValidBrowserContext(e);t=new $l(e),i?this.m_mapChatBrowserContexts.set(e.m_unPID,t):AssertMsg(!1,"Had to prevent instance being added back"+e.m_unPID)}return t},e.prototype.GetDefaultTabSetForContext=function(e){return this.GetPerContextChatData(e).default_tabset},e.prototype.OnOverlayBrowserCreated=function(e,t,i){var n=this,r=this.GetPerContextChatData(e);if(r){r.SetScreenInfo(t,i);var o=this.GetRootChatPerContextData();o&&this.ForEachTabSet(o,function(e){var t=new ma(r.browser_context);e.tabs.forEach(function(i){var r=e.activeTab==i;n.CreateNewTabFromUniqueID(t,i.GetUniqueID(),r)});var i=wd.CreateChatPopup(r.browser_context,n.GetNextChatPopupID(),t,void 0,void 0,!1);i.Show(!1),r.AddPopup(t,i)})}},e.prototype.OnOverlayBrowserChanged=function(e,t,i){var n=this.GetPerContextChatData(e);n&&n.SetScreenInfo(t,i)},e.prototype.OnOverlayBrowserClosed=function(e){var t=this.m_mapChatBrowserContexts.get(e.m_unPID);t&&(AssertMsg(e.m_nBrowserID==t.browser_context.m_nBrowserID,"Mismatch found in OnOverlayBrowserClosed"),this.m_mapChatBrowserContexts.delete(e.m_unPID))},e.prototype.SetSuppressBrowserContextBroadcasting=function(e){this.m_bSuppressBrowserContextBroadcasting=e},e.prototype.BroadcastNewTabToAllBrowserContexts=function(e,t){var i=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach(function(n){if(!ee(n.browser_context,e)){var r=n.browser_context!=Md;i.ShowAndOrActivateTabByID(n.browser_context,t,r)}}),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.BroadcastCloseTabToAllBrowserContexts=function(e,t){if(!this.m_bSuppressBrowserContextBroadcasting){if(ee(e,Md))return void this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t);var i=this.m_mapChatBrowserContexts.get(e.m_unPID);i&&ee(e,i.browser_context)&&this.BroadcastCloseTabToAllBrowserContexts_Internal(e,t)}},e.prototype.BroadcastCloseTabToAllBrowserContexts_Internal=function(e,t){var i=this;this.m_bSuppressBrowserContextBroadcasting||(this.m_bSuppressBrowserContextBroadcasting=!0,this.m_mapChatBrowserContexts.forEach(function(n){ee(n.browser_context,e)||i.CloseTabByIDInContext(n.browser_context,t)}),this.m_bSuppressBrowserContextBroadcasting=!1)},e.prototype.CreateNewTabFromUniqueID=function(e,t,i,n){void 0===n&&(n=!1);var r=null,o=t.match(/^f(\d+)$/);if(o&&o[1]){var a=parseInt(o[1]),s=wd.FriendStore.GetPlayer(a);if(s&&!s.is_blocked){var c=this.m_chatStore.GetFriendChat(a);c&&(r=new pl(e,c),!n||s.is_friend||wd.FriendStore.BApprovedNonFriendMessages(a)||c.SetShowNonFriendWarning(!0))}}if(!r){var l=t.match(/^cg(\d+)$/);if(l&&l[1]){var u=this.m_chatStore.GetChatRoomGroup(l[1]);u&&(this.m_chatStore.IncRefActiveChatRoomGroup(u.GetGroupID(),!this.m_bRestoringPopups),r=new tl(e,u))}}if(!r&&IsFeatureBroadcastEnabled()){var d=t.match(/^br(\d+)$/);if(d&&d[1]){var p=parseInt(d[1]);r=new Jl(e,p)}}return r?(e.AddTab(r),this.BroadcastNewTabToAllBrowserContexts(e.GetBrowserContext(),t),i&&e.ActivateTab(r),r):null},e.prototype.GetNextChatPopupID=function(){return"ChatWindow_"+this.m_iLastChatPopupID++},e.prototype.BIsFriendsListSingleWindow=function(e){var t=this.GetPerContextChatData(e);return!t.BUsePopups()||t.IsFriendsListSingleWindow()},e.prototype.SetFriendsListSingleWindowMode=function(e,t){var i=this.GetPerContextChatData(e);i.BUsePopups()&&i.IsFriendsListSingleWindow()!=t&&(t?wd.UIStore.ConvertDefaultTabSetToEmbedded(i.browser_context):wd.UIStore.ConvertDefaultTabSetToPopup(i.browser_context),i.SetFriendsListSingleWindowMode(t))},e.prototype.BIsFriendsListCollapsed=function(e){var t=this.GetPerContextChatData(e);return t.IsFriendsListSingleWindow()&&t.IsFriendsListCollapsed()},e.prototype.SetFriendsListCollapsed=function(e,t){this.GetPerContextChatData(e).SetFriendsListCollapsed(t)},e.prototype.ConvertDefaultTabSetToPopup=function(e){var t=this.GetPerContextChatData(e);if(t.default_tabset.tabCount){var i=t.GetPopupForTabSet(t.default_tabset);return i||(i=wd.CreateChatPopup(e,this.GetNextChatPopupID(),t.default_tabset,t.cached_popup_window_restore_details,void 0,!1),i.Show(!0),t.AddPopup(t.default_tabset,i),this.SerializePopupState(),t.friends_list_window&&(t.friends_list_window.BringToFront(),t.friends_list_window.title=Object(ua.b)("#WindowTitle_FriendsList")),i)}return null},e.prototype.ConvertDefaultTabSetToEmbedded=function(e){var t=this.GetPerContextChatData(e),i=t.GetPopupForTabSet(t.default_tabset);i&&(i.popup.GetWindowRestoreDetails().then(function(e){t.SetCachedDefaultPopupDimensions(e)}),t.RemovePopupForTabSet(t.default_tabset),this.SerializePopupState(),i.ClearTabSet(),i.popup.Close())},e.prototype.OnTabSetResized=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext());if(e==t.default_tabset&&!t.IsFriendsListSingleWindow()){var i=t.GetPopupForTabSet(e);i&&i.popup.GetWindowRestoreDetails().then(function(e){t.SetCachedDefaultPopupDimensions(e)})}},e.prototype.CloseTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),i=t.GetPopupForTabSet(e);i&&i.popup.Close(),t.RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.OnTabSetClosed=function(e){this.GetPerContextChatData(e.GetBrowserContext()).RemovePopupForTabSet(e),this.SerializePopupState()},e.prototype.FocusTabSet=function(e){var t=this.GetPerContextChatData(e.GetBrowserContext()),i=t.GetPopupForTabSet(e);i&&i.popup&&!i.popup.container.BIsClosed()?i.popup.container.BringToFront():t.IsTabSetInFriendListWindow(e)&&t.IsFriendsListSingleWindow()&&(t.BUsePopups()?wd.ShowPopupFriendsList(t.browser_context,!1,!0):t.friends_list_window&&t.friends_list_window.BringToFront())},e.prototype.MoveTabToNewPopup=function(e,t,i,n){AssertMsg(e,"browserContext");var r=this.GetPerContextChatData(e);this.ForEachTabSet(r,function(e){return e.RemoveTab(t)});var o=new ma(e);o.AddTab(t);var a=wd.CreateChatPopup(e,this.GetNextChatPopupID(),o,n,i,!1);if(a.Show(!0),n){var s=a.popup.GetWindow();try{s.SteamClient.Window.PositionWindowRelative(n,i.left,i.top,i.width,i.height)}catch(e){console.error(e)}}r.AddPopup(o,a),this.SerializePopupState()},e.prototype.SerializePopupState=function(e){if(void 0===e&&(e=!1),this.m_bRestoredPopupState&&wd.SettingsStore.BReady()&&!this.m_bShuttingDown){var t=this.SerializePopupStateToObject(e);wd.SettingsStore.StoreObjectInLocalStorage("ChatStorePopupState",t)}},e.prototype.SerializePopupStateToObject=function(e){var t=this.GetPerContextChatData(Md),i={window_restore_details:t.cached_popup_window_restore_details,defaultTabs:void 0,popupTabs:void 0,bFriendsListVisible:!1,always_restore:e,bFriendsListSingleWindow:t.IsFriendsListSingleWindow(),bFriendsListCollapsed:t.IsFriendsListCollapsed()};t.default_tabset&&t.default_tabset.tabCount>0&&(i.defaultTabs=t.default_tabset.Serialize());for(var n=[],r=0,o=Array.from(t.popup_list);r<o.length;r++){var a=o[r];a.tab_set!=t.default_tabset&&n.push(a.tab_set.Serialize())}return n.length>0&&(i.popupTabs=n),i.bFriendsListVisible=!!t.friends_list_window,i},e.prototype.BRestorePopups=function(){return wd.SettingsStore.BAlwaysShowChatsInNewWindow()},e.prototype.BRestoreOpenChats=function(){return wd.SettingsStore.FriendsSettings.bRememberOpenChats},e.prototype.DeserializeIntoTabSet=function(e,t){if(t.tabs&&Array.isArray(t.tabs))for(var i=0,n=t.tabs;i<n.length;i++){var r=n[i];r.startsWith("br")||this.CreateNewTabFromUniqueID(e,r,r==t.active_tab,!0)}},e.prototype.SetStateToRestoreFrom=function(e){this.m_stateToRestoreFrom=e},e.prototype.RestorePopupState=function(){return si.b(this,void 0,void 0,function(){var e,t;return si.e(this,function(i){switch(i.label){case 0:return AssertMsg(!this.m_bRestoredPopupState,"Second restore popup state"),AssertMsg(!this.m_bRestoringPopups,"RestorePopupState called while already restoring"),wd.ParentalStore.BIsFriendsBlocked()?[2]:(this.m_bRestoringPopups=!0,this.m_stateToRestoreFrom?(this.RestoreFromStateObject(this.m_stateToRestoreFrom,!1),this.m_stateToRestoreFrom=void 0,this.m_bRestoringPopups=!1,[2]):[4,wd.SettingsStore.GetObjectFromLocalStorageWhenReady("ChatStorePopupState")]);case 1:return e=i.sent(),t=!1,"undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.BSuppressPopupsInRestore?[4,SteamClient.WebChat.BSuppressPopupsInRestore()]:[3,3];case 2:t=i.sent(),i.label=3;case 3:return this.RestoreFromStateObject(e,t),this.m_bRestoringPopups=!1,[2]}})})},e.prototype.RestoreFromStateObject=function(e,t){var i=this.GetPerContextChatData(Md);if(AssertMsg(i.BIsEmpty(),"Restoring to non-empty context",i),i.BIsEmpty()){if(e.window_restore_details&&i.SetCachedDefaultPopupDimensions(e.window_restore_details),i.SetFriendsListSingleWindowMode(!!e.bFriendsListSingleWindow),i.SetFriendsListCollapsed(!!e.bFriendsListCollapsed),!t&&(e.always_restore||this.BRestoreOpenChats())){if(e.defaultTabs){var n=i.default_tabset;if(this.DeserializeIntoTabSet(n,e.defaultTabs),n.tabCount>0&&!i.IsFriendsListSingleWindow()){var r=wd.CreateChatPopup(wd.GetDefaultBrowserContext(),this.GetNextChatPopupID(),n,void 0,void 0,!1);i.AddPopup(n,r),r.Show(!1)}}if(e.popupTabs)for(var o=0,a=e.popupTabs;o<a.length;o++){var s=a[o],n=new ma(Md);if(this.DeserializeIntoTabSet(n,s),n.tabCount>0){var r=wd.CreateChatPopup(wd.GetDefaultBrowserContext(),this.GetNextChatPopupID(),n,void 0,void 0,!1);i.AddPopup(n,r),r.Show(!1)}}}if(!t){var c=!e||void 0===e.bFriendsListVisible||e.bFriendsListVisible;i.BUsePopups()&&wd.ShowPopupFriendsListAtStartup(c);for(var l=0,u=this.m_vecShowGroupsAfterRestorePopup;l<u.length;l++){var d=u[l];this.ShowAndOrActivateChatRoomGroup(Md,d,!1)}}this.m_vecShowGroupsAfterRestorePopup=[],this.m_bRestoredPopupState=!0,this.m_chatStore.OnRestorePopupsComplete()}},e.prototype.FillInChatUsabilityMetrics=function(e){var t=this.GetPerContextChatData(Md);e.ui_state().set_friends_list_docked(t.IsFriendsListSingleWindow()),e.ui_state().set_friends_list_visible(t.friends_list_window&&!t.friends_list_window.BIsClosed()),e.ui_state().set_chat_popups_opened(Array.from(t.popup_list).length),e.ui_state().set_friends_list_collapsed(t.IsFriendsListCollapsed());var i=0,n=0;i+=_n.b(t.default_tabset.tabs,function(e){return e.IsChatRoom()}),n+=_n.b(t.default_tabset.tabs,function(e){return e.IsFriendChat()});for(var r=0,o=Array.from(t.popup_list);r<o.length;r++){var a=o[r];a.tab_set!=t.default_tabset&&(i+=_n.b(a.tab_set.tabs,function(e){return e.IsChatRoom()}),n+=_n.b(a.tab_set.tabs,function(e){return e.IsFriendChat()}))}e.ui_state().set_group_chat_tabs_opened(i),e.ui_state().set_friend_chat_tabs_opened(n)},si.c([_i.observable],e.prototype,"m_bTheaterMode",void 0),si.c([_i.action],e.prototype,"OnFriendsParentalLockChanged",null),si.c([Q],e.prototype,"ShowFriendChatDialogWhenReady",null),si.c([Q],e.prototype,"ShowAndOrActivateChatRoomGroupWhenReady",null),si.c([yn.a],e.prototype,"SerializePopupState",null),e}(),Xl=function(){function e(e,t){this.m_bShown=!1,this.m_popup=e,this.m_chatPopup=t}return e.prototype.Show=function(e){this.m_popup.Show(e),this.m_bShown||(this.m_bShown=!0)},Object.defineProperty(e.prototype,"popup",{get:function(){return this.m_popup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tab_set",{get:function(){return this.m_chatPopup.tab_set},enumerable:!0,configurable:!0}),e.prototype.ClearTabSet=function(){this.m_chatPopup.ClearTabSet()},e.prototype.IsSameBrowserContext=function(e){var t=this.m_popup.GetBrowserContext()||Md;return e.m_nBrowserID==t.m_nBrowserID&&e.m_unPID==t.m_unPID},e}();!function(e){e[e.FriendsList=0]="FriendsList",e[e.Chat=1]="Chat"}(ql||(ql={}));var Zl,Ql=function(){function e(){this.m_eActiveView=ql.FriendsList}return e.prototype.GetActiveView=function(){return this.m_eActiveView},e.prototype.SetActiveView=function(e){this.m_eActiveView=e},si.c([_i.observable],e.prototype,"m_eActiveView",void 0),e}(),$l=function(){function e(e){this.m_browserContext=e,this.m_DefaultTabSet=new ma(e),this.m_FriendsListWindow=void 0,this.m_PopupWindowRestoreDetails=void 0,this.m_mapTabSetToPopup=new Map,this.m_ResponsiveWindowState=new Ql,this.SetFriendsListSingleWindowMode(!1),this.m_bFriendsListCollapsed=ai.a.STEAM_TV}return e.prototype.BIsEmpty=function(){return 0==this.m_DefaultTabSet.tabCount&&(!ai.a.IN_CLIENT||void 0==this.m_FriendsListWindow)&&0==this.m_mapTabSetToPopup.size},e.prototype.BUsePopups=function(){return ai.a.USE_POPUPS},e.prototype.IsFriendsListSingleWindow=function(){return this.m_bFriendsListSingleWindow},e.prototype.SetFriendsListSingleWindowMode=function(e){this.BUsePopups()?this.m_bFriendsListSingleWindow=e:this.m_bFriendsListSingleWindow=!0},e.prototype.IsFriendsListCollapsed=function(){return this.m_bFriendsListCollapsed},e.prototype.SetFriendsListCollapsed=function(e){this.m_bFriendsListCollapsed=e},Object.defineProperty(e.prototype,"browser_context",{get:function(){return this.m_browserContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"default_tabset",{get:function(){return AssertMsg(this.m_DefaultTabSet,"Context has no default chat target"),this.m_DefaultTabSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friends_list_window",{get:function(){return this.m_FriendsListWindow},enumerable:!0,configurable:!0}),e.prototype.SetFriendsListWindow=function(e){this.m_FriendsListWindow=e||void 0,!e&&this.IsFriendsListSingleWindow()&&this.m_DefaultTabSet.CloseAllTabs()},Object.defineProperty(e.prototype,"popup_list",{get:function(){return this.m_mapTabSetToPopup.values()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responsive_window_state",{get:function(){return this.m_ResponsiveWindowState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cached_popup_window_restore_details",{get:function(){return this.m_PopupWindowRestoreDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screen_info",{get:function(){return this.m_ScreenInfo},enumerable:!0,configurable:!0}),e.prototype.SetScreenInfo=function(e,t){this.m_ScreenInfo={width:e,height:t}},e.prototype.SetCachedDefaultPopupDimensions=function(e){this.m_PopupWindowRestoreDetails=e},e.prototype.GetTabSetForId=function(e){if(this.m_DefaultTabSet.GetTabByUniqueID(e))return this.m_DefaultTabSet;for(var t=0,i=Array.from(this.m_mapTabSetToPopup.keys());t<i.length;t++){var n=i[t];if(n.GetTabByUniqueID(e))return n}return null},e.prototype.RemovePopupForTabSet=function(e){this.m_mapTabSetToPopup.delete(e)},e.prototype.AddPopup=function(e,t){AssertMsg(!this.m_mapTabSetToPopup.has(e),"Added popup for tabset twice"),this.m_mapTabSetToPopup.set(e,t)},e.prototype.GetPopupForTabSet=function(e){return this.m_mapTabSetToPopup.get(e)},e.prototype.IsTabSetInFriendListWindow=function(e){return e==this.default_tabset&&this.IsFriendsListSingleWindow()},e.prototype.BIsTabSetActive=function(e){var t=this.GetPopupForTabSet(e);return t?!t.popup.container.BIsClosed():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&!this.friends_list_window.BIsClosed()},e.prototype.BIsTabSetVisible=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsVisible():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsVisible()},e.prototype.BIsTabSetFocused=function(e){var t=this.GetPopupForTabSet(e);return t?t.popup.container.BIsFocused():this.IsTabSetInFriendListWindow(e)&&this.friends_list_window&&this.friends_list_window.BIsFocused()},e.prototype.CloseAllPopups=function(){for(var e=0,t=Array.from(this.popup_list);e<t.length;e++)t[e].popup.Close();this.m_mapTabSetToPopup.clear(),this.friends_list_window&&this.m_FriendsListWindow.Close(),this.m_DefaultTabSet=new ma(this.m_browserContext)},si.c([_i.observable],e.prototype,"m_bFriendsListSingleWindow",void 0),si.c([_i.observable],e.prototype,"m_bFriendsListCollapsed",void 0),e}(),eu=function(){function e(e){var t=this;this.m_bReady=!1,this.m_unTimerUploadCommunityPreferences=void 0,this.m_rgOnReadyCallbacks=[],this.m_bFriendSettingsReady=!1,this.m_CommunityPreferencesChangedHandler=l(xs.NotifyCommunityPreferencesChangedHandler,function(e){return t.UpdateCommunityPreferences(e.Body().preferences()),1}),this.m_Storage=e,ai.a.IN_CLIENT?this.m_iFriendSettingsStore=new iu(this,this.OnFriendSettingsChanged.bind(this)):this.m_iFriendSettingsStore=new nu(this,this.OnFriendSettingsChanged.bind(this)),this.m_CommunityPreferences=new bl;var i=new Os;this.m_CommunityPreferences.bHideAdultContentViolence=i.hide_adult_content_violence(),this.m_CommunityPreferences.bHideAdultContentSex=i.hide_adult_content_sex(),this.m_CommunityPreferences.bParenthesizeNicknames=i.parenthesize_nicknames(),this.m_ServerCommunityPreferences=void 0}return e.prototype.Init=function(e){var t=this;this.m_CM=e,this.m_CM.AddOnLogonCallback(function(){t.m_bReady||(t.m_iFriendSettingsStore.InternalInit(),t.SetReady());var e=fi.Init(Is);return Xa.GetCommunityPreferences(t.m_CM.GetServiceTransport(),e).then(function(e){return t.UpdateCommunityPreferences(e.Body().preferences())})})},e.prototype.BReady=function(){return this.m_bReady},Object.defineProperty(e.prototype,"FriendsSettings",{get:function(){return this.m_FriendsSettings},enumerable:!0,configurable:!0}),e.prototype.BUpdateFriendsSettings=function(e){return!!this.m_iFriendSettingsStore.BUpdateSettings(e)&&(this.m_FriendsSettings=e,!0)},e.prototype.BClientHasFeatureOrOnWeb=function(e){return!ai.a.IN_CLIENT||!!this.BReady()&&"object"==typeof this.m_FriendsSettings.featuresEnabled&&!!this.m_FriendsSettings.featuresEnabled.hasOwnProperty(e)&&this.m_FriendsSettings.featuresEnabled[e]},e.prototype.BAlwaysShowChatsInNewWindow=function(){return this.m_FriendsSettings.bAlwaysNewChatWindow},e.prototype.BForceAlphabeticFriendSorting=function(){return this.m_FriendsSettings.bForceAlphabeticFriendSorting},e.prototype.RunOnReady=function(e){this.m_bReady?e():this.m_rgOnReadyCallbacks.push(e)},e.prototype.GetAccountSpecificLocalStorageKey=function(e){return AssertMsg(this.m_CM.steamid.BIsValid(),"CM has never been logged on, can't construct local storage key"),this.m_CM.steamid.BIsValid()?e+"_"+this.m_CM.steamid.GetAccountID():null},e.prototype.GetObjectFromLocalStorageWhenReady=function(e,t){var i=this;return this.m_bReady?Promise.resolve(this.GetObjectFromLocalStorage(e,t)):new Promise(function(n,r){i.RunOnReady(function(){n(i.GetObjectFromLocalStorage(e,t))})})},e.prototype.GetObjectFromLocalStorage=function(e,t){var i=this.GetAccountSpecificLocalStorageKey(e);return i?this.m_Storage.GetObject(i).then(function(e){var i=Object.assign({},t,e);if(t&&"object"==typeof t)for(var n in t)"object"==typeof t[n]&&e&&(i[n]=Object.assign({},t[n],e[n]));return i}):Promise.reject("Storage not ready")},e.prototype.StoreObjectInLocalStorage=function(e,t){var i=this.GetAccountSpecificLocalStorageKey(e);return!!i&&(this.m_Storage.StoreObject(i,t),!0)},e.prototype.GetFlagFromLocalStorageWhenReady=function(e){var t=this;return this.m_bReady?Promise.resolve(this.GetFlagFromLocalStorage(e)):new Promise(function(i,n){t.RunOnReady(function(){i(t.GetFlagFromLocalStorage(e))})})},e.prototype.GetFlagFromLocalStorage=function(e){var t=this.GetAccountSpecificLocalStorageKey(e);return t?this.m_Storage.GetString(t).then(function(e){return"true"===e}):Promise.reject("Storage not ready")},e.prototype.SetFlagInLocalStorage=function(e,t){var i=this.GetAccountSpecificLocalStorageKey(e);return!!i&&(t?this.m_Storage.StoreString(i,"true"):this.m_Storage.RemoveObject(i),!0)},e.prototype.SetReady=function(){if(this.m_bFriendSettingsReady&&this.m_CM.steamid.BIsValid()){this.m_bReady=!0;for(var e=0,t=this.m_rgOnReadyCallbacks;e<t.length;e++)(0,t[e])();this.m_rgOnReadyCallbacks=[]}},e.prototype.OnFriendSettingsChanged=function(e){this.m_FriendsSettings=e,this.m_bFriendSettingsReady=!0,this.SetReady()},Object.defineProperty(e.prototype,"CommunityPreferences",{get:function(){return this.m_CommunityPreferences},enumerable:!0,configurable:!0}),e.prototype.UpdateCommunityPreferences=function(e){var t=si.a({},this.m_CommunityPreferences);void 0!==e.hide_adult_content_violence()&&(t.bHideAdultContentViolence=e.hide_adult_content_violence()),void 0!==e.hide_adult_content_sex()&&(t.bHideAdultContentSex=e.hide_adult_content_sex()),void 0!==e.parenthesize_nicknames()&&(t.bParenthesizeNicknames=e.parenthesize_nicknames()),this.m_ServerCommunityPreferences=si.a({},t),this.m_CommunityPreferences=t},e.prototype.CommunityPreferencesToMessage=function(e){var t=new Os;return t.set_hide_adult_content_violence(e.bHideAdultContentViolence),t.set_hide_adult_content_sex(e.bHideAdultContentSex),t.set_parenthesize_nicknames(e.bParenthesizeNicknames),t},e.prototype.SetCommunityPreferences=function(e){var t=this;this.m_CommunityPreferences=e,this.m_unTimerUploadCommunityPreferences&&clearTimeout(this.m_unTimerUploadCommunityPreferences),this.m_unTimerUploadCommunityPreferences=SetBackgroundTimeout(function(){t.m_unTimerUploadCommunityPreferences=void 0,t.UploadCommunityPreferences()},5e3)},e.prototype.UploadCommunityPreferences=function(){var e=!1;if(void 0===this.m_ServerCommunityPreferences)e=!0;else for(var t=0,i=Object.keys(this.m_ServerCommunityPreferences);t<i.length;t++){var n=i[t];if(this.m_ServerCommunityPreferences[n]!==this.CommunityPreferences[n]){e=!0;break}}if(e){var r=fi.Init(Es);r.Body().set_preferences(this.CommunityPreferencesToMessage(this.CommunityPreferences)),Xa.SetCommunityPreferences(this.m_CM.GetServiceTransport(),r).then(function(e){})}},e.prototype.FillInChatUsabilityMetrics=function(e){var t=e.settings(),i=this.FriendsSettings;t.set_notifications_show_ingame(i.bNotifications_ShowIngame),t.set_notifications_show_online(i.bNotifications_ShowOnline),t.set_notifications_show_message(i.bNotifications_ShowMessage),t.set_notifications_events_and_announcements(i.bNotifications_EventsAndAnnouncements),t.set_sounds_play_ingame(i.bSounds_PlayIngame),t.set_sounds_play_online(i.bSounds_PlayOnline),t.set_sounds_play_message(i.bSounds_PlayMessage),t.set_sounds_events_and_announcements(i.bSounds_EventsAndAnnouncements),t.set_always_new_chat_window(i.bAlwaysNewChatWindow),t.set_force_alphabetic_friend_sorting(i.bForceAlphabeticFriendSorting),t.set_chat_flash_mode(i.nChatFlashMode),t.set_remember_open_chats(i.bRememberOpenChats),t.set_compact_quick_access(i.bCompactQuickAccess),t.set_compact_friends_list(i.bCompactFriendsList),t.set_notifications_show_chat_room_notification(i.bNotifications_ShowChatRoomNotification),t.set_sounds_play_chat_room_notification(i.bSounds_PlayChatRoomNotification),t.set_hide_offline_friends_in_tag_groups(i.bHideOfflineFriendsInTagGroups),t.set_hide_categorized_friends(i.bHideCategorizedFriends),t.set_categorize_in_game_friends_by_game(i.bCategorizeInGameFriendsByGame),t.set_chat_font_size(i.nChatFontSize),t.set_use24hour_clock(i.b24HourClock),t.set_do_not_disturb_mode(i.bDoNotDisturbMode),t.set_disable_embed_inlining(i.bDisableEmbedInlining),t.set_sign_into_friends(i.bSignIntoFriends)},si.c([_i.observable],e.prototype,"m_bReady",void 0),si.c([_i.observable],e.prototype,"m_FriendsSettings",void 0),si.c([_i.observable],e.prototype,"m_CommunityPreferences",void 0),si.c([_i.action],e.prototype,"BUpdateFriendsSettings",null),si.c([_i.action],e.prototype,"UpdateCommunityPreferences",null),si.c([_i.action],e.prototype,"SetCommunityPreferences",null),e}(),tu=function(){function e(e,t){this.m_SettingsStore=e,this.m_fnFriendSettingsChanged=t}return e}(),iu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.m_bClientInitComplete=!1,n.InternalInit(),n}return si.d(t,e),t.prototype.InternalInit=function(){this.m_bClientInitComplete||(SteamClient&&SteamClient.FriendSettings&&SteamClient.FriendSettings.RegisterForSettingsChanges?(SteamClient.FriendSettings.RegisterForSettingsChanges(this.OnClientSettingsChange.bind(this)),this.m_bClientInitComplete=!0):AssertMsg(!1,"Can't initialize settings from client"))},t.prototype.OnClientSettingsChange=function(e){var t,i=fl.DefaultFriendsSettings();if("string"!=typeof e){if(t=e.FriendsSettings,SteamClient.FriendSettings&&SteamClient.FriendSettings.SetFriendSettings)return void this.BUpdateSettings(t)}else t=JSON.parse(e,function(e,t){return"b"==e.substring(0,1)&&"number"==typeof t?0!=t:t});Object.assign(i,t),this.m_fnFriendSettingsChanged(i)},t.prototype.BUpdateSettings=function(e){if(SteamClient.FriendSettings&&SteamClient.FriendSettings.SetFriendSettings){var t=JSON.stringify(e);SteamClient.FriendSettings.SetFriendSettings(t)}else for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]!=this.m_SettingsStore.FriendsSettings[r])if("nChatFlashMode"==r)SteamClient.FriendSettings.SetChatFlashMode(e[r]);else{if("nChatFontSize"==r)continue;SteamClient.FriendSettings.SetSettingsValueBool(r,e[r])}}return!0},t}(tu),nu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.InternalInit=function(){var e=this;this.m_SettingsStore.GetObjectFromLocalStorage(t.k_strLocalStorageKeyPrefix,this.GetDefaultSettings()).then(function(t){e.m_fnFriendSettingsChanged(t.friendsSettings)})},t.prototype.GetDefaultSettings=function(){return{friendsSettings:fl.DefaultFriendsSettings()}},t.prototype.BUpdateSettings=function(e){var i={friendsSettings:e};return this.m_SettingsStore.StoreObjectInLocalStorage(t.k_strLocalStorageKeyPrefix,i)},t.k_strLocalStorageKeyPrefix="LocalStorageFriendsSettings",t}(tu),ru=i("PVtO"),ou=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_partner=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_partner(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CVoiceChat_RequestOneOnOneChat_Request"},t}(ui.Message),au=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CVoiceChat_RequestOneOnOneChat_Response"},t}(ui.Message),su=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid_partner=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_steamid_partner(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CVoiceChat_OneOnOneChatRequested_Notification"},t}(ui.Message),cu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid_partner=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,2,e)},t.prototype.accepted_request=function(){return ui.Message.getField(this,3)},t.prototype.set_accepted_request=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_steamid_partner(t.readFixed64String());break;case 3:e.set_accepted_request(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CVoiceChat_AnswerOneOnOneChat_Request"},t}(ui.Message),lu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CVoiceChat_AnswerOneOnOneChat_Response"},t}(ui.Message),uu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voicechat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_voicechat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.steamid_partner=function(){return ui.Message.getField(this,2)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,2,e)},t.prototype.accepted_request=function(){return ui.Message.getField(this,3)},t.prototype.set_accepted_request=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voicechat_id(t.readFixed64String());break;case 2:e.set_steamid_partner(t.readFixed64String());break;case 3:e.set_accepted_request(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CVoiceChat_OneOnOneChatRequestResponse_Notification"},t}(ui.Message),du=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_partner=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_partner(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CVoiceChat_EndOneOnOneChat_Request"},t}(ui.Message),pu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CVoiceChat_EndOneOnOneChat_Response"},t}(ui.Message),mu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid_partner=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid_partner=function(e){ui.Message.setField(this,1,e)},t.prototype.voice_chatid=function(){return ui.Message.getField(this,2)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid_partner(t.readFixed64String());break;case 2:e.set_voice_chatid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CVoiceChat_LeaveOneOnOneChat_Request"},t}(ui.Message),hu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CVoiceChat_LeaveOneOnOneChat_Response"},t}(ui.Message),gu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.user_steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_user_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.chatid=function(){return ui.Message.getField(this,3)},t.prototype.set_chatid=function(e){ui.Message.setField(this,3,e)},t.prototype.one_on_one_steamid_lower=function(){return ui.Message.getField(this,4)},t.prototype.set_one_on_one_steamid_lower=function(e){ui.Message.setField(this,4,e)},t.prototype.one_on_one_steamid_higher=function(){return ui.Message.getField(this,5)},t.prototype.set_one_on_one_steamid_higher=function(e){ui.Message.setField(this,5,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,6)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,6,e)},t.prototype.user_sessionid=function(){return ui.Message.getField(this,7)},t.prototype.set_user_sessionid=function(e){ui.Message.setField(this,7,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_user_steamid(t.readFixed64String());break;case 3:e.set_chatid(t.readUint64String());break;case 4:e.set_one_on_one_steamid_lower(t.readFixed64String());break;case 5:e.set_one_on_one_steamid_higher(t.readFixed64String());break;case 6:e.set_chat_group_id(t.readUint64String());break;case 7:e.set_user_sessionid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeFixed64String(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeFixed64String(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint64String(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeUint32(7,i)},t.prototype.getClassName=function(){return"CVoiceChat_UserJoinedVoiceChat_Notification"},t}(ui.Message),fu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.user_steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_user_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.user_muted_mic_locally=function(){return ui.Message.getField(this,3)},t.prototype.set_user_muted_mic_locally=function(e){ui.Message.setField(this,3,e)},t.prototype.user_muted_output_locally=function(){return ui.Message.getField(this,4)},t.prototype.set_user_muted_output_locally=function(e){ui.Message.setField(this,4,e)},t.prototype.user_has_no_mic_for_session=function(){return ui.Message.getField(this,5)},t.prototype.set_user_has_no_mic_for_session=function(e){ui.Message.setField(this,5,e)},t.prototype.user_webaudio_sample_rate=function(){return ui.Message.getField(this,6)},t.prototype.set_user_webaudio_sample_rate=function(e){ui.Message.setField(this,6,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_user_steamid(t.readFixed64String());break;case 3:e.set_user_muted_mic_locally(t.readBool());break;case 4:e.set_user_muted_output_locally(t.readBool());break;case 5:e.set_user_has_no_mic_for_session(t.readBool());break;case 6:e.set_user_webaudio_sample_rate(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBool(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeBool(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),void 0!==(i=ui.Message.getField(e,6))&&t.writeInt32(6,i)},t.prototype.getClassName=function(){return"CVoiceChat_UserVoiceStatus_Notification"},t}(ui.Message),_u=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[2],null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.users=function(){return ui.Message.getRepeatedWrapperField(this,fu,2)},t.prototype.set_users=function(e){ui.Message.setRepeatedWrapperField(this,2,e)},t.prototype.add_users=function(e,t){return ui.Message.addToRepeatedWrapperField(this,2,e,fu,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:var i=new fu;t.readMessage(i,fu.deserializeBinaryFromReader),e.add_users(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=e.users(),i.length>0&&t.writeRepeatedMessage(2,i,fu.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CVoiceChat_AllMembersStatus_Notification"},t}(ui.Message),yu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.ip_webrtc_server=function(){return ui.Message.getField(this,2)},t.prototype.set_ip_webrtc_server=function(e){ui.Message.setField(this,2,e)},t.prototype.port_webrtc_server=function(){return ui.Message.getField(this,3)},t.prototype.set_port_webrtc_server=function(e){ui.Message.setField(this,3,e)},t.prototype.ip_webrtc_client=function(){return ui.Message.getField(this,4)},t.prototype.set_ip_webrtc_client=function(e){ui.Message.setField(this,4,e)},t.prototype.port_webrtc_client=function(){return ui.Message.getField(this,5)},t.prototype.set_port_webrtc_client=function(e){ui.Message.setField(this,5,e)},t.prototype.ssrc_my_sending_stream=function(){return ui.Message.getField(this,6)},t.prototype.set_ssrc_my_sending_stream=function(e){ui.Message.setField(this,6,e)},t.prototype.user_agent=function(){return ui.Message.getField(this,7)},t.prototype.set_user_agent=function(e){ui.Message.setField(this,7,e)},t.prototype.has_audio_worklets_support=function(){return ui.Message.getField(this,8)},t.prototype.set_has_audio_worklets_support=function(e){ui.Message.setField(this,8,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_ip_webrtc_server(t.readUint32());break;case 3:e.set_port_webrtc_server(t.readUint32());break;case 4:e.set_ip_webrtc_client(t.readUint32());break;case 5:e.set_port_webrtc_client(t.readUint32());break;case 6:e.set_ssrc_my_sending_stream(t.readUint32());break;case 7:e.set_user_agent(t.readString());break;case 8:e.set_has_audio_worklets_support(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeUint32(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeString(7,i),void 0!==(i=ui.Message.getField(e,8))&&t.writeBool(8,i)},t.prototype.getClassName=function(){return"CVoiceChat_UpdateVoiceChatWebRTCData_Request"},t}(ui.Message),vu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.send_client_voice_logs=function(){return ui.Message.getField(this,1)},t.prototype.set_send_client_voice_logs=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_send_client_voice_logs(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeBool(1,i)},t.prototype.getClassName=function(){return"CVoiceChat_UpdateVoiceChatWebRTCData_Response"},t}(ui.Message),bu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.client_voice_logs_new_lines=function(){return ui.Message.getField(this,2)},t.prototype.set_client_voice_logs_new_lines=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_client_voice_logs_new_lines(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CVoiceChat_UploadClientVoiceChatLogs_Request"},t}(ui.Message),Cu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CVoiceChat_UploadClientVoiceChatLogs_Response"},t}(ui.Message),Su=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CVoiceChat_LeaveVoiceChat_Response"},t}(ui.Message)),Mu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.user_steamid=function(){return ui.Message.getField(this,2)},t.prototype.set_user_steamid=function(e){ui.Message.setField(this,2,e)},t.prototype.chatid=function(){return ui.Message.getField(this,3)},t.prototype.set_chatid=function(e){ui.Message.setField(this,3,e)},t.prototype.one_on_one_steamid_lower=function(){return ui.Message.getField(this,4)},t.prototype.set_one_on_one_steamid_lower=function(e){ui.Message.setField(this,4,e)},t.prototype.one_on_one_steamid_higher=function(){return ui.Message.getField(this,5)},t.prototype.set_one_on_one_steamid_higher=function(e){ui.Message.setField(this,5,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,6)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,6,e)},t.prototype.user_sessionid=function(){return ui.Message.getField(this,7)},t.prototype.set_user_sessionid=function(e){ui.Message.setField(this,7,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_user_steamid(t.readFixed64String());break;case 3:e.set_chatid(t.readUint64String());break;case 4:e.set_one_on_one_steamid_lower(t.readFixed64String());break;case 5:e.set_one_on_one_steamid_higher(t.readFixed64String());break;case 6:e.set_chat_group_id(t.readUint64String());break;case 7:e.set_user_sessionid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeFixed64String(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeFixed64String(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint64String(6,i),void 0!==(i=ui.Message.getField(e,7))&&t.writeUint32(7,i)},t.prototype.getClassName=function(){return"CVoiceChat_UserLeftVoiceChat_Notification"},t}(ui.Message),Fu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.voice_chatid=function(){return ui.Message.getField(this,1)},t.prototype.set_voice_chatid=function(e){ui.Message.setField(this,1,e)},t.prototype.one_on_one_steamid_lower=function(){return ui.Message.getField(this,2)},t.prototype.set_one_on_one_steamid_lower=function(e){ui.Message.setField(this,2,e)},t.prototype.one_on_one_steamid_higher=function(){return ui.Message.getField(this,3)},t.prototype.set_one_on_one_steamid_higher=function(e){ui.Message.setField(this,3,e)},t.prototype.chatid=function(){return ui.Message.getField(this,4)},t.prototype.set_chatid=function(e){ui.Message.setField(this,4,e)},t.prototype.chat_group_id=function(){return ui.Message.getField(this,5)},t.prototype.set_chat_group_id=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_voice_chatid(t.readFixed64String());break;case 2:e.set_one_on_one_steamid_lower(t.readFixed64String());break;case 3:e.set_one_on_one_steamid_higher(t.readFixed64String());break;case 4:e.set_chatid(t.readUint64String());break;case 5:e.set_chat_group_id(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeFixed64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint64String(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint64String(5,i)},t.prototype.getClassName=function(){return"CVoiceChat_VoiceChatEnded_Notification"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("VoiceChat.UpdateVoiceChatWebRTCData#1",t,vu)}function i(e,t){return e.SendNotification("VoiceChat.NotifyUserVoiceStatus#1",t)}function n(e,t){return e.SendMsg("VoiceChat.UploadClientVoiceChatLogs#1",t,Cu)}function r(e,t){return e.SendMsg("VoiceChat.LeaveVoiceChat#1",t,Su)}function o(e,t){return e.SendMsg("VoiceChat.RequestOneOnOneChat#1",t,au)}function a(e,t){return e.SendMsg("VoiceChat.AnswerOneOnOneChat#1",t,lu)}function s(e,t){return e.SendMsg("VoiceChat.EndOneOnOneChat#1",t,pu)}function c(e,t){return e.SendMsg("VoiceChat.LeaveOneOnOneChat#1",t,hu)}e.UpdateVoiceChatWebRTCData=t,e.NotifyUserVoiceStatus=i,e.UploadClientVoiceChatLogs=n,e.LeaveVoiceChat=r,e.RequestOneOnOneChat=o,e.AnswerOneOnOneChat=a,e.EndOneOnOneChat=s,e.LeaveOneOnOneChat=c}(Zl||(Zl={}));var wu;!function(e){e.NotifyUserJoinedVoiceChatHandler={name:"VoiceChatClient.NotifyUserJoinedVoiceChat#1",request:gu},e.NotifyUserLeftVoiceChatHandler={name:"VoiceChatClient.NotifyUserLeftVoiceChat#1",request:Mu},e.NotifyVoiceChatEndedHandler={name:"VoiceChatClient.NotifyVoiceChatEnded#1",request:Fu},e.NotifyUserVoiceStatusHandler={name:"VoiceChatClient.NotifyUserVoiceStatus#1",request:fu},e.NotifyAllUsersVoiceStatusHandler={name:"VoiceChatClient.NotifyAllUsersVoiceStatus#1",request:_u},e.NotifyOneOnOneChatRequestedHandler={name:"VoiceChatClient.NotifyOneOnOneChatRequested#1",request:su},e.NotifyOneOnOneChatResponseHandler={name:"VoiceChatClient.NotifyOneOnOneChatResponse#1",request:uu}}(wu||(wu={}));var Bu,Ou=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.sdp=function(){return ui.Message.getField(this,1)},t.prototype.set_sdp=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_sdp(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CWebRTCClient_InitiateWebRTCConnection_Request"},t}(ui.Message),Iu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.remote_description=function(){return ui.Message.getField(this,1)},t.prototype.set_remote_description=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_remote_description(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CWebRTCClient_InitiateWebRTCConnection_Response"},t}(ui.Message),Ru=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.ssrc=function(){return ui.Message.getField(this,1)},t.prototype.set_ssrc=function(e){ui.Message.setField(this,1,e)},t.prototype.client_ip=function(){return ui.Message.getField(this,2)},t.prototype.set_client_ip=function(e){ui.Message.setField(this,2,e)},t.prototype.client_port=function(){return ui.Message.getField(this,3)},t.prototype.set_client_port=function(e){ui.Message.setField(this,3,e)},t.prototype.server_ip=function(){return ui.Message.getField(this,4)},t.prototype.set_server_ip=function(e){ui.Message.setField(this,4,e)},t.prototype.server_port=function(){return ui.Message.getField(this,5)},t.prototype.set_server_port=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_ssrc(t.readUint32());break;case 2:e.set_client_ip(t.readUint32());break;case 3:e.set_client_port(t.readUint32());break;case 4:e.set_server_ip(t.readUint32());break;case 5:e.set_server_port(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CWebRTC_WebRTCSessionConnected_Notification"},t}(ui.Message),Eu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[3],null),i}return si.d(t,e),t.prototype.remote_description=function(){return ui.Message.getField(this,1)},t.prototype.set_remote_description=function(e){ui.Message.setField(this,1,e)},t.prototype.remote_description_version=function(){return ui.Message.getField(this,2)},t.prototype.set_remote_description_version=function(e){ui.Message.setField(this,2,e)},t.prototype.ssrcs_to_accountids=function(){return ui.Message.getRepeatedWrapperField(this,Tu,3)},t.prototype.set_ssrcs_to_accountids=function(e){ui.Message.setRepeatedWrapperField(this,3,e)},t.prototype.add_ssrcs_to_accountids=function(e,t){return ui.Message.addToRepeatedWrapperField(this,3,e,Tu,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_remote_description(t.readString());break;case 2:e.set_remote_description_version(t.readUint64String());break;case 3:var i=new Tu;t.readMessage(i,Tu.deserializeBinaryFromReader),e.add_ssrcs_to_accountids(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint64String(2,i),i=e.ssrcs_to_accountids(),i.length>0&&t.writeRepeatedMessage(3,i,Tu.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CWebRTC_WebRTCUpdateRemoteDescription_Notification"},t}(ui.Message),Tu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.ssrc=function(){return ui.Message.getField(this,1)},t.prototype.set_ssrc=function(e){ui.Message.setField(this,1,e)},t.prototype.accountid=function(){return ui.Message.getField(this,2)},t.prototype.set_accountid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_ssrc(t.readUint32());break;case 2:e.set_accountid(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeUint32(2,i)},t.prototype.getClassName=function(){return"CWebRTC_WebRTCUpdateRemoteDescription_Notification_CSSRCToAccountIDMapping"},t}(ui.Message),ku=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.ip_webrtc_server=function(){return ui.Message.getField(this,1)},t.prototype.set_ip_webrtc_server=function(e){ui.Message.setField(this,1,e)},t.prototype.port_webrtc_server=function(){return ui.Message.getField(this,2)},t.prototype.set_port_webrtc_server=function(e){ui.Message.setField(this,2,e)},t.prototype.ip_webrtc_session_client=function(){return ui.Message.getField(this,3)},t.prototype.set_ip_webrtc_session_client=function(e){ui.Message.setField(this,3,e)},t.prototype.port_webrtc_session_client=function(){return ui.Message.getField(this,4)},t.prototype.set_port_webrtc_session_client=function(e){ui.Message.setField(this,4,e)},t.prototype.remote_description_version=function(){return ui.Message.getField(this,5)},t.prototype.set_remote_description_version=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_ip_webrtc_server(t.readUint32());break;case 2:e.set_port_webrtc_server(t.readUint32());break;case 3:e.set_ip_webrtc_session_client(t.readUint32());break;case 4:e.set_port_webrtc_session_client(t.readUint32());break;case 5:e.set_remote_description_version(t.readUint64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint64String(5,i)},t.prototype.getClassName=function(){return"CWebRTCClient_AcknowledgeUpdatedRemoteDescription_Request"},t}(ui.Message),Du=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CWebRTCClient_AcknowledgeUpdatedRemoteDescription_Response"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("WebRTCClient.InitiateWebRTCConnection#1",t,Iu)}function i(e,t){return e.SendMsg("WebRTCClient.AcknowledgeUpdatedRemoteDescription#1",t,Du)}e.InitiateWebRTCConnection=t,e.AcknowledgeUpdatedRemoteDescription=i}(Bu||(Bu={}));var Gu;!function(e){e.NotifyWebRTCSessionConnectedHandler={name:"WebRTCClientNotifications.NotifyWebRTCSessionConnected#1",request:Ru},e.NotifyWebRTCUpdateRemoteDescriptionHandler={name:"WebRTCClientNotifications.NotifyWebRTCUpdateRemoteDescription#1",request:Eu}}(Gu||(Gu={}));var Nu,Lu=function(){function e(e,t){if(!(e instanceof BaseAudioContext))throw"Not a valid audio context.";t||(t={});var i=t.numberOfChannels||1;if(i>2)throw"The maximum supported number of channels is two.";this.context_=e;var n=t.bufferSize||0;this.attack=t.attack||0,this.release=t.release||0;var r=void 0===t.timeConstant?.0025:t.timeConstant;this.threshold=void 0===t.threshold?-100:t.threshold,this.alpha_=this.getAlphaFromTimeConstant_(r,this.context_.sampleRate),this.noiseGateKernel_=this.context_.createScriptProcessor(n,i,i),this.noiseGateKernel_.onaudioprocess=this.onaudioprocess_.bind(this),this.input=new GainNode(this.context_),this.output=new GainNode(this.context_),this.input.connect(this.noiseGateKernel_).connect(this.output),this.previousLevel_=0,this.previousWeight_=1,this.channel_=new Float32Array(this.noiseGateKernel_.bufferSize),this.envelope_=new Float32Array(this.noiseGateKernel_.bufferSize),this.weights_=new Float32Array(this.noiseGateKernel_.bufferSize)}return e.prototype.onaudioprocess_=function(e){var t=e.inputBuffer,i=t.getChannelData(0);if(2===t.numberOfChannels)for(var n=t.getChannelData(1),r=0;r<n.length;r++)this.channel_[r]=(i[r]+n[r])/2;else this.channel_=i;for(var o=this.detectLevel_(this.channel_),a=this.computeWeights_(o),r=0;r<t.numberOfChannels;r++)for(var s=t.getChannelData(r),c=e.outputBuffer.getChannelData(r),l=0;l<s.length;l++)c[l]=a[l]*s[l]},e.prototype.detectLevel_=function(e){this.envelope_[0]=this.alpha_*this.previousLevel_+(1-this.alpha_)*Math.pow(e[0],2);for(var t=1;t<e.length;t++)this.envelope_[t]=this.alpha_*this.envelope_[t-1]+(1-this.alpha_)*Math.pow(e[t],2);return this.previousLevel_=this.envelope_[this.envelope_.length-1],this.envelope_},e.prototype.computeWeights_=function(t){var i=1,n=1,r=1,o=1;this.attack>0&&(i=Math.ceil(this.context_.sampleRate*this.attack),r=1/i),this.release>0&&(n=Math.ceil(this.context_.sampleRate*this.release),o=1/n);for(var a=0;a<t.length;a++){if(e.toDecibel(2*t[a])<this.threshold){var s=this.previousWeight_-r;this.weights_[a]=Math.max(s,0)}else{var s=this.previousWeight_+o;this.weights_[a]=Math.min(s,1)}this.previousWeight_=this.weights_[a]}return this.weights_},e.prototype.getAlphaFromTimeConstant_=function(e,t){return Math.exp(-1/(t*e))},e.toDecibel=function(e){return 10*Math.log10(e)},e}(),Au=function(){function e(e,t){this.m_Analyser=void 0,this.m_rgInputNode=[],this.m_hUpdateInterval=0,this.m_buffer=void 0,this.m_lastTimeNonZero=0,this.m_flVolume=0,this.m_flRoundedVolume=0,this.m_flAveraging=.6,this.m_Analyser=t.createAnalyser(),this.m_Analyser.fftSize=128,this.m_buffer=new Float32Array(this.m_Analyser.fftSize),this.m_rgInputNode.push(e),e.connect(this.m_Analyser),this.StartUpdating()}return e.prototype.GetLastTimeNonZero=function(){return this.m_lastTimeNonZero},e.prototype.StartUpdating=function(){this.StopUpdating(),this.m_hUpdateInterval=SetBackgroundInterval(this.UpdateVolume,60)},e.prototype.StopUpdating=function(){0!=this.m_hUpdateInterval&&ClearBackgroundInterval(this.m_hUpdateInterval),this.m_hUpdateInterval=0},e.prototype.UpdateVolume=function(){this.m_Analyser.getFloatTimeDomainData(this.m_buffer);for(var e=0,t=0;t<this.m_buffer.length;++t){var i=this.m_buffer[t];e+=i*i}var n=Math.sqrt(e/this.m_buffer.length);this.m_flVolume=1.2*Math.max(n,this.m_flVolume*this.m_flAveraging);var r=Math.round(100*this.m_flVolume)/100;r!=this.m_flRoundedVolume&&(this.m_flRoundedVolume=r),this.m_flRoundedVolume>0&&(this.m_lastTimeNonZero=performance.now())},e.prototype.stop=function(){this.StopUpdating(),this.DisconnectAll()},e.prototype.Connect=function(e){this.m_rgInputNode.push(e),void 0!=this.m_Analyser&&e.connect(this.m_Analyser)},e.prototype.DisconnectAll=function(){for(var e=0;e<this.m_rgInputNode.length;++e){if(this.m_Analyser)try{this.m_rgInputNode[e].disconnect(this.m_Analyser)}catch(e){}this.m_rgInputNode[e]=void 0}this.m_rgInputNode=[]},Object.defineProperty(e.prototype,"rounded_volume",{get:function(){return this.m_flRoundedVolume},enumerable:!0,configurable:!0}),si.c([_i.observable],e.prototype,"m_lastTimeNonZero",void 0),si.c([_i.observable],e.prototype,"m_flVolume",void 0),si.c([_i.observable],e.prototype,"m_flRoundedVolume",void 0),si.c([_i.action.bound],e.prototype,"UpdateVolume",null),si.c([_i.action.bound],e.prototype,"stop",null),e}(),Pu=i("GCDA"),xu=i.n(Pu);!function(e){e[e.k_EAudioStreamType_Microphone=1]="k_EAudioStreamType_Microphone",e[e.k_EAudioStreamType_IncomingStream=2]="k_EAudioStreamType_IncomingStream"}(Nu||(Nu={}));var zu,Uu=function(){function e(){this.destination_node=void 0,this.source_node=void 0,this.elem=void 0,this.output_gain_node=void 0,this.muted=!1,this.volume_meter=void 0}return si.c([_i.observable],e.prototype,"muted",void 0),si.c([_i.observable],e.prototype,"volume_meter",void 0),e}();!function(e){e[e.k_ENoiseGateLevel_Off=0]="k_ENoiseGateLevel_Off",e[e.k_ENoiseGateLevel_Low=1]="k_ENoiseGateLevel_Low",e[e.k_ENoiseGateLevel_Medium=2]="k_ENoiseGateLevel_Medium",e[e.k_ENoiseGateLevel_High=3]="k_ENoiseGateLevel_High"}(zu||(zu={}));var Vu;!function(e){e[e.k_EVoiceCallState_None=0]="k_EVoiceCallState_None",e[e.k_EVoiceCallState_ScheduledInitiate=1]="k_EVoiceCallState_ScheduledInitiate",e[e.k_EVoiceCallState_RequestedMicAccess=2]="k_EVoiceCallState_RequestedMicAccess",e[e.k_EVoiceCallState_CreatePeerConnection=3]="k_EVoiceCallState_CreatePeerConnection",e[e.k_EVoiceCallState_InitatedWebRTCSession=4]="k_EVoiceCallState_InitatedWebRTCSession",e[e.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected=5]="k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected",e[e.k_EVoiceCallState_RequestedPermission=6]="k_EVoiceCallState_RequestedPermission",e[e.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession=7]="k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession",e[e.k_EVoiceCallState_Connected=8]="k_EVoiceCallState_Connected"}(Vu||(Vu={}));var ju,Wu=function(){function e(){this.m_eState=Vu.k_EVoiceCallState_None,this.m_targetAccountID=0,this.m_bInitiatedOneOnOneCall=!1,this.m_bWaitingOnOneOnOneRejoin=!1,this.m_bPostedOneOnOneEndedMsg=!1,this.m_voiceChatID="",this.m_webRTCConnectedNotification=void 0,this.m_webRTCServerIP=0,this.m_webRTCServerPort=0,this.m_webRTCClientIP=0,this.m_webRTCClientPort=0,this.m_nFailuresThisInitiate=0,this.m_bOfferUpdateInProgress=!1,this.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_nMostRecentRemoteDescriptionVersion="0"}return e.prototype.BMatchingCall=function(e,t){return 0!=e&&this.m_targetAccountID==e||!(!this.m_chatRoom||!t||this.m_chatRoom.chatID!=t.chatID||this.m_chatRoom.groupID!=t.groupID)},e.prototype.BCallActiveForGroup=function(e){return this.m_chatRoom&&this.m_chatRoom.groupID==e},si.c([_i.observable],e.prototype,"m_eState",void 0),si.c([_i.observable],e.prototype,"m_targetAccountID",void 0),si.c([_i.observable],e.prototype,"m_bInitiatedOneOnOneCall",void 0),si.c([_i.observable],e.prototype,"m_bWaitingOnOneOnOneRejoin",void 0),si.c([_i.observable],e.prototype,"m_bPostedOneOnOneEndedMsg",void 0),si.c([_i.observable],e.prototype,"m_chatRoom",void 0),si.c([_i.observable],e.prototype,"m_voiceChatID",void 0),si.c([_i.observable],e.prototype,"m_nFailuresThisInitiate",void 0),si.c([_i.observable],e.prototype,"m_bIsConnectionAttemptOverTwoSeconds",void 0),e}(),Hu=function(){function e(){this.m_SSRC=0,this.m_MostRecentDelayEstimateMs=0,this.m_MostRecentJitterReceivedMs=0,this.m_CurrentJitterBufferMs=0,this.m_PacketsReceived=0,this.m_PacketsLost=0,this.m_PacketsSent=0,this.m_BytesSent=0,this.m_googRTT=0,this.m_BytesReceived=0,this.m_DecodingThroughNetEQ=0,this.m_DecodingPacketLossCorrection=0,this.m_DecodingPacketLossFadeNoiseGeneration=0,this.m_DecodingComfortNoiseGeneration=0,this.m_DecodingNormal=0,this.m_DecodingSilenceGenerator=0,this.m_DecodingMuted=0}return e}(),qu=function(){function e(e){this.m_VoiceInputGain=1,this.m_VoiceOutputGain=1,this.m_NoiseGateLevel=zu.k_ENoiseGateLevel_Medium,this.m_VoiceUseEchoCancellation=!0,this.m_VoiceUseNoiseCancellation=!0,this.m_VoiceUseAutoGainControl=!0,this.m_SelectedMicID="default",this.m_SelectedOutputID="default",this.m_bPlayPTTSounds=!0,this.m_SettingsStore=e}return e.prototype.SaveToLocalStorage=function(){this.m_SettingsStore.StoreObjectInLocalStorage("SteamVoiceSettings",{inputGain:this.m_VoiceInputGain,outputGain:this.m_VoiceOutputGain,noiseGateLevel:this.m_NoiseGateLevel,noiseCancellation:this.m_VoiceUseNoiseCancellation,echoCancellation:this.m_VoiceUseEchoCancellation,autoGainControl:this.m_VoiceUseAutoGainControl,selectedMic:this.m_SelectedMicID,selectedOutput:this.m_SelectedOutputID,pttSoundsEnabled:this.m_bPlayPTTSounds})},e.prototype.LoadFromLocalStorage=function(e){var t=this;this.m_SettingsStore.GetObjectFromLocalStorageWhenReady("SteamVoiceSettings",void 0).then(function(i){void 0!=i&&(void 0!=i.inputGain&&(t.m_VoiceInputGain=i.inputGain),void 0!=i.outputGain&&(t.m_VoiceOutputGain=i.outputGain),void 0!=i.noiseGateLevel&&(t.m_NoiseGateLevel=i.noiseGateLevel),void 0!=i.noiseCancellation&&(t.m_VoiceUseNoiseCancellation=i.noiseCancellation),void 0!=i.autoGainControl&&(t.m_VoiceUseAutoGainControl=i.autoGainControl),void 0!=i.echoCancellation&&(t.m_VoiceUseEchoCancellation=i.echoCancellation),void 0!=i.selectedMic&&(t.m_SelectedMicID=i.selectedMic),void 0!=i.selectedOutput&&(t.m_SelectedOutputID=i.selectedOutput),void 0!=i.pttSoundsEnabled&&(t.m_bPlayPTTSounds=i.pttSoundsEnabled)),e.LogMsg("(VoiceChat) Settings loaded from local storage")})},si.c([_i.observable],e.prototype,"m_VoiceInputGain",void 0),si.c([_i.observable],e.prototype,"m_VoiceOutputGain",void 0),si.c([_i.observable],e.prototype,"m_NoiseGateLevel",void 0),si.c([_i.observable],e.prototype,"m_VoiceUseEchoCancellation",void 0),si.c([_i.observable],e.prototype,"m_VoiceUseNoiseCancellation",void 0),si.c([_i.observable],e.prototype,"m_VoiceUseAutoGainControl",void 0),si.c([_i.observable],e.prototype,"m_SelectedMicID",void 0),si.c([_i.observable],e.prototype,"m_SelectedOutputID",void 0),si.c([_i.observable],e.prototype,"m_bPlayPTTSounds",void 0),e}(),Ku=function(){function e(){this.muted=!1,this.gain=1}return si.c([_i.observable],e.prototype,"muted",void 0),si.c([_i.observable],e.prototype,"gain",void 0),e}(),Ju=function(){function e(){this.mic_muted_locally=!1,this.output_muted_locally=!1,this.has_no_mic_for_session=!1}return si.c([_i.observable],e.prototype,"mic_muted_locally",void 0),si.c([_i.observable],e.prototype,"output_muted_locally",void 0),si.c([_i.observable],e.prototype,"has_no_mic_for_session",void 0),e}(),Yu=function(){function e(){this.partner_accountid=0,this.voice_chatid="",this.previously_joined=!1,this.audio_repeat=0,this.audio_buffer=void 0}return e.prototype.ClearAudioRepeats=function(){0!=this.audio_repeat&&(ClearBackgroundTimeout(this.audio_repeat),this.audio_repeat=0),void 0!=this.audio_buffer&&(this.audio_buffer.StopPlayback(),this.audio_buffer=void 0)},si.c([_i.observable],e.prototype,"partner_accountid",void 0),si.c([_i.observable],e.prototype,"voice_chatid",void 0),si.c([_i.observable],e.prototype,"previously_joined",void 0),e}(),Xu=function(){function e(e){var t=this;this.m_VoiceCallState=new Wu,this.m_mapOneOnOneCallsWaitingJoinOrAccept=_i.observable.map(),this.m_hRegisterForPushToTalkStateChange=null,this.m_bPushToTalkEnabled=!1,this.m_bPushToMuteEnabled=!1,this.m_bVoicePTTStateEnabled=!1,this.m_VKPushToTalkHotKey=0,this.m_strPushToTalkDisplayString="",this.m_hPushToTalkReleaseTimeout=0,this.m_ConnectionCheck=0,this.m_ScheduledInitiate=0,this.m_ScheduledVoiceLogsUpload=0,this.m_bClientSideLogsUploadInProgress=!1,this.m_nLastLogLineUploaded=0,this.m_StatsTimeout=0,this.m_bUserHasDeniedMicPermissions=!1,this.m_bOutputMuted=!1,this.m_AudioContext=void 0,this.m_rgAudioStreams=Object(_i.observable)([]),this.m_MicVolumeMeter=void 0,this.m_MicNoiseGate=void 0,this.m_MicInputGainNode=void 0,this.m_rgLogLines=[],this.m_mapSSRCToAccountID=new Map,this.m_mapAccountIDToStats=new Map,this.m_mapPerUserOutputGain=_i.observable.map(),this.m_mapUserVoiceStatus=_i.observable.map(),this.m_LogVoiceChatDetails=!1,this.m_VoiceEchoLocalMic=!1,this.m_bForceConnectingStatus=!1,this.m_bForceReconnectingStatus=!1,this.m_OnWebRTCUpdateRemoteDescriptionHandler=c(Gu.NotifyWebRTCUpdateRemoteDescriptionHandler,function(e){return t.m_VoiceCallState.m_eState<Vu.k_EVoiceCallState_InitatedWebRTCSession?(t.LogMsg("(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler in wrong state "+t.m_VoiceCallState.m_eState),2):(t.m_VoiceCallState.m_bOfferUpdateInProgress?(t.LogMsg("(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler while already updating, queing work"),t.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=e.Body()):t.ProcessUpdatedRemoteDescription(e.Body()),1)}),this.m_OnWebRTCConnectionHandler=c(Gu.NotifyWebRTCSessionConnectedHandler,function(e){return t.m_VoiceCallState.m_eState<Vu.k_EVoiceCallState_InitatedWebRTCSession?(t.LogMsg("(WebRTC) Hit NotifyWebRTCSessionConnectedHandler in wrong state "+t.m_VoiceCallState.m_eState),2):(t.m_VoiceCallState.m_webRTCConnectedNotification=e.Body(),t.m_VoiceCallState.m_webRTCServerIP=t.m_VoiceCallState.m_webRTCConnectedNotification.server_ip(),t.m_VoiceCallState.m_webRTCServerPort=t.m_VoiceCallState.m_webRTCConnectedNotification.server_port(),t.m_VoiceCallState.m_webRTCClientIP=t.m_VoiceCallState.m_webRTCConnectedNotification.client_ip(),t.m_VoiceCallState.m_webRTCClientPort=t.m_VoiceCallState.m_webRTCConnectedNotification.client_port(),"completed"==t.m_PeerConnection.iceConnectionState||"connected"==t.m_PeerConnection.iceConnectionState?(t.LogMsg("(VoiceChat) ICE state is already connected after successful SetRemoteDescription, joining voice chat immediately"),t.JoinVoiceChatOrAskForOneOnOneChatNow()):(t.LogMsg("(VoiceChat) ICE state is not connected after successful SetRemoteDescription, waiting for UDP connetivity"),t.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected),1)}),this.m_OnVoiceAllUsersStatusUpdate=c(wu.NotifyAllUsersVoiceStatusHandler,function(e){if(t.m_VoiceCallState.m_voiceChatID!=e.Body().voice_chatid())return 1;for(var i=0;i<e.Body().users().length;++i){var n=e.Body().users()[i];t.UpdateUserVoiceStatus(n)}return 1}),this.m_OnVoiceStatusUpdate=c(wu.NotifyUserVoiceStatusHandler,function(e){return t.UpdateUserVoiceStatus(e.Body()),1}),this.m_VoiceChatResponseHandler=c(wu.NotifyOneOnOneChatResponseHandler,function(e){if(t.m_VoiceCallState.m_eState>=Vu.k_EVoiceCallState_RequestedPermission){var i=new hi.a(e.Body().steamid_partner());if(e.Body().voicechat_id()!=t.m_VoiceCallState.m_voiceChatID)t.LogMsg("(VoiceChat) Got response from "+i.GetAccountID()+" but for different voice chat than we are in, ignoring. ");else if(i.GetAccountID()==t.m_VoiceCallState.m_targetAccountID&&1==e.Body().accepted_request())t.LogMsg("(VoiceChat) Got acceptance from "+i.GetAccountID()+" "+e.Hdr().steamid()),wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_enter.m4a?v=1"),t.OnVoiceChatAccepted(!0);else{t.LogMsg("(VoiceChat) Rejected by "+i.GetAccountID());var n=wd.ChatStore.GetFriendChat(i.GetAccountID(),!1),r=wd.FriendStore.GetFriend(i.GetAccountID());void 0!=n&&void 0!=r&&(t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,n.AddVoiceChannelInviteMsg(i.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEndedExplicit",r.display_name))),t.DeleteOneOnOneCallWaitingJoinOrAccept(i.GetAccountID()),wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1"),t.OnVoiceChatAccepted(!1)}}return 1}),this.m_IncomingVoiceChatRequestHandler=c(wu.NotifyOneOnOneChatRequestedHandler,function(e){var i=new hi.a(e.Body().steamid_partner()),n=e.Body().voice_chatid(),r=wd.FriendStore.GetFriend(i.GetAccountID());if(null==r||r.is_blocked||wd.FriendStore.BIsInvisibleMode()||wd.FriendStore.GetUserDoNotDisturb())return t.LogMsg("(VoiceChat) Rejecting one-on-one voice chat request because partner is not a friend, is blocked, we are invisible, or we are DND"),t.OnRejectOneOnOneVoiceChat(i,e.Body().voice_chatid()),1;var o=new Yu;o.partner_accountid=t.m_CMInterface.steamid.GetAccountID(),o.voice_chatid=n,o.previously_joined=!1;var a=t;if(o.audio_repeat=SetBackgroundTimeout(function(){o.audio_repeat=0,a.PlayRingSound(i.GetAccountID())},2e4),t.m_mapOneOnOneCallsWaitingJoinOrAccept.set(i.GetAccountID(),o),t.LogMsg("(VoiceChat) voice chat request from "+i.GetAccountID()),t.LogMsg("(VoiceChat) current state "+t.m_VoiceCallState.m_eState),t.m_VoiceCallState.m_targetAccountID==i.GetAccountID())return t.LogMsg("(VoiceChat) We are already trying to one on one chat this user, just auto-acceptting to re-sync."),t.OnAcceptOneOnOneVoiceChat(i,n),1;wd.NotificationManager.DisplayNotificationFromFriend(r,{title:r.display_name,body:Object(ua.b)("#Friend_RequestingOneOnOneChat",r.display_name),tag:"state_"+r.accountid,steamid:r.persona.m_steamid.ConvertTo64BitString()});var s=wd.ChatStore.GetFriendChat(i.GetAccountID(),!0);return void 0!=s&&(s.AddVoiceChannelInviteMsg(i.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelInvite",r.display_name,s.self.display_name)),wd.UIStore.ShowAndOrActivateChat(wd.GetDefaultBrowserContext(),s,!1)),t.PlayRingSound(r.accountid),1}),this.m_VoiceChatEndedHandler=c(wu.NotifyVoiceChatEndedHandler,function(e){for(var i=e.Body().voice_chatid(),n=0,r=Array.from(t.m_mapOneOnOneCallsWaitingJoinOrAccept.keys());n<r.length;n++){var o=r[n],a=t.m_mapOneOnOneCallsWaitingJoinOrAccept.get(o);if(void 0!=a&&a.voice_chatid==i){t.LogMsg("(VoiceChat) OneOnOne VoiceChat we were invited too with "+o+" has ended and is no longer joinable."),wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1");var s=Number(o);t.DeleteOneOnOneCallWaitingJoinOrAccept(s);var c=wd.ChatStore.GetFriendChat(s,!1),l=wd.FriendStore.GetFriend(s);void 0!=c&&(l?c.AddVoiceChannelInviteMsg(l.accountid,wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEndedExplicit",l.display_name)):c.AddVoiceChannelInviteMsg(t.m_CMInterface.steamid.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEnded")),t.m_VoiceCallState.m_targetAccountID==Number(o)&&(t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0))}}if(i==t.m_VoiceCallState.m_voiceChatID){if(0!=t.m_VoiceCallState.m_targetAccountID){var c=wd.ChatStore.GetFriendChat(t.m_VoiceCallState.m_targetAccountID,!1);void 0==c||t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg||(t.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,c.AddVoiceChannelInviteMsg(t.m_CMInterface.steamid.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEnded")))}0!=t.m_VoiceCallState.m_targetAccountID&&t.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_RequestedPermission&&wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_voice_channel_exit.m4a?v=1"),t.LogMsg("(VoiceChat) Got voice chat end notification from server for active chatid"),t.EndVoiceChatInternal(!1)}return 1}),this.m_VoiceChatEnteredNotification=c(wu.NotifyUserJoinedVoiceChatHandler,function(e){if(e.Body().voice_chatid()==t.m_VoiceCallState.m_voiceChatID){var i=new hi.a(e.Body().user_steamid());t.LogMsg("(VoiceChat) User "+i.Render()+" has just JOINED our active voice chat"),0!=t.m_VoiceCallState.m_targetAccountID&&t.m_VoiceCallState.m_targetAccountID==i.GetAccountID()&&(t.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1)}return 1}),this.m_VoiceChatLeftNotification=c(wu.NotifyUserLeftVoiceChatHandler,function(e){if(e.Body().voice_chatid()==t.m_VoiceCallState.m_voiceChatID){var i=new hi.a(e.Body().user_steamid());t.LogMsg("(VoiceChat) User "+i.Render()+" has just LEFT our active voice chat"),0!=t.m_VoiceCallState.m_targetAccountID&&t.m_VoiceCallState.m_targetAccountID==i.GetAccountID()&&(t.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!0)}return 1}),this.m_ShouldRejoinChatRoomVoiceChatHandler=c(aa.NotifyShouldRejoinChatRoomVoiceChatHandler,function(e){var i={groupID:e.Body().chat_group_id(),chatID:e.Body().chat_id()};return t.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_ScheduledInitiate&&t.m_VoiceCallState.BMatchingCall(0,i)&&(t.LogMsg("(ChatRoom) Notified that we need to rejoin new voicechat session for chat room... doing so now..."),t.EndVoiceChatInternal(!0),t.InitiateVoiceChat(0,i)),1}),this.m_Settings=new qu(e),this.m_Settings.LoadFromLocalStorage(this),"undefined"!=typeof SteamClient&&(void 0!=SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.RegisterForPushToTalkStateChange&&(this.m_hRegisterForPushToTalkStateChange=SteamClient.WebChat.RegisterForPushToTalkStateChange(this.OnPushToTalkStateChange)),void 0!=SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.GetPushToTalkEnabled&&this.RefreshPushToTalkKeySettings())}return e.prototype.Init=function(e){this.m_CMInterface=e,window.SetVoiceEchoLocalMic=this.SetVoiceEchoLocalMic,window.SetVoiceLogDetails=this.SetVoiceLogDetails,window.SetVoiceForceReconnectingStatus=this.ForceReconnectingStatus,window.SetVoiceForceConnectingStatus=this.ForceConnectingStatus},e.prototype.RefreshPushToTalkKeySettings=function(){var e=this;void 0!=SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.GetPushToTalkEnabled&&SteamClient.WebChat.GetPushToTalkEnabled().then(function(t){e.m_bPushToTalkEnabled=t.bEnabled,e.m_VKPushToTalkHotKey=t.vkHotKey,t.bPushToMute&&(e.m_bPushToMuteEnabled=t.bEnabled,e.m_bPushToTalkEnabled=!1),e.m_strPushToTalkDisplayString=t.strKeyName})},e.prototype.InitiateFriendChat=function(e){this.BPartnerHasRequestedAndIsInOneOnOneChat(e)?this.AcceptPartnersOneOnOneChatRequest(e):(this.InitiateVoiceChat(e,null),wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_phonecall.m4a?v=1"))},e.prototype.InitiateRoomChat=function(e,t){this.InitiateVoiceChat(0,{groupID:e,chatID:t})},e.prototype.AcceptPartnersOneOnOneChatRequest=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(void 0==t)return!1;t.ClearAudioRepeats();var i=hi.a.InitFromAccountID(e);return this.OnAcceptOneOnOneVoiceChat(i,t.voice_chatid),!0},e.prototype.OnRejectOneOnOneVoiceChatForPartner=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(void 0==t)return!1;t.ClearAudioRepeats();var i=hi.a.InitFromAccountID(e);this.OnRejectOneOnOneVoiceChat(i,t.voice_chatid),this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e);var n=wd.ChatStore.GetFriendChat(e,!1),r=wd.FriendStore.self;return void 0!=n&&void 0!=r&&(this.m_VoiceCallState.m_targetAccountID==e&&this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg||n.AddVoiceChannelInviteMsg(r.accountid,wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEndedExplicit",r.display_name)),this.m_VoiceCallState.m_targetAccountID==e&&(this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0)),!0},e.prototype.OnUserLeaveOneOnOneVoiceChat=function(){if(0==this.m_VoiceCallState.m_targetAccountID&&this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None)return void this.LogMsg("(VoiceChat) OnUserLeaveOneOnOneVoiceChat called when in a group not one-on-one chat!");this.LogMsg("(VoiceChat) User asking to leave but not end one-on-one chat with: "+this.m_VoiceCallState.m_targetAccountID),this.EndVoiceChatInternal(!1)},e.prototype.OnUserEndVoiceChat=function(){var e=this;if(this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None&&0!=this.m_VoiceCallState.m_targetAccountID){if(!this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg){var t=wd.ChatStore.GetFriendChat(this.m_VoiceCallState.m_targetAccountID,!1),i=wd.FriendStore.self;void 0!=t&&void 0!=i&&(this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!0,t.AddVoiceChannelInviteMsg(wd.CMInterface.steamid.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEndedExplicit",i.display_name)))}var n=this.m_VoiceCallState.m_targetAccountID;this.m_VoiceCallState.m_targetAccountID=0;var r=fi.Init(du);r.Body().set_steamid_partner(hi.a.InitFromAccountID(n).ConvertTo64BitString()),this.DeleteOneOnOneCallWaitingJoinOrAccept(n),Zl.EndOneOnOneChat(this.m_CMInterface.GetServiceTransport(),r).then(function(t){1==t.GetEResult()?e.LogMsg("(VoiceChat) Ended voice chat with "+n):e.LogMsg("(VoiceChat) Failed ending voice chat with "+n)})}0!=this.m_VoiceCallState.m_targetAccountID&&this.DeleteOneOnOneCallWaitingJoinOrAccept(this.m_VoiceCallState.m_targetAccountID),this.EndVoiceChatInternal(!1)},e.prototype.SetSelectedMic=function(e){e!=this.m_Settings.m_SelectedMicID&&(this.LogMsg("(VoiceChat) Set selected mic "+e),this.m_Settings.m_SelectedMicID=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.SetSelectedOutput=function(e){e!=this.m_Settings.m_SelectedOutputID&&(this.LogMsg("(VoiceChat) Set selected output "+e),this.m_Settings.m_SelectedOutputID=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetAudioWorkletSupport=function(){return wd.AudioPlaybackManager.supports_audio_worklets},e.prototype.GetUserDeniedMicAccess=function(){return this.m_bUserHasDeniedMicPermissions},e.prototype.GetSelectedMic=function(){return this.m_Settings.m_SelectedMicID},e.prototype.GetSelectedOutputDevice=function(){return this.m_Settings.m_SelectedOutputID},e.prototype.SetUseEchoCancellation=function(e){e!=this.m_Settings.m_VoiceUseEchoCancellation&&(this.m_Settings.m_VoiceUseEchoCancellation=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetUseEchoCancellation=function(){return this.m_Settings.m_VoiceUseEchoCancellation},e.prototype.SetUseNoiseCancellation=function(e){e!=this.m_Settings.m_VoiceUseNoiseCancellation&&(this.m_Settings.m_VoiceUseNoiseCancellation=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetUseNoiseCancellation=function(){return this.m_Settings.m_VoiceUseNoiseCancellation},e.prototype.SetUseAutoGainControl=function(e){e!=this.m_Settings.m_VoiceUseAutoGainControl&&(this.m_Settings.m_VoiceUseAutoGainControl=e,this.m_Settings.SaveToLocalStorage(),this.RestartVoiceChatIfConnected())},e.prototype.GetUseAutoGainControl=function(){return this.m_Settings.m_VoiceUseAutoGainControl},e.prototype.SetVoiceEchoLocalMic=function(e){this.m_VoiceEchoLocalMic=e,this.UpdateNoiseGateOnActiveMic()},e.prototype.GetVoiceEchoLocalMic=function(){return this.m_VoiceEchoLocalMic},e.prototype.GetPushToTalkOrMuteSoundsEnabled=function(){return this.m_Settings.m_bPlayPTTSounds},e.prototype.SetPushToTalkOrMuteSoundsEnabled=function(e){this.m_Settings.m_bPlayPTTSounds!=e&&(this.m_Settings.m_bPlayPTTSounds=e,this.m_Settings.SaveToLocalStorage())},e.prototype.SetPushToTalkEnabled=function(e){this.m_bPushToTalkEnabled=e,this.m_bPushToMuteEnabled=!1},e.prototype.GetPushToTalkEnabled=function(){return this.m_bPushToTalkEnabled},e.prototype.SetPushToMuteEnabled=function(e){this.m_bPushToMuteEnabled=e,this.m_bPushToTalkEnabled=!1},e.prototype.GetPushToMuteEnabled=function(){return this.m_bPushToMuteEnabled},e.prototype.GetPushToTalkVoiceStateEnabled=function(){return this.m_bVoicePTTStateEnabled},e.prototype.GetPushToTalkHotKeyVK=function(){return this.m_VKPushToTalkHotKey},e.prototype.GetPushToTalkHotKeyDisplayString=function(){return this.m_strPushToTalkDisplayString},e.prototype.SetVoiceLogDetails=function(e){this.m_LogVoiceChatDetails=e},e.prototype.GetVoiceLogDetails=function(){return this.m_LogVoiceChatDetails},e.prototype.SetUseNoiseGateLevel=function(e){e!=this.m_Settings.m_NoiseGateLevel&&(this.LogMsg("(VoiceChat) Nose Gate Level: "+e),this.m_Settings.m_NoiseGateLevel=e,this.m_Settings.SaveToLocalStorage(),this.UpdateNoiseGateOnActiveMic())},e.prototype.GetUseNoiseGateLevel=function(){return this.m_Settings.m_NoiseGateLevel},e.prototype.SetVoiceInputGain=function(t){this.m_Settings.m_VoiceInputGain!=t&&(this.m_Settings.m_VoiceInputGain=Math.max(0,Math.min(t,e.k_MaxInputOutputGainValue)),this.LogMsg("(VoiceChat) New mic Input Gain value is "+this.m_Settings.m_VoiceInputGain),void 0!=this.m_MicInputGainNode&&this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),this.m_Settings.SaveToLocalStorage())},e.prototype.GetVoiceInputGain=function(){return this.m_Settings.m_VoiceInputGain},e.prototype.SetVoiceOutputGain=function(t){if(this.m_Settings.m_VoiceOutputGain!=t){this.m_Settings.m_VoiceOutputGain=Math.max(0,Math.min(t,e.k_MaxInputOutputGainValue)),this.LogMsg("(VoiceChat) New global OutputGain value is "+this.m_Settings.m_VoiceOutputGain),this.m_Settings.SaveToLocalStorage();for(var i=0;i<this.m_rgAudioStreams.length;++i){var n=this.m_rgAudioStreams[i];n.output_gain_node&&(n.type==Nu.k_EAudioStreamType_Microphone?n.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain,this.m_AudioContext.currentTime):n.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*this.GetPerUserGainLevel(n.accountid),this.m_AudioContext.currentTime))}}},e.prototype.GetVoiceOutputGain=function(){return this.m_Settings.m_VoiceOutputGain},e.prototype.GetUserMutedRemotely=function(e){var t=this.m_mapUserVoiceStatus.get(e);return void 0==t&&(t=new Ju,this.m_mapUserVoiceStatus.set(e,t)),t.mic_muted_locally},e.prototype.GetOutputMutedRemotely=function(e){var t=this.m_mapUserVoiceStatus.get(e);return void 0==t&&(t=new Ju,this.m_mapUserVoiceStatus.set(e,t)),t.output_muted_locally},e.prototype.GetUserHasNoMicForSession=function(e){var t=this.m_mapUserVoiceStatus.get(e);return void 0==t&&(t=new Ju,this.m_mapUserVoiceStatus.set(e,t)),t.has_no_mic_for_session},e.prototype.ConvertSliderToGainValue=function(e,t){return e=e<=50?e/50*1:1+t*((e-50)/50)},e.prototype.ConvertGainValueToSliderValue=function(e,t){return e<=1?50*e:50+(e-1)/t*50},e.prototype.ForceReconnectingStatus=function(e){this.m_bForceReconnectingStatus=!0},e.prototype.ForceConnectingStatus=function(e){this.m_bForceConnectingStatus=!0},e.prototype.GetActiveChatRoomGroupID=function(){return this.m_VoiceCallState.m_eState==Vu.k_EVoiceCallState_None?"":this.m_VoiceCallState.m_chatRoom?this.m_VoiceCallState.m_chatRoom.groupID:""},e.prototype.GetActiveVoiceChatID=function(){return this.m_VoiceCallState.m_eState==Vu.k_EVoiceCallState_None?"":this.m_VoiceCallState.m_chatRoom?this.m_VoiceCallState.m_chatRoom.chatID:""},e.prototype.BInitiatedOneOnOneChat=function(e){return this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None&&this.m_VoiceCallState.m_targetAccountID==e&&this.m_VoiceCallState.m_bInitiatedOneOnOneCall},e.prototype.ToggleMicMuting=function(){for(var e=0;e<this.m_rgAudioStreams.length;++e){var t=this.m_rgAudioStreams[e];if(t.type==Nu.k_EAudioStreamType_Microphone){t.muted=!t.muted;for(var i=t.stream.getTracks(),n=0;n<i.length;n++)i[n].enabled=!t.muted}}this.SendVoiceStatusUpdate()},e.prototype.BHasSampleRateTooHighInBrowser=function(){return!ai.a.IN_CLIENT&&wd.AudioPlaybackManager.GetLastObservedSampleRate()>48e3},e.prototype.BNoMicAvailableForSession=function(){if(this.m_VoiceCallState.m_eState<=Vu.k_EVoiceCallState_RequestedMicAccess)return!1;if(this.BHasSampleRateTooHighInBrowser())return!0;for(var e=0;e<this.m_rgAudioStreams.length;++e)if(this.m_rgAudioStreams[e].type==Nu.k_EAudioStreamType_Microphone)return!1;return!0},e.prototype.IsMicMuted=function(){for(var e=0;e<this.m_rgAudioStreams.length;++e)if(this.m_rgAudioStreams[e].type==Nu.k_EAudioStreamType_Microphone)return this.m_rgAudioStreams[e].muted;return!1},e.prototype.ToggleOutputMuting=function(){this.m_bOutputMuted=!this.m_bOutputMuted;for(var e=0;e<this.m_rgAudioStreams.length;++e){var t=this.m_rgAudioStreams[e];if(t.type==Nu.k_EAudioStreamType_IncomingStream){t.muted=this.m_bOutputMuted||this.GetPerUserMuting(t.accountid);for(var i=t.stream.getTracks(),n=0;n<i.length;n++)i[n].enabled=!this.m_bOutputMuted}}this.SendVoiceStatusUpdate()},e.prototype.IsOutputMuted=function(){return this.m_bOutputMuted},e.prototype.GetActiveOneOnOneVoiceChatAccountID=function(){return this.m_VoiceCallState.m_eState==Vu.k_EVoiceCallState_None?0:this.m_VoiceCallState.m_targetAccountID},Object.defineProperty(e.prototype,"audio_streams",{get:function(){return this.m_rgAudioStreams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mic_volume",{get:function(){return this.m_MicVolumeMeter},enumerable:!0,configurable:!0}),e.prototype.get_volume=function(e){if(this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_Connected)return 0;if(e==this.m_CMInterface.steamid.GetAccountID()&&this.IsMicMuted())return 0;for(var t=0,i=0;i<this.m_rgAudioStreams.length;++i){var n=this.m_rgAudioStreams[i];n.accountid==e&&void 0!=n.volume_meter&&(t=Math.max(t,n.volume_meter.rounded_volume))}return t},e.prototype.GetPerUserGainLevel=function(e){var t=this.m_mapPerUserOutputGain.get(e);return void 0==t?1:t.gain},e.prototype.GetPerUserMuting=function(e){var t=this.m_mapPerUserOutputGain.get(e);return void 0!=t&&t.muted},e.prototype.SetPerUserMuting=function(e,t){var i=this.m_mapPerUserOutputGain.get(e);void 0==i&&(i=new Ku),i.muted=t||this.m_bOutputMuted,this.m_mapPerUserOutputGain.set(e,i),this.UpdateStreamsForPerUseGainChange(e)},e.prototype.SetPerUserGainLevel=function(e,t){var i=Math.max(0,Math.min(4,t)),n=this.m_mapPerUserOutputGain.get(e);void 0==n&&(n=new Ku),n.gain=i,n.gain<.001?n.muted=!0:n.muted=!1,this.m_mapPerUserOutputGain.set(e,n),this.UpdateStreamsForPerUseGainChange(e)},e.prototype.UpdateStreamsForPerUseGainChange=function(e){var t=this.m_mapPerUserOutputGain.get(e);void 0==t&&(t=new Ku);for(var i=0;i<this.m_rgAudioStreams.length;++i){var n=this.m_rgAudioStreams[i];if(n.accountid==e&&void 0!=n.output_gain_node){n.muted=t.muted,n.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*t.gain,this.m_AudioContext.currentTime);for(var r=n.stream.getTracks(),o=0;o<r.length;o++)r[o].enabled=!n.muted}}},e.prototype.OnUserLeftChatRoomVoiceChat=function(e,t,i,n){var r={groupID:e,chatID:t};this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_RequestedPermission&&this.m_VoiceCallState.BMatchingCall(0,r)&&(i!=this.m_CMInterface.steamid.GetAccountID()||n||(this.LogMsg("(ChatRoom) We were told that we left chat "+t+" but we hadn't initiated that, trying to reconnect..."),this.RestartVoiceChatIfConnected()))},e.prototype.IsAnyVoiceActive=function(){return this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None||0!=this.m_ScheduledInitiate},e.prototype.BSelfHasAcceptedOrInitiatedOneOnOneChat=function(e){return this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None&&this.m_VoiceCallState.m_targetAccountID==e&&(!!this.m_VoiceCallState.m_bInitiatedOneOnOneCall||this.m_VoiceCallState.m_eState>=Vu.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession)},e.prototype.BSelfHadPreviouslyJoinedOneOnOneChat=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(void 0==t){var i=new Yu;return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e,i),!1}if(t.partner_accountid!=this.m_CMInterface.steamid.GetAccountID())return!1;var n=t.voice_chatid;return t.previously_joined&&""!=n},e.prototype.BPartnerHasAcceptedOrInitiatedOneOnOneChat=function(e){return!(this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None||this.m_VoiceCallState.m_bInitiatedOneOnOneCall||!this.BPartnerHasRequestedAndIsInOneOnOneChat(e))||this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_RequestedPermission&&!this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin},e.prototype.BPartnerHasRequestedAndIsInOneOnOneChat=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);if(void 0==t){var i=new Yu;return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e,i),!1}return t.partner_accountid==this.m_CMInterface.steamid.GetAccountID()&&""!=t.voice_chatid},e.prototype.IsAttemptingInitialConnection=function(){return(0==this.m_VoiceCallState.m_targetAccountID||this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_RequestedPermission)&&this.IsAnyVoiceActive()&&0==this.m_VoiceCallState.m_nFailuresThisInitiate&&this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_Connected},e.prototype.HasBeenAttemptingOverTwoSeconds=function(){var e=this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds,t=this.IsAttemptingInitialConnection();return!!this.m_bForceConnectingStatus||e&&t},e.prototype.IsAttemptingReconnect=function(){var e=this.IsAnyVoiceActive(),t=this.m_VoiceCallState.m_nFailuresThisInitiate,i=this.m_VoiceCallState.m_eState;return!!this.m_bForceReconnectingStatus||e&&t>0&&i!=Vu.k_EVoiceCallState_Connected},e.prototype.IsVoiceActiveForFriend=function(e){return this.IsVoiceActive(e,null)},e.prototype.IsVoiceActiveForRoom=function(e,t){return this.IsVoiceActive(0,{groupID:e,chatID:t})},e.prototype.IsVoiceActiveForGroup=function(e){return!!this.m_VoiceCallState.BCallActiveForGroup(e)&&this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None},e.prototype.LogMsg=function(e){this.m_rgLogLines.push(e),this.m_LogVoiceChatDetails&&console.log(e)},e.prototype.GetVoiceLogs=function(){return this.m_rgLogLines.join("\r\n")},e.prototype.OnPushToTalkReleased=function(){this.m_bPushToTalkEnabled&&void 0!=this.m_MicInputGainNode&&!this.m_bVoicePTTStateEnabled?this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime+.2):this.m_bPushToMuteEnabled&&void 0!=this.m_MicInputGainNode&&this.m_bVoicePTTStateEnabled&&this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime+.2)},e.prototype.OnPushToTalkStateChange=function(e){e!=this.m_bVoicePTTStateEnabled&&(this.m_bVoicePTTStateEnabled=e,(this.m_bPushToTalkEnabled||this.m_bPushToMuteEnabled)&&void 0!=this.m_MicInputGainNode&&(this.m_bVoicePTTStateEnabled?(this.GetPushToTalkOrMuteSoundsEnabled()&&wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"),this.m_bPushToMuteEnabled?this.m_hPushToTalkReleaseTimeout=SetBackgroundTimeout(this.OnPushToTalkReleased,100):(this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),0!=this.m_hPushToTalkReleaseTimeout&&ClearBackgroundTimeout(this.m_hPushToTalkReleaseTimeout))):(this.GetPushToTalkOrMuteSoundsEnabled()&&wd.AudioPlaybackManager.PlayAudioURL(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"),this.m_bPushToMuteEnabled?(this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),0!=this.m_hPushToTalkReleaseTimeout&&ClearBackgroundTimeout(this.m_hPushToTalkReleaseTimeout)):this.m_hPushToTalkReleaseTimeout=SetBackgroundTimeout(this.OnPushToTalkReleased,100))))},e.prototype.GetCurrentVoiceInputGainTarget=function(){return this.m_bPushToTalkEnabled&&!this.m_bVoicePTTStateEnabled?0:this.m_bPushToMuteEnabled&&!this.m_bVoicePTTStateEnabled?0:this.m_Settings.m_VoiceInputGain},e.prototype.RestartVoiceChatIfConnected=function(){if(this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_ScheduledInitiate){var e=this.m_VoiceCallState.m_targetAccountID,t=this.m_VoiceCallState.m_chatRoom;this.LogMsg("(WebRTC) Ending then auto-re-initiating voice chat - without leave of chatroom if joined as attempt is quick rejoin"),this.EndVoiceChatInternal(!0),this.InitiateVoiceChat(e,t)}},e.prototype.GetNoiseGateOptions=function(){var e={attack:2,release:.01,threshold:-80,bufferSize:1024};switch(this.m_Settings.m_NoiseGateLevel){case zu.k_ENoiseGateLevel_Off:break;case zu.k_ENoiseGateLevel_Low:e={attack:.8,release:.06,threshold:-48,bufferSize:1024};break;case zu.k_ENoiseGateLevel_Medium:e={attack:.8,release:.06,threshold:-36,bufferSize:1024};break;case zu.k_ENoiseGateLevel_High:e={attack:.8,release:.09,threshold:-22,bufferSize:1024}}return e},e.prototype.DeleteOneOnOneCallWaitingJoinOrAccept=function(e){var t=this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);void 0!=t&&(t.ClearAudioRepeats(),this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e))},e.prototype.UpdateNoiseGateOnActiveMic=function(){if(void 0!=this.m_MicInputGainNode){for(var e=void 0,t=0;t<this.m_rgAudioStreams.length;++t){var i=this.m_rgAudioStreams[t];if(i.type==Nu.k_EAudioStreamType_Microphone){e=i;break}}if(void 0!=e){if(void 0!=this.m_MicNoiseGate)this.m_MicInputGainNode.disconnect(this.m_MicNoiseGate.input),this.m_MicNoiseGate.input?(this.m_MicNoiseGate.input.disconnect(),this.m_MicNoiseGate.output.disconnect(),this.m_MicNoiseGate.noiseGateKernel_.disconnect()):this.m_MicNoiseGate.disconnect(),this.m_MicNoiseGate=void 0;else{this.m_MicInputGainNode.disconnect(e.destination_node);try{this.m_MicInputGainNode.disconnect(e.output_gain_node)}catch(e){}}this.m_MicVolumeMeter.stop(),this.m_MicVolumeMeter=void 0,void 0!=e.volume_meter&&(e.volume_meter.stop(),e.volume_meter=void 0),this.m_Settings.m_NoiseGateLevel!=zu.k_ENoiseGateLevel_Off?this.SetupNoiseGateOnMic(e.destination_node):this.m_MicInputGainNode.connect(e.destination_node);var n=e.source_node;this.m_MicNoiseGate&&(n=this.m_MicNoiseGate.output?this.m_MicNoiseGate.output:this.m_MicNoiseGate),this.m_MicVolumeMeter=new Au(n,this.m_AudioContext),e.volume_meter=this.m_MicVolumeMeter,this.m_VoiceEchoLocalMic&&void 0==this.m_MicNoiseGate?this.m_MicInputGainNode.connect(e.output_gain_node):this.m_VoiceEchoLocalMic&&(this.m_MicNoiseGate.output?this.m_MicNoiseGate.output.connect(e.output_gain_node):this.m_MicNoiseGate.connect(e.output_gain_node))}}},e.prototype.OnAudioContextStateChange=function(){void 0!=this.m_AudioContext&&this.LogMsg("(WebAudio) Audio context state changed: "+this.m_AudioContext.state)},e.prototype.OnIceCandidate=function(e){this.LogMsg("(ICE) Local candidate: "+JSON.stringify(e.candidate))},e.prototype.AddRemoteIceCandidate=function(e,t){var i=this.LogMsg;i("(ICE) Candidate from remote peer: "+JSON.stringify(t)),e.addIceCandidate(t).then(function(){}).catch(function(e){i("addIceCandidate error: "+e+" "+e.name)})},e.prototype.OnSignalingStateChange=function(e,t){this.LogMsg("(WebRTC) OnSignalingStateChange: "+e.signalingState)},e.prototype.OnIceConnectionStateChange=function(e,t){this.LogMsg("(ICE) OnIceConnectionStateChange: "+e.iceConnectionState),"failed"==e.iceConnectionState&&this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_CreatePeerConnection?this.BackOffAndRetryInitiateVoiceChat():"completed"!=e.iceConnectionState&&"connected"!=e.iceConnectionState||this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected||(this.LogMsg("(VoiceChat) ICE connection state now 'completed' or 'connected', proceeding to join voice chat"),this.JoinVoiceChatOrAskForOneOnOneChatNow())},e.prototype.OnIceGatheringStateChange=function(e,t){this.LogMsg("(ICE) OnIceGatheringStateChange: "+e.iceGatheringState)},e.prototype.RemoveStreamToOutput=function(e){this.LogMsg("(WebRTC) RemoveStreamToOutput - "+e.id+" - "+e.getTracks().length);for(var t=0;t<this.m_rgAudioStreams.length;++t){var i=this.m_rgAudioStreams[t];if(i.unique_id==e.id){if(i.elem.pause(),i.elem.srcObject=void 0,i.elem.src=void 0,i.elem=void 0,void 0!=i.volume_meter&&(i.volume_meter.stop(),i.volume_meter=void 0),void 0!=i.output_gain_node&&(i.output_gain_node.disconnect(),i.output_gain_node=void 0),void 0!=i.source_node){try{i.source_node.disconnect()}catch(e){}i.source_node=void 0}return void this.m_rgAudioStreams.splice(t,1)}}},e.prototype.OnRemoveRemoteStream=function(e){this.RemoveStreamToOutput(e.stream)},e.prototype.SetupAudioStreamElementAndCreateSourceNode=function(e,t){var i=-1!=this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...");void 0!=e.source_node&&(e.source_node.disconnect(),e.source_node=void 0),void 0==e.elem?e.elem=document.createElement("audio"):e.elem.srcObject=void 0,e.elem.srcObject=t,i?(e.elem.play(),e.source_node=this.m_AudioContext.createMediaElementSource(e.elem)):e.source_node=this.m_AudioContext.createMediaStreamSource(t)},e.prototype.AddStreamToOutput=function(e){var t=new Uu;this.SetupAudioStreamElementAndCreateSourceNode(t,e),t.unique_id=e.id,t.stream=e,t.type=Nu.k_EAudioStreamType_IncomingStream;var i=/Peer-(\d+)-(\d+)-/,n=e.id.match(i);if(n&&3==n.length?t.accountid=Number(n[2]):t.accountid=0,this.LogMsg("(VoiceChat) AddStreamToOutput "+t.accountid+" "+t.unique_id),t.muted=this.m_bOutputMuted||this.GetPerUserMuting(t.accountid),t.muted)for(var r=t.stream.getTracks(),o=0;o<r.length;o++)r[o].enabled=!t.muted;this.m_rgAudioStreams.push(t),t.output_gain_node=this.m_AudioContext.createGain(),t.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain*this.GetPerUserGainLevel(t.accountid),this.m_AudioContext.currentTime),t.output_gain_node.connect(wd.AudioPlaybackManager.GetActiveDestination()),t.source_node.connect(t.output_gain_node),t.volume_meter=new Au(t.source_node,this.m_AudioContext),t.volume_meter.Connect(t.source_node)},e.prototype.OnAddTrack=function(e,t){for(var i=0;i<this.m_rgAudioStreams.length;++i){var n=this.m_rgAudioStreams[i];if(n.unique_id==e.id&&(this.LogMsg("(VoiceChat) OnAddTrack to existing stream "+n.accountid+" "+n.unique_id),n.volume_meter.DisconnectAll(),this.SetupAudioStreamElementAndCreateSourceNode(n,e),n.volume_meter.Connect(n.source_node),n.source_node.connect(n.output_gain_node),n.muted))for(var r=n.stream.getTracks(),o=0;o<r.length;o++)r[o].enabled=!n.muted}},e.prototype.OnAddRemoteStream=function(e){if(this.LogMsg("(WebRTC) OnAddRemoteStream - "+e.stream.id+" - "+e.stream.getTracks().length),void 0==this.m_AudioContext)return void this.LogMsg("(WebRTC)Got OnAddRemoteStream when we don't have audio context... stopped chat?");if(void 0!=e.stream&&void 0!=this.m_AudioContext){this.AddStreamToOutput(e.stream);var t=this;e.stream.onaddtrack=function(e){t.OnAddTrack(this,e)}}},e.prototype.ModifyLocalSDPBeforeSetting=function(e){for(var t=/a=rtpmap:(\d+)\sopus(.*)/,i=/a=fmtp:(\d+)\s(.*)/,n=e.sdp.split("\r\n"),r=-1!=e.sdp.indexOf("mozilla..."),o=!1,a=0;a<n.length;++a){var s=n[a];if("m="==s.substr(0,2)&&a+1<n.length){for(var c="0",l=a+1;l<n.length;++l){if(s=n[l],"m="==s.substr(0,2)){a=l-1;break}var u=s.match(t);if(u){c=u[1];break}}if("0"!=c)for(var l=a+1;l<n.length;++l){if(s=n[l],"m="==s.substr(0,2)){a=l-1;break}var u=s.match(i);if(u&&u[1]==c){r||(n[l]="a=fmtp:"+u[1]+" minptime=10;useinbandfec=1;usedtx=1"),o=!0;break}}}}return o&&(e.sdp=n.join("\r\n")),e},e.prototype.OnCreateOfferSuccess=function(e,t){if(this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_CreatePeerConnection)return void this.LogMsg("(WebRTC) Hit OnCreateOfferSuccess in wrong state "+this.m_VoiceCallState.m_eState);this.LogMsg("(WebRTC) OnCreateOfferSuccess");var i=this;t=this.ModifyLocalSDPBeforeSetting(t),e.setLocalDescription(t).then(function(){var e=fi.Init(Ou);e.Body().set_sdp(JSON.stringify(t)),i.LogMsg("(WebRTC) Offer (Local Description): "+e.Body().sdp()),i.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_InitatedWebRTCSession,Bu.InitiateWebRTCConnection(i.m_CMInterface.GetServiceTransport(),e).then(function(e){if(void 0==i.m_PeerConnection)i.LogMsg("(WebRTC) Got response to InitiateWebRTCConnection with no local peer connection"),i.EndVoiceChatInternal(!1);else if(1==e.GetEResult()){var t=JSON.parse(e.Body().remote_description());i.m_PeerConnection.setRemoteDescription(new RTCSessionDescription(t)).then(function(){i.LogMsg("(WebRTC) Remote Description: "+t.sdp),"offer"==t.type?(i.LogMsg("(WebRTC) !! received 'offer' rather than 'answer' from InitiateWebRTCConnection, unexpected."),i.EndVoiceChatInternal(!1)):"answer"==t.type&&i.LogMsg("(WebRTC) setRemoteDescription success")}).catch(function(e){i.LogMsg("(WebRTC) setRemoteDescription error: "+e),i.LogMsg("(VoiceChat) Fatal error, ending chat"),i.EndVoiceChatInternal(!1)})}else i.LogMsg("(WebRTC) Got failure ("+e.GetEResult()+") response from InitiateWebRTCConnection"),i.BackOffAndRetryInitiateVoiceChat()}).catch(function(e){i.LogMsg("(WebRTC) Failure in WebRTCClientService.InitiateWebRTCConnection"),i.BackOffAndRetryInitiateVoiceChat()})}).catch(function(e){i.LogMsg("(WebRTC) setLocalDescription error: "+e),i.LogMsg("(VoiceChat) Fatal error, ending voice chat"),i.EndVoiceChatInternal(!1)})},e.prototype.OnCreateOfferError=function(e){this.LogMsg("(WebRTC) OnCreateOfferError: "+e),this.LogMsg("(VoiceChat) Fatal Error, ending chat attempt"),this.EndVoiceChatInternal(!1)},e.prototype.CreatePeerConnection=function(e){var t=this,i={},n=new RTCPeerConnection(i);return n.onicecandidate=function(e){t.OnIceCandidate(e)},n.onaddstream=this.OnAddRemoteStream,n.onremovestream=this.OnRemoveRemoteStream,n.oniceconnectionstatechange=function(e){t.OnIceConnectionStateChange(n,e)},n.onicegatheringstatechange=function(e){t.OnIceGatheringStateChange(n,e)},n.onsignalingstatechange=function(e){t.OnSignalingStateChange(n,e)},void 0!=e&&n.addStream(e),this.m_PeerConnection=n,this.m_PeerConnection},e.prototype.OnMicStreamInactive=function(e,t){this.LogMsg("(WebRTC) Mic Stream went inactive: "+t.type),this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_RequestedMicAccess&&(this.LogMsg("(WebRTC) Ending then auto-re-initiating voice chat without mic"),this.RestartVoiceChatIfConnected())},e.prototype.OnNoiseGateMessage=function(e){this.LogMsg("(VoiceChat) "+e.data)},e.prototype.SetupNoiseGateOnMic=function(e){var t=this.GetNoiseGateOptions();if(wd.AudioPlaybackManager.supports_audio_worklets){this.LogMsg("(VoiceChat) Audio Worklets supported - high performance mic noisegate in use!");var i=window;this.m_MicNoiseGate=new i.AudioWorkletNode(this.m_AudioContext,"noisegate-processor"),this.m_MicNoiseGate.port.onmessage=this.OnNoiseGateMessage,this.m_MicInputGainNode.connect(this.m_MicNoiseGate).connect(e),this.m_MicNoiseGate.parameters.get("threshold").setValueAtTime(t.threshold,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("attack").setValueAtTime(t.attack,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("release").setValueAtTime(t.release,this.m_AudioContext.currentTime),this.m_MicNoiseGate.parameters.get("sampleRate").setValueAtTime(this.m_AudioContext.sampleRate,this.m_AudioContext.currentTime)}else this.LogMsg("(VoiceChat) Browser doesn't support audio worklets, mic perf will suffer and may stutter/echo during repaint/high CPU usage"),this.m_MicNoiseGate=new Lu(this.m_AudioContext,t),this.m_MicInputGainNode.connect(this.m_MicNoiseGate.input),this.m_MicNoiseGate.output.connect(e)},e.prototype.OnGetUserMediaSuccess=function(e){if(this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_RequestedMicAccess){for(var t=0,i=e.getTracks();t<i.length;t++)i[t].stop();return void this.LogMsg("(VoiceChat) Hit OnGetUserMediaSuccess in wrong state "+this.m_VoiceCallState.m_eState)}if(this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_CreatePeerConnection,void 0!=e){var n=(e.id,this.m_AudioContext.createMediaStreamSource(e)),r=this;e.oninactive=function(e){r.OnMicStreamInactive(this,e)},this.m_MicInputGainNode=this.m_AudioContext.createGain(),this.m_MicInputGainNode.gain.setValueAtTime(this.GetCurrentVoiceInputGainTarget(),this.m_AudioContext.currentTime),n.connect(this.m_MicInputGainNode);var o=void 0;if(this.m_Settings.m_NoiseGateLevel!=zu.k_ENoiseGateLevel_Off){var a=this.m_AudioContext;o=a.createMediaStreamDestination(),this.SetupNoiseGateOnMic(o),e=o.stream}else{var a=this.m_AudioContext;o=a.createMediaStreamDestination(),this.m_MicInputGainNode.connect(o),e=o.stream}var s=new Uu;s.unique_id=e.id,s.destination_node=o,s.stream=e,s.source_node=n,s.type=Nu.k_EAudioStreamType_Microphone,s.accountid=this.m_CMInterface.steamid.GetAccountID(),s.muted=!1,s.elem=void 0,s.output_gain_node=this.m_AudioContext.createGain(),s.output_gain_node.gain.setValueAtTime(this.m_Settings.m_VoiceOutputGain,this.m_AudioContext.currentTime),s.output_gain_node.connect(wd.AudioPlaybackManager.GetActiveDestination()),this.m_rgAudioStreams.push(s);var c=n;this.m_MicNoiseGate&&(c=void 0!=this.m_MicNoiseGate.output?this.m_MicNoiseGate.output:this.m_MicNoiseGate),this.m_MicVolumeMeter=void 0,this.m_MicVolumeMeter=new Au(c,this.m_AudioContext),s.volume_meter=this.m_MicVolumeMeter,this.m_VoiceEchoLocalMic&&void 0==this.m_MicNoiseGate?this.m_MicInputGainNode.connect(s.output_gain_node):this.m_VoiceEchoLocalMic&&(this.m_MicNoiseGate.output?this.m_MicNoiseGate.output.connect(s.output_gain_node):this.m_MicNoiseGate.connect(s.output_gain_node))}var l={offerToReceiveAudio:1,offerToReceiveVideo:0,voiceActivityDetection:!0},u=this.CreatePeerConnection(e),d=this;u.createOffer(l).then(function(e){d.OnCreateOfferSuccess(u,e)}).catch(function(e){d.OnCreateOfferError(e)})},e.prototype.OnGetUserMediaFailure=function(e){if(!(this.m_VoiceCallState.m_eState<=Vu.k_EVoiceCallState_ScheduledInitiate)){var t=this,i=navigator;i.permissions&&i.permissions.query({name:"microphone"}).then(function(e){"granted"==e.stat||("denied"==e.state?t.m_bUserHasDeniedMicPermissions=!0:e.state)}),this.LogMsg("(WebAudio) The following error occured getting audio stream: "+e.name),this.OnGetUserMediaSuccess(void 0)}},e.prototype.InitiateChatRoomVoice=function(){if(this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_ScheduledInitiate)return void this.LogMsg("(VoiceChat) Hit InitiateChatRoomVoice in wrong state "+this.m_VoiceCallState.m_eState);wd.AudioPlaybackManager.SetVoiceActive(this.OnRequestMicrophoneAccess)},e.prototype.JoinVoiceChatOrAskForOneOnOneChatNow=function(){var e=this;if(0==this.m_VoiceCallState.m_targetAccountID){this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_RequestedPermission;var t=fi.Init(ro);t.Body().set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),t.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID),this.LogMsg("(VoiceChat) InitiateChatRoomVoice request to group: "+this.m_VoiceCallState.m_chatRoom.groupID+", room: "+this.m_VoiceCallState.m_chatRoom.chatID),ra.JoinVoiceChat(this.m_CMInterface.GetServiceTransport(),t).then(function(t){1==t.GetEResult()?(e.m_VoiceCallState.m_voiceChatID=t.Body().voice_chatid(),e.OnVoiceChatAccepted(!0)):2==t.GetEResult()?e.BackOffAndRetryInitiateVoiceChat():e.OnVoiceChatAccepted(!1)}).catch(function(t){e.BackOffAndRetryInitiateVoiceChat()})}else if(this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_RequestedPermission,""==this.m_VoiceCallState.m_voiceChatID){var t=fi.Init(ou);t.Body().set_steamid_partner(hi.a.InitFromAccountID(this.m_VoiceCallState.m_targetAccountID).ConvertTo64BitString()),this.LogMsg("(VoiceChat) InitiateOneOnOneVoiceChat request to "+this.m_VoiceCallState.m_targetAccountID),Zl.RequestOneOnOneChat(this.m_CMInterface.GetServiceTransport(),t).then(function(t){if(1==t.GetEResult()){e.LogMsg("(VoiceChat) Waiting on acceptance from "+e.m_VoiceCallState.m_targetAccountID),e.m_VoiceCallState.m_voiceChatID=t.Body().voice_chatid();var i=wd.FriendStore.self,n=wd.ChatStore.GetFriendChat(e.m_VoiceCallState.m_targetAccountID,!1);void 0!=i&&void 0!=n&&n.AddVoiceChannelInviteMsg(e.m_CMInterface.steamid.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelInvite",i.display_name,n.chat_partner.display_name))}else e.LogMsg("(VoiceChat) Initiating voice chat to "+e.m_VoiceCallState.m_targetAccountID+" has failed."),e.EndVoiceChatInternal(!1)})}else this.OnVoiceChatAccepted(!0)},e.prototype.OnVoiceChatAccepted=function(e){return this.m_VoiceCallState.m_eState<Vu.k_EVoiceCallState_RequestedPermission?void this.LogMsg("(VoiceChat) Hit OnVoiceChatAccepted in wrong state "+this.m_VoiceCallState.m_eState):void 0==this.m_VoiceCallState.m_webRTCConnectedNotification?void this.LogMsg("(VoiceChat) Hit OnVoiceChatAccepted without WebRTC connected"):void(e?(this.m_VoiceCallState.m_targetAccountID?(this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_VoiceCallState.m_timeStartedConnecting=performance.now(),this.LogMsg("(VoiceChat) Call accepted to individual "+this.m_VoiceCallState.m_targetAccountID)):this.LogMsg("(VoiceChat) Call accepted to room "+this.m_VoiceCallState.m_chatRoom.chatID),this.OnWebRTCConnectedAndVoiceChatConnected()):this.m_VoiceCallState.m_targetAccountID?(this.LogMsg("(VoiceChat) Call rejected to individual "+this.m_VoiceCallState.m_targetAccountID),this.OnUserEndVoiceChat()):(this.LogMsg("(VoiceChat) Call rejected to room "+this.m_VoiceCallState.m_chatRoom.chatID),this.EndVoiceChatInternal(!1)))},e.prototype.InitiateOneOnOneVoiceChat=function(e){if(this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_ScheduledInitiate)return void this.LogMsg("(VoiceChat) Hit InitiateOneOnOneVoiceChat in wrong state "+this.m_VoiceCallState.m_eState);wd.AudioPlaybackManager.SetVoiceActive(this.OnRequestMicrophoneAccess)},e.prototype.IPIntToString=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)},e.prototype.OnSetUpdatedLocalDescriptionSuccess=function(){this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionSuccess");var e=fi.Init(ku);e.Body().set_ip_webrtc_server(this.m_VoiceCallState.m_webRTCServerIP),e.Body().set_port_webrtc_server(this.m_VoiceCallState.m_webRTCServerPort),e.Body().set_ip_webrtc_session_client(this.m_VoiceCallState.m_webRTCClientIP),e.Body().set_port_webrtc_session_client(this.m_VoiceCallState.m_webRTCClientPort),e.Body().set_remote_description_version(this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion),Bu.AcknowledgeUpdatedRemoteDescription(this.m_CMInterface.GetServiceTransport(),e).then(function(e){})},e.prototype.OnSetUpdatedLocalDescriptionFailure=function(e){this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionFailure: "+e),this.EndVoiceChatInternal(!1)},e.prototype.OnCreateAnswerSuccess=function(e){this.LogMsg("(WebRTC) OnCreateAnswerSuccess: "+JSON.stringify(e));var t=this;if(this.m_PeerConnection.setLocalDescription(e).then(function(){t.OnSetUpdatedLocalDescriptionSuccess()}).catch(function(e){t.OnSetUpdatedLocalDescriptionFailure(e)}),this.m_VoiceCallState.m_bOfferUpdateInProgress=!1,void 0!=this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate){var i=this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate;this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=void 0,this.ProcessUpdatedRemoteDescription(i)}},e.prototype.OnCreateAnswerError=function(e){this.LogMsg("(WebRTC) OnCreateAnswerError: "+e),this.EndVoiceChatInternal(!1)},e.prototype.ProcessUpdatedRemoteDescription=function(e){this.m_VoiceCallState.m_bOfferUpdateInProgress=!0,this.m_mapSSRCToAccountID.clear();for(var t=e.ssrcs_to_accountids(),i=0;i<t.length;++i){var n=t[i];this.m_mapSSRCToAccountID.set(n.ssrc(),n.accountid())}var r=this,o=JSON.parse(e.remote_description());return this.m_PeerConnection.setRemoteDescription(new RTCSessionDescription(o)).then(function(){r.LogMsg("(WebRTC) Updated Remote Description: "+o.sdp),"offer"==o.type?(r.LogMsg("(WebRTC) setRemoteDescription success with new offer"),r.m_PeerConnection.createAnswer().then(function(e){r.OnCreateAnswerSuccess(e)}).catch(function(e){r.OnCreateAnswerError(e)}),r.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion=e.remote_description_version()):"answer"==o.type&&(r.LogMsg("(WebRTC) setRemoteDescription success"),r.m_VoiceCallState.m_bOfferUpdateInProgress=!1)}).catch(function(e){r.LogMsg("(WebRTC) setRemoteDescription error: "+e),r.LogMsg("(VoiceChat) Fatal error, ending chat"),r.EndVoiceChatInternal(!1)}),1},e.prototype.SendVoiceStatusUpdate=function(){var e=fi.Init(fu);e.Body().set_user_steamid(this.m_CMInterface.steamid.ConvertTo64BitString()),e.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),e.Body().set_user_muted_mic_locally(this.IsMicMuted()),e.Body().set_user_muted_output_locally(this.IsOutputMuted()),e.Body().set_user_has_no_mic_for_session(this.BNoMicAvailableForSession()),e.Body().set_user_webaudio_sample_rate(wd.AudioPlaybackManager.GetLastObservedSampleRate()),Zl.NotifyUserVoiceStatus(this.m_CMInterface.GetServiceTransport(),e)},e.prototype.UpdateUserVoiceStatus=function(e){if(this.m_VoiceCallState.m_voiceChatID==e.voice_chatid()){var t=new hi.a(e.user_steamid()),i=this.m_mapUserVoiceStatus.get(t.GetAccountID());void 0==i&&(i=new Ju),i.mic_muted_locally=e.user_muted_mic_locally(),i.output_muted_locally=e.user_muted_output_locally(),i.has_no_mic_for_session=e.user_has_no_mic_for_session();var n=wd.FriendStore.GetPlayerIfCached(t.GetAccountID()),r="[U:1:"+t.GetAccountID()+"]",o="";void 0!=n&&(o=n.display_name+" ");var a="";a=i.has_no_mic_for_session?"nomic":i.mic_muted_locally?"muted":"on",this.LogMsg("(VoiceChat) User "+o+r+" status now: mic("+a+") output("+(i.output_muted_locally?"muted":"on")+")"),this.m_mapUserVoiceStatus.set(t.GetAccountID(),i)}},e.prototype.OnWebRTCConnectedAndVoiceChatConnected=function(){var e=this,t=this.m_VoiceCallState.m_webRTCConnectedNotification;this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession,this.LogMsg("(WebRTC) WebRTC session connected "+this.IPIntToString(t.client_ip())+":"+t.client_port()+" => "+this.IPIntToString(t.server_ip())+":"+t.server_port()),""==this.m_VoiceCallState.m_voiceChatID&&(this.LogMsg("(VoiceChat) Reached OnWebRTCConnectedAndVoiceChatConnected without voice chat id? Failing."),this.EndVoiceChatInternal(!1));var i=fi.Init(yu);i.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),i.Body().set_ssrc_my_sending_stream(t.ssrc()),i.Body().set_ip_webrtc_client(t.client_ip()),i.Body().set_port_webrtc_client(t.client_port()),i.Body().set_ip_webrtc_server(t.server_ip()),i.Body().set_port_webrtc_server(t.server_port()),i.Body().set_has_audio_worklets_support(wd.AudioPlaybackManager.supports_audio_worklets),i.Body().set_user_agent(navigator.userAgent),Zl.UpdateVoiceChatWebRTCData(this.m_CMInterface.GetServiceTransport(),i).then(function(t){1==t.GetEResult()?(e.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_Connected,e.m_VoiceCallState.m_timeFinishedConnecting=performance.now(),e.SendVoiceStatusUpdate(),e.LogMsg("(WebRTC) Updated voice session with WebRTC session data "+e.m_VoiceCallState.m_voiceChatID),t.Body().send_client_voice_logs()&&e.ScheduleClientVoiceLogsUpload(2),e.CheckConnection()):(e.LogMsg("(WebRTC) Error updating voice session with WebRTC session data "+e.m_VoiceCallState.m_voiceChatID),e.BackOffAndRetryInitiateVoiceChat())}).catch(function(t){e.LogMsg("(WebRTC) Error updating voice session with WebRTC session data "+e.m_VoiceCallState.m_voiceChatID),e.BackOffAndRetryInitiateVoiceChat()})},e.prototype.OnAcceptOneOnOneVoiceChat=function(e,t){var i=this;this.m_VoiceCallState.m_targetAccountID!=e.GetAccountID()&&this.EndVoiceChatInternal(!1),this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_None,this.m_VoiceCallState.m_targetAccountID=e.GetAccountID(),this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!1,this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1,this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!1,this.m_VoiceCallState.m_chatRoom=null,this.m_VoiceCallState.m_voiceChatID=t;var n=fi.Init(cu);n.Body().set_steamid_partner(e.ConvertTo64BitString()),n.Body().set_accepted_request(!0),n.Body().set_voice_chatid(t),Zl.AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(),n).then(function(t){1==t.GetEResult()?i.InitiateOneOnOneVoiceChat(e.GetAccountID()):(i.LogMsg("(VoiceChat) Failed responding to voice chat from "+e.GetAccountID()),i.EndVoiceChatInternal(!1))})},e.prototype.OnRejectOneOnOneVoiceChat=function(e,t){var i=this,n=fi.Init(cu);n.Body().set_steamid_partner(e.ConvertTo64BitString()),n.Body().set_accepted_request(!1),n.Body().set_voice_chatid(t),Zl.AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(),n).then(function(t){1==t.GetEResult()||i.LogMsg("(VoiceChat) Failed responding to voice chat from "+e.GetAccountID())})},e.prototype.PlayRingSound=function(e){this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e).audio_buffer=wd.AudioPlaybackManager.PlayAudioURLWithRepeats(ai.a.COMMUNITY_CDN_URL+"public/sounds/webui/steam_phonecall.m4a?v=1",1)},e.prototype.IsVoiceActive=function(e,t){return!!this.m_VoiceCallState.BMatchingCall(e,t)&&this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None},e.prototype.CheckVoiceSnoozeTiemout=function(){if(wd.IdleTracker.GetUserIdleTime()>3600){var e=this.m_MicVolumeMeter.GetLastTimeNonZero();performance.now()-e>36e5&&(this.OnUserEndVoiceChat(),wd.ShowAlert(Object(ua.b)("#Voice_LeftIdleVoiceChat_Title"),Object(ua.b)("#Voice_LeftIdleVoiceChat_Body"),Object(ua.b)("#Voice_LeftIdleVoiceChat_OK")).then(function(){}).catch(function(){return!0}))}},e.prototype.ProcessStatsReport=function(){if(this.CheckVoiceSnoozeTiemout(),void 0!=this.m_PeerConnection&&(this.m_StatsTimeout=SetBackgroundTimeout(this.ProcessStatsReport,1e4),ai.a.IN_CLIENT&&ru.b.BClientConnected().then(function(){}),-1==this.m_PeerConnection.localDescription.sdp.indexOf("mozilla..."))){var e=new Date,t=this,i=this.m_PeerConnection;t.LogMsg("-----------------------------------------------------------"),t.LogMsg(" Voice Report: "+e.toUTCString()),t.LogMsg("-----------------------------------------------------------");var n=i.getSenders();if(n.length>0){this.LogMsg("(WebRTC) "+this.PadOutput("(Sender SSRC)",40)+" "+this.PadOutput("Audio Packets Sent",20)+" "+this.PadOutput("Connection State",20)+" "+this.PadOutput("Writable",20)+" "+this.PadOutput("Track State",20)+" "+this.PadOutput("Round Trip MS",20)+" "+this.PadOutput("Transport Bytes Sent",24)+" "+this.PadOutput("Transport Bytes Received",24)+" ");try{for(var r=0;r<n.length;++r)n[r].getStats().then(function(e){e.forEach(function(i){if("outbound-rtp"==i.type&&"audio"==i.mediaType){var n=i.ssrc,r=i.packetsSent,o="",a="",s=0,c=0,l=0,u="",d=e.get(i.trackId);void 0!=d&&"track"==d.type&&"audio"==d.kind&&(u=d.ended&&d.detached?"ended+detached":d.ended?"ended":d.detached?"detached":"active");var p=e.get(i.transportId);if(void 0!=p&&"transport"==p.type){var m=e.get(p.selectedCandidatePairId);void 0!=m&&"candidate-pair"==m.type&&(o=m.state,a=m.writable?"writable":"not-writable",s=1e3*m.currentRoundTripTime),c=p.bytesSent,l=p.bytesReceived}t.LogMsg("(WebRTC) "+t.PadOutput(String(n),40)+" "+t.PadOutput(String(r),20)+" "+t.PadOutput(o,20)+" "+t.PadOutput(a,20)+" "+t.PadOutput(u,20)+" "+t.PadOutput(String(s),20)+" "+t.PadOutput(String(c),24)+" "+t.PadOutput(String(l),24))}})})}catch(e){t.LogMsg("(WebRTC) Can't log sender stats on this browser")}}SetBackgroundTimeout(this.ProcessReceiverStatsReport,100)}},e.prototype.ProcessReceiverStatsReport=function(){if(-1==this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...")){var e=this,t=this.m_PeerConnection;try{t.getStats(function(t){t.result().forEach(function(t){if("ssrc"==t.type){var i=new Hu,n=t.names(),r=n.indexOf("mediaType");if(-1!=r&&"audio"==t.stat(n[r])){t.names().forEach(function(e){"ssrc"==e?i.m_SSRC=Number(t.stat(e)):"googCurrentDelayMs"==e?i.m_MostRecentDelayEstimateMs=Number(t.stat(e)):"packetsLost"==e?i.m_PacketsLost=Number(t.stat(e)):"packetsReceived"==e?i.m_PacketsReceived=Number(t.stat(e)):"googJitterReceived"==e?i.m_MostRecentJitterReceivedMs=Number(t.stat(e)):"googJitterBufferMs"==e?i.m_CurrentJitterBufferMs=Number(t.stat(e)):"bytesReceived"==e?i.m_BytesReceived=Number(t.stat(e)):"googDecodingCTN"==e?i.m_DecodingThroughNetEQ=Number(t.stat(e)):"googDecodingPLC"==e?i.m_DecodingPacketLossCorrection=Number(t.stat(e)):"googDecodingCNG"==e?i.m_DecodingComfortNoiseGeneration=Number(t.stat(e)):"googDecodingPLCCNG"==e?i.m_DecodingPacketLossFadeNoiseGeneration=Number(t.stat(e)):"googDecodingNormal"==e?i.m_DecodingNormal=Number(t.stat(e)):"googDecodingCTSG"==e?i.m_DecodingSilenceGenerator=Number(t.stat(e)):"googDecodingMuted"==e&&(i.m_DecodingMuted=Number(t.stat(e)))});var o=e.m_mapSSRCToAccountID.get(i.m_SSRC);void 0!=o&&e.m_mapAccountIDToStats.set(o,i)}}})}),e.LogMsg("-----------------------------------------------------------"),e.LogMsg("(WebRTC) "+e.PadOutput("(Receiving)",40)+" "+e.PadOutput("Packets Received",20)+" "+e.PadOutput("Est. Delay MS",20)+" "+e.PadOutput("Packets Lost",20)+" "+e.PadOutput("Last Jitter MS",20)+" "+e.PadOutput("Jitter Buffer MS",20)+" "+e.PadOutput("Decoding Successes",20)+" "+e.PadOutput("Decoding Errors",20)),e.m_mapAccountIDToStats.forEach(function(t,i){var n=wd.FriendStore.GetPlayerIfCached(i),r="[unknown]";void 0!=n&&(r=n.display_name),e.LogMsg("(WebRTC) "+e.PadOutput(r.substr(0,40),40)+" "+e.PadOutput(String(t.m_PacketsReceived),20)+" "+e.PadOutput(String(t.m_MostRecentDelayEstimateMs),20)+" "+e.PadOutput(String(t.m_PacketsLost),20)+" "+e.PadOutput(String(t.m_MostRecentJitterReceivedMs),20)+" "+e.PadOutput(String(t.m_CurrentJitterBufferMs),20)+" "+e.PadOutput(String(t.m_DecodingNormal+t.m_DecodingComfortNoiseGeneration),20)+" "+e.PadOutput(String(t.m_DecodingPacketLossCorrection+t.m_DecodingPacketLossFadeNoiseGeneration+t.m_DecodingSilenceGenerator),20))}),e.LogMsg("-----------------------------------------------------------")}catch(e){}}},e.prototype.PadOutput=function(e,t,i){if(void 0===i&&(i=void 0),Math.abs(t)<=e.length)return e;var n=Math.max(Math.abs(t)-e.length||0,0),r=Array(n+1).join(String(i||" ").charAt(0));return t<0?r+e:e+r},e.prototype.CheckConnection=function(){if(this.m_VoiceCallState.m_eState==Vu.k_EVoiceCallState_Connected)this.LogMsg("(VoiceChat) Succcess! Voice is fully connected took "+(this.m_VoiceCallState.m_timeFinishedConnecting-this.m_VoiceCallState.m_timeStartedConnecting).toFixed(0)+"ms to complete, "+(this.m_VoiceCallState.m_nFailuresThisInitiate+1)+" attempts made before success."),ClearBackgroundInterval(this.m_ConnectionCheck),this.m_ConnectionCheck=0,this.m_VoiceCallState.m_nFailuresThisInitiate=0,this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=!1,this.m_StatsTimeout=SetBackgroundTimeout(this.ProcessStatsReport,1e4);else{var e=performance.now(),t=e-this.m_VoiceCallState.m_timeStartedConnecting;this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds=t>2e3;var i=6e4;0!=this.m_VoiceCallState.m_targetAccountID&&this.m_VoiceCallState.m_eState==Vu.k_EVoiceCallState_RequestedPermission&&(i=3e5),t>i&&(this.LogMsg("(VoiceChat) Failure! Gave up after more than one minute trying to connect, last state was "+X(this.m_VoiceCallState.m_eState)+"("+this.m_VoiceCallState.m_eState+")"),this.EndVoiceChatInternal(!1)),this.LogMsg("(VoiceChat) Still trying to connect to voice chat/webrtc "+X(this.m_VoiceCallState.m_eState)+"("+this.m_VoiceCallState.m_eState+") "+(performance.now()-this.m_VoiceCallState.m_timeStartedConnecting).toFixed(0)+"ms elapsed...")}},e.prototype.BackOffAndRetryInitiateVoiceChat=function(){var e=this;if(this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None){var t=this.m_VoiceCallState.m_nFailuresThisInitiate,i=this.m_VoiceCallState.m_targetAccountID,n=this.m_VoiceCallState.m_chatRoom;this.EndVoiceChatInternal(!0),this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_ScheduledInitiate,this.m_VoiceCallState.m_targetAccountID=i,this.m_VoiceCallState.m_chatRoom=n,this.m_VoiceCallState.m_nFailuresThisInitiate=t+1;var r=250;r=t<1?250:t<3?1e3:t<5?5e3:t<10?1e4:t<15?3e4:6e4,this.LogMsg("(VoiceChat) Retrying InitiateVoiceChat in "+r.toFixed(0)+" milliseconds..."),this.m_ScheduledInitiate=SetBackgroundTimeout(function(){e.ScheduledInitiate(i,n)},r)}},e.prototype.ScheduledInitiate=function(e,t){this.m_ScheduledInitiate=0,this.InitiateVoiceChat(e,t)},e.prototype.InitiateVoiceChat=function(e,t){var i=this;ru.b.BClientConnected().then(function(){});var n=xu()(navigator.userAgent);if("Chrome"!=n.browser.name)return this.LogMsg("(VoiceChat) Voice chat not supported in browser: "+n.browser.name),void wd.ShowAlert(Object(ua.b)("#Voice_VoiceUnavailableInBrowser_Title"),Object(ua.b)("#Voice_VoiceUnavailableInBrowser_Body",n.browser.name),Object(ua.b)("#Voice_VoiceUnavailableInBrowser_OK")).then(function(){}).catch(function(){return!0});if(0!=e&&t)return void this.LogMsg("Cant initiate voice chat for both friend & group");var r=this.m_VoiceCallState.BMatchingCall(e,t);this.m_VoiceCallState.BMatchingCall(e,t)||this.m_VoiceCallState.m_eState==Vu.k_EVoiceCallState_None||(this.LogMsg("(VoiceChat) InitiateVoiceChat called for new target account/room while already connected, ending prior session first"),this.EndVoiceChatInternal(!1)),this.m_ScheduledInitiate&&(ClearBackgroundTimeout(this.m_ScheduledInitiate),this.m_ScheduledInitiate=0);var o=performance.now();if(this.m_VoiceCallState.m_eState<=Vu.k_EVoiceCallState_ScheduledInitiate&&0!=this.m_VoiceCallState.m_timeEndedVoiceChat&&o-this.m_VoiceCallState.m_timeEndedVoiceChat<100){this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_ScheduledInitiate,this.m_VoiceCallState.m_targetAccountID=e,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!0,this.m_VoiceCallState.m_chatRoom=t;var a=100-(o-this.m_VoiceCallState.m_timeEndedVoiceChat);return this.LogMsg("(VoiceChat) Delaying requested InitiateChat for "+a.toFixed(0)+" milliseconds to let prior EndVoiceChat finish..."),void(this.m_ScheduledInitiate=SetBackgroundTimeout(function(){i.ScheduledInitiate(e,t)},a))}(!r||this.m_VoiceCallState.m_eState<=Vu.k_EVoiceCallState_ScheduledInitiate)&&(e?this.LogMsg("Resetting voice chat state and initiating to individual "+e):this.LogMsg("Resetting voice chat state and initiating to room "+t.chatID),this.m_VoiceCallState.m_eState<=Vu.k_EVoiceCallState_ScheduledInitiate&&(this.m_VoiceCallState.m_targetAccountID=e,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!0,this.m_VoiceCallState.m_chatRoom=t,this.m_VoiceCallState.m_timeStartedConnecting=performance.now(),this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion="0",this.m_ConnectionCheck=SetBackgroundInterval(this.CheckConnection,2e3),0!=e?this.InitiateOneOnOneVoiceChat(e):this.InitiateChatRoomVoice()))},e.prototype.OnRequestMicrophoneAccess=function(){var e=this;if(this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_ScheduledInitiate)return this.LogMsg("(VoiceChat) Hit OnRequestMicrophoneAccess in wrong state "+this.m_VoiceCallState.m_eState),void this.EndVoiceChatInternal(!1);void 0==this.m_AudioContext&&(this.m_AudioContext=wd.AudioPlaybackManager.context);var t={optional:[{echoCancellation:this.m_Settings.m_VoiceUseEchoCancellation},{googEchoCancellation:this.m_Settings.m_VoiceUseEchoCancellation},{googEchoCancellation2:this.m_Settings.m_VoiceUseEchoCancellation},{googNoiseSupression:this.m_Settings.m_VoiceUseNoiseCancellation},{googNoiseSupression2:this.m_Settings.m_VoiceUseNoiseCancellation},{mozNoiseSuppression:this.m_Settings.m_VoiceUseNoiseCancellation},{googTypingNoiseDetection:this.m_Settings.m_VoiceUseNoiseCancellation},{googAutoGainControl:this.m_Settings.m_VoiceUseAutoGainControl},{googAutoGainControl2:this.m_Settings.m_VoiceUseAutoGainControl},{mozAutoGainControl:this.m_Settings.m_VoiceUseAutoGainControl},{googHighpassFilter:!0},{googAudioMirroring:!1}]};"default"!=this.m_Settings.m_SelectedMicID&&t.optional.push({sourceId:this.m_Settings.m_SelectedMicID}),this.m_VoiceCallState.m_targetAccountID?this.LogMsg("(VoiceChat) Call to individual "+this.m_VoiceCallState.m_targetAccountID+" now initating getUserMedia/WebRTC"):this.LogMsg("(VoiceChat) Call to room "+this.m_VoiceCallState.m_chatRoom.chatID+" now initating getUserMedia/WebRTC"),this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_RequestedMicAccess;var i=navigator;this.m_bUserHasDeniedMicPermissions=!1,i.getUserMedia=i.getUserMedia||i.webkitGetUserMedia||i.mozGetUserMedia||i.msGetUserMedia,i.getUserMedia({audio:t,video:!1},function(t){e.OnGetUserMediaSuccess(t)},this.OnGetUserMediaFailure)},e.prototype.ScheduleClientVoiceLogsUpload=function(e){if(""!=this.m_VoiceCallState.m_voiceChatID){this.m_ScheduledVoiceLogsUpload&&(ClearBackgroundTimeout(this.m_ScheduledVoiceLogsUpload),this.m_ScheduledVoiceLogsUpload=0);var t=this;this.m_ScheduledVoiceLogsUpload=SetBackgroundTimeout(t.UploadClientSideVoiceLogs,1e3*e)}},e.prototype.UploadClientSideVoiceLogs=function(){var e=this;if(""!=this.m_VoiceCallState.m_voiceChatID){if(this.m_bClientSideLogsUploadInProgress)return void this.ScheduleClientVoiceLogsUpload(2);this.m_bClientSideLogsUploadInProgress=!0;var t=fi.Init(bu);t.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);var i=this.m_rgLogLines.slice(this.m_nLastLogLineUploaded);t.Body().set_client_voice_logs_new_lines(i.join("\r\n"));var n=i.length;Zl.UploadClientVoiceChatLogs(this.m_CMInterface.GetServiceTransport(),t).then(function(t){1==t.GetEResult()?(e.m_nLastLogLineUploaded+=n,e.LogMsg("(VoiceChat) Uploaded "+n+" new lines of voice chat log info to server"),e.ScheduleClientVoiceLogsUpload(20)):(e.LogMsg("(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"),e.ScheduleClientVoiceLogsUpload(10+10*Math.random())),e.m_bClientSideLogsUploadInProgress=!1}).catch(function(t){e.LogMsg("(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"),e.ScheduleClientVoiceLogsUpload(10+10*Math.random()),e.m_bClientSideLogsUploadInProgress=!1})}},e.prototype.EndVoiceChatInternal=function(e){var t=this;if(this.m_ScheduledVoiceLogsUpload&&this.UploadClientSideVoiceLogs(),this.m_ScheduledInitiate&&(ClearBackgroundTimeout(this.m_ScheduledInitiate),this.m_ScheduledInitiate=0),this.m_StatsTimeout&&(ClearBackgroundTimeout(this.m_StatsTimeout),this.m_StatsTimeout=0),this.m_VoiceCallState.m_eState!=Vu.k_EVoiceCallState_None){if(!e){if(this.m_VoiceCallState.m_targetAccountID){var i=this.m_VoiceCallState.m_targetAccountID;this.m_VoiceCallState.m_targetAccountID=0;var n=this.m_VoiceCallState.m_voiceChatID,r=fi.Init(mu);r.Body().set_steamid_partner(hi.a.InitFromAccountID(i).ConvertTo64BitString()),r.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);var o=this.m_VoiceCallState.m_eState;Zl.LeaveOneOnOneChat(this.m_CMInterface.GetServiceTransport(),r).then(function(e){if(1==e.GetEResult())if(t.LogMsg("(VoiceChat) Left voice chat with "+i),o==Vu.k_EVoiceCallState_Connected){var r=new Yu;r.partner_accountid=t.m_CMInterface.steamid.GetAccountID(),r.voice_chatid=n,r.previously_joined=!0,t.m_mapOneOnOneCallsWaitingJoinOrAccept.set(i,r)}else{var a=wd.FriendStore.self,s=wd.ChatStore.GetFriendChat(i,!1);s&&a&&s.AddVoiceChannelInviteMsg(wd.CMInterface.steamid.GetAccountID(),wd.GetServerRTime32(),Object(ua.b)("#FriendMsg_VoiceChannelEndedExplicit",a.display_name))}else t.LogMsg("(VoiceChat) Failed leaving voice chat with "+i)})}else if(this.m_VoiceCallState.m_chatRoom){var r=fi.Init(ao);r.Body().set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),r.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID);var a=this.m_VoiceCallState.m_chatRoom.chatID;ra.LeaveVoiceChat(this.m_CMInterface.GetServiceTransport(),r).then(function(e){1==e.GetEResult()?t.LogMsg("(VoiceChat) Left chat room ("+a+") voice chat"):t.LogMsg("(VoiceChat) Failed leaving chat room ("+a+") voice chat")})}this.m_mapUserVoiceStatus.clear()}this.m_mapSSRCToAccountID.clear(),this.m_mapAccountIDToStats.clear();var s=this.m_VoiceCallState.m_eState>Vu.k_EVoiceCallState_RequestedPermission;this.m_VoiceCallState.m_eState=Vu.k_EVoiceCallState_None,this.m_VoiceCallState.m_targetAccountID=0,this.m_VoiceCallState.m_bInitiatedOneOnOneCall=!1,this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg=!1,this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin=!1,this.m_VoiceCallState.m_chatRoom=null,e&&s||(this.m_VoiceCallState.m_voiceChatID=""),this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion="0",this.m_VoiceCallState.m_nFailuresThisInitiate=0,this.m_VoiceCallState.m_timeEndedVoiceChat=performance.now(),this.m_VoiceCallState.m_webRTCConnectedNotification=void 0,this.m_VoiceCallState.m_bOfferUpdateInProgress=!1,this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate=void 0,this.m_ConnectionCheck&&(ClearBackgroundInterval(this.m_ConnectionCheck),this.m_ConnectionCheck=0);for(var c=this.m_rgAudioStreams.pop();void 0!=c;){void 0!=c.elem&&(c.elem.pause(),c.elem.src=void 0,c.elem.srcObject=void 0,c.elem=void 0),void 0!=c.volume_meter&&(c.volume_meter.stop(),c.volume_meter=void 0),c.stream.oninactive=void 0;for(var l=0,u=c.stream.getTracks();l<u.length;l++)u[l].stop();if(void 0!=this.m_AudioContext&&c.source_node)try{c.source_node.disconnect()}catch(e){}c.output_gain_node&&(c.output_gain_node.disconnect(),c.output_gain_node=void 0),c=this.m_rgAudioStreams.pop()}void 0!=this.m_MicVolumeMeter&&(this.m_MicVolumeMeter.stop(),this.m_MicVolumeMeter=void 0),void 0!=this.m_MicNoiseGate&&(this.m_MicNoiseGate.input?(this.m_MicNoiseGate.input.disconnect(),this.m_MicNoiseGate.output.disconnect(),this.m_MicNoiseGate.noiseGateKernel_.disconnect()):this.m_MicNoiseGate.disconnect(),this.m_MicNoiseGate=void 0),void 0!=this.m_MicInputGainNode&&(this.m_MicInputGainNode.disconnect(),this.m_MicInputGainNode=void 0),void 0!=this.m_AudioContext&&(wd.AudioPlaybackManager.SetVoiceNotActive(),this.m_AudioContext=void 0),this.m_PeerConnection&&(this.m_PeerConnection.oniceconnectionstatechange=void 0,this.m_PeerConnection.onicegatheringstatechange=void 0,this.m_PeerConnection.onsignalingstatechange=void 0,this.m_PeerConnection.close(),this.m_PeerConnection=void 0)}},e.prototype.FillInChatUsabilityMetrics=function(e){var t=e.voice_settings();t.set_voice_input_gain(this.m_Settings.m_VoiceInputGain),t.set_voice_output_gain(this.m_Settings.m_VoiceOutputGain),t.set_noise_gate_level(Math.round(this.m_Settings.m_NoiseGateLevel)),t.set_voice_use_echo_cancellation(this.m_Settings.m_VoiceUseEchoCancellation),t.set_voice_use_noise_cancellation(this.m_Settings.m_VoiceUseNoiseCancellation),t.set_voice_use_auto_gain_control(this.m_Settings.m_VoiceUseAutoGainControl),t.set_selected_non_default_mic("default"!==this.m_Settings.m_SelectedMicID),t.set_selected_non_default_output("default"!==this.m_Settings.m_SelectedOutputID),t.set_push_to_talk_enabled(this.GetPushToTalkEnabled()),t.set_push_to_mute_enabled(this.GetPushToMuteEnabled()),t.set_play_ptt_sounds(this.m_Settings.m_bPlayPTTSounds),this.IsAnyVoiceActive()&&(this.m_VoiceCallState.m_targetAccountID?e.ui_state().set_in_one_on_one_voice_chat(!0):this.m_VoiceCallState.m_chatRoom&&e.ui_state().set_in_group_voice_chat(!0))},e.k_MaxPerUserGainMultiplier=2,e.k_MaxInputOutputGainValue=4,si.c([_i.observable],e.prototype,"m_VoiceCallState",void 0),si.c([_i.observable],e.prototype,"m_bPushToTalkEnabled",void 0),si.c([_i.observable],e.prototype,"m_bPushToMuteEnabled",void 0),si.c([_i.observable],e.prototype,"m_bVoicePTTStateEnabled",void 0),si.c([_i.observable],e.prototype,"m_VKPushToTalkHotKey",void 0),si.c([_i.observable],e.prototype,"m_strPushToTalkDisplayString",void 0),si.c([_i.observable],e.prototype,"m_bUserHasDeniedMicPermissions",void 0),si.c([_i.observable],e.prototype,"m_bOutputMuted",void 0),si.c([_i.observable],e.prototype,"m_AudioContext",void 0),si.c([_i.observable],e.prototype,"m_rgAudioStreams",void 0),si.c([_i.observable],e.prototype,"m_MicVolumeMeter",void 0),si.c([_i.observable],e.prototype,"m_MicNoiseGate",void 0),si.c([_i.observable],e.prototype,"m_MicInputGainNode",void 0),si.c([_i.observable],e.prototype,"m_PeerConnection",void 0),si.c([_i.observable],e.prototype,"m_Settings",void 0),si.c([_i.observable],e.prototype,"m_bForceConnectingStatus",void 0),si.c([_i.observable],e.prototype,"m_bForceReconnectingStatus",void 0),si.c([_i.action.bound],e.prototype,"SetSelectedMic",null),si.c([_i.action.bound],e.prototype,"SetSelectedOutput",null),si.c([_i.action.bound],e.prototype,"SetUseEchoCancellation",null),si.c([_i.action.bound],e.prototype,"SetUseNoiseCancellation",null),si.c([_i.action.bound],e.prototype,"SetUseAutoGainControl",null),si.c([_i.action.bound],e.prototype,"SetVoiceEchoLocalMic",null),si.c([_i.action.bound],e.prototype,"SetVoiceLogDetails",null),si.c([_i.action.bound],e.prototype,"GetVoiceLogDetails",null),si.c([_i.action.bound],e.prototype,"SetUseNoiseGateLevel",null),si.c([_i.action.bound],e.prototype,"SetVoiceInputGain",null),si.c([_i.action.bound],e.prototype,"SetVoiceOutputGain",null),si.c([_i.action.bound],e.prototype,"ForceReconnectingStatus",null),si.c([_i.action.bound],e.prototype,"ForceConnectingStatus",null),si.c([_i.action.bound],e.prototype,"LogMsg",null),si.c([_i.action.bound],e.prototype,"GetVoiceLogs",null),si.c([_i.action.bound],e.prototype,"OnPushToTalkReleased",null),si.c([_i.action.bound],e.prototype,"OnPushToTalkStateChange",null),si.c([_i.action.bound],e.prototype,"UpdateNoiseGateOnActiveMic",null),si.c([_i.action.bound],e.prototype,"OnAudioContextStateChange",null),si.c([_i.action.bound],e.prototype,"OnIceCandidate",null),si.c([_i.action.bound],e.prototype,"AddRemoteIceCandidate",null),si.c([_i.action.bound],e.prototype,"OnSignalingStateChange",null),si.c([_i.action.bound],e.prototype,"OnIceConnectionStateChange",null),si.c([_i.action.bound],e.prototype,"OnIceGatheringStateChange",null),si.c([_i.action.bound],e.prototype,"OnRemoveRemoteStream",null),si.c([_i.action.bound],e.prototype,"OnAddRemoteStream",null),si.c([_i.action.bound],e.prototype,"ModifyLocalSDPBeforeSetting",null),si.c([_i.action.bound],e.prototype,"OnCreateOfferSuccess",null),si.c([_i.action.bound],e.prototype,"OnCreateOfferError",null),si.c([_i.action.bound],e.prototype,"OnNoiseGateMessage",null),si.c([_i.action.bound],e.prototype,"SetupNoiseGateOnMic",null),si.c([_i.action.bound],e.prototype,"OnGetUserMediaSuccess",null),si.c([_i.action.bound],e.prototype,"OnGetUserMediaFailure",null),si.c([_i.action.bound],e.prototype,"OnSetUpdatedLocalDescriptionSuccess",null),si.c([_i.action.bound],e.prototype,"OnSetUpdatedLocalDescriptionFailure",null),si.c([_i.action.bound],e.prototype,"OnCreateAnswerSuccess",null),si.c([_i.action.bound],e.prototype,"OnCreateAnswerError",null),si.c([_i.action.bound],e.prototype,"OnAcceptOneOnOneVoiceChat",null),si.c([_i.action.bound],e.prototype,"OnRejectOneOnOneVoiceChat",null),si.c([_i.action.bound],e.prototype,"PlayRingSound",null),si.c([_i.action.bound],e.prototype,"ProcessStatsReport",null),si.c([_i.action.bound],e.prototype,"ProcessReceiverStatsReport",null),si.c([_i.action.bound],e.prototype,"CheckConnection",null),si.c([_i.action.bound],e.prototype,"ScheduledInitiate",null),si.c([_i.action.bound],e.prototype,"OnRequestMicrophoneAccess",null),si.c([_i.action.bound],e.prototype,"UploadClientSideVoiceLogs",null),e}(),Zu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.appid=function(){return ui.Message.getField(this,1)},t.prototype.set_appid=function(e){ui.Message.setField(this,1,e)},t.prototype.is_allowed=function(){return ui.Message.getField(this,2)},t.prototype.set_is_allowed=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_appid(t.readUint32());break;case 2:e.set_is_allowed(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint32(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBool(2,i)},t.prototype.getClassName=function(){return"ParentalApp"},t}(ui.Message),Qu=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[4,5],null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.applist_base_id=function(){return ui.Message.getField(this,2)},t.prototype.set_applist_base_id=function(e){ui.Message.setField(this,2,e)},t.prototype.applist_base_description=function(){return ui.Message.getField(this,3)},t.prototype.set_applist_base_description=function(e){ui.Message.setField(this,3,e)},t.prototype.applist_base=function(){return ui.Message.getRepeatedWrapperField(this,Zu,4)},t.prototype.set_applist_base=function(e){ui.Message.setRepeatedWrapperField(this,4,e)},t.prototype.add_applist_base=function(e,t){return ui.Message.addToRepeatedWrapperField(this,4,e,Zu,t)},t.prototype.applist_custom=function(){return ui.Message.getRepeatedWrapperField(this,Zu,5)},t.prototype.set_applist_custom=function(e){ui.Message.setRepeatedWrapperField(this,5,e)},t.prototype.add_applist_custom=function(e,t){return ui.Message.addToRepeatedWrapperField(this,5,e,Zu,t)},t.prototype.passwordhashtype=function(){return ui.Message.getField(this,6)},t.prototype.set_passwordhashtype=function(e){ui.Message.setField(this,6,e)},t.prototype.salt=function(){return ui.Message.getField(this,7)},t.prototype.set_salt=function(e){ui.Message.setField(this,7,e)},t.prototype.passwordhash=function(){return ui.Message.getField(this,8)},t.prototype.set_passwordhash=function(e){ui.Message.setField(this,8,e)},t.prototype.is_enabled=function(){return ui.Message.getField(this,9)},t.prototype.set_is_enabled=function(e){ui.Message.setField(this,9,e)},t.prototype.enabled_features=function(){return ui.Message.getField(this,10)},t.prototype.set_enabled_features=function(e){ui.Message.setField(this,10,e)},t.prototype.recovery_email=function(){return ui.Message.getField(this,11)},t.prototype.set_recovery_email=function(e){ui.Message.setField(this,11,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_applist_base_id(t.readUint32());break;case 3:e.set_applist_base_description(t.readString());break;case 4:var i=new Zu;t.readMessage(i,Zu.deserializeBinaryFromReader),e.add_applist_base(i);break;case 5:var i=new Zu;t.readMessage(i,Zu.deserializeBinaryFromReader),e.add_applist_custom(i);break;case 6:e.set_passwordhashtype(t.readUint32());break;case 7:e.set_salt(t.readBytes());break;case 8:e.set_passwordhash(t.readBytes());break;case 9:e.set_is_enabled(t.readBool());break;case 10:e.set_enabled_features(t.readUint32());break;case 11:e.set_recovery_email(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeUint32(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),i=e.applist_base(),i.length>0&&t.writeRepeatedMessage(4,i,Zu.serializeBinaryToWriter),i=e.applist_custom(),i.length>0&&t.writeRepeatedMessage(5,i,Zu.serializeBinaryToWriter),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBytes(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBytes(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeBool(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeUint32(10,i),void 0!==(i=ui.Message.getField(e,11))&&t.writeString(11,i)},t.prototype.getClassName=function(){return"ParentalSettings"},t}(ui.Message),$u=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_EnableParentalSettings_Response"},t}(ui.Message)),ed=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_DisableParentalSettings_Response"},t}(ui.Message)),td=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,10)},t.prototype.set_steamid=function(e){ui.Message.setField(this,10,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 10:e.set_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,10))&&t.writeFixed64String(10,i)},t.prototype.getClassName=function(){return"CParental_GetParentalSettings_Request"},t}(ui.Message),id=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.settings=function(){return ui.Message.getWrapperField(this,Qu,1,1)},t.prototype.set_settings=function(e){ui.Message.setWrapperField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new Qu;t.readMessage(i,Qu.deserializeBinaryFromReader),e.set_settings(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;null!=(i=e.settings())&&t.writeMessage(1,i,Qu.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CParental_GetParentalSettings_Response"},t}(ui.Message),nd=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.serialized_settings=function(){return ui.Message.getField(this,1)},t.prototype.set_serialized_settings=function(e){ui.Message.setField(this,1,e)},t.prototype.signature=function(){return ui.Message.getField(this,2)},t.prototype.set_signature=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_serialized_settings(t.readBytes());break;case 2:e.set_signature(t.readBytes());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBytes(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeBytes(2,i)},t.prototype.getClassName=function(){return"CParental_GetSignedParentalSettings_Response"},t}(ui.Message)),rd=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_SetParentalSettings_Response"},t}(ui.Message)),od=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.unlock_token=function(){return ui.Message.getField(this,1)},t.prototype.set_unlock_token=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_unlock_token(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CParental_ValidateToken_Request"},t}(ui.Message),ad=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_ValidateToken_Response"},t}(ui.Message),sd=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.password=function(){return ui.Message.getField(this,1)},t.prototype.set_password=function(e){ui.Message.setField(this,1,e)},t.prototype.session=function(){return ui.Message.getField(this,2)},t.prototype.set_session=function(e){ui.Message.setField(this,2,e)},t.prototype.send_unlock_on_success=function(){return ui.Message.getField(this,3)},t.prototype.set_send_unlock_on_success=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_password(t.readString());break;case 2:e.set_session(t.readString());break;case 3:e.set_send_unlock_on_success(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeBool(3,i)},t.prototype.getClassName=function(){return"CParental_ValidatePassword_Request"},t}(ui.Message),cd=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.token=function(){return ui.Message.getField(this,1)},t.prototype.set_token=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_token(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CParental_ValidatePassword_Response"},t}(ui.Message),ld=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_LockClient_Response"},t}(ui.Message)),ud=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_RequestRecoveryCode_Response"},t}(ui.Message)),dd=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CParental_DisableWithRecoveryCode_Response"},t}(ui.Message)),pd=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.serialized_settings=function(){return ui.Message.getField(this,1)},t.prototype.set_serialized_settings=function(e){ui.Message.setField(this,1,e)},t.prototype.signature=function(){return ui.Message.getField(this,2)},t.prototype.set_signature=function(e){ui.Message.setField(this,2,e)},t.prototype.password=function(){return ui.Message.getField(this,3)},t.prototype.set_password=function(e){ui.Message.setField(this,3,e)},t.prototype.sessionid=function(){return ui.Message.getField(this,4)},t.prototype.set_sessionid=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_serialized_settings(t.readBytes());break;case 2:e.set_signature(t.readBytes());break;case 3:e.set_password(t.readString());break;case 4:e.set_sessionid(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeBytes(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBytes(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeString(4,i)},t.prototype.getClassName=function(){return"CParental_ParentalSettingsChange_Notification"},t}(ui.Message),md=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.password=function(){return ui.Message.getField(this,1)},t.prototype.set_password=function(e){ui.Message.setField(this,1,e)},t.prototype.sessionid=function(){return ui.Message.getField(this,2)},t.prototype.set_sessionid=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_password(t.readString());break;case 2:e.set_sessionid(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CParental_ParentalUnlock_Notification"},t}(ui.Message),hd=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.sessionid=function(){return ui.Message.getField(this,1)},t.prototype.set_sessionid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_sessionid(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeString(1,i)},t.prototype.getClassName=function(){return"CParental_ParentalLock_Notification"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Parental.EnableParentalSettings#1",t,$u)}function i(e,t){return e.SendMsg("Parental.DisableParentalSettings#1",t,ed)}function n(e,t){return e.SendMsg("Parental.GetParentalSettings#1",t,id)}function r(e,t){return e.SendMsg("Parental.GetSignedParentalSettings#1",t,nd)}function o(e,t){return e.SendMsg("Parental.SetParentalSettings#1",t,rd)}function a(e,t){return e.SendMsg("Parental.ValidateToken#1",t,ad)}function s(e,t){return e.SendMsg("Parental.ValidatePassword#1",t,cd)}function c(e,t){return e.SendMsg("Parental.LockClient#1",t,ld)}function l(e,t){return e.SendMsg("Parental.RequestRecoveryCode#1",t,ud)}function u(e,t){return e.SendMsg("Parental.DisableWithRecoveryCode#1",t,dd)}e.EnableParentalSettings=t,e.DisableParentalSettings=i,e.GetParentalSettings=n,e.GetSignedParentalSettings=r,e.SetParentalSettings=o,e.ValidateToken=a,e.ValidatePassword=s,e.LockClient=c,e.RequestRecoveryCode=l,e.DisableWithRecoveryCode=u}(ju||(ju={}));var gd;!function(e){e.NotifySettingsChangeHandler={name:"ParentalClient.NotifySettingsChange#1",request:pd},e.NotifyUnlockHandler={name:"ParentalClient.NotifyUnlock#1",request:md},e.NotifyLockHandler={name:"ParentalClient.NotifyLock#1",request:hd}}(gd||(gd={}));var fd,_d=function(){function e(){var e=this;this.m_ParentalState=new ml,this.m_ParentalLockHandler=l(gd.NotifyLockHandler,function(t){return ai.a.SESSIONID==t.Body().sessionid()&&e.SetLockState(!0),1}),this.m_ParentalUnlockHandler=l(gd.NotifyUnlockHandler,function(t){return ai.a.SESSIONID==t.Body().sessionid()&&e.SetLockState(!1),1}),this.m_ParentalSettingsChangeHandler=l(gd.NotifySettingsChangeHandler,function(e){return 1})}return e.prototype.SetParentalState=function(e){this.m_ParentalState=e},e.prototype.SetLockState=function(e){this.m_ParentalState.locked=e},e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_CMInterface.RunWhenLoggedOn(function(){var e=fi.Init(td);e.Body().set_steamid(t.m_CMInterface.steamid.ConvertTo64BitString()),ai.a.IN_CLIENT?SteamClient.Parental.RegisterForParentalSettingsChanges(function(e){return t.UpdateParentalState(e)}):ju.GetParentalSettings(t.m_CMInterface.GetServiceTransport(),e).then(function(e){var i=(e.Body().settings().enabled_features(),e.Body().settings()),n=t.MsgParentalSettingsToParentalState(i);n.enabled?t.ValidateWebToken().then(function(e){n.locked=e,t.SetParentalState(n)}):(n.locked=!1,t.SetParentalState(n))})})},e.prototype.MsgParentalSettingsToParentalState=function(e){var t=new ml;t.enabled=e.is_enabled(),t.features=e.enabled_features(),t.baselist={};for(var i=0,n=e.applist_base();i<n.length;i++){var r=n[i];t.baselist["App_"+r.appid()]=r.is_allowed()}t.customlist={};for(var o=0,a=e.applist_custom();o<a.length;o++){var r=a[o];t.customlist["App_"+r.appid()]=r.is_allowed()}return t.locked=!0,t},e.prototype.UpdateParentalState=function(e){this.SetParentalState(e)},e.prototype.BIsFeatureBlocked=function(e){return this.m_ParentalState.locked&&0!=e&&0==(this.m_ParentalState.features&1<<e)},e.prototype.BIsAppBlocked=function(e){return!(!this.isLocked||this.m_ParentalState.allowallapps||0==e||e>=Xi.d&&e<=Xi.e||-1!==[Xi.j,Xi.f,Xi.g,Xi.i,Xi.h].indexOf(e)||(void 0!=this.m_ParentalState.customlist&&void 0!=this.m_ParentalState.customlist["App_"+e]?this.m_ParentalState.customlist["App_"+e]:void 0!=this.m_ParentalState.baselist&&void 0!=this.m_ParentalState.baselist["App_"+e]&&this.m_ParentalState.baselist["App_"+e]))},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.m_ParentalState.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.m_ParentalState.locked},enumerable:!0,configurable:!0}),e.prototype.ValidateWebToken=function(){var e=this,t=ai.a.SESSIONID,i=document.cookie.match("(^|; )steamparental=([^;]*)");if(!i||!i[2])return Promise.resolve(!1);var n=i[2],r=n.split("||");n=2==r.length?r[1]:r[0];var o=fi.Init(od);return o.Body().set_unlock_token(t+"||"+n),new Promise(function(t,i){ju.ValidateToken(e.m_CMInterface.GetServiceTransport(),o).then(function(e){t(1==e.GetEResult())})})},Object.defineProperty(e.prototype,"locked",{get:function(){return console.log("ParentalState.locked",this.m_ParentalState.locked),this.m_ParentalState.locked},enumerable:!0,configurable:!0}),e.prototype.BIsFriendsBlocked=function(){return this.BIsFeatureBlocked(4)},e.prototype.Unlock=function(e){var t=this;if(ai.a.IN_CLIENT)return new Promise(function(t,i){SteamClient.Parental.UnlockParentalLock(e,!1).then(function(e){t(e)})});var i=fi.Init(sd);return i.Body().set_password(e),i.Body().set_session(ai.a.SESSIONID),i.Body().set_send_unlock_on_success(!0),new Promise(function(e,n){ju.ValidatePassword(t.m_CMInterface.GetServiceTransport(),i).then(function(t){if(1==t.GetEResult()){var i=Date.now().toString()+"||"+t.Body().token();document.cookie="steamparental="+encodeURIComponent(i)+"; path=/"}e(t.GetEResult())})})},si.c([_i.observable],e.prototype,"m_ParentalState",void 0),si.c([_i.action],e.prototype,"UpdateParentalState",null),si.c([_i.computed],e.prototype,"isEnabled",null),si.c([_i.computed],e.prototype,"isLocked",null),si.c([_i.computed],e.prototype,"locked",null),e}(),yd=function(){function e(){this.rgRegistered=[],this.nLastUpdate=0,this.msSpentSorting=0}return e}(),vd=!1,bd=function(){function e(){this.m_mapGroupBuckets=new Map,this.LOG=Da.create(function(){return"CGroupMemberStore"},vd)}return e.prototype.Init=function(){this.m_disposePersonaStateChanged=wd.FriendStore.AddPersonaStateChangedCallback(this.OnPersonaStateChanged)},e.prototype.RegisterForGroupMemberList=function(e,t){var i=this;return this.m_mapGroupBuckets.has(t)||(this.m_mapGroupBuckets.set(t,new yd),this.PerformInitialPopulate(t)),this.m_mapGroupBuckets.get(t).rgRegistered.push(e),{unregister:function(){return i.UnregisterForGroupMemberList(e,t)}}},e.prototype.UnregisterForGroupMemberList=function(e,t){var i=this.m_mapGroupBuckets.get(t);i&&(_n.c(i.rgRegistered,e),0==i.rgRegistered.length&&this.m_mapGroupBuckets.delete(t))},e.prototype.GetGroupMemberList=function(e){var t=this.m_mapGroupBuckets.get(e);return t?t.rgBuckets:null},e.prototype.ScheduledFireMemberListChanged=function(e){e.hDelayUpdate=void 0,this.FireMemberListChanged(e)},e.prototype.FireMemberListChanged=function(e){var t=this;if(!e.hDelayUpdate){var i=performance.now();if(i-e.nLastUpdate<1e3)return e.hDelayUpdate=SetBackgroundTimeout(function(){return t.ScheduledFireMemberListChanged(e)},1e3),void this.LOG("DELAY UPDATE");e.nLastUpdate=i;for(var n=0,r=e.rgRegistered;n<r.length;n++)(0,r[n])()}},e.prototype.OnPersonaStateChanged=function(e){var t=this;this.m_mapGroupBuckets.forEach(function(i,n){var r=wd.ChatStore.GetChatRoomGroup(n);if(r.BHasMember(e.accountid)){if(i.bReSortPending)return void e.persona.is_appinfo_ready;e.persona.is_appinfo_ready?t.UpdatePersonaForGroup(r.GetGroupID(),e):(t.LOG("Delay sorting player "+e.display_name),wd.AppInfoStore.RegisterCallbackOnLoad(t.UpdatePersonaForGroup.bind(t,n,e)))}})},e.prototype.UpdatePersonaForGroup=function(e,t){var i=this.m_mapGroupBuckets.get(e);if(i){for(var n=performance.now(),r=!1,o=0,a=i.rgBuckets;o<a.length;o++){var s=a[o];if(this.RemoveMemberFromBucket(s,t.accountid)){performance.now();this.SortedInsertIntoBucket(s,t),performance.now(),r=!0;break}}var c=performance.now();i.msSpentSorting+=c-n,this.LOG(e+": Resort user "+t.display_name+" took "+(c-n)+"ms (total "+i.msSpentSorting+"ms)"),r&&this.FireMemberListChanged(i)}},e.prototype.ReSortGroup=function(e){var t=this.m_mapGroupBuckets.get(e);if(t){for(var i=0,n=t.rgBuckets;i<n.length;i++){var r=n[i],o=performance.now();r.rgMembers.sort(this.FriendSortFunc);var a=performance.now();t.msSpentSorting+=a-o,this.LOG(e+": List ReSort took "+(a-o)+"ms (total "+t.msSpentSorting+"ms) for "+r.rgMembers.length+" members")}t.bReSortPending=!1,this.FireMemberListChanged(t)}},e.prototype.FriendSortFunc=function(e,t){var i=Nc.FriendSortStatusComparator(e,t);if(0!=i)return i;if(e.persona.is_ingame&&t.persona.is_ingame){if(e.persona.is_in_nonsteam_game){if(!t.persona.is_in_nonsteam_game)return 1}else if(t.persona.is_in_nonsteam_game)return-1;var n=e.persona.current_game_name,r=t.persona.current_game_name;if(n){if(!r)return-1;if(n!=r)return n<r?-1:1}else if(r)return 1}return e.display_name.localeCompare(t.display_name)},e.prototype.PerformInitialPopulate=function(e){var t=performance.now(),i=wd.ChatStore.GetChatRoomGroup(e),n=i.memberList.member_list_unsorted.slice();n.sort(this.FriendSortFunc);var r=[];r.push({strName:Object(ua.b)("#Chat_MemberGroup_Online"),rgMembers:n});var o=this.m_mapGroupBuckets.get(e);o&&(o.rgBuckets=r,wd.AppInfoStore.BHavePendingAppInfoRequests()&&(o.bReSortPending=!0,wd.AppInfoStore.RegisterCallbackOnLoad(this.ReSortGroup.bind(this,e))));var a=performance.now();o.msSpentSorting+=a-t,this.LOG("List sort took "+(a-t)+" ms for "+n.length+" members of group "+e)},e.prototype.GetDefaultBucket=function(e){return 0==e.length?(AssertMsg(!1,"Missing default bucket"),null):e[0]},e.prototype.SortedInsertIntoBucket=function(e,t){_n.h(e.rgMembers,t,this.FriendSortFunc)},e.prototype.RemoveMemberFromBucket=function(e,t){for(var i=0;i<e.rgMembers.length;i++)if(e.rgMembers[i].accountid==t)return e.rgMembers.splice(i,1),!0;return!1},e.prototype.AddUserAndFireCallback=function(e,t){var i=this.GetDefaultBucket(e.rgBuckets);if(i){var n=wd.FriendStore.GetPlayer(t);this.SortedInsertIntoBucket(i,n),this.FireMemberListChanged(e)}},e.prototype.OnMemberAdded=function(e,t){var i=this.m_mapGroupBuckets.get(e);i&&this.AddUserAndFireCallback(i,t)},e.prototype.OnMemberRemoved=function(e,t){var i=this.m_mapGroupBuckets.get(e);if(i)for(var n=0,r=i.rgBuckets;n<r.length;n++){var o=r[n];if(this.RemoveMemberFromBucket(o,t))return void this.FireMemberListChanged(i)}},si.c([yn.a],e.prototype,"OnPersonaStateChanged",null),e}(),Cd=function(){function e(){}return e}(),Sd=function(){function e(){}return e}(),Md={m_unPID:0,m_nBrowserID:-1},Fd=function(){function e(e){this.m_BrowserContextDefaultTarget=Md,this.m_FriendStore=new Lc,this.m_ChatStore=new dl(this.m_FriendStore),this.m_UIStore=new Yl(this.m_ChatStore),this.m_AppInfoStore=new Wn,this.m_EconomyStore=new Ha,this.m_ParentalStore=new _d,this.m_BroadcastStore=new Kl,this.m_GroupMemberStore=new bd,this.m_bReadyToRender=!1,this.m_bShuttingDown=!1,AssertMsg(!wd,"FriendsUIApp already initialized"),wd=this,window.g_FriendsUIApp=this,this.m_Storage=e,this.m_SettingsStore=new eu(e),this.m_VoiceChatStore=new Xu(this.m_SettingsStore)}return e.prototype.InitInternal=function(e,t,i){var n=this;void 0===i&&(i=[]),this.m_CMInterface=e,this.m_NotificationManager=t;var r=this.m_FriendStore.Init(e),o=this.m_ChatStore.Init(e,this.m_VoiceChatStore),a=this.InitAdjustClockDriftFromServer();this.m_VoiceChatStore.Init(e),this.m_SettingsStore.Init(e),this.m_AppInfoStore.Init(e),this.m_UIStore.Init(),this.m_EconomyStore.Init(e),this.m_ParentalStore.Init(e),this.m_BroadcastStore.Init(e),this.m_GroupMemberStore.Init();var s=function(){n.SetReadyToRender()};Promise.all([r,o,a].concat(i)).then(s,s)},Object.defineProperty(e.prototype,"CMInterface",{get:function(){return this.m_CMInterface},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendStore",{get:function(){return this.m_FriendStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ChatStore",{get:function(){return this.m_ChatStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VoiceStore",{get:function(){return this.m_VoiceChatStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UIStore",{get:function(){return this.m_UIStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SettingsStore",{get:function(){return this.m_SettingsStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AppInfoStore",{get:function(){return this.m_AppInfoStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Storage",{get:function(){return this.m_Storage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NotificationManager",{get:function(){return this.m_NotificationManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EconomyStore",{get:function(){return this.m_EconomyStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ParentalStore",{get:function(){return this.m_ParentalStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BroadcastStore",{get:function(){return this.m_BroadcastStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GroupMemberStore",{get:function(){return this.m_GroupMemberStore},enumerable:!0,configurable:!0}),e.prototype.SetReadyToRender=function(){return si.b(this,void 0,void 0,function(){return si.e(this,function(e){switch(e.label){case 0:return this.m_bReadyToRender?[3,2]:(this.m_bReadyToRender=!0,[4,this.OnReadyToRender()]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},Object.defineProperty(e.prototype,"ready_to_render",{get:function(){return this.m_bReadyToRender},enumerable:!0,configurable:!0}),e.prototype.GetStartupTime=function(){return e.sm_msStartup},e.prototype.ShowFriendChatDialog=function(e,t,i){return void 0===i&&(i=!0),this.UIStore.ShowFriendChatDialog(e,t,i,i)},e.prototype.GetDefaultBrowserContext=function(){return this.m_BrowserContextDefaultTarget},e.prototype.SetDefaultPopupContext=function(e){console.log("Set default popup context: "+e.m_unPID),this.m_BrowserContextDefaultTarget=e},e.prototype.InitAdjustClockDriftFromServer=function(){return si.b(this,void 0,void 0,function(){var e,t=this;return si.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(_i.when)(function(){return t.m_CMInterface.BPerformedInitialClockAdjustment()},{timeout:1e3})];case 1:return i.sent(),[2,!0];case 2:return e=i.sent(),console.warn("Timed out waiting for initial server clock drift adjustment"),[2,!1];case 3:return[2]}})})},e.prototype.GetServerTimeMS=function(){return this.m_CMInterface.GetServerTimeMS()},e.prototype.GetServerRTime32=function(){return this.m_CMInterface.GetServerRTime32()},e.prototype.RTime32ToDate=function(e){return this.m_CMInterface.RTime32ToDate(e)},e.prototype.GetLocalMidnightInRTime32=function(t){void 0===e.sm_tzOffset&&(e.sm_tzOffset=60*(new Date).getTimezoneOffset(),AssertMsg(e.sm_tzOffset||0===e.sm_tzOffset,"Computed invalid timezone offset "+e.sm_tzOffset));var i=e.sm_tzOffset||0,n=(t||this.m_CMInterface.GetServerRTime32())-i;return 86400*Math.floor(n/86400)+i},e.prototype.IsInBeta=function(){return ai.a.FRIENDSUI_BETA},e.prototype.BIsValidBrowserContext=function(e){return ee(e,Md)},e.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){},e.sm_msStartup=performance.now(),si.c([_i.observable],e.prototype,"m_bReadyToRender",void 0),si.c([_i.computed],e.prototype,"ready_to_render",null),e}(),wd=void 0,Bd=i("4JXe"),Od=i("tW2u"),Id=i("1PJo"),Rd=i("Jea8"),Ed=i("BE2g"),Td=(Sa.Component,function(){function e(){this.m_embeddedElement=new Ed.a("DragGhosts"),this.m_rgDropRegions=[],this.m_rgActiveDropRegions=[]}return e.prototype.RegisterDropRegion=function(e){this.m_rgDropRegions.push(e)},e.prototype.UnregisterDropRegion=function(e){_n.c(this.m_rgDropRegions,e)},e.prototype.OnDragGhostRef=function(e){this.m_dragGhost=e},e.prototype.OnDragStart=function(e){this.m_activeDraggable=e,this.m_rgActiveDropRegions=[];for(var t=0,i=this.m_rgDropRegions;t<i.length;t++){var n=i[t];n.BAcceptDraggable(e)&&(n.OnDragStarted(e),this.m_rgActiveDropRegions.push(n))}this.m_embeddedElement.ShowElement(e.GetDragDocument(),Sa.cloneElement(e.renderDragGhost(),{ref:this.OnDragGhostRef}),e)},e.prototype.EndDrag=function(){if(this.m_activeDraggable){this.m_embeddedElement.HideElement(this.m_activeDraggable.GetDragDocument(),this.m_activeDraggable),this.m_activeDropRegion&&this.m_activeDropRegion.OnDrop(this.m_activeDraggable);for(var e=0,t=this.m_rgActiveDropRegions;e<t.length;e++)t[e].OnDragEnded(this.m_activeDraggable);this.m_activeDraggable=void 0,this.m_dropGhost=void 0,this.m_rgActiveDropRegions=[]}},e.prototype.OnDrag=function(e,t){var i=te(t),n=i[0],r=i[1];if(this.m_activeDropRegion&&this.m_activeDropRegion.BDraggableInRegion(n,r,this.m_activeDraggable))this.m_activeDropRegion.OnDragMove(n,r,this.m_activeDraggable);else{this.m_activeDropRegion&&(this.m_activeDropRegion.OnDragLeave(this.m_activeDraggable),this.m_activeDropRegion=void 0);for(var o=0,a=this.m_rgActiveDropRegions;o<a.length;o++){var s=a[o];if(s.BDraggableInRegion(n,r,this.m_activeDraggable))return this.m_activeDropRegion=s,this.m_dragGhost&&this.m_dragGhost.state.bVisible&&this.m_dragGhost.setState({bVisible:!1}),this.m_dropGhost||(this.m_dropGhost=this.m_activeDraggable.renderDropGhost()),void this.m_activeDropRegion.OnDragEnter(this.m_activeDraggable,this.m_dropGhost)}this.m_dragGhost&&this.m_dragGhost.setState({clientX:n,clientY:r,bVisible:!0})}},si.c([yn.a],e.prototype,"OnDragGhostRef",null),e}()),kd=function(e){function t(t){var i=e.call(this,t)||this;return i.m_DragInfo={bStarted:!1,startClientX:void 0,startClientY:void 0,startOffsetX:void 0,startOffsetY:void 0,startWidth:void 0,startHeight:void 0,ownerWin:void 0},i.state={bInDrag:!1},i}return si.d(t,e),t.prototype.GetDragDocument=function(){return this.m_DragInfo.ownerWin&&this.m_DragInfo.ownerWin.document},t.prototype.RecordDragStart=function(e,t,i){this.m_DragInfo.startClientX=t,this.m_DragInfo.startClientY=i;var n=e.getBoundingClientRect();this.m_DragInfo.startOffsetX=t-n.left,this.m_DragInfo.startOffsetY=i-n.top,this.m_DragInfo.startWidth=n.width,this.m_DragInfo.startHeight=n.height,this.m_DragInfo.ownerWin=e.ownerDocument.defaultView},t.prototype.ProcessDragMove=function(e){if(this.m_DragInfo.bStarted)this.props.coordinator.OnDrag(this,e);else{var t=te(e),i=t[0],n=t[1];Math.pow(i-this.m_DragInfo.startClientX,2)+Math.pow(n-this.m_DragInfo.startClientY,2)>=25&&(this.m_DragInfo.bStarted=!0,this.forceUpdate(),this.props.coordinator.OnDragStart(this),this.props.coordinator.OnDrag(this,e))}},t.prototype.OnMouseDown=function(e){this.m_DragInfo.bStarted||(this.RecordDragStart(e.currentTarget,e.clientX,e.clientY),this.m_DragInfo.ownerWin.addEventListener("mousemove",this.ProcessDragMove),this.m_DragInfo.ownerWin.addEventListener("mouseup",this.OnMouseUp))},t.prototype.OnMouseUp=function(e){this.m_DragInfo.ownerWin.removeEventListener("mousemove",this.ProcessDragMove),this.m_DragInfo.ownerWin.removeEventListener("mouseup",this.OnMouseUp),this.ResetDragState()},t.prototype.OnTouchStart=function(e){this.m_DragInfo.bStarted||(this.RecordDragStart(e.currentTarget,e.touches[0].clientX,e.touches[0].clientY),this.m_DragInfo.ownerWin.addEventListener("touchmove",this.ProcessDragMove),this.m_DragInfo.ownerWin.addEventListener("touchend",this.OnTouchEnd))},t.prototype.OnTouchEnd=function(e){this.m_DragInfo.ownerWin.removeEventListener("touchmove",this.ProcessDragMove),this.m_DragInfo.ownerWin.removeEventListener("touchend",this.OnTouchEnd),this.ResetDragState()},t.prototype.ResetDragState=function(){this.m_DragInfo.bStarted&&this.props.coordinator.EndDrag(),this.m_DragInfo.bStarted=!1,this.m_DragInfo.startClientX=void 0,this.m_DragInfo.startClientY=void 0,this.m_DragInfo.startOffsetX=void 0,this.m_DragInfo.startOffsetY=void 0,this.m_DragInfo.ownerWin=void 0,this.forceUpdate()},t.prototype.render=function(){var e,t="DialogDraggable";return this.m_DragInfo.bStarted?(e={},t+=" DraggedOut"):e={onMouseDown:this.OnMouseDown,onTouchStart:this.OnTouchStart},Sa.createElement("div",si.a({className:t},e),this.props.children)},t.prototype.renderDropGhost=function(){return Sa.createElement(Dd,{elContent:this.GetClone()})},t.prototype.renderDragGhost=function(){return Sa.createElement(Gd,{elContent:this.GetClone(),offsetX:this.m_DragInfo.startOffsetX,offsetY:this.m_DragInfo.startOffsetY,width:this.m_DragInfo.startWidth,height:this.m_DragInfo.startHeight})},t.prototype.GetClone=function(){var e,t=On.findDOMNode(this);if(t&&t.childElementCount)if(1==t.childElementCount)e=t.firstElementChild.cloneNode(!0);else{e=document.createElement("div");for(var i=t.firstChild;i;i=i.nextSibling)e.appendChild(i.cloneNode(!0))}return e},si.c([yn.a],t.prototype,"ProcessDragMove",null),si.c([yn.a],t.prototype,"OnMouseDown",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([yn.a],t.prototype,"OnTouchStart",null),si.c([yn.a],t.prototype,"OnTouchEnd",null),t}(Sa.Component),Dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnRef=function(e){e&&e.appendChild(this.props.elContent)},t.prototype.render=function(){return Sa.createElement("div",{className:"DialogDraggable_DropGhost",ref:this.OnRef})},si.c([yn.a],t.prototype,"OnRef",null),t}(Sa.Component),Gd=function(e){function t(t){var i=e.call(this,t)||this;return i.state={clientX:void 0,clientY:void 0,bVisible:!0},i}return si.d(t,e),t.prototype.OnRef=function(e){e&&e.appendChild(this.props.elContent)},t.prototype.render=function(){if(!this.state.bVisible||void 0===this.state.clientX||void 0===this.state.clientY)return Sa.createElement("div",null);var e={left:this.state.clientX-(this.props.offsetX||0),top:this.state.clientY-(this.props.offsetY||0),width:this.props.width||"auto",height:this.props.height||"auto"};return Sa.createElement("div",{className:"DialogDraggable_DragGhost",style:e,ref:this.OnRef})},si.c([yn.a],t.prototype,"OnRef",null),t}(Sa.Component),Nd=function(e){function t(t){var i=e.call(this,t)||this;return i.state={},i}return si.d(t,e),t.prototype.componentDidMount=function(){this.props.coordinator.RegisterDropRegion(this)},t.prototype.componentWillUnmount=function(){this.props.coordinator.UnregisterDropRegion(this)},t.prototype.OnDragStarted=function(e){this.setState({bDraggableActive:!0})},t.prototype.OnDragEnded=function(e){this.setState({bDraggableActive:!1})},t.prototype.OnDragEnter=function(e,t){this.setState({dropGhost:t})},t.prototype.OnDragLeave=function(e){this.setState({dropGhost:void 0})},t.prototype.OnDragMove=function(e,t,i){},t.prototype.OnDrop=function(e){this.setState({dropGhost:void 0})},t.prototype.BAcceptDraggable=function(e){return!0},t.prototype.BDraggableInRegion=function(e,t,i){var n=this.GetClientRect();return!!n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},t.prototype.GetClientRect=function(){return this.m_elDropRegion||(this.m_elDropRegion=On.findDOMNode(this)),this.m_elDropRegion&&this.m_elDropRegion.getBoundingClientRect()},t.prototype.render=function(){var e="DialogDropRegion";return this.state.bDraggableActive&&(e+=" Active"),Sa.createElement("div",{className:e},this.state.dropGhost)},t}(Sa.Component),Ld=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnDrop=function(t){e.prototype.OnDrop.call(this,t),this.props.onDrop(t.props.data,this.props.index)},t.prototype.BDraggableInRegion=function(e,t,i){var n=this.GetClientRect();return!!n&&e>=n.left&&e<=n.right&&t>=n.top-20&&t<=n.bottom+20},t.prototype.BAcceptDraggable=function(e){return e.props.data!=this.props.index},t}(Nd),Ad=i("EQHU"),Pd=function(){function e(e,t){this.m_bActive=!1,this.m_fnBoundAnimationFunc=void 0,this.m_window=e,this.m_options=Object.assign({timing:"sine"},t)}return e.prototype.Start=function(){this.m_msStart=performance.now(),this.m_msEnd=this.m_msStart+this.m_options.msDuration;var e;switch(this.m_options.timing){case"linear":e=function(e){return e};break;case"cubic-in-out":e=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1};break;case"sine":default:e=function(e){return.5-Math.cos(e*Math.PI)/2}}this.m_bActive=!0,this.m_fnBoundAnimationFunc=this.OnInterval.bind(this,e),this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc)},e.prototype.BIsActive=function(){return this.m_bActive},e.prototype.End=function(){this.m_bActive&&(this.Update(1),this.ClearInterval(),this.FireOnComplete())},e.prototype.FireOnComplete=function(){this.m_options.onComplete&&this.m_options.onComplete()},e.prototype.Cancel=function(){this.m_bActive=!1},e.prototype.OnInterval=function(e){if(this.m_bActive){var t=performance.now()-this.m_msStart;if(t>=this.m_options.msDuration)return void this.End();var i=t/this.m_options.msDuration;this.Update(e(i)),this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc)}},e.prototype.ClearInterval=function(){this.m_bActive=!1},e}(),xd=function(e){function t(t,i,n){var r=e.call(this,Ad.k(t),n)||this;return r.m_props={},r.m_object=t,r.m_propTargets=i,r}return si.d(t,e),t.prototype.Start=function(){this.m_props={};for(var t in this.m_propTargets){var i=parseFloat(this.m_object[t])||0,n=this.m_propTargets[t];i!=n&&(this.m_props[t]={start:i,end:n})}e.prototype.Start.call(this)},t.prototype.Update=function(e){for(var t in this.m_props){var i=this.m_props[t],n=i.start+(i.end-i.start)*e;this.m_object[t]=n}},t}(Pd),zd=function(e){function t(t,i,n){var r=e.call(this,Ad.k(On.findDOMNode(t)),n)||this;return r.m_props={},r.m_component=t,r.m_propTargets=i,r.m_setStateOnComplete=n.setStateOnComplete,r}return si.d(t,e),t.prototype.Start=function(){this.m_props={};for(var t in this.m_propTargets){var i=parseFloat(this.m_component.state[t])||0,n=this.m_propTargets[t];i!=n&&(this.m_props[t]={start:i,end:n})}e.prototype.Start.call(this)},t.prototype.Update=function(e){var t={};for(var i in this.m_props){var n=this.m_props[i],r=n.start+(n.end-n.start)*e;t[i]=r}this.m_component.setState(t)},t.prototype.FireOnComplete=function(){e.prototype.FireOnComplete.call(this),this.m_setStateOnComplete&&this.m_component.setState(this.m_setStateOnComplete)},t}(Pd),Ud=le("DialogHeader"),Vd=le("DialogFooter"),jd=le("DialogLabel _DialogLayout"),Wd=le("DialogBodyText"),Hd=le("DialogBody"),qd=le("DialogInnerBody"),Kd=le("DialogBodyNotificationBar"),Jd=le("DialogTwoColLayout _DialogColLayout"),Yd=le("DialogThreeColLayout _DialogColLayout"),Xd=(le("DialogTwoThirdColLayout _DialogColLayout"),le("DialogColumn _DialogLayout")),Zd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnSubmit=function(e){e.preventDefault(),this.props.onSubmit&&this.props.onSubmit(e)},t.prototype.render=function(){return Sa.createElement("form",si.a({},this.props,{onSubmit:this.OnSubmit}))},si.c([yn.a],t.prototype,"OnSubmit",null),t}(Sa.Component),Qd=function(e){function t(t){var i=e.call(this,t)||this;return i.state={m_CopiedYPos:0,m_bPlayingCopiedAnimation:!1,m_bCompletedCopiedAnimation:!1},i}return si.d(t,e),t.prototype.OnInputRef=function(e){this.m_elInput=e},Object.defineProperty(t.prototype,"element",{get:function(){return this.m_elInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.m_elInput&&this.m_elInput.value},enumerable:!0,configurable:!0}),t.prototype.OnCopyClick=function(e){var t=this;if(this.m_elInput){this.m_elInput.select();var i=this.m_elInput.ownerDocument;i.queryCommandEnabled("copy")&&(i.execCommand("copy"),e.currentTarget.focus(),this.m_CopiedAnimation&&this.m_CopiedAnimation.Cancel(),this.state.m_bPlayingCopiedAnimation,this.setState({m_bCompletedCopiedAnimation:!1}),this.setState({m_CopiedYPos:-4},function(){t.m_CopiedAnimation=new zd(t,{m_CopiedYPos:-24},{msDuration:300,timing:"sine",setStateOnComplete:{m_bCompletedCopiedAnimation:!0}}),t.m_CopiedAnimation.Start()}))}},t.prototype.OnClearClick=function(e){this.m_elInput&&this.m_elInput.value&&(Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(this.m_elInput,""),this.m_elInput.dispatchEvent(new Event("input",{bubbles:!0})))},t.prototype.componentWillReceiveProps=function(e){AssertMsg(!e.bShowClearAction||e.onChange,"In order for bShowClearAction to work correctly, you should be handling onChange and passing value to the Dialog.Input.")},t.prototype.render=function(){var e=this.props,t=e.label,i=e.explainer,n=e.bShowCopyAction,r=e.bShowClearAction,o=si.f(e,["label","explainer","bShowCopyAction","bShowClearAction"]),a="DialogInput DialogInputPlaceholder _DialogTextInputBase"+(o.className?" "+o.className:""),s="copiedAnimation",c=this.state.m_bCompletedCopiedAnimation;this.m_CopiedAnimation&&(s="copiedAnimation animationPlaying"),c&&(s="copiedAnimation animationComplete");var l={};void 0!==this.state.m_CopiedYPos&&(l.transform="translateY("+this.state.m_CopiedYPos+"px)");var u=void 0;i&&(u=Sa.createElement("div",{className:"DialogLabelExplainer"},i));var d=Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"DialogInput_Wrapper _DialogLayout"},Sa.createElement("input",si.a({type:"text"},o,{className:a,ref:this.OnInputRef})),n&&Sa.createElement("div",{className:"displayRow"},Sa.createElement(oe,{className:"DialogInput_CopyAction Primary",onClick:this.OnCopyClick},Object(ua.b)("#Button_CopyLink")),Sa.createElement("div",{style:l,className:s},"Link Copied")),r&&o.value&&Sa.createElement("div",{className:"DialogInput_ClearAction",onClick:this.OnClearClick},Sa.createElement(Id._5,null))),u);return t?Sa.createElement("div",{className:"DialogInputLabelGroup _DialogLayout "},Sa.createElement("label",null,Sa.createElement("div",{className:"DialogLabel"},t," ",Sa.createElement("span",{className:"DialogInputRequirementLabel"},this.props.requiredLabel)," "),d)):d},si.c([yn.a],t.prototype,"OnInputRef",null),si.c([yn.a],t.prototype,"OnCopyClick",null),si.c([yn.a],t.prototype,"OnClearClick",null),t}(Sa.PureComponent),$d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnBackgroundClick=function(){this.m_elInput&&this.m_elInput.focus()},t.prototype.OnInputFocus=function(e){this.m_bFocused||(this.m_bFocused=!0,this.forceUpdate()),this.props.onFocus&&this.props.onFocus(e)},t.prototype.OnInputBlur=function(e){this.m_bFocused&&(this.m_bFocused=!1,this.forceUpdate()),this.props.onBlur&&this.props.onBlur(e)},t.prototype.render=function(){var e=this.props,t=e.label,i=e.explainer,n=e.children,r=(e.className,si.f(e,["label","explainer","children","className"]));return Sa.createElement("div",{className:"DialogInputLabelGroup _DialogLayout DialogListBuilderInput"},Sa.createElement("label",null,t&&Sa.createElement("div",{className:"DialogLabel"},t),Sa.createElement("div",{className:"_DialogInputContainer"+(this.m_bFocused?" Active":""),onClick:this.OnBackgroundClick},Sa.createElement("div",{className:"DialogListBuilderInput_List"},Sa.Children.map(n,function(e,t){return Sa.createElement("div",{className:"DialogListBuilderInput_ListItem",key:t},e)}),Sa.createElement("input",si.a({type:"text"},r,{className:"DialogListBuilderInput_Input DialogInputPlaceholder",ref:this.OnInputRef,onFocus:this.OnInputFocus,onBlur:this.OnInputBlur,size:4})))),this.props.explainer&&Sa.createElement("div",{className:"DialogLabelExplainer"},i)))},si.c([yn.a],t.prototype,"OnBackgroundClick",null),si.c([yn.a],t.prototype,"OnInputFocus",null),si.c([yn.a],t.prototype,"OnInputBlur",null),t}(Qd),ep=function(e){function t(t){var i=e.call(this,t)||this;return i.state={checked:t.checked,disabled:t.disabled},i}return si.d(t,e),t.prototype.componentWillReceiveProps=function(e){e.checked!=this.state.checked&&this.setState({checked:e.checked}),e.disabled!=this.state.disabled&&this.setState({disabled:e.disabled})},t.prototype.shouldComponentUpdate=function(e,t){return e.label!=this.props.label||e.description!=this.props.description||e.onChange!=this.props.onChange||e.disabled!=this.props.disabled||e.checked!=this.state.checked||t.checked!=this.state.checked},Object.defineProperty(t.prototype,"checked",{get:function(){return this.state.checked},enumerable:!0,configurable:!0}),t.prototype.Toggle=function(){if(!this.props.disabled){var e=!this.state.checked;this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},t.prototype.KeyDown=function(e){32==e.keyCode&&(this.Toggle(),e.preventDefault(),e.stopPropagation())},si.c([yn.a],t.prototype,"Toggle",null),si.c([yn.a],t.prototype,"KeyDown",null),t}(Sa.Component),tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e="DialogCheckbox"+(this.state.checked?" Active":"");return 1==this.state.disabled&&(e+=" Disabled"),this.props.label?Sa.createElement("div",{className:"DialogCheckbox_Container _DialogLayout "+(this.props.classname?this.props.classname:""),tabIndex:this.props.tabIndex||0,onClick:this.Toggle},Sa.createElement("div",{className:e},Sa.createElement(Id.i,null)),Sa.createElement("div",{className:"DialogToggle_Label"},Sa.createElement("span",null,this.props.label)),Sa.createElement("div",{style:{clear:"left"}}),this.props.description&&Sa.createElement("div",{className:"DialogToggle_Description"},this.props.description)):Sa.createElement("div",{className:e,onClick:this.Toggle,tabIndex:this.props.tabIndex||0},Sa.createElement(Id.i,null))},t}(ep),ip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.state.checked?" Active":"";return Sa.createElement("div",{className:"DialogRoundCheckbox"},Sa.createElement("div",{className:"DialogRoundCheckbox_Control"+e,onClick:this.Toggle,tabIndex:this.props.tabIndex||0},Sa.createElement("div",{className:"DialogRoundCheckbox_OuterCircle"},Sa.createElement("div",{className:"DialogRoundCheckbox_InnerCircle"}))))},t}(ep),np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnOffKeyDown=function(e){37==e.keyCode&&this.state.checked||39==e.keyCode&&!this.state.checked?(this.Toggle(),e.preventDefault(),e.stopPropagation()):this.KeyDown(e)},t.prototype.render=function(){var e="DialogOnOffToggle _DialogInputContainer _DialogLayout "+(this.props.classname?this.props.classname:"");return this.props.disabled&&(e+=" Disabled"),Sa.createElement("div",{className:e,tabIndex:this.props.tabIndex||0,onKeyDown:this.OnOffKeyDown},Sa.createElement("div",{className:"displayColumn alignSelfCenter"},Sa.createElement("div",{className:"DialogToggle_Label"},Sa.createElement("span",null,this.props.label)),this.props.description&&Sa.createElement("div",{className:"DialogToggle_Description"},this.props.description),this.props.children),Sa.createElement("div",{className:"DialogOnOffToggle_Control",onClick:this.Toggle},Sa.createElement("div",{className:"DialogOnOffToggle_Option Off"+(this.state.checked?"":" Active")},Object(ua.b)("#Dialog_Off")),Sa.createElement("div",{className:"DialogOnOffToggle_Option On"+(this.state.checked?" Active":"")},Object(ua.b)("#Dialog_On"))))},si.c([yn.a],t.prototype,"OnOffKeyDown",null),t}(ep),rp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={value:i.ClampValue(t.value)},i}return si.d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),t.prototype.ClampValue=function(e){return void 0===e||isNaN(e)||e<this.props.min?this.props.min:e>this.props.max?this.props.max:e},t.prototype.BPropsValid=function(){return this.props.max>this.props.min},t.prototype.shouldComponentUpdate=function(e,t){return t.value!=this.state.value||e.max!==this.props.max||e.min!==this.props.min||e.value!==this.state.value&&e.value!==this.props.value||e.onChange!==this.props.onChange},t.prototype.componentWillReceiveProps=function(e){e.value!=this.props.value&&this.setState({value:e.value})},t.prototype.OnMouseDown=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.clientX),this.m_elSlider.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},t.prototype.OnMouseMove=function(e){this.AdjustSliderForClientX(e.clientX)},t.prototype.OnMouseUp=function(e){this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp)},t.prototype.OnTouchStart=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.touches[0].clientX),this.m_elSlider.ownerDocument.defaultView.addEventListener("touchmove",this.OnTouchMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("touchend",this.OnTouchEnd)},t.prototype.OnTouchMove=function(e){this.AdjustSliderForClientX(e.touches[0].clientX)},t.prototype.OnTouchEnd=function(e){this.m_elSlider.ownerDocument.defaultView.removeEventListener("touchmove",this.OnTouchMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("touchend",this.OnTouchEnd)},t.prototype.OnKeyDown=function(e){var t=1;e.ctrlKey&&(t=Math.max(1,Math.floor(.1*(this.props.max-this.props.min)+.5))),37==e.keyCode?(this.IncrementValue(-1*t),e.preventDefault()):39==e.keyCode&&(this.IncrementValue(1*t),e.preventDefault())},t.prototype.AdjustSliderForClientX=function(e){var t=(e-this.m_rectSlider.left)/(this.m_rectSlider.right-this.m_rectSlider.left)*(this.props.max-this.props.min);t=Math.floor(t+.5);var i=this.ClampValue(t);i!=this.state.value&&(this.setState({value:i}),this.props.onChange&&this.props.onChange(i))},t.prototype.IncrementValue=function(e){var t=this.ClampValue(this.state.value+e);t!=this.state.value&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(t))},t.prototype.render=function(){var e={},t={};if(this.BPropsValid()){var i=100*(this.state.value-this.props.min)/(this.props.max-this.props.min)+"%";e.width=i,t.left=i}var n=this.props,r=n.label,o=n.explainer,a=void si.f(n,["label","explainer"]);return o&&(a=Sa.createElement("div",{className:"DialogLabelExplainer"},o)),Sa.createElement("div",{className:"DialogSlider_Container _DialogInputContainer _DialogLayout",onKeyDown:this.OnKeyDown,tabIndex:this.props.tabIndex||0},r&&Sa.createElement("div",{className:"DialogLabel"},r),Sa.createElement("div",{className:"DialogSlider_Slider",onMouseDown:this.OnMouseDown,onTouchStart:this.OnTouchStart},Sa.createElement("div",{className:"DialogSlider_Value",style:e}),Sa.createElement("div",{className:"DialogSlider_Grabber",style:t})),a)},si.c([yn.a],t.prototype,"OnMouseDown",null),si.c([yn.a],t.prototype,"OnMouseMove",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([yn.a],t.prototype,"OnTouchStart",null),si.c([yn.a],t.prototype,"OnTouchMove",null),si.c([yn.a],t.prototype,"OnTouchEnd",null),si.c([yn.a],t.prototype,"OnKeyDown",null),t}(Sa.Component),op=function(e){function t(t){var i=e.call(this,t)||this;return i.state={iSelectedOption:i.FindActiveOptionIndex(t.selectedOption),bOpened:!1},i}return si.d(t,e),t.prototype.FindAndSetActiveOption=function(e){var t=this.FindActiveOptionIndex(e);t!==this.state.iSelectedOption&&this.setState({iSelectedOption:t})},t.prototype.FindActiveOptionIndex=function(e){for(var t=0;t<this.props.rgOptions.length;t++)if(this.props.rgOptions[t].data===e)return t},Object.defineProperty(t.prototype,"value",{get:function(){return void 0!==this.state.iSelectedOption?this.props.rgOptions[this.state.iSelectedOption]:void 0},enumerable:!0,configurable:!0}),t.prototype.SetSelectedOption=function(e){void 0!==e&&null!==e?this.FindAndSetActiveOption(e):this.setState({iSelectedOption:void 0})},t.prototype.shouldComponentUpdate=function(e,t,i){if(e.selectedOption!=this.props.selectedOption&&(this.FindActiveOptionIndex(e.selectedOption),this.state.iSelectedOption!==t.iSelectedOption))return!0;if(t.bOpened!==this.state.bOpened||t.iSelectedOption!==this.state.iSelectedOption)return!0;for(var n=["label","selectedOption","tabIndex","onChange","strDefaultLabel"],r=0,o=n;r<o.length;r++){var a=o[r];if(e[a]!==this.props[a])return!0}return!(!this.state.bOpened||!this.didOptionsChange(e.rgOptions))},t.prototype.didOptionsChange=function(e){if(e.length!=this.props.rgOptions.length)return!0;for(var t=0;t<e.length;t++)if(e[t].label!==this.props.rgOptions[t].label)return!0;return!1},t.prototype.componentWillReceiveProps=function(e){e.selectedOption!==this.props.selectedOption&&this.FindAndSetActiveOption(e.selectedOption),this.didOptionsChange(e.rgOptions)&&(this.HideMenu(),this.m_iMenuInstance=void 0)},t.prototype.OnInputRef=function(e){this.m_elInput=e},t.prototype.ToggleMenu=function(){this.state.bOpened?this.HideMenu():this.ShowMenu()},t.prototype.OnItemSelected=function(e,t){this.HideMenu(),this.setState({iSelectedOption:e}),this.props.onChange&&this.props.onChange(void 0!==e?this.props.rgOptions[e]:void 0,this)},t.prototype.ShowMenu=function(){this.m_iMenuInstance?this.m_iMenuInstance.Show():(this.m_iMenuInstance=Object(Rd.a)(Sa.createElement(ap,{rgOptions:this.props.rgOptions,fnOnItemSelected:this.OnItemSelected}),this.m_elInput,{bOverlapHorizontal:!0,bMatchWidth:!0,bFitToWindow:!0,strClassName:"DialogMenuPosition"}),this.m_iMenuInstance.SetOnHideCallback(this.HideMenu)),this.setState({bOpened:!0})},t.prototype.HideMenu=function(){this.m_iMenuInstance&&this.m_iMenuInstance.Hide(),this.setState({bOpened:!1})},t.prototype.render=function(){var e=void 0!==this.state.iSelectedOption&&this.props.rgOptions[this.state.iSelectedOption],t=e?e.label:this.props.strDefaultLabel,i="DialogDropDown _DialogInputContainer",n="DialogInputLabelGroup _DialogLayout";return this.state.bOpened&&(i+=" Active"),this.props.strClassName&&(n+=" "+this.props.strClassName),Sa.createElement("div",{className:n},this.props.label&&Sa.createElement("div",{className:"DialogLabel"},this.props.label),Sa.createElement("div",{className:i,tabIndex:this.props.tabIndex||0,onClick:this.ToggleMenu,ref:this.OnInputRef},Sa.createElement("div",{className:"DialogDropDown_Arrow"},Sa.createElement(Id.l,null)),t))},si.c([yn.a],t.prototype,"OnInputRef",null),si.c([yn.a],t.prototype,"ToggleMenu",null),si.c([yn.a],t.prototype,"OnItemSelected",null),si.c([yn.a],t.prototype,"ShowMenu",null),si.c([yn.a],t.prototype,"HideMenu",null),t}(Sa.Component),ap=function(e){function t(t){var i=e.call(this,t)||this;return i.state={iFocus:0},i}return si.d(t,e),t.prototype.OnItemClicked=function(e){var t=parseInt(e.currentTarget.getAttribute("data-dropdown-index"));(t||0===t)&&t>=0&&t<this.props.rgOptions.length&&this.props.fnOnItemSelected(t,this.props.rgOptions[t])},t.prototype.render=function(){var e=this,t=this.props.rgOptions.map(function(t,i){return Sa.createElement("div",{className:"DialogDropDownMenu_Item",key:i,"data-dropdown-index":i,onClick:e.OnItemClicked},t.label)});return Sa.createElement("div",{className:"DialogDropDownMenu _DialogInputContainer"},t)},si.c([yn.a],t.prototype,"OnItemClicked",null),t}(Sa.Component),sp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t}(Sa.Component),cp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={activePage:-1},i}return si.d(t,e),t.prototype.OnActivePageRef=function(e){e instanceof sp?this.m_ActivePage=e:(AssertMsg(!e,'PagedSettingsDialog page "'+this.GetActivePage().title+'" does not derive from PagedSettingsPageComponent'),this.m_ActivePage=null)},t.prototype.GetActivePage=function(){return this.state.activePage<0||this.state.activePage>=this.props.pages.length?this.props.pages[0]:this.props.pages[this.state.activePage]},t.prototype.SelectPage=function(e){e!=this.state.activePage&&(this.m_ActivePage&&!this.m_ActivePage.OKToSwitchAway()||this.setState({activePage:e}))},t.prototype.render=function(){for(var e=this,t=this.GetActivePage(),i=[],n=this,r=0;r<this.props.pages.length;r++)!function(r){var o=n.props.pages[r],a=o==t,s=o.className||"",c=o.click||function(){e.SelectPage(r)},l=["PagedSettingsDialog_PageListItem"],u=!1;"ChatRoomLeave"==o.className&&(u=!0),a&&l.push("Active"),l.push(s),i.push(Sa.createElement("div",{className:l.join(" "),key:o.title,onClick:c},u&&Sa.createElement(Id._3,null),o.title))}(r);var o=t.hideTitle,a="";t.uniqueName&&(a=" Page_"+t.uniqueName.replace(/\s/g,""));var s=!1!==t.enabled;return s||(a+=" noPermission"),Sa.createElement("div",{className:(this.props.className?this.props.className:"")+" PagedSettingsDialog"},Sa.createElement("div",{className:"PagedSettingsDialog_PageListColumn"},Sa.createElement("div",{className:"PagedSettingsDialog_Title"},this.props.title),Sa.createElement("div",{className:"PagedSettingsDialog_PageList"},i)),Sa.createElement(Od,{className:"DialogContentTransition"},t&&Sa.createElement(Bd,{key:t.title,classNames:"opacityfade-anim",timeout:300},Sa.createElement(ie,{className:"PagedSettingsDialog_PageContent"+a},!o&&Sa.createElement(Ud,null,t.title,!s&&Sa.createElement(Kd,null,Sa.createElement(Id.y,null),Object(ua.b)("#Chat_Settings_Permission_Denied"))),null!=t.content&&Sa.cloneElement(t.content,{ref:this.OnActivePageRef})))))},si.c([yn.a],t.prototype,"OnActivePageRef",null),t}(Sa.Component),lp=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bAcceptDrag=!1,i.m_deferredEnter=null,i.m_divElement=null,i}return si.d(t,e),t.prototype.BindDiv=function(e){this.m_divElement=e},Object.defineProperty(t.prototype,"div",{get:function(){return this.m_divElement},enumerable:!0,configurable:!0}),t.prototype.DeliverDeferredDragEnter=function(){var e=gy.DragDropManager.GetDragData();return this.props.fnDragEnter(e,this.m_deferredEnter.bFiles)},t.prototype.OnDragEnter=function(e){if(!this.m_bAcceptDrag){var t=gy.DragDropManager.GetDragData(),i=this.props.bAcceptsFiles&&-1!=e.dataTransfer.types.indexOf("Files");t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.m_bAcceptDrag=!0:this.m_bAcceptDrag=!!i,this.m_bAcceptDrag&&this.props.fnDragEnter&&(this.m_deferredEnter={bFiles:i}),this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())}},t.prototype.OnDragLeave=function(e){if(this.m_bAcceptDrag){if(!Object(Ad.c)(e))return;this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation(),this.props.fnDragLeave&&this.props.fnDragLeave()}},t.prototype.OnDragOver=function(e){if(this.m_bAcceptDrag){if(this.m_deferredEnter){var t=this.DeliverDeferredDragEnter();if(this.m_deferredEnter=null,!t)return void(this.m_bAcceptDrag=!1)}e.preventDefault(),e.stopPropagation(),this.props.fnDragOver&&this.props.fnDragOver(e)}},t.prototype.OnDrop=function(e){if(this.m_bAcceptDrag){this.m_bAcceptDrag=!1,e.preventDefault(),e.stopPropagation();var t=gy.DragDropManager.GetDragData();t&&-1!=this.props.rgAcceptedTypes.indexOf(t.type)?this.props.fnDrop&&this.props.fnDrop(t,e):this.props.bAcceptsFiles&&0!=e.dataTransfer.files.length&&this.props.fnDrop&&this.props.fnDrop(null,e)}},t.prototype.render=function(){var e=this.props,t=(e.rgAcceptedTypes,e.bAcceptsFiles,e.fnDragEnter,e.fnDragLeave,e.fnDragOver,e.fnDrop,si.f(e,["rgAcceptedTypes","bAcceptsFiles","fnDragEnter","fnDragLeave","fnDragOver","fnDrop"]));return Sa.createElement("div",si.a({},t,{ref:this.BindDiv,className:"DropTarget "+this.props.className,onDragEnter:this.OnDragEnter,onDragLeave:this.OnDragLeave,onDragOver:this.OnDragOver,onDrop:this.OnDrop}),this.props.children)},si.c([yn.a],t.prototype,"BindDiv",null),si.c([yn.a],t.prototype,"DeliverDeferredDragEnter",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDrop",null),t}(Sa.PureComponent),up=i("Mn8c"),dp=i("V/Vt"),pp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={maximized:i.BIsMaximized()},i}return si.d(t,e),t.prototype.BIsMaximized=function(){var e=this.props.popup.screen.availWidth-this.props.popup.innerWidth,t=this.props.popup.screen.availHeight-this.props.popup.innerHeight;return 0===e&&0===t},t.prototype.componentDidMount=function(){this.props.popup.addEventListener("resize",this.UpdateMaximizeState)},t.prototype.componentWillUnmount=function(){this.props.popup.removeEventListener("resize",this.UpdateMaximizeState)},t.prototype.UpdateMaximizeState=function(){var e=this.BIsMaximized();e!=this.state.maximized&&this.setState({maximized:e})},t.prototype.render=function(){var e=this.props.popup,t=function(){e&&e.close()},i=function(){e.SteamClient.Window.ToggleMaximize()},n=function(){e.SteamClient.Window.Minimize()},r="title-area-icon";return this.state.maximized?r+=" restoreButton":r+=" maximizeButton",Sa.createElement("div",{className:"TitleBar title-area"},Sa.createElement("div",{className:"title-area-highlight"}),Sa.createElement("div",{className:"title-area-children"},this.props.children),!this.props.hideActions&&Sa.createElement("div",{className:"title-bar-actions"},Sa.createElement("div",{className:"title-area-icon closeButton",onClick:t},Sa.createElement(Id._6,null)),!this.props.hideMinMax&&Sa.createElement("div",{className:r,onClick:i},this.state.maximized&&Sa.createElement(Id.M,null),!this.state.maximized&&Sa.createElement(Id.A,null)),!this.props.hideMinMax&&Sa.createElement("div",{className:"title-area-icon minimizeButton",onClick:n},Sa.createElement(Id.D,null))))},si.c([yn.a],t.prototype,"UpdateMaximizeState",null),t}(Sa.Component),mp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={error:null},i}return si.d(t,e),t.prototype.componentDidCatch=function(e,t){var i={error:e,info:t};this.setState({error:i})},t.prototype.clearError=function(){this.setState({error:null})},t.prototype.render=function(){var e=this.state.error;if(e){var t=e.error?e.error.stack:"Stack missing",i=e.info?e.info.componentStack:"",n=e.error&&e.error.message||"unknown error";return Sa.createElement("div",{style:{overflow:"auto"}},Sa.createElement("h1",{style:{marginTop:"15px",marginLeft:"15px",color:"white",fontSize:"20px",display:"inline-block"}},'Error: "',n,'"'),"   ",Sa.createElement("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:this.clearError},"(x) Dismiss"),Sa.createElement("br",null),Sa.createElement("pre",{style:{marginTop:"15px",marginLeft:"15px",color:"white",fontSize:"16px"}},t),Sa.createElement("pre",{style:{marginTop:"15px",marginLeft:"15px",color:"white",fontSize:"16px"}},"The error occurred while rendering:",i))}return this.props.children},si.c([yn.a],t.prototype,"clearError",null),t}(Sa.Component),hp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.Cancel=function(){this.props.onCancel(),this.props.closeModal()},t.prototype.OK=function(){this.props.onOK(),this.props.closeModal()},t.prototype.componentDidMount=function(){var e=On.findDOMNode(this);if(e){var t=e.querySelector("button[type=submit]");t&&t.focus()}},t.prototype.render=function(){return Sa.createElement(pe,{onEscKeypress:this.Cancel,bDestructiveWarning:this.props.bDestructiveWarning},Sa.createElement(ne,{classNameContent:"GenericConfirmDialog",onSubmit:this.OK,bCenterVertically:!0},Sa.createElement(Ud,null,this.props.strTitle),Sa.createElement(Hd,null,Sa.createElement(Wd,null,this.props.strDescription,this.props.children)),Sa.createElement(Vd,null,!this.props.bAlertDialog&&Sa.createElement(ce,{onCancel:this.Cancel,strOKText:this.props.strOKButtonText,strCancelText:this.props.strCancelButtonText}),this.props.bAlertDialog&&Sa.createElement(re,null,this.props.strOKButtonText))))},si.c([yn.a],t.prototype,"Cancel",null),si.c([yn.a],t.prototype,"OK",null),t}(Sa.Component),gp=function(e){function t(t,i,n,r,o){var a=e.call(this,n,{title:r.strTitle,html_class:"client_chat_frame fullheight ModalDialogPopup",body_class:"fullheight",owner_window:void 0,replace_existing_popup:!0,target_browser:i!=Md?i:void 0,availscreenwidth:t.screen.availWidth,availscreenheight:t.screen.availHeight})||this;return a.m_bModalInitiatedClose=!1,a.m_windowOpener=t,a.m_browserContext=i,a.m_modalProps=r,a.m_modalElement=o,a}return si.d(t,e),t.prototype.Close=function(){this.m_bModalInitiatedClose=!0,e.prototype.Close.call(this)},t.prototype.UpdateParamsBeforeShow=function(e){var t=this.m_modalProps.popupWidth||500,i=this.m_modalProps.popupHeight||400,n=this.m_windowOpener.screen,r=(n.availWidth-t)/2,o=(n.availHeight-i)/2,a=n;return void 0!==a.availLeft&&void 0!==a.availTop&&(r+=a.availLeft,o+=a.availTop),si.a({},e,{dimensions:{width:t,height:i,left:r,top:o}})},t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){this.m_bModalInitiatedClose||this.m_modalProps.closeModal&&this.m_modalProps.closeModal()},t.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame"),this.m_modalElement&&On.render(Sa.createElement(he,{popup:e,browserContext:this.m_browserContext},this.m_modalElement),t)},t}(dp.a),fp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={strCurrentNameEntry:i.props.player.nickname||""},i}return si.d(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value})},t.prototype.HandleSubmit=function(e){var t=this;wd.FriendStore.SetPlayerNickname(this.props.player,this.state.strCurrentNameEntry).then(function(e){1==e&&t.props.closeModal&&t.props.closeModal()})},t.prototype.componentWillReceiveProps=function(e){e.player!=this.props.player&&this.setState({strCurrentNameEntry:e.player.nickname})},t.prototype.render=function(){var e="friend editNickname",t=this.props.player.has_nickname;return this.props.player.persona.is_ingame?e+=" ingame":this.props.player.persona.is_online&&(e+=" online"),t&&(e+=" nickNamed"),Sa.createElement(pe,{className:"Dialog_EditNickName",onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"NicknameDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,t?Object(ua.b)("#Friend_Menu_ChangeNickname"):Object(ua.b)("#Friend_Menu_AddNickname")),Sa.createElement(Hd,null,Sa.createElement(Wd,null,t?Object(ua.b)("#Nickname_EditNickname"):Object(ua.b)("#Nickname_AddANickname")),Sa.createElement(Wd,null,Sa.createElement("div",{className:e},Sa.createElement("img",{className:"avatarMedium",src:this.props.player.persona.avatar_url_full}),Sa.createElement("div",{className:"labelHolder"},Sa.createElement("div",{className:"mediumName"},this.props.player.secondary_display_name),Sa.createElement("div",{className:"nickNamedAs"},Object(ua.b)("#Nickname_NickNameAsDialog")),Sa.createElement("div",{className:"mediumName asNickName"},Sa.createElement(Qd,{placeholder:t?Object(ua.b)("#Nickname_PlaceHolderNickName"):Object(ua.b)("#Nickname_PlaceHolderNickNameFresh"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0,bShowClearAction:!0})))))),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"HandleTextEntry",null),si.c([yn.a],t.prototype,"HandleSubmit",null),t=si.c([up.observer],t)}(Sa.Component),_p=function(e){function t(t){var i=e.call(this,t)||this;return i.m_friendList=null,i.m_rctChosenFriends=[],i.state={rgFriendsChosen:[],strInputValue:""},i}return si.d(t,e),Object.defineProperty(t.prototype,"selectedFriendCount",{get:function(){return this.state.rgFriendsChosen.length},enumerable:!0,configurable:!0}),t.prototype.OnTextInput=function(e){this.setState({strInputValue:e.currentTarget.value})},t.prototype.OnInputKeyDown=function(e){var t=this;if(13==e.keyCode){if(e.currentTarget.value.trim().length||this.m_friendList.BHasSelection()){e.preventDefault();var i=this.m_friendList.GetSelectedFriend();i&&this.SelectFriendSuggestion(i)}}else if(8==e.keyCode&&0==e.currentTarget.selectionEnd&&this.state.rgFriendsChosen.length){e.preventDefault();var n=void 0;this.setState(function(e){return n=e.rgFriendsChosen[e.rgFriendsChosen.length-1],{rgFriendsChosen:e.rgFriendsChosen.slice(0,e.rgFriendsChosen.length-1)}},function(){t.props.onFriendRemoved&&t.props.onFriendRemoved(n)})}else this.m_friendList.BHandleInputKeyPress(e)&&e.preventDefault()},t.prototype.SelectFriendSuggestion=function(e){var t=this;this.setState({strInputValue:""}),this.m_friendList.ClearSelection(),this.setState(function(t){return-1==t.rgFriendsChosen.indexOf(e)?{rgFriendsChosen:t.rgFriendsChosen.concat([e])}:null},function(){t.props.onFriendSelected&&t.props.onFriendSelected(e)})},t.prototype.RemoveFriendFromList=function(e){var t=this;this.setState(function(t){return{rgFriendsChosen:_n.a(t.rgFriendsChosen,e)}},function(){t.props.onFriendRemoved&&t.props.onFriendRemoved(e)})},t.prototype.OnFriendsListRef=function(e){this.m_friendList=e},t.prototype.componentWillReceiveProps=function(e){e.rgSelectedFriends!==this.props.rgSelectedFriends&&void 0!==e.rgSelectedFriends&&(void 0!==this.props.rgSelectedFriends&&_n.f(e.rgSelectedFriends,this.props.rgSelectedFriends)||this.setState({rgFriendsChosen:e.rgSelectedFriends.map(function(e){return wd.FriendStore.GetFriend(e)})}))},t.prototype.componentWillUpdate=function(e,t){this.BuildChosenFriendList(t)},t.prototype.componentWillMount=function(){if(this.props.rgSelectedFriends){var e=this.props.rgSelectedFriends.map(function(e){return wd.FriendStore.GetFriend(e)});e=e.filter(function(e){return null!=e}),this.setState({rgFriendsChosen:e}),this.BuildChosenFriendList(si.a({},this.state,{rgFriendsChosen:e}))}},t.prototype.BuildChosenFriendList=function(e){var t=this,i=!1;if(e.rgFriendsChosen.length!=this.m_rctChosenFriends.length)i=!0;else for(var n=0;n<e.rgFriendsChosen.length;n++)if(e.rgFriendsChosen[n].accountid!=this.m_rctChosenFriends[n].key){i=!0;break}if(i){var r=this.props.chosenFriendComponent||be;this.m_rctChosenFriends=e.rgFriendsChosen.map(function(e){return Sa.createElement(r,{friend:e,key:e.accountid,onClick:t.RemoveFriendFromList})})}},t.prototype.render=function(){var e=this.state.rgFriendsChosen.length>0,t=["FriendPicker"];return e&&t.push("FriendPicker_FriendsChosen"),Sa.createElement("div",{className:t.join(" ")},Sa.createElement($d,{onChange:this.OnTextInput,onKeyDown:this.OnInputKeyDown,label:this.props.label,value:this.state.strInputValue,placeholder:e?"":Object(ua.b)("#FriendPicker_StartTyping"),autoFocus:this.props.autoFocus},this.m_rctChosenFriends),1==this.props.bDropInvite&&Sa.createElement("div",{className:"DialogLabel"},Object(ua.b)("#Chat_InviteFriends_DropInvite")),Sa.createElement(yp,{ref:this.OnFriendsListRef,eSort:this.props.eSort,strInputValue:this.state.strInputValue,setExcludedFriends:this.props.setExcludedFriends,rgFriendsChosen:this.state.rgFriendsChosen,fnSelectFriendSuggestion:this.SelectFriendSuggestion}))},si.c([yn.a],t.prototype,"OnTextInput",null),si.c([yn.a],t.prototype,"OnInputKeyDown",null),si.c([yn.a],t.prototype,"SelectFriendSuggestion",null),si.c([yn.a],t.prototype,"RemoveFriendFromList",null),si.c([yn.a],t.prototype,"OnFriendsListRef",null),t}(Sa.Component),yp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_iSelectedFriendIndex=-1,t.m_rgFriendSuggestions=[],t}return si.d(t,e),t.prototype.BuildFriendsList=function(e){this.m_rgFriendsList=wd.FriendStore.all_friends,e.setExcludedFriends&&e.setExcludedFriends.size&&(this.m_rgFriendsList=this.m_rgFriendsList.filter(function(t){return!e.setExcludedFriends.has(t.accountid)}));var t=wd.ChatStore.FriendChatStore;switch(this.props.eSort){case 0:this.m_rgFriendsList.sort(function(e,i){var n=t.GetFriendLastChatTime(i.accountid)-t.GetFriendLastChatTime(e.accountid);return 0!==n?n:Nc.DefaultFriendSortComparator(e,i)});break;default:case 1:this.m_rgFriendsList.sort(function(e,t){return e.display_name.localeCompare(t.display_name)})}this.BuildFriendSuggestionList(e)},t.prototype.componentWillMount=function(){this.BuildFriendsList(this.props)},t.prototype.componentWillReceiveProps=function(e){e.setExcludedFriends!=this.props.setExcludedFriends&&this.BuildFriendsList(e)},t.prototype.ClearSelection=function(){this.m_iSelectedFriendIndex=-1},t.prototype.BHasSelection=function(){return-1!==this.m_iSelectedFriendIndex},t.prototype.GetSelectedFriend=function(){return-1!==this.m_iSelectedFriendIndex?this.m_rgFriendSuggestions[this.m_iSelectedFriendIndex]:this.m_rgFriendSuggestions.length?this.m_rgFriendSuggestions[0]:null},t.prototype.BHandleInputKeyPress=function(e){return(38==e.keyCode||40==e.keyCode||34==e.keyCode||33==e.keyCode)&&(this.m_rgFriendSuggestions.length&&(38==e.keyCode?this.m_iSelectedFriendIndex--:33==e.keyCode?this.m_iSelectedFriendIndex=Math.max(0,this.m_iSelectedFriendIndex-5):34==e.keyCode?this.m_iSelectedFriendIndex=Math.min(this.m_rgFriendSuggestions.length-1,this.m_iSelectedFriendIndex+5):40==e.keyCode&&this.m_iSelectedFriendIndex++,this.m_iSelectedFriendIndex=(this.m_iSelectedFriendIndex+this.m_rgFriendSuggestions.length)%this.m_rgFriendSuggestions.length,this.forceUpdate()),!0)},t.prototype.OnFriendSuggestionClicked=function(e){this.props.fnSelectFriendSuggestion(this.m_rgFriendSuggestions[this.GetIndex(e)])},t.prototype.OnFriendSuggestionMouseEnter=function(e){this.m_iSelectedFriendIndex=this.GetIndex(e),this.forceUpdate()},t.prototype.OnFriendSelected=function(e){this.props.fnSelectFriendSuggestion(e)},t.prototype.OnFocusFriendRef=function(e){e&&Object(Ad.m)(e,e.parentElement)},t.prototype.BuildFriendSuggestionList=function(e){var t,i=void 0;-1!==this.m_iSelectedFriendIndex&&(t=this.m_rgFriendSuggestions[this.m_iSelectedFriendIndex]);var n=e.strInputValue&&e.strInputValue.trim().toLocaleLowerCase();this.m_rgFriendSuggestions=[];for(var r=0;r<this.m_rgFriendsList.length&&this.m_rgFriendSuggestions.length<100;r++){var o=this.m_rgFriendsList[r];-1===e.rgFriendsChosen.indexOf(o)&&(n&&!o.BMatchesSearchString(n,!1)||(o===t&&(i=this.m_rgFriendSuggestions.length),this.m_rgFriendSuggestions.push(o)))}-1===this.m_iSelectedFriendIndex&&n.length?this.m_iSelectedFriendIndex=0:void 0!==i?this.m_iSelectedFriendIndex=i:this.m_iSelectedFriendIndex>=this.m_rgFriendSuggestions.length&&(this.m_iSelectedFriendIndex=this.m_rgFriendSuggestions.length-1)},t.prototype.GetIndex=function(e){return Math.max(0,Math.min(this.m_rgFriendSuggestions.length,parseInt(e.currentTarget.getAttribute("data-index"))))},t.prototype.componentWillUpdate=function(e,t){this.BuildFriendSuggestionList(e)},t.prototype.render=function(){var e,t=this,i=this.m_rgFriendSuggestions.map(function(e,i){var n="FriendPicker_SuggestedFriend",r=i===t.m_iSelectedFriendIndex;return r&&(n+=" Focus"),Sa.createElement("div",{className:n,onClick:t.OnFriendSuggestionClicked,onMouseEnter:t.OnFriendSuggestionMouseEnter,key:e.accountid,ref:r?t.OnFocusFriendRef:null,"data-index":i},Sa.createElement(Oh,{noActions:!0,friend:e,context:null}))});if(""!=this.props.strInputValue||1==this.props.eSort||0==this.props.eSort)e=Sa.createElement(Sa.Fragment,null,i);else{for(var n=new Set(this.props.setExcludedFriends),r=0,o=this.props.rgFriendsChosen;r<o.length;r++){var a=o[r];a&&!n.has(a.accountid)&&n.add(a.accountid)}var s={bSingleClickActivate:!0,disableContextMenu:!0},c=0,l=wd.FriendStore.FavoritesStore.favorites.map(function(e){return e.friend&&!n.has(e.friend.accountid)?(c++,Sa.createElement(Oh,si.a({friend:e.friend,key:e.friend.accountid,className:"",context:{},action:t.OnFriendSelected},s,{bFriendsListEntry:!0}))):null}),u=Sa.createElement(Sh,{group:wd.FriendStore.FriendGroupStore.ingame_group,key:wd.FriendStore.FriendGroupStore.ingame_group.id,collapsed:!1,searchString:this.props.strInputValue,fnOnSearchSelection:function(){},friendSelectAction:this.OnFriendSelected,setExcludedFriends:n,friendProps:s}),d=wd.FriendStore.FriendGroupStore.default_groups.map(function(e){return Sa.createElement(Sh,{group:e,key:e.id,collapsed:!1,searchString:t.props.strInputValue,fnOnSearchSelection:function(){},friendSelectAction:t.OnFriendSelected,setExcludedFriends:n,friendProps:s})});e=Sa.createElement(Sa.Fragment,null,c>0&&Sa.createElement("div",{className:"friendGroup"},Sa.createElement("div",{className:"groupName"},Object(ua.b)("#FriendGroup_Favorites")),l),u,d)}return Sa.createElement("div",{className:"FriendPicker_Suggestions CompactFriendsList"},Sa.createElement("div",{className:"insetShadow verticalInsetShadow"}),Sa.createElement("div",{className:"FriendPicker_Suggestions_List"},e))},si.c([yn.a],t.prototype,"OnFriendSuggestionClicked",null),si.c([yn.a],t.prototype,"OnFriendSuggestionMouseEnter",null),si.c([yn.a],t.prototype,"OnFriendSelected",null),si.c([yn.a],t.prototype,"OnFocusFriendRef",null),t}(Sa.Component),vp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={strNameEntry:t.group?t.group.name:"",strError:null},i}return si.d(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strNameEntry:e.target.value,strError:null})},t.prototype.HandleSubmit=function(e){var t=this,i=this.m_friendPicker.state.rgFriendsChosen,n=this.state.strNameEntry;if(this.props.group){for(var r=new Set(this.props.group.GetCurrentMemberSet()),o=[],a=[],s=0,c=i;s<c.length;s++){var l=c[s];r.has(l.accountid)?r.delete(l.accountid):o.push(l.persona.m_steamid.ConvertTo64BitString())}r.forEach(function(e){a.push(hi.a.InitFromAccountID(e).ConvertTo64BitString())}),wd.FriendStore.FriendGroupStore.ManageGroup(this.props.group,n,o,a).then(function(e){e?t.props.closeModal&&t.props.closeModal():t.setState({strError:Object(ua.b)("#FriendGroup_ManageGroup_ErrorFailed")})})}else{if(!n)return void this.setState({strError:Object(ua.b)("#FriendGroup_CreateGroup_ErrorNeedName")});var u=i.map(function(e){return e.persona.m_steamid.ConvertTo64BitString()});wd.FriendStore.FriendGroupStore.CreateGroup(n,u).then(function(e){e?t.props.closeModal&&t.props.closeModal():t.setState({strError:Object(ua.b)("#FriendGroup_CreateGroup_ErrorFailed")})})}},t.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e},t.prototype.render=function(){return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"ManageGroupDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,this.props.group?Object(ua.b)("#FriendGroup_Menu_Manage"):Object(ua.b)("#FriendGroup_Menu_CreateGroup")),Sa.createElement(Hd,null,this.state.strError&&Sa.createElement(Wd,{className:"nicknameError"},this.state.strError),Sa.createElement(Qd,{type:"text",label:Object(ua.b)("#FriendGroup_CategoryName"),className:"nicknameInput",value:this.state.strNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),Sa.createElement(_p,{ref:this.OnFriendPickerRef,label:Object(ua.b)("#FriendGroup_CategoryMembers"),eSort:1,rgSelectedFriends:this.props.rgPreSelectedFriends})),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"HandleTextEntry",null),si.c([yn.a],t.prototype,"HandleSubmit",null),si.c([yn.a],t.prototype,"OnFriendPickerRef",null),t}(Sa.Component),bp=function(e){function t(t){var i=e.call(this,t)||this;return i.m_mapCategoryChecks=_i.observable.map(),i.state={strError:null},i}return si.d(t,e),t.prototype.componentWillReceiveProps=function(e){e.friend!=this.props.friend&&this.m_mapCategoryChecks.clear()},t.prototype.HandleSubmit=function(e){var t=this,i=[];wd.FriendStore.FriendGroupStore.user_groups.forEach(function(e){if(t.m_mapCategoryChecks.has(e.unique_id)){var n=void 0,r=void 0;t.m_mapCategoryChecks.get(e.unique_id)?r=e:n=e,i.push(wd.FriendStore.FriendGroupStore.TransferFriendFromToGroup(t.props.friend,n,r))}}),Promise.all(i).then(function(e){for(var i=!1,n=0,r=e;n<r.length;n++)for(var o=r[n],a=0,s=o;a<s.length;a++){var c=s[a];c||(i=!0)}i?t.setState({strError:Object(ua.b)("#FriendGroup_ManageGroup_ErrorFailed")}):t.props.closeModal()})},t.prototype.CreateNew=function(e){Ce(Xt(this,e),$t(e),this.props.friend)},t.prototype.render=function(){return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"AssignCategoriesDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,Object(ua.b)("#FriendGroup_Categorize_Title")),Sa.createElement(Hd,null,this.state.strError&&Sa.createElement(Wd,{className:"nicknameError"},this.state.strError),Sa.createElement(Jd,null,Sa.createElement(Xd,null,Sa.createElement(Oh,{friend:this.props.friend,className:"AssignCategoriesDialog_Friend",noActions:!0,context:null}))),Sa.createElement(Cp,{friend:this.props.friend,mapChecks:this.m_mapCategoryChecks}),Sa.createElement(Jd,{className:"AssignCategoriesDialog_AddNewButton"},Sa.createElement(oe,{onClick:this.CreateNew},Object(ua.b)("#FriendGroup_Categorize_AddNew")))),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"HandleSubmit",null),si.c([yn.a],t.prototype,"CreateNew",null),t}(Sa.Component),Cp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this,t=wd.FriendStore.FriendGroupStore,i=t.user_groups,n=i.map(function(t){return Sa.createElement(Sp,{friend:e.props.friend,group:t,key:t.unique_id,mapChecks:e.props.mapChecks})});return Sa.createElement(Sa.Fragment,null,Sa.createElement(jd,null,Object(ua.b)("#FriendGroup_Categorize_Categories")),Sa.createElement("div",{className:"FriendCategoryCheckboxes_List"},n))},t=si.c([up.observer],t)}(Sa.Component),Sp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnToggle=function(e){e!=this.props.group.HasMember(this.props.friend.accountid)?this.props.mapChecks.set(this.props.group.unique_id,e):this.props.mapChecks.delete(this.props.group.unique_id)},t.prototype.OnContextMenu=function(e){Ae(Xt(this,e),this.props.group,e)},t.prototype.render=function(){var e,t=this.props.group,i=this.props.friend;return e=this.props.mapChecks.has(t.unique_id)?this.props.mapChecks.get(t.unique_id):t.HasMember(i.accountid),Sa.createElement("div",{onContextMenu:this.OnContextMenu},Sa.createElement(tp,{label:t.name,checked:e,onChange:this.OnToggle}))},si.c([yn.a],t.prototype,"OnToggle",null),si.c([yn.a],t.prototype,"OnContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),Mp=i("8MbF"),Fp={TimeOfDay:new Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{hour:"numeric",minute:"numeric"}),TimeOfDayWithSecs:new Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric"}),TimeInWeek:Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric"}),FullTimestamp:Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),FullTimestampNoWeekday:Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},wp={TimeOfDay:new Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{hour:"numeric",minute:"numeric",hour12:!1}),TimeOfDayWithSecs:new Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),TimeInWeek:Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestamp:Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),FullTimestampNoWeekday:Intl.DateTimeFormat(ua.a.GetPreferredLocales(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})},Bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(Sa.Fragment,null,Fe(this.props.rtime,{bTimeOnly:this.props.bTimeOnly,bIncludeSeconds:this.props.bIncludeSeconds}))},t=si.c([up.observer],t)}(Sa.Component),Op=function(e){function t(t){var i=e.call(this,t)||this,n=wd.FriendStore.self;return i.state={strCurrentNameEntry:n.primary_display_name,strError:""},i}return si.d(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.currentTarget.value,strError:""})},t.prototype.HandleSubmit=function(e){this.SetPersonaName(this.state.strCurrentNameEntry)},t.prototype.DisplayError=function(e){this.setState({strError:e})},t.prototype.SetPersonaName=function(e){var t=this;if(this.setState({strError:""}),ai.a.IN_CLIENT&&SteamClient.WebChat.SetPersonaName)SteamClient.WebChat.SetPersonaName(this.state.strCurrentNameEntry).then(function(e){e?t.DisplayError(Object(ua.b)(e)):t.props.closeModal&&t.props.closeModal()});else{var i=new FormData;i.append("sessionid",ai.a.SESSIONID),i.append("persona",e);var n=wd.FriendStore.self,r=ai.a.CHAT_BASE_URL+"profiles/"+n.steamid64+"/ajaxsetpersonaname/";Qi.a.post(r,i).then(function(e){var i=e.data;if(i.success)t.props.closeModal&&t.props.closeModal();else{var n=i.message.replace("<br />","");t.DisplayError(n)}}).catch(function(e){t.DisplayError(Object(ua.b)("#Friends_NameChangeFailed_Info"))})}},t.prototype.render=function(){var e=wd.FriendStore.self,t="friend changePersonaName";e.persona.is_ingame?t+=" ingame":e.persona.is_online&&(t+=" online");var i=!1;return this.state.strError&&(i=!0),Sa.createElement(pe,{className:"Dialog_ChangePersonaName",onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"ChangePersonaNameDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,Object(ua.b)("#ChangePersona_Title")),Sa.createElement(Hd,null,Sa.createElement(Wd,null,Object(ua.b)("#ChangePersona_Description")),Sa.createElement(Wd,null,Sa.createElement("div",{className:t},Sa.createElement("img",{className:"avatarMedium",src:e.persona.avatar_url_full}),Sa.createElement("div",{className:"labelHolder"},i&&Sa.createElement("div",{className:"error"},this.state.strError),Sa.createElement("div",null,Sa.createElement("div",null,Object(ua.b)("#ChangePersona_Change")),Sa.createElement("div",{className:"mediumName"},Sa.createElement(Qd,{placeholder:Object(ua.b)("#ChangePersona_PlaceHolder"),className:"changePersonaInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}))))))),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"HandleTextEntry",null),si.c([yn.a],t.prototype,"HandleSubmit",null),t=si.c([up.observer],t)}(Sa.Component),Ip=function(e){function t(t){var i=e.call(this,t)||this;return i.state=i.ComputeStateFromNotificationSettings(i.props.player.notification_settings),i}return si.d(t,e),t.prototype.ConvertENotificationSettingToBoolean=function(e){return 1==e},t.prototype.ComputeStateFromNotificationSettings=function(e){var t,i=!1,n=!1;for(var r in e)if(0!=e[r]){n=!0;break}return n?(t=fl.DefaultFriendsSettings(),t.bNotifications_ShowIngame=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowInGame),t.bNotifications_ShowMessage=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowMessage),t.bNotifications_ShowOnline=this.ConvertENotificationSettingToBoolean(e.Notifications_ShowOnline),t.bSounds_PlayIngame=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayInGame),t.bSounds_PlayMessage=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayMessage),t.bSounds_PlayOnline=this.ConvertENotificationSettingToBoolean(e.Sounds_PlayOnline)):(i=!0,t=wd.SettingsStore.FriendsSettings),{settings:t,bUseDefaults:i}},t.prototype.ConvertBooleanToENotificationSetting=function(e){return e?1:2},t.prototype.FriendSettingsToNotificationSettings=function(e){var t=new Gc;return this.state.bUseDefaults?t:(t.Notifications_ShowInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowIngame),t.Notifications_ShowMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowMessage),t.Notifications_ShowOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bNotifications_ShowOnline),t.Sounds_PlayInGame=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayIngame),t.Sounds_PlayMessage=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayMessage),t.Sounds_PlayOnline=this.ConvertBooleanToENotificationSetting(this.state.settings.bSounds_PlayOnline),t)},t.prototype.HandleSubmit=function(e){var t=this;wd.FriendStore.SetPlayerNotificationSettings(this.props.player,this.FriendSettingsToNotificationSettings(this.state.settings)).then(function(e){1==e&&t.props.closeModal&&t.props.closeModal()})},t.prototype.componentWillReceiveProps=function(e){e.player!=this.props.player&&this.setState(this.ComputeStateFromNotificationSettings(e.player.notification_settings))},t.prototype.OnSettingToggled=function(e,t){var i;this.setState({settings:si.a({},this.state.settings,(i={},i[e]=t,i))})},t.prototype.FriendsSettingsCheckbox=function(e){var t=this;return Sa.createElement(tp,{key:e.strName,disabled:this.state.bUseDefaults,onChange:function(i){t.OnSettingToggled(e.strName,i)},checked:!!this.state.settings[e.strName]})},t.prototype.NotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return Sa.createElement("div",null,Sa.createElement("div",{className:"FriendsSettingsNotificationRow"},Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Sa.createElement(t,{strName:e.strNameShow})),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Sa.createElement(t,{strName:e.strNameSound}))))},t.prototype.OnDefaultToggled=function(e){e?this.setState({settings:wd.SettingsStore.FriendsSettings,bUseDefaults:!0}):this.setState({bUseDefaults:!1})},t.prototype.render=function(){var e=this,t=this.NotificationRow,i=this.state.bUseDefaults,n="friend editFriendNotifications";return this.props.player.persona.is_ingame?n+=" ingame":this.props.player.persona.is_online&&(n+=" online"),this.props.player.persona.is_awayOrSnooze&&(n+=" awayOrSnooze"),Sa.createElement(pe,{className:"Dialog_FriendNotifications",onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"FriendNotificationsDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,Object(ua.b)("#Friend_Menu_NotificationsTitle")),Sa.createElement(Hd,{className:i?"useDefaults":""},Sa.createElement(Wd,null,Object(ua.b)("#FriendNotifications_Instructions",this.props.player.display_name)),Sa.createElement(Wd,null,Sa.createElement("div",{className:n},Sa.createElement("div",{className:"avatarHolder no-drag"},Sa.createElement("div",{className:"avatarStatus"}),Sa.createElement("img",{className:"avatar",src:this.props.player.persona.avatar_url_full})),Sa.createElement("div",{className:"labelHolder"},this.props.player.primary_display_name,!this.props.player.is_display_name_nickname&&this.props.player.has_secondary_display_name&&Sa.createElement("span",{className:"playerNickname"}," (",this.props.player.secondary_display_name,")"),this.props.player.is_display_name_nickname&&Sa.createElement("span",{className:"playerNicknameBracket",title:Object(ua.b)("#isNickname")},"*")))),Sa.createElement(tp,{classname:"useDefaultsCheckBox",label:Object(ua.b)("#FriendNotifications_UseDefaults"),onChange:function(t){e.OnDefaultToggled(t)},checked:this.state.bUseDefaults}),Sa.createElement("div",{className:"SettingsGroup"},Sa.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(ua.b)("#FriendSettings_Notification_Table_Label")),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(ua.b)("#FriendSettings_Notification_Table_Show")),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(ua.b)("#FriendSettings_Notification_Table_Play"))),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_FriendNotification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_FriendNotification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}))),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"HandleSubmit",null),si.c([yn.a],t.prototype,"OnSettingToggled",null),si.c([yn.a],t.prototype,"FriendsSettingsCheckbox",null),si.c([yn.a],t.prototype,"NotificationRow",null),si.c([yn.a],t.prototype,"OnDefaultToggled",null),t=si.c([up.observer],t)}(Sa.Component),Rp=Object(up.observer)(function(e){var t=e.friend,i=[],n=t.persona_name_history,r=t.persona_name_history_loaded;if(r&&n.length>0)for(var o=0,a=0,s=n;a<s.length;a++){var c=s[a];i.push(Sa.createElement("div",{className:"recentName",key:"name_history_"+o},c)),o++}else r?i.push(Sa.createElement("div",{className:"recentName",key:"name_history_none"},Object(ua.b)("#Friend_Menu_RecentAliases_None"))):i.push(Sa.createElement("div",{className:"recentName",key:"name_history_loading"},Object(ua.b)("#Friend_Menu_RecentAliases_Loading")));return Sa.createElement(Sa.Fragment,null,Sa.createElement(Mp.e,{label:Object(ua.b)("#Friend_Menu_RecentAliases")},i))}),Ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnToggle=function(e){this.props.group.ToggleMemberRoleState(this.props.friend.accountid,e)},t.prototype.render=function(){var e=this,t=this.props.group.DefaultRoleID(),i=this.props.group.GetMemberRoleIDs(this.props.friend.accountid),n=this.props.group.BIsAccountIDOwner(this.props.friend.accountid),r=this.props.group.BCanEditRoles(),o=this.props.group.GetRoles().slice().sort(function(e,i){return e.role_id==t?1:i.role_id==t?-1:parseInt(e.role_id)-parseInt(i.role_id)}),a=o.map(function(n){var o=-1!=i.findIndex(function(e){return e==n.role_id});if(!o&&!r)return null;var a=n.name,s=e.props.group.BCanIAssignRole(n.role_id);return n.role_id==t?a=Object(ua.b)("#ChatRoomRole_Member"):a.startsWith("#ChatRoomRole_")&&(a=Object(ua.b)(a)),Sa.createElement(Dp,{key:n.role_id,friend:e.props.friend,group:e.props.group,roleName:a,roleID:n.role_id,bHasRole:o,bEditable:s})}),s=r&&!n?Object(ua.b)("#Friend_Menu_EditRoles"):Object(ua.b)("#Friend_Menu_ViewRoles");return Sa.createElement(Sa.Fragment,null,Sa.createElement(Mp.e,{label:s},n?Sa.createElement(Mp.d,{className:"FriendMenuRoleCheckbox disabled",key:"role",onSelected:function(){},bInteractableItem:!0},Sa.createElement(Id.h,null),"Owner"):a))},si.c([yn.a],t.prototype,"OnToggle",null),t=si.c([up.observer],t)}(Sa.Component),Tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ShowFriendProfile=function(e){Ee(e,this.props.friend.GetCommunityProfileURL()),e.stopPropagation()},t.prototype.InviteFriend=function(){var e=this;wd.FriendStore.SendFriendInvite(this.props.friend).then(function(t){4==t?_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_AddToFriendsList"),Object(ua.b)("#Friend_InviteSent")):3==t?_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_AddToFriendsList"),Object(ua.b)("#Friend_MutualInviteSent",e.props.friend.display_name)):_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_AddToFriendsList"),Object(ua.b)("#Friend_InviteError",e.props.friend.display_name))})},t.prototype.AcceptIncomingInvite=function(){var e=this;wd.FriendStore.SendFriendInvite(this.props.friend).then(function(t){3==t?_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_AddToFriendsList"),Object(ua.b)("#Friend_MutualInviteSent",e.props.friend.display_name)):_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_AddToFriendsList"),Object(ua.b)("#Friend_InviteError",e.props.friend.display_name))})},t.prototype.IgnoreIncomingInvite=function(){var e=this;wd.FriendStore.RemoveFriend(this.props.friend).then(function(t){1==t?_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_IgnoreIncomingInvite"),Object(ua.b)("#Friend_IgnoreIncomingInvite_Success",e.props.friend.display_name)):_e(e.props.ownerWindow,Object(ua.b)("#Friend_Menu_IgnoreIncomingInvite"),Object(ua.b)("#Friend_IgnoreIncomingInvite_Error",e.props.friend.display_name))})},t.prototype.RemoveFriend=function(){var e=this,t=4==this.props.friend.efriendrelationship,i=Object(ua.b)(t?"#Friend_Menu_CancelInvitation":"#Friend_Menu_RemoveFromFriendsList"),n=Object(ua.b)(t?"#Friend_CancelInvitation_Confirm":"#Friend_RemoveFromFriendsList_Confirm",this.props.friend.display_name),r=Object(ua.b)(t?"#Button_Confirm":"#Friend_Menu_RemoveFromFriendsList"),o=Object(ua.b)(t?"#Friend_CancelInvitation_Error":"#Friend_RemoveFromFriendsList_Error");ge(this.props.ownerWindow,i,n,r,Object(ua.b)("#Button_Cancel"),!0).then(function(){wd.FriendStore.RemoveFriend(e.props.friend).then(function(t){3!=t&&6!=t||_e(e.props.ownerWindow,i,o)})}).catch(function(){})},t.prototype.BlockFriend=function(){var e=this;ge(this.props.ownerWindow,Object(ua.b)("#Friend_Menu_BlockAllCommunication"),Object(ua.b)("#Friend_Block_Confirm",this.props.friend.display_name),Object(ua.b)("#Friend_Menu_BlockAllCommunication")).then(function(){wd.FriendStore.BlockPlayer(e.props.friend)}).catch(function(){})},t.prototype.UnblockFriend=function(){var e=this;ge(this.props.ownerWindow,Object(ua.b)("#Friend_Menu_UnblockAllCommunication"),Object(ua.b)("#Friend_Unblock_Confirm",this.props.friend.display_name),Object(ua.b)("#Friend_Menu_UnblockAllCommunication")).then(function(){wd.FriendStore.BlockPlayer(e.props.friend,!0)}).catch(function(){})},t.prototype.InviteToGame=function(e){wd.FriendStore.InviteToGame(this.props.friend,e)},t.prototype.InviteToLobby=function(e,t){wd.FriendStore.InviteToLobby(this.props.friend,e,t)},t.prototype.InviteToWatch=function(){wd.FriendStore.InviteToWatch(this.props.friend)},t.prototype.InviteToVoice=function(e,t){It({invitee:this.props.friend,invitedto:e},null,this.props.ownerWindow)},t.prototype.render=function(){var e=this,t=this.props,i=t.context||{},n=[],r=[],o=t.friend,a=wd.FriendStore.FavoritesStore,s=wd.FriendStore.self==o,c="favorites"==i.chatContext,l=(c||"friendslist"==i.chatContext||i.chatContext,i.group);!l&&i.chat instanceof Xc&&(l=i.chat.GetGroup());var u,d,p=!1,m=wd.ChatStore.GetActiveVoiceChat(),h=void 0,g=!1;void 0==m||m instanceof ll||(g=!0,h=m);var f=o.is_friend,_=2==o.efriendrelationship,y=4==o.efriendrelationship,v=_||4==o.efriendrelationship,b=wd.FriendStore.self.persona.m_unGamePlayedAppID,C=o.persona.m_unGamePlayedAppID;if(i.chat&&(i.chat instanceof ll?(u=i.chat,u.BVoiceActive()&&(p=!0)):i.chat instanceof Xc&&(d=i.chat,d.BVoiceActive()&&(p=!0))),f||_||s||n.push(Sa.createElement("div",{className:"contextMenuLabel contextMenuNotAFriend",key:"header"},Object(ua.b)("#Friend_Menu_NotAFriendLabel"))),p&&!s&&n.push(Sa.createElement(kp,{friend:this.props.friend})),i.tab&&n.push(Sa.createElement(Mp.d,{key:"closetab",onSelected:function(){wd.UIStore.CloseTab(t.browserContext,i.tab)}},Object(ua.b)("#Chat_CloseTabAction"))),u||i.tab||_||y||s||o.is_blocked||n.push(Sa.createElement(Mp.d,{key:"chat",className:f?"":"notFriends",onSelected:function(){t.friend.OpenChatDialog(t.browserContext)}},Object(ua.b)("#Friend_Menu_SendMessage"))),!g||!o.persona.is_online||u||_||y||s||o.is_blocked||n.push(Sa.createElement(Mp.d,{key:"voicechat",className:"contextVoiceInvite",onSelected:function(){e.InviteToVoice(h,i)}},Sa.createElement(Id._3,null),Object(ua.b)("#Chat_Actions_InviteFriend_VoiceChat"))),n.push(Sa.createElement(Mp.d,{key:"viewprofile",onSelected:this.ShowFriendProfile},Object(ua.b)("#Friend_Menu_ViewProfile"))),l&&n.push(Sa.createElement(Np,{key:"moderationoptions",friend:o,bIsSelf:s,group:l,ownerWindow:t.ownerWindow})),!s){if(f){if(r.push(Sa.createElement(Mp.d,{key:"setnickname",onSelected:function(){ve(t.browserContext,t.friend,t.ownerWindow)}},Object(ua.b)(t.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),a.BIsFavorited({friend:o})?(c?n:r).push(Sa.createElement(Mp.d,{key:"quickaccess",onSelected:Le.bind(null,o)},Object(ua.b)("#Friend_Menu_RemoveFromQuickAccess"))):r.push(Sa.createElement(Mp.d,{key:"quickaccess",onSelected:Ne.bind(null,o)},Object(ua.b)("#Friend_Menu_AddToQuickAccess"))),r.push(Sa.createElement(Mp.d,{key:"managecategories",onSelected:function(){Me(t.browserContext,t.ownerWindow,t.friend)}},Object(ua.b)("#FriendGroup_Menu_Categorize"))),r.push(Sa.createElement(Mp.d,{key:"notifications",onSelected:function(){return ke(t.browserContext,t.friend,t.ownerWindow)}},Object(ua.b)("#Friend_Menu_Notifications"))),c||r.push(Sa.createElement(Mp.d,{key:"removefriend",onSelected:this.RemoveFriend},Object(ua.b)("#Friend_Menu_RemoveFromFriendsList"))),r.push(Sa.createElement(Rp,{key:"aliases",friend:o})),wd.FriendStore.self.persona.is_ingame&&wd.BroadcastStore.is_broadcast_capable&&n.push(Sa.createElement(Mp.d,{key:"invitetowatch",onSelected:function(){e.InviteToWatch()}},Object(ua.b)("#Friend_Menu_InviteToWatch"))),0!=b&&"0"!=wd.FriendStore.self.persona.m_game_lobby_id){var S=wd.AppInfoStore.GetAppInfo(b);n.push(Sa.createElement(Mp.d,{key:"lobbyinvite",onSelected:function(){e.InviteToLobby(b,wd.FriendStore.self.persona.m_game_lobby_id)}},Object(ua.b)("#Friend_Menu_InviteToLobby"),Sa.createElement("div",{className:"contextMenuSectionHeader"},Sa.createElement("div",{className:"contextMenuGameIcon"},Sa.createElement("img",{className:"GameIcon",src:S.icon_url})),Sa.createElement("div",{className:"contextMenuGameName"},S.name))))}else if(0!=b&&b!=C){var S=wd.AppInfoStore.GetAppInfo(b);n.push(Sa.createElement(Mp.d,{key:"gameinvite",onSelected:function(){e.InviteToGame(b)}},Object(ua.b)("#Friend_Menu_InviteToGame"),Sa.createElement("div",{className:"contextMenuSectionHeader"},Sa.createElement("div",{className:"contextMenuGameIcon"},Sa.createElement("img",{className:"GameIcon",src:S.icon_url})),Sa.createElement("div",{className:"contextMenuGameName"},S.name))))}n.push(Sa.createElement(Gp,{key:"trading",friend:o}))}else _?(n.push(Sa.createElement(Mp.d,{key:"acceptincominginvite",onSelected:this.AcceptIncomingInvite},Object(ua.b)("#Friend_Menu_AcceptIncomingInvite"))),n.push(Sa.createElement(Mp.d,{key:"ignoreincominginvite",onSelected:this.IgnoreIncomingInvite},Object(ua.b)("#Friend_Menu_IgnoreIncomingInvite"))),n.push(Sa.createElement(Rp,{key:"aliases",friend:o}))):y?n.push(Sa.createElement(Mp.d,{key:"remove",onSelected:this.RemoveFriend},Object(ua.b)("#Friend_Menu_CancelInvitation"))):n.push(Sa.createElement(Mp.d,{key:"invite",onSelected:this.InviteFriend},Object(ua.b)("#Friend_Menu_AddToFriendsList")));v&&n.push(Sa.createElement(Mp.d,{key:"setnickname",onSelected:function(){ve(t.browserContext,t.friend,t.ownerWindow)}},Object(ua.b)(t.friend.has_nickname?"#Friend_Menu_ChangeNickname":"#Friend_Menu_AddNickname"))),c&&!o.is_blocked||r.push(Sa.createElement(Mp.d,{key:"block",onSelected:o.is_blocked?this.UnblockFriend:this.BlockFriend},Object(ua.b)(o.is_blocked?"#Friend_Menu_UnblockAllCommunication":"#Friend_Menu_BlockAllCommunication")))}return n?Sa.createElement(Mp.c,{className:"friendsContextMenu"},n,1==r.length&&r,r.length>1&&Sa.createElement(Mp.e,{label:Object(ua.b)("#Friend_Menu_Manage")},r),!!o.persona.m_broadcastAccountId&&!s&&IsFeatureBroadcastEnabled()&&Sa.createElement(Ap,{friend:o,ownerWindow:t.ownerWindow,browserContext:t.browserContext}),!!o.persona.m_unGamePlayedAppID&&!s&&Sa.createElement(Lp,{unAppID:o.persona.m_unGamePlayedAppID,strGameName:o.persona.current_game_name,ulGameID:o.persona.m_gameid,friend:o})):null},si.c([yn.a],t.prototype,"ShowFriendProfile",null),si.c([yn.a],t.prototype,"InviteFriend",null),si.c([yn.a],t.prototype,"AcceptIncomingInvite",null),si.c([yn.a],t.prototype,"IgnoreIncomingInvite",null),si.c([yn.a],t.prototype,"RemoveFriend",null),si.c([yn.a],t.prototype,"BlockFriend",null),si.c([yn.a],t.prototype,"UnblockFriend",null),si.c([yn.a],t.prototype,"InviteToGame",null),si.c([yn.a],t.prototype,"InviteToLobby",null),si.c([yn.a],t.prototype,"InviteToWatch",null),si.c([yn.a],t.prototype,"InviteToVoice",null),t}(Sa.PureComponent),kp=function(e){function t(t){var i=e.call(this,t)||this,n=wd.VoiceStore.ConvertGainValueToSliderValue(wd.VoiceStore.GetPerUserGainLevel(i.props.friend.accountid),Xu.k_MaxPerUserGainMultiplier);return i.state={volumeNumber:n},i}return si.d(t,e),t.prototype.OnFriendVolumeChanged=function(e){wd.VoiceStore.SetPerUserGainLevel(this.props.friend.accountid,wd.VoiceStore.ConvertSliderToGainValue(e,Xu.k_MaxPerUserGainMultiplier)),this.setState({volumeNumber:e})},t.prototype.OnMutingClick=function(e){var t=wd.VoiceStore.GetPerUserMuting(this.props.friend.accountid);wd.VoiceStore.SetPerUserMuting(this.props.friend.accountid,!t),this.forceUpdate()},t.prototype.OnInlineVolumeClick=function(e){this.forceUpdate()},t.prototype.render=function(){var e=this.state.volumeNumber,t="VolumeIcon",i=wd.VoiceStore.GetPerUserMuting(this.props.friend.accountid);return e>65?t+=" HighestVolume":e>45?t+=" HighVolume":e<46&&e>24?t+=" MedVolume":e<25&&(t+=" LowVolume"),Sa.createElement(Mp.d,{key:"volume",onSelected:function(){},bInteractableItem:!0},Sa.createElement("div",{className:"InlineVolume"+(i?" Muted":""),onClick:this.OnInlineVolumeClick},Sa.createElement("button",{className:t,onClick:this.OnMutingClick},Sa.createElement(Id._4,null)),Sa.createElement(rp,{min:0,max:100,label:"",value:e,onChange:this.OnFriendVolumeChanged}),Sa.createElement("div",{className:"volumePercentage"},2*e,"%")))},si.c([yn.a],t.prototype,"OnFriendVolumeChanged",null),si.c([yn.a],t.prototype,"OnMutingClick",null),si.c([yn.a],t.prototype,"OnInlineVolumeClick",null),t=si.c([up.observer],t)}(Sa.Component),Dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnChange=function(e){this.props.group.SetMemberRoleState(this.props.friend.accountid,this.props.roleID,e)},t.prototype.render=function(){return Sa.createElement(Mp.d,{className:"FriendMenuRoleCheckbox"+(this.props.bEditable?"":" disabled"),key:"role",onSelected:function(){},bInteractableItem:!0},Sa.createElement(tp,{label:this.props.roleName,checked:this.props.bHasRole,onChange:this.OnChange,disabled:!this.props.bEditable}))},si.c([yn.a],t.prototype,"OnChange",null),t=si.c([up.observer],t)}(Sa.Component),Gp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.SendTradeOffer=function(e){var t="NewTradeOffer"+this.props.friend.accountid;$t(e).open(wd.EconomyStore.GetDefaultTradeOfferURLForFriend(this.props.friend.accountid),t,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.InviteToTrade=function(){wd.FriendStore.InviteToTrade(this.props.friend)},t.prototype.render=function(){var e=this.props.friend;return Sa.createElement(Mp.e,{label:Object(ua.b)("#FriendMenu_Trading")},Sa.createElement(Ge,{friend:e}),Sa.createElement(Mp.d,{onSelected:this.SendTradeOffer},Object(ua.b)("#FriendMenu_SendTradeOffer")),e.persona.is_online&&Sa.createElement(Mp.d,{onSelected:this.InviteToTrade},Object(ua.b)("#Friend_Menu_InviteToTrade")))},si.c([yn.a],t.prototype,"SendTradeOffer",null),si.c([yn.a],t.prototype,"InviteToTrade",null),t}(Sa.Component),Np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.BanFriend=function(){return si.b(this,void 0,void 0,function(){return si.e(this,function(e){switch(e.label){case 0:return[4,fe(this.props.ownerWindow,Object(ua.b)("#Friend_Ban"),Object(ua.b)("#Friend_Ban_Confirm",this.props.friend.display_name),Object(ua.b)("#Friend_Ban_Button"),Object(ua.b)("#Button_Cancel"),!0)];case 1:return e.sent()&&this.props.group.SetUserBanState(this.props.friend.accountid,!0),[2]}})})},t.prototype.OnKickFriend=function(){var e=this,t=this.props.group,i=xp,n=this.props.ownerWindow;new Promise(function(t,r){var o=ye(n,Object(ua.b)("#Friend_Kick",e.props.friend.display_name));me(Sa.createElement(zp,{OnOK:t,OnCancel:r,OnSet:function(e){i=e}}),n,"alertdialog",o)}).then(function(){return t.KickUser(e.props.friend.accountid,Math.floor(Date.now()/1e3+i))}).catch(function(){})},t.prototype.render=function(){var e=[],t=this.props.friend,i=this.props.group;return i.BHasMember(t.accountid)?(!this.props.bIsSelf&&i.BCanKick()&&e.push(Sa.createElement(Mp.d,{disabled:!i.BCanKickMember(t.accountid),key:"kick",onSelected:this.OnKickFriend},Object(ua.b)("#Friend_Menu_KickFromChatRoom"))),!this.props.bIsSelf&&i.BCanBan()&&e.push(Sa.createElement(Mp.d,{disabled:!i.BCanBanMember(t.accountid),key:"ban",onSelected:this.BanFriend},Object(ua.b)("#Friend_Menu_Ban"))),i&&e.push(Sa.createElement(Ep,{key:"editroles",friend:t,group:i,bEditable:i.BCanEditRoles()}))):e.push(Sa.createElement(Mp.d,{disabled:!0,key:"notmember",onSelected:null},Object(ua.b)("#Friend_Menu_HasLeftChat"))),e},si.c([yn.a],t.prototype,"BanFriend",null),si.c([yn.a],t.prototype,"OnKickFriend",null),t}(Sa.Component),Lp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bShowViewGameInfo:void 0,bIsSubscribedToApp:void 0},ru.b.BIsSubscribedApp(i.props.unAppID).then(function(e){i.setState({bShowViewGameInfo:ru.b.BClientSupportsMessage("ViewGameInfoForSteamID"),bIsSubscribedToApp:e})}),i}return si.d(t,e),t.prototype.ShowStorePage=function(e){Ee(e,ai.a.STORE_BASE_URL+"app/"+this.props.unAppID),e.stopPropagation()},t.prototype.ShowCommunityHub=function(e){Ee(e,ai.a.COMMUNITY_BASE_URL+"app/"+this.props.unAppID),e.stopPropagation()},t.prototype.LaunchGame=function(e){Ee(e,"steam://rungameid/"+(this.props.ulGameID||this.props.unAppID)),e.stopPropagation()},t.prototype.WatchGame=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.friend.steamid64,i=Xt(this,e);SteamClient.WebChat.OpenURLInClient(t,i.m_unPID)}else Ee(e,ai.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.friend.steamid64),e.stopPropagation()},t.prototype.JoinGame=function(e){var t=this,i=this.props.friend;i.persona.has_joinable_game_flag||i.persona.has_server_ip?ru.b.OpenJoinGameDialog(i.steamid64).then(function(n){n.success||t.JoinLobby(i,e)}).catch(function(){t.JoinLobby(i,e)}):this.JoinLobby(i,e)},t.prototype.ViewGameInfo=function(e){var t=this.props.friend;ru.b.ViewGameInfoForSteamID(t.steamid64)},t.prototype.JoinLobby=function(e,t){e.persona.is_in_valid_lobby?Ee(t,"steam://joinlobby/"+e.persona.m_gameid+"/"+e.persona.m_game_lobby_id+"/"+e.steamid64):this.LaunchGame(t)},t.prototype.ShowInSteam=function(e){Ee(e,"steam://store/"+this.props.unAppID),e.stopPropagation()},t.prototype.render=function(){if(!this.props.unAppID)return null;var e=[],t=void 0,i=this.props.friend,n=wd.AppInfoStore.GetAppInfo(this.props.unAppID);if(!n.is_valid)return null;if(n.is_initialized)if(this.props.bShowLargeHeader)t=Sa.createElement("div",{className:"contextMenuGameHeader"},Sa.createElement("img",{className:"GameHeader",src:n.logo_url}));else{var r=Sa.createElement("span",{className:"contextMenuGameName"},Object(ua.b)("#Friend_Menu_ViewGameStorePageGameName",this.props.strGameName||n.name));t=Sa.createElement("div",{className:"contextMenuSectionHeader"},Sa.createElement("div",{className:"contextMenuGameIcon"},Sa.createElement("img",{className:"GameIcon",src:n.icon_url})),r)}return void 0===this.state.bIsSubscribedToApp?e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"showinsteam",onSelected:this.ShowInSteam},Sa.createElement(Id.H,null),Object(ua.b)("#Friend_Menu_ShowInSteam"))):this.state.bIsSubscribedToApp&&(i&&(i.persona.is_in_joinable_game||i.persona.is_in_valid_lobby)&&e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"joingame",onSelected:this.JoinGame},Sa.createElement(Id.H,null),Object(ua.b)("#Friend_Menu_JoinFriendGame"))),e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions contextMenuPlayButton",key:"launchgame",onSelected:this.LaunchGame},Sa.createElement(Id.H,null),Object(ua.b)("#Friend_Menu_LaunchFriendGame")))),i&&e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions",key:"watchgame",onSelected:this.WatchGame},Object(ua.b)("#Friend_Menu_WatchFriendGame"))),i&&this.state.bShowViewGameInfo&&e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions",key:"viewgameinfo",onSelected:this.ViewGameInfo},Object(ua.b)("#Friend_Menu_ViewGameInfo"))),e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions",key:"viewstorepage",onSelected:this.ShowStorePage},Object(ua.b)("#Friend_Menu_ViewGameStorePage"))),e.push(Sa.createElement(Mp.d,{className:"contextMenuGameOptions",key:"viewcommunityhub",onSelected:this.ShowCommunityHub},Object(ua.b)("#Friend_Menu_ViewCommunityHub"))),Sa.createElement(Sa.Fragment,null,Sa.createElement(Mp.d,{className:"contextMenuGameTitle contextMenuUnselectable",onSelected:null},t),Sa.createElement("div",{className:"contextMenuSectionContent"},e))},si.c([yn.a],t.prototype,"ShowStorePage",null),si.c([yn.a],t.prototype,"ShowCommunityHub",null),si.c([yn.a],t.prototype,"LaunchGame",null),si.c([yn.a],t.prototype,"WatchGame",null),si.c([yn.a],t.prototype,"JoinGame",null),si.c([yn.a],t.prototype,"ViewGameInfo",null),si.c([yn.a],t.prototype,"ShowInSteam",null),t=si.c([up.observer],t)}(Sa.Component),Ap=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.WatchStream=function(){var e=this.props.browserContext,t=this.props.friend,i=t.persona.m_broadcastAccountId;wd.UIStore.ShowOrActivateBroadcast(e,i,!0).ShowWatchPromptDialog(t)},t.prototype.render=function(){var e=this.props.friend;return Sa.createElement(Sa.Fragment,null,Sa.createElement(Mp.d,{className:"contextMenuBroadcast contextMenuUnselectable",onSelected:null},Sa.createElement("div",{className:"contextMenuBroadcastTitle"},Object(ua.b)("#Broadcast_Watching")),Sa.createElement("div",{className:"contextMenuBroadcastSubtitle"},e.GetBroadcastDescription())),Sa.createElement("div",{className:"contextMenuSectionContent"},Sa.createElement(Mp.d,{className:"contextMenuGameOptions",onSelected:this.WatchStream},Object(ua.b)("#Broadcast_WatchStream"))))},si.c([yn.a],t.prototype,"WatchStream",null),t=si.c([up.observer],t)}(Sa.Component),Pp=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.SetUserOnline=function(){wd.FriendStore.SetUserPersonaState(1)},t.prototype.SetUserInvisible=function(){wd.FriendStore.SetUserPersonaState(7)},t.prototype.SetUserAway=function(){wd.FriendStore.SetUserPersonaState(3)},t.prototype.SetUserOffline=function(){wd.SignOutOfFriends(this.props.browserContext)},t.prototype.ToggleUserDND=function(){wd.FriendStore.SetUserDoNotDisturb(!wd.FriendStore.GetUserDoNotDisturb())},t.prototype.ShowUserProfile=function(e){Ee(e,wd.FriendStore.self.GetCommunityProfileURL()),e.stopPropagation()},t.prototype.EditProfile=function(e){Ee(e,wd.FriendStore.self.GetCommunityProfileURL()+"edit"),e.stopPropagation()},t.prototype.EditName=function(e){Te(this.props.browserContext,this.props.ownerWindow)},t.prototype.render=function(){var e=[],t=[],i=1==wd.FriendStore.self.persona.m_ePersonaState;e.push(Sa.createElement(Mp.b,{key:"state_online",bChecked:i,onSelected:this.SetUserOnline},Object(ua.b)("#PersonaStateOnline")));var n=3==wd.FriendStore.self.persona.m_ePersonaState;e.push(Sa.createElement(Mp.b,{key:"state_away",bChecked:n,onSelected:this.SetUserAway},Object(ua.b)("#PersonaStateAway")));var r=7==wd.FriendStore.self.persona.m_ePersonaState;if(e.push(Sa.createElement(Mp.b,{key:"state_invisible",bChecked:r,onSelected:this.SetUserInvisible},Object(ua.b)("#PersonaStateInvisible"),Sa.createElement("div",{className:"persona_menu_descriptor"},Object(ua.b)("#PersonaStateInvisibleDescriptor")))),ai.a.IN_CLIENT&&wd.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var o=0==wd.FriendStore.self.persona.m_ePersonaState;e.push(Sa.createElement(Mp.b,{key:"state_offline",bChecked:o,onSelected:this.SetUserOffline},Object(ua.b)("#PersonaStateOffline"),Sa.createElement("div",{className:"persona_menu_descriptor"},Object(ua.b)("#PersonaStateOfflineDescriptor"))))}if(wd.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")){var a=wd.FriendStore.GetUserDoNotDisturb();t.push(Sa.createElement(Mp.b,{key:"do_not_disturb",bChecked:!1,onSelected:this.ToggleUserDND},Sa.createElement(tp,{key:"dnd_checkbox",classname:"DNDCheckBox",checked:a,label:Object(ua.b)("#User_ToggleDoNotDisturb")}),Sa.createElement("div",{className:"persona_menu_dnd_descriptor"},Object(ua.b)("#PersonaStateDoNotDisturbDescriptor"))))}return t.push(Sa.createElement(Mp.d,{key:"editname",onSelected:this.EditName},Object(ua.b)("#Friend_Menu_ChangeMyName"))),t?Sa.createElement(Mp.c,{className:"friendsContextMenu currentUserContextMenu"},Sa.createElement("div",{className:"contextMenuSectionContent"},e),t):null},si.c([yn.a],t.prototype,"SetUserOnline",null),si.c([yn.a],t.prototype,"SetUserInvisible",null),si.c([yn.a],t.prototype,"SetUserAway",null),si.c([yn.a],t.prototype,"SetUserOffline",null),si.c([yn.a],t.prototype,"ToggleUserDND",null),si.c([yn.a],t.prototype,"ShowUserProfile",null),si.c([yn.a],t.prototype,"EditProfile",null),si.c([yn.a],t.prototype,"EditName",null),t}(Sa.PureComponent),xp=3600,zp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnCancel=function(){this.props.OnCancel(),this.props.closeModal()},t.prototype.OnOK=function(){this.props.OnOK(),this.props.closeModal()},t.prototype.OnDropDownChange=function(e,t){this.props.OnSet(e.data)},t.prototype.render=function(){var e=[{label:Object(ua.b)("#Friend_Kick_Hour"),data:xp},{label:Object(ua.b)("#Friend_Kick_Day"),data:86400},{label:Object(ua.b)("#Friend_Kick_Week"),data:604800}];return Sa.createElement(pe,{onEscKeypress:this.OnCancel},Sa.createElement(ne,{classNameContent:"KickUserDialog",onSubmit:this.OnOK,bCenterVertically:!0},Sa.createElement(Ud,null," ",Object(ua.b)("#Friend_Kick")," "),Sa.createElement(Hd,null,Sa.createElement(Wd,null,Object(ua.b)("#Friend_Kick_How_Long")),Sa.createElement(op,{strDefaultLabel:Object(ua.b)("#Friend_Kick_Hour"),rgOptions:e,onChange:this.OnDropDownChange,selectedOption:void 0})),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.OnCancel,strOKText:Object(ua.b)("#Friend_Kick_Button"),strCancelText:Object(ua.b)("#Button_Cancel")}))))},si.c([yn.a],t.prototype,"OnCancel",null),si.c([yn.a],t.prototype,"OnOK",null),si.c([yn.a],t.prototype,"OnDropDownChange",null),t}(Sa.Component),Up=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.componentDidMount=function(){var e=this.props.chat.lastChatLinkInfo;(!e||Date.now()>=e.rtExpires)&&this.GenerateLink(86400)},t.prototype.GenerateLink=function(e){this.props.chat.CreateInviteLink(e)},t.prototype.OnFocus=function(e){e.target.select()},t.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=Object(ua.b)("#Chat_Invite_Loading");return this.props.disabled&&(e=void 0,t=""),Sa.createElement(Sa.Fragment,null,Sa.createElement(Qd,{label:Object(ua.b)("#Chat_Invite_Linkheader"),className:"InviteFriendToChatDialog_LinkInput",type:"text",value:e?e.strInviteURL:t,readOnly:!0,bShowCopyAction:!!e,onFocus:this.OnFocus,onClick:this.OnFocus}),!this.props.disabled&&Sa.createElement(Vp,{onGenerate:this.GenerateLink,chat:this.props.chat}))},si.c([yn.a],t.prototype,"GenerateLink",null),si.c([yn.a],t.prototype,"OnFocus",null),t=si.c([up.observer],t)}(Sa.Component),Vp=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.OnDropDownChange=function(e,t){this.props.onGenerate(e.data),t.SetSelectedOption(void 0)},t.prototype.CreateExpiresText=function(e){return 0==e?Object(ua.b)("#InviteLink_ExpiresNever_Short"):e-wd.GetServerRTime32()>3600?Object(ua.b)("#InviteLink_ExpiresDay_Short"):Object(ua.b)("#InviteLink_ExpiresHour_Short")},t.prototype.render=function(){var e=this.props.chat.lastChatLinkInfo,t=[{label:Object(ua.b)("#InviteLink_ExpiresHour_Short"),data:3600},{label:Object(ua.b)("#InviteLink_ExpiresDay_Short"),data:86400},{label:Object(ua.b)("#InviteLink_ExpiresNever_Short"),data:0}];return Sa.createElement("div",{className:"expireLinkInContainer"},Sa.createElement(jd,null,Object(ua.b)("#InviteLink_ExpireDropDownLabel")),Sa.createElement(op,{strClassName:"inviteLinkDropDown",rgOptions:t,strDefaultLabel:e?this.CreateExpiresText(e.rtExpires):Sa.createElement("span",null," "),onChange:this.OnDropDownChange,selectedOption:void 0}))},si.c([yn.a],t.prototype,"OnDropDownChange",null),t=si.c([up.observer],t)}(Sa.Component),jp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bShowSubmit:t.vecInvitePlayers&&t.vecInvitePlayers.length>0,dropToInviteFriend:void 0,bHaveNonBetaFriendsSelected:!1},i.BuildMemberOfGroupSet(t),i}return si.d(t,e),t.prototype.componentWillReceiveProps=function(e){e.chatRoomGroup!=this.props.chatRoomGroup&&this.BuildMemberOfGroupSet(e),e.vecInvitePlayers&&e.vecInvitePlayers.length>0&&this.setState({bShowSubmit:!0})},t.prototype.BuildMemberOfGroupSet=function(e){var t=e.chatRoomGroup;this.m_setMembersOfGroup=t.memberList.GetCurrentMemberSet()},t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnSubmit=function(){if(this.m_friendPicker&&this.m_friendPicker.state.rgFriendsChosen.length)for(var e=0,t=this.m_friendPicker.state.rgFriendsChosen;e<t.length;e++){var i=t[e];this.props.chatRoomGroup.InviteFriend(i.accountid,this.props.chatRoom)}this.props.closeModal()},t.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e,this.OnFriendPickerChange()},t.prototype.OnFriendPickerChange=function(){var e=!1,t=!1;if(this.m_friendPicker){e=this.m_friendPicker.selectedFriendCount>0;for(var i=this,n=0,r=this.m_friendPicker.state.rgFriendsChosen;n<r.length;n++){var o=r[n];if("break"===function(e){if(!1===e.is_in_beta)return t=!0,"break";void 0===e.is_in_beta&&Object(_i.when)(function(){return void 0!==e.is_in_beta},i.OnFriendPickerChange)}(o))break}}var a=e;a==this.state.bShowSubmit&&t==this.state.bHaveNonBetaFriendsSelected||this.setState({bShowSubmit:a,bHaveNonBetaFriendsSelected:t})},t.prototype.OnDragEnter=function(e,t){if(AssertMsg(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var i=e;i.friend&&(this.setState({dropToInviteFriend:i.friend}),this.m_friendPicker&&this.m_friendPicker.SelectFriendSuggestion(i.friend))}return!0},t.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&(this.m_friendPicker&&this.m_friendPicker.RemoveFriendFromList(this.state.dropToInviteFriend),this.setState({dropToInviteFriend:void 0}))},t.prototype.OnDrop=function(e,t){if(AssertMsg(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var i=e;i.friend&&(this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),gy.DragDropManager.SetDropConsumed(),this.m_friendPicker&&this.m_friendPicker.SelectFriendSuggestion(i.friend))}},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.render=function(){var e=this,t=this.props.chatRoomGroup.GetDefaultChatRoom();this.props.chatRoom&&(t=this.props.chatRoom);var i=this.props.chatRoomGroup.name,n=null!=this.props.chatRoom,r=new Set([]),o=this.props.chatRoomGroup.BCanInvite();o?this.props.chatRoom||(r=this.m_setMembersOfGroup):this.props.chatRoom?wd.FriendStore.all_friends.forEach(function(t){e.props.chatRoomGroup.BHasMember(t.accountid)||r.add(t.accountid)}):AssertMsg(!1,"User should not be able to invite to the group");var a;return a=this.props.bIsDropInvite?Object(ua.b)("#Chat_InviteFriends_DropInvite_Pre"):o?Object(ua.b)("#Chat_InviteFriends"):Object(ua.b)("#Chat_InviteGroupMembers"),Sa.createElement(pe,{onEscKeypress:this.DismissDialog},Sa.createElement(ne,{classNameContent:"ChatRoomGroupInviteDialog"+(this.props.bIsDropInvite?" IsDropInvite":""),onSubmit:this.OnSubmit},Sa.createElement(Ud,null,n?Sa.createElement("div",null,Object(ua.b)("#Chat_Actions_InviteFriend_VoiceChat"),Sa.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},'"',this.props.chatRoom.name,'"')):Object(ua.b)("#Chat_Actions_InviteFriend"),Sa.createElement("div",{className:"displayRow"},Sa.createElement(Jm,{group:this.props.chatRoomGroup,small:!0}),Sa.createElement("div",{className:"DialogHeaderSubtitle DialogHighlight"},i))),Sa.createElement(Hd,null,!this.props.bIsDropInvite&&o&&Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"inviteLinkContainer"},Sa.createElement(Up,{chat:t,disabled:!1})),Sa.createElement("div",{className:"OrSeparator"},Sa.createElement("div",{className:"HBar"}),Sa.createElement("div",{className:"OrSeparatorLabel"},Object(ua.b)("#Chat_InviteFriends_OR_Separator")),Sa.createElement("div",{className:"HBar"}))),Sa.createElement(lp,si.a({className:""},this.GetDragDropProps()),Sa.createElement(Wd,{className:"CreateChat_NonBetaFriendsWarning"+(wd.IsInBeta()?"":" Released")+(this.state.bHaveNonBetaFriendsSelected?" Active":"")},Sa.createElement(Ve,null),Object(ua.b)(wd.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),Sa.createElement(_p,{ref:this.OnFriendPickerRef,label:a,eSort:1,onFriendSelected:this.OnFriendPickerChange,onFriendRemoved:this.OnFriendPickerChange,setExcludedFriends:r,rgSelectedFriends:this.props.vecInvitePlayers,bDropInvite:this.props.bIsDropInvite,chosenFriendComponent:Wp}))),Sa.createElement(Vd,null,Sa.createElement("div",{className:"DialogTwoColLayout _DialogColLayout"},Sa.createElement(re,{disabled:!this.state.bShowSubmit},Object(ua.b)("#Chat_Invite")),Sa.createElement(oe,{onClick:this.DismissDialog},Object(ua.b)("#Button_Close"))))))},si.c([yn.a],t.prototype,"DismissDialog",null),si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"OnFriendPickerRef",null),si.c([yn.a],t.prototype,"OnFriendPickerChange",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDrop",null),t}(Sa.PureComponent),Wp=Object(up.observer)(function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return Sa.createElement(Sa.Fragment,null,Sa.createElement(Bh,{friend:e.friend,context:null},Sa.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&Sa.createElement(Ve,null),Sa.createElement("span",null,e.friend.display_name),Sa.createElement(Id._6,null))))}),Hp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OpenChatWindow=function(e){this.props.group?wd.UIStore.ShowAndOrActivateChatRoomGroup(this.props.browserContext,this.props.group,!0):this.props.clan.OpenChatDialog(this.props.browserContext,!0)},t.prototype.ShowClanProfile=function(e){var t;if(this.props.clan.BIsOGG())t=ai.a.COMMUNITY_BASE_URL+"app/"+this.props.clan.GetOGGAppID();else{var i=this.props.clan.steamid;t=ai.a.COMMUNITY_BASE_URL+"gid/"+i.ConvertTo64BitString()}Ee(e,t),e.stopPropagation()},t.prototype.LeaveChatRoomGroup=function(e){tt(e.currentTarget.ownerDocument.defaultView,this.props.group)},t.prototype.render=function(){var e=this,t=[],i=this.props.group,n=this.props.clan,r=this.props.context||{},o=wd.FriendStore.FavoritesStore;r.tab?t.push(Sa.createElement(Mp.d,{key:"closetab",onSelected:function(){wd.UIStore.CloseTab(e.props.browserContext,r.tab)}},Object(ua.b)("#Chat_CloseTabAction"))):r.is_chat_window||t.push(Sa.createElement(Mp.d,{key:"opentab",onSelected:this.OpenChatWindow},Object(ua.b)("#Chat_Actions_OpenChat"))),n&&!n.BIsOGG()&&t.push(Sa.createElement(Mp.d,{key:"viewprofile",onSelected:this.ShowClanProfile},Object(ua.b)("#Friend_Menu_ViewProfile"))),t.push(Sa.createElement(Mp.d,{key:"leavechatroom",onSelected:this.LeaveChatRoomGroup},Object(ua.b)(n?"#Chat_Actions_LeaveChatRoom":"#Chat_Actions_LeaveChatRoomGroup")));var a=n?{clan:n}:{chat:i};return wd.FriendStore.FavoritesStore.BIsFavorited(a)?r.is_favorites&&t.push(Sa.createElement(Mp.d,{key:"quickaccess",onSelected:function(){o.RemoveFromFavorites(a)}},Object(ua.b)("#Friend_Menu_RemoveFromQuickAccess"))):t.push(Sa.createElement(Mp.d,{key:"quickaccess",onSelected:function(){o.AddToFavorites(a)}},Object(ua.b)("#Friend_Menu_AddToQuickAccess"))),n&&n.BIsOGG()&&t.push(Sa.createElement(Lp,{unAppID:n.GetOGGAppID(),strGameName:n.name})),Sa.createElement(Mp.c,{className:"chatRoomListItemContextMenu"},t)},si.c([yn.a],t.prototype,"OpenChatWindow",null),si.c([yn.a],t.prototype,"ShowClanProfile",null),si.c([yn.a],t.prototype,"LeaveChatRoomGroup",null),t}(Sa.Component),qp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ShowInviteDialog=function(){var e=this.props.group.GetChatRoom(this.props.roomID);ze(this.props.browserContext,this.props.ownerWindow,this.props.group,e)},t.prototype.SaveVoiceRoom=function(e){qe($t(e),this.props.group,this.props.roomID)},t.prototype.RemoveRoom=function(){var e=this;ge(this.props.ownerWindow,Object(ua.b)("#Chat_Actions_RemoveRoom"),Object(ua.b)("#Chat_Actions_RemoveRoom_Confirm"),Object(ua.b)("#Chat_Actions_RemoveRoom_Action")).then(function(){var t=e.props.group,i=e.props.roomID;t.DeleteChatRoom(i)}).catch(function(){})},t.prototype.ChangeRoomName=function(){this.props.onStartRoomRename(this.props.roomID)},t.BIsMenuEmpty=function(e,t,i){var n=e.GetDefaultChatID()==t,r=e.BIsTempVoiceChannel(t),o=e.BCanAdminChannel();return!(e.BIsVoiceChannel(t)||r&&o||i&&!n&&!r&&o||!n&&o)},t.prototype.render=function(){var e=[],t=this.props.group,i=this.props.roomID,n=t.GetDefaultChatID()==i,r=t.BIsTempVoiceChannel(i),o=t.BCanAdminChannel();return t.BCanInvite(),e.push(Sa.createElement(Mp.d,{key:"invitefriend",onSelected:this.ShowInviteDialog},Object(ua.b)("#Chat_Actions_InviteFriendtoVoice"))),r&&e.push(Sa.createElement(Mp.d,{key:"savechannel",className:o?"":"noPermission",onSelected:this.SaveVoiceRoom},!o&&Sa.createElement(Id.y,null),Object(ua.b)("#Chat_Actions_SaveChannel"))),this.props.onStartRoomRename&&!n&&!r&&o&&e.push(Sa.createElement(Mp.d,{key:"renameroom",onSelected:this.ChangeRoomName},Object(ua.b)("#Chat_Actions_ChangeRoomName"))),!n&&o&&e.push(Sa.createElement(Mp.d,{key:"removeroom",onSelected:this.RemoveRoom},Object(ua.b)("#Chat_Actions_RemoveRoom"))),e.length<1?(console.log("warning: empty context menu. Did someone not update BIsMenuEmpty?"),null):Sa.createElement(Mp.c,{className:"friendsContextMenu"},e)},si.c([yn.a],t.prototype,"ShowInviteDialog",null),si.c([yn.a],t.prototype,"SaveVoiceRoom",null),si.c([yn.a],t.prototype,"RemoveRoom",null),si.c([yn.a],t.prototype,"ChangeRoomName",null),t}(Sa.PureComponent),Kp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={strName:"",strError:void 0},i}return si.d(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strName:e.target.value})},t.prototype.HandleSubmit=function(e){e&&e.preventDefault();var t=this.state.strName;if(0==t.length)return void this.setState({strError:Object(ua.b)("#Chat_SaveVoiceRoom_Error_EmptyName")});this.props.group.RenameRoom(this.props.roomID,t),this.props.closeModal()},t.prototype.render=function(){return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"SaveVoiceRoomDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,Object(ua.b)("#Chat_SaveVoiceRoom")),Sa.createElement(Hd,null,this.state.strError&&Sa.createElement(Wd,{className:"nicknameError"},this.state.strError),Sa.createElement(Wd,null,Object(ua.b)("#Chat_SaveVoiceRoom_Description")),Sa.createElement(Qd,{type:"text",label:Object(ua.b)("#Chat_SaveVoiceRoom_Name"),className:"nicknameInput",value:this.state.strName,onChange:this.HandleTextEntry,autoFocus:!0})),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"HandleTextEntry",null),si.c([yn.a],t.prototype,"HandleSubmit",null),t=si.c([up.observer],t)}(Sa.Component),Jp=i("UVf0"),Yp=function(e){function t(t){var i=e.call(this,t)||this;return i.state={ulSelectedGroupID:""},i}return si.d(t,e),t.prototype.BindDiv=function(e){this.m_elDiv=e},Object.defineProperty(t.prototype,"div",{get:function(){return this.m_elDiv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recommendedHeight",{get:function(){return this.m_elDiv.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumHeight",{get:function(){return this.recommendedHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumHeight",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.OnGroupSelected=function(e){e==this.state.ulSelectedGroupID?this.setState({ulSelectedGroupID:""}):this.setState({ulSelectedGroupID:e})},t.prototype.render=function(){var e=this,t=this.props.chats.currentChatRoomGroups.sort(function(e,t){return t.time_last_activity-e.time_last_activity});return Sa.createElement("div",{className:"ChatRoomList CompactFriendsList",ref:this.BindDiv},0==t.length&&Sa.createElement("div",{className:"ChatRoomList_Empty"},Object(ua.b)("#Chat_ChatRoomList_Empty"),Sa.createElement("br",null),Sa.createElement("br",null),Object(ua.d)("#Chat_ChatRoomList_Empty_How",Sa.createElement(we,{href:ai.a.COMMUNITY_BASE_URL+"my/groups/"},Object(ua.b)("#Chat_ChatRoomList_Empty_HowLink")))),t.map(function(t){return Sa.createElement(Xp,{key:t.GetGroupID(),group:t,bExpanded:!1,onSelect:e.OnGroupSelected})}),Sa.createElement("div",{className:"disconnectBlocker"}))},si.c([yn.a],t.prototype,"BindDiv",null),si.c([yn.a],t.prototype,"OnGroupSelected",null),t=si.c([up.observer],t)}(Sa.Component),Xp=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bAcceptDrag=!1,i.state={friendDrag:void 0,bStateExpanded:!1,bNonGroupHovered:!1,broadcastInfo:t.group.watching_broadcast_steamid&&Hl.StartInfo(t.group.watching_broadcast_steamid.ConvertTo64BitString())},i}return si.d(t,e),t.prototype.GetDragDropProps=function(e){void 0===e&&(e=!0);var t={};return e&&(t.onDragEnter=this.OnDragEnter,t.onDragOver=this.OnDragOver,t.onDragLeave=this.OnDragLeave,t.onDrop=this.OnDrop),t.draggable=!0,t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t},t.prototype.OnDragStart=function(e){var t=this.props.group;if(t.BIsClanChatRoom()){var i=wd.FriendStore.ClanStore.GetClan(t.GetClanID());gy.DragDropManager.StartDrag({type:"clan",clan:i})}else gy.DragDropManager.StartDrag({type:"chatroomgroup",group:t})},t.prototype.componentWillUnmount=function(){this.state.broadcastInfo&&Hl.StopInfo(this.state.broadcastInfo)},t.prototype.OnDragEnd=function(e){gy.DragDropManager.EndDrag()},t.prototype.OnDragEnter=function(e){var t=gy.DragDropManager.GetDragData();if(t&&"friend"==t.type){var i=t,n=i.friend;this.m_bAcceptDrag=!0,e.preventDefault(),this.setState({friendDrag:n})}else this.m_bAcceptDrag=!1;e&&(e.preventDefault(),this.m_bAcceptDrag&&e.stopPropagation())},t.prototype.OnDragOver=function(e){this.m_bAcceptDrag&&(e.preventDefault(),e.stopPropagation())},t.prototype.OnDragLeave=function(e){Object(Ad.c)(e)&&(this.m_bAcceptDrag=!1,this.state.friendDrag&&this.setState({friendDrag:void 0}))},t.prototype.OnDrop=function(e){var t=gy.DragDropManager.GetDragData();if(t&&"friend"==t.type){e.preventDefault(),e.stopPropagation();var i=this.props.group.memberList,n=i.member_list.slice(),r=t;if(void 0!=r.friend&&-1!=n.indexOf(r.friend))return;gy.DragDropManager.SetDropConsumed(),this.props.group.InviteFriend(r.friend.accountid),this.setState({friendDrag:void 0})}},t.prototype.OnClick=function(e){wd.UIStore.ShowAndOrActivateChatRoomGroup(Xt(this),this.props.group,!0)},t.prototype.OnToggleSelected=function(e){this.setState({bStateExpanded:!this.state.bStateExpanded}),e.stopPropagation()},t.prototype.OnOpenGroup=function(e){wd.UIStore.ShowAndOrActivateChatRoomGroup(Xt(this),this.props.group,!0),e.stopPropagation()},t.prototype.OnContextMenu=function(e){je(e,this.props.group)},t.prototype.OnMouseEnterNonTitle=function(){this.setState({bNonGroupHovered:!0})},t.prototype.OnMouseLeaveNonTitle=function(){this.setState({bNonGroupHovered:!1})},t.prototype.render=function(){var e=this.props.group,t=this.state.bStateExpanded,i=null!==e.watching_broadcast_steamid,n=i&&new hi.a(e.watching_broadcast_steamid),r=i&&this.state.broadcastInfo?this.state.broadcastInfo.m_strTitle||this.state.broadcastInfo.m_strAppTitle||Object(ua.b)("#PersonaStateWatchingBroadcast_Player",wd.FriendStore.GetPlayer(n.GetAccountID()).display_name):void 0,o=["ChatRoomListGroupItem"],a=this.props.group.hasVoiceRoom;return a||o.push("NoChannels"),t&&o.push("ShowAllChannels"),this.state.bNonGroupHovered&&o.push("NonGroupHovered"),i&&o.push("HasLinkedBroadcast"),Sa.createElement("div",si.a({className:o.join(" ")},this.GetDragDropProps(!0)),Sa.createElement("div",{className:"ChatRoomListGroupItem_header",onClick:this.OnClick,onContextMenu:this.OnContextMenu},Sa.createElement(Jm,{group:e,small:!0}),i&&Sa.createElement("div",{className:"steamTVSubtitle"},Sa.createElement(Id.U,null),": ",r," "),Sa.createElement("div",{className:"groupNameStatusContainer"},Sa.createElement("div",{className:"displayRow"},Sa.createElement("div",{className:"chatRoomName"},this.props.group.name),Sa.createElement("div",{className:"ContextMenuButton",onClick:this.OnContextMenu,onMouseEnter:this.OnMouseEnterNonTitle,onMouseLeave:this.OnMouseLeaveNonTitle},Sa.createElement(Id.l,null))),!t&&a&&Sa.createElement($p,{group:e})),Sa.createElement(Zp,{group:e}),a&&Sa.createElement("div",{onMouseEnter:this.OnMouseEnterNonTitle,onMouseLeave:this.OnMouseLeaveNonTitle},Sa.createElement(Ke,{expanded:t,onClick:this.OnToggleSelected}))),a&&Sa.createElement("div",{className:"detailsView"},Sa.createElement("div",{className:"ChatRoomListGroupItemChatRooms"},Sa.createElement(Qp,{group:e,expanded:t}))))},si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDrop",null),si.c([yn.a],t.prototype,"OnClick",null),si.c([yn.a],t.prototype,"OnToggleSelected",null),si.c([yn.a],t.prototype,"OnOpenGroup",null),si.c([yn.a],t.prototype,"OnContextMenu",null),si.c([yn.a],t.prototype,"OnMouseEnterNonTitle",null),si.c([yn.a],t.prototype,"OnMouseLeaveNonTitle",null),t=si.c([up.observer],t)}(Sa.Component),Zp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.group,t=this.props.chat;if(e&&!e.HasUnreadChatMessage||t&&!t.has_any_unread_messages)return null;var i=(this.props.className||"")+" ChatUnreadMessageIndicator";return(e&&e.HasUnreadMention||t&&t.has_unread_mention)&&(i+=" UnreadMention"),Sa.createElement("div",{className:i},Sa.createElement("div",{className:"chatUnreadCircle"},"@"))},t=si.c([up.observer],t)}(Sa.Component),Qp=Object(up.observer)(function(e){for(var t=[],i=0,n=e.group.voiceRoomList;i<n.length;i++){var r=n[i];(e.expanded||r.voice_active_contains_self)&&t.push(r)}var o=null;return t&&(o=t.map(function(e){return Sa.createElement(Bd,{classNames:"heightcollapseandfade-anim",timeout:300,key:e.unique_id},Sa.createElement(mm,{key:e.unique_id,chat:e,bRenameActive:!1,context:"ChatRoomList",onSelect:e.StartVoiceChat}))})),Sa.createElement(Jp.TransitionGroup,null,o)}),$p=Object(up.observer)(function(e){for(var t=[],i=0,n=e.group.voiceRoomList;i<n.length;i++){var r=n[i];if(!r.voice_active_contains_self){var o=r.voice_active_member_list;if(0!=o.member_count){var a=o.member_list.filter(function(e){return e.is_friend});0!=a.length&&(a=o.member_list.slice(),a.sort(Nc.FriendSortByFriendOrNotComparator),t.push({ulRoomID:r.unique_id,rgFriends:a}))}}}return t&&0!=t.length?Sa.createElement("div",{className:"membersInVoice"},Sa.createElement("div",{className:"voiceChannelIcon"},Sa.createElement(Id._3,null)),t.map(function(e){return Sa.createElement(em,{key:e.ulRoomID,friendsInRoom:e})})):null}),em=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.friendsInRoom;return Sa.createElement("span",{className:"voiceChatGroup"},e.rgFriends.map(function(e){return Sa.createElement(Bh,{key:e.accountid,friend:e,context:{},disableContextMenu:!1},Sa.createElement("img",{className:"voiceFriendAvatar"+(e.is_friend?"":" isNotFriend"),src:e.persona.avatar_url,draggable:!1}))}))},t=si.c([up.observer],t)}(Sa.Component),tm=i("nNuQ"),im=function(){function e(){this.m_vecObjects=[],this.OnUnload=this.OnUnload.bind(this),Object({NODE_ENV:"production",STEAM_BUILD:"buildbot",VALVE_BUILD:"false"}).MOBILE_BUILD||window.addEventListener("unload",this.OnUnload)}return e.prototype.OnUnload=function(){for(var e=0,t=this.m_vecObjects;e<t.length;e++)t[e].DeleteObserver();this.m_vecObjects=[]},e.prototype.CreateObserver=function(e,t){var i=new nm(e,t);return this.m_vecObjects.push(i),i},e.prototype.DeleteObserver=function(e){if(e){var t=e,i=this.m_vecObjects.indexOf(t);i>=0&&(t.DeleteObserver(),this.m_vecObjects.splice(i,1))}},e}(),nm=function(){function e(e,t){this.m_resizeObserver=t?new t.ResizeObserver(e):new ResizeObserver(e)}return e.prototype.DeleteObserver=function(){this.m_resizeObserver&&(this.m_resizeObserver.disconnect(),delete this.m_resizeObserver)},e.prototype.observe=function(e){this.m_resizeObserver&&this.m_resizeObserver.observe(e)},e.prototype.unobserve=function(e){this.m_resizeObserver&&this.m_resizeObserver.unobserve(e)},e.prototype.disconnect=function(){this.m_resizeObserver&&this.m_resizeObserver.disconnect()},e}(),rm=new im,om=function(e){function t(t){var i=e.call(this,t)||this;return i.m_elContainer=null,i.m_resizeObserver=null,i.state={nWidth:0,nHeight:0},i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_resizeObserver&&rm.DeleteObserver(this.m_resizeObserver)},t.prototype.BindContainerRef=function(e){this.m_resizeObserver&&(this.m_resizeObserver.disconnect(),this.m_resizeObserver=null),this.m_elContainer=e,this.m_elContainer&&(this.m_resizeObserver=rm.CreateObserver(this.OnResize,Object(Ad.k)(this.m_elContainer)),this.m_resizeObserver.observe(this.m_elContainer),this.UpdateDimensions(this.m_elContainer.clientWidth,this.m_elContainer.clientHeight))},t.prototype.UpdateDimensions=function(e,t){this.state.nWidth==e&&this.state.nHeight==t||this.setState({nWidth:e,nHeight:t})},t.prototype.OnResize=function(e,t){var i=0,n=0;if(e.length>0){var r=e[0].contentRect;i=r.width,n=r.height}this.UpdateDimensions(i,n)},t.prototype.render=function(){var e={position:"absolute",top:0,right:0,bottom:0,left:0},t={width:this.state.nWidth,height:this.state.nHeight},i=this.props.children(t),n=this.props.className;return Sa.createElement("div",{className:n,style:e,ref:this.BindContainerRef},i)},si.c([yn.a],t.prototype,"BindContainerRef",null),si.c([yn.a],t.prototype,"OnResize",null),t}(Sa.Component),am=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bCollapsed:!1},i}return si.d(t,e),t.prototype.OnRoomsContextMenu=function(e){var t=this;if(this.props.groupView.GetGroup().BCanAdminChannel()){var i=e.currentTarget.ownerDocument.defaultView;Object(Rd.a)(Sa.createElement(Mp.c,null,Sa.createElement(Mp.d,{onSelected:function(){t.CreateTextChannel(i)}},Object(ua.b)("#GroupSettings_Channels_CreateText")),Sa.createElement(Mp.d,{onSelected:function(){t.CreateVoiceChannel(i)}},Object(ua.b)("#GroupSettings_Channels_CreateVoice"))),e)}},t.prototype.CreateTextChannel=function(e){me(Sa.createElement(lm,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!0}),e)},t.prototype.CreateVoiceChannel=function(e){me(Sa.createElement(lm,{ownerWin:e,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!0}),e)},t.prototype.render=function(){var e=this.props.groupView.GetGroup(),t=e.GetDefaultChatRoom(),i=e.IsNamedGroupChat(),n=!1,r=!1,o="chatRoomGroupNavColumn",a=this.props.groupView.IsVoiceActive(),s=this.props.groupView.isChannelListCollapsed;return e.voiceRoomList.length<1&&!i&&(n=!0,o+=" defaultChatOnly"),t&&0!=t.voice_active_member_list.member_count||!(e.voiceRoomList.length<1)||a||(r=!0,o+=" noActiveVoiceChannels"),s&&(o+=" chatRoomGroupNavCollapsed"),this.props.inactive||r&&n?Sa.createElement("div",{className:o}):Sa.createElement("div",{className:o},Sa.createElement("div",{className:"chatRoomChannelGroups",onContextMenu:this.OnRoomsContextMenu},i&&Sa.createElement(um,{groupView:this.props.groupView}),(!r||!n)&&Sa.createElement(pm,{groupView:this.props.groupView})),Sa.createElement("div",{className:"disconnectBlocker"}))},si.c([yn.a],t.prototype,"OnRoomsContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),sm=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.GetMembersMatchingSearch=function(e){var t=this.props.groupView.GetGroup(),i=Je(t.memberList.member_list,e);return i.sort(Nc.DefaultFriendSortComparator),i},t.prototype.OnMemberListToggleViewClick=function(e){this.props.groupView.SetMemberListCollapsed(this.props.groupView.isMemberListExpanded)},t.prototype.OnSearchInput=function(e){this.props.groupView.SetMemberSearchEnabled(e.currentTarget.value)},t.prototype.OnSearchSubmit=function(e){e.preventDefault();var t=this.props.groupView,i=t.normalizedMemberSearch;if(i&&i.length){var n=this.GetMembersMatchingSearch(i);n.length&&n[0].OpenChatDialog(Xt(this,e))}t.ClearMemberSearch()},t.prototype.OnSearchKeyDown=function(e){27==e.keyCode&&(e.preventDefault(),e.currentTarget.blur(),this.props.groupView.ClearMemberSearch())},t.prototype.OnClearSearch=function(){this.props.groupView.ClearMemberSearch()},t.prototype.OnSearchFocus=function(){this.props.groupView.SetMemberSearchEnabled()},t.prototype.OnSearchBlur=function(){0==this.props.groupView.GetMemberSearch().length&&this.props.groupView.ClearMemberSearch()},t.prototype.render=function(){var e=this.props.groupView,t=e.isMemberListExpanded,i=e.GetMemberSearch(),n="MemberListColumn",r=Object(ua.b)("#Tooltip_MemberCollapse");t||(n+=" MemberListViewCompact",r=Object(ua.b)("#Tooltip_MemberExpand"));var o=e.IsMemberSearchActive(),a="MemberListOptionsContainer";return o&&(a+=" SearchActive"),Sa.createElement("div",{className:n},Sa.createElement("div",{className:a},Sa.createElement("div",{className:"MemberListOption ToggleMemberListView"+(i.length>0?" SearchActive":""),onClick:this.OnMemberListToggleViewClick,title:r},Sa.createElement(Id.k,null)),Sa.createElement("form",{className:"socialInputContainer",name:"friendSearchForm",onSubmit:this.OnSearchSubmit},Sa.createElement("div",{className:"inputContainer no-drag"},Sa.createElement("input",{id:"memberListSearchInputID",className:"friendSearchInput",type:"text",name:"memberlistSearch",placeholder:Object(ua.b)("#SearchFriends"),value:i,onInput:this.OnSearchInput,onKeyDown:this.OnSearchKeyDown,onFocus:this.OnSearchFocus,onBlur:this.OnSearchBlur,autoComplete:"off"}),Sa.createElement("div",{className:"friendSearchClear",onClick:this.OnClearSearch},Sa.createElement(Id._6,null))))),Sa.createElement(cm,{groupView:this.props.groupView,inactive:this.props.inactive}),Sa.createElement("div",{className:"disconnectBlocker"}))},si.c([yn.a],t.prototype,"OnMemberListToggleViewClick",null),si.c([yn.a],t.prototype,"OnSearchInput",null),si.c([yn.a],t.prototype,"OnSearchSubmit",null),si.c([yn.a],t.prototype,"OnSearchKeyDown",null),si.c([yn.a],t.prototype,"OnClearSearch",null),si.c([yn.a],t.prototype,"OnSearchFocus",null),si.c([yn.a],t.prototype,"OnSearchBlur",null),t=si.c([up.observer],t)}(Sa.Component),cm=function(e){function t(t){var i=e.call(this,t)||this;return i.m_refList=Sa.createRef(),i.m_disposeGetMemberList=wd.GroupMemberStore.RegisterForGroupMemberList(i.OnMemberListChanged,i.props.groupView.GetGroup().GetGroupID()),i.state={nBucketChanges:1},i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_disposeGetMemberList.unregister()},t.prototype.GetFriendRenderContext=function(){var e=this.props.groupView.GetGroup();return this.m_renderContext&&this.m_renderContext.group==e||(this.m_renderContext={group:e,chatContext:"chatmemberlist"}),this.m_renderContext},t.prototype.OnMemberListChanged=function(){var e=this.state.nBucketChanges+1;this.setState({nBucketChanges:e})},t.prototype.BuildFilteredBuckets=function(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],a=si.a({},o);a.rgMembers=Je(o.rgMembers,t),i.push(a)}return i},t.prototype.GetListGroupForIndex=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];if(t<0)break;var o=r.rgMembers.length+1;if(t<o)return{index:t,bucket:r};t-=o}return null},t.prototype.GetRowHeight=function(e){var t=this.m_rgLastRenderBuckets,i=this.GetListGroupForIndex(t,e.index);return i?0==i.index?28:34:0},t.prototype.RenderRow=function(e){var t=e.index,i=(e.isScrolling,e.key,e.isVisible,e.style),n=this.m_rgLastRenderBuckets,r=this.GetListGroupForIndex(n,t);if(!r)return null;t=r.index;var o=r.bucket;if(0==t)return Sa.createElement("div",{key:"group_"+r.bucket.strName,style:i},Sa.createElement(gm,{collapsed:!1,memberCount:o.rgMembers.length,name:o.strName}));t--;var a=o.rgMembers[t];return Sa.createElement("div",{key:a.accountid,style:i},Sa.createElement(fm,{friend:a,groupView:this.props.groupView,context:this.GetFriendRenderContext()}))},t.prototype.render=function(){var e=this;if(this.props.inactive)return null;var t=wd.GroupMemberStore.GetGroupMemberList(this.props.groupView.GetGroup().GetGroupID()),i=this.state.nBucketChanges;if(0==t.length)return null;var n=this.props.groupView,r=n.normalizedMemberSearch;r.length>0&&(t=this.BuildFilteredBuckets(t,r)),this.m_rgLastRenderBuckets=t;for(var o=0,a=0,s=t;a<s.length;a++){var c=s[a];o+=c.rgMembers.length+1}var l,u=function(t){return Sa.createElement(tm.List,{ref:e.m_refList,className:"ChatRoomMemberScrollList_List",width:t.width,height:t.height,rowCount:o,rowHeight:e.GetRowHeight,rowRenderer:e.RenderRow,bucketChanges:i})};return l=ai.a.IN_CLIENT?Sa.createElement(om,{className:"friendGroup"},u):Sa.createElement(tm.AutoSizer,{className:"friendGroup"},u),Sa.createElement("div",{className:"chatRoomMembers CompactFriendsList",style:{position:"relative"}},l)},si.c([yn.a],t.prototype,"OnMemberListChanged",null),si.c([yn.a],t.prototype,"GetRowHeight",null),si.c([yn.a],t.prototype,"RenderRow",null),t=si.c([up.observer],t)}(Sa.Component),lm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnSubmit=function(){var e=this,t=this.m_refInput&&this.m_refInput.value;t&&this.props.groupView.GetGroup().CreateChatRoom(t,this.props.bVoiceChannel).then(function(t){t&&(e.props.closeModal(),e.props.bJoinChannel&&(e.props.bVoiceChannel?t.StartVoiceChat():e.props.groupView.SelectChat(t.GetRoomID())))}).catch(function(t){_e(e.props.ownerWin,Object(ua.b)("#Generic_Error"),Object(ua.b)("#Chat_CreateChatRoom_GenericError")),e.props.closeModal()})},t.prototype.render=function(){var e=this;return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},Sa.createElement(Ud,null,Object(ua.b)(this.props.bVoiceChannel?"#GroupSettings_Channels_CreateVoice":"#GroupSettings_Channels_CreateText")),Sa.createElement(Hd,null,Sa.createElement(Qd,{ref:function(t){e.m_refInput=t},autoFocus:!0,label:Object(ua.b)("#Chat_SaveVoiceRoom_Name")})),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal}))))},si.c([yn.a],t.prototype,"OnSubmit",null),t}(Sa.Component),um=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnCreateNewTextChannel=function(e){var t=$t(e);this.props.groupView.GetGroup().BCanAdminChannel()&&Ye(t,this.props.groupView,!1)},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.ToggleCollapseExpand=function(){var e=this.props.groupView;e.SetChannelListCollapsed(!e.isChannelListCollapsed)},t.prototype.render=function(){var e=this,t=this.props.groupView,i=t.GetGroup().textRoomList,n=t.GetGroup().BCanAdminChannel(),r=t.isChannelListCollapsed;return Sa.createElement("div",{className:"chatRoomTextChannelsGroup"},Sa.createElement("div",{className:"ChannelTypeTitle",title:Object(ua.b)("#Tooltip_TextChannel")},Sa.createElement("div",{className:"ChannelTypeLabel"+(n?"":" NoPermission"),onClick:this.OnCreateNewTextChannel,title:n?Object(ua.b)("#Tooltip_TextChannelCreate"):Object(ua.b)("#Tooltip_NoPermissionChannelCreate")},n?Object(ua.b)("#Chat_AddTextChat"):Object(ua.b)("#Chat_CreateTextChannel_DefaultName")),Sa.createElement("div",{className:"chatRoomGroupNavCollapseExpand",title:r?"Expand List":"Minimize List",onClick:this.ToggleCollapseExpand},Sa.createElement(Id.k,null))),i.map(function(i){return Sa.createElement(dm,{key:i.unique_id,chat:i,bRenameActive:t.IsRoomRenameActive(i.GetRoomID()),bActiveChat:i==t.GetActiveChatView().chat,bDefaultRoom:i==t.GetGroup().GetDefaultChatRoom(),onStartRename:e.OnStartChannelRename,onRename:e.OnChannelRename,onEndRename:e.OnEndChannelRename})}))},si.c([yn.a],t.prototype,"OnCreateNewTextChannel",null),si.c([yn.a],t.prototype,"OnStartChannelRename",null),si.c([yn.a],t.prototype,"OnChannelRename",null),si.c([yn.a],t.prototype,"OnEndChannelRename",null),si.c([yn.a],t.prototype,"ToggleCollapseExpand",null),t=si.c([up.observer],t)}(Sa.Component),dm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ToggleTextChat=function(){if(!this.props.bRenameActive){var e=wd.UIStore.IsChatRoomGroupActive(Xt(this),this.props.chat.GetGroup()),t=wd.UIStore.ShowAndOrActivateChatRoomGroup(Xt(this),this.props.chat.GetGroup(),!0),i=t.GetPopoverChatView();e&&i&&i.chat&&i.chat==this.props.chat?t.ClosePopoverChat():t.SelectChat(this.props.chat.GetRoomID())}},t.prototype.OnContextMenu=function(e){this.props.bRenameActive||He(Xt(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename)},t.prototype.render=function(){var e=this.props.chat,t="chatRoomTextChannel";this.props.bActiveChat&&(t+=" ActiveTextChannel");var i="chatRoomTextChannelName";this.props.bDefaultRoom&&(i+=" IsCommonsChannel");var n=this.props.bRenameActive&&!this.props.chat.GetVoiceAllowed();return Sa.createElement("div",{className:t,onClick:this.ToggleTextChat,onContextMenu:this.OnContextMenu},Sa.createElement(Zp,{chat:e}),Sa.createElement("div",{className:"chatRoomTextChannelIcon"},Sa.createElement(Id.X,null)),!n&&Sa.createElement("div",{className:i},e.name),!this.props.bDefaultRoom&&n&&Sa.createElement(hm,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}))},si.c([yn.a],t.prototype,"ToggleTextChat",null),si.c([yn.a],t.prototype,"OnContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),pm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.CreateVoiceRoom=function(){this.props.groupView.GetGroup().CreateAndJoinTempVoiceRoom()},t.prototype.OnVoiceRoomSelected=function(e){this.props.groupView.GetRenameRoomID()!=e.GetRoomID()&&(wd.ChatStore.VoiceChat.GetActiveVoiceChatID()==e.GetRoomID()||(this.props.groupView.ClosePopoverChat(),e.StartVoiceChat()))},t.prototype.OnStartChannelRename=function(e){this.props.groupView.StartRoomRename(e)},t.prototype.OnChannelRename=function(e,t){this.props.groupView.GetGroup().RenameRoom(e,t)},t.prototype.OnEndChannelRename=function(){this.props.groupView.EndRoomRename()},t.prototype.render=function(){var e=this,t=this.props.groupView,i=t.GetGroup().voiceRoomList;return Sa.createElement("div",{className:"chatRoomVoiceChannelsGroup"},Sa.createElement("div",{className:"ChannelTypeTitle",title:Object(ua.b)("#Tooltip_VoiceChannelCreate"),onClick:this.CreateVoiceRoom},Sa.createElement("div",{className:"ChannelTypeLabel"},Object(ua.b)("#Chat_AddVoiceChat")),Sa.createElement("div",{className:"ChatRoomAddRoomBtn",title:Object(ua.b)("#Tooltip_VoiceChannelCreate")},Sa.createElement(Id.I,null))),i.map(function(i){return Sa.createElement(mm,{key:i.unique_id,context:"VoiceRoomsGroup",chat:i,bRenameActive:t.GetRenameRoomID()==i.GetRoomID(),onSelect:function(){e.OnVoiceRoomSelected(i)},onStartRename:e.OnStartChannelRename,onRename:e.OnChannelRename,onEndRename:e.OnEndChannelRename})}))},si.c([yn.a],t.prototype,"CreateVoiceRoom",null),si.c([yn.a],t.prototype,"OnVoiceRoomSelected",null),si.c([yn.a],t.prototype,"OnStartChannelRename",null),si.c([yn.a],t.prototype,"OnChannelRename",null),si.c([yn.a],t.prototype,"OnEndChannelRename",null),t=si.c([up.observer],t)}(Sa.Component),mm=function(e){function t(t){var i=e.call(this,t)||this;return i.state={dropToInviteFriend:void 0,bDropConfirmationNotice:!1},i}return si.d(t,e),t.prototype.OnContextMenu=function(e){this.props.bRenameActive||He(Xt(this,e),this.props.chat.GetGroup(),this.props.chat.GetRoomID(),e,this.props.onStartRename),e.preventDefault(),e.stopPropagation()},t.prototype.InviteToChat=function(e){ze(Xt(this,e),e.currentTarget.ownerDocument.defaultView,this.props.chat.GetGroup(),this.props.chat),e.stopPropagation()},t.prototype.OnDragEnter=function(e,t){if(AssertMsg(e&&"friend"==e.type,"Invalid type passed to VoiceRoom.OnDragEnter"),e){var i=e;i.friend&&this.setState({dropToInviteFriend:i.friend})}return!0},t.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){var i=this;if(AssertMsg(e&&"friend"==e.type,"Invalid data type passed to ChatRoomGroupDialog.OnDrop"),e&&"friend"==e.type){var n=e;if(n.friend&&n.friend!=wd.FriendStore.self){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),gy.DragDropManager.SetDropConsumed();var r=t.currentTarget.ownerDocument.defaultView;this.props.chat.GetGroup().BIsUserGroupMember(n.friend)?(this.props.chat.GetGroup().InviteFriend(n.friend.accountid,this.props.chat),this.setState({bDropConfirmationNotice:!0}),this.m_dropInviteInvitee=n.friend,this.m_dropConfirmationInterval=window.setInterval(function(){i.setState({bDropConfirmationNotice:!1}),window.clearInterval(i.m_dropConfirmationInterval)},1200)):It({invitee:n.friend,chatview:null,invitedto:this.props.chat},Xt(this,t),r)}}},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e},t.prototype.GetFriendContext=function(){var e=this.props.chat&&this.props.chat.GetGroup().readyToRender?this.props.chat:null;return this.m_FriendContext&&this.m_FriendContext.chat==e||(this.m_FriendContext={chat:e}),this.m_FriendContext},t.prototype.render=function(){var e=this,t=this.props.chat.GetGroup(),i=this.props.chat==t.GetDefaultChatRoom(),n=wd.ChatStore.VoiceChat.GetActiveVoiceChatID()==this.props.chat.GetRoomID(),r=wd.CMInterface.steamid.GetAccountID(),o=wd.FriendStore.GetPlayer(r),a=this.props.chat.voice_active_contains_only_self,s="emptyChannelNotice",c=this.props.chat.voice_active_member_list.member_list.map(function(t){return Sa.createElement(Bd,{key:t.accountid,classNames:"friend-anim",timeout:320},Sa.createElement(Oh,{friend:t,key:t.accountid,context:e.GetFriendContext(),showVoiceLevel:!0,bInVoiceList:!0}))}),l=this.props.chat.voice_active_contains_friends;n&&!this.props.chat.voice_active_contains_self&&(0==c.length&&(a=!0),l=!0,c.push(Sa.createElement(Bd,{key:r,classNames:"friend-anim",timeout:320},Sa.createElement(Oh,{friend:o,key:r,context:this.GetFriendContext(),showVoiceLevel:!0}))));var u=["chatRoomVoiceChannel"];n&&u.push("ActiveVoiceChannel"),l||"ChatRoomList"!=this.props.context||u.push("MinimizeMemberList"),this.state.dropToInviteFriend&&u.push("voiceRoomActiveDrop"),n&&a&&(s+=" Visible");var d=this.props.chat.IsUnsavedVoiceChannel(),p=this.props.chat.name;return Sa.createElement(lp,si.a({className:u.join(" "),onClick:this.props.onSelect},this.GetDragDropProps()),Sa.createElement("div",{className:"chatRoomVoiceChannelIconGlow"}),Sa.createElement("div",{className:"chatRoomVoiceChannelNameContainer",onContextMenu:this.OnContextMenu},Sa.createElement("div",{className:"chatRoomVoiceChannelIcon"},Sa.createElement(Id._3,null)),!this.props.bRenameActive&&Sa.createElement("div",{className:"chatRoomVoiceChannelName"+(d?" unsavedVoiceChannel":"")},p),this.props.bRenameActive&&Sa.createElement(hm,{chat:this.props.chat,onRename:this.props.onRename,onEndRename:this.props.onEndRename}),!this.props.bRenameActive&&Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{onContextMenu:this.OnContextMenu,onClick:this.OnContextMenu,className:"VoiceControlPanelButton chatPinRoom",title:"Channel Options"},Sa.createElement(Id.l,null)))),Sa.createElement("div",{className:"VoiceChannelParticipants CompactFriendsList"},!l&&c,l&&Sa.createElement(Od,{enter:!0,exit:!0},c)),Sa.createElement("div",{className:s},Object(ua.b)("#Chat_VoiceEmptyChannel")),Sa.createElement(lh,{name:p,chat:this.props.chat,nostatus:!0}),!i&&Sa.createElement(dm,{chat:this.props.chat,bRenameActive:!1,bActiveChat:!1,bDefaultRoom:!1}),Sa.createElement("div",{className:"ScratchPadConnect"}),this.state.bDropConfirmationNotice&&Sa.createElement("div",{className:"dropConfirmationNotice"+(this.state.bDropConfirmationNotice?" Active":"")},Sa.createElement("div",{className:"dropConfirmationLabel"},Sa.createElement("img",{className:"avatar",src:this.m_dropInviteInvitee.persona.avatar_url_medium}))),Sa.createElement("div",{className:"dropTargetBox"}))},si.c([yn.a],t.prototype,"OnContextMenu",null),si.c([yn.a],t.prototype,"InviteToChat",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDrop",null),t=si.c([up.observer],t)}(Sa.Component),hm=function(e){function t(t){var i=e.call(this,t)||this;return i.m_strValue="",i.m_strValue=i.props.chat.name,i}return si.d(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.chat!=e.chat&&(this.m_strValue=e.chat.name)},t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.OnGlobalKeyDown,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.OnGlobalKeyDown,!1)},t.prototype.BindInputRef=function(e){e&&e.focus()},t.prototype.OnChange=function(e){this.m_strValue=e.target.value},t.prototype.OnSubmit=function(e){this.SubmitAndClose(),e.preventDefault()},t.prototype.OnGlobalKeyDown=function(e){27==e.keyCode&&this.Close()},t.prototype.OnBlur=function(e){this.SubmitAndClose()},t.prototype.SubmitAndClose=function(){this.props.onRename(this.props.chat.GetRoomID(),this.m_strValue),this.Close()},t.prototype.Close=function(){this.props.onEndRename()},t.prototype.render=function(){return Sa.createElement("form",{className:"RenameChatRoomInline",onSubmit:this.OnSubmit},Sa.createElement("input",{ref:this.BindInputRef,type:"text",value:this.m_strValue,onChange:this.OnChange,onBlur:this.OnBlur}))},si.c([_i.observable],t.prototype,"m_strValue",void 0),si.c([yn.a],t.prototype,"BindInputRef",null),si.c([yn.a],t.prototype,"OnChange",null),si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"OnGlobalKeyDown",null),si.c([yn.a],t.prototype,"OnBlur",null),t=si.c([up.observer],t)}(Sa.Component),gm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.collapsed,t=this.props.memberCount,i=this.props.name,n="groupName";return e&&(n+=" Collapsed"),Sa.createElement("div",{className:n},Sa.createElement("div",{className:"groupIcon"},Sa.createElement(Id.s,null)),Sa.createElement("span",{className:"groupCountCollapsed"},t),Sa.createElement("div",{className:"groupLabelsContainer"},Sa.createElement("span",{className:"groupNameLabel"},i),Sa.createElement("span",{className:"groupCount"},"(",t,")")))},t}(Sa.PureComponent),fm=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.OnFriendSelected=function(){this.props.friend.OpenChatDialog(Xt(null)),this.props.groupView.ClearMemberSearch()},t.prototype.render=function(){var e=[],t="",i=this.props.groupView,n=i.GetGroup(),r=i.isMemberListExpanded,o=n.GetMemberRank(this.props.friend.accountid),a=this.props.friend.efriendrelationship;switch(o){default:break;case 30:t="Moderator";break;case 40:t="Officer";break;case 50:t="Owner",n.BIsClanChatRoom()||e.push(Sa.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"+(this.props.friend.is_friend?" isFriend":"")},Sa.createElement(Id.h,null)))}switch(n.BIsClanChatRoom()&&(o>=40?e.push(Sa.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"},Sa.createElement("img",{src:ai.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_officer.png"}))):o>=30&&e.push(Sa.createElement("div",{key:"rankIcon",className:"rankIcon rankOwner"},Sa.createElement("img",{src:ai.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_moderator.png"})))),a){case 3:case 6:e.push(Sa.createElement("div",{key:"friendIcon",className:"chatMemberFriendIcon"},Sa.createElement(Id.p,null)));break;case 2:e.push(Sa.createElement("div",{key:"friendIcon",className:"chatMemberFriendIcon"},Sa.createElement(Id.p,{bPending:!0})))}var s={friend:this.props.friend,context:this.props.context,className:t,action:this.OnFriendSelected};return r?Sa.createElement(Oh,si.a({},s,{listStatusIndicatorLeft:e})):Sa.createElement(Rh,si.a({},s),e)},si.c([yn.a],t.prototype,"OnFriendSelected",null),t=si.c([up.observer],t)}(Sa.Component),_m=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.AddSizeClass=function(e){"small"==this.props.size?e.push("throbber_small"):"medium"==this.props.size?e.push("throbber_medium"):e.push("throbber_large")},t.prototype.render=function(){var e=["LoadingWrapper SteamLogoThrobber"];this.AddSizeClass(e),void 0===this.props.string&&e.push("noString"),this.props.className&&e.push(this.props.className);var t=Sa.createElement("div",{className:e.join(" ")},Sa.createElement("div",{className:"Throbber"},Sa.createElement(Id.Y,{className:"base"}),Sa.createElement(Id.Y,{className:"blur"})),Sa.createElement("div",{className:"ThrobberText"},this.props.string));return"center"==this.props.position&&(t=Sa.createElement("div",{className:"throbber_center_wrapper"},t)),t},t}(Sa.PureComponent),ym=function(e){function t(t){var i=e.call(this,t)||this;return i.m_inviteLinks={loadingState:"pending",rgInviteLinks:null},i.m_bans=new il,i.m_invitedUsers={loadingState:"pending",rgInvitedUsers:null},i.state={strRoomName:i.props.groupView.GetGroup().name},i}return si.d(t,e),t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.CloseDialog=function(){this.props.closeModal()},t.prototype.OnLeave=function(e){var t=this,i=e.currentTarget.ownerDocument.defaultView,n=Xt(null,e),r=this.props.groupView.GetGroup(),o=r.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":r.BIsAccountIDOwner(wd.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm";ge(i,Object(ua.b)("#GroupSettings_Leave_Section"),Object(ua.b)(o,r.name),Object(ua.b)("#GroupSettings_Leave_Button")).then(function(){r.LeaveChatRoomGroup(n)}).then(function(){t.props.closeModal()}).catch(function(){})},t.prototype.GetPageList=function(){var e=this.props.groupView.GetGroup(),t=[],i=(e.GetMyRank(),e.BCanAdminGroup()),n=e.BIsAccountIDOwner(wd.CMInterface.steamid.GetAccountID()),r=e.BCanInvite(),o=e.BCanAdminChannel(),a=e.BCanBan();return e.IsNamedGroupChat()?(t.push({title:Object(ua.b)("#GroupSettings_General_Section"),uniqueName:"GroupSettings_General",content:Sa.createElement(bm,{group:e,enabled:i}),enabled:i}),t.push({title:Object(ua.b)("#GroupSettings_Channels_Section"),uniqueName:"GroupSettings_Channels",content:Sa.createElement(Sm,{groupView:this.props.groupView,enabled:o}),enabled:o}),t.push({title:Object(ua.b)("#GroupSettings_Permissions_Section"),uniqueName:"GroupSettings_Permissions",content:Sa.createElement(Fm,{group:e,enabled:n}),enabled:n,hideTitle:!0}),t.push({title:Object(ua.b)("#GroupSettings_Invite_Section"),uniqueName:"GroupSettings_Invite",content:Sa.createElement(wm,{group:e,inviteLinks:this.m_inviteLinks,enabled:r}),enabled:r}),t.push({title:Object(ua.b)("#GroupSettings_InvitedUsers_Section"),uniqueName:"GroupSettings_InvitedUsers",content:Sa.createElement(Bm,{group:e,invitedUsers:this.m_invitedUsers,enabled:r}),enabled:r}),t.push({title:Object(ua.b)("#GroupSettings_Bans_Section"),uniqueName:"GroupSettings_Bans",content:Sa.createElement(Om,{group:e,bans:this.m_bans,enabled:a}),enabled:a}),t.push({title:Object(ua.b)("#GroupSettings_Leave_Section"),content:Sa.createElement(Cm,{group:e}),className:"ChatRoomLeave",click:this.OnLeave}),t):(t.push({title:Object(ua.b)("#GroupSettings_Save_Section"),uniqueName:"GroupSettings_Save",content:Sa.createElement(vm,{group:e}),enabled:!0}),t.push({title:Object(ua.b)("#GroupSettings_Invite_Section"),uniqueName:"GroupSettings_Invite",content:Sa.createElement(wm,{group:e,inviteLinks:this.m_inviteLinks,enabled:r}),enabled:r}),t.push({title:Object(ua.b)("#GroupSettings_Leave_Section"),content:Sa.createElement(Cm,{group:e}),className:"ChatRoomLeave",click:this.OnLeave}),t)},t.prototype.render=function(){var e=this.GetPageList();return Sa.createElement(pe,{onEscKeypress:this.DismissDialog},Sa.createElement(cp,{title:Object(ua.b)("#GroupSettings"),className:"ChatRoomSettingsDialog",pages:e}))},si.c([_i.observable],t.prototype,"m_inviteLinks",void 0),si.c([_i.observable],t.prototype,"m_invitedUsers",void 0),si.c([yn.a],t.prototype,"DismissDialog",null),si.c([yn.a],t.prototype,"CloseDialog",null),si.c([yn.a],t.prototype,"OnLeave",null),t=si.c([up.observer],t)}(Sa.Component),vm=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bSaving=!1,i.m_strError="",i}return si.d(t,e),t.prototype.BindInputRef=function(e){this.m_refInput=e},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.AnimateUpgrade_In=function(){document.getElementById("animUp")},t.prototype.AnimateUpgrade_Out=function(){document.getElementById("animDown")},t.prototype.SaveGroup=function(){var e=this,t=this.props.group;this.m_bSaving=!1,this.m_strError="",t.SaveChatRoomGroup(this.m_refInput.value).catch(function(t){e.m_bSaving=!1,e.m_strError=12==t?Object(ua.b)("#GroupSettings_Save_NameError"):Object(ua.b)("#GroupSettings_Save_GenericError")})},t.prototype.render=function(){var e=this.m_bSaving,t=this.m_strError;return Sa.createElement(Zd,{className:"DialogBody",onSubmit:this.SaveGroup},Sa.createElement(Wd,null,Object(ua.b)("#GroupSettings_Save_Desc"),Sa.createElement("div",null,Sa.createElement("ul",null,Sa.createElement("li",null,Object(ua.b)("#GroupSettings_Save_Feature_1")),Sa.createElement("li",null,Object(ua.b)("#GroupSettings_Save_Feature_2")),Sa.createElement("li",null,Object(ua.b)("#GroupSettings_Save_Feature_3")),Sa.createElement("li",null,Object(ua.b)("#GroupSettings_Save_Feature_4"))))),Sa.createElement(Qd,{ref:this.BindInputRef,autoFocus:!0,label:Object(ua.b)("#GroupSettings_Save_NameGroup"),disabled:e}),!e&&Sa.createElement(Sa.Fragment,null,t.length>0&&Sa.createElement("div",{className:"ErrorWhileSaving"},t),Sa.createElement(re,{className:"_FixedHeight"},Object(ua.b)("#GroupSettings_Save_Section"))),e&&Sa.createElement(_m,null))},si.c([_i.observable],t.prototype,"m_bSaving",void 0),si.c([_i.observable],t.prototype,"m_strError",void 0),si.c([yn.a],t.prototype,"BindInputRef",null),si.c([yn.a],t.prototype,"AnimateUpgrade_In",null),si.c([yn.a],t.prototype,"AnimateUpgrade_Out",null),si.c([yn.a],t.prototype,"SaveGroup",null),t=si.c([up.observer],t)}(sp),bm=function(e){function t(t){var i=e.call(this,t)||this;return i.m_strRoomName=i.props.group.IsNamedGroupChat()?i.props.group.name:"",i.m_strTagLine=i.props.group.tagline,i.state={bNameSubmitted:!1,bTaglineSubmitted:!1},i}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.AvatarUploadEResultToString=function(e){var t="#Chat_Settings_Error_Unknown";switch(e){case 21:t="#Chat_Settings_Error_NotLoggedOn";break;case 112:t="#Chat_Settings_Error_LimitedUser";break;case 15:t="#Chat_Settings_Error_AccessDenied";break;case 2:t="#Chat_Settings_Error_FailedToUpload";break;case 25:t="#Chat_Settings_Error_FileTooLarge";break;case 8:t="#Chat_Settings_Error_InvalidImage";break;case 37:t="#Chat_Settings_Error_ServerError"}return Object(ua.b)(t)},t.prototype.SetChatRoomGroupAvatarEResultToString=function(e){var t="#Chat_Settings_Error_Unknown";switch(e){case 10:case 8:case 32:t="#Chat_Settings_Error_ServerError";break;case 15:t="#Chat_Settings_Error_NotAdmin"}return Object(ua.b)(t)},t.prototype.OnFileChange=function(e){var t=this,i=e.target.files[0],n=this.props.group;e.preventDefault();var r=new FormData;r.set("sessionid",ai.a.SESSIONID),r.set("avatar",i);var o={headers:{"content-type":"multipart/form-data"}};Qi.a.post(ai.a.CHAT_BASE_URL+"chat/avatarfileupload/",r,o).then(function(e){1==e.data.success&&n.SetChatRoomGroupAvatar(e.data.sha).catch(function(e){var i=t.SetChatRoomGroupAvatarEResultToString(e);_e(window,Object(ua.b)("#Generic_Error"),i)})}).catch(function(e){var i=t.AvatarUploadEResultToString(e.response.data.success);_e(window,Object(ua.b)("#Generic_Error"),i),console.log(e.response)})},t.prototype.bindFileUploadControl=function(e){this.m_fileInput=e},t.prototype.OnNameChange=function(e){this.m_strRoomName=e.target.value,this.setState({bNameSubmitted:!1})},t.prototype.OnAvatarChange=function(){this.m_fileInput.click()},t.prototype.OnTagLineChange=function(e){this.m_strTagLine=e.target.value,this.setState({bTaglineSubmitted:!1})},t.prototype.OnNameBlur=function(){var e=this.props.group;!e.IsNamedGroupChat()&&!this.m_strRoomName||e.IsNamedGroupChat()&&e.name==this.m_strRoomName||(e.RenameChatRoomGroup(this.m_strRoomName),document.getElementById("b1").blur(),this.setState({bNameSubmitted:!0}))},t.prototype.OnTagLineBlur=function(){var e=this.props.group;e.tagline!=this.m_strTagLine&&(e.SetChatRoomGroupTagline(this.m_strTagLine),this.setState({bTaglineSubmitted:!0}),document.getElementById("b2").blur())},t.prototype.OnSubmitSent=function(){this.OnTagLineBlur(),this.OnNameBlur()},t.prototype.render=function(){var e;if(this.props.group.BIsClanChatRoom())e=Sa.createElement("div",null);else if(void 0==this.props.group.GetOwnerAccountID())e=Sa.createElement("div",null," ",Object(ua.b)("#Chat_Settings_No_Owner")," ");else{var t=wd.FriendStore.GetPlayer(this.props.group.GetOwnerAccountID());e=Sa.createElement("div",null,Sa.createElement(jd,null," ",Object(ua.b)("#Chat_Settings_General_Owner")),Sa.createElement(Oh,{className:"groupOwnerFriend",friend:t,context:null}))}return Sa.createElement(Zd,{onSubmit:this.OnSubmitSent,className:"DialogBody"},Sa.createElement(Jd,null,Sa.createElement("div",{className:"AvatarAndUser"},Sa.createElement(jd,null,Object(ua.b)("#Chat_Settings_General_Icon")),Sa.createElement("img",{className:"currentUserAvatar largeAvatar no-drag",src:this.props.group.hasAvatar?this.props.group.avatar_url_full:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}),!this.props.group.hasAvatar&&Sa.createElement("div",{className:"noIconLabel"},Object(ua.b)("#Chat_Settings_General_NoIcon")),Sa.createElement("input",{type:"file",style:{display:"none"},name:"fileupload",accept:".png, .jpg, .jpeg, .gif",ref:this.bindFileUploadControl,onChange:this.OnFileChange}),Sa.createElement(oe,{onClick:this.OnAvatarChange,disabled:!this.props.enabled},Object(ua.b)(this.props.group.hasAvatar?"#Chat_Settings_General_ChangeIcon":"#Chat_Settings_General_AddIcon"))),Sa.createElement("div",{className:"GeneralChatSettings"},Sa.createElement(Qd,{autoComplete:"off",id:"b1",className:"groupChatName",label:Object(ua.b)("#Chat_Settings_General_Chat_Name"),type:"text",value:this.m_strRoomName,onChange:this.OnNameChange,onBlur:this.OnNameBlur,autoFocus:!0,disabled:!this.props.enabled}),Sa.createElement("input",{type:"submit",style:{display:"none"}}),Sa.createElement(Qd,{autoComplete:"off",id:"b2",className:"groupChatTag",label:Object(ua.b)("#Chat_Settings_General_Tagline"),type:"text",value:this.m_strTagLine,onChange:this.OnTagLineChange,onBlur:this.OnTagLineBlur,disabled:!this.props.enabled}),e)))},si.c([_i.observable],t.prototype,"m_strRoomName",void 0),si.c([_i.observable],t.prototype,"m_strTagLine",void 0),si.c([yn.a],t.prototype,"OnFileChange",null),si.c([yn.a],t.prototype,"bindFileUploadControl",null),si.c([yn.a],t.prototype,"OnNameChange",null),si.c([yn.a],t.prototype,"OnAvatarChange",null),si.c([yn.a],t.prototype,"OnTagLineChange",null),si.c([yn.a],t.prototype,"OnNameBlur",null),si.c([yn.a],t.prototype,"OnTagLineBlur",null),si.c([yn.a],t.prototype,"OnSubmitSent",null),t=si.c([up.observer],t)}(sp),Cm=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnLeave=function(e){var t=this,i=e.currentTarget.ownerDocument.defaultView,n=Xt(null,e),r=this.props.group.BIsClanChatRoom()?"#Chat_Actions_LeaveChatRoomGroup_ClanConfirm":this.props.group.BIsAccountIDOwner(wd.CMInterface.steamid.GetAccountID())?"#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm":"#Chat_Actions_LeaveChatRoomGroup_Confirm";ge(i,Object(ua.b)("#GroupSettings_Leave_Section"),Object(ua.b)(r,this.props.group.name),Object(ua.b)("#GroupSettings_Leave_Button")).then(function(){t.props.group.LeaveChatRoomGroup(n)}).catch(function(){})},t.prototype.render=function(){return Sa.createElement("div",null,Object(ua.b)("#GroupSettings_Leave_Confirm"),Sa.createElement(oe,{onClick:this.OnLeave},Object(ua.b)("#GroupSettings_Leave_Button")))},si.c([yn.a],t.prototype,"OnLeave",null),t=si.c([up.observer],t)}(sp),Sm=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnCreateNewTextChannel=function(e){var t=e.currentTarget.ownerDocument.defaultView;me(Sa.createElement(lm,{ownerWin:t,groupView:this.props.groupView,bVoiceChannel:!1,bJoinChannel:!1}),t)},t.prototype.OnCreateNewVoiceChannel=function(e){var t=e.currentTarget.ownerDocument.defaultView;me(Sa.createElement(lm,{ownerWin:t,groupView:this.props.groupView,bVoiceChannel:!0,bJoinChannel:!1}),t)},t.prototype.OnDeleteChannel=function(e,t){ge(e.currentTarget.ownerDocument.defaultView,Object(ua.b)("#GroupSettings_Channels_DeleteChannel"),Object(ua.b)("#GroupSettings_Channels_DeleteConfirm"),Object(ua.b)("#GroupSettings_Channels_DeleteButtonLabel"),Object(ua.b)("#Button_Cancel"),!0).then(function(){var e=t.GetGroup(),i=t.GetRoomID();e.DeleteChatRoom(i)}).catch(function(){})},t.prototype.render=function(){var e=this,t=this.props.groupView.GetGroup().chatRoomList,i=function(t,i,n){return Sa.createElement("div",{key:t.GetRoomID(),className:"_DialogRow _DialogRowBackground"},Sa.createElement("div",{className:"_DialogRowLabel"},n?Sa.createElement(Id._3,null):Sa.createElement(Id.X,null),Sa.createElement("div",{className:t.IsDefaultRoomForGroup()?"HomeChannel":"",style:{alignSelf:"center"}},t.name)),t.IsDefaultRoomForGroup()?Sa.createElement("div",{className:"_DialogRowSecondaryLabel"},Object(ua.b)("#GroupSettings_Channels_HomeChannelDeleteLabel")):Sa.createElement(oe,{className:"_DialogRowAction",onClick:function(i){return e.OnDeleteChannel(i,t)},disabled:!e.props.enabled},Object(ua.b)("#GroupSettings_Channels_DeleteChannel")))},n=t.filter(function(e){return!e.GetVoiceAllowed()}).map(function(e){return i(e,name,!1)}),r=t.filter(function(e){return e.GetVoiceAllowed()&&!e.IsDefaultRoomForGroup()}).map(function(e){return i(e,name,!0)});return Sa.createElement(Zd,{className:"DialogBody"},Sa.createElement(Ud,null,Sa.createElement(Jd,null,Sa.createElement(oe,{className:"DialogButtonTall",svgicon:Id.X,onClick:this.OnCreateNewTextChannel,disabled:!this.props.enabled}," ",Object(ua.b)("#GroupSettings_Channels_CreateText")," "),Sa.createElement(oe,{className:"DialogButtonTall",svgicon:Id.n,onClick:this.OnCreateNewVoiceChannel,disabled:!this.props.enabled}," ",Object(ua.b)("#GroupSettings_Channels_CreateVoice")," "))),Sa.createElement(qd,null,0!=n.length&&Sa.createElement("div",{className:"displayColumn flexShrinkNone",style:{marginBottom:"32px"}},Sa.createElement(jd,null,Object(ua.b)("#GroupSettings_Channels_TextChannels")),Sa.createElement(se,null),n),0!=r.length&&Sa.createElement("div",{className:"displayColumn flexShrinkNone"},Sa.createElement(jd,null,Object(ua.b)("#GroupSettings_Channels_VoiceChannels")),Sa.createElement(se,null),r)))},si.c([yn.a],t.prototype,"OnCreateNewTextChannel",null),si.c([yn.a],t.prototype,"OnCreateNewVoiceChannel",null),si.c([yn.a],t.prototype,"OnDeleteChannel",null),t=si.c([up.observer],t)}(sp),Mm=function(e){function t(t){var i=e.call(this,t)||this;return wd.FriendStore.self,i.state={strRoleName:""},i}return si.d(t,e),t.prototype.OnSubmit=function(){var e=this,t=this.m_refInput&&this.m_refInput.value.trim();t&&0!=t.length&&(this.props.closeModal(),this.props.group.CreateRole(t).catch(function(t){_e(e.props.ownerWin,Object(ua.b)("#Generic_Error"),Object(ua.b)("#GroupSettings_CreateRole_GenericError")),e.props.closeModal()}))},t.prototype.HandleTextEntry=function(e){this.setState({strRoleName:e.target.value})},t.prototype.render=function(){var e=this,t=this.state.strRoleName.length>0;return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"CreateChatChannelDialog",onSubmit:this.OnSubmit},Sa.createElement(Ud,null,Object(ua.b)("#GroupSettings_CreateRole_Title")),Sa.createElement(Hd,null,Sa.createElement(Qd,{ref:function(t){e.m_refInput=t},autoFocus:!0,label:Object(ua.b)("#GroupSettings_CreateRole_Description"),value:this.state.strRoleName,onChange:this.HandleTextEntry})),Sa.createElement(Vd,null,Sa.createElement(ce,{onCancel:this.props.closeModal,bOKDisabled:!t}))))},si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"HandleTextEntry",null),t}(Sa.Component),Fm=function(e){function t(t){var i=e.call(this,t)||this;return i.state={editRoleID:void 0,editRoleName:void 0,editRoleActions:void 0},i}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnCreateRole=function(e){var t=e.currentTarget.ownerDocument.defaultView;me(Sa.createElement(Mm,{ownerWin:t,group:this.props.group}),t)},t.prototype.BCanLocalUserEditRole=function(e){return this.props.group.BCanIModifyRole(e)},t.prototype.BCanLocalUserAssignRole=function(){return this.props.group.BCanIAssignRoles()},t.prototype.EditRole=function(e){var t=this.props.group.GetRoleName(e),i=this.props.group.GetRoleActions(e);t&&i&&this.setState({editRoleID:e,editRoleName:t,editRoleActions:i})},t.prototype.RenameRole=function(e,t){var i=this;this.props.group.RenameRole(e,t).catch(function(e){i.setState({editRoleName:i.props.group.GetRoleName(i.state.editRoleID)})})},t.prototype.DeleteRole=function(e,t){var i=this,n=e.currentTarget.ownerDocument.defaultView;if(t!=this.props.group.DefaultRoleID()){var r=this.props.group.GetRoleName(t),o=Sa.createElement("div",{style:{marginTop:"8px",color:"white"}},r);ge(window,Object(ua.b)("#GroupSettings_Permissions_ConfirmDeleteTitle"),Object(ua.b)("#GroupSettings_Permissions_ConfirmDelete"),Object(ua.b)("#GroupSettings_Permissions_ConfirmDeleteButton"),Object(ua.b)("#Button_Cancel"),!0,o).then(function(){return i.props.group.DeleteRole(t)}).then(function(){i.setState({editRoleID:void 0})}).catch(function(e){void 0!=e&&_e(n,Object(ua.b)("#Generic_Error"),Object(ua.b)("#GroupSettings_DeleteRole_GenericError"))})}},t.prototype.OnEditRoleNameChange=function(e){this.setState({editRoleName:e.target.value})},t.prototype.OnEditRoleNameBlur=function(){this.RenameRole(this.state.editRoleID,this.state.editRoleName),document.getElementById("b1").blur()},t.prototype.DoesRoleGrantPermission=function(e,t){return!0},t.prototype.OnSettingToggled=function(e,t){this.props.group.SetRoleAction(this.state.editRoleID,e,t)},t.prototype.PermissionToggleRow=function(e){var t=this,i=!1,n=this.props.group.GetRoleActions(this.state.editRoleID);return n&&(i=n.BCanPerformAction(e.eAction)),Sa.createElement(np,{key:e.eAction,onChange:function(i){t.OnSettingToggled(e.eAction,i)},label:e.strLabel,checked:i,disabled:e.disabled})},t.prototype.MoveRoleUp=function(e){var t=this,i=this.props.group.GetRoleOrdinal(e),n=Math.max(0,i-1);this.props.group.ReorderRole(e,n).then(function(e){t.forceUpdate()})},t.prototype.MoveRoleDown=function(e){var t=this,i=this.props.group.GetRoleOrdinal(e),n=i+1;this.props.group.ReorderRole(e,n).then(function(e){t.forceUpdate()})},t.prototype.render=function(){var e=this,t=this.props.group.BIsClanChatRoom();if(void 0!=this.state.editRoleID&&this.props.group.GetRoleActions(this.state.editRoleID)){var i=this.PermissionToggleRow,n=this.state.editRoleID==this.props.group.DefaultRoleID(),r=n&&!t?Object(ua.b)("#ChatRoomRole_Member"):this.state.editRoleName,o=this.BCanLocalUserEditRole(this.state.editRoleID);return Sa.createElement(Zd,{onSubmit:this.OnEditRoleNameBlur},Sa.createElement("div",null,Sa.createElement(Ud,{style:{opacity:.25,marginBottom:0}},Object(ua.b)("#GroupSettings_Permissions_Section")),Sa.createElement(ae,{className:"backToPermissionsButton allCaps",onClick:function(){e.setState({editRoleID:void 0})},svgicon:Id.W},Object(ua.b)("#GroupSettings_Permissions_BackButton"))),Sa.createElement(Ud,{className:"permissionDetailsPage"},!o&&Sa.createElement(Kd,null,Sa.createElement(Id.y,null),Object(ua.b)("#Chat_Settings_Permission_Denied")),Sa.createElement("div",{className:"roleEditHeader"},!t&&Sa.createElement(Qd,{autoComplete:"off",id:"b1",className:"editRoleName",label:Object(ua.b)("#GroupSettings_Permissions_RoleName"),type:"text",value:r,disabled:n||!o,onChange:this.OnEditRoleNameChange,onBlur:this.OnEditRoleNameBlur}),t&&Object(ua.b)(r))),Sa.createElement(Hd,null,Sa.createElement("div",{className:"SettingsGroup PermissionsGroup"},Sa.createElement(jd,{className:"PermissionsSectionHeader"},Object(ua.b)("#GroupSettings_Permissions_Heading_General")),Sa.createElement(i,{eAction:6,strLabel:Object(ua.b)("#GroupSettings_Permissions_Chat"),disabled:!o}),Sa.createElement(i,{eAction:10,strLabel:Object(ua.b)("#GroupSettings_Permissions_MentionAll"),disabled:!o}),Sa.createElement(i,{eAction:11,strLabel:Object(ua.b)("#GroupSettings_Permissions_SetWatchingBroadcast"),disabled:!o})),Sa.createElement("div",{className:"SettingsGroup PermissionsGroup"},Sa.createElement(jd,{className:"PermissionsSectionHeader"},Object(ua.b)("#GroupSettings_Permissions_Heading_MembersAndRoles")),Sa.createElement(i,{eAction:2,strLabel:Object(ua.b)("#GroupSettings_Permissions_Kick"),disabled:!o}),Sa.createElement(i,{eAction:3,strLabel:Object(ua.b)("#GroupSettings_Permissions_Ban"),disabled:!o}),Sa.createElement(i,{eAction:4,strLabel:Object(ua.b)("#GroupSettings_Permissions_Invite"),disabled:!o}),Sa.createElement(i,{eAction:8,strLabel:Object(ua.b)("#GroupSettings_Permissions_ChangeGroupRoles"),disabled:!o||n}),!t&&Sa.createElement(i,{eAction:9,strLabel:Object(ua.b)("#GroupSettings_Permissions_ChangeUserRoles"),disabled:!o||n})),Sa.createElement("div",{className:"SettingsGroup PermissionsGroup"},Sa.createElement(jd,{className:"PermissionsSectionHeader"},Object(ua.b)("#GroupSettings_Permissions_Heading_RoomManagement")),Sa.createElement(i,{eAction:5,strLabel:Object(ua.b)("#GroupSettings_Permissions_ChangeTaglineAvatarName"),disabled:!o}),Sa.createElement(i,{eAction:1,strLabel:Object(ua.b)("#GroupSettings_Permissions_CreateRenameDeleteChannel"),disabled:!o}))),Sa.createElement(Vd,null,!t&&!n&&o&&Sa.createElement(oe,{className:"deleteButton",onClick:function(t){e.DeleteRole(t,e.state.editRoleID)}},Object(ua.b)("#GroupSettings_Permissions_DeleteRoleButton"))))}var a=this.props.group.DefaultRoleID(),s=this.props.group.GetRoles().slice().sort(function(e,t){return e.role_id==a?1:t.role_id==a?-1:e.ordinal-t.ordinal}),c=this.props.group.GetHighestRankRoleIDForPermission(wd.FriendStore.self.accountid,8),l=c?this.props.group.GetRoleOrdinal(c):Number.MAX_VALUE-1,u=this.props.group.BIsAccountIDOwner(wd.FriendStore.self.accountid),d=!1,p=this.BCanLocalUserAssignRole(),m=s.map(function(i,n){var r=!1,o=e.BCanLocalUserEditRole(i.role_id),c=o&&(u||i.ordinal>l+1)&&i.ordinal>0,p=o&&n<s.length-2;return o&&(d=!0),i.role_id==a?(r=!0,c=!1,p=!1):e.props.group.BMemberHasRole(wd.FriendStore.self.accountid,i.role_id)&&(r=!0),Sa.createElement("div",{className:"roleRow",key:i.role_id},Sa.createElement(oe,{className:"roleButton"+(r&&!u?" currentUserRole":""),onClick:function(t){e.EditRole(i.role_id)}},Sa.createElement(Id.i,null),Object(ua.b)(i.name),Sa.createElement("span",{className:"roleSubtitle"},o?Object(ua.b)("#Generic_Edit"):Object(ua.b)("#Generic_View"))),!t&&d&&s.length>2&&(c||p)&&Sa.createElement("div",{className:"rolePriorityContainer"},Sa.createElement("div",{className:"rolePriorityButton roleUp"+(c?"":" Disabled"),onClick:function(t){e.MoveRoleUp(i.role_id),t.stopPropagation()}},Sa.createElement(Id.o,{angle:0})),Sa.createElement("div",{className:"rolePriorityButton roleDown"+(p?"":" Disabled"),onClick:function(t){e.MoveRoleDown(i.role_id),t.stopPropagation()}},Sa.createElement(Id.o,{angle:180}))))}),h=Object(ua.b)("#ChatRoomRole_Description_NoEdit");if(t){var g=hi.a.InitFromClanID(this.props.group.GetClanID()),f=ai.a.COMMUNITY_BASE_URL+"gid/"+g.ConvertTo64BitString()+"/membersManage";h=Object(ua.d)("#ChatRoomRole_Description_Clan",Sa.createElement(we,{href:f},Object(ua.b)("#ChatRoomRole_Description_ClanLink")))}else d&&!u?h=Object(ua.b)("#ChatRoomRole_Description"):(p||u)&&(h=Object(ua.b)("#ChatRoomRole_Description_NoEditCanAssign"));return Sa.createElement("div",{className:"roleList"},Sa.createElement(Ud,null,Object(ua.b)("#GroupSettings_Permissions_Section"),!this.props.enabled&&!d&&Sa.createElement(Kd,null,Sa.createElement(Id.y,null),Object(ua.b)("#Chat_Settings_Permission_Denied_Permissions"))),Sa.createElement(Wd,null,h),Sa.createElement("div",{className:"roleEditHeader"},Sa.createElement(jd,null,Object(ua.b)("#GroupSettings_Permissions_RolesTitle")," "),!u&&Sa.createElement(jd,{className:"meKey"},Sa.createElement(Id.i,null),Object(ua.b)("#GroupSettings_meKey_Desc")),u&&Sa.createElement(jd,{className:"meKey"},Sa.createElement(Id.h,null),Object(ua.b)("#GroupSettings_meKey_Desc_Owner"))),Sa.createElement(Zd,{className:"DialogBody"},Sa.createElement(oe,{disabled:!0,className:"roleButton owner",svgicon:Id.h,onClick:function(){}},Object(ua.b)("#ChatRoomRole_Owner"),Sa.createElement("span",{className:"roleSubtitle"},Object(ua.b)("#ChatRoomRole_OwnerSubtitle"))),m),!t&&Sa.createElement(re,{className:"createNewRoleButton",svgicon:Id.I,onClick:this.OnCreateRole,disabled:!this.props.group.BCanICreateRoles()},Object(ua.b)("#GroupSettings_Permissions_CreateNew")))},si.c([yn.a],t.prototype,"OnCreateRole",null),si.c([yn.a],t.prototype,"EditRole",null),si.c([yn.a],t.prototype,"RenameRole",null),si.c([yn.a],t.prototype,"DeleteRole",null),si.c([yn.a],t.prototype,"OnEditRoleNameChange",null),si.c([yn.a],t.prototype,"OnEditRoleNameBlur",null),si.c([yn.a],t.prototype,"OnSettingToggled",null),si.c([yn.a],t.prototype,"PermissionToggleRow",null),si.c([yn.a],t.prototype,"MoveRoleUp",null),si.c([yn.a],t.prototype,"MoveRoleDown",null),t=si.c([up.observer],t)}(sp),wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.componentWillMount=function(){var e=this.props.inviteLinks;if("loaded"!=e.loadingState){var t=this.props.group;this.props.enabled&&"pending"==e.loadingState?t.GetInviteLinksForGroup().then(function(t){setTimeout(function(){"loaded"==t.loadingState&&(e.rgInviteLinks=t.rgInviteLinks.sort(function(e,t){return e.time_expires()-t.time_expires()})),e.loadingState=t.loadingState},500)}):this.props.inviteLinks.loadingState="denied"}},t.prototype.OnDeleteLink=function(e){var t=this,i=this.props.inviteLinks,n=Sa.createElement("div",{style:{marginTop:"5px",color:"#dee2e5"}},Object(ha.a)(e.invite_code()));ge(window,Object(ua.b)("#GroupSettings_Invite_ConfirmDeleteTitle"),Object(ua.b)("#GroupSettings_Invite_ConfirmDelete"),Object(ua.b)("#GroupSettings_Invite_ConfirmDeleteButton"),Object(ua.b)("#Button_Cancel"),!0,n).then(function(){t.props.group.DeleteInviteLink(e.invite_code()).then(function(t){AssertMsg("loaded"==i.loadingState,"somehow got a valid link to delete without links being loaded");var n=i.rgInviteLinks.findIndex(function(t){return t.invite_code()==e.invite_code()});n>=0&&(i.rgInviteLinks.splice(n,1),console.log("removed link",i.rgInviteLinks))})}).then(function(){}).catch(function(){})},t.prototype.FormatExpires=function(e){return e>2145916800?Object(ua.b)("#GroupSettings_Invite_NeverExpires"):wd.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.HandleFocus=function(e){e.target.select()},t.prototype.render=function(){var e=this,t=this.props.inviteLinks,i=void 0;if("pending"==t.loadingState)i=Sa.createElement("div",null,Sa.createElement(_m,null));else if("denied"==t.loadingState)i=Sa.createElement("div",null,Object(ua.b)("#GroupSettings_Invite_Denied"));else if("failed"==t.loadingState)i=Sa.createElement("div",null,Object(ua.b)("#GroupSettings_Invite_Failed"));else if("loaded"==t.loadingState){var n=[];n=t.rgInviteLinks.map(function(t){return Sa.createElement("tr",{key:t.invite_code()},Sa.createElement("td",null," ",Sa.createElement(Qd,{className:"inviteURLLink",value:Object(ha.a)(t.invite_code()),readOnly:!0,onClick:e.HandleFocus,onFocus:e.HandleFocus})," "),Sa.createElement("td",{className:"dateCell allCaps"}," ",e.FormatExpires(t.time_expires())," "),Sa.createElement("td",{className:"buttonCell"},Sa.createElement(oe,{onClick:function(i){return e.OnDeleteLink(t)},disabled:!e.props.enabled},Object(ua.b)("#GroupSettings_Invite_Delete"))))}),i=0==n.length?Sa.createElement("div",null,Object(ua.b)("#GroupSettings_Invite_NoInvites")):Sa.createElement("table",{className:"DialogSpanningTable InviteLinksTable"},Sa.createElement("thead",null,Sa.createElement("tr",null,Sa.createElement("th",{className:"inviteCodeColumn"}," ",Object(ua.b)("#GroupSettings_Invite_Code")," "),Sa.createElement("th",{className:"dateColumn"}," ",Object(ua.b)("#GroupSettings_Invite_Expiration")," "),Sa.createElement("th",{className:"buttonColumn"}," "))),Sa.createElement("tbody",null,n))}return Sa.createElement(Zd,{className:"DialogBody"},this.props.enabled&&Sa.createElement("div",{className:"inviteLinkContainer"},Sa.createElement(Up,{chat:this.props.group.GetDefaultChatRoom(),disabled:!this.props.enabled})),this.props.enabled&&Sa.createElement("div",{className:"OrSeparator"},Sa.createElement(se,null)),i)},si.c([yn.a],t.prototype,"OnDeleteLink",null),si.c([yn.a],t.prototype,"HandleFocus",null),t=si.c([up.observer],t)}(sp),Bm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.componentWillMount=function(){var e=this.props.invitedUsers;if("loaded"!=e.loadingState){var t=this.props.group;"pending"==e.loadingState&&t.GetInvitedUsersForGroup().then(function(t){setTimeout(function(){"loaded"==t.loadingState&&(e.rgInvitedUsers=t.rgInvitedUsers.sort(function(e,t){return e.time_invited()-t.time_invited()})),e.loadingState=t.loadingState},500)})}},t.prototype.RevokeInvite=function(e,t){var i=this,n=wd.FriendStore.GetPlayer(t),r=e.currentTarget.ownerDocument.defaultView,o=Sa.createElement(Oh,{className:"friend",friend:n,context:null,disableContextMenu:!0});ge(window,Object(ua.b)("#GroupSettings_InvitedUsers_RevokeTitle"),Object(ua.b)("#GroupSettings_InvitedUsers_RevokeBody"),Object(ua.b)("#GroupSettings_InvitedUsers_RevokeConfirm"),Object(ua.b)("#Button_Cancel"),!0,o).then(function(){i.props.group.RevokeInvite(t).then(function(){_n.d(i.props.invitedUsers.rgInvitedUsers,function(e){return e.accountid()===t})}).catch(function(e){_e(r,Object(ua.b)("#Generic_Error"),Object(ua.b)("#GroupSettings_InvitedUsers_RevokeGenericError"))})}).catch(function(){})},t.prototype.FormatDate=function(e){return wd.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.render=function(){var e=this;if("loaded"==this.props.invitedUsers.loadingState){if(!this.props.invitedUsers.rgInvitedUsers||0==this.props.invitedUsers.rgInvitedUsers.length)return Sa.createElement(Zd,null,Object(ua.b)("#GroupSettings_InvitedUsers_Noone"));var t=this.props.invitedUsers.rgInvitedUsers.map(function(t){var i=wd.FriendStore.GetPlayer(t.accountid());return Sa.createElement("tr",{className:"hoverRow",key:t.accountid()},Sa.createElement("td",{className:"friendCell"}," ",Sa.createElement(Oh,{friend:i,context:null,bHideGameName:!0,bHidePersona:!0})," "),Sa.createElement("td",{className:"dateCell"}," ",e.FormatDate(t.time_invited())," "),Sa.createElement("td",{className:"buttonCell"},Sa.createElement(oe,{onClick:function(i){return e.RevokeInvite(i,t.accountid())},disabled:!e.props.enabled},Object(ua.b)("#GroupSettings_InvitedUsers_RevokeInvite"))))});return Sa.createElement(Zd,{className:"DialogBody"},Sa.createElement("table",{className:"DialogSpanningTable InvitedUsersTable"},Sa.createElement("thead",null,Sa.createElement("tr",{className:"headerRow"},Sa.createElement("th",{className:"friendColumn"},Object(ua.b)("#GroupSettings_InvitedUsers_InvitedHeader")," "),Sa.createElement("th",{className:"dateColumn"}," ",Object(ua.b)("#GroupSettings_InvitedUsers_InvitedDate")," "),Sa.createElement("th",{className:"buttonColumn"}," "))),Sa.createElement("tbody",null,t)))}return Sa.createElement(Zd,null,"pending"==this.props.invitedUsers.loadingState?Sa.createElement(_m,{size:"medium"}):Object(ua.b)("#GroupSettings_InvitedUsers_Failed"))},si.c([yn.a],t.prototype,"RevokeInvite",null),t=si.c([up.observer],t)}(sp),Om=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OKToSwitchAway=function(){return!0},t.prototype.componentWillMount=function(){var e=this.props.group,t=this.props.bans;"pending"==t.loadingState&&e.GetBanList().then(function(e){setTimeout(function(){t.rgBans=e.rgBans,t.loadingState=e.loadingState},500)})},t.prototype.componentWillUnmount=function(){},t.prototype.OnClickUnban=function(e,t){var i=this,n=wd.FriendStore.GetPlayer(t),r=e.currentTarget.ownerDocument.defaultView,o=Sa.createElement(Oh,{className:"friend",friend:n,context:null,disableContextMenu:!0});ge(window,Object(ua.b)("#GroupSettings_Bans_UnbanTitle"),Object(ua.b)("#GroupSettings_Bans_UnbanBody",n.display_name),Object(ua.b)("#GroupSettings_Bans_UnbanConfirm"),Object(ua.b)("#Button_Cancel"),!0,o).then(function(){i.props.group.SetUserBanState(t,!1).then(function(){_n.d(i.props.bans.rgBans,function(e){return e.accountid()===t})}).catch(function(e){_e(r,Object(ua.b)("#Generic_Error"),Object(ua.b)("#GroupSettings_Bans_UnbanGenericError"))})}).catch(function(){})},t.prototype.FormatDate=function(e){return wd.RTime32ToDate(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.prototype.render=function(){var e,t=this;if("loaded"==this.props.bans.loadingState)return 0==this.props.bans.rgBans.length?Sa.createElement(Zd,null,Object(ua.b)("#GroupSettings_Bans_NoOneBanned")):(e=this.props.bans.rgBans.map(function(e){var i=wd.FriendStore.GetPlayer(e.accountid());return Sa.createElement("tr",{className:"hoverRow",key:e.accountid()},Sa.createElement("td",{className:"friendCell"}," ",Sa.createElement(Oh,{friend:i,context:null})," "),Sa.createElement("td",{className:"dateCell"}," ",t.FormatDate(e.time_banned())," "),Sa.createElement("td",{className:"buttonCell"}," ",Sa.createElement(oe,{onClick:function(i){return t.OnClickUnban(i,e.accountid())}},Object(ua.b)("#GroupSettings_Bans_RevokeBan"))))}),Sa.createElement(Zd,{className:"DialogBody"},Sa.createElement("table",{className:"DialogSpanningTable BannedUsersTable"},Sa.createElement("thead",null,Sa.createElement("tr",{className:"headerRow"},Sa.createElement("th",{className:"friendColumn"},Object(ua.b)("#GroupSettings_Bans_InvitedHeader")," "),Sa.createElement("th",{className:"dateColumn"}," ",Object(ua.b)("#GroupSettings_Bans_BannedDate")," "),Sa.createElement("th",{className:"buttonColumn"}," "))),Sa.createElement("tbody",null,e))));var i=void 0;return i="pending"==this.props.bans.loadingState?Sa.createElement(_m,{size:"medium"}):"denied"==this.props.bans.loadingState?Object(ua.b)("#GroupSettings_Bans_AccessDenied"):Object(ua.b)("#GroupSettings_Bans_Failed"),Sa.createElement(Zd,{className:"DialogBody"},i)},si.c([yn.a],t.prototype,"OnClickUnban",null),t=si.c([up.observer],t)}(sp),Im=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bSettingsChanged=!1,i.m_bCommunityPreferencesChanged=!1,i.state={friendSettings:Object.assign({},t.friendsSettingsInitial),communityPreferences:Object.assign({},t.communityPreferencesInitial)},i}return si.d(t,e),t.prototype.componentWillReceiveProps=function(e){for(var t={},i=0,n=Object.keys(e.friendsSettingsInitial);i<n.length;i++){var r=n[i];e.friendsSettingsInitial[r]!=this.props.friendsSettingsInitial[r]&&(t[r]=e.friendsSettingsInitial[r])}for(var o={},a=0,s=Object.keys(e.communityPreferencesInitial);a<s.length;a++){var r=s[a];e.communityPreferencesInitial[r]!=this.props.communityPreferencesInitial[r]&&(o[r]=e.communityPreferencesInitial[r])}this.setState({friendSettings:si.a({},this.state.friendSettings,t),communityPreferences:si.a({},this.state.communityPreferences,o)})},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.OnSubmit=function(){this.props.onSubmit(this.state.friendSettings,this.state.communityPreferences),this.m_bSettingsChanged=!1,this.m_bCommunityPreferencesChanged=!1},t.prototype.HandleRadioChange=function(e){this.setState({friendSettings:si.a({},this.state.friendSettings,{nChatFlashMode:parseInt(e.currentTarget.value)})}),this.m_bSettingsChanged=!0},t.prototype.OnSettingToggled=function(e,t){var i;this.setState({friendSettings:si.a({},this.state.friendSettings,(i={},i[e]=t,i))}),this.m_bSettingsChanged=!0},t.prototype.OnCommunityPreferenceToggled=function(e,t){var i;this.setState({communityPreferences:si.a({},this.state.communityPreferences,(i={},i[e]=t,i))}),this.m_bCommunityPreferencesChanged=!0},t.prototype.componentDidUpdate=function(e,t){this.props.bSubmitImmediate&&(this.m_bSettingsChanged||this.m_bCommunityPreferencesChanged)&&this.props.onSubmit(this.state.friendSettings,this.state.communityPreferences),this.m_bSettingsChanged=!1,this.m_bCommunityPreferencesChanged=!1},t.prototype.FriendsSettingsToggleRow=function(e){var t=this;return Sa.createElement(np,{key:e.strName,onChange:function(i){t.OnSettingToggled(e.strName,i)},label:e.strLabel,checked:!!this.state.friendSettings[e.strName],description:e.strDesc?e.strDesc:""})},t.prototype.FriendsSettingsCheckbox=function(e){var t=this;return Sa.createElement(tp,{key:e.strName,onChange:function(i){t.OnSettingToggled(e.strName,i)},checked:!!this.state.friendSettings[e.strName]})},t.prototype.FriendsSettingsCommunityPreferenceToggleRow=function(e){var t=this;return Sa.createElement(np,{key:"CommunityPreference"+e.strName,onChange:function(i){t.OnCommunityPreferenceToggled(e.strName,i)},label:e.strLabel,checked:!!this.state.communityPreferences[e.strName],description:e.strDesc?e.strDesc:""},e.children)},si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"HandleRadioChange",null),si.c([yn.a],t.prototype,"OnSettingToggled",null),si.c([yn.a],t.prototype,"OnCommunityPreferenceToggled",null),si.c([yn.a],t.prototype,"FriendsSettingsToggleRow",null),si.c([yn.a],t.prototype,"FriendsSettingsCheckbox",null),si.c([yn.a],t.prototype,"FriendsSettingsCommunityPreferenceToggleRow",null),t}(sp);!function(e){e[e.k_EChatFontSizeSmall=1]="k_EChatFontSizeSmall",e[e.k_EChatFontSizeDefault=2]="k_EChatFontSizeDefault",e[e.k_EChatFontSizeLarge=3]="k_EChatFontSizeLarge"}(fd||(fd={}));var Rm,Em=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.bParenthesizeNicknames,t=Object(ua.b)("#FriendSettings_ExampleFriend"),i=Object(ua.b)("#FriendSettings_ExampleNickname"),n=h(Un,"_full");return Sa.createElement("div",{className:"friend online friendSettingsFakeFriend"},Sa.createElement("div",{className:"avatarHolder no-drag"},Sa.createElement("div",{className:"avatarStatus"}),Sa.createElement("img",{className:"avatar",src:n,draggable:!1})),Sa.createElement("div",{className:"labelHolder twoLine NoContextMenu"},Sa.createElement("div",{className:"statusAndName"},Sa.createElement("div",{className:"playerName"},e?t:i,e&&Sa.createElement("span",{className:"playerNickname"},"(",i,")")),!e&&Sa.createElement("span",{className:"playerNicknameBracket",title:Object(ua.b)("#isNickname")}," *")),Sa.createElement("div",{className:"richPresenceContainer"},Sa.createElement("div",{className:"gameName richPresenceLabel no-drag"},Object(ua.b)("#PersonaStateOnline")))))},t}(Sa.Component),Tm=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.SetChatFontSize=function(e){this.setState({friendSettings:si.a({},this.state.friendSettings,{nChatFontSize:e})}),this.m_bSettingsChanged=!0},t.prototype.render=function(){var e=this,t=this.FriendsSettingsToggleRow,i=this.state.friendSettings.nChatFontSize;return Sa.createElement(Zd,{className:"DialogBody",onSubmit:this.OnSubmit},Sa.createElement("div",{className:"SettingsGroup"},Sa.createElement(t,{strName:"bCompactFriendsList",strLabel:Object(ua.b)("#FriendSettings_CompactFriendsAndChat")}),Sa.createElement(t,{strName:"bCompactQuickAccess",strLabel:Object(ua.b)("#FriendSettings_CompactQuickAccess")}),Sa.createElement(jd,{className:"friendSettingsSubheader"},Object(ua.b)("#FriendSettings_ChatFontSize")),Sa.createElement(Yd,{className:"FriendsSettingsChatFontSizeSection_ButtonRow"},Sa.createElement(oe,{className:"smallFontSetting "+(i==fd.k_EChatFontSizeSmall?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(fd.k_EChatFontSizeSmall)}},Object(ua.b)("#FriendSetting_ChatFontSmall")),Sa.createElement(oe,{className:"defaultFontSetting "+(i==fd.k_EChatFontSizeDefault?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(fd.k_EChatFontSizeDefault)}},Object(ua.b)("#FriendSetting_ChatFontDefault")),Sa.createElement(oe,{className:"largeFontSetting "+(i==fd.k_EChatFontSizeLarge?"Primary":"Off"),onClick:function(){return e.SetChatFontSize(fd.k_EChatFontSizeLarge)}},Object(ua.b)("#FriendSetting_ChatFontLarge")))),!this.props.bSubmitImmediate&&Sa.createElement(ce,{onCancel:this.props.onCancel}))},si.c([yn.a],t.prototype,"SetChatFontSize",null),t=si.c([up.observer],t)}(Im),km=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){var e=this.FriendsSettingsToggleRow,t=ai.a.IN_CLIENT?"#FriendSettings_RememberOpenChats_DescClient":"#FriendSettings_RememberOpenChats_Desc";return Sa.createElement(Zd,{className:"DialogBody",onSubmit:this.OnSubmit},Sa.createElement("div",{className:"SettingsGroup"},this.props.bShowPopupOpts&&Sa.createElement(e,{strName:"bAlwaysNewChatWindow",strLabel:Object(ua.b)("#FriendSettings_AlwaysNewChatWindow")}),Sa.createElement(e,{strName:"bDisableEmbedInlining",strLabel:Object(ua.b)("#FriendSettings_DisableEmbedInlining")}),Sa.createElement(e,{strName:"bRememberOpenChats",strLabel:Object(ua.b)("#FriendSettings_RememberOpenChats"),strDesc:Object(ua.b)(t)}),Sa.createElement(e,{strName:"b24HourClock",strLabel:Object(ua.b)("#FriendSettings_AlwaysUse24HourClock")})))},t=si.c([up.observer],t)}(Im),Dm=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){var e=this.FriendsSettingsToggleRow,t=this.FriendsSettingsCommunityPreferenceToggleRow;return Sa.createElement(Zd,{className:"DialogBody",onSubmit:this.OnSubmit},Sa.createElement("div",{className:"SettingsGroup"},Sa.createElement(t,{strName:"bParenthesizeNicknames",strLabel:Object(ua.b)("#FriendSettings_ParenthesizeNicknames")},Sa.createElement(Em,{bParenthesizeNicknames:this.state.communityPreferences.bParenthesizeNicknames})),Sa.createElement(e,{strName:"bHideOfflineFriendsInTagGroups",strLabel:Object(ua.b)("#FriendSettings_HideOfflineFriendsInCategories")}),Sa.createElement(e,{strName:"bHideCategorizedFriends",strLabel:Object(ua.b)("#FriendSettings_HideCategorizedFriends")}),Sa.createElement(e,{strName:"bForceAlphabeticFriendSorting",strLabel:Object(ua.b)("#FriendSettings_SortFriendsByStatus")}),this.props.bDoNotDisturbSupported&&Sa.createElement(e,{strName:"bSignIntoFriends",strLabel:Object(ua.b)("#FriendSettings_SignInToFriends")})))},t=si.c([up.observer],t)}(Im),Gm=function(e){function t(t){var i=e.call(this,t)||this;return i.m_rgMicOptions=[{label:"Default",data:"default"}],i.m_rgOutputOptions=[{label:"Default",data:"default"}],i.state={showAdvanced:!1,micOptionsReady:!1,outputOptionsReady:!1,hotkeyCapturing:!1},navigator.mediaDevices.enumerateDevices().then(i.gotMediaDevices).catch(i.gotMediaDevicesError),i}return si.d(t,e),t.prototype.gotMediaDevices=function(e){for(var t=0;t<e.length;++t){var i=e[t];"audioinput"==i.kind?"default"!=i.deviceId&&this.m_rgMicOptions.push({label:i.label,data:i.deviceId}):"audiooutput"==i.kind&&"default"!=i.deviceId&&this.m_rgOutputOptions.push({label:i.label,data:i.deviceId})}this.setState({micOptionsReady:!0}),this.setState({outputOptionsReady:!0})},t.prototype.gotMediaDevicesError=function(){this.setState({micOptionsReady:!0}),this.setState({outputOptionsReady:!0})},t.prototype.OKToSwitchAway=function(){return!0},t.prototype.onSubmit=function(){return!1},t.prototype.VoiceSettingsRefMarker=function(e){e&&e.ownerDocument&&(this.m_elVoiceSettingsMarkerScroll=e,this.m_window=e.ownerDocument.defaultView)},t.prototype.OnShowAdvancedSettings=function(){var e=this;this.setState({showAdvanced:!this.state.showAdvanced}),this.m_iTimeOutVoiceSettingsScroll=this.m_window.setTimeout(function(){e.m_elVoiceSettingsMarkerScroll&&e.state.showAdvanced&&e.m_elVoiceSettingsMarkerScroll.scrollIntoView({behavior:"smooth"}),e.m_window.clearTimeout(e.m_iTimeOutVoiceSettingsScroll)},200)},t.prototype.OnMicDropdownChanged=function(e){this.props.voiceStore.SetSelectedMic(e.data)},t.prototype.OnOutputDeviceDropdownChanged=function(e){this.props.voiceStore.SetSelectedOutput(e.data)},t.prototype.OnInputGainChanged=function(e){this.props.voiceStore.SetVoiceInputGain(this.props.voiceStore.ConvertSliderToGainValue(e,Xu.k_MaxInputOutputGainValue))},t.prototype.OnOutputGainChanged=function(e){this.props.voiceStore.SetVoiceOutputGain(this.props.voiceStore.ConvertSliderToGainValue(e,Xu.k_MaxInputOutputGainValue))},t.prototype.OnToggleEchoCancellation=function(e){this.props.voiceStore.SetUseEchoCancellation(e)},t.prototype.OnToggleNoiseCancellation=function(e){this.props.voiceStore.SetUseNoiseCancellation(e)},t.prototype.OnToggleAutoGainControl=function(e){this.props.voiceStore.SetUseAutoGainControl(e)},t.prototype.SetNoiseGateOff=function(){this.props.voiceStore.SetUseNoiseGateLevel(zu.k_ENoiseGateLevel_Off)},t.prototype.SetNoiseGateMedium=function(){this.props.voiceStore.SetUseNoiseGateLevel(zu.k_ENoiseGateLevel_Medium)},t.prototype.SetNoiseGateHigh=function(){this.props.voiceStore.SetUseNoiseGateLevel(zu.k_ENoiseGateLevel_High)},t.prototype.SetHotKeyCaptureState=function(e){0==e?(void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.UnregisterForMouseXButtonDown&&SteamClient.WebChat.UnregisterForMouseXButtonDown(),this.setState({hotkeyCapturing:!1})):(this.setState({hotkeyCapturing:!0}),void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.RegisterForMouseXButtonDown&&SteamClient.WebChat.RegisterForMouseXButtonDown(this.OnXButtonDown))},t.prototype.OnXButtonDown=function(e){e>0&&this.state.hotkeyCapturing&&(void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToTalkMouseButton&&(SteamClient.WebChat.SetPushToTalkMouseButton(e),wd.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1))},t.prototype.OnTogglePushToTalk=function(){if("undefined"!=typeof SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToTalkEnabled){var e=wd.VoiceStore.GetPushToTalkEnabled();SteamClient.WebChat.SetPushToTalkEnabled(!e),wd.VoiceStore.SetPushToTalkEnabled(!e)}},t.prototype.OnSetOpenMic=function(){"undefined"!=typeof SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToTalkEnabled&&(SteamClient.WebChat.SetPushToTalkEnabled(!1),wd.VoiceStore.SetPushToTalkEnabled(!1))},t.prototype.OnSetPushToTalk=function(){"undefined"!=typeof SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToTalkEnabled&&(SteamClient.WebChat.SetPushToTalkEnabled(!0),wd.VoiceStore.SetPushToTalkEnabled(!0))},t.prototype.OnSetPushToMute=function(){"undefined"!=typeof SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToMuteEnabled&&(SteamClient.WebChat.SetPushToMuteEnabled(!0),wd.VoiceStore.SetPushToMuteEnabled(!0))},t.prototype.AssignHotkey=function(){0==this.state.hotkeyCapturing&&this.SetHotKeyCaptureState(!0)},t.prototype.onMouseDown=function(e){0!=this.state.hotkeyCapturing&&0!=e.button&&this.onClick(e)},t.prototype.onClick=function(e){0!=this.state.hotkeyCapturing&&(void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToTalkMouseButton&&(SteamClient.WebChat.SetPushToTalkMouseButton(e.button),wd.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1),e.preventDefault(),e.stopPropagation())},t.prototype.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.onKeyDown=function(e){0!=this.state.hotkeyCapturing&&(void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToTalkHotKey&&(SteamClient.WebChat.SetPushToTalkHotKey(e.keyCode),wd.VoiceStore.RefreshPushToTalkKeySettings()),this.SetHotKeyCaptureState(!1),e.preventDefault(),e.stopPropagation())},t.prototype.OnPPTSoundChecked=function(e){wd.VoiceStore.SetPushToTalkOrMuteSoundsEnabled(e)},t.prototype.CopyVoiceLogsToClipboard=function(){var e=wd.ChatStore.VoiceChat.GetVoiceLogs(),t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.warn("Copy voice logs to clipboard failed.",e)}finally{document.body.removeChild(t)}},t.prototype.render=function(){var e=this,t=wd.VoiceStore.GetPushToTalkEnabled(),i=wd.VoiceStore.GetPushToMuteEnabled(),n=!1,r=(wd.VoiceStore.GetPushToTalkHotKeyVK(),wd.VoiceStore.GetPushToTalkHotKeyDisplayString()),o=Object(ua.b)("#VoicePushToTalkAssigned"),a=Object(ua.b)("#VoicePushToMuteAssigned"),s=wd.VoiceStore.GetPushToTalkOrMuteSoundsEnabled();"undefined"!=typeof SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.GetPushToTalkEnabled&&(n=!0),this.state.hotkeyCapturing&&(o=Object(ua.b)("#VoicePushToTalkPressHotKey"));var c=this.props.voiceStore.GetUseNoiseGateLevel();return Sa.createElement(Zd,{className:"DialogBody VoiceSettings",onContextMenu:this.onContextMenu,onSubmit:this.onSubmit,onMouseDown:this.onMouseDown,onClick:this.onClick,onKeyDown:this.onKeyDown},Sa.createElement("div",{className:"_FixedHeight"},this.state.micOptionsReady&&Sa.createElement(op,{strClassName:"InputDevice",label:Object(ua.b)("#VoiceDevice"),rgOptions:this.m_rgMicOptions,strDefaultLabel:Object(ua.b)("#DefaultMic"),selectedOption:this.props.voiceStore.GetSelectedMic(),onChange:this.OnMicDropdownChanged}),!this.state.micOptionsReady&&Sa.createElement(op,{label:Object(ua.b)("#VoiceDevice"),rgOptions:this.m_rgMicOptions,strDefaultLabel:Object(ua.b)("#MicLoading...")}),this.state.outputOptionsReady&&Sa.createElement(op,{label:Object(ua.b)("#VoiceOutputDevice"),rgOptions:this.m_rgOutputOptions,strDefaultLabel:Object(ua.b)("#DefaultOutputDevice"),selectedOption:this.props.voiceStore.GetSelectedOutputDevice(),onChange:this.OnOutputDeviceDropdownChanged}),!this.state.outputOptionsReady&&Sa.createElement(op,{label:Object(ua.b)("#VoiceOutputDevice"),rgOptions:this.m_rgOutputOptions,strDefaultLabel:Object(ua.b)("#OutputDeviceLoading...")}),Sa.createElement(jd,null,Object(ua.b)("#VoiceVolume")),Sa.createElement(Jd,{className:"DialogLabelStrong"},Sa.createElement(rp,{min:0,max:100,label:Object(ua.b)("#VoiceInputGain"),explainer:Object(ua.b)("#VoiceInputGainExplainer"),value:this.props.voiceStore.ConvertGainValueToSliderValue(this.props.voiceStore.GetVoiceInputGain(),Xu.k_MaxInputOutputGainValue),onChange:this.OnInputGainChanged}),Sa.createElement(rp,{min:0,max:100,label:Object(ua.b)("#VoiceOutputGain"),explainer:Object(ua.b)("#VoiceOutputGainExplainer"),value:this.props.voiceStore.ConvertGainValueToSliderValue(this.props.voiceStore.GetVoiceOutputGain(),Xu.k_MaxInputOutputGainValue),onChange:this.OnOutputGainChanged})),"undefined"!=typeof SteamClient&&void 0!=SteamClient.WebChat&&void 0!=SteamClient.WebChat.SetPushToMuteEnabled?Sa.createElement("div",{className:"_DialogSection pushToTalkSection"+(n?"":" disabled")},Sa.createElement(jd,null,Object(ua.b)("#VoiceTransmissionType_Label"),!n&&Sa.createElement("span",{className:"disabledNotice"}," (",Object(ua.b)("#VoiceTransmissionType_Disabled"),") ")),Sa.createElement(Yd,{className:"FriendsSettingsVoiceTransmissionType_ButtonRow"},Sa.createElement(oe,{className:t||i?"Off":"Primary",onClick:this.OnSetOpenMic},Object(ua.b)("#VoiceTransmissionType_OpenMic")),Sa.createElement(oe,{className:t?"Primary":"Off",disabled:!n,onClick:this.OnSetPushToTalk},Object(ua.b)("#VoiceTransmissionType_PushToTalk")),Sa.createElement(oe,{className:i?"Primary":"Off",disabled:!n,onClick:this.OnSetPushToMute},Object(ua.b)("#VoiceTransmissionType_PushToMute")),Sa.createElement("div",{className:"pushToKeyAssignContainer displayColumn"+(t||i?" showPTTOptions":"")},Sa.createElement("div",{className:"displayRow"},Sa.createElement(jd,{className:"DialogLabelExplainer"},t?o:a),Sa.createElement(oe,{disabled:!n,className:this.state.hotkeyCapturing&&"capturingKey",onClick:this.AssignHotkey},r)),Sa.createElement("div",{className:"PPTSoundOption DialogLabelExplainer"},Sa.createElement(tp,{onChange:function(t){e.OnPPTSoundChecked(t)},label:Object(ua.b)("#VoicePushToSomethingSoundOption"),checked:s}))))):Sa.createElement("div",{className:"_DialogSection pushToTalkSection"+(n?"":" disabled")},Sa.createElement(jd,null,Object(ua.b)("#VoiceTransmissionType"),!n&&Sa.createElement("span",{className:"disabledNotice"}," (",Object(ua.b)("#g_DisabledOnWeb"),") ")),Sa.createElement(np,{disabled:!n,label:Object(ua.b)("#VoiceTransmissionTypeExplainer"),checked:t,onChange:this.OnTogglePushToTalk}),t&&Sa.createElement("div",{className:"pushtoTalkKeyAssignContainer displayRow"},Sa.createElement(jd,{className:"DialogLabelExplainer"},o),Sa.createElement(oe,{disabled:!n,className:this.state.hotkeyCapturing&&"capturingKey",onClick:this.AssignHotkey},r))),Sa.createElement("div",{className:"_DialogSection"},Sa.createElement(jd,null,Object(ua.b)("#VoiceTransmisionThreshold")),Sa.createElement(jd,{className:"DialogLabelStrong"},Object(ua.b)("#VoiceTransmissionThresholdExplainer")),Sa.createElement(Yd,{className:"FriendsSettingsFlashSection_ButtonRow"},Sa.createElement(oe,{className:c<=zu.k_ENoiseGateLevel_Low?"Primary":"Off",onClick:this.SetNoiseGateOff},Object(ua.b)("#VoiceTransmissionThresholdOff")),Sa.createElement(oe,{className:c==zu.k_ENoiseGateLevel_Medium?"Primary":"Off",onClick:this.SetNoiseGateMedium},Object(ua.b)("#VoiceTransmissionThresholdMedium")),Sa.createElement(oe,{className:c==zu.k_ENoiseGateLevel_High?"Primary":"Off",onClick:this.SetNoiseGateHigh},Object(ua.b)("#VoiceTransmissionThresholdHigh"))),Sa.createElement(jd,{className:"DialogLabelExplainer"},Object(ua.b)("#VoiceTransmissionThresholdRecommended"))),Sa.createElement(oe,{className:"advancedSettingsButton",onClick:this.OnShowAdvancedSettings},this.state.showAdvanced?Object(ua.b)("#VoiceHideAdvancedSettings"):Object(ua.b)("#VoiceShowAdvancedSettings")),Sa.createElement("div",{className:"advancedSettings"+(this.state.showAdvanced?" showAdvanced":"")},Sa.createElement(jd,null,Object(ua.b)("#VoiceAdvancedSettings")),Sa.createElement(jd,{className:"DialogLabelExplainer Left"},Object(ua.b)("#VoiceAdvancedSettingsExplainer")),Sa.createElement(np,{label:Object(ua.b)("#VoiceEchoCancellation"),checked:this.props.voiceStore.GetUseEchoCancellation(),onChange:this.OnToggleEchoCancellation}),Sa.createElement(np,{label:Object(ua.b)("#VoiceNoiseCancellation"),checked:this.props.voiceStore.GetUseNoiseCancellation(),onChange:this.OnToggleNoiseCancellation}),Sa.createElement(np,{label:Object(ua.b)("#VoiceAutoGainControl"),checked:this.props.voiceStore.GetUseAutoGainControl(),onChange:this.OnToggleAutoGainControl}),Sa.createElement(oe,{className:"copyVoiceLogsButton",onClick:this.CopyVoiceLogsToClipboard},Object(ua.b)("#CopyVoiceChatLogs"))),Sa.createElement("div",{className:"scrollToRef",ref:this.VoiceSettingsRefMarker})))},si.c([yn.a],t.prototype,"gotMediaDevices",null),si.c([yn.a],t.prototype,"gotMediaDevicesError",null),si.c([yn.a],t.prototype,"onSubmit",null),si.c([yn.a],t.prototype,"VoiceSettingsRefMarker",null),si.c([yn.a],t.prototype,"OnShowAdvancedSettings",null),si.c([yn.a],t.prototype,"OnMicDropdownChanged",null),si.c([yn.a],t.prototype,"OnOutputDeviceDropdownChanged",null),si.c([yn.a],t.prototype,"OnInputGainChanged",null),si.c([yn.a],t.prototype,"OnOutputGainChanged",null),si.c([yn.a],t.prototype,"OnToggleEchoCancellation",null),si.c([yn.a],t.prototype,"OnToggleNoiseCancellation",null),si.c([yn.a],t.prototype,"OnToggleAutoGainControl",null),si.c([yn.a],t.prototype,"SetNoiseGateOff",null),si.c([yn.a],t.prototype,"SetNoiseGateMedium",null),si.c([yn.a],t.prototype,"SetNoiseGateHigh",null),si.c([yn.a],t.prototype,"OnXButtonDown",null),si.c([yn.a],t.prototype,"OnTogglePushToTalk",null),si.c([yn.a],t.prototype,"OnSetOpenMic",null),si.c([yn.a],t.prototype,"OnSetPushToTalk",null),si.c([yn.a],t.prototype,"OnSetPushToMute",null),si.c([yn.a],t.prototype,"AssignHotkey",null),si.c([yn.a],t.prototype,"onMouseDown",null),si.c([yn.a],t.prototype,"onClick",null),si.c([yn.a],t.prototype,"onContextMenu",null),si.c([yn.a],t.prototype,"onKeyDown",null),si.c([yn.a],t.prototype,"OnPPTSoundChecked",null),si.c([yn.a],t.prototype,"CopyVoiceLogsToClipboard",null),t=si.c([up.observer],t)}(sp),Nm=function(e){function t(t){return e.call(this,t,Object(ua.b)("#Settings"))||this}return si.d(t,e),t.prototype.SaveFriendSettings=function(e,t){wd.SettingsStore.BUpdateFriendsSettings(e),wd.SettingsStore.SetCommunityPreferences(t)},t.prototype.render=function(){var e=wd.UIStore.GetPerContextChatData(this.props.browserContext),t={friendsSettingsInitial:wd.SettingsStore.FriendsSettings,communityPreferencesInitial:wd.SettingsStore.CommunityPreferences,onCancel:this.props.closeModal,onSubmit:this.SaveFriendSettings,bShowClientOpts:ai.a.IN_CLIENT,bShowPopupOpts:e.BUsePopups(),bShowGroupOpts:!1,bSubmitImmediate:!0,bDoNotDisturbSupported:ai.a.IN_CLIENT&&wd.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")},i={title:Object(ua.b)("#FriendSettings_Title"),className:"FriendSettingsContainer",pages:[{title:Object(ua.b)("#FriendSettings_Friends"),uniqueName:"FriendSettings_Friends",content:Sa.createElement(Dm,si.a({},t))},{title:Object(ua.b)("#FriendSettings_Chat"),uniqueName:"FriendSettings_Chat",content:Sa.createElement(km,si.a({},t))},{title:Object(ua.b)("#FriendSettings_SizeAndScaling"),uniqueName:"FriendSettings_SizeAndScaling",content:Sa.createElement(Tm,si.a({},t))},{title:Object(ua.b)("#FriendSettings_Notifications"),uniqueName:"FriendSettings_Notifications",content:Sa.createElement(Lm,si.a({},t))},{title:Object(ua.b)("#FriendSettings_Voice"),uniqueName:"FriendSettings_Voice",content:Sa.createElement(Gm,{onCancel:this.props.closeModal,voiceStore:wd.ChatStore.VoiceChat})}]};return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(cp,si.a({},i)))},t=si.c([up.observer],t)}(Sa.Component),Lm=function(e){function t(t){var i=e.call(this,t)||this;return i.m_rgOptions=$e(!1),i}return si.d(t,e),t.prototype.FriendsSettingsNotificationRow=function(e){var t=this.FriendsSettingsCheckbox;return Sa.createElement("div",null,Sa.createElement("div",{className:"FriendsSettingsNotificationRow"},Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},e.strLabel),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Sa.createElement(t,{strName:e.strNameShow})),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Sa.createElement(t,{strName:e.strNameSound}))))},t.prototype.render=function(){var e=this.state.friendSettings,t=this.FriendsSettingsNotificationRow;return Sa.createElement(Zd,{className:"DialogBody",onSubmit:this.OnSubmit},Sa.createElement("div",{className:"SettingsGroup"},Sa.createElement("div",{className:"FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"},Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Label"},Object(ua.b)("#FriendSettings_Notification_Table_Label")),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(ua.b)("#FriendSettings_Notification_Table_Show")),Sa.createElement("div",{className:"FriendsSettingsNotificationRow_Checkbox"},Object(ua.b)("#FriendSettings_Notification_Table_Play"))),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_Notification_FriendJoins"),strNameShow:"bNotifications_ShowIngame",strNameSound:"bSounds_PlayIngame"}),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_Notification_FriendOnline"),strNameShow:"bNotifications_ShowOnline",strNameSound:"bSounds_PlayOnline"}),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_Notification_ChatMessage"),strNameShow:"bNotifications_ShowMessage",strNameSound:"bSounds_PlayMessage"}),Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_Notification_ChatRoomNotification"),strNameShow:"bNotifications_ShowChatRoomNotification",strNameSound:"bSounds_PlayChatRoomNotification"}),this.props.bShowGroupOpts&&Sa.createElement(t,{strLabel:Object(ua.b)("#FriendSettings_Notification_GroupEvent"),strNameShow:"bNotifications_EventsAndAnnouncements",strNameSound:"bSounds_EventsAndAnnouncements"})),this.props.bShowPopupOpts&&this.props.bShowClientOpts&&Sa.createElement("div",{className:"SettingsGroup"},Sa.createElement("div",{className:"FriendsSettingsFlashSection"},Sa.createElement(jd,{className:"FriendsSettingsFlashSection_Header"},Object(ua.b)("#FriendSettings_Flash_Header")),Sa.createElement(Yd,{className:"FriendsSettingsFlashSection_ButtonRow"},Sa.createElement(oe,{className:0==e.nChatFlashMode?"Primary":"Off",value:0,onClick:this.HandleRadioChange},Object(ua.b)("#FriendSettings_Flash_Always")),Sa.createElement(oe,{className:1==e.nChatFlashMode?"Primary":"Off",value:1,onClick:this.HandleRadioChange},Object(ua.b)("#FriendSettings_Flash_Minimized")),Sa.createElement(oe,{className:2==e.nChatFlashMode?"Primary":"Off",value:2,onClick:this.HandleRadioChange},Object(ua.b)("#FriendSettings_Flash_Never"))))),!this.props.bSubmitImmediate&&Sa.createElement(ce,{onCancel:this.props.onCancel}))},si.c([yn.a],t.prototype,"FriendsSettingsNotificationRow",null),t=si.c([up.observer],t)}(Im),Am=(Sa.createElement("div",{className:"notificationChimeAndToast FriendsSettingsNotificationRow"},Sa.createElement(tp,null),Sa.createElement(tp,null)),function(e){function t(t){var i=e.call(this,t)||this;return i.m_rgSelectOptions=$e(!1),i.state={cSavesInFlight:0},i}return si.d(t,e),t.prototype.IncrementSavesInFlight=function(){this.setState(function(e){return{cSavesInFlight:e.cSavesInFlight+1}})},t.prototype.DecrementSavesInFlight=function(){this.setState(function(e){return AssertMsg(e.cSavesInFlight>0,"expected "+e.cSavesInFlight+" > 0"),{cSavesInFlight:e.cSavesInFlight-1}})},t.prototype.WrapSavePromise=function(e){this.IncrementSavesInFlight(),e.then(this.DecrementSavesInFlight,this.DecrementSavesInFlight)},t.prototype.OnGroupNotificationLevelChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(e))},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.WrapSavePromise(this.props.group.SetNotificationPreferences(void 0,void 0,e))},t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnFriendsSettingsClicked=function(e){Ze(Xt(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.render=function(){var e=this,t=this.props.group,i=t.chatRoomList.filter(function(e){return e.BShouldTrackUnreadMessages()}),n=i.length>0;1==i.length&&0==i[0].GetDesktopNotificationLevelSetting()&&0==i[0].GetMobileNotificationLevelsetting()&&(n=!1);var r;if(n){var o=i.map(function(i){return Sa.createElement(Pm,{fnHandleSave:e.WrapSavePromise,group:t,chat:i,key:i.unique_id})});r=Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"notificationsChannelListContainer\t"},o))}return Sa.createElement(pe,{onEscKeypress:this.DismissDialog},Sa.createElement(ne,{classNameContent:"ChatRoomNotificationSettingsDialog"},Sa.createElement(Ud,null,Object(ua.b)("#NotificationSettings_Title")),Sa.createElement(jd,null,Object(ua.d)("#NotificationSettings_SubTitle",Sa.createElement("span",{className:"whiteText"},t.name))),Sa.createElement(Hd,null,Sa.createElement(jd,{className:"NotificationSettingsSavingIndicator "+(this.state.cSavesInFlight?"Saving":"")},"Saving ..."),Sa.createElement(xm,{drop_down_options:this.m_rgSelectOptions,get_notification_level:function(t){return e.props.group.GetDesktopNotificationLevel(t)},set_notification_level:this.OnGroupNotificationLevelChanged,get_muted:function(){return e.props.group.BIsUnreadIndicatorMuted()},set_muted:this.OnShowUnreadIndicatorChanged}),n&&Sa.createElement(Sa.Fragment,null,Sa.createElement(se,null),Sa.createElement(Jd,{className:"notificationsChannelHeader"},Sa.createElement(jd,{className:"NotificationChannelNameLabel"},Object(ua.b)("#GroupSettings_Channels_TextChannels")),Sa.createElement(jd,{className:"OverrideChannelLabel"},Object(ua.b)("#NotificationSetting_ShortLabel"))),Sa.createElement(qd,{className:"scrollMaskVertical"},r))),Sa.createElement(Vd,null,Object(ua.d)("#NotificationSetting_Footer_Desc",Sa.createElement("span",{className:"textLink",onClick:this.OnFriendsSettingsClicked},Object(ua.b)("#FriendSettings_Title"))))))},si.c([yn.a],t.prototype,"IncrementSavesInFlight",null),si.c([yn.a],t.prototype,"DecrementSavesInFlight",null),si.c([yn.a],t.prototype,"WrapSavePromise",null),si.c([yn.a],t.prototype,"OnGroupNotificationLevelChanged",null),si.c([yn.a],t.prototype,"OnShowUnreadIndicatorChanged",null),si.c([yn.a],t.prototype,"DismissDialog",null),si.c([yn.a],t.prototype,"OnFriendsSettingsClicked",null),t=si.c([up.observer],t)}(Sa.Component)),Pm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_rgSelectOptions=$e(),t}return si.d(t,e),t.prototype.OnChatNotificationLevelChanged=function(e){this.props.fnHandleSave(this.props.chat.SetNotificationPreferences(e.data))},t.prototype.render=function(){var e=this.props.chat;return e.GetDesktopNotificationLevelSetting(),Sa.createElement(Yd,{className:"notificationsChannel"},Sa.createElement("div",{className:"NotificationChannelName"},e.name),Sa.createElement(op,{rgOptions:this.m_rgSelectOptions,selectedOption:e.GetDesktopNotificationLevelSetting(),onChange:this.OnChatNotificationLevelChanged}))},si.c([yn.a],t.prototype,"OnChatNotificationLevelChanged",null),t=si.c([up.observer],t)}(Sa.Component),xm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnNotificationLevelChanged=function(e){this.props.set_notification_level(e.data)},t.prototype.OnShowUnreadIndicatorChanged=function(e){this.props.set_muted(!e)},t.prototype.render=function(){var e=this.props.get_notification_level(!0);this.props.bIsDefault&&0==e&&(e=4);var t=this.props.get_notification_level();return this.props.bIsDefault&&0==t&&(t=4),Sa.createElement("div",{className:"ChatRoomNotificationSettingsDialog"},Sa.createElement("div",{className:"notificationGeneralHeader"+(this.props.bIsDefault?" isDefault":"")},Sa.createElement(jd,null,this.props.bIsDefault?Object(ua.b)("#NotificationSetting_DefaultLabel"):Object(ua.b)("#NotificationSetting_Label"))),Sa.createElement("div",{style:{marginBottom:16}},Sa.createElement("div",{className:"notificationRow"},Sa.createElement(op,{rgOptions:this.props.drop_down_options,selectedOption:e,onChange:this.OnNotificationLevelChanged})),4!=t&&Sa.createElement("div",{className:"indicatorOptionContainer"},Sa.createElement(np,{classname:"indicatorOption",label:Object(ua.b)("#NotificationSetting_Indicator"),onChange:this.OnShowUnreadIndicatorChanged,checked:!this.props.get_muted()}),Sa.createElement("div",{className:"ChatUnreadMessageIndicator"+(this.props.get_muted()?" Hidden":"")},Sa.createElement("div",{className:"chatUnreadCircle"})))))},si.c([yn.a],t.prototype,"OnNotificationLevelChanged",null),si.c([yn.a],t.prototype,"OnShowUnreadIndicatorChanged",null),t=si.c([up.observer],t)}(Sa.Component),zm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return t?"string"==typeof t?e?e+" "+t:t:"object"==typeof t?e?e+" "+et(t):et(t):e:e},"")},Um=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props,t=e.src,i=e.duration,n=e.className,r=si.f(e,["src","duration","className"]),o={backgroundImage:"url("+t+")",transitionDuration:i/1e3+"s"};return Sa.createElement(Jp.TransitionGroup,si.a({},r,{className:zm("crossfade",n)}),Sa.createElement(Jp.CSSTransition,{classNames:"crossfade-anim",timeout:i||500,key:t,style:o},Sa.createElement("div",{className:"crossfade-img"})))},t}(Sa.Component),Vm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.InviteFriend=function(e){ze(Xt(this,e),e.currentTarget.ownerDocument.defaultView,this.props.groupView.GetGroup())},t.prototype.OpenSettings=function(e){Xe($t(e),this.props.groupView)},t.prototype.OpenNotificationPreferences=function(e){Qe($t(e),this.props.groupView)},t.prototype.OnContextMenu=function(e){je(e,this.props.groupView.GetGroup(),{is_chat_window:!0})},t.prototype.render=function(){var e=this.props.groupView,t=e.GetGroup(),i=t.name,n=t.tagline,r=!1;t.readyToRender&&(r=t.BCanInvite());var o=IsFeatureBroadcastEnabled()&&e.GetGroup().watching_broadcast_steamid&&!e.isBroadcastShown;return Sa.createElement("div",{className:"chatRoomHeader"},Sa.createElement("div",{className:"chatRoomGroupHeader"+(o?" notifyBroadcast":""),onContextMenu:this.OnContextMenu},Sa.createElement(Jm,{group:t}),Sa.createElement("div",{className:"chatRoomGroupHeaderNameandTag"},Sa.createElement("div",{className:"chatRoomGroupHeaderName"},i),Sa.createElement("div",{className:"chatRoomGroupHeaderTagline"},n)),Sa.createElement("div",{className:"chatRoomGroupSpacer"}),t.readyToRender&&Sa.createElement(Sa.Fragment,null,o&&this.RenderBroadcastPeek(),Sa.createElement("div",{className:"chatRoomGroupControls"},Sa.createElement("div",{className:"chatRoomOptions"},Sa.createElement("div",{className:"chatRoomButton ManageNotifications",onClick:this.OpenNotificationPreferences,title:Object(ua.b)("#Tooltip_NotificationSettings")},Sa.createElement(Id.c,null)),r&&Sa.createElement("div",{className:"chatRoomButton InviteToGroupChat",onClick:this.InviteFriend,title:Object(ua.b)("#Tooltip_InviteToGroup")},Sa.createElement(Id.x,null)),!r&&Sa.createElement("div",{className:"chatRoomButton InviteToGroupChat Disabled",onClick:function(e){},title:Object(ua.b)("#Tooltip_InviteToGroup_Denied")},Sa.createElement(Id.x,null)),Sa.createElement("div",{className:"chatRoomButton GroupChatSettings",onClick:this.OpenSettings,title:Object(ua.b)("#Tooltip_GroupChatSettings")},Sa.createElement(Id.e,null))),Sa.createElement("div",{className:"chatRoomGroupStats"},Sa.createElement(Wm,{group:t}),Sa.createElement(qm,{group:t}),Sa.createElement(Hm,{group:t}))))))},t.prototype.RenderBroadcastPeek=function(){var e=this.props,t=e.groupView,i=e.onBroadcastPreviewClick,n=t.GetGroup(),r=n.watching_broadcast_steamid.ConvertTo64BitString(),o=n.BCanIAssociateBroadcast()?function(){return ge(window,Object(ua.b)("#Broadcast_EndWatchParty"),Object(ua.b)("#Broadcast_EndWatchPartyPrompt"),Object(ua.b)("#Broadcast_EndWatchParty")).then(function(){return n.SetChatRoomGroupWatchingBroadcast(void 0)})}:void 0;return Sa.createElement(jm,{broadcastId:r,key:r,onClick:i,onRequestClose:o})},si.c([yn.a],t.prototype,"InviteFriend",null),si.c([yn.a],t.prototype,"OpenSettings",null),si.c([yn.a],t.prototype,"OpenNotificationPreferences",null),si.c([yn.a],t.prototype,"OnContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),jm=function(e){function t(t){var i=e.call(this,t)||this;return i.state={info:Hl.StartInfo(t.broadcastId)},i}return si.d(t,e),t.prototype.componentWillUnmount=function(){Hl.StopInfo(this.state.info)},t.prototype.OnCloseClick=function(e){this.props.onRequestClose&&(e.stopPropagation(),this.props.onRequestClose())},t.prototype.render=function(){var e=this.props,t=e.onClick,i=e.onRequestClose,n=this.state.info,r=n.m_strAppTitle,o=n.m_strThumbnailUrl,a=n.m_strTitle,s=new hi.a(this.props.broadcastId),c=a;return a||(c=Object(ua.b)("#PersonaStateWatchingBroadcast_Player",wd.FriendStore.GetPlayer(s.GetAccountID()).display_name)),Sa.createElement("div",{className:"broadcastInfoContainer",onClick:t},Sa.createElement("div",{className:"broadcastDetails"},Sa.createElement("div",{className:"nowWatching"},Object(ua.b)("#Broadcast_NowWatching")),Sa.createElement("div",{className:"gameTitle"},r),Sa.createElement("div",{className:"broadcastTitle"},c)),Sa.createElement("div",{className:"thumbnail"},o&&Sa.createElement(Um,{className:"thumbnailImg",src:o,duration:2500})),i&&Sa.createElement("div",{className:"actions",onClick:this.OnCloseClick},Sa.createElement(Id._5,null)))},si.c([yn.a],t.prototype,"OnCloseClick",null),t=si.c([up.observer],t)}(Sa.Component),Wm=Object(up.observer)(function(e){var t=e.group;return Sa.createElement("div",{className:"statMemberStat statMembersTotal"},Sa.createElement("div",{className:"statCircle"}),Object(ua.c)("#Chat_Members",t.memberCountTotal))}),Hm=Object(up.observer)(function(e){var t=e.group;return 0==t.memberCountInGame?null:Sa.createElement("div",{className:"statMemberStat statMembersInGame",title:Object(ua.c)("#Chat_Members_InGame_Tooltip",t.memberCountInGame)},Sa.createElement("div",{className:"statCircle"}),t.memberCountInGame)}),qm=Object(up.observer)(function(e){var t=e.group;return 0==t.memberCountOnline?null:Sa.createElement("div",{className:"statMemberStat statMembersOnline",title:Object(ua.c)("#Chat_Members_Online_Tooltip",t.memberCountOnline)},Sa.createElement("div",{className:"statCircle"}),t.memberCountOnline)}),Km=Object(up.observer)(function(e){if(!e.small&&!e.micro&&e.clan.BIsOGG()&&e.clan.GetOGGAppID()){var t=wd.AppInfoStore.GetAppInfo(e.clan.GetOGGAppID());return Sa.createElement("div",{className:"ChatRoomGroupOGGAvatar "+(e.large?"Large":"")},Sa.createElement("img",{className:"OGGAvatar",src:t.header_image_url}))}var i="";return e.micro?i="Micro":e.small?i="Small":e.large&&(i="Large"),Sa.createElement("div",{className:"ChatRoomGroupAvatar "+i},Sa.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:e.large?e.clan.avatar_url_full:e.clan.avatar_url_medium}))}),Jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this,t=this.props.group;if(t&&t.BIsClanChatRoom()){var i=wd.FriendStore.ClanStore.GetClan(t.GetClanID());return Sa.createElement(Km,{clan:i,micro:this.props.micro,small:this.props.small,large:this.props.large})}var n="";if(this.props.micro?n="Micro":this.props.small?n="Small":this.props.large&&(n="Large"),t&&!t.IsNamedGroupChat()){var r=t.members_to_highlight,o=r.members,a=r.remaining_count;if(o.length){var s=o.length+(a?1:0);return Sa.createElement("div",{className:"ChatRoomMultiFriendAvatar With"+s+"Items "+n},o.map(function(t,i){return Sa.createElement("img",{src:e.props.large?t.persona.avatar_url_medium:t.persona.avatar_url,key:i,className:"MultiAvatar Index"+i})}),a>0&&Sa.createElement("div",{className:"ChatRoomMultiFriendMore MultiAvatar Index3"},"+",a))}}if(t&&t.hasAvatar)return Sa.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar "+n},Sa.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:t.avatar_url_full}));var c="";t?c=t.name:this.props.name&&(c=this.props.name);var l=K(c),u="ChatRoomGroupAvatar "+n;return H(l)&&(u+=" EmojiInitials"),Sa.createElement("div",{className:u},Sa.createElement("div",{className:"ChatRoomGroupAvatar_initials"},l))},t=si.c([up.observer],t)}(Sa.Component),Ym=function(e){function t(t){var i=e.call(this,t)||this;return i.m_iActiveDragIndex=void 0,i.m_ActiveDrag=void 0,i.m_ActiveDragOut=void 0,i.m_bGhostIsDupe=!1,i.m_rgFavoriteElementRefs=[],i.m_bAcceptDrag=!1,i.state={bHintDismissed:gy.UIDisplayPrefs.bFavoritesHintDismissed},i}return si.d(t,e),t.prototype.DismissFavoritesHint=function(){this.setState({bHintDismissed:!0}),gy.SetUIDisplayPref("bFavoritesHintDismissed",!0)},t.prototype.render=function(){var e=this,t=this.props.FavoritesStore.favorites,i=this.m_ActiveDrag,n="quickAccessFriends emptyQuickAccess";if(this.state.bHintDismissed&&(n+=" hintDismissed"),t.length||i){var r=t,o=wd.SettingsStore.FriendsSettings.bCompactQuickAccess;i&&(this.m_bGhostIsDupe&&r.findIndex(function(e){return C(e,i)}),void 0===this.m_iActiveDragIndex||this.m_iActiveDragIndex>=r.length?r=r.concat([si.a({isActiveDrag:!0},i)]):(this.m_iActiveDragIndex,r=r.slice(0,this.m_iActiveDragIndex).concat([si.a({isActiveDrag:!0},i)],r.slice(this.m_iActiveDragIndex))));var a=r.map(function(t,n){var r;if(t.friend)r="f"+t.friend.accountid;else if(t.clan)r="cl"+t.clan.clanid;else{if(!t.chat)return null;r="cg"+t.chat.GetGroupID()}var o=e.m_bGhostIsDupe&&!t.isActiveDrag&&C(i,t),a=t.isActiveDrag;return a&&(r+="dragGhost"),Sa.createElement(Xm,{favorite:t,index:n,friendRenderContext:e.GetFriendRenderContext(),key:r,bIsDragGhost:a,bIsDragOutGhost:o,ref:e.OnFavoriteElementRef.bind(e,n)})}),s="quickAccessFriends";return o&&(s+=" compactQuickAccess"),Sa.createElement(lp,si.a({className:s},this.GetDragDropProps()),a,Sa.createElement("div",{className:"dropTargetBox"}))}return Sa.createElement(lp,si.a({className:n},this.GetDragDropProps()),Sa.createElement("div",{className:"quickAccessFriendsMessage"},Object(ua.b)("#FriendsList_Favorites_Hint")),!this.state.bHintDismissed&&Sa.createElement("div",{className:"quickAccessFriendsMessageDismiss",onClick:this.DismissFavoritesHint},Object(ua.b)("#Generic_Got_It")),Sa.createElement("div",{className:"dropTargetBox"}))},t.prototype.OnFavoriteElementRef=function(e,t){this.m_rgFavoriteElementRefs[e]=t},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext||(this.m_FriendRenderContext={chatContext:"friendslist"}),this.m_FriendRenderContext},t.prototype.GetDragDropProps=function(){var e={rgAcceptedTypes:["friend","chattab","chatroomgroup","clan"]};return e.fnDragEnter=this.OnDragEnter,e.fnDragOver=this.OnDragOver,e.fnDragLeave=this.OnDragLeave,e.fnDrop=this.OnDrop,e.onDragStart=this.OnDragStart,e.onDragEndCapture=this.OnDragEnd,e},t.prototype.OnDragStart=function(e){var t=gy.DragDropManager.GetDragData();!t||"friend"!=t.type&&"chatroomgroup"!=t.type&&"clan"!=t.type||(t.is_favorite=!0,this.m_ActiveDragOut=this.FindItemFromDrag(t))},t.prototype.OnDragEnd=function(e){var t=gy.DragDropManager.GetDragData(),i=this.FindItemFromDrag(t);if(i&&"is_favorite"in t&&t.is_favorite&&!gy.DragDropManager.BWasDropConsumed()){var n=e.currentTarget.getBoundingClientRect();Object(Ad.j)(n,e.clientX,e.clientY)>100&&(this.props.FavoritesStore.RemoveFromFavorites(i),gy.DragDropManager.EndDrag())}this.m_ActiveDragOut=void 0},t.prototype.FindItemFromDrag=function(e){var t,i,n,r;if("friend"==e.type)i=e.friend;else if("chattab"==e.type){var o=e.tab;if(o instanceof tl){var a=o.GetGroup();a.BIsClanChatRoom()&&(n=wd.FriendStore.ClanStore.GetClan(a.GetClanID())),r=a}else{var s=o.GetChatView();i=s.chat.chat_partner}}else"chatroomgroup"==e.type?r=e.group:"clan"==e.type&&(n=e.clan);return i?i.is_friend&&(t={friend:i}):n?t={clan:n}:r&&(t={chat:r}),t},t.prototype.OnDragEnter=function(e,t){var i=this.FindItemFromDrag(e);return i&&!C(this.m_ActiveDrag,i)&&(this.m_ActiveDrag=i,this.m_bGhostIsDupe=this.props.FavoritesStore.BIsFavorited(i)),!0},t.prototype.OnDragOver=function(e){for(var t,i,n=0,r=this.m_rgFavoriteElementRefs;n<r.length;n++){var o=r[n],a=o&&o.GetBoundingClientRect();if(a){var s=Object(Ad.j)(a,e.clientX,e.clientY);(void 0===i||s<i)&&(i=s,t=o)}}t&&(this.m_iActiveDragIndex=t.props.index),e.dataTransfer.dropEffect="copy"},t.prototype.ResetDragState=function(){this.m_ActiveDrag=void 0,this.m_ActiveDragOut=void 0,this.m_iActiveDragIndex=void 0},t.prototype.OnDragLeave=function(){this.m_ActiveDrag&&this.ResetDragState()},t.prototype.OnDrop=function(e,t){var i=this.FindItemFromDrag(e);this.m_ActiveDrag,i?(gy.DragDropManager.SetDropConsumed(),this.props.FavoritesStore.AddToFavorites(i,this.m_iActiveDragIndex),this.ResetDragState()):this.m_ActiveDrag&&this.ResetDragState()},si.c([_i.observable],t.prototype,"m_iActiveDragIndex",void 0),si.c([_i.observable],t.prototype,"m_ActiveDrag",void 0),si.c([_i.observable],t.prototype,"m_ActiveDragOut",void 0),si.c([yn.a],t.prototype,"DismissFavoritesHint",null),si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDrop",null),t=si.c([up.observer],t)}(Sa.Component),Xm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.GetBoundingClientRect=function(){var e=On.findDOMNode(this);return e?e.getBoundingClientRect():null},t.prototype.onFavoriteElementClick=function(e){var t=this.props.favorite;if(t.friend)this.props.favorite.friend.OpenChatDialog(Xt(null,e));else if(t.clan)t.clan.OpenChatDialog(Xt(this,e));else{if(!t.chat)return;wd.UIStore.ShowAndOrActivateChatRoomGroup(Xt(this,e),t.chat,!0)}e.stopPropagation()},t.prototype.OnFavoriteElementContextMenu=function(e){var t=this.props.favorite;if(t.friend)De(Xt(this,e),this.props.friendRenderContext,t.friend,e);else if(t.clan)We(e,t.clan,{is_favorites:!0});else{if(!t.chat)return;je(e,t.chat,{is_favorites:!0})}e.stopPropagation()},t.prototype.render=function(){var e="quickAccessFriend",t=this.props.favorite;this.props.bIsDragGhost?e+=" dropGhost":this.props.bIsDragOutGhost&&(e+=" dragOriginGhost");var i;this.props.bIsDragOutGhost&&(i={display:"none"});var n;n=t.friend?Sa.createElement(Zm,{key:t.friend.accountid,friend:t.friend,friendRenderContext:this.props.friendRenderContext,className:e}):t.clan?Sa.createElement(Qm,{key:t.clan.clanid,clan:t.clan,className:e}):t.chat?Sa.createElement($m,{key:t.chat.GetGroupID(),chat:t.chat,className:e}):null;var r=Sa.createElement("div",{style:i,className:"favoriteElement",onClick:this.onFavoriteElementClick,onContextMenu:this.OnFavoriteElementContextMenu},n);return t.friend?Sa.createElement(Bh,{friend:t.friend,context:this.props.friendRenderContext},r):r},si.c([yn.a],t.prototype,"onFavoriteElementClick",null),si.c([yn.a],t.prototype,"OnFavoriteElementContextMenu",null),t}(Sa.Component),Zm=Object(up.observer)(function(e){var t=e.friend,i=wd.SettingsStore.FriendsSettings.bCompactQuickAccess,n=null;t.persona.is_awayOrSnooze&&(n=Sa.createElement(st,null));var r=void 0;if(t.persona.is_ingame){var o=wd.AppInfoStore.GetAppInfo(t.persona.m_unGamePlayedAppID);o.is_valid&&(r=Sa.createElement("div",{className:"FavoriteFriend_GameIcon"},Sa.createElement("img",{className:"gameIcon",src:o.icon_url,draggable:!1})))}for(var a=wd.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages(),s=!1,c=0,l=a;c<l.length;c++)if(l[c].accountid_partner==t.accountid){s=!0;break}var u=null;return s&&(u=Sa.createElement("div",{className:"ChatUnreadMessageIndicator"},Sa.createElement("div",{className:"chatUnreadCircle"}))),Sa.createElement(Oh,{friend:t,key:t.accountid,className:e.className,context:e.friendRenderContext,bFriendsListEntry:!0,bSingleClickActivate:!0},Sa.createElement("div",null,Sa.createElement("div",{className:"avatarHolder no-drag"},Sa.createElement("div",{className:"avatarStatus"}),Sa.createElement("img",{className:"avatar",src:t.persona.avatar_url_medium,draggable:!1}),r,n),!i&&Sa.createElement("div",{className:"playerNameQuickAccessContainer"},Sa.createElement("div",{className:"playerName"},t.display_name),t.is_display_name_nickname&&Sa.createElement("span",{className:"playerNicknameBracket",title:Object(ua.b)("#isNickname")},"*")),u))}),Qm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnDragStart=function(e){gy.DragDropManager.StartDrag({type:"clan",clan:this.props.clan})},t.prototype.OnDragEnd=function(e){gy.DragDropManager.EndDrag()},t.prototype.render=function(){var e="QuickAccessFriend QuickAccessClan",t=wd.SettingsStore.FriendsSettings.bCompactQuickAccess;this.props.className&&(e+=" "+this.props.className);var i=null,n=this.props.clan.GetChatGroupIDIfLoaded();if(n){var r=wd.ChatStore.GetChatRoomGroup(n);r&&(i=Sa.createElement(Zp,{group:r}))}return Sa.createElement("div",{className:e,draggable:!0,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd},Sa.createElement(Km,{clan:this.props.clan,small:!0}),!t&&Sa.createElement("div",{className:"clanName"},this.props.clan.name),i)},si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),t=si.c([up.observer],t)}(Sa.Component),$m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnDragStart=function(e){gy.DragDropManager.StartDrag({type:"chatroomgroup",group:this.props.chat})},t.prototype.OnDragEnd=function(e){gy.DragDropManager.EndDrag()},t.prototype.render=function(){var e="QuickAccessChat",t=null,i=wd.SettingsStore.FriendsSettings.bCompactQuickAccess;return this.props.chat.HasUnreadChatMessage&&(t=Sa.createElement(Zp,{group:this.props.chat})),this.props.className&&(e+=" "+this.props.className),Sa.createElement("div",{className:e,draggable:!0,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd},Sa.createElement(Jm,{group:this.props.chat}),!i&&Sa.createElement("div",{className:"clanName"},this.props.chat.name),t)},si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),t=si.c([up.observer],t)}(Sa.Component),eh=function(e){function t(t){var i=e.call(this,t)||this;return wd.FriendStore.self,i.state={strCurrentNameEntry:"",strError:void 0,bHaveAnyFriendsSelected:t.vecInvitePlayers&&t.vecInvitePlayers.length>0,bHaveNonBetaFriendsSelected:!1,bCreateInFlight:!1},i}return si.d(t,e),t.prototype.HandleTextEntry=function(e){this.setState({strCurrentNameEntry:e.target.value})},t.prototype.OnFriendPickerRef=function(e){this.m_friendPicker=e},t.prototype.OnFriendListSelectionChanged=function(){var e=!1,t=!1;if(this.m_friendPicker){e=this.m_friendPicker.selectedFriendCount>0;for(var i=this,n=0,r=this.m_friendPicker.state.rgFriendsChosen;n<r.length;n++){var o=r[n];if("break"===function(e){if(!1===e.is_in_beta)return t=!0,"break";void 0===e.is_in_beta&&Object(_i.when)(function(){return void 0!==e.is_in_beta},i.OnFriendListSelectionChanged)}(o))break}}e==this.state.bHaveAnyFriendsSelected&&t==this.state.bHaveNonBetaFriendsSelected||this.setState({bHaveAnyFriendsSelected:e,bHaveNonBetaFriendsSelected:t})},t.prototype.HandleSubmit=function(e){var t=this;if(e&&e.preventDefault(),!this.state.bCreateInFlight){var i=$t(e);this.setState(function(e){return e.bCreateInFlight||t.InternalDoSubmit(i),{bCreateInFlight:!0}})}},t.prototype.InternalDoSubmit=function(e){var t=this,i=[];this.m_friendPicker&&(i=this.m_friendPicker.state.rgFriendsChosen.map(function(e){return e.persona.m_steamid.ConvertTo64BitString()}));var n=this.props.chatViewToReplace;if(n){var r=new Nc(this.props.chatViewToReplace.chat.accountid_partner);return i.push(r.persona.m_steamid.ConvertTo64BitString()),nt(e,n,i),void this.props.closeModal()}var o=this.props.bHideChatNameEntry?"":this.state.strCurrentNameEntry;wd.ChatStore.CreateChatRoomGroup(this.props.browserContext,o,i,this.props.creationOptions).then(function(e){t.props.closeModal()}).catch(function(){t.setState({strError:Object(ua.b)("#Chat_CreateChatRoom_GenericError"),bCreateInFlight:!1})})},t.prototype.IsChatRoomNameValid=function(){return this.state.strCurrentNameEntry.length>0},t.prototype.render=function(){var e=this.props.chatViewToReplace?this.props.chatViewToReplace.chat.chat_partner:null,t=Object(ua.b)("#Chat_CreateChatRoom_Button"),i=new Set;this.props.chatViewToReplace&&i.add(this.props.chatViewToReplace.chat.accountid_partner);var n=!1;this.state.bCreateInFlight?(n=!1,t=Object(ua.b)("#GroupSettings_Permissions_Saving")):e?n=this.state.bHaveAnyFriendsSelected:(n=this.IsChatRoomNameValid()||this.state.bHaveAnyFriendsSelected,this.IsChatRoomNameValid()&&!this.state.bHaveAnyFriendsSelected?t=Object(ua.b)("#Chat_CreateChatRoom_Button"):this.state.bHaveAnyFriendsSelected&&!this.IsChatRoomNameValid()?t=Object(ua.b)("#Chat_CreateChatRoom_InviteFriends"):this.state.bHaveAnyFriendsSelected&&this.IsChatRoomNameValid()&&(t=Object(ua.b)("#Chat_CreateChatRoom_Button_wFriends")));var r=this.props.strTitle,o=r||(e?Object(ua.b)("#Chat_CreateChatRoom_InviteFriends"):Object(ua.b)("#Chat_CreateChatRoom"));return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ne,{classNameContent:"CreateChatDialog",onSubmit:this.HandleSubmit},Sa.createElement(Ud,null,o),Sa.createElement(Hd,null,e&&Sa.createElement(Wd,null,Sa.createElement("span",null,Object(ua.b)("#Chat_CreateChatRoom_With"),Sa.createElement("span",{className:"DialogHighlight"},Object(ua.b)("#Chat_CreateChatRoom_You")),Object(ua.b)("#Chat_CreateChatRoom_And"),Sa.createElement("span",{className:"DialogHighlight"},e.display_name))),this.state.strError&&Sa.createElement(Wd,{className:"nicknameError"},this.state.strError),!this.props.bHideChatNameEntry&&Sa.createElement(Qd,{type:"text",label:Object(ua.b)("#Chat_Settings_Room_Name"),className:"nicknameInput",value:this.state.strCurrentNameEntry,onChange:this.HandleTextEntry,autoFocus:!0}),Sa.createElement(Wd,{className:"CreateChat_NonBetaFriendsWarning "+(wd.IsInBeta()?"":" Released")+(this.state.bHaveNonBetaFriendsSelected?" Active":"")},Sa.createElement(rt,null),Object(ua.b)(wd.IsInBeta()?"#Chat_InviteFriend_SomeUnavailable":"#Chat_InviteFriend_SomeUnavailable_Released")),Sa.createElement(_p,{ref:this.OnFriendPickerRef,label:Object(ua.b)("#Chat_DropToInviteGroup"),eSort:1,setExcludedFriends:i,autoFocus:this.props.bHideChatNameEntry,onFriendSelected:this.OnFriendListSelectionChanged,onFriendRemoved:this.OnFriendListSelectionChanged,rgSelectedFriends:this.props.vecInvitePlayers,chosenFriendComponent:th})),Sa.createElement(Vd,null,Sa.createElement(ce,{strOKText:t,onCancel:this.props.closeModal,bOKDisabled:!n}))))},si.c([yn.a],t.prototype,"HandleTextEntry",null),si.c([yn.a],t.prototype,"OnFriendPickerRef",null),si.c([yn.a],t.prototype,"OnFriendListSelectionChanged",null),si.c([yn.a],t.prototype,"HandleSubmit",null),t=si.c([up.observer],t)}(Sa.Component),th=Object(up.observer)(function(e){var t=e.friend.is_in_beta||void 0===e.friend.is_in_beta;return Sa.createElement(Sa.Fragment,null,Sa.createElement(Bh,{friend:e.friend,context:null},Sa.createElement("div",{className:"FriendPicker_ChosenFriend"+(t?"":" FriendPicker_InvitedFriendNotInBeta"),onClick:function(){e.onClick(e.friend)}},!t&&Sa.createElement(rt,null),Sa.createElement("span",null,e.friend.display_name),Sa.createElement(Id._6,null))))}),ih=function(){function e(){this.m_mapHovers=new WeakMap}return e.prototype.GetHover=function(e){var t=this.m_mapHovers.get(e);return t||(t=new rh(e),this.m_mapHovers.set(e,t)),t},e}(),nh=function(){function e(){}return si.c([_i.observable],e.prototype,"visible",void 0),e}(),rh=function(){function e(e){this.m_bLoadingData=!1,this.m_friend=e}return Object.defineProperty(e.prototype,"friend",{get:function(){return this.m_friend},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persona",{get:function(){return this.m_friend.persona},enumerable:!0,configurable:!0}),e.prototype.GetInstance=function(e,t){if(void 0===t&&(t=!1),this.m_rgInstances)for(var i=0,n=this.m_rgInstances;i<n.length;i++){var r=n[i];if(r.m_OwningElement==e)return r}if(t){var r=new nh;return r.m_OwningElement=e,r.visible=!1,r.hover=this,this.m_rgInstances?this.m_rgInstances.push(r):this.m_rgInstances=[r],r}return null},e.prototype.ShowPopup=function(e,t,i){var n=this;t.visible=!0,t.m_OwningElement.ownerDocument.defaultView.setTimeout(function(){t.visible&&(t.popupWindow||(t.popupWindow=new Lh(e,t,i)),t.popupWindow.Show())},250),t.m_BlurHandler=function(){n.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.defaultView.addEventListener("blur",t.m_BlurHandler),t.m_VisibilityHandler=function(e){"hidden"===e.target.visibilityState&&n.HideByElement(t.m_OwningElement)},t.m_OwningElement.ownerDocument.addEventListener("visibilitychange",t.m_VisibilityHandler)},e.prototype.Show=function(t,i){var n=this,r=t.currentTarget.ownerDocument.defaultView.innerWidth<500;if((!r||ai.a.IN_CLIENT)&&!gy.DragDropManager.BInDrag()){this.EnsureCommunityDataLoaded();var o=t.currentTarget,a=Xt(null,t),s=this.GetInstance(o,!0);s.context=i;var c=!1;if(ai.a.IN_CLIENT){var l=wd.UIStore.GetPerContextChatData(a);c=l.BUsePopups()}if(r&&c)this.ShowPopup(o,s,a);else{var u=Sa.createElement(lt,{hoverInstance:s,target:o,onNoSpace:function(){c&&n.ShowPopup(o,s,a)}});e.m_embeddedElements.ShowElementDelayed(o.ownerDocument,250,u,s).then(function(){s.visible=!0})}}},e.prototype.Hide=function(e){this.HideByElement(e.currentTarget)},e.prototype.HideByElement=function(t){var i=this.GetInstance(t);if(i){if(i.visible=!1,i.m_BlurHandler&&(t.ownerDocument.defaultView.removeEventListener("blur",i.m_BlurHandler),i.m_BlurHandler=null),i.m_VisibilityHandler&&(t.ownerDocument.removeEventListener("visibilitychange",i.m_VisibilityHandler),i.m_VisibilityHandler=null),i.popupWindow&&!i.popupWindow.BIsClosed()){var n=i.popupWindow,r=function(){n.BIsClosed()||n.Close()};t.ownerDocument.defaultView.addEventListener("unload",r),t.ownerDocument.defaultView.setTimeout(function(){t.ownerDocument.defaultView.removeEventListener("unload",r),r()},100)}else e.m_embeddedElements.HideElement(i.m_OwningElement.ownerDocument,i,500);_n.c(this.m_rgInstances,i)}},e.prototype.OnContextMenu=function(e,t){var i=De(Xt(null,t),e,this.m_friend,t);return this.Hide(t),i},e.prototype.HideAllInstances=function(){for(var e=0,t=this.m_rgInstances.slice();e<t.length;e++){var i=t[e];this.HideByElement(i.m_OwningElement)}},Object.defineProperty(e.prototype,"community_data_ready",{get:function(){return void 0!==this.m_communityData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_level",{get:function(){return this.m_communityData&&this.m_communityData.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_level_class",{get:function(){return this.m_communityData&&this.m_communityData.level_class},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_badge",{get:function(){return this.m_communityData&&this.m_communityData.favorite_badge},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player_in_game",{get:function(){return this.m_communityData&&this.m_communityData.in_game},enumerable:!0,configurable:!0}),e.prototype.EnsureCommunityDataLoaded=function(){var e=this;void 0!==this.m_communityData||this.m_bLoadingData||(this.m_bLoadingData=!0,Qi.a.get(ai.a.CHAT_BASE_URL+"miniprofile/"+this.m_friend.accountid+"/json").then(function(t){var i=t.data;i.level&&i.level_class&&(e.m_communityData=i),e.m_bLoadingData=!1}).catch(function(t){e.m_bLoadingData=!1}))},e.m_embeddedElements=new Ed.a("CFriendHoverContainer"),si.c([_i.observable],e.prototype,"m_communityData",void 0),si.c([yn.a],e.prototype,"Show",null),si.c([yn.a],e.prototype,"Hide",null),si.c([yn.a],e.prototype,"OnContextMenu",null),e}(),oh=(Sa.Component,Sa.Component,function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.PostDate=function(e){var t=wd.RTime32ToDate(e),i={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return t.toLocaleDateString(ua.a.GetPreferredLocales(),i)},t.prototype.render=function(){return Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1532044800)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.d)("#changeLog_UpdateItem71",Sa.createElement("b",null,Object(ua.b)("#changeLog_Note"))))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1531443600)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem68")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem69")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem70"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1531263600)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem47")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem58")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem59")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem60")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem48")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem49")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem63")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem50")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem51")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem53")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem52")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem61")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem62")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem64")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem65")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem66")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem67"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1531162800)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem54")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem55"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1530298800)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem56")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem57"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1530126e3)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItemSubHeader"},Object(ua.b)("#changeLog_UpdateItem_Permissions")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem39")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem40")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem41")),Sa.createElement("div",{className:"changeLogItemSubHeader"},Object(ua.b)("#changeLog_UpdateSubHeader_General")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem45")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem30"),Sa.createElement("div",{style:{marginTop:"4px"}},Sa.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},Object(ua.b)("#changeLog_Note")),Sa.createElement("span",{style:{fontStyle:"italic"}},Object(ua.b)("#changeLog_UpdateItem30_Note")))),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem29")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem25")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem26")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem38")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem31")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem42")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem28")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem27")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem33")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem32")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem34"),Sa.createElement("div",{style:{marginTop:"4px"}},Sa.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},Object(ua.b)("#changeLog_Note")),Sa.createElement("span",{style:{fontStyle:"italic"}},Object(ua.b)("#changeLog_UpdateItem34_Note")))),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem35")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem36")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem37")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem43")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem44"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1529528400)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem20")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem21")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem22")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem23")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem24"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1529456400)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem17")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem18")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem15")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem16")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem12")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem13")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem14")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem19"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1529017200)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItemSubHeader"},Object(ua.b)("#changeLog_UpdateSubHeader_General")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem11")),Sa.createElement("div",{className:"changeLogItemSubHeader"},Object(ua.b)("#changeLog_UpdateSubHeader_Linux")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem10")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem09"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")," - #2"),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1528938e3)),Sa.createElement("div",{className:"changeLogExtra"},Object(ua.b)("#changeLog_UpdateExtraInfo01")),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem02")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem03")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem04")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem05")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem06")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem07")),Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem08"))),Sa.createElement("div",{className:"changeLogTitle"},Object(ua.b)("#changeLog_GenericUpdateTitle")),Sa.createElement("div",{className:"changeLogDate"},this.PostDate(1528923600)),Sa.createElement("div",{className:"changeLogDescription"},Sa.createElement("div",{className:"changeLogItem"},Object(ua.b)("#changeLog_UpdateItem01"))))},si.c([yn.a],t.prototype,"PostDate",null),t}(Sa.Component)),ah=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(pe,{onEscKeypress:this.props.closeModal},Sa.createElement(ie,{className:"changeLogPage"},Sa.createElement(Ud,null,Object(ua.b)("#changeLog_Title")),Sa.createElement(Hd,null,Sa.createElement(Wd,null,Object(ua.b)("#changeLog_SubTitle")),Sa.createElement(qd,{className:"changeLogDetails"},Sa.createElement(oh,null))),Sa.createElement(Vd,null,Sa.createElement(re,{onClick:this.props.closeModal},Object(ua.b)("#Button_Close")))))},t}(Sa.Component),sh=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.chat.VoiceChatStore.HasBeenAttemptingOverTwoSeconds(),t=this.props.chat.VoiceChatStore.IsAttemptingReconnect();return Sa.createElement("div",{className:"connectionStatusLabels"},e&&Sa.createElement("div",{className:"connectionStatus"},Sa.createElement("a",{title:Object(ua.b)("#VoiceChatConnectingHelp"),className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(ua.b)("#VoiceChatConnecting"))),t&&Sa.createElement("div",{className:"connectionStatus"},Sa.createElement("a",{className:"connectionStatus",target:"_blank",href:"https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"},Object(ua.b)("#VoiceChatReconnecting"))))},t=si.c([up.observer],t)}(Sa.Component),ch=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.chats.GetActiveVoiceChat();return this.props.chats.VoiceChat.IsAnyVoiceActive()&&e?Sa.createElement(lh,{chat:e,name:this.props.chats.GetActiveVoiceChannelName(),nostatus:!1}):Sa.createElement("div",{className:"activeVoiceControls"},Sa.createElement("div",{className:"buttonsContainer"},Sa.createElement("div",{className:"activeVoiceFlexBox"},Sa.createElement("div",{className:"activeVoiceLabels"},Sa.createElement("div",{className:"activeVoiceHeader"},Object(ua.b)("#ActiveVoiceChat")),Sa.createElement("div",{className:"activeVoiceName"})),Sa.createElement("div",{className:"activeVoiceButtons"},Sa.createElement(uh,null),Sa.createElement(dh,null),Sa.createElement("div",{className:"activeVoiceButtonsSpacer"}),Sa.createElement(ph,null),Sa.createElement("div",{className:"activeVoiceButtonsSpacerAfter"})))))},t=si.c([up.observer],t)}(Sa.Component),lh=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.ActivateActiveVoiceChat=function(e){if(this.props.chat instanceof Xc){var t=wd.ChatStore.GetChatRoomGroup(this.props.chat.GetParentGroupID());if(t)return void wd.UIStore.ShowAndOrActivateChatRoomGroup(Xt(this,e),t,!0)}wd.UIStore.ShowAndOrActivateChat(Xt(this,e),this.props.chat,!0)},t.prototype.render=function(){var e=wd.VoiceStore.GetPushToTalkEnabled(),t=wd.VoiceStore.GetPushToMuteEnabled(),i=wd.VoiceStore.GetPushToTalkVoiceStateEnabled(),n=wd.VoiceStore.GetPushToTalkHotKeyDisplayString(),r="";return(e||t)&&(r+=" pushToTalkEnabled"),i&&(r+=" pushToTalkKeyDown"),Sa.createElement("div",{className:"activeVoiceControls"+r},Sa.createElement("div",{className:"buttonsContainer"},Sa.createElement("div",{className:"activeVoiceFlexBox"},Sa.createElement("div",{className:"activeVoiceLabels"},Sa.createElement("div",{className:"activeVoiceHeader"},Object(ua.b)("#ActiveVoiceChat")),Sa.createElement("div",{className:"activeVoiceName",onClick:this.ActivateActiveVoiceChat},this.props.name)),Sa.createElement("div",{className:"activeVoiceButtons"},Sa.createElement(uh,null),Sa.createElement(dh,null),Sa.createElement("div",{className:"activeVoiceButtonsSpacer"}),Sa.createElement(ph,null),Sa.createElement("div",{className:"activeVoiceButtonsSpacerAfter"}))),!this.props.nostatus&&Sa.createElement(sh,{chat:this.props.chat})),(e||t)&&Sa.createElement("div",{className:"activeVoicePushToTalk"+r},Object(ua.b)(t?"#ActiveVoicePushToMute":"#ActiveVoicePushToTalk",n)))},si.c([yn.a],t.prototype,"ActivateActiveVoiceChat",null),t=si.c([up.observer],t)}(Sa.Component),uh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ToggleMicrophone=function(e){wd.VoiceStore.IsMicMuted()&&wd.VoiceStore.IsOutputMuted()&&wd.VoiceStore.ToggleOutputMuting(),wd.VoiceStore.ToggleMicMuting(),e.stopPropagation()},t.prototype.render=function(){var e=wd.VoiceStore.BNoMicAvailableForSession(),t=wd.VoiceStore.BHasSampleRateTooHighInBrowser(),i=wd.VoiceStore.IsMicMuted(),n="VoiceControlPanelButton ToggleMicrophoneButton",r="";return r=i?Object(ua.b)("#VoiceChat_UnmuteMic"):Object(ua.b)("#VoiceChat_MuteMic"),e&&(n+=" NoMicrophone",r=t?Object(ua.b)("#VoiceChat_ChromeSampleRateTooHighMicExplainer"):Object(ua.b)("#VoiceChat_DeniedMicrophoneAccess")),i&&(n+=" disabled"),Sa.createElement("button",{className:n,onClick:this.ToggleMicrophone,title:r},Sa.createElement(Id.C,null),Sa.createElement(Id.C,{className:"SVGIcon_Shadow"}))},si.c([yn.a],t.prototype,"ToggleMicrophone",null),t=si.c([up.observer],t)}(Sa.Component),dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ToggleVoiceOutput=function(e){wd.VoiceStore.IsOutputMuted()==wd.VoiceStore.IsMicMuted()&&wd.VoiceStore.ToggleMicMuting(),wd.VoiceStore.ToggleOutputMuting(),e.stopPropagation()},t.prototype.render=function(){var e=wd.VoiceStore.IsOutputMuted(),t="VoiceControlPanelButton ToggleVoiceOutputButton";e&&(t+=" disabled");var i="";return i=e?Object(ua.b)("#VoiceChat_UnmuteSpeaker"):Object(ua.b)("#VoiceChat_MuteSpeaker"),Sa.createElement("button",{className:t,onClick:this.ToggleVoiceOutput,title:i},Sa.createElement(Id.t,null),Sa.createElement(Id.t,{className:"SVGIcon_Shadow"}))},si.c([yn.a],t.prototype,"ToggleVoiceOutput",null),t=si.c([up.observer],t)}(Sa.Component),ph=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.EndVoiceChat=function(e){wd.VoiceStore.OnUserEndVoiceChat(),e.stopPropagation()},t.prototype.render=function(){return Sa.createElement("button",{className:"VoiceControlPanelButton chatEndVoiceChat",onClick:this.EndVoiceChat,title:Object(ua.b)("#VoiceChat_Leave")},Sa.createElement(Id._3,null))},si.c([yn.a],t.prototype,"EndVoiceChat",null),t=si.c([up.observer],t)}(Sa.Component),mh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={searchString:"",bFriendTabSearch:!1,bViewingIncomingInvites:!1,tabLabelWidth:0},i.m_tabLabelWidth=-1,i}return si.d(t,e),t.prototype.OnSearchInputRef=function(e){this.m_refSearchInput=e},t.prototype.StartSearchOnKeyPress=function(e){var t=this.state.bFriendTabSearch;this.setState({bFriendTabSearch:!0}),t&&this.m_refSearchInput&&this.m_refSearchInput.focus()},t.prototype.OnSearchInput=function(e){e.currentTarget.value!=this.state.searchString&&this.setState({searchString:e.currentTarget.value})},t.prototype.OnSearchSubmit=function(e){e.preventDefault();var t=this.GetNormalizedSearchString();if(t&&t.length){var i=this.props.friends.FriendGroupStore.all_friends.GetMembersMatchingSearch(t);i.length&&i[0].OpenChatDialog(Xt(this,e))}this.setState({searchString:""})},t.prototype.OnSearchSelection=function(){this.setState({searchString:""})},t.prototype.OnSearchKeyDown=function(e){27==e.keyCode&&(this.setState({searchString:""}),e.preventDefault(),e.currentTarget.blur(),this.setState({bFriendTabSearch:!1}),this.CollapseTabLabel())},t.prototype.OnClearSearch=function(){this.setState({searchString:""}),this.OnTabSearchClick()},t.prototype.OnSettingsClick=function(e){Ze(Xt(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.ToggleCollapseExpand=function(e){wd.UIStore.SetFriendsListCollapsed(Xt(this,e),!this.props.collapsed)},t.prototype.OnDoFriendsListUpdate=function(e){var t=e.currentTarget.ownerDocument.defaultView,i=gy.GetSecondsOutOfDate(),n=Object(ua.e)(i,!0);ge(t,Object(ua.b)("#Friends_ConfirmUpdate_Title"),Object(ua.b)("#Friends_ConfirmUpdate_Body",n),Object(ua.b)("#Friends_ConfirmUpdate_Ok")).then(function(){gy.PerformFriendsUIUpdate()}).catch(function(){})},t.prototype.BindTabLabel=function(e){this.m_elTabLabel=e},t.prototype.CollapseTabLabel=function(){var e=this;if(this.m_animationTabLabelCollapse&&this.m_animationTabLabelCollapse.Cancel(),this.state.bFriendTabSearch){var t=1,i=this.m_tabLabelWidth;this.setState({tabLabelWidth:t},function(){e.m_animationTabLabelCollapse=new zd(e,{tabLabelWidth:i},{msDuration:300,timing:"sine"}),e.m_animationTabLabelCollapse.Start()})}else{var t=this.m_tabLabelWidth;this.setState({tabLabelWidth:t},function(){e.m_animationTabLabelCollapse=new zd(e,{tabLabelWidth:1},{msDuration:300,timing:"sine"}),e.m_animationTabLabelCollapse.Start()})}},t.prototype.OnTabSearchClick=function(){this.m_tabLabelWidth<0&&(this.m_tabLabelWidth=this.m_elTabLabel.clientWidth),this.setState({bFriendTabSearch:!this.state.bFriendTabSearch}),this.CollapseTabLabel()},t.prototype.GetNormalizedSearchString=function(){return this.state.searchString&&this.state.searchString.trim().toLocaleLowerCase()},t.prototype.ToggleViewingIncomingInvites=function(){var e=this;this.setState({bViewingIncomingInvites:!this.state.bViewingIncomingInvites},function(){e.state.bViewingIncomingInvites&&(wd.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),wd.FriendStore.ClanStore.EnsureInitialStateForClanInvites())})},t.prototype.componentWillUpdate=function(){var e=wd.FriendStore.FriendGroupStore.incoming_invites_group.member_count>0,t=wd.FriendStore.ClanStore.clan_invites.length>0,i=wd.FriendStore.FriendGroupStore.outgoing_invites_group.member_count>0;e||t||i||!this.state.bViewingIncomingInvites||this.setState({bViewingIncomingInvites:!1})},t.prototype.render=function(){var e=this.props.friends.self,t=this.GetNormalizedSearchString(),i=wd.FriendStore.FriendGroupStore.incoming_invites_group.member_count>0,n=wd.FriendStore.ClanStore.clan_invites.length>0,r=wd.FriendStore.FriendGroupStore.outgoing_invites_group.member_count>0,o=wd.FriendStore.FriendGroupStore.incoming_invites_group.member_count+wd.FriendStore.ClanStore.clan_invites.length,a="friendRequestButton";this.state.bViewingIncomingInvites&&(a+=" friendRequestViewActive"),r&&0==o&&(a+=" friendRequestOutgoingOnly");var s=this.state.bFriendTabSearch,c="friendTab socialListTab activeTab";s&&(c+=" TabSearchActive");var l={};this.state.tabLabelWidth>0&&(l.width=this.state.tabLabelWidth+"px");var u=!1;this.props.popup&&(u=Zt(this.props.popup)!=Md);var d=!1,p=0,m=!1,h="friendListButton friendSettingsButton friendsListNeedsUpdate no-drag";void 0!=gy&&(d=gy.BNeedsUpdate(),p=gy.GetSecondsOutOfDate(),p<432e3?d=!1:p>604800&&(h+=" friendsListVeryOutOfDate",m=!0));var g=this.props.chats.GetActiveVoiceChat(),f=!1;(this.props.chats.VoiceChat.IsAnyVoiceActive()||g)&&(f=!0);var _=wd.SettingsStore.FriendsSettings.bCompactFriendsList,y=this.props.collapsed,v="friendlist";return _&&(v+=" compactView"),d&&(v+=" needsUpdate"),y&&this.props.collapsible&&(v+=" collapsed"),Sa.createElement("div",{className:v},Sa.createElement("div",{className:"friendListHeaderContainer titleBarContainer"},this.props.popup&&ai.a.IN_CLIENT&&Sa.createElement(pp,{hideMinMax:u,popup:this.props.popup}),this.props.collapsible&&Sa.createElement("div",{className:"friendListCollapse no-drag"},Sa.createElement("div",{className:"friendListButton friendCollapseButton no-drag "+(y?"Collapsed":""),onClick:this.ToggleCollapseExpand},Sa.createElement(Id.k,null))),Sa.createElement(_h,{popup:this.props.popup&&this.props.popup,currentUser:e}),Sa.createElement("div",{className:"friendListButtons"},d&&Sa.createElement("div",{className:h,onClick:this.OnDoFriendsListUpdate,title:m?Object(ua.b)("#Tooltip_FriendsListUpdate_VeryOld"):Object(ua.b)("#Tooltip_FriendsListUpdate")},Sa.createElement(Id.K,null)),Sa.createElement("div",{className:"friendListButton friendSettingsButton no-drag",onClick:this.OnSettingsClick,title:Object(ua.b)("#Tooltip_Settings")},Sa.createElement(Id.Q,null))),Sa.createElement(Od,null,f&&Sa.createElement(Bd,{key:"activeVoiceControls1",classNames:"activevoice-anim",timeout:500},Sa.createElement(ch,{chats:this.props.chats}))),Sa.createElement(Ym,{FavoritesStore:this.props.friends.FavoritesStore}),Sa.createElement("div",{className:"socialTabSearchContainer"},Sa.createElement("div",{className:"socialTabContainer"},Sa.createElement("div",{className:c},Sa.createElement("div",{className:"tabLabel",style:l,ref:this.BindTabLabel},Object(ua.b)("#tab_friends")),Sa.createElement("div",{className:"friendsTabButtonsContainer"},Sa.createElement("div",{className:"TabSearchButton",onClick:s?null:this.OnTabSearchClick},Sa.createElement(Od,{className:"tabSearchTransitionGroup"},s&&Sa.createElement(Bd,{className:"tabSearchTransition",key:"tabSearch",classNames:"tab-search-anim",timeout:500},Sa.createElement("div",{className:"socialSearchContainer"},Sa.createElement("form",{className:"socialInputContainer"+(s?" SearchActive":""),name:"friendSearchForm",onSubmit:this.OnSearchSubmit},Sa.createElement("div",{className:"inputContainer no-drag"},Sa.createElement("input",{id:"friendSearchInputID",className:"friendSearchInput",autoFocus:!0,type:"text",name:"friendSearch",placeholder:Object(ua.b)("#SearchFriends"),value:this.state.searchString,onInput:this.OnSearchInput,onKeyDown:this.OnSearchKeyDown,autoComplete:"off",ref:this.OnSearchInputRef}),Sa.createElement("div",{className:"friendSearchClear",onClick:this.OnClearSearch},Sa.createElement(Id._6,null))))))),Sa.createElement("div",{className:"searchIconButton",onClick:this.OnTabSearchClick,title:Object(ua.b)("#Tooltip_SearchFriends")},Sa.createElement(Id.z,null))),(i||n||r)&&Sa.createElement("div",{className:a,onClick:this.ToggleViewingIncomingInvites,title:Object(ua.c)("#Tooltip_FriendRequest",o)},Sa.createElement(Id.q,null),o>0&&Sa.createElement("div",{className:"requestsNumber"},o)),Sa.createElement(we,{href:ai.a.COMMUNITY_BASE_URL+"friends/add"},Sa.createElement("div",{className:"friendListButton addFriendButton no-drag",title:Object(ua.b)("#Tooltip_AddFriend")},Sa.createElement(Id.a,null))))))),Sa.createElement("div",{className:"disconnectBlocker"})),Sa.createElement(yh,{friends:this.props.friends,chats:this.props.chats,searchString:t,fnOnSearchSelection:this.OnSearchSelection,onStartSearch:this.StartSearchOnKeyPress,browserContext:this.props.browserContext,bViewingIncomingInvites:this.state.bViewingIncomingInvites,onClose:this.ToggleViewingIncomingInvites}),Sa.createElement("div",{className:"friendListFooter"},Sa.createElement(fh,null)))},si.c([yn.a],t.prototype,"OnSearchInputRef",null),si.c([yn.a],t.prototype,"StartSearchOnKeyPress",null),si.c([yn.a],t.prototype,"OnSearchInput",null),si.c([yn.a],t.prototype,"OnSearchSubmit",null),si.c([yn.a],t.prototype,"OnSearchSelection",null),si.c([yn.a],t.prototype,"OnSearchKeyDown",null),si.c([yn.a],t.prototype,"OnClearSearch",null),si.c([yn.a],t.prototype,"OnSettingsClick",null),si.c([yn.a],t.prototype,"ToggleCollapseExpand",null),si.c([yn.a],t.prototype,"OnDoFriendsListUpdate",null),si.c([yn.a],t.prototype,"BindTabLabel",null),si.c([yn.a],t.prototype,"CollapseTabLabel",null),si.c([yn.a],t.prototype,"OnTabSearchClick",null),si.c([yn.a],t.prototype,"ToggleViewingIncomingInvites",null),t=si.c([up.observer],t)}(Sa.Component),hh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=ai.a.COMMUNITY_BASE_URL+"groups/SteamClientBeta/discussions/3/";return wd.IsInBeta()?Sa.createElement("div",{className:"betaFeedbackLabel"},Object(ua.d)("#GiveFeedbackToSteam_Desc",Sa.createElement(we,{href:e,className:"betaFeedbackAnchor"}," ",Object(ua.b)("#GiveFeedbackToSteam_URL")," "))):null},t}(Sa.Component),gh=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bChangeLogVersion=8,i.state={bShowChangeLogViolator:gy.UIDisplayPrefs.nChangeLogDismissed<i.m_bChangeLogVersion},i}return si.d(t,e),t.prototype.OpenChangeLog=function(e){gy.SetUIDisplayPref("nChangeLogDismissed",this.m_bChangeLogVersion),this.setState({bShowChangeLogViolator:!1}),at(e.currentTarget.ownerDocument.defaultView)},t.prototype.render=function(){if(!wd.IsInBeta())return null;var e=this.state.bShowChangeLogViolator,t=0;return e&&(t=this.m_bChangeLogVersion-(gy.UIDisplayPrefs.nChangeLogDismissed||7)),Sa.createElement("div",{className:"changeLog"+(e?" showViolator":""),onClick:this.OpenChangeLog,title:e?Object(ua.b)("#changeLog_Value_Button",t):Object(ua.b)("#changeLog_Button")},Sa.createElement(Id.P,null),e&&Sa.createElement("div",{className:"changeLogViolator"},t))},si.c([yn.a],t.prototype,"OpenChangeLog",null),t}(Sa.Component),fh=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.OnSettingsZooClick=function(e){},t.prototype.render=function(){return Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"flexRowCentered"},!1,Sa.createElement(hh,null),Sa.createElement(gh,null)))},si.c([yn.a],t.prototype,"OnSettingsZooClick",null),t=si.c([up.observer],t)}(Sa.Component),_h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnShowContextMenu=function(e){return xe(Xt(this,e),e)},t.prototype.ToggleSingleWindowToggle=function(){gy.ToggleSingleWindowToggle(this.props.popup)},t.prototype.ShowCurrentUserProfile=function(e){Ee(e,this.props.currentUser.GetCommunityProfileURL()),e.stopPropagation()},t.prototype.render=function(){var e=this.props.currentUser,t="currentUserContainer "+ot(e.persona);wd.FriendStore.GetUserDoNotDisturb()&&(t+=" userDoNotDisturb");var i=null;wd.FriendStore.BIsInvisibleMode()&&(i=Object(ua.b)("#PersonaStateInvisible"));var n=!1;return this.props.popup&&(n=Zt(this.props.popup)!=Md),Sa.createElement("div",{className:t},Sa.createElement("svg",{className:"statusHeaderGlow",width:"100%",height:"132",xmlns:"http://www.w3.org/2000/svg"},Sa.createElement("defs",null,Sa.createElement("radialGradient",{id:"exampleGradient",cx:"50%",cy:"50%",r:"50%",fx:"35%",fy:"30%"},Sa.createElement("stop",{offset:"10%",stopColor:"gold"}),Sa.createElement("stop",{offset:"95%",stopColor:"green"}))),Sa.createElement("ellipse",{cx:"5%",cy:"28%",rx:"65%",ry:"60%",fill:"url(#exampleGradient)"})),Sa.createElement(Bh,{friend:e,context:{chatContext:"friendslist"},onContextMenu:this.OnShowContextMenu},Sa.createElement("div",{className:"AvatarAndUser",onContextMenu:this.OnShowContextMenu},Sa.createElement("img",{className:"currentUserAvatar",src:e.persona.avatar_url_medium,onClick:this.ShowCurrentUserProfile}),Sa.createElement(Eh,{friend:e,strOverrideStatus:i,onShowContextMenu:this.OnShowContextMenu,bDNDSet:wd.FriendStore.GetUserDoNotDisturb()}))),this.props.popup&&ai.a.IN_CLIENT&&Sa.createElement("div",{className:"title-area-icon singleWindowToggle"+(n?" inOverlay":""),title:Object(ua.b)("#FriendsList_TitleArea_SingleWindowButton"),onClick:this.ToggleSingleWindowToggle},Sa.createElement(Id.S,null)))},si.c([yn.a],t.prototype,"OnShowContextMenu",null),si.c([yn.a],t.prototype,"ToggleSingleWindowToggle",null),si.c([yn.a],t.prototype,"ShowCurrentUserProfile",null),t=si.c([up.observer],t)}(Sa.Component),yh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bScrolledFromTop:!1},i}return si.d(t,e),Object.defineProperty(t.prototype,"frame",{get:function(){return this.m_elFriendsListContent},enumerable:!0,configurable:!0}),t.prototype.OnContextMenu=function(e){var t=this.props.searchString&&this.props.searchString.length>0;this.props.bViewingIncomingInvites||t||Ae(Xt(this,e),null,e)},t.prototype.BindFriendsListContent=function(e){this.m_elFriendsListContent=e},t.prototype.OnFriendsListKeyDown=function(e){e.ctrlKey||e.altKey||e.metaKey||e.key.length>1||this.props.onStartSearch(e)},t.prototype.OnFriendsListScrollRef=function(e){this.m_elFriendsListScroll=e},t.prototype.ScrollToTop=function(){this.m_elFriendsListScroll&&(this.m_elFriendsListScroll.scrollTop=0)},t.prototype.OnScrollFriendsList=function(e){var t=e.currentTarget.scrollTop>10;t!=this.state.bScrolledFromTop&&this.setState({bScrolledFromTop:t})},t.prototype.OnAcceptClanInvite=function(e,t){var i=e.currentTarget.ownerDocument.defaultView;wd.FriendStore.ClanStore.RespondToClanInvite(t,!0).then(function(e){e||_e(i,Object(ua.b)("#Friend_AcceptClanInvite"),Object(ua.b)("#Friend_AcceptClanInvite_Error"))})},t.prototype.OnDeclineClanInvite=function(e,t){var i=e.currentTarget.ownerDocument.defaultView;wd.FriendStore.ClanStore.RespondToClanInvite(t,!1).then(function(e){e||_e(i,Object(ua.b)("#Friend_DeclineClanInvite"),Object(ua.b)("#Friend_DeclineClanInvite_Error"))})},t.prototype.render=function(){var e,t=this,i=this.props.searchString&&this.props.searchString.length>0,n=this.props.bViewingIncomingInvites,r={searchString:this.props.searchString,fnOnSearchSelection:this.props.fnOnSearchSelection};if(this.props.friends.self.is_ready)if(n){var o=wd.FriendStore.ClanStore.clan_invites.length,a=(hi.a.InitFromAccountID(wd.FriendStore.self.accountid),[]);if(o)for(var s=0,c=wd.FriendStore.ClanStore.clan_invites;s<c.length;s++){var l=c[s];!function(e){var i=e.steamid,n=void 0;n=e.BIsOGG()?ai.a.COMMUNITY_BASE_URL+"app/"+e.GetOGGAppID():ai.a.COMMUNITY_BASE_URL+"gid/"+i.ConvertTo64BitString(),a.push(Sa.createElement("div",{className:"clanInviteContainer",key:"clan_invite_"+i.GetAccountID()},Sa.createElement(we,{href:n},Sa.createElement("div",{className:"clanAvatar"},Sa.createElement("img",{className:"clanAvatarIcon",src:e.avatar_url_medium})),Sa.createElement("div",{className:"clanName"},e.name,Sa.createElement("div",{className:"clanDetails displayRow"},Sa.createElement("div",{className:"displayRow statMembersTotal"},Sa.createElement("div",{className:"statCircle"}),e.member_count," Members"),e.users_online>0&&Sa.createElement("div",{className:"displayRow statMembersOnline",title:Object(ua.c)("#Chat_Members_Online_Tooltip",e.users_online)},Sa.createElement("div",{className:"statCircle"}),e.users_online),e.users_ingame>0&&Sa.createElement("div",{className:"displayRow statMembersInGame",title:Object(ua.c)("#Chat_Members_InGame_Tooltip",e.users_ingame)},Sa.createElement("div",{className:"statCircle"}),e.users_ingame)))),Sa.createElement("div",{className:"clanActionButtons"},Sa.createElement("div",{className:"displayColumn",title:Object(ua.b)("#FriendGroup_Tip_Accept_Invite")},Sa.createElement(ae,{onClick:function(e){t.OnAcceptClanInvite(e,i)}},"Accept")),Sa.createElement("div",{className:"displayColumn",title:Object(ua.b)("#FriendGroup_Tip_Decline_Invite")},Sa.createElement(ae,{onClick:function(e){t.OnDeclineClanInvite(e,i)}},"Ignore")))))}(l)}e=Sa.createElement(Sa.Fragment,null,o>0&&!i&&Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"clanInvitesGroupContainer"},Sa.createElement("div",{className:"clanInviteTitle"},Object(ua.b)("#Friend_PendingClanInvites")),a)),Sa.createElement(Sh,si.a({group:this.props.friends.FriendGroupStore.incoming_invites_group,collapsed:!1},r,{onClose:this.props.onClose})),Sa.createElement(Sh,si.a({group:this.props.friends.FriendGroupStore.outgoing_invites_group,collapsed:!1},r,{onClose:this.props.onClose})))}else if(i)e=Sa.createElement(Sh,si.a({group:this.props.friends.FriendGroupStore.all_friends,collapsed:!1},r));else{var u=this.props.friends.FriendGroupStore.user_groups.map(function(e){return Sa.createElement(Sh,si.a({group:e,key:e.id,groupDisplayPrefs:t.props.friends.FriendGroupStore.groupDisplayPrefs},r))}),d=this.props.friends.FriendGroupStore.default_groups.map(function(e){return Sa.createElement(Sh,si.a({group:e,key:e.id,groupDisplayPrefs:t.props.friends.FriendGroupStore.groupDisplayPrefs},r))}),p=this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext),m=!1;p.length&&(m=!0),e=Sa.createElement(Sa.Fragment,null,m&&Sa.createElement("div",{className:"recentChatsGroup unreadChatsGroup"},Sa.createElement(kh,{friendChatStore:this.props.chats.FriendChatStore,browserContext:this.props.browserContext}),!1),Sa.createElement(Ch,null),u,d)}else e=void 0;var h=wd.SettingsStore.FriendsSettings.bCompactFriendsList;return Sa.createElement("div",{className:"FriendsListContent"+(h?" CompactFriendsList":""),ref:this.BindFriendsListContent},Sa.createElement("div",{className:"friendsListInsetShadowCtn"},Sa.createElement("div",{className:"friendListInsetShadowTop"})),Sa.createElement(Th,{browserContext:this.props.browserContext,bScrolledFromTop:this.state.bScrolledFromTop&&!i,onClick:this.ScrollToTop}),Sa.createElement("div",{className:"friendlistListContainer",onContextMenu:this.OnContextMenu,tabIndex:0,onKeyDown:this.OnFriendsListKeyDown,ref:this.OnFriendsListScrollRef,onScroll:this.OnScrollFriendsList},Sa.createElement("div",{className:"listContentContainer"},e,Sa.createElement("div",{className:"disconnectBlocker"}))),Sa.createElement("div",{className:"friendsListInsetShadowCtn"},Sa.createElement("div",{className:"friendListInsetShadowBottom"})),Sa.createElement(vh,{friends:this.props.friends,chats:this.props.chats,parent:this}))},si.c([yn.a],t.prototype,"OnContextMenu",null),si.c([yn.a],t.prototype,"BindFriendsListContent",null),si.c([yn.a],t.prototype,"OnFriendsListKeyDown",null),si.c([yn.a],t.prototype,"OnFriendsListScrollRef",null),si.c([yn.a],t.prototype,"ScrollToTop",null),si.c([yn.a],t.prototype,"OnScrollFriendsList",null),t=si.c([up.observer],t)}(Sa.Component),vh=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bMouseOver=!1,i.state={nChatRoomListContainerHeight:gy.UIDisplayPrefs.nChatRoomListHeightPx,nChatRoomListContainerMaxHeight:gy.UIDisplayPrefs.nChatRoomListHeightPx,bChatRoomListCollapsed:gy.UIDisplayPrefs.bChatRoomListCollapsed,nChatRoomListPreCollapseHeight:gy.UIDisplayPrefs.nChatRoomListHeightPx,bChatRoomListResizing:!1},i}return si.d(t,e),t.prototype.UpdateChatSectionSize=function(){var e=this;if(AssertMsg(this.m_elChatSection,"m_elChatRoomListContainer not set"),this.m_bMouseOver)return this.m_iTimeoutUpdateChatSectionSize&&this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),void(this.m_iTimeoutUpdateChatSectionSize=this.m_window.setTimeout(function(){e.m_iTimeoutUpdateChatSectionSize=void 0,e.UpdateChatSectionSize()},500));var t=this.m_elChatSection.maximumHeight,i=this.m_elChatSection.minimumHeight;if(this.m_elChatRoomListContainer.style.minHeight=i+"px",this.state.nChatRoomListContainerMaxHeight>t){this.m_animationChatSectionShrink&&this.m_animationChatSectionShrink.Cancel();var n=this.state.nChatRoomListContainerMaxHeight,r=t;this.setState({nChatRoomListContainerMaxHeight:n},function(){e.m_animationChatSectionShrink=new zd(e,{nChatRoomListContainerHeight:F(e.state.nChatRoomListContainerHeight,i,t),nChatRoomListContainerMaxHeight:r},{msDuration:300,timing:"sine"}),e.m_animationChatSectionShrink.Start()})}else this.setState({nChatRoomListContainerMaxHeight:t})},t.prototype.OnChatSectionMutation=function(e,t){var i=this;this.m_iTimeoutUpdateChatSectionSize&&this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),this.m_iTimeoutUpdateChatSectionSize=this.m_window.setTimeout(function(){i.m_iTimeoutUpdateChatSectionSize=void 0,i.UpdateChatSectionSize()},1e3)},t.prototype.BindChatRoomTitleContainer=function(e){this.m_elChatRoomTitleContainer=e},t.prototype.BindChatRoomListContainer=function(e){e&&(this.m_elChatRoomListContainer=e,this.UpdateChatSectionSize())},t.prototype.BindChatSection=function(e){this.m_observerChatSection&&(this.m_observerChatSection.disconnect(),this.m_observerChatSection=null),e&&(this.m_elChatSection=e,this.m_window=e.div.ownerDocument.defaultView,this.m_observerChatSection=new MutationObserver(this.OnChatSectionMutation),this.m_observerChatSection.observe(e.div,{childList:!0,subtree:!0}))},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.m_iGrabberBarInitialGrabOffset=e.clientY-this.m_elChatRoomTitleContainer.getBoundingClientRect().top,this.setState({nChatRoomListPreCollapseHeight:gy.UIDisplayPrefs.nChatRoomListHeightPx}),t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterChatRoomListDragEvents)},t.prototype.OnGrabberTouchStart=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.m_iGrabberBarInitialGrabOffset=e.touches[0].clientY-this.m_elChatRoomTitleContainer.getBoundingClientRect().top,t.addEventListener("touchmove",this.HandleTouchMove),t.addEventListener("touchend",this.UnregisterChatRoomListDragEvents)},t.prototype.HandleTouchMove=function(e){e.touches.length>=1&&this.InternalAdjustChatRoomListContainerOnDrag(e.touches[0].clientY)},t.prototype.HandleMouseMove=function(e){this.InternalAdjustChatRoomListContainerOnDrag(e.clientY)},t.prototype.OnMouseEnter=function(e){this.m_bMouseOver=!0},t.prototype.OnMouseLeave=function(e){this.m_bMouseOver=!1},t.prototype.InternalAdjustChatRoomListContainerOnDrag=function(e){if(this.props.parent&&this.props.parent.frame){var t=this.props.parent.frame.getBoundingClientRect(),i=t.top,n=this.m_iGrabberBarInitialGrabOffset,r=t.height-(this.m_elChatRoomTitleContainer.getBoundingClientRect().height-n),o=e-i;o<0?o=0:o>r&&(o=r);var a=r-o;a=F(a,this.m_elChatSection.minimumHeight,this.m_elChatSection.maximumHeight),this.setState({nChatRoomListContainerHeight:a}),this.setState({bChatRoomListCollapsed:!(this.state.nChatRoomListContainerHeight>0)}),gy.SetUIDisplayPref("bChatRoomListCollapsed",!(this.state.nChatRoomListContainerHeight>0)),this.setState({bChatRoomListResizing:!0})}},t.prototype.ToggleChatsList=function(){this.state.bChatRoomListCollapsed&&this.setState({nChatRoomListContainerHeight:this.state.nChatRoomListPreCollapseHeight}),this.setState({bChatRoomListCollapsed:!this.state.bChatRoomListCollapsed}),gy.SetUIDisplayPref("bChatRoomListCollapsed",!this.state.bChatRoomListCollapsed)},t.prototype.UnregisterChatRoomListDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("touchmove",this.HandleTouchMove),e.view.removeEventListener("mouseup",this.UnregisterChatRoomListDragEvents),e.view.removeEventListener("touchend",this.UnregisterChatRoomListDragEvents),this.state.nChatRoomListContainerHeight<1?gy.SetUIDisplayPref("nChatRoomListHeightPx",this.state.nChatRoomListPreCollapseHeight):(this.setState({nChatRoomListPreCollapseHeight:this.state.nChatRoomListContainerHeight}),gy.SetUIDisplayPref("nChatRoomListHeightPx",this.state.nChatRoomListContainerHeight)),this.m_iGrabberBarInitialGrabOffset=null,this.setState({bChatRoomListResizing:!1})},t.prototype.OnCreateChatRoom=function(e){it(Xt(this,e),e.currentTarget.ownerDocument.defaultView)},t.prototype.render=function(){var e=this.state.bChatRoomListCollapsed?0:this.state.nChatRoomListContainerHeight+"px",t=this.state.bChatRoomListCollapsed?0:this.state.nChatRoomListContainerMaxHeight+"px",i={height:e,maxHeight:t},n=this.props.chats.currentChatRoomGroups,r=0,o=!1,a="FriendsListChatSection ChatRoomListContainerParent";if(this.props.chats.chat_group_list_ready)for(var s=0,c=n;s<c.length;s++){var l=c[s];l.HasUnreadChatMessage&&(r++,o=!0)}return this.state.bChatRoomListCollapsed&&(a+=" Collapsed"),this.state.bChatRoomListResizing&&(a+=" ChatListResizing"),o&&(a+=" HasUnreadChats"),Sa.createElement("div",{className:a,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},Sa.createElement("div",{className:"friendsListSectionTitle chatSectionTitle",ref:this.BindChatRoomTitleContainer},this.state.bChatRoomListCollapsed&&o&&Sa.createElement(Zp,null),Sa.createElement("div",{className:"ToggleGroupChatList",onClick:this.ToggleChatsList,title:this.state.bChatRoomListCollapsed?Object(ua.b)("#Tooltip_ChatsExpand"):Object(ua.b)("#Tooltip_ChatsCollapse")},Sa.createElement(Id.k,{angle:-90})),Sa.createElement("div",{className:"voiceRoomDragBar",onMouseDown:this.OnGrabberMouseDown,onTouchStart:this.OnGrabberTouchStart},Sa.createElement("div",{className:"groupChatSectionTitle"},Object(ua.b)("#tab_chats"))),Sa.createElement("button",{className:"createChatRoomButton",onClick:this.OnCreateChatRoom,title:Object(ua.b)("#Tooltip_CreateGroupChat")},Sa.createElement(Id.E,null)),Sa.createElement("div",{className:"disconnectBlocker"})),Sa.createElement("div",{className:"friendsListInsetShadowCtn"},Sa.createElement("div",{className:"friendListInsetShadowTop"})),Sa.createElement("div",{className:"chatRoomListContainer",style:i,ref:this.BindChatRoomListContainer},Sa.createElement(Yp,{friends:this.props.friends,chats:this.props.chats,ref:this.BindChatSection})),Sa.createElement("div",{className:"friendsListInsetShadowCtn"},Sa.createElement("div",{className:"friendListInsetShadowBottom"})))},si.c([yn.a],t.prototype,"UpdateChatSectionSize",null),si.c([yn.a],t.prototype,"OnChatSectionMutation",null),si.c([yn.a],t.prototype,"BindChatRoomTitleContainer",null),si.c([yn.a],t.prototype,"BindChatRoomListContainer",null),si.c([yn.a],t.prototype,"BindChatSection",null),si.c([yn.a],t.prototype,"OnGrabberMouseDown",null),si.c([yn.a],t.prototype,"OnGrabberTouchStart",null),si.c([yn.a],t.prototype,"HandleTouchMove",null),si.c([yn.a],t.prototype,"HandleMouseMove",null),si.c([yn.a],t.prototype,"OnMouseEnter",null),si.c([yn.a],t.prototype,"OnMouseLeave",null),si.c([yn.a],t.prototype,"ToggleChatsList",null),si.c([yn.a],t.prototype,"UnregisterChatRoomListDragEvents",null),si.c([yn.a],t.prototype,"OnCreateChatRoom",null),t=si.c([up.observer],t)}(Sa.Component),bh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.GetDragDropProps=function(e){void 0===e&&(e=!0);var t={rgAcceptedTypes:[]};return e&&(t.fnDragEnter=this.OnDragEnter,t.fnDragLeave=this.OnDragLeave,t.fnDrop=this.OnDrop,t.rgAcceptedTypes=["friend"]),t.onDragStart=this.OnDragStart,t.onDragEnd=this.OnDragEnd,t},t.prototype.OnDragStart=function(e){var t=gy.DragDropManager.GetDragData();if(t&&"friend"==t.type){var i=t;i.group=this.GetGroup(),this.setState({friendDraggedOut:i.friend})}},t.prototype.OnDragEnd=function(e){this.state.friendDraggedOut&&this.setState({friendDraggedOut:null})},t.prototype.OnDragEnter=function(e,t){AssertMsg(e&&"friend"==e.type,"Invalid data type passed to FriendGroupDragDrop.OnDragEnter");var i=e,n=i.friend,r=i.group,o=this.GetGroup();return(!o||r==o||!this.GetGroup().HasMember(n.accountid)||i.is_favorite||this.GetGroup().accepts_group_removals&&r.modifiable)&&n.is_friend&&this.state.friendDrag!=n&&this.setState({friendDrag:n}),!0},t.prototype.ResetDragState=function(){this.setState({friendDrag:null})},t.prototype.OnDragLeave=function(){this.state.friendDrag&&this.ResetDragState()},t.prototype.OnDrop=function(e,t){var i=this;AssertMsg(e&&"friend"==e.type,"Invalid data type passed to FriendGroupDragDrop.OnDrop");var n=e;if(n.group==this.GetGroup())this.setState({friendDraggedOut:null});else{var r=this.state.friendDrag,o=function(){i.state.friendDrag&&i.state.friendDrag==r&&i.ResetDragState()};this.PerformDropAction(n).then(o).catch(o)}},si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDrop",null),t}(Sa.Component),Ch=Object(up.observer)(function(e){if(!wd.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame)return null;var t=wd.FriendStore.FriendGroupStore.game_groups,i=t.map(function(e){return Sa.createElement(Fh,{key:e.id,group:e,bSingletonGroup:!1,bOtherGroups:!0,groupDisplayPrefs:wd.FriendStore.FriendGroupStore.groupDisplayPrefs})}),n=wd.FriendStore.FriendGroupStore.singleton_game_group;return n&&i.push(Sa.createElement(Fh,{key:"singleton",group:n,bSingletonGroup:!0,bOtherGroups:t.length>0,groupDisplayPrefs:wd.FriendStore.FriendGroupStore.groupDisplayPrefs})),Sa.createElement(Sa.Fragment,null,i)}),Sh=function(e){function t(t){var i=e.call(this,t)||this;return i.m_actions=_i.observable.map(),i.state={bLocalCollapsed:i.props.collapsed,bSortOfflineByRecent:!1},i}return si.d(t,e),t.prototype.GetGroup=function(){return this.props.group},t.prototype.PerformDropAction=function(e){var t=e.friend,i=e.group,n=this.props.group;return e.is_favorite||gy.DragDropManager.SetDropConsumed(),wd.FriendStore.FriendGroupStore.TransferFriendFromToGroup(t,i,n)},t.prototype.ToggleCollapsed=function(){this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(this.props.group.unique_id):this.setState({bLocalCollapsed:!this.state.bLocalCollapsed})},t.prototype.IsCollapsed=function(){return this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.GetUserGroupCollapsed(this.props.group.unique_id):this.state.bLocalCollapsed},t.prototype.IsInviteGroup=function(){return this.props.group.m_eDisplayType==Ic.eIncomingInvites},t.prototype.OnContextMenu=function(e){(this.props.group.modifiable||this.props.group.accepts_group_removals)&&Ae(Xt(this,e),this.props.group,e)},t.prototype.OnFriendSelected=function(e){if(this.props.friendSelectAction)return void this.props.friendSelectAction(e);e.OpenChatDialog(Xt(this)),this.props.fnOnSearchSelection&&this.props.fnOnSearchSelection()},t.prototype.OnAcceptInvite=function(e,t){AssertMsg(this.IsInviteGroup(),"accept invite on non-invite group");var i=this.m_actions.get(t.accountid);i&&"accept"==i.action?this.m_actions.delete(t.accountid):this.m_actions.set(t.accountid,{friend:t,action:"accept"})},t.prototype.OnDeclineInvite=function(e,t){AssertMsg(this.IsInviteGroup(),"decline invite on non-invite group");var i=this.m_actions.get(t.accountid);!i||"decline"!=i.action&&"block"!=i.action?this.m_actions.set(t.accountid,{friend:t,action:"decline"}):this.m_actions.delete(t.accountid)},t.prototype.OnBlockInvite=function(e,t){AssertMsg(this.IsInviteGroup(),"block invite on non-invite group"),e?this.m_actions.set(t.accountid,{friend:t,action:"block"}):this.m_actions.set(t.accountid,{friend:t,action:"decline"})},t.prototype.AcceptInvite=function(e,t){wd.FriendStore.SendFriendInvite(t).then(function(i){3!=i&&_e(e,Object(ua.b)("#Friend_Menu_AddToFriendsList"),Object(ua.b)("#Friend_InviteError",t.display_name))})},t.prototype.DeclineInvite=function(e,t){wd.FriendStore.RemoveFriend(t).then(function(i){1!=i&&_e(e,Object(ua.b)("#Friend_Menu_IgnoreIncomingInvite"),Object(ua.b)("#Friend_IgnoreIncomingInvite_Error",t.display_name))})},t.prototype.BlockInvite=function(e,t){wd.FriendStore.BlockPlayer(t).then(function(i){5!=i&&_e(e,Object(ua.b)("#Friend_Menu_BlockIncomingInvite"),Object(ua.b)("#Friend_BlockIncomingInvite_Error",t.display_name))})},t.prototype.OnConfirmChanges=function(e){var t=this;AssertMsg(this.IsInviteGroup(),"confirm changes on non-invite group");var i=e.currentTarget.ownerDocument.defaultView;this.m_actions.forEach(function(e){"accept"==e.action?t.AcceptInvite(i,e.friend):"decline"==e.action?t.DeclineInvite(i,e.friend):"block"==e.action?t.BlockInvite(i,e.friend):console.log("unknown action "+e.action)})},t.prototype.OnIgnoreAllInvites=function(e){var t=this;AssertMsg(this.IsInviteGroup(),"ignore all invites on non-invite group");var i=e.currentTarget.ownerDocument.defaultView;ge(i,Object(ua.b)("#FriendGroup_ConfirmAllIgnore_Title"),Object(ua.b)("#FriendGroup_ConfirmAllIgnore_Body"),Object(ua.b)("#FriendGroup_ConfirmAllIgnore_OK")).then(function(){for(var e=t.props.group.member_list,n=0,r=e;n<r.length;n++){var o=r[n];t.DeclineInvite(i,o)}}).catch(function(){})},t.prototype.OnCloseInvites=function(){AssertMsg(this.IsInviteGroup(),"close invites on non-invite group"),this.props.onClose()},t.prototype.ToggleOfflineSortMethod=function(){this.setState({bSortOfflineByRecent:!this.state.bSortOfflineByRecent})},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.friendGroup==this.props.group||(this.m_FriendRenderContext={friendGroup:this.props.group,chatContext:"friendslist"}),this.m_FriendRenderContext},t.prototype.render=function(){var e=this,t=this.props.searchString&&this.props.searchString.length>0,i=t,n=this.IsCollapsed()&&!t&&!this.state.friendDrag,r=[],o=this.IsInviteGroup(),a=this.props.group.m_eDisplayType==Ic.eOfflineOnly,s=!1;if(!n){var c=!1,l=void 0;if(l=this.props.searchString&&this.props.searchString.length?this.props.group.GetMembersMatchingSearch(this.props.searchString):this.props.group.member_list,this.state.friendDrag&&(this.props.group.HasMember(this.state.friendDrag.accountid)?c=!0:l=l.concat(this.state.friendDrag).sort(Nc.DefaultFriendSortComparator)),a&&this.state.bSortOfflineByRecent&&(l=this.props.group.member_list_unsorted.slice().sort(Nc.FriendSortByLastSeenComparator),s=!0),o){var u=wd.FriendStore.FriendGroupStore.incoming_invites_group;l=l.slice().sort(function(e,t){var i=u.map_steamid_to_mutual_friends.get(e.steamid64),n=u.map_steamid_to_mutual_friends.get(t.steamid64),r=i?i.size:0,o=n?n.size:0,a=r-o;return a>0||0==a&&e.accountid>t.accountid?-1:1})}var d=null;!t&&this.props.group.should_filter_categorized_friends&&(d=wd.FriendStore.FriendGroupStore.categorized_friend_set);for(var p=this,m=0,h=l;m<h.length;m++){var g=h[m];!function(t){if(p.props.setExcludedFriends&&p.props.setExcludedFriends.has(t.accountid))return"continue";if(d&&d.has(t.accountid))return"continue";var i=4==t.efriendrelationship,n=p.state.friendDrag!=t||c?"":"dropGhost";p.state.friendDraggedOut==t&&p.state.friendDrag!=t&&(n+=" dragOriginGhost");var a=void 0,s=void 0,l=void 0;if(o){var u=p.m_actions.get(t.accountid);a=u&&"accept"==u.action?"bright":"dim",s=!u||"decline"!=u.action&&"block"!=u.action?"dim":"bright",l=!u||"decline"!=u.action&&"block"!=u.action?"":" declined",u&&"accept"==u.action?n+="bright":!u||"decline"!=u.action&&"block"!=u.action||(n+="dim")}r.push(Sa.createElement(Bd,{className:o?"friendInviteContainer"+l:"friendCategoryContainer",key:t.accountid,classNames:"friend-anim",timeout:320},Sa.createElement("div",null,Sa.createElement(Oh,si.a({friend:t,key:t.accountid,className:n,context:p.GetFriendRenderContext(),action:i?function(){}:p.OnFriendSelected},p.props.friendProps,{bFriendsListEntry:!0})),o&&Sa.createElement("div",{className:"friendInviteButtons"},Sa.createElement("div",{className:"friendInviteButton acceptFriendInvite "+a,onClick:function(i){return e.OnAcceptInvite(i,t)},title:Object(ua.b)("#FriendGroup_Tip_Accept")},Sa.createElement(Id.f,null)),Sa.createElement("div",{className:"friendInviteButton declineFriendInvite "+s,onClick:function(i){return e.OnDeclineInvite(i,t)},title:Object(ua.b)("#FriendGroup_Tip_Decline")},Sa.createElement(Id._6,null))),o&&Sa.createElement("div",{className:"friendInviteBlockContainer"},Sa.createElement(tp,{onChange:function(i){return e.OnBlockInvite(i,t)}}),Sa.createElement("div",{className:"displayColumn"},Sa.createElement("div",{className:"blockCommunicationLabel"},Object(ua.b)("#FriendGroup_IncomingInvites_Block")),Sa.createElement("div",{className:"blockCommunicationLabel subtitle"},Object(ua.b)("#FriendGroup_IncomingInvites_Block_desc")))))))}(g)}}var f="friendGroup",_=!1,y=!1;if(i&&(f+=" noTransitions"),this.props.group.modifiable?(f+=" taggedGroup ",_=!0):this.props.group.m_eDisplayType==Ic.eOnlineOnlyNotInGame?f+=" onlineFriends ":this.props.group.m_eDisplayType==Ic.eOfflineOnly?(f+=" offlineFriends ",y=!0):this.IsInviteGroup()&&(f+=" friendRequests "),t&&(!r||!r.length))return null;if(0==r.length&&!this.IsCollapsed())return null;var v=0!=this.m_actions.size,b="SortByRecent";return s&&(b+=" Recent"),n&&(b+=" Collapsed"),Sa.createElement(lp,si.a({className:f},this.GetDragDropProps(this.props.group.modifiable||this.props.group.accepts_group_removals)),Sa.createElement("div",{className:"groupHeaderContainer"},!t&&Sa.createElement("div",{className:"groupName"+(n?" Collapsed":""),onClick:this.ToggleCollapsed,onContextMenu:this.OnContextMenu},Sa.createElement("div",{className:"ExpandPlusMinus"},Sa.createElement(Id.I,null)),this.props.group.icon_url&&Sa.createElement("img",{className:"groupIcon",src:this.props.group.icon_url}),this.props.group.name,!t&&Sa.createElement("span",{className:this.IsCollapsed()?"groupCount collapsed":"groupCount"},"(",this.props.group.member_count,")"),_&&Sa.createElement("hr",null)),y&&Sa.createElement("div",{className:b,onClick:this.ToggleOfflineSortMethod,title:s?Object(ua.b)("#FriendGroup_Tip_SortByRecent"):Object(ua.b)("#FriendGroup_Tip_SortByAlphabet")},Sa.createElement(Id.T,null))),Sa.createElement(Od,{className:"groupList",enter:!i,exit:!i},r,o&&Sa.createElement(Bd,{key:"inviteButtons",classNames:"opacityfade-anim",timeout:320},Sa.createElement("div",{className:"confirmInviteRequestContainer"},Sa.createElement("div",{className:"confirmInviteRequestActions"},v?Sa.createElement("div",{className:"confirmInviteButton confirmInvites",onClick:this.OnConfirmChanges},Object(ua.b)("#FriendGroup_ConfirmInvites")):Sa.createElement("div",{className:"confirmInviteButton confirmInvites dim"},Object(ua.b)("#FriendGroup_ConfirmInvites")),Sa.createElement("div",{className:"confirmInviteButton ignoreAllRequests",onClick:this.OnIgnoreAllInvites},Object(ua.b)("#FriendGroup_AllIgnore"))),Sa.createElement("div",{className:"cancelAddFriends",onClick:this.OnCloseInvites,title:Object(ua.b)("#FriendGroup_Close")},Sa.createElement(Id.b,{angle:-90}))))),_&&Sa.createElement("div",{className:"dropTargetBox"}))},si.c([yn.a],t.prototype,"ToggleCollapsed",null),si.c([yn.a],t.prototype,"OnContextMenu",null),si.c([yn.a],t.prototype,"OnFriendSelected",null),si.c([yn.a],t.prototype,"OnAcceptInvite",null),si.c([yn.a],t.prototype,"OnDeclineInvite",null),si.c([yn.a],t.prototype,"OnBlockInvite",null),si.c([yn.a],t.prototype,"OnConfirmChanges",null),si.c([yn.a],t.prototype,"OnIgnoreAllInvites",null),si.c([yn.a],t.prototype,"OnCloseInvites",null),si.c([yn.a],t.prototype,"ToggleOfflineSortMethod",null),t=si.c([up.observer],t)}(bh),Mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(Mp.c,null,Sa.createElement(Lp,{unAppID:this.props.appid,bShowLargeHeader:!0}))},t}(Sa.PureComponent),Fh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bLocalCollapsed:i.props.collapsed},i}return si.d(t,e),t.prototype.GetGroup=function(){return this.props.group},t.prototype.PerformDropAction=function(e){return Promise.reject("FriendGameGroups do not accept drops")},t.prototype.ToggleCollapsed=function(){this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(this.props.group.unique_id):this.setState({bLocalCollapsed:!this.state.bLocalCollapsed})},t.prototype.IsCollapsed=function(){return this.props.groupDisplayPrefs?this.props.groupDisplayPrefs.GetUserGroupCollapsed(this.props.group.unique_id):this.state.bLocalCollapsed},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.friendGroup==this.props.group||(this.m_FriendRenderContext={friendGroup:this.props.group,chatContext:"friendslist"}),this.m_FriendRenderContext},t.prototype.OnShowHeaderContextMenu=function(e){var t=this.props.group.id;t&&wd.AppInfoStore.GetAppInfo(t).is_valid&&ct(Xt(this,e),t,e)},t.prototype.render=function(){if(this.props.bSingletonGroup&&0==this.props.group.unfiltered_count)return null;var e=[];if(!this.IsCollapsed()){var t=this.props.group.member_list,i=new Map,n=new Map,r=new Map;if(!this.props.bSingletonGroup){for(var o="",a=null,s=0,c=t;s<c.length;s++){var l=c[s];a&&l.persona.player_group!=o&&i.set(a.accountid,"lastInGroup"),l.persona.player_group&&(r.set(l.persona.player_group,l.persona.player_group_size),n.has(l.persona.player_group)?n.set(l.persona.player_group,n.get(l.persona.player_group)+1):n.set(l.persona.player_group,1),l.persona.player_group!=o?(i.set(l.accountid,"firstInGroup"),o=l.persona.player_group,a=l):(i.set(l.accountid,"inGroup"),a=l))}a&&i.set(a.accountid,"lastInGroup")}for(var u=!this.props.bSingletonGroup&&this.props.group.id!=wd.FriendStore.FriendGroupStore.non_steam_game_id,d=null,p=0,m=t;p<m.length;p++){var l=m[p],h="";this.state.friendDraggedOut==l&&this.state.friendDrag!=l&&(h+=" dragOriginGhost");var g=!1;if(i.has(l.accountid)){g=!0;var f=i.get(l.accountid);if("lastInGroup"==f){var _=n.get(l.persona.player_group),y=r.get(l.persona.player_group);if(y<=1&&1==_)f="";else if(y&&_<y){var v=wd.FriendStore.self,b=!1;v.persona.player_group==l.persona.player_group&&(b=!0);var C=y-_,S=y-_-(b?1:0),M="oneDigit";C>=10&&C<100?M="twoDigits":C>=100&&(M="manyDigits");var F=1==S?"#FriendGroup_PlayerGroupFooter_Label_Singular":"#FriendGroup_PlayerGroupFooter_Label";b&&(F=0==S?"#FriendGroup_PlayerGroupFooter_Label_PlusYouOnly":1==S?"#FriendGroup_PlayerGroupFooter_Label_PlusYou_Singular":"#FriendGroup_PlayerGroupFooter_Label_PlusYou"),f=1==_?"firstInGroup":"inGroup",d=Sa.createElement(Bd,{key:l.persona.player_group+"_footer",classNames:"friend-anim",timeout:320},Sa.createElement("div",{className:"SteamPlayerGroupFooter lastInGroup",draggable:!1},Sa.createElement("div",{className:"SteamPlayerGroupLines"}),Sa.createElement("div",{className:"SteamPlayerGroupFooterCount "+M},Sa.createElement("div",{className:"count"},"+",C)),Sa.createElement("div",{className:"SteamPlayerGroupFooterLabel"},Object(ua.b)(F,S))))}}h+=" "+f}var w=void 0;this.props.bSingletonGroup&&(w=Sa.createElement(wh,{appid:l.persona.m_unGamePlayedAppID})),e.push(Sa.createElement(Bd,{key:l.accountid,classNames:"friend-anim",timeout:320},Sa.createElement(Oh,{friend:l,key:l.accountid,bHideGameName:u,className:h,context:this.GetFriendRenderContext(),bInGroup:g,bFriendsListEntry:!0,listStatusIndicatorLeft:w}))),d&&e.push(d)}}var B="friendGroup gameGroup",O=this.props.group.name,I=null;return this.props.bSingletonGroup&&(B+=" OtherGamesGroup",I=this.props.bOtherGroups?Object(ua.b)("#FriendGroup_InGame_Others"):Object(ua.b)("#FriendGroup_InGame")),Sa.createElement(lp,si.a({className:B},this.GetDragDropProps(this.props.group.modifiable||this.props.group.accepts_group_removals)),Sa.createElement("div",{className:"groupName"+(this.IsCollapsed()?" Collapsed":""),onClick:this.ToggleCollapsed,onContextMenu:this.OnShowHeaderContextMenu},Sa.createElement("div",{className:"gameGroupContainer"},Sa.createElement("div",{className:"ExpandPlusMinus"},Sa.createElement(Id.I,null)),I,this.props.group.icon_url&&Sa.createElement("img",{className:"groupIcon",src:this.props.group.icon_url})),O,Sa.createElement("span",{className:this.IsCollapsed()?"groupCount collapsed":"groupCount"},"(",this.props.group.member_count,")"),Sa.createElement("hr",null)),Sa.createElement(Od,{className:this.IsCollapsed()?"friendsContainer groupCollapsed":"friendsContainer"},e))},si.c([yn.a],t.prototype,"ToggleCollapsed",null),si.c([yn.a],t.prototype,"OnShowHeaderContextMenu",null),t=si.c([up.observer],t)}(bh),wh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnShowGameIconContextMenu=function(e){ct(Xt(this,e),this.props.appid,e)},t.prototype.render=function(){var e=wd.AppInfoStore.GetAppInfo(this.props.appid);return e.is_valid?Sa.createElement("div",{className:"FriendInGameIcon",onContextMenu:this.OnShowGameIconContextMenu},Sa.createElement("img",{className:"gameIcon",alt:"",src:e.icon_url})):Sa.createElement("div",{className:"FriendInGameIcon"},Sa.createElement("div",{className:"FriendInGameIcon_NA"},"N/A"))},si.c([yn.a],t.prototype,"OnShowGameIconContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),Bh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnContextMenu=function(e){if(!this.props.disableContextMenu){var t=void 0;t=this.props.onContextMenu?this.props.onContextMenu(e):gy.FriendHoverStore.GetHover(this.props.friend).OnContextMenu(this.props.context,e),t&&this.props.onContextMenuShown&&this.props.onContextMenuShown(t)}},t.prototype.componentWillUnmount=function(){gy.FriendHoverStore.GetHover(this.props.friend).HideByElement(On.findDOMNode(this))},t.prototype.render=function(){var e=Sa.Children.only(this.props.children);if(e){var t=this.props,i=gy.FriendHoverStore.GetHover(t.friend);return Sa.cloneElement(e,{onMouseEnter:function(e){return i.Show(e,t.context)},onMouseLeave:i.Hide,onContextMenu:this.OnContextMenu})}return this.props.children},si.c([yn.a],t.prototype,"OnContextMenu",null),t}(Sa.Component),Oh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bActive:!1},i}return si.d(t,e),t.prototype.OnDoubleClick=function(e){this.RunAction(!0,e)},t.prototype.OnClick=function(e){this.RunAction(!1,e)},t.prototype.RunAction=function(e,t){!this.props.bSingleClickActivate==e&&(this.props.action?this.props.action(this.props.friend):this.props.noActions||this.props.friend.OpenChatDialog(Xt(this,t)))},t.prototype.OnDragStart=function(e){e.dataTransfer.setData("text/plain",this.props.friend.persona.m_strPlayerName),e.dataTransfer.setData("text/steamid",this.props.friend.persona.m_steamid.ConvertTo64BitString()),this.props.friend.is_friend?gy.DragDropManager.StartDrag({type:"friend",source:this.props.context.chatContext,friend:this.props.friend,sourceContext:this.props.context}):gy.DragDropManager.StartDrag({type:"nonfriend",source:this.props.context.chatContext,friend:this.props.friend,sourceContext:this.props.context}),gy.FriendHoverStore.GetHover(this.props.friend).HideAllInstances()},t.prototype.OnDragEnd=function(e){gy.DragDropManager.EndDrag()},t.prototype.OnShowContextMenu=function(e){var t=De(Xt(this,e),this.props.context,this.props.friend,e);t&&this.OnContextMenuShown(t)},t.prototype.OnContextMenuShown=function(e){var t=this;this.setState({bActive:!0}),e.SetOnHideCallback(function(){t.setState({bActive:!1})})},t.prototype.render=function(){var e=this.props.friend;if(e.LoadIfNecessary(),!e.is_ready)return Sa.createElement("div",null);var t=wd.CMInterface.steamid.GetAccountID()==e.accountid,i="",n=(this.props.avatarQualityFull,0);this.props.showVoiceLevel&&(n=wd.VoiceStore.get_volume(e.accountid));var r={className:"friend "+ot(e.persona)};this.props.className&&(r.className+=" "+this.props.className),this.props.bFriendsListEntry&&(r.className+=" friendStatusHover");var o="",a="";if(t){var s=wd.VoiceStore.IsAttemptingInitialConnection(),c=wd.VoiceStore.HasBeenAttemptingOverTwoSeconds(),l=wd.VoiceStore.IsAttemptingReconnect();c?(i=Object(ua.b)("#VoiceChatConnecting"),t&&(o="https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114",a=Object(ua.b)("#VoiceChatConnectingHelp"))):l&&(i=Object(ua.b)("#VoiceChatReconnecting"),t&&(o="https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114",a=Object(ua.b)("#VoiceChatConnectingHelp")));var u="";s&&(u+=" connecting"),c&&(u+=" slowconnecting"),l&&(u+=" reconnecting"),r.className+=u}this.props.noActions&&!this.props.action||(r.onDoubleClick=this.OnDoubleClick,r.onClick=this.OnClick),this.props.noActions||this.props.notDraggable||(r.onDragStart=this.OnDragStart,r.onDragEnd=this.OnDragEnd,r.draggable=!0);var d;if(this.props.children)d=Sa.createElement("div",si.a({},r),this.props.children);else{var p={};if(this.props.showVoiceLevel&&1!=n){var m=Math.min(3.2*n,1),h=Math.max(0,100*m);h=Math.round(10*h)/10,p.height=h+"%",p.top="auto",h>1&&(r.className+=" speaking")}this.state.bActive&&(r.className+=" Friend_ContextMenuActive");var g=wd.VoiceStore.GetPerUserMuting(e.accountid);d=Sa.createElement("div",si.a({},r),this.props.bInGroup&&Sa.createElement("div",{className:"SteamPlayerGroupLines"}),this.props.bInVoiceList&&Sa.createElement(Ih,{friend:e}),this.props.listStatusIndicatorLeft,Sa.createElement("div",{className:"avatarHolder no-drag"},Sa.createElement("div",{className:"avatarStatus",style:p}),Sa.createElement("img",{className:"avatar",src:this.props.avatarQualityFull?e.persona.avatar_url_full:e.persona.avatar_url_medium,draggable:!1}),this.props.bInVoiceList&&g&&Sa.createElement(Id._4,null)),Sa.createElement(Eh,{friend:e,strOverrideStatus:i,strStatusURL:o,strStatusURLTitle:a,bHideGameName:this.props.bHideGameName,bForcePersonaNameDisplay:this.props.bForcePersonaNameDisplay,onShowContextMenu:!this.props.noActions&&!this.props.disableContextMenu&&this.OnShowContextMenu,bHidePersona:this.props.bHidePersona,bHideCustomPendingStatus:this.props.context&&"chatmemberlist"==this.props.context.chatContext}),null,this.props.listStatusIndicator)}return this.props.noActions?d:Sa.createElement(Bh,{friend:e,context:this.props.context,disableContextMenu:this.props.disableContextMenu,onContextMenuShown:this.OnContextMenuShown},d)},si.c([yn.a],t.prototype,"OnDoubleClick",null),si.c([yn.a],t.prototype,"OnClick",null),si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),si.c([yn.a],t.prototype,"OnShowContextMenu",null),si.c([yn.a],t.prototype,"OnContextMenuShown",null),t=si.c([up.observer],t)}(Sa.Component),Ih=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.friend,t=wd.CMInterface.steamid.GetAccountID()==e.accountid,i="voiceStatusIconsContainer",n="",r="",o=!1,a=!1,s=!1,c=wd.VoiceStore.GetPerUserMuting(e.accountid),l=wd.VoiceStore.GetUserMutedRemotely(e.accountid),u=wd.VoiceStore.GetOutputMutedRemotely(e.accountid);return t?(o=wd.VoiceStore.IsMicMuted(),a=wd.VoiceStore.IsOutputMuted(),s=wd.VoiceStore.BNoMicAvailableForSession(),o&&(i+=" mic_muted_self"),a&&(i+=" output_muted_self")):s=wd.VoiceStore.GetUserHasNoMicForSession(e.accountid),c&&(i+=" muted_locally"),l&&(i+=" mic_muted_remotely"),u&&(i+=" output_muted_remotely"),s&&(i+=" no_mic_for_session"),s?n=Object(ua.b)("#Tooltip_MicStatus_NoMic"):l?n=Object(ua.b)("#Tooltip_RemoteMicStatus_Muted"):o&&(n=Object(ua.b)("#Tooltip_YourMicStatus_Muted")),u?r=Object(ua.b)("#Tooltip_RemoteOutputStatus_Muted"):a&&(r=Object(ua.b)("#Tooltip_YourOutputStatus_Muted")),Sa.createElement("div",{className:i},Sa.createElement("div",{className:"voicestatusIcon voiceStatusMic disabled",title:n},Sa.createElement(Id.C,null)),Sa.createElement("div",{className:"voicestatusIcon voiceStatusOutput disabled",title:r},Sa.createElement(Id.t,null)))},t=si.c([up.observer],t)}(Sa.Component),Rh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.friend,t={className:"friend FriendAvatar "+ot(e.persona)};this.props.bLarge&&(t.className+=" FriendAvatar_Large"),this.props.className&&(t.className+=" "+this.props.className);var i=Sa.createElement("div",si.a({},t),this.props.children,Sa.createElement("div",{className:"avatarHolder"+(this.props.bLarge?" Large":"")},Sa.createElement("div",{className:"avatarStatus"}),Sa.createElement("img",{className:"avatar",src:this.props.bLarge?e.persona.avatar_url_full:e.persona.avatar_url_medium})));return Sa.createElement(Bh,{friend:e,context:this.props.context},i)},t=si.c([up.observer],t)}(Sa.Component),Eh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.friend,t=null,i=null,n=null,r=2==e.efriendrelationship,o=null,a=null,s=null,c="labelHolder";if(this.props.strOverrideStatus)n=this.props.strOverrideStatus;else if(r&&!this.props.bHideCustomPendingStatus)o=wd.FriendStore.FriendGroupStore.incoming_invites_group,a=o.map_steamid_to_mutual_friends.get(e.steamid64),void 0===a?(wd.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),n=Object(ua.b)("#FriendGroup_NoMutualFriends"),c+=" noMutualFriends"):(n=Object(ua.c)("#FriendGroup_YesMutualFriends",a.size),s=a.size);else if(e.is_blocked)n=Object(ua.b)("#PersonaStateBlocked"),c+=" StatusLabel_Blocked";else if(e.persona.is_ingame){n=e.persona.current_game_name;var l=wd.FriendStore.self==e;l||this.props.bHidePersona?l&&e.persona.is_awayOrSnooze&&(i=Object(ua.b)("#PersonaStateAway")):i=e.persona.current_game_rich_presence}else if(e.persona.m_broadcastAccountId&&IsFeatureBroadcastEnabled()){var u=e.GetBroadcastDescription();u&&(n=Object(ua.b)("#PersonaStateWatchingBroadcast"),i=u)}n||(n=e.localized_online_status),e.persona.is_awayOrSnooze&&!this.props.bHidePersona&&(t=Sa.createElement(st,null)),!this.props.bHideGameName&&i||(c+=" twoLine");var d=null;this.props.onShowContextMenu?d=Sa.createElement("div",{className:"ContextMenuButton",onClick:this.props.onShowContextMenu},Sa.createElement(Id.l,null)):c+=" NoContextMenu",this.props.bHidePersona&&(c+=" HidePersona");var p=null;return p=r?Sa.createElement("div",{className:"gameName richPresenceLabel no-drag"},Sa.createElement("span",{className:"mutualFriendNumber"},s&&s+" "),n):void 0!=this.props.strStatusURL&&""!=this.props.strStatusURL?Sa.createElement("div",{className:"gameName richPresenceLabel no-drag"},Sa.createElement("a",{target:"_blank",title:this.props.strStatusURLTitle?this.props.strStatusURLTitle:"",href:this.props.strStatusURL},n)):Sa.createElement("div",{className:"gameName richPresenceLabel no-drag"},n),Sa.createElement("div",{className:c},Sa.createElement("div",{className:"statusAndName"},Sa.createElement("div",{className:"playerName"},e.primary_display_name||" ",!e.is_display_name_nickname&&e.has_secondary_display_name&&Sa.createElement("span",{className:"playerNickname"},"(",e.secondary_display_name,")")),this.props.bDNDSet&&Sa.createElement("div",{className:"DNDContainer",title:Object(ua.b)("#User_ToggleDoNotDisturb")},Sa.createElement(Id.j,null)),e.is_display_name_nickname&&Sa.createElement("span",{className:"playerNicknameBracket",title:Object(ua.b)("#isNickname")}," *"),t,d),!this.props.bHidePersona&&Sa.createElement("div",{className:"richPresenceContainer"},(!this.props.bHideGameName||!i)&&p,i&&Sa.createElement("div",{className:"richPresenceLabel no-drag"},i)))},t=si.c([up.observer],t)}(Sa.Component),Th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e,t=wd.ChatStore.FriendChatStore.GetUnreadFriendMessageCount(this.props.browserContext);return this.props.bScrolledFromTop&&t>0&&(e=Sa.createElement(Bd,{classNames:"unread-messages-anim",timeout:320},Sa.createElement("div",{className:"unreadMessageViolator",onClick:this.props.onClick},1==t&&Object(ua.b)("#FriendGroup_UnreadMessagesViolator"),t>1&&Object(ua.b)("#FriendGroup_UnreadMessagesViolatorPlural",t)))),Sa.createElement(Od,null,e)},t=si.c([up.observer],t)}(Sa.Component),kh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={collapsed:!1},i}return si.d(t,e),t.prototype.OnHeaderClick=function(e){this.setState({collapsed:!this.state.collapsed})},t.prototype.render=function(){var e=this.props.friendChatStore.GetFriendsWithUnreadMessages(this.props.browserContext);if(!e.length)return null;var t=this.state.collapsed,i=t?null:e.map(function(e){var t=e.unread_message_count,i=e.chat_partner,n=Sa.createElement("div",{className:"FriendMessageCount"},t);return Sa.createElement(Bd,{key:i.accountid,classNames:"friend-anim",timeout:320},Sa.createElement("div",{className:"unreadFriend"},Sa.createElement(Oh,{friend:i,key:i.accountid,context:{chat:e},bFriendsListEntry:!0}),n))});return Sa.createElement("div",{className:"friendGroup"},Sa.createElement("div",{className:"groupName"+(t?" Collapsed":""),onClick:this.OnHeaderClick},Sa.createElement("div",{className:"ExpandPlusMinus"},Sa.createElement(Id.I,null)),Object(ua.b)("#FriendGroup_UnreadMessages"),Sa.createElement("span",{className:"groupCount"},"(",e.length,")"),Sa.createElement("hr",null)),Sa.createElement(Od,null,i))},si.c([yn.a],t.prototype,"OnHeaderClick",null),t=si.c([up.observer],t)}(Sa.Component),Dh=(Sa.Component,function(e){function t(t){var i=e.call(this,t)||this;return i.m_bNoSpace=!1,i.state={x:void 0,y:void 0,hoverPositionReady:!1},i}return si.d(t,e),t.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},t.prototype.componentDidUpdate=function(){this.positionHover()},t.prototype.render=function(){var e=Object.assign({left:this.state.x,top:this.state.y},this.props.style),t=!this.props.visibilityObserver||this.props.visibilityObserver.visible,i=(this.props.className||"")+" HoverPosition"+(t&&this.state.hoverPositionReady?" ready":"")+(this.m_bNoSpace?" nospace":"");return Sa.createElement("div",{className:i,style:e,ref:this.bindHover},this.props.children)},t.prototype.positionHover=function(){var e=this.m_elHover,t=this.props.target;if(e&&t&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var i=t.ownerDocument.defaultView;if(i&&!i.closed){var n=e.querySelector(".hover_arrow.left"),r=e.querySelector(".hover_arrow.right"),o=r,a=t.getBoundingClientRect(),s=e.getBoundingClientRect(),c=a.left,l=a.top,u=a.right+s.width+14,d=i.innerWidth-u,p=a.left-s.width;if(d<14&&p>d){if((c=a.left-s.width+2+3)<-10)return e.setAttribute("style","display: none;"),this.m_bNoSpace=!0,void(this.props.onNoSpace&&this.props.onNoSpace());n&&n.setAttribute("style","display: none;"),r&&r.setAttribute("style","")}else{if((c=a.left+a.width-2)+s.width-10>i.innerWidth)return e.setAttribute("style","display: none;"),this.m_bNoSpace=!0,void(this.props.onNoSpace&&this.props.onNoSpace());o=n,n&&n.setAttribute("style",""),r&&r.setAttribute("style","display: none;")}var m=0;if(a.height<48&&(m=Math.floor(a.height/2)-24),l=a.top-15+m,a.top+s.height+35>i.innerHeight){var h=s.height+35-(i.innerHeight-a.top),g=null!=e.querySelector(".miniprofile_ingame"),f=g?78:24;h=Math.min(s.height-f,h);var _=a.top-h;o&&o.setAttribute("style","top: "+(30+l-_)+"px"),l=_}c!=this.state.x&&this.setState({x:c}),l!=this.state.y&&this.setState({y:l}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},si.c([yn.a],t.prototype,"bindHover",null),t=si.c([up.observer],t)}(Sa.Component)),Gh=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.hoverInstance.hover,t=e.persona,i=void e.community_data_ready;e.community_data_ready&&(i=Sa.createElement("div",{className:"miniProfileFeaturedContainer"},Sa.createElement("div",{className:e.player_level_class},Sa.createElement("span",{className:"friendPlayerLevelNum"},e.player_level)),Sa.createElement("div",{className:"featuredLabels"},Sa.createElement("div",{className:"featuredTitle"},Object(ua.b)("#Hover_SteamLevel")+" "))));var n=e.player_badge,r=void 0;n&&(r=Sa.createElement("div",{className:"miniProfileFeaturedContainer"},Sa.createElement("div",{className:"favoriteBadgeIcon"},Sa.createElement("img",{src:n.icon,className:"badgeIcon"})),Sa.createElement("div",{className:"featuredLabels favoriteBadgeDescription"},Sa.createElement("div",{className:"featuredTitle"},n.name),Sa.createElement("div",{className:"featuredSubTitle"},Object(ua.b)("#Hover_BadgeXP",n.xp)))));var o=void 0,a="miniProfileContent";if(t.is_ingame){var s="";if(t.m_unGamePlayedAppID){var c=wd.AppInfoStore.GetAppInfo(t.m_unGamePlayedAppID);c&&(s=c.logo_url)}o=Sa.createElement("div",{className:"miniProfileGameContainer"},s&&Sa.createElement("img",{className:"gameLogo",src:s}),Sa.createElement("div",{className:"gameContent persona in-game ellipsis"},Sa.createElement("div",{className:"gameState"},Object(ua.b)(t.is_in_nonsteam_game?"#PersonaStateInNonSteamGame":"#PersonaStateInGame")),t.current_game_name,t.current_game_rich_presence&&Sa.createElement("div",{className:"richPresence"},t.current_game_rich_presence)))}else a+=" notInGame";var l=!0,u=!1,d=!1;e.friend.is_friend||e.friend==wd.FriendStore.self||(a+=" notFriends",l=!1),e.friend.is_blocked&&(a+=" communicationBlocked",d=!0);var p=e.friend.has_nickname,m=void 0,h=null,g=!1;t.is_awayOrSnooze&&(h=Sa.createElement(st,null),g=!0);var f=Sa.createElement("div",null),_=this.props.hoverInstance.context;if(_&&_.friendGroup&&_.friendGroup.m_eDisplayType==Ic.eIncomingInvites){var y=wd.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(e.friend.steamid64);if(void 0!=y){f=Sa.createElement("div",{className:"mutualFriendTitle"}," ",Object(ua.b)("#FriendGroup_MutualFriends_Title")," ");for(var v=[],b=Array.from(y),C=0;C<b.length&&C<10;C++){var S=wd.FriendStore.GetFriend(b[C]);v.push(Sa.createElement("div",{className:"mutualFriend"},Sa.createElement("img",{className:"mutualFriendAvatar",src:S.persona.avatar_url_medium}),Sa.createElement("div",{className:"mutualFriendLabel"},S.display_name)))}b.length>=10&&v.push(Sa.createElement("div",{className:"mutualFriend"},Sa.createElement("div",{className:"mutualFriendLabel plusOthersLabel"},Object(ua.c)("#FriendGroup_MutualFriends_Others",b.length-10)))),f=Sa.createElement("div",{className:"mutualFriendsContainer"}," ",f," ",Sa.createElement("div",null," ",v," ")," ")}}m=p?Sa.createElement("div",{className:"personaName hasNickname"},"(",Sa.createElement("div",{className:"personaNameLabel"},t.m_strPlayerName),")"):Sa.createElement("div",{className:"personaName"},Sa.createElement("div",{className:"personaNameLabel"},t.m_strPlayerName));var M="miniProfilePlayer "+t.online_state;return g&&(M+=" isAway"),2==e.friend.efriendrelationship&&(u=!0),Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"miniProfileHoverInner"},Sa.createElement("div",{className:a},Sa.createElement("div",{className:"miniProfileBackground"},Sa.createElement("img",{className:"miniProfileBackgroundBlur",src:t.avatar_url})),Sa.createElement("div",{className:"miniProfileHeader"},Sa.createElement("div",{className:M},Sa.createElement("div",{className:"playerAvatar"},Sa.createElement("img",{src:t.avatar_url_full}),Sa.createElement("div",{className:"avatarStatus miniProfileAvatarStatus"})),h,Sa.createElement("div",{className:"playerContent"},Sa.createElement("div",{className:"playerName"},Sa.createElement("div",{className:"persona"},p&&Sa.createElement("div",{className:"personaName nickName"},Sa.createElement("div",{className:"personaNameLabel"},e.friend.nickname),Sa.createElement("div",{className:"playerNicknameBracket",title:Object(ua.b)("#isNickname")},"*")),m,g&&Sa.createElement("div",{className:"awayStatusLabel"},Object(ua.b)("#PersonaStateAway")),"offline"==t.online_state&&Sa.createElement("div",{className:"awayStatusLabel"},e.friend.localized_online_status),"online"==t.online_state&&!g&&Sa.createElement("div",{className:"awayStatusLabel"},Object(ua.b)("#PersonaStateOnline")),!l&&Sa.createElement("div",{className:"miniProfileNotFriends"},u?Object(ua.b)("#Friend_Menu_NotAFriendRequesting"):Object(ua.b)("#Friend_Menu_NotAFriendLabel")),d&&Sa.createElement("div",{className:"miniProfileBlocked"},Object(ua.b)("#PersonaStateBlocked"))))))),o,Sa.createElement("div",{className:"miniProfileBottom"},r,i),Sa.createElement("div",{className:"mutualFriends"}," ",f," "))))},t=si.c([up.observer],t)}(Sa.Component),Nh=function(e){function t(t,i){var n=e.call(this,"hoverpopup",{title:"hover",html_class:"HoverPopup client_chat_frame",body_class:"HoverPopupBody Hover"+t.className,replace_existing_popup:!0,target_browser:i,eCreationFlags:dp.c.Tooltip})||this;return n.m_hoverProps=t,n}return si.d(t,e),t.prototype.UpdateParamsBeforeShow=function(e){var t=Ad.h(this.m_hoverProps.target.ownerDocument.defaultView,this.m_hoverProps.target.getBoundingClientRect());return e.dimensions={left:t.right,top:t.top,width:1,height:1},e.availscreenwidth=this.m_hoverProps.target.ownerDocument.defaultView.screen.availWidth,e.availscreenheight=this.m_hoverProps.target.ownerDocument.defaultView.screen.availHeight,e},t.prototype.Render=function(e,t){var i=this.InternalRender();On.render(Sa.createElement(Ah,si.a({},this.m_hoverProps,{popup:e}),i),t)},t}(dp.a),Lh=function(e){function t(t,i,n){var r=e.call(this,{target:t,visibilityObserver:i,className:"friendHover miniProfileHover"},n)||this;return r.m_instance=i,r}return si.d(t,e),t.prototype.OnLoad=function(){},t.prototype.OnResize=function(){},t.prototype.OnClose=function(){},t.prototype.InternalRender=function(){return Sa.createElement(Gh,{hoverInstance:this.m_instance})},t}(Nh),Ah=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bNoSpace=!1,i.state={x:void 0,y:void 0,width:void 0,height:void 0,hoverPositionReady:!1},i}return si.d(t,e),t.prototype.bindHover=function(e){this.m_elHover=e||void 0,this.positionHover()},t.prototype.componentDidUpdate=function(){this.positionHover()},t.prototype.componentWillReceiveProps=function(e){this.setState({hoverPositionReady:!1})},t.prototype.render=function(){var e=this,t=!this.props.visibilityObserver||this.props.visibilityObserver.visible;return this.props.className,t&&this.state.hoverPositionReady,this.m_bNoSpace,void 0!==this.state.x&&this.props.target.ownerDocument.defaultView.SteamClient.Window.GetWindowRestoreDetails(function(t){var i=e.state.x-e.props.target.ownerDocument.defaultView.screenX,n=e.state.y-e.props.target.ownerDocument.defaultView.screenY;try{e.props.popup.SteamClient.Window.PositionWindowRelative(t,i,n,e.state.width,e.state.height)}catch(e){console.error(e)}}),Sa.createElement("div",{className:"HoverPositionPopup",ref:this.bindHover},this.props.children)},t.prototype.positionHover=function(){var e=this.m_elHover,t=this.props.target;if(e&&t&&(!this.state.hoverPositionReady||!this.props.visibilityObserver||this.props.visibilityObserver.visible)){var i=this.props.popup,n=t.ownerDocument.defaultView;if(i&&!i.closed){var r=Ad.h(n,t.getBoundingClientRect()),o=Ad.h(i,e.getBoundingClientRect()),a=r.left,s=r.top,c=i.screen,l=0;c.availLeft&&(l=c.availLeft);var u=r.right+o.width+2,d=i.screen.availWidth+l-u,p=r.left-o.width-l;a=d<2&&p>d?r.left-o.width-3+3:r.left+r.width- -3;var m=0;if(r.height<48&&(m=Math.floor(r.height/2)-24),s=r.top-15+m,r.top+o.height+0>i.screen.availHeight){var h=o.height+0-(i.screen.availHeight-r.top),g=null!=e.querySelector(".miniprofile_ingame"),f=g?78:24;h=Math.min(o.height-f,h),s=r.top-h}a=Math.floor(a),s=Math.floor(s);var _=Math.ceil(o.width),y=Math.ceil(o.height);a!=this.state.x&&this.setState({x:a}),s!=this.state.y&&this.setState({y:s}),_!=this.state.width&&this.setState({width:_}),y!=this.state.height&&this.setState({height:y}),this.state.hoverPositionReady||this.setState({hoverPositionReady:!0})}}},si.c([yn.a],t.prototype,"bindHover",null),t=si.c([up.observer],t)}(Sa.Component),Ph=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){if(null==this.props.text)return Sa.createElement(Sa.Fragment,null,this.props.children);var e;if(e=this.props.text instanceof Array?this.props.text.map(function(e){return e?e.toString():""}).filter(function(e){return e.length>0}).join("\n"):this.props.text.toString(),1==Sa.Children.count(this.props.children)){var t=Sa.Children.only(this.props.children);return Sa.cloneElement(t,{"data-copystyle":this.props.style,"data-copytext":e})}return console.log("Error: CopyableText must be the parent of exactly one child:\n\tcopystyle="+this.props.style+" copytext="+e),Sa.createElement(Sa.Fragment,null,this.props.children)},t.defaultProps={text:""},t}(Sa.Component),xh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.OnMouseEnter=function(e){gy.EmoticonHoverStore.GetEmoticonHover(e.currentTarget.getAttribute("data-emoticon")).Show(e)},t.OnMouseLeave=function(e){gy.EmoticonHoverStore.GetEmoticonHover(e.currentTarget.getAttribute("data-emoticon")).Hide(e)},t.prototype.render=function(){var e="emoticon";this.props.large&&(e+=" large");var i=":"+this.props.emoticon+":";return Sa.createElement(Ph,{text:i},Sa.createElement("img",{src:sl.GetEmoticonURL(this.props.emoticon,this.props.large),alt:i,className:e,"data-emoticon":this.props.emoticon,onMouseEnter:t.OnMouseEnter,onMouseLeave:t.OnMouseLeave}))},t}(Sa.PureComponent),zh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(Dh,{visibilityObserver:this.props.hover,target:this.props.target,className:"emoticon_hover FriendsUIEmoticonHover"},Sa.createElement("div",{className:"emoticon_hover_content",dangerouslySetInnerHTML:{__html:this.props.hover.emoticon_html}}),Sa.createElement("div",{className:"hover_arrow left emoticon_hover_arrow"}),Sa.createElement("div",{className:"hover_arrow right emoticon_hover_arrow"}))},t=si.c([up.observer],t)}(Sa.Component),Uh=function(e){function t(t){var i=e.call(this,t)||this;i.m_ScrollCoordinator=new Ad.f(40),i.state={strSearchText:""};var n=wd.ChatStore.EmoticonStore;return n.is_initialized||(n.emoticon_list,i.m_disposeEmoticonStore=Object(_i.when)(function(){return n.is_initialized},function(){return i.forceUpdate()})),i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_disposeEmoticonStore&&this.m_disposeEmoticonStore()},t.prototype.OnClick=function(e){var t=e.currentTarget.getAttribute("data-emoticon");this.props.OnSelected(t,e.shiftKey),gy.EmoticonHoverStore.GetEmoticonHover(t).Hide(e)},t.prototype.OnSearchInput=function(e){var t=e.currentTarget.value;this.setState({strSearchText:t})},t.prototype.OnSubmit=function(e){e.preventDefault(),this.m_strFirstEmoticon&&this.props.OnSelected(this.m_strFirstEmoticon,!1)},t.prototype.RenderEmoticon=function(e,t){var i=t.name;return e&&(i=e+t.name),Sa.createElement(Vh,{key:i,emoticon:t,onClick:this.OnClick,coordinator:this.m_ScrollCoordinator})},t.prototype.OnScrollRef=function(e){this.m_ScrollCoordinator.SetParent(e)},t.prototype.OnScroll=function(e){this.m_ScrollCoordinator.RecomputeVisibility()},t.prototype.componentDidUpdate=function(){this.m_ScrollCoordinator.InvalidateOffsetsAndRecompute()},t.prototype.render=function(){var e=wd.ChatStore.EmoticonStore,t=[],i=[],n=!1;if(e.is_initialized){var r=this.state.strSearchText.trim();if(r.length>0)n=!0,t=e.SearchEmoticons(r,50,!1),i=t.map(this.RenderEmoticon.bind(this,"")),this.m_strFirstEmoticon=t.length?t[0].name:null;else{var o=e.recent_emoticons,a=e.emoticon_list,s=Math.ceil(a.length/9);if(s<=2)o=[];else{var c=Math.floor(s/2);o=o.slice(0,9*c),o.length>9&&o.length%9<=2&&(o=o.slice(0,9*Math.floor(o.length/9)))}o.length&&(i=o.map(this.RenderEmoticon.bind(this,"recent_")),i.push(Sa.createElement("div",{key:"__recent_all_separator",className:"EmoticonSelector_Separator"},Sa.createElement("div",{className:"EmoticonSelector_SeparatorBackground"})))),a.length>1e3&&(a=a.slice(0,1e3)),a.length>=32&&(n=!0),i.push.apply(i,a.map(this.RenderEmoticon.bind(this,""))),this.m_strFirstEmoticon=null}}return Sa.createElement(Mp.c,null,Sa.createElement("div",{className:"EmoticonSelector"},Sa.createElement("div",{className:"EmoticonSelector_Emoticons",ref:this.OnScrollRef,onScroll:this.OnScroll},i),n&&Sa.createElement("div",{className:"EmoticonSelector_Controls"},Sa.createElement("form",{onSubmit:this.OnSubmit},Sa.createElement("input",{type:"text",placeholder:Object(ua.b)("#Emoticon_Search"),value:this.state.strSearchText,onChange:this.OnSearchInput,className:"ContextMenuAutoFocus friendSearchInput"})))))},si.c([yn.a],t.prototype,"OnClick",null),si.c([yn.a],t.prototype,"OnSearchInput",null),si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"OnScrollRef",null),si.c([yn.a],t.prototype,"OnScroll",null),t}(Sa.Component),Vh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={visible:!1},i}return si.d(t,e),t.prototype.SetVisible=function(e){e&&!this.state.visible&&this.setState({visible:!0})},t.prototype.componentDidMount=function(){this.props.coordinator.RegisterChild(On.findDOMNode(this),this.SetVisible)},t.prototype.componentWillUnmount=function(){this.props.coordinator.UnregisterChild(On.findDOMNode(this))},t.prototype.render=function(){var e=this.props.emoticon,t="EmoticonSelector_Item",i=!1;return!e.last_used&&e.time_received&&(t+=" EmoticonSelector_Item_New",i=!0),Sa.createElement("div",{className:t,"data-emoticon":e.name,onClick:this.props.onClick},this.state.visible&&Sa.createElement(xh,{emoticon:e.name}),i&&Sa.createElement(ut,null))},si.c([yn.a],t.prototype,"SetVisible",null),t}(Sa.Component),jh=function(e){function t(t){var i=e.call(this,t)||this;return i.m_refTextInput=Sa.createRef(),i.m_refFileInput=Sa.createRef(),i.m_textFocusCallback=null,i.state={messageInput:"",submitEnabled:!1,mentionSearch:void 0,activeSuggestSearchType:void 0},i}return si.d(t,e),t.prototype.BindMentionDialog=function(e){this.m_MentionDialog=e},t.prototype.SetMessageInput=function(e,t){this.setState({messageInput:e,submitEnabled:e.trim().length>0},t),this.props.chatView.text_entry=e,e&&e.length&&this.props.chatView.chat.OnTyping()},t.prototype.OnSubmit=function(e){e&&e.preventDefault(),this.props.chatView&&this.props.chatView.file_upload&&this.props.chatView.UploadFile(),this.state.messageInput.trim().length&&this.props.chatView&&this.props.chatView.chat.SendChatMessage(this.state.messageInput)&&(this.m_iMentionSearchCancelledOffset=void 0,this.ClearMentionSearchState(),this.setState({submitEnabled:!1}),this.SetMessageInput(""),this.props.chatView.is_scrolled_to_bottom=!0,this.FocusTextInput())},t.prototype.OnTextAreaChange=function(e){this.SetMessageInput(e.target.value)},t.prototype.OnFocus=function(e){this.UpdateMentionSearchState()},t.prototype.OnBlur=function(e){if(!e.relatedTarget||!Ad.e(On.findDOMNode(this),e.relatedTarget)){if(Object(Mp.h)())return;this.m_iMentionSearchCancelledOffset=void 0,this.ClearMentionSearchState()}},t.prototype.OnKeyDown=function(e){if(this.state.activeSuggestSearchType&&this.m_MentionDialog&&!e.shiftKey&&!e.ctrlKey&&this.m_MentionDialog.BHandleKeyPress(e.keyCode))return void e.preventDefault();8==e.keyCode||46==e.keyCode?this.m_iMentionSearchCancelledOffset=void 0:13!=e.keyCode||e.shiftKey||e.ctrlKey?13==e.keyCode&&e.ctrlKey&&(e.preventDefault(),this.InsertAtCursor("\n")):(e.preventDefault(),this.OnSubmit())},t.prototype.OnPaste=function(e){if(e&&0!=e.clipboardData.files.length&&!e.clipboardData.types.some(function(e){return"text"==e||e.startsWith("text/")})){var t=e.clipboardData.files[0];this.props.chatView.SetFileToUpload(t),e.preventDefault(),e.stopPropagation()}},t.prototype.OnFileInputChange=function(e){var t=e.currentTarget;t.files.length&&(this.props.chatView.SetFileToUpload(t.files[0]),t.value="")},t.prototype.OnEmbedClick=function(e){Object(Rd.a)(Sa.createElement(dt,{chatView:this.props.chatView,refFileInput:this.m_refFileInput.current,fnInsertText:this.InsertAtCursor.bind(this)}),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0})},t.prototype.OnEmoticonSelected=function(e,t){void 0===t&&(t=!1),t||this.m_refTextInput.current.focus(),this.InsertAtCursor(":"+e+":")},t.prototype.InsertAtCursor=function(e){var t=this.m_refTextInput.current,i=t.value,n=i.substr(0,t.selectionStart)+e+i.substr(t.selectionEnd),r=t.selectionStart+e.length;this.SetMessageInput(n,function(){t.selectionStart=t.selectionEnd=r})},t.prototype.OnKeyPress=function(e){this.UpdateMentionSearchState()},t.prototype.OnClick=function(e){this.UpdateMentionSearchState()},t.prototype.OnContextMenu=function(e){ai.a.IN_CLIENT||e.stopPropagation()},t.prototype.ClearMentionSearchState=function(){this.m_iMentionSearchStartOffset=void 0,this.state.activeSuggestSearchType&&this.setState({activeSuggestSearchType:void 0,mentionSearch:void 0})},t.prototype.FindMatchOpener=function(e,t,i){for(var n=i-1;n>=0;n--){if(t[n]==e)return n;if(" "==t[n])break}},t.prototype.UpdateMentionSearchState=function(){var e=this.m_refTextInput.current;if(e){var t=this.props.chatView&&this.props.chatView.chat,i=t instanceof Xc;if(e.selectionStart!=e.selectionEnd||!e.selectionStart)return void this.ClearMentionSearchState();for(var n=e.selectionStart,r=e.value,o=void 0,a=void 0,s=n-1;s>=0;s--){var c=s>0?r[s-1]:void 0;if(("@"==r[s]||"＠"==r[s])&&i){c&&" "!=c&&"\n"!=c||(o=s,a="Mention");break}if(":"==r[s]){c&&" "!=c&&"\n"!=c&&":"!=c||(o=s,a="Emoticon");break}if("/"==r[s]&&0==s){o=s,a="SlashCommand";break}if(" "==r[s]||"\n"==r[s])break}if(void 0===o||o===this.m_iMentionSearchCancelledOffset)return void this.ClearMentionSearchState();var l=r.substr(o+1,n-o-1);this.m_iMentionSearchStartOffset=o,this.setState({activeSuggestSearchType:a,mentionSearch:l})}},t.prototype.ReplaceSuggestedText=function(e,t,i){var n=this.m_refTextInput.current.selectionStart,r=this.m_refTextInput.current.value,o=this.FindMatchOpener(e,r,n);if(void 0===o&&"@"==e&&(o=this.FindMatchOpener("＠",r,n)),void 0!==o){var a=r.substr(0,o);a+=t,(n>=r.length||" "!=r[n])&&(a+=" ");var s=a.length;a+=r.substr(n),this.SetMessageInput(a,i),this.m_refTextInput.current.value=a,this.m_refTextInput.current.selectionStart=this.m_refTextInput.current.selectionEnd=s,this.FocusTextInput()}},t.prototype.OnMentionSuggestionSelected=function(e,t){var i;if(t instanceof Nc?i=t.persona.m_strPlayerName:t&&(i=t),!i)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();var n=i;-1!==n.lastIndexOf("#")&&(n=n.substr(0,n.lastIndexOf("#"))),this.props.chatView.chat.SearchMembers(n,2,!0).length>1&&(i+=t instanceof Nc?"#"+t.accountid.toString(36):"#0"),this.ReplaceSuggestedText("@","@"+i),this.ClearMentionSearchState()},t.prototype.OnEmoticonSuggestionSelected=function(e,t){if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText(":",":"+t+":"),this.ClearMentionSearchState()},t.prototype.OnSlashCommandSuggestionSelected=function(e,t){var i=this;if(!t)return this.m_iMentionSearchCancelledOffset=this.m_iMentionSearchStartOffset,void this.ClearMentionSearchState();this.ReplaceSuggestedText("/",t,function(){0===v(t).unExpectedArguments&&i.OnSubmit()}),this.ClearMentionSearchState()},t.prototype.FocusTextInput=function(){this.m_refTextInput.current&&this.m_refTextInput.current.focus()},t.prototype.InitForChatView=function(e){this.m_textFocusCallback&&(this.m_textFocusCallback.Unregister(),this.m_textFocusCallback=null);var t=e.text_entry;t!=this.state.messageInput&&this.setState({messageInput:t}),this.m_textFocusCallback=e.RegisterForTextEntryFocus(this.FocusTextInput)},t.prototype.componentWillMount=function(){this.InitForChatView(this.props.chatView)},t.prototype.componentDidMount=function(){this.FocusTextInput()},t.prototype.componentWillUnmount=function(){this.m_textFocusCallback&&this.m_textFocusCallback.Unregister(),this.m_textFocusCallback=null},t.prototype.componentWillReceiveProps=function(e){var t=this;e.chatView!=this.props.chatView&&this.InitForChatView(e.chatView),e.isActive&&!this.props.isActive&&setTimeout(function(){t.FocusTextInput()},0)},t.prototype.render=function(){var e=this.props,t=e.chatView,i=e.disabled,n=void 0,r=t&&t.chat,o=void 0;switch(this.state.activeSuggestSearchType){case"Mention":o=Sa.createElement(Zh,{chat:r,strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnMentionSuggestionSelected,ref:this.BindMentionDialog});break;case"Emoticon":o=Sa.createElement(Qh,{emoticonStore:wd.ChatStore.EmoticonStore,strSearch:this.state.mentionSearch,nMinimumSearchLengthBeforeAutoSelection:2,onSuggestionSelected:this.OnEmoticonSuggestionSelected,ref:this.BindMentionDialog});break;case"SlashCommand":o=Sa.createElement($h,{strSearch:this.state.mentionSearch,onSuggestionSelected:this.OnSlashCommandSuggestionSelected,ref:this.BindMentionDialog})}var a=t.chat.file_upload_props;t.file_upload_data_url?n=Sa.createElement(qh,{chatView:t}):2==a.eUploadState||4==a.eUploadState||3==a.eUploadState?n=Sa.createElement(Jh,{chatView:t}):0!=a.eUploadState&&(n=Sa.createElement(Kh,{chat:t.chat}));var s=wd.SettingsStore.FriendsSettings.bCompactFriendsList,c=wd.SettingsStore.FriendsSettings.nChatFontSize,l="";return c==fd.k_EChatFontSizeSmall?l=" smallChatFont":c==fd.k_EChatFontSizeLarge&&(l=" largeChatFont"),Sa.createElement("div",{className:"chatEntry"+(s?" compactView":"")+l},n,Sa.createElement("form",{className:"chatEntryControls compactableHeight",onSubmit:this.OnSubmit,onBlur:this.OnBlur},o,Sa.createElement("textarea",{className:"chatTextarea",value:this.state.messageInput,onPaste:this.OnPaste,onContextMenu:this.OnContextMenu,ref:this.m_refTextInput,onChange:this.OnTextAreaChange,onKeyDown:this.OnKeyDown,onKeyUp:this.OnKeyPress,onClick:this.OnClick,onFocus:this.OnFocus,disabled:i||wd.CMInterface.BDisconnected(),maxLength:5e3}),Sa.createElement("button",{className:"chatSubmitButton"+(this.state.submitEnabled?"":" disabled"),type:"submit",disabled:!this.state.submitEnabled,title:Object(ua.b)("#ChatEntryButton_Submit")},Sa.createElement(Id.V,null)),Sa.createElement("input",{type:"file",style:{display:"none"},name:"fileupload",ref:this.m_refFileInput,onChange:this.OnFileInputChange})),Sa.createElement("div",{className:"chatEntryActionsContainer compactableHeight"},Sa.createElement("div",{className:"chatEntryActionsGroup"},Sa.createElement(Wh,{disabled:i,OnEmoticonSelected:this.OnEmoticonSelected}),Sa.createElement("button",{className:"chatSubmitButton EmbedButton"+(i?" disabled":""),type:"button",onClick:this.OnEmbedClick,title:Object(ua.b)("#ChatEntryButton_SendEmbed"),disabled:i},Sa.createElement(Id.F,null))),Sa.createElement(Hh,{chat:r})),Sa.createElement("div",{className:"disconnectBlocker compactableHeight"}))},si.c([yn.a],t.prototype,"BindMentionDialog",null),si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"OnTextAreaChange",null),si.c([yn.a],t.prototype,"OnFocus",null),si.c([yn.a],t.prototype,"OnBlur",null),si.c([yn.a],t.prototype,"OnKeyDown",null),si.c([yn.a],t.prototype,"OnPaste",null),si.c([yn.a],t.prototype,"OnFileInputChange",null),si.c([yn.a],t.prototype,"OnEmbedClick",null),si.c([yn.a],t.prototype,"OnEmoticonSelected",null),si.c([yn.a],t.prototype,"OnKeyPress",null),si.c([yn.a],t.prototype,"OnClick",null),si.c([yn.a],t.prototype,"OnContextMenu",null),si.c([yn.a],t.prototype,"OnMentionSuggestionSelected",null),si.c([yn.a],t.prototype,"OnEmoticonSuggestionSelected",null),si.c([yn.a],t.prototype,"OnSlashCommandSuggestionSelected",null),si.c([yn.a],t.prototype,"FocusTextInput",null),t=si.c([up.observer],t)}(Sa.Component),Wh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnEmoticonClick=function(e){Object(Rd.a)(Sa.createElement(Uh,{OnSelected:this.props.OnEmoticonSelected}),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0}),this.BHaveUnseenEmoticons()&&gy.SetUIDisplayPref("rtLastAckedNewEmoticons",wd.ChatStore.EmoticonStore.GetTimeReceivedNewestEmoticon())},t.prototype.BHaveUnseenEmoticons=function(){var e=gy.UIDisplayPrefs.rtLastAckedNewEmoticons,t=wd.ChatStore.EmoticonStore.GetTimeReceivedNewestEmoticon();return t&&(!e||e<t)},t.prototype.render=function(){var e=this.props.disabled,t="chatSubmitButton EmoticonPickerButton",i=!1;return e?t+=" disabled":this.BHaveUnseenEmoticons()&&(t+=" EmoticonButton_NewEmoticons",i=!0),Sa.createElement("button",{className:t,type:"button",onClick:this.OnEmoticonClick,title:Object(ua.b)("#ChatEntryButton_Emoticon"),disabled:e},Sa.createElement(Id.m,null),i&&Sa.createElement(ut,null))},si.c([yn.a],t.prototype,"OnEmoticonClick",null),t=si.c([up.observer],t)}(Sa.Component),Hh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.HandleStartVoice=function(e){var t=this.props.chat;if(t instanceof ll)return void t.ToggleVoiceChat();if(this.IsVoiceActiveForButton())return void wd.VoiceStore.OnUserEndVoiceChat();if(t instanceof Xc){var i=t.GetGroup();if(i){var n=i.voiceRoomList;if(0==n.length)return void i.CreateAndJoinTempVoiceRoom();if(1==n.length){var r=n[0];return void wd.VoiceStore.InitiateRoomChat(i.GetGroupID(),r.GetRoomID())}var o=Sa.createElement(pt,{group:i});Object(Rd.a)(o,e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!0})}}},t.prototype.IsVoiceActiveForButton=function(){var e=this.props.chat,t=!1;if(e instanceof ll)t=e.BVoiceActive();else if(e instanceof Xc){var i=e.GetGroup();t=wd.VoiceStore.IsVoiceActiveForGroup(i.GetGroupID())}return t},t.prototype.render=function(){var e=this.IsVoiceActiveForButton(),t=["VoiceToggle"],i="",n=this.props.chat;e?(t.push("Active"),wd.VoiceStore.BNoMicAvailableForSession()&&t.push("NoMicrophone"),wd.VoiceStore.IsMicMuted()&&t.push("MicMuted")):t.push(" Inactive");var r=!n.BIsVoiceAllowed();if(r)t.push(" Disabled"),i=n.GetVoiceNotAllowedReason();else if(n instanceof ll)i=e?"#Tooltip_VoiceControlButton_1v1_active":"#Tooltip_VoiceControlButton_1v1_inactive";else if(n instanceof Xc)if(this.IsVoiceActiveForButton())i="#Tooltip_VoiceControlButton_group_leave";else{var o=n.GetGroup();o&&0==o.voiceRoomList.length?i="#Tooltip_VoiceControlButton_group_create":o&&1==o.voiceRoomList.length?i="#Tooltip_VoiceControlButton_group_joinsingle":o&&(i="#Tooltip_VoiceControlButton_group_joinmultiple")}var a=wd.VoiceStore.GetPushToTalkEnabled(),s=wd.VoiceStore.GetPushToMuteEnabled(),c=wd.VoiceStore.GetPushToTalkVoiceStateEnabled(),l=wd.VoiceStore.GetPushToTalkHotKeyDisplayString(),u="";return(a||s)&&(u+=" pushToTalkEnabled"),c&&(u+=" pushToTalkKeyDown"),Sa.createElement("div",{className:"ChatMessageEntryVoice"+u+(e?" Active":" Inactive")+(r?" Disabled":"")},Sa.createElement("div",{className:"buttonsContainer"},Sa.createElement("button",{disabled:r,className:t.join(" "),onClick:this.HandleStartVoice,title:Object(ua.b)(i)},Sa.createElement("div",{className:"VoiceToggleIconCtn"},Sa.createElement(Id._3,null))),Sa.createElement("div",{className:"activeVoiceControls"},Sa.createElement("div",{className:"activeVoiceFlexBox"},Sa.createElement("div",{className:"activeVoiceButtons"},Sa.createElement(uh,null),Sa.createElement(dh,null))))),(a||s)&&this.IsVoiceActiveForButton()&&Sa.createElement("div",{className:"activeVoicePushToTalk"+u,title:Object(ua.b)(s?"#ActiveVoicePushToMute":"#ActiveVoicePushToTalk",l)},l))},si.c([yn.a],t.prototype,"HandleStartVoice",null),t=si.c([up.observer],t)}(Sa.Component),qh=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bSpoilerChecked:!1},i}return si.d(t,e),t.prototype.OnCancelClick=function(e){this.props.chatView.SetFileToUpload(null)},t.prototype.OnUploadClick=function(){this.props.chatView.UploadFile(this.state.bSpoilerChecked)},t.prototype.OnDialogChecked=function(){this.setState({bSpoilerChecked:!this.state.bSpoilerChecked})},t.prototype.render=function(){var e=void 0;return-1!=this.props.chatView.file_upload.type.indexOf("image")?e=Sa.createElement("img",{className:"chatFileUploadPreview",src:this.props.chatView.file_upload_data_url}):-1!=this.props.chatView.file_upload.type.indexOf("video")&&(e=Sa.createElement(Id._1,null)),Sa.createElement("div",{className:"chatFileUploadPreviewContainer"},e,Sa.createElement("div",{className:"chatFileUploadFileName"},"'",this.props.chatView.file_upload.name,"'"),Sa.createElement("div",{className:"chatFileUploadCancel",onClick:this.OnCancelClick},Sa.createElement(Id._6,null)),Sa.createElement("button",{className:"DialogButton Primary chatFileUploadBtn",type:"button",onClick:this.OnUploadClick},Object(ua.b)("#Chat_Upload")),Sa.createElement(tp,{classname:"spoilerCheckBox",label:"Tag as Spoiler",checked:this.state.bSpoilerChecked,onChange:this.OnDialogChecked}))},si.c([yn.a],t.prototype,"OnCancelClick",null),si.c([yn.a],t.prototype,"OnUploadClick",null),si.c([yn.a],t.prototype,"OnDialogChecked",null),t}(Sa.Component),Kh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.chat.file_upload_props,t=e.file?Object(ua.b)("#Chat_Uploading",e.displayFileName):"",i={width:e.uploadProgress+"%"};return Sa.createElement("div",{className:"chatFileUploadProgressContainer"},Sa.createElement("div",{className:"chatFileUploadProgressName"},t),Sa.createElement("div",{className:"chatFileUploadProgressBarContainer DialogProgressBar_ProgressBarContainer"},Sa.createElement("div",{className:"DialogProgressBar_Value",style:i})))},t=si.c([up.observer],t)}(Sa.Component),Jh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ClearErrorState=function(){this.props.chatView.chat.ClearFileUploadError()},t.prototype.OnRetryClick=function(){var e=this.props.chatView.chat.file_upload_props;this.props.chatView.chat.BeginFileUpload(e.file,e.imageWidth,e.imageHeight,e.spoilerTag)},t.prototype.render=function(){var e=this.props.chatView.chat.file_upload_props,t=e.displayFileName?Object(ua.b)("#Chat_Uploading",e.displayFileName):"",i=void(e.strErrorDescription||Object(ua.b)("#Chat_Settings_Error_Unknown"));return 2==e.eUploadState&&(i=Sa.createElement(re,{onClick:this.OnRetryClick},Object(ua.b)("#Chat_Upload_ErrorAction_Retry"))),Sa.createElement("div",{className:"chatFileUploadProgressContainer"},Sa.createElement("div",{className:"chatFileUploadProgressName"},t),Sa.createElement("div",{className:"chatFileUploadErrorDescription"},e.strErrorDescription),Sa.createElement("div",{className:"chatFileUploadActions"},Sa.createElement(Jd,{className:"DialogLayout_NoMinWidth"},i,Sa.createElement(oe,{onClick:this.ClearErrorState},Object(ua.b)("#Chat_Upload_ErrorAction_Close")))))},si.c([yn.a],t.prototype,"ClearErrorState",null),si.c([yn.a],t.prototype,"OnRetryClick",null),t=si.c([up.observer],t)}(Sa.Component),Yh=function(e){function t(t){var i=e.call(this,t)||this;return i.m_rgCurrentMatches=[],i.m_mapMatchByKey=new Map,i.state={selectedIndex:void 0},i}return si.d(t,e),t.prototype.OnKeyDown=function(e){if(this.BHandleKeyPress(e.keyCode))return void e.preventDefault()},t.prototype.BHandleKeyPress=function(e){switch(e){case 38:this.SetSelectedIndexDelta(-1);break;case 40:this.SetSelectedIndexDelta(1);break;case 36:this.SetSelectedIndex(0);break;case 33:this.SetSelectedIndexDelta(-this.GetPageSize());break;case 35:this.SetSelectedIndex(-1);break;case 34:this.SetSelectedIndexDelta(this.GetPageSize());break;case 13:case 9:if(void 0===this.state.selectedIndex)return this.props.onSuggestionSelected(this.props.strSearch),!1;this.ChooseSuggestion(this.m_rgCurrentMatches[this.state.selectedIndex]);break;case 27:this.props.onSuggestionSelected(this.props.strSearch);break;default:return!1}return!0},t.prototype.GetPageSize=function(){var e=On.findDOMNode(this),t=e&&e.firstElementChild,i=this.m_rgCurrentMatches.length;if(i>this.getMaxMatches()&&(i=this.getMaxMatches()),t&&i){var n=t.scrollHeight/i,r=t.clientHeight/n;return Math.max(1,Math.floor(r))}return 5},t.prototype.ChooseSuggestion=function(e){this.props.onSuggestionSelected(this.props.strSearch,e?this.getSelection(e):void 0)},t.prototype.SetSelectedIndexDelta=function(e){void 0!==this.state.selectedIndex?this.SetSelectedIndex(this.state.selectedIndex+e):this.SetSelectedIndex(e)},t.prototype.SetSelectedIndex=function(e){if(this.m_rgCurrentMatches.length){var t=this.m_rgCurrentMatches.length;t>this.getMaxMatches()&&(t=this.getMaxMatches()),e%=t,e<0&&(e+=t),this.setState({selectedIndex:e})}},t.prototype.FindKeyIndex=function(e){if(!this.m_mapMatchByKey.size&&this.m_rgCurrentMatches.length)for(var t=0;t<this.m_rgCurrentMatches.length;t++)this.m_mapMatchByKey.set(this.getKey(this.m_rgCurrentMatches[t]),t);return this.m_mapMatchByKey.get(e)},t.prototype.OnClickSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.ChooseSuggestion(this.m_rgCurrentMatches[t])},t.prototype.OnMouseOverSuggestion=function(e){var t=this.FindKeyIndex(e);void 0!==t&&this.SetSelectedIndex(t)},t.prototype.BindSelectedElement=function(e){var t=On.findDOMNode(this),i=On.findDOMNode(e),n=t&&t.firstElementChild;i&&n&&(n.scrollTop+n.clientHeight<i.offsetTop||i.offsetTop<n.scrollTop)&&i.scrollIntoView()},t.prototype.UpdateSearchResults=function(e){this.m_rgCurrentMatches=this.performSearch(e),this.m_strLastSearch=e,this.m_mapMatchByKey.clear(),this.m_rgCurrentMatches.length?this.state&&void 0!==this.state.selectedIndex?this.state.selectedIndex>=this.m_rgCurrentMatches.length&&this.setState({selectedIndex:0}):(void 0===this.props.nMinimumSearchLengthBeforeAutoSelection||e.length>=this.props.nMinimumSearchLengthBeforeAutoSelection)&&this.setState({selectedIndex:0}):this.state&&void 0!==this.state.selectedIndex&&this.setState({selectedIndex:void 0})},t.prototype.componentWillUnmount=function(){this.m_hMobxSearchDisposer&&(this.m_hMobxSearchDisposer(),this.m_hMobxSearchDisposer=void 0)},t.prototype.componentWillMount=function(){var e=this;this.m_hMobxSearchDisposer=Object(_i.autorun)(function(){e.UpdateSearchResults(e.props.strSearch),e.forceUpdate()})},t.prototype.componentWillUpdate=function(e){this.m_strLastSearch!=e.strSearch&&this.UpdateSearchResults(e.strSearch)},t.prototype.render=function(){var e=[];if(this.m_rgCurrentMatches.length){for(var t=this.getMaxMatches(),i=0;i<Math.min(t,this.m_rgCurrentMatches.length);i++){var n=this.m_rgCurrentMatches[i],r=this.getKey(n),o=i===this.state.selectedIndex;e.push(Sa.createElement(Xh,{key:r,matchKey:r,fnOnClick:this.OnClickSuggestion,fnOnMouseOver:this.OnMouseOverSuggestion,bIsSelected:o,ref:o?this.BindSelectedElement:void 0},this.renderMatch(n)))}this.m_rgCurrentMatches.length>t&&e.push(this.renderTooManyMatchesMessage(this.m_rgCurrentMatches.length-t))}else{var a=this.renderNoMatchMessage();if(!a)return null;e.push(a)}return Sa.createElement("div",{className:"mentionDialogPosition"},Sa.createElement("div",{className:"mentionDialog",tabIndex:0,onKeyDown:this.OnKeyDown},this.renderHeader(),e))},si.c([yn.a],t.prototype,"OnKeyDown",null),si.c([yn.a],t.prototype,"OnClickSuggestion",null),si.c([yn.a],t.prototype,"OnMouseOverSuggestion",null),si.c([yn.a],t.prototype,"BindSelectedElement",null),t}(Sa.Component),Xh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnMouseOver=function(e){this.props.fnOnMouseOver(this.props.matchKey)},t.prototype.OnClick=function(e){this.props.fnOnClick(this.props.matchKey)},t.prototype.render=function(){return Sa.createElement("div",{className:"suggestOption mentionSearchOption"+(this.props.bIsSelected?" selected":""),onMouseEnter:this.OnMouseOver,onClick:this.OnClick},this.props.children)},si.c([yn.a],t.prototype,"OnMouseOver",null),si.c([yn.a],t.prototype,"OnClick",null),t}(Sa.PureComponent),Zh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.performSearch=function(e){return this.props.chat.SearchMembers(e,Number.MAX_VALUE)},t.prototype.ChooseSuggestion=function(t){t&&t.strNotSelectable||e.prototype.ChooseSuggestion.call(this,t)},t.prototype.getSelection=function(e){return e.friend?e.friend:e.meta_mention},t.prototype.getKey=function(e){return""+(e.friend?e.friend.accountid:e.meta_mention)},t.prototype.renderMatch=function(e){var t,i,n=e.friend,r=e.iMatchOffset,o=e.bNicknameMatch,a=this.props.strSearch.length,s=null;return n?(t=n.persona.m_strPlayerName,i=n.has_nickname&&n.nickname,n.persona.avatar_url_medium&&(s=n.persona.avatar_url_medium)):(t="@"+e.meta_mention,i=null,r++),o?Sa.createElement("span",{className:"mentionSuggestion"},s&&Sa.createElement("img",{className:"mentionAvatar",src:n.persona.avatar_url_medium,draggable:!1}),t,Sa.createElement("span",{className:"nickname"}," (",i.substr(0,r).replace(/ /g," "),Sa.createElement("span",{className:"mentionSearchMatch"},i.substr(r,a).replace(/ /g," ")),i.substr(r+a).replace(/ /g," "),")")):Sa.createElement("span",{className:"mentionSuggestion"},t.substr(0,r).replace(/ /g," "),s&&Sa.createElement("img",{className:"mentionAvatar",src:n.persona.avatar_url_medium,draggable:!1}),Sa.createElement("span",{className:"mentionSearchMatch"},t.substr(r,a).replace(/ /g," ")),t.substr(r+a).replace(/ /g," "),e.strNotSelectable&&Sa.createElement("span",{className:"notSelectable"}," ",": "+e.strNotSelectable," "),i&&Sa.createElement("span",{className:"nickname"}," (",i,")"))},t.prototype.renderNoMatchMessage=function(){return Sa.createElement("div",{key:"nomatches",className:"suggestOption mentionSearchOption noMatches"},Object(ua.b)("#ChatMentionSuggest_NoMatches"))},t.prototype.renderTooManyMatchesMessage=function(e){var t=e<=1?"#ChatMentionSuggest_ManyMatches":"#ChatMentionSuggest_ManyMatchesPlural";return Sa.createElement("div",{key:"manymatches",className:"suggestOption mentionSearchOption manyMatches"},Object(ua.b)(t,e))},t.prototype.renderHeader=function(){return Sa.createElement("div",{className:"mentionSearchText"},Object(ua.b)("#ChatMentionSuggest_MembersMatching",this.props.strSearch))},t.prototype.getMaxMatches=function(){return t.nMaxMatches},t.nMaxMatches=12,t}(Yh),Qh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.performSearch=function(e){return this.props.emoticonStore.SearchEmoticons(e,10)},t.prototype.getSelection=function(e){return e.name},t.prototype.getKey=function(e){return e.name},t.prototype.renderMatch=function(e){return Sa.createElement("div",{className:"EmoticonSuggestion"+(e.recent?" Recent":"")},Sa.createElement("div",{className:"EmoticonSuggestion_Emoticon"},Sa.createElement(xh,{emoticon:e.name}),e.new&&Sa.createElement(ut,null)),":",e.name,":")},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(Yh),$h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.performSearch=function(e){var t="/"+e;return y().filter(function(e){return e.startsWith(t)})},t.prototype.getSelection=function(e){return e},t.prototype.getKey=function(e){return e},t.prototype.renderMatch=function(e){var t=v(e);if(!t)return null;var i=Object(ua.b)(t.strDescriptionToken);return Sa.createElement("span",{className:"SlashCommandSuggestion"},Sa.createElement("span",{className:"SlashCommandSuggestion_SlashCommand"},e),": ",Sa.createElement("span",{className:"SlashCommandSuggestion_SlashCommandDescription"},i))},t.prototype.renderNoMatchMessage=function(){return null},t.prototype.renderTooManyMatchesMessage=function(e){return null},t.prototype.renderHeader=function(){return null},t.prototype.getMaxMatches=function(){return Number.MAX_VALUE},t}(Yh),eg=function(e){function t(t){var i=e.call(this,t)||this;return i.state={nCalculatedHeightPx:void 0,bLeftSliderVisible:!1,bRightSliderVisible:!1},i}return si.d(t,e),t.prototype.OnRef=function(e){this.UnbindWindowHandlers(),e&&(this.m_elScroll=e,e.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.addEventListener("resize",this.CheckScrollPosition),this.CheckScrollPosition())},t.prototype.CheckScrollPosition=function(){if(!(!this.m_elScroll||this.m_animation&&this.m_animation.BIsActive())){for(var e=0,t=this.m_elScroll.firstElementChild;t;t=t.nextElementSibling)e=Math.max(e,t.getBoundingClientRect().height);e!=this.state.nCalculatedHeightPx&&this.setState({nCalculatedHeightPx:e}),this.UpdateSliderControlsForScrollOffset(this.m_elScroll.scrollLeft)}},t.prototype.UpdateSliderControlsForScrollOffset=function(e){var t=e>1,i=e+this.m_elScroll.getBoundingClientRect().width<this.m_elScroll.scrollWidth-1;t!=this.state.bLeftSliderVisible&&this.setState({bLeftSliderVisible:t}),i!=this.state.bRightSliderVisible&&this.setState({bRightSliderVisible:i})},t.prototype.AnimateScrollLeftTo=function(e){this.m_animation&&this.m_animation.Cancel(),this.m_animation=new xd(this.m_elScroll,{scrollLeft:e},{msDuration:500,onComplete:this.CheckScrollPosition,timing:"cubic-in-out"}),this.m_animation.Start(),this.UpdateSliderControlsForScrollOffset(e)},t.prototype.OnSlideLeftClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.max(0,this.m_elScroll.scrollLeft-this.m_elScroll.getBoundingClientRect().width))},t.prototype.OnSlideRightClick=function(){this.m_animation&&this.m_animation.BIsActive()||this.m_elScroll&&this.AnimateScrollLeftTo(Math.min(this.m_elScroll.scrollWidth-this.m_elScroll.getBoundingClientRect().width,this.m_elScroll.scrollLeft+this.m_elScroll.getBoundingClientRect().width))},t.prototype.OnWheel=function(e){e&&e.nativeEvent&&(e.nativeEvent.wheelDelta>0?this.OnSlideLeftClick():this.OnSlideRightClick())},t.prototype.GetScrollRef=function(){return this.m_elScroll},t.prototype.componentWillUnmount=function(){this.UnbindWindowHandlers(),this.m_animation&&this.m_animation.Cancel()},t.prototype.componentDidUpdate=function(){this.CheckScrollPosition()},t.prototype.UnbindWindowHandlers=function(){this.m_elScroll&&(this.m_elScroll.ownerDocument.defaultView&&this.m_elScroll.ownerDocument.defaultView.removeEventListener("resize",this.CheckScrollPosition),this.m_elScroll=void 0)},t.prototype.render=function(){var e="auto";return this.state.nCalculatedHeightPx&&(e=this.state.nCalculatedHeightPx+"px"),Sa.createElement("div",{onWheel:this.OnWheel,className:"HorizontalMiniSlider",style:{height:e}},Sa.createElement("div",{onClick:this.OnSlideLeftClick,className:"HorizontalMiniSliderArrow Left"+(this.state.bLeftSliderVisible?" Visible":"")},Sa.createElement(Id.k,null)),Sa.createElement("div",{onClick:this.OnSlideRightClick,className:"HorizontalMiniSliderArrow Right"+(this.state.bRightSliderVisible?" Visible":"")},Sa.createElement(Id.k,null)),Sa.createElement("div",{className:"HorizontalMiniSliderScroll "+this.props.className,onScroll:this.CheckScrollPosition,ref:this.OnRef},this.props.children))},si.c([yn.a],t.prototype,"OnRef",null),si.c([yn.a],t.prototype,"CheckScrollPosition",null),si.c([yn.a],t.prototype,"OnSlideLeftClick",null),si.c([yn.a],t.prototype,"OnSlideRightClick",null),si.c([yn.a],t.prototype,"OnWheel",null),t}(Sa.Component),tg=function(e){function t(t){var i=e.call(this,t)||this;return i.m_mapTabs=new Map,i.m_rgOrderedRenderedTabs=[],i.m_bUsePopups=!1,i.m_nInitialTabDragOffset=-1,i.m_nTheaterTopHoverHeight=12,i.m_fnUnregisterDropComplete=void 0,i.state={tabDrag:void 0,iDragIndex:0,windowWidth:0,bTheaterModeTopHovered:!1},i}return si.d(t,e),t.prototype.componentDidUpdate=function(){this.FixScrollLocation()},t.prototype.componentDidMount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.addEventListener("resize",this.OnWindowResizeEvent),this.m_elchatTabDiv&&this.setState({windowWidth:this.m_elchatTabDiv.clientWidth})},t.prototype.componentWillUnmount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.removeEventListener("resize",this.OnWindowResizeEvent)},t.prototype.OnWindowResizeEvent=function(){this.setState({windowWidth:this.m_elchatTabDiv.clientWidth})},t.prototype.SetDragTab=function(e){void 0!==e?this.m_fnUnregisterDropComplete=gy.DragDropManager.RegisterForDropComplete(this.HandleDropComplete):this.m_fnUnregisterDropComplete&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0),this.setState({tabDrag:e}),this.m_nInitialTabDragOffset=-1},t.prototype.GetDragTab=function(){return this.state.tabDrag},t.prototype.HandleDropComplete=function(e){this.m_fnUnregisterDropComplete=void 0,this.setState({tabDrag:void 0})},t.prototype.FixScrollLocation=function(){if(this.m_elScroll){var e=(this.m_rgOrderedRenderedTabs[this.m_rgOrderedRenderedTabs.length-1],this.m_mapTabs.get(this.props.activeTab.GetUniqueID()));if(e){var t=e.GetChatTabRef();if(t){var i=t.offsetLeft,n=t.offsetLeft+t.scrollWidth,r=this.m_elScroll.scrollLeft+this.m_elScroll.clientWidth;if(i<r&&n>r){var o=i-this.m_elScroll.clientWidth+t.scrollWidth+40;this.SetScrollLeft(o)}else if(i<this.m_elScroll.scrollLeft+40||n>this.m_elScroll.scrollLeft+this.m_elScroll.clientWidth){var o=i;0!=o&&(o-=40),this.SetScrollLeft(o)}}}}},t.prototype.SetScrollLeft=function(e){this.m_elScroll.scrollLeft!=e&&(this.m_animation&&this.m_animation.Cancel(),this.m_animation=new xd(this.m_elScroll,{scrollLeft:e},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start())},t.prototype.UpdateDragOffset=function(e){var t,i=e.clientX;for(t=0;t<this.m_rgOrderedRenderedTabs.length;t++){var n=this.m_rgOrderedRenderedTabs[t],r=this.m_mapTabs.get(n.GetUniqueID()),o=r&&r.GetBoundingClientRect();if(r&&o&&i-o.left<o.width&&(this.m_nInitialTabDragOffset<0&&(this.m_nInitialTabDragOffset=i-o.left),i-this.m_nInitialTabDragOffset<o.left+o.width/2))break}this.state.iDragIndex!=t&&this.setState({iDragIndex:t})},t.prototype.OnTabRef=function(e,t){t?this.m_mapTabs.set(e,t):this.m_mapTabs.delete(e)},t.prototype.OnScrollRef=function(e){this.m_elScroll=e?e.GetScrollRef():null},t.prototype.SelectTab=function(e){this.props.tabSet.ActivateTab(e)},t.prototype.OnDragStart=function(e){var t=gy.DragDropManager.GetDragData();t&&"chattab"==t.type&&(t.tabSet=this.props.tabSet)},t.prototype.OnChatTabContianerRef=function(e){this.m_elchatTabDiv=e},t.prototype.OnDragEnd=function(){this.setState({tabDrag:void 0})},t.prototype.OnBackClick=function(e){this.props.ResponsiveWindowState.SetActiveView(ql.FriendsList)},t.prototype.ToggleSingleWindowToggle=function(){gy.ToggleSingleWindowToggle(this.props.popup)},t.prototype.ShowFriendsList=function(e){wd.UIStore.SetTheaterMode(!1),wd.UIStore.SetFriendsListCollapsed(Xt(this,e),!1)},t.prototype.StartTopbarEventListener=function(){this.m_elchatTabDiv.ownerDocument.defaultView.addEventListener("mousemove",this.OnTopbarHovered)},t.prototype.OnTopbarHovered=function(e){var t=e.clientY;if(wd.UIStore.GetTheaterMode()||this.m_elchatTabDiv.ownerDocument.defaultView.removeEventListener("mousemove",this.OnTopbarHovered),t>this.m_nTheaterTopHoverHeight)return void(this.state.bTheaterModeTopHovered&&(this.setState({bTheaterModeTopHovered:!1}),this.m_nTheaterTopHoverHeight=12));this.state.bTheaterModeTopHovered||(this.m_nTheaterTopHoverHeight=50,this.setState({bTheaterModeTopHovered:!0}))},t.prototype.OnTabSelectorClick=function(e){var t=33*this.m_mapTabs.size+(e.currentTarget.offsetTop+e.currentTarget.clientHeight)+16,i=t>e.currentTarget.ownerDocument.defaultView.innerHeight;Object(Rd.a)(Sa.createElement(this.ChatTabSelectorContextMenu,null),e.currentTarget,{bOverlapHorizontal:!0,bPreferPopLeft:!0,bPreferPopTop:!1,bForcePopup:i})},t.prototype.ChatTabSelectorContextMenu=function(){for(var e=[],t=this.props.tabSet.tabs,i=0,n=t;i<n.length;i++){var r=n[i],o=Sa.createElement(ig,{tab:r,active:!0,selectTab:this.SelectTab,fnOnDragEnd:null,bDisableContextMenu:!0});e.push(Sa.createElement(Mp.d,{key:r.GetUniqueID(),onSelected:null},o))}return Sa.createElement(Mp.c,{className:"ChatTabs compactView CompactFriendsList"},e)},t.prototype.render=function(){var e=this,t=wd.UIStore.GetTheaterMode();if(this.props.tabSet.tabCount<=0&&!this.props.popup)return null;var i=this.props.tabSet.tabs,n=this.props.activeTab,r=!1,o=!1;n instanceof tl?r=n.isBroadcastShown:n instanceof Jl&&(r=!0);for(var a=0,s=i;a<s.length;a++)if(s[a].GetUnreadMessageCount()>0){o=!0;break}var c;if(this.state.tabDrag){var l=i.indexOf(this.state.tabDrag);-1!=l?l!=this.state.iDragIndex&&(c=i.slice(),Object(_n.e)(c,l,Math.min(this.state.iDragIndex,i.length-1))):this.state.iDragIndex<i.length?(c=i.slice(),c.splice(this.state.iDragIndex,0,this.state.tabDrag)):c=i.concat(this.state.tabDrag)}i=c||i,this.m_rgOrderedRenderedTabs=i;var u="ChatTabs titleBarContainer";this.props.popup&&(u+=" HasWindowControls"),1==i.length?u+=" OneTab":this.state.windowWidth<180*i.length+180&&(u+=" HasTabs"),wd.SettingsStore.FriendsSettings.bCompactFriendsList&&(u+=" compactView"),this.state.bTheaterModeTopHovered&&(u+=" TheaterTopHovered");var d;this.props.ResponsiveWindowState&&(d=Sa.createElement("div",{className:"ChatTabsBackButton",onClick:this.OnBackClick},"<<")),r&&(u+=" activeTabHasBroadcast");var p,m=!1,h=!0;this.props.popup&&(p=Zt(this.props.popup),h=wd.UIStore.BIsFriendsListSingleWindow(p),m=p!=Md),t&&this.m_elchatTabDiv&&this.StartTopbarEventListener();var g=this.m_elchatTabDiv&&180*this.props.tabSet.tabCount+48>this.m_elchatTabDiv.clientWidth||!1;return Sa.createElement("div",{className:u,onDragStart:this.OnDragStart,ref:this.OnChatTabContianerRef},this.props.popup&&Sa.createElement(pp,{hideMinMax:m,popup:this.props.popup}," "),d,(t&&h||this.props.showOpenFriendsList)&&Sa.createElement("div",{className:"chatTabOpenFriendsList",onClick:this.ShowFriendsList},Sa.createElement(Id.s,null),Object(ua.b)("#FriendsList_ExpandButton")),this.props.tabSet.tabCount>0&&Sa.createElement("div",{className:"chatTabSetContainer"+(g?" showTabSelector":"")},Sa.createElement(eg,{className:"chatTabList",ref:this.OnScrollRef},Sa.createElement(Od,{className:"chatTabTransitionGroup"},i.map(function(t,i){var n=e.props.activeTab==t,r=function(i){return e.OnTabRef(t.GetUniqueID(),i)};return Sa.createElement(Bd,{className:"ChatTabTranstionContainer",classNames:"ChatTabTransiton",key:t.GetUniqueID(),timeout:350},Sa.createElement(ig,{tab:t,active:n,selectTab:e.SelectTab,ref:r,fnOnDragEnd:e.OnDragEnd}))}))),g&&Sa.createElement("div",{className:"chatTabSelector",onClick:this.OnTabSelectorClick},Sa.createElement(Id.l,null))),this.props.popup&&ai.a.IN_CLIENT&&Sa.createElement("div",{className:"title-area-icon singleWindowToggle"+(m?" inOverlay":""),title:Object(ua.b)("#FriendsList_TitleArea_SingleWindowButton"),onClick:this.ToggleSingleWindowToggle},Sa.createElement(Id.S,null)),Sa.createElement("div",{className:"dropTargetBox"}),t&&Sa.createElement("div",{className:"theaterModeHoverSpace"+(o?" hasUnreadMessages":"")},o&&Sa.createElement("div",{className:"ChatUnreadMessageIndicator"},Sa.createElement("div",{className:"chatUnreadCircle"}))))},si.c([_i.observable],t.prototype,"m_nTheaterTopHoverHeight",void 0),si.c([yn.a],t.prototype,"OnWindowResizeEvent",null),si.c([yn.a],t.prototype,"HandleDropComplete",null),si.c([yn.a],t.prototype,"OnTabRef",null),si.c([yn.a],t.prototype,"OnScrollRef",null),si.c([yn.a],t.prototype,"SelectTab",null),si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnChatTabContianerRef",null),si.c([yn.a],t.prototype,"OnDragEnd",null),si.c([yn.a],t.prototype,"OnBackClick",null),si.c([yn.a],t.prototype,"ToggleSingleWindowToggle",null),si.c([yn.a],t.prototype,"ShowFriendsList",null),si.c([yn.a],t.prototype,"StartTopbarEventListener",null),si.c([yn.a],t.prototype,"OnTopbarHovered",null),si.c([yn.a],t.prototype,"OnTabSelectorClick",null),si.c([yn.a],t.prototype,"ChatTabSelectorContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),ig=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bMiddleMouseDown=!1,t}return si.d(t,e),t.prototype.BindChatTab=function(e){this.m_elChatTab=e},t.prototype.GetBoundingClientRect=function(){return this.m_elChatTab?this.m_elChatTab.getBoundingClientRect():void 0},t.prototype.GetChatTabRef=function(){return this.m_elChatTab},t.prototype.OnDragStart=function(e){var t=e.clientX-e.currentTarget.getBoundingClientRect().left,i=e.clientY-e.currentTarget.getBoundingClientRect().top;gy.DragDropManager.StartDrag({type:"chattab",tab:this.props.tab,offsetX:t,offsetY:i})},t.prototype.OnDragEnd=function(e){var t=gy.DragDropManager.GetDragData();if(t&&"chattab"==t.type){var i=t,n=!1;if(i.tabSet&&(n=wd.UIStore.GetPerContextChatData(i.tabSet.GetBrowserContext()).BUsePopups()),!gy.DragDropManager.BWasDropConsumed()&&i.tabSet&&i.tabSet.tabCount>1&&n){var r=e.currentTarget.getBoundingClientRect(),o=r.left-e.clientX,a=r.top-e.clientY;if(o*o+a*a>1e4){var s=e.currentTarget.ownerDocument.defaultView,c={left:Math.max(0,e.screenX-i.offsetX),top:Math.max(0,e.screenY-i.offsetY),width:s.innerWidth,height:s.innerHeight};if(this.props.fnOnDragEnd(),n){var l=Xt(this,e);e.currentTarget.ownerDocument.defaultView.SteamClient.Window.GetMousePositionDetails(function(e){e&&(c.left=-i.offsetX,c.top=-i.offsetY),wd.UIStore.MoveTabToNewPopup(l,i.tab,c,e)})}else wd.UIStore.MoveTabToNewPopup(Xt(this,e),i.tab,c)}}}gy.DragDropManager.EndDrag()},t.prototype.OnMouseDown=function(e){0==e.button?this.props.selectTab(this.props.tab):1==e.button&&(e.preventDefault(),this.m_bMiddleMouseDown=!0)},t.prototype.OnMouseUp=function(e){1==e.button&&this.m_bMiddleMouseDown&&(wd.UIStore.CloseTab(Xt(this,e),this.props.tab),e.preventDefault(),this.m_bMiddleMouseDown=!1)},t.prototype.OnMouseLeave=function(e){this.m_bMiddleMouseDown=!1},t.prototype.OnCloseClick=function(e){wd.UIStore.CloseTab(Xt(this,e),this.props.tab),e.stopPropagation()},t.prototype.OnContextMenu=function(e){if(!this.props.bDisableContextMenu){var t=this.props.tab;if(t.IsChatRoom()){if(t instanceof tl){var i=t;je(e,i.GetGroup(),{tab:t})}}else{var i=this.props.tab.GetChatView();De(Xt(this,e),{tab:this.props.tab},i.chat.chat_partner,e)}}},t.prototype.render=function(){var e=this.props.tab,t="chatTab no-drag";return this.props.active&&(t+=" active"),e.IsChatRoom()&&(t+=" chatRoom"),e.IsVoiceActive()&&(t+=" VoiceActive",wd.ChatStore.VoiceChat.IsMicMuted()&&(t+=" MicMuted")),Sa.createElement("div",{className:t,ref:this.BindChatTab,draggable:!0,onMouseDown:this.OnMouseDown,onMouseUp:this.OnMouseUp,onMouseLeave:this.OnMouseLeave,onDragStart:this.OnDragStart,onDragEnd:this.OnDragEnd,onContextMenu:this.OnContextMenu},Sa.createElement("div",{className:"chatTabHighlight"}),e.IsVoiceActive()&&Sa.createElement("div",{className:"MicStatus",title:wd.ChatStore.VoiceChat.IsMicMuted()?Object(ua.b)("#Tooltip_MicStatus_Muted"):Object(ua.b)("#Tooltip_MicStatus_Active")},Sa.createElement(Id.C,null)),Sa.createElement(mp,null,Sa.createElement(rg,{tab:this.props.tab})),Sa.createElement("div",{className:"TabRightContainer"},Sa.createElement("div",{title:Object(ua.b)("#Chat_CloseTooltip"),className:"chatTabClose closeButton",onClick:this.OnCloseClick},Sa.createElement(Id._6,null)),Sa.createElement(ng,{tab:this.props.tab})))},si.c([yn.a],t.prototype,"BindChatTab",null),si.c([yn.a],t.prototype,"OnDragStart",null),si.c([yn.a],t.prototype,"OnDragEnd",null),si.c([yn.a],t.prototype,"OnMouseDown",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([yn.a],t.prototype,"OnMouseLeave",null),si.c([yn.a],t.prototype,"OnCloseClick",null),si.c([yn.a],t.prototype,"OnContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),ng=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.tab;if(e.IsChatRoom()&&e instanceof tl){var t=e;return t.GetGroup().HasUnreadChatMessage?Sa.createElement(Sa.Fragment,null,Sa.createElement(Zp,{group:t.GetGroup(),className:"ChatTabUnread"}),Sa.createElement("div",{className:"UnreadGlow"})):null}return e.GetUnreadMessageCount()?Sa.createElement(Sa.Fragment,null,Sa.createElement("div",{className:"chatTabUnreadBadge"},e.GetUnreadMessageCount()),Sa.createElement("div",{className:"UnreadGlow"})):null},t=si.c([up.observer],t)}(Sa.Component),rg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.tab.GetChatView();if(e&&e.chat instanceof ll)return Sa.createElement("div",{className:"ChatTabContent"},Sa.createElement(Oh,{friend:e.chat.chat_partner,noActions:!0,context:{chat:e.chat}}));if(e&&e.chat instanceof Xc){var t=this.props.tab.GetGroup();return Sa.createElement("div",{className:"ChatTabContent ChatRoom"},Sa.createElement(Jm,{group:t,small:!0}),Sa.createElement("div",{className:"chatTabGroupName"},this.props.tab.GetTabName()))}if(this.props.tab instanceof Jl){var i=this.props.tab.GetTabName(),n=ai.a.CHAT_BASE_URL+"public/images/webui/broadcast/csgo2_tab.jpg";return Sa.createElement("div",{className:"ChatTabContent ChatRoom"},Sa.createElement("div",{className:"ChatRoomGroupAvatar HasAvatar Small"},Sa.createElement("img",{className:"ChatRoomGroupAvatar_Avatar",src:n})),Sa.createElement("div",{className:"chatTabGroupName"},i))}return null},t=si.c([up.observer],t)}(Sa.Component),og=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bDontShowChecked:!1,strChatName:""},i.m_strChannelName="",i}return si.d(t,e),t.prototype.DismissDialog=function(){this.props.closeModal()},t.prototype.OnSubmit=function(){gy.SetUIDisplayPref("bDontShowVoiceAlert",this.state.bDontShowChecked),this.props.closeModal()},t.prototype.OnDialogChecked=function(){this.setState({bDontShowChecked:!this.state.bDontShowChecked})},t.prototype.OnManualVoiceChatExit=function(){wd.VoiceStore.OnUserEndVoiceChat(),this.OnSubmit()},t.prototype.componentDidMount=function(){this.setState({strChatName:wd.ChatStore.GetActiveVoiceChat().name})},t.prototype.render=function(){return Sa.createElement(pe,{onEscKeypress:this.DismissDialog},Sa.createElement(ne,{classNameContent:"CloseActiveVoiceWindowConfirmation",onSubmit:this.OnSubmit},Sa.createElement(Ud,null,Sa.createElement("div",null,Object(ua.b)("#Chat_StillInVoiceDialog_Title"))),Sa.createElement(Hd,null,Sa.createElement("div",{className:"activeVoiceDetails"},Object(ua.b)("#Chat_StillInVoiceDialog_Desc1")),Sa.createElement("div",{className:"activeVoiceDetails"},Object(ua.b)("#Chat_StillInVoiceDialog_Desc2")),Sa.createElement("div",{className:"voiceControlsExample"},Sa.createElement(lh,{name:this.state.strChatName,chat:wd.ChatStore.GetActiveVoiceChat(),nostatus:!0}),Sa.createElement("div",{className:"circleHighlight voiceExit"})),!1),Sa.createElement(Vd,null,Sa.createElement("div",{className:"_DialogColLayout"},Sa.createElement(re,{onClick:this.OnSubmit},Object(ua.b)("#Chat_StillInVoiceDialog_KeepChatting"))),Sa.createElement("div",{className:"dontShowConfirmation",onClick:this.OnDialogChecked},Sa.createElement(tp,{checked:this.state.bDontShowChecked,onChange:this.OnDialogChecked}),Object(ua.b)("#Dialog_DontShowMeAgain")))))},si.c([yn.a],t.prototype,"DismissDialog",null),si.c([yn.a],t.prototype,"OnSubmit",null),si.c([yn.a],t.prototype,"OnDialogChecked",null),si.c([yn.a],t.prototype,"OnManualVoiceChatExit",null),t=si.c([up.observer],t)}(Sa.Component),ag=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.HideStats=function(){this.props.closeStats&&this.props.closeStats()},t.prototype.render=function(){var e=this.props.stats;return Sa.createElement("div",{className:"dash_video_stats"},Sa.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},Sa.createElement(Id._6,null)),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_BufferingResolution")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_PlaybackResolution")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_HtmlResolution")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_ContentServer")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_StallEvents")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_FailedDownloads")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_TimeToFirstFrame")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_PlaybackRate")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),Sa.createElement(sg,{stats:e}))},si.c([yn.a],t.prototype,"HideStats",null),t=si.c([up.observer],t)}(Sa.Component),sg=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.createBufferedRange=function(e){var t=this.props.stats,i=[],n=e?"vidbuf":"audbuf",r=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(r>0)for(var o=0;o<r;++o){var a=Object(ua.b)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",o),s=e?t.GetBufferedVideoSegmentForDisplay(o):t.GetBufferedAudioSegmentForDisplay(o);i.push(Sa.createElement("div",{key:n+o},a," ",Sa.createElement("span",{className:"videoStatsValue"},s)))}else{var a=Object(ua.b)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");i.push(Sa.createElement("div",{key:n+"none"},a))}return i},t.prototype.render=function(){var e=this.props.stats;return Sa.createElement("div",{className:"dash_video_quick_stats"},Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_BytesReceived")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_DroppedFrames")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_VideoBuffered")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_AudioBuffered")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_BandwidthRequired")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_BandwidthVideo")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_BandwidthNums")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_DownloadNums")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_ActiveDownloads")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_VideoDownloadProgress")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_DroppingFrames")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),Sa.createElement("div",null,Object(ua.b)("#DASHPlayerStats_CurrentFPS")," ",Sa.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))},t=si.c([up.observer],t)}(Sa.Component),cg=function(e){function t(t){var i=e.call(this,t)||this;return i.m_schHideControls=new bn,i.m_schUnmountControls=new bn,i.m_elBroadcastPlayer=null,i.m_bMouseDown=!1,i.m_elMouseDown=null,i.m_listeners=new Cn,i.m_strContextMenuLeft="0px",i.m_strContextMenuTop="0px",console.log(i.props.steamID),i.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1,bShowContextMenu:!1},i}return si.d(t,e),t.prototype.StopVideo=function(){var e=this.state.video;e&&(Hl.StopVideo(e),this.setState({video:null}))},t.prototype.componentWillUnmount=function(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()},t.prototype.BindBroadcastPlayerRef=function(e){this.m_listeners.Unregister(),this.m_elBroadcastPlayer=e,e&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))},t.prototype.BindVideoRef=function(e){if(this.StopVideo(),e){var t=Hl.StartVideo(e,this.props.steamID,this.props.watchLocation);this.setState({video:t})}this.m_elVideo=e},t.prototype.OnMouseDown=function(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},t.prototype.OnMouseUp=function(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls),!this.state.bShowContextMenu||e.srcElement&&e.srcElement.parentElement&&"broadcastplayercontextmenu"==e.srcElement.parentElement.id||this.setState({bShowContextMenu:!1})},t.prototype.OnMouseMove=function(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)},t.prototype.OnMouseLeave=function(e){this.HideControls()},t.prototype.HideControls=function(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1,bShowContextMenu:!1})},t.prototype.UmountControls=function(){this.setState(function(e){if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}})},t.prototype.componentDidUpdate=function(e,t){var i=this;!t.bMountControls&&this.state.bMountControls?setTimeout(function(){i.setState(function(e){return{bControlsVisible:e.bMountControls}})},15):t.bControlsVisible&&!this.state.bControlsVisible&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls)},t.prototype.ShowStatsView=function(){var e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))},t.prototype.OnContextMenu=function(e){if(!this.state.bShowContextMenu){var t=this.m_elVideo.parentElement.getBoundingClientRect();this.m_strContextMenuLeft=e.clientX-t.left+"px",this.m_strContextMenuTop=e.clientY-t.top+"px",this.setState({bShowContextMenu:!0})}},t.prototype.ToggleStatsView=function(e){var t=!this.state.bShowStats;this.setState({bShowStats:t});var i=this.state.video;i&&i.SetStatsViewIsVisible(t)},t.prototype.ShowStorePage=function(e){var t=this.state.video;if(t){var i=t.GetBroadcastInfo();i&&(ht(e,ai.a.STORE_BASE_URL+"app/"+i.m_strAppId),e.stopPropagation())}},t.prototype.GetContextMenuItems=function(){var e=this,t=[],i=this.state.video;if(!i)return t;var n=i.GetBroadcastInfo();return t.push(Sa.createElement(Mp.b,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:function(t){e.ToggleStatsView(t),e.setState({bShowContextMenu:!1})}},Object(ua.b)("#Broadcast_VideoContext_ToggleStats"))),n&&"0"!=n.m_strAppId&&"7"!=n.m_strAppId&&t.push(Sa.createElement(Mp.d,{key:"visitstore",onSelected:function(t){e.ShowStorePage(t),e.setState({bShowContextMenu:!1})}},Object(ua.b)("#Broadcast_VideoContext_OpenStore"))),t},t.prototype.CloseStats=function(){var e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))},t.prototype.OnToggleFullscreen=function(){this.m_elBroadcastPlayer&&(Object(Ad.b)(this.m_elBroadcastPlayer)?Object(Ad.g)(this.m_elBroadcastPlayer):Object(Ad.l)(this.m_elBroadcastPlayer))},t.prototype.OnFullscreenChange=function(e){if(this.m_elBroadcastPlayer){var t=Object(Ad.b)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}},t.prototype.BHideVideoControls=function(){var e=this.state.video;return!e||!!e.GetUserInputNeeded()||Hl.GetBroadcastState(e.GetBroadcastSteamID())==Gl.Error},t.prototype.render=function(){var e=this.state.video,t=e&&e.BHasDASHStats()&&this.state.bShowStats,i=this.state.bMountControls,n=this.state.bControlsVisible,r=e&&e.GetUserInputNeeded(),o=e&&e.GetBroadcastInfo(),a="videoContainer";n||(a+=" HidePlayerControls"),this.state.bFullscreen&&(a+=" fullscreenVideo");var s=[];!this.state.bFullscreen&&this.props.actions&&(s=s.concat(this.props.actions)),this.state.bFullscreen||s.push(Sa.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:Object(ua.b)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),s.push(Sa.createElement("div",{key:"FullscreenToggle",title:Object(ua.b)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));var c=this.state.bShowContextMenu,l=i&&!this.BHideVideoControls(),u=i&&!this.state.bFullscreen;return Sa.createElement("div",{ref:this.BindBroadcastPlayerRef,className:a,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},o&&Sa.createElement(Um,{className:"videoBackground",src:o.m_strThumbnailUrl,draggable:!1,duration:2500}),Sa.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:!0,autoPlay:!0,playsInline:!0,controls:!1}),l&&Sa.createElement(dg,{video:e,actions:s}),u&&Sa.createElement(pg,{onClick:this.props.onRequestClose}),t&&Sa.createElement(ag,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),Sa.createElement(lg,{video:e}),r&&Sa.createElement(ug,{video:e}),c&&Sa.createElement("div",{className:"STV_BroadcastContextMenuPanel",style:{left:this.m_strContextMenuLeft,top:this.m_strContextMenuTop}},Sa.createElement("div",{id:"broadcastplayercontextmenu",className:"STV_BroadcastSettingsMenuItems"},this.GetContextMenuItems())))},si.c([yn.a],t.prototype,"BindBroadcastPlayerRef",null),si.c([yn.a],t.prototype,"BindVideoRef",null),si.c([yn.a],t.prototype,"OnMouseDown",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([yn.a],t.prototype,"OnMouseMove",null),si.c([yn.a],t.prototype,"OnMouseLeave",null),si.c([yn.a],t.prototype,"HideControls",null),si.c([yn.a],t.prototype,"UmountControls",null),si.c([yn.a],t.prototype,"ShowStatsView",null),si.c([yn.a],t.prototype,"OnContextMenu",null),si.c([yn.a],t.prototype,"ToggleStatsView",null),si.c([yn.a],t.prototype,"ShowStorePage",null),si.c([yn.a],t.prototype,"CloseStats",null),si.c([yn.a],t.prototype,"OnToggleFullscreen",null),si.c([yn.a],t.prototype,"OnFullscreenChange",null),t=si.c([up.observer],t)}(Sa.Component),lg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.video;if(e&&e.GetUserInputNeeded())return null;var t=Gl.Loading,i="";if(e){t=Hl.GetBroadcastState(e.GetBroadcastSteamID()),i=Hl.GetBroadcastStateDescription(e.GetBroadcastSteamID());var n=e.IsBuffering();t==Gl.Ready&&n&&(t=Gl.Loading,i="")}if(t==Gl.Ready)return null;var r=t==Gl.Loading;return Sa.createElement("div",{className:"BroadcastVideoWatchState"},r&&Sa.createElement(_m,null),!r&&Sa.createElement("div",{className:"BroadcastVideoWatchState_Text"},i))},t=si.c([up.observer],t)}(Sa.Component),ug=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnClick=function(){Hl.UserInputClickVideo(this.props.video)},t.prototype.render=function(){return Sa.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},Sa.createElement(Id.H,null),Sa.createElement("span",null,Object(ua.b)("#DASHPlayerControls_ClickToPlay")))},si.c([yn.a],t.prototype,"OnClick",null),t}(Sa.Component),dg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.video;if(!e)return null;var t=e.has_segments;return Sa.createElement("div",{className:"videoControls"},Sa.createElement(Mg,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0}),Sa.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},Sa.createElement(Sg,{video:e}),Sa.createElement("div",{className:"STV_BroadcastController"},Sa.createElement("div",{className:"videoControlsButtons LeftSpacer"}),Sa.createElement(mg,{video:e}),Sa.createElement(hg,{video:e}),Sa.createElement(yg,{video:e,actions:this.props.actions}))))},t=si.c([up.observer],t)}(Sa.Component),pg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return this.props.onClick?Sa.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},Sa.createElement(Id._6,null)):null},t}(Sa.PureComponent),mg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnJumpBackward=function(){this.props.video.JumpTime(-15)},t.prototype.OnJumpForward=function(){this.props.video.JumpTime(15)},t.prototype.render=function(){var e=this.props.video;return Sa.createElement("div",{className:"videoControlsButtons PlayControls"},Sa.createElement(fg,{video:e}),Sa.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},Sa.createElement(Id.B,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),Sa.createElement("div",{className:"jumpAheadValue"},15)),Sa.createElement(gg,{video:e}),Sa.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},Sa.createElement(Id.B,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),Sa.createElement("div",{className:"jumpAheadValue"},15)),Sa.createElement(_g,{video:e}))},si.c([yn.a],t.prototype,"OnJumpBackward",null),si.c([yn.a],t.prototype,"OnJumpForward",null),t}(Sa.Component),hg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnGoLiveClicked=function(e){this.props.video.JumpToLiveEdge()},t.prototype.render=function(){var e=this.props.video.IsOnLiveEdge();return Sa.createElement("div",{className:"videoControlsButtons GoLive"},Sa.createElement("div",{className:"videoControlButton videoControlGoLive"+(e?" isLiveEdge":""),onClick:e?null:this.OnGoLiveClicked},Sa.createElement(Id.B,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),Sa.createElement("div",{className:"jumpGoLive"},e?Object(ua.b)("#DASHPlayerControls_IsLive"):Object(ua.b)("#DASHPlayerControls_GoLive"))))},si.c([yn.a],t.prototype,"OnGoLiveClicked",null),t=si.c([up.observer],t)}(Sa.Component),gg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnTogglePlayPause=function(){this.props.video.TogglePlayPause()},t.prototype.render=function(){var e=this.props.video,t=e.IsPaused();return Sa.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},t?Sa.createElement(Id.H,null):Sa.createElement(Id.G,null))},si.c([yn.a],t.prototype,"OnTogglePlayPause",null),t=si.c([up.observer],t)}(Sa.Component),fg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),Object.defineProperty(t.prototype,"has_previous_marker",{get:function(){return void 0!==this.GetPreviousMarkerTime()},enumerable:!0,configurable:!0}),t.prototype.GetPreviousMarkerTime=function(){if(this.props.video.has_markers)for(var e=this.props.video.GetTimelineMarkers(),t=this.props.video.GetPlaybackTime(),i=e.length-1;i>=0;i--)if(!(e[i].nTime>=t))return e[i].nTime},t.prototype.OnJumpToPreviousMarkerClicked=function(e){var t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)},t.prototype.render=function(){var e=this.props.video.BHasMarkersOrSegments();return Sa.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},Sa.createElement(Id.B,{bHidePostArrow:!0,bFlipHorizontal:!0}))},si.c([_i.computed],t.prototype,"has_previous_marker",null),si.c([yn.a],t.prototype,"OnJumpToPreviousMarkerClicked",null),t=si.c([up.observer],t)}(Sa.Component),_g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),Object.defineProperty(t.prototype,"has_next_marker",{get:function(){return void 0!==this.GetNextMarkerTime()},enumerable:!0,configurable:!0}),t.prototype.GetNextMarkerTime=function(){if(this.props.video.has_markers)for(var e=this.props.video.GetTimelineMarkers(),t=this.props.video.GetPlaybackTime(),i=0;i<e.length;i++)if(!(e[i].nTime<=t))return e[i].nTime},t.prototype.OnJumpToNextMarkerClicked=function(e){var t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)},t.prototype.render=function(){var e=this.props.video.BHasMarkersOrSegments();return Sa.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},Sa.createElement(Id.B,{bHidePostArrow:!0,bFlipHorizontal:!1}))},si.c([_i.computed],t.prototype,"has_next_marker",null),si.c([yn.a],t.prototype,"OnJumpToNextMarkerClicked",null),t=si.c([up.observer],t)}(Sa.Component),yg=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bSettingsOpen:!1},i}return si.d(t,e),t.prototype.OnVideoControlClick=function(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)},t.prototype.OnMouseUp=function(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),Object(Ad.e)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1})},t.prototype.bindSettingsButton=function(e){this.m_elSettingsButton=e},t.prototype.BindSettingsPanel=function(e){this.m_elSettingsPanel=e},t.prototype.render=function(){var e,t,i=this,n=!1,r=this.props,o=r.video,a=r.actions,s=0;return this.state.bSettingsOpen&&(n=!0,e=this.props.video.GetVideoRepresentations(),t=e.map(function(e){return Sa.createElement(Mp.b,{key:e.id,onSelected:function(){i.props.video.SetVideoRepresentation(e),i.setState({bSettingsOpen:!i.state.bSettingsOpen})},bChecked:e.selected},e.displayName)}),s=0-(21*t.length+32)),Sa.createElement("div",{className:"STV_BroadcastSettings"},Sa.createElement("div",{className:"videoControlButton"+(n?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},Sa.createElement(Id.Q,null)),Sa.createElement(bg,{video:o}),a&&a.map(function(e){return Sa.createElement("div",{key:e.key,className:"videoControlButton"},e)}),n&&Sa.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:s}},Sa.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},t)))},si.c([yn.a],t.prototype,"OnVideoControlClick",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([yn.a],t.prototype,"bindSettingsButton",null),si.c([yn.a],t.prototype,"BindSettingsPanel",null),t}(Sa.Component),vg=!0,bg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.k_nHideSliderTimeout=1500,t.m_bShowSlider=vg,t.m_schHideSlider=new bn,t.m_bChildDragging=!1,t.m_bMouseOver=!1,t}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_schHideSlider.Cancel()},t.prototype.ToggleMute=function(){var e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)},t.prototype.OnMouseEnter=function(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()},t.prototype.OnMouseLeave=function(e){this.m_bMouseOver=!1,this.ScheduleHide()},t.prototype.OnChildDrag=function(e){this.m_bChildDragging=e,this.ScheduleHide()},t.prototype.ScheduleHide=function(){var e=this;this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,function(){return e.m_bShowSlider=vg})},t.prototype.render=function(){var e=this.props.video,t=e.IsMuted(),i=100*e.GetVolume(),n="videoControlButton";i>65?n+=" HighestVolume":i>45?n+=" HighVolume":i<46&&i>24?n+=" MedVolume":i<25&&(n+=" LowVolume");var r="BroadcastVolumeControl";return this.m_bShowSlider&&(r+=" ShowVolumeSlider"),t&&(r+=" muted"),Sa.createElement("div",{className:r,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},Sa.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},Sa.createElement("div",{className:n,onClick:this.ToggleMute},Sa.createElement(Id._4,null)),Sa.createElement(Cg,{video:e,onDrag:this.OnChildDrag})))},si.c([_i.observable],t.prototype,"m_bShowSlider",void 0),si.c([yn.a],t.prototype,"ToggleMute",null),si.c([yn.a],t.prototype,"OnMouseEnter",null),si.c([yn.a],t.prototype,"OnMouseLeave",null),si.c([yn.a],t.prototype,"OnChildDrag",null),t=si.c([up.observer],t)}(Sa.Component),Cg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_elSlider=null,t.m_nVolumeStartOfDrag=0,t}return si.d(t,e),t.prototype.OnMouseDown=function(e){var t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)},t.prototype.OnMouseMove=function(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)},t.prototype.OnMouseUp=function(e){if(this.m_elSlider){this.SetVolumeWithCoord(this.m_elSlider,e.clientX);var t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}},t.prototype.SetVolumeWithCoord=function(e,t){var i=e.getBoundingClientRect(),n=w(t,i.left,i.right,0,1),r=F(n,0,1),o=this.props.video;o.SetMute(n<.01),o.SetVolume(r)},t.prototype.render=function(){var e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);var i={left:t+"%"},n={width:t+"%"};return Sa.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},Sa.createElement("div",{className:"BroadcastVolumeSlider_Track"}),Sa.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:n}),Sa.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:i}))},si.c([yn.a],t.prototype,"OnMouseDown",null),si.c([yn.a],t.prototype,"OnMouseMove",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([_i.action],t.prototype,"SetVolumeWithCoord",null),t=si.c([up.observer],t)}(Sa.Component),Sg=function(e){function t(t){var i=e.call(this,t)||this;return i.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0},i}return si.d(t,e),t.prototype.OnMouseDown=function(e){this.m_elSlider=e.currentTarget,this.m_rectSlider=this.m_elSlider.getBoundingClientRect(),this.AdjustSliderForClientX(e.clientX),this.setState({bGrabberMouseDown:!0}),this.m_elSlider.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)},t.prototype.OnMouseMove=function(e){this.AdjustSliderForClientX(e.clientX)},t.prototype.OnMouseUp=function(e){this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nHoverValue:void 0,nGrabberMouseDownTime:0}),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp)},t.prototype.OnKeyDown=function(e){},t.prototype.AdjustSliderForClientX=function(e){var t=this.props.video,i=t.GetTimelineStartPos(),n=t.GetTimelineStartPos()+t.GetTimelineDuration(),r=t.GetTimeAtMousePosition(e,this.m_rectSlider,i,n);r!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:r,nHoverValue:r})},t.prototype.OnSegmentClick=function(e){this.props.video.Seek(e)},t.prototype.OnMarkerMouseEnter=function(e){this.setState({nHoverValue:e})},t.prototype.OnMarkerMouseLeave=function(){this.setState({nHoverValue:void 0})},t.prototype.render=function(){var e=this,t=this.props.video,i=this.state.bGrabberMouseDown,n=void 0!==this.state.nHoverValue,r=t.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,xl.Timeline),o=t.GetPercentOffsetFromTime(t.GetPlaybackTime(),xl.Timeline),a=t.GetPercentOffsetFromTime(t.GetVideoAvailableStartTime(),xl.Timeline);a<.05&&(a=0);var s=F(r,0,100).toFixed(1)+"%",c=F(o,0,100).toFixed(1)+"%",l=F(a,0,100).toFixed(1)+"%",u={},d={},p={},m={},h={};i?(m.left=s,u.width=s,d.width=c,p.width=l,h.left=s):(m.left=c,d.width=c,p.width=l,n&&(h.left=this.state.nHoverValue+"%"));var g=O(t.GetPlaybackTime()),f=O(this.state.nGrabberMouseDownTime);i||(f=g);var _="STV_timelineContainer";this.state.bGrabberMouseDown&&(_+=" grabberDown"),t.IsTimelineMapActive()&&(_+=" minimapActive");var y="";r=i?r:o,r>100?y=" grabberOffScreenRight grabberOffscreen":r<0&&(y=" grabberOffScreenLeft grabberOffscreen");var v=[];t.GetTimelineMarkers().forEach(function(i,n){var r=t.GetPercentOffsetFromTime(i.nTime,xl.Timeline);r<0||r>100||v.push(Sa.createElement(gt,{key:n,pos:r,label:i.strLabel,onMouseEnter:e.OnMarkerMouseEnter,onMouseLeave:e.OnMarkerMouseLeave}))});var b=[];return t.GetTimelineSegments().forEach(function(i,n){var r=t.GetPercentOffsetFromTime(i.nTimeStart,xl.Timeline);if(!(r>100)){var o=t.GetPercentOffsetFromTime(i.nTimeEnd,xl.Timeline);o<0||b.push(Sa.createElement(ft,{key:n,startPos:r,endPos:o,label:i.strLabel,color:i.color,onClick:function(t){return e.OnSegmentClick(i.nTimeStart)}}))}}),Sa.createElement("div",{className:"videoTimelineMain"},Sa.createElement("div",{className:_,onKeyDown:this.OnKeyDown},Sa.createElement("div",{className:"DialogLabel"},g),Sa.createElement("div",{className:"STV_timelineSegmentsContainer"},b),Sa.createElement("div",{className:"DialogSlider_SliderContainer",onMouseDown:this.OnMouseDown},Sa.createElement("div",{className:"DialogSlider_Slider"},Sa.createElement("div",{className:"STV_timelineValue",style:u}),Sa.createElement("div",{className:"STV_timelineGhostValue",style:d}),Sa.createElement("div",{className:"STV_timelineNoVideo",style:p}),v,Sa.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:m},Sa.createElement("div",{className:"STV_timelineGrabber"+y},Sa.createElement("div",{key:"grabbertime",className:"STV_timelineGrabberValue"},f),Sa.createElement("div",{className:"STV_timelineGrabberArrow"},Sa.createElement(Id.N,null))))))))},si.c([yn.a],t.prototype,"OnMouseDown",null),si.c([yn.a],t.prototype,"OnMouseMove",null),si.c([yn.a],t.prototype,"OnMouseUp",null),si.c([yn.a],t.prototype,"OnKeyDown",null),si.c([yn.a],t.prototype,"OnSegmentClick",null),si.c([yn.a],t.prototype,"OnMarkerMouseEnter",null),si.c([yn.a],t.prototype,"OnMarkerMouseLeave",null),t=si.c([up.observer],t)}(Sa.Component),Mg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={info:null},t}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){return t.info&&t.info.m_steamIDBroadcast===e.steamID?null:(t.info&&Hl.StopInfo(t.info),{info:Hl.StartInfo(e.steamID)})},t.prototype.componentWillUnmount=function(){this.state.info&&Hl.StopInfo(this.state.info)},t.prototype.RenderStreamSwitcher=function(){return null},t.prototype.render=function(){var e=this.state.info,t="";e&&e.m_nViewerCount&&(t=e.m_nViewerCount.toLocaleString());var i="583950"==e.m_strAppId;return Sa.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&Sa.createElement(Um,{className:"broadcastDetailsThumbBlur",src:e.m_strThumbnailUrl,draggable:!1,duration:2500}),Sa.createElement("div",{className:"BroadcastDetailsHeader"},Sa.createElement("div",{className:"displayColumn"},Sa.createElement("div",{className:"Info"},Sa.createElement("span",{className:"AppTitle"},e.m_strAppTitle),e.m_strTitle&&Sa.createElement("span",{className:"BroadcastTitle"}," - ",e.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),t&&Sa.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},Sa.createElement(Id._2,null),Object(ua.b)("#Broadcast_ViewerCount",t))),Sa.createElement("div",{className:"Actions"},Sa.createElement("div",{onClick:function(e){return ht(e,"https://steam.tv/csgo")},className:"BroadcastLink"},"steam.tv/csgo"),i&&Sa.createElement("div",{onClick:function(e){return ht(e,"http://playartifact.com/")},className:"BroadcastLink"},"Learn more at playartifact.com"))))},t=si.c([up.observer],t)}(Sa.Component),Fg=(Sa.Component,function(e){function t(t){var i=e.call(this,t)||this;return i.m_chat=null,i}return si.d(t,e),t.prototype.StopChat=function(){this.m_chat&&(Hl.StopChat(this.m_chat),this.m_chat=null)},t.prototype.componentWillUnmount=function(){this.StopChat()},t.prototype.BindChatRef=function(e){this.StopChat(),e&&(this.m_chat=Hl.StartChat(e,this.props.steamID,this.props.watchLocation))},t.prototype.render=function(){return Sa.createElement("div",{className:zm("BroadcastChat",this.props.className),style:this.props.hidden?{display:"none"}:void 0},Sa.createElement("iframe",{ref:this.BindChatRef}))},si.c([yn.a],t.prototype,"BindChatRef",null),t}(Sa.Component)),wg=function(e){var t=e.group,i=e.onClick,n=t.watching_broadcast_steamid;return Ma.a.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:i},Ma.a.createElement("div",{className:"ChatRoomListGroupItem_header"},Ma.a.createElement(Jm,{group:t,small:!0}),Ma.a.createElement("div",{className:"groupNameStatusContainer"},Ma.a.createElement("div",{className:"chatRoomName"},t.name),n&&Ma.a.createElement("div",{className:"chatRoomDetails"},Object(ua.b)("#Broadcast_WatchParty_Viewers_NoneActive")))))},Bg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.CreateWatchParty=function(e){void 0===e&&(e=!1);var t=this.props,i=t.browserContext,n=t.ownerWindow,r=t.broadcastAccountId,o=t.initialFriend;this.Close();var a=e&&o?[o.accountid]:[];_t(i,n||window,r,a)},t.prototype.WatchAlone=function(){this.Close()},t.prototype.JoinExisting=function(e){var t=this.props,i=t.broadcastTabId,n=t.browserContext;this.Close();var r=wd.UIStore.ShowAndOrActivateChatRoomGroup(n,e,!0);wd.UIStore.CloseTabByID(i),r.ShowBroadcast()},t.prototype.UpgradeExisting=function(e){var t=this.props,i=t.broadcastAccountId,n=t.browserContext;this.Close(),e.SetChatRoomGroupWatchingBroadcast(i),wd.UIStore.ShowAndOrActivateChatRoomGroup(n,e,!0).ShowBroadcast()},t.prototype.Close=function(){var e=this.props.closeModal;e&&e()},t.prototype.render=function(){var e=this,t=this.props,i=t.closeModal,n=t.initialFriend,r=wd.ChatStore.currentChatRoomGroups,o=r.filter(function(e){return e.watching_broadcast_steamid}),a=r.filter(function(e){return e.BCanIAssociateBroadcast()&&!e.watching_broadcast_steamid}),s=n;return Ma.a.createElement("div",{className:"chatModalCover"},Ma.a.createElement(pe,{onEscKeypress:i},Ma.a.createElement(ie,{className:"watchPartyDialog"},Ma.a.createElement(Hd,null,Ma.a.createElement("div",{className:"watchPartyPrompt"},Object(ua.b)("#Broadcast_WatchPrompt")),Ma.a.createElement(qd,null,Ma.a.createElement(oe,{svgicon:Id.q,className:"watchHowButton",onClick:this.WatchAlone},Object(ua.b)("#Broadcast_WatchAlone")),s&&Ma.a.createElement(oe,{className:"watchHowButton",onClick:function(){return e.CreateWatchParty(!0)}},Ma.a.createElement(Rh,{friend:s,context:null,bLarge:!1}),Object(ua.d)("#Broadcast_WatchWith",Ma.a.createElement("span",{className:"highlight"}," ",s.display_name))),0!==o.length&&Ma.a.createElement(Ma.a.Fragment,null,Ma.a.createElement(jd,null,Object(ua.b)("#Broadcast_WatchWithExistingWatchParty")),o.map(function(t){return Ma.a.createElement(wg,{key:t.unique_id,group:t,onClick:function(){return e.JoinExisting(t)}})})),0!==a.length&&Ma.a.createElement(Ma.a.Fragment,null,Ma.a.createElement(jd,null,Object(ua.b)("#Broadcast_LinkBroadcastToGroup")),a.map(function(t){return Ma.a.createElement(wg,{key:t.unique_id,group:t,onClick:function(){return e.UpgradeExisting(t)}})})),Ma.a.createElement(oe,{className:"watchHowButton newWatchGroup",svgicon:Id.E,onClick:function(){return e.CreateWatchParty(!1)}},Object(ua.b)("#Broadcast_LinkBroadcastToGroup_New")))),Ma.a.createElement(Vd,null))))},si.c([yn.a],t.prototype,"WatchAlone",null),si.c([yn.a],t.prototype,"Close",null),t}(Ma.a.Component),Og=function(e){function t(t){var i=e.call(this,t)||this;i.m_broadcastInfo=null;var n=i.props.broadcastView.GetSteamID().ConvertTo64BitString();return i.m_broadcastInfo=Hl.StartInfo(n),i.state={bChatCollapsed:!1},i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_broadcastInfo&&(Hl.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)},t.prototype.OnWatchWithFriends=function(){this.props.broadcastView.ShowWatchPromptDialog()},t.prototype.ToggleChat=function(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})},t.prototype.ToggleTheaterMode=function(){wd.UIStore.SetTheaterMode(!wd.UIStore.GetTheaterMode())},t.prototype.render=function(){var e=this.props,t=e.broadcastView,i=e.popup,n=e.style,r=t.GetSteamID().ConvertTo64BitString(),o=yt(),a=t.m_bShowWatchPromptDialog?Ma.a.createElement(Bg,{closeModal:function(){return t.HideWatchPromptDialog()},broadcastAccountId:t.GetSteamID().GetAccountID(),broadcastTabId:t.GetUniqueID(),initialFriend:t.m_watchPromptInitialFriend,browserContext:Md,ownerWindow:i}):null;return Ma.a.createElement("div",{className:"BroadcastTab",style:n},Ma.a.createElement(Um,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),Ma.a.createElement("div",{className:"BroadcastTab_OverBackground"},Ma.a.createElement("div",{className:"BroadcastTabHeaderContainer"},Ma.a.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},Ma.a.createElement(vt,{onClick:this.OnWatchWithFriends}),Ma.a.createElement(bt,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),Ma.a.createElement(Eg,{steamID:r,watchLocation:o,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},a)))},si.c([yn.a],t.prototype,"OnWatchWithFriends",null),si.c([yn.a],t.prototype,"ToggleChat",null),si.c([yn.a],t.prototype,"ToggleTheaterMode",null),t=si.c([up.observer],t)}(Ma.a.Component),Ig=function(e){function t(t){var i=e.call(this,t)||this;return i.m_broadcastInfo=null,i.m_broadcastInfo=Hl.StartInfo(i.props.app.GetSteamIDWatched()),i.state={bChatCollapsed:!1,bTheaterMode:!1},i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_broadcastInfo&&(Hl.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)},t.prototype.OnShowLogin=function(){this.props.app.ShowLogonDialog()},t.prototype.ToggleChat=function(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})},t.prototype.ToggleTheaterMode=function(){this.setState({bTheaterMode:!this.state.bTheaterMode})},t.prototype.render=function(){var e=this.props.app,t=this.m_broadcastInfo,i=yt();return Ma.a.createElement(Ma.a.Fragment,null,e.BReadyToRender()&&Ma.a.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},Ma.a.createElement(Um,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),Ma.a.createElement("div",{className:"StandalonePlayerHeader"},Ma.a.createElement("div",{className:"STV_Logo"},Ma.a.createElement(Id.U,null)),Ma.a.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},Ma.a.createElement(vt,{onClick:this.OnShowLogin}),Ma.a.createElement(bt,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),Ma.a.createElement(Eg,{steamID:e.GetSteamIDWatched(),watchLocation:i,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},Ma.a.createElement(kg,{app:e}))),Ma.a.createElement(Rg,{app:e}))},si.c([yn.a],t.prototype,"OnShowLogin",null),si.c([yn.a],t.prototype,"ToggleChat",null),si.c([yn.a],t.prototype,"ToggleTheaterMode",null),t=si.c([up.observer],t)}(Ma.a.Component),Rg=Object(up.observer)(function(e){var t=e.app;return t.BIsPerformingLogonCheck()?Ma.a.createElement("div",null,Ma.a.createElement("iframe",{style:{display:"none"},src:t.GetLoginURL()})):null}),Eg=function(e){function t(t){var i=e.call(this,t)||this;return i.m_strLocalSteamID="",i.state={info:null},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){return t.info&&t.info.m_steamIDBroadcast===e.steamID?null:(t.info&&Hl.StopInfo(t.info),{info:Hl.StartInfo(e.steamID)})},t.prototype.componentWillUnmount=function(){this.state.info&&Hl.StopInfo(this.state.info)},t.prototype.OnLocalStreamChange=function(e){this.m_strLocalSteamID=e},t.prototype.render=function(){var e=this.props,t=e.steamID,i=e.children,n=this.m_strLocalSteamID,r=n||t,o=this.state.info.m_bIsOnline;return Ma.a.createElement("div",{className:"BroadcastContainer"},Ma.a.createElement("div",{className:"BroadcastContainerSection"},Ma.a.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},o&&Ma.a.createElement(cg,{key:r,steamID:r,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!o&&Ma.a.createElement(Ct,null),Ma.a.createElement("div",{className:"videoContainerSizer"})),i,Ma.a.createElement("div",{className:"BroadcastDetailsSection"},Ma.a.createElement(Mg,{steamID:r,onLocalStreamChange:this.OnLocalStreamChange}))),Ma.a.createElement(Fg,{steamID:t,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}))},si.c([_i.observable],t.prototype,"m_strLocalSteamID",void 0),si.c([yn.a],t.prototype,"OnLocalStreamChange",null),t=si.c([up.observer],t)}(Ma.a.Component),Tg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.Dismiss=function(){this.props.app.DismissLogonDialog()},t.prototype.render=function(){return Ma.a.createElement(pe,{onEscKeypress:this.Dismiss},Ma.a.createElement(ie,{className:"SteamTVLoginDialog"},Ma.a.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))},si.c([yn.a],t.prototype,"Dismiss",null),t}(Ma.a.Component),kg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){if(!this.props.app.BIsLogonDialogVisible())return null;var e=Ma.a.createElement(Tg,{app:this.props.app});return Ma.a.createElement("div",{className:"chat_full_modaloverlay"},Ma.a.createElement("div",{className:"chat_modal_position chat_modal_background"}),Ma.a.createElement("div",{className:"chat_modal_position active"},e))},t=si.c([up.observer],t)}(Ma.a.Component),Dg=Object(up.observer)(function(e){return Sa.createElement(Bh,{friend:e.player,context:e.context},Sa.createElement("span",null,e.player.display_name))}),Gg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.messages,t=this.props.friendRenderContext;if(0==e.length)return null;for(var i=[],n=[],r=!0,o=0,a=e;o<a.length;o++){var s=a[o];if(-1==n.indexOf(s.unServerMsgParamAccountID)){i.length>0&&i.push(", ");var c=wd.FriendStore.GetPlayer(s.unServerMsgParamAccountID);i.push(Sa.createElement(Dg,{context:t,player:c})),n.push(s.unServerMsgParamAccountID),c.is_ready||(c.LoadIfNecessary(),r=!1)}}var l=wd.FriendStore.GetPlayer(e[0].unAccountID);l.is_ready||(l.LoadIfNecessary(),r=!1);var u=Sa.createElement(Dg,{context:t,player:l}),d="";if(i.length>1){var p=Sa.createElement.apply(Sa,[Sa.Fragment,null].concat(i));d=Object(ua.d)("#ChatRoom_ServerMessage_Invited_Multiple",p,u)}else d=Object(ua.d)("#ChatRoom_ServerMessage_Invited",i[0],u);return Sa.createElement(Ph,{style:"server"},Sa.createElement("div",{className:"msg serverMsg"},Sa.createElement("div",{className:"msgText"},r?d:" ")))},t=si.c([up.observer],t)}(Sa.Component),Ng=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.messages,t=this.props.friendRenderContext;if(0==e.length)return null;for(var i=[],n=[],r=!0,o=0,a=e;o<a.length;o++){var s=a[o];if(-1==n.indexOf(s.unServerMsgParamAccountID)){i.length>0&&i.push(Object(ua.b)("#ChatRoom_ServerMessageMultiple_Separator"));var c=wd.FriendStore.GetPlayer(s.unServerMsgParamAccountID);i.push(Sa.createElement(Dg,{context:t,player:c})),n.push(s.unServerMsgParamAccountID),c.is_ready||(c.LoadIfNecessary(),r=!1)}}var l="";if(i.length>1){var u=i.pop();2==i.length&&i.pop();var d=Sa.createElement.apply(Sa,[Sa.Fragment,null].concat(i));l=Object(ua.d)(this.props.tokenPrefix+"_Multiple",d,u)}else l=Object(ua.d)(this.props.tokenPrefix,i[0]);return Sa.createElement(Ph,{style:"server"},Sa.createElement("div",{className:"msg serverMsg"},Sa.createElement("div",{className:"msgText"},r?l:" ")))},t=si.c([up.observer],t)}(Sa.Component),Lg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.BIsEmoticonsOnly=function(e){if(e.startsWith("[emoticon")){var t=e.match(/^(?:\[emoticon\][^\[]+\[\/emoticon\]\s*)+$/);if(t&&t.length){var i=e.match(/\[emoticon\][^\[]+\[\/emoticon\]/g);return i&&i.length<=6}}return!1},t.prototype.OnAnimationStart=function(){this.m_nAnimationsInFlight||(this.m_nAnimationsInFlight=0),this.m_nAnimationsInFlight++},t.prototype.OnAnimationEnd=function(){this.m_nAnimationsInFlight&&this.m_nAnimationsInFlight--,this.m_nAnimationsInFlight||this.props.msg.OnAnimationEnd()},t.prototype.render=function(){var e,t,i=this.props,n=i.msg,r=i.speakerWidth,o=i.chatView,a=i.onUpdate,s=i.children,c=i.extraClassName,l=o.chat,u=n.strMessage,d=this.props.hideTimeStamp||o.IsChatRoom(),p=!d&&wd.FriendStore.GetPlayer(n.unAccountID);if(n.eErrorSending!=Ya.None)switch(n.eErrorSending){case Ya.NotFriends:t="ChatMessageErrorSending",e=Sa.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(ua.b)("#Chat_ErrorSending_NotFriends"));break;case Ya.RateLimitExceeded:t="ChatMessageErrorSending",e=Sa.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(ua.b)("#Chat_ErrorSending_RateLimitExceeded"));break;case Ya.NoChatPermissionInGroup:t="ChatMessageErrorSendingPermissionDenied",e=Sa.createElement("div",{className:"ChatMessageErrorPermissionDeniedAlert"},Sa.createElement(Id.y,null),Object(ua.b)("#Chat_ErrorPermissionDenied"));break;case Ya.Generic:default:t="ChatMessageErrorSending",e=Sa.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(ua.b)("#Chat_ErrorSending"))}var m=zm("msg",c,t,{isCurrentUser:l.self.accountid===n.unAccountID,HasTimeStamp:!d,EmojiOnly:H(u)}),h={paddingLeft:r?r+"px":void 0},g={width:r?r+"px":void 0},f={chat:l,unAccountIDSender:n.unAccountID,rtTimestamp:n.rtTimestamp,key:n.UniqueKey(),onLoad:a,chatGutterWidth:r,bUseLargeEmoticons:this.BIsEmoticonsOnly(u),bAnimate:n.eAnimationState===Ja.Animating,onAnimationStart:this.OnAnimationStart,onAnimationEnd:this.OnAnimationEnd},_=s||Sa.createElement(wa,{bbcode:u,context:f,parser:l.GetBBCodeParser()}),y=zm("msgText",{MsgNoUserContent:!n.HasUserContent()});return Sa.createElement("div",{className:m,style:h},!d&&Sa.createElement(Ag,{className:"FriendChatTimeStamp",friend:p,style:g},Sa.createElement(Bp,{rtime:n.rtTimestamp,bTimeOnly:!0})),e,Sa.createElement(Ph,null,Sa.createElement("div",{className:y},_)))},si.c([yn.a],t.prototype,"OnAnimationStart",null),si.c([yn.a],t.prototype,"OnAnimationEnd",null),t=si.c([up.observer],t)}(Sa.Component),Ag=Object(up.observer)(function(e){var t=e.friend.persona,i=zm(e.className,t.is_ingame&&"ingame"||t.is_online&&"online"||"offline",{away:t.is_awayOrSnooze,watchingbroadcast:t.m_broadcastAccountId&&IsFeatureBroadcastEnabled()});return Sa.createElement("div",{className:i,style:e.style},e.children)}),Pg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.friend;if(this.props.chatView.IsChatRoom()){var t=void 0,i="",n=this.props.chatView.chat,r=void 0;switch(n.GetMember(e.accountid)&&(r=n.GetGroup().GetMemberRank(e.accountid)),r){default:break;case 30:i="Moderator";break;case 40:i="Officer";break;case 50:i="Owner",n.GetGroup().BIsClanChatRoom()||(t=Sa.createElement("div",{className:"rankIcon rankOwner"},Sa.createElement(Id.h,null)))}return n.GetGroup().BIsClanChatRoom()&&(r>=40?t=Sa.createElement("div",{className:"rankIcon rankOwner"},Sa.createElement("img",{src:ai.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_officer.png"})):r>=30&&(t=Sa.createElement("div",{className:"rankIcon rankOwner"},Sa.createElement("img",{src:ai.a.COMMUNITY_CDN_URL+"public/images/skin_1/comment_modindicator_moderator.png"})))),Sa.createElement(Ph,{style:"speaker allow-embedded-newlines",text:["["+Fe(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",e.primary_display_name+":"]},Sa.createElement("div",{className:"ChatSpeaker ChatRoomSpeaker SpeakerLineBreak"+(e.accountid==this.props.chatView.chat.self.accountid?" isCurrentUser":"")},Sa.createElement(Ag,{friend:e,className:"speaker"},Sa.createElement(Bh,{friend:e,context:this.props.friendRenderContext},Sa.createElement("div",{className:"speakerHoverArea "+i},t,Sa.createElement("img",{className:"avatar speakerAvatar",src:e.persona.avatar_url}),Sa.createElement("div",{className:"speakerStatus"}),Sa.createElement("div",{className:"speakerName"},e.primary_display_name,!e.is_display_name_nickname&&e.has_secondary_display_name&&Sa.createElement("span",{className:"playerNickname"}," (",e.secondary_display_name,")"),e.is_display_name_nickname&&Sa.createElement("span",{className:"playerNicknameBracket",title:Object(ua.b)("#isNickname")},"*")))),Sa.createElement("div",{className:"speakerTimeStamp"},Sa.createElement(Bp,{rtime:this.props.msg.rtTimestamp,bTimeOnly:!1})))))}var o={};return o.width=this.props.speakerWidth+"px",Sa.createElement(Ph,{style:"speaker allow-embedded-newlines",text:["["+Fe(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",e.display_name+":"]},Sa.createElement("div",{className:"ChatSpeaker FriendChatSpeaker SpeakerLineBreak"+(this.props.msg.unAccountID==this.props.chatView.chat.self.accountid?" isCurrentUser":""),style:o},Sa.createElement(Bh,{friend:e,context:this.props.friendRenderContext},Sa.createElement(Ag,{friend:e,className:"speaker"},Sa.createElement("div",{className:"nameAndColon"},Sa.createElement("div",{className:"speakerName",style:o},e.display_name),Sa.createElement("div",{className:"speakerColon"},":")))),Sa.createElement(Ag,{className:"FriendChatTimeStamp",friend:e},Sa.createElement(Bp,{rtime:this.props.msg.rtTimestamp,bTimeOnly:!0}))))},t=si.c([up.observer],t)}(Sa.Component),xg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnUpdate=function(){this.props.onUpdate("ChatMessageSlashEmote "+this.props.msg.UniqueKey())},t.prototype.render=function(){var e=this.props.msg,t=this.props.chatView.chat,i=wd.FriendStore.GetPlayer(e.unAccountID),n=e.strMessage.slice(e.strMessage.search(/\s/g)+1),r=this.props.chatView.IsChatRoom(),o=zm("speaker",i.persona.is_ingame?"ingame":i.persona.is_online?"online":"offline"),a={width:this.props.speakerWidth?this.props.speakerWidth+"px":void 0},s=zm("msg","ChatMsgSlashEmote",r?"ChatRoomSlashEmote":"FriendChatSlashEmote",{isCurrentUser:t.self.accountid===e.unAccountID,ChatMessageErrorSending:e.eErrorSending!=Ya.None});return Sa.createElement("div",{className:s},e.eErrorSending!=Ya.None&&Sa.createElement("div",{className:"ChatMessageErrorSendingAlert"},Object(ua.b)("#Chat_ErrorSending")),Sa.createElement("div",{className:"SpeakerLineBreak"+(e.unAccountID==t.self.accountid?" isCurrentUser":"")},Sa.createElement("div",{className:o},Sa.createElement(Bh,{friend:i,context:{chat:t,chatContext:"message"}},Sa.createElement(Ph,{style:"speaker allow-embedded-newlines",text:["["+Fe(this.props.msg.rtTimestamp,{bIncludeWeekday:!1})+"]",i.display_name+":"]},Sa.createElement("div",{className:"speakerHoverArea"},r&&Sa.createElement("img",{className:"avatar speakerAvatar",src:i.persona.avatar_url,onLoad:this.OnUpdate}),r&&Sa.createElement("div",{className:"speakerStatus"}),Sa.createElement("div",{className:"speakerName",style:a},i.display_name)))),Sa.createElement(Ph,{style:"force-display append-innertext",text:"/me"},Sa.createElement("div",{className:"msgText"},Sa.createElement(wa,{bbcode:n,context:{chat:t,unAccountIDSender:e.unAccountID,rtTimestamp:e.rtTimestamp,onUpdate:this.props.onUpdate},parser:t.GetBBCodeParser()}))),Sa.createElement("div",{className:"speakerTimeStamp"},Sa.createElement(Bp,{rtime:e.rtTimestamp,bTimeOnly:!r})))))},si.c([yn.a],t.prototype,"OnUpdate",null),t=si.c([up.observer],t)}(Sa.Component),zg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(Lg,si.a({},this.props,{extraClassName:"ChatMessageDeleted"}),Sa.createElement("div",{className:"msgText"},Sa.createElement("span",{className:"filteredURL bb_removedlink"},Object(ua.b)("#Chat_MessageDeleted"))))},t=si.c([up.observer],t)}(Sa.Component),Ug=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.msg,t=this.props.friendRenderContext,i=St(e),n=i.parts.length?Ft.apply(void 0,[t,i.strToken].concat(i.parts)):Object(ua.b)(i.strToken);return Sa.createElement(Ph,{style:"server"},Sa.createElement("div",{className:"msg serverMsg"},Sa.createElement("div",{className:"msgText"},n)))},t=si.c([up.observer],t)}(Sa.Component),Vg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),Object.defineProperty(t.prototype,"TradeRequestMsg",{get:function(){return this.props.msg},enumerable:!0,configurable:!0}),t.prototype.AcceptTrade=function(){wd.FriendStore.RespondToTradeRequest(this.TradeRequestMsg.TradeRequestID(),!0)},t.prototype.DeclineTrade=function(){wd.FriendStore.RespondToTradeRequest(this.TradeRequestMsg.TradeRequestID(),!1),this.TradeRequestMsg.MarkAsDeclined()},t.prototype.CancelTradeRequest=function(){wd.FriendStore.CancelTradeRequest(this.TradeRequestMsg.TargetSteamID()),this.TradeRequestMsg.MarkAsCancelled()},t.prototype.ViewAcceptedTrade=function(){wd.FriendStore.OpenTradeWindow(this.TradeRequestMsg.TargetSteamID())},t.prototype.GetLocalizedErrorResponseString=function(){var e=new hi.a(this.TradeRequestMsg.TargetSteamID()).GetAccountID(),t=e!=wd.FriendStore.self.accountid,i=t?this.props.msg.unAccountID:wd.FriendStore.self.accountid;return f(this.TradeRequestMsg.m_ErrorDetails,i,e)},t.prototype.render=function(){var e=this.props.msg,t=e.unAccountID==wd.FriendStore.self.accountid,i={};if(this.props.speakerWidth&&(i.paddingLeft=this.props.speakerWidth+"px"),this.TradeRequestMsg.m_bAccepted)return Sa.createElement("div",{className:"msg",style:i},Sa.createElement("div",{className:"msgText"},Sa.createElement("div",{className:"msg tradeRequest tradeRequestCancelled"},Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",null,Object(ua.b)("#ChatRoom_TradeRequest_Accepted")),this.TradeRequestMsg.m_bPopupBlocked&&Sa.createElement("div",null,Object(ua.b)("#ChatRoom_TradeRequest_Popup_Blocked")),Sa.createElement(Bp,{rtime:e.rtTimestamp,bTimeOnly:!0}),Sa.createElement("div",{className:"tradeRequestButtonContainer"},this.TradeRequestMsg.m_bPopupBlocked&&Sa.createElement("div",{className:"tradeRequestButton",onClick:this.ViewAcceptedTrade},Object(ua.b)("#ChatRoom_TradeRequest_ViewTrade")))))));if(this.TradeRequestMsg.m_bDeclined){var n=new hi.a(this.TradeRequestMsg.TargetSteamID()).GetAccountID(),r=wd.FriendStore.GetPlayer(n),o=r.display_name;return Sa.createElement("div",{className:"msg"+(t?" isCurrentUser":""),style:i},Sa.createElement("div",{className:"msgText"},Sa.createElement("div",{className:"tradeInviteDismissed"},Sa.createElement("div",null,Sa.createElement(Id.Z,null),t&&Object(ua.d)("#ChatRoom_TradeRequest_Recipient_Declined",o),!t&&Object(ua.d)("#ChatRoom_TradeRequest_Self_Declined",o)))))}if(this.TradeRequestMsg.m_bCancelled)return Sa.createElement("div",{className:"msg"+(t?" isCurrentUser":""),style:i},Sa.createElement("div",{className:"msgText"},Sa.createElement("div",{className:"tradeInviteDismissed"},Sa.createElement("div",null,Sa.createElement(Id.Z,null),this.GetLocalizedErrorResponseString()))));if(t){var n=new hi.a(this.TradeRequestMsg.TargetSteamID()).GetAccountID(),a=wd.FriendStore.GetPlayer(n).display_name;return Sa.createElement("div",{className:"msg",style:i},Sa.createElement("div",{className:"msgText"},Sa.createElement("div",{className:"msg ChatMessageInvite gameInviteMsg tradeInviteMsg tradeInviteSender"},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement(Id.Z,null)),Sa.createElement("div",{className:"rightInviteContainer"},Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",{className:"inviteLabel"},Object(ua.d)("#ChatRoom_TradeRequest_Sender_Pending",a))),Sa.createElement("button",{className:"DialogButton Primary",onClick:this.CancelTradeRequest},Object(ua.b)("#Button_Cancel"))))))}var a=wd.FriendStore.GetPlayer(e.unAccountID);return Sa.createElement("div",{className:"msg",style:i},Sa.createElement("div",{className:"msgText"},Sa.createElement("div",{className:"msg ChatMessageInvite gameInviteMsg tradeInviteMsg"},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement(Id.Z,null)),Sa.createElement("div",{className:"rightInviteContainer"},Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",{className:"invitedTimeLabel"},Object(ua.b)("#ChatRoom_GameInvite_InviteTime"),Sa.createElement(Bp,{rtime:e.rtTimestamp,bTimeOnly:!0})),Sa.createElement("div",{className:"inviteLabel"},Object(ua.b)("#ChatRoom_TradeRequest_Recipient_Pending",a.display_name)),Sa.createElement("div",{className:"productName"},"Trade")),Sa.createElement("button",{className:"DialogButton Primary",onClick:this.AcceptTrade},Object(ua.b)("#ChatRoom_TradeRequest_Accept")),Sa.createElement("div",{className:"closeButton",onClick:this.DeclineTrade},Sa.createElement(Id._6,null))))))},si.c([yn.a],t.prototype,"AcceptTrade",null),si.c([yn.a],t.prototype,"DeclineTrade",null),si.c([yn.a],t.prototype,"CancelTradeRequest",null),si.c([yn.a],t.prototype,"ViewAcceptedTrade",null),t=si.c([up.observer],t)}(Sa.Component),jg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(Ph,{style:"invite",text:this.props.msg.strMessage},Sa.createElement("div",{className:"msg"},Sa.createElement("div",{className:"msg voiceChannelInvite"},this.props.msg.strMessage),Sa.createElement("div",{className:"msg voiceChannelInviteClear"})))},t=si.c([up.observer],t)}(Sa.Component),Wg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.componentDidUpdate=function(){this.props.onUpdate("ChatMessageBlocks "+this.props.chatView.GetUniqueID())},t.prototype.renderBlock=function(e){var t,i=this.props,n=this.props.chatView,r=n.chat,o=r.chat_message_blocks,a=!n.IsChatRoom()&&o.time_passes_index,s=n.IsChatRoom()?n.chat.first_unread_msg_time:Xi.c,c=o.message_blocks[e],l=0==e?Xi.c:o.message_blocks[e-1].GetRTimeLastMessage();if(s&&l<=s&&c.GetRTimeLastMessage()>s){var u=c,d=void 0;s>c.GetRTimeFirstMessage()&&(t=c.CreateVirtualSplitOnTimestamp(s),d=t[0],u=t[1],AssertMsg(d.messages.length,"No messages in prefix"));var p=s;return Sa.createElement(Sa.Fragment,{key:c.UniqueKey()},d&&Sa.createElement(Hg,si.a({},i,{block:d,bIsInitialBlock:0===e,bShowTimePasses:e===a})),Sa.createElement(Jg,{rtTimestamp:p,bUnread:!0}),u.messages.length>0&&Sa.createElement(Hg,si.a({},i,{block:u,bIsInitialBlock:!1,bShowTimePasses:!1})))}return Sa.createElement(Hg,si.a({},i,{key:c.UniqueKey(),block:c,bIsInitialBlock:0===e,bShowTimePasses:e===a}))},t.prototype.render=function(){var e=this;return this.props,this.props.chatView.chat.chat_message_blocks.message_blocks.map(function(t,i){return e.renderBlock(i)})},t=si.c([up.observer],t)}(Sa.Component),Hg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.componentDidUpdate=function(){this.props.block.is_last_block&&this.props.onUpdate("ChatMessageBlock "+this.props.block.UniqueKey())},t.prototype.render=function(){var e,t=this.props,i=t.block,n=t.bIsInitialBlock,r=t.bShowTimePasses,o=si.f(t,["block","bIsInitialBlock","bShowTimePasses"]),a=o.friendRenderContext,s=i.messages;i.BIsInvite()?e=Sa.createElement(Gg,{messages:s,friendRenderContext:a}):i.BIsServerMsg()?e=Sa.createElement(Ot,{block:i,friendRenderContext:a}):s.length&&(e=Sa.createElement(qg,si.a({},o,{messages:s,bLastMessageBlock:i.is_last_block})));var c;if(i.is_last_block){var l=wd.GetLocalMidnightInRTime32();i.GetRTimeMidnightBeforeBlock()!=l&&(c=Sa.createElement(Jg,{rtTimestamp:l}))}else i.GetRTimeMidnightBeforeBlock()!=i.GetRTimeMidnightBeforeNextBlock()&&(c=Sa.createElement(Jg,{rtTimestamp:i.GetRTimeMidnightBeforeNextBlock()}));return Sa.createElement(Sa.Fragment,null,n&&s.length>0&&Sa.createElement(wt,{msg:s[0]}),r&&Sa.createElement(Jg,{rtTimestamp:s[0].rtTimestamp,bTimePassesLine:!0}),e,c)},t=si.c([up.observer],t)}(Sa.Component),qg=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bHoveringDelete:!1},i}return si.d(t,e),t.prototype.OnHoverDelete=function(e){this.setState({bHoveringDelete:e})},t.prototype.render=function(){var e=!0,t=!1,i=this.props.bLastMessageBlock,n=this.props.messages[0].unAccountID,r=wd.FriendStore.GetPlayer(n),o=this.props.chatView.IsChatRoom()?this.props.chatView.chat:null,a=o&&o.BCanDeleteMemberMessages(n),s=a&&this.state.bHoveringDelete,c="ChatMessageBlock",l=[];if(o&&r.is_blocked)l.push(Sa.createElement(Mt,{key:"blocked"})),c+=" ChatMessageBlock_BlockedSender";else{this.props.messages.length&&"/me"===this.props.messages[0].GetSlashCommand()&&(e=!1);for(var u=0,d=!1,p=0;p<this.props.messages.length;p++){var m=this.props.messages[p],h=!0;if(!o){var g=Math.floor(m.rtTimestamp/60);u&&g!=u?(h=!1,t=!0):i&&t&&p==this.props.messages.length-1&&(h=!1),u=g}var f={msg:m,key:m.UniqueKey(),chatView:this.props.chatView,hideTimeStamp:h,onUpdate:this.props.onUpdate};m.eDeleteState!=Wa.Deleting&&m.eDeleteState!=Wa.Deleted?(d=!1,"/me"===m.GetSlashCommand()?l.push(Sa.createElement(xg,si.a({},f,{speakerWidth:this.props.speakerWidth}))):m instanceof es?l.push(Sa.createElement(Ph,null,Sa.createElement(Vg,si.a({},f,{speakerWidth:this.props.speakerWidth})))):m instanceof $a?(e=!1,l.push(Sa.createElement(jg,si.a({},f)))):l.push(Sa.createElement(Lg,si.a({},f,{speakerWidth:this.props.speakerWidth})))):(d||l.push(Sa.createElement(zg,si.a({},f,{speakerWidth:this.props.speakerWidth}))),d=!0)}}return i&&(c+=" LastMessageBlock",t&&(c+=" HasInternalTimeStamp")),s&&(c+=" ChatMessageBlock_HighlightDelete"),1!=l.length||o||(c+=" SingletonMsg"),Sa.createElement(Ph,null,Sa.createElement("div",{className:c},e&&Sa.createElement(Pg,{friend:r,chatView:this.props.chatView,msg:this.props.messages[0],friendRenderContext:this.props.friendRenderContext,key:"speaker",speakerWidth:this.props.speakerWidth,onUpdate:this.props.onUpdate}),a&&Sa.createElement(Kg,{chatRoom:o,messages:this.props.messages,onHover:this.OnHoverDelete}),l))},si.c([yn.a],t.prototype,"OnHoverDelete",null),t=si.c([up.observer],t)}(Sa.Component),Kg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnMouseEnter=function(){this.props.onHover(!0)},t.prototype.OnMouseLeave=function(){this.props.onHover(!1)},t.prototype.OnDeleteMessages=function(e){Bt($t(e),this.props.chatRoom,this.props.messages)},t.prototype.render=function(){return Sa.createElement("div",{className:"ChatMessageBlockDelete",onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave,onClick:this.OnDeleteMessages,title:Object(ua.b)("#Chat_Actions_Delete")},Sa.createElement(Id._0,null))},si.c([yn.a],t.prototype,"OnMouseEnter",null),si.c([yn.a],t.prototype,"OnMouseLeave",null),si.c([yn.a],t.prototype,"OnDeleteMessages",null),t}(Sa.Component),Jg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.shouldComponentUpdate=function(e){return e.rtTimestamp!==this.props.rtTimestamp||e.bUnread!==this.props.bUnread||e.bTimePassesLine!==this.props.bTimePassesLine},t.prototype.render=function(){var e,t=wd.RTime32ToDate(this.props.rtTimestamp),i=["msg","timeDivision"];if(this.props.bUnread){var n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};e=Object(ua.b)("#ChatRoom_New_Messages",t.toLocaleDateString(ua.a.GetPreferredLocales(),n)),i.push("new_messages")}else if(this.props.bTimePassesLine)e="",i.push("time_passes");else{var n={weekday:"long",year:"numeric",month:"long",day:"numeric"};e=t.toLocaleDateString(ua.a.GetPreferredLocales(),n)}return Sa.createElement(Ph,{style:"timestamp",text:e},Sa.createElement("div",{className:i.join(" ")},Sa.createElement("div",{className:"preHorizDivider"}),e,Sa.createElement("div",{className:"horizDivider"})))},t}(Sa.Component),Yg=!1,Xg=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bInitialized=!1,i.LOG=Da.create(function(){return i.props.chatView.GetUniqueID()},Yg),i.m_bLoadHistoryInProgress=!1,i.m_bLoadingOperationInProgress=!1,i.m_bHasPendedLoadOlder=!1,i.m_nIgnoreScrollUpUntilTime=0,i.state={speakerLabelWidth:-1},t.isActive&&i.InitForChatView(t.chatView),i}return si.d(t,e),t.prototype.InitForChatView=function(e){e.AddOnChatFrameChangedCallback(this.OnFrameChanged),this.m_bInitialized=!0},t.prototype.GetScrollTop=function(){return this.LOG("scrollTop is",this.m_elHistoryScroll.scrollTop,"returning",Math.ceil(this.m_elHistoryScroll.scrollTop)),Math.ceil(this.m_elHistoryScroll.scrollTop)},t.prototype.GetScrollInfo=function(){if(this.m_elHistoryScroll){var e=this.m_elHistoryScroll,t=e.scrollHeight,i=e.clientHeight;return{scrollTop:this.GetScrollTop(),scrollHeight:t,clientHeight:i}}return{scrollTop:0,scrollHeight:0,clientHeight:0}},t.prototype.LogScrollInfo=function(e){if(Yg){var t=this.GetScrollInfo(),i=t.scrollTop,n=t.scrollHeight,r=t.clientHeight,o=this.props.chatView,a=o.lastScrollTop,s=o.lastScrollHeight,c=o.lastClientHeight;this.LOG(e+": scrolltop "+i+" scrollHeight "+n+" clientHeight "+r+", was scrollTop "+a+" scrollHeight "+s+" clientHeight "+c+" ")}},t.prototype.DumpChildSizes=function(){if(Yg){var e=this.m_elHistoryScroll.children[0],t=e.children.length;if(t<0){var i=0;this.LOG("History has",t,"children");for(var n=0;n<t;n++){var r=e.children[n];i+=r.clientHeight,this.LOG("Child",n,"height",r.clientHeight,r)}this.LOG("Total height:",i)}}},t.prototype.OnHistoryScrollRef=function(e){this.m_elHistoryScroll&&this.m_window&&this.m_window.removeEventListener("resize",this.OnResize),this.m_elHistoryScroll=e,e&&(this.m_window=e.ownerDocument.defaultView,this.m_window.addEventListener("resize",this.OnResize))},t.prototype.OnScrollEvent=function(e){this.LogScrollInfo("*** OnScrollEvent"),this.OnScroll()},t.prototype.OnScroll=function(){var e=this.props.chatView,t=this.GetScrollInfo(),i=t.scrollTop,n=t.scrollHeight,r=t.clientHeight,o=e.lastScrollTop,a=e.lastScrollHeight,s=e.lastClientHeight;if(this.LogScrollInfo("OnScroll"),0==r)return void this.LOG("Onscroll zero clientHeight, ignoring");var c=n-i<=r,l=a-o<=s;AssertMsg(l==e.is_scrolled_to_bottom,e.GetUniqueID()+": computed and stored at bottom don't match"),this.LOG("bAtBottom",c,"bWasAtBottom",l);var u=i;l&&o-u==1&&(this.LOG("*** Scroll position off by one while pinned, ignoring and setting scrollTop to",o),u=o),c||l&&n!=a||u<o&&l&&Date.now()<this.m_nIgnoreScrollUpUntilTime?(this.LogScrollInfo("At bottom"),u<o&&l&&Date.now()<this.m_nIgnoreScrollUpUntilTime&&this.LOG("**** IGNORING APPARENT SCROLL UP WHILE PINNED TO BOTTOM IN LAYOUT"),u=n-r,AssertMsg(u>=0,e.GetUniqueID()+": Onscroll client height bigger than scroll height"),e.is_scrolled_to_bottom=!0,u!=i&&(this.LOG("Setting scrollTop to",u),this.m_elHistoryScroll.scrollTop=u)):r<s&&l?(this.LogScrollInfo("Shrinking window while pinned to bottom"),u=n-r,e.is_scrolled_to_bottom=!0,u!=i&&(this.LOG("Setting scrollTop to",u),this.m_elHistoryScroll.scrollTop=u)):u<o?(this.LogScrollInfo("Detected scroll up"),e.is_scrolled_to_bottom=c):u!=o&&(this.LogScrollInfo("Detected scroll down but not to bottom"),e.is_scrolled_to_bottom=!1),e.lastScrollTop=u,e.lastScrollHeight=n,e.lastClientHeight=r;var d=!(e.is_scrolled_to_bottom==e.lastScrollHeight-e.lastScrollTop<=e.lastClientHeight);d&&(AssertMsg(!d,e.GetUniqueID()+": setting mismatched computed and stored"),this.LOG(e.lastScrollTop,e.lastScrollHeight,e.lastClientHeight,e.is_scrolled_to_bottom)),u<10&&this.LoadOlderMessages()},t.prototype.ScrollToBottom=function(){var e=this.GetScrollInfo(),t=e.scrollHeight,i=e.clientHeight;this.LogScrollInfo("ScrollToBottom");var n=t-i;AssertMsg(n>=0,this.props.chatView.GetUniqueID()+": ScrollToBottom client height bigger than scroll height"),this.m_animation&&this.m_animation.Cancel(),this.m_animation=new xd(this.m_elHistoryScroll,{scrollTop:n},{msDuration:300,timing:"sine",onComplete:function(){}}),this.m_animation.Start()},t.prototype.LoadOlderMessages=function(){var e=this,t=this.props.chatView,i=t.chat;if(i.IsMoreHistoryAvailable()){if(this.m_bLoadingOperationInProgress)return this.LOG("noting pended load"),void(this.m_bHasPendedLoadOlder=!0);var n=function(){return i.LoadMoreHistory().then(function(i){var r=e.GetScrollInfo().scrollHeight,o=t.lastScrollTop,a=t.lastScrollHeight,s=o+r-a;return e.LogScrollInfo("LoadOlderMessags"),e.m_elHistoryScroll.scrollTop=s,e.m_bHasPendedLoadOlder?(e.LOG("LoadOlderMessages starting pended"),e.m_bHasPendedLoadOlder=!1,n()):(e.m_bLoadingOperationInProgress=!1,i)})};this.LOG("LoadOlderMessages starting"),this.m_bLoadHistoryInProgress=!0,this.m_bLoadingOperationInProgress=!0,this.DoAndDelay(this.m_window,n,500).then(function(t){e.LOG("loading over"),e.m_bLoadHistoryInProgress=!1})}},t.prototype.DoAndDelay=function(e,t,i){var n=performance.now();return t().then(function(t){var r=performance.now()-n;return r<i?new Promise(function(n){return e.setTimeout(n.bind(null,t),i-r)}):t})},t.prototype.Focus=function(){this.m_elHistoryScroll&&this.m_elHistoryScroll.focus()},t.prototype.componentDidMount=function(){if(this.LOG("ComponentDidMount"),this.m_elHistoryScroll&&this.props.chatView.is_scrolled_to_bottom){var e=this.props.chatView,t=this.GetScrollInfo(),i=t.scrollHeight,n=t.clientHeight;e.lastScrollTop=i-n,e.lastScrollHeight=i,e.lastClientHeight=n,this.m_elHistoryScroll.scrollTop=e.lastScrollTop,AssertMsg(e.is_scrolled_to_bottom==e.lastScrollHeight-e.lastScrollTop<=e.lastClientHeight,e.GetUniqueID()+": setting mismatched computed and stored")}},t.prototype.componentDidUpdate=function(){var e=this.props.chatView,t=this.GetScrollInfo(),i=t.scrollTop,n=t.scrollHeight,r=t.clientHeight,o=e.lastScrollTop,a=e.lastScrollHeight;if(0==r)return void this.LOG("componentDidUpdate clientHeight == 0, ignoring");var s=i;n==a?s=o:n-i<=r&&(s=n-r),this.LogScrollInfo("componentDidUpdate"),this.DelayedScrollTo(s)},t.prototype.componentWillUnmount=function(){this.m_window&&(this.m_window.removeEventListener("resize",this.OnResize),this.m_window=void 0),this.props.chatView.RemoveOnChatFrameChangedCallback(this.OnFrameChanged)},t.prototype.componentWillReceiveProps=function(e){e.chatView!=this.props.chatView&&(this.props.chatView.RemoveOnChatFrameChangedCallback(this.OnFrameChanged),this.m_bInitialized=!1),!this.m_bInitialized&&e.isActive&&this.InitForChatView(e.chatView)},t.prototype.GetFriendRenderContext=function(){return this.m_FriendRenderContext&&this.m_FriendRenderContext.chat==this.props.chatView.chat||(this.m_FriendRenderContext={chatContext:"message",chat:this.props.chatView.chat}),this.m_FriendRenderContext},t.prototype.OnFrameChanged=function(){var e=this.props.chatView,t=this.GetScrollInfo(),i=t.scrollHeight,n=t.clientHeight,r=e.lastScrollTop,o=e.lastScrollHeight,a=e.lastClientHeight;this.LogScrollInfo("OnFrameChanged"),this.m_nIgnoreScrollUpUntilTime=Date.now()+300;var s;e.is_scrolled_to_bottom?(this.LOG("OnFrameChanged scrolling to bottom"),s=i-n):(this.LOG("OnFrameChanged preserving bottom"),s=r+a+i-o-n),this.LOG("OnFrameChanged setting scrollTop to",s),this.DelayedScrollTo(s)},t.prototype.DelayedScrollTo=function(e){var t=this;this.LOG("DelayedScrollTo",e),this.m_elHistoryScroll.scrollTop=e,this.m_window.setTimeout(function(){t.LOG("DelayedOnScroll firing",e),t.OnScroll()},30)},t.prototype.OnUpdate=function(e){var t=this.props.chatView,i=this.GetScrollInfo(),n=i.scrollHeight,r=i.clientHeight;if(this.LogScrollInfo("OnUpdate for "+e),this.LOG("Scrolled to bottom is",t.is_scrolled_to_bottom),0==n)this.LOG("OnUpdate zero scroll height");else if(t.is_scrolled_to_bottom){this.LogScrollInfo("OnUpdate currently scrolled to bottom");var o=n-r;this.DelayedScrollTo(o)}else if(t.chat.BIsPrepend){t.chat.ResetPrepended();var a=t.lastScrollTop,s=t.lastScrollHeight,c=t.lastClientHeight;this.LogScrollInfo("OnUpdate prepended messages");var o=a+c+n-s-r;this.DelayedScrollTo(o)}else this.LogScrollInfo("OnUpdate content updated, doing nothing")},t.prototype.OnResize=function(){var e=this.GetScrollInfo(),t=e.scrollTop,i=e.scrollHeight,n=e.clientHeight;this.LogScrollInfo("OnResize");var r=t;i-t<=n&&(r=i-n),this.DelayedScrollTo(r)},t.prototype.Swallow=function(e){e.stopPropagation(),e.preventDefault()},t.prototype.render=function(){if(!this.m_bInitialized)return null;var e=this.props,t=e.chatView,i=e.speakerLabelWidth,n=e.blockInteraction,r=t.chat,o=this.GetFriendRenderContext(),a=i&&Math.max(Math.min(i,120),50);this.LOG("Render"),r.LoadChatLogs();var s=null;if(r instanceof Xc){var c="currentTextChannelName";r.IsDefaultRoomForGroup()&&(c+=" DefaultChatRoom"),s=Sa.createElement("div",{className:c},"#",r.name)}var l=wd.SettingsStore.FriendsSettings.nChatFontSize,u="ChatHistoryContainer";return l==fd.k_EChatFontSizeSmall?u+=" smallChatFont":l==fd.k_EChatFontSizeLarge&&(u+=" largeChatFont"),Sa.createElement("div",{className:u},n&&Sa.createElement("div",{className:"interactionBlocker",onClick:this.Swallow}),s,Sa.createElement("div",{className:"friendsListInsetShadowCtn"},Sa.createElement("div",{className:"friendListInsetShadowTop"})),Sa.createElement(Zg,{chatHistory:this,chatView:t}),Sa.createElement("div",{className:"chatHistoryScroll",ref:this.OnHistoryScrollRef,onScroll:this.OnScrollEvent,tabIndex:0},Sa.createElement("div",{className:"chatHistory"},Sa.createElement(Wg,{chatView:t,friendRenderContext:o,onUpdate:this.OnUpdate,speakerWidth:a}),Sa.createElement("div",{className:"disconnectBlocker"}))),Sa.createElement(hf,{chatView:t}),Sa.createElement(Qg,{chatView:t,action:this.ScrollToBottom}),Sa.createElement("div",{className:"friendsListInsetShadowCtn"},Sa.createElement("div",{className:"friendListInsetShadowBottom"})))},si.c([_i.observable],t.prototype,"m_bLoadHistoryInProgress",void 0),si.c([yn.a],t.prototype,"DumpChildSizes",null),si.c([yn.a],t.prototype,"OnHistoryScrollRef",null),si.c([yn.a],t.prototype,"OnScrollEvent",null),si.c([yn.a],t.prototype,"OnScroll",null),si.c([yn.a],t.prototype,"ScrollToBottom",null),si.c([yn.a],t.prototype,"LoadOlderMessages",null),si.c([yn.a],t.prototype,"OnFrameChanged",null),si.c([yn.a],t.prototype,"OnUpdate",null),si.c([yn.a],t.prototype,"OnResize",null),si.c([yn.a],t.prototype,"Swallow",null),t=si.c([up.observer],t)}(Sa.Component),Zg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e="LoadingOlderMessages";return this.props.chatHistory.m_bLoadHistoryInProgress||(e+=" Hidden"),Sa.createElement("div",{className:e},Sa.createElement("span",null,Object(ua.b)("#Chat_Loading")))},t=si.c([up.observer],t)}(Sa.Component),Qg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props,t=e.chatView,i=e.action,n="ScrollToBottomButton";t.is_scrolled_to_bottom&&(n+=" Hidden");var r=Object(ua.b)("#Chat_ScrollToBottom");return t.chat.unread_message_count>0&&(r=Object(ua.c)("#Chat_UnreadMessages",t.chat.unread_message_count),n+=" UnreadMessages"),Sa.createElement("div",{className:n,onClick:i},Sa.createElement("span",null,r))},t=si.c([up.observer],t)}(Sa.Component),$g=function(e){function t(t){var i=e.call(this,t)||this;return i.m_keyEventListener="keydown",i.macUserAgentStrings=/(MacIntel|Macintosh|Mac OS X)/,i.linuxUserAgentStrings=/(Linux|X11)/,-1==navigator.userAgent.search(i.macUserAgentStrings)&&-1==navigator.userAgent.search(i.linuxUserAgentStrings)||(i.m_keyEventListener="keyup"),i.props.popup&&i.props.popup.addEventListener(i.m_keyEventListener,i.OnHTMLKeyEvent),i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.props.popup&&this.props.popup.removeEventListener(this.m_keyEventListener,this.OnHTMLKeyEvent)},t.prototype.OnCopy=function(e){if(this.props.popup){var t=this.props.popup.getSelection();if(0!=t.rangeCount){for(var i="",n="",r=!1,o=t.getRangeAt(0).cloneContents(),a=o.querySelector("[data-activechat=true]"),s=(a||o).querySelectorAll("[data-copytext]"),c=0;c<s.length;++c){var l=s[c];if(!(c+1<s.length&&Object(Ad.d)(l,s[c+1]))){var u=l.tagName.toLowerCase(),d=l.getAttribute("data-copystyle")||"msg",p=d.includes("block"),m=d.includes("timestamp"),h=d.includes("server"),g=d.includes("invite"),f=d.includes("emote"),_=d.includes("no-prefix"),y=d.includes("no-suffix"),v=d.includes("allow-embedded-newlines"),b=d.includes("block-continue"),C=d.includes("force-display"),S=d.includes("prepend-innertext"),M=d.includes("append-innertext"),F=d.includes("prepend-newline"),w=d.includes("append-newline"),B=d.includes("speaker");if(!C){var O=null!=u.match(/img|iframe/),I=null!=l.querySelector("img,iframe");if(!l.innerText&&!O&&!I)continue}B&&(r=!0);var R="",E="\n";m||B||h||g||f?(0!=i.length&&(R+="\n"),(h||g)&&(R+="\t\t")):(r&&(R+="\t"),n.includes("msg")&&p&&(F=!0),n.includes("block")&&!b&&(F=!0)),_&&(R=""),y&&(E="");var T=l.getAttribute("data-copytext");0==T.length?T=l.innerText:S&&l.innerText.length>0?T=l.innerText+(d.includes("-with-newline")?"\n":" ")+T:M&&l.innerText.length>0&&(T+=(d.includes("-with-newline")?"\n":" ")+l.innerText),0!=T.length&&(F&&(i+="\n"),i+=R+(v?T:T.replace(/\n/g,E+R))+E,w&&(i+="\n")),n=d}}0!=i.length&&("Win32"===this.props.popup.navigator.platform&&(i=i.replace(/\n/g,"\r\n")),e.clipboardData.setData("text",i),e.preventDefault())}}},t.prototype.OnChatTabRef=function(e){this.m_refChatTabs=e},t.prototype.OnDragEnter=function(e){if(AssertMsg(e&&("chattab"==e.type||"friend"==e.type||"chatroomgroup"==e.type),"Invalid data type passed to MultiChatDialog.OnDragEnter",e.type),"chattab"==e.type){var t=this.props.tabs,i=e;(i.tabSet!=t||t.tabCount>1)&&(t.Focus(),this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()!=i.tab&&this.m_refChatTabs.SetDragTab(i.tab))}return!0},t.prototype.OnDragLeave=function(){this.m_refChatTabs&&this.m_refChatTabs.SetDragTab(void 0)},t.prototype.OnDragOver=function(e){this.m_refChatTabs&&this.m_refChatTabs.UpdateDragOffset(e)},t.prototype.OnDrop=function(e,t){if(AssertMsg(e&&("chattab"==e.type||"friend"==e.type||"chatroomgroup"==e.type),"Invalid data type passed to MultiChatDialog.OnDrop",e.type),"chattab"==e.type){var i=e,n=-1;this.m_refChatTabs&&(n=this.m_refChatTabs.state.iDragIndex),gy.DragDropManager.SetDropConsumed(),i.tabSet!=this.props.tabs&&(i.tabSet.RemoveTab(i.tab),this.props.tabs.AddTab(i.tab),gy.DragDropManager.EndDrag()),-1!=n&&this.props.tabs.MoveTabToIndex(i.tab,n),this.props.tabs.ActivateTab(i.tab),this.setState({tabDrag:void 0})}else if("friend"==e.type){gy.DragDropManager.SetDropConsumed();var r=e;r.friend.OpenChatDialog(Xt(this,t))}else if("chatroomgroup"==e.type){gy.DragDropManager.SetDropConsumed();var o=e;wd.UIStore.ShowAndOrActivateChatRoomGroup(Xt(this),o.group,!0)}},t.prototype.OnHTMLKeyEvent=function(e){if(ai.a.IN_CLIENT&&e.ctrlKey&&!e.altKey){if(!e.shiftKey&&9==e.keyCode||34==e.keyCode)this.props.tabs.ActivateNextTab();else if(9==e.keyCode||33==e.keyCode)this.props.tabs.ActivatePreviousTab();else{if("W"!=e.key&&"w"!=e.key)return;this.props.tabs.RemoveTab(this.props.tabs.activeTab)}return e.preventDefault(),void e.stopPropagation()}},t.prototype.OnKeyDown=function(e){var t=this.props.tabs.activeTab;if(t&&!(e.ctrlKey||e.altKey||e.metaKey||e.key.length>1)){var i=e.target,n=i&&i.tagName?i.tagName.toLowerCase():"";"input"!=n&&"select"!=n&&"textarea"!=n&&t.GetChatView().FocusTextInput()}},t.prototype.render=function(){var e=this,t=this.props.tabs.activeTab;this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()&&(t=this.m_refChatTabs.GetDragTab());var i=this.props.tabs.tabs.slice();this.m_refChatTabs&&this.m_refChatTabs.GetDragTab()&&-1==i.indexOf(this.m_refChatTabs.GetDragTab())&&i.push(this.m_refChatTabs.GetDragTab()),i.sort(function(e,t){return e.GetUniqueID()<t.GetUniqueID()?1:-1});var n=i.map(function(i){var n=null,r=i instanceof tl&&i,o=i instanceof Jl;return n=r?Sa.createElement(af,{groupView:r,isActive:i==t,popup:e.props.popup,showWindowControls:!1}):o&&IsFeatureBroadcastEnabled()?Sa.createElement(lf,{broadcastView:i,isActive:i==t,popup:e.props.popup,showWindowControls:!1}):Sa.createElement(nf,{chatView:i.GetChatView(),isActive:i==t,popup:e.props.popup,showWindowControls:!1}),Sa.createElement(mp,{key:i.GetUniqueID()},n)});return Sa.createElement(lp,{className:"multiChatDialog",rgAcceptedTypes:["chattab","friend","chatroomgroup"],fnDragEnter:this.OnDragEnter,fnDragOver:this.OnDragOver,fnDragLeave:this.OnDragLeave,fnDrop:this.OnDrop,onKeyDown:this.OnKeyDown,onCopy:this.OnCopy,tabIndex:0},Sa.createElement(tg,{tabSet:this.props.tabs,popup:this.props.popup,activeTab:t,ref:this.OnChatTabRef,ResponsiveWindowState:this.props.ResponsiveWindowState,showOpenFriendsList:this.props.showOpenFriendsList}),Sa.createElement("div",{className:"chatDialogs"},0==n.length&&Sa.createElement("div",{className:"emptyChatDialogs"},Object(ua.b)("#Chat_EmptyDialogsWindowMsg")),n))},si.c([yn.a],t.prototype,"OnCopy",null),si.c([yn.a],t.prototype,"OnChatTabRef",null),si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDrop",null),si.c([yn.a],t.prototype,"OnHTMLKeyEvent",null),si.c([yn.a],t.prototype,"OnKeyDown",null),t=si.c([up.observer],t)}(Sa.Component),ef=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.InitiateVoiceChat=function(){var e=this.props.chatView.chat.accountid_partner;wd.VoiceStore.InitiateFriendChat(e)},t.prototype.VoidOnClick=function(){},t.prototype.EndVoiceChat=function(){wd.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==this.props.chatView.chat.accountid_partner&&wd.VoiceStore.OnUserEndVoiceChat()},t.prototype.OnCloseClick=function(){wd.VoiceStore.GetActiveOneOnOneVoiceChatAccountID()==this.props.chatView.chat.accountid_partner?wd.VoiceStore.OnUserEndVoiceChat():wd.VoiceStore.OnRejectOneOnOneVoiceChatForPartner(this.props.chatView.chat.accountid_partner)},t.prototype.render=function(){var e=wd.VoiceStore.BInitiatedOneOnOneChat(this.props.chatView.chat.accountid_partner),t=wd.CMInterface.steamid.GetAccountID(),i=this.props.chatView.chat.accountid_partner,n=wd.FriendStore.GetPlayer(t),r=wd.VoiceStore.BSelfHasAcceptedOrInitiatedOneOnOneChat(i),o=wd.VoiceStore.BSelfHadPreviouslyJoinedOneOnOneChat(i),a=this.props.chatView.chat.chat_partner,s=wd.VoiceStore.BPartnerHasAcceptedOrInitiatedOneOnOneChat(i),c=!r&&wd.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(a.accountid),l=void 0;l=e||r?Sa.createElement(Bd,{key:t,classNames:"friend-anim",timeout:320},Sa.createElement(Oh,{friend:n,key:t,showVoiceLevel:!0,context:{chat:this.props.chatView.chat},listStatusIndicator:Sa.createElement("div",{className:"connectionSpinner"})})):Sa.createElement(Bd,{key:t,classNames:"friend-anim",timeout:320},Sa.createElement("div",{className:"friend emptyFriend",onClick:!r&&this.InitiateVoiceChat},Sa.createElement("div",{className:"avatarHolder"},Sa.createElement("img",{className:"avatar",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",draggable:!1}))));var u=new Array;e&&u.push(l),s||c?u.push(Sa.createElement(Bd,{key:i,classNames:"friend-anim",timeout:320},Sa.createElement(Oh,{friend:a,key:i,showVoiceLevel:!0,context:{chat:this.props.chatView.chat},listStatusIndicator:Sa.createElement("div",{className:"connectionSpinner"})}))):u.push(Sa.createElement(Bd,{key:i,classNames:"friend-anim",timeout:320},Sa.createElement("div",{className:"friend emptyFriend",onClick:r?this.VoidOnClick:this.InitiateVoiceChat},Sa.createElement("div",{className:"avatarHolder "},Sa.createElement("img",{className:"avatar",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",draggable:!1}))))),e||u.push(l);var d=void 0;d=r&&s?Sa.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.EndVoiceChat},Object(ua.b)("#Voice_StopTalking")):r&&!s?Sa.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.EndVoiceChat},Object(ua.b)("#Voice_EndVoice")):Sa.createElement("button",{className:"inviteButton inviteButtonJoinVoice",onClick:this.InitiateVoiceChat},Object(ua.b)("#Voice_StartTalking"));var p="",m="OneOnOneVoiceRoomControls",h=!1;r&&!s?(p=Object(ua.b)("#Voice_WaitingForFriendToJoin",a.display_name),m+=" WaitingForPartner"):s&&!r?(o?p=Object(ua.b)("#Voice_ChannelRejoinAvailable",a.display_name):(p=Object(ua.b)("#Voice_ChannelAvailable",a.display_name),m+=" WaitingForYouFirstTime"),m+=" WaitingForYou"):(p=Object(ua.b)("#Voice_ChannelActive",a.display_name),m+=" OneOnOneVoiceActive",h=!0);var g=Sa.createElement("div",{className:"OneOnOneVoiceStatusLabel"},p);return Sa.createElement("div",{className:m},Sa.createElement("div",{className:"VoiceToggleIconCtn"},Sa.createElement(Id._3,null),Sa.createElement("div",{className:"Sonar"},Sa.createElement("div",{className:"SonarCircle"}))),Sa.createElement("div",{className:"OneOnOneVoiceMembers"},d,u,g),!h&&Sa.createElement("div",{className:"OneOnOneVoiceClose",onClick:this.OnCloseClick,title:r?Object(ua.b)("#Voice_EndVoice"):Object(ua.b)("#Tooltip_DismissVoice")},Sa.createElement(Id._6,null)))},si.c([yn.a],t.prototype,"InitiateVoiceChat",null),si.c([yn.a],t.prototype,"VoidOnClick",null),si.c([yn.a],t.prototype,"EndVoiceChat",null),si.c([yn.a],t.prototype,"OnCloseClick",null),t=si.c([up.observer],t)}(Sa.Component),tf=function(e){function t(t){var i=e.call(this,t)||this;return i.invitee=i.props.invitee,i}return si.d(t,e),t.prototype.AddMoreFriends=function(e){var t=[],i=e.currentTarget.ownerDocument.defaultView;t.push(this.invitee.accountid),this.props.invitedto instanceof Nc?it(Xt(this,e),i,this.props.chatview,!0,t):this.props.invitedto instanceof el?Ue(Xt(this,e),i,this.props.invitedto,void 0,!0,t):this.props.invitedto instanceof Xc&&ze(Xt(this,e),i,this.props.invitedto.GetGroup(),this.props.invitedto,t),this.props.closeModal()},t.prototype.Cancel=function(){this.props.closeModal()},t.prototype.componentDidMount=function(){var e=On.findDOMNode(this);if(e){var t=e.querySelector("button[type=submit]");t&&t.focus()}},t.prototype.OnInviteClicked=function(e){var t=e.currentTarget.ownerDocument.defaultView;if(this.props.invitedto instanceof Nc){this.invitedToPlayer=this.props.invitedto;var i=[];i.push(this.invitedToPlayer.persona.m_steamid.ConvertTo64BitString()),i.push(this.invitee.persona.m_steamid.ConvertTo64BitString()),nt(t,this.props.chatview,i)}else if(this.props.invitedto instanceof el)this.invitedToGroup=this.props.invitedto,this.invitedToGroup.InviteFriend(this.invitee.accountid);else if(this.props.invitedto instanceof Xc){var i=[];i.push(this.invitee.accountid),this.invitedToChatRoom=this.props.invitedto,this.invitedToChatRoom.GetGroup().InviteFriend(this.invitee.accountid,this.invitedToChatRoom)}this.props.closeModal()},t.prototype.render=function(){var e,t,i,n=this.props.invitee,r=wd.FriendStore.self,o=!1;this.props.invitedto instanceof Nc?e=this.props.invitedto:this.props.invitedto instanceof el?t=this.props.invitedto:this.props.invitedto instanceof Xc&&(i=this.props.invitedto);var a,s,c=!n.is_in_beta,l=e&&!e.is_in_beta,u="#Chat_Actions_DropGroupInvite_Confirm",d=!1;t?(t.BIsUserGroupMember(n)&&(u="#Chat_Actions_DropGroupInvite_Member_Confirm"),o=!!t.BIsClanChatRoom()&&wd.FriendStore.ClanStore.GetClan(t.GetClanID()).BIsOGG(),a=t.name,s=Sa.createElement(Jm,{group:t,name:t.name}),d=t.BIsUserGroupMember(n)):e?(u="#Chat_Actions_DropGroupInvite_1v2_Confirm",a=e.display_name,s=Sa.createElement("div",{className:"displayRow"},Sa.createElement("div",{className:"dropGroupInviteDialog_Friend"},Sa.createElement("img",{src:r.persona.avatar_url_medium})),Sa.createElement("div",{className:"dropGroupInviteDialog_Friend"},Sa.createElement("img",{src:e.persona.avatar_url_medium})))):i&&(u="#Chat_Actions_DropVoiceInvite_Confirm",a=i.name,s=Sa.createElement("div",{className:"displayRow"},Sa.createElement(Id._3,null)));var p=null,m=!0;return wd.IsInBeta()&&(m=!c&&!l,l&&c?p=Sa.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(ua.b)("#Chat_InviteFriend_Unavailable_Short_NoBetas")):c?p=Sa.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(ua.d)("#Chat_InviteFriend_Unavailable_Short",Sa.createElement("span",{className:"whiteText"},n.display_name))):l&&(p=Sa.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(ua.d)("#Chat_InviteFriend_Unavailable_Short_InvitedTo",Sa.createElement("span",{className:"whiteText"},e.display_name))))),Sa.createElement(pe,{onEscKeypress:this.Cancel},Sa.createElement(ne,{classNameContent:"GenericConfirmDialog",onSubmit:this.OnInviteClicked,bCenterVertically:!0},Sa.createElement(Ud,null,i?Object(ua.b)("#Chat_Actions_InviteFriend_VoiceChat"):Object(ua.b)("#Chat_Actions_DropGroupInvite_Title")),Sa.createElement(Hd,null,Sa.createElement("div",{className:"dropGroupInviteDialog displayColumn"+(t||i?" groupInviteHeight":"")},m&&Sa.createElement("span",{className:"dropGroupInviteDialog_Desc"},Object(ua.d)(u,Sa.createElement("span",{className:"highlight"},n.display_name),Sa.createElement("span",{className:"highlight"},a),e&&Sa.createElement("span",{className:"highlight"},Object(ua.b)("#Chat_You")))),p,Sa.createElement("div",{className:"dropGroupInviteDialog_Graphic"+(o?" isOGGGroup":"")},Sa.createElement("div",{className:"dropGroupInviteDialog_Friend"},Sa.createElement("img",{src:n.persona.avatar_url_medium})),m?Sa.createElement("div",{className:"movingArrow"},Sa.createElement(Id.b,{angle:90})):Sa.createElement("div",{className:"staticX"},Sa.createElement(Id._6,null)),s,Sa.createElement("div",{className:"addMoreFriendsButton",onClick:this.AddMoreFriends},Sa.createElement("div",null,Object(ua.b)("#Chat_Actions_AddMoreFriends")),Sa.createElement("div",{className:"ExpandArrow"}))))),Sa.createElement(Vd,null,Sa.createElement(Jd,null,Sa.createElement(re,{disabled:c||l,onClick:this.OnInviteClicked},d?Object(ua.b)("#Chat_SendLink"):Object(ua.b)("#Chat_Invite")," "),Sa.createElement(oe,{onClick:this.Cancel},Object(ua.b)("#Button_Cancel"))))))},si.c([yn.a],t.prototype,"AddMoreFriends",null),si.c([yn.a],t.prototype,"Cancel",null),si.c([yn.a],t.prototype,"OnInviteClicked",null),t=si.c([up.observer],t)}(Sa.Component),nf=function(e){function t(t){var i=e.call(this,t)||this;return i.m_fnUnregisterDropComplete=void 0,i.state={dropToInviteFriend:void 0,dropGroupToInviteFriend:void 0,dropClanToInvite:void 0,speakerLabelWidth:0},i}return si.d(t,e),t.prototype.OnDragEnter=function(e,t){if(e?AssertMsg("friend"==e.type||"chatroomgroup"==e.type||"clan"==e.type,"Invalid data type passed to FriendChatDialog.OnDrop"):AssertMsg(t,"Invalid data type passed to FriendChatDialog.OnDrop"),!e)return!0;var i="friend"==e.type?e.friend:void 0;if(i&&i.accountid!==this.props.chatView.chat.accountid_partner)return this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=gy.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropToInviteFriend:i}),!0;var n="chatroomgroup"==e.type?e.group:void 0;if(n)return this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=gy.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropGroupToInviteFriend:n}),!0;var r="clan"==e.type?e.clan:void 0;return!r||(this.m_fnUnregisterDropComplete||(this.m_fnUnregisterDropComplete=gy.DragDropManager.RegisterForDropComplete(this.OnDropComplete)),this.setState({dropClanToInvite:r}),!0)},t.prototype.OnDragLeave=function(){(this.state.dropToInviteFriend||this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0,dropGroupToInviteFriend:void 0,dropClanToInvite:void 0}))},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){e?AssertMsg("friend"==e.type||"chatroomgroup"==e.type||"clan"==e.type,"Invalid data type passed to FriendChatDialog.OnDrop"):AssertMsg(0!=t.dataTransfer.files.length,"Invalid data type passed to FriendChatDialog.OnDrop");var i=this.props.chatView;if(e){var n=t.currentTarget.ownerDocument.defaultView,r=i.chat.chat_partner,o="friend"==e.type?e.friend:void 0,a="chatroomgroup"==e.type?e.group:void 0,s="clan"==e.type?e.clan:void 0;if(o){if(r==o)return;this.state.dropToInviteFriend&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0})),gy.DragDropManager.SetDropConsumed(),It({invitee:o,chatview:i,invitedto:r},Xt(this,t),n)}else(a||s)&&((this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(this.m_fnUnregisterDropComplete.Unregister(),this.m_fnUnregisterDropComplete=void 0,this.setState({dropGroupToInviteFriend:void 0,dropClanToInvite:void 0})),gy.DragDropManager.SetDropConsumed(),s&&(a=wd.ChatStore.GetChatRoomGroup(s.GetChatGroupIDIfLoaded())),It({invitee:r,invitedto:a},Xt(this,t),n))}else if(0!=t.dataTransfer.files.length){var c=t.dataTransfer.files[0];i.SetFileToUpload(c)}},t.prototype.OnDropComplete=function(e){!e&&this.state.dropToInviteFriend&&(this.m_fnUnregisterDropComplete=void 0,this.setState({dropToInviteFriend:void 0}))},t.prototype.OnNameWidthChanged=function(e){this.setState({speakerLabelWidth:e})},t.prototype.render=function(){if(!this.props.chatView)return null;var e=this.props.chatView.chat,t=wd.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(e.accountid_partner),i=this.props.chatView.BVoiceActive(),n=e.GetShowNonFriendWarning(),r={};this.props.isActive||(r.display="none");var o;this.state.dropToInviteFriend?o=Sa.createElement(Bd,{key:"inviteDrop",classNames:"inviteDrop-anim",timeout:300},Sa.createElement(pf,{chatView:this.props.chatView,friend:this.state.dropToInviteFriend})):(this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(o=Sa.createElement(Bd,{key:"inviteDrop",classNames:"inviteDrop-anim",timeout:300},Sa.createElement(mf,{chatView:this.props.chatView,group:this.state.dropGroupToInviteFriend,clan:this.state.dropClanToInvite})));var a="chatWindow SingleUserChat";i&&(a+=" VoiceActive",wd.ChatStore.VoiceChat.IsMicMuted()&&(a+=" MicMuted")),t&&(a+=" VoiceRequested"),n&&(a+=" NotAFriendOrApproved");var s="chatBody";return(this.state.dropToInviteFriend||this.state.dropGroupToInviteFriend||this.state.dropClanToInvite)&&(s="chatBody chatRoomActiveDrop"),wd.SettingsStore.FriendsSettings.bCompactFriendsList&&(a+=" compactView"),Sa.createElement(lp,{"data-activechat":this.props.isActive,style:r,className:a,rgAcceptedTypes:[],bAcceptsFiles:!0,fnDrop:this.OnDrop},Sa.createElement("div",{className:"chatHeader"}),this.props.isActive&&Sa.createElement(rf,{chatView:this.props.chatView,onNameWidthChanged:this.OnNameWidthChanged}),Sa.createElement(Od,null,(i||t)&&Sa.createElement(Bd,{key:"OneOnOneVoiceHeader",classNames:"OneOnOneVoice-anim",timeout:300},Sa.createElement("div",null,Sa.createElement(ef,{chatView:this.props.chatView})))),Sa.createElement(lp,{style:r,className:s,rgAcceptedTypes:["friend","chatroomgroup","clan"],bAcceptsFiles:!0,fnDragEnter:this.OnDragEnter,fnDragLeave:this.OnDragLeave,fnDragOver:this.OnDragOver,fnDrop:this.OnDrop},Sa.createElement(Od,null,o),n&&Sa.createElement(df,{chatView:this.props.chatView,friend:e.chat_partner}),Sa.createElement(Xg,{chatView:this.props.chatView,isActive:this.props.isActive,speakerLabelWidth:this.state.speakerLabelWidth,blockInteraction:n}),Sa.createElement(of,{chatView:this.props.chatView}),Sa.createElement("div",{className:"dropTargetBox"})),Sa.createElement(jh,{key:e.unique_id,chatView:this.props.chatView,isActive:this.props.isActive,disabled:n}))},si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDrop",null),si.c([yn.a],t.prototype,"OnDropComplete",null),si.c([yn.a],t.prototype,"OnNameWidthChanged",null),t=si.c([up.observer],t)}(Sa.Component),rf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.SpeakerLabel=function(e){e&&this.props.onNameWidthChanged(e.clientWidth)},t.prototype.render=function(){var e=this.props.chatView.chat,t=wd.SettingsStore.FriendsSettings.nChatFontSize,i="speakerLabelWidthContainer";return t==fd.k_EChatFontSizeSmall?i+=" smallChatFont":t==fd.k_EChatFontSizeLarge&&(i+=" largeChatFont"),e.chat_partner.is_ready&&e.self.is_ready?Sa.createElement("div",{className:i,ref:this.SpeakerLabel},Sa.createElement("div",{className:"nameWidthLabel"},e.self.display_name+":"),Sa.createElement("div",{className:"nameWidthLabel"},e.chat_partner.display_name+":")):null},si.c([yn.a],t.prototype,"SpeakerLabel",null),t=si.c([up.observer],t)}(Sa.Component),of=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.AddFriendClick=function(e){this.ContinueCreateChat(Xt(this,e),$t(e))},t.prototype.AddFriendClickNotInBeta=function(e){return si.b(this,void 0,void 0,function(){var t,i,n;return si.e(this,function(r){switch(r.label){case 0:return t=Xt(this,e),i=$t(e),wd.IsInBeta()?(_e(i,"",Object(ua.b)("#Chat_InviteFriend_Unavailable",this.props.chatView.chat.chat_partner.display_name)),[3,3]):[3,1];case 1:return[4,fe(i,"",Object(ua.b)("#Chat_InviteFriend_Unavailable_Released",this.props.chatView.chat.chat_partner.display_name),Object(ua.b)("#Chat_StillInVoiceDialog_KeepChatting"))];case 2:n=r.sent(),n&&this.ContinueCreateChat(t,i),r.label=3;case 3:return[2]}})})},t.prototype.ContinueCreateChat=function(e,t){it(e,t,this.props.chatView,!0)},t.prototype.render=function(){var e=this.props.chatView.chat.chat_partner;return Sa.createElement("div",{title:Object(ua.b)("#Chat_AddFriend_Hint"),className:"inviteAnotherFriendButton",onClick:e.is_in_beta?this.AddFriendClick:this.AddFriendClickNotInBeta},Sa.createElement(Id.x,null))},si.c([yn.a],t.prototype,"AddFriendClick",null),si.c([yn.a],t.prototype,"AddFriendClickNotInBeta",null),t=si.c([up.observer],t)}(Sa.Component),af=function(e){function t(t){var i=e.call(this,t)||this;return i.m_msWentInactive=0,i.m_bShownTabIsGroupChat=!0,i.m_keyEventListener="keydown",i.m_refBroadcastContainer=Sa.createRef(),i.state={dropToInviteFriend:void 0,bShowBothChats:!1},i.props.popup&&i.props.popup.addEventListener(i.m_keyEventListener,i.OnHTMLKeyEvent),i}return si.d(t,e),t.prototype.OnDragEnter=function(e,t){if(AssertMsg(e&&"friend"==e.type||t,"Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"),e){var i=e;i.friend&&i.sourceContext.group!=this.props.groupView.GetGroup()&&this.setState({dropToInviteFriend:i.friend})}return!0},t.prototype.OnDragLeave=function(){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0})},t.prototype.OnDragOver=function(e){e.dataTransfer.dropEffect="move"},t.prototype.OnDrop=function(e,t){AssertMsg(e&&"friend"==e.type||0!=t.dataTransfer.files.length,"Invalid data type passed to ChatRoomGroupDialog.OnDrop");var i=this.props.groupView.GetChatView();if(e&&"friend"==e.type){var n=e;if(n.friend){this.state.dropToInviteFriend&&this.setState({dropToInviteFriend:void 0}),gy.DragDropManager.SetDropConsumed();var r=t.currentTarget.ownerDocument.defaultView;n.sourceContext.group!=this.props.groupView.GetGroup()&&It({invitee:n.friend,chatview:null,invitedto:this.props.groupView.GetGroup()},Xt(this,t),r)}}else if(0!=t.dataTransfer.files.length){var o=t.dataTransfer.files[0];i.SetFileToUpload(o)}},t.prototype.componentWillReceiveProps=function(e){this.props.isActive&&!e.isActive?this.OnBecameInactive():e.isActive&&this.OnBecameActive()},t.prototype.OnBecameInactive=function(){this.m_msWentInactive=performance.now(),this.m_iIntervalInactive=SetBackgroundTimeout(this.forceUpdate.bind(this),10100),this.m_iIntervalVeryInactive=SetBackgroundTimeout(this.forceUpdate.bind(this),60100)},t.prototype.OnBecameActive=function(){this.m_msWentInactive=0,this.ClearIntervals()},t.prototype.GetTitleBarDragDropProps=function(){var e={rgAcceptedTypes:[]};return e.bAcceptsFiles=!0,e.fnDrop=this.OnDrop,e},t.prototype.GetChatBodyDragDropProps=function(){var e={rgAcceptedTypes:["friend"]};return e.bAcceptsFiles=!0,e.fnDragEnter=this.OnDragEnter,e.fnDragLeave=this.OnDragLeave,e.fnDragOver=this.OnDragOver,e.fnDrop=this.OnDrop,e},t.prototype.ClearIntervals=function(){this.m_iIntervalInactive&&(ClearBackgroundTimeout(this.m_iIntervalInactive),this.m_iIntervalInactive=void 0),this.m_iIntervalVeryInactive&&(ClearBackgroundTimeout(this.m_iIntervalVeryInactive),this.m_iIntervalVeryInactive=void 0)},t.prototype.OnHTMLKeyEvent=function(e){if(ai.a.IN_CLIENT&&this.props.isActive&&e.altKey&&!e.ctrlKey&&!e.shiftKey){var t=this.props.groupView;if(!t)return;38===e.keyCode&&t.SelectPreviousChannel(),40===e.keyCode&&t.SelectNextChannel()}},t.prototype.componentDidMount=function(){(this.props.popup?this.props.popup:window).addEventListener("resize",this.OnLayoutChange)},t.prototype.componentWillUnmount=function(){this.ClearIntervals(),this.props.popup&&this.props.popup.removeEventListener(this.m_keyEventListener,this.OnHTMLKeyEvent),(this.props.popup?this.props.popup:window).removeEventListener("resize",this.OnLayoutChange)},t.prototype.CalculateBroadcastSectionStyles=function(e){if(this.props.groupView.m_bChatHidden)return{width:"100%",height:"100%"};var t=gy.UIDisplayPrefs,i=t.nWatchPartyBroadcastHeightPercentage,n=t.nWatchPartyBroadcastWidthPercentage,r={};if(e){var o=i||66;if(r.height=o+"%",this.m_elMainContent){var a=this.m_elMainContent,s=a.clientWidth,c=a.clientHeight,l=9/16*s+50,u=F(o,1,l/c*100);r.height=u+"%"}}else r.width=n?n+"%":"66%";return r},t.prototype.ShouldShowVerticalBroadcastChat=function(){return void 0!==this.props.groupView.m_bShowVerticalBroadcastChat?this.props.groupView.m_bShowVerticalBroadcastChat:!!this.m_elMainContent&&this.m_elMainContent.clientHeight/this.m_elMainContent.clientWidth>5/7},t.prototype.OnLayoutChange=function(){this.forceUpdate()},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})},t.prototype.HandleMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.m_refBroadcastContainer.current.getBoundingClientRect(),i=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),n=this.ShouldShowVerticalBroadcastChat(),r=n?t.top:t.left,o=n?e.clientY:e.clientX,a=n?i.height:i.width,s=F((o-r)/a*100,1,100),c=n?"nWatchPartyBroadcastHeightPercentage":"nWatchPartyBroadcastWidthPercentage";gy.SetUIDisplayPref(c,s)},t.prototype.UnregisterDragEvents=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})},t.prototype.OnLocalStreamChange=function(e){this.props.groupView.SetLocalBroadcastId(e)},t.prototype.ShowBroadcast=function(){this.props.groupView.ShowBroadcast()},t.prototype.HideChat=function(){this.props.groupView.SetChatHidden(!0)},t.prototype.ShowChat=function(){this.props.groupView.SetChatHidden(!1)},t.prototype.ToggleVerticalBroadcastChat=function(){this.props.groupView.SetVerticalBroadcastChat(!this.ShouldShowVerticalBroadcastChat()),this.props.groupView.SetChatHidden(!1)},t.prototype.SetMainContentRef=function(e){this.m_elMainContent=e,this.OnLayoutChange()},t.prototype.ToggleShowBothChats=function(){this.state.bShowBothChats?this.m_bShownTabIsGroupChat&&this.state.bShowBothChats&&this.props.groupView.SetGlobalBroadcastChatShown(!1):(this.m_bShownTabIsGroupChat=!this.props.groupView.m_bShowGlobalChat,this.props.groupView.SetGlobalBroadcastChatShown(!0)),this.setState({bShowBothChats:!this.state.bShowBothChats})},t.prototype.RenderInnerChatTabs=function(){var e=this.props.groupView,t=e.GetGroup();return Sa.createElement("div",{className:"ChatBodyControls"},Sa.createElement("div",{className:"Close",onClick:this.HideChat,title:Object(ua.b)("#Broadcast_View_HideChat")},Sa.createElement(Id.u,{showChat:!1})),Sa.createElement("div",{className:"InnerChatTabs"},Sa.createElement("div",{className:zm("InnerChatTab",!e.m_bShowGlobalChat&&"Active"),onClick:function(){return e.SetGlobalBroadcastChatShown(!1)}},Sa.createElement(Zp,{group:t}),Sa.createElement(Jm,{group:t,micro:!0}),Sa.createElement("span",{className:"InnerChatTabLabel"},Object(ua.b)("#Broadcast_Chat_GroupChatTab",t.name))),(!this.state.bShowBothChats||this.state.bShowBothChats&&this.ShouldShowVerticalBroadcastChat())&&Sa.createElement("div",{className:zm("InnerChatTab",e.m_bShowGlobalChat&&"Active"),onClick:function(){return e.SetGlobalBroadcastChatShown(!0)}},Sa.createElement(Id.r,null),Sa.createElement("span",{className:"InnerChatTabLabel"},Object(ua.b)("#Broadcast_Chat_PublicChatTab")))),Sa.createElement("div",{className:"showBothTabs",onClick:this.ToggleShowBothChats,title:Object(ua.b)(this.state.bShowBothChats?"#Broadcast_View_ShowSingleChats":"#Broadcast_View_ShowBothChats")},Sa.createElement(Id.R,null)))},t.prototype.render=function(){if(!this.props.groupView||!this.props.groupView.GetChatView())return null;var e=this.props.groupView.GetGroup(),t=this.props.groupView,i=t.GetSelectedChatView(),n=t.GetPopoverChatView(),r=i.chat,o=this.state.bShowBothChats&&t.isBroadcastShown,a=t.m_bShowGlobalChat,s=a&&o||!a&&!o,c=o&&t.isBroadcastShown||!o&&a,l=null;this.state.dropToInviteFriend&&(l=Sa.createElement(Bd,{key:"inviteDrop",classNames:"inviteDrop-anim",timeout:300},Sa.createElement(pf,{chatView:i,friend:this.state.dropToInviteFriend})));var u=!1,d=null,p=this.ShouldShowVerticalBroadcastChat(),m=t.m_bChatHidden;if(IsFeatureBroadcastEnabled())if(e.watching_broadcast_steamid&&t.isBroadcastShown){var h=gy.UIDisplayPrefs,g=(h.nWatchPartyBroadcastHeightPercentage,h.nWatchPartyBroadcastWidthPercentage,this.CalculateBroadcastSectionStyles(p));d=Sa.createElement(Sa.Fragment,null,Sa.createElement(cf,{ref:this.m_refBroadcastContainer,steamID:e.watching_broadcast_steamid.ConvertTo64BitString(),localSteamID:t.m_strLocalBroadcastId,onRequestClose:t.HideBroadcast,onLocalStreamChange:this.OnLocalStreamChange,actions:[Sa.createElement("div",{key:"ChatPosToggle",onClick:this.ToggleVerticalBroadcastChat,title:""+(p?Object(ua.b)("#Broadcast_View_Stack_H"):Object(ua.b)("#Broadcast_View_Stack_V")),className:"BroadcastChatPositionToggle "+(p?"right":"bottom")})],style:g,onTheaterMode:t.ToggleTheaterModeBroadcastChat}),!m&&Sa.createElement("div",{className:"BroadcastChatDivider "+(p?"vertical":"horizontal"),onMouseDown:this.OnGrabberMouseDown}),m&&Sa.createElement(sf,{onClick:this.ShowChat,edge:p?"bottom":"right"})),u=!0}else u=!1;var f=!1,_=!1,y={};if(this.props.isActive)r.LoadChatLogs();else{y.display="none";var v=this.m_msWentInactive?performance.now()-this.m_msWentInactive:6e4;v>=1e4&&(f=!0),v>=6e4&&!d&&(_=!0)}var b="chatWindow MultiUserChat",C="ChatRoomGroupDialog_contents";n&&(C+=" InsetWindowOpen"),o&&(C+=" BothChatsDisplayed"),e.IsNamedGroupChat()&&(b+=" namedGroup");var S="chatBody";this.state.dropToInviteFriend&&(S="chatBody chatRoomActiveDrop"),wd.SettingsStore.FriendsSettings.bCompactFriendsList&&(b+=" compactView"),u&&(b+=" broadcastVisible");var M,F=Sa.createElement(sm,{groupView:this.props.groupView,inactive:f}),w=t.isBroadcastShown&&(!o&&t.m_bShowGlobalChat||m)?null:Sa.createElement(jh,{key:r.unique_id,chatView:t.GetActiveChatView(),isActive:this.props.isActive,disabled:!1}),B=Sa.createElement(lp,si.a({style:y,className:"chatHistoryAndMembers"},this.GetChatBodyDragDropProps()),Sa.createElement(Od,null,l),Sa.createElement("div",{className:"displayColumn fullWidth"},Sa.createElement("div",{className:"displayRow minHeightZero"},Sa.createElement("div",{className:"ChatRoomGroupDialog_history"},Sa.createElement(Xg,{chatView:i,isActive:this.props.isActive}),Sa.createElement(Od,null,Sa.createElement(uf,{groupView:t}))),Sa.createElement("div",{className:"dropTargetBox"}),F),w));if(e.watching_broadcast_steamid&&t.isBroadcastShown){var O=4;ai.a.STEAM_TV&&(O=2);var I=Sa.createElement(Fg,{steamID:e.watching_broadcast_steamid.ConvertTo64BitString(),watchLocation:O,hidden:!t.m_bShowGlobalChat,className:this.state.bDraggingChatGrabber?"avoidEvents":void 0});M=Sa.createElement(Sa.Fragment,null,I)}var R="chatStack "+(p?"displayRow":"displayColumn");return c&&(R+=" GlobalChatVisible"),s&&(R+=" GroupChatVisible"),Sa.createElement(lp,si.a({"data-activechat":this.props.isActive,style:y,className:b},this.GetTitleBarDragDropProps()),!_&&Sa.createElement("div",{className:"chatHeader titleBarContainer"},Sa.createElement("div",{className:"chatHeaderGradient"}),Sa.createElement(Vm,{groupView:t,onBroadcastPreviewClick:this.ShowBroadcast}),Sa.createElement("div",{className:"disconnectBlocker"})),e.readyToRender&&!_&&Sa.createElement("div",{className:C},Sa.createElement(am,{groupView:t,inactive:f}),Sa.createElement("div",{className:"ChatRoomGroup_MainAndChatEntry displayColumn",ref:this.SetMainContentRef},Sa.createElement("div",{className:"ChatRoomGroup_Main_ContentAndMembers displayRow"},Sa.createElement("div",{className:"ChatRoomGroup_Main_Content "+(p?"Vertical":"Horizontal")+" "+(m?"chatHidden":"")},d,(!t.m_bChatHidden||!t.isBroadcastShown)&&Sa.createElement("div",{className:S},t.isBroadcastShown&&this.RenderInnerChatTabs(),Sa.createElement("div",{className:R},B,o&&Sa.createElement("div",{className:"BothChatsSeperator"}),o&&!this.ShouldShowVerticalBroadcastChat()&&Sa.createElement("div",{className:"InnerChatTab",onClick:function(){return t.SetGlobalBroadcastChatShown(!0)}},Sa.createElement(Id.r,null),Sa.createElement("span",{className:"InnerChatTabLabel"},Object(ua.b)("#Broadcast_Chat_PublicChatTab"))),M),!s&&t.isBroadcastShown&&w))))),!e.readyToRender&&!_&&Sa.createElement("div",{className:C},Sa.createElement(_m,{string:Object(ua.b)("#Chat_ChatRoomGroup_Requesting")})))},si.c([yn.a],t.prototype,"OnDragEnter",null),si.c([yn.a],t.prototype,"OnDragLeave",null),si.c([yn.a],t.prototype,"OnDragOver",null),si.c([yn.a],t.prototype,"OnDrop",null),si.c([yn.a],t.prototype,"OnHTMLKeyEvent",null),si.c([yn.a],t.prototype,"ShouldShowVerticalBroadcastChat",null),si.c([yn.a],t.prototype,"OnLayoutChange",null),si.c([yn.a],t.prototype,"OnGrabberMouseDown",null),si.c([yn.a],t.prototype,"HandleMouseMove",null),si.c([yn.a],t.prototype,"UnregisterDragEvents",null),si.c([yn.a],t.prototype,"OnLocalStreamChange",null),si.c([yn.a],t.prototype,"ShowBroadcast",null),si.c([yn.a],t.prototype,"HideChat",null),si.c([yn.a],t.prototype,"ShowChat",null),si.c([yn.a],t.prototype,"ToggleVerticalBroadcastChat",null),si.c([yn.a],t.prototype,"SetMainContentRef",null),si.c([yn.a],t.prototype,"ToggleShowBothChats",null),t=si.c([up.observer],t)}(Sa.Component),sf=function(e){var t=e.onClick,i=e.edge;return Sa.createElement("div",{className:zm("BroadcastChatExpander",i),onClick:t,title:Object(ua.b)("#Broadcast_View_ShowChat")},Sa.createElement(Id.u,{showChat:!0}))},cf=Sa.forwardRef(function(e,t){var i=e.localSteamID,n=e.steamID,r=e.style,o=e.onRequestClose,a=e.actions,s=e.onTheaterMode,c=e.onLocalStreamChange,l=i||n,u=4;return ai.a.STEAM_TV&&(u=2),Sa.createElement("div",{ref:t,style:si.a({display:"flex",flexDirection:"column"},r)},Sa.createElement("div",{className:"BroadcastSection"},Sa.createElement(cg,{key:l,steamID:l,watchLocation:u,onRequestClose:o,actions:a,onTheaterMode:s}),Sa.createElement("div",{className:"videoContainerSizer"})),Sa.createElement("div",{className:"BroadcastDetailsSection"},Sa.createElement(Mg,{steamID:l,onLocalStreamChange:c})))}),lf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.broadcastView;if(!e)return null;var t={};return this.props.isActive||(t.display="none"),Sa.createElement(Og,{style:t,broadcastView:e,popup:this.props.popup})},t=si.c([up.observer],t)}(Sa.Component),uf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnTextChannelCloseClick=function(e){this.props.groupView.ClosePopoverChat()},t.prototype.OnChatHistoryRef=function(e){e&&e.Focus()},t.prototype.render=function(){var e=this.props.groupView.GetPopoverChatView();return e?Sa.createElement(Bd,{key:"quickChat",classNames:"chatWindow-anim",timeout:320},Sa.createElement("div",{className:"VoiceRoomChatHistory"},Sa.createElement("div",{className:"VoiceRoomChatWindow"},Sa.createElement("div",{className:"VoiceRoomChatTitle"},Sa.createElement("div",{className:"VoiceRoomTitleLabels"},Sa.createElement("div",{className:"VoiceChatTextChannelName"},Object(ua.b)("#Chat_Scratch_Pad"))),Sa.createElement("div",{className:"MinimizeTextChat",onClick:this.OnTextChannelCloseClick},Sa.createElement(Id._6,null))),Sa.createElement("div",{className:"VoiceChatTextChannelDesc"},Object(ua.b)("#Chat_Scratch_Pad_Desc")),Sa.createElement(Xg,{chatView:e,isActive:!0,ref:this.OnChatHistoryRef})))):null},si.c([yn.a],t.prototype,"OnTextChannelCloseClick",null),si.c([yn.a],t.prototype,"OnChatHistoryRef",null),t=si.c([up.observer],t)}(Sa.Component),df=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.OnBlock=function(){wd.FriendStore.BlockPlayer(this.props.friend,!1),wd.UIStore.CloseTabByID(this.props.chatView.GetUniqueID())},t.prototype.OnAllow=function(){wd.FriendStore.SetApprovedNonFriendMessages(this.props.friend.accountid)},t.prototype.render=function(){return Sa.createElement("div",{className:"NotAFriendMessage"},Sa.createElement("div",{className:"NotAFriendBody"},Sa.createElement("div",{className:"Exclamation"},Sa.createElement(Id.d,null)),Sa.createElement("div",{className:"Explanation"},Sa.createElement("div",{className:"ExplanationHeader"},Object(ua.b)("#DirectMessageFromNonFriend")),Sa.createElement("div",{className:"ExplanationBody"},Object(ua.b)("#DirectMessageFromNonFriendNote")),Sa.createElement(we,{href:"https://support.steampowered.com/kb_article.php?ref=1266-OAFV-8478",className:"ExplanationMoreInfo"},"More Information")),Sa.createElement("div",{className:"Buttons"},Sa.createElement("button",{className:"NotAFriendActionButton",onClick:this.OnBlock},Object(ua.b)("#NonFriendAction_Block")),Sa.createElement("button",{className:"NotAFriendActionButton",onClick:this.OnAllow},Object(ua.b)("#NonFriendAction_Allow")))))},si.c([yn.a],t.prototype,"OnBlock",null),si.c([yn.a],t.prototype,"OnAllow",null),t=si.c([up.observer],t)}(Sa.Component),pf=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){var e=!1;return this.props.chatView.chat instanceof Xc&&(e=!0),Sa.createElement("div",{className:"chatModalCover inviteDrop"},Sa.createElement(pe,null,Sa.createElement(Ud,null,e?Object(ua.b)("#Chat_DropToInviteGroup"):Object(ua.b)("#Chat_DropToInvite")),Sa.createElement(ie,null,Sa.createElement(Wd,null,Sa.createElement(Oh,{friend:this.props.friend,context:null,avatarQualityFull:!0})))))},t=si.c([up.observer],t)}(Sa.Component),mf=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.render=function(){var e="";return this.props.group?e=this.props.group.name:this.props.clan&&(e=this.props.clan.name),Sa.createElement("div",{className:"chatModalCover inviteDrop DropGroupToInviteFriend"},Sa.createElement(pe,null,Sa.createElement(Ud,null,Object(ua.b)("#Chat_DropGroupToInviteFriend")),Sa.createElement(ie,null,Sa.createElement(Wd,{className:"avatarHolder"},this.props.clan?Sa.createElement(Km,{clan:this.props.clan,large:!0}):Sa.createElement(Jm,{group:this.props.group,large:!0}),Sa.createElement("div",{className:"dropGroupName"},e)))))},t=si.c([up.observer],t)}(Sa.Component),hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=!1;if(!(this.props.chatView.chat instanceof ll))return null;var t=this.props.chatView.chat;return t.is_friend_typing&&(e=!0),Sa.createElement("div",{className:"FriendChatTypingNotification"+(e?" FriendIsTyping":"")},Object(ua.b)("#Friend_Chat_Typing",t.chat_partner.display_name))},t=si.c([up.observer],t)}(Sa.Component),gf=function(e){function t(t){var i=e.call(this,t)||this;return i.m_fnExistingPopupInitializer=void 0,i.BindResizeGrip=i.BindResizeGrip.bind(i),i}return si.d(t,e),t.prototype.BindResizeGrip=function(e){var t=0,i=0;if(e){var n=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;n&&r&&(t=Math.ceil(r.innerWidth-n.left),i=Math.ceil(r.innerHeight-n.top))}var o=this.props.popup;o.SteamClient&&o.SteamClient.Window&&o.SteamClient.Window.SetResizeGrip&&o.SteamClient.Window.SetResizeGrip(t,i)},t.prototype.componentWillUnmount=function(){this.props.popup.SteamClient.Window.SetResizeGrip(0,0)},t.prototype.render=function(){return Sa.createElement("div",{className:"window_resize_grip",ref:this.BindResizeGrip})},t}(Sa.PureComponent),ff=function(e){function t(t){var i=e.call(this,t)||this;return i.m_refTextInput=null,i.state={error:1,strPIN:""},i}return si.d(t,e),t.prototype.componentDidMount=function(){this.m_refTextInput.focus()},t.prototype.BindTextInput=function(e){this.m_refTextInput=e},t.prototype.OnPINInput=function(e){this.setState({strPIN:e.target.value})},t.prototype.onOK=function(e){var t=this;return e.preventDefault(),wd.ParentalStore.Unlock(this.state.strPIN).then(function(e){1!=e&&t.setState({error:e})}),!0},t.prototype.render=function(){var e="";switch(this.state.error){case 1:break;case 25:e=Object(ua.b)("#FamilyView_TooManyAttempts");break;default:e=Object(ua.b)("#FamilyView_BadPIN")}return Sa.createElement("div",null,Sa.createElement("div",{className:"FamilyViewTitle"},Object(ua.b)("#FamilyView_Title")),Sa.createElement("div",{className:"FamilyViewInstructions"},Object(ua.b)("#FamilyView_Unlock_Instructions")),Sa.createElement("form",{onSubmit:this.onOK},Sa.createElement("input",{type:"password",maxLength:4,className:"pinInput",autoComplete:"current-pin",ref:this.BindTextInput,value:this.state.strPIN,onChange:this.OnPINInput}),Sa.createElement("button",{type:"submit"},Object(ua.b)("#Button_OK"))),e&&Sa.createElement("p",{className:"error_text"},e))},si.c([yn.a],t.prototype,"BindTextInput",null),si.c([yn.a],t.prototype,"OnPINInput",null),si.c([yn.a],t.prototype,"onOK",null),t}(Sa.Component),_f=(i("FHUK"),$(Rt)),yf=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return si.d(t,e),t.prototype.GetSavedDimensionsKey=function(){if(this.BIsInOverlay()){var e=wd.UIStore.GetPerContextChatData(this.m_rgParams.target_browser),t=e.screen_info;return"Overlay_"+(t&&t.width&&t.height?t.width+"x"+t.height+"_":"")+this.m_strSavedDimensionsKey}return this.m_strSavedDimensionsKey},t}(dp.b),vf=226,bf=function(e){function t(t,i,n,r){var o=this,a=dp.c.Resizable;r&&(a|=dp.c.Minimized);var s={dimensions:{width:300,height:650},minWidth:vf,minHeight:400,title:Object(ua.b)("#WindowTitle_FriendsList"),html_class:"client_chat_frame fullheight SavedDimensionsPopup",body_class:"fullheight",target_browser:n.m_unPID>0?n:void 0,eCreationFlags:a};return o=e.call(this,"friendslist","PopupFriendsListDimensions",s,!1)||this,o.m_friends=t,o.m_chats=i,gy.m_strLoaderWindowRestoreDetails&&(o.SaveWindowPosition(gy.m_strLoaderWindowRestoreDetails),gy.m_strLoaderWindowRestoreDetails=void 0),o}return si.d(t,e),t.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame");var i=new ly(e),n=this.browser_info||Md,r=wd.UIStore.GetDefaultTabSetForContext(n);this.m_browserContext=n,On.render(Sa.createElement(Cf,{popup:this,friends:this.m_friends,chats:this.m_chats,tabset:r,container:i}),t)},t.prototype.OnResizeComplete=function(t){e.prototype.OnResizeComplete.call(this,t),window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:t},"https://steamloopback.host")},t.prototype.OnClose=function(){e.prototype.OnClose.call(this),window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:this.m_rgParams.strRestoreDetails},"https://steamloopback.host"),wd.OnFriendsListClosed(this.m_browserContext)},t}(yf),Cf=function(e){function t(t){var i=e.call(this,t)||this;i.m_bUsePopups=!1,i.m_nWindowTitleUnreadCycleCount=0,i.m_browserContext=i.props.popup&&i.props.popup.browser_info?i.props.popup.browser_info:Md;var n=wd.UIStore.GetPerContextChatData(i.m_browserContext);return i.m_bUsePopups=n.BUsePopups(),i.m_bUsePopups?i.m_nInlineChatWidth=640:(i.m_nInlineChatWidth=530,i.m_ResponsiveWindowState=wd.UIStore.GetResponsiveWindowState(i.m_browserContext)),i.state={bIsResizingWindow:!1},i}return si.d(t,e),t.prototype.OnWindowResizeEvent=function(e){var t=this,i=this.m_bUsePopups?this.props.popup:null;i&&i.IsMinimized().then(function(e){if(!e){var n=i.window;if(!(n.innerWidth<vf)){var r=n.innerWidth>=t.m_nInlineChatWidth;wd.UIStore.SetFriendsListSingleWindowMode(t.m_browserContext,r)}}})},t.prototype.BindWindowHandlers=function(){var e=this;this.m_popupActionDisposer=Object(_i.autorun)(function(){if(!ai.a.IN_CLIENT){var t=wd.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();t.length&&void 0===e.m_unTimerWindowTitleUnreadCycle?e.m_unTimerWindowTitleUnreadCycle=window.setInterval(function(){e.m_nWindowTitleUnreadCycleCount=(e.m_nWindowTitleUnreadCycleCount+1)%1e3},2e3):t.length||void 0===e.m_unTimerWindowTitleUnreadCycle||(window.clearInterval(e.m_unTimerWindowTitleUnreadCycle),e.m_unTimerWindowTitleUnreadCycle=void 0);var i=1+t.length,n=e.m_nWindowTitleUnreadCycleCount%i;if(n>0){var r=t[n-1];return void(e.props.container.title=Object(ua.b)("#WindowTitle_UnreadMessage",r.name))}}wd.UIStore.BIsFriendsListSingleWindow(e.m_browserContext)&&e.props.tabset.GetTitle()?ai.a.IN_CLIENT?e.props.container.title=Object(ua.b)("#WindowTitle_FriendsList")+" - "+e.props.tabset.GetTitle():e.props.container.title=e.props.tabset.GetTitle():e.props.container.title=Object(ua.b)("#WindowTitle_FriendsList")}),this.m_popupFocusDisposer=this.props.container.OnFocus(function(){wd.UIStore.BIsFriendsListSingleWindow(e.m_browserContext)&&e.props.tabset.OnWindowFocus()})},t.prototype.UnbindWindowHandlers=function(){this.m_popupActionDisposer&&(this.m_popupActionDisposer(),this.m_popupActionDisposer=void 0),this.m_popupFocusDisposer&&(this.m_popupFocusDisposer.unregister(),this.m_popupFocusDisposer=void 0)},t.prototype.componentWillMount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.addEventListener("resize",this.OnWindowResizeEvent),this.BindWindowHandlers()},t.prototype.componentWillUnmount=function(){var e=this.props.popup?this.props.popup.window:window;e&&e.removeEventListener("resize",this.OnWindowResizeEvent),this.UnbindWindowHandlers()},t.prototype.BindFriendsListContainer=function(e){this.m_elFriendsListContainer=e&&e.div},t.prototype.OnGrabberMouseDown=function(e){var t=e.currentTarget.ownerDocument.defaultView;this.setState({bIsResizingWindow:!0}),t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterFriendsListDragEvents)},t.prototype.OnGrabberTouchStart=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("touchmove",this.HandleTouchMove),t.addEventListener("touchend",this.UnregisterFriendsListDragEvents)},t.prototype.HandleTouchMove=function(e){e.touches.length>=1&&this.InternalAdjustFriendsListContainerOnDrag(e.touches[0].clientX)},t.prototype.HandleMouseMove=function(e){this.InternalAdjustFriendsListContainerOnDrag(e.clientX)},t.prototype.InternalAdjustFriendsListContainerOnDrag=function(e){if(this.m_elFriendsListContainer){var t=this.m_elFriendsListContainer.getBoundingClientRect(),i=t.left,n=F(e-i,200,600);gy.SetUIDisplayPref("nFriendsListSingleWindowWidthPx",n)}},t.prototype.UnregisterFriendsListDragEvents=function(e){this.setState({bIsResizingWindow:!1}),e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("touchmove",this.HandleTouchMove),e.view.removeEventListener("mouseup",this.UnregisterFriendsListDragEvents),e.view.removeEventListener("touchend",this.UnregisterFriendsListDragEvents)},t.prototype.render=function(){var e=!0,t=!0,i=wd.UIStore.BIsFriendsListSingleWindow(this.m_browserContext),n=!1,r=!1;if(!i)if(this.m_ResponsiveWindowState){var o=this.m_ResponsiveWindowState.GetActiveView();e=o==ql.FriendsList,t=o==ql.Chat}else t=!1;var a=wd.UIStore.GetTheaterMode(),s="chat_main fullheight",c=null;e&&t?(this.props.tabset.tabCount>0&&(r=!0,n=wd.UIStore.BIsFriendsListCollapsed(this.m_browserContext)),s+=" singlewindow",c=Sa.createElement("div",{className:"singleWindowDivider"+(n?" friendsListCollapsed":""),onMouseDown:this.OnGrabberMouseDown,onTouchStart:this.OnGrabberTouchStart})):e?s+=" responsive_friends":t&&(s+=" responsive_chats"),this.state.bIsResizingWindow&&(s+=" resizingSingleWindow"),a&&(s+=" TheaterMode"),this.props.popup&&this.props.popup.focused&&(s+=" focused"),wd.CMInterface.BDisconnected()&&(s+=" errorDisconnected");var l=this.props.popup&&this.props.popup.window,u=n?{width:0,transition:"width 0.32s ease-in-out, opacity 0.32s ease-in-out"}:{width:gy.UIDisplayPrefs.nFriendsListSingleWindowWidthPx+"px"};return wd.ParentalStore.BIsFriendsBlocked()?ai.a.IN_CLIENT?Sa.createElement("div",{className:s},Sa.createElement(ff,null)):(location.reload(),Sa.createElement("div",null)):Sa.createElement("div",{className:s,onContextMenu:Et},Sa.createElement(mp,null,Sa.createElement(wf,{popup:this.props.popup?this.props.popup.window:void 0})),Sa.createElement("div",{className:"chat_main_flex displayRow"},!1,wd.ready_to_render&&Sa.createElement(mp,null,Sa.createElement(Ff,{ModalManager:gy.GetModalManager(l||window)}),e&&Sa.createElement(lp,{className:"friendsListContainer fullheight "+(n?"collapsed":""),style:t?u:null,ref:this.BindFriendsListContainer,rgAcceptedTypes:[],bAcceptsFiles:!0},Sa.createElement(mh,{friends:this.props.friends,chats:this.props.chats,popup:l,browserContext:this.m_browserContext,collapsible:r,collapsed:n})),Sa.createElement(lp,{className:"singleWindowDividerDropTarget",rgAcceptedTypes:[],bAcceptsFiles:!0},c),t&&Sa.createElement($g,{tabs:this.props.tabset,popup:l,ResponsiveWindowState:e?null:this.m_ResponsiveWindowState,showOpenFriendsList:r&&n}),this.props.popup&&ai.a.IN_CLIENT&&Sa.createElement(gf,{popup:l}),Sa.createElement("div",{className:"singleWindowFocusBar"}))))},si.c([_i.observable],t.prototype,"m_nWindowTitleUnreadCycleCount",void 0),si.c([yn.a],t.prototype,"OnWindowResizeEvent",null),si.c([yn.a],t.prototype,"BindFriendsListContainer",null),si.c([yn.a],t.prototype,"OnGrabberMouseDown",null),si.c([yn.a],t.prototype,"OnGrabberTouchStart",null),si.c([yn.a],t.prototype,"HandleTouchMove",null),si.c([yn.a],t.prototype,"HandleMouseMove",null),si.c([yn.a],t.prototype,"UnregisterFriendsListDragEvents",null),t=si.c([up.observer],t)}(Sa.Component),Sf=function(e){function t(t,i,n,r,o,a){var s=this,c={title:"",html_class:"client_chat_frame fullheight ChatPopup",body_class:"fullheight",minWidth:400,minHeight:250,strRestoreDetails:r,dimensions:{width:740,height:650},target_browser:t.m_unPID>0?t:void 0,eCreationFlags:dp.c.Resizable};return a&&(c.eCreationFlags|=dp.c.Minimized),o&&(Object.assign(c.dimensions,o),c.bIgnoreSavedDimensions=!0),s=e.call(this,"chat_"+i,n.GetTabSetIdentifier(),c,!0)||this,s.m_tabSet=n,s}return si.d(t,e),t.prototype.SetTitle=function(){if(this.m_popup&&this.m_popup.document&&this.m_tabSet){var e=this.m_tabSet.GetTitle();this.m_popup.document.title=e}},t.prototype.OnFocus=function(){this.m_tabSet.OnWindowFocus()},t.prototype.BindWindowHandlers=function(){this.m_popupActionDisposer||(this.m_popupActionDisposer=Object(_i.autorun)(this.SetTitle))},t.prototype.UnbindWindowHandlers=function(){this.m_popupActionDisposer&&(this.m_popupActionDisposer(),this.m_popupActionDisposer=void 0)},Object.defineProperty(t.prototype,"tab_set",{get:function(){return this.m_tabSet},enumerable:!0,configurable:!0}),t.prototype.ClearTabSet=function(){this.m_tabSet=void 0},t.prototype.OnResize=function(){wd.UIStore.OnTabSetResized(this.m_tabSet),e.prototype.OnResize.call(this)},t.prototype.OnBeforeUnload=function(){e.prototype.SetSavedDimensionsKey.call(this,this.m_tabSet.GetTabSetIdentifier()),e.prototype.OnBeforeUnload.call(this)},t.prototype.OnClose=function(){if(this.m_tabSet){var e=!1;void 0!=this.m_popup.window&&this.m_popup.window.SteamClient&&this.m_popup.window.SteamClient.Window&&this.m_popup.window.SteamClient.Window.ProcessShuttingDown&&(e=this.m_popup.window.SteamClient.Window.ProcessShuttingDown()),this.m_tabSet.OnPopupClosed(e)}this.UnbindWindowHandlers()},t.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame"),this.BindWindowHandlers(),On.render(Sa.createElement(Mf,{popup:this,chatTabs:this.m_tabSet}),t)},si.c([yn.a],t.prototype,"SetTitle",null),t}(yf),Mf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.popup.window,t=this.props.chatTabs,i=this.props.popup.focused,n=wd.UIStore.GetTheaterMode(),r="popup_chat_frame fullheight";return i&&(r+=" focused"),n&&(r+=" TheaterMode"),wd.CMInterface.BDisconnected()&&(r+=" errorDisconnected"),Sa.createElement("div",{className:r,onContextMenu:Et},Sa.createElement(wf,{popup:this.props.popup.window}),!1,Sa.createElement(Ff,{ModalManager:gy.GetModalManager(e)}),Sa.createElement($g,{tabs:t,popup:e,ResponsiveWindowState:null}),ai.a.IN_CLIENT&&Sa.createElement(gf,{popup:e}))},t=si.c([up.observer],t)}(Sa.Component),Ff=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.ModalManager.modals;if(!e||!e.length)return null;var t=this.props.ModalManager.active_modal,i=e.map(function(e,i){var n="chat_modal_position"+(e!=t?" inactive":" active");return Sa.createElement("div",{className:n,key:i},e.element)});return Sa.createElement("div",{className:"chat_full_modaloverlay"},Sa.createElement("div",{className:"chat_modal_position chat_modal_background"}),i)},t=si.c([up.observer],t)}(Sa.Component),wf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnKeyDown=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.render=function(){return ai.a.IN_CLIENT?wd.CMInterface.BDisconnected()?(Zt(this.props.popup),Sa.createElement("div",{className:"ConnectionTrouble",tabIndex:0,onKeyDown:this.OnKeyDown},Sa.createElement("div",{className:"ConnectionTroubleContent"},Sa.createElement(pp,{hideMinMax:!0,popup:this.props.popup}),Sa.createElement("div",{className:"ConnectionTroubleMessage"},Object(ua.b)("#ConnectionTrouble_CurrentlyDisconnected"))))):null:Sa.createElement(Bf,null)},si.c([yn.a],t.prototype,"OnKeyDown",null),t=si.c([up.observer],t)}(Sa.Component),Bf=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bRequestingNotificationPermission=!1,i.state={bShouldRequestNotificationPermission:!0,bShowStartupDelayMessage:!1,bShowReconnectWaitMessage:!1,cReconnectWaitSeconds:0},i}return si.d(t,e),t.prototype.componentWillMount=function(){var e=this;if(!wd.ready_to_render){var t=performance.now()-wd.GetStartupTime();this.m_iIntervalDelayedStartup=window.setTimeout(function(){e.setState({bShowStartupDelayMessage:!0}),e.m_iIntervalDelayedStartup=void 0},1500-t)}},t.prototype.componentWillUnmount=function(){this.m_iIntervalDelayedStartup&&(window.clearTimeout(this.m_iIntervalDelayedStartup),this.m_iIntervalDelayedStartup=void 0),this.m_iIntervalUpdateReconnectStatus&&(window.clearInterval(this.m_iIntervalUpdateReconnectStatus),this.m_iIntervalUpdateReconnectStatus=void 0)},t.prototype.IntervalUpdateReconnectWaitStatus=function(){var e=gy.WebLogonManager;if(e.BIsWaitingToReconnect()){var t=Math.ceil(e.GetMSUntilNextReconnectAttempt()/1e3);t!=this.state.cReconnectWaitSeconds&&this.setState({bShowReconnectWaitMessage:!0,cReconnectWaitSeconds:t})}else window.clearInterval(this.m_iIntervalUpdateReconnectStatus),this.m_iIntervalUpdateReconnectStatus=void 0,this.setState({bShowReconnectWaitMessage:!1,cReconnectWaitSeconds:0})},t.prototype.StartReconnectUpdateInterval=function(){this.m_iIntervalUpdateReconnectStatus||(this.m_iIntervalUpdateReconnectStatus=window.setInterval(this.IntervalUpdateReconnectWaitStatus,250))},t.prototype.OnReconnectNowClick=function(){gy.WebLogonManager.ReconnectNow()},t.prototype.OnLoginClick=function(){window.location.href=window.location.href},t.prototype.render=function(){var e=this,t=gy.WebLogonManager;if(AssertMsg(t,"No WebLogonManager in WebConnectionTroubleOverlay"),!t)return null;var i=null,n=t.web_logon_state,r=!wd.NotificationManager.BNotificationsPermitted()&&this.state.bShouldRequestNotificationPermission;if(9!=n||r){var o=void 0,a="",s=!1,c=!1;if(9!=n)if(wd.ready_to_render||this.state.bShowStartupDelayMessage||!t.BIsInInitialConnect())switch(n){case 1:case 3:o=Object(ua.b)("#ConnectionTrouble_Connecting"),c=!0;break;case 5:case 7:o=Object(ua.b)("#ConnectionTrouble_LoggingIn"),c=!0;break;case 11:o=Object(ua.b)("#ConnectionTrouble_RetrievingLogin"),c=!0;break;case 2:case 4:case 12:o=Object(ua.b)("#ConnectionTrouble_FailedToConnect");break;case 8:case 6:o=Object(ua.b)("#ConnectionTrouble_FailedToLogIn");break;case 10:o=Object(ua.b)("#ConnectionTrouble_DisconnectedFinal");break;case 13:o=Object(ua.b)("#ConnectionTrouble_LoginLost"),s=!0;break;case 14:o=Object(ua.b)("#ConnectionTrouble_LoginChanged"),s=!0;break;case 15:o=Object(ua.b)("#ConnectionTrouble_LoggedOnElsewhere");break;default:AssertMsg(!1,"No message for trouble state "+n)}else a="InitialConnect";else r&&(this.m_bRequestingNotificationPermission||(wd.NotificationManager.RequestNotificationPermission().then(function(){e.m_bRequestingNotificationPermission=!1,e.setState({bShouldRequestNotificationPermission:!1})}),this.m_bRequestingNotificationPermission=!0),a="NotificationBrowserWarning",o=Object(ua.b)("#NotificationBrowserWarning"));var l=t.BIsWaitingToReconnect(),u=t.BWillAutoReconnect();!this.state.bShowReconnectWaitMessage&&u&&this.StartReconnectUpdateInterval(),!o&&wd.ready_to_render||(i=Sa.createElement(Bd,{classNames:"modalbg-anim",timeout:300},Sa.createElement("div",{className:"ConnectionTrouble WebConnectionTrouble"+(wd.ready_to_render?"":" NotReadyToRender")},Sa.createElement("div",{className:""+a}),Sa.createElement("div",{className:"ConnectionTroubleContent"},Sa.createElement("div",{className:"ConnectionTroubleMessage "+a},Sa.createElement("div",{className:"errorMessageContainer"},Sa.createElement("div",{className:"connectionThrobber"+(c?" showThrobber":"")},Sa.createElement(_m,{size:"small"})," "),Sa.createElement("div",null,wd.ready_to_render?o:Object(ua.b)("#ConnectionTrouble_Connecting"))),l&&u&&Sa.createElement("div",{className:"ReconnectWaitMessage"},Object(ua.c)("#ConnectionTrouble_ReconnectingInSeconds",Math.ceil(t.GetMSUntilNextReconnectAttempt()/1e3))),l&&Sa.createElement("div",{className:"ConnectionTroubleReconnectMessage"},Sa.createElement("div",{className:"ReconnectNow"},Sa.createElement("button",{type:"button",className:"DialogButton Primary",onClick:this.OnReconnectNowClick},Object(ua.b)("#ConnectionTrouble_ReconnectNow")))),s&&Sa.createElement("div",{className:"ConnectionTroubleReconnectMessage"},Sa.createElement("div",{className:"ReconnectNow"},Sa.createElement("button",{type:"button",className:"DialogButton Primary",onClick:this.OnLoginClick},Object(ua.b)(14!=n?"#ConnectionTrouble_LoginAgain":"#ConnectionTrouble_LoginChanged_Reload")))))))))}return Sa.createElement(Od,null,i)},si.c([yn.a],t.prototype,"IntervalUpdateReconnectWaitStatus",null),si.c([yn.a],t.prototype,"OnReconnectNowClick",null),si.c([yn.a],t.prototype,"OnLoginClick",null),t=si.c([up.observer],t)}(Sa.Component),Of=(Object(_i.observable)({bEnabled:null}),$(Tt)),If=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.AcceptInvite=function(e){var t=this,i=$t(e);wd.ChatStore.InviteStore.AcceptInvite(this.props.invite,Xt(this,e)).then(function(e){t.HandleJoinResult(i,e)})},t.prototype.HandleJoinResult=function(e,t){if(15==t.result){0==t.time&&console.log("no longer valid");var i=wd.RTime32ToDate(t.time),n=i.toLocaleString([],{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});_e(e,Object(ua.b)("#ChatRoom_InviteMessage_Header"),Object(ua.b)("#ChatRoom_InviteMessage_Failed_Kicked",n),Object(ua.b)("#Button_OK"))}else 17==t.result?_e(e,Object(ua.b)("#ChatRoom_InviteMessage_Header"),Object(ua.b)("#ChatRoom_InviteMessage_Failed_Banned"),Object(ua.b)("#Button_OK")):42==t.result&&_e(e,Object(ua.b)("#ChatRoom_InviteMessage_Header"),Object(ua.b)("#ChatRoom_InviteMessage_Not_Found"),Object(ua.b)("#Button_OK"));this.props.onAccept&&this.props.onAccept()},t.prototype.render=function(){var e=this.props.invite;if(!e||!e.BIsReady())return Sa.createElement("div",{className:"ChatMessageInvite RequestingInfo displayRow"},Sa.createElement(_m,{size:"small"}),Sa.createElement("div",{className:"postedExpiredInvite"},Object(ua.b)("#bbcode_invite_requesting_info")));if(!e.BIsValid())return Sa.createElement("div",{className:"ChatMessageInvite InviteExpired"},Sa.createElement("div",{className:"postedExpiredInvite"},Object(ua.b)("#bbcode_invite_no_longer_valid")));var t=this.props.inviter&&wd.FriendStore.self.accountid==this.props.inviter.accountid,i=wd.ChatStore.GetChatRoomGroup(e.GetChatRoomGroupID()),n=i&&i.BIsCurrentUserAMember(),r=e.BIsExpired(),o=i&&i.name,a="",s="ChatMessageInvite NoBGSplitInvite",c="inviteButton inviteButtonJoinChat";this.props.strClassName&&(s+=" "+this.props.strClassName);var l=e.BIsInviteLink(),u=e.BIsVoiceChatInvite();if(u){c+=" inviteButtonJoinVoice",s+=" VoiceChannelInvite";var d=i.GetChatRoom(e.GetChatID());d&&(a=d.name)}this.props.bIsInviteDialog||(n&&!t&&(s+=" GroupAlreadyJoined"),t&&(s+=" Inviter")),l&&(s+=" InviteLink");var p;if(r)s+=" InviteExpired";else if(e.BNeverExpires())p=Sa.createElement("div",{className:"Invite_ExpireTime"},Object(ua.b)("#bbcode_invite_never_expires"));else{var m=wd.RTime32ToDate(e.time_expires);p=Sa.createElement("div",{className:"Invite_ExpireTime"},Object(ua.b)("#bbcode_invite_expires",m.toLocaleTimeString(),m.toDateString()))}var h;h=t?u?Object(ua.b)("#Voice_StartTalking"):Object(ua.b)("#ChatRoom_Invite_Accept_Inviter"):u?Object(ua.b)("#Voice_StartTalking"):n?Object(ua.b)("#ChatRoom_Invite_Accept_Inviter"):Object(ua.b)("#ChatRoom_Invite_Accept");var g=null,f=!1;if(e.BIsUserBanned())f=!0,g=Sa.createElement("div",null,Object(ua.b)("#bbcode_invite_banned_forever"));else if(e.GetTimeKickExpires()&&e.GetTimeKickExpires()>wd.GetServerRTime32()){f=!0;var m=wd.RTime32ToDate(e.GetTimeKickExpires()),_=m.toLocaleString([],{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});g=Sa.createElement("div",null,Object(ua.b)("#bbcode_invite_banned_until",_))}var y=this.props.inviter&&n,v=!y&&!t,b=u?a:o;return Sa.createElement(Ph,{text:[h,b,e.GetURL()]},Sa.createElement("div",{className:s},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement(Jm,{group:i,small:y,large:v}),u&&Sa.createElement("div",null,Sa.createElement(Id._3,null))),Sa.createElement("div",{className:"rightInviteContainer"+(n||t?" rightInvite_Horizontal":"")},Sa.createElement("div",{className:"rightInviteContainerContent"},Sa.createElement(Rf,{invite:this.props.invite,inviter:this.props.inviter,invitee:this.props.invitee}),Sa.createElement("div",null,Sa.createElement("div",{className:"groupName"},b)),l&&Sa.createElement(Tf,{url:e.GetURL(),bDisabled:e.BIsExpired()}),g,!t&&n&&!u&&Sa.createElement("div",null,Sa.createElement("span",{className:"groupAlreadyJoined"},Object(ua.b)("#bbcode_invite_already_group_member")))),!r&&!f&&Sa.createElement("button",{className:c,type:"button",onClick:this.AcceptInvite},h)),(!t&&!n||l)&&p,Sa.createElement("div",{style:{clear:"left"}})))},si.c([yn.a],t.prototype,"AcceptInvite",null),t=si.c([up.observer],t)}(Sa.Component),Rf=Object(up.observer)(function(e){var t=e.invite,i=e.inviter,n=e.invitee,r=t.BIsVoiceChatInvite(),o=t.BIsInviteLink(),a=e.inviter&&wd.FriendStore.self.accountid==e.inviter.accountid,s=wd.ChatStore.GetChatRoomGroup(t.GetChatRoomGroupID()).name,c=Object(ua.b)("#bbcode_invite_youre_invited");return a?c=r?o?Object(ua.d)("#bbcode_invite_you_shared_voice_link",Sa.createElement("span",{className:"inviteHighlight"},s," ")):Object(ua.d)("#bbcode_invite_you_invited_friend_voice",Sa.createElement("span",{className:"inviteHighlight"},n.display_name," "),Sa.createElement("span",{className:"inviteHighlight"},s," ")):o?Object(ua.d)("#bbcode_invite_you_shared_invite_link"):Object(ua.d)("#bbcode_invite_you_invited_friend",Sa.createElement("span",{className:"inviteHighlight"},n.display_name," ")):i&&(c=r?o?Object(ua.d)("#bbcode_invite_voice_url_description",Sa.createElement("span",{className:"inviteHighlight"},i.display_name," "),Sa.createElement("span",{className:"inviteHighlight"},s," ")):Object(ua.d)("#bbcode_invite_voice_description",Sa.createElement("span",{className:"inviteHighlight"},i.display_name," "),Sa.createElement("span",{className:"inviteHighlight"},s," ")):o?Object(ua.d)("#bbcode_invite_url_description",Sa.createElement("span",{className:"inviteHighlight"},i.display_name," ")):Object(ua.d)("#bbcode_invite_description",Sa.createElement("span",{className:"inviteHighlight"},i.display_name," "))),Sa.createElement("div",{className:"inviteLabel"},c)}),Ef=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this,t=this.props,i=t.closeModal,n=(t.onAccept,t.strClassName),r=si.f(t,["closeModal","onAccept","strClassName"]),o=function(){e.props.closeModal&&e.props.closeModal()};return n="InviteDialog"+(n?" "+n:""),Sa.createElement(pe,{onEscKeypress:i},Sa.createElement(If,si.a({},r,{strClassName:n,onAccept:o})))},t}(Sa.Component),Tf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.CopyToClipboard=function(e){Ad.i(this.props.url)},t.prototype.HandleFocus=function(e){e.currentTarget.select()},t.prototype.render=function(){var e=this.props.strLabel||Object(ua.b)("#bbcode_invite_url_desc");return Sa.createElement("div",{className:"inviteURLContainer"},Sa.createElement("span",{className:"inviteURLLinkDesc"},e),Sa.createElement("div",{className:"inviteURLAndCopy"},Sa.createElement("input",{className:"inviteURLLink",value:this.props.bDisabled?Object(ua.b)("#bbcode_invite_link_text_expired"):this.props.url,onFocus:this.HandleFocus,onClick:this.HandleFocus,readOnly:!0}),!this.props.bDisabled&&Sa.createElement("span",{className:"copyInviteLink",onClick:this.CopyToClipboard,title:Object(ua.b)("#Chat_Copy_Clipboard")},Sa.createElement(Id.g,null))))},si.c([yn.a],t.prototype,"CopyToClipboard",null),si.c([yn.a],t.prototype,"HandleFocus",null),t}(Sa.Component),kf=function(e){function t(t){return e.call(this,t)||this}return si.d(t,e),t.prototype.AcceptGameInvite=function(){this.props.gameInvite.AcceptGameInvite()},t.prototype.DismissInvite=function(){this.props.gameInvite.DismissInvite()},t.prototype.OnShowGameContextMenu=function(e){ct(Xt(this,e),this.props.gameInvite.appID,e)},t.prototype.render=function(){var e=wd.AppInfoStore.GetAppInfo(this.props.gameInvite.appID);if(!e)return null;if(wd.FriendStore.self==this.props.inviter){var t=this.props.inviteTarget.display_name;return Sa.createElement("div",{className:"gameInviteSelf"},Sa.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(ua.d)("#ChatRoom_GameInvite_YouInvited",t,Sa.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(wd.GetServerRTime32()-this.props.gameInvite.rtTimestamp>21600||this.props.gameInvite.bDismissed||this.props.inviter.persona.m_unGamePlayedAppID!=this.props.gameInvite.appID){var i=this.props.inviter.display_name;return Sa.createElement("div",{className:"gameInviteDismissed"},Sa.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(ua.d)("#ChatRoom_GameInvite_Dismissed",i,Sa.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)))}if(this.props.gameInvite.bAccepted)return Sa.createElement("div",{className:"gameInviteAccepted"},Sa.createElement("div",{onContextMenu:this.OnShowGameContextMenu},Object(ua.d)("#ChatRoom_GameInvite_Accepted",Sa.createElement("img",{src:e.icon_url,className:"productImage"}),e.name)));var n=this.props.inviter,r=null,o=n.persona.player_group_size-1;if(n.persona.m_unGamePlayedAppID==this.props.gameInvite.appID&&n.persona.player_group_size>0){var a=n.persona.player_group;wd.FriendStore.all_friends,r=wd.FriendStore.FriendGroupStore.ingame_group.member_list.map(function(e){return e!=n&&e.persona.player_group==a?(o--,Sa.createElement(Rh,{key:e.accountid,friend:e,context:null})):null})}var s={};this.props.chatGutterWidth&&(s.marginLeft="-"+this.props.chatGutterWidth+"px");var c=Object(ua.d)("#ChatRoom_GameInvite_Invite",this.props.inviter.display_name);return Sa.createElement("div",{className:"msg ChatMessageInvite gameInviteMsg",style:s},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement("img",{src:e.header_image_url,className:"productImage productImageBlur"}),Sa.createElement("img",{src:e.header_image_url,className:"productImage"})),Sa.createElement("div",{className:"rightInviteContainer"},Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",{className:"invitedTimeLabel"},Object(ua.b)("#ChatRoom_GameInvite_InviteTime"),Sa.createElement(Bp,{rtime:this.props.gameInvite.rtTimestamp,bTimeOnly:!0})),Sa.createElement(Ph,null,Sa.createElement("div",{className:"inviteLabel"},c)),Sa.createElement(Ph,null,Sa.createElement("div",{className:"productName"},e.name)),n.persona.player_group_size>0&&Sa.createElement(Ph,null,Sa.createElement("div",{className:"playingWithBlock"},Sa.createElement("div",null,Object(ua.b)("#ChatRoom_GameInvite_PlayingWith")),Sa.createElement("div",{className:"playingWithAvatars"},Sa.createElement("div",{className:"playingWithLine"}),r,o>0&&Sa.createElement("div",{className:"playingWithExtraCount"},Object(ua.b)("#ChatRoom_GameInvite_PartyMore",o)," "))))),Sa.createElement("button",{className:"DialogButton GreenPlay",onClick:this.AcceptGameInvite},Object(ua.b)("#ChatRoom_GameInvite_Accept")),Sa.createElement("div",{className:"closeButton",onClick:this.DismissInvite},Sa.createElement(Id._6,null))))},si.c([yn.a],t.prototype,"AcceptGameInvite",null),si.c([yn.a],t.prototype,"DismissInvite",null),si.c([yn.a],t.prototype,"OnShowGameContextMenu",null),t=si.c([up.observer],t)}(Sa.Component),Df=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.broadcast_id=function(){return ui.Message.getField(this,1)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,1,e)},t.prototype.thumbnail_upload_address=function(){return ui.Message.getField(this,2)},t.prototype.set_thumbnail_upload_address=function(e){ui.Message.setField(this,2,e)},t.prototype.thumbnail_upload_token=function(){return ui.Message.getField(this,3)},t.prototype.set_thumbnail_upload_token=function(e){ui.Message.setField(this,3,e)},t.prototype.thumbnail_interval_seconds=function(){return ui.Message.getField(this,4)},t.prototype.set_thumbnail_interval_seconds=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_broadcast_id(t.readFixed64String());break;case 2:e.set_thumbnail_upload_address(t.readString());break;case 3:e.set_thumbnail_upload_token(t.readString());break;case 4:e.set_thumbnail_interval_seconds(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeString(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeUint32(4,i)},t.prototype.getClassName=function(){return"CBroadcast_BeginBroadcastSession_Response"},t}(ui.Message)),Gf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CBroadcast_EndBroadcastSession_Response"},t}(ui.Message)),Nf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.upload_token=function(){return ui.Message.getField(this,1)},t.prototype.set_upload_token=function(e){ui.Message.setField(this,1,e)},t.prototype.upload_address=function(){return ui.Message.getField(this,2)},t.prototype.set_upload_address=function(e){ui.Message.setField(this,2,e)},t.prototype.upload_relay_id=function(){return ui.Message.getField(this,3)},t.prototype.set_upload_relay_id=function(e){ui.Message.setField(this,3,e)},t.prototype.thumbnail_upload_address=function(){return ui.Message.getField(this,4)},t.prototype.set_thumbnail_upload_address=function(e){ui.Message.setField(this,4,e)},t.prototype.thumbnail_interval_seconds=function(){return ui.Message.getField(this,5)},t.prototype.set_thumbnail_interval_seconds=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_upload_token(t.readString());break;case 2:e.set_upload_address(t.readString());break;case 3:e.set_upload_relay_id(t.readFixed64String());break;case 4:e.set_thumbnail_upload_address(t.readString());break;case 5:e.set_thumbnail_interval_seconds(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeFixed64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeString(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CBroadcast_StartBroadcastUpload_Response"},t}(ui.Message)),Lf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.broadcast_id=function(){return ui.Message.getField(this,2)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_broadcast_id(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastStatus_Request"},t}(ui.Message),Af=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.gameid=function(){return ui.Message.getField(this,1)},t.prototype.set_gameid=function(e){ui.Message.setField(this,1,e)},t.prototype.title=function(){return ui.Message.getField(this,2)},t.prototype.set_title=function(e){ui.Message.setField(this,2,e)},t.prototype.num_viewers=function(){return ui.Message.getField(this,3)},t.prototype.set_num_viewers=function(e){ui.Message.setField(this,3,e)},t.prototype.permission=function(){return ui.Message.getField(this,4)},t.prototype.set_permission=function(e){ui.Message.setField(this,4,e)},t.prototype.is_rtmp=function(){return ui.Message.getField(this,5)},t.prototype.set_is_rtmp=function(e){ui.Message.setField(this,5,e)},t.prototype.seconds_delay=function(){return ui.Message.getField(this,6)},t.prototype.set_seconds_delay=function(e){ui.Message.setField(this,6,e)},t.prototype.is_publisher=function(){return ui.Message.getField(this,7)},t.prototype.set_is_publisher=function(e){ui.Message.setField(this,7,e)},t.prototype.thumbnail_url=function(){return ui.Message.getField(this,8)},t.prototype.set_thumbnail_url=function(e){ui.Message.setField(this,8,e)},t.prototype.update_interval=function(){return ui.Message.getField(this,9)},t.prototype.set_update_interval=function(e){ui.Message.setField(this,9,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_gameid(t.readUint64String());break;case 2:e.set_title(t.readString());break;case 3:e.set_num_viewers(t.readUint32());break;case 4:e.set_permission(t.readInt32());break;case 5:e.set_is_rtmp(t.readBool());break;case 6:e.set_seconds_delay(t.readInt32());break;case 7:e.set_is_publisher(t.readBool());break;case 8:e.set_thumbnail_url(t.readString());break;case 9:e.set_update_interval(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeUint64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeInt32(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeBool(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeInt32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeBool(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeString(8,i),void 0!==(i=ui.Message.getField(e,9))&&t.writeInt32(9,i)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastStatus_Response"},t}(ui.Message),Pf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.broadcast_id=function(){return ui.Message.getField(this,2)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_broadcast_id(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeFixed64String(2,i)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastThumbnail_Request"},t}(ui.Message),xf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.thumbnail_url=function(){return ui.Message.getField(this,1)},t.prototype.set_thumbnail_url=function(e){ui.Message.setField(this,1,e)},t.prototype.update_interval=function(){return ui.Message.getField(this,2)},t.prototype.set_update_interval=function(e){ui.Message.setField(this,2,e)},t.prototype.num_viewers=function(){return ui.Message.getField(this,3)},t.prototype.set_num_viewers=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_thumbnail_url(t.readString());break;case 2:e.set_update_interval(t.readInt32());break;case 3:e.set_num_viewers(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeInt32(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeInt32(3,i)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastThumbnail_Response"},t}(ui.Message),zf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.response=function(){return ui.Message.getField(this,1)},t.prototype.set_response=function(e){ui.Message.setField(this,1,e)},t.prototype.mpd_url=function(){return ui.Message.getField(this,2)},t.prototype.set_mpd_url=function(e){ui.Message.setField(this,2,e)},t.prototype.broadcast_id=function(){return ui.Message.getField(this,3)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,3,e)},t.prototype.gameid=function(){return ui.Message.getField(this,4)},t.prototype.set_gameid=function(e){ui.Message.setField(this,4,e)},t.prototype.title=function(){return ui.Message.getField(this,5)},t.prototype.set_title=function(e){ui.Message.setField(this,5,e)},t.prototype.num_viewers=function(){return ui.Message.getField(this,6)},t.prototype.set_num_viewers=function(e){ui.Message.setField(this,6,e)},t.prototype.permission=function(){return ui.Message.getField(this,7)},t.prototype.set_permission=function(e){ui.Message.setField(this,7,e)},t.prototype.is_rtmp=function(){return ui.Message.getField(this,8)},t.prototype.set_is_rtmp=function(e){ui.Message.setField(this,8,e)},t.prototype.seconds_delay=function(){return ui.Message.getField(this,9)},t.prototype.set_seconds_delay=function(e){ui.Message.setField(this,9,e)},t.prototype.viewer_token=function(){return ui.Message.getField(this,10)},t.prototype.set_viewer_token=function(e){ui.Message.setField(this,10,e)},t.prototype.hls_m3u8_master_url=function(){return ui.Message.getField(this,11)},t.prototype.set_hls_m3u8_master_url=function(e){ui.Message.setField(this,11,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_response(t.readEnum());break;case 2:e.set_mpd_url(t.readString());break;case 3:e.set_broadcast_id(t.readFixed64String());break;case 4:e.set_gameid(t.readUint64String());break;case 5:e.set_title(t.readString());break;case 6:e.set_num_viewers(t.readUint32());break;case 7:e.set_permission(t.readInt32());break;case 8:e.set_is_rtmp(t.readBool());break;case 9:e.set_seconds_delay(t.readInt32());break;case 10:e.set_viewer_token(t.readFixed64String());break;case 11:e.set_hls_m3u8_master_url(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeEnum(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeFixed64String(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint64String(4,i),i=ui.Message.getField(e,5),void 0!==i&&t.writeString(5,i),i=ui.Message.getField(e,6),void 0!==i&&t.writeUint32(6,i),i=ui.Message.getField(e,7),void 0!==i&&t.writeInt32(7,i),i=ui.Message.getField(e,8),void 0!==i&&t.writeBool(8,i),i=ui.Message.getField(e,9),void 0!==i&&t.writeInt32(9,i),i=ui.Message.getField(e,10),void 0!==i&&t.writeFixed64String(10,i),void 0!==(i=ui.Message.getField(e,11))&&t.writeString(11,i)},t.prototype.getClassName=function(){return"CBroadcast_WatchBroadcast_Response"},t}(ui.Message)),Uf=(ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.success=function(){return ui.Message.getField(this,1)},t.prototype.set_success=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_success(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeBool(1,i)},t.prototype.getClassName=function(){return"CBroadcast_InviteToBroadcast_Response"},t}(ui.Message)),Vf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CBroadcast_SendBroadcastStateToServer_Response"},t}(ui.Message)),jf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.state=function(){return ui.Message.getField(this,2)},t.prototype.set_state=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steamid(t.readFixed64String());break;case 2:e.set_state(t.readEnum());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeEnum(2,i)},t.prototype.getClassName=function(){return"CBroadcast_BroadcastViewerState_Notification"},t}(ui.Message),Wf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.broadcast_id=function(){return ui.Message.getField(this,1)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_broadcast_id(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CBroadcast_WaitingBroadcastViewer_Notification"},t}(ui.Message),Hf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.broadcast_id=function(){return ui.Message.getField(this,1)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,1,e)},t.prototype.broadcast_relay_id=function(){return ui.Message.getField(this,2)},t.prototype.set_broadcast_relay_id=function(e){ui.Message.setField(this,2,e)},t.prototype.upload_result=function(){return ui.Message.getField(this,3)},t.prototype.set_upload_result=function(e){ui.Message.setField(this,3,e)},t.prototype.too_many_poor_uploads=function(){return ui.Message.getField(this,4)},t.prototype.set_too_many_poor_uploads=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_broadcast_id(t.readFixed64String());break;case 2:e.set_broadcast_relay_id(t.readFixed64String());break;case 3:e.set_upload_result(t.readUint32());break;case 4:e.set_too_many_poor_uploads(t.readBool());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeUint32(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeBool(4,i)},t.prototype.getClassName=function(){return"CBroadcast_StopBroadcastUpload_Notification"},t}(ui.Message),qf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.broadcast_id=function(){return ui.Message.getField(this,1)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_broadcast_id(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CBroadcast_SessionClosed_Notification"},t}(ui.Message),Kf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.broadcast_id=function(){return ui.Message.getField(this,1)},t.prototype.set_broadcast_id=function(e){ui.Message.setField(this,1,e)},t.prototype.num_viewers=function(){return ui.Message.getField(this,2)},t.prototype.set_num_viewers=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_broadcast_id(t.readFixed64String());break;case 2:e.set_num_viewers(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeInt32(2,i)},t.prototype.getClassName=function(){return"CBroadcast_BroadcastStatus_Notification"},t}(ui.Message),Jf=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.thumbnail_upload_token=function(){return ui.Message.getField(this,1)},t.prototype.set_thumbnail_upload_token=function(e){ui.Message.setField(this,1,e)},t.prototype.thumbnail_broadcast_session_id=function(){return ui.Message.getField(this,2)},t.prototype.set_thumbnail_broadcast_session_id=function(e){ui.Message.setField(this,2,e)},t.prototype.thumbnail_data=function(){return ui.Message.getField(this,3)},t.prototype.set_thumbnail_data=function(e){ui.Message.setField(this,3,e)},t.prototype.thumbnail_width=function(){return ui.Message.getField(this,4)},t.prototype.set_thumbnail_width=function(e){ui.Message.setField(this,4,e)},t.prototype.thumbnail_height=function(){return ui.Message.getField(this,5)},t.prototype.set_thumbnail_height=function(e){ui.Message.setField(this,5,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_thumbnail_upload_token(t.readString());break;case 2:e.set_thumbnail_broadcast_session_id(t.readFixed64String());break;case 3:e.set_thumbnail_data(t.readBytes());break;case 4:e.set_thumbnail_width(t.readUint32());break;case 5:e.set_thumbnail_height(t.readUint32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeFixed64String(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeBytes(3,i),i=ui.Message.getField(e,4),void 0!==i&&t.writeUint32(4,i),void 0!==(i=ui.Message.getField(e,5))&&t.writeUint32(5,i)},t.prototype.getClassName=function(){return"CBroadcast_SendThumbnailToRelay_Notification"},t}(ui.Message),Yf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.broadcaster_steamid=function(){return ui.Message.getField(this,1)},t.prototype.set_broadcaster_steamid=function(e){ui.Message.setField(this,1,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_broadcaster_steamid(t.readFixed64String());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;void 0!==(i=ui.Message.getField(e,1))&&t.writeFixed64String(1,i)},t.prototype.getClassName=function(){return"CBroadcast_ViewerBroadcastInvite_Notification"},t}(ui.Message)),Xf=(ui.Message,ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.chat_id=function(){return ui.Message.getField(this,1)},t.prototype.set_chat_id=function(e){ui.Message.setField(this,1,e)},t.prototype.view_url=function(){return ui.Message.getField(this,2)},t.prototype.set_view_url=function(e){ui.Message.setField(this,2,e)},t.prototype.view_url_template=function(){return ui.Message.getField(this,3)},t.prototype.set_view_url_template=function(e){ui.Message.setField(this,3,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_chat_id(t.readFixed64String());break;case 2:e.set_view_url(t.readString());break;case 3:e.set_view_url_template(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeString(2,i),void 0!==(i=ui.Message.getField(e,3))&&t.writeString(3,i)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastChatInfo_Response"},t}(ui.Message)),Zf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.persona_name=function(){return ui.Message.getField(this,1)},t.prototype.set_persona_name=function(e){ui.Message.setField(this,1,e)},t.prototype.in_game=function(){return ui.Message.getField(this,2)},t.prototype.set_in_game=function(e){ui.Message.setField(this,2,e)},t.prototype.result=function(){return ui.Message.getField(this,3)},t.prototype.set_result=function(e){ui.Message.setField(this,3,e)},t.prototype.cooldown_time_seconds=function(){return ui.Message.getField(this,4)},t.prototype.set_cooldown_time_seconds=function(e){ui.Message.setField(this,4,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_persona_name(t.readString());break;case 2:e.set_in_game(t.readBool());break;case 3:e.set_result(t.readInt32());break;case 4:e.set_cooldown_time_seconds(t.readInt32());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeString(1,i),i=ui.Message.getField(e,2),void 0!==i&&t.writeBool(2,i),i=ui.Message.getField(e,3),void 0!==i&&t.writeInt32(3,i),void 0!==(i=ui.Message.getField(e,4))&&t.writeInt32(4,i)},t.prototype.getClassName=function(){return"CBroadcast_PostChatMessage_Response"},t}(ui.Message)),Qf=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CBroadcast_MuteBroadcastChatUser_Response"},t}(ui.Message)),$f=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){},t.prototype.getClassName=function(){return"CBroadcast_RemoveUserChatText_Response"},t}(ui.Message)),e_=(ui.Message,function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,[1],null),i}return si.d(t,e),t.prototype.persona_names=function(){return ui.Message.getRepeatedWrapperField(this,t_,1)},t.prototype.set_persona_names=function(e){ui.Message.setRepeatedWrapperField(this,1,e)},t.prototype.add_persona_names=function(e,t){return ui.Message.addToRepeatedWrapperField(this,1,e,t_,t)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new t_;t.readMessage(i,t_.deserializeBinaryFromReader),e.add_persona_names(i);break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=e.persona_names(),i.length>0&&t.writeRepeatedMessage(1,i,t_.serializeBinaryToWriter)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastChatUserNames_Response"},t}(ui.Message)),t_=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return ui.Message.initialize(i,t,0,-1,void 0,null),i}return si.d(t,e),t.prototype.steam_id=function(){return ui.Message.getField(this,1)},t.prototype.set_steam_id=function(e){ui.Message.setField(this,1,e)},t.prototype.persona=function(){return ui.Message.getField(this,2)},t.prototype.set_persona=function(e){ui.Message.setField(this,2,e)},t.prototype.toObject=function(e){return void 0===e&&(e=!1),t.toObject(e,this)},t.toObject=function(e,t){return{}},t.deserializeBinary=function(e){var i=new ui.BinaryReader(e),n=new t;return t.deserializeBinaryFromReader(n,i)},t.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:e.set_steam_id(t.readFixed64String());break;case 2:e.set_persona(t.readString());break;default:t.skipField()}return e},t.prototype.serializeBinary=function(){var e=new ui.BinaryWriter;return t.serializeBinaryToWriter(this,e),e.getResultBuffer()},t.serializeBinaryToWriter=function(e,t){var i;i=ui.Message.getField(e,1),void 0!==i&&t.writeFixed64String(1,i),void 0!==(i=ui.Message.getField(e,2))&&t.writeString(2,i)},t.prototype.getClassName=function(){return"CBroadcast_GetBroadcastChatUserNames_Response_PersonaName"},t}(ui.Message);!function(e){function t(e,t){return e.SendMsg("Broadcast.BeginBroadcastSession#1",t,Df)}function i(e,t){return e.SendMsg("Broadcast.EndBroadcastSession#1",t,Gf)}function n(e,t){return e.SendMsg("Broadcast.StartBroadcastUpload#1",t,Nf)}function r(e,t){return e.SendNotification("Broadcast.NotifyBroadcastUploadStop#1",t)}function o(e,t){return e.SendMsg("Broadcast.WatchBroadcast#1",t,zf)}function a(e,t){return e.SendNotification("Broadcast.StopWatchingBroadcast#1",t)}function s(e,t){return e.SendMsg("Broadcast.GetBroadcastStatus#1",t,Af)}function c(e,t){return e.SendMsg("Broadcast.GetBroadcastThumbnail#1",t,xf)}function l(e,t){return e.SendMsg("Broadcast.InviteToBroadcast#1",t,Uf)}function u(e,t){return e.SendMsg("Broadcast.SendBroadcastStateToServer#1",t,Vf)}function d(e,t){return e.SendNotification("Broadcast.NotifyBroadcastSessionHeartbeat#1",t)}function p(e,t){return e.SendMsg("Broadcast.GetBroadcastChatInfo#1",t,Xf)}function m(e,t){return e.SendMsg("Broadcast.PostChatMessage#1",t,Zf)}function h(e,t){return e.SendMsg("Broadcast.MuteBroadcastChatUser#1",t,Qf)}function g(e,t){return e.SendMsg("Broadcast.RemoveUserChatText#1",t,$f)}function f(e,t){return e.SendMsg("Broadcast.GetBroadcastChatUserNames#1",t,e_)}e.BeginBroadcastSession=t,e.EndBroadcastSession=i,e.StartBroadcastUpload=n,e.NotifyBroadcastUploadStop=r,e.WatchBroadcast=o,e.StopWatchingBroadcast=a,e.GetBroadcastStatus=s,e.GetBroadcastThumbnail=c,e.InviteToBroadcast=l,e.SendBroadcastStateToServer=u,e.NotifyBroadcastSessionHeartbeat=d,e.GetBroadcastChatInfo=p,e.PostChatMessage=m,e.MuteBroadcastChatUser=h,e.RemoveUserChatText=g,e.GetBroadcastChatUserNames=f}(Rm||(Rm={}));var i_;!function(e){e.NotifyBroadcastViewerStateHandler={name:"BroadcastClient.NotifyBroadcastViewerState#1",request:jf},e.NotifyWaitingBroadcastViewerHandler={name:"BroadcastClient.NotifyWaitingBroadcastViewer#1",request:Wf},e.NotifyStopBroadcastUploadHandler={name:"BroadcastClient.NotifyStopBroadcastUpload#1",request:Hf},e.NotifySessionClosedHandler={name:"BroadcastClient.NotifySessionClosed#1",request:qf},e.NotifyViewerBroadcastInviteHandler={name:"BroadcastClient.NotifyViewerBroadcastInvite#1",request:Yf},e.NotifyBroadcastStatusHandler={name:"BroadcastClient.NotifyBroadcastStatus#1",request:Kf},e.SendThumbnailToRelayHandler={name:"BroadcastClient.SendThumbnailToRelay#1",request:Jf}}(i_||(i_={}));var n_,r_=function(e){function t(t){var i=e.call(this,t)||this;return i.m_pollTimeout=void 0,i.state={bDismissed:!1,bExpired:!1,strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},i}return si.d(t,e),t.prototype.componentDidMount=function(){this.props.broadcaster.accountid!=wd.FriendStore.self.accountid&&(this.props.broadcastid?this.PollForStatus():this.setState({bExpired:!0}))},t.prototype.componentWillUnmount=function(){this.m_pollTimeout&&(window.clearTimeout(this.m_pollTimeout),this.m_pollTimeout=void 0)},t.prototype.PollForStatus=function(){var e=this;this.m_pollTimeout||this.state.bExpired||this.FetchBroadcastStatus().then(function(t){1!=t.GetEResult()?e.setState({bExpired:!0}):(e.state.strThumbnail?e.setState({nThumbnailUpdateCounter:e.state.nThumbnailUpdateCounter+1}):e.FetchBroadcastThumbnail(),e.SchedulePollForStatus())})},t.prototype.SchedulePollForStatus=function(){var e=this;if(!this.m_pollTimeout){var t=1e3*this.state.nUpdateInterval;this.state.bThumbnailLoaded||(t=1e4),this.m_pollTimeout=window.setTimeout(function(){e.m_pollTimeout=void 0,e.PollForStatus()},t)}},t.prototype.FetchBroadcastStatus=function(){var e=wd.CMInterface;if(e){var t=fi.Init(Lf);return t.Body().set_steamid(this.props.broadcaster.steamid64),t.Body().set_broadcast_id(this.props.broadcastid),Rm.GetBroadcastStatus(e.GetServiceTransport(),t)}return Promise.reject("No CM interface")},t.prototype.FetchBroadcastThumbnail=function(){var e=this,t=wd.CMInterface;if(t){var i=fi.Init(Pf);i.Body().set_steamid(this.props.broadcaster.steamid64),i.Body().set_broadcast_id(this.props.broadcastid),Rm.GetBroadcastThumbnail(t.GetServiceTransport(),i).then(function(t){if(1==t.GetEResult()){var i=t.Body().thumbnail_url(),n=t.Body().update_interval();i&&n&&e.setState({strThumbnail:i,nUpdateInterval:n})}})}},t.prototype.OnWatch=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.broadcaster.steamid64,i=Xt(this,e);SteamClient.WebChat.OpenURLInClient(t,i.m_unPID)}else Ee(e,ai.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.broadcaster.steamid64),e.stopPropagation();this.OnClose()},t.prototype.OnClose=function(){this.setState({bDismissed:!0})},t.prototype.OnOpen=function(){this.setState({bDismissed:!1})},t.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},t.prototype.render=function(){var e=wd.AppInfoStore.GetAppInfo(this.props.appid),t=Sa.createElement("span",null,Sa.createElement("img",{src:e.icon_url,className:"productImage"}),Sa.createElement("span",{className:"productName"},e.name));if(this.props.broadcaster.accountid==wd.FriendStore.self.accountid){var i=this.props.viewer.display_name;return Sa.createElement("div",{className:"broadcastInviteSelf"},this.props.appid?Object(ua.d)("#ChatRoom_BroadcastInvite_YouInvited",i,t):Object(ua.d)("#ChatRoom_BroadcastInvite_YouInvited_NoAppID",i))}var n=this.props.broadcaster.display_name;if(this.state.bDismissed||this.state.bExpired)return Sa.createElement("div",{className:"broadcastInviteDismissed"},this.props.appid?Object(ua.d)("#ChatRoom_BroadcastInvite_Expired",n,t):Object(ua.d)("#ChatRoom_BroadcastInvite_Expired_NoAppID",n));var r=ai.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",o=this.state.nThumbnailUpdateCounter,a=Object(ua.d)("#ChatRoom_BroadcastInvite_Invite",n);return Sa.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg"},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement("img",{src:this.state.strThumbnail+"?n="+o,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),Sa.createElement("img",{src:r,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),Sa.createElement("div",{className:"noisePattern"})),Sa.createElement("div",{className:"rightInviteContainer"},Sa.createElement(Ph,null,Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",{className:"inviteLabel"},a),Sa.createElement("div",{className:"productName"},e.name))),">",Sa.createElement("button",{className:"DialogButton Primary inviteButtonWatchBroadcast",onClick:this.OnWatch},Object(ua.b)("#ChatRoom_BroadcastInvite_Watch")),Sa.createElement("div",{className:"closeButton",onClick:this.OnClose},Sa.createElement(Id._6,null))))},si.c([yn.a],t.prototype,"OnWatch",null),si.c([yn.a],t.prototype,"OnClose",null),si.c([yn.a],t.prototype,"OnOpen",null),si.c([yn.a],t.prototype,"ShowThumbnail",null),t=si.c([up.observer],t)}(Sa.Component),o_=function(e){function t(t){var i=e.call(this,t)||this;return i.m_pollTimeout=void 0,i.m_broadcastid=void 0,i.m_bExpired=!1,i.state={strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},i}return si.d(t,e),t.prototype.OnAccept=function(e){wd.BroadcastStore.ApproveViewerRequest(this.props.viewer.accountid,this.props.requestid)},t.prototype.OnClose=function(){wd.BroadcastStore.RejectViewerRequest(this.props.viewer.accountid,this.props.requestid)},t.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},t.prototype.render=function(){var e=wd.AppInfoStore.GetAppInfo(this.props.appid),t=Sa.createElement("span",null,Sa.createElement("img",{src:e.icon_url,className:"productImage"}),Sa.createElement("span",{className:"productName"},e.name)),i=this.props.viewer.display_name,n=wd.BroadcastStore.GetRequestState(this.props.viewer.accountid,this.props.requestid),r=void 0!==this.m_broadcastid&&this.m_broadcastid!=wd.BroadcastStore.broadcastid;if(void 0===this.m_broadcastid&&"0"!==wd.BroadcastStore.broadcastid&&(this.m_broadcastid=wd.BroadcastStore.broadcastid),r||n!=vl.k_EPending){var o="#ChatRoom_BroadcastViewRequest_Expired";return n==vl.k_EAccepted?o="#ChatRoom_BroadcastViewRequest_Accepted":n==vl.k_ERejected&&(o="#ChatRoom_BroadcastViewRequest_Dismissed"),Sa.createElement("div",{className:"broadcastViewRequestDismissed"},Object(ua.d)(o,i,t))}var a=ai.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",s=(this.state.bThumbnailLoaded,this.state.nThumbnailUpdateCounter),c=Object(ua.d)("#ChatRoom_BroadcastViewRequest_Invite",i);return Sa.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg broadcastViewRequestMsg"},Sa.createElement("div",{className:"leftInviteContainer"},this.state.strThumbnail&&Sa.createElement("img",{src:this.state.strThumbnail+"?n="+s,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),Sa.createElement("img",{src:a,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),Sa.createElement("div",{className:"noisePattern"})),Sa.createElement("div",{className:"rightInviteContainer"},Sa.createElement(Ph,null,Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",{className:"inviteLabel"},c),Sa.createElement("div",{className:"productName"},e.name))),Sa.createElement("button",{className:"inviteButton inviteButtonWatchBroadcast",onClick:this.OnAccept},Object(ua.b)("#ChatRoom_BroadcastViewRequest_Accept")),Sa.createElement("div",{className:"closeButton",onClick:this.OnClose})))},si.c([yn.a],t.prototype,"OnAccept",null),si.c([yn.a],t.prototype,"OnClose",null),si.c([yn.a],t.prototype,"ShowThumbnail",null),t=si.c([up.observer],t)}(Sa.Component),a_=function(e){function t(t){var i=e.call(this,t)||this;return i.m_pollTimeout=void 0,i.m_broadcastid=void 0,i.m_bExpired=!1,i.state={strThumbnail:"",nUpdateInterval:10,bThumbnailLoaded:!1,nThumbnailUpdateCounter:0},i}return si.d(t,e),t.prototype.OnWatch=function(e){if("undefined"!=typeof SteamClient&&void 0!==SteamClient.WebChat){var t="steam://broadcast/watch/"+this.props.broadcaster.steamid64,i=Xt(this,e);SteamClient.WebChat.OpenURLInClient(t,i.m_unPID)}else Ee(e,ai.a.COMMUNITY_BASE_URL+"broadcast/watch/"+this.props.broadcaster.steamid64),e.stopPropagation()},t.prototype.ShowThumbnail=function(){this.setState({bThumbnailLoaded:!0})},t.prototype.render=function(){var e=this.props.broadcaster.persona.current_game_name,t=this.props.broadcaster.display_name,i=ai.a.COMMUNITY_CDN_URL+"public/images/broadcast/apphub_default_thumbnail.jpg",n=(this.state.bThumbnailLoaded,this.state.nThumbnailUpdateCounter),r=Object(ua.d)("#ChatRoom_BroadcastInvite_WatchGame",t);return Sa.createElement("div",{className:"msg ChatMessageInvite broadcastInviteMsg"},Sa.createElement("div",{className:"leftInviteContainer"},this.state.strThumbnail&&Sa.createElement("img",{src:this.state.strThumbnail+"?n="+n,onLoad:this.ShowThumbnail,className:"broadcastThumbnail"+(this.state.bThumbnailLoaded?" loaded":"")}),Sa.createElement("img",{src:i,className:"broadcastThumbnail broadcastThumbnailFallback"+(this.state.bThumbnailLoaded?"":" loaded")}),Sa.createElement("div",{className:"noisePattern"})),Sa.createElement("div",{className:"rightInviteContainer"},Sa.createElement(Ph,null,Sa.createElement("div",{className:"centerBlock"},Sa.createElement("div",{className:"inviteLabel"},r),e&&Sa.createElement("div",{className:"productName"},e))),">",Sa.createElement("button",{className:"DialogButton Primary inviteButtonWatchBroadcast",onClick:this.OnWatch},Object(ua.b)("#ChatRoom_BroadcastInvite_Watch"))))},si.c([yn.a],t.prototype,"OnWatch",null),si.c([yn.a],t.prototype,"ShowThumbnail",null),t}(Sa.Component);!function(e){e[e.NotLoaded=0]="NotLoaded",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded"}(n_||(n_={}));var s_,c_=n_.NotLoaded,l_=[],u_=function(e){function t(t){var i=e.call(this,t)||this;return i.m_strPlayerID="",i.m_player=null,i.m_playerContainer=null,i.m_bPlayerReady=!1,i.state={bYoutubeLoaded:!1},i}return si.d(t,e),t.prototype.componentWillMount=function(){this.m_strPlayerID="YoutubePlayer_"+t.s_nPlayerIndex++},t.prototype.componentWillUnmount=function(){this.DestroyPlayer(),Dt(this.OnYoutubeScriptsReady)},t.prototype.shouldComponentUpdate=function(e,t){if(!this.m_player)return!1;var i=this.props;return i.autoplay!=e.autoplay||i.controls!=e.controls||i.showInfo!=e.showInfo||i.video!=e.video?(this.CreatePlayer(e),!1):(i.width==e.width&&i.height==e.height||this.m_bPlayerReady&&this.m_player.setSize(e.width,e.height),!1)},t.prototype.DestroyPlayer=function(){if(this.m_player)try{this.m_player.stopVideo&&this.m_player.stopVideo(),this.m_player.destroy&&this.m_player.destroy()}catch(e){}finally{this.m_player=null}},t.prototype.BindPlayerContainer=function(e){this.m_playerContainer!=e&&(this.m_playerContainer=e,this.DestroyPlayer(),this.m_playerContainer&&kt(this.OnYoutubeScriptsReady))},t.prototype.OnYoutubeScriptsReady=function(){this.CreatePlayer(this.props)},t.prototype.CreatePlayer=function(e){if(this.DestroyPlayer(),this.m_playerContainer){var t=!1===e.autoplay?0:1,i=!0===e.showInfo?1:0,n=!0===e.controls?1:0,r=!0===e.showFullscreenBtn?1:0,o={width:String(e.width),height:String(e.height),videoId:e.video,playerVars:{autoplay:t,showinfo:i,autohide:1,fs:r,modestbranding:1,rel:0,playsinline:0,iv_load_policy:3,controls:n,start:e.startSeconds},events:{onReady:this.OnPlayerReady,onStateChange:this.OnPlayerStateChange,onError:this.OnError}},a=this.m_playerContainer.firstElementChild;this.m_bPlayerReady=!1,this.m_player=new YT.Player(a,o)}},t.prototype.OnPlayerReady=function(e){if(this.m_bPlayerReady=!0,this.props.onVideoInfoChanged){var t=this.m_player.getVideoData(),i={strAuthor:"",strTitle:"",strVideoID:""};t.author&&(i.strAuthor=t.author),t.title&&(i.strTitle=t.title),t.video_id&&(i.strVideoID=t.video_id),this.props.onVideoInfoChanged(i)}this.m_player.setSize(this.props.width,this.props.height),this.props.onPlayerReady&&this.props.onPlayerReady()},t.prototype.OnPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.UNSTARTED:case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:case YT.PlayerState.BUFFERING:break;case YT.PlayerState.ENDED:this.props.onMovieEnd&&this.props.onMovieEnd()}},t.prototype.OnError=function(e){console.log("Youtube: Playback failed",e),this.props.onError&&this.props.onError(e)},t.prototype.render=function(){return Sa.createElement("div",{key:this.m_strPlayerID,ref:this.BindPlayerContainer,className:"YoutubePlayer"},Sa.createElement("div",null,"Loading Youtube..."))},t.s_nPlayerIndex=0,si.c([yn.a],t.prototype,"BindPlayerContainer",null),si.c([yn.a],t.prototype,"OnYoutubeScriptsReady",null),si.c([yn.a],t.prototype,"CreatePlayer",null),si.c([yn.a],t.prototype,"OnPlayerReady",null),si.c([yn.a],t.prototype,"OnPlayerStateChange",null),si.c([yn.a],t.prototype,"OnError",null),t}(Sa.Component),d_=function(e){var t=e.children;return Ma.a.createElement(Ph,{text:t},Ma.a.createElement("div",{className:"spoilerMsgText"},Ma.a.createElement("div",{className:"spoilerMsg"},t)))},p_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_divMsgTxt=null,t}return si.d(t,e),t.prototype.CheckLoadPrettify=function(){var e=this;if(this.m_divMsgTxt){var t=this.m_divMsgTxt.ownerDocument.defaultView;if(t&&"object"!=typeof t.PR&&!0!==t.PR){t.PR=!0;var i=t.document.createElement("script");t.document.head.appendChild(i),i.onload=function(){e.TryRunPrettyPrint()},i.src=ai.a.COMMUNITY_CDN_ASSET_URL+"prettify/prettify.js"}}},t.prototype.BindMsgTxt=function(e){this.m_divMsgTxt=e},t.prototype.TryRunPrettyPrint=function(){if(this.CheckLoadPrettify(),this.m_divMsgTxt){var e=this.m_divMsgTxt.ownerDocument.defaultView;e&&"object"==typeof e.PR&&e.PR.prettyPrint()}},t.prototype.componentDidMount=function(){this.TryRunPrettyPrint()},t.prototype.componentDidUpdate=function(){this.TryRunPrettyPrint()},t.prototype.render=function(){return Ma.a.createElement("div",{className:"ChatMsgSlashCode",ref:this.BindMsgTxt},Ma.a.createElement("pre",{className:"prettyprint"},this.props.children))},si.c([yn.a],t.prototype,"BindMsgTxt",null),t}(Ma.a.Component),m_=function(e){var t=e.children;return Ma.a.createElement("div",{className:"ChatMsgSlashPre"},Ma.a.createElement("pre",null,t))},h_=function(e){var t=e.children;return Ma.a.createElement("div",{className:"quoteMsgText"},Ma.a.createElement("div",{className:"quoteMsg"},t))},g_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.GetArgument(),t=this.props.children,i=null,n=At(e);return n!=e&&(i=n),t||(i=n),wd.SettingsStore.FriendsSettings.bDisableEmbedInlining&&"string"!=typeof t?Sa.createElement(Vt,{href:e},Sa.createElement(Id.v,null),n):Sa.createElement(we,{href:e},i||t)},t}(Fa),f_=function(e){function t(t){var i=e.call(this,t)||this,n=wd.ChatStore.EmbedStore.GetCollapsedState(i.props.unAccountIDSender,i.props.msgUniqueKey),r=wd.ChatStore.EmbedStore.GetWidths(i.props.unAccountIDSender,i.props.msgUniqueKey);return i.state={nResizedWidth:n?16:r?r.nDesiredWidth:0,bResized:void 0!==r,bIsResizing:!1,bIsRestoring:!1,bMinimized:n,bIsMinimizing:!1},i.m_frameInitialXPos=-1,i.m_frameInitialYPos=-1,i.m_frameInitialWidth=-1,i.m_frameDefaultWidth=r?r.nDefaultWidth:-1,i.m_frameDesiredWidth=r?r.nDesiredWidth:-1,i}return si.d(t,e),t.prototype.BindContainer=function(e){this.m_elContainer=e,this.m_elContainer&&this.props.height>450&&this.HandleTallImages()},t.prototype.handleCollapse=function(e){var t=this;this.state.bMinimized||(this.m_frameDesiredWidth=this.m_elContainer.clientWidth),this.m_animationCollapse&&this.m_animationCollapse.Cancel();var i=!this.state.bMinimized,n=i?this.m_frameDesiredWidth:16,r=i?16:this.m_frameDesiredWidth;this.setState({nResizedWidth:n,bMinimized:!1,bIsMinimizing:!0},function(){t.m_animationCollapse=new zd(t,{nResizedWidth:r},{msDuration:300,timing:"sine",setStateOnComplete:{bMinimized:i,bIsMinimizing:!1},onComplete:t.OnSizeChanged}),t.m_animationCollapse.Start()}),wd.ChatStore.EmbedStore.SetCollapsedState(this.props.unAccountIDSender,this.props.msgUniqueKey,i)},t.prototype.OnSizeChanged=function(){this.props.onSizeChanged("BBCodeResizableComponent "+this.props.msgUniqueKey+this.state.bResized+this.state.bMinimized)},t.prototype.handleRestore=function(e){var t=this;this.state.bResized&&(this.m_animationCollapse&&this.m_animationCollapse.Cancel(),this.setState({bIsRestoring:!0},function(){t.m_animationCollapse=new zd(t,{nResizedWidth:t.m_frameDefaultWidth},{msDuration:300,timing:"sine",setStateOnComplete:{bMinimized:!1,bIsRestoring:!1,bResized:!1},onComplete:t.OnSizeChanged}),t.m_animationCollapse.Start()}),wd.ChatStore.EmbedStore.SetWidths(this.props.unAccountIDSender,this.props.msgUniqueKey,this.m_frameDefaultWidth,this.m_frameDefaultWidth))},t.prototype.OnResize=function(e){var t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.HandleMouseUp)},t.prototype.HandleMouseMove=function(e){this.m_frameInitialXPos<0&&(this.m_frameInitialXPos=e.clientX),this.m_frameInitialWidth<0&&(this.m_frameInitialWidth=this.m_elContainer.clientWidth),this.m_frameDefaultWidth<0&&!this.state.bResized&&(this.m_frameDefaultWidth=this.m_elContainer.clientWidth),this.m_frameInitialYPos<0&&(this.m_frameInitialYPos=e.clientY);var t=e.clientX-this.m_frameInitialXPos,i=e.clientY-this.m_frameInitialYPos,n=this.m_frameInitialWidth+t+i,r="image"==this.props.strMediaType?64:320;n<r&&(n=r),n>1280&&(n=1280),this.setState({nResizedWidth:n,bResized:!0,bIsResizing:!0}),this.OnSizeChanged()},t.prototype.HandleTallImages=function(){var e=this.props.width/this.props.height,t=450*e,i=this.props.width;i>Math.min(1280,t)&&(i=Math.min(1280,t)),i<parseInt(this.m_elContainer.ownerDocument.defaultView.getComputedStyle(this.m_elContainer).maxWidth)&&this.setState({nMaxWidth:i}),this.OnSizeChanged()},t.prototype.HandleMouseUp=function(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.HandleMouseUp),this.m_frameInitialXPos=-1,this.m_frameInitialYPos=-1,this.m_frameInitialWidth=-1,this.state.bIsResizing&&this.setState({bIsResizing:!1}),!this.state.bMinimized&&this.m_elContainer&&(this.m_frameDesiredWidth=this.m_elContainer.clientWidth),wd.ChatStore.EmbedStore.SetWidths(this.props.unAccountIDSender,this.props.msgUniqueKey,this.m_frameDesiredWidth,this.m_frameDefaultWidth)},t.prototype.render=function(){var e={};this.state.nResizedWidth>0?e.width=this.state.nResizedWidth+"px":this.state.nMaxWidth&&(e.maxWidth=this.state.nMaxWidth+"px");var t="BBCodeResizableComponent";this.props.className&&(t+=" "+this.props.className),this.state.bResized&&(t+=" Resized"),this.state.bIsResizing&&(t+=" ActivelyResizing"),this.state.bMinimized&&(t+=" Minimized"),this.state.bIsMinimizing&&(t+=" Minimizing");var i=this.props.titleInfo?this.props.titleInfo:"";return Sa.createElement(Ph,{style:this.props["data-copystyle"],text:this.props["data-copytext"]},Sa.createElement("div",{className:t,style:e,ref:this.BindContainer},Sa.createElement("div",{className:"BBCodeCollapsed",onClick:this.handleCollapse,title:i},Object(ua.b)("#bbcode_"+this.props.strMediaType+"_minimized")),this.props.children,Sa.createElement("div",{className:"BBCodeRestoreControl",onClick:this.handleRestore,title:Object(ua.b)("#bbcode_"+this.props.strMediaType+"_tooltip_restore")},Sa.createElement("div",{className:"restoreSize"})),Sa.createElement("div",{className:"BBCodeResizeControl",onMouseDown:this.OnResize,title:Object(ua.b)("#bbcode_"+this.props.strMediaType+"_tooltip_resize")},Sa.createElement(Id.L,null)),Sa.createElement("div",{className:"BBCodeCollapseControl",onClick:this.handleCollapse,title:this.state.bMinimized?Object(ua.b)("#bbcode_"+this.props.strMediaType+"_tooltip_uncollapse"):Object(ua.b)("#bbcode_"+this.props.strMediaType+"_tooltip_collapse")},Sa.createElement(Id._5,null))))},si.c([yn.a],t.prototype,"BindContainer",null),si.c([yn.a],t.prototype,"handleCollapse",null),si.c([yn.a],t.prototype,"OnSizeChanged",null),si.c([yn.a],t.prototype,"handleRestore",null),si.c([yn.a],t.prototype,"OnResize",null),si.c([yn.a],t.prototype,"HandleMouseMove",null),si.c([yn.a],t.prototype,"HandleTallImages",null),si.c([yn.a],t.prototype,"HandleMouseUp",null),t}(Sa.Component),__=function(e){function t(t){var i=e.call(this,t)||this;return i.state={strTitle:"",strAuthor:"",strVideoID:""},i}return si.d(t,e),t.prototype.OnVideoInfoChanged=function(e){var t=e.strTitle,i=e.strAuthor,n=e.strVideoID;this.setState({strTitle:t,strAuthor:i,strVideoID:n})},t.prototype.OnPlayerReady=function(){this.props.context.onLoad&&this.props.context.onLoad("BBCodeYouTubeComponent "+this.state.strVideoID)},t.prototype.OnPlaceholderImageLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("BBCodeYouTubeComponent "+this.state.strVideoID)},t.prototype.componentDidMount=function(){var e=this;On.findDOMNode(this).ownerDocument.defaultView.setTimeout(function(){e.props.context.onLoad&&e.props.context.onLoad("BBCodeYouTubeComponent "+e.state.strVideoID)},250)},t.prototype.GetVideoID=function(){return this.GetArgument("v").replace(/^[^a-z0-9\-_]*([a-z0-9\-_]+).*$/gi,"$1")},t.prototype.render=function(){var e=this.state.strAuthor,t=this.state.strTitle,i="https://www.youtube.com/watch?v="+this.state.strVideoID,n=this.GetArgument("t");if(n&&(i+="&t="+encodeURIComponent(n)),wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){var r="https://www.youtube.com/watch?v="+encodeURIComponent(this.GetVideoID());return n&&(r+="&t="+encodeURIComponent(n)),Sa.createElement(Vt,{href:r},Sa.createElement(Id._7,null),r)}var o=0;if(n){var a=n.match(/^(?:([\d]+)h)?(?:([\d]+)m)?(?:([\d]+)s)?/);a[0].length>0?(void 0!=a[1]&&(o+=3600*parseInt(a[1])),void 0!=a[2]&&(o+=60*parseInt(a[2])),void 0!=a[3]&&(o+=parseInt(a[3]))):o=parseInt(n)}return Sa.createElement(Ph,{style:"block",text:[t,i]},Sa.createElement(f_,{className:"BBCodeYouTubeComponent",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,strMediaType:"video",titleInfo:t,onSizeChanged:this.props.context.onLoad},Sa.createElement("div",{className:"BBCodeYouTubeComponent_Sizer BBCodeResizableElement"},Sa.createElement(u_,{video:this.GetVideoID(),startSeconds:o,width:640,height:385,autoplay:!1,controls:!0,showFullscreenBtn:!0,onVideoInfoChanged:this.OnVideoInfoChanged,onPlayerReady:this.OnPlayerReady}),Sa.createElement(Ph,{style:"block",text:[t,i]},Sa.createElement("img",{src:ai.a.PUBLIC_SHARED_URL+"images/responsive/youtube_16x9_placeholder.gif",width:"100%",onLoad:this.OnPlaceholderImageLoad}))),t.length>0&&Sa.createElement(we,{className:"test HideWhenMinimized",href:i},Sa.createElement("div",{className:"BBCodeTitle"},t)),e.length>0&&Sa.createElement("div",{className:"BBCodeDetails HideWhenMinimized"},Object(ua.b)("#bbcode_youtube_author",e))))},si.c([yn.a],t.prototype,"OnVideoInfoChanged",null),si.c([yn.a],t.prototype,"OnPlayerReady",null),si.c([yn.a],t.prototype,"OnPlaceholderImageLoad",null),t}(Fa);!function(e){e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error"}(s_||(s_={}));var y_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={eLoadingState:s_.Loading},i}return si.d(t,e),t.prototype.IsEmbeddedInOtherTag=function(){for(var e=0,t=this.props.parentTags;e<t.length;e++)if("tweet"==t[e])return!0;return!1},t.prototype.OnImageLoad=function(){this.setState({eLoadingState:s_.Loaded}),this.props.context.onLoad&&this.props.context.onLoad("BBCodeImage "+this.props.args.src)},t.prototype.OnImageError=function(){this.setState({eLoadingState:s_.Error})},t.prototype.render=function(){var e,t=this.GetArgument("thumbnail_src"),i=this.GetArgument("srcset",!0),n=this.GetArgument("src"),r=this.GetArgument("title"),o=this.state.eLoadingState,a=parseInt(this.GetArgument("width")),s=parseInt(this.GetArgument("height")),c=void 0!==this.GetArgument("giphy_search");if(c&&(e="/giphy "+this.GetArgument("giphy_search")),wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){if(c)return Sa.createElement(Vt,{href:n,copyText:[e,n]},Sa.createElement("div",{className:"NonInlinedEmbedLogo NonInlinedEmbedLogo_Giphy"}),Sa.createElement("span",{style:{fontWeight:"bold"}}," ",Object(ua.d)("#bbcode_image_link_giphy",Sa.createElement("span",{className:"giphySearch"},this.GetArgument("giphy_search")))));var l=n;return r&&(l=Object(ua.b)("#bbcode_disable_embed_inlining_parenthetical",r,Lt(n))),Sa.createElement(Vt,{href:n,copyText:[r,n]},Sa.createElement(Id.w,null),l)}if("true"==this.GetArgument("proxied")&&(t+="?s=652x652"),this.IsEmbeddedInOtherTag())return Sa.createElement(b_,{className:"embeddedImg",context:this.props.context,src:t,onContextMenu:Ie});var u="chatImageContainer";c&&(u+=" giphyImg"),o==s_.Error&&(u+=" FailedToLoad");var d={display:"none"};return o==s_.Loaded&&(d={display:"block"}),Sa.createElement(Sa.Fragment,null,c&&Sa.createElement(Ph,null,Sa.createElement("div",null,e)),Sa.createElement(Ph,{style:"block",text:[r,n]},Sa.createElement(f_,{className:u,width:a,height:s,strMediaType:"image",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,titleInfo:c?Object(ua.b)("#bbcode_image_link_giphy",this.GetArgument("giphy_search")):n,onSizeChanged:this.props.context.onLoad},o==s_.Loading&&Sa.createElement("div",{className:"LoadingImage"},"Loading image: ",Sa.createElement(we,{href:n},n)),o==s_.Error&&Sa.createElement("div",{className:"FailedToLoadImage"},Sa.createElement("span",null,"Failed to load image:")," ",Sa.createElement(we,{href:n},n)),Sa.createElement("img",{style:d,className:"chatImageFull BBCodeResizableElement",src:t,srcSet:i,onLoad:this.OnImageLoad,onError:this.OnImageError,onContextMenu:function(e){Re(e,n)}}),o==s_.Loaded&&Sa.createElement(Sa.Fragment,null,Sa.createElement(we,{className:"chatImageURL",href:n,title:c?Object(ua.b)("#bbcode_image_tooltip_link_giphy",this.GetArgument("giphy_search")):Object(ua.b)("#bbcode_image_tooltip_link")},Sa.createElement(Id.J,null),Sa.createElement("div",{className:"giphyTag"},c&&Object(ua.d)("#bbcode_image_link_giphy",Sa.createElement("span",{className:"giphySearch"},this.GetArgument("giphy_search")))))))))},si.c([yn.a],t.prototype,"OnImageLoad",null),si.c([yn.a],t.prototype,"OnImageError",null),t}(Fa),v_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bSeeking:!1,bPlay:!1,bError:!1},i}return si.d(t,e),t.prototype.StartVideo=function(){this.m_elVideo&&this.m_elVideo.play()},t.prototype.BindVideo=function(e){this.m_elVideo=e},t.prototype.OnVideoPlay=function(){this.setState({bPlay:!0})},t.prototype.OnVideoPause=function(){this.state.bPlay||this.state.bSeeking||this.setState({bPlay:!1})},t.prototype.OnVideoError=function(e){this.setState({bError:!0})},t.prototype.OnVideoLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeVideo "+this.props.context.key)},t.prototype.render=function(){var e=(this.GetArgument("simple"),this.GetArgument("src")),t=this.GetArgument("title"),i=this.state.bError;if(wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){var n=e;return t&&(n=Object(ua.b)("#bbcode_disable_embed_inlining_parenthetical",t,Lt(e))),Sa.createElement(Vt,{href:e},Sa.createElement(Id._1,null),n)}var r,o={controls:this.state.bPlay,autoPlay:!1,loop:!1,muted:!1};return i&&(r=Sa.createElement(we,{className:"failedVideoURL",href:e,title:Object(ua.b)("#bbcode_video_tooltip_link")},Sa.createElement("span",{className:"failedVideoSpan"},e))),i?Sa.createElement("div",{className:"ChatMessageErrorSendingAlert VideoFailed"},Object(ua.d)("#Chat_VideoLoadError",r)):Sa.createElement(Ph,{style:"block",text:[t,e]},Sa.createElement(f_,{className:"chatVideoContainer",strMediaType:"video",unAccountIDSender:this.props.context.unAccountIDSender,msgUniqueKey:this.props.context.key,titleInfo:e,onSizeChanged:this.props.context.onLoad},Sa.createElement("video",si.a({className:"BBCodeResizableElement"},o,{ref:this.BindVideo,onPause:this.OnVideoPause,onPlay:this.OnVideoPlay,controlsList:"nodownload",onError:this.OnVideoError,onLoadedData:this.OnVideoLoaded}),Sa.createElement("source",{src:e,type:this.GetArgument("type",!0),onError:this.OnVideoError,onLoad:this.OnVideoLoaded})),!this.state.bPlay&&Sa.createElement("div",{className:"chatVideoPlayControl HideWhenMinimized",onClick:this.StartVideo},Sa.createElement("div",{className:"playButtonContainer"},Sa.createElement(Id.H,null))),Sa.createElement(we,{className:"chatImageURL",href:e,title:Object(ua.b)("#bbcode_video_tooltip_link")},Sa.createElement(Id.J,null))))},si.c([yn.a],t.prototype,"StartVideo",null),si.c([yn.a],t.prototype,"BindVideo",null),si.c([yn.a],t.prototype,"OnVideoPlay",null),si.c([yn.a],t.prototype,"OnVideoPause",null),si.c([yn.a],t.prototype,"OnVideoError",null),si.c([yn.a],t.prototype,"OnVideoLoaded",null),t}(Fa),b_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("ImgNotifyChatOnLoad "+this.props.src)},t.prototype.render=function(){var e=this.props,t=(e.context,si.f(e,["context"]));return Sa.createElement("img",si.a({},t,{onLoad:this.OnLoad}))},si.c([yn.a],t.prototype,"OnLoad",null),t}(Sa.Component),C_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.CopyToClipboard=function(){var e=this.GetArgument("url");e&&0!=e.length&&Ad.i(e)},t.prototype.HandleFocus=function(e){e.target.select()},t.prototype.OnLoad=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeOpenGraph.OnLoad "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("img"),t=this.GetArgument("title"),i=this.GetArgument("desc"),n=this.GetArgument("url"),r=Lt(n);if(wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){var o=n;return t&&(o=Object(ua.b)("#bbcode_disable_embed_inlining_parenthetical",t,r)),Sa.createElement(Vt,{href:n,copyText:[o,n]},Sa.createElement(Id.v,null),o)}return Sa.createElement(Ph,{style:"block",text:[t,i,n]},Sa.createElement("div",{className:"ChatMessageOpenGraph"},Sa.createElement("div",{className:"OpenGraphContent"},e&&e.length>0&&Sa.createElement("div",{className:"OpenGraphImgBackground"},Sa.createElement("img",{className:"ChatMessageOpenGraph_Image",src:e,onLoad:this.OnLoad})),e&&e.length>0&&Sa.createElement(we,{className:"OpenGraphImgContainer",href:n},Sa.createElement(jt,{width:256,height:140,context:this.props.context,className:"ChatMessageOpenGraph_Image",src:e,onContextMenu:function(e){Ie(e,n)}})),Sa.createElement("div",{className:"ChatMessageOpenGraph_Body"},t&&t.length>0&&Sa.createElement(we,{className:"ChatMessageOpenGraph_Title",href:n},t),i&&i.length>0&&Sa.createElement("div",{className:"ChatMessageOpenGraph_Description"},i)),Sa.createElement("div",{style:{clear:"left"}})),Sa.createElement("div",{className:"OpenGraphFooter"},Sa.createElement("div",{className:"OpenGraphMessageURL"},Sa.createElement("span",{className:"OpenGraphMessageURLPosition",onFocus:this.HandleFocus,onClick:this.HandleFocus},Sa.createElement("span",{className:"OpenGraphMessageURL_short"},r),Sa.createElement("input",{className:"OpenGraphMessageURL_full",value:n,onFocus:this.HandleFocus,onClick:this.HandleFocus,readOnly:!0}))),Sa.createElement("div",{className:"OpenGraphURLButton CopyToClipboard",onClick:this.CopyToClipboard,title:Object(ua.b)("#Chat_Copy_Link_Clipboard")},Sa.createElement(Id.g,null)))))},si.c([yn.a],t.prototype,"CopyToClipboard",null),si.c([yn.a],t.prototype,"HandleFocus",null),si.c([yn.a],t.prototype,"OnLoad",null),t}(Fa),S_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.FormatCreatedDate=function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(e),n=t[i.getMonth()];return i.getDate()+" "+n+" "+i.getFullYear()},t.prototype.OpenTweet=function(e){for(var t=!1,i=e.target,n=e.currentTarget;i&&i!=n;){if("A"==i.nodeName||i.classList.contains("chatVideoContainer")){t=!0;break}i=i.parentElement}t||Ad.a(n)||Ee(e,this.GetArgument("url"))},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeTweet "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("created"),t=this.GetArgument("profile_name"),i=this.GetArgument("profile_screen_name"),n=this.GetArgument("profile_image"),r=this.GetArgument("profile_verified"),o=this.GetArgument("url"),a="http://twitter.com/"+i,s="true"==r;if(e=this.FormatCreatedDate(e),wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){var c=new Date(e),l={year:"numeric",month:"long",day:"numeric"},u=c.toLocaleDateString(ua.a.GetPreferredLocales(),l),d=void 0;if("string"==typeof this.props.children)d=this.props.children;else if(this.props.children instanceof Array)for(var p=0,m=this.props.children;p<m.length;p++){var h=m[p];if("string"==typeof h){d=h;break}}return Sa.createElement(Vt,{href:o,copyText:[d,o]},Sa.createElement("div",{className:"NonInlinedEmbedLogo NonInlinedEmbedLogo_Twitter"}),Object(ua.b)("#bbcode_disable_embed_inlining_tweet",t,u),Sa.createElement("br",null),Sa.createElement("div",{className:"NonInlinedEmbedSingleLine"},d))}return Sa.createElement("div",{className:"ChatMessageTweet",onClick:this.OpenTweet},Sa.createElement(Ph,{style:"block",text:t+" (@"+i+")"},Sa.createElement("div",{className:"ChatMessageTweet_Header"},Sa.createElement(we,{className:"ChatMessageTweet_ProfileImage",href:a},Sa.createElement("img",{src:n,onLoad:this.OnImageLoaded})),Sa.createElement("div",{className:"ChatMessageTweet_NameSection"},Sa.createElement("div",{className:"ChatMessageTweet_NameGroup"},Sa.createElement(we,{className:"ChatMessageTweet_Name",href:a},t),s&&Sa.createElement("div",{className:"ChatMessageTweet_Verified"})),Sa.createElement(we,{className:"ChatMessageTweet_ScreenName",href:a},"@",i)),Sa.createElement(we,{className:"ChatMessageTweet_Logo",href:o}))),Sa.createElement(Ph,{style:"block-continue prepend-innertext-with-newline",text:o},Sa.createElement("div",{className:"ChatMessageTweet_Body"},this.props.children)),Sa.createElement("div",{className:"ChatMessageTweet_Footer"},Sa.createElement("div",{className:"ChatMessageTweet_Created"},e)))},si.c([yn.a],t.prototype,"OpenTweet",null),si.c([yn.a],t.prototype,"OnImageLoaded",null),t}(Fa),M_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={bActivated:!1},i}return si.d(t,e),t.prototype.Activate=function(){this.setState({bActivated:!0})},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeOEmbed "+this.props.context.key)},t.prototype.render=function(){var e=this.GetArgument("url"),t=this.GetArgument("title"),i=this.GetArgument("author"),n=this.GetArgument("provider_name"),r=this.GetArgument("preview_image");if(wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){var o=e;return t&&(o=Object(ua.b)("#bbcode_disable_embed_inlining_parenthetical",t,e)),Sa.createElement(Vt,{href:e,copyText:[t,e]},Sa.createElement(Id.v,null),o)}var a=!this.state.bActivated;"SoundCloud"!=n&&"Spotify"!=n||(a=!1);var s;if(a)s=Sa.createElement("div",{className:"OEmbedPreview",onClick:this.Activate},Sa.createElement("div",{className:"oembedImgContainer"},Sa.createElement(Ph,{style:"block",text:[t,e]},Sa.createElement("img",{src:r,onLoad:this.OnImageLoaded})),Sa.createElement("div",{className:"oembedHint"},Object(ua.b)("#bbcode_oembed_preview_hint"))),Sa.createElement("div",{className:"oembedProvider"},n),Sa.createElement("div",{className:"oembedTitle"},t));else{var c=void 0,l=this.GetArgument("iframe_attrs");if(l)c=Sa.createElement(Wt,{strIFrameJSON:l,strProviderName:n});else{var u=this.props.children;"SoundCloud"==n&&(u=u.replace("visual=true","visual=false")),c=Sa.createElement("div",{className:"oembedInner",dangerouslySetInnerHTML:{__html:u}})}s=Sa.createElement(we,{className:"OpenGraphImgContainer",href:e},c,n&&n.length&&Sa.createElement("div",{className:"oembedProvider"},n),t&&t.length>0&&Sa.createElement("div",{className:"oembedTitle"},t),i&&i.length>0&&Sa.createElement("div",{className:"oembedAuthor"},Object(ua.b)("#bbcode_oembed_author",i)))}return Sa.createElement(Ph,{style:"block",text:[t,e]},Sa.createElement("div",{className:"BBCodeOEmbedComponent "+n},s))},si.c([yn.a],t.prototype,"Activate",null),si.c([yn.a],t.prototype,"OnImageLoaded",null),t}(Fa),F_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(d_,null,this.props.children)},t}(Fa),w_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.context,t=e.bAnimate,i=e.onAnimationStart,n=e.onAnimationEnd;return Sa.createElement("div",{className:zm("plusOne",t&&"MsgAnimating"),onAnimationStart:i,onAnimationEnd:n},"+1")},t}(Fa),B_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.context,t=e.bAnimate,i=e.onAnimationStart,n=e.onAnimationEnd,r=this.props.children,o=this.GetArgument("result"),a=zm("flipCoinAndResult",t&&"MsgAnimating"),s=zm("flipCoinContainer",o);return Sa.createElement(Ph,{text:r},Sa.createElement("div",{className:a,onAnimationStart:i,onAnimationEnd:n},Sa.createElement("div",null,"/flip:"),Sa.createElement("div",{className:s},Sa.createElement("div",{className:"coin"},Sa.createElement("div",{className:"front"}),Sa.createElement("div",{className:"front_b"}),Sa.createElement("div",{className:"mid"}),Sa.createElement("div",{className:"back"}),Sa.createElement("div",{className:"back_b"}))),Sa.createElement("div",{className:"resultLabel"},Object(ua.b)("#SlashCommandCoinFlip_Result_"+o))))},t}(Fa),O_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.Pad=function(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i},t.prototype.GetLastNumber=function(e){if(e<10)return e;var t=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))-1),i=Math.floor(e/t);return i-10*Math.floor(i/10)},t.prototype.render=function(){for(var e=this.props.children,t=this.GetArgument("min"),i=this.GetArgument("max"),n=this.Pad(this.GetArgument("result"),i.length),r=[],o=!0,a=0;a<i.length;a++){"0"!=n[a]&&(o=!1);var s=i.length-a,c=Math.max(.5*i.length,2),l=s*c/i.length,u=10-a;r.push(Sa.createElement("div",{key:"random"+a,className:"numberCounterContainer number"+s},Sa.createElement("div",{className:"numberColumn"+(o?" startingZero":""),style:{animationDuration:l+"s",animationName:"randomNumbers"+u}},Sa.createElement("div",{className:"randomNumberLabel randomActual"},n[a]),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+1)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+2)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+3)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+4)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+5)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+6)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+7)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+8)),Sa.createElement("div",{className:"randomNumberLabel"},this.GetLastNumber(parseInt(n[a])+9)),Sa.createElement("div",{className:"randomNumberLabel"},n[a])),Sa.createElement("div",{className:"randomNumberShadow"})))}var d=this.props.context,p=d.bAnimate,m=d.onAnimationStart,h=d.onAnimationEnd;return Sa.createElement(Ph,{text:e},Sa.createElement("div",{className:zm("randomMsg",p&&"MsgAnimating"),onAnimationStart:m,onAnimationEnd:h},Sa.createElement("span",null,"/random "),Sa.createElement("span",{className:"randomValues"},t,"-",i)," : ",r))},t}(Fa),I_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(h_,null,this.props.children)},t}(Fa),R_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(m_,null,this.props.children)},t}(Fa),E_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){return Sa.createElement(p_,null,this.props.children)},t}(Fa),T_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={invite:void 0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i=e.args.invitecode;return{invite:e.context.chat.ChatStore.InviteStore.GetInviteFromCode(i)}},t.prototype.render=function(){var e=this.props.context.chat.GetMember(this.props.context.unAccountIDSender);return Sa.createElement(If,{invite:this.state.invite,inviter:e})},t}(Fa),k_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={invite:void 0,inviter:void 0,invitee:void 0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i,n,r,o=e.args.chatgroupid,a=e.args.chatid,s=e.context.chat;return s.self.accountid==e.context.unAccountIDSender?(n=s.self,r=s.chat_partner,i=s.accountid_partner):(n=s.chat_partner,r=s.self,i=s.self.accountid),{invite:e.context.chat.ChatStore.InviteStore.GetDirectInviteInfo(o,a,i),inviter:n,invitee:r}},t.prototype.render=function(){return Sa.createElement(If,{invite:this.state.invite,inviter:this.state.inviter,invitee:this.state.invitee})},t}(Fa),D_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={inviter:void 0,inviteTarget:void 0,gameInvite:void 0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i,n,r=e.args.appid,o=e.args.connect,a=e.context.chat;return a.self.accountid==e.context.unAccountIDSender?(i=a.self,n=a.chat_partner):(i=a.chat_partner,n=a.self),{inviter:i,inviteTarget:n,gameInvite:e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(e.context.unAccountIDSender,e.context.rtTimestamp,parseInt(r),o,void 0)}},t.prototype.render=function(){return Sa.createElement(kf,{inviter:this.state.inviter,inviteTarget:this.state.inviteTarget,gameInvite:this.state.gameInvite})},t}(Fa),G_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={inviter:void 0,inviteTarget:void 0,gameInvite:void 0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i,n,r=e.args.appid,o=e.args.lobbyid,a=e.context.chat;return a.self.accountid==e.context.unAccountIDSender?(i=a.self,n=a.chat_partner):(i=a.chat_partner,n=a.self),{inviter:i,inviteTarget:n,gameInvite:e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(e.context.unAccountIDSender,e.context.rtTimestamp,parseInt(r),"",o)}},t.prototype.render=function(){return Sa.createElement(kf,{inviter:this.state.inviter,inviteTarget:this.state.inviteTarget,gameInvite:this.state.gameInvite})},t}(Fa),N_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={broadcastid:"",broadcaster:void 0,viewer:void 0,appid:0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i,n,r=e.args.broadcastid,o=Number(e.args.appid),a=e.context.chat;return a.self.accountid==e.context.unAccountIDSender?(i=a.self,n=a.chat_partner):(i=a.chat_partner,n=a.self),{broadcastid:r,broadcaster:i,viewer:n,appid:o}},t.prototype.render=function(){return Sa.createElement(r_,{broadcastid:this.state.broadcastid,appid:this.state.appid,broadcaster:this.state.broadcaster,viewer:this.state.viewer})},t}(Fa),L_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={broadcaster:void 0,viewer:void 0,requestid:0,appid:0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i,n,r=Number(e.args.requestid),o=e.context.chat,a=wd.FriendStore.self.persona.m_unGamePlayedAppID;return o.self.accountid!=e.context.unAccountIDSender?(i=o.self,n=o.chat_partner):(i=o.chat_partner,n=o.self),{requestid:r,appid:a,broadcaster:i,viewer:n}},t.prototype.render=function(){return Sa.createElement(o_,{requestid:this.state.requestid,appid:this.state.appid,broadcaster:this.state.broadcaster,viewer:this.state.viewer})},t}(Fa),A_=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bMounted=!1,i.state={bHaveVoteData:!1,bLocalVoteDown:!1,bLocalVoteUp:!1,nCommentCount:parseInt(i.GetArgument("num_comments_public"))},i}return si.d(t,e),t.prototype.componentWillUnmount=function(){this.m_bMounted=!1},t.prototype.componentDidMount=function(){var e=this;this.m_bMounted=!0;var t=wd.CMInterface;if(t){var i=this.GetArgument("fileid"),n=fi.Init(Ys,8509);n.Body().add_published_file_ids().set_published_file_id(i),t.SendMsgAndAwaitResponse(n,Zs).then(function(t){if(1==t.Body().eresult()&&1==t.Body().user_item_vote_details().length){var i=t.Body().user_item_vote_details()[0].vote();e.m_bMounted&&e.setState({bHaveVoteData:!0,bLocalVoteUp:1==i,bLocalVoteDown:2==i})}})}},t.prototype.VoteItem=function(e,t){var i=this,n=wd.CMInterface;if(n){var r=fi.Init(Ks,8507);r.Body().set_published_file_id(t),r.Body().set_vote_up(e),n.SendMsgAndAwaitResponse(r,Js).then(function(t){1==t.Body().eresult()&&i.m_bMounted&&i.setState({bLocalVoteUp:e,bLocalVoteDown:!e})})}},t.prototype.render=function(){var e=this,t=this.GetArgument("fileid"),i=this.GetArgument("url"),n=this.GetArgument("title"),r=this.GetArgument("description"),o=this.GetArgument("preview_url"),a=parseInt(this.GetArgument("file_type")),s=["SteamPublishedFile"];switch(a){case 4:s.push("video");break;case 3:case 5:s.push("image")}if(wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){var c=i;n&&(c=Object(ua.b)("#bbcode_disable_embed_inlining_steam_workshop",n));var l=Sa.createElement(Id.v,null);switch(a){case 4:l=Sa.createElement(Id._1,null);break;case 3:case 5:l=Sa.createElement(Id.w,null)}return Sa.createElement(Vt,{href:i,copyText:[c,i]},l,c)}var u=parseInt(this.GetArgument("num_comments_public")),d=parseInt(this.GetArgument("votes_up"));this.state.bLocalVoteUp&&d++;var p;return(n||r)&&(p=Sa.createElement(Ph,{text:[n,r,i]},Sa.createElement("div",{className:"ChatLargeImageContainer_Description"},n&&Sa.createElement(we,{className:"ChatMessageOpenGraph_Title",href:i},n),r&&Sa.createElement("div",{className:"ChatMessageOpenGraph_Description"},r)))),Sa.createElement("div",{className:s.join(" ")},o&&o.length>0&&Sa.createElement(we,{className:"ChatLargeImageContainer",href:i},Sa.createElement(b_,{context:this.props.context,className:"ChatLargeImageContainer_Image",src:o,onContextMenu:function(e){Re(e,i)}})),p,Sa.createElement(we,{className:"SteamPublishedFile_Logo",href:i}),this.state.bHaveVoteData&&Sa.createElement("div",null,Sa.createElement("div",{className:"workshopItemControls"},Sa.createElement("div",{className:"workshopItemControlCtn"},d>=0&&Sa.createElement("span",{className:"upvoteCount"},d),u>=0&&Sa.createElement("span",{className:"commentCount"},u),Sa.createElement("span",{className:this.state.bLocalVoteUp?"general_btn voteUp toggled":"general_btn voteUp",onClick:function(){e.VoteItem(!0,t)}},Object(ua.b)("#bbcode_community_publishedfile_vote_up")),Sa.createElement("span",{className:this.state.bLocalVoteDown?"general_btn voteDown toggled":"general_btn voteDown",onClick:function(){e.VoteItem(!1,t)}})))))},t}(Fa),P_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnCreateOfferClick=function(e){var t=parseInt(this.GetArgument("partner")),i="NewTradeOffer"+t;$t(e).open(this.GetArgument("url"),i,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.render=function(){var e=this.GetArgument("url"),t=parseInt(this.GetArgument("partner"));if(t&&t==this.props.context.unAccountIDSender){var i=this.props.context.chat.GetMember(t);if(i){var n=Object(ua.b)("#TradeOfferLink_Label");return Sa.createElement(Ph,{style:"block",text:[n,e]},Sa.createElement("div",{className:"ChatMessageInvite NoBGSplitInvite TradeOfferInvite"},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement(Rh,{friend:i,context:{chat:this.props.context.chat},bLarge:!0})),Sa.createElement("div",{className:"rightInviteContainer rightInvite_Horizontal"},Sa.createElement("div",{className:"rightInviteContainerContent"},Sa.createElement("div",{className:"inviteLabel TradeOfferInvite_Title"},Object(ua.d)("#TradeOfferLink_SharedTradeLink",i.display_name)),Sa.createElement(Tf,{url:e,strLabel:n})),Sa.createElement("button",{className:"inviteButton inviteButtonJoinChat",type:"button",onClick:this.OnCreateOfferClick},Object(ua.d)("#TradeOfferLink_SendUserOffer"))),Sa.createElement("div",{style:{clear:"left"}})))}}return Sa.createElement(we,{href:e},e)},si.c([yn.a],t.prototype,"OnCreateOfferClick",null),t}(Fa),x_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.ViewOfferClick=function(e){var t=this.GetArgument("id"),i=ai.a.COMMUNITY_BASE_URL+"tradeoffer/"+t+"/",n="ViewTradeOffer"+t;$t(e).open(i,n,"height=1120,width=1028,resize=yes,scrollbars=yes").focus()},t.prototype.ViewMyOffersClick=function(e){var t=this.props.context.chat.self.steamid64,i=this.GetArgument("id");Ee(e,ai.a.COMMUNITY_BASE_URL+"profiles/"+t+"/tradeoffers/sent/#tradeofferid_"+i)},t.prototype.render=function(){var e=this.GetArgument("id"),t=parseInt(this.GetArgument("sender"));if(!e&&this.GetArgument("url"))return Sa.createElement(P_,si.a({},this.props));var i=this.props.context.chat,n=i.self.accountid==t,r=Sa.createElement("span",{className:"inviteeNameLabel"},i.chat_partner.display_name);return Sa.createElement("div",{className:"ChatMessageInvite TradeOfferInvite"},Sa.createElement("div",{className:"leftInviteContainer"},Sa.createElement(Rh,{friend:n?i.self:i.chat_partner,context:{chat:i},bLarge:!0}),Sa.createElement(Id.Z,null)),Sa.createElement("div",{className:"rightInviteContainer"+(n?" rightInvite_Horizontal":"")},Sa.createElement("div",{className:"rightInviteContainerContent"},Sa.createElement(Ph,null,Sa.createElement("div",{className:"inviteLabel TradeOfferInvite_Title"},Object(ua.d)(n?"#TradeOffer_YouSentFriend":"#TradeOffer_FriendSentYou",r)),Sa.Children.count(this.props.children)>0&&Sa.createElement("div",{className:"TradeOffer_NoteFromFriendCtn"},Sa.createElement("div",{className:"TradeOffer_NoteFromFriend_QuoteArrow"}),Sa.createElement("div",{className:"inviteLabel TradeOffer_NoteFromFriend"},this.props.children)))),Sa.createElement("button",{className:"DialogButton Primary",type:"button",onClick:n?this.ViewMyOffersClick:this.ViewOfferClick},Object(ua.d)("#TradeOffer_ViewTradeOffer"))),Sa.createElement("div",{style:{clear:"left"}}))},si.c([yn.a],t.prototype,"ViewOfferClick",null),si.c([yn.a],t.prototype,"ViewMyOffersClick",null),t}(Fa),z_=function(e){function t(t){var i=e.call(this,t)||this;return i.state={broadcaster:void 0},i}return si.d(t,e),t.getDerivedStateFromProps=function(e,t){var i=new hi.a(e.args.broadcaster);return{broadcaster:wd.FriendStore.GetPlayer(i.GetAccountID())}},t.prototype.render=function(){return Sa.createElement(a_,{broadcaster:this.state.broadcaster})},t}(Fa),U_=function(e){function t(t){var i=e.call(this,t)||this;return i.m_bMounted=!1,i.state={bLoading:!0,bStillLoading:!1,bLoadFail:!1,bLoadSuccess:!1,description:null},i}return si.d(t,e),t.prototype.CopyToClipboard=function(){var e=this.GetArgument("url");e&&0!=e.length&&Ad.i(e)},t.prototype.componentWillUnmount=function(){this.m_bMounted=!1},t.prototype.componentDidMount=function(){var e=this;this.m_bMounted=!0;var t=wd.CMInterface;if(t){var i=parseInt(this.GetArgument("appid")),n=this.GetArgument("classid"),r=this.GetArgument("instanceid"),o=fi.Init(Ua);o.Body().set_language(ai.a.LANGUAGE),o.Body().set_appid(i);var a=o.Body().add_classes();a.set_classid(n),a.set_instanceid(r),la.GetAssetClassInfo(t.GetServiceTransport(),o).then(function(t){e.m_bMounted&&(1==t.GetEResult()?e.setState({bLoading:!1,bLoadFail:!1,bLoadSuccess:!0,description:t.Body().descriptions()[0]}):e.setState({bLoading:!1,bLoadFail:!0,bLoadSuccess:!1}))})}On.findDOMNode(this).ownerDocument.defaultView.setTimeout(function(){e.m_bMounted&&e.setState(function(e){return e.bLoading?{bStillLoading:!0}:null})},500)},t.prototype.OnImageLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeEconItem "+this.GetArgument("url"))},t.prototype.render=function(){var e=this.GetArgument("image"),t=this.GetArgument("url"),i=parseInt(this.GetArgument("appid")),n=this.GetArgument("contextid"),r=this.GetArgument("assetid"),o=this.GetArgument("market_hash_name"),a=parseInt(this.GetArgument("owner")),s=wd.AppInfoStore.GetAppInfo(i);if(a&&t){var c=this.props.context.chat.GetMember(a),l=c?c.display_name:this.GetArgument("persona"),u=Lt(t),d=ai.a.COMMUNITY_BASE_URL+"economy/image/"+e+"/512x512",p={color:""},m=ai.a.COMMUNITY_BASE_URL+"market/listings/"+i+"/"+o,h=ai.a.COMMUNITY_BASE_URL+"tradeoffer/new/?partner="+a+"&for_items[]="+i+"_"+n+"_"+r;return this.state.bLoadSuccess&&(this.state.description.name_color()&&(p.color="#"+this.state.description.name_color()),this.state.description.icon_url_large()?d=ai.a.COMMUNITY_BASE_URL+"economy/image/"+this.state.description.icon_url_large()+"/512x512":this.state.description.icon_url()&&(d=ai.a.COMMUNITY_BASE_URL+"economy/image/"+this.state.description.icon_url()+"/512x512")),Sa.createElement(Ph,{text:t},Sa.createElement("div",{className:"ChatMessageOpenGraph"},Sa.createElement("div",{className:"OpenGraphContent ClientFetchesData"},Sa.createElement("div",{className:"OpenGraphImgBackground"},Sa.createElement("img",{className:"ChatMessageOpenGraph_Image",src:d,onLoad:this.OnImageLoaded})),Sa.createElement(we,{className:"OpenGraphImgContainer",href:t},Sa.createElement(b_,{context:this.props.context,className:"ChatMessageOpenGraph_Image",src:d,onContextMenu:function(e){Ie(e,t)}})),Sa.createElement("div",{className:"ChatMessageOpenGraph_Body"},this.state.bStillLoading&&Sa.createElement(_m,{size:"medium",position:"center"}),this.state.bLoadSuccess&&Sa.createElement(Ph,{text:[Object(ua.b)("#bbcode_econ_ItemTitle",l,this.state.description.name()),t]},Sa.createElement("div",null,Sa.createElement(we,{className:"ChatMessageOpenGraph_Title",href:t,style:p},Object(ua.b)("#bbcode_econ_ItemTitle",l,this.state.description.name())),Sa.createElement("div",{className:"ChatMessageOpenGraph_Description"},Sa.createElement("div",{className:"EconItemOpenGraph_GameInfo"},Sa.createElement("img",{src:s.icon_url,onLoad:this.OnImageLoaded}),Sa.createElement("div",null,Sa.createElement("div",null,s.m_strName),Sa.createElement("div",null,this.state.description.type())))),Sa.createElement("div",{style:{marginTop:"1em"}},this.state.description.tradable()&&wd.CMInterface&&a!=wd.CMInterface.steamid.GetAccountID()&&Sa.createElement(we,{className:"general_btn inline",href:h},Object(ua.b)("#bbcode_econ_TradeWithOwner",l)),this.state.description.marketable()&&Sa.createElement(we,{className:"general_btn inline",href:m},Object(ua.b)("#bbcode_econ_ViewInMarket"))))),this.state.bLoadFail&&Sa.createElement("div",null,Sa.createElement(we,{className:"ChatMessageOpenGraph_Title",href:t},Object(ua.b)("#bbcode_econ_UnknownItem")),Sa.createElement("div",{className:"ChatMessageOpenGraph_Description"},Object(ua.b)("#bbcode_econ_LoadFail"))))),Sa.createElement("div",{className:"OpenGraphFooter"},Sa.createElement(we,{className:"OpenGraphMessageURL",href:t},Sa.createElement("span",{className:"OpenGraphMessageURLPosition"},Sa.createElement("span",{className:"OpenGraphMessageURL_short"},u),Sa.createElement("span",{className:"OpenGraphMessageURL_full"},t))),Sa.createElement("div",{className:"OpenGraphURLButton CopyToClipboard",onClick:this.CopyToClipboard},Sa.createElement(Id.g,null)))))}return Sa.createElement(we,{href:t},t)},si.c([yn.a],t.prototype,"CopyToClipboard",null),si.c([yn.a],t.prototype,"OnImageLoaded",null),t=si.c([up.observer],t)}(Fa),V_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.props.children?this.props.args[""]:"";return Sa.createElement(Ph,{text:Object(ua.b)("#bbcode_linkremoved")},Sa.createElement("span",{className:"filteredURL bb_removedlink",title:Object(ua.b)("#Community_RemoveLink_Tooltip")},Sa.createElement(Id.d,null),Sa.createElement("span",{className:"threatURLDesc"},Object(ua.b)("#bbcode_linkremoved_desc")),Sa.createElement("span",{className:"threatURL"},e)))},t}(Fa),j_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e=this.GetArgument();if(e){if("here"==e&&(e="online"),"all"==e||"online"==e)return Sa.createElement("span",{className:"mention me"},Sa.createElement("span",{className:"MentionAtSymbol"},"@"),e);var t=parseInt(e),i=t&&this.props.context.chat.GetMember(t);if(i||(i=t&&wd.FriendStore.GetPlayer(t)),i){var n=i.accountid==this.props.context.chat.self.accountid;return Sa.createElement(Bh,{friend:i,context:{chat:this.props.context.chat}},Sa.createElement("span",{className:"mention"+(n?" me":"")},Sa.createElement("span",{className:"MentionAtSymbol"},"@"),i.display_name))}}return Sa.createElement("span",null,"@"+e)},t=si.c([up.observer],t)}(Fa),W_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.render=function(){var e="";return"string"==typeof this.props.children?e=this.props.children:Sa.Children.forEach(this.props.children,function(e){}),e?Sa.createElement(xh,{emoticon:e,large:this.props.context.bUseLargeEmoticons}):null},t}(Fa),H_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.OnFrameLoaded=function(){this.props.context.onLoad&&this.props.context.onLoad("CBBCodeSteamStore "+this.GetArgument("app"))},t.prototype.render=function(){var e=this.GetArgument("app"),t="undefined"!=typeof SteamClient&&void 0!==SteamClient.SharedConnection;if(wd.SettingsStore.FriendsSettings.bDisableEmbedInlining){AssertMsg("string"==typeof this.props.children,"Weird contents in CBBCodeSteamStore");var i=this.props.children;return Sa.createElement(Vt,{href:i},Sa.createElement(Id.v,null),i)}var n=ai.a.STORE_BASE_URL+"widget/"+e+"?friendsui=1&inclient="+(t?"1":"0");return Sa.createElement("iframe",{className:"CBBCodeSteamStore",src:n,frameBorder:"0",width:"640",height:"190",onLoad:this.OnFrameLoaded})},si.c([yn.a],t.prototype,"OnFrameLoaded",null),t}(Fa),q_=function(){function e(){}return e.prototype.GetObject=function(e){return this.GetString(e).then(function(e){return e?JSON.parse(e):null})},e.prototype.StoreObject=function(e,t){return this.StoreString(e,JSON.stringify(t))},e}(),K_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.GetString=function(e){return SteamClient.Storage.GetString(e).then(function(t){if(t)return t;var i=localStorage.getItem(e);return i&&SteamClient.Storage.SetString(e,i),i})},t.prototype.StoreString=function(e,t){return SteamClient.Storage.SetString(e,t),Promise.resolve()},t.prototype.RemoveObject=function(e){return SteamClient.Storage.DeleteKey(e),Promise.resolve()},t}(q_),J_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.GetString=function(e){return Promise.resolve(localStorage.getItem(e))},t.prototype.StoreString=function(e,t){return localStorage.setItem(e,t),Promise.resolve()},t.prototype.RemoveObject=function(e){return localStorage.removeItem(e),Promise.resolve()},t}(q_),Y_=function(){function e(){this.m_mapEmoticonHovers=new Map}return e.prototype.GetEmoticonHover=function(e){var t=this.m_mapEmoticonHovers.get(e);return t||(t=new X_(e),this.m_mapEmoticonHovers.set(e,t)),t},e}(),X_=function(){function e(e){this.m_bVisible=!1,this.m_strEmoticonHoverHTML=void 0,this.m_bLoadingData=!1,this.m_strEmoticonName=e}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.m_bVisible&&!!this.m_strEmoticonHoverHTML},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emoticon_html",{get:function(){return this.m_strEmoticonHoverHTML},enumerable:!0,configurable:!0}),e.prototype.Show=function(t){var i=this;this.EnsureEmoticonLoaded();var n=t.currentTarget,r=Sa.createElement(zh,{hover:this,target:n});e.sm_embeddedElements.ShowElementDelayed(n.ownerDocument,50,r,this).then(function(){i.m_bVisible=!0})},e.prototype.Hide=function(t){this.m_bVisible=!1,e.sm_embeddedElements.HideElement(t.currentTarget.ownerDocument,this,500)},e.prototype.EnsureEmoticonLoaded=function(){var e=this;if(void 0===this.m_strEmoticonHoverHTML&&!this.m_bLoadingData){this.m_bLoadingData=!0;var t="OnLoadEmoticon_"+this.m_strEmoticonName,i=ai.a.COMMUNITY_CDN_URL+"economy/emoticonhover/"+encodeURIComponent(this.m_strEmoticonName)+"/jsonp.js?callback="+encodeURIComponent(t)+"&l="+encodeURIComponent(ai.a.LANGUAGE),n=void 0,r=void 0,o=function(){e.m_bLoadingData=!1,delete window[t],n&&ClearBackgroundTimeout(n),r&&r.remove()};window[t]=function(t){e.m_strEmoticonHoverHTML=t,e.m_bVisible=!0,o()},n=SetBackgroundTimeout(o,5e3),r=window.document.createElement("script"),r.type="text/javascript",r.async=!0,r.src=i,r.onerror=o,window.document.head.appendChild(r)}},e.sm_embeddedElements=new Ed.a("CEmoticonHoverContainer"),si.c([_i.observable],e.prototype,"m_bVisible",void 0),si.c([_i.observable],e.prototype,"m_strEmoticonHoverHTML",void 0),e}(),Z_=function(){function e(){this.m_mapBrowserInfo=new Map,this.m_hOverlayChatBrowserInfoChanged=null}return e.prototype.Init=function(e){var t=this;this.m_CMInterface=e,this.m_hOverlayChatBrowserInfoChanged=SteamClient.WebChat.RegisterOverlayChatBrowserInfoChanged(this.OnOverlayChatBrowserInfoChanged),this.m_CMInterface.RunWhenLoggedOn(function(){t.OnOverlayChatBrowserInfoChanged()})},e.prototype.HasOverlayInstance=function(e){return this.m_mapBrowserInfo.has(e)},e.prototype.OnOverlayChatBrowserInfoChanged=function(){var e=this;SteamClient.WebChat.GetOverlayChatBrowserInfo().then(function(t){for(var i=new Map(e.m_mapBrowserInfo),n=0,r=t;n<r.length;n++){var o=r[n];i.delete(o.unPID);var a=e.m_mapBrowserInfo.get(o.unPID);if(a&&(a.m_nBrowserID!=o.nBrowserID?(e.OverlayBrowserClosed(a),e.m_mapBrowserInfo.delete(o.unPID),a=void 0):wd.UIStore.OnOverlayBrowserChanged({m_unPID:o.unPID,m_nBrowserID:o.nBrowserID},o.nScreenWidth,o.nScreenHeight)),!a){var s={m_unPID:o.unPID,m_nBrowserID:o.nBrowserID};e.m_mapBrowserInfo.set(o.unPID,s),e.OverlayBrowserCreated(s,o.nScreenWidth,o.nScreenHeight)}}i.forEach(function(t,i){e.m_mapBrowserInfo.delete(i),e.OverlayBrowserClosed(t)})}).catch(function(e){console.log("Failed to load overlay browser info:",e)})},e.prototype.OverlayBrowserCreated=function(e,t,i){wd.UIStore.OnOverlayBrowserCreated(e,t,i),gy.ShowPopupFriendsList(e,!1,!1),wd.SetDefaultPopupContext(e)},e.prototype.OverlayBrowserClosed=function(e){wd.UIStore.SetSuppressBrowserContextBroadcasting(!0),wd.GetDefaultBrowserContext().m_nBrowserID==e.m_nBrowserID&&wd.GetDefaultBrowserContext().m_unPID==e.m_unPID&&wd.SetDefaultPopupContext(Md),console.log("Removing overlay browser window:",e.m_unPID,e.m_nBrowserID),dp.d.ClosePopupsOwnedByBrowser(e),wd.UIStore.SetSuppressBrowserContextBroadcasting(!1),wd.UIStore.OnOverlayBrowserClosed(e)},si.c([yn.a],e.prototype,"OnOverlayChatBrowserInfoChanged",null),e}(),Q_=function(){function e(e){this.m_FriendStore=e}return e.prototype.DisplayNotificationFromFriend=function(e,t,i){return void 0===i&&(i={}),this.DisplayNotification(si.a({icon:e.persona.avatar_url_medium},t),function(t){return e.OpenChatDialog(t)},i)},e.prototype.BNotificationsPermitted=function(){return!wd.ParentalStore.BIsFriendsBlocked()},e.prototype.RequestNotificationPermission=function(){return Promise.resolve(!0)},e}(),$_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.GetNotificationPermissionLevel=function(){if("undefined"==typeof Notification)return"unsupported";var e=Notification.permission;return"default"==e||"granted"==e||"denied"==e?e:"unsupported"},t.prototype.DisplayNotification=function(e,t,i){var n=this;void 0===i&&(i={});var r={body:e.body,icon:e.icon,tag:e.tag,silent:!0},o=new Notification(e.title,si.a({badge:ai.a.COMMUNITY_CDN_URL+"public/shared/images/responsive/share_steam_logo.png"},r));return window.setTimeout(function(){o.close()},i.timeoutMS||5e3),o.addEventListener("click",function(){return n.OnNotificationClicked(o,t)}),new Promise(function(e,t){o.addEventListener("close",function(){e()})})},t.prototype.OnNotificationClicked=function(e,t){t(Md),e.close()},t.prototype.BNotificationsPermitted=function(){return"granted"==this.GetNotificationPermissionLevel()},t.prototype.RequestNotificationPermission=function(){return"unsupported"==this.GetNotificationPermissionLevel()?Promise.resolve(!1):this.BNotificationsPermitted()?e.prototype.RequestNotificationPermission.call(this):new Promise(function(e,t){Notification.requestPermission(function(t){e("granted"==t)})})},t}(Q_),ey=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return si.d(t,e),t.prototype.DisplayNotification=function(e,t,i){if(void 0===i&&(i={}),e.tag){var n=JSON.stringify(e);e.tag.startsWith("groupmsg_")?SteamClient.ClientNotifications.DisplayClientNotification(_l.k_EClientUINotificationGroupChatMessage,n,t):e.tag.startsWith("message_")&&SteamClient.ClientNotifications.DisplayClientNotification(_l.k_EClientUINotificationFriendChatMessage,n,t)}return Promise.resolve()},t}(Q_),ty=function(){function e(){this.m_mapPlaybackObjs=new Map,this.m_bVoiceActive=!1,this.m_hCloseContextTimeout=void 0,this.m_nLastObservedSampleRate=0,this.m_bSupportsAudioWorkletProcessors=!1,this.m_MediaStreamDestination=void 0,this.m_MediaStreamAudioElem=void 0}return Object.defineProperty(e.prototype,"context",{get:function(){return this.m_Context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supports_audio_worklets",{get:function(){return this.m_bSupportsAudioWorkletProcessors},enumerable:!0,configurable:!0}),e.prototype.GetActiveDestination=function(){if(this.CreateContextIfNeeded(),wd.VoiceStore.IsAnyVoiceActive()&&"default"!=wd.VoiceStore.GetSelectedOutputDevice()){if(void 0==this.m_MediaStreamDestination){var e=this.m_Context;this.m_MediaStreamDestination=e.createMediaStreamDestination(),this.m_MediaStreamAudioElem=document.createElement("audio"),this.m_MediaStreamAudioElem.srcObject=this.m_MediaStreamDestination.stream,this.m_MediaStreamAudioElem.play();try{this.m_MediaStreamAudioElem.setSinkId(wd.VoiceStore.GetSelectedOutputDevice())}catch(e){console.log("(CAudioPlaybackManager) Failed setting audio output device to "+wd.VoiceStore.GetSelectedOutputDevice()+": "+e)}}return this.m_MediaStreamDestination}return this.m_Context.destination},e.prototype.PlayAudioURL=function(e,t){return void 0===t&&(t=1),this.PlayAudioURLWithRepeats(e)},e.prototype.PlayAudioURLWithRepeats=function(e,t){void 0===t&&(t=0),console.log("(CAudioPlaybackManager) web audio playback requested: "+e),this.CreateContextIfNeeded();var i=new iy(this,e,t);return this.m_mapPlaybackObjs.set(i,!0),i},e.prototype.PlaybackFinished=function(e){this.m_mapPlaybackObjs.delete(e),this.CleanupContextIfUneeded(!1)},e.prototype.SetVoiceActive=function(e){this.m_bVoiceActive=!0,this.CreateContextIfNeeded(e)},e.prototype.SetVoiceNotActive=function(){this.m_bVoiceActive=!1,this.CleanupContextIfUneeded(!0)},e.prototype.GetLastObservedSampleRate=function(){return this.m_nLastObservedSampleRate},e.prototype.CreateContextIfNeeded=function(e){if(void 0===e&&(e=void 0),void 0==this.m_Context){console.log("(CAudioPlaybackManager) new context");var t=window,i=t.AudioContext||t.webkitAudioContext||!1;this.m_Context=new i,this.m_Context.onstatechange=this.OnAudioContextStateChange,console.log("(CAudioPlaybackManager) sample rate "+this.m_Context.sampleRate),this.m_nLastObservedSampleRate=this.m_Context.sampleRate;var n=this.m_Context;void 0!=n.audioWorklet?(this.m_bSupportsAudioWorkletProcessors=!0,n.audioWorklet.addModule(ai.a.CHAT_BASE_URL+"public/javascript/webui/noisegate-audio-worklet.js?v=3").then(function(){console.log("(CAudioPlaybackManager) noisegate-audio-worklet.js worklet processor loaded"),e&&e()}).catch(function(t){console.log("(CAudioPlaybackManager) Failed to load noisegate-audio-worklet.js worklet processor"),e&&e()})):e&&e()}else e&&e()},e.prototype.DelayedCleanupContextIfInactive=function(){this.m_hCloseContextTimeout=void 0,0==this.m_mapPlaybackObjs.size&&0==this.m_bVoiceActive&&(console.log("(CAudioPlaybackManager) close context"),void 0!=this.m_MediaStreamAudioElem&&(this.m_MediaStreamAudioElem.pause(),this.m_MediaStreamAudioElem.src=void 0,this.m_MediaStreamAudioElem.srcObject=void 0),this.m_MediaStreamAudioElem=void 0,this.m_MediaStreamDestination=void 0,this.m_Context.close(),this.m_Context=void 0)},e.prototype.CleanupContextIfUneeded=function(e){if(0==this.m_mapPlaybackObjs.size&&0==this.m_bVoiceActive){if(void 0!=this.m_hCloseContextTimeout&&(clearTimeout(this.m_hCloseContextTimeout),this.m_hCloseContextTimeout=void 0),e)return void this.DelayedCleanupContextIfInactive();this.m_hCloseContextTimeout=SetBackgroundTimeout(this.DelayedCleanupContextIfInactive,1e4)}},e.prototype.OnAudioContextStateChange=function(){void 0!=this.m_Context&&console.log("(CAudioPlaybackManager) web audio context state changed: "+this.m_Context.state)},si.c([_i.observable],e.prototype,"m_nLastObservedSampleRate",void 0),si.c([_i.observable],e.prototype,"m_bSupportsAudioWorkletProcessors",void 0),si.c([yn.a],e.prototype,"DelayedCleanupContextIfInactive",null),si.c([_i.action.bound],e.prototype,"OnAudioContextStateChange",null),e}(),iy=function(){function e(e,t,i){var n=this;this.m_Source=void 0,this.m_RepeatCount=0,this.m_TimesPlayed=0,this.m_Cancelled=!1,this.m_Manager=e,this.m_URL=t,this.m_RepeatCount=i,Qi.a.get(t,{responseType:"arraybuffer"}).then(function(t){e.context.decodeAudioData(t.data).then(function(t){if(n.m_Cancelled)n.m_Manager.PlaybackFinished(n);else{var i=e.context.createBufferSource();i.buffer=t,i.connect(e.GetActiveDestination()),i.start(0),i.onended=n.OnPlaybackEnded,n.m_Source=i}}).catch(function(e){n.OnFailure()})}).catch(function(e){n.OnFailure()})}return e.prototype.StopPlayback=function(){this.m_Cancelled=!0,this.m_Source&&(this.m_Source.stop(0),this.m_Source.disconnect(),this.m_Source=void 0,this.m_Manager.PlaybackFinished(this))},Object.defineProperty(e.prototype,"url",{get:function(){return this.m_URL},enumerable:!0,configurable:!0}),e.prototype.OnFailure=function(){var e=this;SetBackgroundTimeout(function(){return e.m_Manager.PlaybackFinished(e)},1)},e.prototype.OnPlaybackEnded=function(e){if(this.m_TimesPlayed+=1,!this.m_Cancelled&&this.m_TimesPlayed<=this.m_RepeatCount){var t=this.m_Manager.context.createBufferSource();return t.buffer=this.m_Source.buffer,t.connect(this.m_Manager.GetActiveDestination()),t.start(0),t.onended=this.OnPlaybackEnded,this.m_Source.disconnect(),this.m_Source=void 0,void(this.m_Source=t)}this.m_Source.disconnect(),this.m_Source=void 0,this.m_Manager.PlaybackFinished(this)},si.c([_i.action.bound],e.prototype,"OnFailure",null),si.c([_i.action.bound],e.prototype,"OnPlaybackEnded",null),e}(),ny=function(){function e(){this.m_rgActivityCallbacks=[]}return e.prototype.AddTrackedWindow=function(e){},e.prototype.BIsUserIdle=function(e){return this.GetUserIdleTime()>e},e.prototype.AddOnIdleCallback=function(e,t){this.RunOnIdleCallback(e,t)},e.prototype.AddOnNextActivityCallback=function(e){this.m_rgActivityCallbacks.push(e)},e.prototype.FireOnUserActivityCallbacks=function(){if(this.m_rgActivityCallbacks.length){for(var e=0,t=this.m_rgActivityCallbacks;e<t.length;e++)(0,t[e])();this.m_rgActivityCallbacks=[]}},e.prototype.RunOnIdleCallback=function(e,t){this.GetUserIdleTime()>=t-1?e():SetBackgroundTimeout(this.RunOnIdleCallback.bind(this,e,t),1e3*(t-this.GetUserIdleTime()))},e}(),ry=function(e){function t(){var t=e.call(this)||this;return t.m_rgWindows=[],t.m_bEventTrackingActive=!1,t.OnUserAction(),t}return si.d(t,e),t.prototype.GetUserIdleTime=function(){return Math.floor((performance.now()-this.m_msUserLastAction)/1e3)},t.prototype.AddTrackedWindow=function(e){this.m_rgWindows.push(e),e.addEventListener("unload",this.RemoveTrackedWindow.bind(this,e)),this.m_bEventTrackingActive&&this.BindEventsForWindow(e)},t.prototype.RemoveTrackedWindow=function(e){this.m_bEventTrackingActive&&this.UnbindEventsForWindow(e),_n.c(this.m_rgWindows,e)},t.prototype.OnUserAction=function(){this.m_msUserLastAction=performance.now(),this.FireOnUserActivityCallbacks(),this.UnbindEvents(),window.setTimeout(this.BindEvents.bind(this),1e4)},t.prototype.BindEvents=function(){if(!this.m_bEventTrackingActive){this.m_bEventTrackingActive=!0;for(var e=0,t=this.m_rgWindows;e<t.length;e++){var i=t[e];this.BindEventsForWindow(i)}}},t.prototype.UnbindEvents=function(){if(this.m_bEventTrackingActive){this.m_bEventTrackingActive=!1;for(var e=0,t=this.m_rgWindows;e<t.length;e++){var i=t[e];this.UnbindEventsForWindow(i)}}},t.prototype.UnbindEventsForWindow=function(e){for(var i=0,n=t.sm_rgUserEvents;i<n.length;i++){var r=n[i];e.removeEventListener(r,this.OnUserAction)}},t.prototype.BindEventsForWindow=function(e){for(var i=0,n=t.sm_rgUserEvents;i<n.length;i++){var r=n[i];e.addEventListener(r,this.OnUserAction)}},t.sm_rgUserEvents=["mousemove","mousedown","keypress","focus"],si.c([yn.a],t.prototype,"OnUserAction",null),t}(ny),oy=function(e){function t(){var t=e.call(this)||this;return t.m_eActiveState=yl.k_EComputerActiveStateActive,t.m_hRegisterForComputerActiveStateChange=null,t.m_hFireUserStillActive=void 0,t.m_hRegisterForComputerActiveStateChange=SteamClient.WebChat.RegisterForComputerActiveStateChange(t.OnComputerActiveStateChange),t}return si.d(t,e),t.prototype.OnComputerActiveStateChange=function(e,t){var i=(new Date).getTime()/1e3-t;this.m_eActiveState=e,this.m_msUserLastAction=Math.max(performance.now()-1e3*i,this.m_msUserLastAction),this.m_eActiveState==yl.k_EComputerActiveStateActive&&(this.m_hFireUserStillActive&&(clearTimeout(this.m_hFireUserStillActive),this.m_hFireUserStillActive=void 0),this.UpdateStillActive())},t.prototype.UpdateStillActive=function(){this.m_hFireUserStillActive=void 0,this.m_eActiveState==yl.k_EComputerActiveStateActive&&(this.OnUserAction(),this.m_hFireUserStillActive=SetBackgroundTimeout(this.UpdateStillActive,1e4))},si.c([yn.a],t.prototype,"OnComputerActiveStateChange",null),si.c([yn.a],t.prototype,"UpdateStillActive",null),t}(ry),ay=function(){function e(){this.m_bDropConsumed=!1,this.m_onDropCompleteCallbacks=new vn,this.m_vecClasses=[]}return e.prototype.BInDrag=function(){return!!this.m_data},e.prototype.StartDrag=function(e){var t,i;AssertMsg(!this.m_data,"second drag started, existing data discarded",this.m_data),this.m_data=e,this.m_bDropConsumed=!1,this.m_vecClasses.push("in_global_drag"),this.m_vecClasses.push("drag_type_"+e.type),void 0!==e.source&&this.m_vecClasses.push("drag_source_"+e.source);for(var n=0,r=Array.from(dp.d.GetPopups());n<r.length;n++){var o=r[n];o.window&&o.window.document.body&&(t=o.window.document.body.classList).add.apply(t,this.m_vecClasses)}(i=window.document.body.classList).add.apply(i,this.m_vecClasses)},e.prototype.EndDrag=function(){var e,t;this.m_onDropCompleteCallbacks.Dispatch(this.m_bDropConsumed),this.m_onDropCompleteCallbacks.ClearAllCallbacks(),this.m_data=void 0,this.m_bDropConsumed=void 0;for(var i=0,n=Array.from(dp.d.GetPopups());i<n.length;i++){var r=n[i];r.window&&r.window.document.body&&(e=r.window.document.body.classList).remove.apply(e,this.m_vecClasses)}(t=window.document.body.classList).remove.apply(t,this.m_vecClasses),this.m_vecClasses=[]},e.prototype.GetDragData=function(){return this.m_data},e.prototype.BWasDropConsumed=function(){return this.m_bDropConsumed},e.prototype.SetDropConsumed=function(){AssertMsg(this.BInDrag(),"Asked to set drop consumed but no active drag"),this.m_bDropConsumed=!0},e.prototype.RegisterForDropComplete=function(e){return this.m_onDropCompleteCallbacks.Register(e)},e}(),sy=3,cy=function(){function e(e){var t=this;this.m_UsabilityHandler=c(ca.NotifyRequestClientUsabilityMetricsHandler,function(e){return si.b(t,void 0,void 0,function(){var t;return si.e(this,function(i){switch(i.label){case 0:return t=fi.Init(Qo),t.Body().set_metrics_run_id(e.Body().metrics_run_id()),t.Body().set_metrics_version(sy),t.Body().set_client_build(ai.a.BUILD_TIMESTAMP),t.Body().set_in_web(!ai.a.IN_CLIENT),wd.ready_to_render?[3,2]:[4,Object(_i.when)(function(){return wd.ready_to_render})];case 1:i.sent(),i.label=2;case 2:return[4,wd.SettingsStore.FillInChatUsabilityMetrics(t.Body())];case 3:return i.sent(),[4,wd.FriendStore.FillInChatUsabilityMetrics(t.Body())];case 4:return i.sent(),[4,wd.ChatStore.FillInChatUsabilityMetrics(t.Body())];case 5:return i.sent(),[4,wd.UIStore.FillInChatUsabilityMetrics(t.Body())];case 6:return i.sent(),[4,wd.VoiceStore.FillInChatUsabilityMetrics(t.Body())];case 7:return i.sent(),this.m_fnFillAppUsabilityMetrics?[4,this.m_fnFillAppUsabilityMetrics(t.Body())]:[3,9];case 8:i.sent(),i.label=9;case 9:return sa.NotifyClientUsabilityMetrics(wd.CMInterface.GetServiceTransport(),t),[2,1]}})})}),this.m_fnFillAppUsabilityMetrics=e}return e}(),ly=function(e){function t(t){var i=e.call(this)||this;return i.m_window=t,i}return si.d(t,e),t.prototype.BringToFront=function(){void 0!=this.m_window.SteamClient&&void 0!=this.m_window.SteamClient.Window&&void 0!=this.m_window.SteamClient.Window.BringToFront?this.m_window.SteamClient.Window.BringToFront():this.m_window.focus()},t.prototype.FlashWindow=function(){void 0!=this.m_window.SteamClient&&void 0!=this.m_window.SteamClient.Window&&void 0!=this.m_window.SteamClient.Window.FlashWindow&&this.m_window.SteamClient.Window.FlashWindow()},t.prototype.Close=function(){this.m_window&&this.m_window.close()},Object.defineProperty(t.prototype,"title",{get:function(){return this.m_window.document.title},set:function(e){this.m_window.document.title=e},enumerable:!0,configurable:!0}),t.prototype.BIsClosed=function(){return this.m_window.closed},t.prototype.BIsVisible=function(){return"visible"==this.m_window.document.visibilityState},t.prototype.BIsFocused=function(){return this.m_window.document.hasFocus()},t.prototype.OnFocus=function(e){var t=this,i=function(){e()};return this.m_window.addEventListener("focus",i),{unregister:function(){t.m_window.removeEventListener("focus",i)}}},t.prototype.GetWindow=function(){return this.m_window},t}(Cd),uy=function(e){function t(t){var i=e.call(this)||this;return i.m_popup=t,i}return si.d(t,e),Object.defineProperty(t.prototype,"container",{get:function(){return!this.m_container&&this.m_popup.window&&(this.m_container=new ly(this.m_popup.window)),this.m_container},enumerable:!0,configurable:!0}),t.prototype.Show=function(e){wd.ParentalStore.BIsFriendsBlocked()?console.log("Blocked popup due to parental controls"):this.m_popup.Show(e)},t.prototype.Close=function(){this.m_popup.Close()},t.prototype.GetWindowRestoreDetails=function(){return this.m_popup.GetWindowRestoreDetails()},t.prototype.IsMinimized=function(){return this.m_popup.IsMinimized()},t.prototype.GetBrowserContext=function(){return this.m_popup.browser_info},t.prototype.GetWindow=function(){return this.m_popup.window},t}(Sd),dy={nChatRoomListHeightPx:224,bChatRoomListCollapsed:!1,bDontShowVoiceAlert:!1,nFriendsListSingleWindowWidthPx:300,bFavoritesHintDismissed:!1,nChangeLogDismissed:0},py=function(){function e(e){var t=this;this.m_FriendHoverStore=new ih,this.m_EmoticonHoverStore=new Y_,this.m_DragDropManager=new ay,this.m_mapModalManagers=new WeakMap,this.m_OverlayStore=new Z_,this.m_UsabilityMetricsStore=new cy(this.FillInChatUsabilityMetrics.bind(this)),this.m_mapFriendsListPopups=new Map,this.m_UIDisplayPrefs=dy,this.m_bUpdatedBuildAvailable=!1,this.m_nSecondsOutOfDate=0,this.m_strLoaderWindowRestoreDetails=void 0,this.m_bShowFriendsListOnLoadFromLoader=void 0,this.m_FriendsUIApp=e,"undefined"!=typeof SteamClient&&SteamClient.WebChat&&SteamClient.WebChat.RegisterForFriendPostMessage?(SteamClient.WebChat.RegisterForFriendPostMessage(this.HandlePostMessage),window.addEventListener("message",this.HandleWebLoaderPostMessage)):(AssertMsg(!ai.a.IN_CLIENT,"Config.IN_CLIENT set but SteamClient globals not available"),window.addEventListener("message",this.HandlePostMessage)),this.m_IdleTracker=ai.a.IN_CLIENT?new oy:new ry,this.InstrumentWindow(window,Md),dp.d.AddPopupCreatedCallback(function(e){t.InstrumentWindow(e.window,e.browser_info||Md)})}return e.prototype.OverlayStore=function(){return this.m_OverlayStore},e.prototype.BNeedsUpdate=function(){return this.m_bUpdatedBuildAvailable},e.prototype.GetSecondsOutOfDate=function(){return this.m_nSecondsOutOfDate},e.prototype.InstrumentWindow=function(e,t){e.__FriendsUIBrowserContext=t,this.m_IdleTracker.AddTrackedWindow(e)},e.prototype.HandlePostMessage=function(e){var t=e.data;if(t&&t.command){var i=wd.GetDefaultBrowserContext();void 0!==e.data.pid&&(i={m_unPID:e.data.pid,m_nBrowserID:e.data.browserid}),this.ExecuteCommand(i,e.data)}},e.prototype.PerformFriendsUIUpdate=function(){var e=wd.UIStore.SerializePopupStateToObject(!0);window.parent.postMessage({message:"ChatReloadRequest",state:e},"https://steamloopback.host")},e.prototype.HandleWebLoaderPostMessage=function(e){void 0!=e.data.message&&("UpdatedBuildAvailable"==e.data.message?(console.log("There is an updated friendsui build available, we are "+(e.data.bVeryOutOfDate?"":"NOT ")+"very out of date. We are "+(e.data.bForce?"":"NOT ")+"forcing an update."),this.m_bUpdatedBuildAvailable=!0,void 0!==e.data.nSecondsOutOfDate&&(this.m_nSecondsOutOfDate=e.data.nSecondsOutOfDate),(wd.IdleTracker.GetUserIdleTime()>7200||void 0!==e.data.bForce&&1==e.data.bForce)&&this.PerformFriendsUIUpdate()):"ReloadSerializedChatState"==e.data.message&&void 0!==e.data.state?(console.log("Asked by loader to reload serialized chat state"),wd.UIStore.SetStateToRestoreFrom(e.data.state)):"LoaderWindowRestoreDetails"==e.data.message?(this.m_bShowFriendsListOnLoadFromLoader=e.data.bVisible,this.m_strLoaderWindowRestoreDetails=e.data.data):"SetPersonaState"==e.data.message&&this.SetUserPersonaStateWhenReady(e.data.persona_state))},e.prototype.SetUserPersonaStateWhenReady=function(e){wd.FriendStore.SetUserPersonaState(e)},e.prototype.ExecuteCommand=function(e,t){switch(t.command){case"CheckForUpdates":window.parent.postMessage({message:"CheckForAndForceUpdate"},"https://steamloopback.host");break;case"ShowPopupFriendsList":this.ShowPopupFriendsList(e,!1,!0);break;case"ShowFriendChatDialog":var i=new hi.a(t.steamid);i.BIsIndividualAccount()?this.m_FriendsUIApp.UIStore.ShowFriendChatDialogWhenReady(e,i.GetAccountID()):i.BIsClanAccount()&&this.m_FriendsUIApp.FriendStore.ClanStore.JoinClanChatRoom(e,i);break;case"CloseChatDialog":var i=new hi.a(t.steamid);if(i.BIsIndividualAccount()){var n=this.m_FriendsUIApp.ChatStore.GetFriendChat(i.GetAccountID(),!1);n&&wd.UIStore.CloseTabByID(n.unique_id)}else if(i.BIsClanAccount()){var r=wd.FriendStore.ClanStore.GetClan(i);if(r&&r.GetChatGroupIDIfLoaded()){var o=wd.ChatStore.GetChatRoomGroup(r.GetChatGroupIDIfLoaded());o&&wd.UIStore.CloseTabByID(o.unique_id)}}break;case"ShowInviteToTradeDialog":var i=new hi.a(t.steamid);if(i.BIsIndividualAccount()){var a=this.m_FriendsUIApp.FriendStore.GetFriend(i.GetAccountID());a&&(this.m_FriendsUIApp.UIStore.ShowFriendChatDialogWhenReady(e,a.accountid),wd.FriendStore.InviteToTrade(a))}break;case"ShowChatRoomGroupDialog":var s=t.chat_group_id,c=t.chat_room_id,o=this.m_FriendsUIApp.ChatStore.GetChatRoomGroup(s);if(o&&o.BIsCurrentUserAMember()&&!c)this.m_FriendsUIApp.UIStore.ShowAndOrActivateChatRoomGroupWhenReady(e,o,!0);else{var l=wd.ChatStore.InviteStore.GetDirectInviteInfo(s,c,wd.FriendStore.self.accountid);Of({invite:l,inviter:null},e,window)}break;case"ShowChatRoomGroupInvite":if(wd.ready_to_render){var u=t.invite_code,l=wd.ChatStore.InviteStore.GetInviteFromCode(u);Of({invite:l,inviter:null},e,window)}break;case"SetPersonaState":wd.FriendStore.SetUserPersonaState(t.persona_state);break;case"ShowWatchBroadcast":var d=new hi.a(t.steamid);wd.UIStore.ShowOrActivateBroadcast(e,d.GetAccountID(),!0).ShowWatchPromptDialog()}},e.prototype.Init=function(e,t,i){var n=this,r=[],o=this.m_FriendsUIApp.SettingsStore.GetObjectFromLocalStorageWhenReady("UIDisplayPrefs",dy).then(function(e){Object(_i.runInAction)(function(){n.m_UIDisplayPrefs=e})});if(r.push(o),e.RunWhenLoggedOn(function(){dp.d.SetCurrentLoggedInAccountID(e.steamid.GetAccountID())}),this.m_WebLogonManager=i,Rd.b.GetBrowserInfoForPopup=Qt,t&&this.m_OverlayStore.Init(e),window.addEventListener("dragover",function(e){(e||event).preventDefault()},!1),window.addEventListener("dragenter",function(e){(e||event).preventDefault()},!1),window.addEventListener("drop",function(e){(e||event).preventDefault()},!1),ai.a.IN_CLIENT&&void 0!==SteamClient.FriendSettings.GetEnabledFeatures){var a=SteamClient.FriendSettings.GetEnabledFeatures().then(function(e){for(var t=!1,i=0,r=e;i<r.length;i++){var o=r[i];if("LoaderWindowSynchronization"==o.feature){t=o.bEnabled;break}}return t?Object(_i.when)(function(){return void 0!==n.m_strLoaderWindowRestoreDetails}):Promise.resolve()});r.push(a)}return r},Object.defineProperty(e.prototype,"FriendHoverStore",{get:function(){return this.m_FriendHoverStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EmoticonHoverStore",{get:function(){return this.m_EmoticonHoverStore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WebLogonManager",{get:function(){return this.m_WebLogonManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DragDropManager",{get:function(){return this.m_DragDropManager},enumerable:!0,configurable:!0}),e.prototype.GetModalManager=function(e){var t=this.m_mapModalManagers.get(e);return t||(t=new hy,this.m_mapModalManagers.set(e,t)),t},Object.defineProperty(e.prototype,"IdleTrackerWeb",{get:function(){return this.m_IdleTracker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UIDisplayPrefs",{get:function(){return this.m_UIDisplayPrefs},enumerable:!0,configurable:!0}),e.prototype.SetUIDisplayPref=function(e,t){var i=this;this.m_UIDisplayPrefs[e]!=t&&(this.m_UIDisplayPrefs[e]=t,this.m_iTimeoutSaveUIDisplayPrefs&&window.clearTimeout(this.m_iTimeoutSaveUIDisplayPrefs),this.m_iTimeoutSaveUIDisplayPrefs=window.setTimeout(function(){i.m_FriendsUIApp.SettingsStore.StoreObjectInLocalStorage("UIDisplayPrefs",i.m_UIDisplayPrefs),i.m_iTimeoutSaveUIDisplayPrefs=void 0},1e3))},e.prototype.ShowPopupFriendsList=function(e,t,i){if(wd.ParentalStore.BIsFriendsBlocked())return void console.log("Blocked friends list popup due to parental controls");var n=this.m_mapFriendsListPopups.get(e.m_unPID);if(n)return void(!t&&i&&n.Focus());n=new bf(this.m_FriendsUIApp.FriendStore,this.m_FriendsUIApp.ChatStore,e,t),this.m_mapFriendsListPopups.set(e.m_unPID,n),n.Show(!t&&i);var r=new uy(n);wd.UIStore.GetPerContextChatData(e).SetFriendsListWindow(r.container),wd.UIStore.SerializePopupState()},e.prototype.OnFriendsListClosed=function(e){this.m_mapFriendsListPopups.delete(e.m_unPID),wd.UIStore.GetPerContextChatData(e).SetFriendsListWindow(void 0),wd.UIStore.SerializePopupState()},e.prototype.ToggleSingleWindowToggle=function(e){var t=Zt(e);if(wd.UIStore.BIsFriendsListSingleWindow(t)){var i=Math.min(gy.UIDisplayPrefs.nFriendsListSingleWindowWidthPx,e.screen.availWidth);e.SteamClient.Window.ResizeTo(i,e.innerHeight)}else{var i=Math.min(1280,e.screen.availWidth);e.SteamClient.Window.ResizeTo(i,e.innerHeight),gy.SetUIDisplayPref("nFriendsListSingleWindowWidthPx",e.innerWidth)}},e.prototype.FillInChatUsabilityMetrics=function(e){e.ui_state().set_friends_list_group_chats_height(this.UIDisplayPrefs.nChatRoomListHeightPx);var t=wd.UIStore.GetPerContextChatData(Md),i=t.friends_list_window;i&&i instanceof ly&&(e.ui_state().set_friends_list_width(i.GetWindow().outerWidth),e.ui_state().set_friends_list_height(i.GetWindow().outerHeight));for(var n=void 0,r=0,o=Array.from(t.popup_list);r<o.length;r++){var a=o[r];if(n=a,a.tab_set===t.default_tabset&&!t.IsFriendsListSingleWindow())break}n&&n.popup.GetWindow()&&(e.ui_state().set_friends_list_width(n.popup.GetWindow().outerWidth),e.ui_state().set_friends_list_height(n.popup.GetWindow().outerHeight))},si.c([_i.observable],e.prototype,"m_UIDisplayPrefs",void 0),si.c([_i.observable],e.prototype,"m_bUpdatedBuildAvailable",void 0),si.c([_i.observable],e.prototype,"m_nSecondsOutOfDate",void 0),si.c([_i.observable],e.prototype,"m_strLoaderWindowRestoreDetails",void 0),si.c([_i.observable],e.prototype,"m_bShowFriendsListOnLoadFromLoader",void 0),si.c([yn.a],e.prototype,"HandlePostMessage",null),si.c([yn.a],e.prototype,"HandleWebLoaderPostMessage",null),si.c([Q],e.prototype,"SetUserPersonaStateWhenReady",null),si.c([_i.computed],e.prototype,"UIDisplayPrefs",null),si.c([_i.action],e.prototype,"SetUIDisplayPref",null),si.c([Q],e.prototype,"ShowPopupFriendsList",null),e}(),my=function(e){function t(){var t=e.call(this,ai.a.IN_CLIENT&&void 0!==SteamClient.Storage?new K_:new J_)||this;return t.m_AudioPlaybackManager=new ty,t.m_DesktopApp=new py(t),gy=t.m_DesktopApp,AssertMsg(!ai.a.IN_MOBILE,"DesktopApp initialized in mobile context"),t}return si.d(t,e),t.prototype.Init=function(t,i,n){var r=i?new ey(this.m_FriendStore):new $_(this.m_FriendStore),o=this.m_DesktopApp.Init(t,i,n);e.prototype.InitInternal.call(this,t,r,o),_f(Md,this.m_FriendStore,this.m_ChatStore,document.getElementById("friendslist-container"),i)},t.prototype.OnReadyToRender=function(){return si.b(this,void 0,void 0,function(){var e,t,i,n,r,o,a,s;return si.e(this,function(c){switch(c.label){case 0:return[4,this.UIStore.RestorePopupState()];case 1:c.sent(),e=dp.d.GetRestoreDetails("PopupFriendsListDimensions"),e&&window.parent.postMessage({message:"FriendsListRestoreDetailsChanged",data:e},"https://steamloopback.host"),t="oFriendsUIStartupParam";try{i=window.sessionStorage.getItem(t),i&&(n=JSON.parse(i))&&n.command&&this.m_DesktopApp.ExecuteCommand(Md,n.command),window.sessionStorage.removeItem(t)}catch(e){}if(window.opener)for(r=[ai.a.COMMUNITY_BASE_URL,ai.a.STORE_BASE_URL,ai.a.CHAT_BASE_URL],o=0,a=r;o<a.length;o++)s=a[o],window.opener.postMessage("FriendsUIReady",s.replace(/\/$/,""));return[2]}})})},Object.defineProperty(t.prototype,"AudioPlaybackManager",{get:function(){return this.m_AudioPlaybackManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IdleTracker",{get:function(){return this.m_DesktopApp.IdleTrackerWeb},enumerable:!0,configurable:!0}),t.prototype.AddPopupManagerShutdownCallback=function(e){dp.d.AddShutdownCallback(e)},t.prototype.GetChatRoomBBCodeDictionary=function(){return Pt()},t.prototype.GetFriendChatBBCodeDictionary=function(){return xt()},t.prototype.GetNotificationBBCodeDictionary=function(){return Ut()},t.prototype.CreateChatPopup=function(e,t,i,n,r,o){var a=new Sf(e,t,i,n,r,o),s=new uy(a);return new Xl(s,a)},t.prototype.ShowPopupFriendsListAtStartup=function(e){var t=e;if(void 0!==gy.m_bShowFriendsListOnLoadFromLoader&&(t=gy.m_bShowFriendsListOnLoadFromLoader),t){var i=!0===gy.m_bShowFriendsListOnLoadFromLoader;wd.GetDefaultBrowserContext()!=Md&&(console.log("Blocked taking focus in root context during ShowPopupFriendsList, because other context is primary"),i=!1),wd.ShowPopupFriendsList(Md,!1,i)}},t.prototype.ShowPopupFriendsList=function(e,t,i){this.m_DesktopApp.ShowPopupFriendsList(e,t,i)},t.prototype.OnFriendsListClosed=function(e){this.m_DesktopApp.OnFriendsListClosed(e)},t.prototype.ShowAlert=function(e,t,i){return _e(window,e,t,i)},t.prototype.OpenURLInBrowser=function(e,t){ai.a.IN_CLIENT?SteamClient.WebChat.OpenURLInClient(e,t.m_unPID):Ee(window,e)},t.prototype.BIsValidBrowserContext=function(t){return e.prototype.BIsValidBrowserContext.call(this,t)||this.m_DesktopApp.OverlayStore().HasOverlayInstance(t.m_unPID)},t.prototype.ShowCloseActiveVoiceConfirmation=function(e,t){this.m_DesktopApp.UIDisplayPrefs.bDontShowVoiceAlert||mt(t.popup.GetWindow())},t.prototype.SignOutOfFriends=function(e){var t=wd.UIStore.GetRootChatPerContextData().friends_list_window&&wd.UIStore.GetRootChatPerContextData().friends_list_window.BIsVisible();window.parent.postMessage({message:"SignOutRequest",bShowLoaderWindow:t,browserContext:e},"https://steamloopback.host")},t}(Fd),hy=function(){function e(){this.m_bUsePopups=!1,this.m_rgModals=_i.observable.array(null,{deep:!1})}return Object.defineProperty(e.prototype,"modals",{get:function(){return this.m_rgModals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active_modal",{get:function(){return this.m_rgModals.length?this.m_rgModals[this.m_rgModals.length-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.ShowModal=function(e){var t=this,i={element:e};return this.m_rgModals.push(i),{Close:function(){var e=t.m_rgModals.indexOf(i);-1!=e&&t.m_rgModals.splice(e,1)}}},e}(),gy=void 0,fy={steamid:""},_y=function(){function e(){this.m_iTimeoutLogin=void 0,this.m_eLogonState=0,this.m_bLogonDialogVisisible=!1}return e.prototype.Init=function(e){var t=this;this.m_fnLaunchChat=e,this.m_steamID=fy.steamid,window.addEventListener("message",this.HandlePostMessage),On.render(Sa.createElement(Ig,{app:this}),document.getElementById("friendslist-container")),this.m_iTimeoutLogin=SetBackgroundTimeout(function(){0==t.m_eLogonState&&(t.m_eLogonState=1)},2500)},e.prototype.LaunchChat=function(){On.unmountComponentAtNode(document.getElementById("friendslist-container")),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),ei(),this.m_fnLaunchChat()},e.prototype.GetLoginURL=function(){return ai.a.STORE_BASE_URL+"login/?steamtv"},e.prototype.BIsPerformingLogonCheck=function(){return 0==this.m_eLogonState||1==this.m_eLogonState},e.prototype.BIsLogonDialogVisible=function(){return this.m_bLogonDialogVisisible},e.prototype.ShowLogonDialog=function(){this.m_bLogonDialogVisisible=!0},e.prototype.BReadyToRender=function(){return 0!=this.m_eLogonState},e.prototype.DismissLogonDialog=function(){this.m_bLogonDialogVisisible=!1},e.prototype.GetSteamIDWatched=function(){return this.m_steamID},e.prototype.ExtractOrigin=function(e){return e.replace(/^(https?:\/\/[^\/]*).*$/,"$1")},e.prototype.HandlePostMessage=function(e){if(e.origin!=this.ExtractOrigin(ai.a.STORE_BASE_URL)&&e.origin!=this.ExtractOrigin(ai.a.CHAT_BASE_URL))return void console.warn('Ignoring message from untrusted domain "'+e.origin+'"');var t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()},si.c([_i.observable],e.prototype,"m_eLogonState",void 0),si.c([_i.observable],e.prototype,"m_bLogonDialogVisisible",void 0),si.c([_i.observable],e.prototype,"m_steamID",void 0),si.c([_i.action],e.prototype,"LaunchChat",null),si.c([_i.action.bound],e.prototype,"HandlePostMessage",null),e}(),yy=(i("kllU"),i("U3bN"));window.AssertMsg=yy.a,window.IsFeatureBroadcastEnabled=ti,document.addEventListener("DOMContentLoaded",function(){Object(ai.c)();var e=!0;if(!ai.a.IN_CLIENT&&ai.a.STEAM_TV){var t=Object(ai.b)("broadcast");t&&Object.assign(fy,t),ai.d.logged_in?ei():(e=!1,ni())}e&&ii()});var vy,by,Cy;window.LocalizationReady=ri},edqd:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("BJf/"),r=i.n(n),o=i("1zkO"),a=i("oy0q"),s=function(){function e(t,i,n,o){void 0===t&&(t=0),t instanceof e?this.m_ulSteamID=t.m_ulSteamID:"string"==typeof t?this.m_ulSteamID=r.a.fromString(t,!0):i&&n&&void 0!==o?this.SetFromComponents(t,o,n,i):this.m_ulSteamID=t?r.a.fromNumber(t,!0):r.a.UZERO}return e.InitFromAccountID=function(t){return new e(t,a.a.EUNIVERSE,1,o.k)},e.InitFromClanID=function(t){return new e(t,a.a.EUNIVERSE,7,0)},e.prototype.GetAccountID=function(){return this.m_ulSteamID.getLowBitsUnsigned()},e.prototype.GetInstance=function(){return 1048575&this.m_ulSteamID.getHighBitsUnsigned()},e.prototype.GetAccountType=function(){return this.m_ulSteamID.getHighBitsUnsigned()>>20&15},e.prototype.GetUniverse=function(){return this.m_ulSteamID.getHighBitsUnsigned()>>24&255},e.prototype.ConvertTo64BitString=function(){return this.m_ulSteamID.toString()},e.prototype.Render=function(){switch(this.GetAccountType()){case 0:return"[I:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 7:return"[g:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 4:return"[A:"+this.GetUniverse()+":"+this.GetAccountID()+":"+this.GetInstance()+"]";case 3:return"[G:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 2:return"[M:"+this.GetUniverse()+":"+this.GetAccountID()+":"+this.GetInstance()+"]";case 5:return"[P:"+this.GetUniverse()+":"+this.GetAccountID()+"]";case 6:return"[C:"+this.GetUniverse()+":"+this.GetAccountID()+"]";default:return"[U:"+this.GetUniverse()+":"+this.GetAccountID()+"]"}},e.prototype.BIsValid=function(){var e=this.GetAccountType();if(e<=0||e>=11)return!1;var t=this.GetUniverse();if(t<=0||t>=5)return!1;if(1==e){if(0==this.GetAccountID()||this.GetInstance()>o.l)return!1}else if(7==e){if(0==this.GetAccountID()||0!=this.GetInstance())return!1}else if(3==e&&0==this.GetAccountID())return!1;return!0},e.prototype.BIsIndividualAccount=function(){return 1==this.GetAccountType()},e.prototype.BIsClanAccount=function(){return 7==this.GetAccountType()},e.prototype.SetAccountID=function(e){this.m_ulSteamID=new r.a(e,this.m_ulSteamID.getHighBitsUnsigned(),!0)},e.prototype.SetInstance=function(e){this.SetFromComponents(this.GetAccountID(),e,this.GetAccountType(),this.GetUniverse())},e.prototype.SetAccountType=function(e){this.SetFromComponents(this.GetAccountID(),this.GetInstance(),e,this.GetUniverse())},e.prototype.SetUniverse=function(e){this.SetFromComponents(this.GetAccountID(),this.GetInstance(),this.GetAccountType(),e)},e.prototype.SetFromComponents=function(e,t,i,n){var o=((255&n)<<24)+((15&i)<<20)+(1048575&t),a=4294967295&e;this.m_ulSteamID=new r.a(a,o,!0)},e}()},kllU:function(e,t,i){"use strict";var n=i("mtWM");i.n(n),i("m5yx"),i("V/Vt")},lEUG:function(e,t,i){"use strict";function n(e,t,i){t<0||i<0||(i>=e.length&&(e[i]=void 0),e.splice(i,0,e.splice(t,1)[0]))}function r(e,t){return o(e,function(e){return t==e})}function o(e,t){var i=e.findIndex(t);return i>=0&&(e.splice(i,1),!0)}function a(e,t){return e.reduce(function(e,i,n,r){return e+(t(i,n,r)?1:0)},0)}function s(e,t){return e.filter(function(e){return t!==e})}function c(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}function l(e,t,i){for(var n=0,r=e.length-1;n<=r;){var o=Math.floor((n+r)/2),a=i(e[o],t);if(a<0)n=o+1;else if(a>0)r=o-1;else{if(r==o)return o;if(o==n)return r>o&&i(t,e[o+1])<0?o:o+1;n=o}}return r}function u(e,t,i){var n=l(e,t,i);e.splice(n+1,0,t)}t.e=n,t.c=r,t.d=o,t.b=a,t.a=s,t.f=c,t.g=l,t.h=u},m5yx:function(e,t,i){"use strict";var n=i("oy0q");i.d(t,"a",function(){return n.a}),i.d(t,"d",function(){return n.d}),i.d(t,"c",function(){return n.c}),i.d(t,"b",function(){return n.b})},nErl:function(e,t){(function(t){e.exports=t}).call(t,{})},oy0q:function(e,t,i){"use strict";function n(){var e=r("config");e&&Object.assign(o,e);var t=r("userinfo");t&&Object.assign(a,t),window.__webpack_public_path__=o.CDN_URL}function r(e,t){void 0===t&&(t=s);var i=document.getElementById(t);if(i)try{return JSON.parse(i.getAttribute("data-"+e)||"")}catch(e){console.error("Failed to parse config",e)}else console.error("Missing config element #"+t)}i.d(t,"a",function(){return o}),i.d(t,"d",function(){return a}),t.c=n,t.b=r;var o={EUNIVERSE:0,WEB_UNIVERSE:"",LANGUAGE:"english",CDN_URL:"",MEDIA_CDN_COMMUNITY_URL:"",MEDIA_CDN_URL:"",COMMUNITY_CDN_URL:"",COMMUNITY_CDN_ASSET_URL:"",PUBLIC_SHARED_URL:"",COMMUNITY_BASE_URL:"",CHAT_BASE_URL:"",STORE_BASE_URL:"",STORE_ICON_BASE_URL:"",IN_CLIENT:!1,USE_POPUPS:!1,IN_MOBILE:!1,WEBAPI_BASE_URL:"",TOKEN_URL:"",SESSIONID:"",BUILD_TIMESTAMP:0,FRIENDSUI_BETA:!1,STEAM_TV:!1},a={logged_in:!1,steamid:"",accountid:0,account_name:"",token:void 0,token_use_id:void 0},s="webui_config"},rZel:function(e,t,i){"use strict";function n(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=f.LocalizeString(e);return n?(t.length>0&&(n=n.replace(/%(\d+)\$s/g,function(e,i){if(i<=t.length&&i>=1){var n=t[i-1];return String(void 0===n||null===n?"":n)}return e})),n):e}function r(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=f.LocalizeString(e);if(!n)return e;for(var r,o=[],a=/(.*?)%(\d+)\$s/g,s=0;r=a.exec(n);){s+=r[0].length,o.push(r[1]);var l=parseInt(r[2]);l>=1&&l<=t.length&&o.push(t[l-1])}return o.push(n.substr(s)),c.createElement.apply(c,[c.Fragment,null].concat(o))}function o(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return 1===t||"1"===t?n.apply(void 0,[e,t].concat(i)):n.apply(void 0,[e+"_Plural",t].concat(i))}function a(e,t){return void 0===t&&(t=!1),s(e,!t)}function s(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var r=t?"#TimeSince_":"#TimeInterval_";return e>=2*u?n(r+"XYears",Math.floor(e/u)):e>=u?(e-=u,e>=2*d?n(r+"1YearXMonths",Math.floor(e/d)):n(r+"1Year")):e>=2*d?n(r+"XMonths",Math.floor(e/d)):e>=2*p?n(r+"XWeeks",Math.floor(e/p)):e>=2*m?n(r+"XDays",Math.floor(e/m)):e>=m?(e-=m,e>=2*h?n(r+"1DayXHours",Math.floor(e/h)):n(r+"1Day")):e>=2*h?n(r+"XHours",Math.floor(e/h)):e>=h?(e-=h,e>=2*g&&i?n(r+"1HourXMinutes",Math.floor(e/g)):n(r+"1Hour")):i?e>=2*g?n(r+"XMinutes",Math.floor(e/g)):n(e>=g?r+"1Minute":r+"LessThanAMinute"):n(r+"LessThanAnHour")}t.b=n,t.d=r,t.c=o,t.e=a,i.d(t,"a",function(){return f});var c=i("Jmof"),l=(i.n(c),function(){function e(){this.m_mapTokens=new Map,this.m_mapFallbackTokens=new Map}return e.prototype.InitFromObjects=function(e,t,i,n){var r=this;this.m_mapTokens.clear(),Object.keys(i).forEach(function(e,t){r.m_mapTokens.set(e,i[e])}),Object.keys(e).forEach(function(t,i){r.m_mapTokens.set(t,e[t])}),t&&Object.keys(t).forEach(function(e,i){r.m_mapTokens.has(e)||r.m_mapTokens.set(e,t[e]),r.m_mapFallbackTokens.set(e,t[e])}),n&&Object.keys(n).forEach(function(e,t){r.m_mapTokens.has(e)||r.m_mapTokens.set(e,n[e]),r.m_mapFallbackTokens.has(e)||r.m_mapFallbackTokens.set(e,n[e])})},e.prototype.InitDirect=function(e){var t=this;this.m_mapTokens.clear(),this.m_mapFallbackTokens.clear(),Object.keys(e).forEach(function(i,n){t.m_mapTokens.set(i,e[i])})},e.prototype.GetPreferredLocales=function(){var e=["en-US"];return"undefined"!=typeof navigator&&void 0!==navigator.languages&&(e=navigator.languages),e},e.prototype.LocalizeString=function(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";var t=this.m_mapTokens.get(e.substring(1));return void 0===t?"":t},e.prototype.LocalizeStringFromFallback=function(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";var t=this.m_mapFallbackTokens.get(e.substring(1));return void 0===t?"":t},e}()),u=31536e3,d=2628e3,p=604800,m=86400,h=3600,g=60,f=new l;window.LocalizationManager=f},x0X8:function(e,t,i){"use strict";function n(e){return function(t,i,n){var r=n.value;n.value=function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var a=this[i+"_DebounceProperties"];void 0===a&&(a=this[i+"_DebounceProperties"]={hTimer:void 0,nPending:0}),void 0===a.hTimer?(r.apply(this,n),a.hTimer=window.setInterval(function(){a.nPending>0?(r.apply(t,n),a.nPending=0):(window.clearInterval(a.hTimer),a.hTimer=void 0)},e)):a.nPending+=1}}}t.a=n}},["cVBm"]);